<html>
<head>
<title>When to Use Context API vs Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">何时使用上下文API vs Redux</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/when-to-use-context-api-vs-redux-2452ae938784?source=collection_archive---------3-----------------------#2021-11-26">https://javascript.plainenglish.io/when-to-use-context-api-vs-redux-2452ae938784?source=collection_archive---------3-----------------------#2021-11-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ec8c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">两者的正确用例</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8f74c45ba87ade2d343a5ac54202965d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-mloSsQrQ9OyDmkD.png"/></div></div></figure><blockquote class="kr ks kt"><p id="20aa" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果有人问我任何网站最重要的部分是什么，我的回答总是一样的。是<strong class="kx ir">应用状态</strong>。毕竟，是国家决定了用户将会看到什么。</p></blockquote><p id="e3d6" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在React中，每个组件都有其本地状态。这种状态可以用来跟踪组件内部发生的事情。但是，当我们想要跟踪应用程序整体内部发生的事情时，本地状态已经不够了。对于这些情况，我们需要使用全局状态。</p><p id="3cdd" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">要为React选择全局状态管理，我们有很多选项可供选择。多年来，<a class="ae lu" href="https://redux.js.org" rel="noopener ugc nofollow" target="_blank"> Redux </a>似乎是最受欢迎的选择。但是当引入上下文API时，开发人员开始迅速采用它。在某些场景中，他们开始用上下文替换Redux。随着这一切的发生，一个大问题开始出现。🗽</p><p id="5b83" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><strong class="kx ir">什么时候使用上下文API vs Redux？</strong></p><p id="7e5e" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">如果你只是使用Redux来避免传递道具，你可以用Context API代替它。上下文对于在组件之间共享琐碎的状态片段非常有用。</p><p id="7f43" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">Redux更加强大，并提供了一组Context所没有的便利特性。它非常适合管理集中式状态和处理API请求。</p><h1 id="b3a3" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">上下文API和Redux的区别</h1><p id="f2c5" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">这两个库的主要区别在于Redux以集中的方式处理状态的变化。另一方面，当它们发生在组件级别时，上下文处理它们。但是，为了更好地了解这两个库之间的区别，我们必须分别来看它们。</p><h2 id="20af" class="ms lw iq bd lx mt mu dn mb mv mw dp mf lr mx my mh ls mz na mj lt nb nc ml nd bi translated">上下文API</h2><blockquote class="kr ks kt"><p id="accc" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="iq">上下文提供了一种通过组件树传递数据的方法，而不必在每一层手动向下传递属性。</em></p></blockquote><p id="a4c7" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在React世界中，上下文API是一个相当新的概念。它的主要目的是在不使用道具或动作的情况下在组件之间共享数据。它旨在共享React组件树的全局数据，如主题或首选语言。上下文可以显著降低应用程序中状态管理的复杂性。🚀</p><p id="90db" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">它有两个核心概念:</p><p id="fdb2" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">提供者的工作是定义和跟踪状态的某些部分。嵌套在<code class="fe ne nf ng nh b">Provider</code>中的所有子节点都可以访问这个状态。这些孩子通常被称为消费者。<code class="fe ne nf ng nh b">Consumer</code>是从上下文中访问或修改状态的每个组件<code class="fe ne nf ng nh b">Provider</code>。</p><h2 id="d6d2" class="ms lw iq bd lx mt mu dn mb mv mw dp mf lr mx my mh ls mz na mj lt nb nc ml nd bi translated">Redux</h2><blockquote class="kr ks kt"><p id="a332" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="iq"> Redux帮你写出</em> <strong class="kx ir"> <em class="iq">行为一致</em> </strong> <em class="iq">的应用，运行在不同的环境下，并且</em> <strong class="kx ir"> <em class="iq">易于测试</em> </strong> <em class="iq">。将应用程序的状态和逻辑集中起来，可以实现强大的功能，如</em> <strong class="kx ir"> <em class="iq">【撤销/重做】</em></strong><em class="iq"/><strong class="kx ir"><em class="iq">状态持久化</em> </strong> <em class="iq">等等。</em></p></blockquote><p id="5dca" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">Redux是一个JavaScript库，有助于以集中的方式管理数据流。它存储应用程序的整个状态。任何组件都可以访问这种状态，而不必将属性从一个组件传递到另一个组件。它有3个核心概念:</p><p id="b833" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">动作是向Redux存储发送数据的事件。它们可以由用户交互触发，也可以由您的应用程序直接调用。每个动作都需要有一个唯一的类型和与之相关联的有效负载。示例操作可能如下所示。👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="881d" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">调度一个动作将触发reducer运行。缩减器是一个函数，它获取当前状态，并基于它接收到的动作，返回一个新状态。</p><p id="e425" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">所有这些都发生在店内。商店只有一个责任，那就是保存应用程序状态。强烈建议在任何使用Redux的应用程序中只保留一个存储。</p><p id="0f4f" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">现在我们了解了Redux和Context是如何工作的。是时候看看他们俩的申请了。</p><h1 id="a826" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">上下文API应用程序</h1><p id="4bc3" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">上下文非常适合用于共享全局数据，比如当前已验证的用户、主题或用户语言。</p><p id="caaf" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">现在，让我们为React应用程序实现跟踪<code class="fe ne nf ng nh b">theme</code>属性的上下文。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="42e7" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">正如您在上面的例子中所看到的，Context不需要大量的设置和样板代码就可以工作。</p><p id="f942" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">最重要的是，它默认包含在React库中，因此您不必安装任何依赖项。👌</p><h1 id="524b" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">Redux应用</h1><p id="6785" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">Redux最常用于以下情况:</p><ul class=""><li id="9b00" class="nk nl iq kx b ky kz lb lc lr nm ls nn lt no lq np nq nr ns bi translated">应用程序有大量的状态，许多组件都需要。</li><li id="a299" class="nk nl iq kx b ky nt lb nu lr nv ls nw lt nx lq np nq nr ns bi translated">应用程序状态经常更新。</li><li id="d577" class="nk nl iq kx b ky nt lb nu lr nv ls nw lt nx lq np nq nr ns bi translated">更新应用程序状态的逻辑很复杂。</li></ul><p id="4cfe" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">为了更好地理解Redux的理想用例。让我们实现跟踪应用程序用户列表的状态。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="52b1" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">为了初始化Redux，我们需要将整个App组件包装在<code class="fe ne nf ng nh b">Redux Provider</code>中，并初始化商店。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="a6e7" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">最后一部分是访问状态，这可以通过将组件连接到状态来完成。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="8fb3" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">这是展示Redux强大功能的一个非常简单的例子。可以想象，Redux可以用来处理复杂得多的状态。毕竟它就是为此而生的。</p><blockquote class="kr ks kt"><p id="b16d" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="iq"> Redux试图通过为我们提供一套有用的工具来简化复杂状态的管理，如Redux开发工具、状态持久化、异步操作等……</em></p></blockquote><h1 id="28f7" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">其他状态管理工具</h1><p id="6b05" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">在本文中，我们试图比较React上下文API和Redux。但是正如你可能猜到的，它们不是唯一的状态管理工具。事实上，还有许多其他工具以自己独特的方式处理状态管理。🕺🏻</p><p id="31c9" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在这一部分，我们将提到其中的一些。</p><blockquote class="kr ks kt"><p id="159f" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="iq">我们不是鼓励你使用这些工具，也不是说它们比Redux或Context API更好。我们只是想传播这个消息。</em></p></blockquote><h2 id="c048" class="ms lw iq bd lx mt mu dn mb mv mw dp mf lr mx my mh ls mz na mj lt nb nc ml nd bi translated">反应-查询</h2><p id="f5b9" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">React Query是专门为处理数据获取的状态管理而开发的。它提供了许多助手，使数据抓取变得轻而易举。</p><p id="7237" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">要了解更多信息，请在这里阅读文档<a class="ae lu" href="https://react-query.tanstack.com/" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="cf44" class="ms lw iq bd lx mt mu dn mb mv mw dp mf lr mx my mh ls mz na mj lt nb nc ml nd bi translated">报应</h2><p id="7e4e" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">反冲是一个相当新的国家管理工具，由脸书开发。目前仍在积极开发中。在反冲中，每一片态称为一个原子，原子可以用选择器组合。您可以将原子和选择器结合起来，为您的应用程序创建独特的数据结构。</p><p id="d1be" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">这里可以了解更多<a class="ae lu" href="https://recoiljs.org/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="7368" class="ms lw iq bd lx mt mu dn mb mv mw dp mf lr mx my mh ls mz na mj lt nb nc ml nd bi translated">MobX</h2><p id="bf11" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">MobX实现了一种基于类的方法。MobX背后的整个想法是让状态管理“可观察”。你可以在这里阅读更多关于MobX <a class="ae lu" href="https://mobx.js.org/README.html" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><h1 id="bbe2" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">总结想法</h1><p id="f05c" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">所有web应用程序都需要状态管理。当我们决定如何在React应用程序中管理全局状态时。常见的问题是:什么时候使用上下文API vs Redux。理解Context API和Redux的工作原理很重要。为您的使用案例选择正确的工具也很重要。👍</p></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><p id="b7c7" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><em class="kw">原载于</em><a class="ae lu" href="https://www.upbeatcode.com/react/when-to-use-context-api-vs-redux/" rel="noopener ugc nofollow" target="_blank"><em class="kw">https://www.upbeatcode.com</em></a><em class="kw">。</em></p><p id="9fe4" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><em class="kw">更多内容看</em> <a class="ae lu" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="kw">说白了。报名参加我们的</em><strong class="kx ir"><em class="kw"/></strong><a class="ae lu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="kw">免费每周简讯在这里</em> </strong> </a> <strong class="kx ir"> <em class="kw">。</em>T41】</strong></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>We need to talk about the one-liners.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们需要谈谈俏皮话。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/we-need-to-talk-about-the-one-liners-58f460c05fc5?source=collection_archive---------1-----------------------#2021-09-25">https://javascript.plainenglish.io/we-need-to-talk-about-the-one-liners-58f460c05fc5?source=collection_archive---------1-----------------------#2021-09-25</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="83db" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">在我多年的开发生涯中，似乎每个人都在努力缩短代码。如果你能用更少的代码行做同样的事情，那就更好了。但是是吗？</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/bd8a38f99598f470a64b794831bd8ac6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JX0SgIaAeErrZRey"/></div></div></figure><p id="1976" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">嗯……不。通常写更短的代码并不是更好。博文结束？</p><p id="7f6d" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">嗯……还是没有。我认为需要澄清一下。为什么要推动短代码，为什么它不好？或者更好的是，为什么<em class="lo">能让</em>更短的代码变坏。我说<em class="lo">可以</em>，因为更长的代码会造成混乱。这都是关于代码质量的。</p><p id="ba9e" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">让我们来看一个简单的if-else语句</p><pre class="kh ki kj kk gu lp lq lr ls aw lt bi"><span id="e313" class="lu lv ir lq b gz lw lx l ly lz">if (numberOfThings &gt; 5) {<br/> proceed();<br/>} else {<br/> showError();<br/>}</span></pre><p id="2438" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这很清楚了吧？容易阅读，容易跟随，它<em class="lo"> f </em> lows好。通常这种代码会被替换成类似这样的代码</p><pre class="kh ki kj kk gu lp lq lr ls aw lt bi"><span id="e5a1" class="lu lv ir lq b gz lw lx l ly lz">numberOfThings &gt; 5 ? proceed() : showError();</span></pre><p id="bc10" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">或者这个</p><pre class="kh ki kj kk gu lp lq lr ls aw lt bi"><span id="7cbf" class="lu lv ir lq b gz lw lx l ly lz">(numberOfThings &gt; 5 ? proceed : showError)();</span></pre><p id="48cc" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">功能是相同的，但它是一行程序。它更短，但是它更好吗？在简单的情况下，如上图所示，它可能会更好，但已经很难阅读了。阅读代码可能需要2秒，而不是1秒，如果你不太熟悉if-else语句的简写形式，可能需要更多时间。</p><p id="b900" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">我们仍然只处理2个函数调用，所以这实际上可能不算太糟，但是如果它被挤在100行代码之间，使所有代码都变得更短，会不会更好？</p><p id="9184" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">但是，如果它调用的函数本身很短，而您决定省略这些函数，只将逻辑放入if-else中，那么我们会得到更可怕的东西。</p><pre class="kh ki kj kk gu lp lq lr ls aw lt bi"><span id="756f" class="lu lv ir lq b gz lw lx l ly lz">numberOfThings &gt; 5 ? $.form.submit() : $.errormessage.text = “error message”; $.errormessage.show();</span></pre><p id="15fa" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">所以现在它已经不适合在媒体上的一行。它仍然是简单的代码，但是你喜欢看到这个吗？还是更喜欢有自己功能的函数调用？</p><p id="27f3" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">当像这样的一行程序开始返回值时，当有数据转换发生时，或者以上所有情况一起发生时，事情会变得更糟。我见过一些非常糟糕的一行程序，它们是“好”代码，因为它们短小精悍。</p><p id="c327" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">为了便于阅读，是时候收回结构并重新引入更长的代码了。毕竟，人类关心结构，浏览器或你的服务器不考虑结构，或者关心代码是否更长。对于前端来说，我们已经有了缩小来使事情变得更短，而且在很多情况下，你已经有了编译器来把它变成别的东西。在许多生产环境中，您编写的代码<em class="lo">实际上</em>以完全相同的形式出现在运行代码的设备上的情况非常罕见。</p><p id="df2d" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">那么，为什么所有的努力都是为了完美的一句话呢？</p><h2 id="74d0" class="lu lv ir bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">要注重可读性！</h2><p id="1efd" class="pw-post-body-paragraph ks kt ir ku b kv mr js kx ky ms jv la lb mt ld le lf mu lh li lj mv ll lm ln ik bi translated">生产代码中最重要的是可读性。真的，这是编写代码最重要的方面，尤其是如果你在团队中工作。</p><p id="d52c" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">当然，你可能是高级开发人员，而<em class="lo">字面上的意思是</em>知道这种语言的所有细节，但是你真的希望你的初级同事能够理解这种代码并能够在此基础上进行开发吗？我不是在谈论你的语言所提供的功能。例如，JavaScript提供了一些非常好的数组函数。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj mw"><img src="../Images/b046535994e8ef57b44f86a2f00ae08f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*-a37t3ujnqmedb6hzRGveg.png"/></div><figcaption class="mx my gk gi gj mz na bd b be z dk"><a class="ae nb" href="https://twitter.com/piotr_slawinski/status/1257634325127999488" rel="noopener ugc nofollow" target="_blank">https://twitter.com/piotr_slawinski/status/1257634325127999488</a></figcaption></figure><p id="7119" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><em class="lo">在上面的例子中，</em> <code class="fe nc nd ne lq b"><em class="lo">Array.reduce</em></code> <em class="lo">不是一个初级开发人员可能理解的东西，也不知道它为什么会这样工作，但它不会在一行中塞进太多内容。尽管如此，为了清楚起见，回调函数也可以在单独的行上。</em></p><p id="6c3e" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">但是将相同的功能压缩在一行中，而<em class="lo">应该在多行中，仅仅因为这样你就可以声称它是一行程序？这从来都不是一个好兆头！它降低了代码的可维护性，使代码越来越难维护，尤其是在团队中工作的时候。</em></p><p id="8025" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">好的代码都是关于团队合作，以及当你提交代码时理解它的能力。在过去，我们都(有点)同意写不具描述性的变量名是不好的，我们应该用更少的行来压缩所有代码。</p><p id="271b" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">所以下次当你写代码的时候，问问你自己，你认为你的同事直觉上能理解代码吗？他们不需要理解内部的工作原理，但是他们能理解代码在做什么吗？这当然可以归结为自文档化的代码，所以这是你应该记住的事情。</p><p id="fbb6" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">我推荐几条规则，它们可以极大地帮助代码变得更加清晰</p><ul class=""><li id="cb76" class="nf ng ir ku b kv kw ky kz lb nh lf ni lj nj ln nk nl nm nn bi translated">编写在上下文中有意义的变量和函数名(自文档化代码)</li><li id="d9f6" class="nf ng ir ku b kv no ky np lb nq lf nr lj ns ln nk nl nm nn bi translated">如果一行做多件事，将代码分散在多行中</li><li id="ca3a" class="nf ng ir ku b kv no ky np lb nq lf nr lj ns ln nk nl nm nn bi translated">确保任何查看代码的人都能理解代码的<em class="lo">流程</em></li></ul><p id="a56b" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">我说的<em class="lo">流程</em>是指，能够理解代码<em class="lo">如何表现</em>，而不是每个函数意味着什么。</p><p id="9fb1" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">如果你是编程新手，你应该知道代码一般是如何工作的，但这并不意味着你知道这种语言提供的每一个功能。只要您能够不太麻烦地探索代码，并检查文档中来自该语言的未知(对代码读者而言)函数，那么我们都很好。</p><div class="nt nu gq gs nv nw"><a rel="noopener  ugc nofollow" target="_blank" href="/the-ultimate-guide-to-writing-self-documenting-code-998ea9a38bd3"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">编写自文档化代码的终极指南</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">厌倦了在代码中写注释吗？我们停止这样做，而是编写自文档化的代码</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="of l"><div class="og l oh oi oj of ok kq nw"/></div></div></a></div><p id="a6d5" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><em class="lo">更多内容请看</em><a class="ae nb" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ku is"><em class="lo">plain English . io</em></strong></a></p><div class="nt nu gq gs nv nw"><a rel="noopener  ugc nofollow" target="_blank" href="/5-ways-to-improve-your-functions-in-javascript-fea32984122e"><div class="nx ab fp"><div class="ny ab nz cl cj oa"><h2 class="bd is gz z fq ob fs ft oc fv fx iq bi translated">提高JavaScript功能的5种方法</h2><div class="od l"><h3 class="bd b gz z fq ob fs ft oc fv fx dk translated">通过将这些方法应用到您的函数中，让您的JavaScript生活变得更加简单</h3></div><div class="oe l"><p class="bd b dl z fq ob fs ft oc fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kq nw"/></div></div></a></div></div></div>    
</body>
</html>
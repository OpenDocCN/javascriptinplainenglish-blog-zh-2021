<html>
<head>
<title>JavaScript: How Optional Chaining is going to change your code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:可选链接将如何改变你的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-optional-chaining-is-going-to-change-your-code-fd7d85dbc4f1?source=collection_archive---------19-----------------------#2021-03-17">https://javascript.plainenglish.io/how-optional-chaining-is-going-to-change-your-code-fd7d85dbc4f1?source=collection_archive---------19-----------------------#2021-03-17</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="ba42" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">当您必须确保深层对象中的嵌套属性存在时，您曾经诅咒过您的代码吗？不要再诅咒了！</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/d16142b58624d4a0815e57791b830fc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DZl5-SZanagsJY83"/></div></div></figure><p id="db28" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">每当你在JavaScript中处理一个对象时，你经常想要从中获取数据。当你想从一个嵌套了几层的对象中得到一些东西时，你已经害怕出现错误“<em class="lo">无法读取未定义的</em>的属性‘name’”，对吗？听起来很熟悉？</p><p id="95b9" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">当生产应用程序中出现错误时，您是否也诅咒过？</p><p id="2e69" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">幸运的是，有可选的链接。让我解释一下</p><h1 id="e1d9" class="lp lq ir bd lr ls lt lu lv lw lx ly lz jx ma jy mb ka mc kb md kd me ke mf mg bi translated">背景故事</h1><p id="3731" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">好了，你得到了这个对象，它可能有也可能没有特定的数据属性，假设我们正在处理一个用户。数据可能看起来像这样</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><p id="3f13" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">它可能有，也可能没有名字，可能有，也可能没有名字属性。所以当你想得到这个属性时，你不能相信这个链的存在，那么你该怎么做呢？对…像这样检查每一关</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><p id="7cc3" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">一旦发现用户对象中的name属性存在，就可以对其内容做些什么。然后你还是不知道到底有没有名。</p><p id="a5ec" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">但你更想做的是这个，对吗？</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><h1 id="7a33" class="lp lq ir bd lr ls lt lu lv lw lx ly lz jx ma jy mb ka mc kb md kd me ke mf mg bi translated">解决方案</h1><p id="478e" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">嗯，你很幸运，这正是可选链接在这里的作用。它将为您检查是否可以到达所需的嵌套属性，而无需您搜索所有属性。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><p id="b5b5" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">看到那个问号了吗？这就为你做了检查！所以上面的代码行检查对象内部的每个链，就像我们用<code class="fe mo mp mq mr b">if &amp;&amp;</code>检查一样。</p><p id="4501" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">现在，在我们的示例中,<code class="fe mo mp mq mr b">firstName</code>将实际返回“Foo ”,但是我们也可以执行以下操作:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><p id="7f87" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这将按预期输出<code class="fe mo mp mq mr b">undefined undefined</code>，并且不会抛出错误。</p><p id="3fc5" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">是的，这也适用于函数，就像这样。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="mm mn l"/></div></figure><p id="0eef" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这将再次返回<code class="fe mo mp mq mr b">undefined</code>，并且不会调用不存在的函数。尽管有一点需要注意，如果<code class="fe mo mp mq mr b">combinedBirthday</code>被设置了，但不是一个函数，它仍然会出错，所以确保不要混淆数据！</p><h1 id="2ac9" class="lp lq ir bd lr ls lt lu lv lw lx ly lz jx ma jy mb ka mc kb md kd me ke mf mg bi translated">问题是</h1><p id="4fa6" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">那么有什么问题呢？嗯…如果你使用现代堆栈，你真的不会有问题。可选链接已经在所有现代浏览器上得到支持，并被添加到NodeJS 14中。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ms"><img src="../Images/b0cf170bf6aaadc87ee6675ffe1f17c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BdyexLiALRxEBkdbGJ6vtw.png"/></div></div><figcaption class="mt mu gk gi gj mv mw bd b be z dk">Source:<a class="ae mx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank"> MDN Optional Chaining Page</a></figcaption></figure><p id="0768" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">然而，你应该知道这是一个相对较新的添加，例如Chrome 80在2020年2月才发布，所以如果你在网络环境中使用可选链接，请确保你使用<a class="ae mx" href="https://babeljs.io/docs/en/babel-plugin-syntax-optional-chaining" rel="noopener ugc nofollow" target="_blank"> babel </a>正确设置了潜在的polyfill。</p><p id="b605" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">这就是你所需要知道的，考虑你自己对这个话题的了解，开始使用这个甜蜜的可选链接吧！</p></div></div>    
</body>
</html>
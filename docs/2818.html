<html>
<head>
<title>An Overview on the Current State of Next.js Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js路由器现状综述</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-overview-on-current-state-of-next-js-router-df42f02c6466?source=collection_archive---------22-----------------------#2021-06-08">https://javascript.plainenglish.io/an-overview-on-current-state-of-next-js-router-df42f02c6466?source=collection_archive---------22-----------------------#2021-06-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="42f1" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">这些关于Next.js路由器的提示和技巧有助于使你的DX更好，代码更简洁</h2></div><blockquote class="kc kd ke"><p id="2a32" class="kf kg kh ki b kj kk jo kl km kn jr ko kp kq kr ks kt ku kv kw kx ky kz la lb ig bi translated">最初发布于<a class="ae lc" href="https://pavel.mineev.me/blog/nextjs-router-tips-and-tricks" rel="noopener ugc nofollow" target="_blank">我的博客pavel.mineev.me </a></p></blockquote><figure class="le lf lg lh gt li gh gi paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="gh gi ld"><img src="../Images/84326cb3051cb1abd5b0f9e102d662c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mh7tBNWy5zeZa4D6QTBXgw.jpeg"/></div></div><figcaption class="lp lq gj gh gi lr ls bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@dnevozhai" rel="noopener ugc nofollow" target="_blank">Denys Nevozhai</a> on Unsplash</figcaption></figure><h2 id="6e90" class="lt lu in bd lv lw lx dn ly lz ma dp mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">放弃</h2><p id="0b5b" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">Next.js是一个动态开发的框架，许多关于它的旧文章可能会过时，因为Next.js向前迈出了一大步。我在2021年5月写了这篇文章，现在的版本是10.2.3。我建议在查看示例时查看<a class="ae lc" href="https://nextjs.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank">文档</a>，因为由于API的改进，一些提示可能已经过时。</p><h1 id="7c6e" class="mu lu in bd lv mv mw mx ly my mz na mb jt nb ju mf jw nc jx mj jz nd ka mn ne bi translated">发布了你可能不知道的功能</h1><p id="f4a1" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">如果你长时间使用Next.js，你的项目应该有大量的代码，你只需要按照它已经有的风格继续写。有时是因为你已经习惯了，有时是因为你把你的代码库当作代码片段和例子的目录。这就是为什么你可以跳过新的酷的东西。</p><h2 id="89f6" class="lt lu in bd lv lw lx dn ly lz ma dp mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">服务器重定向和未找到状态</h2><p id="6366" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">这些功能，以及以前的功能，都是在版本10中发布的，我仍然看到很多关于如何在服务器上进行重定向的问题。首先，我建议检查您是否使用现代抓取方法，因为只有它们才能获得更新和新功能。我在这里解释了为什么我们应该使用现代获取方法的其他原因。</p><p id="2e1a" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">下面是重定向或显示404页的一个简单方法:</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="47fa" class="lt lu in bd lv lw lx dn ly lz ma dp mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">href参数的自动解析</h2><p id="7b3d" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">试着在你的项目中找到有<code class="fe nh ni nj nk b">href</code>和<code class="fe nh ni nj nk b">as</code>道具的<code class="fe nh ni nj nk b">next/link</code>。如果你已经找到了，是时候更新链接了。因为从10.x版本开始，不需要同时传递两个参数。你可以去掉<code class="fe nh ni nj nk b">href</code> param，把<code class="fe nh ni nj nk b">as</code>重命名为<code class="fe nh ni nj nk b">href</code>，也一样可以。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="0542" class="mu lu in bd lv mv mw mx ly my mz na mb jt nb ju mf jw nc jx mj jz nd ka mn ne bi translated">客户端路由器功能</h1><p id="2f8c" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">我注意到人们经常从<code class="fe nh ni nj nk b">useRouter</code>用<code class="fe nh ni nj nk b">router.push</code>。如果你在<code class="fe nh ni nj nk b">useCallback</code>或者<code class="fe nh ni nj nk b">useEffect</code>中的函数中使用它，你必须在依赖关系中提到它，就像下面的例子。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="fdfb" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">这完全没有必要，因为这些函数不会在重新渲染时更新，但是ESlint规则会告诉你应该这样做。解决这个问题相当简单。只需使用<code class="fe nh ni nj nk b">Router</code>中的路由功能。它使你的代码更干净、更好。😉</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b7a8" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">有时当我使用路由器时，我需要获得当前的路径名。但是<code class="fe nh ni nj nk b">react/router</code>在那个字段中存储路由器的动态表示，它与路由器字段相同。我们可以用<code class="fe nh ni nj nk b">asPath</code>自己创建这些参数。我在<code class="fe nh ni nj nk b">useRouter</code>上创建了一个包装器，如果需要的话，我可以随时使用这些道具。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="c751" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">包装器为我们提供了方便的工具，我们可以在需要更新当前路线的情况下使用这些工具。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="d71d" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">你想知道为什么<code class="fe nh ni nj nk b">Router.replace</code>中的第二个参数是<code class="fe nh ni nj nk b">null</code>吗？从10.x开始，通过自动解析，我们可以跳过该参数。</p><p id="1e0e" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated">因为我们有自动解析这样的特性，所以我们可以在<code class="fe nh ni nj nk b">next/router</code>中使用它，但是在它的API中有一点不便。因为如果你想传递<code class="fe nh ni nj nk b">options</code>，你应该把动态路由传递给第一个参数，把完整路径传递给第二个参数，在早期版本中，Next.js保留了这三个参数以向后兼容。我有一些方便的小功能，可以帮助我更轻松地使用路由器功能。</p><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="le lf lg lh gt li"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h1 id="e639" class="mu lu in bd lv mv mw mx ly my mz na mb jt nb ju mf jw nc jx mj jz nd ka mn ne bi translated">结论</h1><p id="4747" class="pw-post-body-paragraph kf kg in ki b kj mp jo kl km mq jr ko mc mr kr ks mg ms kv kw mk mt kz la lb ig bi translated">谢谢你把文章看完。你可以在<a class="ae lc" href="https://github.com/akellbl4/nextjs-router-tips" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到完整代码。总有办法让好工具变得更好。小的改进会对你和你的项目有很大的帮助。</p><p id="7b99" class="pw-post-body-paragraph kf kg in ki b kj kk jo kl km kn jr ko mc kq kr ks mg ku kv kw mk ky kz la lb ig bi translated"><em class="kh">更多内容请看</em><a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="kh">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create a Video Player with React and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和JavaScript创建一个视频播放器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-video-player-with-react-and-javascript-99247415d7c8?source=collection_archive---------4-----------------------#2021-10-03">https://javascript.plainenglish.io/create-a-video-player-with-react-and-javascript-99247415d7c8?source=collection_archive---------4-----------------------#2021-10-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/728771d1efb622fb4bd3fca1023b56ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jSEX8_9NioFEJPRs"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jakobowens1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jakob Owens</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a8c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个易于使用的JavaScript框架，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用React和JavaScript创建一个视频播放器。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Create React App创建React项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app video-player</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起创建我们的React项目。</p><h1 id="c534" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建视频播放器</h1><p id="e01d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建视频播放器，我们编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4e90" class="mn lc iq mj b gy mo mp l mq mr">import React, { useRef, useState } from "react";</span><span id="c9ac" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const videoPlayer = useRef();<br/>  const [currentTime, setCurrentTime] = useState(0);<br/>  const [seekValue, setSeekValue] = useState(0);</span><span id="6bf0" class="mn lc iq mj b gy ms mp l mq mr">  const play = () =&gt; {<br/>    videoPlayer.current.play();<br/>  };</span><span id="dad5" class="mn lc iq mj b gy ms mp l mq mr">  const pause = () =&gt; {<br/>    videoPlayer.current.pause();<br/>  };</span><span id="9cee" class="mn lc iq mj b gy ms mp l mq mr">  const stop = () =&gt; {<br/>    videoPlayer.current.pause();<br/>    videoPlayer.current.currentTime = 0;<br/>  };</span><span id="2444" class="mn lc iq mj b gy ms mp l mq mr">  const setSpeed = (speed) =&gt; {<br/>    videoPlayer.current.playbackRate = speed;<br/>  };</span><span id="4cc5" class="mn lc iq mj b gy ms mp l mq mr">  const onPlaying = () =&gt; {<br/>    setCurrentTime(videoPlayer.current.currentTime);<br/>    setSeekValue(<br/>      (videoPlayer.current.currentTime / videoPlayer.current.duration) * 100<br/>    );<br/>  };</span><span id="7106" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;video<br/>        width="320"<br/>        height="240"<br/>        ref={videoPlayer}<br/>        onTimeUpdate={onPlaying}<br/>      &gt;<br/>        &lt;source<br/>          src="https://www.learningcontainer.com/wp-content/uploads/2020/05/sample-mp4-file.mp4"<br/>          type="video/mp4"<br/>        /&gt;<br/>        Your browser does not support the video tag.<br/>      &lt;/video&gt;<br/>      &lt;br /&gt;<br/>      &lt;p&gt;{currentTime}&lt;/p&gt;<br/>      &lt;input<br/>        type="range"<br/>        min="0"<br/>        max="100"<br/>        step="1"<br/>        value={seekValue}<br/>        onChange={(e) =&gt; {<br/>          const seekto = videoPlayer.current.duration * (+e.target.value / 100);<br/>          videoPlayer.current.currentTime = seekto;<br/>          setSeekValue(e.target.value);<br/>        }}<br/>      /&gt;<br/>      &lt;div&gt;<br/>        &lt;button onClick={play}&gt;play&lt;/button&gt;<br/>        &lt;button onClick={pause}&gt;pause&lt;/button&gt;<br/>        &lt;button onClick={stop}&gt;stop&lt;/button&gt;<br/>        &lt;button onClick={() =&gt; setSpeed(0.5)}&gt;0.5x&lt;/button&gt;<br/>        &lt;button onClick={() =&gt; setSpeed(1)}&gt;1x&lt;/button&gt;<br/>        &lt;button onClick={() =&gt; setSpeed(1.5)}&gt;1.5x&lt;/button&gt;<br/>        &lt;button onClick={() =&gt; setSpeed(2)}&gt;2x&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="b536" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个分配给视频元素的<code class="fe mt mu mv mj b">videoPlayer</code> ref。</p><p id="b937" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们定义<code class="fe mt mu mv mj b">currentTime</code>状态来获取当前播放时间。</p><p id="2813" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">seekValue</code>有职位可找。</p><p id="d6cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们定义了获取视频播放器元素的ref的<code class="fe mt mu mv mj b">play</code>函数，并对其调用<code class="fe mt mu mv mj b">play</code>。</p><p id="0d73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们在<code class="fe mt mu mv mj b">pause</code>中调用<code class="fe mt mu mv mj b">pause</code>。</p><p id="b604" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而在<code class="fe mt mu mv mj b">stop</code>中，我们调用<code class="fe mt mu mv mj b">pause</code>，将视频元素的<code class="fe mt mu mv mj b">currentTime</code>设置为0。</p><p id="ec09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">setSpeed</code>中，我们调用<code class="fe mt mu mv mj b">setCurrenTime</code>来设置视频的当前播放时间。</p><p id="a5a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">setSeekValue</code>来移动视频搜索滑块输入。</p><p id="d932" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在此之下，我们添加视频元素。</p><p id="eb09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置大小并为它分配一个ref，这样我们就可以在函数中使用它。</p><p id="99f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将<code class="fe mt mu mv mj b">onTimeUpdate</code>处理程序设置为<code class="fe mt mu mv mj b">onPlaying</code>函数，以获取设置的当前播放时间和寻道值。</p><p id="7071" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">source</code>元素有视频源。</p><p id="7cbc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面，我们以秒为单位显示<code class="fe mt mu mv mj b">currentTime</code>值。</p><p id="5fc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们显示范围输入，让我们设置视频的进度。</p><p id="a6b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">value</code>道具设置为<code class="fe mt mu mv mj b">seekValue</code>以在视频播放时移动滑块点。</p><p id="8685" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">onChange</code>函数中，我们设置<code class="fe mt mu mv mj b">currentTime</code>并调用<code class="fe mt mu mv mj b">setSeekValue</code>来设置<code class="fe mt mu mv mj b">seekValue</code>状态。</p><p id="981d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在它下面，我们有播放、暂停和停止按钮，当我们点击它们时，它们调用上面的函数。</p><p id="6cd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击其他按钮时，它们会调用<code class="fe mt mu mv mj b">setSpeed</code>。</p><h1 id="4d3a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="7c86" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用React和JavaScript轻松创建一个视频播放器。</p></div></div>    
</body>
</html>
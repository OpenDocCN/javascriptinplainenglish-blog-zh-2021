<html>
<head>
<title>Creating a simple REST API using Express.js + MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Express.js + MongoDB创建简单的REST API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-simple-rest-api-using-express-js-mongodb-c7f53d145e4d?source=collection_archive---------8-----------------------#2021-03-17">https://javascript.plainenglish.io/creating-a-simple-rest-api-using-express-js-mongodb-c7f53d145e4d?source=collection_archive---------8-----------------------#2021-03-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="487b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">本教程将向您展示如何使用<strong class="jm io"> Express.js </strong>和<strong class="jm io"> MongoDB </strong>开发一个简单的<strong class="jm io"> REST API </strong>。最后，我上一篇文章中的<strong class="jm io"> React应用程序</strong>将会用到<strong class="jm io"> REST API </strong>:</p><ul class=""><li id="8497" class="ki kj in jm b jn jo jr js jv kk jz kl kd km kh kn ko kp kq bi translated"><a class="ae kr" href="https://karnyong.medium.com/basic-react-components-and-props-for-showing-lots-of-cats-d41bf67cc26" rel="noopener">使用API显示大量猫的基本React组件和道具😻</a></li></ul><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi ks"><img src="../Images/e7450429a34e0b6034cc187f4f5dbe15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*ahjCSaNLpAQ4PjarNmsQ4w.jpeg"/></div></figure><h1 id="854b" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">软件安装</h1><ul class=""><li id="badd" class="ki kj in jm b jn ly jr lz jv ma jz mb kd mc kh kn ko kp kq bi translated"><strong class="jm io">node . js</strong>T14】https://nodejs.org</li><li id="ab75" class="ki kj in jm b jn md jr me jv mf jz mg kd mh kh kn ko kp kq bi translated"><strong class="jm io"> MongoDB社区</strong><a class="ae kr" href="https://www.mongodb.com/try/download/community" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/try/download/community</a></li></ul><h1 id="eb1e" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">在MongoDB中创建用户</h1><p id="58f1" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">编辑系统环境变量(仅适用于Windows)。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ml"><img src="../Images/8949dfde8663e61c7469b146d23372cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4547nM5RNYF7S0_xw8PY4g.png"/></div></div></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi mq"><img src="../Images/190a603b888fe8b050a385a70d052c33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WBirVaK5aAyMoYFW6V1dGg.png"/></div></div></figure><p id="2410" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用命令提示符/终端，用<strong class="jm io"> mongo </strong>命令启动<strong class="jm io"> MongoDB shell </strong>。</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="c068" class="mw lb in ms b gy mx my l mz na">mongo --host localhost --port 27017</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nb"><img src="../Images/27fb5b3ab9cc7fa9b8f0ae45cc23232b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f0G2l_LhIVozJtQaBcs3kw.png"/></div></div></figure><p id="44e0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用以下命令创建新用户<strong class="jm io"> myUserAdmin </strong>，密码为<strong class="jm io"> myUserAdmin </strong>。</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="6ce2" class="mw lb in ms b gy mx my l mz na">use admin</span><span id="6d63" class="mw lb in ms b gy nc my l mz na">db.createUser({user: "myUserAdmin", pwd: "myUserAdmin", roles: [{role: "userAdminAnyDatabase", db: "admin"}, "readWriteAnyDatabase"]})</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nd"><img src="../Images/18e7cd0db42486cbe9677865ed2772d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tNl-_qPOGK8h-0zmd0iiQ.png"/></div></div></figure><p id="7ec8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">验证创建的用户。</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="464a" class="mw lb in ms b gy mx my l mz na">db.getUsers()</span></pre><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ne"><img src="../Images/4202c1f63f2ae4b299df705714daa98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iwxWZIgbUyjk1VAAyNNJLA.png"/></div></div></figure><h1 id="9de8" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">在MongoDB中创建集合</h1><p id="b6c5" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">使用<strong class="jm io"> MongoDB Compass </strong>连接MongoDB，导入一些数据。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/79c5310f6cb64e860718146f9775c021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94zEtkdLR9i9v5XdIp1g1g.png"/></div></div></figure><p id="02c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输入上一步的用户名和密码。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/a4a9a45e0c606516c15ec115b0658b85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9Rd6Op79nAPYT0O8iXAVg.png"/></div></div></figure><p id="15c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建包含集合的数据库。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/f87d338ec7948032ea6d499612e6dd0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pRVZqsT7GtqGc3G5UoGq7g.png"/></div></div></figure><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/dfd9f6220726ad7edcec9d1f135471b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fZG5RkltLPQGBrCI9NvYYQ.png"/></div></div></figure><p id="c775" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将数据导入集合。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/b3198791eb99441aade5fdd33c808592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbQbFIh-Nf7pQoQM6R347g.png"/></div></div></figure><p id="7e67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> cats.json </strong>。</p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="23df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">导入<strong class="jm io"> cats.json </strong>。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/447bbaf114dcd2e22b1b3769a7e394bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VPoLDZEjYlgUPEIhoY8eEA.png"/></div></div></figure><p id="12ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">数据被导入。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/63708b9fbf6fe1eb0d5f98e9d2df0acf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Evv93sshszfPPNuSckTFYA.png"/></div></div></figure><p id="b8b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">尝试过滤<strong class="jm io"> MongoDB Compass </strong>中的数据。您可以从<a class="ae kr" href="https://docs.mongodb.com/manual/tutorial/query-documents/" rel="noopener ugc nofollow" target="_blank">https://docs.mongodb.com/manual/tutorial/query-documents/</a>了解更多关于如何查询数据的信息。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi nf"><img src="../Images/6441d5e59e9787df836a1191e1ae39bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i7lWnyEeSd38uXK6q9tT8g.png"/></div></div></figure><h1 id="513a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">用Express.js创建一个REST API</h1><p id="253f" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated"><strong class="jm io">REST API</strong><br/><strong class="jm io">REST</strong>(具象状态转移)<br/> <strong class="jm io"> API </strong>(应用程序接口)</p><p id="9687" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<strong class="jm io"> REST API </strong>，我们可以在客户端和数据库之间建立一个接口。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi ni"><img src="../Images/f8f3007adb325b951d6f50ab00968ab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FUBYT2w59_t53D66XT-Rsg.png"/></div></div><figcaption class="nj nk gj gh gi nl nm bd b be z dk"><a class="ae kr" href="https://www.seobility.net/en/wiki/REST_API" rel="noopener ugc nofollow" target="_blank">https://www.seobility.net/en/wiki/REST_API</a></figcaption></figure><p id="1a7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，创建一个文件夹。</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="8238" class="mw lb in ms b gy mx my l mz na">mkdir cat-api<br/>cd cat-api</span></pre><p id="b92f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<strong class="jm io">纱线</strong>创建一个<strong class="jm io"> node.js </strong>应用程序。在应用程序中添加<strong class="jm io"> express </strong>、<strong class="jm io"> cors </strong>和<strong class="jm io"> mongodb </strong>模块。</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="8bff" class="mw lb in ms b gy mx my l mz na">yarn init<br/>yarn add express cors mongodb</span></pre><p id="6826" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建<strong class="jm io"> server.js </strong>来创建一个初始<strong class="jm io"> API </strong>。</p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="10f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">启动您的<strong class="jm io"> API </strong>:</p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="4e0c" class="mw lb in ms b gy mx my l mz na">node server.js</span></pre><p id="3684" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在web浏览器上测试初始的<strong class="jm io">API(</strong><a class="ae kr" href="http://localhost:8081/" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/</a>)。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/3f08e49a89c042fe5f3b2099cb620e47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*CnBF0B7PtOi8CYZzN2LlSw.png"/></div></figure><p id="e118" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编辑<strong class="jm io"> server.js </strong>添加一个<strong class="jm io"> API </strong>，用于从<strong class="jm io"> MongoDB </strong>中检索cat数据。</p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="6215" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在web浏览器上测试cat数据API(<a class="ae kr" href="http://localhost:8081/cats/read" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/cats/read</a>)。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi no"><img src="../Images/e6fdb5cab61431f8669870e15a89b179.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCZoYer7PQGBNgAXOkD7Zw.png"/></div></div></figure><h1 id="a17d" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">在React应用程序中使用这个API</h1><p id="79f6" class="pw-post-body-paragraph jk jl in jm b jn ly jp jq jr lz jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">基于我以前的文章<a class="ae kr" href="https://karnyong.medium.com/basic-react-components-and-props-for-showing-lots-of-cats-d41bf67cc26" rel="noopener">使用API显示大量猫的基本反应组件和道具😻</a>，我们可以在这个<strong class="jm io"> React </strong>应用程序中使用<strong class="jm io"> API </strong>。</p><p id="36be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">*如果你已经有了上一篇文章的代码，你可以跳过这些</strong></p><pre class="kt ku kv kw gt mr ms mt mu aw mv bi"><span id="5388" class="mw lb in ms b gy mx my l mz na">git clone <a class="ae kr" href="https://github.com/KarnYong/cat-friends-react" rel="noopener ugc nofollow" target="_blank">https://github.com/KarnYong/cat-friends-react</a><br/>cd cat-friends-react<br/>yarn install<br/>yarn start</span></pre><p id="6af0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编辑<strong class="jm io"> src/CardList.js </strong>以使用API<a class="ae kr" href="http://localhost:8081/cats/read" rel="noopener ugc nofollow" target="_blank">http://localhost:8081/cats/read</a></p><figure class="kt ku kv kw gt kx"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="a20b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在web浏览器上测试React 应用程序。</p><figure class="kt ku kv kw gt kx gh gi paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="gh gi np"><img src="../Images/1932158847d764333caaaf3e4d42d142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-BU2HPrj3rMflISwXvRV1g.png"/></div></div></figure><p id="e93a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nq">文章作者Karn Yongsiriwit博士<br/>兰西大学数字创新技术学院</em></p></div></div>    
</body>
</html>
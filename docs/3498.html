<html>
<head>
<title>What is the Difference Between BehaviourSubject, Subject, ReplaySubject, and Async Subject?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">BehaviourSubject、Subject、ReplaySubject和Async Subject有什么区别？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-the-difference-between-behavioursubject-subject-replaysubject-and-async-subject-577ac0c886f2?source=collection_archive---------10-----------------------#2021-07-14">https://javascript.plainenglish.io/what-is-the-difference-between-behavioursubject-subject-replaysubject-and-async-subject-577ac0c886f2?source=collection_archive---------10-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="2346" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">每日角度提示、技巧和最佳实践</h2><div class=""/><div class=""><h2 id="a90b" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">基本角度面试问题2021</h2></div><p id="0f2a" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">最近，我在寻找最好的技术来写干净和优化我的angular代码。我看了很多文章，我们知道，是无限的。然后我想到用不同的基本角度的主题来巩固清单，这些主题对我有帮助，将来也可能对别人有帮助。</p><figure class="ll lm ln lo gt lp gh gi paragraph-image"><div role="button" tabindex="0" class="lq lr di ls bf lt"><div class="gh gi lk"><img src="../Images/2eb9b69236170a4e5eab30521bffe834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qJupWo0gohg96VrV.jpg"/></div></div><figcaption class="lw lx gj gh gi ly lz bd b be z dk"><a class="ae ma" href="https://www.aviva.ie/insurance/home-articles/spot-the-difference/" rel="noopener ugc nofollow" target="_blank">https://www.aviva.ie/insurance/home-articles/spot-the-difference/</a></figcaption></figure><p id="b286" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这些小文章不仅能帮助你写出更好更干净的Angular代码，还能让你清楚前端技术的概念。这将有助于你建立强大的基础，并能在即将到来的前端面试中帮助你。</p><blockquote class="mb"><p id="fbde" class="mc md iq bd me mf mg mh mi mj mk lj dk translated">让我们先了解主题，然后再讨论它们的差异。</p></blockquote><p id="530b" class="pw-post-body-paragraph ko kp iq kq b kr ml ka kt ku mm kd kw kx mn kz la lb mo ld le lf mp lh li lj ij bi translated"><strong class="kq ja">Subject:</strong>Subject observable用于立即通知订阅者它发出的更新值。</p><ul class=""><li id="495d" class="mq mr iq kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated">它不跟踪旧值，即，如果一个主体可观察对象首先发出一个值，然后被订阅，那么订阅者将不会获得该值。</li><li id="f702" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">你可以把一个主题想象成一个实时更新/提要。从创建到订阅期间发出的旧值不会被保留；只能捕获在其订阅后发出的值。</li></ul><pre class="ll lm ln lo gt ne nf ng nh aw ni bi"><span id="799f" class="nj nk iq nf b gy nl nm l nn no">const subject = new Subject &lt; number &gt; ();</span><span id="1193" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (val) =&gt; console.log(`Subject Value: ${val}`)<br/>});</span><span id="d177" class="nj nk iq nf b gy np nm l nn no">subject.next(1);<br/>subject.next(2);</span><span id="1379" class="nj nk iq nf b gy np nm l nn no">// Logs:<br/>// Subject Value: 1<br/>// Subject Value: 2</span></pre><p id="5545" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">behavior Subject</strong>:behavior Subject的行为就像一个普通的可观察主体，但它有一个额外的特性，即它保留了最后发出的值。</p><ul class=""><li id="50e8" class="mq mr iq kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated">这意味着如果值是在BehaviorSubject之前发出的，并且如果订阅是在值发出之后添加的，那么订阅将给出最后发出的值。</li></ul><pre class="ll lm ln lo gt ne nf ng nh aw ni bi"><span id="b160" class="nj nk iq nf b gy nl nm l nn no">const subject = new BehaviorSubject(0); // 0 is the initial value</span><span id="2c44" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (v) =&gt; console.log(`Subject Value: ${v}`)<br/>});</span><span id="a6f1" class="nj nk iq nf b gy np nm l nn no">subject.next(1);<br/>subject.next(2);</span><span id="6e7c" class="nj nk iq nf b gy np nm l nn no">subject.next(3);</span><span id="28ff" class="nj nk iq nf b gy np nm l nn no">// Logs<br/>// Subject Value: 0<br/>// Subject Value: 1<br/>// Subject Value: 2</span></pre><p id="a545" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">replay subject</strong>:replay subject的行为“像”一个<strong class="kq ja"> BehaviorSubject </strong>只是它提供了保存/重放/重复“n”个先前发出的值的灵活性。</p><ul class=""><li id="79eb" class="mq mr iq kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated">它可以接受两个参数:第一个参数是“应该为将来的订阅保留多少最新发出的值”；第二个参数是“这些最新值应该有效多长时间(以毫秒为单位)”</li></ul><pre class="ll lm ln lo gt ne nf ng nh aw ni bi"><span id="a111" class="nj nk iq nf b gy nl nm l nn no">const subject = new ReplaySubject(3); // buffer 3 values for new subscribers</span><span id="6558" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (v) =&gt; console.log(`observer1: ${v}`)<br/>});</span><span id="dd95" class="nj nk iq nf b gy np nm l nn no">subject.next(1);<br/>subject.next(2);<br/>subject.next(3);<br/>subject.next(4);</span><span id="2131" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (v) =&gt; console.log(`observer2: ${v}`)<br/>});</span><span id="80fb" class="nj nk iq nf b gy np nm l nn no">subject.next(5);</span><span id="4b83" class="nj nk iq nf b gy np nm l nn no">// Logs:<br/>// observer1: 1<br/>// observer1: 2<br/>// observer1: 3<br/>// observer1: 4<br/>// observer2: 2<br/>// observer2: 3<br/>// observer2: 4<br/>// observer1: 5<br/>// observer2: 5</span></pre><ul class=""><li id="6bd1" class="mq mr iq kq b kr ks ku kv kx ms lb mt lf mu lj mv mw mx my bi translated"><strong class="kq ja"> AsyncSubject </strong>:一个<strong class="kq ja"> AsyncSubject </strong>的行为更像一个Subject，而不太像行为/重放Subject，也就是说，在订阅之前发出的值不会被保留。</li><li id="61da" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">甚至订阅后发出的所有值都不会被保留。</li><li id="e5e7" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj mv mw mx my bi translated">AsyncSubject是一个Subject变体，其中<strong class="kq ja">仅将可观察执行的最后一个值</strong>发送给其订户，并且<strong class="kq ja">仅在执行完成时发送</strong></li></ul><pre class="ll lm ln lo gt ne nf ng nh aw ni bi"><span id="03c4" class="nj nk iq nf b gy nl nm l nn no">const subject = new AsyncSubject();</span><span id="80c5" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (v) =&gt; console.log(`observer1: ${v}`)<br/>});</span><span id="88b5" class="nj nk iq nf b gy np nm l nn no">subject.next(1);<br/>subject.next(2);<br/>subject.next(3);<br/>subject.next(4);</span><span id="7486" class="nj nk iq nf b gy np nm l nn no">subject.subscribe({<br/>    next: (v) =&gt; console.log(`observer2: ${v}`)<br/>});</span><span id="8a25" class="nj nk iq nf b gy np nm l nn no">subject.next(5);<br/>subject.complete();</span><span id="4a27" class="nj nk iq nf b gy np nm l nn no">// Logs:<br/>// observer1: 5<br/>// observer2: 5</span></pre><h2 id="83e2" class="nj nk iq bd nq nr ns dn nt nu nv dp nw kx nx ny nz lb oa ob oc lf od oe of iw bi translated">两者有什么区别？</h2><p id="59af" class="pw-post-body-paragraph ko kp iq kq b kr og ka kt ku oh kd kw kx oi kz la lb oj ld le lf ok lh li lj ij bi translated">让我们看一个简单的例子，并理解其中的区别。</p><p id="ec17" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae ma" href="https://gfycat.com/cookedfavorableblacklab" rel="noopener ugc nofollow" target="_blank">https://gfycat.com/cookedfavorableblacklab</a></p><p id="1938" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">说明:</strong></p><ol class=""><li id="0b0c" class="mq mr iq kq b kr ks ku kv kx ms lb mt lf mu lj ol mw mx my bi translated">如您所见，受试者正在经历间隔，显示值为0，1，2，3，4，5。主题不能包含任何值。</li><li id="eddf" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj ol mw mx my bi translated">接下来，行为主题以间隔开始，并显示值-1，0，1，2，3，4，5。在我们订阅观察者之前，行为主体可以保存一个初始值。</li><li id="1bd7" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj ol mw mx my bi translated">对于控制台上的Replay主题，我们可以发现，当我们使用第二个以2，3，4开始的观察点时，第一个观察点获得了1，2，3，4值。这意味着我们可以在Replay Subject中缓冲一些值。</li><li id="a32e" class="mq mr iq kq b kr mz ku na kx nb lb nc lf nd lj ol mw mx my bi translated">对于异步主题，它将只显示值5，因为它将只从流中获取最后一个值。</li></ol><p id="9836" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated">这里可以找到stackblitz。T3】</p><p id="e868" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><a class="ae ma" href="https://stackblitz.com/edit/rxjs-angular-subject-vs-behavior-vs-replay-vs-async-x2vsap" rel="noopener ugc nofollow" target="_blank">https://stack blitz . com/edit/rxjs-angular-subject-vs-behavior-vs-replay-vs-async-5s rktn</a></p><p id="b3a9" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><strong class="kq ja">来源:</strong></p><h2 id="3a26" class="nj nk iq bd nq nr ns dn nt nu nv dp nw kx nx ny nz lb oa ob oc lf od oe of iw bi translated">进一步阅读</h2><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="on oo l"/></div></figure><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="on oo l"/></div></figure><p id="ca27" class="pw-post-body-paragraph ko kp iq kq b kr ks ka kt ku kv kd kw kx ky kz la lb lc ld le lf lg lh li lj ij bi translated"><em class="om">更多内容请看</em><a class="ae ma" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kq ja"><em class="om">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
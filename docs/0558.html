<html>
<head>
<title>5 JavaScript Features That Are Introduced In ES2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES2021中引入的5项JavaScript功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-javascript-features-that-are-introduced-in-es2021-58179a702451?source=collection_archive---------0-----------------------#2021-02-03">https://javascript.plainenglish.io/5-javascript-features-that-are-introduced-in-es2021-58179a702451?source=collection_archive---------0-----------------------#2021-02-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0896b3f6a65f253d4e3aa9a6ae3d363c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2sv4Ax1KD2jLJRjdlmZI4w.png"/></div></div></figure><p id="5aa1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自从EcmaScript规范改为每年更新后，我们越来越喜欢每年更新的JavaScript新特性。我们在2021年看到的更新并不逊色，逻辑赋值操作符、Promise.any和数字分隔符是亮点。</p><p id="4eb9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本帖中，我们将看看一些新特性，并讨论它们如何帮助您编写更好、更易维护的JavaScript。</p><h1 id="56f2" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">1.字符串.原型. replaceAll</h1><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lu"><img src="../Images/003383823f3c88b5f6379d154e582b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V2JgN4Cv-Y8mGKZXE9H2rQ.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Photo by <a class="ae md" href="https://unsplash.com/@miguelavtomas?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Miguel Tomás</a> on <a class="ae md" href="https://unsplash.com/s/photos/replace?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a37b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想介绍的第一个新特性是<code class="fe me mf mg mh b">String.prototype.replaceAll()</code>,它用另一个字符串值替换所有出现的字符串。</p><p id="e31c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在replaceAll()之前。replace()默认情况下，该方法只替换模式的第一个实例，多次替换需要使用正则表达式。现在，当我们使用replaceAll()时，我们将看到所有出现的内容都被替换。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="f226" class="mm kx iq mh b gy mn mo l mp mq">const catPhrase = 'A cat sat on the cat mat';<br/>const dogPhrase = catPhrase.replaceAll('cat', 'dog');<br/>console.log(dogPhrase); // A <strong class="mh ir">dog</strong> sat on the <strong class="mh ir">dog</strong> mat</span></pre><h1 id="b854" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">2.承诺。任何</h1><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/59106923fc280c25a96a65355d24fc39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j2RkY4aAQ4l70yeliTrc1g.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Photo by <a class="ae md" href="https://unsplash.com/@womanizer?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Womanizer WOW Tech</a> on <a class="ae md" href="https://unsplash.com/s/photos/promise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0a47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe me mf mg mh b">Promise.any</code>方法接受一组承诺，一旦第一个承诺得到满足，它就会返回。</p><p id="7629" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这非常类似于<code class="fe me mf mg mh b">Promise.race</code>方法，然而，它有一个关键的区别。虽然<code class="fe me mf mg mh b">Promise.race</code>会在任何一个承诺达成时返回，但<code class="fe me mf mg mh b">Promise.any</code>只会在其中一个承诺实现时返回。</p><p id="a036" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">已结算和已履行之间的区别在于，对于要履行的承诺，它不应该出错，但是对于要结算的承诺，它只需要返回，而不管响应是成功还是错误。</p><p id="8ce3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">使用<code class="fe me mf mg mh b">Promise.any</code>就像传递给它一个承诺数组一样简单，你希望等待一个承诺来解决，就像这里看到的。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="f881" class="mm kx iq mh b gy mn mo l mp mq">const promise = <!-- -->(delay) =&gt; new Promise((resolve) =&gt; {<br/>    setTimeout(() =&gt; resolve(`${delay} <!-- -->milliseconds<!-- -->`), delay);<br/>});</span><span id="4fe3" class="mm kx iq mh b gy ms mo l mp mq">const promises = [promise(50), promise(40), promise(30)];<br/>const resolved = await Promise.any(promises);</span><span id="89b8" class="mm kx iq mh b gy ms mo l mp mq">console.log(resolved); // 30 milliseconds</span></pre><p id="7ee4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本例中，第三个承诺将首先解决，因为它只有30毫秒的超时。</p><h1 id="384b" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">3.逻辑赋值运算符</h1><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/d545103d2ee18cee4b574a4daf716421.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-KHgFqrEGOeetH0gJee5Ew.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Photo by <a class="ae md" href="https://unsplash.com/@ryanquintal?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ryan Quintal</a> on <a class="ae md" href="https://unsplash.com/s/photos/lego?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4ba2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">逻辑赋值运算符提供了逻辑运算符和赋值表达式的组合。ES2021引入了其中两种新运算符:</p><ul class=""><li id="5d70" class="mu mv iq ka b kb kc kf kg kj mw kn mx kr my kv mz na nb nc bi translated">或或等于</li><li id="89b9" class="mu mv iq ka b kb nd kf ne kj nf kn ng kr nh kv mz na nb nc bi translated">和等于</li></ul><h2 id="13b6" class="mm kx iq bd ky ni nj dn lc nk nl dp lg kj nm nn lk kn no np lo kr nq nr ls ns bi translated">或或等于</h2><p id="e208" class="pw-post-body-paragraph jy jz iq ka b kb nt kd ke kf nu kh ki kj nv kl km kn nw kp kq kr nx kt ku kv ij bi translated">Or或Equals为我们提供了一个很好的简写，如果初始值为空，我们可以提供一个替代值。解释这是如何工作的最简单的方法是提供几个例子。</p><p id="a900" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的第一个例子中，由于<code class="fe me mf mg mh b">a</code>是真的，<code class="fe me mf mg mh b">a</code>仍然等于“hello”。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="2e10" class="mm kx iq mh b gy mn mo l mp mq">let a = “hello”;</span><span id="271a" class="mm kx iq mh b gy ms mo l mp mq">a ||= 10;</span><span id="63b8" class="mm kx iq mh b gy ms mo l mp mq">console.log(a); // hello</span></pre><p id="84c5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的第二个例子中，当<code class="fe me mf mg mh b">b</code>为falsey时，该值被设置为“world”。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="bac8" class="mm kx iq mh b gy mn mo l mp mq">let b = “”;<br/>b ||= “world”;<br/>console.log(b); // world</span></pre><h2 id="a3a1" class="mm kx iq bd ky ni nj dn lc nk nl dp lg kj nm nn lk kn no np lo kr nq nr ls ns bi translated">和等于</h2><p id="19cb" class="pw-post-body-paragraph jy jz iq ka b kb nt kd ke kf nu kh ki kj nv kl km kn nw kp kq kr nx kt ku kv ij bi translated">And和Equals为我们提供了一个很好的简写方法，如果定义了一个先前的值，就可以覆盖它。解释这是如何工作的最简单的方法是提供几个例子。</p><p id="e8b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的第一个例子中，由于<code class="fe me mf mg mh b">a</code>为真，因此<code class="fe me mf mg mh b">a</code>被设置为“hello”。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="7121" class="mm kx iq mh b gy mn mo l mp mq">let a = true;<br/>a &amp;&amp;= “hello”;<br/>console.log(a); hello</span></pre><p id="3cef" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下面的第二个例子中，由于<code class="fe me mf mg mh b">b</code>为false，<code class="fe me mf mg mh b">b</code>仍然等于false。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="1779" class="mm kx iq mh b gy mn mo l mp mq">let b = false;<br/>b &amp;&amp;= “world”;<br/>console.log(b); false</span></pre><h1 id="416a" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">4.数字分隔符</h1><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/0f264151a6f6338b535cc042438fa3d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sr6yj8pzWnhi3op-yFv9Jg.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Photo by <a class="ae md" href="https://unsplash.com/@volkanolmez?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Volkan Olmez</a> on <a class="ae md" href="https://unsplash.com/s/photos/numbers?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5efb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">数字分隔符引入了数字文字的分隔符，目的是使它们更容易阅读。在ES2021之前，我们会将百万值写为:</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="2965" class="mm kx iq mh b gy mn mo l mp mq">const billion = 1000000000</span></pre><p id="868d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这样做的问题是很容易增加一个额外的零或者漏掉一个。对于数字分隔符，我们可以通过引入下划线来使数字更容易阅读。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="d534" class="mm kx iq mh b gy mn mo l mp mq">const billion = 1_000_000_000</span></pre><h1 id="f914" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">5.私有方法和字段</h1><figure class="lv lw lx ly gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/cf146d22425827589abc94e264a9fc45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifDWOOsB0pWhHl6BPBnTMQ.jpeg"/></div></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Photo by <a class="ae md" href="https://unsplash.com/@dtopkin1?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Dayne Topkin</a> on <a class="ae md" href="https://unsplash.com/s/photos/private?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8313" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当ES2015将类引入JavaScript时，当我得知它们缺乏库作者定义私有方法的能力时，我很失望。作为一个JavaScript库的作者，我喜欢这样的想法:通过使用类，我将能够保持我的内部方法，内部的。</p><p id="28b4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ES2021通过引入私有方法和私有字段最终修复了这一遗漏。要表明一个方法或字段是私有的，你只需要在名称前使用一个散列(#)。下面的例子摘自<a class="ae md" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes/Private_class_fields" rel="noopener ugc nofollow" target="_blank"> MDN </a>。</p><pre class="lv lw lx ly gt mi mh mj mk aw ml bi"><span id="6a8c" class="mm kx iq mh b gy mn mo l mp mq">class ClassWithPrivateField {<br/>  #privateField<br/>}<br/><br/>class ClassWithPrivateMethod {<br/>  #privateMethod() {<br/>    return 'hello world'<br/>  }<br/>}<br/><br/>class ClassWithPrivateStaticField {<br/>  static #PRIVATE_STATIC_FIELD<br/>}</span></pre><h1 id="e0ee" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">包扎</h1><p id="573f" class="pw-post-body-paragraph jy jz iq ka b kb nt kd ke kf nu kh ki kj nv kl km kn nw kp kq kr nx kt ku kv ij bi translated">我今天介绍的功能是你每天最有可能使用的。</p><p id="3015" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">自ES6以来，我们看到的JavaScript的改进是惊人的，我喜欢看到所有这些新特性进入我们的浏览器。对于热爱JavaScript的人来说，这确实非常令人兴奋。</p><h1 id="45fc" class="kw kx iq bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">类似文章</h1><div class="oa ob gp gr oc od"><a href="https://medium.com/javascript-in-plain-english/5-javascript-features-that-you-might-not-know-about-but-will-improve-your-code-80f93d704b62" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">5个鲜为人知的JavaScript特性将改善您的代码</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">让我们来看看5个您以前可能没有使用过的JavaScript特性，它们将帮助您改进代码</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="on l oo op oq om or jw od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/javascript-in-plain-english/5-tech-talks-that-impacted-how-i-approach-software-engineering-dc7ace4af94d" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">影响我从事软件工程的5个技术讲座</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">让我们看一些最好的技术演讲，让听众思考接触软件的不同方法…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="os l oo op oq om or jw od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/javascript-in-plain-english/13-things-you-can-do-with-javascript-arrays-5b6cb4c16c47" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">使用JavaScript数组可以做的13件事</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">你可以用数组做的所有不同的事情，每个都有例子</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ot l oo op oq om or jw od"/></div></div></a></div><div class="oa ob gp gr oc od"><a href="https://medium.com/swlh/getting-the-most-out-of-visual-studio-code-829463d7023d" rel="noopener follow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">充分利用Visual Studio代码</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">无论您是Visual Studio代码的新手还是有经验的用户，我都会分享一些我学到的东西来帮助您制作…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">medium.com</p></div></div><div class="om l"><div class="ou l oo op oq om or jw od"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>How to Exclude Stylesheets from the Bundle and Lazy Load them in Angular?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从Bundle中排除样式表，在Angular中惰性加载？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-exclude-stylesheets-from-the-bundle-and-lazy-load-them-in-angular-ce159903f6d2?source=collection_archive---------8-----------------------#2021-08-23">https://javascript.plainenglish.io/how-to-exclude-stylesheets-from-the-bundle-and-lazy-load-them-in-angular-ce159903f6d2?source=collection_archive---------8-----------------------#2021-08-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="e58d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们学习如何只在需要的时候加载样式表，而不使它们成为应用程序包的一部分。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/840280a4eebdb45a64156f1c5b3c90f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94BgK4AoFkfb3t1IPoWc9w.jpeg"/></div></div></figure><p id="95a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将以多主题支持为例来理解这一点。</p><h1 id="c653" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">多个主题文件</h1><p id="d1b3" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">让我们假设除了主<em class="lx"> styles.css </em>文件之外，还有2个主题文件:</p><ol class=""><li id="a8d9" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh md me mf mg bi translated">src/styles/themes/theme-light . CSS</li><li id="a65f" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">src/styles/themes/theme-dark . CSS</li></ol><p id="5432" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，您可以在<code class="fe mm mn mo mp b">angular.json</code>的样式选项中使用它们:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="a3f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，您可以根据用户的选择或偏好来处理特定主题的加载。</p><p id="3579" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一切都很好，但是你的两个主题文件都是你的应用程序包的一部分。</p><h1 id="7651" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">排除主题文件</h1><p id="bcd8" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">让我们在angular.json中做一个小改动，从包中排除主题文件:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="5b57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在此了解两个新选项:</p><ol class=""><li id="8ff3" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh md me mf mg bi translated"><code class="fe mm mn mo mp b"><strong class="jm io">inject</strong></code>:设置为false将不包括捆绑包中“输入”路径的文件</li><li id="eb4a" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated"><code class="fe mm mn mo mp b"><strong class="jm io">bundleName</strong></code>:将创建一个单独的包，包含来自“输入”路径的样式表</li></ol><p id="a866" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果您尝试构建项目，它将创建单独的文件，输出如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ms"><img src="../Images/9c8098eed7a3e6569c81ca2558060bab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2tnxs2REnh9vCC6d.png"/></div></div></figure><p id="2959" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意<code class="fe mm mn mo mp b">theme-light.css</code>和<code class="fe mm mn mo mp b">theme-dark.css</code>是<strong class="jm io">懒惰块文件</strong>的一部分。惰性块文件加快了应用程序的加载时间，因为它们是按需加载的。</p><h1 id="f1dc" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">延迟加载主题文件</h1><p id="3494" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我们设法将它们从捆绑包中排除，并且它们是外部可用的。现在问题来了，如何加载这些主题文件？</p><p id="90c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">加载它们的一种方法是直接使用带有链接标签的包:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="d3fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可能需要使用<code class="fe mm mn mo mp b">base</code>标签来调整文档库URL，以成功加载它们。</p><h1 id="983a" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="9659" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我们了解到，我们可以通过简单地在工作区配置文件中设置<code class="fe mm mn mo mp b">inject</code> false来排除样式表，例如<code class="fe mm mn mo mp b">angular.json</code>。为了按需加载它们，我们将使用<code class="fe mm mn mo mp b">bundleName</code>选项。</p><p id="29d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从包中排除样式表的优点是减少了包的大小，这反过来会缩短应用程序的初始加载时间，最终用户体验会更好。</p></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="4b45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lx">最初发布于</em><a class="ae na" href="https://indepth.dev/tutorials/angular/lazy-load-stylesheets" rel="noopener ugc nofollow" target="_blank"><em class="lx">http://indepth . d</em>ev</a><em class="lx">。</em></p><p id="f48d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lx">更多内容尽在</em> <a class="ae na" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lx">说白了</em> </strong> </a></p></div></div>    
</body>
</html>
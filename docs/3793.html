<html>
<head>
<title>Create an Abstract BaseService to Use Supabase with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个抽象的BaseService，将Supabase与Angular一起使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-an-abstract-baseservice-to-use-supabase-with-angular-ba895175602e?source=collection_archive---------4-----------------------#2021-07-30">https://javascript.plainenglish.io/create-an-abstract-baseservice-to-use-supabase-with-angular-ba895175602e?source=collection_archive---------4-----------------------#2021-07-30</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/f9d8f7b1b9d75ea2bff3f29e5144ffad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EG7GQ2dVRqdKr_Zf"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@yogipurnama?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yogi Purnama</a> on <a class="ae kd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b2ed" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">Supabase是镇上的新英雄！它正忙着把像你我这样的可怜的开发人员从讨厌的供应商束缚中解救出来。让我们看看如何在Angular中使用Supabase，而不牺牲你我所热爱的RxJS-y风味。</p><p id="b84f" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我们将创建一个使用@supabase/supabase-js客户端库的<code class="fe lc ld le lf b">BaseService&lt;T&gt;</code>。您将能够扩展该抽象服务，并将其用于应用程序的实体。</p><h2 id="5d72" class="lg lh ir bd li lj lk dn ll lm ln dp lo kp lp lq lr kt ls lt lu kx lv lw lx ly bi translated">连接器服务</h2><p id="4a37" class="pw-post-body-paragraph ke kf ir kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ik bi translated">让我们首先创建连接器服务。请注意，我们需要来自supabase项目的<code class="fe lc ld le lf b">apiKey</code>和<code class="fe lc ld le lf b">anon</code>(或<code class="fe lc ld le lf b">public</code>)键。在这里，我正在导入存储在<code class="fe lc ld le lf b">environment.ts</code>文件中的密钥。</p><figure class="me mf mg mh gu js"><div class="bz fq l di"><div class="mi mj l"/></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">supabase.service.ts</figcaption></figure><p id="4f60" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">所有的方法都很简单。只需要注意一个方法——<code class="fe lc ld le lf b">table(resource: string)</code>，这只是一个返回我们经常需要的<code class="fe lc ld le lf b">SupabaseQueryBuilder</code>类的小抽象。</p><h2 id="581e" class="lg lh ir bd li lj lk dn ll lm ln dp lo kp lp lq lr kt ls lt lu kx lv lw lx ly bi translated">助手类型</h2><p id="fd3e" class="pw-post-body-paragraph ke kf ir kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ik bi translated">现在我们可以创建<code class="fe lc ld le lf b">BaseService.</code>来以一种类型化的方式编写查询构建器，我们可以创建一些帮助器类型，如下所示:</p><figure class="me mf mg mh gu js"><div class="bz fq l di"><div class="mi mj l"/></div></figure><p id="be92" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="mk">如果你想知道——我是从哪里得到FilterOperators的，你可以看看</em> <a class="ae kd" href="https://postgrest.org/en/stable/api.html#operators" rel="noopener ugc nofollow" target="_blank"> <em class="mk"> PostgREST文档</em> </a> <em class="mk">。</em></p><h2 id="f776" class="lg lh ir bd li lj lk dn ll lm ln dp lo kp lp lq lr kt ls lt lu kx lv lw lx ly bi translated">基础服务</h2><p id="a9cb" class="pw-post-body-paragraph ke kf ir kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ik bi translated">最后，我们能够编写我们的服务。</p><figure class="me mf mg mh gu js"><div class="bz fq l di"><div class="mi mj l"/></div></figure><p id="c04a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我们编写了基本的CRUD方法。超级电话是基于承诺的。这意味着理想情况下你必须使用<code class="fe lc ld le lf b">async/await</code>或回调函数来处理它们。但是我们希望保留反应性，因为大多数Angular开发人员习惯于使用反应性编程。RxJS运营商<code class="fe lc ld le lf b">from</code>撬动我们的欲望！官方文件说—</p><blockquote class="ml"><p id="27fc" class="mm mn ir bd mo mp mq mr ms mt mu lb dk translated"><a class="ae kd" href="https://rxjs.dev/api/index/function/from" rel="noopener ugc nofollow" target="_blank"><strong class="ak">from</strong></a><strong class="ak">:</strong><em class="mv">从数组中创建一个可观察对象，一个类数组对象，一个承诺，一个可迭代对象，或者一个类可观察对象。</em></p></blockquote><h2 id="23b8" class="lg lh ir bd li lj mw dn ll lm mx dp lo kp my lq lr kt mz lt lu kx na lw lx ly bi translated">履行</h2><p id="e7b4" class="pw-post-body-paragraph ke kf ir kg b kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx md kz la lb ik bi translated">现在让我们看看如何使用BaseService来对我们选择的实体执行CRUD操作:</p><figure class="me mf mg mh gu js"><div class="bz fq l di"><div class="mi mj l"/></div></figure><p id="bd0d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在，您可以像使用Angular中的常规休息服务一样使用该服务。</p><p id="c3b4" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">感谢阅读！</p><p id="0dda" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="mk">更多内容请看</em><a class="ae kd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="mk">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
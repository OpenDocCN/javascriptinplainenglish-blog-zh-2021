<html>
<head>
<title>Adding Authentication to a Vue App with Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase向Vue应用程序添加身份验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-authentication-to-a-vue-app-with-firebase-93727aaca80c?source=collection_archive---------12-----------------------#2021-01-10">https://javascript.plainenglish.io/adding-authentication-to-a-vue-app-with-firebase-93727aaca80c?source=collection_archive---------12-----------------------#2021-01-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fc159962e77b2b317d1cfe086e82ef3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8cM_AlDxYlqxErnR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@smithmehta?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Smith Mehta</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="473f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Firebase为我们提供了内置的身份验证功能。</p><p id="b923" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它来管理用户和认证他们。</p><p id="eab1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何在Vue应用程序中使用Firebase的auth功能。</p><h1 id="8dac" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建基于密码的帐户</h1><p id="0076" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用几行代码创建基于密码的帐户。</p><p id="3bf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们可以写:</p><p id="4950" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.vue</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8f85" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;form @submit.prevent="createUser"&gt;<br/>      &lt;input type="text" v-model="email" placeholder="email"&gt;<br/>      &lt;input type="password" v-model="password" placeholder="password"&gt;<br/>      &lt;input type="submit" value="create user"&gt;<br/>    &lt;/form&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import firebase from "firebase/app";<br/>import "firebase/auth";<br/>const firebaseConfig = {<br/>  apiKey: "api-key",<br/>  authDomain: "project-id.firebaseapp.com",<br/>  databaseURL: "https://project-id.firebaseio.com",<br/>  projectId: "project-id",<br/>  storageBucket: "project-id.appspot.com",<br/>  appId: "app-id"<br/>};</span><span id="5fbc" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  data() {<br/>    return {<br/>      email: "",<br/>      password: ""<br/>    };<br/>  },<br/>  beforeMount() {<br/>    firebase.initializeApp(firebaseConfig);<br/>  },<br/>  methods: {<br/>    createUser() {<br/>      const { email, password } = this;<br/>      firebase<br/>        .auth()<br/>        .createUserWithEmailAndPassword(email, password)<br/>        .then(() =&gt; alert("user creeated"))<br/>        .catch(function(error) {<br/>          console.log(error);<br/>        });<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="3907" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用一个对象初始化Firebase来配置它。</p><p id="49a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">apiKey</code>有API密匙。</p><p id="350f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">authDomain</code>是Firebase应用的网址。</p><p id="1731" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">dataBaseURL</code>有数据库的URL。</p><p id="31a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">projectId</code>拥有Firebase项目ID。</p><p id="44ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">storageBucket</code>是存储桶的URL。</p><p id="5fd3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">appId</code>是应用的ID。</p><p id="c0b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板中，我们有一个接受电子邮件和密码的表单。</p><p id="fae2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">createUser</code>方法来创建用户。</p><p id="54a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">createUserWithEmailAndPassword</code>方法接受一个电子邮件和密码字符串，用该电子邮件和密码创建用户。</p><p id="85a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当用户创建成功时，调用<code class="fe me mf mg mh b">then</code>回调。</p><p id="39bf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">catch</code>用户创建失败时调用回调。</p><p id="1cfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error</code>具有<code class="fe me mf mg mh b">code</code>和<code class="fe me mf mg mh b">message</code>属性来获取错误的来源。</p><h1 id="ca56" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用电子邮件地址和密码登录用户</h1><p id="da9e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用用户名和密码通过<code class="fe me mf mg mh b">signInWithEmailAndPassword</code>方法登录。</p><p id="983b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c599" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;form @submit.prevent="signIn"&gt;<br/>      &lt;input type="text" v-model="email" placeholder="email"&gt;<br/>      &lt;input type="password" v-model="password" placeholder="password"&gt;<br/>      &lt;input type="submit" value="sign in"&gt;<br/>    &lt;/form&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import firebase from "firebase/app";<br/>import "firebase/auth";<br/>const firebaseConfig = {<br/>  apiKey: "api-key",<br/>  authDomain: "project-id.firebaseapp.com",<br/>  databaseURL: "https://project-id.firebaseio.com",<br/>  projectId: "project-id",<br/>  storageBucket: "project-id.appspot.com",<br/>  appId: "app-id"<br/>};</span><span id="0b0b" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  data() {<br/>    return {<br/>      email: "",<br/>      password: ""<br/>    };<br/>  },<br/>  beforeMount() {<br/>    firebase.initializeApp(firebaseConfig);<br/>  },<br/>  methods: {<br/>    signIn() {<br/>      const { email, password } = this;<br/>      firebase<br/>        .auth()<br/>        .signInWithEmailAndPassword(email, password)<br/>        .then(() =&gt; alert("sign in successful"))<br/>        .catch(error =&gt; {<br/>          console.log(error);<br/>        });<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="c195" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了与<code class="fe me mf mg mh b">createUser</code>方法基本相同的<code class="fe me mf mg mh b">signIn</code>方法。</p><h1 id="1119" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Google登录</h1><p id="656b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用谷歌添加登录。</p><p id="5465" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们进入应用程序的身份验证部分。</p><p id="0caf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们转到登录方法部分，将我们的应用托管的域添加到授权域列表中。</p><p id="ff7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以添加身份验证了。</p><p id="92e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4390" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;button @click="signIn"&gt;sign in with google&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/>&lt;script&gt;<br/>import firebase from "firebase/app";<br/>import "firebase/auth";<br/>const provider = new firebase.auth.GoogleAuthProvider();<br/>const firebaseConfig = {<br/>  apiKey: "api-key",<br/>  authDomain: "project-id.firebaseapp.com",<br/>  databaseURL: "https://project-id.firebaseio.com",<br/>  projectId: "project-id",<br/>  storageBucket: "project-id.appspot.com",<br/>  appId: "app-id"<br/>};</span><span id="269e" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  data() {<br/>    return {};<br/>  },<br/>  beforeMount() {<br/>    firebase.initializeApp(firebaseConfig);<br/>  },<br/>  methods: {<br/>    signIn() {<br/>      firebase<br/>        .auth()<br/>        .signInWithPopup(provider)<br/>        .then(result =&gt; {<br/>          const token = result.credential.accessToken;<br/>          const user = result.user;<br/>          console.log(token, user);<br/>        })<br/>        .catch(error =&gt; {<br/>          console.log(error);<br/>          // ...<br/>        });<br/>    }<br/>  }<br/>};<br/>&lt;/script&gt;</span></pre><p id="2849" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">firebase.auth.GoogleAuthProvider</code>构造函数创建Google auth provider。</p><p id="0f6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">signIn</code>方法，该方法使用我们的auth provider对象调用<code class="fe me mf mg mh b">signInWithPopup</code>方法来添加登录功能。</p><p id="4620" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后调用<code class="fe me mf mg mh b">then</code>回调来获取<code class="fe me mf mg mh b">user</code>和<code class="fe me mf mg mh b">token</code>。</p><p id="87ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">user</code>有用户数据。</p><p id="248f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">token</code>有auth令牌。</p><p id="6a6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出现错误时会调用<code class="fe me mf mg mh b">catch</code>回调，它会向我们提供关于错误的信息，包括电子邮件、代码和消息。</p><h1 id="71db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a878" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将Firebase轻松添加到Vue应用程序中。</p><p id="7cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>What is JavaScript Map?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是JavaScript Map？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-javascript-map-8172bc42265a?source=collection_archive---------8-----------------------#2021-04-25">https://javascript.plainenglish.io/what-is-javascript-map-8172bc42265a?source=collection_archive---------8-----------------------#2021-04-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ad64bba50c094f6d989bff740330426e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y-590Qi5VWMQSb_o68RE1Q.png"/></div></div></figure><p id="1222" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">JavaScript曾经受到集合功能的限制。在其他语言中，您可以使用集合、关联映射、列表和字典，但是JavaScript只允许您使用数组。JavaScript开发人员找到了一种将键映射到值的方法，但是他们的方法有其自身的局限性。</p><p id="f5b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在ES6版本中，JavaScript为地图引入了一个新的内置类，使得使用集合更加容易。在这个简短的教程中，我们将讨论JavaScript <code class="fe kt ku kv kw b">Map</code>代码示例、方法和用例，并且我们将介绍要学习的高级概念。</p><p id="e75f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我们将介绍:</strong></p><ul class=""><li id="18a3" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">什么是JavaScript map？</li><li id="2f35" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">JavaScript映射语法</li><li id="a4f4" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">JavaScript映射方法和用例</li><li id="dc48" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">高级地图概念</li></ul><h1 id="4cbd" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">什么是JavaScript map？</h1><p id="7074" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">在ES6之前，JavaScript开发人员使用对象将键映射到值，但是使用对象作为映射有一些限制:</p><ul class=""><li id="fce0" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">没有可靠的方法来迭代键</li><li id="6b5f" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><code class="fe kt ku kv kw b">keys()</code>方法将字段转换成字符串，这会造成键冲突</li><li id="93f1" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">添加新键和新值没有简单的方法</li></ul><p id="fbc7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当引入<code class="fe kt ku kv kw b">Map</code>集合类型时，这些问题在ES6版本中得到了解决。它可以<strong class="jx io">保存任何类型的键-值对</strong>并且可以记住<strong class="jx io">键插入顺序</strong>。任何值(对象和原语)都可以用作键或值。</p><p id="56c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">JavaScript <code class="fe kt ku kv kw b">Map</code>创建一个新的数组，其中包含数组元素迭代的结果，并按顺序为每个元素调用一次提供的函数。它是一种重要的数据结构，有许多重要的用途。</p><blockquote class="mo mp mq"><p id="6728" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">注:</em> </strong> <em class="in"> </em> <code class="fe kt ku kv kw b"><em class="in">WeakMap</em></code> <em class="in">与</em> <code class="fe kt ku kv kw b"><em class="in">Map</em></code> <em class="in">类似，但</em> <code class="fe kt ku kv kw b"><em class="in">WeakMap</em></code> <em class="in">中的所有键都是对象。</em></p></blockquote><p id="0ff0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要创建新的<code class="fe kt ku kv kw b">Map</code>，请遵循以下语法:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="fc7a" class="nd lm in kw b gy ne nf l ng nh">let map = new Map([iterable]);</span></pre><p id="be3c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设我们想要创建一个将名称存储为键，将分数存储为值的程序。</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="678a" class="nd lm in kw b gy ne nf l ng nh">'use strict';<br/><br/>//START:DEFINE<br/>const scores =<br/>    new Map([['Ruby', 12], ['Steven', 11], ['Sam', 15], ['Robin', 14]]);<br/><br/>scores.set('James', 14);<br/><br/>console.log(scores.size);<br/>//END:DEFINE</span></pre><blockquote class="mo mp mq"><p id="2b07" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">输出:</em></strong><em class="in"/>T8】</p></blockquote><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/c8db74493cfb2251d1e29074222cc7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_a23k-em8xFmQB_J38OYeA.png"/></div></div></figure><p id="4699" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在这里做了三件事:</p><ol class=""><li id="128f" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks nj ld le lf bi translated">用名字和分数初始化<code class="fe kt ku kv kw b">scores</code>地图</li><li id="0336" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks nj ld le lf bi translated">使用<code class="fe kt ku kv kw b">set()</code>方法向映射添加了一个键和值(第7行)</li><li id="bc33" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks nj ld le lf bi translated">使用<code class="fe kt ku kv kw b">size</code>属性确定地图中有多少个键(第9行)</li></ol><p id="5982" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我们可以用JavaScript地图做更多的事情，比如:</strong></p><ul class=""><li id="680e" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">遍历地图</li><li id="8812" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">用可迭代对象初始化映射</li><li id="6be5" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">通过键从地图中获取元素</li><li id="3244" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">获取地图中元素的数量</li><li id="b9ce" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">将映射键或值转换为数组</li><li id="7317" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">按照插入顺序调用每个键值对的回调</li><li id="52bc" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">等等。</li></ul><p id="03a1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们深入研究一些方法和用例之前，让我们先来学习JavaScript map语法。</p><h1 id="3113" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">JavaScript映射语法</h1><p id="1d84" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">这个JavaScript映射语法如下:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/facac7201fb1da31d7089fdddd893380.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pMCyLnwbSIs3AFGbQKjuKw.png"/></div></div></figure><p id="04d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">描述:</p><ul class=""><li id="3e61" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated"><strong class="jx io">数组:</strong>调用特定函数的数组</li><li id="9bc5" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io">映射:</strong>使用所需参数调用数组的方法</li><li id="b6d5" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io"> function(currentValue，index，arr): </strong>带参数的函数，需要对数组中的每个元素运行</li><li id="e2cc" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io">当前值:</strong>当前元素的值</li><li id="9fdf" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io">索引:</strong>当前元素的索引</li><li id="28f2" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io"> arr: </strong>调用<code class="fe kt ku kv kw b">map()</code>的数组对象</li><li id="b523" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><strong class="jx io"> thisValue: </strong>执行时用作函数的<code class="fe kt ku kv kw b">this</code>值的值</li></ul><p id="c135" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然我们已经学习了语法，让我们来看一个<code class="fe kt ku kv kw b">map()</code>函数的示例实现:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="b8f0" class="nd lm in kw b gy ne nf l ng nh">//creating an array<br/>var an_array = [5, 3, 1, 4, 2]<br/><br/>//map calls a function with “item” as parameter<br/>//map will pass each element of an_array as “item” in this function<br/>//the function will triple each element passed and return it as the return value<br/>result = an_array.map(function(item) {<br/>    return item*3;<br/>});<br/><br/>//new list will print with the tripled values<br/>console.log(result);</span></pre><blockquote class="mo mp mq"><p id="0955" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">输出:</em> </strong> <em class="in"> </em> <code class="fe kt ku kv kw b"><em class="in">`</em>[ 15, 9, 3, 12, 6 ]`</code></p><p id="e59e" class="jv jw mr jx b jy jz ka kb kc kd ke kf ms kh ki kj mt kl km kn mu kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in">注:</em> </strong> <em class="in">原地图数组不变。</em></p></blockquote><h1 id="1dcd" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">JavaScript映射方法和用例</h1><p id="bc03" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">既然我们已经知道了JavaScript map语法，并浏览了一个示例实现，那么让我们讨论一些常用的map方法及其用例。</p><h1 id="ff69" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">用可迭代对象初始化映射</h1><p id="2871" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">Map()</code>构造函数用一个iterable对象初始化一个map:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="607b" class="nd lm in kw b gy ne nf l ng nh">let userRoles = new Map( [<br/>    [ruby, 'director'],<br/>    [steven, 'producer'],<br/>    [foo, 'writer'],<br/>    [robin, 'actress']<br/>]);</span></pre><h1 id="e0c1" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">返回映射到特定键的值</h1><p id="6269" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">get()</code>返回映射到特定键的值:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="cce9" class="nd lm in kw b gy ne nf l ng nh">userRoles.get(robin); // actress</span></pre><p id="2bbb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你传递一个不在地图中的键，它将返回<em class="mr">未定义:</em></p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="7e50" class="nd lm in kw b gy ne nf l ng nh">let emma = {name: 'Emma'};<br/>userRoles.get(emma); // undefined</span></pre><h1 id="7f72" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">返回一个布尔值，显示指定的键是否存在</h1><p id="9184" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">has()</code>返回一个布尔值，显示指定的键是否存在:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="4d54" class="nd lm in kw b gy ne nf l ng nh">userRoles.has(emma); // false<br/>userRoles.has(ruby); // true</span></pre><p id="30f4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">预览</strong></p><h1 id="d93d" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">返回地图中条目的数量</h1><p id="1103" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">size</code>属性返回地图中条目的数量:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="b2bb" class="nd lm in kw b gy ne nf l ng nh">console.log(userRoles.size); // 4</span></pre><h1 id="406d" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">返回一个新的迭代器对象，包括每个元素的值</h1><p id="6ee3" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">values()</code>返回包含每个元素值的新迭代器对象:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="09fc" class="nd lm in kw b gy ne nf l ng nh">for (let role of userRoles.values()) {<br/>    console.log(role); <br/>}<br/>// director<br/>// producer<br/>// writer<br/>// actress</span></pre><h1 id="2550" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">从地图对象中移除指定的元素</h1><p id="daf5" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">delete()</code>从地图对象中删除指定元素:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="793c" class="nd lm in kw b gy ne nf l ng nh">userRoles.delete(ruby);</span></pre><h1 id="fee9" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">移除地图对象中的所有元素</h1><p id="1617" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated"><code class="fe kt ku kv kw b">clear()</code>删除地图对象中的所有元素:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="bb82" class="nd lm in kw b gy ne nf l ng nh">userRoles.clear();</span></pre><p id="ea51" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果我们检查大小，它将返回零:</p><pre class="mv mw mx my gt mz kw na nb aw nc bi"><span id="7998" class="nd lm in kw b gy ne nf l ng nh">console.log(userRoles.size); // 0</span></pre><h1 id="d928" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">更重要的地图方法:</h1><ul class=""><li id="f5bf" class="kx ky in jx b jy mj kc mk kg nl kk nm ko nn ks lc ld le lf bi translated"><code class="fe kt ku kv kw b">forEach(callback[, thisArg])</code>:按照插入顺序为映射中的每个密钥对值调用回调</li><li id="3377" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><code class="fe kt ku kv kw b">set(key, value</code>):设置地图对象中关键点的值</li><li id="574c" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><code class="fe kt ku kv kw b">keys()</code>:返回一个新的迭代器，其中元素的键按插入顺序排列</li><li id="3f48" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated"><code class="fe kt ku kv kw b">entries()</code>:遍历键和值的集合</li></ul><h1 id="eb10" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">高级地图概念</h1><p id="7d36" class="pw-post-body-paragraph jv jw in jx b jy mj ka kb kc mk ke kf kg ml ki kj kk mm km kn ko mn kq kr ks ig bi translated">JavaScript <code class="fe kt ku kv kw b">Map</code>是一个有价值的集合类型，它使得用JavaScript编程更加简洁和高效。我们已经学习了地图语法、方法和用例。现在你已经准备好处理更高级的概念了。接下来推荐的一些概念包括:</p><ul class=""><li id="3478" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">元编程</li><li id="3895" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">原型遗传</li><li id="bef0" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">实现构造函数</li><li id="8466" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">文字</li></ul><p id="79e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mr">快乐学习！</em></p><p id="a98f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mr">更多内容请看</em><a class="ae no" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mr">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Setup Authentication with React and Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React和Rails设置身份验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-setup-auth-with-react-and-rails-c694035d94ee?source=collection_archive---------2-----------------------#2021-04-30">https://javascript.plainenglish.io/how-to-setup-auth-with-react-and-rails-c694035d94ee?source=collection_archive---------2-----------------------#2021-04-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/4ab4b04d4b4deeebad241bcaae6bd36f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IVaA1w90R5Ms8fi5tcY8xQ.jpeg"/></div></div></figure><div class=""/><p id="1730" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这在当时看起来并不明显，但是设置身份验证真的很简单，或者至少是最基本的。大多数人都知道，随着应用程序的增长，平衡身份验证变得越来越困难。</p><p id="6e4b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我通常会推荐第三方认证，甚至后端API，如Firebase或Auth0，但现在，如果您只是构建一个小应用程序，这就可以了。</p><p id="597c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，如果您已经足够深入地了解了身份验证，我将假设您对生成器非常熟悉。运行React的<code class="fe kt ku kv kw b">npx create-react-app</code>包装运行器和Rails的<code class="fe kt ku kv kw b">Rails new</code>发电机。然后在您的Rails gems文件中添加并安装:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="bb5d" class="lf lg iy kw b gy lh li l lj lk">gem install bcrypt<br/>gem install rack-cors</span></pre><p id="136b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以及你的项目可能需要的任何宝石。</p><p id="5f76" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在React端，运行npx后，您现在应该有一个类似下面的<code class="fe kt ku kv kw b">index.js</code>文件。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="0318" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很好。现在直接在您的src目录中，您将想要为<strong class="jx iz"> Redux </strong>创建一个新的子目录。除此之外，您还将创建另外两个子文件夹——actions和reducers。然后，您需要为您的Redux创建一个新的<code class="fe kt ku kv kw b">index.js</code>文件。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="ff5f" class="lf lg iy kw b gy lh li l lj lk">App.js<br/>index.js<br/>src<br/> /components<br/> /Redux<br/>   /actions <br/>     &lt;this is empty&gt;<br/>   /reducers<br/>     &lt;This is empty DIR&gt;<br/>   index.js</span></pre><p id="11c7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">导航到<code class="fe kt ku kv kw b">src/Rudux/index.js</code>这是所有神奇事情发生的地方。我们将建立我们的商店，以及一些Thunk中间件。是的，我们将使用thunk！</p><p id="cc70" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然，你需要安装<code class="fe kt ku kv kw b"> react-redux</code>和<code class="fe kt ku kv kw b">thunk.</code></p><p id="b35f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我如何设置我的:</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="b792" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，我导出了默认的存储，这将在我们设置完index.js后派上用场。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">PS, Have no Idea why it is formatted like this</figcaption></figure><p id="9724" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下一步将想用Thunk设置我们的动作创建器。看起来有点像这样。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="1cf4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们建立我们的商店，好吗？</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="b2bd" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">嘣。现在我们只需要做一个小小的Rails后端，我们应该准备好了。如果你还没有的话，现在你会想要一个<code class="fe kt ku kv kw b">sessions_store.rb</code>和一个<code class="fe kt ku kv kw b">cors.rb</code>。我们需要提供跨源的访问权限，这样cors就会知道我们的前端和后端在做什么。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="4216" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">而在你的<code class="fe kt ku kv kw b">session_store</code>里。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="9008" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们需要确保在我们的用户模型中设置了<code class="fe kt ku kv kw b">has_secure_password</code>，并在我们的<code class="fe kt ku kv kw b">users</code>表中使用password_digest。你也应该设立一个<code class="fe kt ku kv kw b">currentUserConcern</code>来帮点忙。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="ll lm l"/></div></figure><p id="a2f9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后嘣！从这里开始，您需要做的就是从终端UI设置您的组件，并构建您的用户控制器来创建一个新用户。你做到了！出色的工作。</p><p id="5e95" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读。</p><p id="6012" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae lr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">更多内容尽在plainenglish.io </em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create Public And Private Routes using React Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React路由器创建公共和私有路由</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-public-and-private-routes-using-react-router-54ca2b3f2870?source=collection_archive---------1-----------------------#2021-08-09">https://javascript.plainenglish.io/how-to-create-public-and-private-routes-using-react-router-54ca2b3f2870?source=collection_archive---------1-----------------------#2021-08-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="bf16" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用React路由器在React应用程序中编写公共和私有路由的步骤</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/15185055c1d056e77a2f30670e527952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-9AwPmPx47SOUVQHphiFA.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@bramnaus?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Bram Naus</a> on <a class="ae ky" href="https://unsplash.com/s/photos/internet?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f337" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在开发带身份验证的React应用程序时，我们可能需要公共和私有路由。我们先来看看它们是什么。</p><h1 id="c3e2" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">公共路线</h1><p id="3e53" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">公共路由有登录、注册、忘记密码、重置密码。简单来说，这些路线都可以在登录app前访问。</p><h1 id="242c" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">私人路线</h1><p id="e125" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">私人路线因应用程序而异，例如仪表板、用户资料、应用程序设置、主页等。简单来说，这些路由只有登录后才能访问。</p><p id="e4cb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">公共和私有路由的约束条件是，公共路由在登录后不应被访问，私有路由在登录前不应被访问。</p><p id="59b2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将看到这是如何实现的——如何使用<a class="ae ky" href="https://reactrouter.com/web/guides/quick-start" rel="noopener ugc nofollow" target="_blank"> react-router </a>为您的react应用程序创建公共和私有路由。我们开始吧</p><h1 id="32b8" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">公共路线</h1><p id="38bb" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">首先，让我们创建一个<code class="fe mc md me mf b">PublicRoute.js</code>组件来处理公共路线情况，如下所示</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="a777" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从上面的代码中可以看到，公共路由组件接收了3个道具，如<code class="fe mc md me mf b">children</code>、<code class="fe mc md me mf b">isAuthenticated</code>和<code class="fe mc md me mf b">…rest</code>。如果用户通过了身份验证，他将被重定向到主屏幕，如果他没有通过身份验证(登录)，他只能访问公共路由。</p><h1 id="09bd" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">私人路线</h1><p id="85f4" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">私有路由组件类似于公共路由，唯一的变化是重定向URL和身份验证条件。如果用户未通过身份验证，他将被重定向到登录页面，并且只有通过身份验证(登录)后，用户才能访问通过身份验证的路由。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="d68d" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">受保护的路线</h1><p id="031a" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">受保护的路由组件用于映射所有已验证的路由，如下所示</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="8502" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在routes.js中，已验证的路由定义如下</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h1 id="fddd" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">集成路线</h1><p id="5646" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">现在，让我们将路由组件集成到App.js中，如下所示</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="1e2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们用<code class="fe mc md me mf b">&lt;PublicRoute /&gt; </code>组件包装了非认证路由，用<code class="fe mc md me mf b">&lt;PrivateRoute /&gt;</code>组件包装了认证路由。我们已经使用了<strong class="jm io">悬念</strong>来增加组件的延迟加载。</p><p id="759c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们已经配置了私有和公有路由。如果不匹配，将呈现<code class="fe mc md me mf b">&lt;NoFoundComponent /&gt;</code>。</p></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><h1 id="9b65" class="kz la in bd lb lc mp le lf lg mq li lj lk mr lm ln lo ms lq lr ls mt lu lv lw bi translated">结论</h1><p id="f9fc" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">公共和私有路由也将限制在注销后使用浏览器后退按钮访问以前访问过的路由。我希望你已经发现这是有用的。感谢您的阅读。</p><p id="b519" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mu">更多内容请看</em><a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="mu">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
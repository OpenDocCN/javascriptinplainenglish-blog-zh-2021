<html>
<head>
<title>How To Cut Your Gatsby Bundle Size By Enabling Preact Support</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过启用Preact支持来缩减Gatsby包的大小</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/gatsby-preact-bfe5543bf27b?source=collection_archive---------8-----------------------#2021-08-18">https://javascript.plainenglish.io/gatsby-preact-bfe5543bf27b?source=collection_archive---------8-----------------------#2021-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ad6a" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">无需重写您的代码库</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8285631e8cdf152ebbad420dec68d9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ZeqXOhuLzhJi9kkRcvyKg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: the author</figcaption></figure><p id="ec86" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们知道React.js不是免费的——它附带了许多千字节的包大小。然而，也有Preact，把React.js放在严格的饮食上。</p><p id="f2df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">虽然许多人仍然不承认Preact的潜力，但我承认了。我将一些页面从React转移到Preact，无需重写代码，从而节省了50到100千字节的包大小。</p><p id="997f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里是如何让你的盖茨比大小使用Preact而不是react。</p><p id="2b55" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我们需要安装插件:</p><pre class="kg kh ki kj gt lr ls lt lu aw lv bi"><span id="41e7" class="lw lx iq ls b gy ly lz l ma mb">npm install gatsby-plugin-preact preact preact-render-to-string</span></pre><p id="39f5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，我们得到了Preact在船上。是时候告诉盖茨比应该利用它了。</p><p id="39fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe mc md me ls b">gatsby-config.js</code>中，确保将其添加到插件中。</p><pre class="kg kh ki kj gt lr ls lt lu aw lv bi"><span id="a7ca" class="lw lx iq ls b gy ly lz l ma mb">plugins: [`gatsby-plugin-preact`]</span></pre><p id="e49d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下次运行应用程序时，将使用Preact。只要你不需要React-exclusive特性，Preact没有提供，你就不需要重写任何东西。无论是功能组件还是基于类的组件，使用或不使用钩子，Preact都能帮你搞定。</p><p id="158c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">想看看例子吗？</p><p id="c86e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在构建和提供默认Gatsby页面时，我们看到以下大小:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/d7a6262ebc14a71a1c67d1f005f4b016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*a1z6X0PWkNShUhBQpCmhLQ.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/242b12ad6bfdce6498c4b3ea7e594cf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ynr4ro9wUbU_a2RpdJTdHg.png"/></div></div></figure><p id="56b4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">包含React.js基础的框架文件和包含我们应用程序背后的逻辑的应用程序文件是最重要的部分。</p><p id="6178" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">切换到Preact后，同一个页面变得简单多了:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/43eba60446f02ba05b609e2e1cb378f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*UQ-PvTNQXUB8PKjcK4xOcg.png"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/5b50e2ca8f0bfecda6a3e73c04b517eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LjjXw1yKP0H2PmUda-vXfQ.png"/></div></div></figure><p id="c2a6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您所看到的，我们的页面已经变得非常小了——尽管除了配置文件之外，我们没有对代码基础做任何更改。甚至没有必要改变进口。正如<a class="ae mi" href="https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-preact" rel="noopener ugc nofollow" target="_blank">官方页面</a>所说:</p><blockquote class="mj mk ml"><p id="339d" class="kv kw mm kx b ky kz jr la lb lc ju ld mn lf lg lh mo lj lk ll mp ln lo lp lq ij bi translated">为用Preact替换React提供插件支持</p></blockquote><p id="5c7c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢您的阅读！</p><p id="0ccd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">关于Preact &amp; Gatsby的更多信息:</p><div class="mq mr gp gr ms mt"><a rel="noopener  ugc nofollow" target="_blank" href="/next-js-preact-f993c95a3f93"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">想让你的Next.js App更快？启用预先支持(方法如下)</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">如何在你的Next.js应用上启用Preact支持，并几乎免费节省几千字节。</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nc l"><div class="nd l ne nf ng nc nh kp mt"/></div></div></a></div><div class="mq mr gp gr ms mt"><a rel="noopener  ugc nofollow" target="_blank" href="/astro-next-js-gatsby-3517e0dc884"><div class="mu ab fo"><div class="mv ab mw cl cj mx"><h2 class="bd ir gy z fp my fr fs mz fu fw ip bi translated">我使用Astro、Next.js和Gatsby构建了相同的应用程序——区别如下</h2><div class="na l"><h3 class="bd b gy z fp my fr fs mz fu fw dk translated">管束尺寸、结构和特征</h3></div><div class="nb l"><p class="bd b dl z fp my fr fs mz fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nc l"><div class="ni l ne nf ng nc nh kp mt"/></div></div></a></div><p id="45d3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="mm">更多内容尽在</em><a class="ae mi" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="mm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
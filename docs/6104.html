<html>
<head>
<title>How a Complex React Redux App Works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">复杂反应Redux应用程序是如何工作的</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-how-a-complex-react-redux-app-works-934b3600ad13?source=collection_archive---------5-----------------------#2021-12-31">https://javascript.plainenglish.io/understanding-how-a-complex-react-redux-app-works-934b3600ad13?source=collection_archive---------5-----------------------#2021-12-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ce25" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一步一步来理解，不要太混乱。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7ffb8a8b80df89c875cc8f6f4c71e314.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7r7HSYkbn73NrmR_skvh5w.jpeg"/></div></div></figure><p id="2b84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上一篇文章<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/getting-ready-for-debugging-react-redux-apps-a1eefea535">准备调试React Redux应用程序</a>中，简要介绍了用<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/what-is-redux-chess-6264c99c1eca"> Redux象棋</a>分析一款象棋游戏。正是考虑到这个用例，第一次在浏览器中安装了<strong class="kt ir"> Redux DevTools </strong>扩展。我们了解到分析板允许你自己下棋——这是<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/check-out-the-redux-chess-demo-acbea003d710"> Redux象棋演示</a>启动时的默认游戏模式。</p><p id="24a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们从分析<code class="fe lo lp lq lr b">1.e4 e5</code>开始，T0也被称为开放游戏。</p><div class="ls lt gp gr lu lv"><a href="https://en.wikipedia.org/wiki/Open_Game" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">开放游戏-维基百科</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">一个开放的游戏(或双王的棋子开放)是一个国际象棋开始与以下动作:白色已经移动…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">en.wikipedia.org</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div><p id="9860" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在那种情况下，重点主要放在用户分析游戏时调度的动作上，然后出现一个动作列表。</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="006e" class="mo mp iq lr b gy mq mr l ms mt">PICK_PIECE<br/>LEGAL_MOVES<br/>LEAVE_PIECE<br/>VALID_MOVE<br/>PICK_PIECE<br/>LEGAL_MOVES<br/>LEAVE_PIECE<br/>VALID_MOVE<br/>FLIP_BOARD<br/>OPEN_GET_PGN_DIALOG<br/>CLOSE_GET_PGN_DIALOG</span></pre><p id="6c42" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，应用程序的状态变化与调度的动作是同步的。因此，在今天的帖子中，我们将检查应用程序的状态，以便熟悉它，还有什么比在<strong class="kt ir"> Redux DevTools </strong>中检查状态树更好的方法呢？</p><h1 id="9078" class="mu mp iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">我们开始吧！</h1><p id="8958" class="pw-post-body-paragraph kr ks iq kt b ku nl jr kw kx nm ju kz la nn lc ld le no lg lh li np lk ll lm ij bi translated"><code class="fe lo lp lq lr b">src/reducers/rootReducer.js</code>中的根缩减器为您提供了一个概念，即如何将状态划分为多个缩减器，每个缩减器负责管理状态的特定部分。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="49cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">图1 </strong>展示了不同的视角。</p><p id="f3b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是第一次加载应用程序后，即自动调度初始操作后，整个全局状态的快照。</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="bdff" class="mo mp iq lr b gy mq mr l ms mt">@@INIT<br/>CONNECTION_ESTABLISHED<br/>INFO_CLOSE_ALERT<br/>START</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/cbf374c3865035c0deee3a770e7a285d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ybSXGQC26aRlKB9Rs-KK2g.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk">Figure 1. Open Redux DevTools, then click on State followed by Raw.</figcaption></figure><p id="642c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是原始的JSON对象，作为所有游戏分析的起点。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="14fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不过，我们分析象棋游戏时主要关注的是<code class="fe lo lp lq lr b">board</code>减压器，因为当用户点击棋盘上的方块进行移动时，这个部分会发生变化。点击<code class="fe lo lp lq lr b">e2</code>后，板卡减速器是如何改变状态的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/1eb9ba4491164ef819d44b947fd4fe00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD7xksrzOEufHnLmpTZHNg.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk">Figure 2. The user clicks on e2.</figcaption></figure><p id="2454" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我再怎么强调也不为过，在这个特殊的案例中，全球状态的变化与调度的行动是同步的:</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="c9fd" class="mo mp iq lr b gy mq mr l ms mt">PICK_PIECE<br/>LEGAL_MOVES</span></pre><p id="87ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">再次为了更好的可读性，下面是原始JSON对象在<code class="fe lo lp lq lr b">board</code>状态更新后的样子。</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="e51b" class="mo mp iq lr b gy mq mr l ms mt">{<br/>  ...<br/>  board: {<br/>    ...<br/>    picked: {<br/>      i: 6,<br/>      j: 4,<br/>      algebraic: 'e2',<br/>      piece: ' P ',<br/>      legal_moves: [<br/>        'e3',<br/>        'e4'<br/>      ]<br/>    },<br/>    ...<br/>  },<br/>  ...<br/>}</span></pre><p id="d9b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">基本上,<code class="fe lo lp lq lr b">board.picked</code> JSON键已经更新了新的信息。玩家在<code class="fe lo lp lq lr b">e2</code>上选择了一个棋子，结果是一个棋子<code class="fe lo lp lq lr b"> P</code>，在<code class="fe lo lp lq lr b">e3</code>和<code class="fe lo lp lq lr b">e4</code>上有合法的移动。8×8矩阵中的索引<code class="fe lo lp lq lr b">i</code>和<code class="fe lo lp lq lr b">j</code>也可用于进一步处理。</p><p id="3347" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">手头有了<code class="fe lo lp lq lr b">board.picked</code>信息，突出显示<code class="fe lo lp lq lr b">e2</code>上的棋子及其合法移动就很简单了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/3a30a625d9aaf47f379c5d17fd23b719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*NJTfcmjrX58DSqA3eZ_HuQ.png"/></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk">Figure 3. e2, e3 and e4 are highlighted.</figcaption></figure><h1 id="3fff" class="mu mp iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">但是数据是从哪里来的呢？</h1><p id="2d15" class="pw-post-body-paragraph kr ks iq kt b ku nl jr kw kx nm ju kz la nn lc ld le no lg lh li np lk ll lm ij bi translated">请记住，Redux Chess旨在“只是一个棋盘”,尽可能地轻量级，这意味着它依赖于国际象棋服务器来满足其大部分处理需求。在过滤<strong class="kt ir"> WS </strong>流量时，<strong class="kt ir"> Chrome DevTools </strong>中的<strong class="kt ir">网络</strong>选项卡将提供以下信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/375f02bea7f84d88abb5ba21c1815a4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNuIaOjJwCtrkagvhMwiDQ.png"/></div></div><figcaption class="nt nu gj gh gi nv nw bd b be z dk">Figure 4. WebSocket messages sent to the server.</figcaption></figure><p id="fe35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点击<code class="fe lo lp lq lr b">e2</code>后，网络浏览器向WebSocket服务器发送此消息:</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="8631" class="mo mp iq lr b gy mq mr l ms mt">/piece e2</span></pre><p id="4aa5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后服务器做出相应的回应:</p><pre class="kg kh ki kj gt mk lr ml mm aw mn bi"><span id="4fb5" class="mo mp iq lr b gy mq mr l ms mt">{"\/piece":{"color":"w","identity":"P","position":"e2","moves":["e3","e4"]}}</span></pre><p id="66e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">干得好！现在请花点时间让你的眼睛休息一下。</p><h1 id="b80a" class="mu mp iq bd mv mw mx my mz na nb nc nd jw ne jx nf jz ng ka nh kc ni kd nj nk bi translated">结论</h1><p id="4adf" class="pw-post-body-paragraph kr ks iq kt b ku nl jr kw kx nm ju kz la nn lc ld le no lg lh li np lk ll lm ij bi translated">开始使用复杂的React Redux应用程序的一个好方法是首先检查它的测试环境，尤其是在第一次提交之前的学习曲线的开始。我们仍然在通过与它的UI交互来获得一些关于Redux Chess如何工作的直观知识，将它分解成易于管理的理解，一次一步。</p><p id="5627" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用Redux模式，应用程序的状态变化与分派的操作密切相关——按照通用的同步Redux流程。然而，目前的React Redux应用程序涉及两个应用程序之间的客户端-服务器通信:web浏览器和象棋服务器。</p><p id="7cb3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，当棋手在分析模式下点击新棋盘上的<code class="fe lo lp lq lr b">e2</code>时，浏览器会向国际象棋服务器发送一条WebSocket消息，以计算出该方格上的棋子及其合法走法。</p><p id="1531" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所有这一切都归功于<strong class="kt ir"> Chrome DevTools </strong>和<strong class="kt ir"> Redux DevTools </strong>扩展。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/what-is-redux-chess-6264c99c1eca"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">Redux棋是什么？</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">嵌入到React应用程序中的易于使用的象棋插件</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="ny l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/check-out-the-redux-chess-demo-acbea003d710"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">查看Redux国际象棋演示</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">请坐下来，享受一杯你最喜欢的啤酒</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="nz l mg mh mi me mj kp lv"/></div></div></a></div><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/getting-ready-for-debugging-react-redux-apps-a1eefea535"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">准备调试React Redux应用程序</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">一边听有助于你感到平静和快乐的音乐</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="oa l mg mh mi me mj kp lv"/></div></div></a></div><p id="ab24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ob">更多内容看</em> <a class="ae ln" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="ob">说白了. io </em> </strong> </a> <strong class="kt ir"> <em class="ob">。</em></strong><em class="ob"/><strong class="kt ir"><em class="ob"/></strong><a class="ae ln" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ob">免费每周简讯</em> </strong> </a> <strong class="kt ir"> <em class="ob">。</em> </strong> <em class="ob">在我们的</em><strong class="kt ir"><em class="ob"/></strong><a class="ae ln" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ob">社区不和谐</em> </strong> </a> <strong class="kt ir"> <em class="ob">中获取独家写作机会和建议。</em> </strong></p></div></div>    
</body>
</html>
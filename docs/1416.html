<html>
<head>
<title>How to Build a Highly Responsive UI with ResizeObserver API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用ResizeObserver API构建高响应性的UI</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-highly-responsive-ui-with-resizeobserver-api-e645d3c578d5?source=collection_archive---------8-----------------------#2021-03-25">https://javascript.plainenglish.io/how-to-build-a-highly-responsive-ui-with-resizeobserver-api-e645d3c578d5?source=collection_archive---------8-----------------------#2021-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4e49" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们用先进的响应式设计理念打动用户。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3054cac5048d3564db7554586fb04555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5lLGYJXaxAKqdevef94-QQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@halacious?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">HalGatewood.com</a> on <a class="ae kv" href="/s/photos/web?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此前，几乎所有的网络应用和网站都有固定的宽度。请记住，我们曾经有一段时间，网站促使我们以预定义的分辨率查看特定网站，以获得最佳浏览效果。例如，一些网站表示，他们的内容在1024x768的屏幕上清晰可见。对于较小的屏幕，有一个水平滚动条来查看隐藏的内容。响应式设计一词在2010年开始流行。在CSS媒体查询的帮助下，每个人都试图让他们的网站对任何屏幕尺寸都友好。换句话说，他们做出了反应灵敏的用户界面。</p><p id="cdb8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，所有的web UI工具包都有现成的响应设计支持。我们不需要付出更多的努力来使我们的用户界面对不同的分辨率友好。此外，响应式设计不再是一个时髦的词，因为它现在就像一个标准。我们确实可以通过一些高级的响应实现概念来增强应用程序的可用性。也许，您的应用程序有一些可调整大小的窗口、可扩展区域和分隔视口的分割线。您可以通过根据resize事件动态更改UI元素来构建更生动的UI。例子见以下情况。</p><ul class=""><li id="e9f5" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">根据特定父级<code class="fe mb mc md me b">div</code>的大小显示和隐藏不同的UI元素。</li><li id="be56" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">根据屏幕大小或特定父<code class="fe mb mc md me b">div</code>的大小应用不同的字体大小。</li><li id="1bac" class="ls lt iq ky b kz mf lc mg lf mh lj mi ln mj lr lx ly lz ma bi translated">为您的应用程序实现不同的模式。例如，一些应用程序根据屏幕上的可用空间激活不同的UI模式。</li></ul></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="66cb" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">什么是ResizeObserver API？</h1><p id="29db" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">ResizeObserver接口检测给定DOM元素的大小变化。如果高度或宽度发生变化，将触发一个回调函数，为每个DOM元素指定新的大小。</p><p id="c915" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个API作为标准API被添加到W3C规范中，因为现有的DOM大小变化检测方法是不成熟的变通方法。换句话说，即使有一个标准的API来检测窗口调整事件，也没有一种直接的方法来观察特定DOM元素的调整事件。现在，我们可以用ResizeObserver API创建下一级响应ui，而不会给web应用程序带来性能问题。</p><p id="ef4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">而且浏览器对这个API的支持还是不错的。除了Internet Explorer之外的所有浏览器都支持ResizeObserver API。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="46e4" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">如何使用ResizeObserver API</h1><p id="0bc2" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">让我们看看如何使用这个API。首先，我们需要创建一个resize observer实例，如下所示。</p><pre class="kg kh ki kj gt no me np nq aw nr bi"><span id="9933" class="ns ms iq me b gy nt nu l nv nw">let resizeObserver = new ResizeObserver(onResize);</span></pre><p id="2037" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">构造函数接受一个回调函数，该函数将被resize事件触发。</p><pre class="kg kh ki kj gt no me np nq aw nr bi"><span id="1e72" class="ns ms iq me b gy nt nu l nv nw">function onResize(entries) {<br/>    // "entries" is an array of ResizeObserverEntry objects.<br/>}</span></pre><p id="4578" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mb mc md me b">ResizeObserverEntry</code>对象包含被观察元素的新维度的信息。</p><p id="0aad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦创建了observer实例，就可以用<code class="fe mb mc md me b">observe</code>方法观察任何DOM元素，如下所示。</p><pre class="kg kh ki kj gt no me np nq aw nr bi"><span id="bb73" class="ns ms iq me b gy nt nu l nv nw">resizeObserver.observe(HTMLElement_1);<br/>resizeObserver.observe(HTMLElement_2);<br/>...<br/>resizeObserver.observe(HTMLElement_n);</span></pre><p id="7b52" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果需要从观察者中移除一个元素，可以使用<code class="fe mb mc md me b">unobserve</code>方法。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="cce2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子有一个可调整大小的<code class="fe mb mc md me b">div</code>元素。当宽度发生变化时，将相应地激活不同的模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/10e30f3af4fcb789e9dbf0da448236b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Y0_OJdIRz5he6712xrVPGQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Example usage of the ResizeObserver API. A screen recording by the author.</figcaption></figure><p id="eae1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看上面例子的源代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="9f12" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">结论</h1><p id="cf48" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">这个API可以和任何前端框架一起使用。当您通过<code class="fe mb mc md me b">disconnect</code>方法改变视图时，确保清除观察者。<code class="fe mb mc md me b">disconnect</code>方法从observer实例中删除所有附加的元素。</p></div></div>    
</body>
</html>
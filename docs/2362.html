<html>
<head>
<title>Create a Grade Calculator with React and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和JavaScript创建一个分数计算器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-grade-calculator-with-react-and-javascript-c5930d0a3bbc?source=collection_archive---------16-----------------------#2021-05-16">https://javascript.plainenglish.io/create-a-grade-calculator-with-react-and-javascript-c5930d0a3bbc?source=collection_archive---------16-----------------------#2021-05-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/421f42cc04d0866996c1c58c35962352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Dnr7_9_H9zVMAgeu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@itssammoqadam?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sam Moqadam</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4046" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个易于使用的JavaScript框架，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用React和JavaScript创建一个分数计算器。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Create React App创建React项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app grade-calculator</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起创建我们的React项目。</p><p id="e0b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们必须安装<code class="fe ms mt mu mj b">uuid</code>包，让我们为每个成绩条目分配唯一的id。</p><p id="a7da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d8d9" class="mn lc iq mj b gy mo mp l mq mr">npm i uuid</span></pre><h1 id="c534" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建等级计算器</h1><p id="e01d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建分数计算器，我们编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0609" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";<br/>import { v4 as uuidv4 } from "uuid";</span><span id="745a" class="mn lc iq mj b gy mv mp l mq mr">export default function App() {<br/>  const [grades, setGrades] = useState([{ id: uuidv4(), value: 0 }]);<br/>  const [average, setAverage] = useState(0);</span><span id="3593" class="mn lc iq mj b gy mv mp l mq mr">  const addGrade = () =&gt; {<br/>    setGrades((grades) =&gt; [...grades, { id: uuidv4(), value: 0 }]);<br/>  };</span><span id="ce3d" class="mn lc iq mj b gy mv mp l mq mr">  const deleteGrade = (index) =&gt; {<br/>    setGrades((grades) =&gt; grades.filter((_, i) =&gt; i !== index));<br/>  };</span><span id="300e" class="mn lc iq mj b gy mv mp l mq mr">  const calculate = (e) =&gt; {<br/>    e.preventDefault();<br/>    const formValid = grades.every(({ value }) =&gt; !isNaN(+value));<br/>    if (!formValid) {<br/>      return;<br/>    }<br/>    setAverage(<br/>      grades.map(({ value }) =&gt; value).reduce((a, b) =&gt; +a + +b, 0) /<br/>        grades.length<br/>    );<br/>  };</span><span id="65a9" class="mn lc iq mj b gy mv mp l mq mr">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;form onSubmit={calculate}&gt;<br/>        {grades.map((g, i) =&gt; {<br/>          return (<br/>            &lt;div key={g.id}&gt;<br/>              &lt;label&gt;grade&lt;/label&gt;<br/>              &lt;input<br/>                value={g.value}<br/>                onChange={(e) =&gt; {<br/>                  const grds = [...grades];<br/>                  grds[i].value = e.target.value;<br/>                  setGrades(grds);<br/>                }}<br/>              /&gt;<br/>              &lt;button type="button" onClick={() =&gt; deleteGrade(i)}&gt;<br/>                delete grade<br/>              &lt;/button&gt;<br/>            &lt;/div&gt;<br/>          );<br/>        })}</span><span id="1035" class="mn lc iq mj b gy mv mp l mq mr">        &lt;button type="button" onClick={addGrade}&gt;<br/>          add grade<br/>        &lt;/button&gt;<br/>        &lt;button type="submit"&gt;calculate average&lt;/button&gt;<br/>      &lt;/form&gt;<br/>      &lt;div&gt;Your average grade is {average}&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5de2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们最初将<code class="fe ms mt mu mj b">grades</code>状态集定义为一个只有一个条目的数组。</p><p id="255d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们定义保持平均成绩的<code class="fe ms mt mu mj b">average</code>州。</p><p id="d1c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">addGrade</code>功能让我们添加一个等级条目。</p><p id="1ca6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，我们用回调函数调用了<code class="fe ms mt mu mj b">setGrades</code>,该回调函数返回一个在末尾有新条目的<code class="fe ms mt mu mj b">grades</code>数组的副本。</p><p id="afbd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">id</code>被设置为<code class="fe ms mt mu mj b">uuidv4</code>的返回值，以设置唯一ID。</p><p id="d026" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建<code class="fe ms mt mu mj b">deleteGrade</code>函数，该函数调用带有回调的<code class="fe ms mt mu mj b">setGrades</code>，该回调返回没有给定<code class="fe ms mt mu mj b">index</code>的<code class="fe ms mt mu mj b">grades</code>数组，以从<code class="fe ms mt mu mj b">grades</code>数组中移除给定的条目。</p><p id="6bc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">calculate</code>函数计算平均值。</p><p id="84ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，我们调用<code class="fe ms mt mu mj b">e.preventDefault()</code>进行客户端表单提交。</p><p id="9718" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们检查每个<code class="fe ms mt mu mj b">grade</code>条目的每个<code class="fe ms mt mu mj b">value</code>属性是否是一个数字。</p><p id="5c39" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那么我们用一个表达式调用<code class="fe ms mt mu mj b">setAverage</code>来计算平均值。</p><p id="4185" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe ms mt mu mj b">grades</code>映射到一个只有<code class="fe ms mt mu mj b">value</code>值的数组。</p><p id="b0f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用该数组上的<code class="fe ms mt mu mj b">reduce</code>将所有的值加在一起，并用回调函数返回。</p><p id="1218" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">reduce</code>的第二个参数有初始返回值。</p><p id="557e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们有一个将<code class="fe ms mt mu mj b">onSubmit</code>属性设置为<code class="fe ms mt mu mj b">submit</code>的表单来提交表单。</p><p id="60b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，我们将<code class="fe ms mt mu mj b">grades</code>数组呈现为一个输入。</p><p id="ba2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe ms mt mu mj b">key</code>属性设置为<code class="fe ms mt mu mj b">g.id</code>以将其设置为唯一的ID，这样React就可以跟踪条目。</p><p id="2ac0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe ms mt mu mj b">value</code>设置为<code class="fe ms mt mu mj b">g.value</code>。</p><p id="f179" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ms mt mu mj b">onChange</code>回调中，我们复制了<code class="fe ms mt mu mj b">grades</code>。然后我们将给定索引的<code class="fe ms mt mu mj b">grades</code>条目的<code class="fe ms mt mu mj b">value</code>设置为<code class="fe ms mt mu mj b">e.target.value</code>。</p><p id="5a35" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">e.target.value</code>有输入值。</p><p id="a0ae" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">setGrades</code>用最新的值更新<code class="fe ms mt mu mj b">grades</code>数组。</p><p id="3564" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们有删除等级按钮，当我们点击它的时候调用<code class="fe ms mt mu mj b">deleteGrade</code>。</p><p id="5712" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在输入下方，我们有“添加等级”和“计算平均值”按钮。</p><p id="24b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击add grade按钮时，它会调用<code class="fe ms mt mu mj b">addGrade</code>。</p><p id="f82c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">计算平均值按钮触发<code class="fe ms mt mu mj b">submit</code>事件，因为它具有类型<code class="fe ms mt mu mj b">submit</code>。</p><p id="cf4b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在表格下方，我们显示了<code class="fe ms mt mu mj b">average</code>等级值。</p><h1 id="a82a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="88b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用React和JavaScript创建一个成绩计算器。</p><p id="f7f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
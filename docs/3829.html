<html>
<head>
<title>Create Your Custom React Hook: A Short and Simple Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建您的自定义React挂钩:一个简短的指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-your-custom-react-hook-bf087e303004?source=collection_archive---------10-----------------------#2021-08-01">https://javascript.plainenglish.io/create-your-custom-react-hook-bf087e303004?source=collection_archive---------10-----------------------#2021-08-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/62e5535abab51c8d64a361f5e0ff9c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b2n2pb214SPm3Qcq"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@casparrubin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Caspar Camille Rubin</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="1820" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">介绍</h1><p id="ae2b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">嘿，今天我们要创建一个自定义的反应钩。我们将要使用的钩子使用Axios API调用按钮click。我想你已经对钩子有所了解了。所以，如果你很急，那么你可以跳过这篇文章，直接从<a class="ae jz" href="https://github.com/Piyush-Use-Personal/useful-hooks" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获取代码，或者从<a class="ae jz" href="https://www.npmjs.com/package/useful-hook" rel="noopener ugc nofollow" target="_blank">这里</a>安装软件包。</p><h1 id="a697" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">开始</h1><p id="980d" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">首先，您可以在任何应用程序中添加挂钩，无论是已经内置的还是新的项目。您可以将挂钩存储在项目的文件夹下。所以我跳过文件夹管理，直接创建一个名为<code class="fe lw lx ly lz b">useActionAxios.jsx</code>的文件。一旦你创建了它，让我们来看看钩子的基础。</p><blockquote class="ma mb mc"><p id="7c0b" class="ky kz md la b lb me ld le lf mf lh li mg mh ll lm mi mj lp lq mk ml lt lu lv ig bi translated">一个React钩子只是一个普通的组件，但是它不返回JSX，而是返回状态值或者与它们一起工作</p></blockquote><p id="a5b6" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">首先，我们需要将一些项目导入到文件的顶部</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="5ef2" class="mu kb in lz b gy mv mw l mx my">import { useState } from 'react';</span></pre><p id="8e64" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">然后，让我们决定运行钩子需要采用哪个参数。既然我们要创建Axios挂钩，那么我必须采取</p><ul class=""><li id="adc7" class="mz na in la b lb me lf mf lj nb ln nc lr nd lv ne nf ng nh bi translated">URL —所请求资源的URL</li><li id="7439" class="mz na in la b lb ni lf nj lj nk ln nl lr nm lv ne nf ng nh bi translated">config—Axios需要作为第二个参数的参数数量</li></ul><p id="700f" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">让我们把它作为</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="650c" class="mu kb in lz b gy mv mw l mx my">export const useActionFetch = (<em class="md">url</em>, <em class="md">config</em> = {}) =&gt; {</span><span id="a6e0" class="mu kb in lz b gy nn mw l mx my">// logical code</span><span id="139c" class="mu kb in lz b gy nn mw l mx my">}</span></pre><p id="4894" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">下一个任务是定义我们需要从钩子中取出哪些参数，并为它们创建一个状态。我决定作为</p><ul class=""><li id="f167" class="mz na in la b lb me lf mf lj nb ln nc lr nd lv ne nf ng nh bi translated">isSuccess —如果API调用成功</li><li id="48a4" class="mz na in la b lb ni lf nj lj nk ln nl lr nm lv ne nf ng nh bi translated">错误—如果API失败并存储了错误</li><li id="8344" class="mz na in la b lb ni lf nj lj nk ln nl lr nm lv ne nf ng nh bi translated">正在加载—如果没有响应</li><li id="9ee7" class="mz na in la b lb ni lf nj lj nk ln nl lr nm lv ne nf ng nh bi translated">result——无论我们从API得到什么结果</li></ul><p id="3240" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">修改后的代码将如下所示:</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/ec7e41c7e6954e5cd879a3b103050f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6-E9zXQnvqjG2XiKlZMf9g.png"/></div></div></figure><p id="9c2a" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">如果你看一下代码，你会发现我在return语句前又添加了一行和一个方法。这是会产生奇迹的部分。将该方法附加到一个常规变量，只有在从某个地方调用该变量时，才会触发该方法。例如，点击按钮、从下拉列表中选择等等。</p><blockquote class="ma mb mc"><p id="7cc0" class="ky kz md la b lb me ld le lf mf lh li mg mh ll lm mi mj lp lq mk ml lt lu lv ig bi translated">如果我们想添加一个在componentDidMount时运行的方法，那么我们需要添加useEffect来代替function</p></blockquote><p id="46f7" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">添加一个登录，我从Axios创建一个常规的fetch方法，并根据响应更新状态变量。代码将如下所示:</p><figure class="mm mn mo mp gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/b4a0da109ebe2fe80adc498a70593659.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OsmMHP6ysCgIsX5HJZD6Mw.png"/></div></div></figure><p id="6b19" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">你也可以在一个变量中包含所有状态，但这取决于你。我在dispatch中添加了一个变量，如果有人想在执行其他操作时传递其他数据。</p><h1 id="cdc0" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">让我们用我们的钩子</h1><p id="b6c9" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">为了使用我们的钩子，我们可以把它作为一个普通的钩子导入到你的功能组件中。</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="aac5" class="mu kb in lz b gy mv mw l mx my">const {</span><span id="3b83" class="mu kb in lz b gy nn mw l mx my">  error,</span><span id="1080" class="mu kb in lz b gy nn mw l mx my">  isLoading,</span><span id="42ab" class="mu kb in lz b gy nn mw l mx my">  result,</span><span id="d9b1" class="mu kb in lz b gy nn mw l mx my">  isSuccess,</span><span id="de96" class="mu kb in lz b gy nn mw l mx my">  dispatch,</span><span id="fe59" class="mu kb in lz b gy nn mw l mx my">} = useActionFetch(API_URL);</span></pre><p id="73c3" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">将URL传递给钩子，你的钩子就准备好了。您只需要在事件监听器中调用调度程序。</p><pre class="mm mn mo mp gt mq lz mr ms aw mt bi"><span id="32ed" class="mu kb in lz b gy mv mw l mx my">const onSave = () =&gt; {</span><span id="9a4d" class="mu kb in lz b gy nn mw l mx my">  dispatch()</span><span id="ab5d" class="mu kb in lz b gy nn mw l mx my">}</span><span id="6d6b" class="mu kb in lz b gy nn mw l mx my">// your other code<br/>return &lt;Button onClick = {() =&gt; onSave()}&gt;Save&lt;/Button&gt;</span></pre><p id="89ed" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">在这里，你可以有多种多样的挂钩，以最适合你的项目。</p><p id="ed64" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated">希望这篇短文能抓住你的注意力，并帮助你学到一些东西。感谢您的参与，祝您好运！</p><p id="cedb" class="pw-post-body-paragraph ky kz in la b lb me ld le lf mf lh li lj mh ll lm ln mj lp lq lr ml lt lu lv ig bi translated"><em class="md">更多内容看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="la io"><em class="md">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
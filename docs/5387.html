<html>
<head>
<title>3 Ways JavaScript Hoisting Affects Your Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提升影响代码的3种方式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-ways-javascript-hoisting-affects-your-code-a6a93626c600?source=collection_archive---------4-----------------------#2021-11-07">https://javascript.plainenglish.io/3-ways-javascript-hoisting-affects-your-code-a6a93626c600?source=collection_archive---------4-----------------------#2021-11-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c590" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">你可以在声明变量之前使用它们？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1b9087013edf979f9a0a0b4cb58d5713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wnDo3qofsjZGnbMB"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://www.instagram.com/the.brogrammer/?hl=en" rel="noopener ugc nofollow" target="_blank">Photo by Joshua Aragon</a></figcaption></figure><p id="5f70" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在运行程序后的最初几分钟，JavaScript做了一些非常有趣的事情。它使这个…</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="42b4" class="lu lv in lq b gy lw lx l ly lz">numApples = 3;<br/>console.log(numApples);</span><span id="a898" class="lu lv in lq b gy ma lx l ly lz">var numApples;</span></pre><p id="fb61" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">…一段完全有效的代码，相当于…</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="efa1" class="lu lv in lq b gy lw lx l ly lz">var numApples;<br/>numApples = 3;<br/>console.log(numApples);</span></pre><p id="fdd8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这两段代码将输出完全相同的结果:“3”。在这方面，是的，你绝对可以利用尚未正式声明的变量。我推荐吗？大概不会。如果你养成了这种习惯，你的代码可能会变得越来越复杂，越来越难调试。另外，如果你正在与一个团队合作，使用未声明的变量可能会使他们困惑。</p><p id="660a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在计算中使用变量之前，最好先声明并初始化变量；尽管如此，理解JavaScript的幕后提升操作仍然是必不可少的。理解这个操作可能会为您以后省去几个小时的困惑。</p><h1 id="8c21" class="mb lv in bd mc md me mf mg mh mi mj mk jt ml ju mm jw mn jx mo jz mp ka mq mr bi translated">什么是吊装？</h1><p id="a90a" class="pw-post-body-paragraph kt ku in kv b kw ms jo ky kz mt jr lb lc mu le lf lg mv li lj lk mw lm ln lo ig bi translated">提升是JavaScript将变量和函数声明拉到当前作用域顶部的过程。在执行任何代码之前，都会发生提升，JavaScript会在堆内存中为这些函数和变量分配空间。</p><p id="6ea4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意:我们只是在谈论声明。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="2035" class="lu lv in lq b gy lw lx l ly lz">//DECLARATIONS<br/>var a;<br/>let a;<br/>const a;<br/>function add(x,y){<br/>...<br/>}</span></pre><p id="5d51" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript不会将初始化的变量提升到当前范围的顶部。下面是初始化的例子。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b18d" class="lu lv in lq b gy lw lx l ly lz">var a = 6;<br/>let b = 4;<br/>const c = 2;</span></pre><p id="8f9e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，提升在var、let和const变量类型之间也有不同的工作方式。</p><h2 id="b194" class="lu lv in bd mc mx my dn mg mz na dp mk lc nb nc mm lg nd ne mo lk nf ng mq nh bi translated">无功提升</h2><p id="9380" class="pw-post-body-paragraph kt ku in kv b kw ms jo ky kz mt jr lb lc mu le lf lg mv li lj lk mw lm ln lo ig bi translated">在第一个提升的例子中，展示了在声明变量之前，变量可以用于有意义的计算。让我们深入探讨一下。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="5ec9" class="lu lv in lq b gy lw lx l ly lz">console.log(name);<br/>var name;</span></pre><p id="f9a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面的代码会给你一个错误信息。它会告诉你‘名字’是<a class="ae ks" href="https://medium.com/@kyledeguzmanx/3-differences-between-null-and-undefined-fb93fedd4fe7" rel="noopener">未定义的</a>。这意味着“name”是您可以使用的完全有效的变量；但是，变量“name”从未被赋值。没有可供控制台显示的值。</p><p id="9f30" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了澄清，上面的代码完全等同于:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="2d36" class="lu lv in lq b gy lw lx l ly lz">var name;<br/>console.log(name);</span></pre><p id="657d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么，为什么变量的值是“未定义”呢？显然，这是因为程序员从来没有写过给变量赋值的指令或代码。然而，故事远不止于此。</p><p id="adb7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在提升过程中，JavaScript会将该变量带到当前作用域的顶部，并在堆内存中分配空间。当JavaScript存储变量时——特别是关键字var——JavaScript也会用未定义的值初始化这些变量。</p><p id="8254" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这与“let”和“const”类型的变量完全不同。</p><h2 id="0277" class="lu lv in bd mc mx my dn mg mz na dp mk lc nb nc mm lg nd ne mo lk nf ng mq nh bi translated">让吊装</h2><p id="e139" class="pw-post-body-paragraph kt ku in kv b kw ms jo ky kz mt jr lb lc mu le lf lg mv li lj lk mw lm ln lo ig bi translated">让我们采用上一节中的相同代码，但是将关键字替换为“Let”。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="c208" class="lu lv in lq b gy lw lx l ly lz">console.log(name);<br/>let name;</span></pre><p id="6a99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">提升还会将变量“name”带到当前作用域的顶部，并在堆内存中为它分配空间。区别在于提升不会用值' undefined '初始化变量。它只会让变量真正为空。</p><p id="aa5e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当这段代码运行时，您将得到一个引用错误，而不是被告知变量未定义。这个引用错误会告诉你你试图使用一个没有初始化的变量。</p><p id="ff9f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于const类型的提升变量，情况也是如此。</p><h2 id="8716" class="lu lv in bd mc mx my dn mg mz na dp mk lc nb nc mm lg nd ne mo lk nf ng mq nh bi translated">未声明的变量提升</h2><p id="b73c" class="pw-post-body-paragraph kt ku in kv b kw ms jo ky kz mt jr lb lc mu le lf lg mv li lj lk mw lm ln lo ig bi translated">最后，讨论未声明的变量。这些变量在初始化时没有“let”、“const”或“var”。这些也是在没有正式声明的情况下使用的变量。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="39d2" class="lu lv in lq b gy lw lx l ly lz">numDogs = 4;<br/>console.log("Tyler has " + numDogs + " dogs");</span></pre><p id="af0f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码中，numDogs是在没有关键字的情况下初始化的。这是一段完全有效的代码。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="367b" class="lu lv in lq b gy lw lx l ly lz">const numSiblings = numBrothers + numSisters;<br/>numBrothers = 1;<br/>numSisters = 1;</span></pre><p id="6711" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码中，numBrothers和NumSisters都是在没有关键字的情况下初始化的变量。尽管这些变量是在没有关键字的情况下声明的，但它们仍然是可以在计算中使用的有效变量。</p><p id="80b2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这些未声明的变量也会被提升，但是这些变量是特殊的。JavaScript将把每个未声明的变量——也就是没有变量类型的变量:let、var和const——提升到全局范围的顶部！</p><blockquote class="ni"><p id="35cb" class="nj nk in bd nl nm nn no np nq nr lo dk translated">未声明的变量总是全局变量。</p></blockquote><p id="7ae8" class="pw-post-body-paragraph kt ku in kv b kw ns jo ky kz nt jr lb lc nu le lf lg nv li lj lk nw lm ln lo ig bi translated">这些变量出现在哪里并不重要。它们将永远是全局变量。</p><p id="e3de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">记住！如果我们不是在讨论未声明的变量，初始化永远不会被提升。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f500" class="lu lv in lq b gy lw lx l ly lz">var numPuppies = 6;<br/>const numStudents  = 400;<br/>let numTeachers = 40;</span></pre><p id="23df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这些var、const和numTeachers变量都不会被提升，因为提升只发生在变量声明上。没有关键字的未声明变量是唯一的例外。</p><p id="c023" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nx">更多内容看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nx">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
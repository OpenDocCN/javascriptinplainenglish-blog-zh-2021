<html>
<head>
<title>Working with Maps in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中使用地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/googleworking-with-maps-in-react-native-ee06760c988f?source=collection_archive---------3-----------------------#2021-04-02">https://javascript.plainenglish.io/googleworking-with-maps-in-react-native-ee06760c988f?source=collection_archive---------3-----------------------#2021-04-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8b41" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用React Native中的标记开发实时地图</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/970bbf179a1b06977b0a84c30636bd98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMI9biioml0Upj3hJpgERg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="http://i-hate-reading-logs.vercel.app/" rel="noopener ugc nofollow" target="_blank">Click to read more here</a></figcaption></figure><p id="1d48" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天我们将在react native中使用地图。我已经写了一些关于Expo React Native入门和在Expo React Native中添加闪屏的文章。我将使用相同的储存库设置来添加地图和实时标记</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="0672" class="lu lv in lq b gy lw lx l ly lz">Here is the link to articles =&gt; <a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/getting-started-with-expo-react-native-615d32c72b5?source=your_stories_page-------------------------------------">https://javascript.plainenglish.io/getting-started-with-expo-react-native-615d32c72b5?source=your_stories_page-------------------------------------</a></span></pre></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><h1 id="59b4" class="mh lv in bd mi mj mk ml mm mn mo mp mq jt mr ju ms jw mt jx mu jz mv ka mw mx bi translated">入门指南</h1><p id="e692" class="pw-post-body-paragraph kt ku in kv b kw my jo ky kz mz jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">React Native提供了一个库来将地图添加到应用程序中。这提供了大量的功能来复制在普通Javascript或React中添加地图的过程。使用下面的命令添加这个库。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="e7f4" class="lu lv in lq b gy lw lx l ly lz">yarn add react-native-maps</span></pre><p id="57c5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe nd ne nf lq b">react-native-maps</code>导出以<strong class="kv io">区域</strong>为道具的默认组件<strong class="kv io"> MapView </strong>。区域值将接受一个位置JSON对象，如下所示。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="0991" class="lu lv in lq b gy lw lx l ly lz">const region = {<br/>  latitude: string,<br/>  longitude: string,<br/>  latitudeDelta: string,<br/>  longitudeDelta: string<br/>}</span></pre><p id="9c3b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后JSON对象需要作为道具传递给由<code class="fe nd ne nf lq b">react-native-maps</code>提供的<strong class="kv io"> MapView </strong>组件。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f6c0" class="lu lv in lq b gy lw lx l ly lz">&lt;MapView region={region} /&gt;</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/f7b370c7cb125f4fc467942499965eb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rqtpfSMC3A5qpkjc-X11Yg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The map on React Native app</figcaption></figure></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><h1 id="ee16" class="mh lv in bd mi mj mk ml mm mn mo mp mq jt mr ju ms jw mt jx mu jz mv ka mw mx bi translated"><strong class="ak">添加标记</strong></h1><p id="6ced" class="pw-post-body-paragraph kt ku in kv b kw my jo ky kz mz jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated"><code class="fe nd ne nf lq b">react-native-maps</code>提供一个标记组件，它将是MapView的子组件。标记组件接受基本属性，如坐标、标题和描述。其中坐标是以纬度和经度作为键值的对象。我们最初手动设置这个坐标对象，稍后，我们将使用用户当前位置或动态地设置它们。此外，我们可以使用自定义标记作为图像或使用简单的矢量图标来更改默认标记。我将使用<code class="fe nd ne nf lq b">@expo/vector-icons</code>库添加一个自定义标记到我的标记。另外，确保坐标对象有一个数字类型的纬度和经度键。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f0ab" class="lu lv in lq b gy lw lx l ly lz">const region ={ latitude: Number, longitude: Number }<br/>return (<br/>   &lt;MapView&gt;<br/>     &lt;Marker coordinate={region} /&gt;<br/>   &lt;/MapView&gt;<br/>)</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/769739cd0ab4ee8b38953c83cd8bfbf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QjGHWgcIse7HEv48RFHphw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Our Map with manually added marker</figcaption></figure></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="3bfc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们使用自定义矢量图标作为标记来更改标记的外观。</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="639f" class="lu lv in lq b gy lw lx l ly lz">&lt;FontAwesome <em class="nh">name</em>=”map-marker” <em class="nh">size</em>={40} <em class="nh">color</em>=”#B12A5B” /&gt;</span></pre><p id="3461" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用<code class="fe nd ne nf lq b">@expo/vector-icons</code>提供的上述矢量图标组件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ng"><img src="../Images/449a514f9406d6285a576fa8283fa1f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*saxtD_Nh4A8oneY8vVpV9g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Our custom marker with the title as My location.</figcaption></figure></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><h1 id="7516" class="mh lv in bd mi mj mk ml mm mn mo mp mq jt mr ju ms jw mt jx mu jz mv ka mw mx bi translated">动态添加标记</h1><p id="f702" class="pw-post-body-paragraph kt ku in kv b kw my jo ky kz mz jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">要动态添加标记，我们需要首先获取用户位置，如纬度和经度，然后将它们传递给标记组件的坐标属性。Expo提供了一个名为<code class="fe nd ne nf lq b">expo-location</code>的包，帮助开发者获取用户位置。这个包使用<strong class="kv io">地理位置</strong> -浏览器API来获取浏览器中的用户位置。您还可以使用<code class="fe nd ne nf lq b">react-native-geolocation</code> npm包来获取用户位置。要从设备中获取用户位置，你需要像大多数应用程序那样首先请求用户的许可。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Fetching user location using Location methods from expo-location</figcaption></figure><p id="81d8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们首先请求用户允许获取他/她的位置。一旦用户授予我们的应用程序权限，我们就可以将这些坐标设置为我们的location对象，并将它们传递给我们的Marker的坐标属性。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni nj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">MapComponent.jsx</figcaption></figure><h1 id="3b94" class="mh lv in bd mi mj nk ml mm mn nl mp mq jt nm ju ms jw nn jx mu jz no ka mw mx bi translated">结论</h1><p id="7f03" class="pw-post-body-paragraph kt ku in kv b kw my jo ky kz mz jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">现在，在React原生地图上添加地图并不那么困难，我仍然记得3年前我使用普通JavaScript和谷歌地图时，我必须从谷歌开发者控制台文档中集成谷歌地图，这对于初涉开发的开发者来说并不容易。但是事情在不断改善和变化。do还附带了其他功能，比如在地图上添加圆形、折线等形状。请务必查看其文档。</p><p id="b05e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">直到下一次。祝大家愉快。</p><p id="d0b2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nh">更多内容尽在</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nh">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
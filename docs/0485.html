<html>
<head>
<title>How to Verify Hashed Passwords in Node.js and MySQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Node.js和MySQL中验证哈希密码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-verify-hashed-passwords-in-nodejs-and-mysql-26fedcfee01f?source=collection_archive---------5-----------------------#2021-01-29">https://javascript.plainenglish.io/how-to-verify-hashed-passwords-in-nodejs-and-mysql-26fedcfee01f?source=collection_archive---------5-----------------------#2021-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9501" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在MySQL数据库中存储单向散列密码，并使用Node.js进行验证</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f7e71aa03a425c63c1305fb3d6060313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BDBSU_LWJeXogt1ZfWgCXg.png"/></div></div></figure><h2 id="7eb2" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">如何在数据库中存储密码</strong></h2><p id="ec19" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">首先，我们将了解如何在数据库中存储密码？。然后，我们将了解如何验证单向散列密码。不要在密码字段中存储纯文本。这是一个危险的问题。这造成了许多问题。开发人员、数据库管理员等。能够访问数据库的人能够看到用户密码，如果他们愿意，他们可以做一些非法活动。这是第一个问题。所以不要以纯文本的形式存储密码。</p><p id="c9bf" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">接下来，假设如果您的数据库遭到破坏/黑客攻击，那么黑客能够看到用户密码，如果您没有以加密格式存储密码，他们将滥用用户信息。如果密码是加密格式的，那么就没有必要担心这个问题。为什么？因为解密单向散列密码是一个非常繁忙的过程。</p><p id="af44" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">我们能解密单向散列密码吗？。</p><p id="ff58" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">是的，我们可以</strong>。</p><p id="25c7" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">然而，要解密一个密码，你需要更多的时间。这是一场关于安全的大辩论。没必要在这里争论。我们继续话题。我们可以在更短的时间内保护数据库，并要求我们的用户更改密码。所以，如果你使用加密密码，这个大问题就解决了。</p><blockquote class="ml"><p id="77f5" class="mm mn iq bd mo mp mq mr ms mt mu mf dk translated">因此，加密密码并将其存储在数据库中。不要在密码字段中存储纯文本。</p></blockquote><p id="0a89" class="pw-post-body-paragraph ln lo iq lp b lq mv jr ls lt mw ju lv la mx lx ly le my ma mb li mz md me mf ij bi translated"><strong class="lp ir"> bcrypt </strong>算法主要用于密码的单向散列(加密)。在本教程中，我们将看到如何生成单向散列密码，并使用<strong class="lp ir"> NodeJS </strong>验证它们。</p><p id="f7b2" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">如果您不知道如何使用NodeJS创建一个<strong class="lp ir"> REST API </strong>，那么请访问下面的链接。</p><div class="na nb gp gr nc nd"><a href="https://medium.com/javascript-in-plain-english/create-rest-api-using-nodejs-and-mysql-from-scratch-d1844601e21" rel="noopener follow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">从头开始使用NodeJS和MySQL创建REST API</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">从头开始使用MySQL的CRUD示例</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">medium.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kp nd"/></div></div></a></div><h2 id="8704" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">安装Bcrypt </strong></h2><p id="cfe6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">在nodejs项目中使用下面的命令安装bcrypt库。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="4a67" class="kr ks iq nt b gy nx ny l nz oa">npm i bcryptjs</span></pre><h2 id="3fb2" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated"><strong class="ak">生成单向散列密码</strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="2a41" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">第1行:</strong>导入<strong class="lp ir"> bcryptjs </strong>包。</p><p id="396a" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">第3行:</strong>使用<strong class="lp ir"> hashSync() </strong>创建一个单向散列密码。这里10是盐的大小。你可以使用任何尺寸。假人就是这里的密码。</p><blockquote class="ml"><p id="5278" class="mm mn iq bd mo mp mq mr ms mt mu mf dk translated">请注意，每次它都会为相同的密码生成一个新的哈希。</p></blockquote><h2 id="859e" class="kr ks iq bd kt ku od dn kw kx oe dp kz la of lc ld le og lg lh li oh lk ll lm bi translated"><strong class="ak">验证单向散列密码</strong></h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="d27a" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">第1行:</strong>使用<strong class="lp ir"> compareSync() </strong>函数验证生成的单向散列。这里，第一个参数是您的密码，第二个参数是已经保存的单向散列。</p><blockquote class="ml"><p id="3659" class="mm mn iq bd mo mp mq mr ms mt mu mf dk translated"><em class="oi">请注意，请始终使用compareSync()函数来验证密码。</em> <strong class="ak"> <em class="oi">不为密码生成哈希并与相等的运算符(==) </em> </strong> <em class="oi">)进行比较。为什么？因为bcrypt每次都会为相同的密码生成不同的散列。因此，如果使用等号(==)运算符，旧哈希和新哈希不匹配。</em></p></blockquote><h2 id="23a2" class="kr ks iq bd kt ku od dn kw kx oe dp kz la of lc ld le og lg lh li oh lk ll lm bi translated"><strong class="ak">使用NodeJS API验证单向散列密码</strong></h2><p id="f9c2" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">在这里，我给出了使用NodeJS api并从MySQL数据库获取密码的bcrypt验证的完整实现。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="75bb" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">这是一个GET方法。所以你可以在本地使用下面的链接查看。</p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="3d79" class="kr ks iq nt b gy nx ny l nz oa"><a class="ae oj" href="http://localhost:3000/veify_password?password=dummy&amp;username=raja" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/veify_password?password=dummy&amp;username=raja</a></span></pre><p id="1c7b" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">完整源代码:</strong></p><pre class="kg kh ki kj gt ns nt nu nv aw nw bi"><span id="2f30" class="kr ks iq nt b gy nx ny l nz oa"><a class="ae oj" href="https://github.com/bharathirajatut/angular-examples/tree/master/nodejs-hashing-passwords" rel="noopener ugc nofollow" target="_blank">https://github.com/bharathirajatut/angular-examples/tree/master/nodejs-hashing-passwords</a></span></pre><p id="0e56" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir">总结:</strong></p><p id="b5b1" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">在本教程中，您学习了</p><ol class=""><li id="d195" class="ok ol iq lp b lq mg lt mh la om le on li oo mf op oq or os bi translated">为什么我们需要以加密格式存储密码？</li><li id="0f96" class="ok ol iq lp b lq ot lt ou la ov le ow li ox mf op oq or os bi translated">什么算法最适合加密密码？。</li><li id="ab4c" class="ok ol iq lp b lq ot lt ou la ov le ow li ox mf op oq or os bi translated">如何使用bcrypt生成单向散列密码？。</li><li id="5d64" class="ok ol iq lp b lq ot lt ou la ov le ow li ox mf op oq or os bi translated">如何使用bcrypt验证单向散列密码？。</li><li id="3ff3" class="ok ol iq lp b lq ot lt ou la ov le ow li ox mf op oq or os bi translated">用MySQL创建了一个NodeJS API。</li></ol><p id="81b8" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">仅此而已。希望你喜欢这个教程。</p><p id="7887" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">敬请关注更多文章。</p><p id="7608" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated">感谢您的阅读。</p><p id="9cb4" class="pw-post-body-paragraph ln lo iq lp b lq mg jr ls lt mh ju lv la mi lx ly le mj ma mb li mk md me mf ij bi translated"><strong class="lp ir"> Bcryptjs包链接:</strong></p><div class="na nb gp gr nc nd"><a href="https://www.npmjs.com/package/bcryptjs" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">bcryptjs</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">JavaScript中优化的bcrypt，零依赖性。与node.js上的C++ bcrypt绑定兼容，也可以工作…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.npmjs.com</p></div></div><div class="nm l"><div class="oy l no np nq nm nr kp nd"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>How to Draw Stars with JavaScript and HTML5 Canvas</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript和HTML5画布画星星</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-draw-stars-with-javascript-and-html5-canvas-33ece95c19bf?source=collection_archive---------1-----------------------#2021-08-07">https://javascript.plainenglish.io/how-to-draw-stars-with-javascript-and-html5-canvas-33ece95c19bf?source=collection_archive---------1-----------------------#2021-08-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2716a9277008e66ee594c843a74fbf3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fxunwq0pX9Oq9YjFO56m9g.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@timmossholder?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Tim Mossholder</a> on <a class="ae kc" href="https://unsplash.com/s/photos/star-shape?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d310" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">HTML Canvas API是创建各种形状、复杂图形、动画和基于网络的游戏的绝佳工具。也就是说，当我从Flash和ActionScript转向HTML5和JavaScript时，我发现Canvas API非常低级，因为它需要许多行代码来简单地绘制一个基本形状。为了使这个过程更有效率，我一直在创建自定义库来处理渲染细节，让我可以专注于工作的创造性方面。</p><p id="e992" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本教程中，我们将编写一个JavaScript微库，其中包含一个渲染自定义星形的方法。通过多次调用此方法，您可以使用它来创建带有许多星星的图像。在这个过程中，我们将学习结合JavaScript技术，如<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Glossary/IIFE" rel="noopener ugc nofollow" target="_blank">立即调用函数表达式</a>、<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Working_with_Objects#creating_new_objects" rel="noopener ugc nofollow" target="_blank">对象初始化器</a>、<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions" rel="noopener ugc nofollow" target="_blank">箭头函数表达式</a>、l <a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">逻辑或(</a> <code class="fe lb lc ld le b"><a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">||</a></code> <a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR" rel="noopener ugc nofollow" target="_blank">)运算符</a>、<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math" rel="noopener ugc nofollow" target="_blank">数学对象</a>，当然还有<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API" rel="noopener ugc nofollow" target="_blank">画布API方法</a>。因为写星形逻辑涉及到<a class="ae kc" href="https://www.mathsisfun.com/algebra/trig-finding-side-right-triangle.html" rel="noopener ugc nofollow" target="_blank">三角学</a>，所以会有一个数学插曲，尽管你可以想学多少就学多少。</p><p id="c97f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然本教程与我之前的关于如何用画布绘制圆形和多边形的教程有关，但是这里的库并不依赖于它。也就是说，最后的演示结合了星形方法和其他教程中的圆形和多边形方法。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="347e" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">图书馆演示</h1><p id="e36b" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们可以在下面看到运行中的star库。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="8b2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每颗星星都是通过一种叫做<code class="fe lb lc ld le b">drawStar</code>的方法绘制的，这种方法允许我们确定以下属性:</p><ul class=""><li id="1b2e" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated">恒星中心点的位置，由<code class="fe lb lc ld le b">cy</code>和<code class="fe lb lc ld le b">cy</code>值指定</li><li id="2504" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">描边和填充颜色</li><li id="8fa8" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">外部点数</li><li id="5934" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">线条宽度</li><li id="30bc" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">外半径，即中心和任何外点之间的距离</li><li id="90f3" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">内半径，即中心与任何内角之间的距离</li><li id="53e1" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">旋转角</li></ul><p id="e093" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">考虑上面演示的截图。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/e2f4423c1546d5f098791f1752bcb297.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*wGXNuofnm9YeDvF1eFlyYg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">These three stars are drawn with this library.</figcaption></figure><p id="4dff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您在上面看到的紫色星星是通过使用下面的语法调用<code class="fe lb lc ld le b">drawStar</code>方法呈现的。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="nk mu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Method call for drawing a purple star.</figcaption></figure><p id="2e20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">正如你所看到的，你可以简单地添加属性，<code class="fe lb lc ld le b">drawJS</code>将处理渲染细节。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="a7a9" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">奠定基础</h1><p id="5ef4" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">让我们准备一个HTML页面，添加一点CSS，然后开始编写JavaScript。</p><h2 id="f0eb" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">HTML和CSS</h2><p id="1f7d" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">就你的HTML而言，你所需要的只是一个如下所示的<code class="fe lb lc ld le b">&lt;canvas&gt;</code>元素。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="3b51" class="nl ln iq le b gy ob oc l od oe">&lt;canvas id="myCanvas" width="200" height="200"&gt;&lt;/canvas&gt;</span></pre><p id="c98a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">CSS也很少。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="1194" class="nl ln iq le b gy ob oc l od oe">body {<br/>  text-align: center;<br/>}<br/>canvas {<br/>  border: 1px solid #000;<br/>}</span></pre><h2 id="3aeb" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">初始JavaScript</h2><p id="7f31" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">让我们从将<code class="fe lb lc ld le b">drawJS</code>初始化为一个空对象开始。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="e7f8" class="nl ln iq le b gy ob oc l od oe">let drawJS = {};</span></pre><p id="0cc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了设置我们的作用域，让我们创建一个函数包装器，将<code class="fe lb lc ld le b">drawJS</code>传递给它。在包装器中，<code class="fe lb lc ld le b">drawJS</code>被称为<code class="fe lb lc ld le b">pen</code>。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi of"><img src="../Images/df6ba03209c6364ff7d62d72b4498f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/1*uBrF7Gc4nodVeRV1QmEMBA.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Our function wrapper.</figcaption></figure><p id="6bb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这个包装器中，让我们创建附加到<code class="fe lb lc ld le b">pen</code>对象的<code class="fe lb lc ld le b">drawStar</code>方法。注意，<code class="fe lb lc ld le b">drawStar</code>有一个参数:一个名为<code class="fe lb lc ld le b">o</code>的对象。正如您在<code class="fe lb lc ld le b">o = {}</code>表达式中所看到的，如果没有传入任何内容，那么默认情况下它将是一个空对象。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="88b5" class="nl ln iq le b gy ob oc l od oe">(function(pen) {</span><span id="e237" class="nl ln iq le b gy og oc l od oe">   pen.drawStar = function(<strong class="le ir">o = {}</strong>) {</span><span id="6f1a" class="nl ln iq le b gy og oc l od oe">   }</span><span id="78bf" class="nl ln iq le b gy og oc l od oe">})(drawJS);<br/></span></pre><h2 id="9d57" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">获取画布上下文</h2><p id="0e5a" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">下一步是编写找到<code class="fe lb lc ld le b">&lt;canvas&gt;</code>元素并获取其绘图上下文的逻辑，这实质上是一组呈现方法。</p><p id="49a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们检查传入的对象是否有一个<code class="fe lb lc ld le b">id</code>。如果是，我们将它作为我们的选择器，如果不是，我们将获取页面上的第一个画布。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="c158" class="nl ln iq le b gy ob oc l od oe">let selector = (o.id) ? '#'+o.id : 'canvas';</span></pre><p id="29da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们获取对<code class="fe lb lc ld le b">&lt;canvas&gt;</code>元素的引用，只要该元素存在，我们就获取上下文。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="d971" class="nl ln iq le b gy ob oc l od oe">let canvas = document.querySelector(selector);</span><span id="41d2" class="nl ln iq le b gy og oc l od oe">if (canvas) {<br/>     let context = canvas.getContext("2d");<br/>}</span></pre><p id="1fe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们图书馆目前的样子。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="nk mu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The beginnings of the drawStar method.</figcaption></figure><h2 id="0f9d" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">拉入属性</h2><p id="7580" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在让我们使用OR ( <code class="fe lb lc ld le b">||</code>)选择器来获取传入对象的属性，以提供默认值。例如，如果<code class="fe lb lc ld le b">o</code>没有<code class="fe lb lc ld le b">numPoints</code>属性，我们的值默认为<code class="fe lb lc ld le b">5</code>。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/961fed54bc5dceee645ca843e0afe3bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*NfNn1UVvWBCtJDXA_As9jw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Pulling in properties</figcaption></figure><p id="1711" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意最后两行将<code class="fe lb lc ld le b">lineWidth</code>和<code class="fe lb lc ld le b">strokeStyle</code>直接应用于<code class="fe lb lc ld le b">context</code>，而不是存储在变量中。</p><p id="1581" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我们所有代码现在的样子。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="nk mu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Obtaining the context and pulling in properties.</figcaption></figure><p id="9fff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">好了，基础已经打好了。现在该写绘图逻辑了。</p><h1 id="fcc4" class="lm ln iq bd lo lp oi lr ls lt oj lv lw lx ok lz ma mb ol md me mf om mh mi mj bi translated">让我们画画吧</h1><p id="1732" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在得到我们的属性后，我们调用<code class="fe lb lc ld le b">context</code>上的<code class="fe lb lc ld le b">beginPath</code>，这对于清除以前绘制的星星留下的旧属性是必要的。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="5027" class="nl ln iq le b gy ob oc l od oe">context.beginPath();</span></pre><p id="434d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们创建多个星星时，需要<code class="fe lb lc ld le b">beginPath()</code>来改变一个星星到下一个星星的颜色。</p><h2 id="29ac" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">moveTo和lineTo方法</h2><p id="ca6a" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">还有另外两个<code class="fe lb lc ld le b">context</code>方法需要注意。</p><ul class=""><li id="f268" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe lb lc ld le b">moveTo()</code>方法，它从页面上拿起笔，并将其移动到某个地方。</li><li id="332f" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">lineTo()</code>方法，按住笔，画一条线。</li></ul><p id="6194" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以用点语法调用这些方法中的任何一个—</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="b12a" class="nl ln iq le b gy ob oc l od oe">context.lineTo();</span></pre><p id="b32d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">—或者您可以将方法的名称存储在字符串中，并使用括号语法来调用它。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="22a3" class="nl ln iq le b gy ob oc l od oe">let action = 'lineTo';</span><span id="1f7e" class="nl ln iq le b gy og oc l od oe">context[action]();</span></pre><h2 id="8130" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">“绘制”助手方法</h2><p id="7acd" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">我们将在下面的一个叫做<code class="fe lb lc ld le b">draw</code>的助手方法中使用括号语法。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi on"><img src="../Images/2db209c09c5a0bdfac810a6f1053238d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*9dQJJb_jbRmk0FgRZc5qcg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The “draw” helper method.</figcaption></figure><p id="6d08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这个方法有三个参数:</p><ul class=""><li id="c828" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe lb lc ld le b">radius</code>或者笔离中心有多远</li><li id="a497" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">angle</code>相对于恒星的三点钟位置</li><li id="b0d9" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated">一个<code class="fe lb lc ld le b">action</code>，它或者是<code class="fe lb lc ld le b">moveTo</code>或者是<code class="fe lb lc ld le b">lineTo</code></li></ul><p id="ae2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意<code class="fe lb lc ld le b">radius</code>和<code class="fe lb lc ld le b">angle</code>是数字，而<code class="fe lb lc ld le b">action</code>是字符串。在调用这个<code class="fe lb lc ld le b">draw</code>函数之前，我们先分析一下它是如何工作的。</p><h2 id="25ce" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">用数学绘制星点</h2><p id="1fcf" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">让我们快速看一下<code class="fe lb lc ld le b">draw</code>函数使用的底层数学。在下面的例子中，我们有一个半径为1的三点星形，中心有一个<strong class="kf ir">角t </strong>，我们的程序用它来到达第一个点。由于我们从水平开始，逆时针画，我们的笔从右上角开始，用坐标<strong class="kf ir"> (x，y)标注。</strong></p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oo"><img src="../Images/c8baaffdb7d62d464c3ed4a569b69e87.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*2HZkpfaiRSL2EUucV4s3kg.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Here, the sin and cosine of angle t are used to determine the coordinates of a star’s point.</figcaption></figure><p id="d92d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面的三角形显示了两个触发函数，sin和余弦，与我们的点的(x，y)坐标和角度t的关系。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi op"><img src="../Images/d4ea52815fd58e32487614a19c44e1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:458/format:webp/1*ASNZ2YzaUQyO_HhyymkWKQ.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">A close-up of the outer angle and the triangle.</figcaption></figure><p id="ea7c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可能已经猜到了，<strong class="kf ir"> cos t </strong>用于查找x坐标，而<strong class="kf ir"> sin t </strong>用于查找y坐标。下面是这些方程的快速复习。观察三角形时，考虑角t的对边与y坐标的关系，以及角t的邻边与x坐标的关系。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b68b3873afaddfda2511d2742ade6664.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*V4nPYVrKoEyUEIyOH_cvhw.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The sin and cosine equations.</figcaption></figure><h2 id="50c3" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">从数学到代码</h2><p id="262c" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">在<code class="fe lb lc ld le b">draw</code>函数的第一行代码中，<code class="fe lb lc ld le b">angle</code>的<code class="fe lb lc ld le b">cos</code>用于查找<code class="fe lb lc ld le b">x</code>坐标。因为<code class="fe lb lc ld le b">radius</code>不总是1，我们用<code class="fe lb lc ld le b">Math.cos(angle)</code>乘以<code class="fe lb lc ld le b">radius</code>来得到x坐标。添加<code class="fe lb lc ld le b">cx</code>将使<code class="fe lb lc ld le b">x</code>的坐标相对于恒星的中心。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="62f8" class="nl ln iq le b gy ob oc l od oe">let x = cx + Math.cos(angle) * radius;</span></pre><p id="e7d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">angle</code>的<code class="fe lb lc ld le b">sin</code>用于以同样的方式寻找<code class="fe lb lc ld le b">y</code>坐标，这次<code class="fe lb lc ld le b">cy</code>代表中心点的<code class="fe lb lc ld le b">y</code>值。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="5e26" class="nl ln iq le b gy ob oc l od oe">let y = cy + Math.sin(angle) * radius;</span></pre><p id="6648" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">draw</code>中的第三行也是最后一行使用<code class="fe lb lc ld le b">action</code>到达该点，或者是笔向上(如<code class="fe lb lc ld le b">moveTo</code>)或者是笔向下(如<code class="fe lb lc ld le b">lineTo</code>)。这就是我们的括号语法出现的地方。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="73e6" class="nl ln iq le b gy ob oc l od oe">context[action](x,y);</span></pre><h2 id="29de" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">转到起点</h2><p id="389f" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在让我们使用新的<code class="fe lb lc ld le b">draw</code>函数将我们的笔移动到起点，也就是星形的第一个外角。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="9c31" class="nl ln iq le b gy ob oc l od oe">draw(outerRadius, rotate, 'moveTo');</span></pre><ul class=""><li id="8be8" class="mv mw iq kf b kg kh kk kl ko mx ks my kw mz la na nb nc nd bi translated"><code class="fe lb lc ld le b">outerRadius</code>表示从中心到最外点的距离。</li><li id="2f0b" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">rotate</code>值是起始角度，默认为零——恒星的3点钟位置。</li><li id="3920" class="mv mw iq kf b kg ne kk nf ko ng ks nh kw ni la na nb nc nd bi translated"><code class="fe lb lc ld le b">action</code>是<code class="fe lb lc ld le b">moveTo</code>，因为我们还没有放下笔。</li></ul><h2 id="f78f" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">求两点之间的角度</h2><p id="409c" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在让我们找出星点之间的角度。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="d5eb" class="nl ln iq le b gy ob oc l od oe">let angle = 2 * Math.PI / numPoints;</span></pre><p id="e278" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里我用<code class="fe lb lc ld le b">2 * Math.PI</code>来表示2π弧度或者360度。然后我用它除以<code class="fe lb lc ld le b">numPoints</code>，或者说是星星的点数，得到角度。</p><h2 id="ec5d" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">循环通过这些点</h2><p id="ae98" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在，我们到目前为止所做的准备工作将在这个循环中使用，这将画出我们的星星。</p><figure class="mp mq mr ms gt jr gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b511c5bf2fb51d3c603a7c35696dcd26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*m9Nw8DvLtH0TpjjrIhCaGA.png"/></div></figure><p id="1b73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因为我们不需要在画画的时候拿起笔，<code class="fe lb lc ld le b">lineTo</code>既适用于外点，也适用于内点:</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="f4dc" class="nl ln iq le b gy ob oc l od oe">draw(outerRadius,outerAngle,<strong class="le ir">'lineTo'</strong>);</span><span id="4bb4" class="nl ln iq le b gy og oc l od oe">draw(innerRadius,innerAngle,<strong class="le ir">'lineTo'</strong>);</span></pre><h2 id="0ceb" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">添加描边和填充</h2><p id="7e2c" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">现在已经画出了星星的路径——但是为了让用户看到它，我们需要添加描边和填充。虽然这里总是调用<code class="fe lb lc ld le b">stroke()</code>方法，但是您可以很容易地在这里添加<code class="fe lb lc ld le b">if</code>逻辑，使其成为可选的。</p><pre class="mp mq mr ms gt nx le ny nz aw oa bi"><span id="98c8" class="nl ln iq le b gy ob oc l od oe">// add the outline<br/>context.stroke();</span><span id="9bb7" class="nl ln iq le b gy og oc l od oe">// add the fill<br/>if (o.fill) {<br/>     context.fillStyle = o.fill;<br/>     context.fill();<br/>}</span></pre><p id="b233" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们完了！此时，<code class="fe lb lc ld le b">stroke</code>和<code class="fe lb lc ld le b">fill</code>方法应该渲染出我们用<code class="fe lb lc ld le b">moveTo</code>和<code class="fe lb lc ld le b">lineTo</code>画出的星星。下面是整个方法。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="nk mu l"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The entire drawStar method.</figcaption></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="5a94" class="lm ln iq bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">星形、圆形和多边形</h1><p id="ea8b" class="pw-post-body-paragraph kd ke iq kf b kg mk ki kj kk ml km kn ko mm kq kr ks mn ku kv kw mo ky kz la ij bi translated">如果我们将我们的星形方法与<a class="ae kc" href="https://betterprogramming.pub/create-your-own-html5-canvas-toolkit-with-vanilla-javascript-1d2ad1047219?sk=d381699afd03f1a953acbebd17503b86" rel="noopener ugc nofollow" target="_blank">圆形和多边形教程</a>中的两种方法结合起来，我们可以用一个库画出所有三个形状，如下图所示。</p><figure class="mp mq mr ms gt jr"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="aae0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文的重点是整个<code class="fe lb lc ld le b">drawStar</code>函数，所以我们只是触及了数学的表面。如果你感兴趣的话，可以看看用JavaScript渲染的星星背后的数学知识。</p><div class="os ot gp gr ou ov"><a rel="noopener  ugc nofollow" target="_blank" href="/the-math-behind-stars-rendered-with-javascript-94d4dee2754a"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd ir gy z fp pa fr fs pb fu fw ip bi translated">用JavaScript渲染星星背后的数学</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">三角学如何引导数字笔？</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj jw ov"/></div></div></a></div><p id="7151" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我希望你喜欢这篇教程，并且学到了一些可以应用到你自己的项目中的技巧。感谢阅读！</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h2 id="db6c" class="nl ln iq bd lo nm nn dn ls no np dp lw ko nq nr ma ks ns nt me kw nu nv mi nw bi translated">进一步阅读</h2><div class="os ot gp gr ou ov"><a href="https://betterprogramming.pub/create-your-own-html5-canvas-toolkit-with-vanilla-javascript-1d2ad1047219" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd ir gy z fp pa fr fs pb fu fw ip bi translated">用普通的JavaScript创建你自己的HTML5画布工具包</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">帮助创作者画出令人惊叹的形状的工具包</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">better编程. pub</p></div></div><div class="pe l"><div class="pk l pg ph pi pe pj jw ov"/></div></div></a></div><div class="os ot gp gr ou ov"><a href="https://medium.com/codex/create-an-animated-banner-with-vanilla-javascript-and-html5-canvas-8b499c294b88" rel="noopener follow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd ir gy z fp pa fr fs pb fu fw ip bi translated">用普通的JavaScript和画布API创建一个动画横幅</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">画布会忘记，但我们的物体不会。</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">medium.com</p></div></div><div class="pe l"><div class="pl l pg ph pi pe pj jw ov"/></div></div></a></div><p id="68b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="pm">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="pm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Check if an Object is Empty in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中检查一个对象是否为空？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-check-if-an-object-is-empty-in-javascript-d0686d67e7ed?source=collection_archive---------12-----------------------#2021-05-04">https://javascript.plainenglish.io/how-to-check-if-an-object-is-empty-in-javascript-d0686d67e7ed?source=collection_archive---------12-----------------------#2021-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/84efcd3c9c00e454b34ad3372d1d1ed1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2w4rs_XlfC8rkW3Y"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@dorner?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mike Dorner</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3c2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查空对象是我们有时必须做的事情。</p><p id="1131" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看用JavaScript检查对象是否为空的各种方法。</p><h1 id="2a94" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Object.keys和构造函数属性</h1><p id="db99" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以结合<code class="fe me mf mg mh b">Object.keys</code>方法和<code class="fe me mf mg mh b">constructor</code>属性来检查一个对象是否为空对象。</p><p id="1c78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d57f" class="mq lc iq mh b gy mr ms l mt mu">const obj = {}<br/>console.log(obj &amp;&amp;<br/>  Object.keys(obj).length === 0 &amp;&amp; obj.constructor === Object)</span></pre><p id="0a3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">obj</code>确保<code class="fe me mf mg mh b">obj</code>不是<code class="fe me mf mg mh b">null</code>或<code class="fe me mf mg mh b">undefined</code>。</p><p id="d376" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.keys(obj).length === 0</code>检查<code class="fe me mf mg mh b">obj</code>中的键数是否为0。</p><p id="4c31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">Object.keys</code>返回一个对象的非继承键数组。</p><p id="c99d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，我们没有检查<code class="fe me mf mg mh b">obj</code>是否是一个对象文字。</p><p id="af2d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，我们需要写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a0e6" class="mq lc iq mh b gy mr ms l mt mu">obj.constructor === Object</span></pre><p id="8bab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">去检查一下。</p><p id="02f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它是一个对象文字，那么它应该从<code class="fe me mf mg mh b">Object</code>构造函数中创建。</p><p id="3227" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以<code class="fe me mf mg mh b">obj.constructor</code>应该返回<code class="fe me mf mg mh b">Object</code>is<code class="fe me mf mg mh b">obj</code>is object literal。</p><p id="5ecd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是检查空对象的唯一方法。</p><p id="d052" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">很少有其他方法可以做到这一点。</p><h1 id="b496" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSON.stringify</h1><p id="b861" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">JSON.stringify</code>方法检查一个对象。</p><p id="7e32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="06a4" class="mq lc iq mh b gy mr ms l mt mu">function isEmpty(obj) {<br/>  for (const prop in obj) {<br/>    if (obj.hasOwnProperty(prop)) {<br/>      return false;<br/>    }<br/>  }</span><span id="0755" class="mq lc iq mh b gy mv ms l mt mu">  return JSON.stringify(obj) === JSON.stringify({});<br/>}</span></pre><p id="4cc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用for-in循环遍历ketys。</p><p id="663d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">hasOwnProperties</code>检查一个对象是否有任何非继承的属性。</p><p id="6de8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">obj.hasOwnProperties</code>返回带有任何<code class="fe me mf mg mh b">prop</code>值的<code class="fe me mf mg mh b">true</code>，该值具有正在被迭代的键，那么我们应该返回<code class="fe me mf mg mh b">false</code>。</p><p id="af62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为这意味着在<code class="fe me mf mg mh b">obj</code>中存在一个非继承键，并且<code class="fe me mf mg mh b">obj</code>不为空。</p><p id="175f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果循环没有找到键，那么我们可以使用<code class="fe me mf mg mh b">JSON.stringify</code>来检查一个字符串化的空对象。</p><p id="5fc0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有利于支持没有<code class="fe me mf mg mh b">Object.keys</code>方法的运行时环境，这种情况应该很少见。</p><h1 id="e7cc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">Lodash是一个空方法</h1><p id="9a6f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">Lodash附带了<code class="fe me mf mg mh b">isEmpty</code>方法，它让我们检查一个对象是否为空。</p><p id="420b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是传入一个想要检查的对象:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d567" class="mq lc iq mh b gy mr ms l mt mu">_.isEmpty({});</span></pre><h1 id="d394" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">object . getownpropertymanames</h1><p id="cb00" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">方法返回一个对象的非继承键数组。</p><p id="772c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以像使用<code class="fe me mf mg mh b">Object.keys</code>一样使用它来检查一个空对象。</p><p id="f02f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a5c9" class="mq lc iq mh b gy mr ms l mt mu">if (Object.getOwnPropertyNames(obj).length === 0) {<br/>  //...<br/>}</span></pre><p id="53e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是检查返回的数组长度是否为0。</p><p id="6066" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它还返回不可枚举的属性，这意味着它返回不会被<code class="fe me mf mg mh b">Object.keys</code>返回的键，但不是从任何原型对象继承的。</p><p id="a973" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以这个检查比用<code class="fe me mf mg mh b">Object.keys</code>检查更全面。</p><h1 id="0e31" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d1ed" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">用JavaScript检查空对象有几种方法。</p><p id="d4b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最好的方法是使用<code class="fe me mf mg mh b">Object.keys</code>或<code class="fe me mf mg mh b">Object.getOwnPropertyNames</code>。</p><p id="f92b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容尽在</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create a React Area Difference Chart with the Visx Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visx库创建反应面积差异图表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-react-area-difference-chart-with-the-visx-library-b2eadac01ba3?source=collection_archive---------13-----------------------#2021-03-13">https://javascript.plainenglish.io/create-a-react-area-difference-chart-with-the-visx-library-b2eadac01ba3?source=collection_archive---------13-----------------------#2021-03-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/10975bc44b3b3cf817f1ed54fe8ebbef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HPmHjYIHghvQdQpn"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@paulius005?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Paulius Dragunas</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a83b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Visx是一个库，让我们可以轻松地将图形添加到React应用程序中。</p><p id="5429" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用它将面积差异图表添加到React应用程序中。</p><h1 id="b959" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装所需的库</h1><p id="6fb6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须安装Visx库提供的多个模块来创建面积差异图。</p><p id="bebb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8d4e" class="mn lc iq mj b gy mo mp l mq mr">npm i @visx/axis @visx/curve @visx/grid @visx/group @visx/mock-data @visx/responsive @visx/scale @visx/shape @visx/threshold</span></pre><h1 id="2c5e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建图表</h1><p id="3e13" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">一旦我们安装了所有需要的库，我们通过编写以下内容来添加图表:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f49b" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Group } from "@visx/group";<br/>import { curveBasis } from "@visx/curve";<br/>import { LinePath } from "@visx/shape";<br/>import { Threshold } from "@visx/threshold";<br/>import { scaleTime, scaleLinear } from "@visx/scale";<br/>import { AxisLeft, AxisBottom } from "@visx/axis";<br/>import { GridRows, GridColumns } from "@visx/grid";<br/>import cityTemperature from "@visx/mock-data/lib/mocks/cityTemperature";</span><span id="febb" class="mn lc iq mj b gy ms mp l mq mr">export const background = "#f3f3f3";</span><span id="f528" class="mn lc iq mj b gy ms mp l mq mr">const date = (d) =&gt; new Date(d.date).valueOf();<br/>const ny = (d) =&gt; Number(d["New York"]);<br/>const sf = (d) =&gt; Number(d["San Francisco"]);</span><span id="7e01" class="mn lc iq mj b gy ms mp l mq mr">const timeScale = scaleTime({<br/>  domain: [<br/>    Math.min(...cityTemperature.map(date)),<br/>    Math.max(...cityTemperature.map(date))<br/>  ]<br/>});<br/>const temperatureScale = scaleLinear({<br/>  domain: [<br/>    Math.min(...cityTemperature.map((d) =&gt; Math.min(ny(d), sf(d)))),<br/>    Math.max(...cityTemperature.map((d) =&gt; Math.max(ny(d), sf(d))))<br/>  ],<br/>  nice: true<br/>});</span><span id="97b5" class="mn lc iq mj b gy ms mp l mq mr">const defaultMargin = { top: 40, right: 30, bottom: 50, left: 40 };</span><span id="091e" class="mn lc iq mj b gy ms mp l mq mr">function Theshold({ width, height, margin = defaultMargin }) {<br/>  if (width &lt; 10) return null;</span><span id="8905" class="mn lc iq mj b gy ms mp l mq mr">const xMax = width - margin.left - margin.right;<br/>  const yMax = height - margin.top - margin.bottom;</span><span id="77a6" class="mn lc iq mj b gy ms mp l mq mr">timeScale.range([0, xMax]);<br/>  temperatureScale.range([yMax, 0]);</span><span id="3ab7" class="mn lc iq mj b gy ms mp l mq mr">return (<br/>    &lt;div&gt;<br/>      &lt;svg width={width} height={height}&gt;<br/>        &lt;rect<br/>          x={0}<br/>          y={0}<br/>          width={width}<br/>          height={height}<br/>          fill={background}<br/>          rx={14}<br/>        /&gt;<br/>        &lt;Group left={margin.left} top={margin.top}&gt;<br/>          &lt;GridRows<br/>            scale={temperatureScale}<br/>            width={xMax}<br/>            height={yMax}<br/>            stroke="#e0e0e0"<br/>          /&gt;<br/>          &lt;GridColumns<br/>            scale={timeScale}<br/>            width={xMax}<br/>            height={yMax}<br/>            stroke="#e0e0e0"<br/>          /&gt;<br/>          &lt;line x1={xMax} x2={xMax} y1={0} y2={yMax} stroke="#e0e0e0" /&gt;<br/>          &lt;AxisBottom<br/>            top={yMax}<br/>            scale={timeScale}<br/>            numTicks={width &gt; 520 ? 10 : 5}<br/>          /&gt;<br/>          &lt;AxisLeft scale={temperatureScale} /&gt;<br/>          &lt;text x="-70" y="15" transform="rotate(-90)" fontSize={10}&gt;<br/>            Temperature (°F)<br/>          &lt;/text&gt;<br/>          &lt;Threshold<br/>            id={`${Math.random()}`}<br/>            data={cityTemperature}<br/>            x={(d) =&gt; timeScale(date(d)) ?? 0}<br/>            y0={(d) =&gt; temperatureScale(ny(d)) ?? 0}<br/>            y1={(d) =&gt; temperatureScale(sf(d)) ?? 0}<br/>            clipAboveTo={0}<br/>            clipBelowTo={yMax}<br/>            curve={curveBasis}<br/>            belowAreaProps={{<br/>              fill: "violet",<br/>              fillOpacity: 0.4<br/>            }}<br/>            aboveAreaProps={{<br/>              fill: "green",<br/>              fillOpacity: 0.4<br/>            }}<br/>          /&gt;<br/>          &lt;LinePath<br/>            data={cityTemperature}<br/>            curve={curveBasis}<br/>            x={(d) =&gt; timeScale(date(d)) ?? 0}<br/>            y={(d) =&gt; temperatureScale(sf(d)) ?? 0}<br/>            stroke="#222"<br/>            strokeWidth={1.5}<br/>            strokeOpacity={0.8}<br/>            strokeDasharray="1,2"<br/>          /&gt;<br/>          &lt;LinePath<br/>            data={cityTemperature}<br/>            curve={curveBasis}<br/>            x={(d) =&gt; timeScale(date(d)) ?? 0}<br/>            y={(d) =&gt; temperatureScale(ny(d)) ?? 0}<br/>            stroke="#222"<br/>            strokeWidth={1.5}<br/>          /&gt;<br/>        &lt;/Group&gt;<br/>      &lt;/svg&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="8797" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Theshold width="500" height="300" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="7e25" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用Visx库提供的模拟数据来创建图表。</p><p id="5348" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为x轴创建<code class="fe mt mu mv mj b">timeScale</code>刻度。</p><p id="a2eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们为y轴创建了<code class="fe mt mu mv mj b">temperatureScale</code>。</p><p id="44e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们分别调用<code class="fe mt mu mv mj b">scaleTime</code>和<code class="fe mt mu mv mj b">scaleLinear</code>来缩放数据显示图表。</p><p id="c276" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们用<code class="fe mt mu mv mj b">defaultMargin</code>对象设置边距。</p><p id="115d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建<code class="fe mt mu mv mj b">Threshold</code>组件，它有面积差图。</p><p id="4c18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在其中，我们计算了<code class="fe mt mu mv mj b">xMax</code>和<code class="fe mt mu mv mj b">yMax</code>值，以分别创建x轴和y轴的最大值。</p><p id="db44" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">range</code>方法为图表创建时间和温度刻度。</p><p id="1a3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们添加<code class="fe mt mu mv mj b">svg</code>元素来添加图表的容器。</p><p id="df5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">rect</code>有包围图表的矩形。</p><p id="18f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">Group</code>有我们需要形成图表的项目。</p><p id="905d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">GridRows</code>有网格行。</p><p id="3fca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">scale</code>支柱设置到<code class="fe mt mu mv mj b">temperatureScale</code>来显示温度。</p><p id="b8d2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们对<code class="fe mt mu mv mj b">GridColumns</code>组件做同样的事情，但是<code class="fe mt mu mv mj b">scale</code>被设置为<code class="fe mt mu mv mj b">timeScale</code>。</p><p id="7f5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">line</code>有图表的周界线。</p><p id="33a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">AxisBottom</code>有x轴。</p><p id="5daf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">AxisLeft</code>是y轴。</p><p id="fe82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">Threshold</code>组件来填充线条。</p><p id="2bb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加带有<code class="fe mt mu mv mj b">LinePath</code>组件的行。</p><p id="ad62" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过设置<code class="fe mt mu mv mj b">data</code>道具来设置数据。</p><p id="714b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">x</code>和<code class="fe mt mu mv mj b">y</code>道具返回x和y值。</p><p id="5f9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在<code class="fe mt mu mv mj b">App</code>中，我们呈现我们创建的<code class="fe mt mu mv mj b">Threshold</code>组件，并设置<code class="fe mt mu mv mj b">width</code>和<code class="fe mt mu mv mj b">height</code>来显示图表。</p><h1 id="f563" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="8cfd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Visx库在React应用程序中轻松创建面积差异图表。</p><p id="8362" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p><p id="e9e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
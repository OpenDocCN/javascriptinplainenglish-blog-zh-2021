<html>
<head>
<title>Explaining JavaScript’s ‘this’ Keyword in Simple Terms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用简单的术语解释JavaScript的“this”关键字</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/explaining-javascripts-this-keyword-in-simple-terms-238e26b1d0df?source=collection_archive---------16-----------------------#2021-05-07">https://javascript.plainenglish.io/explaining-javascripts-this-keyword-in-simple-terms-238e26b1d0df?source=collection_archive---------16-----------------------#2021-05-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6a8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在JavaScript中，您必须以前使用过“this”关键字。“this”关键字在JavaScript中可能有不同的含义，这取决于调用它的位置。本文的目的是向您展示一种简单的方法来确定这在特定场景中是指什么。</p><h1 id="002f" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">“这”到底是什么？</h1><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="lm ln di lo bf lp"><div class="gh gi lg"><img src="../Images/ee0da430846acd2ef2ce7159efbe0f12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ENOFSrJmyj4JzK0A"/></div></div><figcaption class="ls lt gj gh gi lu lv bd b be z dk">‘this’ can be confusing (Photo by <a class="ae lw" href="https://unsplash.com/@srz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">sydney Rae</a> on <a class="ae lw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a>)</figcaption></figure><p id="5f5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在JavaScript中，“this”关键字指的是在一个范围内控制/运行一组特定代码的对象(<em class="lx">通常使用的技术术语是执行上下文</em>)。这是对所有者的约束。简单地说，‘这个’指的是它所属的对象。因此，我们知道它可以在不同的上下文中指代不同的对象。让我们来看看这些简单的问题，以确定它指的是什么对象:</p><ol class=""><li id="8a2e" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh md me mf mg bi translated">Node.js或客户端JavaScript中使用了“this”吗？<em class="lx">(在Node中，全局上下文中的this是指‘global this’，而在浏览器中是指‘window’对象)</em></li><li id="c457" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">问问你提到“this”的代码块的所有者是谁？(<em class="lx">注意，无论何时在函数中调用这个函数，都要弄清楚谁拥有这个函数。在那种情况下，这才是真正的参考。</em>)</li><li id="2093" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh md me mf mg bi translated">它是否明确地有界于一个函数？<em class="lx">(使用call()和apply()等方法。在这两种情况下，这些函数中传递的对象成为“this”的引用。稍后我们将简要地看一下它。)</em></li></ol></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="c496" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们通过不同的场景来理解这一点:</p><h1 id="4637" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">①这就其本身而言</h1><p id="d216" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">单独调用时，它引用全局对象。</p><p id="47a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看看下面的例子:</p><pre class="lh li lj lk gt my mz na nb aw nc bi"><span id="ef4f" class="nd kj in mz b gy ne nf l ng nh">console.log(this); // This will print window object</span></pre><p id="815d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们回答我们的问题，以总结上述代码示例中的含义:</p><ul class=""><li id="0f07" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh ni me mf mg bi translated">在这种情况下，我们使用的是普通的JavaScript，这应该是指窗口对象。</li><li id="d718" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">我们看到没有类或方法拥有这个对象。因此，它将使用最广泛的全局范围，即窗口对象。</li><li id="9f7e" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">没有显式的函数绑定。</li></ul><p id="9a4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，我们可以断定这里指的是窗户。</p><p id="f780" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注:</strong> <em class="lx">在上面的例子中，即使我们在一个函数内编写控制台语句，也会得到同样的结果。这是因为该函数属于全局窗口。</em></p><h1 id="b437" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">2)这在一个函数内</h1><p id="ef04" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">正如我们之前所学的，如果这是在一个函数中调用的，我们需要查看拥有函数的<em class="lx">来推断这个对象的引用。</em></p><p id="86ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看看下面的例子:</p><pre class="lh li lj lk gt my mz na nb aw nc bi"><span id="36ee" class="nd kj in mz b gy ne nf l ng nh">function calculateTaxes(){<br/>  console.log(this); // This will return window<br/>}</span></pre><p id="d2f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们回答我们的问题，以总结上述代码示例中的含义:</p><ul class=""><li id="5da6" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh ni me mf mg bi translated">我们使用普通的JavaScript，所以对象的全局引用是window。</li><li id="6a06" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">这里，该函数由窗口对象拥有。</li><li id="6196" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">该函数未显式绑定。</li></ul><p id="6186" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，我们可以得出结论，这里的“this”指的是窗口对象。</p><p id="8888" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们看另一个例子:</p><pre class="lh li lj lk gt my mz na nb aw nc bi"><span id="5245" class="nd kj in mz b gy ne nf l ng nh">"use strict"<br/>function calculateTaxes(){<br/>  console.log(this); // This will return window<br/>}</span></pre><p id="b02f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">记住‘this’对象是绑定到所有者的。如果我们在JavaScript中使用严格模式，它会阻止默认绑定<em class="lx">(本例中我们的默认绑定是全局对象窗口)。因此，在这种特殊情况下，“这”是未定义的，这是一种例外情况。</em></p><h1 id="8c85" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">3)这在一个类内</h1><p id="3ca8" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">在一个类中，它指的是该类的一个对象。因此，您可以访问它的所有属性和方法。</p><p id="55da" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看看下面的例子:</p><pre class="lh li lj lk gt my mz na nb aw nc bi"><span id="2ac7" class="nd kj in mz b gy ne nf l ng nh">class Animals{</span><span id="b659" class="nd kj in mz b gy nj nf l ng nh"> var name = 'Dog';<br/> var species;<br/> <br/> function sound(){<br/>   // Identify what sound that animal makes and return value<br/> }<br/> console.log(this.name); // This will print Dog<br/>}</span></pre><p id="cda2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们回答我们的问题，以总结上述代码示例中的含义:</p><ul class=""><li id="4f10" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh ni me mf mg bi translated">在这种情况下，我们使用普通的JavaScript。所以全局上下文就是窗口对象。</li><li id="485b" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">然而，这里我们看到代码块的所有者，也就是“this”被调用的地方，是动物类。</li><li id="9d81" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">没有显式的函数绑定。</li></ul><p id="9e11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，我们可以得出结论，这里的“this”指的是动物类的对象。</p><p id="0d13" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">注:</strong> <em class="lx">如果我们在声音函数内编写控制台语句。我们会得到同样的结果。因此，this.sound()也有效。既然，声音功能是动物类所拥有的，动物类仍然是‘这个’的拥有者。</em></p><h1 id="4859" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">4)这与显式函数绑定</h1><p id="a402" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">“this”可以与call()和apply()函数一起使用。这两个都是内置的JavaScript函数。它们的用途相同，但传递参数的方式不同(Call方法单独获取每个参数，Apply将它们作为数组)。</p><p id="4505" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这两个函数本质上都是用一个给定的“this”对象和不同的参数调用一个函数。也就是说，我们可以指定我们想要传递的“这个”对象。让我们看一个例子:</p><pre class="lh li lj lk gt my mz na nb aw nc bi"><span id="4b03" class="nd kj in mz b gy ne nf l ng nh">var mansBestFriend = {<br/> species: "Dog",<br/> name: "Scotty"<br/>}</span><span id="2a77" class="nd kj in mz b gy nj nf l ng nh">var introduceAnimal = function(food){<br/>  console.log("This is " + this.name + ".");<br/>  console.log("This " + this.species + " loves " + food + ".");<br/>}</span><span id="414b" class="nd kj in mz b gy nj nf l ng nh">// This is Scotty. This Dog loves Steak.<br/>introduceAnimal.call(mansBestFriend, 'Steak');<br/>introduceAnimal.apply(mansBestFriend, ['Steak']);</span></pre><p id="4e5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如我们所了解的，调用和应用函数的第一个参数是“this”对象。在这里，我们明确指定，该对象是mansBestFriend。</p><p id="c7ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们回答我们的问题，以总结上述代码示例中的含义:</p><ul class=""><li id="7007" class="ly lz in jm b jn jo jr js jv ma jz mb kd mc kh ni me mf mg bi translated">在这种情况下，我们使用普通的JavaScript。所以全局上下文就是窗口对象。</li><li id="d4f3" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">它是在一个函数中被调用的，所以它本身会引用窗口对象，因为函数是由窗口拥有的。</li><li id="6529" class="ly lz in jm b jn mh jr mi jv mj jz mk kd ml kh ni me mf mg bi translated">然而，<em class="lx">我们使用call/apply方法显式绑定‘this’对象</em><strong class="jm io"><em class="lx"/></strong>。这意味着，我们需要查看什么对象被传递给这些函数，以推断这里的“This”指的是什么。由于mansBestFriend对象被传递给call和apply，所以这里的‘this’指的是mansBestFriend对象。</li></ul><p id="7715" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在这篇精彩的<a class="ae lw" href="https://medium.com/@omergoldberg/javascript-call-apply-and-bind-e5c27301f7bb#:~:text=call()%20and%20apply(),call%20expects%20each%20param%20individually." rel="noopener">文章</a>中了解更多关于呼叫和申请的信息。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="44df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用这种简单的技术，您可以很容易地确定在特定的执行上下文中“this”指的是什么。</p><p id="cf48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">识别对象的所有者，理解异常并寻找显式绑定(如果有的话)。现在，您可以像专业人士一样在JavaScript中使用“this”了。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="1f67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">感谢您阅读我的文章！</strong></p><p id="7c5c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">我的名字是毗湿奴·萨西德哈兰，我写技术文章、代码和讲故事。我的目标是把复杂的概念化繁为简，用通俗易懂的语言解释。我也分享激励过我的真实生活故事。</strong></p><p id="a223" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">如果你喜欢这篇文章，你可能也会喜欢:</strong></p><div class="nm nn gp gr no np"><a rel="noopener  ugc nofollow" target="_blank" href="/why-you-should-stop-using-loops-88a6a789106e"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd io gy z fp nu fr fs nv fu fw im bi translated">为什么应该停止使用循环</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">如果你和我一样，你在JavaScript中使用for和while循环的时间最长。我是说如果它得到了…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od lq np"/></div></div></a></div><div class="nm nn gp gr no np"><a rel="noopener  ugc nofollow" target="_blank" href="/promises-in-typescript-27d887a8d380"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd io gy z fp nu fr fs nv fu fw im bi translated">打字稿中的承诺</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">想象一下，你去店主那里买糖果。你要了一颗糖，店主答应了(即给了你一颗糖)</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ny l"><div class="oe l oa ob oc ny od lq np"/></div></div></a></div><p id="7e3e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lx">更多内容请看</em><a class="ae lw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lx">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Why and How to Use Absolute Imports in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么以及如何在React中使用绝对导入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-and-how-to-use-absolute-imports-in-react-d5b52f24d53c?source=collection_archive---------0-----------------------#2021-10-08">https://javascript.plainenglish.io/why-and-how-to-use-absolute-imports-in-react-d5b52f24d53c?source=collection_archive---------0-----------------------#2021-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="833e" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph">前端</h2><div class=""/><div class=""><h2 id="0c60" class="pw-subtitle-paragraph jt iw in bd b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dk translated">在React中保持代码整洁的简单方法</h2></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/2789df112b056f9f8870ff2bb8edd31a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgQN6rI0OJB_OXgVTgOwLw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://www.pexels.com/@ketut-subiyanto?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Ketut Subiyanto</a> from <a class="ae lb" href="https://www.pexels.com/photo/crop-faceless-man-packing-box-with-scotch-tape-4246109/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="e8ad" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">使用绝对导入来更好地组织React项目是一个很好的方法。相对导入在重构过程中很难遵循和打破。随着项目的增长，绝对导入更容易管理您的项目。忘记这篇文章后的长期相对进口。这是我的第40篇中型文章。</p></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h1 id="9f55" class="mf mg in bd mh mi mj mk ml mm mn mo mp kc mq kd mr kf ms kg mt ki mu kj mv mw bi translated">问题是</h1><p id="0af6" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">如果你的项目的文件夹结构很复杂，你需要在里面<strong class="le ix">往上</strong>走怎么办？在您的组件内部，您有看起来像下面的相对导入示例的导入。</p><pre class="km kn ko kp gt nc nd ne nf aw ng bi"><span id="e6ba" class="nh mg in nd b gy ni nj l nk nl">import {MyComponent} from ‘../../../../components/MyComponent’;</span></pre><p id="61bb" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">您可以通过更改导入您的<code class="fe nm nn no nd b">MyComponent</code>的组件的路径来中断上述导入。让我们假设您决定将<code class="fe nm nn no nd b">MyComponent</code>移到它自己的文件夹中。然后你需要更新项目中所有的导入，并在所有的导入中添加一个额外的<code class="fe nm nn no nd b">../</code>。相对进口有更多的问题。</p><ul class=""><li id="3026" class="np nq in le b lf lg li lj ll nr lp ns lt nt lx nu nv nw nx bi translated">很难重构</li><li id="df56" class="np nq in le b lf ny li nz ll oa lp ob lt oc lx nu nv nw nx bi translated">随着你越陷越深，情况变得越来越糟。</li><li id="741b" class="np nq in le b lf ny li nz ll oa lp ob lt oc lx nu nv nw nx bi translated">如果需要提取代码作为NPM模块在外部使用，则需要更改整个代码库。</li></ul></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h1 id="e5ef" class="mf mg in bd mh mi mj mk ml mm mn mo mp kc mq kd mr kf ms kg mt ki mu kj mv mw bi translated">绝对进口</h1><p id="09cd" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">通过使用绝对导入，您可以将一些文件夹作为别名，如下所示:</p><pre class="km kn ko kp gt nc nd ne nf aw ng bi"><span id="d0e0" class="nh mg in nd b gy ni nj l nk nl">import {MyComponent} from ‘components/MyComponent’;</span></pre><p id="3156" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">绝对进口有一些优势。</p><ul class=""><li id="99c8" class="np nq in le b lf lg li lj ll nr lp ns lt nt lx nu nv nw nx bi translated">没有<code class="fe nm nn no nd b">../../../../hell</code>。因此更容易打出进口。</li><li id="0672" class="np nq in le b lf ny li nz ll oa lp ob lt oc lx nu nv nw nx bi translated">轻松地将导入的代码复制粘贴到项目的另一个文件中，而不必修改导入路径。</li><li id="566c" class="np nq in le b lf ny li nz ll oa lp ob lt oc lx nu nv nw nx bi translated">它又短又甜</li></ul><p id="7845" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">以下示例是一个具有相对导入的文件。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="60e1" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">使上面文件中的导入更加漂亮。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="c78b" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">因此，如何使用带有ReactJs的绝对导入呢？</p><h2 id="82c9" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">使用TypeScript</h2><p id="82a3" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">如果您需要在您的Typescript应用程序中设置绝对导入，请在项目的根目录中添加/更新您的<code class="fe nm nn no nd b">tsconfig.json</code>文件。然后需要更新文件中的编译器选项<code class="fe nm nn no nd b">baseUrl</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div></figure><h2 id="3f9a" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">使用JavaScript</h2><p id="08f3" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">设置Typescript的绝对导入和设置JavaScript的绝对导入几乎是相同的过程。在项目的根目录下创建<code class="fe nm nn no nd b">jsconfig.json</code>文件。然后，您需要更新以下代码片段。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="3976" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">现在，您可以像这样导入组件。</p><pre class="km kn ko kp gt nc nd ne nf aw ng bi"><span id="3e5a" class="nh mg in nd b gy ni nj l nk nl">import {MyComponent} from ‘components/MyComponent’;</span></pre><p id="9f56" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">您也可以使用编译器选项<code class="fe nm nn no nd b">paths</code>。也许你想别名你的<code class="fe nm nn no nd b">component</code>文件夹。为此，您需要设置您的<code class="fe nm nn no nd b">tsconfig.json</code>或<code class="fe nm nn no nd b">jsconfig.json</code>，如下所示:</p><pre class="km kn ko kp gt nc nd ne nf aw ng bi"><span id="0a0f" class="nh mg in nd b gy ni nj l nk nl">{<br/>  "compilerOptions": {<br/>    "baseUrl": "./",<br/>    "paths": {<br/>      "@component/*": ["src/components/*"],<br/>    }<br/>  }<br/>}</span></pre><p id="9b5f" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">现在，您可以从组件文件夹中导入组件，如下所示:</p><pre class="km kn ko kp gt nc nd ne nf aw ng bi"><span id="baae" class="nh mg in nd b gy ni nj l nk nl">import {MyComponent} from ‘@component/MyComponent’;</span></pre><p id="4640" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">够了吗？</p><p id="63a6" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">嗯，不…你需要让你的IDE变得智能，以理解文件中的绝对导入。在这里，我将提到前2个ide的进展。那些是VS代码和WebStrom。</p><h2 id="da89" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">对于VS代码</h2><p id="830c" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">VS代码足够聪明，可以理解<code class="fe nm nn no nd b">tsconfig.json</code>，或者说<code class="fe nm nn no nd b">jsconfig.json</code>文件。Intellisense和跳转到源代码在绝对导入时工作良好。</p><p id="8c85" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">所以，你可以按照上面的流程。</p><h2 id="d017" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">对于WebStrom / IntelliJ Idea</h2><p id="be21" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">在项目窗口中选择src文件夹，并右键单击它。选择选项<strong class="le ix">将目录标记为</strong>，然后选择<strong class="le ix">资源根</strong>选项。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi op"><img src="../Images/151ae5406f744c5e942efbd34e4a0927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QCjtXr7W8tAS97Etkna_w.png"/></div></div></figure><p id="744a" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">现在进入<strong class="le ix">设置</strong>-&gt;-<strong class="le ix">编辑器-</strong>-&gt;-<strong class="le ix">代码样式</strong>-&gt;-<strong class="le ix">JavaScript</strong>和<strong class="le ix">-</strong>选择<strong class="le ix">导入</strong>标签页。然后检查<strong class="le ix">使用相对于项目、资源或源根的路径</strong>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oq"><img src="../Images/6f08eb7692c8b8e016f1ffddcb34b705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VhExpM1Kx5SaHMvuIyAeHg.png"/></div></div></figure><p id="d797" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">现在WebStrom知道绝对进口指向哪里。不会有任何警告，自动完成/跳转到源代码将工作。这意味着自动导入机制使用绝对导入。</p><p id="756c" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">如果你和我一样是个严格的开发者，就用Airbnb的ESLint config之类的吧。</p><h2 id="a0c7" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">使用ESLint</h2><p id="5047" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">Create React应用程序也有一个ESLint设置，但它有一个最小的规则集。Airbnb使用eslint-plugin-import ，该插件检查未定义的导入。当你打算使用Airbnb的ESLint配置时，它会给出如下所示的错误:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi or"><img src="../Images/5f3c05d08b411b659339da289647e78c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*7w-nu2REGmEs3V4-1dNcXw.png"/></div></figure><p id="9173" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">您可以通过在ESLint配置中添加<code class="fe nm nn no nd b">settings</code>属性来修复这个错误。你导入的那个设置点可能是相对于<code class="fe nm nn no nd b">src</code>文件夹的。因此，您需要在<code class="fe nm nn no nd b">.eslintrc</code>文件中添加更新您的ESLint配置，如下所示:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="b421" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">你不需要安装任何NPM模块来避免ESLint错误，添加<code class="fe nm nn no nd b">settings</code>道具就足够了。</p><h2 id="5287" class="nh mg in bd mh of og dn ml oh oi dp mp ll oj ok mr lp ol om mt lt on oo mv it bi translated">按照惯例</h2><p id="4533" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">长期以来，Webpack一直支持绝对导入。当你命名你的别名文件夹时，你需要使用PascalCase/CamelCase，因为这是在<a class="ae lb" href="https://webpack.js.org/configuration/resolve/#resolvealias" rel="noopener ugc nofollow" target="_blank"> Webpack </a>中遵循的惯例。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi os"><img src="../Images/7d336f038bf08eb1cb16715a5e7c3f3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SsTWqQeNRLM8ReY5PBPK8w.png"/></div></figure></div><div class="ab cl ly lz hr ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ig ih ii ij ik"><h1 id="136a" class="mf mg in bd mh mi mj mk ml mm mn mo mp kc mq kd mr kf ms kg mt ki mu kj mv mw bi translated">结论</h1><p id="5bfb" class="pw-post-body-paragraph lc ld in le b lf mx jx lh li my ka lk ll mz ln lo lp na lr ls lt nb lv lw lx ig bi translated">绝对导入可能会让新开发人员困惑一段时间。如果他们理解它，那么它很容易使用。因此，我建议在您的自述文件中包含几行关于导入机制的内容，或者您可以链接到本文。在我发表这篇文章后，我不打算改变任何内容。我希望你喜欢这个小技巧，以便更好地组织你的React项目。</p><p id="b733" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated">祝编码愉快！😃</p><p id="56de" class="pw-post-body-paragraph lc ld in le b lf lg jx lh li lj ka lk ll lm ln lo lp lq lr ls lt lu lv lw lx ig bi translated"><em class="ot">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="le ix"><em class="ot">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
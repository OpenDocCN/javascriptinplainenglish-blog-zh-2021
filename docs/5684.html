<html>
<head>
<title>Does JavaScript Guarantee Object Property Order?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript保证对象属性顺序吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/does-javascript-guarantee-object-property-order-36c3630e320b?source=collection_archive---------6-----------------------#2021-11-30">https://javascript.plainenglish.io/does-javascript-guarantee-object-property-order-36c3630e320b?source=collection_archive---------6-----------------------#2021-11-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8f60d50f5853a67620ffcc2b198869aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6y6LSeVPbYfSIa19"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Micheile Henderson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6374" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">JavaScript对象是动态的。</p><p id="5348" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以在任何时候插入任何属性。</p><p id="2ed5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解JavaScript对象是否有保证的属性排序顺序。</p><h1 id="f576" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ES2015对象</h1><p id="cfb6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在ES2015中，顺序大多遵循插入顺序。</p><p id="3cff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是真的，有些键是数字。</p><p id="20e9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果混合了数字键和非数字键，那么首先遍历数字键。</p><p id="0972" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后遍历其他键。</p><p id="04b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">不同浏览器的数字键行为可能有所不同。</p><p id="62a2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Chromium不考虑数字键的插入顺序，比如把它们放在第一位。</p><p id="785b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下对象:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="743a" class="mn lc iq mj b gy mo mp l mq mr">const obj = Object.create(null, {<br/>  m: {<br/>    value() {},<br/>    enumerable: true<br/>  },<br/>  "2": {<br/>    value: "2",<br/>    enumerable: true<br/>  },<br/>  "b": {<br/>    value: "b",<br/>    enumerable: true<br/>  },<br/>  0: {<br/>    value: 0,<br/>    enumerable: true<br/>  },<br/>  [Symbol()]: {<br/>    value: "sym",<br/>    enumerable: true<br/>  },<br/>  "1": {<br/>    value: "1",<br/>    enumerable: true<br/>  },<br/>  "a": {<br/>    value: "a",<br/>    enumerable: true<br/>  },<br/>});</span><span id="8da6" class="mn lc iq mj b gy ms mp l mq mr">for (const prop in obj) {<br/>  console.log(prop)<br/>}</span></pre><p id="084b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们用for-in循环遍历它时，我们看到我们得到:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5b4e" class="mn lc iq mj b gy mo mp l mq mr">0<br/>1<br/>2<br/>m<br/>b<br/>a</span></pre><p id="172b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><p id="129b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">数字键最先出现。</p><p id="dc23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，非数字字符串键按照插入的顺序循环。</p><p id="de22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以下方法保证按插入的顺序遍历键:</p><ul class=""><li id="c1d0" class="mt mu iq kf b kg kh kk kl ko mv ks mw kw mx la my mz na nb bi translated"><code class="fe nc nd ne mj b">Object.assign</code></li><li id="1105" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">Object.defineProperties</code></li><li id="e6c6" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">Object.getOwnPropertyNames</code></li><li id="01fb" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">Object.getOwnPropertySymbols</code></li><li id="973c" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">Reflect.ownKeys</code></li></ul><p id="05b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是这些方法或循环不能保证以任何顺序遍历对象:</p><ul class=""><li id="7f57" class="mt mu iq kf b kg kh kk kl ko mv ks mw kw mx la my mz na nb bi translated"><code class="fe nc nd ne mj b">Object.keys</code></li><li id="0d50" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">for..in</code></li><li id="b257" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">JSON.parse</code></li><li id="a0ee" class="mt mu iq kf b kg nf kk ng ko nh ks ni kw nj la my mz na nb bi translated"><code class="fe nc nd ne mj b">JSON.stringify</code></li></ul><p id="7dce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，如果我们使用<code class="fe nc nd ne mj b">Object.keys</code>，我们可以对键进行排序，因为键是以数组的形式返回的。</p><h1 id="f05c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">ES2015之前</h1><p id="ee4c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在ES2015之前，没有定义对象关键点的迭代顺序。</p><p id="45ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着它们可以在不同的运行时环境中变化。</p><p id="e90b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，它们中的大多数遵循与ES2015中相同的规则。</p><h1 id="6989" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cad7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">不能保证JavaScript对象中的对象属性以任何顺序被遍历。</p><p id="f206" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果我们想保证键按照我们想要的顺序被遍历，我们应该对它们进行排序或者使用JavaScript映射。</p><p id="0669" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nk">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nk">说白了。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nk">免费周报在这里</em> </strong> </a> <em class="nk">。</em></strong></a></p></div></div>    
</body>
</html>
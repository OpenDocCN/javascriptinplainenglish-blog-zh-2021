<html>
<head>
<title>How to Write JavaScript Unit Tests using Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Jest编写JavaScript单元测试</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-write-javascript-unit-tests-using-jest-422b3c4e050f?source=collection_archive---------12-----------------------#2021-07-28">https://javascript.plainenglish.io/how-to-write-javascript-unit-tests-using-jest-422b3c4e050f?source=collection_archive---------12-----------------------#2021-07-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="70fa" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">用Jest编写单元测试的初学者指南</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/42a7ed98ae59a17b757da0a2238c30ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWFJ0qE5cOBfbJ1_G91HnA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/photos/EWLHA4T-mso" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae ks" href="https://unsplash.com/s/photos/jest" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="da92" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我第一次开始编码时，我做的每个项目都需要手工单元测试。这意味着每当我编辑代码时，我都必须坐下来手动测试我能想到的所有用例。你可以想象这是一个可怕的策略！我会经常错过测试用例，遇到许多意想不到的错误(当错误发生在演示过程中时，情况会糟糕一百万倍)。</p><p id="274d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从那以后，我试着积极努力去写单元测试。希望本指南可以帮助你开始单元测试。</p><h1 id="137a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">设置</h1><p id="f734" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在我们开始之前，用下面的文件结构创建一个目录。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="896e" class="mr lq in mn b gy ms mt l mu mv">\testing<br/>   \src<br/>      index.js<br/>   \test<br/>      index.test.js</span></pre><p id="ea6b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，从根目录在终端中编写命令<code class="fe mw mx my mn b">npm init</code>。这将把这个目录初始化为节点开发环境。在终端中，会提示您填写一些关于该项目的信息。重复点击<code class="fe mw mx my mn b">enter</code>可以跳过这一步。</p><p id="78f3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，运行命令<code class="fe mw mx my mn b">npm install --save-dev jest</code>。这将把Jest作为开发依赖项添加到这个项目中。</p><p id="815e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行完上面的所有命令后，您的文件结构应该如下所示:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="a60d" class="mr lq in mn b gy ms mt l mu mv">\testing<br/>   \node_modules<br/>   \src<br/>      index.js<br/>   \test<br/>      index.test.js<br/>   package-lock.json<br/>   package.json</span></pre><p id="509a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，在我们的package.json中，我们将修改脚本。在脚本对象内部添加<code class="fe mw mx my mn b">"test": "jest"</code>。您的package.json最后应该是这样的:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="bf5f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">添加这个脚本将允许您在终端中运行命令<code class="fe mw mx my mn b">npm run test</code>，并自动测试您在测试目录中编写的所有测试。</p><h1 id="d0ba" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">写作测试</h1><p id="7f32" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">现在是激动人心的部分，编写测试。在本指南中，我将介绍Jest的基本知识，但是，我强烈建议您访问他们的网站<a class="ae ks" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">这里</a>，了解他们的一些更高级的功能。</p><p id="c1dd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，在我们开始编写测试用例之前，我们必须在<code class="fe mw mx my mn b">index.js</code>中编写一些函数。在<code class="fe mw mx my mn b">index.js</code>文件中添加以下代码。我们将针对这两个流行的leet代码问题创建单元测试，<a class="ae ks" href="https://leetcode.com/problems/coin-change-2/" rel="noopener ugc nofollow" target="_blank">硬币变化2 </a>和<a class="ae ks" href="https://leetcode.com/problems/fibonacci-number/" rel="noopener ugc nofollow" target="_blank">斐波那契数</a>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="df01" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我们可以在<code class="fe mw mx my mn b">index.test.js</code>中编写我们的测试用例。我们将首先从描述程序块开始。描述块是对几个相关测试进行分组的代码块。使用我们上面写的代码，我们想为<code class="fe mw mx my mn b">change</code>函数和<code class="fe mw mx my mn b">fib</code>函数分别创建一个描述块。您的<code class="fe mw mx my mn b">index.test.js</code>文件应该如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="766d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，在每个<code class="fe mw mx my mn b">describe</code>块中，你将在<code class="fe mw mx my mn b">test</code>块中编写你想要的单元测试。你可以写尽可能多的单元测试。以下是我写的测试案例:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><p id="4b24" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我的例子中，我将只写几个来展示这些测试块的样子。所有测试块通常遵循相同的模式。你可能会初始化一些常量，调用一些函数，但最终，你总会期望某些东西等于某些东西。</p><p id="02df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我的测试用例中，我将总是使用函数<code class="fe mw mx my mn b">expect(value).toEqual(value)</code>，然而，有许多不同的函数供您使用。完整列表请访问<a class="ae ks" href="https://jestjs.io/docs/expect" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="aea0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，在编写完所有测试用例后，您可以在终端中从根目录运行<code class="fe mw mx my mn b">npm run test</code>,并让Jest运行您编写的所有单元测试。</p><p id="172a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Jest运行所有测试后，您将在终端中收到重要信息，例如哪些测试通过了，哪些测试失败了。失败的测试还将显示更详细的信息，例如失败发生的原因和地点。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><p id="2d55" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">希望这个指南是有帮助的。下次见。编码快乐！</p><p id="02a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ni">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ni">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
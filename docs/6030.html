<html>
<head>
<title>4 Problems that You Need to Know Before Using React Native Webview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Native Webview之前需要了解的4个问题</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/4-problems-that-you-need-to-know-before-using-react-native-webview-d1d6ef803347?source=collection_archive---------3-----------------------#2021-12-27">https://javascript.plainenglish.io/4-problems-that-you-need-to-know-before-using-react-native-webview-d1d6ef803347?source=collection_archive---------3-----------------------#2021-12-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f4a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在过去的一年里，我一直在开发一款使用Webview显示Html电子邮件的react原生应用程序，在这个过程中，我遇到了一些不常见的问题，我们花了很长时间才解决。</p><p id="f97d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在这篇文章中的目的是通过向您展示您可能遇到的问题以及如何解决它们来节省您的时间。</p><h1 id="1dc5" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">问题一:WebView动态高度</h1><p id="4712" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">React本机Webview不能像“<View/>”一样设置自己的高度，它可以根据内容进行缩放</p><p id="df73" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">webview拥有高度的唯一方法是为它提供一个特定的高度。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi ll"><img src="../Images/7473524353846f38d0895e60c9ccc61f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bQ4_UUjoh4b3kf-NaUwNRQ.png"/></div></div></figure><p id="9b25" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们在webview完成加载后使用<strong class="jm io"><em class="lx">inject JavaScript</em></strong><em class="lx">prop</em>注入了一个脚本，它将获取内容高度，然后更新webview高度。</p><h1 id="2ff6" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">问题2: Webview可能导致android中的应用崩溃</h1><p id="f561" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">这个问题很难找到，当我们从一些屏幕导航时，应用程序出现了一些意外的崩溃，起初我们做了每个有经验的react本地开发人员都会做的事情，运行`<em class="lx"> adb logcat </em>`命令，并花费数小时调试导致崩溃的原因。</p><p id="d6f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">幸运的是，我们发现<a class="ae ly" href="https://github.com/react-navigation/react-navigation/issues/9061" rel="noopener ugc nofollow" target="_blank">这个GitHub问题</a>修复了我们的问题，修复只是在包含webview的屏幕中禁用导航动画</p><p id="ca32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">还有其他react-navigation和webview崩溃修复可能对其他人有用，请查看此<a class="ae ly" href="https://lonelycpp.github.io/react-native-youtube-iframe/navigation-crash/" rel="noopener ugc nofollow" target="_blank">react-native-YouTube-iframe文档</a>了解更多信息。</p><h1 id="3e30" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">问题3:在webview [Android]中导入本地HTML文件</h1><p id="184f" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">在webview中导入本地HTML文件在expo和bare react native之间有所不同。</p><p id="0dfd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在一个简单的React本地项目中，你只需要将文件添加到android资产中，并从那里导入它。<br/>点击查看完整的解决方案<a class="ae ly" href="https://stackoverflow.com/a/61473740/7951454" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="815a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在expo项目中，由于我们无法访问android文件夹，您可以使用这种变通方法。</p><figure class="lm ln lo lp gt lq gh gi paragraph-image"><div role="button" tabindex="0" class="lr ls di lt bf lu"><div class="gh gi lz"><img src="../Images/f949d69598f7db306fdbf19bb2ffdf9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WxsbgVmLc49_BdOETSGh4g.png"/></div></div></figure><h1 id="abf8" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">问题4:在旧的android版本上测试webview</h1><p id="e41b" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">如果您发现自己添加了一个包含javascript的自定义HTML文件，请确保在旧版本上测试webview，因为在我的情况下，我使用了一些新的javascript功能，如可选链接，这导致了android版本8中webview的中断。</p><h1 id="c0b0" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">感谢阅读📚</h1><p id="7145" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">我希望这篇文章可以帮助你面对一些意想不到的webview问题💪</p><p id="4c7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Github  | <a class="ae ly" href="https://twitter.com/hartaniyassir/" rel="noopener ugc nofollow" target="_blank">推特</a> ✈️</p><p id="f585" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lx">更多内容看</em> <a class="ae ly" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lx">说白了. io </em> </a> <em class="lx">。报名参加我们的</em> <a class="ae ly" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lx">免费每周简讯</em> </a> <em class="lx">。在我们的</em> <a class="ae ly" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="lx">社区</em> </a> <em class="lx">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
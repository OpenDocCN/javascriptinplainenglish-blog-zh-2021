<html>
<head>
<title>Observables vs Subjects vs Behavior Subjects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">观察对象vs主体vs行为主体</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/eli5-observables-vs-subjects-vs-behavior-subjects-f2494f14813d?source=collection_archive---------0-----------------------#2021-08-28">https://javascript.plainenglish.io/eli5-observables-vs-subjects-vs-behavior-subjects-f2494f14813d?source=collection_archive---------0-----------------------#2021-08-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c6c2" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">像我5岁时一样解释:可观察对象vs主体vs行为主体</h2></div><h2 id="fc62" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">内容</h2><ul class=""><li id="311b" class="ky kz in la b lb lc ld le kl lf kp lg kt lh li lj lk ll lm bi translated">可观察到的与承诺</li><li id="ec4b" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">ELI5时尚的观察者模式</li><li id="812f" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">热对比冷观察</li><li id="8c10" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">主体与行为主体</li></ul><h1 id="444a" class="ls kd in bd ke lt lu lv kh lw lx ly kk jt lz ju ko jw ma jx ks jz mb ka kw mc bi translated">可观察到的与承诺</h1><p id="a7dd" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">可观察值和承诺一样是异步的，但是关键的区别是可观察值可以随时间返回多个值，而承诺只返回一个值。</p><ul class=""><li id="7969" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated">直到我们使用subscribe()方法订阅它们，观察对象才会被执行，并且它们可以发出多个事件。</li><li id="e7aa" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">承诺处理单个事件，即使您没有附加回调方法，承诺也会被执行。</li></ul><p id="f946" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">关于反应式编程的一句话:</strong></p><p id="bcd4" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">你可能听说过反应式编程，在我看来，它听起来总是超级时髦。简单来说就是设计你的程序来等待事件，并在事件发生时做出反应。在前端开发中，事件无处不在。从标准的键盘事件到您自己创建的自定义事件，毫无疑问，事件在前端开发中非常重要。RxJS库提供了一个坚实的工具箱来对这些事件做出反应。</p><h1 id="3230" class="ls kd in bd ke lt lu lv kh lw lx ly kk jt lz ju ko jw ma jx ks jz mb ka kw mc bi translated">ELI5: <strong class="ak">观察者模式</strong></h1><p id="013c" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">你可能已经遇到了<code class="fe my mz na nb b">Observer Pattern</code>的技术图表和解释，只是为了摆脱它，就像你以前一样困惑。也许你的冒名顶替综合症开始发作了。</p><figure class="nd ne nf ng gt nh gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/3efd20f3f24847ec551f38ab12bdbf3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:312/format:webp/1*ZT4_zdRksMjGS6yGUZ4xcg.png"/></div></figure><figure class="nd ne nf ng gt nh"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="2f3b" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">相反，让我们应用一个类比，而不是进入技术图表。</p><p id="a3e2" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">假设你正在浏览<em class="nm">youtube.com，</em>找到一个你喜欢的DIY频道。你可以观看一些制作<em class="nm">完美胡桃木餐桌的视频。(不好意思，我是新爸爸，这些东西让我感兴趣。)</em></p><p id="eb34" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">如果您想获得该频道的通知，您需要先点击<code class="fe my mz na nb b">subscribe</code> <strong class="la io"> </strong>按钮<strong class="la io">。</strong> <code class="fe my mz na nb b">Subscribing</code> <strong class="la io"> </strong> <em class="nm">连接</em>你这个消费者，到<code class="fe my mz na nb b">Observable</code>的数据。youtube频道就像持有数据的观察者，当你订阅时，你(观察者)会在新视频制作时收到通知。如果你忘记订阅，那么你将不会得到最新的更新，你将会错过任何新发生的事情。</p><p id="8c2e" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">外卖&amp;术语:</strong></p><ul class=""><li id="6d21" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated"><code class="fe my mz na nb b">Observer:</code>订阅和收听变化的事物。在youtube的例子中，你可以和观察者相比，因为你在等待你最喜欢的youtube频道发布新的视频。</li><li id="fcb9" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated"><code class="fe my mz na nb b">Observable:</code>只是一个函数，当你订阅时，它随时间返回数值。例如，如果你订阅了你最喜欢的youtube频道的通知，那么当新视频发布时，你将会收到多个通知。</li><li id="fab2" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated"><code class="fe my mz na nb b">Producer:</code>是你的可观察值的来源。频道创建者是你订阅内容的<code class="fe my mz na nb b">producer</code>。</li></ul><h1 id="fcb8" class="ls kd in bd ke lt lu lv kh lw lx ly kk jt lz ju ko jw ma jx ks jz mb ka kw mc bi translated">热与冷的对比观察:</h1><p id="49d9" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">有两种主要的可观察类型:热对冷。它们都是通过订阅以相同的方式访问的。</p><p id="ab54" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">寒冷:</strong></p><ul class=""><li id="d670" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated"><strong class="la io">单播</strong> —只有一个观察者订阅并监听变化。当您订阅时，会为该实例创建一个新的生成器。如果您取消订阅，将会发生拆除过程，订阅将不再可用。</li></ul><p id="6d84" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">热:</strong></p><ul class=""><li id="b97f" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated"><strong class="la io">多播</strong> —当有多个观察者监听变化时。当你订阅时，你只是众多订阅者/观察者中的一员。如果您取消订阅，生产者将继续存在并继续产生价值，直到所有人都取消订阅。</li></ul><h2 id="6996" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">常规可观测冷&amp;单播:</strong></h2><p id="3f53" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">如果你在家观看网飞上的电影，当你按下play ( <em class="nm"> subscribe </em>)时，电影流是为你新创建的，并且电影从头到尾都是完全可用的。<em class="nm">想象一下，按下播放就相当于订阅。</em></p><p id="c548" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">这是一个冷观察，因为电影流(<em class="nm">又名观察</em>)是专为你创造的。您是这个流的唯一观察者(<em class="nm">单播</em>)，并且您可以完全控制它何时开始或停止。如果世界各地的其他人按下播放，就会产生一个新的可观察流，他们也可以看到完整的电影。为它们创建新的独立流，并且新的观察者通过订阅或取消订阅来完全控制可观察流的开始/停止。</p><p id="5950" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">外卖:</strong></p><ul class=""><li id="bced" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated">冷可观测量是单播的。单播意味着观察者和数据生产者之间是一对一的关系。在网飞，当您按下电影上的播放按钮时，一个新的电影流会专门为您创建/制作。</li><li id="80a8" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">Cold observables主要用于读取或更新当前状态，通常是通过HTTP GET或PUT请求。</li></ul><h2 id="241f" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">科目和行为科目火热&amp;组播:</strong></h2><p id="66fa" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">相比之下，当你在电影院时，你是<strong class="la io">而不是</strong>唯一观看电影的人。你不能控制电影什么时候开始，因为它是在预定的放映时间开始的。当该时间开始时，胶片卷轴被加载并播放。如果你来晚了(订阅晚了)，你会错过电影的开头。因此，如果您在可观察对象已经发出一些值之后订阅，那么您将会错过订阅之前发生的数据。其他较早到达的观众将会看到完整的电影。</p><ul class=""><li id="8207" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated">电影院有多个观众(组播)和一部电影要看(流/制片人)。</li><li id="087c" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">每个观察者都可以随时走进或走出，但演出将继续进行。这意味着每个人都可以看到整部电影的不同场景。</li></ul><p id="3103" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">两种类型的热观测值</strong></p><ol class=""><li id="6aca" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li nn lk ll lm bi translated"><strong class="la io">科目:</strong></li></ol><p id="e827" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">主体是<strong class="la io">热</strong>可观察的，因为它们有多个观察者(多播)。如果你走出电影院去小卖部买更多的爆米花和可口可乐，那么你可能会错过一些东西。你不会有机会赶上或看到任何已经发生的事情，你只会看到接下来发生的事情。</p><ul class=""><li id="1905" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated">当你订阅一个主题时，你只会看到新的事件，而不是过去发生的任何事情。它只向订阅的观察器发送数据，任何以前发出的数据都不会发送给新的观察器。你只能对你关注的事情做出反应。</li><li id="45be" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">没有初始值。</li><li id="3d3f" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">您可以通过调用方法<code class="fe my mz na nb b">next(). subject$.<strong class="la io">next</strong>(‘Hello World’);</code>将值提供给流</li></ul><p id="5796" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">什么时候可以使用主语？</p><p id="3b1a" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">我主要使用主题来表示应用程序中的自定义事件。只是一辆“活动大巴”。例如，您可以创建一个在事件发生时在UI中弹出通知的主题。</p><p id="72e8" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">你可以传递任何值给它:<code class="fe my mz na nb b">subject$.<strong class="la io">next</strong>(‘example value pushed to the subject’)</code>，然后每个观察者都会看到<code class="fe my mz na nb b">‘example value pushed to the subject’.</code></p><p id="e577" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io"> 2。行为主体:</strong></p><p id="6eb9" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">与没有提供访问已经传递的值的方法的Subject相反，Behavior Subject有一个<code class="fe my mz na nb b">.getValue()</code>方法，可以让您访问最后发出的值。就好像你在剧院旁边的朋友把最后一幕留在记忆里(发射值)，告诉你从小卖部回来的时候发生了什么。</p><ul class=""><li id="1407" class="ky kz in la b lb mq ld mr kl ms kp mt kt mu li lj lk ll lm bi translated">行为主体在订阅时接收最后发出的/最新的值。此功能对于将数据存储在服务中以便在应用程序间共享非常有用。</li><li id="90aa" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">需要传递初始值。<code class="fe my mz na nb b">const behaviorSubject$ = new <strong class="la io">BehaviorSubject</strong>("Hello World");</code></li><li id="a2a2" class="ky kz in la b lb ln ld lo kl lp kp lq kt lr li lj lk ll lm bi translated">如果没有最新的值，那么它发出初始值。</li></ul><p id="904c" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><strong class="la io">什么时候可以使用行为主体？</strong></p><p id="3b2d" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated">根据我的经验，行为主体主要用于在服务中存储数据。购物车是需要跨组件同步数据的一个很好的例子。您可能在页面标题组件中有一个显示总金额的标题，以及一个允许您编辑购物车的差异组件。为了保持这些同步，您可以在服务级别使用一个行为主体，作为事实的单一来源。</p><h2 id="8e09" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论:</h2><h1 id="81ab" class="ls kd in bd ke lt lu lv kh lw lx ly kk jt lz ju ko jw ma jx ks jz mb ka kw mc bi translated">感谢阅读。如果你学到了什么，点击跟随按钮！</h1><p id="343a" class="pw-post-body-paragraph md me in la b lb lc jo mf ld le jr mg kl mh mi mj kp mk ml mm kt mn mo mp li ig bi translated">对于如何使用观察和行为主题的实际、深入的例子，我强烈推荐阅读我的朋友Vidal的这篇教程。<a class="ae no" href="https://medium.com/@vidalquevedo/how-to-share-data-between-components-in-angular-b86ce8254965" rel="noopener">https://medium . com/@ vidalquevedo/how-to-share-data-between-components-in-angular-b86ce 8254965</a></p><p id="e39c" class="pw-post-body-paragraph md me in la b lb mq jo mf ld mr jr mg kl mv mi mj kp mw ml mm kt mx mo mp li ig bi translated"><em class="nm">更多内容请看</em><a class="ae no" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="la io"><em class="nm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
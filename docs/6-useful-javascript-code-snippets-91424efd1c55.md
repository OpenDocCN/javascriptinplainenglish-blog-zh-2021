# 6 ä¸ªæœ‰ç”¨çš„ JavaScript ä»£ç ç‰‡æ®µ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/6-useful-javascript-code-snippets-91424efd1c55?source=collection_archive---------3----------------------->

## è¿™ä¸ªåˆ—è¡¨å¯èƒ½å¾ˆä¸»è§‚ï¼Œä½†æˆ‘è¿˜æ˜¯åˆ†äº«äº†æˆ‘è‡ªå·±çš„ç‰ˆæœ¬ã€‚ç¤ºä¾‹å’Œä»£ç ã€‚

è™½ç„¶ Medium ä¸Šæœ‰å…¶ä»–ä¼˜ç§€çš„ä½œå®¶å†™è¿‡è¿™ä¸ªä¸»é¢˜ï¼Œä½†æˆ‘æ³¨æ„åˆ°è¿™ä¸ªåˆ—è¡¨çš„æç«¯ä¸»è§‚æ€§ï¼Œå› ä¸ºæ¯ä¸ªäººå¿ƒé‡Œéƒ½æœ‰ä¸åŒçš„æ—¥å¸¸ç”¨ä¾‹ã€‚ç±»ä¼¼åœ°ï¼Œæˆ‘æœ‰æˆ‘ä¸ªäººçš„ JavaScript ä»£ç ç‰‡æ®µåˆ—è¡¨ï¼Œå¯¹ä¸€äº›è¯»è€…æ¥è¯´ä¼šå¾ˆæ–¹ä¾¿ã€‚

## 1.æ–‡ä»¶å†…å®¹ä¸Šä¼ 

```
var selectContent=document.getElementById("selectContent");
var contentForSelection=document.getElementById("contentForSelection");selectContent.onchange=function(e) {
  if (!window.FileReader) {
   alert("Your browser does not support HTML5 'FileReader' function required to open a file.");
  } else {
   let fileis = this.files[0];
   let fileredr = new FileReader();
   fileredr.onload = function (fle) {
    let filecont = fle.target.result;
    contentForSelection.value=filecont;
   };
   //fileredr.readAsArrayBuffer(fileis);
   fileredr.readAsText(fileis);
  }
};
```

![](img/050e0867a45743fc3b55ff7f84848db5.png)

Screenshot by Author | Select .txt file to upload into a textarea

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå› ä¸ºæˆ‘é€‰æ‹©å¯¼å…¥çš„æ–‡ä»¶æ˜¯æ–‡æœ¬æ ¼å¼çš„ï¼Œæ‰€ä»¥ä½¿ç”¨äº†æ–¹æ³•`**readAsText**`è€Œä¸æ˜¯`**readAsArrayBuffer**`ã€‚ä½¿ç”¨`**readAsArrayBuffer**`çš„ä¾‹å­åŒ…æ‹¬è¯»å–å›¾åƒæµæˆ–è¯»å– ZIP å­˜æ¡£æ–‡ä»¶ã€‚å¯¼å…¥æˆåŠŸåï¼Œæ–‡ä»¶å†…å®¹è¢«è‡ªåŠ¨æ¸²æŸ“åˆ°æ–‡æœ¬åŒºï¼Œå…ƒç´  id ä¸º**â€œcontentForSelectionâ€**ã€‚

## 2.ä¿å­˜æ–‡ä»¶å†…å®¹

```
var saveBtn=document.getElementById("saveBtn");
var contentForSelection=document.getElementById("contentForSelection");
saveBtn.onclick=function() {
 let txtContent=contentForSelection.value;
 if (!window.Blob) {
  alert("Your browser does not support HTML5 'Blob' function required to save a file.");
 } else {
  let textblob = new Blob([txtContent], {
   type: "text/plain"
  });
  let dwnlnk = document.createElement("a");
  dwnlnk.download = "output.txt";
  dwnlnk.innerHTML = "Download File";
  if (window.webkitURL != null) {
    dwnlnk.href = window.webkitURL.createObjectURL(textblob);
  }
  dwnlnk.click();
  }
};
```

![](img/99050c520ad04e2ecb3ca07b4fc14ff8.png)

Screenshot by Author | Content present in the textarea is saved by the user via a download link generated by JavaScript

ä¸Šé¢çš„ä»£ç ç‰‡æ®µé€šå¸¸åœ¨åœ¨çº¿ç¬”è®°åº”ç”¨ç¨‹åºä¸­å®ç°ï¼Œä»¥ä¾¿ç”¨æˆ·å¯¼å‡ºä»–ä»¬çš„è¾“å‡ºã€‚æˆ–è€…ï¼Œåœ¨è¯¸å¦‚æ•°æ®/ä»£ç æ ¼å¼åŒ–ç¨‹åºä¹‹ç±»çš„ web å®ç”¨ç¨‹åºä¸­ï¼Œé€šå¸¸ä¹Ÿæä¾›**ã€Saveã€‘**åŠŸèƒ½ï¼Œä»¥å…è®¸ç”¨æˆ·å°†åç»­æ ¼å¼åŒ–çš„æ–‡æœ¬å†…å®¹ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨æ–‡ä»¶ä¸­ã€‚

## 3.å¤åˆ¶åˆ°å‰ªè´´æ¿

å¤åˆ¶åˆ°å‰ªè´´æ¿æ˜¯åŸºäºæµè§ˆå™¨è®¾ç½®çš„å¦ä¸€ä¸ªç»å…¸åŠŸèƒ½ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ**å¦‚æœè½¬æ¢åçš„è¾“å‡ºä»…ç”¨äºä¸€æ¬¡æ€§ä»»åŠ¡**ï¼Œæ­¤æ—¶æ²¡æœ‰å¿…è¦å°†è¾“å‡ºä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹ JS ä»£ç ç‰‡æ®µä¼šæ›´åˆé€‚:

```
var copyBtn=document.getElementById("copyBtn");
var contentForSelection=document.getElementById("contentForSelection");
copyBtn.onclick=function(evt) {
 copyBtn.nextElementSibling.innerHTML="";
 copyTransformedOutput("contentForSelection");
 let smallEle=evt.currentTarget.nextElementSibling;
 smallEle.innerHTML="<span style='color:green'> Copied to Clipboard!</span>";
};
function copyTransformedOutput(inputEleId) {
 let copyText = document.getElementById(inputEleId);
 copyText.select();
 copyText.setSelectionRange(0, 99999); /* For mobile devices */
 navigator.clipboard.writeText(copyText.value);
}
```

**æ³¨æ„ï¼Œæˆ‘é€‰æ‹©åœ¨ä»£ç ç‰‡æ®µä¸­æˆåŠŸå¤åˆ¶åæ˜¾ç¤ºæ¶ˆæ¯â€œå¤åˆ¶åˆ°å‰ªè´´æ¿â€ã€‚**

å› æ­¤ï¼Œè½¬æ¢åçš„è¾“å‡ºå¯ä»¥éšåç²˜è´´åˆ°å…¶ä»–åœ°æ–¹ï¼Œè€Œä¸éœ€è¦å­˜å‚¨åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚

## 4.å…¨éƒ¨æŸ¥æ‰¾å’Œæ›¿æ¢

è™½ç„¶åœ¨æœ€æ–°çš„ JavaScript æ§åˆ¶å°ä¸­ï¼Œæ­¤[åŠŸèƒ½ç›®å‰æ˜¯å†…ç½®çš„](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll)ï¼Œä½†ç”±äºå…¶å®ç°çš„ç‹¬åˆ›æ€§&ç®€å•æ€§ï¼Œäº†è§£ä»¥ä¸‹ JavaScript åŠŸèƒ½ä»ç„¶æ˜¯ç›¸å…³ä¸”æœ‰ç”¨çš„:

```
function replaceAll(inputStr,toReplace,replaceWith) {
  return inputStr.split(toReplace).join(replaceWith);
}
```

ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å¸Œæœ›åœ¨æ–‡æœ¬åŒºåŸŸä¸­ç”¨â€œidâ€æ›¿æ¢â€œID â€:

![](img/1c11570751ae89c7daf8c64c0c8028d9.png)

Screenshot by Author | â€œidâ€ attribute of the JSON object is now replaced with its uppercase counterparts â€œIDâ€ in the above implementation

ä»£ç ç‰‡æ®µçš„å…¶ä½™éƒ¨åˆ†å¦‚ä¸‹:

```
var replaceBtn=document.getElementById("replaceBtn");
replaceBtn.onclick=function() {
 let toFind=document.getElementById("ToFind").value;
 let replaceWith=document.getElementById("ReplaceWith").value;
contentForSelection.value=replaceAll(contentForSelection.value,toFind,replaceWith);
};
```

## 5.ç”Ÿæˆéšæœºåå…­è¿›åˆ¶é¢œè‰²

æˆ‘å‘ç°è¿™ç§ JavaScript æ–¹æ³•ä¸å¤ªå—æ¬¢è¿çš„ä¸€ç§æƒ…å†µæ˜¯ï¼Œå½“æˆ‘å¿…é¡»åœ¨åŒä¸€ä¸ª web åº”ç”¨ç¨‹åºä¸Šå‘ˆç°å¤šæ¡é©¾é©¶è·¯çº¿æ—¶:

![](img/2da5df18b467c1f0522cf953f23b04c2.png)

Illustration by Author | In this routing application I have created, the fastest route is lightgreen while the shortest distance route is displayed in brown. Depending on no. of routes returned by each map service provider, an infinite no. of colours would be required for each route.

æ˜¾ç„¶ï¼Œå¯¹äºä»»ä½•è§‚çœ‹è€…æ¥è¯´ï¼ŒåŒºåˆ†ä¸åŒé¢œè‰²çš„æ— é™æ•°é‡çš„é‡å é©¾é©¶è·¯çº¿æ›´å®¹æ˜“æ¯”è¾ƒå’Œå¯¹æ¯”åœ°å›¾å¯è§†åŒ–ä¸Šæ˜¾ç¤ºçš„å„ç§è·¯çº¿ã€‚å› æ­¤ï¼ŒåŠ¨æ€ç”Ÿæˆä¸åŒçš„é¢œè‰²æ˜¯å¿…è¦çš„ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°:

```
function generateRandomHexColor() {
    let colorGenerated="#" + (Math.random() * 0xfffff * 1000000).toString(16).slice(0, 6);
    if(colorGenerated !== "#0000ff" && colorGenerated !== "#ff0000") {
      return colorGenerated;
    }
    colorGenerated="#" + (Math.random() * 0xfffff * 1000000).toString(16).slice(0, 6);
}
```

## 6.çªå‡ºæ˜¾ç¤º JSON è¯­æ³•

å¯¹äºåœ°å›¾æœåŠ¡æä¾›è€…è¿”å›çš„æ¯æ¡è·¯çº¿ï¼Œæˆ‘éƒ½é›†æˆäº†è·¯çº¿çš„ JSON æ•°æ®è¾“å‡ºçš„å¯¼å‡ºåŠŸèƒ½ã€‚å› æ­¤ï¼Œä¸ºäº†åŒºåˆ† JSON å¯¹è±¡ä¸­çš„å¯¹è±¡ç±»å‹ï¼Œå¦‚å­—ç¬¦ä¸²ã€æµ®ç‚¹ã€æ•´æ•°ã€å¸ƒå°”ï¼Œæˆ‘é€‰æ‹©äº†å¦‚ä¸‹æ‰€ç¤ºçš„é¢œè‰²ç¼–ç :

![](img/8c0e0fcd3fba29eef67c375c66b82fca.png)

ä¸Šè¿°æ•ˆæœå¯ä»¥é€šè¿‡ CSS å’Œ JavaScript æ¥å®ç°ã€‚

**JavaScript ä»£ç :**

```
function syntaxHighlight(json) {
    json = json.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;");
    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
        var cls = "number";
        if (/^"/.test(match)) {
            if (/:$/.test(match)) {
                cls = "key";
            } else {
                cls = "string";
            }
        } else if (/true|false/.test(match)) {
            cls = "boolean";
        } else if (/null/.test(match)) {
            cls = "null";
        }
        return "<span class='" + cls + "'>" + match + "</span>";
    });
}
```

**CSS ä»£ç :**

```
.string { 
  color: green; 
}
.number { 
  color: darkorange; 
}
.boolean { 
  color: blue; 
}
.null { 
  color: magenta; 
}
.key { 
  color: red; 
}
```

## æˆ‘è§‰å¾—æœ‰ç”¨çš„å€¼å¾—åˆ†äº«çš„ 6 ä¸ª JavaScript ä»£ç ç‰‡æ®µåˆ—è¡¨åˆ°æ­¤ç»“æŸï¼

**ä¸ªäººè¯„è®º:**è™½ç„¶æ²¡æœ‰ç»å¯¹çš„æ¸…å•åˆ—å‡ºå“ªäº› JavaScript å‡½æ•°/ä»£ç ç‰‡æ®µæ˜¯æœ€æœ‰ç”¨çš„ï¼Œä½†æ˜¯å½“è¿™äº›å»ºè®®é€‚ç”¨äºæ‚¨çš„ç‰¹å®šç”¨ä¾‹æ—¶ï¼Œç”±åª’ä½“ä½œè€…ç¼–è¾‘çš„æ¸…å•ç¡®å®è¯æ˜æ˜¯éå¸¸æœ‰ä»·å€¼çš„ã€‚å½“é‡æ–°æŸ¥çœ‹æˆ‘çš„åˆ—è¡¨æ—¶ï¼Œæˆ‘æ³¨æ„åˆ°å®ƒä»¬å¤§å¤šæ˜¯åœ¨æµè§ˆå™¨è®¾ç½®ä¸­ä½¿ç”¨çš„ I/O æ–‡ä»¶å®ç”¨ç¨‹åºï¼Œå› ä¸ºæˆ‘ç»å¸¸å‘ç°è‡ªå·±åœ¨æ•°æ®åˆ†æä¸­ä½¿ç”¨ web å®ç”¨ç¨‹åºã€‚

*éå¸¸æ„Ÿè°¢åšæŒåˆ°æœ¬æ–‡ç»“æŸï¼â¤å¸Œæœ›æ‚¨å‘ç°è¿™é€‚ç”¨äºæ‚¨çš„ç”¨ä¾‹ã€‚å¦‚éœ€æ›´å¤šæ•°æ®åˆ†æ& Web åº”ç”¨ç›¸å…³å†…å®¹ï¼Œè¯·éšæ—¶å…³æ³¨æˆ‘çš„åª’ä½“* *ã€‚éå¸¸æ„Ÿè°¢*ğŸ˜€

[](https://geek-cc.medium.com/membership) [## é€šè¿‡æˆ‘çš„æ¨èé“¾æ¥åŠ å…¥çµåª’â€”â€”ææ€æ¬£Â·å´”

### è·å¾—ææ€æ¬£Â·å´”å’Œå…¶ä»–ä½œå®¶åœ¨åª’ä½“ä¸Šçš„æ‰€æœ‰å¸–å­ï¼ğŸ˜ƒæ‚¨çš„ä¼šå‘˜è´¹ç›´æ¥â€¦

geek-cc.medium.com](https://geek-cc.medium.com/membership) 

ä½ ä¹Ÿå¯ä»¥çœ‹çœ‹ä¸‹é¢è¿™ç¯‡å…³äº HTML æ ‡ç­¾çš„æ–‡ç« :

[](https://medium.com/weekly-webtips/6-useful-but-lesser-known-html-tags-attributes-9e9f2c0208c4) [## 6 ä¸ªæœ‰ç”¨ä½†é²œä¸ºäººçŸ¥çš„ HTML æ ‡ç­¾å’Œå±æ€§

### è¿™äº›æ ‡ç­¾çš„å­˜åœ¨æ˜¯æœ‰å……åˆ†ç†ç”±çš„â€¦åŒ…æ‹¬ç¤ºä¾‹+ç”¨ä¾‹ã€‚

medium.com](https://medium.com/weekly-webtips/6-useful-but-lesser-known-html-tags-attributes-9e9f2c0208c4) 

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](http://plainenglish.io)
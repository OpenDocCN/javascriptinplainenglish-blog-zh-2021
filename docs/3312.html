<html>
<head>
<title>React Form Validation with Formik and Yup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Formik和Yup进行表单验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-form-validation-using-formik-and-yup-1b558594c39b?source=collection_archive---------3-----------------------#2021-07-06">https://javascript.plainenglish.io/react-form-validation-using-formik-and-yup-1b558594c39b?source=collection_archive---------3-----------------------#2021-07-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4293" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在React中处理表单验证</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a0d834951675ac6ba2b4af2fc3c6cf0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FrDlqb5qszg42KA6"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@domenicoloia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Domenico Loia</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a2b6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">前端开发人员必须进行客户端表单验证。这是因为它改善了用户体验和网站性能。它防止向后端服务器发送无效数据。REACT与其他库的结合使这种实现变得容易。本文将向您展示如何向<strong class="kv io">文本字段</strong>、<strong class="kv io">电子邮件字段</strong>、<strong class="kv io">文本区域</strong>和<strong class="kv io">日期字段</strong>添加验证。我们将使用REACT、formik和Yep。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="7cfe" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第一步。</strong>打造新鲜的react app。称之为表单-验证-app。<a class="ae ks" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">在此阅读React安装步骤</a></p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="3fa6" class="mb mc in lx b gy md me l mf mg">npx create-react-app form-validation-app</span></pre><p id="43e0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第二步:</strong>然后把formik库安装到app上。<a class="ae ks" href="https://formik.org/docs/overview" rel="noopener ugc nofollow" target="_blank">在此阅读Formik文档</a></p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="5709" class="mb mc in lx b gy md me l mf mg">cd form-validation-app<br/>npm install formik --save</span></pre><p id="9edd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第三步:</strong>接下来把<em class="mh"> yup </em>库安装到app上。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="4f92" class="mb mc in lx b gy md me l mf mg">npm install yup --save</span></pre><p id="0a4b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第四步:在你的app项目的<em class="mh"> /src </em>文件夹中创建一个名为components的文件夹。在components文件夹中，创建一个名为Personalform.js的文件。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="24af" class="mb mc in lx b gy md me l mf mg">import React from 'react'<br/>import { useFormik } from 'formik'<br/>import * as Yup from 'yup'</span></pre><p id="83cc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第五步:</strong>创建一个名为<em class="mh"> personalForm </em>的功能组件。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="5b10" class="mb mc in lx b gy md me l mf mg">import React from 'react'<br/>import { useFormik } from 'formik'<br/>import * as Yup from 'yup'</span><span id="3d0b" class="mb mc in lx b gy mi me l mf mg"><br/>const personalForm = () =&gt; {}</span></pre><p id="8ee5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第六步:</strong>在<em class="mh"> personalForm </em>组件中，创建三个变量，分别叫做<em class="mh"> initialValues </em>、<em class="mh"> validationSchema、</em>和<em class="mh"> formik </em>。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="0151" class="mb mc in lx b gy md me l mf mg">const personalForm = () =&gt; {<br/>   <em class="mh">const</em> initialValues = {}<br/>   const validationSchema = Yup.object({})<br/>   const formik = useFormik({})<br/>}</span></pre><p id="5292" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">步骤7: </strong>向<em class="mh"> initialValues </em>对象添加姓名、电子邮件、地址和dob属性。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="b915" class="mb mc in lx b gy md me l mf mg"><em class="mh">const</em> initialValues = {<br/>   name: '',<br/>   email: '',<br/>   address: '',<br/>   dob: ''<br/>}</span></pre><p id="60bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">步骤8: </strong>向validationSchema添加名称、电子邮件、地址和日期字段的验证语句。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="6801" class="mb mc in lx b gy md me l mf mg"><em class="mh">const</em> validationSchema = Yup.object({<br/>    name: Yup.string()<br/>             .required('Required')<br/>             .max(50),<br/>    email: Yup.email()<br/>              .required('Required'),<br/>    address: Yup.string()<br/>                .required('Required')<br/>                .max(600),<br/>    dob: Yup.date()<br/>            .required('Required'),<br/>});</span></pre><p id="ae8b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">步骤9: </strong>向formik变量添加initialValues、validationSchema和onSubmit属性。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="4b05" class="mb mc in lx b gy md me l mf mg">const formik = useFormik({<br/>    initialValues: initialValues,<br/>    validationSchema: validationSchema<br/>    onSubmit: values =&gt; {<br/>     alert(JSON.stringify(values, null, 2));<br/>    },<br/>});</span></pre><p id="a090" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">第10步:</strong>在return语句中，为每个字段添加JSX姓名、电子邮件、地址和出生日期。在它们中包含一个<em class="mh"> onChange </em>处理程序。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="a978" class="mb mc in lx b gy md me l mf mg">&lt;form <em class="mh">onSubmit</em>={formik.handleSubmit}&gt;<br/>       &lt;label <em class="mh">htmlFor</em>="name"&gt;Name&lt;/label&gt;<br/>       &lt;input<br/>         <em class="mh">id</em>="name"<br/>         <em class="mh">name</em>="name"<br/>         <em class="mh">type</em>="text"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.name}<br/>       /&gt;</span><span id="8acc" class="mb mc in lx b gy mi me l mf mg">{formik.errors.name ? <br/>      &lt;div&gt;{formik.errors.name}&lt;/div&gt; : null}</span><span id="60e3" class="mb mc in lx b gy mi me l mf mg">&lt;label <em class="mh">htmlFor</em>="email"&gt;Email&lt;/label&gt;<br/>      &lt;input<br/>        <em class="mh">id</em>="email"<br/>        <em class="mh">name</em>="email"<br/>        <em class="mh">type</em>="email"<br/>        <em class="mh">onChange</em>={formik.handleChange}<br/>        <em class="mh">value</em>={formik.values.email}<br/>      /&gt;</span><span id="b9d3" class="mb mc in lx b gy mi me l mf mg">{formik.errors.email ? <br/>      &lt;div&gt;{formik.errors.email}&lt;/div&gt; : null}</span><span id="81ba" class="mb mc in lx b gy mi me l mf mg">&lt;label <em class="mh">htmlFor</em>="address"&gt;Physical Address&lt;/label&gt;<br/>      &lt;textarea<br/>         <em class="mh">id</em>="address"<br/>         <em class="mh">name</em>="address"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.address}<br/>      /&gt;<br/>      {formik.errors.address ? <br/>      &lt;div&gt;{formik.errors.address}&lt;/div&gt; : null}</span><span id="458c" class="mb mc in lx b gy mi me l mf mg">&lt;label <em class="mh">htmlFor</em>="dob"&gt;Date of Birth&lt;/label&gt;<br/>      &lt;input<br/>         <em class="mh">id</em>="dob"<br/>         <em class="mh">name</em>="dob"<br/>         <em class="mh">type</em>="date"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.dob}<br/>      /&gt;</span><span id="bc3d" class="mb mc in lx b gy mi me l mf mg">{formik.errors.dob ? <br/>      &lt;div&gt;{formik.errors.dob}&lt;/div&gt; : null}</span><span id="32e1" class="mb mc in lx b gy mi me l mf mg">&lt;button <em class="mh">type</em>="submit"&gt;Submit&lt;/button&gt;<br/>&lt;/form&gt;</span></pre><p id="6ee2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后的<strong class="kv io"><em class="mh">personal form . js</em></strong>文件一定是下面这个样子。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="ee48" class="mb mc in lx b gy md me l mf mg">import React from 'react'<br/>import { useFormik } from 'formik'<br/>import * as Yup from 'yup'<br/></span><span id="fbc4" class="mb mc in lx b gy mi me l mf mg">const personalForm = () =&gt; {</span><span id="7cbb" class="mb mc in lx b gy mi me l mf mg"><em class="mh">const</em> initialValues = {<br/>   name: '',<br/>   email: '',<br/>   address: '',<br/>   dob: ''<br/>}</span><span id="f771" class="mb mc in lx b gy mi me l mf mg"><em class="mh">const</em> validationSchema = Yup.object({<br/>    name: Yup.string()<br/>             .required('Required')<br/>             .max(50),<br/>    email: Yup.email()<br/>              .required('Required'),<br/>    address: Yup.string()<br/>                .required('Required')<br/>                .max(600),<br/>    dob: Yup.date()<br/>            .required('Required'),<br/>});</span><span id="d7cf" class="mb mc in lx b gy mi me l mf mg">const formik = useFormik({<br/>    initialValues: initialValues,<br/>    validationSchema: validationSchema<br/>    onSubmit: values =&gt; {<br/>     alert(JSON.stringify(values, null, 2));<br/>    },<br/>});</span><span id="6b2e" class="mb mc in lx b gy mi me l mf mg">return (<br/>   &lt;form <em class="mh">onSubmit</em>={formik.handleSubmit}&gt;<br/>       &lt;label <em class="mh">htmlFor</em>="name"&gt;Name&lt;/label&gt;<br/>       &lt;input<br/>         <em class="mh">id</em>="name"<br/>         <em class="mh">name</em>="name"<br/>         <em class="mh">type</em>="text"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.name}<br/>       /&gt;</span><span id="21f1" class="mb mc in lx b gy mi me l mf mg">      {formik.errors.name ? <br/>      &lt;div&gt;{formik.errors.name}&lt;/div&gt; : null}</span><span id="6a58" class="mb mc in lx b gy mi me l mf mg">      &lt;label <em class="mh">htmlFor</em>="email"&gt;Email&lt;/label&gt;<br/>      &lt;input<br/>        <em class="mh">id</em>="email"<br/>        <em class="mh">name</em>="email"<br/>        <em class="mh">type</em>="email"<br/>        <em class="mh">onChange</em>={formik.handleChange}<br/>        <em class="mh">value</em>={formik.values.email}<br/>      /&gt;</span><span id="5097" class="mb mc in lx b gy mi me l mf mg">      {formik.errors.email ? <br/>      &lt;div&gt;{formik.errors.email}&lt;/div&gt; : null}</span><span id="c9ea" class="mb mc in lx b gy mi me l mf mg">      &lt;label <em class="mh">htmlFor</em>="address"&gt;Physical Address&lt;/label&gt;<br/>      &lt;textarea<br/>         <em class="mh">id</em>="address"<br/>         <em class="mh">name</em>="address"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.address}<br/>      /&gt;<br/>      {formik.errors.address ? <br/>      &lt;div&gt;{formik.errors.address}&lt;/div&gt; : null}</span><span id="29a7" class="mb mc in lx b gy mi me l mf mg">     &lt;label <em class="mh">htmlFor</em>="dob"&gt;Date of Birth&lt;/label&gt;<br/>      &lt;input<br/>         <em class="mh">id</em>="dob"<br/>         <em class="mh">name</em>="dob"<br/>         <em class="mh">type</em>="date"<br/>         <em class="mh">onChange</em>={formik.handleChange}<br/>         <em class="mh">value</em>={formik.values.dob}<br/>      /&gt;</span><span id="1096" class="mb mc in lx b gy mi me l mf mg">      {formik.errors.dob ? <br/>      &lt;div&gt;{formik.errors.dob}&lt;/div&gt; : null}</span><span id="14e3" class="mb mc in lx b gy mi me l mf mg">      &lt;button <em class="mh">type</em>="submit"&gt;Submit&lt;/button&gt;</span><span id="99b2" class="mb mc in lx b gy mi me l mf mg">);</span><span id="1108" class="mb mc in lx b gy mi me l mf mg">};</span></pre><p id="9aa0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">步骤11: </strong>将<strong class="kv io"> <em class="mh"> personalForm </em> </strong>组件导入到<strong class="kv io"> <em class="mh"> app.js </em> </strong>文件中，并添加到返回声明JSX中，如下所示。</p><pre class="kd ke kf kg gt lw lx ly lz aw ma bi"><span id="e8ec" class="mb mc in lx b gy md me l mf mg">import React from 'react'<br/>import './App.css'<br/>import PersonalForm from './components/PersonalForm'</span><span id="f624" class="mb mc in lx b gy mi me l mf mg"><em class="mh">function</em> App() {<br/>  return (<br/>     &lt;div <em class="mh">classname</em>='App'&gt;<br/>       &lt;PersonalForm/&gt;<br/>     &lt;/div&gt;<br/>)}</span><span id="368f" class="mb mc in lx b gy mi me l mf mg">export default App</span></pre><p id="47ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行应用程序</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="050b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们有了。我希望你已经发现这是有用的。我会带着更多有趣的文章回来。感谢您的阅读。</p><p id="4580" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mh">更多内容看</em><a class="ae ks" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mh">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a CRUD with Angular and Supabase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个有角度和水平的CRUD</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-crud-with-angular-and-supabase-c205e393c823?source=collection_archive---------8-----------------------#2021-03-07">https://javascript.plainenglish.io/a-crud-with-angular-and-supabase-c205e393c823?source=collection_archive---------8-----------------------#2021-03-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d228bfbb134c7b7c91b8d6b607ed58b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kSSYWtVyi9Ewn2LX.gif"/></div></div></figure><p id="37e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">本文是后</em><a class="ae ku" href="https://kheronn-machado.medium.com/angular-11-e-supabase-uma-alternativa-ao-firebase-5d76f49b0182" rel="noopener"><em class="kt">Angular 11 and Supabase的延续Firebase的替代！？</em> </a></p><p id="40b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae ku" href="https://supabase-angular.vercel.app/" rel="noopener ugc nofollow" target="_blank">演示</a></p><p id="dea6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我将介绍一个教程，探索使用在第11版和Supabase中用Angular编写的应用程序进行CRUD的主要操作。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="6b00" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过CLI ( <strong class="jx io"> <em class="kt"> ng new) </em> </strong>创建项目后，第一步是安装supabase lib。在终端和项目内部，键入:</p><p id="37b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">仍然在终端，我们将创建一个服务类来建立连接和方法。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><h1 id="092a" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">生成服务类</h1><p id="8272" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">我们生成了一个名为<strong class="jx io"> ApiService </strong>的服务类。</p><blockquote class="me mf mg"><p id="4472" class="jv jw kt jx b jy jz ka kb kc kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ks ig bi translated">出于更多的教学目的，我没有遵循任何组织或应用程序架构(我在实际项目中不这样做！)</p></blockquote><p id="60e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在文件<strong class="jx io">中，api.service.tswe将</strong>开始定义连接参数。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="273f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">导入库(第3行)后，我们声明<strong class="jx io">supabasurel</strong>、<strong class="jx io"> supabaseKey </strong>和<strong class="jx io"> supabase </strong>(客户端)变量(第9到11行)。</p><p id="8129" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该信息(<em class="kt">supabasurel</em>和<em class="kt"> supabaseKey </em>)可在supabase仪表盘的身份验证标签中找到，如这里所述的<a class="ae ku" href="https://kheronn-machado.medium.com/angular-11-and-supabase-an-alternative-to-firebase-63bafbd4febc" rel="noopener"/>。</p><h2 id="388d" class="mk lc in bd ld ml mm dn lh mn mo dp ll kg mp mq lp kk mr ms lt ko mt mu lx mv bi translated">再次强调，小心钥匙暴露。在面板上，有关于允许匿名访问的客户端密钥的信息，还有一个永远不应该向客户端公开的服务密钥。</h2><p id="9aeb" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated"><em class="kt">建议在服务器上或环境变量中使用。</em></p><blockquote class="me mf mg"><p id="6f1a" class="jv jw kt jx b jy jz ka kb kc kd ke kf mh kh ki kj mi kl km kn mj kp kq kr ks ig bi translated"><a class="ae ku" href="https://betterprogramming.pub/how-to-secure-angular-environment-variables-for-use-in-github-actions-39c07587d590" rel="noopener ugc nofollow" target="_blank">阅读建议</a> — <a class="ae ku" href="https://betterprogramming.pub/how-to-secure-angular-environment-variables-for-use-in-github-actions-39c07587d590" rel="noopener ugc nofollow" target="_blank">安全角环境</a></p></blockquote><p id="c576" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在构造函数方法中，第14行我们使用<strong class="jx io"> createClient </strong>方法创建连接。</p><p id="c5cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，已经可以在表中编写查询、包含和排除方法。</p><p id="a79a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，我们导入了一个Todo类(第1行)。由于它还不存在于VSCode或其他编辑器中，这将指示一个错误。没问题，为了解决这个问题，让我们创建一个类，它代表了整个表中信息的模型。</p><p id="23ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<em class="kt">应用程序</em>文件夹中，创建文件<strong class="jx io"> todo.model.ts </strong>，并按照以下示例进行编码:</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="2fe7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们有三个属性:id、名称和done，它们将代表表的一条记录。</p><h1 id="281a" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">编码方法</h1><p id="7001" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">返回到API文件。因此，已经可以在表中写入查询、包含和排除方法。</p><p id="43db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将从插入方法<strong class="jx io">开始添加待办事项</strong>。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="62d3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">关于该方法的一些考虑:</p><ul class=""><li id="1555" class="mw mx in jx b jy jz kc kd kg my kk mz ko na ks nb nc nd ne bi translated">我们可以用<strong class="jx io"> &lt; Todo &gt; </strong>键入返回，并传入<strong class="jx io"> insert </strong>而不需要对对象进行任何变换。这将有助于创建更通用的类。</li><li id="fffd" class="mw mx in jx b jy nf kc ng kg nh kk ni ko nj ks nb nc nd ne bi translated">此外，我们能够在出现故障时恢复返回(日期)或错误。</li></ul><p id="2cd4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这一逻辑同样适用于恢复、更新和删除方法。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="nk la l"/></div></figure><p id="0fb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">select方法可以与其他几种方法嵌套在一起(<a class="ae ku" href="https://supabase.io/docs/guides/client-libraries" rel="noopener ugc nofollow" target="_blank">参见文档</a>)。在这个例子中，我确实使用了10条记录的限制。</p><p id="bc29" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另一方面，<strong class="jx io">更新</strong>、<strong class="jx io">删除</strong>方法，与id相比(第13、21行)。</p><h1 id="34c3" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">组件和模板</h1><p id="936d" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">我将重点描述组件<strong class="jx io"> app.component.ts logic </strong>。在教程的最后，我留下了这个项目的知识库链接。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="nk la l"/></div></figure><p id="1e76" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们声明了一个todo数组，一个<strong class="jx io"> todo </strong>对象和一个<strong class="jx io"> actionLabel </strong>，它们在‘ADD’ADD或‘UPDATE’UPDATE状态之间切换。在构造函数方法中，我们进行依赖注入来使用API。</p><p id="6735" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在ngOnInit()方法中，请注意，在第20行和第21行中，我们调用了API的getTodos()方法，一加载页面就加载现有的TODOs，并将结果分配给最初声明的数组。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="9fa6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io"> addTodo </strong>方法中，我们做了一个初始检查来检查是否有<strong class="jx io"> id </strong>，因此，我们转移了流程进行更新。否则，我们调用API方法，最后，我们将结果添加到数组中。</p><p id="2cc9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们接下来使用的方法是从列表中选择记录，更新或更改<strong class="jx io">到</strong>的状态。</p><figure class="kv kw kx ky gt jo"><div class="bz fp l di"><div class="nk la l"/></div></figure><p id="af9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<strong class="jx io">更新</strong>方法中，第9行，我检索数组索引来更新第10行的引用。<br/>在<strong class="jx io">检查</strong>的方法中，目的是改变已完成的状态(第18行)。</p><p id="5573" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后<strong class="jx io">删除</strong>的方法，我们用一个辅助的方法将对象从数组中移除。</p><h1 id="e8dc" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="4ed0" class="pw-post-body-paragraph jv jw in jx b jy lz ka kb kc ma ke kf kg mb ki kj kk mc km kn ko md kq kr ks ig bi translated">我真的很喜欢这个服务，并且很容易创建集成了Supabase服务的应用程序。他们承诺很快会有更多的功能。方法是等待。</p><p id="52a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在我的库中找到<a class="ae ku" href="https://github.com/kheronn/Supabase-Angular" rel="noopener ugc nofollow" target="_blank">完整的项目代码。</a></p><p id="0eec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">谢谢你，回头见。</p><div class="nl nm gp gr nn no"><a href="https://github.com/kheronn/Supabase-Angular" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">kher on/Supabase-Angular</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">TODOs的一个CRUD，使用Angular和Supabase的版本11。【Angular 11和Supabase——fire base的替代方案！？一个…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc jt no"/></div></div></a></div></div></div>    
</body>
</html>
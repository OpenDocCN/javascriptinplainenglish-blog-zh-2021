<html>
<head>
<title>Implement Dark Mode without any Library or Utility</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在没有任何库或实用程序的情况下实现暗模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/implement-dark-mode-without-any-library-or-utility-cf2271af5837?source=collection_archive---------17-----------------------#2021-03-09">https://javascript.plainenglish.io/implement-dark-mode-without-any-library-or-utility-cf2271af5837?source=collection_archive---------17-----------------------#2021-03-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ea80" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">你不会相信它有多简单</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/578e525c6ab22eea861608f9b45e4055.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A3ryZhp2huItyBK28sEFvg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@quincoetzee" rel="noopener ugc nofollow" target="_blank">Quinton Coetzee</a> on <a class="ae ks" href="https://unsplash.com/photos/_fHzsyyDcuQ" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="8e9d" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">介绍</h2><p id="a7bb" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">黑暗模式正在成为当今的一种趋势。当苹果在最新的iOS中采用黑暗模式时，这种趋势就出现了，随后安卓手机也出现了。暗模式是当今网站必须具备的功能，我访问的几乎每个网站都有暗模式功能。但是仍然有些人不知道如何实现正确的方法，所以有时他们更喜欢安装一个新的库。今天，我想向你展示在没有任何库的情况下实现暗模式是多么简单。</p><h2 id="721b" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">深入研究代码示例</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example HTML content</figcaption></figure><p id="9d79" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">这只是一个示例正文html。我在页面顶部放置了一个复选框来切换暗模式功能。我用“<a class="ae ks" href="https://www.w3schools.com/jsref/event_onclick.asp" rel="noopener ugc nofollow" target="_blank"> onClick </a>”作为切换黑暗模式的例子。对于每一个内容，我都给出了这些CSS类名，以帮助您区分并看到结果。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example CSS</figcaption></figure><p id="4dbb" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">魔术和小窍门都出现在这些CSS文件中。您可以看到上面我使用了<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root" rel="noopener ugc nofollow" target="_blank">:根选择器</a>、<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" rel="noopener ugc nofollow" target="_blank"> CSS变量</a>和<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes" rel="noopener ugc nofollow" target="_blank">数据属性</a>。<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/CSS/:root" rel="noopener ugc nofollow" target="_blank">:根选择器</a>匹配文档的根元素。它对于声明全局CSS变量非常有用。HTML5数据属性是HTML5的一个特性，允许我们在DOM上存储额外的信息。</p><p id="0326" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">首先，在:根选择器中，我将所有默认的(灯光模式)背景颜色和文本颜色定义到一个变量中。之后，我还使用数据属性创建了新的CSS选择器。我给的名字是主题，价值是黑暗的。在选择器中，我定义了黑暗模式的所有背景颜色和文本颜色。</p><p id="9379" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">最后，我把所有的文本和背景颜色变量写到CSS类中，我希望当我切换暗模式时，它们会改变。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example Js</figcaption></figure><p id="d8fb" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">最后，在JavaScript代码中，首先，默认情况下，我将“current血红素”变量初始化为“light ”,然后我得到一个复选框，信息和主体DOM，为DOM操作做准备。</p><p id="b3d8" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">当您切换复选框DOM时，会调用“更改主题”功能。基本上，这个函数用于切换“当前主题”并设置正文标签中的数据属性。切换后，身体应该如下所示。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="485b" class="kt ku in mq b gy mu mv l mw mx">&lt;body data-theme="dark"&gt;&lt;/body&gt;</span></pre><p id="795c" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">然后CSS将自动覆盖我们在中定义的默认颜色变量:根到[data-theme="dark"]选择器。</p><h2 id="6486" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">演示示例</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="my mj l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Codepen Demo</figcaption></figure><p id="a4e1" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated"><a class="ae ks" href="https://github.com/hanssagita/native-darkmode-example" rel="noopener ugc nofollow" target="_blank"> Github源代码链接</a></p><h2 id="2f21" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">额外提示</h2><p id="8d34" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">你可以用<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" rel="noopener ugc nofollow" target="_blank">本地存储</a>保存用户偏好，这样当用户第二次访问你的网站时，主题会自动调整到用户最后一次选择的时候。</p><pre class="kd ke kf kg gt mp mq mr ms aw mt bi"><span id="e62c" class="kt ku in mq b gy mu mv l mw mx">// define localStorage key<br/>const localStorageThemeKey = "localStorageThemeKey"</span><span id="080c" class="kt ku in mq b gy mz mv l mw mx">// Getting the currentTheme from localStorage, when the localStorage return undefined will automatically set to light<br/>const getCurrentTheme = <br/>localStorage.getItem(<!-- -->localStorageThemeKey<!-- -->) || "light"</span><span id="54ae" class="kt ku in mq b gy mz mv l mw mx">// Save user input to the localStorage with localStorage key and currentTheme right now<br/>localStorage.setItem(<!-- -->localStorageThemeKey<!-- -->, currentTheme);</span></pre><h2 id="bf5c" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">结论</h2><p id="8d25" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">黑暗模式非常简单，你不需要一个库来实现它。</p><p id="34c7" class="pw-post-body-paragraph lp lq in lr b ls mk jo lu lv ml jr lx lc mm lz ma lg mn mc md lk mo mf mg mh ig bi translated">就这样，如果你觉得这篇文章有帮助，请在评论中告诉我们。也可以在<a class="ae ks" href="https://medium.com/@hanssagita" rel="noopener">中</a>和<a class="ae ks" href="https://www.linkedin.com/in/hans-sagita/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我</p></div></div>    
</body>
</html>
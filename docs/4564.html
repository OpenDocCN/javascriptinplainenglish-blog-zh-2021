<html>
<head>
<title>How to Create GraphQL API using Node.js and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js和Express创建GraphQL API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/graphql-with-node-js-express-js-51f94ad752ad?source=collection_archive---------6-----------------------#2021-09-11">https://javascript.plainenglish.io/graphql-with-node-js-express-js-51f94ad752ad?source=collection_archive---------6-----------------------#2021-09-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2431" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">具有关于Node.js和Express.js的GraphQL的中级知识</h2></div><h2 id="3185" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">简介</strong></h2><p id="bb3f" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">本文的目的是提供关于GraphQL及其在Node.js中的用法的完整见解，并讨论它的显著特性及其一些优点和缺点。</p><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi lr"><img src="../Images/21d3272634c0d880b1f79a0b117c72cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vcl_LjiLlPRlaS6M7onihQ.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">GraphQL’s Magic</figcaption></figure><h2 id="9667" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">graph QL是什么？</strong></h2><p id="5356" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">GraphQL是一种API查询语言，也是一种用现有数据完成这些查询的运行时语言。GraphQL为API中的数据提供了完整且易于理解的描述，使客户能够准确地要求他们需要的东西，使API更容易随时间发展，并支持强大的开发工具。</p><blockquote class="mh mi mj"><p id="7502" class="ky kz mk la b lb ml jo ld le mm jr lg mn mo li lj mp mq ll lm mr ms lo lp lq ig bi translated">GraphQL通常被描述为前端导向的API技术，因为它允许前端开发人员以比以往更简单的方式请求数据。</p></blockquote><p id="f6cc" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">这种查询语言的目标是以本能的和可调整的格式来制定客户应用程序，以描述它们的数据先决条件以及交互。最棒的是，这种语言不依赖于任何特定的数据库管理系统，并且实际上受您当前的数据和编码的支持。</p><h2 id="b46d" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">谁开发的？</strong></h2><p id="179f" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">GraphQL的起源故事可以追溯到行业向移动的转变。当时，脸书的移动战略(即在移动设备上采用HTML5)由于网络使用率高的问题而未能奏效。因此，脸书决定使用本地技术从头开始重建iOS应用程序。</p><p id="0039" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">脸书的<em class="mk">新闻提要</em>在手机上实现的主要问题。这不仅仅是检索一个故事，谁写的，它说了什么，评论列表，以及谁喜欢这个帖子这么简单。每个故事都是相互联系、嵌套和递归的。现有的API并不允许开发人员在移动设备上展示丰富的、类似新闻提要的体验。它们没有层次结构，不允许开发人员选择他们需要的内容，也不具备显示异构提要故事列表的能力。</p><p id="7751" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">2012年，脸书决定他们需要建立一个新的新闻订阅API来构建脸书移动应用。这是GraphQL开始成形的时候，8月中旬，iOS 5.0版的脸书发布了新的GraphQL技术。它允许开发者通过利用其数据获取能力来减少网络使用。在接下来的一年半时间里，GraphQL API的应用范围扩大到了脸书iOS应用的大部分，除了新闻提要。2015年，GraphQL规范与JavaScript中的参考实现一起首次发布。</p><blockquote class="mh mi mj"><p id="31d2" class="ky kz mk la b lb ml jo ld le mm jr lg mn mo li lj mp mq ll lm mr ms lo lp lq ig bi translated">GraphQL规范于2015年开源。它现在由GraphQL基金会监管。</p></blockquote><h2 id="d987" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">graph QL和REST的区别</strong></h2><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="gh gi mt"><img src="../Images/f2e1f14689427a6272df094883c5c3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dtWj2dRrC4QQxsDzmmb-yw.png"/></div></div><figcaption class="md me gj gh gi mf mg bd b be z dk">API calls differences between GraphQL and REST.</figcaption></figure><figure class="ls lt lu lv gt lw gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/6c40af454b6fd8d4b418a1c07bc1e889.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*QoTGdkVIkybjV14RVA9QDQ.png"/></div><figcaption class="md me gj gh gi mf mg bd b be z dk">Difference between GraphQL and REST.</figcaption></figure><h2 id="5f5d" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">让我们使用GraphQL </strong>创建一个简单的“课程API”</h2><p id="9210" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated"><strong class="la io"> 1。首先让我们创建一个Node.js项目并安装一些包。</strong></p><pre class="ls lt lu lv gt mv mw mx my aw mz bi"><span id="806a" class="kc kd in mw b gy na nb l nc nd">npm init -y</span><span id="0fc4" class="kc kd in mw b gy ne nb l nc nd">npm install express express-graphql graphql nanoid</span></pre><blockquote class="mh mi mj"><p id="6000" class="ky kz mk la b lb ml jo ld le mm jr lg mn mo li lj mp mq ll lm mr ms lo lp lq ig bi translated">我们使用nanoid来生成随机id，因为我们不使用任何数据库。</p></blockquote><p id="c5ff" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io"> 2。安装basic Express服务器。</strong></p><p id="0408" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">索引. js</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="08aa" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io"> 3。创建schema.js并定义查询类型和变异。</strong></p><p id="4922" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">schema.js</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="f3ba" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">如您所见，您可以创建不同类型的结构，GraphQL提供了更多的类型。对于突变，我们使用输入。</p><p id="9b8d" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">这里的<code class="fe nh ni nj mw b">!</code>是用来使那个特定的字段在突变时成为必需的。</p><p id="6f1a" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io"> 4。为查询和变异创建resolver.js。</strong></p><p id="83fe" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">resolver.js</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="bf05" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io"> 5。返回index.js并进行get '/graphql '路由。</strong></p><p id="0a39" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">索引. js</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="1481" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io"> 6。让我们从API中获取数据，看看GraphQL的魔力。</strong></p><p id="4772" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">访问您的localhost:port，您将看到GraphQL提供的Graphiql GUI。</p><p id="5b07" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">在这里，您可以通过变异插入数据，并通过查询获取数据。</p><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><figure class="ls lt lu lv gt lw"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="0dcf" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">就这样，您已经创建了您的第一个GraphQL API😁。</p><h2 id="8d66" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">graph QL的缺点</strong></h2><ul class=""><li id="ac81" class="nk nl in la b lb lc le lf kl nm kp nn kt no lq np nq nr ns bi translated">GraphQL为熟悉REST APIs的开发人员提供了一条学习曲线。</li><li id="5200" class="nk nl in la b lb nt le nu kl nv kp nw kt nx lq np nq nr ns bi translated">GraphQL将大部分数据查询工作转移到了服务器端，这增加了服务器开发人员的复杂性。</li><li id="405a" class="nk nl in la b lb nt le nu kl nv kp nw kt nx lq np nq nr ns bi translated">根据实现方式的不同，GraphQL可能需要与REST APIs不同的API管理策略，尤其是在考虑速率限制和定价时。</li><li id="d7f2" class="nk nl in la b lb nt le nu kl nv kp nw kt nx lq np nq nr ns bi translated">缓存比REST更复杂。</li><li id="c2aa" class="nk nl in la b lb nt le nu kl nv kp nw kt nx lq np nq nr ns bi translated">API维护人员还有一项额外的任务，就是编写可维护的GraphQL模式。</li></ul><h2 id="d168" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">结论</strong></h2><p id="14cf" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">尽管GraphQL解决了许多问题，但它仍然存在缺陷和不足。例如，验证或策略以及缓存只是其中的几个例子。因为它本质上是不自信的，它不会指导用户如何应用这些层。除此之外，后端服务器和您的客户端之间的非具体层的存在可能会非常令人不安。</p><p id="3b9b" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">但好消息是，你可以在一个项目中同时使用REST和GraphQL，下面给出的checkout链接可以帮助你在这个方向上做进一步的学习。</p><p id="8122" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">许多开发人员对使用Apollo的GraphQL给出了积极的评价，所以也来看看这个吧。</p><h2 id="5f69" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">进一步了解的一些有用链接</strong></h2><p id="05d5" class="pw-post-body-paragraph ky kz in la b lb lc jo ld le lf jr lg kl lh li lj kp lk ll lm kt ln lo lp lq ig bi translated">GraphQL</p><div class="ny nz gp gr oa ob"><a href="https://graphql.org/learn/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">GraphQL简介</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">一种用于API的查询语言——graph QL提供了API中数据的完整描述，为客户提供了…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">graphql.org</p></div></div><div class="ok l"><div class="ol l om on oo ok op mb ob"/></div></div></a></div><p id="c149" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">GraphQL和REST在一起。</p><div class="ny nz gp gr oa ob"><a href="https://medium.com/swlh/graphql-api-or-rest-api-why-not-have-both-c4171e68900a" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">GraphQL API还是REST API？为什么不两者兼得呢？</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">GraphQL2REST:从现有的GraphQL API自动生成RESTful API</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op mb ob"/></div></div></a></div><p id="2562" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">查询、变异和订阅。</p><div class="ny nz gp gr oa ob"><a href="https://graphql.org/learn/queries/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">查询和突变</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">一种用于API的查询语言——graph QL提供了API中数据的完整描述，为客户提供了…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">graphql.org</p></div></div><div class="ok l"><div class="or l om on oo ok op mb ob"/></div></div></a></div><p id="3148" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">教程项目GitHub资源库。</p><div class="ny nz gp gr oa ob"><a href="https://github.com/JAYDIPSINH27/GraphQL_BasicCourseApi" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">GitHub-jaydipsinh 27/GraphQL _ Basic Course Api:使用graph QL、Nodejs和…</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">使用GraphQL、Nodejs和Expressjs创建了基础课程Api-GitHub-jaydipsinh 27/graph QL _ BasicCourseApi:创建了…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">github.com</p></div></div><div class="ok l"><div class="os l om on oo ok op mb ob"/></div></div></a></div><p id="3a10" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated">阿波罗的GraphQL。</p><div class="ny nz gp gr oa ob"><a href="https://www.apollographql.com/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd io gy z fp og fr fs oh fu fw im bi translated">阿波罗图表</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">Apollo数据图平台——将API、微服务和数据库统一到一个数据图中，您可以使用GraphQL进行查询</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">www.apollographql.com</p></div></div><div class="ok l"><div class="ot l om on oo ok op mb ob"/></div></div></a></div><p id="22c0" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><strong class="la io">创作人:</strong><a class="ou ov ep" href="https://medium.com/u/da94ce2aea94?source=post_page-----51f94ad752ad--------------------------------" rel="noopener" target="_blank"/><a class="ou ov ep" href="https://medium.com/u/fe629f884f0?source=post_page-----51f94ad752ad--------------------------------" rel="noopener" target="_blank">马吉夫·阿明</a><a class="ou ov ep" href="https://medium.com/u/8bd2a16d04d6?source=post_page-----51f94ad752ad--------------------------------" rel="noopener" target="_blank">巴提克·苏达尼</a><a class="ou ov ep" href="https://medium.com/u/281dabc361c3?source=post_page-----51f94ad752ad--------------------------------" rel="noopener" target="_blank">卡兰戈斯瓦米</a><a class="ou ov ep" href="https://medium.com/u/c09f44b89eac?source=post_page-----51f94ad752ad--------------------------------" rel="noopener" target="_blank">布瓦·萨希尔</a></p><p id="4414" class="pw-post-body-paragraph ky kz in la b lb ml jo ld le mm jr lg kl mo li lj kp mq ll lm kt ms lo lp lq ig bi translated"><em class="mk">更多内容请看</em><a class="ae ow" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="la io"><em class="mk">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
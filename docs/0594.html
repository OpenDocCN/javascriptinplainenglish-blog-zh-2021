<html>
<head>
<title>Adding Graphics to a Vue App with D3 — Transitions and Bar Charts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用D3向Vue应用添加图形—过渡和条形图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-graphics-to-a-vue-app-with-d3-transitions-and-bar-charts-7b7b9a2ac50b?source=collection_archive---------8-----------------------#2021-02-05">https://javascript.plainenglish.io/adding-graphics-to-a-vue-app-with-d3-transitions-and-bar-charts-7b7b9a2ac50b?source=collection_archive---------8-----------------------#2021-02-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/302c5f3d5530e7e6b89a274fdd838350.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FJt90vNiRzMnQpwe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@lukechesser?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Luke Chesser</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="37db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3让我们可以轻松地向前端web应用添加图形。</p><p id="461d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue是一个流行的前端web框架。</p><p id="55a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。在本文中，我们将了解如何使用D3为Vue应用添加图形。</p><h1 id="7c4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">过渡</h1><p id="5dac" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用D3来应用过渡。</p><p id="79ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="fbe1" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="ac78" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import * as d3 from "d3";<br/>import Vue from "vue";</span><span id="afea" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  mounted() {<br/>    Vue.nextTick(() =&gt; {<br/>      const t = d3.transition().duration(2000);<br/>      d3.select("body").transition(t).style("background-color", "lightblue");<br/>    });<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="4557" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">调用<code class="fe mt mu mv mj b">d3.transition</code>来创建我们的转换对象。</p><p id="dedb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">duration</code>方法设置它的持续时间。</p><p id="90ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2000以毫秒为单位。</p><p id="e0b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">t</code>方法调用<code class="fe mt mu mv mj b">transition</code>方法，在2秒内将<code class="fe mt mu mv mj b">body</code>的背景颜色设置为<code class="fe mt mu mv mj b">lightblue</code>。</p><h1 id="fba3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">动画</h1><p id="30a3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用D3添加动画。</p><p id="fdac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2de5" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;h3&gt;hello world&lt;/h3&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9f3a" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import * as d3 from "d3";<br/>import Vue from "vue";</span><span id="ac87" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  mounted() {<br/>    Vue.nextTick(() =&gt; {<br/>      d3.selectAll("h3")<br/>        .transition()<br/>        .style("font-size", "28px")<br/>        .delay(2000)<br/>        .duration(2000);<br/>    });<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="a7aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了<code class="fe mt mu mv mj b">h3</code>,然后在2秒钟后使字体大小为28px。</p><p id="bd6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在2秒钟内将大小更改为28px。</p><h1 id="0609" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">绘制图表</h1><p id="80e1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">D3对于创建图表很有用。</p><p id="300a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它来创建条形图，圆形图，饼图，甜甜圈，图表等。</p><h1 id="a3dd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">条形图</h1><p id="e096" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用D3创建条形图。</p><p id="19b6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d96e" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div id="app"&gt;<br/>    &lt;div id="svgcontainer"&gt;&lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="b6c1" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>import * as d3 from "d3";<br/>import Vue from "vue";</span><span id="16c1" class="mn lc iq mj b gy ms mp l mq mr">export default {<br/>  name: "App",<br/>  mounted() {<br/>    Vue.nextTick(() =&gt; {<br/>      const data = [13, 6, 11, 20, 13];</span><span id="e451" class="mn lc iq mj b gy ms mp l mq mr">      const width = 500;<br/>      const scaleFactor = 20;<br/>      const barHeight = 30;</span><span id="ff27" class="mn lc iq mj b gy ms mp l mq mr">      const graph = d3<br/>        .select("#svgcontainer")<br/>        .append("svg")<br/>        .attr("width", width)<br/>        .attr("height", barHeight * data.length);</span><span id="0a26" class="mn lc iq mj b gy ms mp l mq mr">      const bar = graph<br/>        .selectAll("g")<br/>        .data(data)<br/>        .enter()<br/>        .append("g")<br/>        .attr("transform", (d, i) =&gt; {<br/>          return "translate(0," + i * barHeight + ")";<br/>        });<br/>      bar<br/>        .append("rect")<br/>        .attr("width", (d) =&gt; {<br/>          return d * scaleFactor;<br/>        })<br/>        .attr("height", barHeight - 1)<br/>        .attr("fill", "green");</span><span id="f5f5" class="mn lc iq mj b gy ms mp l mq mr">      bar<br/>        .append("text")<br/>        .attr("x", (d) =&gt; {<br/>          return d * scaleFactor;<br/>        })<br/>        .attr("y", barHeight / 2)<br/>        .attr("dy", ".35em")<br/>        .text((d) =&gt; {<br/>          return d;<br/>        })<br/>        .attr("fill", "red");<br/>    });<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="295e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在前几行中设置了条形图的常数和尺寸。</p><p id="0545" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用下面的代码创建<code class="fe mt mu mv mj b">g</code>元素:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="59eb" class="mn lc iq mj b gy mo mp l mq mr">const bar = graph<br/>  .selectAll("g")<br/>  .data(data)<br/>  .enter()<br/>  .append("g")<br/>  .attr("transform", (d, i) =&gt; {<br/>    return "translate(0," + i * barHeight + ")";<br/>  });</span></pre><p id="0aeb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安置酒吧。</p><p id="2448" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们使用以下内容为条形图创建矩形:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6a32" class="mn lc iq mj b gy mo mp l mq mr">bar<br/>  .append("rect")<br/>  .attr("width", (d) =&gt; {<br/>    return d * scaleFactor;<br/>  })<br/>  .attr("height", barHeight - 1)<br/>  .attr("fill", "green");</span></pre><p id="e0a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">d</code>拥有<code class="fe mt mu mv mj b">data</code>数组中的数字。</p><p id="ad8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将它乘以<code class="fe mt mu mv mj b">scaleFactor</code>得到条形的宽度。</p><p id="1e5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">height</code>设置为<code class="fe mt mu mv mj b">barHeight — 1</code>来设置高度，并在条形之间添加一个间隙。</p><p id="2bd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe mt mu mv mj b">'fill'</code>被设置为<code class="fe mt mu mv mj b">'green'</code>。</p><p id="cccf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们在条形的右侧添加:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0c65" class="mn lc iq mj b gy mo mp l mq mr">bar<br/>  .append("text")<br/>  .attr("x", (d) =&gt; {<br/>    return d * scaleFactor;<br/>  })<br/>  .attr("y", barHeight / 2)<br/>  .attr("dy", ".35em")<br/>  .text((d) =&gt; {<br/>    return d;<br/>  })<br/>  .attr("fill", "red");</span></pre><p id="cc61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">'x'</code>和<code class="fe mt mu mv mj b">'y'</code>属性设置文本的位置。</p><p id="4427" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">x</code>在杠后，<code class="fe mt mu mv mj b">y</code>是<code class="fe mt mu mv mj b">barHeight / 2</code>。</p><p id="9257" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还必须移动<code class="fe mt mu mv mj b">y</code>坐标，使文本与条对齐。</p><p id="9295" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们将<code class="fe mt mu mv mj b">dy</code>属性设置为<code class="fe mt mu mv mj b">.35em</code>。</p><p id="6573" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们返回数字并用<code class="fe mt mu mv mj b">text</code>方法将其设置为文本。</p><p id="4cbb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">attr</code>，将<code class="fe mt mu mv mj b">'fill'</code>设置为<code class="fe mt mu mv mj b">'red'</code>。</p><h1 id="f844" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="dd7d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在我们的Vue应用程序中添加带有D3的过渡和条形图。</p><p id="0d02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
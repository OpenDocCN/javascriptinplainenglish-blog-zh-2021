<html>
<head>
<title>Going Serverless with MongoDB Realm: React Version</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MongoDB领域无服务器化:React版本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/going-serverless-with-mongodb-realm-react-js-version-44b095832d59?source=collection_archive---------10-----------------------#2021-11-23">https://javascript.plainenglish.io/going-serverless-with-mongodb-realm-react-js-version-44b095832d59?source=collection_archive---------10-----------------------#2021-11-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/db4d22325f0d55b7c00a40f8237b19a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96R9lyVUgH9e1eMfSd7Sfw.png"/></div></div></figure><p id="a72f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无服务器架构是一种无需管理基础设施即可运行和构建应用程序和服务的模式。它涉及在服务器上运行的应用程序和服务，但是所有的服务器管理都是由云提供商完成的。</p><p id="ec9d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这篇文章将讨论使用<a class="ae kt" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>、<a class="ae kt" href="https://www.mongodb.com/realm" rel="noopener ugc nofollow" target="_blank"> MongoDB Realm </a>和<a class="ae kt" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>构建一个全栈用户管理应用程序。在本教程的最后，我们将学习如何在MongoDB上创建一个数据库，使用MongoDB Realm将无服务器功能作为我们的端点，并在React应用程序中使用端点。</p><p id="4a28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">MongoDB Realm是一个开发平台，旨在构建移动、web、桌面和物联网应用程序。它提供数据同步、无服务器功能、触发器、用户认证等服务。我们可以使用以下任何一种方法在MongoDB领域上构建和维护应用程序:</p><ul class=""><li id="1da4" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated"><a class="ae kt" href="https://docs.mongodb.com/realm/manage-apps/deploy/manual/deploy-ui/#std-label-deploy-ui" rel="noopener ugc nofollow" target="_blank"> Realm UI </a>:创建和维护应用程序的基于浏览器的选项</li><li id="1bb8" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://docs.mongodb.com/realm/manage-apps/deploy/manual/deploy-cli/#std-label-deploy-cli" rel="noopener ugc nofollow" target="_blank"> Realm CLI </a>:基于CLI的选项，用于定义和部署应用程序</li><li id="9420" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://docs.mongodb.com/realm/manage-apps/deploy/automated/deploy-automatically-with-github/#std-label-deploy-github" rel="noopener ugc nofollow" target="_blank"> Github部署</a>:使用GitHub上的配置文件从GitHub仓库部署应用程序</li><li id="3b5c" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://docs.mongodb.com/realm/admin/api/v3/#std-label-admin-api" rel="noopener ugc nofollow" target="_blank"> Admin API </a>:管理应用程序的基于HTTP的请求。</li></ul><p id="20dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这篇文章中，我们将使用<a class="ae kt" href="https://docs.mongodb.com/realm/manage-apps/deploy/manual/deploy-ui/#std-label-deploy-ui" rel="noopener ugc nofollow" target="_blank"> Realm UI </a>来构建我们的应用程序。</p><p id="0d39" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以通过克隆这个存储库(<strong class="jx io">主分支</strong> ) <a class="ae kt" href="https://github.com/Mr-Malomz/react-realm" rel="noopener ugc nofollow" target="_blank">这里</a>来进行编码。如果您喜欢查看完整的代码，请查看同一个存储库的<strong class="jx io"> dev </strong>分支。</p><p id="0408" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我们将只关注实现。已经用<a class="ae kt" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a>设置了项目UI。</p><p id="6ef7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以在这里查看Vue.js版本<a class="ae kt" href="https://medium.com/javascript-in-plain-english/going-serverless-with-mongodb-realm-vue-js-version-c0f7afae8719" rel="noopener">。</a></p><h1 id="4b6a" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">先决条件</h1><p id="bccc" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">这篇文章中的以下步骤需要JavaScript和React经验。不要求有使用TypeScript的经验，但是有这样的经验是很好的。</p><p id="ad2b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还需要一个<a class="ae kt" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB帐户</a>来托管数据库并创建无服务器功能。<a class="ae kt" href="https://www.mongodb.com/cloud/atlas/register" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">报名</strong> </a> <strong class="jx io">完全免费</strong>。</p><h1 id="adfe" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">让我们编码</h1><h2 id="820c" class="ml lj in bd lk mm mn dn lo mo mp dp ls kg mq mr lw kk ms mt ma ko mu mv me mw bi translated">运行项目</h2><p id="ccdc" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">要开始，我们需要导航到项目位置，打开我们的终端并安装项目依赖项，如下所示:</p><p id="f590" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b">npm install</code></p><p id="1344" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，我们可以使用下面的命令启动开发服务器:</p><p id="bbe1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b">npm start</code></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/85aff3028543f6d48510da2b18e30d50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*906thzBN0E_9w50L.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/96aaed6a5e9fe85fb014045d9f84a16f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JpqoVDW8E1wEc2CT.png"/></div></div></figure><h1 id="b0eb" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">设置MongoDB</h1><p id="f7c6" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">首先，我们需要登录或注册我们的<a class="ae kt" href="http://" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>账户，并遵循适用于我们的选项:</p><p id="2e72" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">对于新账户(注册)<br/> </strong>首先，我们需要回答几个问题来帮助MongoDB帮助设置我们的账户。然后点击<strong class="jx io">完成。</strong></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/1ed5058ad6e26e486446c45524ef21b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5gjQYGVo1MEZJMVV.png"/></div></div></figure><p id="a640" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择<strong class="jx io">共享</strong>作为数据库类型。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/8c75d1c846d0ed442b93960ae1252253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WI6iCRxfTr6tk3uH.png"/></div></div></figure><p id="c3e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击<strong class="jx io">创建</strong>来设置集群。这可能需要一些时间来设置。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/6abbac3727d586da24eb324e7fe48a14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZAyOO1S0rj1x-xfx.png"/></div></div></figure><p id="977f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要通过输入<strong class="jx io">用户名</strong>、<strong class="jx io">密码</strong>来创建一个从外部访问数据库的用户，然后点击<strong class="jx io">创建用户</strong>。我们还需要添加我们的IP地址，以便通过点击<strong class="jx io">添加我当前的IP地址</strong>按钮安全地连接到数据库。然后点击<strong class="jx io">完成并关闭</strong>保存更改。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/5dc38540611e5e6ed4eec885c6a9a920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yxVyBSEl0NGJpyL-.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/e7cbbaaa856f31ee48c680f76f738ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NfkAVvFJ-QmOQSS1.png"/></div></div></figure><p id="18db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">保存更改后，我们应该会看到一个数据库部署屏幕，如下所示:</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/c6edbe5516831896841cb4f22bcc3473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sTWDPSRTFnjqBUFi.png"/></div></div></figure><p id="0232" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">对于现有账户(登录)<br/> </strong>点击项目下拉菜单，点击<strong class="jx io">新建项目</strong>按钮。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/c88ea066ddca5d4741fee699f4e09f5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DE3dxDf0LxgtphqW.png"/></div></div></figure><p id="1802" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">输入<code class="fe mx my mz na b">reactRealm</code>作为项目名称，点击<strong class="jx io">下一个</strong>然后点击<strong class="jx io">创建项目</strong></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/597f47b592e97fd508ff1c33b3be7872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UGtOUvfS6bJSXqSK.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/9921ec4b85493c31651d0162757ece86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5yjxbyAcaYTDBXsy.png"/></div></div></figure><p id="fedb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击<strong class="jx io">建立数据库</strong></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/ac320139fa7ca2157463c50e62310770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*EdnvWhgbRFyjzoEX.png"/></div></div></figure><p id="13d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择<strong class="jx io">共享</strong>作为数据库类型。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/3689a935b29360e40bdce67771f97e95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3I_ecQeLETBjebI0.png"/></div></div></figure><p id="25dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击<strong class="jx io">创建</strong>来设置集群。这可能需要一些时间来设置。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/e0968b7a901e8c0f34fd10e46bf06e40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J4mSkql-KZ-5QDnY.png"/></div></div></figure><p id="8c58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要通过输入<strong class="jx io">用户名</strong>、<strong class="jx io">密码</strong>，然后点击<strong class="jx io">创建用户</strong>，来创建一个从外部访问数据库的用户。我们还需要添加我们的IP地址，以便通过点击<strong class="jx io">添加我当前的IP地址</strong>按钮安全地连接到数据库。然后点击<strong class="jx io">完成并关闭</strong>保存更改。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/96c8fa158b8bd0faa8c5066882778ac9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UGFvW2vMCPY10RrY.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/ec6010ebb7890fb9569c2258afd07388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4dRz3IU_UjmX28vw.png"/></div></div></figure><p id="c43f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">保存更改后，我们应该会看到一个数据库部署屏幕，如下所示:</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/356788021499dba7d2ea15c1deab6786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vRdDiQpkoPI2oiEV.png"/></div></div></figure><h1 id="9e36" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">加载样本数据</h1><p id="7b1b" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">接下来，我们需要用用户的样本数据填充数据库。为此，点击<strong class="jx io">浏览收藏</strong>按钮</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/7b714af780d21aee5983ecdf809523e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kyHrrz9EHXYZauyl.png"/></div></div></figure><p id="bae2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击<strong class="jx io">添加我自己的数据</strong>，输入<code class="fe mx my mz na b">reactRealmDB</code>和<code class="fe mx my mz na b">reactRealmCol</code>作为数据库和集合名称，点击<strong class="jx io">创建</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/e9f260baab89e2ecda8116708d97392b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oaVapOIWwf6eguro.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/c024a59e2fad0376d1fed9a451dfdca9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hrVO7MHLScGPIgYf.png"/></div></div></figure><p id="8e59" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要插入这些样本数据:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="81cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为此，点击<strong class="jx io">插入文件</strong>按钮，填写上面的详细信息并点击<strong class="jx io">插入</strong>进行保存。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/648a81424c0bb7933f09be7ba56a9381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*e83KHcr-oHSYq5er.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/1bfa92963f1e6dbbde5542dcb3b42642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RxlHKbCeZZfVVj1r.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/2ab11cef020abd321fe71921df64a61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2lQZG9TTbqBARda_.png"/></div></div></figure><h1 id="2185" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">创建和配置MongoDB领域应用程序</h1><p id="d390" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">填充数据库后，我们需要创建无服务器函数来对数据库执行创建、读取、更新和删除(CRUD)。为此，选择<strong class="jx io">领域</strong>标签，点击<strong class="jx io">构建你自己的应用</strong>。然后点击<strong class="jx io">创建领域应用</strong>来设置我们的应用。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/00e88a04da98caf217e740ed023923d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*47wR2PUeLnbLlKbx.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/cef59a9a008b6b5ea3a15c1b3c2e1298.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kfbR07sRC5GHoscv.png"/></div></div></figure><p id="ae08" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">MongoDB Realm还附带了模板，我们可以使用这些模板快速构建我们的应用程序。对于本教程，我们将从头开始构建。</p><p id="312a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要为我们的函数设置权限和规则。为此，关闭弹出向导点击<strong class="jx io">规则</strong>，选择<strong class="jx io">反应栏</strong>并点击<strong class="jx io">配置集合</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/f1aa4ace0ade8d1ec7342e8dcc6ce4a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*babAi3AzoW7PesDs.png"/></div></div></figure><p id="1b18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">MongoDB Realm的保存和部署完成后，MongoDB Realm将向我们展示一个说明保存和部署概念的小部件。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/a98d0e11c69624106169fd4e77afc2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IdIUuBZDMNr0Rv8Z.png"/></div></div></figure><p id="f849" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当编写一个无服务器功能时，点击<strong class="jx io">保存</strong>创建一个开发草案，我们可以测试和试验。同时，<strong class="jx io"> Deploy </strong>将我们的更改公开给另一个应用程序使用(在我们的例子中是React)。</p><p id="d049" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">点击<strong class="jx io">下一个</strong>，然后<strong class="jx io">拿到</strong>继续。</p><p id="ae93" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要允许<strong class="jx io">读取</strong>和<strong class="jx io">写入</strong>权限，然后<strong class="jx io">保存。</strong></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/d813b06ef31212082603f9e24d7cdd3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5uLcG-zZUijNtPnx.png"/></div></div></figure><p id="02c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，导航到<strong class="jx io">认证</strong>标签，点击<strong class="jx io">允许用户匿名登录</strong>，打开<strong class="jx io">保存草稿</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/8b663b95894a510cfeb8a3404d569d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P2nyk5vNcgmuR8lq.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/06ecb3da1df4df23a2394284d61eca07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NOiHUOOdPRKrzyNF.png"/></div></div></figure><p id="7160" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">MongoDB Realm还附带了几个身份验证选项，我们可以研究一下。对于本教程，我们将使用匿名选项。</p><h1 id="84ae" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">在MongoDB领域上创建无服务器功能</h1><p id="1d5f" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated"><strong class="jx io">获取所有用户无服务器函数<br/> </strong>配置完成后，我们现在可以创建一个返回用户列表的无服务器函数。为此，导航至<strong class="jx io">功能</strong>选项卡，点击<strong class="jx io">创建新功能</strong>，并输入<code class="fe mx my mz na b">getAllUsers</code>作为功能名称</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/0963d4ff088c95f542c3af9a3c800ce7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Aen82TXi-0HegKOa.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/12f1e677be8f64af82de8cec6e76e90b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*esqbokvgwolM4Lyv.png"/></div></div></figure><p id="60e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，选择<strong class="jx io">功能编辑器</strong>选项卡，将功能修改如下:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="9db5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="4a2a" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">创建一个集合变量来访问<code class="fe mx my mz na b">reactRealmDB</code>数据库和<code class="fe mx my mz na b">reactRealmCol</code>集合</li><li id="c641" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">返回集合中的文档列表。</li></ul><p id="545b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们可以通过点击<strong class="jx io">运行</strong>按钮查看用户列表来测试我们的功能。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/a2439d9b05afe0fad1ea88709fe07d8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TjlJwgHR79vKeDvv.png"/></div></div></figure><p id="4046" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们需要复制任何返回的用户的<code class="fe mx my mz na b">_id</code>并保存在某个地方；我们下一个活动需要它。然后点击<strong class="jx io">保存草稿</strong>为我们的功能创建一个部署草稿。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/20802e0b6681128cd5f8d32496656775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VKsolsQAN6FmKDvF.png"/></div></div></figure><p id="c5ea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">获取用户无服务器功能<br/> </strong>为此，点击<strong class="jx io">功能</strong>标签，点击<strong class="jx io">创建新功能，</strong>并输入<code class="fe mx my mz na b">getSingleUser</code>作为功能名称</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/42dcba9c7fc3d928eec001a115ad6962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1UXGD0c_FeQte5Sg.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/b7062aae836d658bc43e6db04838e334.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*o5Xh5_PvWLbUIAml.png"/></div></div></figure><p id="c77c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，选择<strong class="jx io">功能编辑器</strong>选项卡，将功能修改如下:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="efcb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="67e5" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">创建一个集合变量来访问<code class="fe mx my mz na b">reactRealmDB</code>数据库和<code class="fe mx my mz na b">reactRealmCol</code>集合</li><li id="0e62" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">通过按_id查找返回单个用户。因为MongoDB将文档保存在<a class="ae kt" href="https://en.wikipedia.org/wiki/BSON#:~:text=BSON%20(%2F%CB%88bi%CB%90s,a%20computer%20data%20interchange%20format.&amp;text=It%20is%20a%20binary%20form,originated%20in%202009%20at%20MongoDB." rel="noopener ugc nofollow" target="_blank"> BSON </a>中，所以我们需要使用<code class="fe mx my mz na b">BSON.ObjectId</code>将<code class="fe mx my mz na b">arg</code>解析为BSON。</li></ul><p id="6082" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了测试我们的功能，导航到<strong class="jx io">控制台</strong>选项卡，用我们之前复制的用户<code class="fe mx my mz na b">_id</code>替换<strong class="jx io">导出</strong>功能中的<code class="fe mx my mz na b">Hello world!</code>，然后点击<strong class="jx io">运行。</strong></p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/16488f448da2562cf5da9886b26553d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FRNgZYYlU4Gm1e3m.png"/></div></div></figure><p id="1716" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们需要点击<strong class="jx io">保存草稿</strong>按钮来保存我们的功能。</p><p id="0e81" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">编辑用户无服务器功能<br/> </strong>为此，我们需要遵循与上面相同的步骤。</p><p id="1480" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，点击<strong class="jx io">功能</strong>选项卡，点击<strong class="jx io">创建新功能，</strong>并输入<code class="fe mx my mz na b">editUser</code>作为功能名称。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/d3cd600abc43e9d21acd606809eed386.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CUmbqrD_pynCNxx0.png"/></div></div></figure><p id="9d6e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，选择<strong class="jx io">功能编辑器</strong>选项卡，将功能修改如下:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e130" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="44e4" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">修改函数以接受<code class="fe mx my mz na b">id</code>、<code class="fe mx my mz na b">name</code>、<code class="fe mx my mz na b">location</code>和<code class="fe mx my mz na b">title</code>参数</li><li id="3ce2" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个<code class="fe mx my mz na b">collection</code>变量来访问<code class="fe mx my mz na b">reactRealmDB</code>数据库和<code class="fe mx my mz na b">reactRealmCol</code>集合</li><li id="53ea" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个通过<code class="fe mx my mz na b">_id</code>找到文档的更新变量，更新集合字段并设置一个<code class="fe mx my mz na b">returnNewDocument</code>标志来返回更新后的文档。</li></ul><p id="3e13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们可以通过导航到控制台选项卡来测试我们的函数，用必需的参数(<strong class="jx io"> _id、名称、位置和标题</strong>)替换<strong class="jx io">导出</strong>函数中的<code class="fe mx my mz na b">Hello world!</code>，单击<strong class="jx io">运行</strong>，然后<strong class="jx io">保存草稿</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/fd95d4b9e8ceba3578048cb225586328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-gAZhkq5e6fFJ56B.png"/></div></div></figure><p id="54e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">创建一个用户无服务器功能<br/> </strong>要做到这一点，我们需要遵循与前面相同的步骤。</p><p id="78fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，点击<strong class="jx io">功能</strong>标签，点击<strong class="jx io">创建新功能，</strong>并输入<code class="fe mx my mz na b">createUser</code>作为功能名称。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/fb6465354389d7da192988b491fe4f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5hfzFsPMMUWvwNDb.png"/></div></div></figure><p id="08a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，选择<strong class="jx io">功能编辑器</strong>选项卡，将功能修改如下:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="5730" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="ee75" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">修改函数以接受<code class="fe mx my mz na b">name</code>、<code class="fe mx my mz na b">location</code>和<code class="fe mx my mz na b">title</code>参数。</li><li id="5bc6" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个<code class="fe mx my mz na b">collection</code>变量来访问<code class="fe mx my mz na b">reactRealmDB</code>数据库和<code class="fe mx my mz na b">reactRealmCol</code>集合。</li><li id="23a7" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">通过插入参数并返回用户来创建新用户。</li></ul><p id="320e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们可以通过导航到控制台选项卡来测试我们的函数，用必需的参数(<strong class="jx io">名称、位置和标题</strong>)替换<strong class="jx io">导出</strong>函数中的<code class="fe mx my mz na b">Hello world!</code>，单击<strong class="jx io">运行</strong>，然后<strong class="jx io">保存草稿</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/322633319631e832faba19524cff89dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zGitjqqhJz2hqkG8.png"/></div></div></figure><p id="e7f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">删除一个用户无服务器功能<br/> </strong>要做到这一点，我们需要遵循和以前一样的步骤。</p><p id="fbc8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，点击<strong class="jx io">功能</strong>标签，点击<strong class="jx io">创建新功能，</strong>并输入<code class="fe mx my mz na b">deleteUser</code>作为功能名称。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/115243cd49e1f4797eb40a43652cbfe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kkGNUzhoB5sgaT2P.png"/></div></div></figure><p id="61b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，选择<strong class="jx io">功能编辑器</strong>选项卡，将功能修改如下:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="fc7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="712e" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">修改函数以接受参数。</li><li id="0b80" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个<code class="fe mx my mz na b">collection</code>变量来访问<code class="fe mx my mz na b">reactRealmDB</code>数据库和<code class="fe mx my mz na b">reactRealmCol</code>集合。</li><li id="1b61" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个<code class="fe mx my mz na b">deleteUser</code>变量，由<code class="fe mx my mz na b">_id</code>删除。</li></ul><p id="ce0f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们可以通过导航到控制台选项卡来测试我们的函数，用所需的参数替换<strong class="jx io">导出</strong>函数中的<code class="fe mx my mz na b">Hello world!</code>，单击<strong class="jx io">运行</strong>，然后<strong class="jx io">保存草稿</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/79c1ca99713f3ec52779b153a2daf2b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SLyDi5PKi3OomzjG.png"/></div></div></figure><h1 id="9075" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">部署无服务器功能</h1><p id="d53f" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">要开始在我们的应用程序中使用无服务器功能，我们需要部署它们。为此，点击<strong class="jx io">审阅草稿&amp;部署</strong>按钮，向下滚动，然后点击<strong class="jx io">部署</strong>。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/e3fda00cb078f950309ae17b104c8fbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LzMm424M3yZAN0CM.png"/></div></div></figure><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/0e46b3a54f1fe61942c2419661789623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lhzcsHJRWMFjqHqU.png"/></div></div></figure><p id="2844" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们应该得到一个提示，显示我们的部署状态。</p><h1 id="d081" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">终于！与React集成</h1><p id="7fb4" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">要将MongoDB领域集成到我们的应用程序中，我们需要安装以下依赖项:</p><p id="3c48" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b">npm i realm-web</code></p><p id="5e7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b">realm-web</code>是一个<a class="ae kt" href="https://github.com/realm/realm-js/tree/master/packages/realm-web#readme" rel="noopener ugc nofollow" target="_blank">库</a>，用于从web浏览器访问MongoDB领域。</p><p id="fef1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">设置一个环境变量<br/> </strong>首先，我们需要在项目根目录下创建一个<code class="fe mx my mz na b">.env</code>文件，在这个文件中，添加下面的代码片段:</p><p id="7735" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe mx my mz na b">REACT_APP_REALM_APP_ID=&lt;your-realm-app-id&gt;</code></p><p id="bb1d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要获取我们的<strong class="jx io">领域应用ID </strong>，我们需要点击复制图标，如下所示:</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/29277f9ed7e0fd912e0a4ea47d222fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2cQqF3WgZjgDlG8X.png"/></div></div></figure><p id="5cc6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">设置MongoDB Realm <br/> </strong>接下来，我们需要在<code class="fe mx my mz na b">src</code>文件夹中创建一个<code class="fe mx my mz na b">utils</code>文件夹，在这个文件夹中，创建一个<code class="fe mx my mz na b">mongo.client.ts</code>文件并添加下面的代码片段:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="d41c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="a63a" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">导入所需的依赖项。</li><li id="b923" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个变量来存储<strong class="jx io">领域应用ID </strong>。</li><li id="6495" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建并导出MongoDB领域的实例，并传递应用程序ID。REALM_APP_ID前面的bang <code class="fe mx my mz na b">!</code>告诉编译器放松非空约束错误(意味着参数不能为空或未定义)</li><li id="1c75" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建并导出我们将用于此应用的凭据类型。我们在前面配置了这个身份验证选项。</li></ul><p id="2188" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">获取所有用户<br/> </strong>要获取所有用户，我们需要创建一个接口来描述响应属性。为此，我们需要在<code class="fe mx my mz na b">src</code>文件夹中创建一个<code class="fe mx my mz na b">models</code>文件夹，在这个文件夹中，创建一个<code class="fe mx my mz na b">user.interface.ts</code>文件，并添加下面的代码片段:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e675" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">PS</strong>:<em class="ni"/><strong class="jx io"><em class="ni">_ id</em></strong><em class="ni">前面的问号告诉TypeScript这个属性是可选的，因为是MongoDB自动生成的。</em></p><p id="0c01" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要用下面的代码片段来修改<code class="fe mx my mz na b">App.tsx</code>:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="20fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="52c9" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">导入<code class="fe mx my mz na b">IUser</code>接口、<code class="fe mx my mz na b">app</code>和<code class="fe mx my mz na b">credentials</code>。</li><li id="c5ec" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建状态变量来管理用户列表。</li><li id="70ca" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">在<code class="fe mx my mz na b">useEffect</code>钩子中创建一个<code class="fe mx my mz na b">getUsers</code>函数，使用导入的<code class="fe mx my mz na b">credentials</code>来验证我们的应用程序，通过访问我们之前创建的<code class="fe mx my mz na b">getAllUsers</code>无服务器函数来获取用户列表，然后更新用户的状态。</li></ul><blockquote class="nj nk nl"><p id="9c33" class="jv jw ni jx b jy jz ka kb kc kd ke kf nm kh ki kj nn kl km kn no kp kq kr ks ig bi translated"><strong class="jx io"> PS </strong>:调用的无服务器函数(<strong class="jx io"> getAllUsers </strong>在我们的例子中)必须与MongoDB领域中定义的相同。</p></blockquote><ul class=""><li id="9c65" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">更新标记以显示用户列表。</li></ul><p id="1bcf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">完成App.tsx </strong></p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="c8e3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">创建用户<br/>我们还需要添加状态作为对<code class="fe mx my mz na b">useEffect</code>钩子的依赖；以便在进行更改时，它会刷新页面并加载最新的用户列表。最后，我们需要用状态函数更新<code class="fe mx my mz na b">Modal</code>组件来更新值。</strong></p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="9396" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> PS: </strong> <em class="ni"> TypeScript会抱怨</em> <code class="fe mx my mz na b"><em class="ni">Modal.tsx</em></code> <em class="ni">组件没有</em><strong class="jx io"><em class="ni">setuser value</em></strong><em class="ni">属性。我们会解决的。</em></p><p id="b8b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，导航到<code class="fe mx my mz na b">components</code>文件夹中的<code class="fe mx my mz na b">Modal.tsx</code>文件，更新界面，并创建一个用户。</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="c475" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="9fe5" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">导入所需的依赖项。</li><li id="4098" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">修改<code class="fe mx my mz na b">handleSubmit</code>函数，使用导入的<code class="fe mx my mz na b">credentials</code>来验证我们的应用程序。通过访问我们之前创建的<code class="fe mx my mz na b">createUser</code>无服务器函数来创建一个用户，传递所需的参数(<strong class="jx io">名称</strong>、<strong class="jx io">位置、</strong>和<strong class="jx io">标题</strong>，然后更新<code class="fe mx my mz na b">userValue</code>和表单状态。</li></ul><p id="bb84" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">编辑用户<br/> </strong>要编辑用户，我们首先要通过创建一个状态变量来管理我们想要编辑的用户的<code class="fe mx my mz na b">_id</code>，从而修改<code class="fe mx my mz na b">App.tsx</code>。我们还更新了<code class="fe mx my mz na b">onClick</code>事件来更新状态变量，并将其作为道具传递给<code class="fe mx my mz na b">Modal</code>组件。</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="f798" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要在点击<strong class="jx io">编辑</strong>按钮时填充表单。为此，打开<code class="fe mx my mz na b">Modal.tsx</code>并更新，如下所示:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="544e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="8280" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">导入所需的依赖项。</li><li id="1872" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">修改界面和道具，加入<code class="fe mx my mz na b">editingId</code></li><li id="3bb9" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">使用<code class="fe mx my mz na b">useEffect</code>有条件地检查它是在编辑还是在创建，使用<code class="fe mx my mz na b">getSingleUser</code>无服务器函数获取所选用户的详细信息，然后更新表单值。<code class="fe mx my mz na b">getSingleUser</code>函数还要求我们使用<code class="fe mx my mz na b">BSON.ObjectID</code>函数将<code class="fe mx my mz na b">editingId</code>转换成字符串。</li><li id="9f4c" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">通过将窗体状态更新为空字符串来清除效果。</li></ul><p id="6ee3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要更新<code class="fe mx my mz na b">handleSubmit</code>函数，通过有条件地检查它是否是更新操作来更新用户的详细信息。接下来，我们需要调用<code class="fe mx my mz na b">editUser</code>无服务器函数并传入所需的参数。最后，更新<code class="fe mx my mz na b">userValue</code>，将表单恢复为默认并关闭模态组件。</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="9539" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">完成Modal.tsx </strong></p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="4bc2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">删除用户<br/> </strong>要删除用户，我们需要通过创建如下所示的<code class="fe mx my mz na b">handleDelete</code>函数来修改<code class="fe mx my mz na b">App.tsx</code>:</p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="8590" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段执行了以下操作:</p><ul class=""><li id="9305" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">导入所需的依赖项。</li><li id="386c" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">创建一个将<code class="fe mx my mz na b">id</code>作为参数的<code class="fe mx my mz na b">handleDelete</code>函数，使用<code class="fe mx my mz na b">credentials</code>验证我们的应用程序。使用<code class="fe mx my mz na b">deleteUser</code>无服务器功能删除选定的用户，并更新<code class="fe mx my mz na b">userValue</code>状态。</li></ul><p id="bd5f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">完成App.tsx </strong></p><figure class="nc nd ne nf gt jo"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="f8fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们可以通过启动开发服务器并执行CRUD操作来测试应用程序。</p><figure class="nc nd ne nf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/f9213fb2ab0ae7e79996802542440559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7wY83mHB0-JQsGFN.png"/></div></div></figure><h1 id="d2c1" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="5749" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">本文讨论了如何在MongoDB上创建数据库，使用MongoDB领域创建和部署无服务器功能，以及在React应用程序中使用端点。</p><p id="e992" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可能会发现这些资源很有帮助:</p><ul class=""><li id="c441" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated"><a class="ae kt" href="https://docs.mongodb.com/realm/" rel="noopener ugc nofollow" target="_blank"> MongoDB领域</a>。</li><li id="093d" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">尾翼</a>。</li><li id="86ae" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://github.com/realm/realm-js" rel="noopener ugc nofollow" target="_blank"> Realm-Web SDK </a>。</li><li id="6718" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://en.wikipedia.org/wiki/Serverless_computing" rel="noopener ugc nofollow" target="_blank">无服务器计算</a>。</li><li id="6c52" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated"><a class="ae kt" href="https://www.mongodb.com/json-and-bson" rel="noopener ugc nofollow" target="_blank"> BSON </a></li></ul><p id="f8e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ni">更多内容看</em> <a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ni">说白了就是</em> </a> <em class="ni">。报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ni">免费周报在这里</em> </a> <em class="ni">。</em></p></div></div>    
</body>
</html>
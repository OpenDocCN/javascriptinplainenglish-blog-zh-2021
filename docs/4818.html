<html>
<head>
<title>How to Integrate Stripe with a React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Stripe与React应用程序集成</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-integrate-stripe-with-a-react-application-27c5a858b7f7?source=collection_archive---------4-----------------------#2021-09-27">https://javascript.plainenglish.io/how-to-integrate-stripe-with-a-react-application-27c5a858b7f7?source=collection_archive---------4-----------------------#2021-09-27</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="60a3" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">为您的企业接受和处理付款从未如此简单！</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/9091c7c97f8382639ad005f10de551b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D4sLcGX7w8pLA0g-YG_Zvg.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://www.pexels.com/@ivan-samkov?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Ivan Samkov</a> from <a class="ae kw" href="https://www.pexels.com/photo/businessman-man-person-people-7620903/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="2c60" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">聪明的人需要聪明的解决方案。并且<a class="ae kw" href="https://stripe.com/en-ca" rel="noopener ugc nofollow" target="_blank"> Stripe </a>是一个智能解决方案，用于接受您的数字产品/服务的付款。</p><p id="024c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将把Stripe与React应用程序集成在一起。为此，我们还需要一个小的快递后端。但是不用担心。我们将从头开始创造一切。</p><p id="6f96" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧。</p><h1 id="7286" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">去拿钥匙！</h1><p id="084a" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">首先，在Stripe上开户。如果你生活在一个受<a class="ae kw" href="https://stripe.com/global" rel="noopener ugc nofollow" target="_blank">支持的国家</a>，这应该很简单。</p><p id="a461" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先，去<a class="ae kw" href="https://stripe.com/docs/keys" rel="noopener ugc nofollow" target="_blank">https://stripe.com/docs/keys</a>那里获取两个API密匙。公的要从<code class="fe mq mr ms mt b">pk</code>开始</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="b0a5" class="my lu ir mt b gz mz na l nb nc">pk_test_somerandomgibberish</span></pre><p id="69d8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你的密钥应该以<code class="fe mq mr ms mt b">sk</code>开头</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="821b" class="my lu ir mt b gz mz na l nb nc">sk_test_somerandomgibberish</span></pre><p id="c0f1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">拿到这两把钥匙，把它们藏在某个地方。</p><blockquote class="nd ne nf"><p id="6342" class="kx ky ng kz b la lb js lc ld le jv lf nh lh li lj ni ll lm ln nj lp lq lr ls ik bi translated">重要:<strong class="kz is">不要暴露你的秘钥！仅使用前端的公钥</strong></p></blockquote><h1 id="b86d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">流程概述</h1><p id="bd22" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">支付过程如下所示</p><p id="c4c9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第一步:</strong>前端对后端进行API调用，生成支付意向。</p><p id="f90b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">步骤2: </strong>然后服务器使用密钥生成一个<code class="fe mq mr ms mt b">client_secret</code>，并返回给前端</p><p id="eb72" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第三步:</strong>用户填写正确的卡信息</p><p id="8a40" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">第四步:</strong>一个特殊的<code class="fe mq mr ms mt b">CardElement</code>将在前端收集信息</p><p id="1c9e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">步骤5: </strong>使用秘密临时密钥，通过条带库进行支付。</p><p id="ce58" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">就是这样！</p><h1 id="be7d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">准备后端</h1><p id="9066" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">我们将从头开始创建一个快速应用程序，但如果你已经有一个运行的后端，将同样工作。</p><p id="d660" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先，转到任意目录并创建一个空文件夹。</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="c2d4" class="my lu ir mt b gz mz na l nb nc">mkdir backend<br/>cd backend<br/>npm init -y</span></pre><p id="3eb5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它会为你创建一个新的<code class="fe mq mr ms mt b">package.json</code>文件。现在我们需要我们的<code class="fe mq mr ms mt b">index.js</code>文件。</p><p id="ba8b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为此，运行以下命令</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="30a5" class="my lu ir mt b gz mz na l nb nc">touch index.js</span></pre><p id="c47f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在安装一些依赖项</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="495f" class="my lu ir mt b gz mz na l nb nc">npm install express cors nodemon stripe</span></pre><p id="cee2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在转到<code class="fe mq mr ms mt b">package.json</code>文件，修改<code class="fe mq mr ms mt b">start</code>脚本，如下所示。它将支持根据变化自动进行重建。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="2ecd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，将以下起始代码添加到该应用程序中</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">index.js</figcaption></figure><p id="22d3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在去终端运行</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="e5c6" class="my lu ir mt b gz mz na l nb nc">npm start</span></pre><p id="decc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您的应用程序应该从端口<code class="fe mq mr ms mt b"><strong class="kz is">3001</strong></code>开始</p><h1 id="12d0" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">准备前端</h1><p id="c228" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">首先，通过运行以下命令创建一个新的react项目</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="ed09" class="my lu ir mt b gz mz na l nb nc">npx create-react-app frontend</span></pre><p id="a9b9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在进入该项目并安装一些依赖项</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="58ed" class="my lu ir mt b gz mz na l nb nc">npm install --save @stripe/react-stripe-js @stripe/stripe-js</span></pre><p id="df32" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在暂时创建一个名为<code class="fe mq mr ms mt b">MyCheckoutForm.js</code>的新组件，并将其留空。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="c91e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们转到我们的<code class="fe mq mr ms mt b">App.js</code>文件并加载初始的<a class="ae kw" href="https://github.com/stripe/stripe-js/blob/master/README.md#readme" rel="noopener ugc nofollow" target="_blank">条带包装器</a>。现在我们的<code class="fe mq mr ms mt b">App.js</code>文件应该是这样的</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">App.jsx</figcaption></figure><p id="0c1c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，让我们创建我们的结帐表单，以实现付款</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">MyCheckoutForm.jsx</figcaption></figure><p id="d277" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，如果您转到终端，通过运行以下命令来运行前端</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="17c3" class="my lu ir mt b gz mz na l nb nc">npm start </span></pre><p id="da23" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您将看到如下表格，您可以使用卡号<code class="fe mq mr ms mt b">4242 4242 4242 4242</code>和任何未来日期作为到期日，任何号码作为<strong class="kz is"> CVC </strong>和邮政编码来测试您的支付。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nm"><img src="../Images/bba92286641db121fbec7844c0607e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DZEfYm_vNuvS1E9qkT52iw.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Payment Form</figcaption></figure><p id="ac00" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">以后你可以去<code class="fe mq mr ms mt b">https://dashboard.stripe.com/test/payments</code>看看支付成功了！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nn"><img src="../Images/138dd3402612100ee6013c7635df72d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ufgx_r8xYibCp7T9nz0gcA.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">payment success!</figcaption></figure><p id="fefc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">原来如此！现在你可以毫不费力地拿钱了！</p><h1 id="831d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">那现在怎么办？</h1><p id="832c" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在你知道如何接受用户的付款了。现在，您可以自定义用户体验。检查<a class="ae kw" href="https://stripe.com/docs/payments" rel="noopener ugc nofollow" target="_blank">文档</a>！</p><p id="1a65" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你想看完整的实现和代码，你可以去下面的仓库。</p><p id="3fa3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">前端:</strong><a class="ae kw" href="https://github.com/Mohammad-Faisal/stripe-react-frontend" rel="noopener ugc nofollow" target="_blank">https://github.com/Mohammad-Faisal/stripe-react-frontend</a><br/><strong class="kz is">后端:</strong><a class="ae kw" href="https://github.com/Mohammad-Faisal/stripe-node-backend" rel="noopener ugc nofollow" target="_blank">https://github.com/Mohammad-Faisal/stripe-node-backend</a></p><p id="67e4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">通过</strong><a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is">LinkedIn</strong></a>与我联系</p><div class="no np gq gs nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/45-npm-packages-to-solve-16-react-problems-a9ab18946224"><div class="ns ab fp"><div class="nt ab nu cl cj nv"><h2 class="bd is gz z fq nw fs ft nx fv fx iq bi translated">45个NPM软件包解决16个React问题</h2><div class="ny l"><h3 class="bd b gz z fq nw fs ft nx fv fx dk translated">关于如何选择完美的npm包的深入指导</h3></div><div class="nz l"><p class="bd b dl z fq nw fs ft nx fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kq nr"/></div></div></a></div><h2 id="6292" class="my lu ir bd lv og oh dn lz oi oj dp md lg ok ol mf lk om on mh lo oo op mj oq bi translated">资源:</h2><p id="366d" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">条纹Doc:<a class="ae kw" href="https://stripe.com/docs/stripe-js/react" rel="noopener ugc nofollow" target="_blank">https://stripe.com/docs/stripe-js/react</a></p><p id="3021" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="ng">更多内容请看</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="ng">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
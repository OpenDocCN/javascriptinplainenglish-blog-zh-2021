<html>
<head>
<title>Starting your React project with Monorepo and Lerna — 01</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Monorepo和Lerna-01开始您的React项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-setup-a-monorepo-with-react-and-lerna-with-typescript-5e1be0345a7c?source=collection_archive---------4-----------------------#2021-05-07">https://javascript.plainenglish.io/how-to-setup-a-monorepo-with-react-and-lerna-with-typescript-5e1be0345a7c?source=collection_archive---------4-----------------------#2021-05-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="245d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大家好。在这个系列中，我将讨论如何用mono repository方法构建React项目。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/40ce3b6d8250b319783f40c2f13c57b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*flJ47Bj-7mB2umdpjZ1asw.jpeg"/></div></div></figure><h1 id="096a" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">为什么是mono仓库？</h1><p id="df86" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">使用mono存储库的想法是能够在一个存储库中创建几个“项目”。这种方法简化了您的开发过程，并且您可以让几个团队并行工作，同时冲突最小。您还可以控制关于稳定特性和处于alpha或其他状态的特性的版本。</p><h1 id="4c6c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">怎么做？莱尔纳</h1><p id="aaea" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">Lerna是帮助你实现理想目标的工具之一。它基本上是一个工具管理器，支持你用JavaScript构建monorepo。在本文中，我们将使用Lerna引导React应用程序，以利用monorepo的优势。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="2296" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，你最好对JavaScript/ <a class="ae ma" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>和如何使用<a class="ae ma" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a> / <a class="ae ma" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> yarn </a>有基本的了解。假设您的计算机上安装了Node.js 的<a class="ae ma" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> LTS版本，让我们开始吧。</a></p><p id="f9e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们首先为我们的存储库创建一个文件夹，我将把它命名为<strong class="jp ir"> react-monorepo-template。</strong>然后，在终端中，我们可以开始我们的项目:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="8cba" class="mn ky iq mj b gy mo mp l mq mr">yarn init</span></pre><p id="22a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">大概是这样的:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="d129" class="mn ky iq mj b gy mo mp l mq mr">yarn init</span><span id="788d" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">yarn init v1.22.10</strong></span><span id="4425" class="mn ky iq mj b gy ms mp l mq mr">warning ../../package.json: No license field</span><span id="ffeb" class="mn ky iq mj b gy ms mp l mq mr">question name (react-monorepo-template):</span><span id="6a03" class="mn ky iq mj b gy ms mp l mq mr">question version (1.0.0):</span><span id="2094" class="mn ky iq mj b gy ms mp l mq mr">question description:</span><span id="3cb5" class="mn ky iq mj b gy ms mp l mq mr">question entry point (index.js):</span><span id="232e" class="mn ky iq mj b gy ms mp l mq mr">question repository url:</span><span id="898d" class="mn ky iq mj b gy ms mp l mq mr">question author:</span><span id="260b" class="mn ky iq mj b gy ms mp l mq mr">question license (MIT):</span><span id="7ca4" class="mn ky iq mj b gy ms mp l mq mr">question private:</span><span id="3b59" class="mn ky iq mj b gy ms mp l mq mr">success Saved package.json</span><span id="30cc" class="mn ky iq mj b gy ms mp l mq mr">✨  Done in 4.42s.</span></pre><p id="ca13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这是一个简短的指南，我不担心那里提供的信息。我们以后可以改变这一点。</p><p id="b791" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们有了package.json集，让我们安装<strong class="jp ir"> lerna </strong>:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="f2cc" class="mn ky iq mj b gy mo mp l mq mr">yarn add -D lerna</span></pre><blockquote class="mt mu mv"><p id="9cc1" class="jn jo mw jp b jq jr js jt ju jv jw jx mx jz ka kb my kd ke kf mz kh ki kj kk ij bi translated"><strong class="jp ir"> yarn -D </strong>会将此添加到devDependencies中。您也可以全局安装或使用npx，但是为了这篇文章，我在devDependencies中使用。</p></blockquote><p id="71b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们已经安装了lerna，让我们开始我们的项目吧！</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="1059" class="mn ky iq mj b gy mo mp l mq mr">lerna init</span></pre><p id="c07e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="92f1" class="mn ky iq mj b gy mo mp l mq mr">lerna init</span><span id="15e3" class="mn ky iq mj b gy ms mp l mq mr">info cli using local version of lerna</span><span id="f5f9" class="mn ky iq mj b gy ms mp l mq mr">lerna notice cli v4.0.0</span><span id="a358" class="mn ky iq mj b gy ms mp l mq mr">lerna info Initializing Git repository</span><span id="ba77" class="mn ky iq mj b gy ms mp l mq mr">lerna info Updating package.json</span><span id="1860" class="mn ky iq mj b gy ms mp l mq mr">lerna info Creating lerna.json</span><span id="1710" class="mn ky iq mj b gy ms mp l mq mr">lerna info Creating packages directory</span><span id="4914" class="mn ky iq mj b gy ms mp l mq mr">lerna <strong class="mj ir">success</strong> Initialized Lerna files</span></pre><p id="3cf5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一切都好！默认情况下，我们将有一个packages文件夹，在那里我们可以添加我们的项目/库/monorepos！</p><p id="b2c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们更新我们的lerna.json文件以使用yarn运行:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="967b" class="mn ky iq mj b gy mo mp l mq mr">{<br/>  "packages": [<br/>    "packages/*"<br/>  ],<br/>  "version": "0.0.0",<br/>  "npmClient": "yarn",<br/>  "useWorkspaces": true<br/>}</span></pre><blockquote class="mt mu mv"><p id="62b8" class="jn jo mw jp b jq jr js jt ju jv jw jx mx jz ka kb my kd ke kf mz kh ki kj kk ij bi translated"><strong class="jp ir">提示</strong>:所有的devDependencies都应该在我们的根package.json文件夹中。</p></blockquote><p id="a4ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要改变package.json上的一些东西，例如添加工作区(以匹配packages文件夹)，将项目设置为私有，以及添加一些脚本以方便我们的生活。</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="87c6" class="mn ky iq mj b gy mo mp l mq mr">{<br/>  "name": "react-monorepo-template",<br/>  "version": "1.0.0",<br/>  "main": "index.js",<br/>  "license": "MIT",<br/>  "private": true,<br/>  "workspaces": [<br/>    "packages/*"<br/>  ],<br/>  "scripts": {<br/>    "bootstrap": "lerna bootstrap",<br/>    "build": "lerna run build",<br/>    "start": "lerna run start --stream"<br/>  },<br/>  "devDependencies": {<br/>    "lerna": "^4.0.0"<br/>  }<br/>}</span></pre><ul class=""><li id="a7e3" class="na nb iq jp b jq jr ju jv jy nc kc nd kg ne kk nf ng nh ni bi translated">引导:lerna将链接你的项目，他们将能够理解如何与他们沟通</li><li id="b364" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">构建:将构建包文件夹中的所有项目</li><li id="f4b3" class="na nb iq jp b jq nj ju nk jy nl kc nm kg nn kk nf ng nh ni bi translated">开始:当你运行一个React应用程序时，它会像“纱线开始”一样运行</li></ul></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="1bb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在packages文件夹中，让我们使用以下内容启动我们的<strong class="jp ir">应用程序</strong>:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="7092" class="mn ky iq mj b gy mo mp l mq mr">npx create-react-app app --template typescript</span></pre><p id="777b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个命令将在一个名为<strong class="jp ir"> app </strong>的文件夹中启动一个支持typescript的react应用程序。我们现在将应用程序与根文件夹中的lerna链接起来:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="2679" class="mn ky iq mj b gy mo mp l mq mr">lerna bootsrap</span></pre><p id="5485" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在根项目中(不是包中的app文件夹):</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="1508" class="mn ky iq mj b gy mo mp l mq mr">yarn start</span></pre><p id="1a4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">它将运行如下内容:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="bc15" class="mn ky iq mj b gy mo mp l mq mr">yarn start</span><span id="2cea" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">yarn run v1.22.10</strong></span><span id="f52c" class="mn ky iq mj b gy ms mp l mq mr">$ lerna run start --stream</span><span id="ebd2" class="mn ky iq mj b gy ms mp l mq mr">lerna notice cli v4.0.0</span><span id="86bc" class="mn ky iq mj b gy ms mp l mq mr">lerna info Executing command in 1 package: "yarn run start"</span><span id="c59c" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: $ react-scripts start</span><span id="8884" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: ℹ ｢wds｣: Project is running at http://192.168.1.41/</span><span id="44f0" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: ℹ ｢wds｣: webpack output is served from</span><span id="d314" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: ℹ ｢wds｣: Content not from webpack is served from /Users/marcossilva/projects/react-monorepo-template/packages/app/public</span><span id="ba72" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: ℹ ｢wds｣: 404s will fallback to /</span><span id="5142" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: Starting the development server...</span><span id="c09c" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: Compiled successfully!</span><span id="3504" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: You can now view app in the browser.</span><span id="1fa3" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>:   Local:            http://localhost:3000</span><span id="e824" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>:   On Your Network:  http://192.168.1.41:3000</span><span id="109f" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: Note that the development build is not optimized.</span><span id="c2a9" class="mn ky iq mj b gy ms mp l mq mr"><strong class="mj ir">app</strong>: To create a production build, use yarn build.</span></pre><p id="9d76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以访问您的localhost:3000并检查:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi no"><img src="../Images/805396035ddfd764a2122ece18be57fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZJ5WlEklPsV8YlOOWjbB2g.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Initial screen from create-react-app script</figcaption></figure><p id="d468" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经有了“基础”设置。让我们尝试为我们添加另一个monorepo！</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="22a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们想将react应用程序的所有ui组件放在一个名为… <strong class="jp ir"> ui组件</strong>的库中。我们可以开始跑步了:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="fdad" class="mn ky iq mj b gy mo mp l mq mr">npx create-react-library</span></pre><p id="6f62" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们需要填充一些信息，在我的例子中是:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="c37c" class="mn ky iq mj b gy mo mp l mq mr">npx create-react-library</span><span id="22db" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">Package Name</strong> ui-components</span><span id="67a1" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">Package Description</strong> Made with create-react-library</span><span id="ebad" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">Author's GitHub Handle</strong> makinhs</span><span id="2dcb" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">GitHub Repo Path</strong> makinhs/ui-components</span><span id="cf1f" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">License</strong> MIT</span><span id="f9f5" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">Package Manager</strong> yarn</span><span id="df18" class="mn ky iq mj b gy ms mp l mq mr">? <strong class="mj ir">Template</strong> typescript</span></pre><p id="d023" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">npx会自动运行creact-react-library，即使你没有它。另一种方法是对lerna做同样的事情，在我们项目的根中使用<strong class="jp ir">yarn add-D create-react-library</strong>，以确保我们在不同的团队中使用相同的版本。</p><p id="dd9e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，让我们在ui组件库中创建一个基本的ui组件。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="bf68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了创建一个基本组件，我将使用样式化组件。在一篇新文章中，我将使用<a class="ae ma" href="https://chakra-ui.com/" rel="noopener ugc nofollow" target="_blank"> chakra-ui </a>作为非设计师视角的基础架构。在ui-components文件夹中:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="9b6a" class="mn ky iq mj b gy mo mp l mq mr">yarn add styled-components styled-system</span></pre><p id="7521" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">回到项目的根本:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="6637" class="mn ky iq mj b gy mo mp l mq mr">yarn add -D @types/styled-components @types/styled-system -W</span></pre><p id="0d51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">太好了，我们可以开始了。</p><p id="56dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于缺乏创造性，让我们添加一个标题和一个包装器，比如样式化组件的基础<a class="ae ma" href="https://styled-components.com/docs/basics#getting-started" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><p id="609d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加ui组件/标题/标题. tsx:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="bd13" class="mn ky iq mj b gy mo mp l mq mr">import React from 'react';<br/>import <strong class="mj ir"><em class="mw">styled </em></strong>from 'styled-components';<br/><br/>const Title = <strong class="mj ir"><em class="mw">styled</em></strong>.h1`<br/>  font-size: 1.5em;<br/>  text-align: center;<br/>  color: palevioletred;<br/>`;<br/><br/>type Props = {<br/>  children: React.ReactNode<br/>}<br/><br/>export default ({children}: Props) =&gt; {<br/>  return (&lt;Title&gt;<br/>    {children}<br/>  &lt;/Title&gt;)<br/>};</span></pre><p id="de7f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加ui-components/Wrapper/Wrapper . TSC:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="4f63" class="mn ky iq mj b gy mo mp l mq mr">import <strong class="mj ir"><em class="mw">styled </em></strong>from 'styled-components';<br/><br/>const <strong class="mj ir"><em class="mw">Wrapper </em></strong>= <strong class="mj ir"><em class="mw">styled</em></strong>.section`<br/>  padding: 4em;<br/>  background: papayawhip;<br/>`;<br/><br/>export default <strong class="mj ir"><em class="mw">Wrapper</em></strong></span></pre><p id="a62f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，更新index.tsx:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="3abc" class="mn ky iq mj b gy mo mp l mq mr">export {<strong class="mj ir"><em class="mw">default </em></strong>as Title} from './Title/Title';<br/>export {<strong class="mj ir"><em class="mw">default </em></strong>as Wrapper} from './Wrapper/Wrapper';</span></pre><p id="d2f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在我的<strong class="jp ir"> package.json </strong>的<strong class="jp ir"> ui-components </strong>中添加了一些模块，以避免一些运行问题。这是我的最终版本:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="4cca" class="mn ky iq mj b gy mo mp l mq mr">{<br/>  "name": "ui-components",<br/>  "version": "1.0.0",<br/>  "description": "Made with create-react-library",<br/>  "author": "makinhs",<br/>  "license": "MIT",<br/>  "repository": "makinhs/ui-components",<br/>  "main": "dist/index.js",<br/>  "module": "dist/index.modern.js",<br/>  "source": "src/index.tsx",<br/>  "engines": {<br/>    "node": "&gt;=10"<br/>  },<br/>  "scripts": {<br/>    "build": "microbundle-crl --no-compress --format modern,cjs",<br/>    "start": "microbundle-crl watch --no-compress --format modern,cjs",<br/>    "prepare": "run-s build",<br/>    "test": "run-s test:unit test:lint test:build",<br/>    "test:build": "run-s build",<br/>    "test:lint": "eslint .",<br/>    "test:unit": "cross-env CI=1 react-scripts test --env=jsdom",<br/>    "test:watch": "react-scripts test --env=jsdom",<br/>    "predeploy": "cd example &amp;&amp; yarn install &amp;&amp; yarn run build",<br/>    "deploy": "gh-pages -d example/build"<br/>  },<br/>  "peerDependencies": {<br/>    "react": "^17.0.2"<br/>  },<br/>  "devDependencies": {<br/>    "@types/styled-components": "^5.1.9",<br/>    "@types/styled-system": "^5.1.11",<br/>    "babel-eslint": "^10.0.3",<br/>    "cross-env": "^7.0.2",<br/>    "eslint": "^6.8.0",<br/>    "eslint-config-prettier": "^6.7.0",<br/>    "eslint-config-standard": "^14.1.0",<br/>    "eslint-config-standard-react": "^9.2.0",<br/>    "eslint-plugin-import": "^2.18.2",<br/>    "eslint-plugin-node": "^11.0.0",<br/>    "eslint-plugin-prettier": "^3.1.1",<br/>    "eslint-plugin-promise": "^4.2.1",<br/>    "eslint-plugin-react": "^7.17.0",<br/>    "eslint-plugin-standard": "^4.0.1",<br/>    "gh-pages": "^2.2.0",<br/>    "microbundle-crl": "^0.13.10",<br/>    "npm-run-all": "^4.1.5",<br/>    "prettier": "^2.0.4",<br/>    "react": "^17.0.2",<br/>    "react-dom": "^17.0.2",<br/>    "react-scripts": "^4.0.3",<br/>    "typescript": "^4.2.3",<br/>    "web-vitals": "^1.0.1"<br/>  },<br/>  "files": [<br/>    "dist"<br/>  ],<br/>  "dependencies": {<br/>    "styled-components": "^5.3.0",<br/>    "styled-system": "^5.1.5"<br/>  }<br/>}</span></pre><p id="5f58" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">酷，但是如何把项目联系起来呢？将ui组件添加到react app package.json中！</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="3656" class="mn ky iq mj b gy mo mp l mq mr">"ui-components": "latest"</span></pre><blockquote class="mt mu mv"><p id="cc90" class="jn jo mw jp b jq jr js jt ju jv jw jx mx jz ka kb my kd ke kf mz kh ki kj kk ij bi translated">我们不打算在本文中讨论版本控制，但我希望你能明白…</p></blockquote><p id="7996" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加后，在您的根中链接两个项目:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="58c5" class="mn ky iq mj b gy mo mp l mq mr">lerna bootstrap<br/>lerna build</span></pre><p id="6b4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这应该是链接您的项目并为您构建最新的ui组件库。</p><p id="5862" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，回到你的app/src/App.tsx:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="7aa3" class="mn ky iq mj b gy mo mp l mq mr">import React from 'react';<br/>import './App.css';<br/>import {<strong class="mj ir"><em class="mw">Title</em></strong>, <strong class="mj ir"><em class="mw">Wrapper</em></strong>} from 'ui-components';<br/>function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Wrapper&gt;<br/>        &lt;Title&gt;<br/>          Hello Medium!<br/>        &lt;/Title&gt;<br/>      &lt;/Wrapper&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="c47e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们一起尝试一切:</p><pre class="km kn ko kp gt mi mj mk ml aw mm bi"><span id="997e" class="mn ky iq mj b gy mo mp l mq mr">yarn start</span></pre><p id="50e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在浏览器中打开<a class="ae ma" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>，您应该会看到:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/29e1021b9724e4189a54a651b59b7c62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*Zh9-WUgRhepv0QbRxBJUNA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk">Importing ui-components</figcaption></figure><p id="e08c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">就是这样，在React中用lerna添加自己的mono-repo的简单基础。</p></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><p id="8d4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种方法中，您可以在ui组件和业务逻辑之间划分任务，并在将来添加可以跨多个团队共享/开发的功能。</p><p id="8f69" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我会创造更多的文章。同时，我会不时更新回购协议。</p><p id="7c22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行和工作的全部代码可以在我的<a class="ae ma" href="https://github.com/makinhs/react-monorepo-template" rel="noopener ugc nofollow" target="_blank"> git库</a>中找到。</p><p id="83fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读。</p><div class="nu nv gp gr nw nx"><a href="https://makinhs.medium.com/starting-your-new-project-with-nestjs-in-2021-df997815c740" rel="noopener follow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd ir gy z fp oc fr fs od fu fw ip bi translated">在2021年与NestJS一起开始你的新项目</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">当前最健壮、开放源代码、内置于服务器端的节点框架之一。JS，带类型脚本</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">makinhs.medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol kv nx"/></div></div></a></div></div><div class="ab cl mb mc hu md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ij ik il im in"><h2 id="09fb" class="mn ky iq bd kz om on dn ld oo op dp lh jy oq or ll kc os ot lp kg ou ov lt ow bi translated">进一步阅读</h2><div class="nu nv gp gr nw nx"><a href="https://bit.cloud/blog/painless-monorepo-dependency-management-with-bit-l4f9fzyw" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd ir gy z fp oc fr fs od fu fw ip bi translated">使用Bit进行无痛monorepo依赖管理</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">简化monorepo中的依赖关系管理，以避免虚拟依赖关系和版本问题。了解…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">比特云</p></div></div><div class="og l"><div class="ox l oi oj ok og ol kv nx"/></div></div></a></div><p id="262b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mw">更多内容请看</em><a class="ae ma" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mw">plain English . io</em></strong></a><em class="mw">。报名参加我们的</em> <a class="ae ma" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mw">免费周报</em> </strong> </a> <em class="mw">。关注我们关于</em><a class="ae ma" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mw">Twitter</em></strong></a><a class="ae ma" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mw">LinkedIn</em></strong></a><strong class="jp ir"><em class="mw"/></strong><a class="ae ma" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mw">YouTube</em></strong></a><strong class="jp ir"><em class="mw">，以及</em></strong><em class="mw"/><a class="ae ma" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mw">不和</em> </strong> </a>  <em class="mw">对成长黑客感兴趣？检查</em> <a class="ae ma" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="mw">电路</em> </strong> </a> <strong class="jp ir"> <em class="mw">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create a Custom Cursor in React — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建自定义光标—第1部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-custom-cursor-in-react-272314682285?source=collection_archive---------3-----------------------#2021-06-19">https://javascript.plainenglish.io/how-to-create-a-custom-cursor-in-react-272314682285?source=collection_archive---------3-----------------------#2021-06-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/258071bff35c877083d04ac313c0810f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7NktCSlm9Ey09ZxwVdLL5w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">How to create a custom cursor in React without any module</figcaption></figure><p id="2db7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">写这段代码时没有使用任何模块。</p><p id="15ed" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你正在寻找源代码，那么它可以在视频中找到。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lb lc l"/></div></figure><p id="e59a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">请观看此视频以示支持。</p><h1 id="fe1b" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">基本HTML —光标的CSS布局</h1><p id="2cb3" class="pw-post-body-paragraph jz ka in kb b kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw ig bi translated">我们将开始为光标点和光标轮廓编写<strong class="kb io"> JSX(HTML) </strong>。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mg"><img src="../Images/6e2d4d568a0e196230ca3572acff3990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0vKTIH0j6nVjQRXlAluPVQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Cursor HTML/JSX (cursor.jsx)</figcaption></figure><p id="8449" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们还为这些元素创建了<code class="fe mh mi mj mk b">ref</code>,这样我们可以在以后访问DOM元素。</p><p id="2b79" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们将为这些元素添加<strong class="kb io"> CSS </strong>样式。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/3c3b8beb8acab14c82454091a31db728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w8eAq99o-MJ1szCnyadlxg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Cursor CSS</figcaption></figure><p id="7465" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mh mi mj mk b">cursor: none</code>被添加到通用选择器<code class="fe mh mi mj mk b">*</code>中，因为我们想要隐藏默认光标。</p><p id="e4ad" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mh mi mj mk b">pointer-events: none</code>这样这个元素就不会成为指针事件的目标。<a class="ae mm" href="https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events" rel="noopener ugc nofollow" target="_blank"> MDN指针事件</a></p><pre class="kx ky kz la gt mn mk mo mp aw mq bi"><span id="7270" class="mr le in mk b gy ms mt l mu mv">position: absolute;<br/>top: 50%;<br/>left: 50%;<br/>transform: translate(-50%, -50%);</span></pre><p id="52da" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个代码片段用于将两个元素都移动到中间。</p><p id="1ec7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用<code class="fe mh mi mj mk b">opacity: 1;</code>是为了稍后我们可以根据<code class="fe mh mi mj mk b">mouseenter</code>和<code class="fe mh mi mj mk b">mouseleave</code>事件隐藏和显示我们的光标。这就是为什么<code class="fe mh mi mj mk b">transition</code>也被用在<code class="fe mh mi mj mk b">opacity</code>属性上。</p><p id="5cde" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用<code class="fe mh mi mj mk b">transform</code>上的过渡，以便我们可以根据一些鼠标事件(很快就会知道是哪一个)来增加和减少点和轮廓的大小。</p><p id="8c5a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">它看起来会像这样。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/23a2e975f80683733dc9e6701c6b7108.png" data-original-src="https://miro.medium.com/v2/resize:fit:696/format:webp/1*WGAOX1sMmYFCmHzEuEwPmw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The basic layout of the cursor</figcaption></figure><h1 id="7836" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">添加图像以显示光标悬停效果</h1><p id="4cd1" class="pw-post-body-paragraph jz ka in kb b kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw ig bi translated">我们将添加一些图像来显示平滑的光标悬停过渡。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/05182111d7f5b60370eca031413bf8a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yorS1Sv2o4kD8QJ4QKqdxw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Link.jsx</figcaption></figure><p id="6c5d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建了这个<code class="fe mh mi mj mk b">&lt;Link /&gt;</code>组件，可以重用它来显示图像。</p><p id="2722" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，我们需要将它导入到我们的<code class="fe mh mi mj mk b">&lt;Cursor /&gt;</code>组件中，并传递图像。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/f188d66c83bc82a742ae696b3171fe86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rqshlzlWWzHt8X9MBpInfA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Updated cursor.jsx</figcaption></figure><p id="efa8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们将<code class="fe mh mi mj mk b">ref</code>添加到它的容器中，因为我们将鼠标事件添加到所有这些图像中。</p><p id="c106" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mh mi mj mk b">getImage</code>是一个<strong class="kb io"> util </strong>函数，我创建它是为了根据<strong class="kb io"> map </strong>函数提供的<strong class="kb io">索引</strong>值获取图像。您可以在源代码中找到该函数(没有添加任何图像，因为它不是那么重要。抱歉<code class="fe mh mi mj mk b">getImage</code>功能！).</p><p id="1c99" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">奖励积分</strong></p><ul class=""><li id="0fe9" class="mz na in kb b kc kd kg kh kk nb ko nc ks nd kw ne nf ng nh bi translated"><strong class="kb io">导入语句的路径</strong></li></ul><p id="5752" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了使用它，我使用了<code class="fe mh mi mj mk b">jsconfig.json</code>。您可以将该文件添加到项目的根目录下，并在<code class="fe mh mi mj mk b">compilerOptions</code>中添加<code class="fe mh mi mj mk b">baseUrl</code>属性。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/297ec5609434f41f352fa69c6929dde6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zdKLFuyxt_MNfYfY2m75g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">jsconfig.json</figcaption></figure><ul class=""><li id="0028" class="mz na in kb b kc kd kg kh kk nb ko nc ks nd kw ne nf ng nh bi translated"><strong class="kb io"/><code class="fe mh mi mj mk b"><strong class="kb io">[...Array(4).keys()]</strong></code><strong class="kb io">代码片段</strong></li></ul><p id="98e5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mh mi mj mk b">Array(4)</code>将创建一个大小为4的空数组。</p><p id="2536" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mh mi mj mk b"><strong class="kb io">keys()</strong></code>方法返回一个新的<strong class="kb io">数组迭代器</strong>对象，它包含数组中每个索引的键。</p><p id="7188" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">展开数组将得到一个数组— <code class="fe mh mi mj mk b">[0, 1, 2, 3]</code></p><p id="fe2b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">好吧，让我们回到刚才的话题😅。</p><p id="b058" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后一件事是给我们的图片容器添加一些样式。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/616fe2c37007e072579f2282865e3bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q11PBO5X4FG2u6zZq-P6ug.png"/></div></div></figure><p id="fce2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在最终的结果会是这样的—</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/d8c37fd2401e47a043a0e20df4deb31f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CQYgCQ1Pj_rjDkktETGyNQ.png"/></div></div></figure><h1 id="d7fb" class="ld le in bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">给我们的光标添加动画</h1><p id="1014" class="pw-post-body-paragraph jz ka in kb b kc mb ke kf kg mc ki kj kk md km kn ko me kq kr ks mf ku kv kw ig bi translated">最后，是时候给我们的光标添加动画了(可怜的光标孤零零地坐在屏幕中央)。</p><p id="66dc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">添加参考变量</strong></p><p id="8227" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们需要添加一些更多的<code class="fe mh mi mj mk b">refs</code>到我们的<strong class="kb io">光标</strong>组件，这样我们就可以更新更改。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/fd6119ccc8ea4d13ef8c54bf0db5237c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*djcluh1s_YZPPMzngO-G6A.png"/></div></div></figure><p id="e8c4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">延迟</strong>将被用作一个因子，通过它我们将改变光标轮廓跟随光标点的快慢。数字越大意味着越慢，反之亦然。</p><p id="fba0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">光标可见</strong>将帮助切换光标的可见性。</p><p id="ba02" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">光标变大的将有助于切换光标的大小。</p><p id="a8f3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> endX </strong>是光标点的X位置。我们将在这个变量中保存点的X位置。它用<code class="fe mh mi mj mk b">window.innerWidth/2</code>初始化，因为那是X轴的中点。</p><p id="55bc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> endY </strong>是光标点的Y轴位置。我们将在这个变量中保存点的Y位置。概念与<strong class="kb io"> endX </strong>相同。</p><p id="563d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> _x </strong>是光标轮廓的X位置。我们将在这个变量中保存轮廓的X位置。它被初始化为0，因为我们想显示运动动画。(从屏幕左上角到中点的轮廓，在应用程序开始时该点出现)。</p><p id="a465" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> _y </strong>是光标轮廓的Y位置。我们将在这个变量中保存轮廓的Y位置。概念与<strong class="kb io"> _x </strong>相同。</p><p id="57a9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> requestRef </strong>将保存从一个重要函数返回的ID(当我们向光标轮廓添加动画时将会看到它)。</p><p id="ea85" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">增加光标切换功能</strong></p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/e8712596a7b86355e2e486cd4148b6c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GWChFZHa8nnSywk-rrP8BQ.png"/></div></div></figure><ul class=""><li id="a6b0" class="mz na in kb b kc kd kg kh kk nb ko nc ks nd kw ne nf ng nh bi translated"><strong class="kb io">toggleCursorVisibility—</strong>如果光标可见，那么我们将把不透明度改为1，否则我们将把它改为0。</li><li id="7a68" class="mz na in kb b kc nk kg nl kk nm ko nn ks no kw ne nf ng nh bi translated"><strong class="kb io"> toggleCursorSize — </strong>如果cursorEnlarged为真，那么我们将减小圆点的尺寸，增加轮廓的尺寸。如果是假的，我们会把它改回原来的尺寸。</li></ul><p id="a2a9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">添加结束、退出、回车、离开鼠标事件</strong></p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/c8f102af12f414e291f52087b5344783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIccn3OxFJhAvMWBfcaARw.png"/></div></div></figure><p id="4c1f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">‘mouse over’—</strong>当光标位于元素或其子元素之上时，触发<strong class="kb io"> mouseover </strong>事件。</p><p id="9c72" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">‘mouseout’—</strong>当光标不在元素或其子元素上时，触发<strong class="kb io"> mouseout </strong>事件。</p><p id="bc5d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">‘mouse leave’—</strong>当我们离开页面视窗时，触发<strong class="kb io"> mouseleave </strong>事件。</p><p id="cdfd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> 'mouseenter' — </strong>当我们进入页面视窗时，触发<strong class="kb io"> mouseenter </strong>事件。</p><p id="aa0b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，我们可以将<strong class="kb io"> mouseOverEvent </strong>和<strong class="kb io"> mouseOutEvent </strong>传递给我们的图像组件。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/59cc8d6d6c71d6edbb060754af523661.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZvJsJnewt-VUN_aEMinPQ.png"/></div></div></figure><p id="001c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">每当鼠标光标出现在图像上时，这些函数都会被调用。</p><p id="cc98" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">添加鼠标移动事件</strong></p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/0f5f7df127357b762957e64134f409ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-nJ-yAPOHA1P6UTKTErdyw.png"/></div></div></figure><p id="df78" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们需要确保的第一件事是我们的光标是可见的，这就是为什么我们更新了<strong class="kb io"> currentVisible </strong>并调用了<strong class="kb io"> toggleCursorVisibility </strong>函数。</p><p id="91b9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，我们在<strong class="kb io"> pageX </strong>和<strong class="kb io"> pageY的帮助下获取光标的当前位置。</strong>下一步是更新点光标的top和left属性，以显示它在页面上的移动。</p><p id="fcc7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> P.S — </strong>这个<a class="ae mm" href="https://stackoverflow.com/questions/6073505/what-is-the-difference-between-screenx-y-clientx-y-and-pagex-y" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>的回答很好的解释了<strong class="kb io"> clientX </strong>和<strong class="kb io"> pageX </strong>的区别。</p><p id="bdab" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">添加光标轮廓动画</strong></p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/1b596255233f8c0fc0221b91688f5713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sN4opGFu9sAXb3S5w-GaAw.png"/></div></div></figure><p id="1643" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是一个特殊的递归函数，我们在<code class="fe mh mi mj mk b">requestAnimationFrame</code>函数内部调用它。在此功能中，我们根据<strong class="kb io">光标点的位置更新<strong class="kb io">光标轮廓</strong>的位置。</strong></p><p id="4798" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本文的第2部分给出了对此的数学解释。</p><p id="bce6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这篇<a class="ae mm" href="http://www.javascriptkit.com/javatutors/requestanimationframe.shtml" rel="noopener ugc nofollow" target="_blank">文章</a>非常有助于理解<strong class="kb io"> requestAnimationFrame </strong>是如何工作的以及为什么创建它。</p><p id="b0b6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">调用所有事件函数</strong></p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/b0809dfe3e36b7f3bd9654918c089423.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDWibe4BDYg1Vu1c74mnPA.png"/></div></div></figure><p id="e1e5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以在<code class="fe mh mi mj mk b">useEffect</code>(componentidmount)内部调用我们所有的事件函数。在卸载的时候，我们应该删除所有的事件监听器，并且使用<strong class="kb io"> cancelAnimationFrame </strong>函数取消requestAnimationFrame。</p><p id="cabc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有了这些功能，我们可怜的光标终于可以移动了。</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/23ef8f48cfe884dbd95fda759f4185e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/1*6ToNtyAxwO7aciyX2Q4_XA.gif"/></div></figure><p id="7498" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><a class="ae mm" href="https://germavinsmoke.medium.com/how-to-create-a-custom-cursor-in-react-part-2-mathematical-explanation-2193b52c43ba" rel="noopener">文章的第二部分</a>有一点数学解释。所以你可以去看看。</p><p id="503f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一些重要的联系—</p><ul class=""><li id="fa53" class="mz na in kb b kc kd kg kh kk nb ko nc ks nd kw ne nf ng nh bi translated">MDN request animation frame—<a class="ae mm" href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Web/API/window/request animation frame</a></li><li id="7283" class="mz na in kb b kc nk kg nl kk nm ko nn ks no kw ne nf ng nh bi translated">StackOverflow对requestAnimationFrame的回答—<a class="ae mm" href="https://stackoverflow.com/questions/52212703/using-requestanimationframe-in-react/52213728" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/52212703/using-requestAnimationFrame-in-react/52213728</a></li><li id="2d80" class="mz na in kb b kc nk kg nl kk nm ko nn ks no kw ne nf ng nh bi translated">在React中使用requestAnimationFrame—<a class="ae mm" href="https://css-tricks.com/using-requestanimationframe-with-react-hooks/" rel="noopener ugc nofollow" target="_blank">https://CSS-tricks . com/using-requestAnimationFrame-with-React-hooks/</a></li><li id="13e7" class="mz na in kb b kc nk kg nl kk nm ko nn ks no kw ne nf ng nh bi translated">在React中使用事件监听器—<a class="ae mm" href="https://www.pluralsight.com/guides/event-listeners-in-react-components" rel="noopener ugc nofollow" target="_blank">https://www . plural sight . com/guides/event-listeners-in-React-components</a></li><li id="dede" class="mz na in kb b kc nk kg nl kk nm ko nn ks no kw ne nf ng nh bi translated">自定义光标的VanillaJS码笔—<a class="ae mm" href="https://codepen.io/kjbrum/pen/qooQJJ" rel="noopener ugc nofollow" target="_blank">https://codepen.io/kjbrum/pen/qooQJJ</a></li></ul><p id="7e6a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="nr">更多内容请看</em><a class="ae mm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nr">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Remix — The Hottest New JavaScript Framework (Winter 2021)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">remix——最热门的新JavaScript框架(2021年冬季)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/remix-the-hottest-new-js-framework-winter-2021-4bee22a0761d?source=collection_archive---------0-----------------------#2021-11-29">https://javascript.plainenglish.io/remix-the-hottest-new-js-framework-winter-2021-4bee22a0761d?source=collection_archive---------0-----------------------#2021-11-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c0eb" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Remix是一个类似于Next.js或者Gatsby的全栈JavaScript框架。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e135b0611bcdc4dc8bab2837cb2f9ca3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c-F1-srT6HbkUQEjjEKUIA.png"/></div></div></figure><p id="8111" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你像我一样，新的JavaScript框架不会让你兴奋。似乎每周都会发布一个新的JavaScript框架，发布时大肆宣传，到了月底，每个人都进入了JavaScript领域的“下一个大事件”。</p><p id="d813" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，我很自然地回顾了去年Remix的最初版本，当时创始人(也是React路由器的创造者)宣布了一种基于许可的模式，个人开发者许可费用为<strong class="kt ir"> $250 </strong>。</p><blockquote class="ln lo lp"><p id="9671" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">Remix是一个全栈web框架，让你专注于用户界面，并通过web基础工作，提供一个快速，灵活，有弹性的用户体验。</p></blockquote><p id="7acf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">不，谢谢你。我会坚持我的观点，用反应和表达。</p><p id="970d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最近，Remix的创始人带来了Kent C. Dodds并宣布他们将开源！潜水不再需要执照。好吧，那我们打球吧。</p><p id="2528" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面的文章将总结开发者博客教程的要点，并插入一些我个人的想法。</p><h1 id="ee05" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">什么是混音？</h1><p id="564a" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">Remix是一个类似于Next.js或者Gatsby的全栈JavaScript框架。如他们的<a class="ae lu" href="https://remix.run" rel="noopener ugc nofollow" target="_blank">登陆页面</a>所述:</p><blockquote class="ln lo lp"><p id="67ec" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">Remix是一个无缝的服务器和浏览器运行时，通过利用分布式系统和原生浏览器功能而不是笨重的静态构建，提供快速的页面加载和即时转换。</p></blockquote><h1 id="cd06" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">Remix开发者博客教程</h1><p id="337f" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">马上，我遇到了一个错误，因为我使用了一个旧版本的Node(必须≥ v14.0.0)。在升级了我的local node.js包之后，我们使用<code class="fe ms mt mu mv b">npx </code>创建了一个新的Remix项目，类似于“create-react-app ”,但是有相当多的内置选项/支持。我将使用默认的带有TypeScript的Remix应用服务器。</p><h2 id="1758" class="mw lw iq bd lx mx my dn mb mz na dp mf la nb nc mh le nd ne mj li nf ng ml nh bi translated"><strong class="ak">路由</strong></h2><p id="a9e5" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">混音应用程序的文件结构包括一个“路线”文件夹，您可以在其中为每条路线创建文件夹。例如，localhost:3000/posts呈现了<code class="fe ms mt mu mv b">my-app/routes/posts/index.tsx</code>文件中的任何内容。这在某些方面类似于HTML和PHP开发的老方法。这将是一个反复出现的主题。</p><h2 id="dd6b" class="mw lw iq bd lx mx my dn mb mz na dp mf la nb nc mh le nd ne mj li nf ng ml nh bi translated"><strong class="ak">数据加载</strong></h2><p id="7259" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">Remix使用“加载器”的概念来获取React组件要使用的数据。</p><blockquote class="ln lo lp"><p id="e842" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">加载器是组件的后端“API ”,它已经通过<code class="fe ms mt mu mv b">useLoaderData</code>为你连接好了。在混合路线中，客户机和服务器之间的界限是多么模糊，这有点令人难以置信。</p></blockquote><p id="6a30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ms mt mu mv b">useLoaderData </code>允许我们用从<code class="fe ms mt mu mv b">loader</code>函数返回的数据合成react组件。我们所需要的就是创建一个名为<code class="fe ms mt mu mv b">loader</code>的函数，并在该函数中执行数据库查询，然后返回一个数据数组。</p><p id="6e71" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">帖子路径的<code class="fe ms mt mu mv b">index.tsx</code>可以是这样的:</p><pre class="kg kh ki kj gt ni mv nj nk aw nl bi"><span id="436b" class="mw lw iq mv b gy nm nn l no np">import { Link, useLoaderData } from "remix";<br/>import { getPosts } from "~/post";<br/>import type { Post } from "~/post";</span><span id="58e6" class="mw lw iq mv b gy nq nn l no np">export let loader = () =&gt; {<br/>  return getPosts();<br/>};</span><span id="8fe2" class="mw lw iq mv b gy nq nn l no np">export default function Posts() {<br/>  let posts = useLoaderData&lt;Post[]&gt;();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Posts&lt;/h1&gt;<br/>      &lt;ul&gt;<br/>        {posts.map(post =&gt; (<br/>          &lt;li key={post.slug}&gt;<br/>            &lt;Link to={post.slug}&gt;{post.title}&lt;/Link&gt;<br/>          &lt;/li&gt;<br/>        ))}<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="fc4f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ms mt mu mv b">useLoaderData</code>函数自动找到加载器函数并将数据交给react组件！如果你问我，我觉得很好。我唯一的不满是这一切的含蓄。我更喜欢非常显式可读的代码，如果你不知道<code class="fe ms mt mu mv b">useLoaderData</code>需要一个名为<code class="fe ms mt mu mv b">loader</code>的函数，代码会变得混乱。</p><h2 id="ad57" class="mw lw iq bd lx mx my dn mb mz na dp mf la nb nc mh le nd ne mj li nf ng ml nh bi translated"><strong class="ak">动态路由和嵌套路由</strong></h2><p id="39b3" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">我们可以通过创建一个以<code class="fe ms mt mu mv b">$</code>开头的文件来创建带参数的动态路由，例如:<code class="fe ms mt mu mv b">my-app/routes/posts/$slug.tsx</code>将负责类似<code class="fe ms mt mu mv b">localhost:3000/posts/this-is-a-slug</code>的路由。我们用文件名中放在<code class="fe ms mt mu mv b">$</code>后面的东西来命名参数，所以在这个例子中，参数名是<code class="fe ms mt mu mv b">slug</code>。默认情况下，该路径的加载器函数接受一个对象，其中一个值是params，因此我们可以有一个类似如下的文件<code class="fe ms mt mu mv b">my-app/routes/posts/$slug.tsx</code>:</p><pre class="kg kh ki kj gt ni mv nj nk aw nl bi"><span id="aa46" class="mw lw iq mv b gy nm nn l no np">import { useLoaderData } from "remix";</span><span id="d3d8" class="mw lw iq mv b gy nq nn l no np">export let loader = async ({ params }) =&gt; {<br/>  return params.slug;<br/>};</span><span id="eb00" class="mw lw iq mv b gy nq nn l no np">export default function PostSlug() {<br/>  let slug = useLoaderData();<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Some Post: {slug}&lt;/h1&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2c2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">嵌套路由有点棘手，但本质上，你的主路由文件，比如说:<code class="fe ms mt mu mv b">my-app/routes/admin.tsx</code>可以使用remix所称的<code class="fe ms mt mu mv b">Outlet</code>，它允许呈现该路由文件夹的索引文件。所以<code class="fe ms mt mu mv b">my-app/routes/admin.tsx</code>可以使用一个<code class="fe ms mt mu mv b">Outlet</code>来呈现<code class="fe ms mt mu mv b">my-app/routes/admin/index.tsx</code>和管理文件夹中的任何其他嵌套文件，比如包含一个表单的<code class="fe ms mt mu mv b">new.tsx</code>来创建一个新帖子。一开始这一切都很复杂，老实说，我现在还没完全理解这个概念，所以我敦促你在<a class="ae lu" href="https://remix.run/docs/en/v1/tutorials/blog#index-routes" rel="noopener ugc nofollow" target="_blank">混音文档</a>或其他教程中自己钻研这个。</p><h2 id="f4dc" class="mw lw iq bd lx mx my dn mb mz na dp mf la nb nc mh le nd ne mj li nf ng ml nh bi translated"><strong class="ak">形式和动作</strong></h2><blockquote class="ln lo lp"><p id="746b" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">如果你像我们一样喜欢HTML，你应该会非常兴奋。如果你一直在做大量的<code class="fe ms mt mu mv b">&lt;form onSubmit&gt;</code>和<code class="fe ms mt mu mv b">&lt;button onClick&gt;</code>，你将会被HTML弄得神魂颠倒。对于这样的功能，您真正需要的是一个从用户那里获取数据的表单和一个处理数据的后端操作。在混音中，这就是你所要做的。</p></blockquote><p id="72b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">教程的最后一个主要部分集中在表单和表单提交上，在我看来非常酷。在路由中，<code class="fe ms mt mu mv b">/admin/new</code>我们可以在react组件中呈现一个基本的HTML表单。如您所见，没有指定<code class="fe ms mt mu mv b">onSubmit</code>或<code class="fe ms mt mu mv b">onClick</code>功能。</p><pre class="kg kh ki kj gt ni mv nj nk aw nl bi"><span id="cf9f" class="mw lw iq mv b gy nm nn l no np">import { Form } from "remix";<br/><br/>export default function NewPost() {<br/>  return (<br/>    &lt;Form method="post"&gt;<br/>      &lt;p&gt;<br/>        &lt;label&gt;<br/>          Post Title: &lt;input type="text" name="title" /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;label&gt;<br/>          Post Slug: &lt;input type="text" name="slug" /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;label htmlFor="markdown"&gt;Markdown&lt;/label&gt;<br/>        &lt;br /&gt;<br/>        &lt;textarea rows={20} name="markdown" /&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;button type="submit"&gt;Create Post&lt;/button&gt;<br/>      &lt;/p&gt;<br/>    &lt;/Form&gt;<br/>  );<br/>}</span></pre><p id="4e6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们只需要写一个<code class="fe ms mt mu mv b">action</code>函数。类似于<code class="fe ms mt mu mv b">loader</code>的想法，这个函数必须命名为<code class="fe ms mt mu mv b">action</code>。</p><pre class="kg kh ki kj gt ni mv nj nk aw nl bi"><span id="a1a0" class="mw lw iq mv b gy nm nn l no np">import { useActionData, Form, redirect } from "remix";<br/>import invariant from "tiny-invariant";</span><span id="b902" class="mw lw iq mv b gy nq nn l no np">export let action: ActionFunction = async ({ request }) =&gt; {<br/>  let formData = await request.formData();<br/><br/>  let title = formData.get("title");<br/>  let slug = formData.get("slug");<br/>  let markdown = formData.get("markdown");<br/><br/>  let errors = {};<br/>  if (!title) errors.title = true;<br/>  if (!slug) errors.slug = true;<br/>  if (!markdown) errors.markdown = true;<br/><br/>  if (Object.keys(errors).length) {<br/>    return errors;<br/>  }<br/><br/>  invariant(typeof title === "string");<br/>  invariant(typeof slug === "string");<br/>  invariant(typeof markdown === "string");<br/>  await createPost({ title, slug, markdown });<br/><br/>  return redirect("/admin");<br/>};<br/><br/><br/>export default function NewPost() {<!-- --> <br/>let errors = useActionData();<br/>return (<br/>    &lt;Form method="post"&gt;<br/>      &lt;p&gt;<br/>        &lt;label&gt;<br/>          Post Title: &lt;input type="text" name="title" /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;label&gt;<br/>          Post Slug: &lt;input type="text" name="slug" /&gt;<br/>        &lt;/label&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;label htmlFor="markdown"&gt;Markdown&lt;/label&gt;<br/>        &lt;br /&gt;<br/>        &lt;textarea rows={20} name="markdown" /&gt;<br/>      &lt;/p&gt;<br/>      &lt;p&gt;<br/>        &lt;button type="submit"&gt;Create Post&lt;/button&gt;<br/>      &lt;/p&gt;<br/>    &lt;/Form&gt;<br/>  );<br/>}</span></pre><p id="2f2d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">action函数将负责表单提交，并处理数据库中的脏活，如果出错，将返回错误或重定向回<code class="fe ms mt mu mv b">/admin</code>(来自<code class="fe ms mt mu mv b">/admin/new</code>)。这个神奇的<code class="fe ms mt mu mv b">action</code>函数会自动被调用，并有效地作为一个附加的后端API用于任何数据突变或表单提交。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="0214" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在你知道了。以上是我对新的全栈JavaScript框架<strong class="kt ir"> Remix的要点总结。从这篇文章发表到现在已经将近一个星期了，所以和往常一样，事情会有变化。我喜欢学习这个新的框架，但我不认为这会很快爬上梯子并拿下Next.js。</strong></p><p id="f2d7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这种类型的框架适用于包含大量页面的web应用程序和数据密集型应用程序，这些应用程序包含不同的数据，具体取决于特定的路径。我认为随着Remix的发展，它将适合更多的用例。</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="4ce9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢你花时间阅读这篇文章。在不久的将来，我将开始做更多的软件工程和更具体的全栈web开发帖子，所以请继续关注我在Medium上的帐户，以确保您看到我的帖子。请评论您可能有的任何问题或顾虑，因为我将100%回复所有评论！</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="ffd4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你喜欢这篇文章并且不是Medium.com的会员，请考虑加入我的链接，每月只需5美元。你帮我赚几个钱，就可以获得无限的媒体文章:<a class="ae lu" href="https://medium.com/@jameschnebly/membership" rel="noopener"><em class="lq">https://medium.com/@jameschnebly/membership</em></a></p><p id="6f89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lq">更多内容请看</em><a class="ae lu" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="lq">plain English . io</em></strong></a><em class="lq">。报名参加我们的</em><strong class="kt ir"><em class="lq"/></strong><a class="ae lu" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="lq">免费周报</em> </strong> </a> <em class="lq">。在我们的</em> <a class="ae lu" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="lq">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="lq">。</em></p></div></div>    
</body>
</html>
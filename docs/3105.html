<html>
<head>
<title>Developing a Powerful Alert System Using React Context API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Context API开发强大的警报系统</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/developing-a-powerful-alert-system-using-react-context-api-df68c357db68?source=collection_archive---------3-----------------------#2021-06-24">https://javascript.plainenglish.io/developing-a-powerful-alert-system-using-react-context-api-df68c357db68?source=collection_archive---------3-----------------------#2021-06-24</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="5585" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">React的上下文API的一个实际例子</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/d82ea21cdedbe0393d4cf3eb000fd7d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bsVDxbQMx6CmuaJBAN0ZOA.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://www.pexels.com/@rcbt?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Bastian Riccardi</a> from <a class="ae kw" href="https://www.pexels.com/photo/black-and-gray-bicycle-handle-bar-with-bell-near-canal-112377/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="f0a7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">React上下文API增强了我们的React应用程序。现在我们可以用pure React做一些事情，而不需要像Redux这样的其他库的帮助，这在以前是不可能的。</p><p id="46ac" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天我将分享我是如何在一个大规模的应用中使用上下文的。</p><p id="8785" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将建立一个警报系统。每当任何用户点击一个按钮或者用户需要在一个模态中看到一些信息时，我们将使用上下文来压缩一个组件内部的逻辑。</p><p id="805a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧…</p><h1 id="62cc" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">概述:</h1><p id="ce05" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">主要过程将是这样的</p><ul class=""><li id="8b6e" class="mq mr ir kz b la lb ld le lg ms lk mt lo mu ls mv mw mx my bi translated">我们将创建一个带有缩减器的上下文。</li><li id="f1da" class="mq mr ir kz b la mz ld na lg nb lk nc lo nd ls mv mw mx my bi translated">我们用那个上下文包装整个<App/>组件</li><li id="7c89" class="mq mr ir kz b la mz ld na lg nb lk nc lo nd ls mv mw mx my bi translated">然后从任何组件，我们将触发一个动作来更新上下文的值</li><li id="8b8b" class="mq mr ir kz b la mz ld na lg nb lk nc lo nd ls mv mw mx my bi translated">警报组件将使用上下文，从而避免不必要的重新呈现。</li><li id="1736" class="mq mr ir kz b la mz ld na lg nb lk nc lo nd ls mv mw mx my bi translated">每当上下文中发生任何更新时，就会触发警报组件。</li></ul><h1 id="84d6" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">步骤1:让警报类型</h1><p id="7220" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">让我们首先定义我们将在这里处理哪种类型的警报。创建一个名为<code class="fe ne nf ng nh b">AlertTypes.ts</code>的文件。并将下面的代码放在那里。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div></figure><h1 id="cef0" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">步骤2:警报操作</h1><p id="6c71" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在创建一个动作文件。我们可以创建一个包含所有动作和reducers的文件，但是这样更简洁。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="3599" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这个文件中，我们现在已经添加了2个动作。我们的<code class="fe ne nf ng nh b">showSuccessAlert()</code>函数将单个参数作为消息。这是我们将向用户显示的消息。</p><h1 id="a333" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">第二步:警告减少器</h1><p id="4bd3" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在我们将创建我们的reducer文件。我们的警报缩减器是一个简单的函数，它检查动作类型并设置我们的状态值。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">AlertReducer.ts</figcaption></figure><h1 id="b90d" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">步骤4:提醒商店</h1><p id="09d6" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在是时候创建我们的商店了。我们将使用<code class="fe ne nf ng nh b">useReducer</code>钩子做出反应。我们的状态只有一个名为<code class="fe ne nf ng nh b">alertShower</code>的变量。该变量将保存报警的<code class="fe ne nf ng nh b">type</code>和<code class="fe ne nf ng nh b">message</code>。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div></figure><h1 id="daf4" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">步骤5:包装组件</h1><p id="9c70" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在我们需要用这个上下文来包装我们的应用程序，因为警报可以从任何地方触发。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">App.tsx</figcaption></figure><p id="82c6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">注意我们是如何包含一个名为<code class="fe ne nf ng nh b">AlertPopup</code>的特殊组件的。这将是我们的警报组件。我们需要这是全球性的，因为在整个应用程序中只有一个警报组件。</p><h1 id="3a1f" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">步骤6:警报组件</h1><p id="cda9" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">我们使用材质界面对话框作为我们的警报。可以使用任何设计库，甚至可以使用自己的设计库。</p><p id="689d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们不需要在所有需要向用户显示信息的地方反复包含这个组件。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div></figure><h1 id="cba3" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">第七步:使用警告</h1><p id="ae59" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在我们需要测试我们为自己创造了什么。创建一个名为<code class="fe ne nf ng nh b">AlertButton.tsx</code>的按钮。把这个组件放在你想放的任何地方。</p><p id="ae30" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">该按钮将发送一个动作，该动作将更新警报上下文的值，进而触发我们的警报组件。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ni nj l"/></div></figure><p id="d501" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">多棒啊。</p><h1 id="15a0" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">引人深思的事</h1><p id="6eb6" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">那么，如果您需要向这个警报模型添加一些动作，您会怎么做呢？你能做到吗？</p><h1 id="6e82" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">结论</h1><p id="e173" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">本文是关于使用React的上下文API构建现实生活中的应用程序的实用指南。</p><p id="77c6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">几乎所有的应用程序都需要一些反馈机制。希望这能有所帮助。如果你有什么不明白的，请告诉我。</p><p id="8f6c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">祝您愉快！</p><p id="130d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">通过</strong> <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> LinkedIn </strong> </a> <strong class="kz is">或我的</strong> <a class="ae kw" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is">个人网站</strong> </a> <strong class="kz is">与我取得联系。</strong></p><div class="nk nl gq gs nm nn"><a href="https://betterprogramming.pub/my-frustrations-with-the-context-api-in-react-26189fcd5371" rel="noopener  ugc nofollow" target="_blank"><div class="no ab fp"><div class="np ab nq cl cj nr"><h2 class="bd is gz z fq ns fs ft nt fv fx iq bi translated">我对React中的上下文API感到失望</h2><div class="nu l"><h3 class="bd b gz z fq ns fs ft nt fv fx dk translated">以及为什么我的下一个项目会选择Redux</h3></div><div class="nv l"><p class="bd b dl z fq ns fs ft nt fv fx dk translated">better编程. pub</p></div></div><div class="nw l"><div class="nx l ny nz oa nw ob kq nn"/></div></div></a></div><p id="47db" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="oc">更多内容看</em> <a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> <em class="oc">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
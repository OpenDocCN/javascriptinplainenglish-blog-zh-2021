<html>
<head>
<title>How To Create A Simple Animated Accordion In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建一个简单的动画手风琴</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-simple-animated-accordion-in-react-303567a4ca9f?source=collection_archive---------0-----------------------#2021-01-30">https://javascript.plainenglish.io/how-to-create-a-simple-animated-accordion-in-react-303567a4ca9f?source=collection_archive---------0-----------------------#2021-01-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df16" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">只需几个CSS动画</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/efe703b2748ee317c361303a3d961978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aM5h0n0T9sWW1rb2"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@fattycorgi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">fatty corgi</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0288" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">只用CSS动画，我们将创建一个简单的下拉手风琴。这些手风琴可以通过点击容器来切换，然后容器会自动扩展/收缩以显示/隐藏内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ls"><img src="../Images/31bd262d6f85111232367730299bf4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*IpdHPlxMFageBQnv2LWFOA.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Accordion Example</figcaption></figure><h1 id="8843" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">基本结构</h1><p id="67ee" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们将有一个容器，它将保存标题和内容div。</p><p id="18f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过修改max-height属性将隐藏内容div。</p><p id="68c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当点击accordion时，我们将更新内容div上的aria-expanded属性，这将触发CSS动画。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/f0c835df4874a9af514a1ea723107fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNPc_g0PK_ixbS8xzcUezQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Open/Closed states for accordion.</figcaption></figure><p id="b60c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们的准系统react组件将接受一个标题属性，然后呈现内容容器中的任何子元素。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Basic Accordion Component</figcaption></figure><h1 id="1d07" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">添加切换状态</h1><p id="7a8f" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">通过向我们的标题容器添加一个<code class="fe mt mu mv mw b">onClick</code>事件，我们可以触发一个函数来更新状态，这反过来将触发我们的内容容器上的一个<code class="fe mt mu mv mw b">aria-expanded</code>属性。</p><p id="848d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我还添加了一个小的v形图标，我们将使用它在动画显示状态变化时为用户提供进一步的反馈。FlatIcon 是一个寻找定制图像图标的好网站。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Accordion Component</figcaption></figure><h1 id="35e6" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">给手风琴造型</h1><p id="6713" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在我们有了一个功能组件，让我们给它添加一些样式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Accordion Styling</figcaption></figure><h1 id="7518" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">动画</h1><p id="d467" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">让我们仔细看看我们是如何表演动画的。</p><p id="04fa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于CSS动画，你有两种不同的状态，你可以使用<code class="fe mt mu mv mw b">transition</code>属性来指定这些状态之间的动画。</p><h2 id="bc66" class="mx lu iq bd lv my mz dn lz na nb dp md lf nc nd mf lj ne nf mh ln ng nh mj ni bi translated">chevron</h2><p id="4e80" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在人字形的例子中，我们有一个默认状态，然后是一个修改过的状态，其中设置了<code class="fe mt mu mv mw b">aria-expanded=true</code>属性，并且旋转了90度。我们指定要过渡到哪个属性，动画的持续时间，最后是它的计时功能，以给出平滑的旋转效果。</p><h2 id="74c1" class="mx lu iq bd lv my mz dn lz na nb dp md lf nc nd mf lj ne nf mh ln ng nh mj ni bi translated">内容</h2><p id="be8b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">动画显示内容窗格的扩展和收缩并不简单。</p><p id="3470" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在其默认状态下，最大高度和<code class="fe mt mu mv mw b">overflow:hidden</code>被设置为0，因此内容对于用户<strong class="ky ir">不可见</strong>。</p><p id="d2d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当手风琴打开时，我们将max-height设置为某个任意大的值，以便可以看到内容。</p><p id="a437" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个例子中，我选择了<code class="fe mt mu mv mw b">1000px</code>作为最大高度。你的最大高度应该总是大于你的手风琴内容的最终高度。所以如果你在里面放了很多内容，你可能要增加这个值。</p><p id="8943" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们使用max-height而不是height的原因是我们不知道容器需要多高。通过使用max-height，我们允许浏览器在打开时动态调整高度。</p><h2 id="1f8a" class="mx lu iq bd lv my mz dn lz na nb dp md lf nc nd mf lj ne nf mh ln ng nh mj ni bi translated">最大高度动画</h2><p id="efa2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">你可能已经注意到，当内容可见时，我们使用三次贝塞尔曲线过渡，但当内容隐藏时，我们使用渐出过渡。我们为什么需要这个？</p><p id="9c0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当集装箱打开时，其最大高度将比实际高度大<strong class="ky ir">。请记住，容器的高度永远不能超过最大值，我们只需设置最大高度，这样我们的容器就可以自动扩展到所需的高度。</strong></p><p id="4ccd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们的最大高度是2000像素，我们的内容高度是500像素，那么当动画从2000像素下降到500像素时，我们将会经历一个延迟。只有在动画的最后500像素，我们才会看到视觉差异，因为只有在这一点上，容器的实际高度才会改变！</p><p id="a22a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，我使用了一个定制的三次贝塞尔计时函数。这在开始时动画非常快，向结束时减少，这消除了关闭手风琴时感觉到的延迟。</p><p id="2a17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，使用标准的缓动函数打开容器是可以的。在动画过程中，让最大高度继续增长到比实际高度更大并没有视觉效果，也不会被注意到。</p><div class="kg kh ki kj gt ab cb"><figure class="nj kk nk nl nm nn no paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/63669482bbba30404ca22c2850b96be3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*BTzQLyOUBVg_eYk0OGf3TA.jpeg"/></div></figure><figure class="nj kk nk nl nm nn no paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/5c113e80d08988d4e0ac20892db92f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*dmI2Pia9CjdjY0o65BCDuw.jpeg"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk np di nq nr">Easing Functions. Cubic-Bezier(0, 1, 0, 1) left, Ease-In-Out right.</figcaption></figure></div><h1 id="47fe" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">把所有的放在一起</h1><p id="6ae5" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">现在我们有了accordion组件和CSS样式，我们可以创建一个简单的页面来演示它。利用组件上的<code class="fe mt mu mv mw b">children</code> prop，我们可以轻松地将所需的内容传递给accordion。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Index page</figcaption></figure><p id="86d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这有助于演示如何将react状态与CSS动画结合起来，并提供一点关于何时需要自定义动画计时的见解。</p></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="9d8d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你喜欢这篇文章，并且愿意支持我成为一名作家，考虑注册<a class="ae kv" href="https://adam-galtrey.medium.com/membership" rel="noopener">成为</a>的媒体成员。每月只需5美元，你就可以无限制地阅读Medium上的所有文章。如果你<a class="ae kv" href="https://adam-galtrey.medium.com/membership" rel="noopener">用我的链接</a>注册，我也会赚一小笔佣金。</p></div></div>    
</body>
</html>
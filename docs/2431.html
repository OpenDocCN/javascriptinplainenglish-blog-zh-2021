<html>
<head>
<title>How to Add Dark Mode to Your Next.js Project Using Tailwind CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Tailwind CSS将黑暗模式添加到Next.js项目中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-dark-mode-to-your-next-js-project-using-tailwind-css-3d460a768d1c?source=collection_archive---------10-----------------------#2021-05-19">https://javascript.plainenglish.io/how-to-add-dark-mode-to-your-next-js-project-using-tailwind-css-3d460a768d1c?source=collection_archive---------10-----------------------#2021-05-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2200" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">修复“文档未定义”错误的简单技巧。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c681403f2076ed592e49197b98660fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-UBRleXnjy96OTn2"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@aquatium?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Harpal Singh</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9a44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">早在2020年11月，Tailwind V2.0.0就发布了黑暗模式支持。在这个版本中，使用顺风添加黑暗模式变得简单了。</p><p id="c8f2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解如何使用Tailwind为Next.js项目添加黑暗模式。我们还将学习一个简单的错误修复方法，该错误可能在使用Next.js实现黑暗模式时出现。</p><p id="e462" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本文将假设您已经创建了一个Next.js项目，并在其中设置了Tailwind。如果您不熟悉Tailwind或者还没有建立项目，请查看下面的文章，了解如何创建包含Tailwind的新Next.js项目。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/introduction-to-using-tailwind-css-with-next-js-d609be5b6e91"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">将Tailwind CSS用于Next.js的介绍</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">为什么应该在Next.js应用程序中使用Tailwind CSS</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="b9d1" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">启用黑暗模式</h1><p id="e733" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">第一步是启用<code class="fe no np nq nr b">tailwind.config.js</code>文件中的<code class="fe no np nq nr b">darkMode</code>选项。您可以将此选项设置为<em class="ns">‘类别’</em>或<em class="ns">‘媒体’</em>。</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="9908" class="nx ms iq nr b gy ny nz l oa ob">module.exports = {<br/>  darkMode: 'class',<br/>  // ...<br/>}</span></pre><p id="0254" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ns">“媒体”</em>选项使用<code class="fe no np nq nr b">prefers-color-scheme</code> CSS功能来检测亮或暗模式。这将检查用户的操作系统或用户代理设置，以确定用户请求的是亮模式还是暗模式。你可以在这里阅读更多关于它的<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="b5d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想手动切换黑暗模式，请将选项设置为<em class="ns">‘class’</em>。对于我们的例子，我们将手动切换黑暗模式，因此将选项设置为<em class="ns">‘class’。</em></p><p id="6daa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">默认情况下，顺风中的黑暗模式变体对以下实用程序启用:</p><ul class=""><li id="a9c8" class="oc od iq ky b kz la lc ld lf oe lj of ln og lr oh oi oj ok bi translated">背景颜色</li><li id="95ca" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">边框颜色</li><li id="451b" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">渐变颜色停止</li><li id="a39d" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">占位符颜色</li><li id="2bf5" class="oc od iq ky b kz ol lc om lf on lj oo ln op lr oh oi oj ok bi translated">文本颜色</li></ul><p id="e0dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想为其他实用程序添加黑暗模式变量，将<em class="ns">‘黑暗’</em>添加到<code class="fe no np nq nr b">tailwind.config.js</code>文件的变量列表中。例如，您可以使用以下代码为文本不透明度添加黑暗模式支持:</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="e3b2" class="nx ms iq nr b gy ny nz l oa ob">module.exports = {<br/>  // ...<br/>  variants: {<br/>    extend: {<br/>      textOpacity: ['dark']<br/>    }<br/>  }<br/>}</span></pre><h1 id="353a" class="mr ms iq bd mt mu oq mw mx my or na nb jw os jx nd jz ot ka nf kc ou kd nh ni bi translated">添加黑暗模式按钮</h1><p id="4817" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">在我们的示例中，我们将显示一个带有太阳或月亮图标的按钮来表示亮模式和暗模式之间的切换。当我们点击按钮时，我们的应用程序将在亮暗模式之间切换。</p><p id="856a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<a class="ae kv" href="https://react-icons.github.io/react-icons/" rel="noopener ugc nofollow" target="_blank"> react-icons </a>包导入一个太阳图标和一个月亮图标。如果你不熟悉反应图标，看看下面的文章。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/tutorial-and-beginners-guide-to-using-react-icons-77c614696301"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">使用React图标的初学者指南</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">在一个地方获得您需要的所有图标</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="ov l mg mh mi me mj kp lv"/></div></div></a></div><p id="a408" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">安装软件包后，将以下图标作为导入添加到项目中:</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="9ce5" class="nx ms iq nr b gy ny nz l oa ob">import { IoSunnyOutline, IoMoonOutline } from 'react-icons/io5';</span></pre><p id="0240" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，使用React的<code class="fe no np nq nr b">useState</code>钩子创建一个<code class="fe no np nq nr b">darkMode</code>状态变量。</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="a8fc" class="nx ms iq nr b gy ny nz l oa ob">const [darkMode, setDarkMode] = useState(false);</span></pre><p id="c50c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，将图标包装在一个<code class="fe no np nq nr b">&lt;button&gt;</code>元素中，并添加一个<code class="fe no np nq nr b">onClick</code>道具来切换<code class="fe no np nq nr b">darkMode</code>变量状态。根据<code class="fe no np nq nr b">darkMode</code>变量的值，我们将渲染太阳图标或月亮图标。</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="af91" class="nx ms iq nr b gy ny nz l oa ob">&lt;div className="flex h-screen justify-center items-center"&gt;<br/>  &lt;button onClick={() =&gt; setDarkMode(!darkMode)}&gt;<br/>    {darkMode ? (<br/>      &lt;IoSunnyOutline size="4rem" /&gt;<br/>    ) : (<br/>      &lt;IoMoonOutline size="4rem" /&gt;<br/>    )}<br/>  &lt;/button&gt;<br/>&lt;/div&gt;</span></pre><h1 id="7178" class="mr ms iq bd mt mu oq mw mx my or na nb jw os jx nd jz ot ka nf kc ou kd nh ni bi translated">使用黑暗变体</h1><p id="83c3" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">为了使用黑暗模式变体，我们将把<em class="ns">‘dark:’</em>前缀添加到我们想要更改的任何实用程序中。</p><p id="09cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于我们的例子，我们将改变应用程序的背景颜色和文本颜色。将下面的类添加到包装器<code class="fe no np nq nr b">&lt;div&gt;</code>中，以添加黑暗模式的变化。</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="fd82" class="nx ms iq nr b gy ny nz l oa ob">&lt;div className="flex h-screen justify-center items-center <strong class="nr ir">bg-white</strong> <strong class="nr ir">text-gray-800</strong> <strong class="nr ir">dark:bg-gray-800</strong> <strong class="nr ir">dark:text-white</strong>"&gt;</span></pre><h1 id="c079" class="mr ms iq bd mt mu oq mw mx my or na nb jw os jx nd jz ot ka nf kc ou kd nh ni bi translated">手动切换黑暗模式</h1><p id="b72e" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">要在Tailwind中启用黑暗模式，您需要将<em class="ns">‘dark’</em>类添加到HTML树的<code class="fe no np nq nr b">&lt;html&gt;</code>元素中。我们可以通过下面的代码实现这一点:</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="f76c" class="nx ms iq nr b gy ny nz l oa ob">if (darkMode) {<br/> document.documentElement.classList.add('dark');<br/>} else {<br/> document.documentElement.classList.remove('dark');<br/>}</span></pre><p id="e96e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果<code class="fe no np nq nr b">darkMode</code>变量设置为true，<em class="ns">‘dark’</em>将作为一个类添加到<code class="fe no np nq nr b">&lt;html&gt;</code>元素中。当<code class="fe no np nq nr b">darkMode</code>设置为假时，<em class="ns">【暗】</em>将作为一个类别被删除。这将在顺风模式下切换黑暗模式设置。</p><h1 id="f29d" class="mr ms iq bd mt mu oq mw mx my or na nb jw os jx nd jz ot ka nf kc ou kd nh ni bi translated">修复文档未定义的错误</h1><p id="2fce" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">到目前为止一切看起来都很好，但是如果你刷新页面，你可能会遇到这个错误。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/ee4e333c74510dfa14b5fe695047b000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEVn5CwkQ2mlfFMYop0Udg.png"/></div></div></figure><p id="3a31" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">发生此错误是因为Next.js正在服务器中呈现；因此，该文档看起来是未定义的。为了解决这个问题，我们可以将之前编写的if-else子句放在一个<code class="fe no np nq nr b">useEffect</code>钩子中。</p><pre class="kg kh ki kj gt nt nr nu nv aw nw bi"><span id="7b67" class="nx ms iq nr b gy ny nz l oa ob">useEffect(() =&gt; {<br/>  if (darkMode) {<br/>    document.documentElement.classList.add('dark');<br/>  } else {<br/>    document.documentElement.classList.remove('dark');<br/>  }<br/>}, [darkMode]);</span></pre><p id="c1f3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们刷新页面，一切都将按预期运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ox"><img src="../Images/5b4c0b3c80fe51dc8c9b2c39c4517b23.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*7bOFAvOqmNPYO7yMxJbyjQ.gif"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="0cdb" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">结论</h1><p id="0d79" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">感谢阅读！我希望这篇文章对你使用Tailwind CSS在Next.js应用程序中设置黑暗模式有所帮助。</p><p id="af93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">据说黑暗模式有助于减轻眼睛疲劳，甚至可以节省智能手机的电池寿命。如果你和我一样，你会在任何可能的地方开启黑暗模式。</p><p id="9c14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解如何用Material-UI实现黑暗模式，可以看看下面的文章。</p><div class="ls lt gp gr lu lv"><a href="https://blog.devgenius.io/how-to-apply-dark-mode-using-material-ui-18de9d095d9a" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">如何使用Material-UI应用黑暗模式</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">只需一个开关，即可将React应用程序从亮模式切换到暗模式</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">blog.devgenius.io</p></div></div><div class="me l"><div class="oy l mg mh mi me mj kp lv"/></div></div></a></div><p id="df60" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ns">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ns">plain English . io</em></a></p></div></div>    
</body>
</html>
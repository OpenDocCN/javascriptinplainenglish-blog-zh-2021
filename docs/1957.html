<html>
<head>
<title>Creating an Electron app with Redux Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Redux Toolkit创建电子应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-an-electron-app-with-redux-toolkit-9f7e6a534aaa?source=collection_archive---------3-----------------------#2021-04-24">https://javascript.plainenglish.io/creating-an-electron-app-with-redux-toolkit-9f7e6a534aaa?source=collection_archive---------3-----------------------#2021-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="63e4" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在电子应用程序中创建Redux存储的简单指南</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e7cc36a4167eb13664ff1359bb43fa42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lR-gneucvzgUXv8m0RG7Bw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@goshua13?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Joshua Aragon</a> on <a class="ae ks" href="https://unsplash.com/s/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="367f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我一直在为我的顶点大学课程做最后的项目。我和我的团队决定使用electronic开发一个退休计划桌面应用程序。当我们开始处理不同的任务时，我们意识到我们没有适当的状态管理来处理不同的人和投资账户。对于这个任务，我们选择了Redux</p><p id="a4d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在你可能会想，Redux是不是有点大材小用了？嗯，这将是没有Redux工具包。vanilla Redux所需的样板文件的数量可能使它不值得这样做。然而，在这个项目中使用它是一次很好的学习经历。Redux Toolkit极大地简化了这个过程，使逻辑更容易理解。这也让我们专注于工具本身，而不是依赖于它。</p><p id="e8cb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">事不宜迟，让我们看看如何在一个电子应用程序中实现Redux Toolkit。</p><h1 id="d76a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">1.建立电子项目</h1><p id="63fa" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">您要做的第一件事是建立一个Node.js项目并安装electronic。打开命令行并输入</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="6d03" class="mr lq in mn b gy ms mt l mu mv">npm init</span></pre><p id="be5b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">完成设置过程以获得package.json文件设置，然后继续运行</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="f02e" class="mr lq in mn b gy ms mt l mu mv">npm install electron</span></pre><p id="8c7b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在您最喜欢的代码编辑器中打开项目，我使用的是Visual Studio代码，并将main.js文件添加到您的根目录中。然后添加一个名为src的新文件夹。在里面创建一个名为pages的文件夹，并在其中创建renderer.js和index.html。</p><h1 id="47fb" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">创建电子窗口</h1><p id="bfd2" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们要做的第一件事是打开main.js。在这里，我们将定义我们的主要电子流程并创建一个窗口。将以下代码添加到main.js中</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="81b4" class="mr lq in mn b gy ms mt l mu mv">const { app, BrowserWindow } = require('electron')<br/>const path = require('path')</span><span id="b67b" class="mr lq in mn b gy mw mt l mu mv">app.on('ready', () =&gt; {<br/>  const window = new BrowserWindow({<br/>    width: 600,<br/>    height: 400,<br/>    webPreferences: {<br/>      nodeIntegration: true,<br/>      contextIsolation: false<br/>    }<br/>  })<br/>})</span></pre><p id="7e89" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以随意改变窗口大小。您还需要注意web首选项部分。这对于让我们的HTML和JavaScript链接起来很重要。没有它，我们的渲染器文件将无法与DOM交互。</p><p id="a994" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们需要向package.json添加一个命令来启动我们的应用程序。打开来添加。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="2f4c" class="mr lq in mn b gy ms mt l mu mv">"start": "electron ."</span></pre><p id="2927" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">脚本部分。现在，在命令行中运行<code class="fe mx my mz mn b">npm start</code>会给你一个空白窗口。</p><h1 id="65d5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">加载自定义HTML文件</h1><p id="6eca" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">让我们给我们的index.html添加一些代码，使我们的应用程序更令人兴奋。在本教程中，我们不会做任何花哨的UI，所以我们的索引文件将非常简单。不过，我鼓励你添加一些样式，并对你的用户界面进行一些调整！</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="629b" class="mr lq in mn b gy ms mt l mu mv">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>    &lt;meta charset="UTF-8"&gt;<br/>    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>    &lt;title&gt;Electron &amp; Redux&lt;/title&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>    &lt;h1&gt;This is the best desktop app ever&lt;/h1&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="95d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了让Electron使用我们的文件，我们需要在main.js文件中添加一点代码。在我们定义窗口的地方添加下面的代码块。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="6f70" class="mr lq in mn b gy ms mt l mu mv">const index = path.join(__dirname, 'src/pages/index.html')</span><span id="3fd2" class="mr lq in mn b gy mw mt l mu mv">  window.loadFile(index)<br/>    .then(() =&gt; {<br/>      console.log('Window loaded successfully!')<br/>    })<br/>    .catch((e) =&gt; {<br/>      console.error(`An error occurred! ${e}`)<br/>    })</span></pre><p id="b5ac" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此时，运行npm start应该会显示我们的H1标记，如下图所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/3f6e64137315fddb0978eceb70306c2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gAJgvi-CwjJlUqOUEJQoPw.png"/></div></div></figure><h1 id="44ab" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">2.添加和配置Redux工具包</h1><p id="0143" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Redux Toolkit消除了使用Redux的复杂性和样板文件。让我们继续将它添加到我们的项目中</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="a3b1" class="mr lq in mn b gy ms mt l mu mv">npm install @reduxjs/toolkit</span></pre><h1 id="f47d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">准备我们的用户界面</h1><p id="a3cb" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">现在我们可以配置我们的商店了。我们将把它设置为一个简单的计数器应用程序。我们会在屏幕上显示一些数字，我们可以通过按键来增加或减少这些数字。</p><p id="50be" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们继续将这些控件添加到我们的index.html文件中。我们需要两个按钮和一些标题标签来保存我们的计数器值。</p><p id="7062" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将以下内容添加到我们的HTML主体中</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="be9d" class="mr lq in mn b gy ms mt l mu mv">&lt;body&gt;<br/>    &lt;h1 id="counterValue"&gt;&lt;/h1&gt;<br/>    &lt;button type="button" id="btnIncrement"&gt;Increment&lt;/button&gt;<br/>    &lt;button type="button" id="btnDecrement"&gt;Decrement&lt;/button&gt;<br/>&lt;/body&gt;</span></pre><p id="b7e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行它，我们应该会看到这个屏幕</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/6ff6a613c7293af3a2d4a824d0f02aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2azuQTfQzFCrB5EJOqqwLw.png"/></div></div></figure><p id="c757" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们准备添加一些Redux！</p><h1 id="7ecb" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">创建Redux工具包切片</h1><p id="58d6" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">在src文件夹中，创建一个名为data的新文件夹。在该目录下，创建一个名为store.js的文件和一个名为slices的新文件夹。在切片内，创建一个名为counter.js的文件。打开counter.js并添加以下代码:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="c438" class="mr lq in mn b gy ms mt l mu mv">const { createSlice } = require('@reduxjs/toolkit')</span><span id="d4bd" class="mr lq in mn b gy mw mt l mu mv">const counter = createSlice({<br/>  name: 'counter',<br/>  initialState: {<br/>    count: 0<br/>  },<br/>  reducers: {<br/>    increment: (state) =&gt; {<br/>      state.count += 1<br/>    },<br/>    decrement: (state) =&gt; { <br/>      state.count -= 1<br/>    }<br/>  }<br/>})</span><span id="9d58" class="mr lq in mn b gy mw mt l mu mv">module.exports = counter</span></pre><p id="8e6f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我们创建了一个新的状态片，名为counter，并将其初始状态设置为count值，我们将该值设置为0。我们还声明了增量和减量减少器，它们将创建我们的新状态。</p><h1 id="dd1e" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">配置我们的商店</h1><p id="36bf" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">接下来，我们需要配置我们的商店。打开store.js并添加以下代码:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="eba4" class="mr lq in mn b gy ms mt l mu mv">const { configureStore } = require('@reduxjs/toolkit')</span><span id="24a5" class="mr lq in mn b gy mw mt l mu mv">const counter = require('./slices/counter')</span><span id="393a" class="mr lq in mn b gy mw mt l mu mv">const store = configureStore({<br/>  reducer: {<br/>    counter: counter.reducer<br/>  }<br/>})</span><span id="f75d" class="mr lq in mn b gy mw mt l mu mv">module.exports = store</span></pre><p id="f533" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，我们将状态片添加到存储中。在这种情况下，Redux Toolkit隐藏了我们动作的样板文件。在我们的计数器切片中，我们的动作是递增和递减。本质上，Redux Toolkit为我们定义的reducers创建要调度的动作。</p><p id="128e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">设置完成后，我们可以继续将新商店与我们的用户界面联系起来！</p><h1 id="992c" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">3.在我们的界面中使用我们的存储</h1><p id="4fb9" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们需要在HTML页面中导入渲染器文件。为此，我们需要将以下代码添加到index.html文件的头部分，就在标题下面:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="14d2" class="mr lq in mn b gy ms mt l mu mv">&lt;script&gt;require('./renderer.js')&lt;/script&gt;</span></pre><p id="5f4d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们打开renderer.js，给它添加一些逻辑。我们需要将点击事件绑定到我们的按钮上，这样它们就可以分派相应的动作。我们还希望h1标签显示计数的当前状态。要做到这一点，我们需要导入商店并从我们的计数器片获取我们的操作。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="3e6a" class="mr lq in mn b gy ms mt l mu mv">const store = require('../data/store')<br/>const counter = require('../data/slices/counter')</span><span id="b366" class="mr lq in mn b gy mw mt l mu mv">const { increment, decrement } = counter.actions</span></pre><p id="1b9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有了这些，我们就可以为按钮点击添加逻辑了。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="c544" class="mr lq in mn b gy ms mt l mu mv">window.onload = () =&gt; {<br/>  const counterValue = document.getElementById('counterValue')<br/>  const btnIncrement = document.getElementById('btnIncrement')<br/>  const btnDecrement = document.getElementById('btnDecrement')</span><span id="4831" class="mr lq in mn b gy mw mt l mu mv">  counterValue.innerHTML = store.getState().counter.count</span><span id="0faa" class="mr lq in mn b gy mw mt l mu mv">  btnIncrement.addEventListener('click', e =&gt; {<br/>    e.preventDefault()<br/>    store.dispatch(<br/>      increment()<br/>    )</span><span id="0e4f" class="mr lq in mn b gy mw mt l mu mv">    counterValue.innerHTML = store.getState().counter.count<br/>  })</span><span id="1d24" class="mr lq in mn b gy mw mt l mu mv">  btnDecrement.addEventListener('click', e =&gt; {<br/>    e.preventDefault()<br/>    store.dispatch(<br/>      decrement()<br/>    )</span><span id="144d" class="mr lq in mn b gy mw mt l mu mv">    counterValue.innerHTML = store.getState().counter.count<br/>  })<br/>}</span></pre><p id="bef9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，当页面加载时，我们获取页面上的三个元素，并将h1标记设置为状态的当前值，当应用程序启动时，该值为0。然后，我们将点击事件添加到我们的按钮中，每个按钮都分派它们相应的动作。然后，我们所做的就是再次将h1设置为状态的值，瞧！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/0dd01e59ea9e2d9edd7406ed029007ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBVnZiv5YusEfTenu9dCvw.png"/></div></div></figure><p id="c8d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一个电子app里的工作Redux商店！</p><h1 id="25a5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="988f" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">正如我在本文开头所说的，在我们的情况下使用Redux可能完全是矫枉过正。也就是说，在React的上下文之外选择使用它让我们专注于它背后的技术和推理，而不必担心任何与React相关的事情。在电子环境中使用它也很酷。</p><p id="98df" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">也就是说，我希望你能从这篇文章中学到一些东西。我鼓励你尝试一下，看看你还能用它做些什么。也许清理造型，添加更多的减速器，也许做一个成熟的计算器。作为一名开发人员，你有一种强大的能力，可以把什么都变成什么。</p><p id="0ee7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">github:<a class="ae ks" href="https://github.com/BrockHerion/electron-redux/tree/master" rel="noopener ugc nofollow" target="_blank">https://github.com/BrockHerion/electron-redux/tree/master</a></p><p id="b044" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nb">更多内容尽在</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nb">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Anti-Corruption-Layers to Your Web Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将反腐败层添加到您的Web应用程序中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-anti-corruption-layers-to-your-web-application-892a29d86840?source=collection_archive---------18-----------------------#2021-04-19">https://javascript.plainenglish.io/how-to-add-anti-corruption-layers-to-your-web-application-892a29d86840?source=collection_archive---------18-----------------------#2021-04-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/dec618a290dd2b8e7a83227c5b6ab853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HSlrojidXoU8tTlH"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yancy Min</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="83d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我已经在我的React + Redux应用程序中使用反腐败层有一段时间了。当您接收的异步数据很难处理或者在进入应用程序状态之前需要一些清理时，这是一个很有帮助的设计模式。</p><h2 id="7b62" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">什么是反腐败层？</h2><blockquote class="lr ls lt"><p id="4b6e" class="ka kb lu kc b kd ke kf kg kh ki kj kk lv km kn ko lw kq kr ks lx ku kv kw kx ig bi translated">反腐败层是不共享相同语义的不同子系统之间的层。</p></blockquote><p id="f529" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对我来说，这些层是在数据进入我的全局状态之前或离开之后增强或转换数据的功能。</p><p id="9b7b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将展示一些简单的例子，说明我如何使用反腐败层来使全球状态管理对我自己来说更容易一些。</p><h2 id="a7db" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">增强数据</h2><p id="f552" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">假设您希望收到一条用户记录，其结构如下:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="7013" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你需要建立一个类似这样的页面:</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/87158f1f4b186986d9f1356ce4efb0a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CfiFFZjET9g6ezuY1WiIIA.png"/></div></div></figure><p id="3c75" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我喜欢我的组件做尽可能少的工作，所以我将创建一个新的接口，它带有一些扩展我的原始用户的辅助变量。我将把扩展版本保存到我的应用程序状态。</p><p id="fe25" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将添加三个新值来简化UI的呈现。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="2b31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我需要添加两个函数，一个接受一个IUser并返回我的IUserState。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="684f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另一个获取IUserState并返回IUser。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="aa8b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将在用户进入我的应用程序之前和它被发送到我的后端之前使用这两个函数。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="4d81" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我有了一个反腐败层来帮助我更容易地构建界面。</p><h2 id="26cf" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">转换数据</h2><p id="6250" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">一个物体被分割成许多组件是很常见的。</p><p id="3464" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在前面定义的用户对象中，有一个名为billingInfo的可选字段。在大多数情况下，我会将用户的账单信息分离到不同的组件中。在这种情况下，我将在我所在的州为billing分配它自己的部分。</p><p id="c2b7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这次我将创建两个函数，一个将billingInfo与用户分离，另一个将它添加回来。</p><p id="0657" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些是我将要使用的模型:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8ce6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我需要两个函数来进行转换:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6753" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们在与之前相同的位置添加函数:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="dd1f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有了这个，我的状态更类似于我正在构建的UI视图。</p><p id="da58" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lu">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lu">plain English . io</em></a></p></div></div>    
</body>
</html>
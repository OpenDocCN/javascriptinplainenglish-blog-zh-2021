<html>
<head>
<title>How to Use Observables with Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在普通JavaScript中使用Observables</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-observables-with-vanilla-javascript-aca40a7590ff?source=collection_archive---------2-----------------------#2021-10-20">https://javascript.plainenglish.io/how-to-use-observables-with-vanilla-javascript-aca40a7590ff?source=collection_archive---------2-----------------------#2021-10-20</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="6efb" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph">提示和技巧</h2><div class=""/><div class=""><h2 id="e72b" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">没有使用框架，只是纯香草JavaScript。</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/263bf4e2fbdae002793f7cc8f04a993d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PJvcA9oyInKvoBItnRgz7Q.png"/></div></div></figure><p id="831a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">当我只是为了好玩而做兼职项目时，我想写一个JavaScript脚本来调用REST API，并最终在网页上做一些很酷的东西。它是纯粹的普通JavaScript，没有使用花哨的框架甚至库。</p><p id="82e6" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">首先，我想到用<strong class="ld jb">承诺</strong>打电话，这对我来说很容易。我已经做过无数次了。然而，这给了我很大的打击——为什么我不用<strong class="ld jb"> Observables？</strong>我知道普通的JavaScript本身不支持Observables。但是我不能自己实现吗？我就是这么做的。</p></div><div class="ab cl lx ly hv lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ik il im in io"><div class="kq kr ks kt gu me"><a href="https://medium.com/subscribe/@eng_ahmed.tarek" rel="noopener follow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">订阅艾哈迈德的时事通讯？</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">订阅艾哈迈德的时事通讯📰直接获得最佳实践、教程、提示、技巧和许多其他很酷的东西…</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">medium.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms kz me"/></div></div></a></div></div><div class="ab cl lx ly hv lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ik il im in io"><h1 id="4f3f" class="mt mu ir bd mv mw mx my mz na nb nc nd kg ne kh nf kj ng kk nh km ni kn nj nk bi translated">这是我思考问题的方式</h1><ol class=""><li id="156a" class="nl nm ir ld b le nn lh no lk np lo nq ls nr lw ns nt nu nv bi translated">可观察对象本身是一种新的对象类型，称为<strong class="ld jb"> Subject。</strong></li><li id="9554" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">这个<strong class="ld jb">主题</strong>对象应该公开<code class="fe ob oc od oe b">subscribe</code>和<code class="fe ob oc od oe b">next</code>函数。</li><li id="221e" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated"><code class="fe ob oc od oe b">subscribe</code>应被观察者调用，订阅可观察的数据流。</li><li id="ed44" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated"><code class="fe ob oc od oe b">next</code>应由<strong class="ld jb">主题</strong>所有者调用，以便在任何可用的时候推送/发布新数据。</li><li id="57b3" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">此外，我希望<strong class="ld jb">主题</strong>的所有者能够知道何时没有观察者对其数据感兴趣。这将使<strong class="ld jb">主题</strong>所有者能够决定他是否仍然想要获取数据。</li><li id="0cef" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">此外，<strong class="ld jb">主题的所有者应该能够知道至少一个观察者何时开始对其数据感兴趣。这将给予主题所有者对其数据流和任何相关操作的更多控制。</strong></li><li id="9d69" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">现在回到<strong class="ld jb">观察者</strong>。他应该可以在任何时候从主题中取消订阅。</li><li id="c179" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">这就引出了一个新的对象类型，叫做<strong class="ld jb"> Subscription。</strong></li><li id="987c" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated">这个<strong class="ld jb">订阅</strong>对象应该公开一个<code class="fe ob oc od oe b">unsubscribe</code>函数。</li><li id="d8d6" class="nl nm ir ld b le nw lh nx lk ny lo nz ls oa lw ns nt nu nv bi translated"><code class="fe ob oc od oe b">unsubscribe</code>应由<strong class="ld jb">观察者</strong>在他想要停止监听来自<strong class="ld jb">主体</strong>的数据流时调用。</li></ol><p id="bafb" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">遵循这些规则，我提出了下面的实现。</p><h1 id="7c27" class="mt mu ir bd mv mw of my mz na og nc nd kg oh kh nf kj oi kk nh km oj kn nj nk bi translated">履行</h1><h2 id="72a8" class="ok mu ir bd mv ol om dn mz on oo dp nd lk op oq nf lo or os nh ls ot ou nj ix bi translated">签署</h2><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="ov ow l"/></div></figure><p id="3aff" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">注意<strong class="ld jb">订阅</strong>只是在<code class="fe ob oc od oe b">unsubscribe</code>函数被调用时通知<strong class="ld jb">主体</strong>。</p><h2 id="1346" class="ok mu ir bd mv ol om dn mz on oo dp nd lk op oq nf lo or os nh ls ot ou nj ix bi translated">科目</h2><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="ov ow l"/></div></figure><h2 id="9108" class="ok mu ir bd mv ol om dn mz on oo dp nd lk op oq nf lo or os nh ls ot ou nj ix bi translated">在主题所有者的某个地方</h2><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="ov ow l"/></div></figure><h2 id="cc0b" class="ok mu ir bd mv ol om dn mz on oo dp nd lk op oq nf lo or os nh ls ot ou nj ix bi translated">在观察者的某个地方</h2><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="ov ow l"/></div></figure><p id="f3c2" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">就这样，一切都很顺利，我为自己的成就感到骄傲。</p><p id="1c11" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">所以，妙语是用普通JavaScript编码并不总是等于写无聊的代码，你可以让它变得更有趣😃</p></div><div class="ab cl lx ly hv lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ik il im in io"><h1 id="109f" class="mt mu ir bd mv mw mx my mz na nb nc nd kg ne kh nf kj ng kk nh km ni kn nj nk bi translated">希望这些内容对你有用。如果您想支持:</h1><p id="3da3" class="pw-post-body-paragraph lb lc ir ld b le nn kb lg lh no ke lj lk ox lm ln lo oy lq lr ls oz lu lv lw ik bi translated">如果您还不是<strong class="ld jb">中型</strong>会员，您可以使用<a class="ae pa" href="https://medium.com/@eng_ahmed.tarek/membership" rel="noopener"> <strong class="ld jb">我的推荐链接</strong> </a>，这样我就可以从<strong class="ld jb">中型</strong>中获得您的一部分费用，您无需支付任何额外费用。订阅<br/><a class="ae pa" href="https://medium.com/subscribe/@eng_ahmed.tarek" rel="noopener"><strong class="ld jb">我的简讯</strong> </a>将最佳实践、教程、提示、技巧和许多其他很酷的东西直接发送到您的收件箱。</p></div><div class="ab cl lx ly hv lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ik il im in io"><h1 id="50be" class="mt mu ir bd mv mw mx my mz na nb nc nd kg ne kh nf kj ng kk nh km ni kn nj nk bi translated">其他资源</h1><p id="57a3" class="pw-post-body-paragraph lb lc ir ld b le nn kb lg lh no ke lj lk ox lm ln lo oy lq lr ls oz lu lv lw ik bi translated">这些是你可能会感兴趣的其他资源。</p><div class="pb pc gq gs pd me"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-set-javascript-promise-timeout-7d51c87bc38e"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">如何设置JavaScript承诺超时</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">只是不要永远等待承诺的实现，你需要设定自己的条件。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="pe l mp mq mr mn ms kz me"/></div></div></a></div><div class="pb pc gq gs pd me"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-customize-webpages-ui-behavior-using-javascript-userscripts-7b6a090e0135"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">使用JavaScript用户脚本定制网页用户界面/行为</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">即使你不拥有这个网页，你仍然可以附上你的JavaScript用户脚本。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="pf l mp mq mr mn ms kz me"/></div></div></a></div><div class="pb pc gq gs pd me"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-get-freelancers-new-projects-notifications-on-your-slack-channel-69c9c74d3220"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">如何在你的Slack频道上获得自由职业者的新项目通知</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">这是一个设置用户脚本的问题，我将为您提供。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="pg l mp mq mr mn ms kz me"/></div></div></a></div><div class="pb pc gq gs pd me"><a href="https://betterprogramming.pub/twitter-auto-retweet-bot-with-node-js-and-typescript-4d6eaf24c0ab" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">用Node.js和TypeScript构建一个Twitter自动转发机器人</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">了解如何创建一个Twitter机器人来转发任何带有特定关键字或标签的推文</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">better编程. pub</p></div></div><div class="mn l"><div class="ph l mp mq mr mn ms kz me"/></div></div></a></div><div class="pb pc gq gs pd me"><a href="https://levelup.gitconnected.com/paging-partitioning-main-equations-to-make-it-easy-44fe89d5290b" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd jb gz z fq mj fs ft mk fv fx ja bi translated">分页/分区—简化这一过程的主要等式</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">最后，这是您理解分页/分区主要等式并学习如何在代码中应用它们的机会。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="mn l"><div class="pi l mp mq mr mn ms kz me"/></div></div></a></div><p id="56ac" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">希望你觉得读这个故事和我写它一样有趣。</p></div><div class="ab cl lx ly hv lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ik il im in io"><p id="fd8e" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><em class="pj">更多内容请看</em><a class="ae pa" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="pj">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
# 每个测试自动化工程师都会犯的三大错误

> 原文：<https://javascript.plainenglish.io/top-3-mistakes-every-test-automation-engineer-make-a1267de78288?source=collection_archive---------13----------------------->

![](img/9a2ecb97f144024ab95ed2b0037c1588.png)

Top 3 mistakes Test Automation Engineer makes!

在这篇文章中，我想和你们谈谈我见过的每个测试自动化工程师在他们职业生涯的某个阶段犯的前三个错误。所以让我们开始吧-

# **错误 1:在代码中使用“睡眠”——**

![](img/67c6da0f4d563ed0e8309a86c57a8aaf.png)

Example of a test using sleep (pause)

这是我见过的每个人在需要“修复”测试时最常犯的错误之一。现在，也许你已经知道或者已经听说在你的代码中使用“睡眠”是不好的，但是让我们来看看为什么这是不好的

## 测试需要更长时间才能完成

这是显而易见的，你正在添加硬编码睡眠，当然这将需要更长的时间来完成。这很重要，因为你想要更快的反馈，这是敏捷方法的要点，如果你的一些测试需要 30 分钟到一个小时甚至更长时间，那会在你的构建管道中增加很多额外的时间。

如果你在想，我知道我在这里加了 2 秒钟，谁在乎没人会注意到，那么这就把我们带到了下一点。

## 在没有意识到的情况下使用“睡眠”

在下面的图片中，我们使用了一个叫做`.open()`的方法，在那之后，我们等待了 2 秒钟以确保页面加载。

![](img/094df847360592325ad6361c6405c589.png)

Calling the .open() method in the test

但是，让我们了解一下在`.open()`方法内部发生了什么。在这里，我们再次等待 2 秒钟。所以最有可能的是，在前面添加了 2 秒等待的人没有意识到这个等待已经在这个方法中了。

![](img/3ebc2de101f82d598b20c622e562ec7e.png)

.open() method implementation

虽然总共 4 秒钟的等待看起来没那么糟糕，但是想想那些有几十个或几百个文件的大型项目，如果你到处都在使用 sleep 命令，这将是一个大问题。

## 使你的测试不稳定(剥落)

添加睡眠会使您的测试不稳定，因为您不知道等待特定页面或元素加载需要多长时间。再次看看我们之前的例子——

*   当他们写最初的测试时，人 A 增加了 2 秒
*   由于速度太慢，B 有 2 秒的问题，所以他们最后多加了 2 秒

现在想象一下，如果你在一个很慢的环境中运行你的测试，那么这些测试可能会再次失败，所以你所做的就是返回并给你的测试增加更多的时间，这又一次把我们带回到整个问题上！

好了，现在我希望你已经意识到了使用睡眠命令的问题，那么我们应该怎么做呢？

> *99%的时候你可以用适当的‘等待’命令替换‘睡眠’命令*

如果你在想为什么只有 99%？这是因为您可能会遇到一些等待命令不起作用的情况，这确实是一个极端的情况，但我会诚实地说，是的，有时您会遇到这些情况。在这种特殊的情况下，使用睡眠是好的，但是回到那个问题上来，想想是否有更好的方法来实现那个解决方案。

# 错误 2:过度复杂的测试

![](img/33ec8c09cdd15ae22a06aa4b342400fe.png)

Example of an overcomplicated test

这些年来我看到的另一个常见错误是编写过度复杂的测试，如上图所示。上图中需要注意的一个关键点是，底部有 180，000 毫秒，即增加了 3 分钟的超时，因为测试需要这么长时间才能完成。

所以如果你正在编写这样的测试，那么让我们来谈谈编写这样的测试的缺点——

## 不知道测试的目的是什么

这一点很有趣，因为有时候我写了又长又复杂的测试，几个月后当我回来的时候，我不知道我的测试要做什么。当然，你可以想象其他团队成员在阅读这种代码时的感受(我只能说，我不想在那个时候靠近他们！)

## 测试需要很长时间才能完成

这是显而易见的，当你写长测试时，也需要很长时间来完成，这就是为什么我们在上面的图片中看到 3 分钟的超时。

## 较长的测试会导致测试剥落

当我们写长测试时会发生什么？嗯，长时间的测试通常更不稳定，因为有太多的事情正在进行，因此，失败的机会更多。

## 代码调试困难

这就把我们带到了最后一点:当测试失败的时候，哦，天哪！试着调试这个祝你好运。实际上，您将运行一个需要 3-5 分钟完成的测试，并且您将尝试找出问题到底出在哪一行以及如何解决它。如果你还没有遇到这个问题，那么我会说你很幸运，因为这是非常痛苦的工作。

那么我们应该怎么做呢？我是这样想的—

> 测试应该专注于一次做一件事。

现在，不要把这种说法放在心上，它可能是你和你的团队决定的事情，可能是在合理的时间内(理想情况下不到一分钟)完成的 1 个特性、1 个组件、1 个 E2E 流程。

只要测试有一个人人都理解的单一目的，我认为这就足够好了。

# 错误#3:测试依赖

![](img/48cb876b1ec117bc57c03b4a70df9d1a.png)

Example of one test depending on another test

在上面的例子中，第二个测试依赖于第一个测试，因为这是我们打开测试页面的 URL 的地方。这很糟糕，原因如下:

## 失败时无法运行单独测试

如果第二个测试由于某种原因失败了，你将不能运行那个测试，因为它依赖于我们打开 URL 的第一个测试。您唯一的选择是运行这两个测试，这将花费更长的时间来执行，或者您将不得不重构您的测试，我们将很快谈到这一点。

## 改变测试顺序会导致测试失败

如果其他人来了，只是简单地改变了这些测试的顺序，它将再次开始失败，因为他们的测试伙伴与之前的顺序不同。这是另一个大问题，因为现在你需要知道这些测试的顺序，以便将来运行它们。

## 使得重构代码变得困难

现在，当您决定在测试中进行重构时，这将是非常痛苦的，因为您需要了解所有这些依赖项是如何工作的，并且必须修复所有这些，以便能够进行任何类型的重构，这最终将花费您大量的时间。

那么我们应该怎么做呢？

> 测试应该是隔离的/独立的。

您的目标应该是编写可以独立运行的测试，而不依赖于任何其他测试甚至任何其他数据。如果您想在将来进行任何重构或者简单地重新组织您的测试，这将为您提供更多的灵活性。

# 让我们回顾一下

让我们对本文中涉及的所有内容做一个快速总结-

*   **避免在代码中使用“睡眠”**
*   **不要编写冗长复杂的测试**
*   **测试不应该互相依赖**

希望，如果你避免这些错误，你可以创建一个稳定和有效的测试框架。

如果你喜欢这篇文章，并且想学习更多关于测试自动化和最佳实践的知识，那么你应该看看我在 [WebdriverIO](https://www.udemy.com/course/webdriverio-complete-beginner-course/?referralCode=5190D58FC784B9F4E1AD) 上的新课程，在那里我教你如何使用行业标准的最佳实践来实现 Web 自动化。

你可以看看下面的课程宣传片:

*更多内容请看*[***plain English . io***](http://plainenglish.io/)
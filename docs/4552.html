<html>
<head>
<title>How to Add a Right-Click Menu to a Webpage?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何给网页添加右键菜单？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-a-right-click-menu-to-a-webpage-6dd58e1935fa?source=collection_archive---------13-----------------------#2021-09-10">https://javascript.plainenglish.io/how-to-add-a-right-click-menu-to-a-webpage-6dd58e1935fa?source=collection_archive---------13-----------------------#2021-09-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1e3baf9b2dc9c27c03705d85852e7cce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zIeMyIYPwFkRtBJu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@crocodileforest?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Heri Susilo</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c19f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们可能想在网页上添加右键菜单。</p><p id="b2bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript给网页添加右键菜单。</p><h1 id="0279" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">监听上下文菜单和点击事件</h1><p id="aa1e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在右键单击时打开上下文菜单，我们将一个事件监听器附加到<code class="fe me mf mg mh b">contextmenu</code>事件，并调用<code class="fe me mf mg mh b">preventDefault</code>来阻止事件监听器中的默认操作。</p><p id="ec00" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">默认操作是打开浏览器的上下文菜单。</p><p id="34a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，我们可以添加代码来打开菜单。</p><p id="3fac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了在页面上单击鼠标左键时关闭菜单，我们添加了一个<code class="fe me mf mg mh b">click</code>事件监听器，然后设置关闭菜单的样式。</p><p id="e8ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们编写以下HTML来创建上下文菜单:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="902f" class="mq lc iq mh b gy mr ms l mt mu">&lt;ul id="ctxMenu"&gt;<br/>  &lt;li&gt;Save&lt;/li&gt;<br/>  &lt;li&gt;Save As&lt;/li&gt;<br/>  &lt;li&gt;Open&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="e67c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过编写添加一些CSS样式:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5b71" class="mq lc iq mh b gy mr ms l mt mu">#ctxMenu {<br/>  border: 1px solid black;<br/>  padding: 10px;<br/>  list-style-type: none;<br/>  display: none;<br/>  position: absolute;<br/>  width: 200px;<br/>}</span></pre><p id="b422" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了一个边框并设置了位置<code class="fe me mf mg mh b">absolute</code>，这样上下文菜单将显示我们右击鼠标的位置。</p><p id="add7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">display</code>设置为<code class="fe me mf mg mh b">none</code>，这样我们最初就不会显示菜单。</p><p id="ad55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们通过编写以下JavaScript代码来添加事件侦听器:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="cde8" class="mq lc iq mh b gy mr ms l mt mu">const ctxMenu = document.getElementById("ctxMenu");</span><span id="1b67" class="mq lc iq mh b gy mv ms l mt mu">window.addEventListener("contextmenu", (event) =&gt; {<br/>  event.preventDefault();<br/>  ctxMenu.style.display = "block";<br/>  ctxMenu.style.left = (event.pageX - 10) + "px";<br/>  ctxMenu.style.top = (event.pageY - 10) + "px";<br/>});</span><span id="e9ca" class="mq lc iq mh b gy mv ms l mt mu">window.addEventListener("click", (event) =&gt; {<br/>  ctxMenu.style.display = "";<br/>  ctxMenu.style.left = "";<br/>  ctxMenu.style.top = "";<br/>});</span></pre><p id="f09a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">window.addEventListener</code>来监听整个页面上的事件。</p><p id="4457" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">contextmenu</code>事件处理程序中，我们调用<code class="fe me mf mg mh b">event.preventDefault</code>来阻止我们右击时的默认动作，即打开浏览器的上下文菜单。</p><p id="9515" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">display</code>设置为<code class="fe me mf mg mh b">'block'</code>以将<code class="fe me mf mg mh b">ul</code>显示为块级元素。</p><p id="bec2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且我们将<code class="fe me mf mg mh b">left</code>和<code class="fe me mf mg mh b">top</code>设置到鼠标指针被右击的位置。</p><p id="5433" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">click</code>事件监听器中，我们将<code class="fe me mf mg mh b">display</code>、<code class="fe me mf mg mh b">left</code>和<code class="fe me mf mg mh b">top</code>属性全部设置为空字符串，以移除所有样式并使用CSS中的样式。</p><p id="59a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们右击页面时，我们看到的是上下文菜单，而不是浏览器的菜单。</p><h1 id="bd29" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d7ec" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">通过创建自己的HTML、CSS和JavaScript代码，我们可以在网页上创建自己的上下文菜单。</p><p id="9e94" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
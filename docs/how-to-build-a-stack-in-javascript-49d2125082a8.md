# 如何在 JavaScript 中构建堆栈

> 原文：<https://javascript.plainenglish.io/how-to-build-a-stack-in-javascript-49d2125082a8?source=collection_archive---------16----------------------->

![](img/3fef243b47276090c216112149e1f5fc.png)

Photo by [Tatiana Rodriguez](https://unsplash.com/@tata186?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

无论你是否注意到，数据结构都是你生活中不可或缺的一部分。从在杂货店排队到像教科书中的术语表这样更明显的东西，它们无处不在。然而，它们在软件工程和技术面试中被问到的算法面试问题中特别重要。

# 大量

堆栈是工程和计算机科学中使用的一种重要的数据结构，它有一些特别有用的属性。栈可以被描述为后进先出(LIFO)数据结构。这意味着每次你想移除一个项目时，堆栈会为你提供最近添加的项目。想象一下，你在一家餐厅的厨房工作，你需要为一份订单上菜。你面前有一大堆餐盘。现在想象你从盘子堆里抓起一个盘子。你伸手去拿那堆东西的哪一部分？从逻辑上讲，你会从最上面拿一个，开始在上面安排饭菜。虽然你可以拿起一半的盘子，从中间拿走一个，然后把剩下的盘子放回盘子堆的顶部，但这需要做更多的工作。

![](img/5812bbd9826ab8131fa351549e33d6fe.png)

Photo by [Mick Haupt](https://unsplash.com/@rocinante_11?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

现实生活中堆栈的其他好例子是浏览器历史、衣服(在脱下外套之前很难脱掉衬衫)，或者任何垂直存放的东西，比如一些餐椅。

# 效率

现在我们已经大致了解了堆栈的工作原理以及它们在现实生活中的用途，让我们来谈谈它们的效率。数据结构的效率通常使用[大 O 符号](https://en.wikipedia.org/wiki/Big_O_notation)来衡量时间复杂度和空间复杂度，但是当简单地评估数据结构时，我们通常只关心时间复杂度。我们也经常只对最坏的情况感兴趣(即当有大量数据时)，因为少量数据的时间复杂度效率的差异通常是微不足道的或不可靠的。

堆栈非常适合插入和删除，因为它们保持一个指向最近添加的项的活动引用。正因为如此，它们插入和删除的时间复杂度被认为是常数时间(即`O(1)`)。但是，如果您需要能够查找除了添加到堆栈中的最新项之外的任何其他项，您可能希望使用一种不同的数据结构，这种数据结构更适合于这种情况。虽然您可能认为堆栈具有线性查找时间复杂度(即`O(n)`)，但是您需要删除添加到目标项目之后的所有项目才能读取它。

综上所述，如果使用得当，堆栈是非常有效的。如果你想比较常见的数据结构和它们的效率，你可以看看这个流行的[备忘单](https://www.bigocheatsheet.com/)。

# 用 JavaScript 实现

一般来说，堆栈需要能够推送和弹出最新的项目，并允许用户读取其长度。下面是 JavaScript 中一个基本堆栈的`class`实现。

让我们来谈谈这是如何工作的。在第 2 行到第 5 行，我们用附加到实例的`data`和`size`属性初始化堆栈`class`。如果堆栈在没有任何初始数据的情况下被实例化，`data`属性将被分配一个空数组，`size`属性将为 0。

您可能已经注意到，我对第 7 行和第 12 行定义的实例方法使用了[箭头函数表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)。因为 arrow 函数表达式没有自己的`this`绑定，所以函数定义中对`this`的引用将评估为在定义函数的作用域中找到的`this`。这只是一个小小的方便，但我认为这是值得解释的。

我还想请你注意第 15 行的陈述。这缩短了`data`数组的长度，并有效地删除了索引超过该长度的所有项目。从理论上讲，这种实现可以根据所使用的 JavaScript 引擎而变化，出于本文的考虑，我假设这是一个恒定时间的操作。然而，由于我们正在跟踪我们自己的`size`属性，当我们`pop`关闭一个项目时，我们甚至不需要收缩数组。我们可以删除数组中的条目，并减少变量`size`。

您可能已经注意到的一件事是，我们的`data`和`size`属性被分配到实例上，这可以被认为是“泄漏的”一些开发人员可能会直接改变`data`或`size`属性，并可能破坏堆栈功能。让我们看看如何通过功能实现来解决这个问题。

在这个实现中，我利用一个 JavaScript 闭包来封装我们的`data`和`size`值。在 JavaScript 中，当一个函数被声明时，它可以访问创建它的词法环境。因此，通过在我们的`Stack`函数中创建局部变量，并使用引用这些变量的方法返回一个对象，我们可以完全控制如何访问和操作这些变量。这将有助于减少与泄漏变量相关的错误，它就像我们基于类的解决方案一样可读和可扫描。

# 结论

栈在软件工程和日常生活中是非常有用的数据结构。正确使用时，它们对于数据插入和删除特别有效。希望你已经了解了如何用 JavaScript 实现它们，但是如果你有任何问题，请在评论中告诉我！

*最初发表于*[](https://codingbootcampguides.com/how-to-build-a-stack-in-javascript)**。**

**更多内容请看*[***plain English . io***](http://plainenglish.io)*
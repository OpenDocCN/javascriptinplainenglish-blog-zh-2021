# JavaScript 字符串不变性

> 原文：<https://javascript.plainenglish.io/javascript-string-immutability-c8a6c8d23167?source=collection_archive---------8----------------------->

我看到了很多关于字符串不变性的困惑，我想我会尽我所能来澄清这对困惑的人意味着什么。

经常有人向新程序员指出“字符串是不可变的”然而，仅仅陈述这个事实并不能阐明当我们写代码时它是如何在功能上应用的。往往初学者在学习的时候，“换”弦是一直在发生的。你学习如何执行操作和切片；将旧变量重新声明为新字符串。

![](img/cc958ac1f007cfdc942b2ef3b4fa0380.png)

这就是它可能变得令人困惑的地方，因为如果你不真正理解发生了什么，很容易认为我们实际上是在改变原来的字符串。*但那只是它的*，你并没有改变*原来的字符串；*你在改变*变量*。您对原始字符串执行*操作*，将返回对原始字符串*执行操作的*结果*，而不改变*原始字符串。

理解了这一点，就更清楚为什么每次要存储字符串操作的结果时，都必须重新分配变量(或者创建一个新的变量)。

假设你有一个变量`let x = 'string'`——即使你做了`x[0] = 't'`，你也不会像你期望的那样把`x`变成`'ttring'`。`x`仍将等于`'string'`。然而，这并不意味着你不能得到你想要的结果。假设你想用东西填充一根绳子。JavaScript ````模板文字中有一个方便的工具；它们允许你使用变量来构造字符串。所以，如果你有`x`并且你想把`'*'`加到 x 的开始和结束，并且用`'t'`替换`x[0]`，你可以做`x = `*t${x.slice(1)}*`和现在的`x = '*ttring*'`

这里发生的事情是，我们将`x`赋值给原始字符串的一个片段的值，从索引 1 `'tring'`开始，在该片段之前有“t ”,在两侧有`'*'`。

最终，我们仍然没有改变原来的字符串；`x`现在指向一个新的不同的字符串，该字符串是对`x`的先前值(原始字符串)执行操作的结果。结果是同一个变量保存了一个完全不同的字符串，原来的字符串现在丢失了或被垃圾回收了(如果没有存储在其他地方的话)。尽管它可能会丢失，但从功能上来说，我们从未更改过原始字符串。

*更多内容看* [***说白了. io***](http://plainenglish.io/) ***。***
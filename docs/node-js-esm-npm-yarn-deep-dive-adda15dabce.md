# ä¸ºä»€ä¹ˆ node_modules æ˜¯å®‡å®™ä¸­æœ€é‡çš„å¯¹è±¡

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/node-js-esm-npm-yarn-deep-dive-adda15dabce?source=collection_archive---------1----------------------->

## [ç½‘é¡µå¼€å‘](https://rakiabensassi.medium.com/list/software-engineering-7a179a23ebfd)

## Node.js æ¨¡å—ç³»ç»Ÿã€å…¶è§£æç®—æ³•åŠå…¶éšæ—¶é—´æ¼”å˜çš„æ¼”ç»ƒ

![](img/04143b7a65896799f005ef671a40fc53.png)

Photo by [Guillermo Ferla](https://unsplash.com/@gferla?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral) (edited by author, [node_modules image from Reddit](https://www.reddit.com/r/ProgrammerHumor/comments/6s0wov/heaviest_objects_in_the_universe/))

å¦‚æœä½ ç†Ÿæ‚‰æ–°é—»ï¼Œä½ å¯èƒ½å¬è¯´è¿‡ TypeScript 4.5 å·²ç»å°†å¯¹ Node.js çš„ ECMAScript (ESM)æ”¯æŒæ¨è¿Ÿåˆ°æœªæ¥çš„ç‰ˆæœ¬ï¼Œå› ä¸ºæ‹…å¿ƒç”Ÿæ€ç³»ç»Ÿçš„å°±ç»ªæ€§ã€‚

ä½†æ˜¯è¿™ä¸ªç‰¹æ€§åœ¨ [TypeScript](https://levelup.gitconnected.com/features-in-the-new-typescript-release-e5ef6ebba750) ä¸­çš„å­˜åœ¨æˆ–ä¸å­˜åœ¨å®é™…ä¸Šæ„å‘³ç€ä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘å¯¹æ‰¾å‡ºè¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆçš„å¥½å¥‡å¿ƒè®©æˆ‘åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€äº†ä¸€å †æ–‡ç« å¹¶é˜…è¯»äº†å®ƒä»¬ã€‚å…¶ä¸­ä¸€ä¸ªå¸–å­å¼•èµ·äº†æˆ‘çš„æ³¨æ„ï¼Œä¸Šé¢æœ‰ä¸€å¼ å®‡å®™ä¸­æœ€é‡ç‰©ä½“çš„æœ‰è¶£å›¾ç‰‡ã€‚å®ƒæ˜¾ç¤ºå‡ºæ¯”å¤ªé˜³ã€ä¸­å­æ˜Ÿç”šè‡³é»‘æ´è¿˜è¦é‡ã€‚

è™½ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªä¸¥è‚ƒçš„æ¯”è¾ƒï¼Œä½†æˆ‘çŸ¥é“è¿™å¹¶ä¸æ˜¯å®Œå…¨é”™è¯¯çš„ã€‚

`npm`åº“å®é™…ä¸Šæ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„[åŒ…åº“](http://www.modulecounts.com/) ï¼Œå®ƒçš„ CLI çš„æ ¸å¿ƒä¾èµ–`[@npmcli/arborist](https://levelup.gitconnected.com/7-nodejs-vulnerabilities-149094e441c2#2f72)`æ­£åœ¨æ‰§è¡Œä¸€ä¸ªå¤æ‚çš„ç®—æ³•ï¼Œä»¥ä¾¿ç®¡ç†`node_modules`æ ‘ï¼Œè§£å†³åŒ…ä¹‹é—´çš„å¾ªç¯å’Œé‡å è¿æ¥ã€‚

ä½†è¿™æ˜¯è®½åˆºå›¾ç‰‡çš„å”¯ä¸€åŸå› å—ï¼Ÿ

![](img/161e46b8e448a9c41c12ca5a42b2f639.png)![](img/c02e6c64104dea036d1bebacaa00beb1.png)

left: [@npmcli/arborist](https://github.com/npm/arborist) â€” right: npm is the biggest package repository in the world ([source](https://medium.com/@giltayar/native-es-modules-in-nodejs-status-and-future-directions-part-i-ee5ea3001f71))

æˆ‘çš„ Node.js ä¹‹æ—…å§‹äº 2014 å¹´â€”â€”å®ƒè¯ç”Ÿäº”å¹´åï¼Œå®ƒçš„åŒ…ç®¡ç†å™¨`npm`å‘å¸ƒå››å¹´åã€‚å½“æ—¶ï¼Œæˆ‘å¯¹ AMD å’Œ RequireJS ä¹‹ç±»çš„ JavaScript æ¨¡å—ç³»ç»Ÿæœ‰æ‰€äº†è§£ï¼Œä½†ç»“æŸæ—¶æˆ‘æå‡ºçš„é—®é¢˜æ¯”å¼€å§‹æ—¶å¤šå¾—å¤š:

*   Node.js ä¸­ä½¿ç”¨äº†å“ªäº›ä¸åŒçš„ JavaScript æ¨¡å—ç³»ç»Ÿï¼Ÿå®ƒä»¬å’Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ä½¿ç”¨çš„æ˜¯ä¸€æ ·çš„å—ï¼Ÿ
*   ESM æ”¯æŒä¸ºä½•å¦‚æ­¤é‡è¦ï¼Ÿ
*   `node_modules`æœ‰å“ªäº›ä¸åŒçš„å¤æ‚æ€§å’Œé—®é¢˜è®©äººä»¬æŠŠå®ƒæè¿°ä¸ºå®‡å®™ä¸­æœ€é‡çš„ç‰©ä½“ï¼Ÿ
*   ç¤¾åŒº[å¦‚ä½•è§£å†³](https://betterprogramming.pub/problem-solving-techniques-b1ed8b4c729f)ä¸`node_modules`çš„é—®é¢˜ï¼Ÿ
*   è¿™å’Œ`yarn`ç­‰æ–°çš„åŒ…ç®¡ç†å™¨çš„å‡ºç°æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ

å¦‚æœè¿™äº›é—®é¢˜å¼•å‘äº†æ‚¨çš„å¥½å¥‡å¿ƒï¼Œå¹¶ä¸”æ‚¨å¸Œæœ›æ‰©å±•æ‚¨å¯¹ Node.js ç”Ÿæ€ç³»ç»ŸåŠå…¶ä¸å®¢æˆ·ç«¯çš„å…³ç³»çš„äº†è§£ï¼Œæ‚¨å°†åœ¨ä¸‹é¢æ‰¾åˆ°ç­”æ¡ˆå’Œä¸€äº›æ›´ä»¤äººå…´å¥‹çš„äº‹å®ã€‚

```
**Table of Contents**[Module Systems in Node.js](#707f)
   âˆ˜ [CommonJS](#b7c4)
   âˆ˜ [ES Modules (Michael Jackson Scripts)](#99c0)
[Why is ES module support so important?](#8c7e)
[The Challenges of Using CJS and ESM Together](#0b7c)
   âˆ˜ [Introduction of new rules](#2614)
   âˆ˜ [Dual-mode Support: dual ESM/CJS packages](#e9ba)
[How Does Node.js Load Modules?](#8fb3)
[Plugâ€™nâ€™Play: Goodbye node_modules!](#df98)
[Final Thought](#f56c)
```

# Node.js ä¸­çš„æ¨¡å—ç³»ç»Ÿ

JavaScript é¢†åŸŸå·²ç»å‡ºç°äº†ä¸åŒç±»å‹çš„æ¨¡å—åŒ–ï¼Œå¦‚ RequireJS å’Œ AMDã€‚ä½†æ˜¯ Node.js æ˜¯å»ºç«‹åœ¨ CommonJS (CJS)æ¨¡å—ç³»ç»Ÿä¸Šçš„ã€‚

è¿™äº›æ¨¡å—ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§æ›´å¥½åœ°ç»„ç»‡å’Œæ„å»ºä»–ä»¬çš„ä»£ç åº“çš„æ–¹å¼ï¼Œå¹¶ä½¿ä»–ä»¬çš„åº”ç”¨ç¨‹åºæ›´æ˜“äºç®¡ç†ã€‚

## 1.CommonJS

CommonJS ä¸ºæœåŠ¡å™¨ç«¯ JavaScript å»ºç«‹äº†ä¸€ä¸ªæ¨¡å—ç”Ÿæ€ç³»ç»Ÿã€‚ä½†æ˜¯ï¼Œç”±äºæµè§ˆå™¨ä¸æ”¯æŒ CJSï¼Œå¼€å‘è€…åœ¨ babel ç­‰ transpilers çš„å¸®åŠ©ä¸‹ä¹Ÿåœ¨å®¢æˆ·ç«¯ä½¿ç”¨äº†å®ƒã€‚

åœ¨ CommonJS ä¸­ï¼Œå¯ä»¥ä½¿ç”¨`module.exports`åœ¨æ™®é€šçš„`js`æ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæ¨¡å—ï¼Œå¹¶ä½¿ç”¨`require()`å‡½æ•°å°†å…¶å¯¼å…¥åˆ°å¦ä¸€ä¸ª`js`æ–‡ä»¶ä¸­:

ä½ å¯ä»¥ç”¨`node index.js`è¿è¡Œè¿™ä¸ªä¾‹å­ã€‚

## 2.ES æ¨¡å—(è¿ˆå…‹å°”Â·æ°å…‹é€Šè„šæœ¬)

ECMAScript æˆ–(ES)æ˜¯ä¸€ç§ JavaScript æ ‡å‡†ï¼Œæ—¨åœ¨ç¡®ä¿ä¸åŒ web æµè§ˆå™¨ä¹‹é—´çš„ web åº”ç”¨ç¨‹åºçš„äº’æ“ä½œæ€§ï¼Œå®ƒä¹Ÿç”¨äºæœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åº(Node.js)ã€‚

*   **2015 å¹´ 6 æœˆ**ï¼ŒJavaScript ç”Ÿæ€ç³»ç»Ÿè¿æ¥äº† [ECMAScript 6 (ES2015)è§„èŒƒ](https://www.ecma-international.org/ecma-262/6.0/index.html)ä¸­ ES æ¨¡å—(ESM)çš„å®šä¹‰ã€‚
*   **2015 å¹´ 6 æœˆè‡³ 2017 å¹´ 9 æœˆ**ï¼Œå„å¤§æµè§ˆå™¨æ‰“ç€å¼€å‘è€…çš„æ——å·å¼€å§‹äº†å¯¹ ESM çš„å®éªŒæ€§æ”¯æŒã€‚

![](img/34a746b785f4f719e04b3624f8bc0760.png)

ECMAScript the standard for JavaScript ([source](https://medium.com/@shreyapd06/javascript-ecmascript-a18d3e688526))

ä¸ä½¿ç”¨`require()`å’Œ`module.exports`çš„ CommonJS ä¸åŒï¼Œåœ¨ es æ¨¡å—ä¸­ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨`import`å’Œ`export`è¯­å¥æ¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚

è¦å®šä¹‰ä¸€ä¸ª [ES æ¨¡å—](https://nodejs.org/api/esm.html)ï¼Œä½ éœ€è¦åœ¨ä¸€ä¸ªæ‰©å±•åä¸º`mjs`æˆ–*è¿ˆå…‹å°”æ°å…‹é€Šè„šæœ¬*çš„æ–‡ä»¶ä¸­ç¼–å†™ä½ çš„ä»£ç ã€‚

![](img/f2b0ead534d730c070df422e0309d86b.png)

mjs, or Michael Jackson Scripts ([source](https://medium.com/@giltayar/native-es-modules-in-nodejs-status-and-future-directions-part-i-ee5ea3001f71))

è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œ`es-module.mjs`:

Defining an ES module â€” es-module.mjs

è¦ä½¿ç”¨è¯¥æ¨¡å—ï¼Œæ‚¨éœ€è¦ä»å¦ä¸€ä¸ª`mjs`æ–‡ä»¶å¯¼å…¥`mjs`æ–‡ä»¶:

import an ES module in index.mjs

# ä¸ºä»€ä¹ˆ ES æ¨¡å—æ”¯æŒå¦‚æ­¤é‡è¦ï¼Ÿ

JS æ¨¡å—å¯ä»¥ç”¨åœ¨å®¢æˆ·ç«¯(æµè§ˆå™¨)ï¼Œä¹Ÿå¯ä»¥ç”¨åœ¨æœåŠ¡å™¨ç«¯( [Node.js](https://blog.logrocket.com/web-analytics-with-node-js/) )ã€‚æœ‰æ—¶ï¼Œä¸ºäº†å…¼å®¹æ€§ï¼Œä½ å¿…é¡»æŠŠä»£ç ä»ä¸€ç§æ¨¡å—æ ¼å¼è½¬æ¢æˆå¦ä¸€ç§æ¨¡å—æ ¼å¼ã€‚

æ‰€æœ‰è¿™äº›é€ æˆäº†æ··ä¹±è€Œå¤æ‚çš„ JavaScript æ¨¡å—çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡æ”¯æŒ Node.js ä¸­çš„ es æ¨¡å—æ¥æ”¹å–„è¿™ç§çŠ¶æ€ï¼Œä»è€Œå…è®¸ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç¼–å†™æ¨¡å—åŒ–çš„å¯é‡ç”¨ JavaScriptã€‚

æˆ‘ä»¬ç§°è¿™ç§ ***åŒæ„*** *æˆ–* ***é€šç”¨ç *** ï¼Œè¿™æ˜¯å¯èƒ½çš„ï¼Œå¦‚æœ:

1.  ä½ ä¸è¦åœ¨ä»£ç ä¸­ä½¿ç”¨æµè§ˆå™¨ä¸“ç”¨çš„æ–¹æ³•å’Œå˜é‡ï¼Œæ¯”å¦‚`window`å’Œ`document`ã€‚
2.  ä½ ä¸ä½¿ç”¨åƒ`server`å’Œ`fs`è¿™æ ·çš„åªæœ‰èŠ‚ç‚¹çš„æ–¹æ³•å’Œå˜é‡ã€‚
3.  å¦‚æœéœ€è¦è¿™æ ·çš„åœºæ™¯ï¼Œæ‚¨éœ€è¦å‘ä»£ç ä¸­æ·»åŠ æ¡ä»¶ï¼Œæˆ–è€…å°†å®ƒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œè¯¥å‡½æ•°æ¨¡æ‹Ÿæ›¿ä»£ç¯å¢ƒä¸­çš„é€»è¾‘ã€‚

`*console.log*`æ˜¯ä¸€ä¸ªåœ¨ Node.js å’Œæµè§ˆå™¨ä¸­å·¥ä½œçš„ä¾‹å­ã€‚

ç”±äºå¯¹*åŒæ„ä»£ç *å’Œ*æµè§ˆå™¨å…¼å®¹æ€§*éœ€æ±‚çš„çˆ†ç‚¸å¼å¢é•¿ï¼ŒNode.js ä¸å†æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç”Ÿæ€ç³»ç»Ÿï¼ŒESM æ”¯æŒæˆä¸ºå¿…å¤‡ã€‚

# å°† CJS å’Œ ESM ç»“åˆä½¿ç”¨çš„æŒ‘æˆ˜

åœ¨èƒ½å¤Ÿä» CJS è¿ç§»åˆ° ESM ä¹‹å‰ï¼Œç¬¬ä¸€æ­¥å°†æ˜¯å…è®¸ ES æ¨¡å—ä¸ CommonJS åœ¨åŒä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­å…±å­˜ï¼Œè¿™è¿œä¸æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡ã€‚

JavaScript è§„èŒƒåŒºåˆ†äº†:

*   ä¸€ä¸ªâ€œ ***æ¨¡å—*** â€ï¼Œå®šä¹‰ä¸ºâ€œ[ä¸¥æ ¼](https://2ality.com/2011/01/javascripts-strict-mode-summary.html)â€ï¼Œæ˜¯ä¸€ä¸ªæ‰©å±•åä¸º`mjs`çš„æ–‡ä»¶(ä¸€ä¸ª ES æ¨¡å—)ã€‚
*   ä¸æ˜¯ ES æ¨¡å—çš„â€œ ***è„šæœ¬*** â€å…·æœ‰`js`æ‰©å±•åï¼Œä¸å…è®¸ä½¿ç”¨`import from`è¯­å¥ã€‚

éµå¾ªè¿™ä¸ªè§„èŒƒå·²ç»å…è®¸ JavaScript å¼•æ“çŸ¥é“ä¸€ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ª ***æ¨¡å—*** è¿˜æ˜¯ä¸€ä¸ª ***è„šæœ¬*** å¹¶ä¸”ä½œä¸ºç»“æœå†³å®š ***æ‰§è¡Œ*** è¿˜æ˜¯ ***å¯¼å…¥*** å®ƒã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨ä¸¤ç§ä¸åŒçš„æ‰©å±•ä¸ä»…æ˜¯ä¸€ä¸ªç¾å­¦é—®é¢˜ï¼›å®ƒåœ¨ ESM å’Œ CJS ä¹‹é—´å»ºç«‹äº†ä¸€æ¡æŠ¤åŸæ²³ï¼Œå¹¶æå‡ºäº†ä¸€ä¸ªé—®é¢˜:æˆ‘ä»¬å¦‚ä½•æ‰èƒ½åœ¨ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿä¹‹é—´å»ºç«‹äº’æ“ä½œæ€§ï¼Ÿ

## æ–°è§„åˆ™çš„å¼•å…¥

ä¸ºäº†å¡«è¡¥è¿™ä¸ªç©ºç™½ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº† es æ¨¡å—çš„" ***è§„åˆ™"* "** å’Œ" ***äº’æ“ä½œæ€§è§„åˆ™* "** çš„å¼•å…¥ï¼Œå®ƒä»¬æä¾›äº†åœ¨åŒä¸€åº”ç”¨ä¸­ä½¿ç”¨ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿçš„æŒ‡å— **:**

1.  åªæœ‰æ‰©å±•åä¸º`mjs`çš„æ–‡ä»¶æ‰æ˜¯ ESM
2.  åªæœ‰æ‰©å±•åä¸º`js`çš„æ–‡ä»¶æ‰æ˜¯ CJS
3.  ESM å¯ä»¥ä½¿ç”¨`export` / `import`è¯­å¥ï¼Œä½†ä¸èƒ½ä½¿ç”¨`require`
4.  CJS å¯ä»¥ä½¿ç”¨`require`å¯¼å…¥ CJS
5.  CJS *åªèƒ½ä½¿ç”¨`await import()`æ‰èƒ½*å¯¼å…¥ ESM
6.  ESM *åªèƒ½ä½¿ç”¨*é»˜è®¤*è¯­å¥`import .. from ..`æ‰èƒ½*å¯¼å…¥ CJS

![](img/8ed8cc7eecb526ad8ec12060f8885b03.png)

Bridging the two module systems ([source](https://medium.com/@giltayar/native-es-modules-in-nodejs-status-and-future-directions-part-i-ee5ea3001f71))

ä¸‹é¢æ˜¯ä¸€ä¸ªåœ¨ ES æ¨¡å—ä¸­ä½¿ç”¨ CommonJS æ¨¡å—çš„ç¤ºä¾‹:

my-esm-module.mjs

å¦ä¸€ä¸ªæ˜¯åœ¨ CommonJS è„šæœ¬ä¸­ä½¿ç”¨ ES æ¨¡å—ã€‚è°ƒç”¨`await import()`æ„å‘³ç€åšè¿™ä»¶äº‹çš„ä»£ç åº”è¯¥æ˜¯ä¸€ä¸ª`async`å‡½æ•°:

my-cjs-module.js

## åŒæ¨¡æ”¯æŒ:åŒ ESM/CJS åŒ…

å…è®¸`npm`å°è£…åŒ…å«ä¸¤ä¸ªæ¨¡å—ç³»ç»Ÿ(*åŒæ¨¡*))å¯¹äºæ— ç¼è¿‡æ¸¡åˆ°æ²¡æœ‰ CommonJS çš„æœªæ¥éå¸¸é‡è¦ã€‚

ä¸ºäº†å®æ–½åŒæ¨¡å¼å¹¶ä¿ƒè¿›ä» CJS åˆ° ESM çš„è¿ç§»ï¼ŒNode.js ç»å†äº†ä»¥ä¸‹é‡Œç¨‹ç¢‘:

*   **2017 å¹´ 9 æœˆ:** [Node v8.5](https://nodejs.org/de/blog/release/v8.5.0/) è‡ªå¸¦å¯¹ ES æ¨¡å—çš„å®éªŒæ€§æ”¯æŒ:å¼€å‘è€…å¯ä»¥ä½¿ç”¨`--experimental-modules`æ ‡å¿—è¿è¡Œ ESMã€‚
*   **2017 å¹´ 9 æœˆâ€”2018 å¹´ 5 æœˆ:** [å„å¤§æµè§ˆå™¨å¼€å§‹æ”¯æŒ](https://caniuse.com/es6-module)æ— å¼€å‘è€…æ ‡å¿—çš„ ES æ¨¡å—è§„èŒƒã€‚
*   **2018 å¹´ 10 æœˆ:** ES æ¨¡å—åŒ…å«ä¸€ä¸ªåŒ…å«å¤šä¸ªé˜¶æ®µçš„è®¡åˆ’ï¼Œç”¨äºæ›¿æ¢å®éªŒå®æ–½ã€‚Node.js åº”è¯¥åœ¨ä¸ç ´åç°æœ‰ CommonJS æ¨¡å—çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½åœ°ä¸æµè§ˆå™¨ç±»ä¼¼åœ°å·¥ä½œã€‚
*   **2019 å¹´ 10 æœˆ:** [èŠ‚ç‚¹ 12](https://blog.logrocket.com/es-modules-in-node-js-12-from-experimental-to-release/) è¿›å…¥é•¿æœŸæ”¯æŒ:æ²¡æœ‰`--experimental-modules`æ ‡å¿—ä¹Ÿå¯ä»¥ä½¿ç”¨ ES æ¨¡å—ã€‚

# Node.js å¦‚ä½•åŠ è½½æ¨¡å—ï¼Ÿ

Node.js å¦‚ä½•åŠ è½½ä¾èµ–é¡¹çš„æœ¬è´¨æ˜¯ CJS æ¨¡å—ç³»ç»Ÿçš„æ ¸å¿ƒã€‚

è™½ç„¶è¿™å¾ˆå¤æ‚ï¼Œä½†æ˜¯ resolution [ç®—æ³•](https://nodejs.org/api/modules.html#modules_all_together)çš„æœ¬è´¨å½’ç»“èµ·æ¥å°±æ˜¯åœ¨`node_modules`ç›®å½•ä¸­æœç´¢åŒ…ã€‚

![](img/ba0ca6fefa25c7bfc94ce2d7773b4339.png)

node_modules folder (image by author)

å¦‚æœæˆ‘ä»¬ä»¥è¯­å¥`import _ from 'lodash'`ä¸ºä¾‹ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿‡åº¦ç®€åŒ–äº†ç®—æ³•ï¼Œæˆ‘ä»¬å°†æœŸæœ› Node.js åœ¨`node_modules`ä¸­å¯»æ‰¾ä¸€ä¸ª`lodash`ç›®å½•ï¼Œç„¶åæ£€æŸ¥å®ƒçš„`package.json`ä»¥ç¡®å®šè¦åŠ è½½çš„æ–‡ä»¶ã€‚

è¿™å¬èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯ç®—æ³•æ•ˆç‡éå¸¸ä½:

*   å®ƒç”Ÿæˆäº†åŒ…å«å¤§é‡æ–‡ä»¶çš„ç›®å½•ï¼Œ
*   åœ¨å†…å­˜ä¸­å¤šæ¬¡å®ä¾‹åŒ–ä¸€äº›åŒ…ï¼Œ
*   å¹¶å¯¼è‡´ç£ç›˜ä½¿ç”¨ç‡é«˜äºéœ€è¦ã€‚

ä¸ºäº†è§£å†³è¿™äº›å¼±ç‚¹å¹¶æ”¹å–„æ•´ä½“å·¥ä½œæµç¨‹ï¼Œ2016 å¹´ï¼Œè„¸ä¹¦å‘å¸ƒäº†ä¸€ä¸ªæ–°çš„åŒ…ç®¡ç†å™¨:`yarn`ã€‚

è¿è¡Œ`yarn install`å¯ä»¥å¿«é€Ÿç”Ÿæˆ`node_modules`ï¼Œæ¯”`npm`æ‰€éœ€çš„æ—¶é—´å°‘ [70%ã€‚](https://yarnpkg.com/features/pnp)

ä½†æ˜¯åæ¥ï¼Œ`npm`å›¢é˜Ÿå¡«è¡¥äº†ç©ºç™½ï¼Œå¹¶å®ç°äº†ä»–ä»¬å·¥å…·ä¸­ç¼ºå°‘çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ€§èƒ½æ”¹è¿›å’Œåœ¨å®‰è£…ä¾èµ–é¡¹ä¹‹å‰æ£€æŸ¥å®‰å…¨æ¼æ´ã€‚

# å³æ’å³ç”¨:å†è§èŠ‚ç‚¹æ¨¡å—ï¼

åœ¨ä»–çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ä¸­ï¼Œ`yarn`é’ˆå¯¹ä¸Šè¿°é—®é¢˜æå‡ºäº†ä¸€ä¸ªæ›´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆ:ç§»é™¤`node_modules`ï¼

> Yarn å·²ç»çŸ¥é“äº†å…³äºä½ çš„ä¾èµ–æ ‘çš„æ‰€æœ‰ä¿¡æ¯â€”â€”å®ƒç”šè‡³ä¸ºä½ æŠŠå®ƒå®‰è£…åœ¨ç£ç›˜ä¸Šã€‚é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆç”± Node æ¥æŸ¥æ‰¾æ‚¨çš„åŒ…åœ¨å“ªé‡Œå‘¢ï¼Ÿ
> ç›¸åï¼Œé€šçŸ¥[è§£é‡Šå™¨](https://betterprogramming.pub/compiler-vs-interpreter-d0a12ca1c1b6#6341)è½¯ä»¶åŒ…åœ¨ç£ç›˜ä¸Šçš„ä½ç½®å¹¶ç®¡ç†è½¯ä»¶åŒ…ä¹‹é—´ç”šè‡³è½¯ä»¶åŒ…ç‰ˆæœ¬ä¹‹é—´çš„ä»»ä½•ä¾èµ–å…³ç³»åº”è¯¥æ˜¯è½¯ä»¶åŒ…ç®¡ç†å™¨çš„å·¥ä½œã€‚â€â€” [çº±çº¿å›¢é˜Ÿ](https://yarnpkg.com/features/pnp#fixing-node_modules)

è¿™ä¸ªè¢«ç§°ä¸º**å³æ’å³ç”¨**æˆ–***é›¶å®‰è£…**çš„æ–°æ¦‚å¿µè®©`yarn`ç›´æ¥ä»ç¼“å­˜ä¸­è¯»å–ä¾èµ–æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸éœ€è¦å†æ¬¡è¿è¡Œ`yarn install`ã€‚*

# *æœ€ç»ˆæƒ³æ³•*

*å½“ Node.js åœ¨ 2009 å¹´å‘å¸ƒæ—¶ï¼Œå®ƒé€šè¿‡å¼€åˆ›ä¸€ä¸ªå¼€å‘è€…ä¸å†éœ€è¦æ‰‹åŠ¨ä¸‹è½½å’Œç®¡ç†é¡¹ç›®ä¾èµ–å…³ç³»çš„æ–°æ—¶ä»£ï¼Œå°† web å¼€å‘æ¨å‘äº†ä¸€ä¸ªæ–°çš„æ°´å¹³ã€‚*

*åœ¨å…¶å¼€å‘å‘¨æœŸä¸­ï¼Œå®ƒç»å†äº†è®¸å¤šéšœç¢ï¼Œå°½ç®¡æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­è§£å†³äº†å…¶ä¸­çš„è®¸å¤šé—®é¢˜ï¼Œä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚*

*è¿˜æœ‰æ›´å¤šç¼ºç‚¹ï¼Œæ¯”å¦‚`babel`ã€`webpack`ã€`browserify`å’Œå…¶ä»–æ†ç»‘å™¨å¦‚`parcel`ã€`rollup`å¯¹ CommonJS ä½¿ç”¨ç›¸åŒçš„è§£æç®—æ³•ï¼Œè€Œå¯¹ ES æ¨¡å—ä½¿ç”¨ç›¸åŒçš„è§£æç®—æ³•ã€‚*

*è¿™äº›å·¥å…·æ”¯æŒåœ¨ Node.js å’Œæµè§ˆå™¨ä¸­ä½¿ç”¨ ESMã€‚ç„¶è€Œï¼Œä»–ä»¬åŒæ­¥åŠ è½½ ES æ¨¡å—*(CJS æ—¶å°š)ï¼Œè€Œå¼‚æ­¥*åŠ è½½æ˜¯æ„æ–™ä¹‹ä¸­çš„ã€‚***

***ä½†æ˜¯è¿™ä¸ªä¼Ÿå¤§çš„æ´»è·ƒç¤¾åŒºä¸€ç›´åœ¨åŠªåŠ›ä½¿ Node.js åŠŸèƒ½æ›´å…¨ã€æ›´çµæ´»ï¼Œå¹¶æä¾›åƒå³æ’å³ç”¨è¿™æ ·çš„åˆ›é€ æ€§è§£å†³æ–¹æ¡ˆï¼Œè¿™æ— ç–‘æ”¹å–„äº†å¼€å‘äººå‘˜çš„ä½“éªŒã€‚***

# ***æƒ³è¦æ›´å¤šå—ï¼Ÿ***

***æˆ‘ä¸ºä¸€ç¾¤èªæ˜ã€å¥½å¥‡çš„ğŸ§ äººå†™å…³äºå·¥ç¨‹ã€æŠ€æœ¯å’Œé¢†å¯¼åŠ›çš„æ–‡ç« ğŸ’¡ã€‚ [**åŠ å…¥æˆ‘çš„ç”µå­é‚®ä»¶ç®€è®¯**](https://rakiabensassi.substack.com/) **ç‹¬å®¶è®¿é—®**æˆ–åœ¨æ­¤æŠ¥ååª’ä½“ã€‚***

****å¯ä»¥åœ¨ Udemy ä¸ŠæŸ¥çœ‹æˆ‘çš„* ***è§†é¢‘è¯¾ç¨‹****:*[*å¦‚ä½•è¯†åˆ«ã€è¯Šæ–­ã€ä¿®å¤ Web Apps ä¸­çš„å†…å­˜æ³„æ¼*](https://www.udemy.com/course/identify-and-fix-javascript-memory-leaks/) *ã€‚****

**[](https://betterprogramming.pub/javascript-history-and-future-71b0ceb737aa) [## JavaScript çš„ 25 å¹´

### ä»ç®€å•çš„è„šæœ¬è¯­è¨€åˆ°æ¯ä¸ªç°ä»£ web åº”ç”¨ç¨‹åºçš„åŸºç¡€

better ç¼–ç¨‹. pub](https://betterprogramming.pub/javascript-history-and-future-71b0ceb737aa) [](https://betterprogramming.pub/angular-13-features-ef528a9ae16f) [## Angular 13 çš„æ–°åŠŸèƒ½

### 100% Ivyï¼Œæ›´å¥½çš„ç»„ä»¶ APIï¼Œä¸æ”¯æŒ IE11ï¼Œç­‰ç­‰

better ç¼–ç¨‹. pub](https://betterprogramming.pub/angular-13-features-ef528a9ae16f) 

*æ›´å¤šå†…å®¹è¯·çœ‹*[*plain English . io*](http://plainenglish.io/)*ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [*å…è´¹å‘¨æŠ¥åœ¨è¿™é‡Œ*](http://newsletter.plainenglish.io/) *ã€‚***
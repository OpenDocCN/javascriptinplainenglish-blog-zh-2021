<html>
<head>
<title>3 Big Projects That Are Already Embracing WebAssembly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个已经开始拥抱WebAssembly的大项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/made-with-webassembly-e2115fe7d97c?source=collection_archive---------3-----------------------#2021-01-03">https://javascript.plainenglish.io/made-with-webassembly-e2115fe7d97c?source=collection_archive---------3-----------------------#2021-01-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4c83" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">它随时可以用来打破JavaScript的限制</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/524cde790b3adc32f9d8dedf054ca7d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aDCuFKYwwVZtwuJ2"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@austindistel?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Austin Distel</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1b7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">WebAssembly已准备好投入生产。虽然只有1.1版，但字节码已经在使用。不仅是爱好程序员，也是大公司和大项目。</p><p id="0de0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是3个以不同方式使用WebAssembly的项目和公司。玩得开心！</p><h1 id="9b41" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.Figma</h1><p id="e269" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">Figma是一个完全在浏览器中运行的基于云的设计工具。有了浏览器中的SVGs和canvas，你不会走得太远。为了使模糊、渐变和混合在设计平台上正常工作，它完全依赖于自己的WebGL引擎。</p><p id="0bb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Figma多年来一直在使用Emscripten，这是一个用于C和C++的WebAssembly编译器。但由于WebAssembly 2017年才发布，Figma在此之前一直与asm.js合作。然后Emscripten将C/C++代码编译为asm.js。</p><p id="9a55" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">asm.js是JavaScript的一个子集。没有字符串和对象，只有数字。这允许执行C++代码，因为在引擎盖下所有的东西都用数字表示。整个C++内存空间可以用一个巨大的数字数组来表示。然后，指针作为数组的索引。</p><p id="c29c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个优点是可以使用32位浮点来代替JavaScript的64位双精度浮点。在大型应用程序中，这对内存使用有积极的影响。</p><p id="19d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">是的，这一切都相当复杂和抽象。重要的是你要知道Figma在WebAssembly之前已经做了很多优化。<br/>因此，性能对比并不是针对“经典”JavaScript。</p><p id="f1da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">2017年出现了网络组装</strong>——真正的字节码，而不是想要成为C++的执行。由于之前已经有了这个代码库，Figma从那时起就将C++代码编译到了WebAssembly中。相当流畅的过渡。</p><p id="6552" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Asm.js和WebAssembly有一个共同点——它们还不能独立地访问DOM。但WebAssembly在几个方面明显优于它的前身。</p><p id="c51e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> WebAssembly更加紧凑。</strong>另外，浏览器对它的解析能力比JavaScript更强。原因很简单:JavaScript是一种人类语言，而且就像编写的一样，它必须由浏览器解析。WebAssembly仅针对浏览器进行了优化。</p><p id="8cd9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从Asm.js转换到WebAssembly的结果令人印象深刻。加载时间缩短了三倍。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mp"><img src="../Images/d575a1d7e5ad56584afd4fccd634ad60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HbJy7WBnxGT1sfngI1swiQ.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: <a class="ae kv" href="https://www.figma.com/blog/webassembly-cut-figmas-load-time-by-3x/" rel="noopener ugc nofollow" target="_blank">figma.com</a></figcaption></figure><p id="098d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">加载时间的含义如下:</p><blockquote class="mq mr ms"><p id="c3b8" class="kw kx mt ky b kz la jr lb lc ld ju le mu lg lh li mv lk ll lm mw lo lp lq lr ij bi translated">当我们在Figma测量加载时间时，我们包括初始化我们的应用程序、下载设计文件和第一次呈现整个设计的时间。<br/> - <a class="ae kv" href="https://www.figma.com/blog/webassembly-cut-figmas-load-time-by-3x/" rel="noopener ugc nofollow" target="_blank"> Figma </a></p></blockquote><p id="d666" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总之，一个令人印象深刻的结果。重要的是要记住，性能提升是与Asm.js. <br/>相比的。这个子集已经是非典型的性能优化。</p><p id="930c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与普通的JavaScript相比，WebAssembly在这个用例中表现得更好。</p><h1 id="3bae" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.Lichess</h1><p id="2bb2" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">在线下棋——这正是Lichess提供的。在国际平台上，玩家可以竞争，也可以解决任务和对抗机器人。</p><p id="e530" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">国际象棋是一种复杂的游戏。在有32个棋子的64个方块上，有无穷的可能性来移动。多亏了国际象棋软件，玩家可以在电脑上练习不同的难度。玩过的游戏可以事后分析。国际象棋软件可以用来找到一种情况下最好的可能的移动。</p><p id="6950" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="mt"> Stockfish </em> </strong>击败了迄今为止所有的国际象棋大师。该引擎被认为是最好的引擎之一，完全用C++编写&amp;是开源的。</p><p id="969d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这正是Lichess所利用的——因为数字象棋游戏背后的计算工作发生在玩家的浏览器中。多亏了WebAssembly，这才成为可能。对于Lichess来说，这是他们的服务器的一大解脱。</p><p id="bfba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">代码库非常现代——甚至使用线程来快速分析国际象棋的走法。</p><p id="e579" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于尚未完全支持WebAssembly，该引擎只能在基于Firefox和Chromium的浏览器中运行。在Safari中，计算是通过后端完成的。</p><p id="3ba0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这里看到分析引擎的运行:<a class="ae kv" href="https://lichess.org/analysis" rel="noopener ugc nofollow" target="_blank">https://lichess.org/analysis</a></p><h1 id="036b" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.uBlockOrigin</h1><p id="acca" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">许多人使用广告拦截器。但是只有极少数人知道它们是如何工作的。基本上，它没有那么复杂——但它仍然需要大量的计算能力。</p><p id="f7e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">广告拦截器不会删除页面上的广告，而是阻止它们加载。在网页上，广告主要是通过JS库来显示的。Google AdSense就是一个例子。当网页加载时，AdSense的JavaScript代码被请求、执行，并最终在DOM中显示广告。广告拦截器检测到页面正在请求广告库，并中止获取过程。</p><p id="3b8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有成千上万的图书馆用来展示广告。每一个都可以通过非常不同的URL请求——例如，基于版本、CDN或传递的参数。广告拦截器必须考虑到这一点。</p><p id="25eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">必须检查要加载的每个外部资源。这种检查是基于URL中的关键字或整个URL这样的模式——极端的计算工作，因为巨大的列表必须被遍历。</p><p id="e8d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是WebAssembly的用武之地。拦截器uBlockOrigin，作为浏览器扩展提供，使用字节码运行其检测算法。得益于一个可用的基准测试<a class="ae kv" href="https://raw.githack.com/gorhill/uBlock/master/docs/tests/hnset-benchmark.html" rel="noopener ugc nofollow" target="_blank">每个人都可以看到WebAssembly的速度有多快。</a></p><p id="05b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击“查找”，然后稍等片刻。最后，最后两行很重要——它们显示了用JS和WASM实现的算法相比有多快。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/f25fa98b9636758cf448edcddb501ba2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5OqRV0ubV4wVoTJtktPjSA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: The author</figcaption></figure><p id="0ef8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我在Firefox上运行测试时，每秒钟多了近2000次操作。</p><h1 id="609f" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">总结</h1><p id="c8e3" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这是三个不同的项目，对WebAssembly有不同的用途。</p><p id="04a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与陈词滥调相反，这表明了一件事:WebAssembly在许多场景中都很有用——不仅仅是使用Canvas和WebGL。</p><p id="a9a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我发现利切斯的例子特别令人兴奋。在浏览器不支持WebAssemby的情况下，工作在服务器上完成。</p><p id="c695" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但由于浏览器中的GPU支持，将计算任务外包给浏览器的机会越来越多。网络不再仅仅是一个展示的地方。</p><p id="20c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读——这篇文章是我关于WebAssembly系列文章的一部分。如果您想了解更多信息，请查看:</p><p id="8c36" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">【WebAssembly在网络上会有什么变化？</p><p id="9728" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://medium.com/javascript-in-plain-english/assemblyscript-4c68a3c3ecf7" rel="noopener">testosterones上的TypeScript使用AssemblyScript使WebAssembly变得简单</a></p><h2 id="a4d7" class="my lt iq bd lu mz na dn ly nb nc dp mc lf nd ne me lj nf ng mg ln nh ni mi nj bi translated"><a class="ae kv" href="http://eepurl.com/hacY0v" rel="noopener ugc nofollow" target="_blank">加入我的免费简讯，了解最新消息</a></h2></div></div>    
</body>
</html>
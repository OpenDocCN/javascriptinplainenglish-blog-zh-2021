<html>
<head>
<title>How to Revoke Roles From Existing User in MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在MongoDB中撤销现有用户的角色</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-revoke-roles-from-existing-user-in-mongodb-f395954aaa9b?source=collection_archive---------12-----------------------#2021-01-18">https://javascript.plainenglish.io/how-to-revoke-roles-from-existing-user-in-mongodb-f395954aaa9b?source=collection_archive---------12-----------------------#2021-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/a88fb7438cdbceeebb3d0aca54bb694e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B1pyf-CaDcPChTdo"/></div></div></figure><h1 id="9901" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">方案</h1><p id="0e71" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">假设您是一名DevOps工程师，您负责授予对数据库的访问权限，这也可以称为数据库管理员。</p><p id="852d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">然而，这是新的一年，你的公司管理层决定重组团队。团队中有人试图改变自己的角色。例如，后端团队的“<strong class="kv io"> devA </strong>”想要尝试在他的职业生涯中做不同的事情，他决定转到前端团队。</p><p id="f35f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">管理人员通知您取消他的数据库权限，因为他以前提供了对数据库的访问权限。我写了一篇关于如何给现有的MongoDB用户添加角色的文章，如果你感兴趣，你可以在这里阅读帖子<a class="ae lw" href="https://medium.com/javascript-in-plain-english/how-to-add-roles-to-existing-user-in-mongodb-305551ccec86" rel="noopener">。</a></p><p id="7270" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">有两种不同的方法可以阻止现有用户访问数据库。您可以选择:</p><ul class=""><li id="bcfe" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">第一个选项—删除数据库用户。</li><li id="a1d5" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">第二个选项—删除为数据库用户指定的角色。</li></ul><p id="396a" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在本文中，我们将使用第二个选项。这是因为现有用户仍然是我们公司的一员，为了方便起见，如果将来需要，我们可以使用同一个数据库用户授予他任何角色。如果用户离开公司，我会使用第一个选项。</p><p id="1c17" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在下一节中，我们将展示如何在MongoDB中撤销用户角色的分步指南。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="f53f" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated">逐步指南</h1><p id="e20f" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在我们进入如何从现有用户撤销角色的详细步骤之前。下面是这些步骤的简短版本。</p><ol class=""><li id="fe56" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mx md me mf bi translated">列出<strong class="kv io">管理</strong>数据库中的所有用户(如果所有用户都是在管理数据库中创建的)。</li><li id="f524" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mx md me mf bi translated">选择匹配值为“<strong class="kv io"> devA </strong>”的“用户”字段。</li><li id="e375" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mx md me mf bi translated">使用<code class="fe my mz na nb b">dropRolesFromUser()</code>函数删除赋予devA的角色，即<strong class="kv io">读取客户端数据库上的</strong>角色</li></ol><h2 id="9a73" class="nc jw in bd jx nd ne dn kb nf ng dp kf le nh ni kj li nj nk kn lm nl nm kr nn bi translated">步骤1-列出管理数据库中的所有用户</h2><figure class="np nq nr ns gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/e0e13bf993eac163f0484da8ca215c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ul731FtfDZIpWxNnzBSX9A.png"/></div></div></figure></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h2 id="eb0d" class="nc jw in bd jx nd ne dn kb nf ng dp kf le nh ni kj li nj nk kn lm nl nm kr nn bi translated">步骤2 —找到“用户”字段值</h2><p id="27cd" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">查看名为<strong class="kv io"> user </strong>的字段名称，并找到值，因为我们将在下一步中需要它。参考下面的例子。</p><figure class="np nq nr ns gt jo"><div class="bz fp l di"><div class="nt nu l"/></div></figure></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="b9a2" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated">步骤3 —使用revokeRolesFromUser函数从“devA”中撤销角色</h1><p id="972a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">通过下面的简单命令，您将能够撤销客户端数据库上的读取角色。</p><figure class="np nq nr ns gt jo"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="5167" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">但是，如果您想要撤销多个角色，也可以通过一个命令来完成。例如，devA有两个角色，一个是客户端数据库的<strong class="kv io"> read </strong>角色，另一个是readWriteAnyDatabase 角色。您可以通过下面的代码撤销它们。</p><figure class="np nq nr ns gt jo"><div class="bz fp l di"><div class="nt nu l"/></div></figure></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="67c9" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated">结论</h1><p id="6d6d" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">简而言之，这篇文章讨论了:</p><ul class=""><li id="40ab" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">如何在不从MongoDB中删除用户的情况下撤销现有用户的角色</li><li id="740e" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">如何撤销用户的一个或多个角色。</li></ul><p id="4d3d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">感谢您的阅读，下一篇文章再见。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="2b45" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated">参考</h1><ul class=""><li id="b1ea" class="lx ly in kv b kw kx la lb le nv li nw lm nx lq mc md me mf bi translated">MongoDB<code class="fe my mz na nb b">revokeRolesFromUser</code>T1】手动</li><li id="b474" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">MongoDB内置角色<a class="ae lw" href="https://docs.mongodb.com/manual/reference/built-in-roles/" rel="noopener ugc nofollow" target="_blank">手册</a></li></ul></div></div>    
</body>
</html>
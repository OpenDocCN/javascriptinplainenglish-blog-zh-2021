<html>
<head>
<title>Continuous Deployment with GitHub Action</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitHub Action的持续部署</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/continuous-deployment-with-github-action-bb527ec2deda?source=collection_archive---------12-----------------------#2021-08-02">https://javascript.plainenglish.io/continuous-deployment-with-github-action-bb527ec2deda?source=collection_archive---------12-----------------------#2021-08-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f9d5" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用GitHub动作实现持续部署的简单方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/70387bd1a36f1f976567110b1688c861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WMSpLyBw-DKqSvbtKbtkaQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@andyadcon?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">De an Sun</a> on <a class="ae ks" href="https://unsplash.com/s/photos/continuous?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="03d3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">本文演示了一种使用GitHub动作进行连续部署的简单方法。它适用于所有类型的后端和前端，如Node.js、Ruby、Python、PHP、Vue.js、React、Angular等。这种方法很简单，没有成本&amp;更重要的是，它可以用于生产。</p><p id="1a6b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">是中级文章；适用于那些手动将应用程序部署到服务器，但难以实现自动化的人。此外，GitHub操作的基本知识是预期的。</em></p><p id="210f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">这是两个主要步骤</strong></p><ol class=""><li id="1fa3" class="lq lr in kv b kw kx kz la lc ls lg lt lk lu lo lv lw lx ly bi translated">使用SSH和GitHub进行部署</li><li id="f57e" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">自动化步骤1</li></ol><h1 id="6087" class="me mf in bd mg mh mi mj mk ml mm mn mo jt mp ju mq jw mr jx ms jz mt ka mu mv bi translated">1.使用SSH和GitHub进行部署</h1><p id="9164" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">这是正常的部署策略，即如何通过SSH和git手动部署应用程序。</p><ol class=""><li id="535d" class="lq lr in kv b kw kx kz la lc ls lg lt lk lu lo lv lw lx ly bi translated">通过SSH连接到服务器</li><li id="3f6d" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">创建SSH密钥</li><li id="c046" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">将公钥添加到GitHub的部署密钥中</li><li id="006f" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">将Repo克隆到服务器</li><li id="23b2" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">设置项目</li><li id="f79a" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo lv lw lx ly bi translated">运行项目</li></ol><p id="d4cb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">至此，项目应该可以顺利运行了。下一步是通过GitHub Action自动化相同的过程。</p><h1 id="1e10" class="me mf in bd mg mh mi mj mk ml mm mn mo jt mp ju mq jw mr jx ms jz mt ka mu mv bi translated">2.自动化步骤1</h1><h2 id="bf77" class="nb mf in bd mg nc nd dn mk ne nf dp mo lc ng nh mq lg ni nj ms lk nk nl mu nm bi translated"><strong class="ak"> A .配置必要的值</strong></h2><p id="fd6f" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">转到GitHub Repo设置机密</p><p id="4ba0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">创建3个<code class="fe nn no np nq b">New repository secrets</code></p><ul class=""><li id="4052" class="lq lr in kv b kw kx kz la lc ls lg lt lk lu lo nr lw lx ly bi translated">SSH_PRIVATE_KEY_DEV:来自服务器的SSH私有密钥</li><li id="1b09" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo nr lw lx ly bi translated">主机开发:服务器的主机名</li><li id="f324" class="lq lr in kv b kw lz kz ma lc mb lg mc lk md lo nr lw lx ly bi translated">用户名:服务器用户名</li></ul><p id="8c15" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你使用<code class="fe nn no np nq b">ssh root@xx.xx.xx</code>来访问服务器。<code class="fe nn no np nq b">root</code>是<strong class="kv io">用户名</strong>而<code class="fe nn no np nq b">xx.xx.xx</code>是<strong class="kv io">主机_开发</strong>。</p><h2 id="c7ba" class="nb mf in bd mg nc nd dn mk ne nf dp mo lc ng nh mq lg ni nj ms lk nk nl mu nm bi translated"><strong class="ak"> B .创建YML文件</strong></h2><p id="e341" class="pw-post-body-paragraph kt ku in kv b kw mw jo ky kz mx jr lb lc my le lf lg mz li lj lk na lm ln lo ig bi translated">在项目目录里面创建一个.<strong class="kv io"> yml </strong>文件<code class="fe nn no np nq b">deploy.yml</code>在</p><p id="b232" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">项目目录→。github →工作流程→ <code class="fe nn no np nq b">deploy.yml</code></p><p id="1bc1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe nn no np nq b">deploy.yml</code>文件包含部署脚本。</p><p id="7f57" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">示例:将Vue.js/React/Angular项目自动部署到服务器</strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="bdbd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">示例:将基于pm2的Node.js应用程序自动部署到服务器&amp;重启pm2 </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="3a01" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">示例:将相同的应用程序部署到AWS S3，通过AWS CloudFront提供，</strong> <a class="ae ks" href="https://bibhutipoudyal.com.np/snip/deploy-vuejs-to-aws/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">查看此代码片段</strong> </a> <strong class="kv io">。</strong></p><p id="5dff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将更改推送到<code class="fe nn no np nq b">dev</code>上的GitHub或其他指定的分支。前往GitHub您的存储库Actions选项卡。</p><p id="caed" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在那里，您将看到您最近执行的工作流运行的工作流。如果成功/失败，它将显示各自的日志。还是那句话，尝试一些改动，推给GitHub。它会自动更新。</p></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><p id="584b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如您已经注意到的，<code class="fe nn no np nq b">yml</code>脚本使用<code class="fe nn no np nq b">appleboy/ssh-action@master</code>来简化任务。虽然有点慢。如果您想要更快的替代方案，同样的任务可以手动完成。这里有一篇很好的文章:</p><div class="ob oc gp gr od oe"><a href="https://blog.benoitblanchon.fr/github-action-run-ssh-commands/" rel="noopener  ugc nofollow" target="_blank"><div class="of ab fo"><div class="og ab oh cl cj oi"><h2 class="bd io gy z fp oj fr fs ok fu fw im bi translated">GitHub操作:如何运行SSH命令(没有第三方操作)</h2><div class="ol l"><h3 class="bd b gy z fp oj fr fs ok fu fw dk translated">最近，我一直在使用GitHub Actions进行我的持续集成和持续交付。通常，我使用简单的…</h3></div><div class="om l"><p class="bd b dl z fp oj fr fs ok fu fw dk translated">blog.benoitblanchon.fr</p></div></div><div class="on l"><div class="oo l op oq or on os km oe"/></div></div></a></div><p id="6a05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另一件需要考虑的事情是GitHub动作定价。一个免费的计划是有限制的。你可以在这里找到更多<a class="ae ks" href="https://github.com/pricing" rel="noopener ugc nofollow" target="_blank">的细节。</a></p></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><p id="c72a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这种方法和你在<strong class="kv io">步骤1(手动)</strong>中做的完全一样。它使用凭证通过SSH访问服务器:用户名、主机&amp; SSH私有密钥(之前在GitHub →设置→秘密中提供)。然后执行指定的命令来构建项目&amp;如果需要的话重启服务器/进程管理器。</p><p id="18ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容看</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">说白了就是io </em> </strong> </a> <em class="lp">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。关注我们关于</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lp">Twitter</em></strong></a><em class="lp">和</em><strong class="kv io"><em class="lp"/></strong><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lp">LinkedIn</em></strong></a><em class="lp">。加入我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="lp">社区不和谐</em> </strong> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>
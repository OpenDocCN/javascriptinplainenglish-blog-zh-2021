<html>
<head>
<title>Getting Started with GraphQL and Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL和Express入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-graphql-98302e2dea9e?source=collection_archive---------23-----------------------#2021-07-15">https://javascript.plainenglish.io/getting-started-with-graphql-98302e2dea9e?source=collection_archive---------23-----------------------#2021-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6522cbdbdfdab24b07d1949db65cf4e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nySQy4EjJ-JOyYtR.png"/></div></div></figure><h1 id="4e5f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">什么是GraphQL <em class="kt">或者说</em>为什么是GraphQL？</h1><p id="39a2" class="pw-post-body-paragraph ku kv in kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated"><em class="ls">(第一个念头:图+QL？为什么是图表？QL？一些语言？好了停下来。)</em></p><p id="245f" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">GraphQL是一种查询语言，它提供了一种请求数据的方式。)从服务器通过<a class="ae ly" href="https://www.freecodecamp.org/news/what-is-an-api-in-english-please-b880a3214a82/" rel="noopener ugc nofollow" target="_blank"> API </a>(嗯，听起来很简单！).<a class="ae ly" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank">官网</a>提供了很好的描述，这里:</p><blockquote class="lz ma mb"><p id="e4f0" class="ku kv ls kw b kx lt kz la lb lu ld le mc lv lh li md lw ll lm me lx lp lq lr ig bi translated">它使客户能够准确地要求他们需要的，而不是更多，使API更容易随着时间的推移而发展，并支持强大的开发工具。</p></blockquote><h1 id="7405" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><strong class="ak"> GraphQL Vs REST </strong></h1><p id="f898" class="pw-post-body-paragraph ku kv in kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">我们知道<a class="ae ly" href="https://www.codecademy.com/articles/what-is-rest" rel="noopener ugc nofollow" target="_blank"> REST </a>模型已经统治API领域很长一段时间了。所以让我们看看GraphQL提供了什么。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mf"><img src="../Images/5223b76b2d7472ccf806863d291741ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9uyJIRNAwvBxxhqyOAzkbQ.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">REST way of asking data</figcaption></figure><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/6c4f22ef4d9464164bbb797b152e9829.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DWkWZqS9QEx6neuABXtfKg.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">the GraphQL way</figcaption></figure><p id="4fb9" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">如图所示，当客户机与REST API集成时，为了请求多个任务的数据，客户机必须多次访问服务器。然而，当使用GraphQL时，我们可以只在一个查询中请求相同的数据<em class="ls">(是的，在GraphQL中一切都是POST)。</em></p><p id="ba5c" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">最重要的是，客户得到了他/她想要的东西。例如，客户端打算从数据库中获取图书。尽管GraphQL API能够获取所有的图书细节，但它只能获取客户要求的内容——书名。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/7774ed780eea7cfb5706211234f04777.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k1Bo8HPZ4e6bXtk2AGdpmA.png"/></div></div><figcaption class="mk ml gj gh gi mm mn bd b be z dk">Graphql Vs REST</figcaption></figure><h1 id="a0f7" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">GraphQL的基础知识</h1><p id="1ac3" class="pw-post-body-paragraph ku kv in kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">模式定义语言 ( <a class="ae ly" href="https://www.prisma.io/blog/graphql-sdl-schema-definition-language-6755bcb9ce51" rel="noopener ugc nofollow" target="_blank"> SDL </a>):为了编写模式，GraphQL有它自己的语言，简单而富有表现力。模式定义有两个主要部分:类型和字段</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/5343f4178983d1a18c50b49963e9f594.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*T0g6iD2P0GlI2NktynnNAA.png"/></div></figure><p id="4653" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">查询</strong>:正如我们已经看到的，使用GraphQL获取数据是灵活的。这意味着客户端需要向服务器发送更多的信息来表达他们的数据需求——一个查询。</p><p id="20c4" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">突变</strong>:需要某种方式来改变后端(数据库)中的数据——graph QL突变来拯救。正如您可能已经猜到的，有三种类型的变化——创建新数据、更新现有数据和删除现有数据。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/e1573f737e42eb0863b4b7b2d578d90d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NQoAZdsYLqj0viaJgPZxtg.png"/></div></div></figure><p id="1de1" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">解决者:这是所有有趣的事情发生的地方。现在我们已经准备好了结构，我们可以在解析器函数下实现我们的<em class="ls">逻辑</em>。解析器是一个负责为模式中的单个字段填充数据的函数。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/371ace306abd96aacef49a8fa35a8d1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:638/format:webp/1*dbDfFr3ru2PBeTg3Qv6ynw.png"/></div></figure><h1 id="a6d1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><em class="kt"> Hello World:创建我们的GraphQL服务器</em></h1><p id="6333" class="pw-post-body-paragraph ku kv in kw b kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ig bi translated">我们将使用<a class="ae ly" href="https://www.apollographql.com" rel="noopener ugc nofollow" target="_blank"> Apollo </a>(行业标准工具)来实现。<br/> <em class="ls">(当然是npm！)</em></p><pre class="mg mh mi mj gt mt mu mv mw aw mx bi"><span id="5ee5" class="my jw in mu b gy mz na l nb nc">npm install <strong class="mu io">express</strong><em class="ls"><br/></em>npm install <strong class="mu io">apollo-server-express</strong></span></pre><blockquote class="lz ma mb"><p id="3a36" class="ku kv ls kw b kx lt kz la lb lu ld le mc lv lh li md lw ll lm me lx lp lq lr ig bi translated">在<strong class="kw io"> package.json </strong> <em class="in">，</em>的脚本<em class="in">下，我们可以添加</em> : <br/>“开始”:“node server.js”</p></blockquote><p id="4d27" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">让我们通过在<strong class="kw io"> <em class="ls"> server.js </em> </strong>中编写以下步骤来创建我们的GraphQL服务器</p><p id="aad0" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">步骤1: </strong>强制导入并创建express app:</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/7b2e6ea11c64bf108760d4bf5d465375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y5j9BKm_q4-uNB2ttLx9Lw.png"/></div></div></figure><p id="33ac" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">步骤2 </strong>:使用GraphQL模式语言构建模式</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/d5600ad5dd4385e534ac81b4d218481a.png" data-original-src="https://miro.medium.com/v2/resize:fit:590/format:webp/1*qddWr5b85coMwnLKD6qtRg.png"/></div></figure><p id="4f78" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">步骤3: </strong>为模式字段提供解析函数</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/4d79b18c4863e06f63d5425df45d398d.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*dVUXzbET-6CHzbF-n30BeQ.png"/></div></figure><p id="c84d" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">步骤4: </strong>创建提供TypeDefs和解析器功能的graphQL服务器</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/bdd6facc9f15bfb70ad3b0816ce863bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/1*sNM0-tM0htDb72uBgSNKEw.png"/></div></div></figure><p id="2079" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><strong class="kw io">步骤5: </strong>与express集成并启动服务器</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi gj"><img src="../Images/fa0a10b48855b57bbbe1bef565f1f703.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a4AtAafZLsdpRVXBNud_Ig.png"/></div></div></figure><p id="5e85" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">运行<code class="fe nh ni nj mu b">npm start</code>，我们的GraphQL服务器应该在<a class="ae ly" href="http://localhost:3001/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:3001/graph QL</a>启动。</p><p id="d8a5" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">GraphQL还有一个更酷的东西——playground。</p><blockquote class="lz ma mb"><p id="ec03" class="ku kv ls kw b kx lt kz la lb lu ld le mc lv lh li md lw ll lm me lx lp lq lr ig bi translated">GraphQL Playground是一个用于GraphQL查询的外部交互式编辑器。它基于GraphQL，可通过web浏览器访问</p></blockquote><p id="16d6" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">在操场的左半部分，我们可以提供我们的查询(请求数据)并点击play按钮。如果一切正常，解析器的响应应该出现在右半部分。</p><figure class="mg mh mi mj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/c21b958f6606414606d8c421ab7456d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*63f8t1WHKiyAcM-q7TylHQ.png"/></div></div></figure><p id="05db" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">是的，你可以点击侧边的“模式”和“文档”来进一步了解。</p><p id="a505" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated">欢迎使用GraphQL！</p><p id="5167" class="pw-post-body-paragraph ku kv in kw b kx lt kz la lb lu ld le lf lv lh li lj lw ll lm ln lx lp lq lr ig bi translated"><em class="ls">更多内容请看</em><a class="ae ly" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kw io"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
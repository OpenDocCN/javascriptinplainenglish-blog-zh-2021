<html>
<head>
<title>Create a Memory Game with React and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和JavaScript创建一个记忆游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-memory-game-with-react-and-javascript-793d27ad7bf6?source=collection_archive---------20-----------------------#2021-05-11">https://javascript.plainenglish.io/create-a-memory-game-with-react-and-javascript-793d27ad7bf6?source=collection_archive---------20-----------------------#2021-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/33a71df727f921aba5d1a3b77bfdae07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DBH5xAonlsyj_xj-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@invictar1997?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Soragrit Wongsa</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f280" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个易于使用的JavaScript框架，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用React和JavaScript创建一个内存游戏。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Create React App创建React项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app memory-game</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起创建我们的React项目。</p><h1 id="c534" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创造记忆游戏</h1><p id="e01d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建记忆游戏，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="86e5" class="mn lc iq mj b gy mo mp l mq mr">import React, { useEffect, useState } from "react";<br/>import { v4 as uuidv4 } from "uuid";<br/>const answerArr = [1, 1, 2, 2, 3, 3, 4, 4, 5, 5]<br/>  .map((n) =&gt; {<br/>    return {<br/>      id: uuidv4(),<br/>      open: false,<br/>      value: n<br/>    };<br/>  })<br/>  .sort(() =&gt; Math.random() - 0.5);</span><span id="0e2f" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [answer, setAnswer] = useState([...answerArr]);<br/>  const [itemIds, setItemIds] = useState([]);</span><span id="4c3b" class="mn lc iq mj b gy ms mp l mq mr">  const onClick = (id) =&gt; {<br/>    if (!itemIds.includes(id)) {<br/>      setItemIds((itemIds) =&gt; [...itemIds, id]);<br/>    }<br/>    const index = answer.findIndex((a) =&gt; a.id === id);<br/>    setAnswer((answer) =&gt; {<br/>      const ans = [...answer];<br/>      ans[index].open = true;<br/>      return ans;<br/>    });<br/>  };</span><span id="53c6" class="mn lc iq mj b gy ms mp l mq mr">  useEffect(() =&gt; {<br/>    if (itemIds.length === 2) {<br/>      const item1Index = answer.findIndex((a) =&gt; a.id === itemIds[0]);<br/>      const item2Index = answer.findIndex((a) =&gt; a.id === itemIds[1]);<br/>      if (answer[item1Index].value !== answer[item2Index].value) {<br/>        setAnswer((answer) =&gt; {<br/>          const ans = [...answer];<br/>          ans[item1Index].open = false;<br/>          ans[item2Index].open = false;<br/>          return ans;<br/>        });<br/>      }<br/>    }<br/>  }, [itemIds, answer]);</span><span id="5b71" class="mn lc iq mj b gy ms mp l mq mr">  useEffect(() =&gt; {<br/>    if (itemIds.length === 2) {<br/>      setItemIds([]);<br/>    }<br/>  }, [itemIds]);</span><span id="a006" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;style&gt;<br/>        {`<br/>          .container {<br/>            display: flex;<br/>          }</span><span id="89ad" class="mn lc iq mj b gy ms mp l mq mr">.tile {<br/>            border: 1px solid black;<br/>            width: 20vw;<br/>            height: 50px;<br/>          }<br/>          `}<br/>      &lt;/style&gt;<br/>      &lt;div className="container"&gt;<br/>        {answer.map((a) =&gt; {<br/>          return (<br/>            &lt;div key={a.id} className="tile" onClick={() =&gt; onClick(a.id)}&gt;<br/>              {a.open ? &lt;div&gt;{a.value}&lt;/div&gt; : &lt;div&gt;&amp;nbsp;&lt;/div&gt;}<br/>            &lt;/div&gt;<br/>          );<br/>        })}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe mt mu mv mj b">answerArr</code>数组，它是一个随机的数字数组。</p><p id="838f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它用于渲染玩家可以通过点击打开的盒子。</p><p id="4cac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果两个号码匹配，那么他们保持开放。</p><p id="211f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，两者都关闭。</p><p id="99c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用答案定义<code class="fe mt mu mv mj b">answer</code>状态。</p><p id="63ce" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">itemIds</code>有打开的答题卡的id。</p><p id="8317" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最多可以打开2个。</p><p id="04f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们定义检查<code class="fe mt mu mv mj b">itemIds</code>是否包含<code class="fe mt mu mv mj b">id</code>的<code class="fe mt mu mv mj b">onClick</code>。</p><p id="962b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有，我们用<code class="fe mt mu mv mj b">setItemIds</code>将它添加到<code class="fe mt mu mv mj b">itemIds</code>数组中。</p><p id="9656" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">setAnswer</code>将<code class="fe mt mu mv mj b">answer</code>中应该打开的<code class="fe mt mu mv mj b">open</code>属性中的项目设置为<code class="fe mt mu mv mj b">true</code>。</p><p id="9376" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们有一个<code class="fe mt mu mv mj b">useEffect</code>回调来检查<code class="fe mt mu mv mj b">itemIds.length</code>是否为2。</p><p id="1409" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果是，那么我们调用<code class="fe mt mu mv mj b">findIndex</code>来获取我们点击的<code class="fe mt mu mv mj b">answer</code>项的索引。</p><p id="f8bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们的<code class="fe mt mu mv mj b">value</code>不匹配，那么我们通过将两个项目的<code class="fe mt mu mv mj b">open</code>属性设置为<code class="fe mt mu mv mj b">false</code>来关闭它们。</p><p id="bc27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们观察<code class="fe mt mu mv mj b">itemIds</code>和<code class="fe mt mu mv mj b">answer</code>的值来相应地进行更新。</p><p id="598f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还有另一个<code class="fe mt mu mv mj b">useEffect</code>钩子来再次检查<code class="fe mt mu mv mj b">itemIds.length</code>是否为2，但是这一次，如果是<code class="fe mt mu mv mj b">true</code>，当我们将<code class="fe mt mu mv mj b">itemIds</code>设置为空数组时。</p><p id="dcf5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们在<code class="fe mt mu mv mj b">style</code>标签中添加卡片的样式。</p><p id="adb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe mt mu mv mj b">answers</code>项渲染成div。</p><p id="4fa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们显示的值是<code class="fe mt mu mv mj b">a.open</code>是<code class="fe mt mu mv mj b">true</code>。</p><p id="0e81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们显示一个空框。</p><h1 id="d873" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="886b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用React和JavaScript创建一个记忆游戏。</p><p id="af99" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
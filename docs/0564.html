<html>
<head>
<title>What Can You Track Without Using Browser Cookies?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不使用浏览器Cookies您可以跟踪什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-can-you-track-without-using-browser-cookies-9a74847a89fb?source=collection_archive---------6-----------------------#2021-02-03">https://javascript.plainenglish.io/what-can-you-track-without-using-browser-cookies-9a74847a89fb?source=collection_archive---------6-----------------------#2021-02-03</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="67ab" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">分析你的网站而不违反GDPR</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/9d65f1038255222795a404f18eff2142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_brWi0N5d9w4HfbA"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@jdent?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jason Dent</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4dc4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">WhatsApp改变了政策，现在将与脸书共享数据。谷歌浏览器对第三方cookies的支持将于2022年结束。每个人都在谈论隐私。似乎，在趋势中，你必须忘记cookies，将用户隐私放在功能之上。但是我能追踪到什么而不侵犯GDPR或CCPA呢？从我的项目中删除谷歌分析后，我问了自己这个问题。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><h1 id="715b" class="ma mb ir bd mc md me mf mg mh mi mj mk jx ml jy mm ka mn kb mo kd mp ke mq mr bi translated">浏览器缓存</h1><p id="8be8" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">2011年，第一次尝试跟踪没有cookies的用户。分析平台Kissmetrics找到了一种方法，即如何通过浏览器缓存识别用户。</p><p id="a5eb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">主要思想是使用Etag作为标识符。它是站点缓存文件的校验和。这就是浏览器检测网站更新的方式。对于每个用户，校验和是不同的，所以它可以用作唯一的标识符。</p><p id="df5e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">没关系，你是否使用匿名模式。你是否允许网站跟踪你？是否启用了虚拟专用网或代理？如果您没有禁用缓存，网站可以标记您并跟踪您的所有活动。您知道有多少人禁用了他们的缓存？我也不认识他们。这就是为什么这种跟踪方法非常有用。</p><p id="2778" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是有些人不满意这个平台如何跟踪用户。因为您不能按下按钮并清除您的数据，并且您不能不允许跟踪而不对性能产生负面影响。2012年，他们起诉，法官站在他们一边。这种方法是禁止的。该公司支付了51万美元，并被关闭。</p><p id="da8b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这种方法即使在今天仍然有效，100%准确<strong class="kz is">，但看起来不是最佳选择。</strong></p><h1 id="a48c" class="ma mb ir bd mc md mx mf mg mh my mj mk jx mz jy mm ka na kb mo kd nb ke mq mr bi translated">LocalStorage</h1><p id="5627" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">使用本地存储网站肯定可以跟踪用户，但这不适用于像谷歌分析这样的分析服务，因为脚本不能在一个网站上存储数据，在另一个网站上读取数据。</p><p id="3fc0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以对于一个网站来说，如果你对评论不感兴趣，这是一个很好的解决方案。您可以生成一个唯一的令牌，将其放入存储中，并通过该令牌跟踪您的用户。</p><p id="cbab" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是，如果您需要一个功能强大的分析平台，能够检测您在不同网站上的用户，建立受众群并提供评论功能，该怎么办？这样的平台如何跟踪用户？</p><h1 id="8518" class="ma mb ir bd mc md mx mf mg mh my mj mk jx mz jy mm ka na kb mo kd nb ke mq mr bi translated">浏览器指纹识别</h1><p id="21ea" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">目前，在我看来，追踪用户最迷人的方式是浏览器指纹识别。使用JavaScript，您可以获得关于用户、用户设置和硬件的公共数据。这些参数的组合可以以<strong class="kz is"> 99% </strong>的准确度识别用户。它以隐姓埋名的方式工作，并不违反GDPR。</p><p id="3cc3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">听起来不现实？让我向您展示一个数据示例，它可以将您标识为唯一的访问者。</p><h2 id="5472" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">航海家.用户代理</strong></h2><pre class="kh ki kj kk gu no np nq nr aw ns bi"><span id="aa00" class="nc mb ir np b gz nt nu l nv nw">Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/14.0.2 Safari/605.1.15</span></pre><p id="6942" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">当然，这是第一个检查的地方。传递以下信息的变量:</p><ul class=""><li id="5047" class="nx ny ir kz b la lb ld le lg nz lk oa lo ob ls oc od oe of bi translated">浏览器名称</li><li id="ec0f" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">浏览器版本</li><li id="33df" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">平台</li></ul><p id="ebd4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在<strong class="kz is">∞<em class="ol">55</em></strong>浏览器中有一个有这个值。</p><h2 id="2729" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated">导航器.插件</h2><pre class="kh ki kj kk gu no np nq nr aw ns bi"><span id="c47f" class="nc mb ir np b gz nt nu l nv nw">Plugin 0: WebKit built-in PDF; ; ; (Portable Document Format; application/pdf; pdf) (PostScript; application/postscript; ps) (Portable Document Format; text/pdf; pdf)</span></pre><p id="b232" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">关于已安装浏览器插件的信息。也可以取自<code class="fe om on oo np b">window.navigator</code>对象。</p><p id="0a52" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈76 </strong>浏览器中有一个有这个值。</p><h2 id="1187" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak"> HTTP头</strong></h2><pre class="kh ki kj kk gu no np nq nr aw ns bi"><span id="8d2c" class="nc mb ir np b gz nt nu l nv nw">text/html, */*; q=0.01 gzip, deflate, br en-us</span></pre><p id="089f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">转发以下信息的标头:</p><ul class=""><li id="af06" class="nx ny ir kz b la lb ld le lg nz lk oa lo ob ls oc od oe of bi translated">浏览器可以处理什么类型的内容。数据格式和首选语言。</li></ul><p id="5c57" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈18 </strong>浏览器中有一个有这个值。</p><h2 id="b966" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">系统字体</strong></h2><pre class="kh ki kj kk gu no np nq nr aw ns bi"><span id="816d" class="nc mb ir np b gz nt nu l nv nw">Andale Mono, Arial, Arial Black, Arial Hebrew, Arial Narrow, Arial Rounded MT Bold, Arial Unicode MS, Comic Sans MS, Courier, Courier New, Geneva, Georgia, Helvetica, Helvetica Neue, Impact, LUCIDA GRANDE, Microsoft Sans Serif, Monaco, Palatino, Tahoma, Times, Times New Roman, Trebuchet MS, Verdana, Wingdings, Wingdings 2, Wingdings 3 (via javascript)</span></pre><p id="baa9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">坦率地说，我相信没有人使用这个指标，因为它大大降低了网站的性能。这个想法是用一个小的文本字符串显示一个span标签。然后从已知的字体列表中更改字体，并检查应用的跨度几何图形(宽度和高度)。</p><p id="2bc2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈16 </strong>浏览器中有一个有这个值。</p><h2 id="3262" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">画布或WebGL指纹的哈希</strong></h2><p id="802b" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated"><code class="fe om on oo np b">e889dfb1c44b9beb8d7c6fe292d92269</code></p><p id="030c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在大多数情况下，只有这一个指标可以检测用户并在所有站点来宾之间跟踪他。我们可以在canvas/WebGL元素上绘制一些形状，将结果序列化并散列。</p><p id="055b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈431 </strong>浏览器中有一个有这个值。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><p id="f22d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">接下来的参数相当简单，我相信不需要解释。我将只提供一个参数名称和精度。</p><h2 id="971e" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">时区</strong></h2><p id="c80b" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated"><code class="fe om on oo np b">Europe/Kiev</code></p><p id="38cf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈114 </strong>浏览器中有一个有这个值。</p><h2 id="a551" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">屏幕尺寸和深度</strong></h2><p id="953b" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated"><code class="fe om on oo np b">1440x900x24</code></p><p id="751b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈32 </strong>浏览器中有一个有这个值。</p><h2 id="f683" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">语言</strong></h2><p id="e5b6" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated"><code class="fe om on oo np b">en-Gb</code></p><p id="edbc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈12 </strong>浏览器中有一个有这个值。</p><h2 id="d04e" class="nc mb ir bd mc nd ne dn mg nf ng dp mk lg nh ni mm lk nj nk mo lo nl nm mq nn bi translated"><strong class="ak">首选配色方案</strong></h2><p id="4751" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated"><code class="fe om on oo np b">window.matchMedia(‘(prefers-color-scheme: dark)’); // True or False</code></p><p id="57a5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is"> ≈3 </strong>浏览器中有一个有这个值。</p></div><div class="ab cl lt lu hv lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ik il im in io"><p id="3193" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这不是可以跟踪的参数的完整列表。但是剩下的就没那么独特了，经常在用户之间见面。</p><p id="5c38" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">以下是一些例子:</p><ul class=""><li id="97b3" class="nx ny ir kz b la lb ld le lg nz lk oa lo ob ls oc od oe of bi translated">不跟踪标题已启用</li><li id="932a" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">平台</li><li id="045c" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">触摸支持</li><li id="2320" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">广告拦截器已启用</li><li id="b9e9" class="nx ny ir kz b la og ld oh lg oi lk oj lo ok ls oc od oe of bi translated">本地存储/会话存储可用性</li></ul><p id="4116" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">正如你所看到的，他们中的一些可以足够准确地标记用户。想象一下它们的组合。站点可以将多个指标组合成一个字符串，然后生成校验和。这将是用户的唯一标识符，此外，该网站可以跟踪IP地址，但它可以避免与VPN或代理。</p><h1 id="4b53" class="ma mb ir bd mc md mx mf mg mh my mj mk jx mz jy mm ka na kb mo kd nb ke mq mr bi translated">结论</h1><p id="f74d" class="pw-post-body-paragraph kx ky ir kz b la ms js lc ld mt jv lf lg mu li lj lk mv lm ln lo mw lq lr ls ik bi translated">GDPR和即将到来的cookie功能的削减不会在不久的将来改变市场。因为我很确定，像Google Analytics这样的平台已经做好了没有cookies也能工作的准备。您已经可以在禁用cookies标志<code class="fe om on oo np b">window[‘ga-disable-UA-XXXXXX-Y’] = true;</code>的情况下使用分析。但是尊重用户隐私的小型分析服务肯定能分一杯羹。</p><p id="7b22" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">感谢阅读！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Build an Image Compressor Website using React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React建立图像压缩网站</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/image-compressor-website-using-react-9c7e631147ac?source=collection_archive---------10-----------------------#2021-04-19">https://javascript.plainenglish.io/image-compressor-website-using-react-9c7e631147ac?source=collection_archive---------10-----------------------#2021-04-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="629e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">近年来，图像在网站和应用程序中的使用呈指数级增长。此外，由于新型智能手机和相机的高相机质量，图像尺寸也随着它们的质量而增加。</p><p id="4b4b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你的图片太大，那么你的网站可能会花太多时间来加载。因此，优化不仅要考虑SS和JavaScript，还要考虑图像。这将确保你的访客有一个良好的体验。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/4c6393f94c49af15c380ba6169a4fe00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jZzGRYOXWw3gpFlQ6DiVIQ.jpeg"/></div></div></figure><h1 id="1f88" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">如何用React搭建一个图像压缩网站？</h1><p id="83cd" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">在本文中，我将帮助您使用React模块创建自己的图像压缩网站。你可以看到并使用图像压缩网站，我们将从下面的链接建设。</p><div class="ly lz gp gr ma mb"><a href="https://imagecompressor.netlify.app/" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd io gy z fp mg fr fs mh fu fw im bi translated">图像压缩器</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">使用React构建图像压缩网站</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">imagecompressor.netlify.app</p></div></div></div></a></div><p id="390e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你在创建这个网站时遇到困难，你可以从知识库中获得帮助。</p><div class="ly lz gp gr ma mb"><a href="https://github.com/mechiragjain/Image-Compressor" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd io gy z fp mg fr fs mh fu fw im bi translated">mechiragjain/图像压缩器</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">这是一个使用React.js包browser-image-compressor开发的图像压缩应用程序。这张在线图片…</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp kt mb"/></div></div></a></div><h1 id="f2ce" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">创建React应用</h1><p id="9cab" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">通过运行create-react-app命令开始构建您的项目，如下所示。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="47a2" class="mv kw in mr b gy mw mx l my mz">npx create-react-app image-compressor</span></pre><h1 id="0be7" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">安装软件包</h1><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="4b55" class="mv kw in mr b gy mw mx l my mz">npm i browser-image-compression bootstrap react-bootstrap react-dom</span></pre><ul class=""><li id="cd28" class="na nb in jm b jn jo jr js jv nc jz nd kd ne kh nf ng nh ni bi translated">browser-image-compression是一个JavaScript模块，用于在web浏览器中压缩图像。</li><li id="e3eb" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">安装bootstrap和react-bootstrap是为了使用Bootstrap设计我们的网站。</li><li id="0115" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">react-dom:这个包充当react的dom和服务器呈现器的入口点。</li></ul><h1 id="248b" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">密码</h1><ul class=""><li id="1b71" class="na nb in jm b jn lt jr lu jv no jz np kd nq kh nf ng nh ni bi translated">在“src”文件夹下创建“组件”和“图像”文件夹。</li><li id="e23a" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">在“Components”文件夹中创建两个文件——“compressor . js”和“Compressor.css”。</li><li id="fdcc" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">下载两张在网站上显示上传和下载图标的图片— <a class="ae nr" href="https://github.com/mechiragjain/Image-Compressor/tree/master/src/Images" rel="noopener ugc nofollow" target="_blank">从这里下载</a>并移动到项目的“图片”文件夹中。</li></ul><p id="55ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在更新您的<strong class="jm io"> app.js </strong>文件，将Compressor组件包含在其中。</p><p id="06d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki"> app.js </em></p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="1bd8" class="mv kw in mr b gy mw mx l my mz">import React from 'react';<br/>import './App.css';</span><span id="10d6" class="mv kw in mr b gy ns mx l my mz">import Compressor from "./Components/Compressor";</span><span id="6e8f" class="mv kw in mr b gy ns mx l my mz">function App() {<br/>  return (<br/>    &lt;Compressor /&gt;<br/>  );<br/>}</span><span id="9beb" class="mv kw in mr b gy ns mx l my mz">export default App;</span></pre><p id="814d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki"> Compressor.js </em></p><p id="2379" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">导入我们将在Compressor.js文件中使用的依赖项和其他组件。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="87ab" class="mv kw in mr b gy mw mx l my mz">import React, {useState} from 'react';<br/>import imageCompression from "browser-image-compression";<br/>import './Compressor.css';<br/>import Download from '../Images/Download.png';<br/>import Upload from '../Images/Upload.png';<br/>import {Navbar, Card} from "react-bootstrap";<br/>import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';<br/>import { faImage } from '@fortawesome/free-solid-svg-icons';</span><span id="ee46" class="mv kw in mr b gy ns mx l my mz">function Compressor(){<br/>  return(<br/>    &lt;div&gt;&lt;/div&gt;<br/>  )<br/>}</span><span id="65a9" class="mv kw in mr b gy ns mx l my mz">export default Compressor;</span></pre><ul class=""><li id="4fa0" class="na nb in jm b jn jo jr js jv nc jz nd kd ne kh nf ng nh ni bi translated">如前所述，imageCompressor是一个组件，我们将使用它来压缩上传到网站的图像。</li><li id="7e53" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">在第4行和第5行，我们从Images文件夹中导入上传和下载图标。</li><li id="6873" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">在下一行，从Bootstrap包导入NavBar和Card组件。</li><li id="a775" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">导入该文件中使用的字体图标。</li></ul><h2 id="81e7" class="mv kw in bd kx nt nu dn lb nv nw dp lf jv nx ny lj jz nz oa ln kd ob oc lr od bi translated">压缩机功能</h2><p id="6c4e" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">这是我们从Compressor.js文件中导出的函数。在这个函数中，我们将写出压缩图像的逻辑。</p><p id="cd6b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，在创建子函数之前，让我们添加一些状态来管理压缩图像和原始图像的链接，存储文件名，并检查用户是否上传了图像或单击了压缩按钮。</p><p id="7e78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Compressor()函数中，在return语句之前的顶部添加以下代码。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="80e5" class="mv kw in mr b gy mw mx l my mz">const [compressedLink, setCompressedLink] = useState("");<br/>const [originalImage, setOriginalImage] = useState("");<br/>const [originalLink, setOriginalLink] = useState("");<br/>const [clicked, setClicked] = useState(false);<br/>const [uploadImage, setUploadImage] = useState(false);<br/>const [outputFileName, setOutputFileName] = useState("");</span></pre><p id="9704" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将在Compressor函数中创建的函数有:</p><ul class=""><li id="cd01" class="na nb in jm b jn jo jr js jv nc jz nd kd ne kh nf ng nh ni bi translated">uploadLink —处理URL的上传部分</li><li id="20bb" class="na nb in jm b jn nj jr nk jv nl jz nm kd nn kh nf ng nh ni bi translated">单击—当用户单击压缩按钮时触发，压缩图像。</li></ul><p id="df92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ki"> uploadLink()函数</em> </strong></p><p id="1dba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Compressor()函数中创建此函数。一旦你上传一张图片到网站上，这个函数就会被触发。我们将上传图像的细节作为参数传递给这个函数。通过这个参数，我们将提取图像文件的细节。获得图像文件后，我们将创建一个URL来表示上传的图像。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="ad7f" class="mv kw in mr b gy mw mx l my mz">function uploadLink(event){<br/>  //To get the image file which user had uploaded in the input field<br/>  const imageFile = event.target.files[0];<br/>  <br/>  // Create a DOMString containing a URL that represents the imageFile<br/>  setOriginalLink(URL.createObjectURL(imageFile));<br/>  <br/>  //Now set the original image link, name of output file and upload image state<br/>  setOriginalImage(imageFile);<br/>  setOutputFileName(imageFile.name);<br/>  setUploadImage(true);<br/>}</span></pre><p id="c5b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="ki">点击()功能</em> </strong></p><p id="bb82" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<em class="ki"> uploadLink() </em>函数下添加该函数。当用户上传图像后按下压缩按钮时，这个函数将被调用。</p><p id="7595" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个函数中，我们将使用从模块或包中导入的<em class="ki"> imageCompression </em>组件来压缩原始图像。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="c3a9" class="mv kw in mr b gy mw mx l my mz">function click(e){<br/>  e.preventDefault();</span><span id="59d6" class="mv kw in mr b gy ns mx l my mz">  //<em class="ki">You should provide one of maxSizeMB, maxWidthOrHeight in the options</em> that will be passed to imageCompression component.<br/>const options = <br/>{ <br/>  maxSizeMB: 3, <br/>  maxWidthOrHeight: 800, <br/>  useWebWorker: true <br/>}; </span><span id="83b4" class="mv kw in mr b gy ns mx l my mz">if (options.maxSizeMB &gt;= originalImage.size / 1024) { <br/>  alert("Bring a bigger image"); <br/>  return 0; <br/>} </span><span id="ab72" class="mv kw in mr b gy ns mx l my mz">//this code will compress the original image <br/>let output; <br/>imageCompression(originalImage, options).then(x =&gt; { <br/>output = x; <br/>const downloadLink = URL.createObjectURL(output); setCompressedLink(downloadLink); <br/>}); <br/>setClicked(true); return 1; };</span></pre><p id="651f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您已经完成了压缩图像所需执行的逻辑。现在您必须在<em class="ki"> Compressor() </em>函数的返回语句中添加几行代码。将添加到该语句中的代码将在用户的前端得到反映。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="2e92" class="mv kw in mr b gy mw mx l my mz">&lt;div className="mainContainer"&gt;<br/>      &lt;Navbar className="navbar justify-content-center" bg="light" variant="light"&gt;<br/>        &lt;Navbar.Brand className="navbar-content" href="/"&gt;<br/>          &lt;FontAwesomeIcon className="social-icons changeOn" icon={faImage} size={1} /&gt;{' '}<br/>          Image Compressor<br/>        &lt;/Navbar.Brand&gt;<br/>      &lt;/Navbar&gt;</span><span id="c0d0" class="mv kw in mr b gy ns mx l my mz">        &lt;div className="row mt-5"&gt;<br/>          &lt;div className="col-xl-4 col-lg-4 col-md-12 col-sm-12"&gt;<br/>            {uploadImage ? (<br/>              &lt;Card.Img<br/>                className="image"<br/>                variant="top"<br/>                src={originalLink}<br/>              &gt;&lt;/Card.Img&gt;<br/>            ) : (<br/>              &lt;Card.Img<br/>                className="uploadCard"<br/>                variant="top"<br/>                src={Upload}<br/>              &gt;&lt;/Card.Img&gt;<br/>            )}<br/>            &lt;div className="d-flex justify-content-center upload-btn-wrapper"&gt;<br/>            &lt;button class="btn btn-dark"&gt;Upload a file&lt;/button&gt;<br/>              &lt;input<br/>                type="file"<br/>                accept="image/*"<br/>                className="mt-2 btn btn-dark w-75"<br/>                onChange={event =&gt; uploadLink(event)}<br/>              /&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;</span><span id="7443" class="mv kw in mr b gy ns mx l my mz">          &lt;div className="col-xl-4 col-lg-4 col-md-12 mb-5 mt-4 col-sm-12 d-flex justify-content-center align-items-baseline"&gt;<br/>            &lt;br /&gt;<br/>            {outputFileName ? (<br/>              &lt;button<br/>                type="button"<br/>                className=" btn btn-dark"<br/>                onClick={e =&gt; click(e)}<br/>              &gt;<br/>                Compress<br/>              &lt;/button&gt;<br/>            ) : (<br/>              &lt;&gt;&lt;/&gt;<br/>            )}<br/>          &lt;/div&gt;</span><span id="e012" class="mv kw in mr b gy ns mx l my mz">          &lt;div className="col-xl-4 col-lg-4 col-md-12 col-sm-12 mt-3"&gt;<br/>            &lt;Card.Img className="image" variant="top" src={compressedLink}&gt;&lt;/Card.Img&gt;<br/>            {clicked ? (<br/>              &lt;div className="d-flex justify-content-center"&gt;<br/>                &lt;a<br/>                  href={compressedLink}<br/>                  download={outputFileName}<br/>                  className="mt-2 btn btn-dark w-75"<br/>                &gt;<br/>                  Download<br/>                &lt;/a&gt;<br/>              &lt;/div&gt;<br/>            ) : (<br/>              &lt;Card.Img<br/>                className="uploadCard"<br/>                variant="top"<br/>                src={Download}<br/>              &gt;&lt;/Card.Img&gt;<br/>            )}<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/div&gt;</span></pre><h1 id="6c66" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">设计你的网站</h1><p id="5337" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">从资源库链接中复制CSS文件内容，并将其粘贴到您的CSS文件中，以设计您的网站。</p><p id="6729" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae nr" href="https://github.com/mechiragjain/Image-Compressor/blob/master/src/Components/Compressor.css" rel="noopener ugc nofollow" target="_blank">点击这里</a>查看CSS文件。</p><h1 id="fd7e" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">运行React应用</h1><p id="f0e0" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">运行React应用程序来测试您的图像压缩器网站。您可以在终端的图像压缩目录中键入以下命令。</p><pre class="kk kl km kn gt mq mr ms mt aw mu bi"><span id="5c24" class="mv kw in mr b gy mw mx l my mz">npm start</span></pre><p id="7cfe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你会看到一个类似的网站，如下图所示。</p><blockquote class="oe of og"><p id="174d" class="jk jl ki jm b jn jo jp jq jr js jt ju oh jw jx jy oi ka kb kc oj ke kf kg kh ig bi translated"><strong class="jm io">注意</strong> —如果你的代码不能正常工作，那么检查你是否错过了任何步骤。或者你可以通过下面的链接查看完整的代码。</p></blockquote><p id="bd58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae nr" href="https://github.com/mechiragjain/Image-Compressor" rel="noopener ugc nofollow" target="_blank">https://github.com/mechiragjain/Image-Compressor</a></p><p id="fa91" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">更多内容请看</em><a class="ae nr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ki">plain English . io</em></a></p></div></div>    
</body>
</html>
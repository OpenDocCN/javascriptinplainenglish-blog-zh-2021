<html>
<head>
<title>How to use Optional Chaining and Nullish Coalescing with TypeScript and React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何对TypeScript和React使用可选的链接和Nullish合并</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-optional-chaining-and-nullish-coalescing-with-typescript-and-react-1d43d0cf9c34?source=collection_archive---------11-----------------------#2021-04-18">https://javascript.plainenglish.io/how-to-use-optional-chaining-and-nullish-coalescing-with-typescript-and-react-1d43d0cf9c34?source=collection_archive---------11-----------------------#2021-04-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="747e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在TypeScript和React中正确使用可选的链接和Nullish合并</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d52ba4b13b671b2a192f91cf08a9abaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aSWflEP-JsZooxRb"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@guillaumedegermain?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Guillaume de Germain</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7e08" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="d739" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我们试图解决的问题是:你是否曾经在一个对象中有一个深度嵌套的属性，当你任何时候引用它的时候都会返回null，因为它在你的代码运行之前没有足够快地被定义？通常使用API调用，但不限于。根据属性的深度，你必须写一些难看的if语句来防止错误？这就是我们今天要用可选链接解决的问题。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="2aac" class="kw kx iq bd ky kz mr lb lc ld ms lf lg jw mt jx li jz mu ka lk kc mv kd lm ln bi translated">可选链接</h1><p id="a38a" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">正如简介中简要讨论的，可选链接中的明星是新的<strong class="lq ir">(?。)</strong>操作符，它使您能够捕获位于连接对象链深处的属性值，而无需检查链中的每个属性是否有效。</p><p id="e2a7" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">在可选的链接访问一个深度嵌套的属性之前，你必须这样做。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="003d" class="ng kx iq nc b gy nh ni l nj nk">if(object &amp;&amp; object.property &amp;&amp; object.property.nextProperty) {</span><span id="1911" class="ng kx iq nc b gy nl ni l nj nk">setProperty(object.property.nextProperty.finalProperty)</span><span id="85ae" class="ng kx iq nc b gy nl ni l nj nk">}</span></pre><p id="9579" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">通过可选的链接，您现在可以通过这个简单的加法去掉所有的代码。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="a1bd" class="ng kx iq nc b gy nh ni l nj nk">setPropert(object.property.nextProperty?.finalProperty)</span></pre><p id="7ea2" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated"><strong class="lq ir">(？。)</strong>符类似于常用的<strong class="lq ir">(。)</strong>运算符如果嵌套属性的值或引用为nullish (null或undefined ),则表达式不会创建错误，而是返回undefined值。</p><p id="e807" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">如果给定的函数不存在，也可以在函数中使用可选链接来返回undefined。</p><p id="4565" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">当在链式属性中访问引用时，引用可能会丢失，这会导致表达式变得更短、更简单。</p><p id="7b1d" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">当你在探索一个对象，而他们不能保证需要什么属性时，这也是有帮助的。</p><p id="b3ea" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">最后但同样重要的是，如果需要，可以使用多个可选的链接操作符。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="ff30" class="ng kx iq nc b gy nh ni l nj nk">object.property?.nextProperty?.finalProperty</span></pre></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="2039" class="kw kx iq bd ky kz mr lb lc ld ms lf lg jw mt jx li jz mu ka lk kc mv kd lm ln bi translated">无效合并</h1><p id="ce46" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">该节目的下一个明星是nullish合并运算符<strong class="lq ir">(?？)</strong>。当左边的操作数为空或未定义时，该逻辑运算符返回右边的值。你和我想的一样吗？这将与可选链接完美配合。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="5bd3" class="ng kx iq nc b gy nh ni l nj nk">object.person?.details?.car ?? "Person Has No Car"</span></pre><p id="8a99" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">与更常用的运算符相比，如果操作数是任何假值，而不仅仅是null或undefined，则逻辑OR <strong class="lq ir"> (||) </strong>返回右边的值。为了更清楚地说明这一点，如果您使用逻辑OR操作符来提供一个默认值，那么如果您认为某些falsy值是可用的(例如:“or 0”)，您可能会遇到意外的行为。</p><p id="374d" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">我们来做一个例子，右边的值等于0。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="2d12" class="ng kx iq nc b gy nh ni l nj nk">let count = 0;</span><span id="1974" class="ng kx iq nc b gy nl ni l nj nk">let orOperand = count || 42;</span><span id="94be" class="ng kx iq nc b gy nl ni l nj nk">let nullishOperand = count ?? 42;<br/></span><span id="0f2d" class="ng kx iq nc b gy nl ni l nj nk">console.log(orOperand)</span><span id="0098" class="ng kx iq nc b gy nl ni l nj nk">console.log(nullishOperand);</span><span id="030c" class="ng kx iq nc b gy nl ni l nj nk">result-<br/>logical OR: 42<br/>nullish coalescing: O</span></pre><p id="6b32" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">你可以在这个例子中看到nullish合并操作符，因为计数不是未定义的或者空的，它返回左边的值。其中使用逻辑或see的0作为falsy值，并返回右边的值。</p><p id="aaf7" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">现在让我们做一个例子，右边的值是未定义的。</p><pre class="kg kh ki kj gt nb nc nd ne aw nf bi"><span id="2c6f" class="ng kx iq nc b gy nh ni l nj nk">let count = <em class="nm">undefined</em>;</span><span id="4f65" class="ng kx iq nc b gy nl ni l nj nk">let orOperand = count || 42;</span><span id="3691" class="ng kx iq nc b gy nl ni l nj nk">let nullishOperand = count ?? 42;</span><span id="fdd4" class="ng kx iq nc b gy nl ni l nj nk">console.log(orOperand)</span><span id="8b28" class="ng kx iq nc b gy nl ni l nj nk">console.log(nullishOperand);</span><span id="2894" class="ng kx iq nc b gy nl ni l nj nk">result-<br/>logical OR: 42<br/>nullish coalescing: 42</span></pre><p id="6aa5" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">这提供了一个清晰的例子，说明零化合并是多么有益。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="1eb0" class="kw kx iq bd ky kz mr lb lc ld ms lf lg jw mt jx li jz mu ka lk kc mv kd lm ln bi translated">React和TypeScript示例</h1><p id="fcaf" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在Reactjs和TypeScript的世界中，这在很多方面都是有帮助的，我想提供一个类型化接口对象的例子，我们有时希望它为空。</p><p id="b5d2" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">然后用这些类型创建一个对象，并将值作为null传递。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="0b64" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">在console.log()中，您可以期望它返回默认值“主浴室未知”。</p><p id="7e82" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">我希望这有助于您了解如何使用这两个惊人的JavaScript特性，使您的代码与任何空值或未定义值的默认值相似但更健壮。</p><h2 id="ae4c" class="ng kx iq bd ky np nq dn lc nr ns dp lg lx nt nu li mb nv nw lk mf nx ny lm nz bi translated"><strong class="ak">重要提示</strong></h2><p id="cfd8" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">还需要注意的是，由于这些是较新的JavaScript特性，所以只有React和TypeScript的某些版本支持它们。</p><p id="1e11" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">最新的<a class="ae kv" href="https://tc39.es/ecma262/#prod-OptionalExpression" rel="noopener ugc nofollow" target="_blank"> ECMAScript (ECMA-262) </a>是这些特性被引入的时候。</p><p id="111b" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">支持范围:</p><ul class=""><li id="a340" class="oa ob iq lq b lr mw lu mx lx oc mb od mf oe mj of og oh oi bi translated"><strong class="lq ir">打字稿3.7 </strong></li><li id="473b" class="oa ob iq lq b lr oj lu ok lx ol mb om mf on mj of og oh oi bi translated"><strong class="lq ir">巴别塔7.8.0 </strong></li><li id="8e20" class="oa ob iq lq b lr oj lu ok lx ol mb om mf on mj of og oh oi bi translated"><strong class="lq ir">创建React App </strong> <strong class="lq ir"> 3.3.0 </strong></li></ul><h2 id="ac45" class="ng kx iq bd ky np nq dn lc nr ns dp lg lx nt nu li mb nv nw lk mf nx ny lm nz bi translated">结论</h2><p id="2425" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">再次感谢阅读！我喜欢提供这样的文章和指南来帮助社区。如果他们有你想看的主题或话题，请随意联系！</p><p id="e56e" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated">看看我其他一些受欢迎的文章:</p><div class="oo op gp gr oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-an-animated-countdown-timer-with-framer-motion-and-react-75035d13309c"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">创建一个动画倒计时定时器与帧运动和反应</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">一个指南，建立自己的动画倒计时定时器与帧运动，反应，并使用倒计时钩。</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pa l"><div class="pb l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a rel="noopener  ugc nofollow" target="_blank" href="/password-validation-using-react-and-typescript-5230079dff89"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">使用React和TypeScript进行密码验证</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">了解如何使用React挂钩和TypeScript验证密码</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="pa l"><div class="pg l pc pd pe pa pf kp or"/></div></div></a></div><div class="oo op gp gr oq or"><a href="https://medium.com/@steven_creates/how-to-use-react-hooks-usecontext-and-usereducer-with-typescript-f616067248dd" rel="noopener follow" target="_blank"><div class="os ab fo"><div class="ot ab ou cl cj ov"><h2 class="bd ir gy z fp ow fr fs ox fu fw ip bi translated">如何将React挂钩useContext和useReducer与TypeScript一起使用</h2><div class="oy l"><h3 class="bd b gy z fp ow fr fs ox fu fw dk translated">在这篇指南+文章中，我们将通过reactions use context hook来设置typescript的用法…</h3></div><div class="oz l"><p class="bd b dl z fp ow fr fs ox fu fw dk translated">medium.com</p></div></div><div class="pa l"><div class="ph l pc pd pe pa pf kp or"/></div></div></a></div><p id="c352" class="pw-post-body-paragraph lo lp iq lq b lr mw jr lt lu mx ju lw lx my lz ma mb mz md me mf na mh mi mj ij bi translated"><em class="nm">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="nm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
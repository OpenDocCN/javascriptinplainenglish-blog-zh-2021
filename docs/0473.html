<html>
<head>
<title>Getting Started with Markdown Pages in Gatsby.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Gatsby.js中的Markdown页面入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-markdown-pages-in-gatsbyjs-a6879909c5e9?source=collection_archive---------5-----------------------#2021-01-28">https://javascript.plainenglish.io/getting-started-with-markdown-pages-in-gatsbyjs-a6879909c5e9?source=collection_archive---------5-----------------------#2021-01-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1bc1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Mardown是一个伟大而简单的方法来存储简单的丰富文本，如笔记、博客或产品描述，而<a class="ae ki" href="https://www.gatsbyjs.com/" rel="noopener ugc nofollow" target="_blank"> GatsbyJS </a>可以轻松地在您的网页中使用它们，所以让我们来看看吧。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/20200e302bf9a229e46241afe2de103e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UAZ_3teUWXuIt9vB1HZYLw.jpeg"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Photo by <a class="ae ki" href="https://unsplash.com/@campaign_creators?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Campaign Creators</a> on <a class="ae ki" href="https://unsplash.com/s/photos/marketing?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="fc2d" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">什么是降价？</h1><p id="5f24" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">正如我之前提到的，<a class="ae ki" href="https://en.wikipedia.org/wiki/Markdown" rel="noopener ugc nofollow" target="_blank"> Markdown </a>是一种快速创建富文本的简单方法，它包含许多组件，从粗体文本到代码块和超链接。</p><p id="2e62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使文本加粗的基本语法通常是这样的:<code class="fe mc md me mf b">**bold text**</code>。单个星号使文本倾斜，使用反斜线通常可以创建代码块。</p><p id="f0fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最常用的功能可能是Markdown中的标题。快速编写从<code class="fe mc md me mf b">h1</code>到<code class="fe mc md me mf b">h5</code>的标题，有时甚至超过这是一个令人兴奋的特性。</p><pre class="kk kl km kn gt mg mf mh mi aw mj bi"><span id="8ade" class="mk la in mf b gy ml mm l mn mo"># Header that is h1<br/>## Header that is h2<br/>### Header that is h3<br/>...</span></pre><p id="a29f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然这对开发人员来说似乎没什么大不了的，但是想象一下，一家中小型公司想要创建blogposts，但是他们的站点没有像medium那样的功能。开发人员会给文案撰写人员一份降价备忘单，他们会在几分钟内开始写作。</p><h2 id="d1ae" class="mk la in bd lb mp mq dn lf mr ms dp lj jv mt mu ln jz mv mw lr kd mx my lv mz bi translated">什么是Gatsby.js？</h2><p id="ddc6" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">盖茨比<a class="ae ki" href="https://www.gatsbyjs.com/" rel="noopener ugc nofollow" target="_blank"/>。js是一个前端框架，用于快速编写服务器渲染的快速网页。我并不了解他们的一切，但我以前使用过这个框架，开发者的体验肯定是好的。</p><p id="5049" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该框架在内部使用GraphQL来检索可以在服务器端呈现的数据，因此页面将始终显示正确的数据。</p><p id="da47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">他们实际上有一家商场。</p><h1 id="1871" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">安装和设置</h1><p id="af4e" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">我们需要首先安装Gatsby-CLI，然后我们将从Gatsby通过Github链接提供的“hello-world-starter”创建一个新项目。</p><pre class="kk kl km kn gt mg mf mh mi aw mj bi"><span id="2523" class="mk la in mf b gy ml mm l mn mo">npm install -g gatsby-cli</span><span id="5aa3" class="mk la in mf b gy nb mm l mn mo">gatsby new hello-world <a class="ae ki" href="https://github.com/gatsbyjs/gatsby-starter-hello-world" rel="noopener ugc nofollow" target="_blank">https://github.com/gatsbyjs/gatsby-starter-hello-world</a></span></pre><p id="f57b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">进入新创建的文件夹，运行<code class="fe mc md me mf b">gatsby develop</code>来运行项目。该项目的默认网址是<code class="fe mc md me mf b">localhost:8000</code>。</p><p id="0e6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于盖茨比还有很多东西要学，但我将只关注降价页面，以创建一篇更有针对性的文章。</p><p id="5239" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们安装一些Gatsby插件来让它们工作。</p><pre class="kk kl km kn gt mg mf mh mi aw mj bi"><span id="35ed" class="mk la in mf b gy ml mm l mn mo">npm install gatsby-source-filesystem<br/>npm install gatsby-transformer-remark</span></pre><p id="c3b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">filesystem插件用于处理非页面文件，transformer-remark插件用于将Markdown转换成Gatsby可读的代码。</p><p id="8118" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后我们将编辑<code class="fe mc md me mf b">gatsby-config.js</code>来包含这两个插件。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="e9e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你运行这个，你会得到一个错误，指出一个目录不存在，这是正确的。在您的<code class="fe mc md me mf b">src</code>目录中，像我们在配置中定义的那样，在<code class="fe mc md me mf b">/src</code>中创建一个名为<code class="fe mc md me mf b">markdown</code>的新文件夹。</p><h1 id="3252" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建降价页面</h1><p id="3d17" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">设置完成，是时候创建降价文件了。这个文件可以(很可能应该)包含盖茨比所说的'<a class="ae ki" href="https://www.gatsbyjs.com/docs/how-to/routing/adding-markdown-pages/#frontmatter-for-metadata-in-markdown-files" rel="noopener ugc nofollow" target="_blank"> frontmatter </a>'。</p><p id="888a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Frontmatter可以包含您不想让用户看到的<code class="fe mc md me mf b">.md</code>文件的元数据，或者您可能想在用户看到它之前格式化它。</p><pre class="kk kl km kn gt mg mf mh mi aw mj bi"><span id="8493" class="mk la in mf b gy ml mm l mn mo">---<br/>slug: "/blog/first-post"<br/>date: "2021-01-28"<br/>title: "My first page"<br/>---</span></pre><p id="f017" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">看起来是这样的。只需在Markdown文件顶部的三重破折号之间添加键值对。Gatsby的GraphQL API可以检索这些数据供您使用。</p><p id="34ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将在我的<code class="fe mc md me mf b">markdown</code>文件夹中创建一个名为<code class="fe mc md me mf b">first.md</code>的新降价文件。</p><p id="03f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在这里找到它，因为Github创建了一个frontmatter所在的表。但它可以是任何带有上述内容的降价文件。<em class="na">虽然我把我的slug设置为</em> <code class="fe mc md me mf b"><em class="na">/first</em></code>这可能很重要。</p><p id="c11d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这当然不会显示任何新的东西，因为我们还没有定义模板。这个模板是React代码，它将告诉Gatsby如何样式化我们的Markdown文件，并呈现frontmatter等细节。</p><h1 id="1db1" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">创建模板</h1><p id="7f67" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">模板位于项目的<code class="fe mc md me mf b">src/templates</code>目录中。其中的模板可以有任何名称。我选择了<code class="fe mc md me mf b">template.js</code>，并添加了以下代码。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b5c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">呈现一个简单的React组件。我们获取一些数据来得到我们的frontmatter和html。我们<code class="fe mc md me mf b">dangerouslySetInnerHTML</code>到我们的<code class="fe mc md me mf b">div</code>，在这里将设置来自Markdown的HTML。在它上面，我们设置标题和日期。</p><p id="b35c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">GraphQL查询从我们的Markdown页面中检索数据。您可以通过转到<code class="fe mc md me mf b"><a class="ae ki" href="http://localhost:8000/___graphql" rel="noopener ugc nofollow" target="_blank">localhost:8000/___graphql</a></code>并在GraphiQL界面中输入查询来检查这一点。</p><p id="e546" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们只需要将<code class="fe mc md me mf b">{ eq: $slug }</code>替换为我们在frontmatter中插入的实际slug。<code class="fe mc md me mf b">{ eq: “/first” }</code>像这样。您现在应该会看到一些熟悉的数据被返回给您。这就是Gatsby将使用该查询并使用<code class="fe mc md me mf b">$slug</code>变量获得正确的减价页面来为您做的事情。</p><h1 id="0022" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">使用CreatePage创建静态页面</h1><p id="8e16" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">从Markdown创建静态页面需要使用Gatsby提供的<code class="fe mc md me mf b">CreatePage</code> API。我们在项目的根目录下创建一个<code class="fe mc md me mf b">gatsby-node.js</code>文件。我们从<code class="fe mc md me mf b">src/templates/template.js</code>中定义模板，并设置URL来跟随frontmatter中的slug。我的情况是<code class="fe mc md me mf b">/first</code>。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="f15c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该代码还使用GraphQL以降序检索所有Markdown文件。</p><p id="03dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你重新启动你的服务器，并转到你的slug的URL，你会看到我们已经把Markdown文件渲染成HTML格式的(最小的)样式和所有的东西。</p><p id="bc8b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当然，您可以使用全局CSS来更新这些样式。</p><h1 id="d55e" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">干得好的</h1><p id="0e11" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">用Markdown创建你的第一页做得很好。尝试使用Markdown文件添加更多的页面，这很容易，因为我们已经完成了所有的设置。</p><p id="57bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇文章对你有用，祝你今天过得愉快。</p></div></div>    
</body>
</html>
<html>
<head>
<title>How To Use Svelte With Electron And TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用电子和打字稿来减肥</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/svelte-electron-typescript-daf35537e9f8?source=collection_archive---------4-----------------------#2021-06-26">https://javascript.plainenglish.io/svelte-electron-typescript-daf35537e9f8?source=collection_archive---------4-----------------------#2021-06-26</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/6ff081eb74737f6e7dc62c40a324346c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z1g8JHXRLbAb3FFl"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AltumCode</a> on <a class="ae kd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="34b1" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我继续探索苗条的世界。每天我都在增加一点我的知识，每天我都在和自己的极限做斗争。虽然我很高兴能够找到在GitHub上创建静态页面的方法，但我的目标是让我更容易开发一些离线工具。与其他框架不同，Svelte社区非常小，没有，或者至少我找不到适合我需要的模板。为此，我决定创建自己的模板来整合苗条，电子和打字稿。</p><p id="a401" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我先从“<em class="lc">交战规则</em>”说起。我需要一个工具:</p><ul class=""><li id="cfb3" class="ld le ir kg b kh ki kl km kp lf kt lg kx lh lb li lj lk ll bi translated">可以完全脱机工作</li><li id="ac2e" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated">不需要安装互联网连接</li><li id="07dd" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated">可以离线和在线更新</li><li id="e5d7" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated">可以使用TypeScript开发</li><li id="3977" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated">开发和扩展相对简单</li></ul><p id="8be3" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我已经创建了第一个模板，没有打字稿:<a class="ae kd" href="https://github.com/el3um4s/memento-svelte-electron" rel="noopener ugc nofollow" target="_blank">纪念品——细长的&amp;电子</a>。从这里开始，我将实现第二个版本，我将称之为<a class="ae kd" href="https://github.com/el3um4s/memento-svelte-electron-typescript" rel="noopener ugc nofollow" target="_blank">MEMENTO——svelite，electronic&amp;TypeScript</a>(我对名字有很多想象，嗯？).</p><p id="8ea3" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这篇文章是给我的，尤其是给未来的我的，让我记住我正在做的事情。最重要的是提醒我正在做的一些设计选择。还因为我认为我将很可能不得不开发第三个模板(最终的？也许)在其中整合也苗条的。但是最好一步一步来。</p><p id="45c0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">所以，首先要做的是从Svelte开始创建一个新项目:</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="feb9" class="ma mb ir lw b gz mc md l me mf">npx degit sveltejs/template my-svelte-project<br/>cd my-svelte-project<br/>node scripts/setupTypeScript.js<br/>npm install</span></pre><p id="a2a6" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我安装我需要的电子软件包</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="929d" class="ma mb ir lw b gz mc md l me mf">npm i -D electron@latest<br/>npm i -D typescript<br/>npm i -D electron-builder<br/>npm i electron-updater<br/>npm i electron-reload</span></pre><p id="cd7e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">用这种方法我得到:</p><ul class=""><li id="a71e" class="ld le ir kg b kh ki kl km kp lf kt lg kx lh lb li lj lk ll bi translated">最新版的<a class="ae kd" href="https://www.electronjs.org/" rel="noopener ugc nofollow" target="_blank">电子</a></li><li id="736f" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated">打字稿，用于电子</li><li id="3254" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae kd" href="https://www.electron.build/" rel="noopener ugc nofollow" target="_blank">electronic-builder</a>创建要发布的可执行文件(适用于Windows、Linux和macOS)</li><li id="d2ae" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae kd" href="https://www.electron.build/auto-update" rel="noopener ugc nofollow" target="_blank">电子更新器</a>轻松将程序更新至最新版本</li><li id="ebf6" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated"><a class="ae kd" href="https://www.npmjs.com/package/electron-reload" rel="noopener ugc nofollow" target="_blank">electronic-reload</a>在应用开发期间更新electronic“浏览器窗口”的内容</li></ul><p id="8c46" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我安装<a class="ae kd" href="https://nodemon.io/" rel="noopener ugc nofollow" target="_blank"> nodemon </a>来自动重启任何源代码变更的电子。我也认为这在开发应用程序时很有用</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="2958" class="ma mb ir lw b gz mc md l me mf">npm i -D nodemon</span></pre><p id="5dcf" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">安装完所有需要的东西后，是时候去修复项目的结构了。目前有两个文件夹</p><ul class=""><li id="e139" class="ld le ir kg b kh ki kl km kp lf kt lg kx lh lb li lj lk ll bi translated"><code class="fe mg mh mi lw b">public</code>，Svelte的编译文件在哪里</li><li id="231c" class="ld le ir kg b kh lm kl ln kp lo kt lp kx lq lb li lj lk ll bi translated"><code class="fe mg mh mi lw b">src</code>，那里是苗条的源文件</li></ul><p id="986d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">但是这种结构不太好用。不仅仅是因为电子文件不见了，还因为我以后会遇到问题。所以我用另一种方式重新整理文件:</p><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mj"><img src="../Images/5cd0fcc590ab13a46a90f20b3d88631f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WUSXdHFg-PJ1TjjD.jpg"/></div></div></figure><p id="f5f7" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">首先，我创建一个<code class="fe mg mh mi lw b">dist</code>文件夹:它将被用来存放编译好的文件。我把苗条的文件(那些自动创建的)移到<code class="fe mg mh mi lw b">dist\www</code>。</p><p id="ff8b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我开始编辑<code class="fe mg mh mi lw b">src</code>文件夹。我在里面创建了两个额外的文件夹:<code class="fe mg mh mi lw b">electron</code>和<code class="fe mg mh mi lw b">frontend</code>。首先，我插入使电子工作所必需的文件(目前只有<code class="fe mg mh mi lw b">index.ts</code>和<code class="fe mg mh mi lw b">preload.ts</code>)。我用<code class="fe mg mh mi lw b">frontend</code>代替所有和苗条有关的东西。但是我添加了<code class="fe mg mh mi lw b">tsconfig.json</code>文件。</p><p id="3f28" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我还在项目的根目录下添加了一些文件:<code class="fe mg mh mi lw b">icon.ico</code>、<code class="fe mg mh mi lw b">license.txt</code>、<code class="fe mg mh mi lw b">nodemon.json</code>。在PC上安装应用程序时，将需要图标文件和许可证文件。我将在开发程序时使用nodemon配置文件。</p><p id="b26b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我还没有写一行代码。但是是时候把手放到键盘上，开始整理一些文件了。第一个要更改的文件是<code class="fe mg mh mi lw b">dist\www\index.html</code>。我必须做一个非常简单的改变，修改导入文件的引用。事情是这样的:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="0386" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">对此</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="61f8" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">基本上，我删除了所有URL的第一个斜杠，并添加了一些<a class="ae kd" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP" rel="noopener ugc nofollow" target="_blank"> CSP设置</a>。</p><p id="64be" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在我转到专用于前端源文件的部分。这里我创建了一个文件<code class="fe mg mh mi lw b">src\frontend\tsconfig.json</code>:它的目的是让你用不同于Electron的编译方式来编译Svelte的TypeScript文件(参见<a class="ae kd" href="https://stackoverflow.com/questions/37579969/how-to-use-multiple-tsconfig-files-in-vs-code" rel="noopener ugc nofollow" target="_blank"> Stack Overflow:如何在vs-code中使用多个tsconfig文件？</a>)。Inserisco问题代码:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="3bb7" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">稍后我会回到<code class="fe mg mh mi lw b">src\electron</code>。现在我修改与TypeScript配置相关的另一个文件:位于项目根目录的<code class="fe mg mh mi lw b">tsconfig.json</code>文件。我写道:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="9758" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后，我通过在文件中输入以下内容来配置<code class="fe mg mh mi lw b">nodemon.json</code>:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="610d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">通过这种方式，我拦截了对电子文件的所有更改，并且可以自动重启电子文件。</p><p id="a1cf" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">另一个要修复的文件是<code class="fe mg mh mi lw b">rollup.config.js</code>。通常，自动创建的文件是好的，但是在这种情况下，我改变了文件结构:我必须确保各种命令指向正确的文件夹。</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="d805" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">还有最后一个文件需要配置，<code class="fe mg mh mi lw b">package.json</code>。我从一般信息开始:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="0da4" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我定义程序的入口点。我决定把所有编译好的文件都放在<code class="fe mg mh mi lw b">dist</code>里，所以我给<code class="fe mg mh mi lw b">package.json</code>加了一行:</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="d0e7" class="ma mb ir lw b gz mc md l me mf">{<br/>  "main": "dist/index.js",<br/>}</span></pre><p id="33dd" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">显然，我省略了报告各种依赖关系，它们是在我从<code class="fe mg mh mi lw b">npm</code>导入库时自己添加的。我转而讨论专用于<code class="fe mg mh mi lw b">scripts</code>的部分。我需要一些东西来运行<code class="fe mg mh mi lw b">nodemon</code>。</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="32e0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">当然，我还需要确保我可以用编译好的typescript文件运行Electron:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="7e73" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我需要一些东西来构建可执行文件并直接在GitHub上发布它们:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="988b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">最后，我必须配置专用于创建要分发的文件的部分:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="fc76" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">一旦配置完成，我就可以开始写代码了。我从简单的事情开始:我使用<code class="fe mg mh mi lw b">src\electron\index.ts</code>创建一个简单的窗口，在其中显示一个简单的HTML文件(由Svelte创建)。所以，我从:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="2b64" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">第一次测试的时间到了；在命令行中，我键入:</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="6cfc" class="ma mb ir lw b gz mc md l me mf">npm run nodemon</span></pre><p id="6a6c" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">如果我一切都做对了，一个电子窗口将会出现一个简单的“Hello World”:</p><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mj"><img src="../Images/4cbf1bc655c8700cc86a160fd903ac0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RxUleV4QkfHXljx9.jpg"/></div></div></figure><p id="065d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">下一个测试是改变<code class="fe mg mh mi lw b">index.ts</code>中的窗口大小，保存文件，看看会发生什么:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mm"><img src="../Images/af27ef958d336b9625422de30a84a95e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yW1bd2QfRNMdvN9F.gif"/></div></div></figure><p id="76b0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">Nodemon重新启动Electron并将更改应用到窗口。但如果我只改变苗条的部分，那么Nodemon不会做任何事情。这是<code class="fe mg mh mi lw b">electron-reload</code>的任务:</p><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mm"><img src="../Images/68695d2bdb6ecefbc3c234e096d88c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JLs386lYQNu58aNE.gif"/></div></div></figure><p id="4608" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">如果我对电子方面的工作不感兴趣，我可以使用:</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="bdc7" class="ma mb ir lw b gz mc md l me mf">npm run dev</span></pre><p id="f0e8" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这样我只监控用Svelte编译的文件的变化。</p><p id="6930" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">下一个测试是关于创建一个可执行文件的可能性。所以我从命令行运行:</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="8480" class="ma mb ir lw b gz mc md l me mf">npm run out:win</span></pre><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mj"><img src="../Images/c0ca96c81bbdcfa6311208b35591d28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QlVDCQHlezCDX11E.jpg"/></div></div></figure><p id="ffee" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我在<code class="fe mg mh mi lw b">out</code>目录中得到<code class="fe mg mh mi lw b">memento-svelte-electron-typescript Setup 0.0.1.exe</code>文件。</p><p id="2daf" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">要在GitHub上发布应用程序，我可以使用以下命令</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="8057" class="ma mb ir lw b gz mc md l me mf">npm run publish:win</span></pre><p id="89d2" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在是时候开始研究如何将电子与苗条更紧密地结合起来了。是时候去编辑<code class="fe mg mh mi lw b">src\preload.ts</code>文件了。我需要一个与电子通信的机制，从苗条开始:我启用一些入站和出站通信通道。</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="b569" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">作为测试，我向Electron询问Chrome、Node和Electron的版本号。然后，我在自定义组件中使用这些信息。我在<code class="fe mg mh mi lw b">src\electron\index.ts</code>上加了一个函数:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="5adb" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这样，当我向组件请求<code class="fe mg mh mi lw b">requestSystemInfo</code>时，电子将获得我需要的信息，并在<code class="fe mg mh mi lw b">getSystemInfo</code>通道上用消息发回。</p><p id="f763" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">所以我创建了<code class="fe mg mh mi lw b">src\frontend\Components\InfoElectron.svelte</code>组件:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="9719" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我明白了。</p><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mj"><img src="../Images/ae252f6651e71ae5cd68559ad37980f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mzjWy2L04pke3HfM.jpg"/></div></div></figure><p id="88bb" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然而，我承认我还没有很好地探索这种模式(以及如何使用TypeScript创建电子输入文件):我还推荐阅读<a class="ae kd" href="https://blog.logrocket.com/" rel="noopener ugc nofollow" target="_blank"> LogRocket </a>的<a class="ae kd" href="https://blog.logrocket.com/electron-ipc-response-request-architecture-with-typescript/" rel="noopener ugc nofollow" target="_blank">electronic IPC Response/Request architecture with TypeScript</a>。</p><p id="6a98" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">最后要修复的是自动更新。为了管理它，我从电子公司进口<code class="fe mg mh mi lw b">Notification</code>和从<code class="fe mg mh mi lw b">electron-updater</code>进口<code class="fe mg mh mi lw b">autoUpdater</code></p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="8878" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">要检查更新，只需使用</p><pre class="lr ls lt lu gu lv lw lx ly aw lz bi"><span id="d9dc" class="ma mb ir lw b gz mc md l me mf">autoUpdater.checkForUpdates();</span></pre><p id="7e5c" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这个命令生成了一些我可以拦截的事件。目前我需要这个2:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="18f2" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这允许我在有可用更新时弹出系统通知。如果你决定安装它，只需点击通知开始下载。之后，当下载完成时，点击通知开始安装程序。</p><figure class="lr ls lt lu gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj mn"><img src="../Images/297db6ea79136645bee3c212d446b31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aIFC06TP5NkhZ0Mm.gif"/></div></div></figure><p id="3c2e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我创建了<code class="fe mg mh mi lw b">dev-app-update.yml</code>文件。该文件用于测试开发中的自动更新。我插入了对我托管项目的GitHub存储库的引用:</p><figure class="lr ls lt lu gu js"><div class="bz fq l di"><div class="mk ml l"/></div></figure><p id="7b18" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">今天到此为止。</p><p id="3ccd" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl mo mp hv mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is"> <em class="lc">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kd" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="kg is"> <em class="lc">中邮箱列表</em> </strong> </a></p><div class="mv mw gq gs mx my"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="mz ab fp"><div class="na ab nb cl cj nc"><h2 class="bd is gz z fq nd fs ft ne fv fx iq bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="nf l"><h3 class="bd b gz z fq nd fs ft ne fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="ng l"><p class="bd b dl z fq nd fs ft ne fv fx dk translated">el3um4s.medium.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jx my"/></div></div></a></div></div><div class="ab cl mo mp hv mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ik il im in io"><div class="lr ls lt lu gu my"><a href="https://github.com/el3um4s/memento-svelte-electron-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fp"><div class="na ab nb cl cj nc"><h2 class="bd is gz z fq nd fs ft ne fv fx iq bi translated">GitHub-El 3um 4s/memento-svelte-electronic-typescript:使用Svelte创建桌面应用程序的模板…</h2><div class="nf l"><h3 class="bd b gz z fq nd fs ft ne fv fx dk translated">模板创建一个桌面应用程序与苗条，TailwindCSS，电子和打字稿(与电子更新…</h3></div><div class="ng l"><p class="bd b dl z fq nd fs ft ne fv fx dk translated">github.com</p></div></div><div class="nh l"><div class="nn l nj nk nl nh nm jx my"/></div></div></a></div></div><div class="ab cl mo mp hv mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ik il im in io"><p id="3899" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="lc">原载于2021年6月26日</em><a class="ae kd" href="https://blog.stranianelli.com/svelte-et-electron-et-typescript-english/" rel="noopener ugc nofollow" target="_blank"><em class="lc">https://blog.stranianelli.com</em></a><em class="lc">。</em></p><p id="833c" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="lc">更多内容看</em> <a class="ae kd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="lc">说白了. io </em> </strong> </a> <strong class="kg is"> <em class="lc">。</em> </strong> <em class="lc">报名参加我们的</em> <a class="ae kd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="lc">免费每周简讯点击这里</em> </strong> </a> <strong class="kg is"> <em class="lc">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create an Asteroids Game with p5.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用p5.js创建一个小行星游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-an-asteroids-game-with-p5-js-5734b554f731?source=collection_archive---------4-----------------------#2021-02-20">https://javascript.plainenglish.io/create-an-asteroids-game-with-p5-js-5734b554f731?source=collection_archive---------4-----------------------#2021-02-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77ab25fe4975a9da61551b54dcf8935b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*246LP4jeUJgRn9_h.png"/></div></div></figure><p id="ccff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本文将介绍如何从<a class="ae kt" href="https://b.remarkabl.org/2YS6LZz" rel="noopener ugc nofollow" target="_blank"> p5创建一个小行星克隆体。播放示例</a>。玩<a class="ae kt" href="https://b.remarkabl.org/36ONQU6" rel="noopener ugc nofollow" target="_blank">游戏</a>或观看<a class="ae kt" href="https://youtu.be/q-p5lZsv3LQ?list=PLVgOtoUBG2mdLpj6qT5DXfg5_pGPTDrJZ" rel="noopener ugc nofollow" target="_blank"> YouTube视频</a>:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="ky kz l"/></div></figure><h1 id="863c" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">密码</h1><p id="300a" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">在<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/preload" rel="noopener ugc nofollow" target="_blank">preload()</a></code>中加载带有<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/loadImage" rel="noopener ugc nofollow" target="_blank">loadImage()</a></code>的<a class="ae kt" href="https://github.com/remarkablegames/asteroids/tree/gh-pages/assets" rel="noopener ugc nofollow" target="_blank">图像</a>:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="be9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/createCanvas" rel="noopener ugc nofollow" target="_blank">createCanvas()</a></code>在<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/setup" rel="noopener ugc nofollow" target="_blank">setup()</a></code>中创建一个800像素宽600像素高的画布:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="7278" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-createSprite" rel="noopener ugc nofollow" target="_blank">createSprite()</a></code>创建飞船精灵:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="8925" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-addImage" rel="noopener ugc nofollow" target="_blank">addImage()</a></code>和<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-addAnimation" rel="noopener ugc nofollow" target="_blank">addAnimation()</a></code>的标签标识替换为常量:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="7220" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/draw" rel="noopener ugc nofollow" target="_blank">draw()</a></code>中，将<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/background" rel="noopener ugc nofollow" target="_blank">background()</a></code>设为黑色，用<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-drawSprites" rel="noopener ugc nofollow" target="_blank">drawSprites()</a></code>画船:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="9de0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/LEFT_ARROW" rel="noopener ugc nofollow" target="_blank">LEFT_ARROW</a></code>和<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/RIGHT_ARROW" rel="noopener ugc nofollow" target="_blank">RIGHT_ARROW</a></code>键旋转<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-keyDown" rel="noopener ugc nofollow" target="_blank">keyDown()</a></code>上的船；</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="c29d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将船向前移动，将<code class="fe md me mf mg b">keyDown()</code>上的动画改为<code class="fe md me mf mg b"><a class="ae kt" href="https://p5js.org/reference/#/p5/UP_ARROW" rel="noopener ugc nofollow" target="_blank">UP_ARROW</a></code>键；</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="cabf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当<code class="fe md me mf mg b">x</code>键的<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/p5.play.html#method-keyWentDown" rel="noopener ugc nofollow" target="_blank">keyWentDown()</a></code>被触发时发射子弹:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="6be4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当玩家死亡时阻止子弹发射:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><blockquote class="mi mj mk"><p id="00c2" class="jv jw ml jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated"><em class="in"/><code class="fe md me mf mg b"><em class="in">keyDown()</em></code><em class="in">和</em> <code class="fe md me mf mg b"><em class="in">keyWentDown()</em></code> <em class="in">的区别在于，前者可以保持(舰船连续移动)，而后者只能触发一次(子弹在释放和按压过程中发射)。</em></p></blockquote><p id="bef7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">属性确保子弹在一定时间后被移除。</p><p id="8cee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为子弹和小行星创建<a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Group.html" rel="noopener ugc nofollow" target="_blank">组</a>:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="66ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将项目符号添加到项目符号组:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="c2c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">添加创建小行星的辅助函数:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="6a74" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">图像被随机化并且属性被设置。自定义属性<code class="fe md me mf mg b">type</code>跟踪大(3)、中(2)和小(1)小行星的大小。<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-setCollider" rel="noopener ugc nofollow" target="_blank">setCollider()</a></code>设置碰撞检测的边界框或圆。</p><p id="da8f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在画布视图之外的随机位置创建8个小行星:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="fdd8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要让小行星显示出来，当它们出界时重置精灵的位置:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="7bb8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这确保了所有精灵都保留在画布视图中(例如，如果一艘船在向上移动时出界，位置会重置到底部)。</p><p id="cc50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">小行星和飞船/子弹之间的手柄<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Sprite.html#method-overlap" rel="noopener ugc nofollow" target="_blank">overlap()</a></code>:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="3763" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当小行星被船只或子弹击中时产生粒子:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="2211" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">显示播放器控件的文本说明:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><blockquote class="mi mj mk"><p id="aee9" class="jv jw ml jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated"><em class="in">最后渲染文字说明，这样图层就在背景和精灵的前面。</em></p></blockquote><p id="b73d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要调试精灵之间的冲突，请启用精灵属性<code class="fe md me mf mg b"><a class="ae kt" href="https://molleindustria.github.io/p5.play/docs/classes/Sprite.html#prop-debug" rel="noopener ugc nofollow" target="_blank">debug</a></code>:</p><figure class="ku kv kw kx gt jo"><div class="bz fp l di"><div class="mh kz l"/></div></figure><p id="5a5d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这讲述了如何从p5.play制作小行星游戏。你可以做进一步的改进，如在屏幕上添加标题和游戏，以及改进物理和力学。</p><h1 id="b5fc" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">链接</h1><ul class=""><li id="400b" class="mp mq in jx b jy ly kc lz kg mr kk ms ko mt ks mu mv mw mx bi translated"><a class="ae kt" href="https://b.remarkabl.org/36ONQU6" rel="noopener ugc nofollow" target="_blank"> Repl.it </a></li><li id="4fb7" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><a class="ae kt" href="https://github.com/remarkablegames/asteroids" rel="noopener ugc nofollow" target="_blank">储存库</a></li><li id="3f80" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><a class="ae kt" href="https://b.remarkabl.org/3oZnN2L" rel="noopener ugc nofollow" target="_blank">博文</a></li><li id="f3b4" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><a class="ae kt" href="https://b.remarkabl.org/p5play" rel="noopener ugc nofollow" target="_blank"> p5.play </a></li></ul></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="74f7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://b.remarkabl.org/3oZnN2L" rel="noopener ugc nofollow" target="_blank"> <em class="ml">本文原载于2021年1月31日《remarkablegames.org》。</em>T15】</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Deploy a Node.js Serverless Function to Vercel</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将Node.js无服务器函数部署到Vercel</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-deploy-a-node-js-serverless-function-to-vercel-a0dc13cefa0e?source=collection_archive---------10-----------------------#2021-03-01">https://javascript.plainenglish.io/how-to-deploy-a-node-js-serverless-function-to-vercel-a0dc13cefa0e?source=collection_archive---------10-----------------------#2021-03-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e8b2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">开始使用无服务器功能</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/977c6d3e2099aa0aabee4fc34c2c16c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IdpkG2CwR9xscvMMkesTNw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/@vlada-karpovich?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Vlada Karpovich</a> from <a class="ae kv" href="https://www.pexels.com/photo/photo-of-man-using-computer-4050470/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="ae92" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Node.js是一个开源的JavaScript运行时环境，可以在后端执行JavaScript代码。如果你是一名前端开发人员，想要探索后端开发，那么Node.js可以是一个很好的起点，因为你已经了解JavaScript。</p><p id="6e63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，您将了解如何将Node.js无服务器功能部署到Vercel。Vercel提供无服务器运行时，也称为功能即服务(FaaS)。无服务器功能的好处数不胜数，但最突出的一点是，您只在需要时才运行该功能。我们开始吧！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8592" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置</h1><p id="0f07" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这篇文章中，我将使用<a class="ae kv" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> GitHub </a>和<a class="ae kv" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>。我已经创建了一个git资源库，你可以从<a class="ae kv" href="https://github.com/lifeparticle/vercel-node.js" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中获得它，并将其与Vercel连接。</p><p id="5bcb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将代码下载到本地机器后，您可以在<strong class="ky ir"> api </strong>文件夹中看到一个名为<code class="fe mw mx my mz b">index.js</code>的JavaScript文件。根据Vercel针对Node.js的<a class="ae kv" href="https://vercel.com/docs/serverless-functions/supported-languages#node.js" rel="noopener ugc nofollow" target="_blank">文档</a>，如果api目录中有一个JavaScript文件或TypeScript文件，包含一个默认的导出函数，那么Vercel会将其作为一个无服务器函数。</p><p id="7c54" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来分解一下<code class="fe mw mx my mz b">index.js</code>文件的各个成分。</p><pre class="kg kh ki kj gt na mz nb bn nc nd bi"><span id="fa82" class="ne ma iq mz b be nf ng l nh ni">module.exports = (req, res) =&gt; {<br/>   const name = req.query.name || 'stranger';<br/>   res.status(200).send(`Hello, ${name}!`)<br/>}</span></pre><p id="2952" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里我们有一个Node.js函数。下面的代码在<code class="fe mw mx my mz b">req.query</code>中寻找一个名为<code class="fe mw mx my mz b">name</code>的键。如果键存在，变量<code class="fe mw mx my mz b">name</code>将包含<code class="fe mw mx my mz b">name</code>键的值，否则为<code class="fe mw mx my mz b">stranger</code>。最后，我将HTTP状态代码设置为200，并返回字符串<code class="fe mw mx my mz b">Hello</code>，后面跟变量<code class="fe mw mx my mz b">name</code>和最后的<code class="fe mw mx my mz b">!</code>。你可以从<a class="ae kv" href="https://vercel.com/docs/serverless-functions/supported-languages#advanced-node.js-usage" rel="noopener ugc nofollow" target="_blank">这里</a>阅读更多关于高级Node.js用法的内容。</p><p id="52fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们去<a class="ae kv" href="https://vercel.com/" rel="noopener ugc nofollow" target="_blank"> Vercel </a>这样我们就可以<a class="ae kv" href="https://vercel.com/import" rel="noopener ugc nofollow" target="_blank">导入</a>我们的项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/ba8cb4e445f83b68a0839239f7488b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*OuvetmanYdvbmh_JPDlOUg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Click New Project</figcaption></figure><p id="64fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我将使用我的git存储库名称，即<strong class="ky ir"> vercel-node.js </strong>。由于vercel找不到git存储库，我将点击<strong class="ky ir">配置GitHub App </strong>并添加<strong class="ky ir"> vercel-node.js </strong>，以便Vercel可以访问它。添加存储库后，我可以从Vercel访问它。现在点击<strong class="ky ir">导入</strong>按钮。</p><div class="kg kh ki kj gt ab cb"><figure class="nk kk nl nm nn no np paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/d9ae6d4ee7d042f411bfa681e0a67851.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*b_7Zm50WyAemghqqDf1HqA.png"/></div></figure><figure class="nk kk nq nm nn no np paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/316848ac1dc146e1f0d44b0692d174fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*i1pAP0haaOONkXyITBHD3A.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk nr di ns nt">Search and Import</figcaption></figure></div><p id="5356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我将选择个人账户选项。选择Vercel示波器后，点击<strong class="ky ir">继续</strong>按钮。</p><div class="kg kh ki kj gt ab cb"><figure class="nk kk nu nm nn no np paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/bdf12035a676429ebbb049cdeda67c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*2jpXq_CM4YSmY2mP2kj0Gw.png"/></div></figure><figure class="nk kk nv nm nn no np paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/e5a16adcfca98982e7b4bb64f9fb2eb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*OwTJRaf7tFoHyvk6UKUOBA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk nw di nx nt">Select and continue</figcaption></figure></div><p id="74e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，点击<strong class="ky ir">部署</strong>按钮。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/0f8f00ec59f788283a045912b6de15f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*DsoVpLqXLRES3uMdDCjKTw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Click Deploy</figcaption></figure><p id="746b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在通过点击访问按钮访问您的无服务器功能。在这种情况下，我的无服务器函数的地址是由Vercel生成的<a class="ae kv" href="https://vercel-node-js-nine.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://vercel-node-js-nine.vercel.app/</a>。我们需要在基本URL的末尾添加<strong class="ky ir"> api/file_name </strong>来访问该函数。添加之后，我们有了一个看起来像https://vercel-node-js-nine.vercel.app/api/index的URL。</p><div class="kg kh ki kj gt ab cb"><figure class="nk kk nz nm nn no np paragraph-image"><img src="../Images/7b55a36205bfa3086664307bb51d100e.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*ya_fsuzSBY_6nAtTZZvIPA.png"/></figure><figure class="nk kk oa nm nn no np paragraph-image"><img src="../Images/c497cb31faac649d27f3db6f91489d8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*3KEiPkGF7Ob2F5ICKMwJLg.png"/><figcaption class="kr ks gj gh gi kt ku bd b be z dk ob di oc nt">No Query string vs. Query string</figcaption></figure></div><p id="d2c1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于第一个<a class="ae kv" href="https://vercel-node-js-nine.vercel.app/api/index" rel="noopener ugc nofollow" target="_blank">调用</a>，我没有提供任何查询字符串。但是对于第二个<a class="ae kv" href="https://vercel-node-js-nine.vercel.app/api/index?name=pineapple" rel="noopener ugc nofollow" target="_blank">调用</a>，我已经提供了一个查询字符串。由于我已经将我的GitHub项目与Vercel链接起来，对主分支的任何更改都会触发生产部署。您可以选择不同的分支作为生产分支。为此，请遵循本<a class="ae kv" href="https://vercel.com/docs/git#production-branch" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b10e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="2e44" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在您知道如何将Node.js无服务器函数部署到Vercel了！去做些酷的东西吧！Vercel使得部署Node.js函数变得非常容易，所以你不用担心基础设施的问题；相反，你可以专注于问题。编码快乐！</p></div></div>    
</body>
</html>
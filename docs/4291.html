<html>
<head>
<title>How to Insert Text into the Text Area at the Current Cursor Position?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在当前光标位置的文本区域插入文本？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-insert-text-into-the-text-area-at-the-current-cursor-position-23a0baf0ddd9?source=collection_archive---------4-----------------------#2021-08-26">https://javascript.plainenglish.io/how-to-insert-text-into-the-text-area-at-the-current-cursor-position-23a0baf0ddd9?source=collection_archive---------4-----------------------#2021-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/012be36d9992480eb39ac8e648ec7784.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PVGIp4HSpwssH8Bw"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@luciandachman?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lucian Dachman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dc86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望在当前光标位置的文本区域插入文本。</p><p id="be30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在当前光标位置向文本区域插入文本。</p><h1 id="44ff" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用setRangeText方法</h1><p id="aaba" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">setRangeText</code>方法在当前光标位置添加文本。</p><p id="2f40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下输入:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0c1d" class="mq lc iq mh b gy mr ms l mt mu">&lt;input id="input"/&gt;</span></pre><p id="f807" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以编写以下JavaScript代码，在光标位于输入中并按下Enter键时，在光标位置添加文本:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5677" class="mq lc iq mh b gy mr ms l mt mu">const typeInTextarea = (newText, el = document.activeElement) =&gt; {<br/>  const [start, end] = [el.selectionStart, el.selectionEnd];<br/>  el.setRangeText(newText, start, end, 'select');<br/>}</span><span id="c236" class="mq lc iq mh b gy mv ms l mt mu">document.getElementById("input").onkeydown = e =&gt; {<br/>  if (e.key === "Enter") {<br/>    typeInTextarea("abc");<br/>  }<br/>}</span></pre><p id="06e2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了一个<code class="fe me mf mg mh b">typeInTextarea</code>函数，它的<code class="fe me mf mg mh b">newText</code>参数包含了我们想要插入的文本。</p><p id="17aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且它有<code class="fe me mf mg mh b">el</code>元素，该元素有我们想要插入文本的元素。</p><p id="e05f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">document.activeElement</code>是当前关注的元素。</p><p id="702f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在函数中，我们用<code class="fe me mf mg mh b">selectionStart</code>和<code class="fe me mf mg mh b">selectionEnd</code>得到选择开始和选择结束。</p><p id="0e37" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">newText</code>、<code class="fe me mf mg mh b">start</code>、<code class="fe me mf mg mh b">end</code>和<code class="fe me mf mg mh b">'selection'</code>调用<code class="fe me mf mg mh b">setRangeText</code>，在当前光标位置添加<code class="fe me mf mg mh b">newText</code>。</p><p id="560d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">onkeydown</code>属性设置为一个函数，该函数调用<code class="fe me mf mg mh b">typeInTextarea</code>函数，并按下enter键来插入我们想要插入的文本。</p><h1 id="2dcd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f347" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当我们用<code class="fe me mf mg mh b">setRangeText</code>方法按下一个键时，我们可以将文本插入光标位置的输入中。</p><p id="88fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
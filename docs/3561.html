<html>
<head>
<title>Getting Started With Astro — The Innovative Static Site Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Astro入门——创新的静态站点生成器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/astro-cec429f049d?source=collection_archive---------3-----------------------#2021-07-17">https://javascript.plainenglish.io/astro-cec429f049d?source=collection_archive---------3-----------------------#2021-07-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="40a9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">多框架的SSG，最小化我们发布的JS</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2d59625de928763538db624cf41b340a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9M69JTd6k31rJOZ2Ih8Uuw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image Credits: <a class="ae kv" href="https://css-tricks.com/wp-content/uploads/2021/05/astro-homepage.png" rel="noopener ugc nofollow" target="_blank">CSS-tricks.com</a></figcaption></figure><p id="f216" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们钟爱的框架，如React.js、Angular和Vue.js，有一个小问题:通过JavaScript在客户端呈现HTML非常昂贵——除此之外，据说它对SEO不友好。</p><p id="8450" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">静态站点生成器提供了一个补救方法。在构建产品版本时，他们尽可能多地直接呈现为HTML，然后静态地提供HTML。</p><p id="4d01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">重要的是要理解框架及其所有特性，比如React中的钩子，仍然包括在内。静态站点生成器(从现在开始，只是“SSG”)呈现我们站点的外观。仍然包含了大量的JS代码。</p><p id="9420" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是<em class="ls"> Astro </em>的用武之地，只有一个目标:尽可能少用JavaScript。<br/>事实上，根本没有默认。但首先要做的是。</p><p id="e443" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">阿童木实际上只是一个SSG。但是我们可以在不同的框架下使用它——不像VuePress或Gatsby，它不局限于一个框架。</p><p id="75e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用我们选择的框架/库中的UI组件来构建我们的站点——React、Vue或Svelte，这都没关系。然后Astro会将生产版本构建为一个静态页面，其中根本没有JavaScript。消除客户端渲染和成百上千字节的框架代码对网站的性能有非常积极的影响。</p><p id="d283" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是一个有用的app没有任何JavaScript能存在吗？</p><p id="6362" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然不是。甚至对于一个网络请求，一些动画，或者更复杂的表单，我们都需要JavaScript。这就是它真正有趣的地方:如果一个组件需要JS，Astro加载必要的代码及其依赖项——但仅此而已。这意味着只加载必要的JS，并且页面保持快速。</p><p id="9d1f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">炒作够了吧？我们来试试吧！</p><h1 id="b1d3" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">Astro入门</h1><p id="bed7" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">开始很容易。让我们创建一个新项目:</p><p id="3c06" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，为项目创建一个新的空目录。然后，跑</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="66c9" class="mv lu iq mr b gy mw mx l my mz">npm init astro </span></pre><p id="3c22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">选择“初学者工具包”作为框架/库，我将使用React.js —因此请确保选择React并按下空格键，然后输入。</p><p id="f7e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后运行<code class="fe na nb nc mr b">npm install</code>。</p><h1 id="7f3a" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">了解文件结构</h1><p id="0e77" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">目前，唯一重要的目录是“src”目录。在中，您应该看到“components”和“pages”目录。</p><p id="c72b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于应用程序的各个页面，pages文件夹类似于Next.js或Gatsby。这些页面中的每一个都有自己的基于文件名的URL，所以<code class="fe na nb nc mr b">index.astro</code>是针对主页的“/”。</p><p id="1e02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">“components”目录中有两个文件——一个是React.js组件的典型JSX文件。另一个是静态成分，以“，”结尾。阿童木”。它用于分割HTML代码，并将其作为可以导入页面的组件来处理。如果您愿意，可以在。astro文件——简单地使用一个脚本标签。</p><p id="5dba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是要记住，这个JS是要运到前端的。如果你想写JS代码，有一个符合Astro哲学的方法。也许你注意到了顶部奇怪的破折号。astro文件，像这样:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d878" class="mv lu iq mr b gy mw mx l my mz">---</span><span id="4728" class="mv lu iq mr b gy nd mx l my mz">---</span></pre><p id="47ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您在这些行中编写的每一个JS代码都是在构建时执行的，但不会发布到最终的包中。例如，下面的代码:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="55aa" class="mv lu iq mr b gy mw mx l my mz"><em class="ls">---<br/></em>console.log(“hello world”)<br/>---</span><span id="42e8" class="mv lu iq mr b gy nd mx l my mz">&lt;h1&gt;A new component&lt;/h1&gt;</span></pre><p id="2f11" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">会在终端中记录“hello world”，但不会在浏览器中记录。JS代码不是在浏览器中发布和执行的。这让我想起了可以在Gatsby中编写的GraphQL查询。</p><p id="8d26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是为什么我们还要编写JS代码，而这些代码不是在浏览器中执行的呢？为了建立我们的静态页面。假设您想要托管一个静态博客。多亏了Astro，你可以在破折号内从博客的API中获取内容，并将其呈现到静态页面上。最后，你只发布了一个静态页面，如果你的博客服务器只在你的机器上运行，甚至保护你的博客。</p><p id="b950" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是我们不要把它停留在理论上——这里有一个例子。</p><p id="6b1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，创建一个新的。组件文件夹中的astro文件。我给它取名<code class="fe na nb nc mr b">Operation.astro</code>。然后，用以下代码填充它:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="1840" class="mv lu iq mr b gy mw mx l my mz"><em class="ls">---<br/></em>function add(a, b) {<br/>  return a + b <br/>}<br/><em class="ls">---</em></span><span id="63f6" class="mv lu iq mr b gy nd mx l my mz">&lt;p&gt;The result is:&lt;/p&gt;<br/>&lt;p&gt;{add(2,2)}&lt;/p&gt;</span></pre><p id="6469" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，进入pages文件夹中的<code class="fe na nb nc mr b">index.astro</code>,并导入我们的组件:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="cd68" class="mv lu iq mr b gy mw mx l my mz"><em class="ls">import</em> Operation <em class="ls">from</em> “../components/Operation.astro”</span></pre><p id="ddca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们可以用<code class="fe na nb nc mr b">&lt;Operation /&gt;</code>在页面的某个地方渲染它。当您运行<code class="fe na nb nc mr b">npm start</code>并打开页面时，您将看到“4”，并且计算不是在浏览器中完成的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/f5da783371d3f9f9e95fda053ef6e5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ww6XQ09lGcudf324p8RxeQ.png"/></div></div></figure><p id="01dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想你明白了。让我们进一步了解Astro以及它是如何处理组件的！</p><h1 id="2d67" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">成分的水合</h1><p id="72f2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当您在默认的index.astro中向下滚动时，您会看到呈现了一个React组件:</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="dc1d" class="mv lu iq mr b gy mw mx l my mz">&lt;ReactCounter client:visible /&gt;</span></pre><p id="fa74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">组件隐藏在src/components中，是一个基本的计数器，使用React钩子。当然，这需要JavaScript——所以当你运行<code class="fe na nb nc mr b">npm run build</code>并打开生产版本时(你可以在<code class="fe na nb nc mr b">npm install -g serve</code>之后用<code class="fe na nb nc mr b">serve -s dist/</code>来做这件事),你会看到一个有效的React.js计数器组件。</p><p id="5539" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在network选项卡中，我们看到这依赖于JS，它被加载:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nf"><img src="../Images/7c0e8a38c42f2513b6111860fd6f76ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WGbDPsE14TtaQb_FDoMNJw.png"/></div></div></figure><p id="eb3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">原因很简单:我们是这么说的。</p><p id="6481" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe na nb nc mr b">client:visible</code>意味着一旦JS代码对用户可见，组件就应该加载必要的JS代码——基本上是延迟加载。</p><p id="e1ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想看到它的运行，重新加载页面，但是不要让计数器出现。当您打开Network选项卡，然后向下滚动直到拖动计数器时，JS代码被动态加载。</p><p id="57bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很酷，对吧？</p><p id="436f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了<code class="fe na nb nc mr b">client:visible</code>之外，加载组件的JS部分还有很多选项。如果只在index.astro文件中呈现<code class="fe na nb nc mr b">&lt;ReactCounter /&gt;</code>,那么整个JS代码将被删除——并且永远不会被加载。</p><p id="41d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，计数器在页面上是可见的，但是当我们按下按钮时却不工作。然而，如果你只有一个静态组件，这是一个有用的特性。</p><p id="5bae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于补水成分的知识，一定要查看一下<a class="ae kv" href="https://docs.astro.build/core-concepts/component-hydration" rel="noopener ugc nofollow" target="_blank">官方文档</a>——里面有很好的解释。</p><p id="03e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读！</p><p id="f02d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想阅读更多关于框架的内容:</p><div class="ng nh gp gr ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/javascript-frameworks-performance-60f71d321693"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">框架永远不会像普通JavaScript那样快</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">在大多数情况下——这很好</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><p id="7bcf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
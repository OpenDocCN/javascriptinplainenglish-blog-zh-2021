<html>
<head>
<title>Extend DatePipe to Show PST Time In Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扩展日期管道以角度显示PST时间</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/extend-datepipe-to-show-pst-time-in-angular-cd713a7c1ad?source=collection_archive---------13-----------------------#2021-04-29">https://javascript.plainenglish.io/extend-datepipe-to-show-pst-time-in-angular-cd713a7c1ad?source=collection_archive---------13-----------------------#2021-04-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/0f213ba7a80db6851fb7fee5d30762bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W7m6yQVm_t-xiq6fuD7BGQ.jpeg"/></div></div></figure><p id="7d55" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最近，我接到一个要求，要将UTC时间显示为PST时间。我知道这很容易做到，但我不想用瞬间，也不想用一些第三方库来改变它。</p><p id="13e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，我最终使用偏移手动转换了它。因为我想只将日期转换为PST时区，所以很容易做到。</p><p id="bb71" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我创建的管道，用于使用偏移将来自数据库的所有UTC数据转换为PST。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="96ba" class="lc ld in ky b gy le lf l lg lh">import { Pipe, PipeTransform } from '<a class="ae li" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import * as _moment from 'moment-timezone';<br/>import { DatePipe } from '<a class="ae li" href="http://twitter.com/angular/common" rel="noopener ugc nofollow" target="_blank">@angular/common</a>';</span><span id="6dca" class="lc ld in ky b gy lj lf l lg lh"><a class="ae li" href="http://twitter.com/Pipe" rel="noopener ugc nofollow" target="_blank">@Pipe</a>({<br/>  name: 'pstTime'<br/>})<br/>export class PstTimePipe extends DatePipe implements PipeTransform {</span><span id="ea90" class="lc ld in ky b gy lj lf l lg lh">transform(date: any, format?: any): any {<br/>    let dateObj: Date = typeof date == 'string' ? new Date(date) : date;<br/>    let offset = 7 * 60 * 60 * 1000;<br/>    dateObj.setTime(dateObj.getTime() - offset);<br/>    return super.transform(dateObj, format, null, null) + ' PST';<br/>  }</span><span id="903a" class="lc ld in ky b gy lj lf l lg lh">}</span></pre><p id="499b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它会显示日期为<code class="fe lk ll lm ky b">Jul 31, 2019, 11:30 PM PST</code>，这正是我所要求的。</p><p id="1069" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然，您可以进一步扩展它，使其更具动态性，以支持任何时区。但就目前而言，这做到了，我对此很满意。</p><p id="5fe1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">谢谢！</p><p id="031b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ln">多内容于</em> <a class="ae li" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ln">通俗易懂</em> </strong> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>An Alternative Way to Use Angular Templates</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度模板的另一种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-alternative-way-to-use-angular-templates-97becc84e109?source=collection_archive---------9-----------------------#2021-08-02">https://javascript.plainenglish.io/an-alternative-way-to-use-angular-templates-97becc84e109?source=collection_archive---------9-----------------------#2021-08-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4c57cb51426451bb1839068f9a39a12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*24PZwZ2bD6TcyMekRfRw3w.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Image by<a class="ae jz" href="https://pixabay.com/photos/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=768432" rel="noopener ugc nofollow" target="_blank"> Free-Photos</a> from <a class="ae jz" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=768432" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><h2 id="6570" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">我寻找替代方式的动机</strong></h2><p id="abed" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">当我第一次看<strong class="ky io"> ViewRef </strong>和<strong class="ky io"> NgTemplate </strong>的文档时，我有点困惑。这些工具允许您在HTML文件中使用回调机制。它很强大，但感觉很奇怪。</p><p id="cebb" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">假设您有一个在自定义模板中列出给定数组的组件。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="b419" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">如果你用JavaScript思考，你的脑海中会出现以下几行。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="b18e" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">但是当我在HTML中使用这个机制的时候，我感觉我做错了。因为HTML输出越来越难预测了。</p><p id="f3af" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">来源可能是这样的。</p><pre class="lw lx ly lz gt mc md me mf aw mg bi"><span id="ee61" class="ka kb in md b gy mh mi l mj mk">&lt;my-comp [template]="myTemplate"&gt;&lt;/my-comp&gt;<br/>  &lt;p&gt;<br/>    Lorem ipsum dolar si amet...<br/>  &lt;/p&gt;<br/>&lt;ng-template #myTemplate&gt;<br/> &lt;div&gt; This content will be bind in to my-comp.&lt;/div&gt;<br/>&lt;/ng-template&gt;</span></pre><p id="ec5f" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">输出变成这样。</p><pre class="lw lx ly lz gt mc md me mf aw mg bi"><span id="204f" class="ka kb in md b gy mh mi l mj mk">&lt;my-comp&gt;<br/>  &lt;div&gt; This content will be bind into my-comp.&lt;/div&gt;<br/>&lt;/my-comp&gt;<br/>&lt;p&gt;<br/>   Lorem ipsum dolar si amet...<br/>&lt;/p&gt;</span></pre><blockquote class="ml mm mn"><p id="ea38" class="kw kx mo ky b kz lr lb lc ld ls lf lg mp lt li lj mq lu ll lm mr lv lo lp lq ig bi translated">您可以在“我的合作伙伴”节点中定义模板，但您不能一直检查您的合作者。</p></blockquote><h2 id="64cb" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">这个想法来自PrimeNG </h2><p id="45a1" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">PrimeNG有一个很好的API来管理表格模板。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="d832" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><a class="ae jz" href="https://github.com/primefaces/primeng/blob/7e61450022a5ab155167715cdc943125a5e34fbf/src/app/components/table/table.ts#L450" rel="noopener ugc nofollow" target="_blank"> PrimeNG使用ContentChildren decorator获取PrimeTemplate(pTemplate)指令，并将其映射到NgAfterContentInit函数中的属性。</a></p><p id="b960" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">这是一个很好的解决方案，但是没有提供一种方法来开发应该实现相同逻辑的其他组件。开发人员必须查看源代码，并且应该为每个组件实现相同的逻辑。</p><h2 id="be0b" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">令我满意的解决方案</h2><p id="362b" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">我决定用PrimeNG创建相同的API，我只需要一种机制来确保所有团队成员以相同的方式实现使用模板的组件。我决定使用Angular用于表单管理的类似机制。</p><ul class=""><li id="a8ee" class="ms mt in ky b kz lr ld ls kj mu kn mv kr mw lq mx my mz na bi translated">我创建了一个接口和注入标记来对每个使用模板的组件进行分组。</li><li id="942e" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">我创建了一个注入接口并调用所需函数来设置给定模板的指令。</li><li id="756d" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">我在使用模板的组件中实现并提供接口。</li></ul><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="19ac" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">实现后，组件的用法如下。</p><pre class="lw lx ly lz gt mc md me mf aw mg bi"><span id="0058" class="ka kb in md b gy mh mi l mj mk">&lt;app-my-alternate-list [data]="employeeList"&gt;<br/> &lt;ng-template appTemplate="item" let-employee="item"&gt;<br/>  &lt;img [src]="employee.image" width="200" height="200"&gt;           {{employee.name}} {{employee.lastName}}<br/> &lt;/ng-template&gt;<br/> &lt;ng-template appTemplate="empty"&gt;<br/>  &lt;div class="warning"&gt;No records found.&lt;/div&gt;<br/> &lt;/ng-template&gt;<br/>&lt;/app-my-alternate-list&gt;</span></pre><p id="ce64" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">优点</strong></p><ul class=""><li id="e9cb" class="ms mt in ky b kz lr ld ls kj mu kn mv kr mw lq mx my mz na bi translated">推动所有开发人员在组件节点中使用模板。</li><li id="c783" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">提供更可读的HTML(至少对我来说)</li><li id="4189" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">也可以支持动态模板名。</li></ul><p id="8430" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">缺点</strong></p><ul class=""><li id="6e8b" class="ms mt in ky b kz lr ld ls kj mu kn mv kr mw lq mx my mz na bi translated"><strong class="ky io">它不是棱角分明的方式</strong>，需要编写文档，一些开发者可能会对此感到奇怪。</li><li id="c75f" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">需要为使用模板的组件编写更多的代码(和更多的测试)。</li><li id="c9d8" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">可以认为是过度工程化。</li><li id="2d52" class="ms mt in ky b kz nb ld nc kj nd kn ne kr nf lq mx my mz na bi translated">防止(或使其难以)对不同的组件使用相同的模板。</li></ul><p id="987e" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><em class="mo">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky io"><em class="mo">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
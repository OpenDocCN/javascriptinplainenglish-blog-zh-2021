<html>
<head>
<title>How To Estimate Pi Precisely in Code Just Through Using Random Numbers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何仅用随机数在代码中精确估计圆周率</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/estimate-pi-cbf96eadb417?source=collection_archive---------3-----------------------#2021-09-30">https://javascript.plainenglish.io/estimate-pi-cbf96eadb417?source=collection_archive---------3-----------------------#2021-09-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="04f7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">一个巧妙的面试问题和一个绝妙的解决方案</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/23ad15af77daf119dd4981bd868af10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fhXKRsnz7d7qo6GY1TNTOg.png"/></div></div></figure><p id="7fb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这可能是我知道的最难的面试问题之一。</p><p id="5971" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">虽然该解决方案不需要复杂的代码，但它需要非常复杂的方法。我们将理解这种方法并实现代码。</p><p id="7849" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">回到开始。想象你自己在一次编码面试中。面试官问了以下问题:</p><p id="8ce9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">在您选择的编程语言中，您将如何使用内置的伪随机数函数来近似确定pi？</em></p><p id="eb92" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">他继续解释了一些细节:</p><p id="81e5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个内置函数，比如Java或者JS中的<code class="fe lo lp lq lr b">Math.random()</code>，为你提供了<code class="fe lo lp lq lr b">0.00</code>和<code class="fe lo lp lq lr b">0.9999...</code>之间的浮点数。我们可以在任何编程语言中找到它。</p><p id="4f2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">还有，估计圆周率最多3141就够了。</p><p id="27c5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样。如果你瞬间有了一个想法，你可能是一个天才(或者你以前解决过这个问题)。</p><p id="bbea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我对这个问题的第一反应是，这到底有没有可能。是的，它是。基于伪随机数，我们可以在代码中非常精确地估计圆周率。想看看怎么做吗？好吧，我们走！</p><p id="b69a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">提示:</strong>这段代码可以用任何编程语言实现。我们只需要生成随机数的能力。我将用JavaScript展示给你看，因为它的语法非常易读和通用。</p><p id="9d10" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从最具挑战性的部分开始:获得如何解决这个问题的想法。</p><h1 id="e9e1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">这个想法</h1><p id="79e5" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated">所以我们想得到圆周率。稍微提醒一下这个常数是什么:<br/> <strong class="kt ir">圆周率是一个圆的周长与其直径的比值。</strong></p><p id="07eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，我们可以从一个圆得到圆周率——这就是我们想要的。我们想要接收圆周率。所以要解决我们的问题，首先需要一个圆。</p><p id="f839" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">简单来说，我们取一个半径为1的所谓单位圆。因为半径是1，所以它的直径是2。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d59af1a29b16a0868d808d0cf76b1678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*29Jhe5Co9UOa8AVoujV6iA.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk">Credit: Wikipedia Creative Commons</figcaption></figure><p id="fdd9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以把我们的单位圆变成一个正方形。下列正方形每边的长度是圆半径的两倍:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ce73658a641d2b4cc4a59d29cbbd0d13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZIY8sCl0qRC19_RkWUjBw.png"/></div></div></figure><p id="73c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是为什么是这个正方形呢？我们一会儿将回到这一点。</p><p id="16e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重要的是要明白我们的圆是单位圆。因此，它有一个正的和一个负的X轴和Y轴部分。然而，我们的伪随机数函数只生成正数。</p><p id="06de" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">说到坐标系:要得到坐标系中的一个点，我们需要两个数:所以我们可以调用Math.random函数两次来得到一个点。因为这个函数的值总是正的，所以我们只得到在坐标系和圆的右上四分之一处的点:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/645b85ca0d6cbd3eaf404d0d16ae2233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HgwMZSJIl1C0MzB7P2Th3w.jpeg"/></div></div></figure><p id="09e3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">需要理解的重要一点是，我们在坐标系(Math.random() / Math.random())中生成的点也可以在正方形的右上角，因此在圆的外面。</p><p id="230a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">点(0.99/0.99)是一个很好的例子，它位于圆的外面，在我们正方形的右上角。</p><p id="c385" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">幸运的是，我们可以计算出我们是否在坐标系中产生了一个位于圆内的随机点。为此，我们可以使用勾股定理。它帮助我们计算到坐标系原点的距离，即(0/0)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/bdaf40339ab9a0eb1017bd09ca33b822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FusY7E8dofDQ0mrLXb8mCg.jpeg"/></div></div></figure><p id="add2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">x是我们坐标点的第一个值，y是第二个值。</p><p id="2781" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，如果距离小于1，那么点在圆内，而不是在圆外。</p><p id="7c70" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">举个简单的例子:我说过，点(0.99 / 0.99)在圆的外面。如果我们将它输入到上面显示的公式中，我们会得到大约1.4-这个点在圆的外面，因为它不小于1。</p><p id="14b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">到目前为止，我们可以生成位于正方形右上部分的坐标，还可以检查这些点是否也位于圆内。</p><p id="0900" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了得到圆周率，我们必须重新排列一个方程，就像在数学中一样。<br/>但是首先我们需要一个圆周率出现的方程。</p><p id="effe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是圆的面积与正方形的面积之比发挥作用的地方。由于Math.random函数允许我们生成许多随机但均匀分布的坐标，我们可以用它们来确定比例。</p><p id="bca0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于圆覆盖了正方形的大部分区域，所以应该有更多的随机坐标是在圆内的<strong class="kt ir">，而不是在圆外的:</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/0363ac031aba47a2e389cec10a8f679d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1C3M2Bas3xcBGShNx-eM6Q.jpeg"/></div></div></figure><p id="9bd1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们产生足够多的这些随机坐标，它们在圆和正方形中的分布比例就代表了圆和正方形面积的比例。这是一个艰难的判决。吸一口气；你应得的。</p><p id="387f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我想现在更容易理解我们如何得出尺寸的比例了。</p><p id="e1be" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">回到数学。这是圆的面积与正方形的面积之比:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mw"><img src="../Images/83d0a824ef1c2becceaddb4b37f9d66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSk9Rs_B1aFzM1J5Gna7rQ.jpeg"/></div></div></figure><p id="051a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个比率背后的数学包括整个圆和整个正方形。<br/>但是因为我们只能接触到圆和正方形的上四分之一，我们不得不把方程简化成那样。毕竟，我们的Math.random只生成正范围内的坐标。</p><p id="ef66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">值得庆幸的是，上面显示的比率只不过是圆圈中的点数与正方形中的点数之比，所以:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/0634f3690ef67d6ca5293580bbced329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R7Fe63xYMO_FS63PZc4qTg.jpeg"/></div></div></figure><p id="bd04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我之前说过，我们可以从随机点分布的比值推导出面积比。从技术上讲，圆中的点仍然在正方形中，但你得到了点——比率“圆中的点”的上半部分是在正方形中但同时在圆中的点。</p><p id="fe88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们用Math.random生成的点数越多，结果就越精确。</p><p id="c1c1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当你看倒数第二张图片时，你会发现我们需要提供一个半径值。由于我们的圆是单位圆，我们知道半径是1。因此，我们可以将圆的面积与正方形的面积之比改写为:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/28fb729ca2b017d4843690b40ccb23f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfAXVNLghY3UPjBIUYVFZA.jpeg"/></div></div></figure><p id="6224" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过计算，我们得出结论，上面显示的比率就是<code class="fe lo lp lq lr b">pi / 4</code>。</p><p id="4af1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">已知计算出的圆的面积与正方形的面积之比大约等于圆中的点与正方形中的点之比，我们得到:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/38232ef2c21c8d80c327dbefcc36315e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n7_MFbQrmsujYE7dpXIUFA.jpeg"/></div></div></figure><p id="1a6f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，等式两边都乘以4，我们得到这个:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi na"><img src="../Images/0e95cbae43f26630869490554715bdde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FzZTxC9rPoFjQSTqXVdU3Q.jpeg"/></div></div></figure><p id="3857" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是我们如何得到圆周率的方法——我们需要的只是圆中的点数，将它与正方形中的点数成比例，然后乘以4。</p><p id="1b83" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然我们知道如何计算一个点是否在圆内，我们就把所有的东西都集合起来了。我们用代码写这个用随机数估计圆周率吧！</p><p id="acef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为此，我创建了一个名为“generatePi”的函数，它将应该生成的随机坐标的数量作为参数。在函数内部，我们计算圆内的点数和圆外(正方形内)的点数。</p><p id="6803" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">坐标点通过两个元素的数组来表示:</p><pre class="kg kh ki kj gt nb lr nc nd aw ne bi"><span id="a19c" class="nf lt iq lr b gy ng nh l ni nj">[Math.random(), Math.random()]</span></pre><p id="e31e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们用代码来计算距离，这需要我们之前的不等式的左边部分:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/bdaf40339ab9a0eb1017bd09ca33b822.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FusY7E8dofDQ0mrLXb8mCg.jpeg"/></div></div></figure><p id="9f7d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在代码中，距离是:</p><pre class="kg kh ki kj gt nb lr nc nd aw ne bi"><span id="caee" class="nf lt iq lr b gy ng nh l ni nj">Math.sqrt(Math.pow(point[0], 2) + Math.pow(point[1], 2))</span></pre><p id="7517" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">添加圆和正方形中的点数很容易，我们最后返回的是这些点的比率乘以4。</p><p id="e051" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是完整的JavaScript代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="e7e1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于我们使用随机生成的数字，我们的近似圆周率不断变化。然而，对于提供的1000万个坐标，得到的圆周率大部分是3.141…</p><p id="53b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当提供高于1000万的数字时，会花费更多的时间，但会使我们的pi更精确。</p><p id="1322" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是我们的解决方案——这不是很棒吗？我希望你能跟上。感谢您的阅读！:)</p><h2 id="0d29" class="nf lt iq bd lu nm nn dn ly no np dp mc la nq nr me le ns nt mg li nu nv mi nw bi translated"><a class="ae nx" href="https://twitter.com/louispetrik" rel="noopener ugc nofollow" target="_blank">在Twitter上关注我，了解最新消息</a></h2><p id="4e6d" class="pw-post-body-paragraph kr ks iq kt b ku mk jr kw kx ml ju kz la mm lc ld le mn lg lh li mo lk ll lm ij bi translated"><em class="ln">更多内容尽在</em><a class="ae nx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ln">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Stop Using MomentJS. Here Is What You Should Use Instead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用MomentJS。下面是您应该使用的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-momentjs-is-nearing-its-end-de647286383?source=collection_archive---------2-----------------------#2021-02-03">https://javascript.plainenglish.io/why-momentjs-is-nearing-its-end-de647286383?source=collection_archive---------2-----------------------#2021-02-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a629" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><em class="kc">时刻接近尾声</em></h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/fe1a36e480d93efea80aaa73ecd91dfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YE-sfncoBLy4DpYMtoIt-Q.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@oceanng?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ocean Ng</a> on <a class="ae kt" href="https://unsplash.com/s/photos/clock?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="987b" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">介绍</h1><p id="4e9f" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><a class="ae kt" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> MomentJS </a>是一个广泛使用的时间和日期格式化和计算库。但它在成为长期最佳后，正慢慢接近它的终点。例如，如果没有MomentJS之类的库，我甚至无法格式化和使用所有的日期格式。</p><p id="1974" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">所以我在网上搜索了一下，在MomentJS网站上我看到了一些有趣的东西。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/64b805c0bce4575f09c25d36d05235a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:734/format:webp/1*SVmrv7zJ1674xn8fqrrfZg.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">From the official MomentJS site</figcaption></figure><p id="eec6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如果你在他们的网站上进一步搜索，你实际上可以看到一些替代方案，以及为什么这些方案会更好。</p><p id="a294" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">JavaScript后来添加了<code class="fe mo mp mq mr b">Intl</code>对象。而MomentJS用的是<code class="fe mo mp mq mr b">Date</code>。对于一些项目来说，这根本不是问题，直到MomentJS消失还需要一段时间，但尽快检查替代方案是个好主意。</p><p id="7cf8" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">使用新的<code class="fe mo mp mq mr b">Intl</code>物体的替代物之一是<a class="ae kt" href="https://moment.github.io/luxon/" rel="noopener ugc nofollow" target="_blank"> Luxon </a>。这似乎是开始使用新Javascript函数的好地方。</p><h1 id="12a8" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">Luxon vs MomentJS</h1><p id="7a8f" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">Luxon与Moment有一些不同之处，值得注意。首先，Luxon对象不像Moment对象那样是可变的。</p><pre class="ke kf kg kh gt ms mr mt mu aw mv bi"><span id="e8d0" class="mw kv in mr b gy mx my l mz na">let m1 = moment(); <br/>let m2 = m1.add(3, 'minutes'); <br/>m1.valueOf() === m2.valueOf(); // -&gt; true</span></pre><p id="0fd7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如果使用<code class="fe mo mp mq mr b">.add()</code>更新日期或时间，对象本身将立即改变。这就是为什么<code class="fe mo mp mq mr b">m1</code>和<code class="fe mo mp mq mr b">m2</code>在使用力矩的情况下是相同的。</p><pre class="ke kf kg kh gt ms mr mt mu aw mv bi"><span id="ca88" class="mw kv in mr b gy mx my l mz na">let l1 = DateTime.local(); <br/>let l2 = l1.plus({ minutes: 3}); <br/>l1.valueOf() === l2.valueOf(); // -&gt; false</span></pre><p id="937b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是在卢克逊，这些物品将会不同。<code class="fe mo mp mq mr b">l1</code>此处增加3分钟后不变。也不是语法上的区别。</p><p id="6dad" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">此外，语法上也有一些小的变化，比如用函数代替变量来获取数据。<code class="fe mo mp mq mr b">time.year()</code>而不是<code class="fe mo mp mq mr b">time.year</code>。</p><h1 id="0084" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">使用Luxon</h1><p id="ba47" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">Luxon可以在各种项目中以各种方式使用。最简单的方法是用<code class="fe mo mp mq mr b">npm</code>或<code class="fe mo mp mq mr b">yarn</code>安装。为了浏览器兼容性，你可能需要polyfills，但是对MS Edge等新的浏览器的<a class="ae kt" href="https://moment.github.io/luxon/docs/manual/matrix.html" rel="noopener ugc nofollow" target="_blank">支持相当不错。</a></p><p id="8945" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">正如你所料，创建一个新的Luxon对象很容易。<code class="fe mo mp mq mr b">DateTime.local()</code>。</p><p id="9e47" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">将字符串解析成Luxon比在Moment中要难一些，我们必须使用函数名来指定格式。</p><p id="7a4f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">例如使用<code class="fe mo mp mq mr b">DateTime.fromISO(String)</code>或<code class="fe mo mp mq mr b">DateTime.fromRFC2822(String)</code>。但是也有使用你自己的格式的<code class="fe mo mp mq mr b">.fromFormat(str, str)</code>。</p><p id="462d" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您可以使用<code class="fe mo mp mq mr b">.isValid</code>检查日期是否正确，这不是Moment中的功能。以及使用<code class="fe mo mp mq mr b">.year</code>或<code class="fe mo mp mq mr b">.second</code>获得特定的日期值。</p><h2 id="a273" class="mw kv in bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">转变</h2><p id="650a" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">改变日期对象，比如添加几天，可以使用<code class="fe mo mp mq mr b">.plus()</code>、<code class="fe mo mp mq mr b">.minus()</code>等等来实现。与Moment不同，这些函数需要对象，而不是字符串和数字的混合。</p><pre class="ke kf kg kh gt ms mr mt mu aw mv bi"><span id="dea7" class="mw kv in mr b gy mx my l mz na">dateObj.plus({ months: 3, days: 2 })</span></pre><p id="3e7e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">使用<code class="fe mo mp mq mr b">toLocal()</code>将date对象设置为当前本地时间，我可以想象如果您的应用程序需要支持多个时区，这将非常有用。</p><h2 id="cddf" class="mw kv in bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">询问</h2><p id="6fc6" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">就像在Moment中一样，您可以查询当前日期是否早于、晚于您在参数中给出的日期。</p><p id="7843" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">以<code class="fe mo mp mq mr b">dateObj.isBefore(dateObj2)</code>、<code class="fe mo mp mq mr b">dateObj.isBetween(d1, d2)</code>为例。这对于日历等应用程序非常有用。</p><h2 id="eb94" class="mw kv in bd kw nb nc dn la nd ne dp le lv nf ng lg lz nh ni li md nj nk lk nl bi translated">输出</h2><p id="16d9" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">将您到目前为止制作的数据输出到任何其他可用的格式是非常重要的。您的数据库可能支持另一种格式，而不是您想要使用的格式，或者您可能需要为人类格式化它。</p><p id="69be" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><code class="fe mo mp mq mr b">.toString()</code>是最简单的，这个格式在ISO 8601。但是您可以指定格式，如<code class="fe mo mp mq mr b">.toISO()</code>、<code class="fe mo mp mq mr b">.toFormat(str)</code>、<code class="fe mo mp mq mr b">.toJSDate()</code>等等。</p><p id="e52b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是你可能想显示一个倒计时。谢天谢地，Luxon也给出了一个简单的方法来做到这一点。瞬间的<code class="fe mo mp mq mr b">fromNow</code>是卢克森的<code class="fe mo mp mq mr b">toRelative()</code>。<code class="fe mo mp mq mr b">toNow</code>从瞬间起就是<code class="fe mo mp mq mr b">DateTime.local().toRelative({ base: this })</code>在鲁迅。这不是最短的语法，但是它很有效，而且非常有意义。</p><p id="7a5e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">虽然Luxon仍在开发中，但我们可以说它会一直存在下去。至少暂时如此。由于有更多的选项使用新的Javascript函数，我认为Luxon更胜一筹，因为它已经开发了很长时间。</p><h1 id="3638" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">结论</h1><p id="e2c5" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">时刻还没有完全过去。但在他们的网站上，他们建议你不要只看瞬间，除非你陷入了特定的用例。</p><p id="ec8b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">就目前而言，Luxon似乎是未来时刻的最大替代品。技术发展得非常快，所以谁知道一两年后会用上什么。</p><p id="ba40" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">我希望这篇文章对一些人有用。非常感谢你的阅读，祝你有美好的一天。</p></div></div>    
</body>
</html>
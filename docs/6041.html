<html>
<head>
<title>What is Browser API?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是浏览器API？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-browser-api-7a1aeb7573b5?source=collection_archive---------14-----------------------#2021-12-27">https://javascript.plainenglish.io/what-is-browser-api-7a1aeb7573b5?source=collection_archive---------14-----------------------#2021-12-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1a81" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">让我们解释一下浏览器API是如何工作的，以及我们如何使用它们。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/69cee126fcd2ca4c52a056b6974d857a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mpDa-CznF_hX4A8F"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mitchell Luo</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5967" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在转向浏览器API之前，我们需要知道什么是API:</p><p id="ed7e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它是应用编程接口的缩写。好吧，但这是什么？</p><p id="4e13" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们说接口时，它指的是一个共享的边界，计算机系统的两个或多个独立组件通过它交换信息。交换可以在软件、计算机硬件、外围设备、人以及它们的组合之间进行。</p><p id="834d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以API的名字给了我们一个线索。</p><p id="3624" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我认为最好的解释是:</p><p id="e030" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">API是一个接口，通过它你可以访问别人的代码，或者别人的代码可以访问你的代码。实际上是公共方法和属性。</p><p id="b670" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">假设您想在网页上显示地图上标记的伊斯坦布尔。</p><p id="5521" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们不想写所有的代码、数据库或设计地图矢量，对吗？谷歌已经做了这些事情。他们编写了这些叫做谷歌地图API的功能，这样每个人都可以使用它们。有了他们提供的API密匙，你就可以使用允许的功能了，我们很快就会这样做。</p><p id="ed80" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们这里有三个代码块。</p><p id="064e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="5cf3" class="lu lv in lq b gy lw lx l ly lz">// Initialize and add the map</span><span id="8edd" class="lu lv in lq b gy ma lx l ly lz">function initMap() {<br/>  // The location of Istanbul<br/>  const istanbul= { lat: 41.051, lng: 28.943 };<br/>  // The map, centered at Istanbul<br/>  const map = new google.maps.Map(document.getElementById("map"), {<br/>    zoom: 9,<br/>    center: istanbul,<br/>  });<br/>  // The marker, positioned at Istanbul<br/>  const marker = new google.maps.Marker({<br/>    position: istanbul,<br/>    map: map,<br/>  });<br/>}</span></pre><p id="38a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">CSS:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="fef8" class="lu lv in lq b gy lw lx l ly lz">/* Set the size of the div element that contains the map */</span><span id="2b5f" class="lu lv in lq b gy ma lx l ly lz">#map {<br/>  height: 400px;<br/>  /* The height is 400 pixels */<br/>  width: 100%;<br/>  /* The width is the width of the web page */<br/>}</span></pre><p id="c12c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">HTML:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="fc45" class="lu lv in lq b gy lw lx l ly lz">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Add Map&lt;/title&gt;<br/><br/>    &lt;link rel="stylesheet" type="text/css" href="./style.css" /&gt;<br/>    &lt;script src="./index.js"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;h3&gt;My Google Maps Demo&lt;/h3&gt;<br/>    &lt;!--The div element for the map --&gt;<br/>    &lt;div id="map"&gt;&lt;/div&gt;<br/><br/>    &lt;!-- Async script executes immediately and must be after any DOM elements used in callback. --&gt;<br/>    &lt;script<br/>      src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&amp;callback=initMap&amp;libraries=&amp;v=weekly"<br/>      async<br/>    &gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="6c53" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在脚本中添加了API URL。它使我们能够使用<em class="mb"> initMap() </em>函数中的方法。我们用几行代码就可以得到我们想要的东西，如下所示。谢谢你，谷歌。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/f06c6fc287d0f466e75059f1b0dede99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*riGgP9NDHa1O1Wb47mLBYw.png"/></div></figure><h2 id="0e40" class="lu lv in bd md me mf dn mg mh mi dp mj lc mk ml mm lg mn mo mp lk mq mr ms mt bi translated">浏览器API:</h2><p id="dd46" class="pw-post-body-paragraph kt ku in kv b kw mu jo ky kz mv jr lb lc mw le lf lg mx li lj lk my lm ln lo ig bi translated">就像我们使用来自谷歌代码的信息并在地图上显示伊斯坦布尔一样，我们也可以使用来自用户访问我们页面的“浏览器”的信息。这些被称为浏览器API。它们内置在您下载的浏览器中。不仅仅是来自浏览器的数据，我们甚至可以访问关于浏览器加载的计算机环境的数据。是不是很神奇？</p><p id="d334" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它们有很多，我们可以在不同的学科中使用它们。我们可以在全屏模式下呈现一个特定的元素，一旦不再需要就退出全屏模式。我们可以获得有关系统电池电量的信息，并在电池电量或充电状态发生变化时收到事件通知。或者只是在用户关闭标签时获取信息。下面列出了四个主要的使用领域:</p><ul class=""><li id="09c5" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated">与浏览器中呈现的当前页面的结构进行交互(文档对象模型或DOM API)</li><li id="3566" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">在不离开当前页面的情况下对服务器执行异步请求(Fetch API)</li><li id="4f3b" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">与音频、视频和图形交互</li><li id="fbe7" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">与浏览器的设备功能交互(地理定位、设备定位、客户端数据存储)</li></ul><p id="a34d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">尽管这些API可以用JavaScript访问，但它们的实现是用浏览器使用的语言，例如，对于Google Chrome来说就是C++。</p><p id="cc8c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">让我们举一个例子来更好地理解真实网页上的浏览器API。</strong></p><p id="9f2f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">假设页面上有一个表单。在用户提交表单后，您希望在本地缓存输入数据，以加速将来包含该数据的请求。您已经需要这些浏览器API:</p><ul class=""><li id="aa3a" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated">获取API(保存记录)</li><li id="c84f" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">DOM API(向HTML列表添加新项目)</li><li id="0463" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated">客户端数据存储(在本地缓存数据)</li></ul><p id="1212" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在不知道您可能使用了DOM API的情况下，当您选择如下HTML元素时:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="8f2d" class="lu lv in lq b gy lw lx l ly lz">const button = document.getElementById("button");</span></pre><p id="9921" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">文档是一个对象。像所有的Web APIs一样，DOM API也是基于对象的。因此，您的代码使用一个或多个JavaScript对象与API进行交互，以包含上面提到的浏览器和系统信息。所以对于DOM API，文档是我们的对象，我们使用out中的方法，就像我们使用<em class="mb"> getElementById </em>一样。</p><p id="9986" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">让我们看看另一个叫做页面可见性API的API的实现:</strong></p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="7bd9" class="lu lv in lq b gy lw lx l ly lz">function userChangedThePage() {</span><span id="054b" class="lu lv in lq b gy ma lx l ly lz"> if (document.hidden) {</span><span id="0906" class="lu lv in lq b gy ma lx l ly lz">  console.log('We lost the user attention. Aaaand gone')</span><span id="1810" class="lu lv in lq b gy ma lx l ly lz"> } else {</span><span id="d87e" class="lu lv in lq b gy ma lx l ly lz">  console.log('Hurray! User returned. Preciouss.')</span><span id="4e20" class="lu lv in lq b gy ma lx l ly lz"> }</span><span id="e532" class="lu lv in lq b gy ma lx l ly lz">}</span><span id="c02a" class="lu lv in lq b gy ma lx l ly lz">document.addEventListener("visibilitychange", userChangedThePage);</span></pre><p id="9066" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一个API，当用户完全切换标签或窗口或浏览器时，以及当他们回来时，它会给出提示。它的用法就是这么简单。它让一个非常复杂的操作变得像任何API一样简单。</p><p id="9f99" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好吧。所以我们能不能写一些代码，在我们需要的时候全屏翻页，或者在他们进入页面的时候玩“吓一跳”游戏？</p><p id="e041" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">答案是否定的，因为你对此很熟悉。浏览器中有安全机制。尽管不同浏览器的安全性紧密程度不同，但基本权限是相同的。</p><p id="9c3c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以通过以下链接访问浏览器API列表:</p><div class="nn no gp gr np nq"><a href="https://developer.mozilla.org/en-US/docs/Web/API" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">Web APIs | MDN</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">为Web编写代码时，有大量的Web APIs可用。下面是所有API和…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.mozilla.org</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe km nq"/></div></div></a></div><p id="e0d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mb">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mb">说白了. io </em> </a> <em class="mb">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mb">免费周报</em> </a> <em class="mb">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mb">社区</em> </a> <em class="mb">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
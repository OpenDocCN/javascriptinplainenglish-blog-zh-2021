<html>
<head>
<title>Seamlessly use Inputs with React Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React钩子无缝地使用输入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/seamlessly-use-inputs-with-react-hooks-2c233a136aac?source=collection_archive---------10-----------------------#2021-02-24">https://javascript.plainenglish.io/seamlessly-use-inputs-with-react-hooks-2c233a136aac?source=collection_archive---------10-----------------------#2021-02-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="66b7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何用React钩子无缝获取值和更新状态？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8194e17d79732abfcf6edd23ee2c4caf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JghFUeC71TC0MPOk"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@martinshreder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Shreder</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="07ff" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><em class="ls">内容</em></h2><ul class=""><li id="a9f7" class="lt lu iq lv b lw lx ly lz lf ma lj mb ln mc md me mf mg mh bi translated">介绍</li><li id="5364" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">受控与非受控输入</li><li id="4bb9" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">事件和事件。目标</li><li id="8917" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">React挂钩使用回调</li><li id="91ad" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">扩展语法</li><li id="ffbe" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">解决办法</li></ul></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="9020" class="mu kx iq bd ky mv mw mx lb my mz na le jw nb jx li jz nc ka lm kc nd kd lq ne bi translated">介绍</h1><p id="9274" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">使用React时，很多时候您需要从输入中获取数据。有时当表单相当大时，会变得有点复杂和令人沮丧。让我向您详细介绍一下这个过程。我们将从解释不同类型的输入以及我们如何从它们那里获得数据开始，然后以我们如何使用React给它带来一些魔力结束。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="54b4" class="mu kx iq bd ky mv mw mx lb my mz na le jw nb jx li jz nc ka lm kc nd kd lq ne bi translated">受控与非受控</h1><p id="2ec8" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">重要的是，我们要理解受控与不受控的区别。对我来说，当提到这一点时，一开始总是很困惑。希望我能帮助澄清这一点。如果你已经明白了，那就直接跳过去。</p><h2 id="1960" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">受控:</h2><p id="d95a" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">受控组件(输入)由<strong class="lv ir">控制</strong>，因为组件表单数据仅在反应状态下由<strong class="lv ir">控制</strong>。通过使用React钩子、useState或useContext来管理它的值和变化，React已经完成了对它的<strong class="lv ir">控制</strong>。</p><p id="01a2" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">我想你明白了😅</p><h2 id="a8f7" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">不受控制:</h2><p id="a4cb" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">不受控制的组件(input)是不受控制的，因为它使用标准的HTML输入，而React不控制，相反，DOM会处理输入的值和变化。通常情况下，这将使用Ref。</p><p id="60d9" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">在我看来，当你使用React时，他们没有必要使用一个不受控制的组件，除非你不得不这样做。所以我将分享一个受控的例子。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="78f2" class="mu kx iq bd ky mv mw mx lb my mz na le jw nb jx li jz nc ka lm kc nd kd lq ne bi translated">事件和事件。目标</h1><blockquote class="ny nz oa"><p id="32d6" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated"><strong class="lv ir">什么事？</strong></p></blockquote><h2 id="8849" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">事件:</h2><p id="5d9b" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">当用户与HTML(JSX)交互时，它是通过事件来处理的。在我们的例子中，我们的用户事件正在与我们的文本输入交互。事件的其他示例包括(当页面加载时，单击按钮，选择，等等)。</p><h2 id="11a9" class="kw kx iq bd ky kz la dn lb lc ld dp le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">事件。目标:</h2><p id="e193" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated"><strong class="lv ir">事件</strong>的目标属性是对事件发送到的对象的直接引用。通过使用event.target，我们可以访问关于对象的大量信息。几个不同的属性示例包括<strong class="lv ir">值、名称、onspellcheck、onsize。属性的列表是巨大的，并且可能性是无限的。</strong></p><blockquote class="ny nz oa"><p id="3642" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated">我们为什么要使用它？</p></blockquote><p id="24d3" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">我们需要获得输入的值，因为event.target允许我们访问value属性，所以我们可以用它来存储输入的值。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="be6d" class="mu kx iq bd ky mv mw mx lb my mz na le jw nb jx li jz nc ka lm kc nd kd lq ne bi translated">React挂钩使用回调</h1><blockquote class="ny nz oa"><p id="0592" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated"><strong class="lv ir">什么事？</strong></p></blockquote><p id="932d" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">在React中，useCallback挂钩取代了类组件中shouldComponentUpdate的需要。</p><p id="f98e" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">reactions hook use callback接受一个依赖数组，就像它的姐妹React hook useEffect一样。这意味着只有当其中一个依赖关系发生变化时，它才会运行。</p><blockquote class="ny nz oa"><p id="4681" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated">我们为什么要使用它？</p></blockquote><p id="bc10" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">通过使用dependencies数组，并且仅在任何值发生变化时才使用函数render/run，我们可以防止和避免组件的任何不必要的呈现。</p><p id="ce38" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">尽管如果你只使用一个输入，使用useCallback可能有点过分。但是这很容易实现，所以我们正在做。</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="1193" class="mu kx iq bd ky mv mw mx lb my mz na le jw nb jx li jz nc ka lm kc nd kd lq ne bi translated">扩展语法</h1><blockquote class="ny nz oa"><p id="e149" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated"><strong class="lv ir">什么事？</strong></p></blockquote><p id="df7c" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">spread语法是最近在ES6中添加到JavaScript中的一个相当新的内容。扩展运算符是三个点…可用于许多不同的用途，例如，它可以:</p><ul class=""><li id="9dd8" class="lt lu iq lv b lw ns ly nt lf oe lj of ln og md me mf mg mh bi translated">添加两个单独的对象，并将它们合并成一个新对象</li><li id="9b68" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">将数字相加</li><li id="d6d4" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">推送数组中的元素</li><li id="f725" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">复制数组或对象</li><li id="2dbd" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md me mf mg mh bi translated">它可以提供带有数组(或任何其他可迭代的数组)的函数调用，其中应该有0个或多个参数。</li></ul><blockquote class="ny nz oa"><p id="12de" class="nf ng nx lv b lw ns jr nh ly nt ju ni ob nu nk nl oc nv nn no od nw nq nr md ij bi translated">我们为什么要使用它？</p></blockquote><p id="ff10" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">因为它可以用来复制一个对象，所以我们要使用它，这样我们就可以向同一个状态对象添加任意多的输入，并捕获它们的所有值。</p><h1 id="9a2a" class="mu kx iq bd ky mv oh mx lb my oi na le jw oj jx li jz ok ka lm kc ol kd lq ne bi translated">解决办法</h1><p id="dcd0" class="pw-post-body-paragraph nf ng iq lv b lw lx jr nh ly lz ju ni lf nj nk nl lj nm nn no ln np nq nr md ij bi translated">你成功了！这是代码，让我给你演示一下。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><ol class=""><li id="6919" class="lt lu iq lv b lw ns ly nt lf oe lj of ln og md oo mf mg mh bi translated">我们正在导入钩子useState和useCallback。</li><li id="8998" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md oo mf mg mh bi translated">创建了一个useState值，调度从一个空对象开始。</li><li id="4594" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md oo mf mg mh bi translated">使用了重构事件的回调函数来获取值。</li><li id="1085" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md oo mf mg mh bi translated">在useCallback函数中，我们使用了useState调度<code class="fe op oq or os b">setValueData</code>,使用一个spread操作符来保持之前的状态<code class="fe op oq or os b">...valueData</code>,并使用键<code class="fe op oq or os b">event.target.name</code>来更新它。这与我们输入的name属性相匹配，并为该键分配输入的值。</li><li id="3ce7" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md oo mf mg mh bi translated">在我们的依赖数组中添加了<code class="fe op oq or os b">valueData, setValueData</code>来优化useCallback。</li><li id="97d1" class="lt lu iq lv b lw mi ly mj lf mk lj ml ln mm md oo mf mg mh bi translated">用useCallback函数作为一个<code class="fe op oq or os b">onChange</code>处理程序返回我们的输入，给输入一个名字<code class="fe op oq or os b">mediumTextInput1</code>，给我们的<code class="fe op oq or os b">value</code>属性一个状态对象和输入的名字，如果不存在，默认将是一个空字符串。</li></ol><p id="eb78" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">如果我们console.log(valueData ),这就是我们当前的状态。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ot"><img src="../Images/311ca4d5d790369d308b2af606d465c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SqgIoAcxHD-YlAAhFMXocg.png"/></div></div></figure><p id="e108" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">更棒的是，如果我们添加另一个输入，我们可以使用相同的函数，只需更改输入名称就可以更新状态对象！</p><p id="8372" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">它使得这个功能和用例是动态的和可重用的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="om on l"/></div></figure><p id="c1c7" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">这就是我们现在的状态！如此简单！😅</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/365b481d74f7eb0ba4d0ed5895dd2e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FL4Wa8es8lfjtO3hh8aYlQ.png"/></div></div></figure><p id="1004" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">React是强大的；我希望这个例子能帮助你在未来的表单构建中保持简单。</p><p id="e2bd" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">感谢您阅读这篇关于使用React钩子无缝使用输入的指南。</p><p id="78fa" class="pw-post-body-paragraph nf ng iq lv b lw ns jr nh ly nt ju ni lf nu nk nl lj nv nn no ln nw nq nr md ij bi translated">在这里找到我的其他文章<a class="ae kv" href="https://medium.com/@steven_creates" rel="noopener">https://medium.com/@steven_creates</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Use React Hook Form with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在TypeScript中使用React Hook表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-react-hook-form-with-typescript-2cf597c0c45f?source=collection_archive---------3-----------------------#2021-04-07">https://javascript.plainenglish.io/how-to-use-react-hook-form-with-typescript-2cf597c0c45f?source=collection_archive---------3-----------------------#2021-04-07</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="41c0" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">为您的Web应用程序构建高性能、简洁的表单</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/4c4578f9fa049e06ace92399e55067f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*10ZrwOHqZ6hD0Raic8YOZg.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://www.pexels.com/@thepaintedsquare?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Jessica Lewis</a> from <a class="ae kw" href="https://www.pexels.com/photo/ball-point-pen-on-opened-notebook-606541/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="f1c3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">处理表单输入对于任何现代web应用程序来说都是绝对必要的。React也不例外。我们可以用多种方式处理表单。但是确保可重用性和性能对于表单尤其重要。</p><p id="0916" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因为表单是一些最动态的组件，如果处理不当，用户会感觉到使用缓慢的应用程序的痛苦。</p><p id="a212" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将看看一个名为<code class="fe lt lu lv lw b"><a class="ae kw" href="https://react-hook-form.com/" rel="noopener ugc nofollow" target="_blank">react-hook-form</a></code>的令人敬畏的库，它使我们能够创建干净和高性能的表单组件。</p><h1 id="fe25" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">但是其他的解决方案呢？</h1><p id="904c" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">好问题。还有其他像<code class="fe lt lu lv lw b">Formik</code>和<code class="fe lt lu lv lw b">Redux Form</code>这样的图书馆以不同的方式做着几乎相同的事情。但是，React钩子形式在几个方面更好。</p><ul class=""><li id="e950" class="mu mv ir kz b la lb ld le lg mw lk mx lo my ls mz na nb nc bi translated">较少样板文件</li><li id="d594" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated">与其他产品相比，渲染较少</li><li id="c1bd" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated">更好地支持模式验证。</li></ul><h1 id="773a" class="lx ly ir bd lz ma mb mc md me mf mg mh jx mi jy mj ka mk kb ml kd mm ke mn mo bi translated">我们要建造什么？</h1><p id="1ba6" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">今天，我们将构建一个简单的身份验证表单，用户可以</p><ul class=""><li id="ee70" class="mu mv ir kz b la lb ld le lg mw lk mx lo my ls mz na nb nc bi translated">给<code class="fe lt lu lv lw b">Email</code>和<code class="fe lt lu lv lw b">Password</code>作为输入</li><li id="a46e" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated">将有<code class="fe lt lu lv lw b">validation</code>用于过滤数据。</li></ul><p id="961c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将从简单开始，看看我们如何一步一步地前进。</p></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h2 id="0f72" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第一步。安装依赖项</h2><p id="178f" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">让我们首先安装依赖项</p><pre class="kh ki kj kk gu ob lw oc od aw oe bi"><span id="b5a2" class="np ly ir lw b gz of og l oh oi">yarn add react-hook-form</span></pre><h2 id="bfcb" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第二步。导入挂钩</h2><p id="7315" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">从库中导入<code class="fe lt lu lv lw b">useForm</code>钩子。这个钩子为我们的表单导出所有必要的控件。</p><pre class="kh ki kj kk gu ob lw oc od aw oe bi"><span id="5b57" class="np ly ir lw b gz of og l oh oi">import { useForm } from "react-hook-form";</span></pre><h2 id="3f4a" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第三步。为数据定义接口</h2><p id="36f6" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">当我们使用类型脚本时，我们应该利用类型系统。最好的部分是，如果您有任何打字错误，它会在编译时捕获错误。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">type.ts</figcaption></figure><h2 id="c18f" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第四步。构建表单</h2><p id="da83" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">下面是我们表单的完整代码。这里我们从钩子中提取两个控件。</p><p id="2665" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lt lu lv lw b">register</code> - &gt;这是将我们的表单输入绑定到库中所必需的。</p><p id="f96f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lt lu lv lw b">handleSubmit</code> - &gt;这是标准的提交功能。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div></figure><p id="1792" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这里需要注意的一点是，我们在onSubmit函数中以对象的形式获取值。像下面这样:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ol"><img src="../Images/10c768a0d30fc0cfc5ed436b9b78f016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7pZ4-iDyQuUuROV0iola2A.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">after the submit is clicked</figcaption></figure><h2 id="d869" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第五步。添加默认值</h2><p id="cea0" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">有时我们想在表单字段中添加默认值。在这些场景中，您可以像下面这样添加<code class="fe lt lu lv lw b">defaultValue</code>属性</p><pre class="kh ki kj kk gu ob lw oc od aw oe bi"><span id="6190" class="np ly ir lw b gz of og l oh oi">&lt;input <em class="om">defaultValue</em>='default@email.com' {...register('email')} /&gt;</span></pre><p id="52e9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，您的表单将如下所示:</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj on"><img src="../Images/703264033acba35ff04a7f0baae34218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*egNXcxX4TP6_iXoQW8hybQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Default email</figcaption></figure><h2 id="af49" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第六步。确认</h2><p id="19a3" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">一位著名的哲学家曾经说过:<em class="om">“没有验证的形式是什么？”</em></p><p id="69bc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们来看看如何在表单中添加验证。有几个现成的验证可供我们使用</p><ul class=""><li id="3529" class="mu mv ir kz b la lb ld le lg mw lk mx lo my ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">required</code>(强制填写字段)</li><li id="8098" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">min</code>(用于数字)</li><li id="48fe" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">max</code>(用于数字)</li><li id="5721" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">minLength</code>(为字段的长度)</li><li id="027d" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">maxLength</code>(用于字段的长度)</li><li id="b591" class="mu mv ir kz b la nd ld ne lg nf lk ng lo nh ls mz na nb nc bi translated"><code class="fe lt lu lv lw b">pattern</code>(用于有效密码/电子邮件等模式匹配)</li></ul><p id="6e69" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">你可以在这里阅读更多关于他们的信息</p><p id="ec73" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，我们将确保我们的用户只需输入他们的电子邮件，密码必须是6个字符长。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">form.ts</figcaption></figure><p id="2ec2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">好了，我们已经将该字段设置为必填字段，但是如何捕捉错误呢？为此，我们需要从钩子内部导入<code class="fe lt lu lv lw b">errors</code></p><pre class="kh ki kj kk gu ob lw oc od aw oe bi"><span id="8aef" class="np ly ir lw b gz of og l oh oi">const {register,handleSubmit,<em class="om">formState</em>: {errors}} =useForm&lt;<em class="om">Inputs</em>()</span></pre><p id="1cf0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最后，我们的表单看起来像这样</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">form-with-validation.ts</figcaption></figure><p id="cbb2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，当你试图提交没有填写电子邮件的错误就会出现。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/db5a27fdd597a5e3a536c9f91ff051d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*1LIVxMpf20qZVwY7MswH1Q.png"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">validation</figcaption></figure><h2 id="bbe9" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">第七步:让我们做更多的清理工作</h2><p id="cabb" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">我个人不喜欢将验证逻辑传递到输入本身。此外，我们得到的默认控制并不广泛。</p><p id="8147" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这种情况下，我们可以使用某种<strong class="kz is">模式验证</strong>库，比如真正流行的<code class="fe lt lu lv lw b">Yup</code>。</p><p id="9dc9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要使用它，我们首先需要安装依赖项</p><pre class="kh ki kj kk gu ob lw oc od aw oe bi"><span id="0109" class="np ly ir lw b gz of og l oh oi">yarn add @hookform/resolvers yup</span></pre><p id="5d3c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后构建模式验证器。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div></figure><p id="07a0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">并将模式传递给<code class="fe lt lu lv lw b">useForm</code>钩子</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">resolver.ts</figcaption></figure><p id="653c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们的表单将比以前干净得多:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oj ok l"/></div></figure><p id="d32a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">所以现在我们的表单和错误处理都变得更干净了。做着和以前一样的工作。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div class="gi gj oo"><img src="../Images/00a59b76737d4cbbc799e0a20daeeb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*asMlrRYUM0i2L1Ud7p_fnA.png"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">validation</figcaption></figure></div><div class="ab cl ni nj hv nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ik il im in io"><h2 id="69cd" class="np ly ir bd lz nq nr dn md ns nt dp mh lg nu nv mj lk nw nx ml lo ny nz mn oa bi translated">结论</h2><p id="4646" class="pw-post-body-paragraph kx ky ir kz b la mp js lc ld mq jv lf lg mr li lj lk ms lm ln lo mt lq lr ls ik bi translated">这就是了。我们已经看到了如何使用<code class="fe lt lu lv lw b">react-hook-form</code>库来编写干净和高性能的表单组件，而没有样板文件的麻烦。祝您愉快！</p><p id="8641" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">有话要说？通过</strong><a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is">LinkedIn</strong></a>联系我</p></div></div>    
</body>
</html>
<html>
<head>
<title>Add Lines with Multiple Styles into a React App with the Visx Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visx库将多种样式的线条添加到React应用程序中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-lines-with-multiple-styles-into-a-react-app-with-the-visx-library-9069d55c15c1?source=collection_archive---------14-----------------------#2021-03-19">https://javascript.plainenglish.io/add-lines-with-multiple-styles-into-a-react-app-with-the-visx-library-9069d55c15c1?source=collection_archive---------14-----------------------#2021-03-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9b417f3798d39102267155a890afa102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TUTCFvTFHUscXaca"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Waldemar Brandt</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d2f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Visx是一个库，让我们可以轻松地将图形添加到React应用程序中。</p><p id="ee07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用它向React应用程序添加具有自己风格的线段曲线</p><h1 id="396e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装所需的软件包</h1><p id="2968" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须安装一些模块。</p><p id="61e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89df" class="mn lc iq mj b gy mo mp l mq mr">npm i @visx/curve @visx/gradient @visx/responsive @visx/scale @visx/shape</span></pre><p id="8e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装软件包。</p><h1 id="4761" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建多样式线条</h1><p id="04ad" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过添加模块提供的项目来创建图表。</p><p id="c195" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了添加这一行，我们写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8e5c" class="mn lc iq mj b gy mo mp l mq mr">import React, { useMemo } from "react";<br/>import { scaleLinear } from "@visx/scale";<br/>import { curveCardinal } from "@visx/curve";<br/>import { LinePath, SplitLinePath } from "@visx/shape";<br/>import { LinearGradient } from "@visx/gradient";</span><span id="a619" class="mn lc iq mj b gy ms mp l mq mr">const getX = (d) =&gt; d.x;<br/>const getY = (d) =&gt; d.y;<br/>const background = "#045275";<br/>const backgroundLight = "#089099";<br/>const foreground = "#b7e6a5";</span><span id="770b" class="mn lc iq mj b gy ms mp l mq mr">function generateSinPoints({<br/>  width,<br/>  height,<br/>  numberOfWaves = 10,<br/>  pointsPerWave = 10<br/>}) {<br/>  const waveLength = width / numberOfWaves;<br/>  const distanceBetweenPoints = waveLength / pointsPerWave;<br/>  const sinPoints = [];</span><span id="1d2c" class="mn lc iq mj b gy ms mp l mq mr">  for (let waveIndex = 0; waveIndex &lt;= numberOfWaves; waveIndex += 1) {<br/>    const waveDistFromStart = waveIndex * waveLength;</span><span id="28e0" class="mn lc iq mj b gy ms mp l mq mr">    for (let pointIndex = 0; pointIndex &lt;= pointsPerWave; pointIndex += 1) {<br/>      const waveXFraction = pointIndex / pointsPerWave;<br/>      const waveX = pointIndex * distanceBetweenPoints;<br/>      const globalX = waveDistFromStart + waveX;<br/>      const globalXFraction = (width - globalX) / width;<br/>      const waveHeight =<br/>        Math.min(globalXFraction, 1 - globalXFraction) * height;<br/>      sinPoints.push({<br/>        x: globalX,<br/>        y: waveHeight * Math.sin(waveXFraction * (2 * Math.PI))<br/>      });<br/>    }<br/>  }</span><span id="cca5" class="mn lc iq mj b gy ms mp l mq mr">  return sinPoints;<br/>}</span><span id="4c1a" class="mn lc iq mj b gy ms mp l mq mr">function Example({<br/>  width,<br/>  height,<br/>  numberOfWaves = 10,<br/>  pointsPerWave = 100,<br/>  numberOfSegments = 8<br/>}) {<br/>  const data = useMemo(<br/>    () =&gt; generateSinPoints({ width, height, numberOfWaves, pointsPerWave }),<br/>    [width, height, numberOfWaves, pointsPerWave]<br/>  );</span><span id="b2bb" class="mn lc iq mj b gy ms mp l mq mr">  const dividedData = useMemo(() =&gt; {<br/>    const segmentLength = Math.floor(data.length / numberOfSegments);<br/>    return new Array(numberOfSegments)<br/>      .fill(null)<br/>      .map((_, i) =&gt; data.slice(i * segmentLength, (i + 1) * segmentLength));<br/>  }, [numberOfSegments, data]);</span><span id="0f1f" class="mn lc iq mj b gy ms mp l mq mr">  const getScaledX = useMemo(() =&gt; {<br/>    const xScale = scaleLinear({ range: [0, width], domain: [0, width] });<br/>    return (d) =&gt; xScale(getX(d)) ?? 0;<br/>  }, [width]);</span><span id="4974" class="mn lc iq mj b gy ms mp l mq mr">  const getScaledY = useMemo(() =&gt; {<br/>    const yScale = scaleLinear({ range: [0, height], domain: [height, 0] });<br/>    return (d) =&gt; yScale(getY(d)) ?? 0;<br/>  }, [height]);</span><span id="eb15" class="mn lc iq mj b gy ms mp l mq mr">  return width &lt; 10 ? null : (<br/>    &lt;div&gt;<br/>      &lt;svg width={width} height={height}&gt;<br/>        &lt;LinearGradient<br/>          id="visx-shape-splitlinepath-gradient"<br/>          from={background}<br/>          to={backgroundLight}<br/>          fromOpacity={0.8}<br/>          toOpacity={0.8}<br/>        /&gt;<br/>        &lt;rect<br/>          x={0}<br/>          y={0}<br/>          width={width}<br/>          height={height}<br/>          fill="url(#visx-shape-splitlinepath-gradient)"<br/>          rx={14}<br/>        /&gt;</span><span id="6854" class="mn lc iq mj b gy ms mp l mq mr">        &lt;g transform={`rotate(${0})translate(${-0}, ${-height * 0.5})`}&gt;<br/>          &lt;LinePath<br/>            data={data}<br/>            x={getScaledX}<br/>            y={getScaledY}<br/>            strokeWidth={8}<br/>            stroke="#fff"<br/>            strokeOpacity={0.15}<br/>            curve={curveCardinal}<br/>          /&gt;</span><span id="47a7" class="mn lc iq mj b gy ms mp l mq mr">          &lt;SplitLinePath<br/>            segments={dividedData}<br/>            x={getScaledX}<br/>            y={getScaledY}<br/>            curve={curveCardinal}<br/>            styles={[<br/>              { stroke: foreground, strokeWidth: 3 },<br/>              { stroke: "#fff", strokeWidth: 2, strokeDasharray: "9,5" },<br/>              { stroke: background, strokeWidth: 2 }<br/>            ]}<br/>          &gt;<br/>            {({ segment, styles, index }) =&gt;<br/>              index === numberOfSegments - 1 || index === 2 ? (<br/>                segment.map(({ x, y }, i) =&gt;<br/>                  i % 8 === 0 ? (<br/>                    &lt;circle<br/>                      key={i}<br/>                      cx={x}<br/>                      cy={y}<br/>                      r={10 * (i / segment.length)}<br/>                      stroke={styles?.stroke}<br/>                      fill="transparent"<br/>                      strokeWidth={1}<br/>                    /&gt;<br/>                  ) : null<br/>                )<br/>              ) : (<br/>                &lt;LinePath<br/>                  data={segment}<br/>                  x={(d) =&gt; d.x || 0}<br/>                  y={(d) =&gt; d.y || 0}<br/>                  {...styles}<br/>                /&gt;<br/>              )<br/>            }<br/>          &lt;/SplitLinePath&gt;<br/>        &lt;/g&gt;<br/>      &lt;/svg&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="3bb5" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Example width={500} height={300} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="64e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">getX</code>和<code class="fe mt mu mv mj b">getY</code>函数来获取x和y轴的数据。</p><p id="546e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">background</code>是背景渐变的颜色之一。</p><p id="6cdb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">backgroundLight</code>具有较浅的背景渐变颜色。</p><p id="cb7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">foreground</code>有一种线条颜色。</p><p id="28ea" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">generateSinPoints</code>函数生成线的点。</p><p id="cbcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">globalX</code>有正弦曲线的x坐标。</p><p id="c406" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe mt mu mv mj b">Math.sin</code>方法来创建y轴值。</p><p id="2d4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">Example</code>组件中，我们用各种样式呈现线条。</p><p id="045d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">dividedData</code>变量将线分成几段。</p><p id="76eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是通过创建一个值数组并用<code class="fe mt mu mv mj b">slice</code>分割从<code class="fe mt mu mv mj b">generateSinPoints</code>创建的值来完成的。</p><p id="3432" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">getScaledX</code>和<code class="fe mt mu mv mj b">getScaledY</code>变量创建图表的比例。</p><p id="2037" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">scaleLinear</code>函数创建它们，因为一切都是线性比例。</p><p id="6855" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">LinePath</code>组件渲染左边的线段。</p><p id="f896" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe mt mu mv mj b">SplitLinePath</code>组件来呈现剩余的片段。</p><p id="34c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe mt mu mv mj b">styles</code>道具中获取样式，并用在<code class="fe mt mu mv mj b">SplitLinePath</code>的渲染道具中返回的<code class="fe mt mu mv mj b">LineSegment</code>组件渲染它们。</p><h1 id="8cd3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2df4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在带有Visx库的React应用程序中创建一条包含多个具有各自风格的线段的线。</p><p id="4d2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p><p id="d3cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
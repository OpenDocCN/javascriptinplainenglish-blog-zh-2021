# å¦‚ä½•ä½¿ç”¨ Firebase èº«ä»½éªŒè¯ç®¡ç†ç™»å½•å’Œæ³¨å†Œï¼Ÿ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/how-to-manage-login-and-signup-with-firebase-authentification-fa2413d18934?source=collection_archive---------7----------------------->

## ç«ç„°åŸºåº§å’Œè§’å½¢å°–ç«¯

## é€šè¿‡ AngularFire ä½¿ç”¨ Firebase èº«ä»½éªŒè¯æ­£ç¡®ç®¡ç†æ‚¨çš„ç”¨æˆ·è¿æ¥ã€‚

![](img/6e41d9c41fe3126e0317e4d564dcc49e.png)

Photo by [Micah Williams](https://unsplash.com/@mr_williams_photography?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

è¿™ç¯‡æ–‡ç« æ˜¯å…³äºä½¿ç”¨ Firebase èº«ä»½éªŒè¯ç®¡ç†åº”ç”¨ç¨‹åºä¸Šçš„ç™»å½•å’Œæ³¨å†Œã€‚è¿™ä¸æ˜¯å¾ˆæœ‰è¶£å—ï¼Ÿ

ä¸åº”è¯¥å†™ä¸€æ•´ç¯‡æ–‡ç« æ¥è®¨è®ºå¦‚ä½•è®©ç”¨æˆ·åˆ›å»ºæˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å¸æˆ·ï¼Œæˆ–è€…è®©ä»–ä»¬ä½¿ç”¨ Firebase èº«ä»½éªŒè¯ç™»å½•ã€‚å¯¹äºè®¸å¤šäººæ¥è¯´ï¼Œè¿™ä¼¼ä¹æ˜¯ Firebase æ–‡æ¡£ä¸­æœ€ç®€å•çš„éƒ¨åˆ†ï¼Œä¹Ÿè®¸ä»–ä»¬æ˜¯å¯¹çš„ğŸ¤·â€â™‚ï¸.

ç›¸ä¿¡æˆ‘ï¼Œè™½ç„¶è¿™å¯èƒ½å¾ˆç®€å•ï¼Œä½†å½“æ¶‰åŠåˆ°æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨äº Firebase ä¸­ä»¥é¿å…å…³äºä¸¤ä¸ªæœ¬åº”ç‹¬ç«‹çš„å¸æˆ·çš„å†²çªæ—¶ï¼Œè®¸å¤šå¼€å‘äººå‘˜éƒ½ä¼šé‡åˆ°é—®é¢˜ã€‚åœ¨è¿™é‡Œï¼Œæœ‰å‡ ç§åšæ³•è¢«ç”¨æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½†åœ¨æˆ‘çœ‹æ¥ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„åšæ³•éƒ½å€¼å¾—æ¨èã€‚

å†™è¿™ç¯‡æ–‡ç« çš„æˆ‘è‡ªå·±ä¹Ÿé‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œæˆ‘åœ¨ Google ä¸Šæ‰¾åˆ°çš„ä¸€äº›ç­”æ¡ˆå¹¶æ²¡æœ‰è®©æˆ‘æ»¡æ„ï¼Œæ‰€ä»¥æˆ‘å†™è¿™ç¯‡æ–‡ç« ï¼Œå¸Œæœ›åŸºäº Firebase æœ¬èº«çš„æ–‡æ¡£ä¸ºæ‚¨æä¾›ä¸€ä¸ªæœ€ä½³çš„è§£å†³æ–¹æ¡ˆã€‚

# æ€ä¹ˆè§£å†³ï¼Ÿ

æˆ‘åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰ä¸¤ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜çš„æµç¨‹ï¼Œä¸€ä¸ªæˆ‘ç§°ä¹‹ä¸ºæœ€å·®ï¼Œä¸€ä¸ªæˆ‘ç§°ä¹‹ä¸ºæœ€ç»†ã€‚æˆ‘å°†åœ¨ä¸‹é¢çš„å¥å­ä¸­å‘ä½ è§£é‡Šå®ƒä»¬ï¼Œå‘ä½ å±•ç¤ºæˆ‘å»ºè®®ä½ ä¸è¦ä½¿ç”¨çš„æ–¹æ³•ï¼Œä»¥åŠå½“ä½ é¢ä¸´è¿™ä¸ªé—®é¢˜æ—¶æˆ‘å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨çš„æ–¹æ³•ã€‚

## **a .æ£€æŸ¥ç”¨æˆ·æ˜¯å¦åœ¨ Firestore ä¸­(**é”™è¯¯æç¤º)

åœ¨ç™»å½•çš„æƒ…å†µä¸‹ï¼Œè¯¥è§£å†³æ–¹æ¡ˆå»ºè®®é€šè¿‡æ”¶é›†ç”¨æˆ·çš„ç”µå­é‚®ä»¶æ¥è¿æ¥ç”¨æˆ·ï¼Œä»¥ä¾¿åœ¨ Firestore ä¸­è¿›è¡Œæ£€æŸ¥ï¼›å¦‚æœå­˜åœ¨ï¼Œæˆ‘ä»¬é€šè¿‡ Firebase Auth è¿æ¥ä»–ï¼Œåœ¨ç›¸åçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬è¦æ±‚ä»–åˆ›å»ºä¸€ä¸ªå¸æˆ·ã€‚

åœ¨æ³¨å†Œçš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·çš„ç”µå­é‚®ä»¶è¢«å†æ¬¡æ£€ç´¢å¹¶åœ¨ Firestore ä¸­æ£€æŸ¥ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå¸æˆ·ï¼›å¦‚æœæ˜¯ï¼Œç”¨æˆ·è¢«å‘ŠçŸ¥è¯¥ç”µå­é‚®ä»¶å·²ç»æ³¨å†Œï¼Œä»–/å¥¹åº”è¯¥ä½¿ç”¨å¦ä¸€ä¸ªç”µå­é‚®ä»¶æˆ–ç™»å½•ã€‚

è¿™è‚¯å®šä¼šè¿‡å»ï¼Œä½†å´å¼•èµ·*ä¸‰ä¸ªé¡¾è™‘:*

1.  ***åœ¨ä¸å¿…è¦çš„æ—¶å€™ï¼Œæ‚¨å°†ä¸ºæ­¤é˜…è¯»ä»˜è´¹ï¼Œ***
2.  *ä¸å¿…è¦çš„é˜…è¯»éœ€è¦æ¯”å¤§å¤šæ•°ç”¨æˆ·æ›´å¤šçš„è€å¿ƒã€‚*
3.  ***å½“æ‚¨åº”è¯¥ä½¿ç”¨å•ç‚¹ç™»å½•(å¦‚ä¸ Google è¿æ¥)æ—¶ï¼Œè¿æ¥å’Œæ³¨å†Œç®¡ç†ä¸å–„ï¼›** *å› ä¸ºåœ¨ç”¨æˆ·ç™»å½•å¹¶é€‰æ‹©å…¶è¿æ¥æ–¹å¼ä¹‹å‰ï¼Œæ‚¨æ— æ³•è®¿é—®è¯¥ç”µå­é‚®ä»¶åœ°å€ã€‚**

## *b.è¯·æ•™ Authï¼Œä»–å°±æ˜¯è§£å†³æ–¹æ¡ˆï¼(å¥½å»ºè®®)*

*å¯¹äºç™»å½•å’Œæ³¨å†Œï¼Œç›´æ¥ä½¿ç”¨ Firebase èº«ä»½éªŒè¯ã€‚åœ¨è¿™ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†ä¸€æ­¥ä¸€æ­¥åœ°å‘æ‚¨ä»‹ç»è¦å®ç°è‰¯å¥½çš„è®¤è¯ç®¡ç†åº”è¯¥åšäº›ä»€ä¹ˆã€‚*

*ä¸ºäº†ä¸€ä¸ªå¥½çš„æ¼”ç¤ºï¼Œæˆ‘å°†å¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚è¯¥åº”ç”¨ç¨‹åºå°†åœ¨ä»¥ä¸‹ç‰ˆæœ¬ä¸­å¼€å‘:*

1.  *[Angular (v12.2.7)](https://angular.io/docs) è¿™æ˜¯ä¸€ä¸ªç”¨äºå‰ç«¯åº”ç”¨å¼€å‘çš„ JavaScript æ¡†æ¶ã€‚*
2.  *[AngularFire(7.0.4)](https://github.com/angular/angularfire) è¿™æ˜¯ Firebase çš„å®˜æ–¹è§’åº¦åº“ã€‚*

*ä¸ºäº†è®©æˆ‘ä»¬æ›´å®¹æ˜“ç†è§£ï¼Œæˆ‘å°†è¯¥è§£å†³æ–¹æ¡ˆåˆ†ä¸ºä¸‰ä¸ªåŸºæœ¬é˜¶æ®µ:æ³¨å†Œã€ç™»å½•å’Œ LoginWithProvider(æœ¬ä¾‹ä¸­ä¸º Google)ã€‚æˆ‘é¼“åŠ±ä½ é€šè¿‡ç»™å®šçš„é“¾æ¥é˜…è¯»è§’å’Œè§’ç«æ–‡æ¡£ï¼Œä»¥ç†Ÿæ‚‰å®ƒä»¬ã€‚*

> *é€šè¿‡`npm i @angular/fire`åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£… AngularFireï¼Œä½†æ˜¯è¦æŠŠå®ƒæ·»åŠ åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œä½ éœ€è¦åš`ng add @angular/fire`*

*é¡¹ç›®ä¸­ AngularFire çš„åˆå§‹åŒ–æ˜¯é€šè¿‡é›†æˆ AngularFireModule : `AngularFireModule.initializeApp(environment.firebase)`æ¥å®Œæˆçš„ï¼Œå¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘æ·»åŠ äº† AngularFireAuth å’Œ AngularFireAuthGuard æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚*

*app.module.ts*

*environment.ts*

*æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªæœåŠ¡ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä¸ºè¿™é‡Œçš„ä¾‹å­å®ç°æˆ‘ä»¬éœ€è¦çš„ä¸åŒç‰¹æ€§ã€‚*

*auth.service.ts*

> *è¿™ä¸ªä¸»é¢˜ä¸­çš„ä¸€ä¸ªå°å¦™å¤„æ˜¯ä¸‹é¢çš„ä»£ç *

*style.css*

## *b.1 .æ³¨å†Œ(é€šè¿‡ç”µå­é‚®ä»¶)*

*![](img/cf5fe56e136531e739aa279c1b408ca2.png)*

*sign-up page*

*è¿™æ˜¯é¡µé¢çš„ HTML ä»£ç ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥æ‰¾åˆ°å…¨å±€æ ·å¼(style.css)*

*sign-up.component.html*

*è¦ä½¿ç”¨ç”µå­é‚®ä»¶å’Œå¯†ç ç®¡ç†æ³¨å†Œï¼Œåªéœ€æ¥å—è¿™ä¸¤ä¸ªå‚æ•°ï¼Œç„¶åæ‰§è¡Œ createUserWithEmailAndPassword æ–¹æ³•å°±è¶³å¤Ÿäº†ã€‚ä¸€ä¸ªæ‰¿è¯ºå°†ä¼šå¾—åˆ°å›æŠ¥:*

*1ï¸âƒ£å¦‚æœæˆåŠŸ:ä½ é‡å®šå‘ç”¨æˆ·åˆ°æ‰€éœ€çš„é¡µé¢ï¼›å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œå®ƒæ˜¯ä¸»é¡µã€‚*

*å‡ºé”™æ—¶çš„ 2ï¸âƒ£:æ‚¨æœ‰å››ä¸ªé€‰é¡¹`email-already-in-use`ã€`invalid-email`ã€`operation-not-allowed`å’Œ`weak-password`ã€‚è¿™å››ç§å¯èƒ½æ€§ä¹Ÿç»™äº†ä½ åœ¨ä»£ç ä¸­è¡ŒåŠ¨çš„è‡ªç”±ã€‚*

*sign-up.component.ts*

## *b.2 .ç™»å½•(ä½¿ç”¨ç”µå­é‚®ä»¶)*

*![](img/00d6e1ad77171dc2205b134e7d129722.png)*

*login page*

*è¿™æ˜¯é¡µé¢çš„ html ä»£ç ï¼Œåœ¨ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥æ‰¾åˆ°å…¨å±€æ ·å¼(style.css)*

*login.component.html*

*è¿™æ¬¡è¦ä½¿ç”¨ç”µå­é‚®ä»¶å’Œå¯†ç æ¥ç®¡ç†è¿æ¥ï¼Œåªéœ€æ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç„¶åæ‰§è¡Œ signInWithEmailAndPassword æ–¹æ³•å°±è¶³å¤Ÿäº†ã€‚ä¸€ä¸ªæ‰¿è¯ºå°†ä¼šå¾—åˆ°å›æŠ¥:*

*æˆåŠŸæ—¶çš„ 1ï¸âƒ£:ä½ å†æ¬¡å°†ç”¨æˆ·é‡å®šå‘åˆ°æƒ³è¦çš„é¡µé¢ï¼›å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œè¿™æ˜¯ä¸»é¡µã€‚*

*å‡ºé”™æ—¶çš„ 2ï¸âƒ£:æ‚¨æœ‰å››ä¸ªé€‰é¡¹`invalid-email`ã€`user-disabled`ã€`user-not-found`å’Œ`wrong-password`ã€‚è¿™å››ç§å¯èƒ½æ€§ä¸ºæ‚¨çš„ä»£ç æä¾›äº†è‡ªç”±çš„æ“ä½œèŒƒå›´ã€‚*

*login.component.ts*

## *b.3 .å‘æä¾›å•†ç™»å½•*

*![](img/ef2ecd8e2d95723a458abd3b6bf2e3b5.png)**![](img/fcbf537d98bf8f1c7c0df4a3ae4a2608.png)*

*Login With Google*

*è‡³äºåœ¨è¿™ç§æƒ…å†µä¸‹è¿æ¥åˆ°åƒ Google è¿™æ ·çš„ Firebase æä¾›å•†ï¼Œæ‚¨å¿…é¡»éå¸¸å°å¿ƒã€‚æ‚¨é¦–å…ˆå¿…é¡»å®ç°å…è®¸æ‚¨è®¿é—®æä¾›è€…çš„æ–¹æ³•ï¼Œç„¶åé€šè¿‡æ‚¨çš„æŒ‰é’®è°ƒç”¨å®ƒï¼›è¿æ¥åï¼Œä¸è¦çŠ¹è±«ï¼Œåšä½ æƒ³åšçš„ã€‚*

*ä½†æ˜¯è¿™ä¸ªåŠ¨ä½œä¼šäº§ç”Ÿä¸¤ä¸ªé”™è¯¯:*å½“ä½ å·²ç»å­˜åœ¨çš„æ—¶å€™ä½œä¸ºæ–°ç”¨æˆ·ç™»å½•æˆ–è€…å½“ä»–æ˜¯æ–°ç”¨æˆ·çš„æ—¶å€™ä½œä¸ºè€ç”¨æˆ·ç™»å½•ã€‚**

*è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ£€æŸ¥è¿æ¥çš„ç”¨æˆ·å°±è¶³å¤Ÿäº†ã€‚Firebase è¿”å›ç™»å½•å…ƒæ•°æ®ï¼Œå› æ­¤æ‚¨å¯ä»¥æ¯”è¾ƒå¸æˆ·çš„åˆ›å»ºæ—¥æœŸå’Œä¸Šæ¬¡ç™»å½•çš„æ—¥æœŸï¼›å¦‚æœå®ƒä»¬ç›¸ç­‰ï¼Œåˆ™æ˜¯æ–°ç”¨æˆ·ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œåˆ™è¯¥ç”¨æˆ·å·²ç»å­˜åœ¨äº Firebase èº«ä»½éªŒè¯ä¸­ã€‚*

> ***æ³¨**:è¯¥é›¶ä»¶çš„ä»£ç å¯ä»¥åœ¨å‰é¢ä¸¤ä¸ªä¸­æ‰¾åˆ°*

# *ä¸´ç»ˆé—è¨€*

*æˆ‘ä¸èƒ½ä»¥è°ˆè®ºä¸€ä¸ªæˆ‘è®¤ä¸ºå¼•èµ·è¿™ç§æ‹…å¿§çš„ä¸»è¦å› ç´ æ¥ç»“æŸè¿™ç¯‡æ–‡ç« ã€‚èº«ä»½éªŒè¯å’Œ Firestore ä¸åº”æ··æ·†ï¼Œåè€…å…è®¸åœ¨å¯¹è¿™äº›ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯åå­˜å‚¨æ•°æ®ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„ uid æ¥é“¾æ¥ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·å’Œæˆ‘ä»¬æ”¾åœ¨ Firestore ä¸­çš„å…¶ä»–æ•°æ®ï¼›æˆ‘ä»¬åº”è¯¥æ˜ç™½ï¼Œæ²¡æœ‰ç»è¿‡è®¤è¯ï¼Œä»»ä½•ç”¨æˆ·éƒ½ä¸èƒ½è¿›å…¥ Firestoreã€‚*

> *å¦‚æœä½ æƒ³æ›´ä»”ç»†åœ°æŸ¥çœ‹æºä»£ç ï¼Œå¯ä»¥ç‚¹å‡»ä¸‹é¢çš„ [**é“¾æ¥**](https://github.com/ShekMak/firebase-auth-management.git)*

# *å‚è€ƒ*

*[](https://firebase.google.com/docs/reference/js/v8/firebase.auth.Auth) [## Auth | JavaScript SDK | Firebase

### è®¤è¯å‚è€ƒ

firebase.google.com](https://firebase.google.com/docs/reference/js/v8/firebase.auth.Auth) [](https://stackoverflow.com/questions/51562995/how-can-i-check-if-user-exists-in-firebase) [## å¦‚ä½•æ£€æŸ¥ Firebase ä¸­æ˜¯å¦å­˜åœ¨ç”¨æˆ·ï¼Ÿ

### æ„Ÿè°¢è´¡çŒ®ä¸€ä¸ªå †æ ˆæº¢å‡ºçš„ç­”æ¡ˆï¼è¯·åŠ¡å¿…å›ç­”é—®é¢˜ã€‚æä¾›è¯¦ç»†ä¿¡æ¯å¹¶åˆ†äº«â€¦

stackoverflow.com](https://stackoverflow.com/questions/51562995/how-can-i-check-if-user-exists-in-firebase) [](https://firebase.google.com/docs/auth/web/google-signin) [## ä½¿ç”¨å¸¦æœ‰ JavaScript | Firebase çš„ Google ç™»å½•è¿›è¡Œèº«ä»½éªŒè¯

### æ‚¨å¯ä»¥è®©æ‚¨çš„ç”¨æˆ·ä½¿ç”¨ä»–ä»¬çš„ Google å¸æˆ·é€šè¿‡ Firebase è¿›è¡Œèº«ä»½éªŒè¯ï¼Œæ–¹æ³•æ˜¯å°† Google ç™»å½•é›†æˆåˆ°æ‚¨çš„â€¦

firebase.google.com](https://firebase.google.com/docs/auth/web/google-signin) [](https://github.com/ShekMak/firebase-auth-management.git) [## GitHub-shek mak/firebase-auth-management

### æ­¤é¡¹ç›®æ˜¯ä½¿ç”¨ Angular CLI ç‰ˆæœ¬ 12.2.7 ç”Ÿæˆçš„ã€‚ä¸ºå¼€å‘æœåŠ¡å™¨è¿è¡Œ ng serveã€‚å¯¼èˆªåˆ°â€¦

github.com](https://github.com/ShekMak/firebase-auth-management.git) 

*æ›´å¤šå†…å®¹è¯·çœ‹*[***plain English . io***](http://plainenglish.io/)*
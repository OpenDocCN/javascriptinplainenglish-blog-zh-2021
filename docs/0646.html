<html>
<head>
<title>Gatsby.js — Rendering Markdown Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Gatsby.js呈现降价数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/gatsby-js-rendering-markdown-data-be82afe558a?source=collection_archive---------11-----------------------#2021-02-09">https://javascript.plainenglish.io/gatsby-js-rendering-markdown-data-be82afe558a?source=collection_archive---------11-----------------------#2021-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/128290e7cef8866c35360303457659aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tHvcgnQ7pzd3o0Tk"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@benhershey?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben Hershey</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2833" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Gatsby是一个基于React的静态网站框架。</p><p id="f7a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它从外部数据源创建静态网站等等。</p><p id="fb08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Gatsby创建一个站点。</p><h1 id="ea00" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">降价数据</h1><p id="e3d5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以从Markdown文件中获取数据，并将它们用作数据源。</p><p id="1e07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们安装了<code class="fe me mf mg mh b">gatsby-transformer-remark</code>和<code class="fe me mf mg mh b">gatsby-source-fulesystem</code>插件来从给定的文件夹中获取降价文件。</p><p id="ac6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过运行安装<code class="fe me mf mg mh b">gatsby-transformer-remark</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8e5b" class="mq lc iq mh b gy mr ms l mt mu">npm install gatsby-transformer-remark</span></pre><p id="4bf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过运行来安装<code class="fe me mf mg mh b">gatsby-source-filesystem</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6bfd" class="mq lc iq mh b gy mr ms l mt mu">npm install gatsby-source-filesystem</span></pre><p id="8bde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们写道:</p><p id="b7a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">gatsby-config.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2475" class="mq lc iq mh b gy mr ms l mt mu">/**<br/> * Configure your Gatsby site with this file.<br/> *<br/> * See: https://www.gatsbyjs.com/docs/gatsby-config/<br/> */</span><span id="9237" class="mq lc iq mh b gy mv ms l mt mu">module.exports = {<br/>  /* Your site config here */<br/>  plugins: [<br/>    `gatsby-transformer-remark`,<br/>    {<br/>      resolve: `gatsby-source-filesystem`,<br/>      options: {<br/>        name: `content`,<br/>        path: `${__dirname}/src/content`,<br/>      },<br/>    },<br/>  ]<br/>}</span></pre><p id="3959" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/content/hello-world.md</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="80a7" class="mq lc iq mh b gy mr ms l mt mu">---<br/>title: Hello World<br/>date: 2020-07-10<br/>path: /hello-world<br/>---</span><span id="e645" class="mq lc iq mh b gy mv ms l mt mu">hello world</span></pre><p id="38a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">src/content</code>文件夹中获取降价文件。</p><p id="bbf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">顶部是前面的内容，我们将使用它来创建我们的页面。</p><p id="95cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们运行<code class="fe me mf mg mh b">gatsby develop</code>并转到<a class="ae kc" href="http://localhost:8000/__graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/_ _ graph QL</a>时，我们可以通过编写以下内容来查询降价文件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a168" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  allMarkdownRemark {<br/>    edges {<br/>      node {<br/>        frontmatter {<br/>          path<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre><p id="e871" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b2fc" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "data": {<br/>    "allMarkdownRemark": {<br/>      "edges": [<br/>        {<br/>          "node": {<br/>            "frontmatter": {<br/>              "path": "/hello-world"<br/>            }<br/>          }<br/>        }<br/>      ]<br/>    }<br/>  },<br/>  "extensions": {}<br/>}</span></pre><p id="2fcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从回应来看。</p><p id="4e97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们需要从Markdown文件创建页面。</p><p id="95c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><p id="bb76" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">gatsby-node.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2831" class="mq lc iq mh b gy mr ms l mt mu">const path = require(`path`)<br/>exports.createPages = async ({ actions, graphql }) =&gt; {<br/>  const { createPage } = actions<br/>  const result = await graphql(`<br/>    {<br/>      allMarkdownRemark {<br/>        edges {<br/>          node {<br/>            frontmatter {<br/>              path<br/>            }<br/>          }<br/>        }<br/>      }<br/>    }<br/>  `)<br/>  if (result.errors) {<br/>    console.error(result.errors)<br/>  }<br/>  result.data.allMarkdownRemark.edges.forEach(({ node }) =&gt; {<br/>    createPage({<br/>      path: node.frontmatter.path,<br/>      component: path.resolve(`src/templates/post.js`),<br/>    })<br/>  })<br/>}</span></pre><p id="0e5b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/templates/post.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9a1d" class="mq lc iq mh b gy mr ms l mt mu">import React from "react"<br/>import { graphql } from "gatsby"<br/>export default function Template({ data }) {<br/>  const { markdownRemark } = data<br/>  const { frontmatter, html } = markdownRemark<br/>  return (<br/>    &lt;div className="blog-post"&gt;<br/>      &lt;h1&gt;{frontmatter.title}&lt;/h1&gt;<br/>      &lt;h2&gt;{frontmatter.date}&lt;/h2&gt;<br/>      &lt;div<br/>        className="blog-post-content"<br/>        dangerouslySetInnerHTML={{ __html: html }}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/>export const pageQuery = graphql`<br/>  query($path: String!) {<br/>    markdownRemark(frontmatter: { path: { eq: $path } }) {<br/>      html<br/>      frontmatter {<br/>        date(formatString: "MMMM DD, YYYY")<br/>        path<br/>        title<br/>      }<br/>    }<br/>  }<br/>`</span></pre><p id="4264" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">gatsby-node.js</code>中，我们进行了与在GraphiQL中相同的查询。</p><p id="169b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到响应并调用<code class="fe me mf mg mh b">createPage</code>来创建带有在Markdown的前端定义的文件的<code class="fe me mf mg mh b">path</code>的页面。</p><p id="1c8b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">component</code>有模板渲染前面的事和内容。</p><p id="f767" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">post.js</code>中，我们从<code class="fe me mf mg mh b">data</code>道具中获取数据。</p><p id="66c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe me mf mg mh b">frontMatter</code>对象中获取<code class="fe me mf mg mh b">title</code>和<code class="fe me mf mg mh b">date</code>属性来获取前台事件数据并显示出来。</p><p id="8a2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后内容在<code class="fe me mf mg mh b">markdownRemark.html</code>属性中。</p><p id="16cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们转到<a class="ae kc" href="http://localhost:8000/hello-world" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/hello-world</a>时，我们看到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e143" class="mq lc iq mh b gy mr ms l mt mu">Hello World<br/>July 10, 2020<br/>hello world</span></pre><p id="13ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">已显示。</p><h1 id="fbdd" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="3496" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Gatsby静态站点中呈现Markdown的数据。</p><p id="5ed9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Roles to Existing User in MongoDB</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在MongoDB中向现有用户添加角色</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-roles-to-existing-user-in-mongodb-305551ccec86?source=collection_archive---------2-----------------------#2021-01-12">https://javascript.plainenglish.io/how-to-add-roles-to-existing-user-in-mongodb-305551ccec86?source=collection_archive---------2-----------------------#2021-01-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/edeee22bbb8ec771f37a46dc4727e1c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cQGkY0xUZJZZf_e1"/></div></div></figure><h1 id="581f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">方案</h1><p id="3809" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">假设您是一名DevOps工程师，您负责授予对数据库的访问权限，这也可以称为数据库管理员。</p><p id="557d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">然而，这是新的一年，你的公司管理层决定提升一些潜在的团队成员成为团队领导。🎉🎉🎉</p><p id="3bbf" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">众所周知:</p><blockquote class="lw"><p id="124e" class="lx ly in bd lz ma mb mc md me mf lq dk translated"><em class="mg">责任越大，权力越大。—马克·曼森</em></p></blockquote><p id="7ae5" class="pw-post-body-paragraph kt ku in kv b kw mh ky kz la mi lc ld le mj lg lh li mk lk ll lm ml lo lp lq ig bi translated">管理人员通知您更新他们的数据库权限，因为他们以前向<strong class="kv io">提供了对数据库的只读</strong>访问权限。如果你对如何为MongoDB创建一个只读角色感兴趣，请在这里阅读帖子<a class="ae mm" href="https://medium.com/javascript-in-plain-english/how-to-create-read-only-role-in-mongodb-b92efe7f1d43" rel="noopener"/>。管理层要求您授予他们对所有数据库的写访问权限，因为他们现在是团队领导。</p><p id="12d4" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">姑且称之为“<strong class="kv io"> devA </strong>”和“<strong class="kv io"> devB </strong>”。在下一节中，我们将展示如何向两个用户授予read &amp; write访问权限的分步指南。</p></div><div class="ab cl mn mo hr mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ig ih ii ij ik"><h1 id="aad0" class="jv jw in bd jx jy mu ka kb kc mv ke kf kg mw ki kj kk mx km kn ko my kq kr ks bi translated">逐步指南</h1><p id="41af" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在我们进入如何向现有用户授予额外角色的详细步骤之前。下面是这些步骤的简短版本。</p><ol class=""><li id="5b50" class="mz na in kv b kw lr la ls le nb li nc lm nd lq ne nf ng nh bi translated">列出<strong class="kv io">管理</strong>数据库中的所有用户(如果所有用户都是在管理数据库中创建的)。</li><li id="c7a4" class="mz na in kv b kw ni la nj le nk li nl lm nm lq ne nf ng nh bi translated">选择具有匹配值“<strong class="kv io"> devA </strong>”和“<strong class="kv io"> devB </strong>”的“用户”字段。</li><li id="ce33" class="mz na in kv b kw ni la nj le nk li nl lm nm lq ne nf ng nh bi translated">使用<code class="fe nn no np nq b">grantRolesToUser()</code>函数赋予devA和devB用户内置的角色- readWriteAnyDatabase。</li></ol><h1 id="d2ce" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">第一步。列出管理数据库中的所有用户</h1><figure class="ns nt nu nv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/e0e13bf993eac163f0484da8ca215c91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ul731FtfDZIpWxNnzBSX9A.png"/></div></div></figure><h1 id="a558" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">第二步。查找“用户”字段值</h1><p id="39ec" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">查看名为<strong class="kv io"> user </strong>的字段名称，并找到值，因为我们将在下一步中需要它。参考下面的例子。</p><figure class="ns nt nu nv gt jo"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h1 id="be7f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">第三步。使用grantRolesToUser函数授予读写角色</h1><p id="cd9c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">使用下面的简单命令，您将能够允许两个用户对除了<strong class="kv io">本地</strong> &amp; <strong class="kv io">配置</strong>之外的所有数据库进行读写访问。</p><pre class="ns nt nu nv gt ny nq nz oa aw ob bi"><span id="68e6" class="oc jw in nq b gy od oe l of og">use admin;<br/>db.grantRolesToUser('devA', ['readWriteAnyDatabase']);<br/>db.grantRolesToUser('devB', ['readWriteAnyDatabase']);</span></pre><p id="d825" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">但是，如果您只想对特定数据库进行读写访问。例如，您希望只授予对<strong class="kv io">客户端</strong>数据库的读写访问权限。你可以通过下面的代码来完成。</p><pre class="ns nt nu nv gt ny nq nz oa aw ob bi"><span id="dc89" class="oc jw in nq b gy od oe l of og">use admin;<br/>db.grantRolesToUser('devB', [{ role: 'readWrite', db: 'client' }]);</span></pre></div><div class="ab cl mn mo hr mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ig ih ii ij ik"><h1 id="c67d" class="jv jw in bd jx jy mu ka kb kc mv ke kf kg mw ki kj kk mx km kn ko my kq kr ks bi translated">结论</h1><p id="08b2" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">简而言之，这篇文章讨论了:</p><ul class=""><li id="7683" class="mz na in kv b kw lr la ls le nb li nc lm nd lq oh nf ng nh bi translated">如何在MongoDB中不创建新角色的情况下向现有用户添加更多角色</li><li id="61cd" class="mz na in kv b kw ni la nj le nk li nl lm nm lq oh nf ng nh bi translated">如何向现有用户添加对所有数据库的读写访问权限。</li><li id="9bcd" class="mz na in kv b kw ni la nj le nk li nl lm nm lq oh nf ng nh bi translated">如何仅向现有用户添加对单个数据库的读写访问权限。</li></ul><p id="d6b7" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">感谢您的阅读，下一篇文章再见。</p></div><div class="ab cl mn mo hr mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ig ih ii ij ik"><h1 id="b67d" class="jv jw in bd jx jy mu ka kb kc mv ke kf kg mw ki kj kk mx km kn ko my kq kr ks bi translated">参考</h1><ul class=""><li id="211a" class="mz na in kv b kw kx la lb le oi li oj lm ok lq oh nf ng nh bi translated">MongoDB<code class="fe nn no np nq b">grantRolesToUser</code>T26】手动</li><li id="f088" class="mz na in kv b kw ni la nj le nk li nl lm nm lq oh nf ng nh bi translated">MongoDB内置角色<a class="ae mm" href="https://docs.mongodb.com/manual/reference/built-in-roles/" rel="noopener ugc nofollow" target="_blank">手册</a></li></ul></div></div>    
</body>
</html>
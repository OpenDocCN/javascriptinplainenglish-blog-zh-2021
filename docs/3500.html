<html>
<head>
<title>6 Steps to Add Camera Module in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中添加相机模块的6个步骤</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-steps-to-add-camera-module-in-react-native-d0ec9d1eb38b?source=collection_archive---------12-----------------------#2021-07-14">https://javascript.plainenglish.io/6-steps-to-add-camera-module-in-react-native-d0ec9d1eb38b?source=collection_archive---------12-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1572" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如何在React本地应用程序中使用相机？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/4236c5d9d06929fb73fe60c2a5ed1968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MCMpNRxSjnGQU439"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@siloine?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yoann Siloine</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="3355" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">在后台</h2><p id="61ed" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">故事是这样开始的:我正在为我的一个客户开发一个双赢的竞赛应用程序。核心计划是给用户提供点击图片的功能。当我开始使用React Native中的相机模块时。</p><h2 id="f0d3" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">概观</h2><p id="3acb" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">在今天的故事中，我们将使用React原生相机库，因为这是React原生相机中使用最多、功能最强大的模块。此外，我将指导您完成相机模块的集成过程以及要遵循的架构。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="a180" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">入门指南</h2><p id="80ed" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">以下是我们添加摄像头模块的步骤-</p><ul class=""><li id="c2ad" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">将react-native-camera模块添加为npm包</li><li id="cccc" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">在android文件夹内的react-native的android层中添加相机权限</li><li id="9d1b" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">为摄像机创建一个单独的屏幕</li><li id="8ff5" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">将相机加载到一个单独的模块中，并处理所有权限</li><li id="3722" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">点击图片，逐个预览。</li></ul></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="f91c" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">添加摄像头模块</h2><p id="8faf" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这很简单，但有时添加一个摄像头模块也需要将其与React Native链接，这导致了不同设备的许多问题。因此，请确保您仔细遵循每一个步骤。</p><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="93f8" class="lc ld iq mw b gy na nb l nc nd">yarn add react-native-camera</span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="78da" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">添加摄像机权限</h2><p id="7116" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">一旦软件包安装完毕，在android层添加权限标准。</p><p id="b6d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">位置—Android/app/src/main/androidmanifext . XML</p><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="aa86" class="lc ld iq mw b gy na nb l nc nd">&lt;uses-permission android:name="android.permission.CAMERA" /&gt;<br/>&lt;uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" /&gt;<br/>&lt;uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /&gt;</span></pre><p id="3579" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后一部分是在构建梯度中添加维度策略。在android/app/build.gradle中，在版本名称和代码前添加以下行</p><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="d1cd" class="lc ld iq mw b gy na nb l nc nd">missingDimensionStrategy 'react-native-camera', 'general'</span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="0510" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">添加摄像头屏幕</h2><p id="d6f2" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">一旦安装了包并添加了权限，我们就可以使用相机模块了。要对其进行全面测试，您可以只为摄像机创建一个全新的屏幕，也可以在组件中添加摄像机组件。</p><p id="c2d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我用来创建UI和添加屏幕的库是—</p><ul class=""><li id="67e0" class="mh mi iq jp b jq jr ju jv jy mj kc mk kg ml kk mm mn mo mp bi translated">React Native Paper —用于设计屏幕样式</li><li id="65db" class="mh mi iq jp b jq mq ju mr jy ms kc mt kg mu kk mm mn mo mp bi translated">反应导航—用于添加屏幕</li></ul><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="b0de" class="lc ld iq mw b gy na nb l nc nd">yarn add react-native-paper <br/>// to add paper library</span><span id="6603" class="lc ld iq mw b gy ne nb l nc nd">yarn add @react-navigation/native @react-navigation/stack<br/>// to add navigation library</span><span id="87c4" class="lc ld iq mw b gy ne nb l nc nd">// also for react navigation you will be needing safe area context<br/>yarn add react-native-safe-area-context</span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="324e" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">体系结构</h2><p id="b686" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">我总是关注我们将遵循什么架构来开发任何应用程序。在今天的故事中，我们有一个名为“屏幕”的文件夹，其中包含了我们所有的各种屏幕。例如，相机模块有一个完全独立的屏幕，因此camera.js将位于屏幕内的一个文件中。</p><p id="4ea4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦屏幕添加到根目录的屏幕文件夹中，我们就可以使用导航库在导航栈中注册屏幕。在根目录下的app.js中，我们可以添加如下所示的堆栈导航屏幕。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="b088" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经注册了2个屏幕，名称如下主页和相机，就像2页关于和登录桌面应用程序。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="6134" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">添加摄像头模块</h2><p id="29fe" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">下一步是在相机屏幕上添加一个相机模块。用户界面将看起来像下面这样，我们有一个摄像头模块，占据了几乎70%的屏幕高度，其余区域将是预览图像的图像区域。</p><p id="3466" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我在相机模块下面添加了预览部分，来帮助你如何处理相机点击的图像。</p><p id="8628" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以简单地复制粘贴这段代码，将摄像头模块添加到您的系统中。这是使用相机模块的最基本版本，具有高度的可扩展性和可定制性。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="d794" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">处理摄像机权限</h2><p id="04a6" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">请注意，我们需要处理真实世界应用程序的相机权限。大多数情况下，用户确实会忘记启用或允许摄像头访问，在这种情况下，应用程序应该向用户提供适当的指示和反馈。</p><p id="09d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">处理权限也不太难，在相机模块中你得到相机状态作为键，它决定了相机当前的权限状态。它是一个在授权、就绪、未授权之间循环的枚举。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="59b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用相机模块返回的状态参数，我们可以向用户显示对话框或警告框，以提供适当的反馈。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="444b" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">使用相机模块点击和存储图像</h2><p id="8689" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">存储图像也很简单，在相机模块中我添加了一个按钮，点击并收集被点击图像的数据。一旦用户触发了捕捉按钮，单击属性。</p><p id="b267" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦图片被点击，我们可以使用美国的URI属性存储图像，并在查看预览部分呈现它们。</p><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="c80b" class="lc ld iq mw b gy na nb l nc nd">const [ images, setImages ] = useState([]);<br/>const [ loader, setLoader ] = useState(false);</span><span id="63e3" class="lc ld iq mw b gy ne nb l nc nd">async function takePicture(){<br/> setLoader(true);<br/> const options = { <br/>      base64: true, fixOrientation: true, writeExif:  true <br/> };<br/> const data = await ref.current.takePictureAsync(options);<br/> const newImages = [...images];<br/> newImages.push({ uri : data.uri } );<br/> setImages(newImages);<br/> setLoader(false)<br/>};</span></pre><p id="5912" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们首先单击图像，然后在状态中设置图像，最后我们可以简单地在预览模式中渲染所有图像。</p></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="c25e" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">最终产品</h2><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/24b4c4e2f522b31d792f36c038a388a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*atHn9Cx1uMhq2CxFf1WPAg.gif"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Final Product Demo</figcaption></figure><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="e773" class="lc ld iq mw b gy na nb l nc nd">Click to read to code - <a class="ae lb" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogsMobile/ReactNative%20%2B%20Camera" rel="noopener ugc nofollow" target="_blank"><strong class="mw ir">Code Repository</strong></a></span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="05f9" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">结论</h2><p id="0b59" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">今天的相机模块就到这里，我已经介绍了所有需要在移动应用中使用相机模块的情况。这是非常简单和容易理解的，但大多数开发人员发现这很难，因为要么是架构，要么是理解相机模块的概念。</p><p id="c7d9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请继续关注，因为在下一篇文章中，我将介绍在React Native中添加屏幕和使用导航的部分。直到，下一次，有一个美好的一天，人们。</p><pre class="km kn ko kp gt mv mw mx my aw mz bi"><span id="54b8" class="lc ld iq mw b gy na nb l nc nd">For more such stories visit our website 💻 <a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/www.ihatereading.in"><strong class="mw ir">iHateReading</strong></a></span></pre></div><div class="ab cl ma mb hu mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ij ik il im in"><h2 id="4579" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">更多阅读</h2><div class="ni nj gp gr nk nl"><a href="https://shreyvijayvargiya26.medium.com/getting-started-with-react-native-ui-library-react-native-paper-e6ba75508120" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">React Native UI库入门，React Native Paper</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">用React Native Paper开发React Native样板文件</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">shreyvijayvargiya26.medium.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz kv nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a rel="noopener  ugc nofollow" target="_blank" href="/navigation-in-react-native-4dfdd2c3ff22"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">如何在React Native中实现导航</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">使用React Navigation，React Native中唯一完美的导航库。</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nu l"><div class="oa l nw nx ny nu nz kv nl"/></div></div></a></div><div class="ni nj gp gr nk nl"><a href="https://medium.com/nerd-for-tech/flatlist-is-still-underrated-796130a8b8f2" rel="noopener follow" target="_blank"><div class="nm ab fo"><div class="nn ab no cl cj np"><h2 class="bd ir gy z fp nq fr fs nr fu fw ip bi translated">Flatlist仍然被低估了</h2><div class="ns l"><h3 class="bd b gy z fp nq fr fs nr fu fw dk translated">也许你使用Flatlist的方式是错误的，这里有一些提示和技巧</h3></div><div class="nt l"><p class="bd b dl z fp nq fr fs nr fu fw dk translated">medium.com</p></div></div><div class="nu l"><div class="ob l nw nx ny nu nz kv nl"/></div></div></a></div><p id="3185" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="oc">更多内容看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="oc">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
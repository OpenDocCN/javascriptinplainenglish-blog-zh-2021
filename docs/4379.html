<html>
<head>
<title>One of Deno’s Exclusive Features: The Web Storage API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Deno独有的特性之一:Web存储API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deno-web-storage-5fb1401b5f82?source=collection_archive---------4-----------------------#2021-09-01">https://javascript.plainenglish.io/deno-web-storage-5fb1401b5f82?source=collection_archive---------4-----------------------#2021-09-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ba04" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Node.js没有这个——如何在Deno中使用</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f55b3a496fa2af488f12c9681b6b65b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*foB5kZFxtj-nUsue6OH1rQ.jpeg"/></div></div></figure><p id="9970" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Deno有几个很酷的特性。</p><p id="6a14" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在我们已经从Node.js了解到的当中，有一些是独家的。Web存储API就是其中之一。Web存储API？“我以前听说过，”你现在可能会想。事实上，web存储API在Web上是众所周知的。有了它，我们可以使用本地存储或会话存储在浏览器中永久或临时保存值。</p><p id="c57b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我在之前<a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/deno-vs-node-js-here-are-the-most-important-differences-62b547443be1">解释的，Deno旨在提供我们从浏览器知道的窗口对象，甚至在后端。因此，Web存储API也可以在替代节点中使用。下面是我们如何使用它。</a></p><h1 id="d33a" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">本地存储</h1><p id="05d5" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">本地存储是一个永久的键值存储。对于永久，我的意思是，即使我们关闭并重新启动服务器，我们也可以访问以前保存的值。在Node.js中，我们必须使用Redis这样的数据库。</p><p id="eb41" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于<code class="fe ml mm mn mo b">localStorage</code>属于窗口对象，就像在浏览器中一样，我们可以直接访问它。不需要先导入任何东西。</p><p id="1fad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们写一个基本的例子:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="19bf" class="mt lp iq mo b gy mu mv l mw mx">localStorage.setItem("counter", "1")</span><span id="ae5d" class="mt lp iq mo b gy my mv l mw mx">console.log(localStorage.getItem("counter"))</span></pre><p id="b8f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行这段代码时，输出应该是“1”。但是等等，用Deno执行总是有点特别。要运行该文件，我们需要提供位置标志。</p><p id="f979" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在浏览器中，每个本地存储条目都链接到一个页面的域(因此存储只能由每个web应用程序访问)。但是在后端，我们没有不同的域。为了模拟这种分类，本地存储API需要一个我们提供的位置，就像在浏览器中一样。</p><p id="67f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如，我们可以使用本地主机:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="6cc0" class="mt lp iq mo b gy mu mv l mw mx">deno run --location <a class="ae ln" href="http://localhost/" rel="noopener ugc nofollow" target="_blank">http://localhost/</a> index.ts</span></pre><p id="6493" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您应该看到“1”出现在终端中。让我们重新运行代码，但先稍微修改一下，看看值是否被持久存储。因此我更改了文件，剩下的唯一一行代码是:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="813f" class="mt lp iq mo b gy mu mv l mw mx">console.log(localStorage.getItem("counter"))</span></pre><p id="fac0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">重新运行代码，就像以前一样，您应该再次看到“1”。该值被永久存储。</p><p id="b140" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了更新一个值，我们使用带有值的键的<code class="fe ml mm mn mo b">setItem</code>函数。例如:</p><pre class="kg kh ki kj gt mp mo mq mr aw ms bi"><span id="9c57" class="mt lp iq mo b gy mu mv l mw mx">localStorage.setItem("counter", "2")</span></pre><p id="c4b2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要清除本地存储，我们可以使用:<code class="fe ml mm mn mo b">localStorage.clear()</code></p><p id="a04c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从存储中删除单个键-值对:<code class="fe ml mm mn mo b">localStorage.removeItem("counter")</code></p><h1 id="3e9a" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">但是现在的会话存储呢？</h1><p id="126e" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在，让我们来看看非永久性悬挂物。我说手控盒是因为会话存储器使用完全相同的功能。只有两个区别。</p><p id="f283" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们显然使用了<code class="fe ml mm mn mo b">sessionStorage.&lt;any-function&gt;</code>而不是<code class="fe ml mm mn mo b">localStorage.&lt;any.function&gt;</code>。</p><p id="114b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其次，我们不再需要位置标志，因为我们不会永久保存任何东西。因此，只需使用以下代码运行您的代码:</p><p id="c6b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ml mm mn mo b">deno run index.ts</code></p><p id="d077" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就是这样。感谢您的阅读！</p><p id="f27e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于Deno的更多信息:</p><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/is-deno-already-dead-661ce807338a"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd ir gy z fp nh fr fs ni fu fw ip bi translated">德诺已经死了吗？</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">炒作消失的一些原因</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nl l"><div class="nm l nn no np nl nq kp nc"/></div></div></a></div><p id="0d00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nr">更多内容尽在</em><a class="ae ln" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nr">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Learning System Design #1: How Backend Architecture Scales and Evolves</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习系统设计#1:后端架构如何扩展和发展</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/learning-system-design-1-how-backend-architecture-evolves-with-scale-d60673e877cd?source=collection_archive---------7-----------------------#2021-06-27">https://javascript.plainenglish.io/learning-system-design-1-how-backend-architecture-evolves-with-scale-d60673e877cd?source=collection_archive---------7-----------------------#2021-06-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c8f8318ce1e2c4c330fe5b3b30ae550a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IHsRmvAL_cVMmoT9RLM9CQ.jpeg"/></div></div></figure><p id="da43" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">作为开发人员，我们不断地设计和创建软件系统。解决很多问题的软件。成千上万人使用的软件。</p><p id="8f6d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是软件并不是从第一天开始就变得流行并拥有大量的用户。这款软件需要一段时间才能流行起来，并发展到数百万人都可以使用。</p><p id="b723" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天，我们将看到软件从一台机器上托管的系统到跨越数百个节点托管的系统的旅程。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="cfd2" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak"> 1。打造MVP产品</strong></h1><p id="24ae" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">当我们从头开始创建一个软件系统时，我们建立一个MVP，让人们使用它并给我们反馈。在软件系统方面，我们让事情变得简单和有成本效益。我们将系统部署在单个节点上。我们使用一台机器来托管我们的应用程序和数据库。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div class="gh gi md"><img src="../Images/3647e4ecc7449571d99c68851ae2c6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*qOsYKVyF7lfoDCEpLH2zgA.png"/></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Simple application hosted on a single node</figcaption></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="0b6f" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">2.系统的垂直比例</h1><p id="a451" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">当我们系统的负载增加一点时，我们觉得有必要扩展我们的系统。</p><p id="170a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这一点上，我们可用的第一个也是最简单的解决方案是<strong class="jx io">垂直扩展</strong>我们的系统。纵向扩展意味着我们增加了特定系统的可用资源。<strong class="jx io">我们增加了应用程序可用的RAM容量和CPU内核数量</strong>。垂直扩展将暂时解决我们的问题。</p><p id="c549" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为我们可以分配给单台机器的资源数量是有限的，所以我们不能使用超出特定限制的垂直扩展。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/e48551f1d5215c23c65c6cab41238a33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEXZ1ZOpy5IEiHXoDzUwmQ.png"/></div></div></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="ab57" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">3.系统的水平缩放</h1><p id="66ac" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">在达到这个阈值时，我们必须使用系统的水平缩放。通过水平伸缩，我们的意思是说我们跨多个节点部署我们的应用程序。</p><p id="a8df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">从水平扩展开始，首先我要做的是分离我们的应用服务器和数据库服务器。我将在一台单独的机器上部署我的应用程序逻辑，并在另一台机器上托管数据库。</p><p id="f982" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以，现在我们之前托管在一台机器上的应用程序现在托管在两台不同的机器上，这两台机器都可以彼此独立地纵向扩展。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/7d5c492dc705697b104db7830e2c613f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVT6y0WgS3v1Ow9BJbMcuw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Splitting application code and the database into 2 independent systems</figcaption></figure><p id="0d9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这样做了一段时间后。我们将意识到，我们正在一次又一次地进行大量复杂且耗时的计算。如果我们能够保存那些复杂而耗时的计算结果，并在以后使用它们，那就太好了。这是一个<strong class="jx io">缓存系统</strong>的用例。</p><p id="8006" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们将在系统中引入一个缓存节点。如果我们看一下我们的系统，我们有3个节点。应用程序节点、数据库节点和最新缓存节点。</p><p id="bd76" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">所有3个节点都有资格相互独立地进行垂直缩放。</strong></p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/86e031941608ddb512a5585081ccdce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XK6WnyLedfrw3T9oHviOkQ.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Introducing Cache system to save complex and time-intensive calculations</figcaption></figure><p id="4c5a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们的应用程序越来越受欢迎，接触到越来越多的人，增加了我们服务器的流量。</p><p id="11d9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们将横向扩展我们的应用服务器。因此，以前所有的应用程序逻辑都托管在一台机器上，现在，我们增加了应用程序服务器的实例数量。</p><p id="385c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是仅仅增加应用服务器的节点数量并不能解决我们的问题。我们还必须增加缓存节点的数量和数据库节点的数量。</p><p id="3ba9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果我们在这一点上看我们的系统，我们将看到多个应用程序节点、多个缓存和多个数据库节点。<strong class="jx io">所有3个模块现在都可以相互独立地水平扩展，为我们处理负载提供了更大的灵活性。</strong></p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/691cb551032a11d51b1dd9f6052e8b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R_h71QaW2L8aK_nVH1priw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Horizontally scaling each of the modules</figcaption></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="d930" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">4.系统的地理分布</h1><p id="dcc6" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">现在，我们的应用程序越来越多，也越来越受到不同地区的关注。</p><p id="196d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设，早期我们的软件系统只在印度使用，现在它从美国和英国的观众那里获得了大量的流量。如果我们只从位于印度的服务器提供所有的流量，那么用户将面临许多延迟问题，因为请求-响应必须通过电缆跨越海洋传播很远的距离。</p><p id="cecf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此时此刻。我们可能会考虑在这些位置部署一些服务器，并通过<strong class="jx io">在DNS级别</strong>平衡负载，在这些服务器之间分配流量。DNS将查看请求的来源国家，并将其重定向到相应的服务器组。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/c97964dc5005738de1cdfd9de245d803.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SpyvD2XJElUUzNbTPr7jtw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">Geo distribution of the application</figcaption></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="82e5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果我们看一下我们的系统，我们会发现，我们之前托管在一台机器上的系统并没有跨多台机器托管，也没有分布在不同的地理位置。</p><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/03e313d7e66c71682e0720285911b7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xu_ZfuaFEcxYMkcHKfOYOw.png"/></div></div><figcaption class="mi mj gj gh gi mk ml bd b be z dk">From a simple application to a complex multi-node application</figcaption></figure><p id="dfe5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你也可以看看我在YouTube上的视频，以便更好地理解:</p><figure class="me mf mg mh gt jo"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="6e90" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mu">更多内容尽在</em><a class="ae mv" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mu">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
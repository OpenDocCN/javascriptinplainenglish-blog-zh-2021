<html>
<head>
<title>How I Manage Flat Objects In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在React中管理平面对象</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-i-manage-flat-objects-in-react-998e1ebacba4?source=collection_archive---------6-----------------------#2021-11-22">https://javascript.plainenglish.io/how-i-manage-flat-objects-in-react-998e1ebacba4?source=collection_archive---------6-----------------------#2021-11-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c30b1a88bd4327298108feb3c5b5c994.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dGA9dfsrtoUGfbYPGdrhsg.jpeg"/></div></div></figure><p id="ac7c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想分享一个我喜欢在React应用程序状态下更新平面对象时使用的设计模式。这是我发现的用一个函数更新一个对象中多个字段的好方法。</p><p id="0097" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的例子是一个React+Typescript应用程序，它使用Redux Toolkit来管理它的全局状态。我的状态有一个成员对象，它需要一个UI来允许用户更新它的属性。</p><p id="bad1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将提供下面的所有代码，并逐一检查每个部分。</p><h2 id="b5bd" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">类型</h2><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="2681" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> IMember </strong>:我们将在我的状态中更新的对象。</p><p id="d3ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">动作</strong>:这个接口在Redux Toolkit文档中提供。它允许你使你的减压器的动作有效载荷通用。</p><p id="b63f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> IGenericUpdate </strong>:这是我想出来的一个接口，允许我更新不同的平面对象。我使用Typescript keyof特性来动态更新对象键。</p><h2 id="e50d" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">还原剂</h2><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="1b87" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这是更新我的成员对象的缩减器。我在这里使用一个spread操作符来进行更新。因为我的key属性是IMember的key，所以我可以安全地将它用作动态属性键。您经常会在“如何在React.useState()中更新对象”教程中找到这种设计模式。第3行是我的两个泛型接口被利用的地方。</p><h2 id="ebce" class="kw kx iq bd ky kz la dn lb lc ld dp le kj lf lg lh kn li lj lk kr ll lm ln lo bi translated">JSX</h2><figure class="lp lq lr ls gt jr"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="1f6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">每个输入都有一个匹配IMember对象属性的名称值。我可以从onChange事件中提取名称，并使用类型断言，以便我的reducer接受它。我可以在这里使用类型断言，因为我的表单不是动态的。</p><p id="24d4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这种技术非常适合简单类型的平面对象。我发现它特别有用，因为我的组件中只需要一个函数来更新任何字段。在我开始使用这种技术之前，我的组件中的每个输入字段都有onChange函数。</p><p id="b45b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lv">更多内容请看</em><a class="ae lw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lv">plain English . io</em></a><em class="lv">。在这里注册我们的</em> <a class="ae lw" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lv">免费周报</em> </a> <em class="lv">。</em></p></div></div>    
</body>
</html>
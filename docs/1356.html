<html>
<head>
<title>How to Avoid Object Mutation in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•é¿å…JavaScriptä¸­çš„å¯¹è±¡çªå˜</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/javascript-how-to-avoid-object-mutation-7cd733913a9f?source=collection_archive---------3-----------------------#2021-03-22">https://javascript.plainenglish.io/javascript-how-to-avoid-object-mutation-7cd733913a9f?source=collection_archive---------3-----------------------#2021-03-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c3b0" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">é¿å…JavaScriptä¸­å¯¹è±¡å˜å¼‚çš„ä¸‰ç§å¿«é€Ÿæ–¹æ³•&amp;å…è´¹çš„ä¹”æ©Â·æ–¯å›¾å°”ç‰¹gif</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b7870491c318580b6764c7f7deb3e0fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0xkxN1CWjQp4RlB1"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@possessedphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Possessed Photography</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b02e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘æœ€è¿‘å†™äº†JavaScriptä¸­çš„<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/javascript-mutable-vs-immutable-1efb662d78c8">å¯å˜æ•°æ®å’Œ</a>ä¸å¯å˜æ•°æ®ã€‚æˆ‘ç”¨æ¥å±•ç¤ºå¯¹è±¡å¯å˜æ€§çš„ä¾‹å­æ˜¯è¿™æ ·çš„:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="9f99" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>}</span><span id="16ff" class="lu lv in lq b gy ma lx l ly lz">let avenger = character;</span><span id="8c7c" class="lu lv in lq b gy ma lx l ly lz">character.lastName = 'Marvel';</span><span id="e3f0" class="lu lv in lq b gy ma lx l ly lz">console.log(avenger.lastName);</span></pre><p id="001b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">æˆ‘è®©è¯»è€…çŒœçŒœæ§åˆ¶å°ä¸Šæ‰“å°äº†ä»€ä¹ˆ(æ˜¯<code class="fe mb mc md lq b">// Marvel</code> btw ),è¿™è®©æˆ‘æƒ³åˆ°äº†é¿å…å¯¹è±¡çªå˜çš„æ–¹æ³•ã€‚</p><p id="40e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™é‡Œæœ‰ä¸€äº›æ–¹æ³•å¯ä»¥é¿å…æˆ‘ä»¬æœ€åˆçš„<code class="fe mb mc md lq b">character</code>å¯¹è±¡å‘ç”Ÿå˜å¼‚:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="me mf l"/></div></figure><h2 id="ff3c" class="lu lv in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">1.åˆ›å»ºæ–°å¯¹è±¡</h2><p id="2d84" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">è¿™ä¼¼ä¹æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼Œä½†ä½ æ€»æ˜¯å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼è¿™å¯èƒ½éœ€è¦å¤šå‡ è¡Œä»£ç ï¼Œä½†æ˜¯è¿™æ ·ï¼Œå½“ä½ éœ€è¦æ”¹å˜ä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”åœ¨å†…å­˜ä¸­æœ‰å¤šä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä½ å°±å¯ä»¥é¿å…éº»çƒ¦ã€‚å¯¹äºæˆ‘ä»¬çš„å¯¹è±¡ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†å­˜å‚¨åœ¨<code class="fe mb mc md lq b">character.firstName</code>çš„å€¼ç”¨äº<code class="fe mb mc md lq b">avenger</code>æŒ‡å‘çš„æ–°å¯¹è±¡ã€‚</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1f91" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="eec7" class="lu lv in lq b gy ma lx l ly lz">let avenger = {<br/>    firstName: character.firstName,<br/>    lastName: 'Marvel'<br/>};</span><span id="df8b" class="lu lv in lq b gy ma lx l ly lz">character.firstName === avenger.firstName;</span><span id="b87e" class="lu lv in lq b gy ma lx l ly lz">// true</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nc mf l"/></div></figure><h2 id="4241" class="lu lv in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">2.<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign" rel="noopener ugc nofollow" target="_blank"> Object.assign( ) </a></h2><p id="29e2" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">éšç€<a class="ae ks" href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_%E2%80%93_ECMAScript_2015" rel="noopener ugc nofollow" target="_blank"> ES6 </a>çš„å¼•å…¥ï¼ŒJSç»™äº†æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹æ³•å°†æ‰€æœ‰å±æ€§ä»ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„èƒ½åŠ›ã€‚<strong class="kv io">å¦‚æœä½¿ç”¨ä¸å½“ï¼Œè¯¥æ–¹æ³•ä¼šä½¿å¯¹è±¡å˜å¼‚ã€‚æˆ‘æƒ³è¯´æ¸…æ¥šè¿™ä¸€ç‚¹ã€‚é€šè¿‡åœ¨ç›®æ ‡å‚æ•°ä¸­æä¾›ä¸€ä¸ªç©ºå¯¹è±¡ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°é¿å…æ”¹å˜å¯¹è±¡ã€‚<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#description" rel="noopener ugc nofollow" target="_blank"> MDN </a>æ€»æ˜¯æ”¯æŒæˆ‘ä»¬åº”å¯¹æ•…éšœ:</strong></p><blockquote class="nd ne nf"><p id="0279" class="kt ku ng kv b kw kx jo ky kz la jr lb nh ld le lf ni lh li lj nj ll lm ln lo ig bi translated">å¦‚æœç›®æ ‡å¯¹è±¡ä¸­çš„å±æ€§å…·æœ‰ç›¸åŒçš„<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" rel="noopener ugc nofollow" target="_blank">é”®</a>ï¼Œåˆ™å®ƒä»¬ä¼šè¢«æºä¸­çš„å±æ€§è¦†ç›–ã€‚è¾ƒæ–°çš„æºçš„å±æ€§ä¼šè¦†ç›–è¾ƒæ—©çš„å±æ€§ã€‚</p></blockquote><p id="eaad" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸ºäº†é¿å…åˆ†é…ç»™<code class="fe mb mc md lq b">character</code>å˜é‡çš„å¯¹è±¡å‘ç”Ÿçªå˜ï¼Œä½¿ç”¨<code class="fe mb mc md lq b">Object.assign()</code>æ–¹æ³•ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="792f" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="04ed" class="lu lv in lq b gy ma lx l ly lz">let avenger = Object.assign({}, character);<br/>avenger.lastName = 'Marvel';</span></pre><p id="ed74" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">ä¸Šé¢çš„ä»£ç å°†åˆ›å»ºä¸€ä¸ªåˆ†é…ç»™<code class="fe mb mc md lq b">avenger</code>å˜é‡çš„æ–°å¯¹è±¡ï¼Œç„¶åæˆ‘ä»¬å°†æŠŠ<code class="fe mb mc md lq b">lastName</code>å±æ€§æ›´æ”¹ä¸ºå­—ç¬¦ä¸²<code class="fe mb mc md lq b">â€˜Marvelâ€™</code>ï¼Œä»¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œè€Œä¸æ”¹å˜åˆ†é…ç»™<code class="fe mb mc md lq b">character</code>å˜é‡çš„åŸå§‹å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥é€šè¿‡æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼Œåœ¨<code class="fe mb mc md lq b">Object.assign()</code>æ–¹æ³•ä¸­ä¸€ä¸¾è·å¾—æˆ‘ä»¬æƒ³è¦çš„ç»“æœ:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="6627" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="e3d0" class="lu lv in lq b gy ma lx l ly lz">let avenger = Object.assign({}, character, { lastName: 'Marvel' });</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nk mf l"/></div></figure><p id="f970" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ng">è¾¹æ³¨:æˆ‘æƒ³å†è¿­ä»£ä¸€æ¬¡ä½¿ç”¨</em> <code class="fe mb mc md lq b">Object.assign()</code>æ—¶ï¼Œä¼ å…¥ç©ºå¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°(ç›®æ ‡å‚æ•°)çš„é‡è¦æ€§ã€‚<em class="ng">ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œè¿”å›ç›®æ ‡å¯¹è±¡ã€‚æ‰€ä»¥ï¼Œå¦‚æœä½ ç»™ä¸€ä¸ªå¯¹è±¡åˆ†é…äº†å±æ€§ï¼Œä½ å°±æœ‰å¯èƒ½æ”¹å˜è¿™ä¸ªå¯¹è±¡ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­æ¥äº†è§£è¿™ä¸€ç‚¹:</em></p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="39ea" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="6a49" class="lu lv in lq b gy ma lx l ly lz">let avenger = Object.assign({}, character, { lastName: 'Marvel' });</span><span id="a4ab" class="lu lv in lq b gy ma lx l ly lz">let newAvenger = Object.assign(avenger, { firstName: 'Ms.; });</span><span id="009c" class="lu lv in lq b gy ma lx l ly lz">console.log(avenger);<br/>console.log(newAvenger);</span><span id="3a14" class="lu lv in lq b gy ma lx l ly lz">// { firstName: 'Ms.',<br/>     lastName: 'Marvel<br/>   }</span><span id="5b74" class="lu lv in lq b gy ma lx l ly lz">// { firstName: 'Ms.',<br/>     lastName: 'Marvel'<br/>   }</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nl mf l"/></div></figure><p id="dcaa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ng">ä»ä¹”æ©çš„å›°æƒ‘ä¸­å¯ä»¥çœ‹å‡ºï¼Œæˆ‘ä»¬å¯¹åˆ†é…ç»™</em> <code class="fe mb mc md lq b">avenger</code> <em class="ng">å˜é‡çš„ç›®æ ‡å¯¹è±¡è¿›è¡Œäº†å˜å¼‚ã€‚æˆ‘ä»¬ç°åœ¨æœ‰ä¸¤ä¸ªå˜é‡(</em><code class="fe mb mc md lq b">avenger</code><em class="ng">&amp;</em><code class="fe mb mc md lq b">newAvenger</code><em class="ng">)åˆ†é…ç»™å†…å­˜ä¸­çš„è¿™ä¸ªå¯¹è±¡ï¼Œè¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ä»»ä½•ä¸€ä¸ªå˜é‡æ¥åˆ†é…æ–°çš„å±æ€§æˆ–å±æ€§å€¼æ—¶ï¼Œæˆ‘ä»¬éƒ½æœ‰å¯èƒ½åœ¨æ²¡æœ‰æ„è¯†åˆ°çš„æƒ…å†µä¸‹æ”¹å˜è¿™ä¸ªå¯¹è±¡ã€‚</em></p><h2 id="c3dc" class="lu lv in bd mg mh mi dn mj mk ml dp mm lc mn mo mp lg mq mr ms lk mt mu mv mw bi translated">3.<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals" rel="noopener ugc nofollow" target="_blank">ä¼ æ’­è¯­æ³•</a></h2><p id="999f" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">æœ€åï¼Œä¸ºäº†ä¸€äº›è¯­æ³•ä¸Šçš„å¥½å¤„ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†spreadæ“ä½œç¬¦ã€‚ä½ çœ‹åˆ°çš„æ˜¯åŒæ ·çš„æƒ³æ³•ï¼Œä½†æˆ‘è§‰å¾—æ›´æ‚¦ç›®ä¸€äº›ã€‚</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="382c" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="dec9" class="lu lv in lq b gy ma lx l ly lz">let avenger = { ...character };<br/>avenger.lastName = 'Marvel';</span></pre><p id="facc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">è¿™æ¯”å‰é¢çš„æ–¹æ³•è¦ç®€å•å¾—å¤šï¼Œå¹¶ä¸”è¾¾åˆ°äº†ç›¸åŒçš„æ•ˆæœï¼ä½†æ˜¯ï¼Œ(<em class="ng">æˆ‘æ‰“èµŒä½ å·²ç»é¢„è§åˆ°äº†è¿™ä¸€ç‚¹</em>)æˆ‘ä»¬å¯ä»¥åƒè¿™æ ·ä½¿ç”¨spreadè¿ç®—ç¬¦æ¥è·å¾—ç›¸åŒçš„ç»“æœ:</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="2a23" class="lu lv in lq b gy lw lx l ly lz">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="335f" class="lu lv in lq b gy ma lx l ly lz">let avenger = { ...character, lastName: 'Marvel' };</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nm mf l"/></div></figure></div><div class="ab cl nn no hr np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ig ih ii ij ik"><h1 id="03da" class="nu lv in bd mg nv nw nx mj ny nz oa mm jt ob ju mp jw oc jx ms jz od ka mv oe bi translated">ç»“è®º</h1><p id="ce48" class="pw-post-body-paragraph kt ku in kv b kw mx jo ky kz my jr lb lc mz le lf lg na li lj lk nb lm ln lo ig bi translated">æ˜“å˜çš„å¯¹è±¡ï¼Œå’Œçªå˜ï¼Œä¸å¿…å®³æ€•ã€‚è¿™å¯èƒ½ä¼šå˜å¾—æ£˜æ‰‹ï¼Œä½†æ€»è€Œè¨€ä¹‹ï¼Œæœ‰è®¸å¤šä¸åŒçš„æ–¹æ³•æ¥é¿å…å˜å¼‚å¯¹è±¡ã€‚æˆ‘å¸Œæœ›è¿™æ˜¯æœ‰å¸®åŠ©çš„ï¼Œå¦‚æœä½ æƒ³åˆ°ä»»ä½•å…¶ä»–æ–¹æ³•æ¥é¿å…çªå˜ï¼Œè¯·å‘Šè¯‰æˆ‘ã€‚</p><p id="d39c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">å¿«ä¹ç¼–ç ğŸ¤“</p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a Local API with JSON Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JSON Server构建本地API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-local-api-with-json-server-3d1547d81999?source=collection_archive---------11-----------------------#2021-03-22">https://javascript.plainenglish.io/building-a-local-api-with-json-server-3d1547d81999?source=collection_archive---------11-----------------------#2021-03-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="eeac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在做一个小的React项目时，我做这个项目的唯一目的是测试我新学到的钩子知识，我考虑使用Rails作为我项目的后端。我也有尝试新事物的愿望，在四处寻找最适合我的项目目的的数据库后，我遇到了JSON Server。这是一个理想的适合。</p><h2 id="57dc" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">什么是JSON服务器，我为什么要使用它？</h2><p id="7793" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">JSON Server是一个节点模块，它以JavaScript对象的形式为您创建完整的模拟REST API。当你在做一个演示，还没有一个明确的项目方向，或者只是想要一个快速的后端让你处理一些数据时，这是非常方便的。您只需要一个JSON文件来存放种子数据，就可以开始了！</p><h2 id="dd8b" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated"><strong class="ak">安装</strong></h2><p id="38d4" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">为了在您的机器上安装JSON服务器(假设您已经安装了NPM)，请在您的终端中输入以下内容:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="03f4" class="ki kj in ll b gy lp lq l lr ls">npm install -g json-server</span></pre><p id="d87a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我建议通过检查模块的版本来确认安装:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="00d4" class="ki kj in ll b gy lp lq l lr ls">json-server -v</span></pre><p id="921d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，您应该在终端输出中看到版本(我的当前版本是0.16.3)。如果您想查看更多选项或获得帮助，也可以运行以下命令:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="0a2e" class="ki kj in ll b gy lp lq l lr ls">json-server -help</span></pre><h2 id="22ad" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated"><strong class="ak">使用JSON服务器</strong></h2><p id="e1b2" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">现在服务器已经安装好了，我们可以继续在应用程序中使用它了。此时，我已经设置好了我的应用程序(为此我使用了<em class="lt">create-react-app</em>generator ),并准备好继续使用服务器。接下来，在我的应用程序的根目录中，我运行以下命令来打开我的新db文件:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="b4c5" class="ki kj in ll b gy lp lq l lr ls">nano db.json</span></pre><p id="52cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您现在应该看到一个空白文件，它将存储您的JSON数据。创建一个简单的JSON对象，例如:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="07a5" class="ki kj in ll b gy lp lq l lr ls">{</span><span id="99e7" class="ki kj in ll b gy lu lq l lr ls"> "items": [</span><span id="d82e" class="ki kj in ll b gy lu lq l lr ls">  {</span><span id="8561" class="ki kj in ll b gy lu lq l lr ls">   "description": "candle",</span><span id="e43f" class="ki kj in ll b gy lu lq l lr ls">   "id": 1</span><span id="667f" class="ki kj in ll b gy lu lq l lr ls">  },</span><span id="d550" class="ki kj in ll b gy lu lq l lr ls">  {</span><span id="b0b5" class="ki kj in ll b gy lu lq l lr ls">   "description": "book",</span><span id="b53a" class="ki kj in ll b gy lu lq l lr ls">   "id": 2</span><span id="7ea5" class="ki kj in ll b gy lu lq l lr ls">  }</span><span id="4af4" class="ki kj in ll b gy lu lq l lr ls"> ]</span><span id="eef3" class="ki kj in ll b gy lu lq l lr ls">}</span></pre><p id="f063" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这里，我们创建了一个对象，它的键为“items ”,值数组的键为“description ”, id为。现在保存并关闭文件。要从命令行运行此服务器，并且不让它干扰create-react-app(或任何其他)服务器，您需要指定配置并将其作为脚本添加到您的package.json中。Open package.json:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="dbf7" class="ki kj in ll b gy lp lq l lr ls">nano package.json</span></pre><p id="a66e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后在“脚本”对象中添加以下内容作为第一行:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="4da5" class="ki kj in ll b gy lp lq l lr ls">"api": "json-server db.json -p 5555",</span></pre><p id="3a32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">正如您在上面看到的，我将端口指定为5555，这样它就可以与3000(来自create-react-app)同时运行，而不会有任何冲突。保存并关闭文件，打开一个<strong class="jm io">新的终端窗口/标签</strong>。在这里，您需要输入以下内容来启动您的API服务器:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="54d7" class="ki kj in ll b gy lp lq l lr ls">npm run api</span></pre><p id="3102" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您现在应该得到一个确认db.json已加载的输出，以及类似如下的内容:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="1bf6" class="ki kj in ll b gy lp lq l lr ls">  Resources<br/>  http://localhost:5555/items<br/><br/>  Home<br/>  http://localhost:5555</span></pre><p id="9af0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在使用数据库时，保持该服务器运行。您现在可以在浏览器中打开并查看您的API了！干得好！</p><h2 id="064a" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated"><strong class="ak">编辑您的数据库</strong></h2><p id="d40e" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">除了简单地获取和显示数据，您还可以直接从命令行使用JSON Server创建、更新和删除数据。例如，要发布新项目，请尝试以下操作:</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="ed07" class="ki kj in ll b gy lp lq l lr ls">curl -d '{"description":"bag"}' -H 'Content-Type: application/json' -X POST <a class="ae lv" href="http://localhost:3333/list" rel="noopener ugc nofollow" target="_blank">http://localhost:5555/</a>items</span></pre><p id="8e8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您将看到您的数据库已经更新，现在包含您的新项目，也有一个id键。</p><h2 id="f05a" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">结论</h2><p id="eab9" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">您可以使用JSON Server做得更好(例如，定义自定义路线)，我希望这篇文章有助于解释入门所需的基础知识。从中获得乐趣，并确保仔细检查您的工作，以防止不必要的更改被保存到您的数据库中！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a Portfolio with Airtable API, React, Next.js &amp; Tailwind CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Airtable API、React、Next.js和Tailwind CSS构建一个投资组合</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-simple-portfolio-with-airtable-api-react-next-js-tailwind-css-7a24fcf3b5e6?source=collection_archive---------5-----------------------#2021-04-04">https://javascript.plainenglish.io/building-a-simple-portfolio-with-airtable-api-react-next-js-tailwind-css-7a24fcf3b5e6?source=collection_archive---------5-----------------------#2021-04-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f894" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">几周前，我开始探索<a class="ae ki" href="https://jamstack.org/" rel="noopener ugc nofollow" target="_blank"> JAM Stack </a> (JavaScript、API和标记)以及Airtables API。随后，这个迷你项目的灵感来自于<a class="ae ki" href="https://twitter.com/jamesqquick" rel="noopener ugc nofollow" target="_blank"> James Q Quicks </a>教程。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/5a2b7b1edaab70e0a13fa944e004b2f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oyRc1zuf4Fqja9P6eIOrcA.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Preview</figcaption></figure><p id="b5bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这仍然是一个正在进行的项目，随着我了解的越来越多，我会不断地添加更多的功能。</p><p id="a9ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">部署在Vercel上的演示:<a class="ae ki" href="https://airtable-react-nextjs-tailwindcss-portfolio-trahulsam1997.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://air table-react-nextjs-tailwindcss-portfolio-trahulsam 1997 . Vercel . app/</a></p><p id="0084" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想跳过教程，你可以直接从GitHub克隆:<a class="ae ki" href="https://github.com/TRahulSam1997/airtable-react-nextjs-tailwindcss-portfolio" rel="noopener ugc nofollow" target="_blank">https://GitHub . com/trahulsam 1997/air table-react-nextjs-tailwindcss-portfolio</a></p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="la lb l"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Demo</figcaption></figure><h2 id="aba3" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">步骤1:设置Next.js项目</h2><p id="179f" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">确保您具备Next.js项目的所有先决条件。</p><div class="ma mb gp gr mc md"><a href="https://nextjs.org/docs" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd io gy z fp mi fr fs mj fu fw im bi translated">入门| Next.js</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">欢迎使用Next.js文档！如果您不熟悉Next.js，我们建议您从学习课程开始。的…</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">nextjs.org</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr kt md"/></div></div></a></div><p id="4159" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">cd</code>进入你的工作目录并运行<code class="fe ms mt mu mv b">npx create-next-app [app-name]</code></p><p id="91e6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">与<code class="fe ms mt mu mv b">create-react-app</code>类似，<code class="fe ms mt mu mv b">create-next-app</code>会为你引导项目。</p><p id="d489" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">cd [app-name]</code>然后运行<code class="fe ms mt mu mv b">npm run dev</code>前往<a class="ae ki" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"/></p><p id="734e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你会看到这个:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mw"><img src="../Images/bcf26140644834149fe192be0824053c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JIfI9MsDc2lRQar32PcFGg.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Browser</figcaption></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/fa4093eded7b7e0dd5c01d2bc643e561.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/format:webp/1*jFpmRuiOlvLRQyog0im49w.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Terminal</figcaption></figure><h2 id="44c2" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">步骤2:用Tailwind CSS配置Next.js</h2><p id="6295" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">我不可能做得比詹姆斯更好，所以我推荐你看他的视频。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="my lb l"/></div></figure><p id="2043" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<a class="ae ki" href="https://tailwindcss.com/docs/guides/nextjs" rel="noopener ugc nofollow" target="_blank">简单的</a>中，</p><p id="07b9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您的项目目录中运行<code class="fe ms mt mu mv b">npm install -D tailwindcss@latest postcss@latest autoprefixer@latest</code>。</p><p id="1984" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建您的配置文件:</p><p id="796d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">npx tailwindcss init -p</code></p><p id="849d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确保<strong class="jm io"> tailwind.config.js </strong>和<strong class="jm io"> postcss.config.js </strong>文件在你的根目录下。</p><p id="d6e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">打开<code class="fe ms mt mu mv b">./styles/index.css</code>并设置顺风指令。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/d2ecda32712754931e7bc7c1e5fe1ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*45TiaZRmDoOT77Q9BjZX2g.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Base, components, and utilities styles.</figcaption></figure><p id="3196" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将<code class="fe ms mt mu mv b">../styles/index.css</code>导入<code class="fe ms mt mu mv b">_app.js</code></p><p id="498a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">我给一些渲染的元素添加了一些顺风CSS </em> <a class="ae ki" href="https://tailwindcomponents.com/component/developer-portfolio" rel="noopener ugc nofollow" target="_blank"> <em class="kz">模板代码</em> </a> <em class="kz">。我将在第4步中介绍这一点。</em></p><h2 id="6eaa" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">步骤3:用Airtable API配置Next.js</h2><p id="1f8c" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">Airtable API为Node.js提供了一个优秀的<a class="ae ki" href="https://www.npmjs.com/package/airtable" rel="noopener ugc nofollow" target="_blank"> NPM包</a>，使得使用Airtable库进行CRUD操作变得更加容易。</p><p id="b007" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">cd</code>进入根文件夹，运行<code class="fe ms mt mu mv b">npm i airtable</code>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi na"><img src="../Images/f7b9b5e3fa5e62899e818e8c79d22815.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*F13kyMIvWRLurem3RGzJsg.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Make sure it installs without errors.</figcaption></figure><p id="8135" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们设置我们的<a class="ae ki" href="https://support.airtable.com/hc/en-us/articles/202576419-Introduction-to-Airtable-bases" rel="noopener ugc nofollow" target="_blank">气垫底座</a>。</p><p id="74a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您还没有帐户，请创建一个免费的Airtable帐户。</p><p id="81ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建<a class="ae ki" href="https://support.airtable.com/hc/en-us/articles/202576419-Introduction-to-Airtable-bases" rel="noopener ugc nofollow" target="_blank">新基地</a>。</p><p id="1693" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个基础上，定义一个新的表并创建3个列，名称为<strong class="jm io">标题</strong>(单行测试)<strong class="jm io">描述</strong>(单行测试)&amp; <strong class="jm io">图像</strong> (URL)。您可以随意命名这些列，但是请记住，您必须相应地更改应用程序中的代码。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/72afc24e0120b0043631704e3cc547b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3F-zPDzmvyJ_-bkODE3Ww.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">The Base I used for my demo populated with some random quotes from some of my favourite authors.</figcaption></figure><p id="8270" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">出于RESTful API的目的，您需要获得Airtable API键和Airtable基本ID。</p><p id="5ac7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">转到官方的<a class="ae ki" href="https://airtable.com/api" rel="noopener ugc nofollow" target="_blank"> Airtable API页面</a>，选择您创建的工作区并按照说明进行操作。这很简单。</p><p id="c45b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有了密钥后，在中设置配置。环境文件。这仅适用于您的本地系统。如果您在Vercel或Netlify上部署应用程序，您可以设置。生产环境中的env变量。</p><p id="4b14" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">cd [app-name]</code>和<code class="fe ms mt mu mv b">touch .env</code></p><p id="6dd4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">填充。环境文件:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/6b07ae6dfe19206ebd791ecdc25d5ab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1202/format:webp/1*L4ofkYjiPV3QF4MRDxbpyw.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">.env file configs</figcaption></figure><p id="b22e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确保你想在浏览器上看到的文本有前缀<strong class="jm io"> NEXT_PUBLIC_ </strong>，因为Next.js将默认<a class="ae ki" href="https://nextjs.org/docs/basic-features/environment-variables" rel="noopener ugc nofollow" target="_blank">向公众公开这些变量。</a></p><p id="ef01" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在所有这些都配置好之后。</p><p id="ed7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">cd pages/api</code> <code class="fe ms mt mu mv b">touch utils/airtable.js</code></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/7c52f9e0b5db727cc55e64e8b46310ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*okTrxVBrTO_1itZ7WqWLAw.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">File structure.</figcaption></figure><p id="6c88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">文件<code class="fe ms mt mu mv b">airtable.js</code>将配置Airtable客户端，并<strong class="jm io">缩小</strong>我们从请求中获得的一些数据。</p><p id="bcd2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将以下代码添加到<code class="fe ms mt mu mv b">airtable.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="18bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个文件中，我们通过一个引用在Airtable基表之间创建了一个连接。当发出请求时，Airtable会发送大量多余的数据。因此，我们可以缩小(第6–14行)数据，只获取必要的字段。</p><p id="b99f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在API目录中添加<code class="fe ms mt mu mv b">getData.js</code>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/84ddcf4e97e01f996dd23b3e38502520.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/format:webp/1*1W1enipFtqYYuhCUg2IuoQ.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">File structure.</figcaption></figure><p id="2fb7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">顾名思义，这个文件将允许我们使用我们在<code class="fe ms mt mu mv b">airtable.js</code>上创建的客户机向Airtable服务器发出请求，并获得响应。</p><p id="ac19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将以下代码添加到<code class="fe ms mt mu mv b">getData.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="dd72" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个回调函数将允许我们选择一个特定的表，并获得它的第一页作为响应(第5行)。然后使用我们创建和导入的函数缩小这些信息(第6行)。</p><p id="c69b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦您运行您的服务器并转到<a class="ae ki" href="http://localhost:3000/api/getData" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/API/get data</a>，假设您已经填充了该表，您将在浏览器上看到响应。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi mw"><img src="../Images/9bcb20cff434145b577ff33c1dc267fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6oQhahVIuOjYP9cZuGPZ7A.png"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Response from Airtable.</figcaption></figure><p id="d3df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">再次推荐看詹姆斯对这部分做的视频。尽管这与我所做的有点不同，但这是同一个概念，他解释得很清楚，也很全面:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="my lb l"/></div></figure><h2 id="1008" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">步骤4:创建数据上下文</h2><p id="f364" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">React <a class="ae ki" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank"> Context </a>是一个简洁的接口，允许通过组件树传递“全局”数据，而不必在每一层都将它们作为道具传递。由于我们没有在这个应用程序中进行所有的CRUD操作，React上下文可能不是必需的，但至少在我看来，让我们的全局数据处于一个集中的状态会使它更加整洁、结构化和可扩展。</p><p id="07f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在项目根目录下创建一个目录<code class="fe ms mt mu mv b">contexts</code>，并在其中创建<code class="fe ms mt mu mv b">dataContext.js</code>。</p><p id="0cac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将以下代码添加到<code class="fe ms mt mu mv b">dataContexts.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="1395" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该功能允许我们的数据处于集中状态，以供不同的组件访问。</p><p id="1a59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们已经创建了<code class="fe ms mt mu mv b">DataItemsContext()</code>和<code class="fe ms mt mu mv b">DataItemsProvider()</code>，它们将我们的数据暴露给<code class="fe ms mt mu mv b">index.js</code>(步骤5)中的主<code class="fe ms mt mu mv b">Home()</code>函数，并分别提供我们从<code class="fe ms mt mu mv b">fetch()</code>调用中获得的所有值。</p><p id="16e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">DataItemsContext()</code>将接受一个析构的<code class="fe ms mt mu mv b">{children}</code>属性，但是我们也使用状态<code class="fe ms mt mu mv b">useState([])</code>设置了一个初始值。它返回属性<code class="fe ms mt mu mv b">dataItems</code>和函数<code class="fe ms mt mu mv b">setDataItems</code>和<code class="fe ms mt mu mv b">refreshDataItems</code>。</p><h2 id="cf4f" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">第五步:组件</h2><p id="5622" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">创建一个<code class="fe ms mt mu mv b">components</code>目录。添加<code class="fe ms mt mu mv b">DataItem.js</code>和<code class="fe ms mt mu mv b">Navbar.js</code>。</p><p id="cdcb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将以下代码添加到<code class="fe ms mt mu mv b">Navbar.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="88d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是不言自明的。这是一个添加了公共<code class="fe ms mt mu mv b">.env</code>变量的Navbar样板代码。</p><p id="6d99" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将以下代码添加到<code class="fe ms mt mu mv b">DataItem.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="6768" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该组件将在使用时接收通过<code class="fe ms mt mu mv b">index.js</code> <code class="fe ms mt mu mv b">Home</code>函数传递的<code class="fe ms mt mu mv b">dataItem</code>。</p><h2 id="bdfd" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">第六步:最终合并</h2><p id="5fc5" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">由于我们创建了上下文，现在我们可以通过在<code class="fe ms mt mu mv b">index.js</code>中使用它来在我们的应用程序中使用它。</p><p id="8671" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是首先，将下面的代码添加到<code class="fe ms mt mu mv b">_app.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="8374" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们已经用<code class="fe ms mt mu mv b">&lt;DataItemsProvider&gt;</code>包装了我们的整个应用程序，使其可访问。</p><p id="5036" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您还会注意到我使用Tailwind类完成的一小段样式(第8行)。</p><p id="b1c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后一步是将以下代码添加到<code class="fe ms mt mu mv b">index.js</code>:</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="nd lb l"/></div></figure><p id="425b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里发生了很多事情，所以让我来分解一下:</p><p id="2d1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于上一步，我们的<code class="fe ms mt mu mv b">index.js</code>将可以访问<code class="fe ms mt mu mv b">DataItemsContext</code>。</p><p id="30f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们已经从react导入了<code class="fe ms mt mu mv b"><a class="ae ki" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank">useEffect</a></code>和<code class="fe ms mt mu mv b"><a class="ae ki" href="https://reactjs.org/docs/hooks-reference.html#usecontext" rel="noopener ugc nofollow" target="_blank">useContext</a></code>钩子，这允许我们分别在内存中使用<code class="fe ms mt mu mv b">initialDataItems</code>和<code class="fe ms mt mu mv b">setDataItems()</code>属性。</p><p id="7b73" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用了<a class="ae ki" href="https://nextjs.org/docs/basic-features/data-fetching#getserversideprops-server-side-rendering" rel="noopener ugc nofollow" target="_blank"> getServerSideProps() </a>钩子来获取数据。正如Next.js文档所述:</p><blockquote class="ne nf ng"><p id="1d2b" class="jk jl kz jm b jn jo jp jq jr js jt ju nh jw jx jy ni ka kb kc nj ke kf kg kh ig bi translated">如果您从页面中导出一个名为<code class="fe ms mt mu mv b">getServerSideProps</code>的<code class="fe ms mt mu mv b">async</code>函数，Next.js将使用<code class="fe ms mt mu mv b">getServerSideProps</code>返回的数据在每次请求时预呈现该页面。</p></blockquote><p id="bc96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以我们的函数将把<code class="fe ms mt mu mv b">initialDataItems</code>返回到主<code class="fe ms mt mu mv b">Home</code>函数中。注意我用的是从<code class="fe ms mt mu mv b">airtable.js</code>导入的<code class="fe ms mt mu mv b">table</code>和<code class="fe ms mt mu mv b">minifyRecords()</code>。</p><p id="789f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe ms mt mu mv b">DataItem</code>和<code class="fe ms mt mu mv b">Navbar</code>是从组件导入的。</p><p id="c9ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">剩下的代码是返回带有适当数据和<a class="ae ki" href="https://tailwindcomponents.com/component/developer-portfolio" rel="noopener ugc nofollow" target="_blank"> Tailwind CSS </a>样式的页面。</p><h2 id="1b7f" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">步骤7:环境变量和部署</h2><p id="3f6c" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">确保所有的。填充您在<strong class="jm io">步骤2 </strong>中设置的环境变量。</p><p id="abb8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后<code class="fe ms mt mu mv b">cd [app-name]</code>并运行<code class="fe ms mt mu mv b">npm run dev</code>并前往<a class="ae ki" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>或者您可以运行<code class="fe ms mt mu mv b">npm run build</code>进行部署。</p><p id="74c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在<a class="ae ki" href="https://nextjs.org/docs/deployment" rel="noopener ugc nofollow" target="_blank"> vercel </a>上部署了应用程序。</p><p id="a4e9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">*关于部署的说明。我花了很多时间来处理一个错误，这个错误来自于</em> <code class="fe ms mt mu mv b"><em class="kz">getServerSideProps()</em></code> <em class="kz">和导出预渲染。我不知道为什么或如何，但我只是简单地将</em> <code class="fe ms mt mu mv b"><em class="kz">package.json</em></code> <em class="kz">中的</em> <code class="fe ms mt mu mv b"><em class="kz">“build”: “next build &amp;&amp; export”</em></code> <em class="kz">改为</em> <code class="fe ms mt mu mv b"><em class="kz">“build”: “next build”</em></code> <em class="kz">并将其部署好。我给詹姆斯发了信息，这是他的回复</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi nk"><img src="../Images/aa3579c5bc6dbf28ce24c435111977f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ix005DDGLU-B4HduUpowog.png"/></div></div></figure></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><h2 id="764e" class="lc ld in bd le lf lg dn lh li lj dp lk jv ll lm ln jz lo lp lq kd lr ls lt lu bi translated">结论</h2><p id="6bdd" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">感谢您的阅读。我希望这篇文章对你有用。请务必在评论中告诉我们你的想法。</p><p id="e049" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kz">更多内容请看</em><a class="ae ki" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="kz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
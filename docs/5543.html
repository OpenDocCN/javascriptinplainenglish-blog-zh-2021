<html>
<head>
<title>How Smart People Find the Bad Commit that Crashed Your App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">聪明人如何发现导致应用崩溃的错误</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-smart-people-find-the-bad-commit-that-crashed-your-app-eb99c6178046?source=collection_archive---------11-----------------------#2021-11-17">https://javascript.plainenglish.io/how-smart-people-find-the-bad-commit-that-crashed-your-app-eb99c6178046?source=collection_archive---------11-----------------------#2021-11-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8620740f8c752a0345d7fb36050dd7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-f-BKPOOJ58y1-RN"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@yancymin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yancy Min</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8ead" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可能正在经营一家价值十亿美元的初创公司，客户/用户使用你的产品来推动他们的业务和目标，或者你可能正在推动你的第一个MVP来跟踪客户/用户，给他们宝贵的经验。</p><p id="d577" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">不知从哪里，你发现了一个让你的程序崩溃的错误。你大脑做的下一件事是回顾你使应用程序崩溃的步骤，你将记下这个问题的数据点。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/4e3051bda0d4e044377657a778d114a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K_BaMsGsjkEVNo_w"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@lunarts?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Volodymyr Hryshchenko</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><ul class=""><li id="2bbd" class="ld le in kc b kd ke kh ki kl lf kp lg kt lh kx li lj lk ll bi translated">应用程序崩溃在哪个页面？</li><li id="bf4f" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">什么样的<strong class="kc io">组件</strong>对此次坠机事件负责？</li><li id="e9d4" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">导致应用崩溃的<strong class="kc io">场景</strong>或<strong class="kc io">数据</strong>是什么？</li></ul><p id="fe5b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你找到了这些问题的答案，接下来你要做的就是实现修复。但不幸的是，时间是你买不起的奢侈品。主要是因为下面列出的两个原因:</p><ul class=""><li id="6979" class="ld le in kc b kd ke kh ki kl lf kp lg kt lh kx li lj lk ll bi translated">不同的用户和你的产品声誉将要探索的有一个错误的活产品，并且是在线的。</li><li id="24e7" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated">对于一个早期创业公司来说，获得一个线索(推荐、营销)需要花费更多的实际资金。如果用户流失了，那么他/她不会很快回来。</li></ul><h1 id="21c6" class="lr ls in bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">最佳/快速的解决方案是恢复到您的应用程序的良好版本并部署它。</h1></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="dbb9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于开发人员少于5人的小型创业公司来说，发现导致崩溃的变更并恢复它是很容易的(即使现在这也不容易，因为人们经常犯错误，而且错误可能已经存在，而你可能只是最近才发现，所以它可能远远低于提交线)。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/dc68a343bf42166508d905e394c5d68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*txenlIZPzpOZ4CHQ"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@stillnes_in_motion?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Stillness InMotion</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6200" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你的剑的击剑不同于在战场上使用它。想象一下，当有人盯着你的屏幕时，你是如何编码的。我知道这是一场噩梦，你经常会犯更多的错误。</p><p id="c893" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你有<strong class="kc io">同行压力</strong>和<strong class="kc io">责任</strong>尽快恢复和部署。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="5004" class="lr ls in bd lt lu my lw lx ly mz ma mb mc na me mf mg nb mi mj mk nc mm mn mo bi translated">GIT平分</h1><p id="b2bb" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">Git是一个强大的工具。您不必学习每个git命令，您可以在需要时学习。</p><h2 id="8065" class="ni ls in bd lt nj nk dn lx nl nm dp mb kl nn no mf kp np nq mj kt nr ns mn nt bi translated"><a class="ae jz" href="https://git-scm.com/docs/git-bisect" rel="noopener ugc nofollow" target="_blank"> Git等分</a>是一个使用二分搜索法找到导致bug的错误提交的工具。</h2><p id="8bbd" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated"><a class="ae jz" href="https://git-scm.com/docs/git-bisect" rel="noopener ugc nofollow" target="_blank"> Git二等分</a>占用了您提交历史的一部分，所以您在主服务器上有最新的<strong class="kc io"> HEAD提交</strong>，然后是最后一个好的提交(您知道它没有任何bug)。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/cd36e1523955bf3b3d5916b032e3edae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*3OdCYqdcqNITkut7k_u1Rw.png"/></div></div></figure><p id="3104" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你知道二分搜索法，它需要一个排序的<strong class="kc io">项目列表</strong>和一个<strong class="kc io">目标</strong>值。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nv"><img src="../Images/c25e2b424ae5a64ea0eeccbf29338f18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tyh5EfBnl9_Vkkc66tVCeA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">binary search</figcaption></figure><ol class=""><li id="7873" class="ld le in kc b kd ke kh ki kl lf kp lg kt lh kx nw lj lk ll bi translated">它选择<strong class="kc io">中间的</strong>元素，<em class="mx">将其与目标进行比较</em></li><li id="75ad" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">如果<em class="mx">的目标是&lt;元素</em>，它将从<strong class="kc io">第一个元素</strong>到<strong class="kc io">中间元素-1 </strong>拆分列表</li><li id="0245" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">如果<em class="mx">的目标是&gt;元素，</em>那么它将从<strong class="kc io">中间元素+ 1 </strong>直到<strong class="kc io">最后一个元素。</strong></li><li id="83cb" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">一旦你有了清单<strong class="kc io">重复</strong>以上步骤<strong class="kc io">直到你找到目标。</strong></li></ol><p id="4043" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是二分搜索法的工作方式，同样的原理也适用于你的git等分。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="6aa3" class="lr ls in bd lt lu my lw lx ly mz ma mb mc na me mf mg nb mi mj mk nc mm mn mo bi translated">查找错误提交的步骤</h1><ol class=""><li id="f065" class="ld le in kc b kd nd kh ne kl nx kp ny kt nz kx nw lj lk ll bi translated">在您的本地开发环境中运行您的应用。</li><li id="8ce2" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">尝试运行导致应用程序崩溃的步骤。</li><li id="f7d1" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">确保您在<strong class="kc io"> HEAD commit </strong>(这意味着您在使用最新的代码)。</li><li id="5c24" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">打开终端运行<code class="fe oa ob oc od b">git bisect start</code>。</li><li id="199e" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">下一个命令是<code class="fe oa ob oc od b">git bisect bad</code>，我们将特定的提交标记为坏的，因为它有一个bug。</li><li id="18e1" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">接下来<code class="fe oa ob oc od b">git bisect good GOOD_COMMIT_SHA</code>这里的GOOD_COMMIT_SHA是COMMIT hash/shah(2f 3865852 FD 7 b 7 eebc 70481 a 157 D5 fbf 0 f 21 c 550)<br/>你必须选择一个你知道运行良好的提交。(如果您不知道，请选择一个月前的提交，或者随机选择50次提交之后的提交)。</li><li id="84e3" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">现在<em class="mx"> git二等分</em>自动运行并选择中间提交，您将看到类似<code class="fe oa ob oc od b">B<em class="mx">isecting: 34 revision left to test after this (roughly 5 steps)</em></code> <em class="mx">的消息。</em>您还会看到它选择的提交散列/sha。</li><li id="9519" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">尝试重复<strong class="kc io">步骤2 </strong>。</li><li id="fab3" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">如果你仍然发现错误运行<code class="fe oa ob oc od b">git bisect bad</code>。</li><li id="24dd" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">如果不是，则运行<code class="fe oa ob oc od b">git bisect good</code>。</li><li id="f557" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx nw lj lk ll bi translated">你将重复第8、9、10步。在某一点上，git二等分将找到导致这个问题的提交，现在您可以识别核心问题了。</li></ol><p id="9086" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦找到导致问题的提交，就可以恢复到该提交下的版本。</p><h1 id="3745" class="lr ls in bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">最后一个音符</h1><p id="7ff0" class="pw-post-body-paragraph ka kb in kc b kd nd kf kg kh ne kj kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated"><strong class="kc io">一个重要的注意事项:</strong>一旦发现bug或者想退出，就运行<strong class="kc io"> </strong> <code class="fe oa ob oc od b">git bisect reset</code> <strong class="kc io"> </strong>退出git平分状态。</p><blockquote class="oe of og"><p id="9549" class="ka kb mx kc b kd ke kf kg kh ki kj kk oh km kn ko oi kq kr ks oj ku kv kw kx ig bi translated"><strong class="kc io">注:</strong>以上过程仅适用于容易重现的bug。如果你的bug是随机发生的，那么就不容易找到正确的提交。</p></blockquote><h1 id="22e0" class="lr ls in bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">关注我激励我写一篇有趣的文章</h1><ul class=""><li id="3b1d" class="ld le in kc b kd nd kh ne kl nx kp ny kt nz kx li lj lk ll bi translated"><a class="ae jz" href="https://medium.com/@amerrnath" rel="noopener">https://medium.com/@amerrnath</a></li><li id="a4a7" class="ld le in kc b kd lm kh ln kl lo kp lp kt lq kx li lj lk ll bi translated"><a class="ae jz" href="https://twitter.com/amerrnath21" rel="noopener ugc nofollow" target="_blank">https://twitter.com/amerrnath21</a></li></ul><p id="bc7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mx">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mx">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
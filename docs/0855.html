<html>
<head>
<title>Integrate PayPal Into React The Easy Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以简单的方式将PayPal集成到React中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/integrate-paypal-into-react-the-easy-way-f49b4774a11e?source=collection_archive---------5-----------------------#2021-02-22">https://javascript.plainenglish.io/integrate-paypal-into-react-the-easy-way-f49b4774a11e?source=collection_archive---------5-----------------------#2021-02-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0a14" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><strong class="ak">使用PayPal沙盒在基于React的电子商务平台上创建快速安全的结账选项</strong></h2></div><p id="4971" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">将购物车集成到你的项目中？你可能想使用PayPal作为一种简单的结账方式。人们觉得在有PayPal结账选项的网站上购物更安全。在这篇博文中，我将带你建立并测试一个PayPal沙盒账户。</em></p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi kz"><img src="../Images/427de14ca1d94df8275caa7ae5c33b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZC5n0A39E9t0GT7BmM16LA.jpeg"/></div></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Creator: Advantus Media Inc. and QuoteInspector.com | Credit: QuoteInspector.com</figcaption></figure><p id="749d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">PayPal为开发人员提供了一个沙盒帐户，用于在上线之前在他们的网站上实现和测试PayPal checkout。您可以使用PayPal提供给您的个人和商业电子邮件来测试您的应用程序并模拟真实交易。</p><p id="7e6c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，您必须设置您的开发环境来获取OAuth 2.0客户端ID和沙箱的秘密凭证。去PayPal <a class="ae lp" href="https://developer.paypal.com/home" rel="noopener ugc nofollow" target="_blank">开发者网站</a>，用你的私人PayPal账户(你用来网上购物的账户)登录。如果你还没有账号，可以在这里注册个人账号<a class="ae lp" href="https://www.paypal.com/us/webapps/mpp/account-selection" rel="noopener ugc nofollow" target="_blank">。只是要注意，私人帐户不会让你在真实环境中使用PayPal，但对于测试来说已经足够好了。如果您想将代码部署到实际环境中，您需要创建一个商业帐户。</a></p><p id="74a2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">登录后，在您的仪表盘菜单中，导航至<em class="ky">我的应用&amp;凭证</em>。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/00899da9b812c3edfe5a9869e8b6f05a.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*Enk-vNrdwekx8t-ArfyQjA.png"/></div></figure><p id="8988" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">确保您在<em class="ky">沙箱</em>选项卡上获取测试凭证。一旦你准备好发布一个实时项目，你可以切换到<em class="ky"> Live </em>标签来获得一组新的凭证(记住你需要一个商业PayPal帐户！).</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lr"><img src="../Images/b3e755f0469290a2072aea837be2536a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1388/format:webp/1*QqS6SiRGzI2FQCnehtYVWg.png"/></div><figcaption class="ll lm gj gh gi ln lo bd b be z dk">Select the Sandbox tab to obtain credentials for testing</figcaption></figure><p id="0309" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<em class="ky">应用名称</em>下点击<em class="ky">创建应用</em>。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi ls"><img src="../Images/e8258825b6b6a4bae2c5c9700ed11fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3lW8c2Yo9ZBX5cSjChkIA.png"/></div></div></figure><p id="c982" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在一个新窗口中填写应用程序的名称，并选择应用程序的类型。使用<strong class="ke io"> <em class="ky">商人</em> </strong>如果你正在为一个特定的企业建立一个网站，它将得到所有的付款；使用<strong class="ke io"> <em class="ky">平台</em> </strong>用于有许多不同卖家的更大的电子商务网站。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi lt"><img src="../Images/6b17263293eb7f0aa66835b521587c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IXafhuoywTKt9H9FUt_ooQ.png"/></div></div></figure><p id="ef9b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你点击<em class="ky">创建应用程序，</em> PayPal会为你提供API凭证:沙盒账户、客户ID和密码。对于我们的项目，我们只需要保存沙盒帐户。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi lu"><img src="../Images/d543ed993fedc73a67c9f6f588f937f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4_bHcBsY8QzrBpZbGXwew.png"/></div></div></figure><p id="b57b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了测试我们的交易，我们需要获得两封电子邮件，一封给买家，另一封给商家(卖家)。在沙盒下的仪表盘中选择<em class="ky">账户</em>并选择<em class="ky">创建账户</em>。首先，创建一个个人帐户(为买家)，从下拉菜单中选择你正在测试的国家。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lv"><img src="../Images/b7113df047f31f369fb3afaddaddd68a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*RB2GslVlxSVBipJROCh41w.png"/></div></figure><p id="a2bd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建个人帐户后，让我们为商家创建一个商业帐户。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/770f966e4d9a498fd9dc5f834caf1ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/format:webp/1*agZbYyDV8hFbdZ1lkxB12A.png"/></div></figure><p id="9ad2" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<em class="ky">管理账户</em>下，点击<strong class="ke io"> … </strong>(三个点)并选择<em class="ky">查看/编辑账户</em>。这里我们将需要<em class="ky">系统生成的密码</em>。保存好个人和公司账户的电子邮件和密码，我们以后会用到。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi lx"><img src="../Images/50ef84b1b835f8cedb03e2197d1c46fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*edxmHh4AlU5_y8UbrXhI0A.png"/></div></figure><p id="9eb9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经完成了获取PayPal凭证的工作，可以继续我们的React项目了。我们将使用<strong class="ke io">react-paypal-express-check out</strong>NPM包。要安装它，请在您的终端上运行</p><p id="92fe" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ly lz ma mb b">npm install — save react-paypal-express-checkout</code>。</p><p id="dea5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要从<code class="fe ly lz ma mb b">react-paypal-express-checkout .</code>进口<code class="fe ly lz ma mb b">PaypalExpressBtn</code></p><p id="339d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在render方法中，我们创建了三个回调函数；<code class="fe ly lz ma mb b">onError</code>发生在PayPal主脚本无法加载时，<code class="fe ly lz ma mb b">onCancel</code>发生在用户点击取消按钮或关闭PayPal弹出窗口时，<code class="fe ly lz ma mb b">onSuccess</code>表示交易成功。</p><p id="c8db" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，我们声明变量，默认情况下环境变量<code class="fe ly lz ma mb b"> env</code>被设置为<code class="fe ly lz ma mb b">‘sandbox’</code>，一旦你的应用程序准备好生产，你将需要把它改为<code class="fe ly lz ma mb b">‘production’</code>。我们将货币变量设置为<code class="fe ly lz ma mb b">‘USD’</code>。如果您想使用不同的货币，您可以在<a class="ae lp" href="https://developer.paypal.com/docs/classic/api/currency_codes/" rel="noopener ugc nofollow" target="_blank">这里</a>查看不同的货币代码。我们把总变量设为<code class="fe ly lz ma mb b">30</code>；虽然默认情况下它被设置为<code class="fe ly lz ma mb b">1</code>，但我更喜欢用一个更大的数字来测试。在<code class="fe ly lz ma mb b">client</code>变量中，我们将从PayPal收到的沙盒账户值分配给沙盒密钥。</p><p id="82e9" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后我们返回所有道具中的<code class="fe ly lz ma mb b">PaypalExpressBtn </code>。</p><figure class="la lb lc ld gt le"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="2317" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就是这样！PayPal集成到您的项目中。现在让我们测试它实际上是如何工作的。</p><p id="571a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从购物车中，我们选择用贝宝支付。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi me"><img src="../Images/8a7c1c8c672ca6d6d3c7f4f20f6da5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BbMvRsnB8ipbh7Tzpzntw.png"/></div></div></figure><p id="9bf1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用个人帐户凭证(<strong class="ke io">我们从PayPal收到的用于测试的凭证，而不是您的真实凭证)登录！</strong>)</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/b431e69d95e8f8bd273923c51aa006a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*LCh_ysrVhDeG-KLAOQj9CQ.png"/></div></figure><p id="b54c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，您可以看到测试用户的地址和我们在组件中设置的总数，让我们单击“支付”按钮。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/d80cd532bc2aaf4132ea4fd38ae4ea77.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*5KkX6ail5y9qyJQ3to2Fyg.png"/></div></figure><p id="8b1d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们的交易成功，我们会在控制台中得到支付成功的响应。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/e50646a736104d71c94843c41da75697.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*WdBOT98YKXzFTLx9I-wHpw.png"/></div></figure><p id="9750" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们进入PayPal沙盒webiste ，用我们的商业邮箱和密码登录。</p><figure class="la lb lc ld gt le gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/5b2bab08eae7be1bb794888e715828a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*0YPdq4v3C0SDc0NbzYop9g.png"/></div></figure><p id="0f76" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在仪表盘中，我们可以看到我们的最后一笔交易和中的<em class="ky">笔钱(因为PayPal从每笔交易中收取佣金，所以您在这里的金额低于应有金额)。</em></p><figure class="la lb lc ld gt le gh gi paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="gh gi mj"><img src="../Images/c9c61ce66743d25e3dfece805c96974d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBxRHjrfwCSCRrNUIyoAjQ.png"/></div></div></figure><p id="3338" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过点击最后一笔交易，您可以看到关于该交易的更多信息，从这里您可以测试向客户退款，或者点击<em class="ky">发货</em>项目并添加跟踪号码，慢慢来，测试这里的所有选项，以确保一切正常。</p><h2 id="4094" class="mk ml in bd mm mn mo dn mp mq mr dp ms kl mt mu mv kp mw mx my kt mz na nb nc bi translated">结论</h2><p id="21f6" class="pw-post-body-paragraph kc kd in ke b kf nd jo kh ki ne jr kk kl nf kn ko kp ng kr ks kt nh kv kw kx ig bi translated">万岁！我们将PayPal结账选项整合到我们的项目中，并完成了我们的第一笔交易。我希望这个指南对你有帮助。感谢阅读！</p><p id="c6a8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">阅读更多尽在</em><a class="ae lp" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="ky">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
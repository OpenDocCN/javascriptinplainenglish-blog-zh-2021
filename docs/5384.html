<html>
<head>
<title>Common JavaScript Mistakes and Best Practices</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">常见的JavaScript错误和最佳实践</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/basic-javascript-mistakes-and-best-practices-aa97ffc0e553?source=collection_archive---------1-----------------------#2021-11-07">https://javascript.plainenglish.io/basic-javascript-mistakes-and-best-practices-aa97ffc0e553?source=collection_archive---------1-----------------------#2021-11-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/40c9794f22508b57710b7d699992d342.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vj-eS6aoyMZlycPV"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kenny Eliason</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">本文面向所有人，无论您是初学者、中级还是高级JavaScript开发人员。在这里，我们讨论了许多JavaScript开发人员正在犯的一些非常基本的错误。</p><p id="443f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">关于javascript有一些误解。尤其是对于JavaScript中的迭代器。开发人员对于迭代器的选择非常模糊，并且忘记了使用它们的全部目的。</p><p id="ee7d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们一会儿将研究这些错误，但是让我们谈谈循环和迭代器之间的主要区别。</p><p id="1425" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">等等，什么？两者不是一样的吗？</p><p id="aa00" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你通常不会把它们归类为不同的，但是这里有一个小问题。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="c508" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">循环与迭代器</strong></h1><figure class="me mf mg mh gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/f7eeac9ac29e8b975eaeb3c1e8cd2962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S0KfJtZsfjBZKSpr"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Loop Vs Iterator</figcaption></figure><p id="4a5c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在JavaScript中，我们有各种各样的循环和迭代器。我们有<strong class="kc io"> for，while和do…while循环</strong>，我们也有很多<strong class="kc io">迭代器，比如for-each，map，filter，reduce </strong>等等。</p><p id="f758" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们再多谈谈循环。</p><p id="ab03" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在一个循环中，我们可以确定循环的初始值。此外，与迭代器不同，循环允许您确定增量变量的值，这可能有助于您在使用元素时跳过它的编号。</p><p id="e81c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">迭代器只是一次从头到尾迭代一个数组的每个元素，并根据逻辑进行适当的操作。</p><h1 id="5d11" class="lf lg in bd lh li mi lk ll lm mj lo lp lq mk ls lt lu ml lw lx ly mm ma mb mc bi translated"><strong class="ak">无意义的“地图”</strong></h1><p id="6864" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">听起来很奇怪？</p><p id="861e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在JavaScript领域，我们有多种迭代器选项，但它们都是为某种用例设计的。</p><p id="c431" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">实际上，我遇到过多次代码审查，在那里我看到人们在地图函数中使用<code class="fe ms mt mu mv b">push()</code>。让我给你看一个例子，以便更好地理解。</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="8847" class="na lg in mv b gy nb nc l nd ne">const extraThirdArray= [];</span><span id="9c73" class="na lg in mv b gy nf nc l nd ne">postList.map(ele =&gt; {<br/>   const showDetails = ele.showDetails; //Resulting in boolean value<br/>   const postData = getPost(ele.id, showDetails);<br/>   extraThirdArray.push(postData);<br/>});</span><span id="a6c5" class="na lg in mv b gy nf nc l nd ne">// <strong class="mv io">getPost()</strong> will get post. If the second params showDetails is true then it will send some additional details to it otherwise it returns some basic details fot the post.</span></pre><p id="c0f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">还有几个例子，但我希望你能理解。在这个例子中，在地图中使用<code class="fe ms mt mu mv b">push()</code>是没有意义的。</p><p id="d5c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Map返回一个由从map返回的任何值组成的新数组。map函数本身映射该值并将其保存在其数组中。使用map时，创建额外的数组并在其中推送元素是没有意义的。</p><p id="4b72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">地图功能会帮你完成。这是使用地图的主要目的。</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="0ed9" class="na lg in mv b gy nb nc l nd ne">const postData = postList.map(ele =&gt; {<br/>   return getPost(ele.id, ele.showDetails);<br/>});</span></pre><p id="20df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">或者</p><p id="ffc4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用速记😍</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="7947" class="na lg in mv b gy nb nc l nd ne">const postData = postList.map(ele =&gt; getPost(ele.id, ele &gt; 2));</span></pre></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="e68e" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">最佳实践</h1><h2 id="6bef" class="na lg in bd lh ng nh dn ll ni nj dp lp kl nk nl lt kp nm nn lx kt no np mb nq bi translated">1.可避免的条件语句</h2><p id="516a" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">让我们来看看一些很容易避免的情况。</p><p id="bd95" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> (i)我们真的需要检查确认数组长度的条件吗？</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="3abb" class="na lg in mv b gy nb nc l nd ne">if(arr.length &gt; 0) {<br/>  //Some logic<br/>}</span></pre><p id="4504" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有一个很好的方法来处理这个问题，而不是像大于0这样不必要的检查。</p><p id="d00c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="a0be" class="na lg in mv b gy nb nc l nd ne">if(arr.length) {<br/>  // Some logic<br/>}</span></pre><p id="5ee6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐</p><p id="72ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果数组中存在除0之外的长度，它将为真，因此满足If条件。</p><p id="472f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> (ii)用下面的方法检查数组是否没有长度？</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="1b30" class="na lg in mv b gy nb nc l nd ne">if(arr.length &lt;=0) {<br/>  //Some logic<br/>}</span></pre><p id="3ab6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="8c77" class="na lg in mv b gy nb nc l nd ne">if(!arr.length) {<br/>  //Some logic<br/>}</span></pre><p id="8d22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐</p><p id="51b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">JavaScript中的数组不能有负长度。只有当它为0时才可能是假的，反之亦然。</p><p id="bbfd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> (iii)验证数组长度只是为了迭代它？</strong></p><p id="4691" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">许多开发人员使用<em class="nr"> if条件</em>来检查数组是否有长度，然后为了不破坏代码而遍历数组。</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="1f1d" class="na lg in mv b gy nb nc l nd ne">let postIds = [];<br/>if(arr.length) {<br/>   postIds = arr.map(e =&gt; e.id)<br/>}</span></pre><p id="9f17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="a6da" class="na lg in mv b gy nb nc l nd ne">const postIds = (arr || []).map(e =&gt; e.id);</span></pre><p id="c571" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐</p><p id="da72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将默认值指定为空数组将防止代码被破坏。如果有任何假值，如undefined或null，它将返回到默认值。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="f747" class="na lg in bd lh ng nh dn ll ni nj dp lp kl nk nl lt kp nm nn lx kt no np mb nq bi translated"><strong class="ak"> 2。不要不必要地使用三元运算符</strong></h2><p id="d19a" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">有时，在满足条件的情况下，需要将变量设置为true，反之亦然。开发人员使用三元运算符来实现同样的目的。</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="5d0b" class="na lg in mv b gy nb nc l nd ne">const needPostDetails = post.created_at &gt; date ? true : false;</span><span id="2c82" class="na lg in mv b gy nf nc l nd ne">getPost(id, needPostDetails);</span></pre><p id="dc28" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="650a" class="na lg in mv b gy nb nc l nd ne">getPost(id, post.created_at &gt; date);</span></pre><p id="94e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐</p><p id="b6b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这种情况下，<strong class="kc io"><em class="nr">post . created _ at&gt;date</em></strong>满足则返回true，不满足则返回false。您不需要特殊的条件，如使用三元运算符来实现这一点。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="4b7d" class="na lg in bd lh ng nh dn ll ni nj dp lp kl nk nl lt kp nm nn lx kt no np mb nq bi translated"><strong class="ak"> 3。想要从对象中移除关键点吗？</strong></h2><p id="9779" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">嗯，从对象中删除或移除键取决于具体情况。如果你想操作同一个对象，你可以像我们通常做的那样使用<em class="nr"> delete </em>关键字。</p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="c826" class="na lg in mv b gy nb nc l nd ne">const obj = {<br/>   a:1,<br/>   b:2,<br/>   c:3,<br/>   d:4,<br/>   e:5,<br/>   f:6,<br/>   g:7<br/>}</span><span id="569b" class="na lg in mv b gy nf nc l nd ne">delete obj.e;<br/>delete obj.f;<br/>delete obj.g;<br/>delete obj.a;</span><span id="3ef2" class="na lg in mv b gy nf nc l nd ne">console.log(obj);</span><span id="0d6d" class="na lg in mv b gy nf nc l nd ne">Output:</span><span id="f5c8" class="na lg in mv b gy nf nc l nd ne"><em class="nr">const obj = {</em><br/>     b:2,<br/>     c:3,<br/>     d:4,<em class="nr"><br/>   }</em></span></pre><p id="4f86" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="4891" class="na lg in mv b gy nb nc l nd ne">const {e,f,g,a, ...rest} = obj;</span><span id="084d" class="na lg in mv b gy nf nc l nd ne">console.log(rest);</span><span id="2000" class="na lg in mv b gy nf nc l nd ne">Output:</span><span id="e9a9" class="na lg in mv b gy nf nc l nd ne"><em class="nr">const obj = {</em><br/>     b:2,<br/>     c:3,<br/>     d:4,<em class="nr"><br/>   }</em></span></pre><p id="d2ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐</p><p id="27f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个更好的解决方案是使用rest操作符，而不是多次使用<strong class="kc io"> delete </strong>关键字，因为你不需要多次使用delete来删除你想要删除的键。使用rest操作符也不会操作您现有的对象；相反，它提供了它的一个浅表副本。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="96ef" class="na lg in bd lh ng nh dn ll ni nj dp lp kl nk nl lt kp nm nn lx kt no np mb nq bi translated"><strong class="ak"> 4。从数组中删除重复值</strong></h2><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="ecd9" class="na lg in mv b gy nb nc l nd ne">const arr = [1,3,4,2,3,1,3];<br/>const uniqueValue = arr.filter((value, index, self) =&gt; {<br/>    return self.indexOf(value) === index;<br/>});</span><span id="9bb7" class="na lg in mv b gy nf nc l nd ne">console.log(uniqueValue);</span><span id="e0ac" class="na lg in mv b gy nf nc l nd ne">Output:<br/>[1, 3, 4, 2]</span></pre><p id="4742" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">👉<strong class="kc io">更好的解决方案</strong></p><pre class="me mf mg mh gt mw mv mx my aw mz bi"><span id="204b" class="na lg in mv b gy nb nc l nd ne">const uniqueValue = [...new Set([...arr])];</span><span id="fbc8" class="na lg in mv b gy nf nc l nd ne">console.log(uniqueValue);</span><span id="2fb8" class="na lg in mv b gy nf nc l nd ne">Output:<br/>[1, 3, 4, 2]</span></pre><p id="5d3a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nr">为什么？</em> </strong> 🧐 <br/>更好的解决方案可以在这里使用一套。集合本身只包含唯一的值。我们可以利用它的本性来达到我们的目的。</p><p id="248b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你喜欢这篇文章，并从中学到一些东西。你可以随时在社交媒体上联系我，寻求任何建议或意见。</p><p id="ecf9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nr">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nr">plain English . io</em></strong></a><em class="nr">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nr">免费周报</em> </strong> </a> <em class="nr">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nr">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nr">LinkedIn</em></strong></a><em class="nr"/><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nr">YouTube</em></strong></a><em class="nr"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nr">不和</em> </strong> </a> <em class="nr">。</em></p></div></div>    
</body>
</html>
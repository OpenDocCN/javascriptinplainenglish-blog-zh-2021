<html>
<head>
<title>Load Data with Vue.js 3 Suspense API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue.js 3暂记API加载数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/load-data-with-vue-js-3-suspense-api-dc2074498a66?source=collection_archive---------10-----------------------#2021-07-09">https://javascript.plainenglish.io/load-data-with-vue-js-3-suspense-api-dc2074498a66?source=collection_archive---------10-----------------------#2021-07-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ac9f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Vue.js 3暂记API处理异步承诺</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/18e99ce0b5e978ce3a8c647a1fe83c45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rW5KXOliPu8MUkjk"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@blakeconnally?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Blake Connally</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9bce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Vue.js 3捆绑了一些令人惊叹的功能。它附带的一个特性是悬念API组件边界。当您想要处理一些异步请求时，悬念API就派上了用场。</p><p id="0866" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举个例子，我们从一个API端点获取一些数据，并希望在相关承诺得到解决时向客户端显示一些回退消息。我们可以利用悬念API来执行这样的任务。</p><p id="a978" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">悬念API使我们能够处理承诺，并在其他组件上显示后备内容，而不是在单个组件中本地显示。</p><h2 id="5fac" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">为什么要悬疑API </strong></h2><ul class=""><li id="f16c" class="ml mm iq ky b kz mn lc mo lf mp lj mq ln mr lr ms mt mu mv bi translated">加载时容易显示回退消息和内容。</li><li id="542c" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">可以帮助显示何时承诺已经解决并准备好呈现。</li><li id="d609" class="ml mm iq ky b kz mw lc mx lf my lj mz ln na lr ms mt mu mv bi translated">帮助控制各种视图部分。</li></ul><h2 id="7266" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">在组件中设置暂记API。</strong></h2><p id="166c" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">创建一个组件，并将其命名为movies.vue。在这个组件中，我们将有如下所示的代码片段。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">movies.vue</figcaption></figure><p id="992f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，为了确保组件状态的反应性，我们必须导入<strong class="ky ir"> <em class="ng"> ref </em> </strong>。因此，从上面的代码片段来看，我们正在对端点进行异步API调用，以获取一些电影数据。</p><p id="5b7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于发出HTTP请求，您可以使用<strong class="ky ir"> <em class="ng"> fetch </em> </strong>或<strong class="ky ir"> <em class="ng"> Axios </em> </strong>，这取决于您的首选方法，但是对于我们的示例，我们将使用fetch。</p><p id="b338" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，我们现在得到了权力，现在我们希望悬念API显示应用程序内的回退消息。</p><p id="ea8f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的app.vue文件中，我们将拥有如下面代码片段所示的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ne nf l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">app.vue</figcaption></figure><p id="73b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们正在导入我们的电影组件，并在它周围有一个悬念API组件边界。另外，记得从vue导入悬念API，这样vue就不会抛出一些错误。</p><p id="4138" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的代码片段来看，我们必须在悬念API边界内创建模板。带有<strong class="ky ir"> <em class="ng"> #default </em> </strong>的初始模板组件是当承诺被解决并且一切都成功时将显示的组件。</p><p id="fda9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">带有<strong class="ky ir"> <em class="ng"> #fallback </em> </strong>的模板是当承诺尚未解决时将向用户显示的组件，并充当回退组件。现在，我们在<strong class="ky ir"> <em class="ng"> #fallback </em> </strong>模板中提供的消息将显示给用户，直到承诺得到解决。</p><p id="d9b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您希望在承诺完成时显示一条回退消息时，悬念API会很方便。</p><h2 id="0f2d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">注</strong></h2><p id="2503" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">悬疑API是Vue.js 3的一个新特性，还在实验中。强烈建议不要在生产环境中使用。</p><p id="95aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您阅读本文，希望对您有所帮助。</p><h2 id="bf2d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">资源</strong></h2><p id="c5dc" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">Vue.js文档</p><p id="3ac4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://v3.vuejs.org/guide/migration/suspense.html#child-updates" rel="noopener ugc nofollow" target="_blank">https://v3.vuejs.org/guide/migration/suspense API . html #子更新</a></p><h2 id="22a6" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">更读着</strong></h2><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-create-custom-error-pages-in-nuxt-js-3c8192bc0ae5"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">如何在Nuxt.js中创建自定义错误页面</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">在Nuxt.js中创建自定义错误页面，用例子解释。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/option-api-vs-composition-api-in-vue-js-a-definitive-guide-2a04a398b3ce"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">Vue.js中的选项API与组合API—权威指南</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">我们应该使用哪一个？逐步比较。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny kp nk"/></div></div></a></div><p id="08ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ng">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ng">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
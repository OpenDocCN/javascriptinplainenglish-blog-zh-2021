<html>
<head>
<title>How To Test If Element Exists</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何测试元素是否存在</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-test-if-a-dom-element-exists-in-a-svelte-component-with-jest-2a3d86f0abac?source=collection_archive---------5-----------------------#2021-11-17">https://javascript.plainenglish.io/how-to-test-if-a-dom-element-exists-in-a-svelte-component-with-jest-2a3d86f0abac?source=collection_archive---------5-----------------------#2021-11-17</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/a20e2d2bcc8ee6ee894a3f9916547487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cZHDmChC8Ckk6cF9Kb82Fg.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@simplicity?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Marija Zaric</a> on <a class="ae kd" href="https://unsplash.com/s/photos/existence?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0b33" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">关于一个问题的快速帖子:如何测试一个元素是否存在于一个组件中。我省略了与Jest与svelite kit的<a class="ae kd" href="https://el3um4s.medium.com/how-to-test-sveltekit-app-with-jest-848afa8edbc7" rel="noopener">配置相关的部分，我在不久前谈到过。我只关注这个问题。</a></p><p id="b5bb" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我想运行3个测试:</p><ol class=""><li id="112c" class="lc ld ir kg b kh ki kl km kp le kt lf kx lg lb lh li lj lk bi translated">如果一个元素存在于一个纤细的组件中</li><li id="4575" class="lc ld ir kg b kh ll kl lm kp ln kt lo kx lp lb lh li lj lk bi translated">如果元素存在并且包含给定的文本</li><li id="1e78" class="lc ld ir kg b kh ll kl lm kp ln kt lo kx lp lb lh li lj lk bi translated">如果页面上不存在该项目</li></ol><p id="819f" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我用我为组件<a class="ae kd" href="https://github.com/el3um4s/svelte-component-info" rel="noopener ugc nofollow" target="_blank">svelet-component-info</a>实现的测试作为例子:</p><figure class="lq lr ls lt gu js"><div class="bz fq l di"><div class="lu lv l"/></div></figure><h1 id="5744" class="lw lx ir bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">检查一个元素是否存在于一个瘦组件中</h1><p id="eb3e" class="pw-post-body-paragraph ke kf ir kg b kh mu kj kk kl mv kn ko kp mw kr ks kt mx kv kw kx my kz la lb ik bi translated">第一个很简单。创建组件后，我使用<a class="ae kd" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank"> Jest </a>来定位元素。在本例中，我在寻找一个标签为<code class="fe mz na nb nc b">H1</code>的元素:</p><pre class="lq lr ls lt gu nd nc ne nf aw ng bi"><span id="ffe5" class="nh lx ir nc b gz ni nj l nk nl">expect(svelteInfo.queryByRole("heading")).toBeTruthy();</span></pre><p id="dd04" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">Jest通过这种方式检查Svelte组件是否包含ARIA角色<code class="fe mz na nb nc b">heading</code>的元素。如果没有找到，测试失败。</p><h1 id="5bb1" class="lw lx ir bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">检查元素是否有特定的文本</h1><p id="92ec" class="pw-post-body-paragraph ke kf ir kg b kh mu kj kk kl mv kn ko kp mw kr ks kt mx kv kw kx my kz la lb ik bi translated">如果我想检查一个元素是否有特定的属性，我使用不同的代码。首先我捕捉元素</p><pre class="lq lr ls lt gu nd nc ne nf aw ng bi"><span id="2423" class="nh lx ir nc b gz ni nj l nk nl">const title = svelteInfo.getByRole("heading");</span></pre><p id="3c19" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我检查文本:</p><pre class="lq lr ls lt gu nd nc ne nf aw ng bi"><span id="0acc" class="nh lx ir nc b gz ni nj l nk nl">expect(title).toHaveTextContent("Hello");</span></pre><p id="cc19" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我建议参考<a class="ae kd" href="https://github.com/testing-library/jest-dom" rel="noopener ugc nofollow" target="_blank">testing-library/jest-DOM</a>资源库，了解其他可用的选项。</p><h1 id="eca0" class="lw lx ir bd ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt bi translated">检查一个项目不存在于苗条</h1><p id="86c7" class="pw-post-body-paragraph ke kf ir kg b kh mu kj kk kl mv kn ko kp mw kr ks kt mx kv kw kx my kz la lb ik bi translated">最后，不太直观的事情:如何检查一个元素<strong class="kg is">而不是</strong>出现在一个网页或一个苗条的元素中。在这种情况下，我使用了与第一个类似的代码，但是我没有使用<code class="fe mz na nb nc b">expect(..).toBeTruthy()</code>，而是使用了<code class="fe mz na nb nc b">expect(...).toBeNull()</code>:</p><pre class="lq lr ls lt gu nd nc ne nf aw ng bi"><span id="25a3" class="nh lx ir nc b gz ni nj l nk nl">expect(svelteInfo.queryByTestId("description")).toBeNull();</span></pre><p id="a190" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">仅此而已。正如已经提到的，这是一个提醒未来的我如何测试一个元素的存在与否的快速注释。</p><p id="2fb6" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nm nn hv no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is"> <em class="nt">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kd" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="kg is"> <em class="nt">中邮箱列表</em> </strong> </a></p><div class="nu nv gq gs nw nx"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="ny ab fp"><div class="nz ab oa cl cj ob"><h2 class="bd is gz z fq oc fs ft od fv fx iq bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="oe l"><h3 class="bd b gz z fq oc fs ft od fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="of l"><p class="bd b dl z fq oc fs ft od fv fx dk translated">el3um4s.medium.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol jx nx"/></div></div></a></div></div><div class="ab cl nm nn hv no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ik il im in io"><p id="4f12" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="nt">原载于2021年11月17日</em><a class="ae kd" href="https://blog.stranianelli.com/how-to-test-if-dom-element-exists-with-jest-and-svelte-english/" rel="noopener ugc nofollow" target="_blank"><em class="nt">https://blog.stranianelli.com</em></a><em class="nt">。</em></p><p id="fe60" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="nt">更多内容看</em><a class="ae kd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
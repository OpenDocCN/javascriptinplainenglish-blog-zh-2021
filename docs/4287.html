<html>
<head>
<title>Create a Snake Game in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中创建一个贪吃蛇游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-snake-game-in-react-10d7ddbff52f?source=collection_archive---------0-----------------------#2021-08-26">https://javascript.plainenglish.io/create-snake-game-in-react-10d7ddbff52f?source=collection_archive---------0-----------------------#2021-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c34a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用React库创建您自己的经典贪吃蛇游戏。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/f52efe6add3c7abdf43428789a482f7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mdWsbSUOxD4PHxoPS2NZXw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">source: <a class="ae lb" href="https://stock.adobe.com/search?k=snake+cartoon" rel="noopener ugc nofollow" target="_blank">https://stock.adobe.com/search?k=snake+cartoon</a></figcaption></figure><p id="e884" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">贪吃蛇游戏很经典。我有在诺基亚手机的小液晶屏幕上播放它的美好回忆。很久以前就一直想做一个贪吃蛇游戏。我一直推迟它，因为我认为它会很复杂。幸运的是，我错了。我能做出一个普通的贪吃蛇游戏。</p><p id="419b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们从创建一个React应用程序开始:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="6905" class="lh li iq ld b gy lj lk l ll lm">$ npx create-react-app snake-game</span></pre><p id="dfda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React类中贪吃蛇游戏的基本结构如下所示:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">structure of the code</figcaption></figure><p id="325a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">随着需求的出现，我们还将实现其他的助手功能。这里，<code class="fe lp lq lr ld b">initialState</code>存储状态相关变量。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">initial values</figcaption></figure><p id="6cd2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将在自然遇到这些变量时讨论它们。现在，我们将为演示添加CSS。我的CSS技能几乎不存在。我将无法使我们的项目UI/UX友好。我们为蛇棋盘、棋盘中的每个元素、蛇和食物使用了不同的CSS。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div></figure><h1 id="c859" class="ls li iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">板</h1><p id="a970" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">initialState中的<code class="fe lp lq lr ld b"><strong class="jp ir">rows</strong></code>是代表棋盘的二维数组。它的尺寸是<code class="fe lp lq lr ld b">HEIGHT X WIDTH</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">creating empty rows.</figcaption></figure><p id="bca2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">网格中的每个元素都用x和y分量表示。我们已经将数组中所有元素的默认值设置为grid-item。board元素中的值表示演示中使用的CSS类。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">rendering the board</figcaption></figure><p id="681b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的蛇和食物从一个随机的位置开始。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">get random position</figcaption></figure><h1 id="f18f" class="ls li iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated"><strong class="ak">蛇</strong></h1><p id="beee" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated"><code class="fe lp lq lr ld b"><strong class="jp ir">snake</strong></code> <strong class="jp ir"> </strong>是表示蛇的一维数组。从我们的角度来看，这条蛇可以向左、向右、向上或向下走。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">mapping keyword to variables</figcaption></figure><p id="ff26" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经将键盘上的箭头键映射到React API中的键码。我们还为暂停/取消暂停游戏的空格键添加了键码。</p><p id="5818" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从蛇的参照物来看，它可以向前、向左或向右移动。没有向后运动。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">changing direction of snake based on keyboard input</figcaption></figure><p id="9663" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该功能甚至需要连接到<code class="fe lp lq lr ld b">onKeydown</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">component on mount</figcaption></figure><p id="7d78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://reactjs.org/docs/react-component.html#componentdidmount" rel="noopener ugc nofollow" target="_blank">componentidmount</a>适用于定义订阅。当HTML树中的所有组件都被挂载时，它被调用。更多信息请参考这里:<a class="ae lb" href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" rel="noopener ugc nofollow" target="_blank">https://projects . wojtekmaj . pl/react-life cycle-methods-diagram/</a>。精明的人应该已经注意到了<code class="fe lp lq lr ld b">moveSnake</code>函数，所以让我们来定义它。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">defining movement of snake</figcaption></figure><p id="0ee7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">蛇是一个队列。数据从名为head的数组末尾输入。并且该元件从前面被推出。无论蛇向哪个方向移动，它都会不断地移动。当它到达棋盘的边缘时，蛇将回到初始位置。抱歉，地球扁平者。每当蛇移动的时候，棋盘就必须更新以显示蛇和食物的位置。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="b6a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果蛇头碰到蛇身，游戏就结束了。请注意，由于网格的结构，如果蛇的大小至少为4，它只能触摸自己。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">check if collapsed</figcaption></figure><p id="eea7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦身体被碰到，游戏就结束了。然后我们显示分数并重置游戏。</p><h1 id="ceda" class="ls li iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">食物</h1><p id="1a85" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated"><code class="fe lp lq lr ld b"><strong class="jp ir">food</strong></code> <strong class="jp ir"> </strong>是棋盘上的一个特殊位置，如果被头部碰到，蛇就会变大。头部接触食物的过程将被称为<code class="fe lp lq lr ld b">eating</code>。一旦食物被<code class="fe lp lq lr ld b">eaten</code>，它就会在棋盘上的任意位置弹出。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="dbf2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每吃一次食物，蛇的<code class="fe lp lq lr ld b"><strong class="jp ir">speed</strong></code>就增加一次。它根据下面的代码增加。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">increase speed</figcaption></figure><p id="8d83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的代码确保蛇移动到另一个网格所用的时间总是低于10毫秒。该代码相当于:</p><pre class="km kn ko kp gt lc ld le lf aw lg bi"><span id="9a67" class="lh li iq ld b gy lj lk l ll lm">if (speed &gt; 10) {<br/>    speed -= 10<br/>} </span></pre><p id="8981" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每次更新蛇板的时候，我们都需要检查蛇是吃了食物还是游戏结束了。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="95df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="https://reactjs.org/docs/react-component.html#componentdidupdate" rel="noopener ugc nofollow" target="_blank"> componentDidUpdate </a>是一个特殊的函数，每次更新时都会被调用。这是React生命周期的一部分。更多信息请参考<a class="ae lb" href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><h1 id="2c91" class="ls li iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">最终代码</h1><p id="fa00" class="pw-post-body-paragraph jn jo iq jp b jq mp js jt ju mq jw jx jy mr ka kb kc ms ke kf kg mt ki kj kk ij bi translated">现在，最终的代码如下所示:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="0d0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以让<code class="fe lp lq lr ld b"><strong class="jp ir">$ npm start</strong></code>运行游戏并开始游戏。</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="4fce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这篇文章对你有用。如有任何疑问，请留言。如果你有兴趣创建更多的小游戏来锻炼你的React技能，我有一篇关于在React-js中创建井字游戏的小文章，并把它放在GitHub上。</p><h1 id="5eb1" class="ls li iq bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo bi translated">参考</h1><ol class=""><li id="c32b" class="nb nc iq jp b jq mp ju mq jy nd kc ne kg nf kk ng nh ni nj bi translated">演示<a class="ae lb" href="https://umangshrestha.github.io/snake-game/" rel="noopener ugc nofollow" target="_blank">这里</a></li><li id="9085" class="nb nc iq jp b jq nk ju nl jy nm kc nn kg no kk ng nh ni nj bi translated">源代码<a class="ae lb" href="https://github.com/umangshrestha/snake-game" rel="noopener ugc nofollow" target="_blank">此处</a></li></ol><p id="0c63" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="np">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="np">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
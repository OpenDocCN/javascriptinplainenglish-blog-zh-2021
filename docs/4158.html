<html>
<head>
<title>How do Functions and Variable Environment Work Together in JavaScript?👀</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中函数和变量环境是如何协同工作的？👀</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-do-functions-and-variable-environment-work-together-in-javascript-f3ce1f55863d?source=collection_archive---------11-----------------------#2021-08-18">https://javascript.plainenglish.io/how-do-functions-and-variable-environment-work-together-in-javascript-f3ce1f55863d?source=collection_archive---------11-----------------------#2021-08-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/dc89debed311f545174cc0eb5f00c2e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*pOXOJCx4OTEh7-4M_ar1jg.png"/></div></figure><p id="0dd4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我知道你以前也使用过函数。但是你真的知道JavaScript中的函数是如何工作的吗？</p><h1 id="0ca0" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">JavaScript如何对待函数和可变环境？</h1><p id="3eec" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">让我们一起找出答案…</p><p id="1f04" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">下面我们有一个非常小的简单程序。是的，这将在阅读的几分钟内让你大吃一惊。</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="0e03" class="mb kq in lx b gy mc md l me mf">var x = 1;<br/>a();<br/>console.log(x);<br/><br/>function a() {<br/>  var x = 10;<br/>  console.log(x);<br/>}</span></pre><p id="7082" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">请打开开发人员控制台，并使用键盘快捷键Ctrl+Shift+J(在Windows上)或Ctrl Option J(在Mac上)。在console选项卡中，一旦JavaScript运行上述程序，您将能够看到这一点。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/4b8f149299f12d1fa2872206c2a02457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*DAebHv4gF0QsYKoh_pRJQQ.png"/></div></figure><p id="4e20" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">到目前为止，你所做的一切都可能是你已经知道的事情。但真正的乐趣才刚刚开始。</p><p id="72e9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我们在第1行放置一个调试器。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/2527d1b343154ba19691b2184a57c58d.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*tvf-QD3zKneo5Qzr3zy5_A.png"/></div></figure><p id="a141" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这里，JavaScript为程序创建了一个全局执行上下文。它已被推入调用堆栈，控件位于第1行。</p><p id="9c1b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">哦，等等！你不知道什么是<em class="mi">全局执行上下文</em>？然后继续读下去…</p><p id="d1bf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">全局执行上下文有两个组成部分。</p><ol class=""><li id="d1b8" class="mj mk in jt b ju jv jy jz kc ml kg mm kk mn ko mo mp mq mr bi translated">可变环境阶段也称为记忆阶段。</li></ol><p id="789a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2.代码执行阶段。</p><p id="d932" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在变量环境阶段，JavaScript为变量和函数分配内存。对于变量，它分配关键字' undefined ',对于函数，它分配它的函数体本身作为内存。</p><p id="5571" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在代码执行阶段，JavaScript按顺序执行程序行。</p><p id="f00c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在这个问题已经解决了，请继续阅读…</p><p id="c5d5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">因为控件在第1行。JavaScript将“未定义”分配给变量“x”和函数a()，它已经分配了其函数体。</p><p id="50dc" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们将调试器放在第2行，并单击调试器播放按钮。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/9d304c4ab2c8e6bf43a3f7c8c360d5c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/1*w5KinMzGn3A_zc4iL7hRZQ.png"/></div></figure><p id="dd80" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在执行了第1行，JavaScript将值1分配给变量x。</p><p id="91cc" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们将调试器放在第6行，并单击调试器play按钮。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/ff4e2d3745d247c1665dc578a710914f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*UpL7NzeB348zuuCiAjAhUQ.png"/></div></figure><p id="3b3c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这里JavaScript为函数a()创建了一个新的执行上下文。这已被推送到调用堆栈。现在控制权交给了一个()。这还没有结束。JavaScript还专门为函数a()创建了一个新的本地内存和全局内存。</p><p id="c95e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">至于内存阶段，JavaScript将关键字“undefined”分配给函数a()的本地内存中的变量。</p><p id="c338" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们将调试器放在第7行，并单击调试器play按钮。</p><p id="4d3d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">JavaScript在本地内存中查找变量x，并将值‘10’分配给变量x。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/438f78dd29c1eb05c32026952f6e405b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/1*RjJVS6fyu5nbAalHxyk26w.png"/></div></figure><p id="c980" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在让我们将调试器放在第3行，并单击调试器播放按钮。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/8772449aaa3cde81a28d2c4ef26027fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*enZ4FSGsF8ncNUVIpO7f1Q.png"/></div></figure><p id="6102" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以注意到，在调用堆栈中，刚刚弹出了函数a()的执行上下文，现在控件在第3行返回到全局执行上下文。</p><p id="b019" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果你现在打开控制台标签，你会看到下面一行。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/b84a708c0358f2103db37ce23549f3c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*5hkUUrVeJnYEzIar1_nnUA.png"/></div></figure><p id="1722" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在最后一次点击调试器播放按钮。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/4259f9042c48245c80ccf71db5dabc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*V23h9InxRmQ967b3F8OeWg.png"/></div></figure><p id="d3a9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">JavaScript运行剩下的程序。它在全局内存中查找变量x，并将值“1”分配给变量x。现在，它在调用堆栈中完成了全局执行上下文。现在，全局执行上下文刚刚从堆栈中弹出。调用堆栈现在是空的。</p><p id="919b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">转到控制台选项卡，您会看到下面几行。</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/4b8f149299f12d1fa2872206c2a02457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*DAebHv4gF0QsYKoh_pRJQQ.png"/></div></figure><p id="51c4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这就是JavaScript中函数和变量环境的协同工作方式。</p><p id="99ec" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">你没有被吹走吗？</p><p id="24aa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">哈哈！我知道这一切都很棒。</p><p id="26f9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果你做到了这一步，那么恭喜你！您刚刚了解到:</p><ul class=""><li id="f757" class="mj mk in jt b ju jv jy jz kc ml kg mm kk mn ko my mp mq mr bi translated">如何在控制台中使用调试器？</li><li id="bee3" class="mj mk in jt b ju mz jy na kc nb kg nc kk nd ko my mp mq mr bi translated">JavaScript如何处理函数和可变环境。</li><li id="2d5d" class="mj mk in jt b ju mz jy na kc nb kg nc kk nd ko my mp mq mr bi translated">调用堆栈如何工作。</li><li id="1c0a" class="mj mk in jt b ju mz jy na kc nb kg nc kk nd ko my mp mq mr bi translated">函数调用是如何在幕后发生的。</li></ul><p id="05bf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果你从这个博客中学到了什么，那么请留下一个赞，并评论你对这个博客的感受。</p><p id="ddb3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="mi">更多内容看</em><a class="ae ne" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="mi">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
# 赢得系统设计面试的八步指南

> 原文：<https://javascript.plainenglish.io/8-steps-guide-to-ace-a-system-design-interview-7a5a797f4d7d?source=collection_archive---------0----------------------->

![](img/e2a9578d3c41d8e2a4b8703ddf75d288.png)

Photo by [UX Store](https://unsplash.com/@uxstore?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

## 了解如何进行系统设计面试，并在你梦想的公司找到一份工作。

系统设计已经成为软件开发人员面试的重要环节之一，尤其是对于高级职位。为这一轮面试做准备是很有必要的，这样才能成功面试一些最受欢迎的公司，比如亚马逊、网飞、谷歌、推特等等。

在这一轮中，你基本上要讨论一个大型分布式系统的设计，比如 Twitter、优步、脸书、Dropbox 等。

在设计系统时，没有唯一正确的解决方案。解决一个问题可以有多种方法，因此这一轮将是一个开放式的回合，重点是工作设计+你的思维过程。

# 为什么准备系统设计面试很重要？

由于缺乏在日常工作中构建可伸缩系统的经验或知识，许多开发人员都在这一轮中挣扎。即使在成为一名优秀的软件开发人员后，他们也无法进入优秀的公司，因为他们没有通过这一轮。

所以关注这一轮很重要，做好充分准备才能进入你梦想中的公司。

# 在系统设计面试中会有什么期待？

伟大的工程师花费数年时间来构建一个健壮的、可扩展的系统。在系统设计面试中，你不可能在 1-1.5 小时的短时间内提出类似的解决方案。

所以这一轮通常只讨论整个系统的一部分。

如前所述，在设计一个好的系统时，没有一个正确的解决方案。这一轮通常是开放式的，讨论可以根据面试官感兴趣的内容、你如何引导讨论以及你的讨论方向进行。

# 系统设计面试中提问的示例问题

*   设计一个像 WhatsApp 一样的聊天服务
*   设计一个停车场
*   设计一个类似 TinyURL 的 URL 缩写服务
*   设计一个像 YouTube/网飞这样的视频流服务
*   设计一个类似 Google Drive 的文件共享服务
*   设计一个社交媒体平台，比如 Instagram、Twitter 或脸书。

这是这一轮中被问及的一些常见问题。正如你所看到的，问题是模糊的，问题陈述没有提供系统应该设计哪一部分的具体细节。

因此，了解如何在这一轮讨论结束时拿出一个好的设计非常重要。

# 不同的系统设计回合

系统设计通常分为两个独立的部分。

但还是那句话，这取决于公司及其流程。因此，在这一轮中，要做好设计系统的高层和低层组件的准备。

*   高层设计
*   低层次设计

## **高层设计:**

这一轮主要检查您为给定需求构建和设计高级组件的能力。

例如，给定一个类似**的问题陈述，设计一个类似 Instagram** 的社交媒体平台，你需要提出你将需要的不同微服务、发布订阅机制(如果需要)、队列、数据库、缓存等。

面试官会问一些问题，比如数据在设计中如何流经不同的微服务、容错、重试机制等。您还可能会遇到关于非功能性需求的问题，如可伸缩性、数据一致性、并发性等。

构建一个分布式可伸缩系统是很困难的。在设计架构时，您需要考虑不同的场景。

## 为 HLD 回合做准备时，您应该了解的不同概念:

*   分布式系统的关键特征
*   负载平衡
*   贮藏
*   数据划分
*   指数
*   委托书
*   冗余和复制
*   SQL 与 NoSQL
*   CAP 定理
*   一致散列法
*   长轮询 vs WebSockets vs .服务器发送事件

## 低层设计:

这一轮主要考察你设计你的 HLD 的底层组件的能力。给定一个问题陈述，你应该用不同的实体、类和属性、继承、组合、设计模式、数据库、表和模式等提出一个设计。

你不可能在一轮面试中涵盖所有这些。面试官可能会对任何人感兴趣，这取决于讨论的进展。

## 为 LLD 回合做准备时，您应该了解的不同概念:

*   用户模式
*   用例图
*   类图
*   数据库设计
*   程序表
*   活动图
*   关注点分离
*   OOP 原则
*   坚实的原则等

# 如何接近一轮系统设计面试？

下面是我的有效处理系统设计回合的八步指南。

## **第一步:问很多问题，确定面试的范围:**

系统设计问题陈述含糊不清。没有一个正确的答案。因此，提出大量问题并明确讨论的范围非常重要。

提问多的考生成功几率更大。例如，以下是您可以针对*设计 Instagram* 问题提出的一系列问题:

*   *有哪些不同类型的账户？
    答:仅限用户。我们现在不考虑商业账户*
*   *用户可以发布什么类型的帖子？
    答:让我们考虑一下，在这次讨论中，用户只能发布图片。视频不在讨论范围内。*
*   *用户可以关注其他用户吗？答:是*
*   我们应该支持每个帖子的标签吗？答:是的
*   *帖子可以私密吗？
    答:让我们假设帖子只能在这个讨论中公开。*
*   *用户可以搜索帖子吗？答:是的*
*   我们应该关注客户端架构还是服务器端架构？答:我想从更高的层面上理解客户机-服务器的交互。但是重点应该更多地放在构建一个可伸缩的后端系统上。
*   预计每天会有多少用户使用该系统？
    答:假设我们每天有大约 1 亿用户登录。
*   *我们是否应该专注于生成用户的主页订阅源？
    答:我们不要关注提要生成算法*
*   *我们应该关注系统的高层设计还是低层设计？
    答:让我们在本次讨论中讨论系统的高层设计*

这些是你可以用来设定讨论范围的一些示例问题。正如你现在看到的，我们知道我们需要专注于建立 Instagram 的高层次设计。我们不需要考虑用户发布视频。我们不需要考虑以智能的方式生成用户的 home feeds。等等

## 步骤 2:系统界面定义

一旦我们最终确定了需求，下一步就是提出构建系统所需的 API 列表。

您应该定义不同的 REST APIs 及其契约来支持给定的需求。

例如，在我们的 Instagram 示例中，以下是我们需要的一些示例 API:

***storePhoto(user_id，tags，image_url，user_location，…)
get photo(image _ id)
like photo(image _ id，user_id)***

当然，这些都是示例 API。真实应用程序中使用的 API 要复杂得多。

## **第三步:容量估算和限制**

您的系统应该有足够的存储和资源来处理预期的负载和可能在 1 年后、5 年后使用您的系统的用户数量，等等。

因此，在设计系统时，估计您需要分配多少资源以避免将来遇到问题是非常重要的。

如果您的系统设计中有数据库，系统中有高速缓存，则容量估计过程通常涉及计算所有数据库和高速缓存集群每天使用多少内存。

这给了我们一个很好的估计，从现在起，我们将需要多少内存。

容量估计也有助于我们设计系统，使其可以横向和纵向扩展，以满足未来更高的容量需求。

**下面是在我们的 Instagram 例子中存储照片需要多少存储空间的计算:** *基于我们上面的假设，我们每天有 1 亿用户登录。*

假设 100 万用户平均每天上传 2 张照片。

*2M 的照片每天都在上传*

*这相当于每秒增加 23 张照片*

*让我们假设平均照片大小为 400KB*

*每天需要的存储:2M * 400KB = > 800 GB*

*5 年所需存储:
800GB * 365(一年天数)* 5(年)~= 1425TB*

*10 年所需存储:
800GB * 365(一年天数)* 10(年)~= 2850TB*

## **第四步:概要设计**

此时，列出系统中涉及的所有高级组件以及它们之间的交互方式会有所帮助。

可以是微服务、数据库、缓存、消息队列、低成本存储服务等。

对于我们的 Instagram 示例，我们可以创建两个独立的微服务。一个服务负责上传照片。另一个检索照片的服务。

你可能会问，两个独立的微服务有什么意义？

这是因为上传照片的请求通常低于阅读照片的请求。因此，我们可以根据流量需求分别扩展服务。

我们甚至可以使用低成本存储来存储照片，并使用 SQL 元数据数据库来存储照片的详细信息，如上传者、位置、图像名称、大小、创建时间等。

一旦做好准备，您应该能够解释数据将如何流经这些高级组件。

## **第五步:数据库模式设计**

在数据库设计中，我们决定哪种数据库适合我们的用例:SQL 或 NoSQL，以及实体和它们之间的关系。

如果我们正在构建一个涉及资金流动的银行应用程序，我们就不能使用本质上最终一致的 NoSQL 数据库。

同样，我们不能使用数据变化非常频繁的 SQL 数据库。在我们的 Instagram 示例中，我们可以使用 NoSQL 数据库来存储帖子的元数据细节。

为什么？

因为一个帖子可能有一些属性，如赞、图片 url、创建者、创建者等。但是在未来，假设我们想要引入其他特性，比如不喜欢、标签等，使用 NoSQL 数据库可以很容易地做到，而不需要任何模式改变。

## **第六步:班级设计**

在类设计中，我们提出了共享相同职责、关系、操作、属性和语义的低级类实体。

我们基本上列出了类、它们的属性、方法以及它们与其他类的关系。

对你的评价取决于你是否使用了正确的面向对象的概念、原则和设计模式。一个好的系统的设计要牢记所有这些:**抽象、封装、继承&多态。**

了解**坚实的原则(面向对象设计的前 5 条原则)**也很重要。这些原则将有助于您设计更易于维护和扩展的软件。

*   单一责任原则
*   **O** —开闭原理
*   **L** —利斯科夫替代原理
*   **I** —界面分离原理
*   **D** —依存倒置原则

## 第七步:缓存

缓存是一种高速的内存数据存储层，用于存储数据以供将来更快地访问。这是提高整体系统性能的一种方法。缓存在任何需要伸缩的系统中都很重要。

我们基本上缓存经常使用的数据。与每次从数据库中访问数据相比，这样做将使应用程序花费更少的时间。

在我们的 Instagram 示例中，我们可以缓存照片的元数据，如 *created_by、location、created_at、*等，因为对于给定的照片，这些参数永远不会改变。像评论、喜欢等其他参数不能被缓存，因为它们经常改变。

当我们开始在设计中使用缓存时，我们还需要考虑驱逐策略。由于缓存比数据库存储更昂贵，我们必须检查我们存储在缓存中的数据量。所以缓存回收变得很重要。

有许多驱逐政策，如 LRU(最近最少使用)，先进先出(先进先出)，LFU(最少使用)，等等。

## **第 8 步:数据分区/分片**

我们的应用程序中的所有数据经常无法存储在一台数据库服务器上。在这种情况下，我们需要想出在多个数据库服务器上存储数据的策略。

在这里，我们基本上将大型数据集分割成多个块(逻辑分区)，并将这些块存储在多个节点上。

分片是扩展不断增长的应用程序的好技术。

对数据进行分区的技术有很多:
1 .基于范围的划分
2。基于散列的分区
3。基于目录的分区。垂直分区等

您应该阅读这些内容，以便了解哪些分区方案适用于哪些场景。

这 8 个步骤的方法给你一个处理任何系统设计问题的框架。但是请记住，面试官可能对这些步骤中的任何一个都感兴趣，在这种情况下，你应该只关注这一步，并找出细节。

# **更多提示**

## **系统前秤**

许多候选人甚至在设计出一个工作系统之前，就试图专注于构建一个可伸缩的系统。首先专注于构建系统，然后考虑扩展它。

## **从高层开始，然后向下钻取**

从写下我们正在构建的系统所需的高级组件开始。然后深入调查面试官建议的任何一个较低层次的组成部分。

这能让你头脑清晰，帮助你在面试中设计出更好的系统。

## **提及你做出的所有假设**

你应该在面试中提到你所做的所有假设。你和面试官意见一致是很重要的。

## **考虑功能和非功能需求**

在设计系统时，记住功能性和非功能性需求。

有时很难支持非功能性需求，如一致性、可用性、数据持久性等。

## **核心算法**

有些系统需要实现一个核心算法才能工作。例如，如果你想设计一个类似 TinyURL 的系统，你需要提出一个算法来为一个给定的长 URL 生成微小的 URL。

没有多少系统设计问题需要复杂的算法来实现。

## **设计合适的秤**

基于所需的规模，相同的系统可以以完全不同的方式设计。因此，在讨论开始时，澄清你正在设计的系统的规模。

# 准备系统设计面试的推荐课程:

以下是我推荐的准备系统设计面试的最佳课程:

1.  [钻研系统设计面试](https://www.educative.io/courses/grokking-the-system-design-interview?aff=xmn2)
2.  [钻研面向对象设计面试](https://www.educative.io/courses/grokking-the-object-oriented-design-interview?aff=xmn2)
3.  [科技假人纳伦德拉·L](https://www.youtube.com/channel/UCn1XnDWhsLS5URXTi5wtFTA)
4.  [gaur av Sen 的系统设计](https://www.youtube.com/playlist?list=PLMCXHnjXnTnvo6alSjVkgxV-VH6EPyvoX)
5.  [底层设计|代码匹配](https://www.youtube.com/playlist?list=PLAC2AM9O1C5KioUMeH9qIjbAV_RMmX8rd)

# 结论

*   将系统设计面试视为与同事的开放式讨论。
*   你不可能在给定的 1-1.5 小时内为一个系统想出最好的解决方案。
*   阐明所有要求并设定讨论范围。
*   确保你和面试官在整个讨论过程中意见一致。
*   了解如何估计未来 5-10 年所需的数据容量，并根据预期容量设计系统。
*   提及你在面试中做出的所有假设。
*   给定一个问题陈述，首先尝试考虑所有的高级组件(服务、数据库、缓存、消息队列等)。然后弄清楚系统的底层细节。
*   学习如何设计类、数据库和 API 是很重要的。
*   对于低层次设计面试来说，学习面向对象和坚实的原则是很重要的。
*   面试官想知道你是如何处理一个给定的问题及其背后的思维过程的。只要你能够证明为什么一个组件是以某种方式设计的，你就是优秀的。
*   练习解决系统设计问题。这是这一轮做好的唯一方法。

*更多内容看*[***plain English . io***](http://plainenglish.io/)
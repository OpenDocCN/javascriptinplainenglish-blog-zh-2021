<html>
<head>
<title>How to Get Jest working with PixiJS in Create React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何让Jest在Create React应用程序中使用PixiJS</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-jest-working-with-pixijs-in-create-react-app-using-vscode-af5b50024e89?source=collection_archive---------16-----------------------#2021-04-20">https://javascript.plainenglish.io/getting-jest-working-with-pixijs-in-create-react-app-using-vscode-af5b50024e89?source=collection_archive---------16-----------------------#2021-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b863" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">最近，当我将<a class="ae kc" href="https://www.pixijs.com/" rel="noopener ugc nofollow" target="_blank"> PixiJS </a>添加到我的React应用程序后，我的测试运行成功时遇到了一个问题</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/5b0eca347f619e837453ac9697e5363d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCvUWgkWiVoLOGP2xRWycg.png"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">TypeError: Cannot set property ‘fillStyle’ of null</figcaption></figure><p id="ecd0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在谷歌上搜索了一下之后，我意识到很多解决方案都已经过时了，或者根本不适合我的本地环境。有些帖子问“<em class="lp">这个神秘的setupTests.js文件是什么？</em>"没有回答。</p><p id="e086" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了设置场景，我使用了<a class="ae kc" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VS代码</a>中的<a class="ae kc" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank"> Create React App </a>和内置的<a class="ae kc" href="https://create-react-app.dev/docs/running-tests/" rel="noopener ugc nofollow" target="_blank"> JEST </a>。</p><p id="d2f0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我终于找到了解决办法。下面是我做的工作</p><h2 id="3e29" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated"><strong class="ak">第一步。使用NPM安装<a class="ae kc" href="https://github.com/hustcc/jest-canvas-mock#readme" rel="noopener ugc nofollow" target="_blank"> jest-canvas-mock </a></strong></h2><p id="20a4" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">在VS代码的终端中，运行以下命令:</p><p id="c5c8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mo mp mq mr b">npm install jest-canvas-mock</code></p><p id="f0c9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这增加了画布支持，可能足以让你的测试工作，<strong class="kv io">对我来说还不够。</strong>。我仍然得到了错误，不得不做以下步骤..</p><h2 id="1931" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated"><strong class="ak">第二步。确保你在src文件夹中有一个<strong class="ak"> setupTests.js </strong>文件。</strong></h2><p id="4c6e" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">对我来说，这个文件不在那里，我必须创建它。我认为这是大多数人陷入困境的地方。我可以看到，如果你用<code class="fe mo mp mq mr b">npx create-react-app my-app</code>设置create-react-app，它是存在的，我仍然不知道为什么它从我的项目中消失了。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/1f7330c3b0cc6f1de2949fe95854d380.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*98UrXZv3okWEj53klkCYBw.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">setupTests.js location</figcaption></figure><h2 id="c5ff" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated"><strong class="ak">第三步。</strong>在setupTests.js文件中导入jest-canvas-mock</h2><p id="811b" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">在<strong class="kv io"> setupTests.js </strong>文件的顶部添加以下导入:</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/cdd8a6ce798f2fd90c907430c414512f.png" data-original-src="https://miro.medium.com/v2/resize:fit:912/format:webp/1*pXPtH9hCBrCMNNoR6S7TpA.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">import ‘jest-canvas-mock’;</figcaption></figure><h2 id="6c5b" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated"><strong class="ak">步骤四。再次运行测试</strong></h2><p id="444c" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">现在测试应该超越这个错误，对我来说，我得到了一个成功的结果。</p><h2 id="6043" class="lq lr in bd ls lt lu dn lv lw lx dp ly lc lz ma mb lg mc md me lk mf mg mh mi bi translated">结论</h2><p id="bc22" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc ml le lf lg mm li lj lk mn lm ln lo ig bi translated">我希望这能帮到你。我浪费了相当多的时间来寻找这个错误的解决方案，就像大多数事情一样，一旦解决，它似乎很简单。但愿我帮你节省了一些时间。</p><p id="3ce6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="lp">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="lp">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
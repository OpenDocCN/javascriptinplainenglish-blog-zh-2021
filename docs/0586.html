<html>
<head>
<title>Creating a Chrome Extension with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React创建Chrome扩展</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-chrome-extension-with-react-d92db20550cb?source=collection_archive---------0-----------------------#2021-02-05">https://javascript.plainenglish.io/creating-a-chrome-extension-with-react-d92db20550cb?source=collection_archive---------0-----------------------#2021-02-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="d6e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上周，我开始为一个产品构建Chrome扩展。该扩展是用React作为视图引擎构建的，用于呈现弹出窗口。所以我想把它记录下来，让所有开始做这件事的人都能相处得更好。</p><p id="15df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇博客中，我们将介绍使用React构建Chrome扩展的过程。在此之后，您可以非常方便地添加更多的功能。</p><p id="63e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Github库的链接:<a class="ae ki" href="https://github.com/onlyoneaman/chrome-extension-react" rel="noopener ugc nofollow" target="_blank">https://github.com/onlyoneaman/chrome-extension-react</a></p><p id="a161" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以让我们开始吧。</p></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><h1 id="b489" class="kq kr in bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln bi translated">扩展的特性</h1><p id="2665" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">这个扩展可以访问你的活动标签并改变页面的背景颜色。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi lt"><img src="../Images/aaa015a4a5afc54be5d007bf9a725639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T2tg2PB84YMlgMRNZKD8Aw.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Before</figcaption></figure><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div role="button" tabindex="0" class="lz ma di mb bf mc"><div class="gh gi mj"><img src="../Images/6e03666e54c53c7f4afe88227e4ad912.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bDnUtho_VCHQ4bWbn-M3Sg.png"/></div></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">After</figcaption></figure><h2 id="72ca" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">扩展基本</h2><p id="7060" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在深入细节之前，让我们先看一下基于chromium的浏览器的一个扩展的基本结构。</p><p id="6df0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个扩展结构可以在Chrome、Edge和Brave上工作，也许还可以在其他我不知道的基于Chrome的浏览器上工作。</p><p id="7bce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">扩展有几个关键部分:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/1cefbc391851c208b40e1d6464c563e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/0*pzNtz4WMONJPsHpI.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Structure of a Chrome extension</figcaption></figure><h1 id="7d45" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">显示</h1><p id="9867" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">清单描述了源包中的内容。它指定了浏览器在哪里可以找到背景，内容脚本，弹出和选项页面。它还描述了扩展所需的权限。</p><h1 id="0b86" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">背景</h1><p id="bf77" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">当扩展启动时启动的一段代码，直到扩展被移除或浏览器关闭才会终止。</p><p id="d75b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">后台代码可以访问所有Chrome APIs，其他部分受限。但是后台没有UI，不能访问DOM。</p><h1 id="3b1a" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">弹出</h1><p id="8ce8" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">当用户点击浏览器地址栏右边的扩展图标按钮“浏览器操作”时，弹出用户界面。</p><p id="d07e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">大多数扩展需要一个弹出窗口作为入口。</p><h1 id="4900" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">选择</h1><p id="52b2" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">这是扩展的可选部分。并非所有扩展都有选项页。它被用作扩展的配置UI。您的扩展必须为它提供一个条目。</p><p id="7e38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你有一些复杂的东西要配置，你需要这个。</p><h1 id="3c39" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">内容脚本</h1><p id="8863" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">内容脚本是一段JavaScript，它在一个带有特定URL的选项卡中运行。URL模式在manifest.json中定义，如果在manifest.json中指定了与之匹配的URL，浏览器将启动内容脚本。当URL改变或标签关闭时，它将被终止。</p><p id="4810" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想操作DOM，你需要内容脚本。</p><p id="bd64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以你应该已经知道这些部分现在在做什么了。</p><h1 id="6ab4" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">这个扩展涉及到哪些部分？</h1><p id="b947" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">背景:本教程中没有，但是回购中有一个空的<strong class="jm io"> background.js </strong>供将来使用。</p><p id="1e1a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">弹出窗口:是。这是本文的重点。我将向你展示如何在React中编写一个弹出窗口。</p><p id="2f47" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">选项:否。</p><p id="ecbd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">内容脚本:没有。</p><h1 id="46c9" class="kq kr in bd ks kt mx kv kw kx my kz la lb mz ld le lf na lh li lj nb ll lm ln bi translated">我们开始吧</h1><h2 id="4b5d" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated"><strong class="ak">第一步。为扩展</strong>创建一个目录</h2><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="5dd1" class="mk kr in nd b gy nh ni l nj nk">mkdir chrome-extension-example<br/>cd chrome-extension-example</span></pre><h2 id="960b" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated"><strong class="ak">第二步。在目录</strong>中创建一个React应用</h2><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="817f" class="mk kr in nd b gy nh ni l nj nk">npx create-react-app extension</span></pre><p id="be18" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nl">我假设你已经在你的机器上安装了</em> <strong class="jm io"> <em class="nl">节点</em> </strong> <em class="nl">和</em><strong class="jm io"><em class="nl">NPM</em></strong><em class="nl">。</em></p><p id="cebb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将创建一个常规的React应用程序。</p><h2 id="cc9c" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated"><strong class="ak">第三步。创建manifest.json </strong></h2><p id="55a8" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在扩展的根目录下创建manifest.json文件</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="0656" class="mk kr in nd b gy nh ni l nj nk">touch manifest.json</span></pre><h2 id="3c22" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated"><strong class="ak">第四步。修改man feist . JSON</strong></h2><p id="9ed1" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">现在，在您选择的代码编辑器中打开扩展并更新manifest.json:</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">manifest.json</figcaption></figure><h2 id="cff3" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第五步。徽标图像</h2><p id="7795" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">下载徽标的zip文件并解压到扩展名<br/>的根目录<a class="ae ki" href="https://www.filehosting.org/file/details/921341/images.zip" rel="noopener ugc nofollow" target="_blank">下载链接</a>:</p><h2 id="3853" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第六步。在package.json中添加脚本</h2><p id="af71" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在扩展的package.json文件中，在脚本中添加以下内容:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="08d1" class="mk kr in nd b gy nh ni l nj nk">"move": "yarn build &amp;&amp; rm -rf ../static &amp;&amp; mv build/static ../static</span></pre><p id="65eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用这个脚本来构建我们的应用程序。此外，因为像图像和文件这样的所有资源都需要位于扩展的根目录，而不是react应用程序，所以我们将build中的静态文件夹移动到扩展的根目录。</p><h2 id="7523" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第七步。更新React应用程序中的代码</h2><p id="3d3e" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在我们的应用程序中，当点击一个功能<code class="fe no np nq nd b">changeColor</code>时，我们需要一个按钮。</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">App.js</figcaption></figure><p id="0e26" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来在src/react app中创建一个函数main.js，内容如下。这里，我们有一个函数<code class="fe no np nq nd b">changeColor</code>在调用改变颜色按钮时被调用。它在Chrome存储器中设置绿色，并获取当前活动的选项卡，并在该选项卡上执行脚本。</p><figure class="lu lv lw lx gt ly"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">main.js</figcaption></figure><p id="f8b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nl">注意这个文件上面的</em> <code class="fe no np nq nd b"><em class="nl">/*global chrome*/</em></code> <em class="nl">。这是为了避免与Eslint的林挺问题。如果您错过了这一点，您的react应用程序将返回错误。</em></p><h2 id="ab53" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第八步。添加脚本以更改背景颜色</h2><p id="75aa" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在扩展名的根目录下创建一个脚本文件夹，并创建一个包含以下内容的文件<code class="fe no np nq nd b">changeBgColor.js</code></p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="48a1" class="mk kr in nd b gy nh ni l nj nk">chrome.storage.sync.get("color", ({ color }) =&gt; {<br/>  document.body.style.backgroundColor = color;<br/>});</span></pre><p id="3dea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这在react应用程序中已经足够了，我们不会在这里触及css，如果你愿意，你可以玩它。</p><h2 id="1dcb" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第九步。构建并加载到Chrome中</h2><p id="233b" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">在(React应用程序的)扩展目录中，运行</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="d8e1" class="mk kr in nd b gy nh ni l nj nk">npm run move<!-- --> </span></pre><p id="bf2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在在<code class="fe no np nq nd b">chrome://extensions</code>中加载Chrome扩展目录作为解压后的扩展。</p><p id="2754" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nl">如果您的开发者模式开启，则这些选项可用。</em></p><p id="848c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">点击改变按钮颜色，并检查它是否工作。如果扩展正常工作。你会看到:</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/343532ae9de51df927cd7848bf571947.png" data-original-src="https://miro.medium.com/v2/resize:fit:462/format:webp/1*Oio2yXjIanfRc70YkkPukw.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Working Version of extension</figcaption></figure><p id="4297" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你看不到以上内容，那么代码或执行中有一些错误，请检查Chrome扩展的错误。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/6d7b9cad61e98a658db01ed8cb07d6ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:862/format:webp/1*ea0C1oedE--HTLMf_ivdqQ.png"/></div></figure><p id="58a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您看到如下错误:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="78e9" class="mk kr in nd b gy nh ni l nj nk">Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' blob: filesystem:".</span></pre><p id="aef1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">检查下一个处理修复这个问题的步骤。否则，会有一些错误，试着调试一下，不会很难。</p><p id="4e9d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">其他一些可能的错误包括:</p><ul class=""><li id="356f" class="nt nu in jm b jn jo jr js jv nv jz nw kd nx kh ny nz oa ob bi translated">文件夹或文件不在适当的位置。</li><li id="515b" class="nt nu in jm b jn oc jr od jv oe jz of kd og kh ny nz oa ob bi translated">您的系统或代码编辑器默认设置或linter可能与代码有关。</li></ul><h2 id="481f" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">第九步。为安全性添加sha密钥</h2><p id="27e3" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">你应该仔细关注这一步的两个原因。</p><p id="2eaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您的扩展显示<code class="fe no np nq nd b">security policy directive</code>错误，点击扩展后，您会看到如下屏幕。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/a622f4580a9f18b90d5d66a726c237bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*iTuHmxotkIxr5aC851uFQA.png"/></div><figcaption class="mf mg gj gh gi mh mi bd b be z dk">Extension not working</figcaption></figure><p id="09ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可能会在未来面对这个错误，并因此可以看到如何解决这个问题。</p><p id="9de0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，Chrome不允许你执行内联javascript代码。认为你没有添加任何内联代码？记住React生成的构建已经为你准备好了。因此，我们必须配置扩展以允许内联执行。</p><p id="9481" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这可以通过在manifest.json的<code class="fe no np nq nd b">content_security_policy</code>头中添加一个特定的关键字来实现。</p><p id="df8d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将是chrome生成的内联函数的sha-key，你可以在错误本身中找到它。</p><figure class="lu lv lw lx gt ly gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/2a7fcd1ad558a9597a22ce31d051c360.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*2WZS99RHvYZuXe8a7nr94g.png"/></div></figure><p id="f900" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，复制这个散列并粘贴到<code class="fe no np nq nd b">content security policy</code>头中，如下所示:</p><pre class="lu lv lw lx gt nc nd ne nf aw ng bi"><span id="fcf2" class="mk kr in nd b gy nh ni l nj nk">'content_security_policy': "script-src 'self' 'sha256-fdAfMKZtCTRPKMRznGwonJHC++vCCrQS7XFnVrzSXAE=';"</span></pre><p id="5af0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将解决问题。如果有更多这样的错误，你将不得不为每个函数添加sha键。</p><p id="a84f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">尝试在<code class="fe no np nq nd b">chrome://extensions</code>中重新加载扩展，扩展现在可以工作了。</p></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="c57f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">React扩展运行良好。😃</p><h2 id="e250" class="mk kr in bd ks ml mm dn kw mn mo dp la jv mp mq le jz mr ms li kd mt mu lm mv bi translated">结论</h2><p id="d453" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">我们做到了！我们已经创建了自己的(基本的)Chrome扩展。现在，您有希望拥有创建一个基础所需的工具，您可以在此基础上进行构建。</p><p id="9be2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更新08/03/2021:最近，Chrome不赞成在低于3的清单版本中使用<code class="fe no np nq nd b">action</code>。以前，建议只在清单v3中使用action，这不是必须的。由于v3中的CSP问题，我们仍然将repo保留在清单v2中，并且将<code class="fe no np nq nd b">action</code>更改为<code class="fe no np nq nd b">browserAction</code>将单独工作。<br/>如果您遇到问题，只需将清单中的<code class="fe no np nq nd b">action</code>更改为<code class="fe no np nq nd b">browserAction </code>即可使扩展工作。</p></div><div class="ab cl kj kk hr kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ig ih ii ij ik"><p id="9649" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">🙋🏽‍♂️ <strong class="jm io">让我们成为朋友吧！</strong>在<a class="ae ki" href="https://twitter.com/onlyoneaman" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，在<a class="ae ki" href="https://www.linkedin.com/in/onlyoneaman" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。别忘了在<a class="ae ki" href="https://onlyoneaman.medium.com" rel="noopener"> Medium </a>上关注我，获取更多精彩内容。</p><ul class=""><li id="fa66" class="nt nu in jm b jn jo jr js jv nv jz nw kd nx kh ny nz oa ob bi translated">如果你想评论/分享想法/观点，请说吧！</li><li id="5c75" class="nt nu in jm b jn oc jr od jv oe jz of kd og kh ny nz oa ob bi translated">你喜欢这个博客吗？考虑到 <a class="ae ki" href="https://www.buymeacoffee.com/onlyoneaman" rel="noopener ugc nofollow" target="_blank"> <em class="nl">请我喝杯咖啡</em> </a> <em class="nl">💻☕️.</em></li></ul></div></div>    
</body>
</html>
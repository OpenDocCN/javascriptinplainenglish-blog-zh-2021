<html>
<head>
<title>A Quick Look at the JavaScript call() Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速浏览一下JavaScript call()方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-quick-look-at-the-javascript-call-method-b5b2383eb4e6?source=collection_archive---------10-----------------------#2021-05-08">https://javascript.plainenglish.io/a-quick-look-at-the-javascript-call-method-b5b2383eb4e6?source=collection_archive---------10-----------------------#2021-05-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bf6ab50ec9a1616268c7fd8f80dd5122.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tE-oZMYDwvVkXOdh"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jstrippa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9bc6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我找到了一条全栈web开发的道路，虽然我有一点非典型的背景。我是一名演员、作家、导演和音乐家。全栈web开发和设计对我来说是一个非常自然的选择，因为它提供了锻炼我的想象力和在web视觉设计中美学表达的机会。</p><p id="9c84" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">像我们许多从事或学习软件工程和设计的人一样，我坚信最好的老师之一是通过与他人分享知识来测试你的技能。</p><p id="c046" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我打算写的3篇文章中的第一篇，这3篇文章是关于JavaScript函数对象公开的3个非常有用的方法——call()、<strong class="kc io">、bind()、</strong>和<strong class="kc io"> apply() </strong>。这些方法彼此相似，因此很难学习。</p><p id="2737" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">本文中的演示迷你项目并不打算成为一篇关于使用<strong class="kc io"> call() </strong>方法的最佳且唯一的方法的论文。相反，我打算分享我在解决学习<strong class="kc io"> call() </strong>方法时遇到的困难时的发现。</p><p id="0c2e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我一生都是爱狗人士。我觉得创建一个网页，在表格中动态列出一些最喜欢的狗品种、它们的栖息地和它们的平均寿命，可能会很有趣。</p><p id="0e28" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们快速看一下我们将一起构建的迷你项目。下面的图1是完成的项目的截图。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/44518fc8041fff648c7ea51ca656991e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VKbnq1Hjj77HvJ-YqI--gg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 1 Opening Screen of MY FAVORITE DOGS Demo</strong></figcaption></figure><p id="6313" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个演示的目的是使用函数对象公开的<strong class="kc io"> call() </strong>方法从对象中提取属性，并动态地将它们分配给<strong class="kc io">文档对象模型(DOM) </strong>中的文本节点。</p><blockquote class="le lf lg"><p id="4633" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated">我坚信，最好的老师之一是通过与他人分享知识来测试你的技能。</p></blockquote><p id="5b92" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在图1中，您可以看到成品的开始屏幕，其中显示了一个表格，其中有3个最喜欢的狗品种、它们的原产国家以及它们的平均寿命。</p><p id="48b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">加载页面时，因为没有选择最喜欢的狗，所以<strong class="kc io">品种</strong>栏的3项包含默认文本<strong class="kc io">没有选择品种</strong>。</p><p id="bc70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">桌子下面是一个有4个按钮的按钮栏，前3个按钮允许用户添加第一、第二和第三喜欢的狗品种。</p><p id="63a3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了这个迷你演示的目的，我们不会寻求用户输入最喜欢的品种。这3个按钮通过将3个狗品种对象的属性分配给每个品种的表格单元格文本节点，来动态填充每个品种的3列。</p><p id="618d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第四个按钮将屏幕重置为原始状态。</p><h1 id="96d3" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">本教程假设</h1><p id="01e3" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">本教程假设读者对HTML有基本的了解，并且牢固掌握JavaScript语言的基础知识，包括一些面向对象编程(OOP)的知识。了解一些级联样式表(CSS)的知识是可取的，但不是真正必要的，因为本教程的主要焦点是JavaScript。</p><h1 id="b1a0" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">call()方法是做什么的？</h1><p id="09cb" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">是啊，问题就在这里。为了从强大的<strong class="kc io"> call() </strong>方法中获益，你必须清楚地了解它的作用。</p><p id="16cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们从网上用于JavaScript研究的<em class="lh">资源</em>—<a class="ae jz" href="https://developer.mozilla.org" rel="noopener ugc nofollow" target="_blank">Mozilla Developer Network</a>(MDN)开始:</p><blockquote class="le lf lg"><p id="5686" class="ka kb lh kc b kd ke kf kg kh ki kj kk li km kn ko lj kq kr ks lk ku kv kw kx ig bi translated"><code class="fe mo mp mq mr b"><strong class="kc io">call()</strong></code>方法使用给定的<code class="fe mo mp mq mr b"><strong class="kc io">this</strong></code>值和提供的任何参数调用函数，以指定<code class="fe mo mp mq mr b"><strong class="kc io"><em class="in">this</em></strong></code> <strong class="kc io"> <em class="in"> </em> </strong>引用哪个值。</p></blockquote><p id="2449" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">这一切都很好，但这意味着什么？</strong>JavaScript中的<code class="fe mo mp mq mr b"><strong class="kc io">this</strong></code> <strong class="kc io"> </strong>关键字已经成为包括我自己在内的许多初涉开发人员的噩梦。它容易被误解，尤其是在早期的JavaScript标准中，可能会表现得非常奇怪。</p><p id="b04a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">这个</strong>，理论上应该是引用调用函数，但是因为<strong class="kc io">这个</strong>的值不能在函数调用的时候设置，所以JavaScript会默认为全局上下文的值，也就是<strong class="kc io">窗口</strong>。将返回该值，如本例所示，来自关于此的<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this" rel="noopener ugc nofollow" target="_blank"> MDN文章:</a></p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/c219ad37c07cfc4d9878f3d25e15ecbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wZ6knNTYAaVlICJTSRm7tg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 2 Excerpt from Mozilla Developer Network article on this keyword</strong></figcaption></figure><p id="12bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如图2所示，<strong class="kc io">这个</strong>指的是全局对象，也就是<strong class="kc io">窗口</strong>。由于<strong class="kc io">窗口</strong>还没有指向我们需要的上下文，即文档对象模块中的<strong class="kc io">文档</strong>(下一级)，所以除了<strong class="kc io">未定义</strong>之外，函数f1()没有值返回。</p><p id="02de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从作为我们迷你项目一部分的JavaScript代码中，<strong class="kc io">使用<strong class="kc io"> call() </strong>方法指定了这个</strong>，并且引用了一个指定的对象。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/5eae12dff7f14834871646bc0cf70cb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KuIrl8YecvCzSl_pflu2g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 3 Code Listing from Mini-Project</strong></figcaption></figure><p id="b795" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">图3显示了一个名为<strong class="kc io"> getDogInfo </strong>的对象文字。在该对象中有一个名为<strong class="kc io"> info() </strong>的函数，它返回三个对象中存在的三个属性的数组，这三个对象分别被命名为<strong class="kc io"> breed1、breed2 </strong>和<strong class="kc io"> breed3 </strong>。</p><p id="490c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在随后的3条语句中，与此关联的值是通过指定此在链接到<strong class="kc io"> info </strong>的<strong class="kc io"> call() </strong>方法中引用的对象来确定的，这些方法又引用回由<strong class="kc io"> getDogInfo </strong>对象公开的<strong class="kc io"> info() </strong>方法。</p><p id="fefe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你开始头晕了吗？别担心。我的也有过一段时间。让我们一步一步来。</p><h1 id="a4ff" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">现在让我们来建造它吧！</h1><p id="f253" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">从下载<a class="ae jz" href="https://github.com/RHieger/my-favorite-dogs/releases/tag/v1.00" rel="noopener ugc nofollow" target="_blank">启动码</a>开始。</p><p id="fba3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后你就可以按照这些步骤来完成这个项目。因为这里的重点是JavaScript，而不是CSS样式或HTML，所以起始代码将提供构建教程迷你项目的基本结构。</p><h1 id="6fe6" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第一步。下载启动代码</h1><p id="2efc" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">一旦您下载了启动代码，您将会发现一个zip存档，如下图<strong class="kc io">图4 </strong>所示。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/9cb69860486b89d5285dcd8d3f4a24c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u-iuQ32LE3GEAyWG4KZQoQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 4 Downloading the Starter Code</strong></figcaption></figure><p id="917f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的截图显示了Mac上的<strong class="kc io">下载</strong>文件夹中的zip存档。如果您运行的是Windows或其他操作系统，下载的位置可能会有所不同。</p><p id="dd40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">只需将zip存档文件移动到您希望的位置，然后将其解压缩。</p><p id="5110" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">或者，如果您愿意，您可以克隆<a class="ae jz" href="https://github.com/RHieger/my-favorite-dogs.git" rel="noopener ugc nofollow" target="_blank"> git库</a>，并从使用<strong class="kc io"> starter-code </strong>文件夹中的starter代码开始。</p><p id="cd87" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我强烈建议你在完成本教程的步骤之前，不要去看已完成的项目文件夹。这样，当你把项目拼凑在一起时，你可以获得最好的洞察力。也就是说，如果你发现自己被卡住了，你当然可以对照库中的代码来检查你的代码。</p><p id="f8a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你解压如图<strong class="kc io">图4 </strong>所示的启动代码档案，你会发现项目文件结构如下图<strong class="kc io">图5 </strong>所示。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f4313f01ce99f9ad4c9afae3107eca2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*j0tcY1GDpodoTGaovIWS0w.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 5 File Structure as displayed in Microsoft Visual Studio Code</strong></figcaption></figure><h2 id="7dca" class="mw lm in bd ln mx my dn lr mz na dp lv kl nb nc lz kp nd ne md kt nf ng mh nh bi translated"><strong class="ak">启动器代码简介</strong></h2><p id="a25a" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">起始代码包括一个<br/> <strong class="kc io"> css </strong>文件夹，其中有一个css文件—<br/><strong class="kc io">call-demo . CSS</strong>—一个为<br/>迷你项目提供样式的文件。</p><p id="1b3f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<strong class="kc io"> js </strong>文件夹中是一个starter<strong class="kc io">app . js</strong>JavaScript文件，它将最终包含教程的所有逻辑。</p><p id="bf3c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们所有的起始文件都已经准备好了，我们可以开始项目了。</p><h1 id="d17d" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">第二步。声明对象以引用所需的HTML元素</strong></h1><p id="a1b5" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">为了动态地向HTML页面添加内容，您必须识别并捕获希望在JavaScript DOM对象中更改或增加的元素。</p><p id="8cc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">下面的图6 </strong>显示了相关的HTML，它是您的起始代码的一部分。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/5d6aaeab84407e54709d490c76890ea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAmetOUgiyskUMGb7sMI7g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 6 HTML code listing lines 31–53</strong></figcaption></figure><p id="8b51" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在图6中，显示了index.html文件的第31–53行。这些是需要在DOM中引用的元素。为此，我们必须创建指向<strong class="kc io">元素</strong>(或<strong class="kc io">节点</strong>，因为它们在DOM中是已知的)的JavaScript对象。</p><p id="157b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意，上面的每个<strong class="kc io"> &lt; td &gt; </strong>和<strong class="kc io"> &lt;按钮&gt; </strong>元素都有一个<strong class="kc io"> id </strong>属性。虽然使用JavaScript访问DOM中的这些节点有很多方法，但我们将使用最简单和最基本的方法来实现这一点，即<strong class="kc io"> getElementById() </strong>方法。</p><p id="9520" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">下面的图7 </strong>显示了我们的starter <strong class="kc io"> app.js </strong>文件，这将是我们迷你项目的大脑中心。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/adda7ca5c009fe9fc182746d629e2911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkcQ3swzvXZG7BlgP3wjXQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 7 Starter code for app.js</strong></figcaption></figure><p id="a2fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了提供对DOM节点的访问，每个品种列和按钮栏中的按钮都必须存储在DOM对象中。为此，将图7 中<strong class="kc io">启动代码的<strong class="kc io">行3 </strong>替换为图8 </strong>中的以下代码片段。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/b5dc7478865ace039859b58bdb9d42dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VdBo71TW-dwIXf_5xWBn3Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 8 Code Listing #1—Creating the DOM Objects</strong></figcaption></figure><p id="c85c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经创建了必要的DOM对象，我们可以通过JavaScript直接引用和操作它们。为了证明我们可以访问上面DOM常量捕获的任何节点，您可以使用浏览器的JavaScript控制台来查看DOM对象返回的内容，如下面的图9所示。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/30d69d40cbd24e5c8d554514ef4102d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vOnIuJ89ZF8vUmWJS23yWQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 9 JavaScript console showing the output of button4</strong></figcaption></figure><h1 id="94f7" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第三步。创建3个狗对象</h1><p id="2773" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">我们旅程的下一段将带我们进入问题的核心。我们现在已经创建了引用三个表行的对象，这三个表行将包含关于我们最喜欢的狗的信息。但是我们如何将这些信息转换成JavaScript可以用来填充行的表单呢？</p><p id="8fcb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有几种方法可以做到这一点。出于本教程的目的，我们使用如下图<strong class="kc io">图10 </strong>所示的对象字面语法声明3个dog对象。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/4c36b72fd783f647d7e0a9f3f06a9d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpTA3ITrjuPrQim2G9TWtA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 10 Code Listing #2—Declaring the dog objects</strong></figcaption></figure><p id="3631" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在图10中，第19–35行显示了定义了属性<strong class="kc io"> breed、origin </strong>和<strong class="kc io">寿命</strong>的<strong class="kc io"> breed1、breed2 </strong>和<strong class="kc io"> breed3 </strong>对象。你可能会问为什么我没有声明一个<strong class="kc io"> Dog </strong>类，然后从中实例化3个<strong class="kc io"> Dog </strong>对象。</p><p id="aa18" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然使用类是一种高效而优雅的对象编码方式，但是如上所示的单个对象文字的定义将演示<strong class="kc io"> call() </strong>方法的作用。事实上，使用类可以避免使用<strong class="kc io"> call() </strong>方法，因为属性和方法都封装在一个对象中。</p><p id="2574" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在另一篇教程中，我将展示同样的小型项目，它被重构为使用类声明和对象实例化。</p><p id="f6a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在你应该把上面的代码添加到你的<strong class="kc io"> app.js </strong> starter文件的末尾。</p><p id="19bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在有了所需的原材料。<em class="lh">但是我们如何从上面的</em> <strong class="kc io"> <em class="lh"> breed </em> </strong> <em class="lh">对象中提取属性，并将它们一个接一个地注入到上面定义的表格单元格中呢？</em></p><p id="0e35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为此，我们需要一个函数来获取这些信息，并将其转换成我们可以用来注入所需内容的形式。</p><h1 id="2d4f" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第四步。编码getDogInfo()对象</h1><p id="fb79" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">现在我们实现了<strong class="kc io"> getDogInfo() </strong>对象，它唯一的属性是一个名为<strong class="kc io"> info的方法。</strong>这个方法从上面定义的<strong class="kc io">品种</strong>对象中提取属性，并从这些属性中返回一个带有所需值的数组，如下图<strong class="kc io">图11 </strong>所示。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/c53c9867ef477c43021e08faee1ad688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EIo2xpyzEZbfNx2HtWfjng.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 11 Code Listing #3—the getDogInfo() Function</strong></figcaption></figure><p id="9804" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面代码清单的第37行，我们声明了<strong class="kc io"> getDogInfo() </strong>对象。方法返回第40–44行的数组。</p><p id="9dde" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您应该将上面的代码添加到您的<strong class="kc io"> app.js </strong> starter文件的末尾。</p><p id="6371" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了利用返回的数组，我们需要将<strong class="kc io"> getDogInfo() </strong>的返回值存储在一个变量中。这是我们接下来要做的。</p><h1 id="36a0" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第五步。使用<strong class="ak"> call()方法指定我们希望其属性作为数组</strong>返回的对象</h1><p id="3c44" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">虽然<strong class="kc io"> getDogInfo() </strong>对象和它的<strong class="kc io"> info() </strong>方法提供了提取我们需要的对象属性的逻辑，以便在网页上插入内容，但就其本身而言，<strong class="kc io"> getDogInfo() </strong>不具有指定我们希望从哪个对象返回属性值的功能。</p><p id="d92e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">进入<strong class="kc io"> call() </strong>方法，这是所有函数对象公开的原型方法。此时所需的变量声明中采用的基本语法将采用以下形式:</p><p id="a5e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">const obj = getdoginfo . info . call(' desire object ')；</strong></p><p id="e30a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们把这句话拆开来，弄清楚它在做什么。在左侧，我们声明了一个名为<strong class="kc io"> obj </strong>的常量，并将从<strong class="kc io"> getDogInfo() </strong>对象返回的值存储到该常量中。使用<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Property_accessors#dot_notation" rel="noopener ugc nofollow" target="_blank">对象点标记法</a>，我们在<strong class="kc io"> getDogInfo() </strong>上链接<strong class="kc io"> info() </strong>方法，之后是内置的<strong class="kc io"> call() </strong>方法，该方法采用您希望引用的对象名称的单个参数<strong class="kc io"> this </strong>。</p><p id="1004" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">下面的图12 </strong>显示了返回期望的值数组所需的结果代码。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/7a11b56b04add751717db5573af56eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-LKQpCgLqhfz58WDwIpVZg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 12 Code Listing #4—Using the call() method</strong></figcaption></figure><p id="4a12" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您应该将图12 中的代码添加到您的<strong class="kc io"> app.js </strong> starter文件的末尾。</p><p id="f9f6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在几乎一切都准备就绪，但仍有一些关键的缺失部分。第一个函数将由出现在本文开头的图1<strong class="kc io">中的<strong class="kc io">复位</strong>按钮调用。它的目的是在点击左侧的其他三个按钮后，将犬种表恢复到原来的状态。</strong></p><p id="cdcf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为此，我们将构建一个名为<strong class="kc io"> resetTable() </strong>的函数。</p><h1 id="10e3" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第六步。实现可重置的()函数</h1><p id="081e" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated"><strong class="kc io">下面的图13 </strong>展示了<strong class="kc io"> resetTable() </strong>函数的实现，它执行了大量的后台工作来将我们的表重置到它的开始状态。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/049b5753ddb6ea7c90d0d92c7398693e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hTh581Z4P2Q4jAeOhRQeDg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 13 Code Listing #5—the resetTable() function</strong></figcaption></figure><p id="d781" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> resetTable() </strong>被实现为一个arrow函数，但是它也可以使用早于<strong class="kc io"> ECMAScript 6 </strong>的<strong class="kc io">函数myFunction() { } </strong>语法。两者都可以。我碰巧更喜欢arrow函数的优雅语法。</p><p id="335e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里发生了很多事情，但是让我们简单地把它分开。您会记得，在图1的<strong class="kc io">中，</strong>表格最左边的一列每行都填充了内容<strong class="kc io">未选择品种。</strong></p><p id="e9df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当点击<strong class="kc io">添加第一喜欢的、添加第二喜欢的</strong>和<strong class="kc io">添加第三喜欢的</strong>按钮时，这些条目将被替换为狗的品种名称。与其为每个表行单独指定这个值，不如用这个值声明一个常量，因此常量<strong class="kc io"> noSelection </strong>出现在上面清单的第53行。</p><p id="1506" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">作为上面清单中所有DOM对象引用的一个提示，你可以参考上面的<strong class="kc io">图8 </strong>，也可以参考你的<strong class="kc io">index.html</strong>启动代码中的匹配代码。</p><p id="a9bb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在第55–65行，为每个表格行定义的每个DOM对象的<strong class="kc io"> textContent </strong>属性被设置为其原始值。在<strong class="kc io">品种</strong>列的情况下，该列被设置为存储在<strong class="kc io"> noSelection </strong>常量中的值。剩下的两列简单地设置为null，删除单击前三个按钮时注入的内容。</p><p id="b19d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您应该将上面图13 中的代码添加到您的<strong class="kc io"> app.js </strong> starter文件的末尾。</p><p id="cb1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当点击<strong class="kc io">添加第一个收藏夹</strong>到<strong class="kc io">添加第三个收藏夹</strong>按钮时，还需要一个关键功能来设置每个表格行的内容。这将由<strong class="kc io"> setRowContent() </strong>函数来完成，该函数将充当按钮的关联事件监听器的回调()函数，这将在<strong class="kc io">步骤8中变得明显。</strong></p><h1 id="d79e" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第七步。实现setRowContent()函数</h1><p id="5c80" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated"><strong class="kc io">下图14 </strong>显示了<strong class="kc io"> setRowContent() </strong>函数的实现。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/6f5a4b7fe127f6e5c8dd2c5d4de3e869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vZhpoRk5Dj-vwB2wGUnrA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 14 Code Listing #6—the setRowContent() function</strong></figcaption></figure><p id="aedf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如您所见，<strong class="kc io"> setRowContent() </strong>函数有四个参数，一个用于表格行中的三列，第四个用于指定我们将从中提取所需属性的对象。我们在运行时通过将所有四个参数传递给函数来设置这些参数，以便填充表中的每一行。</p><p id="d2a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在几乎完成了，但是仍然缺少一个关键的组件。如果你点击任何一个按钮，绝对不会发生任何事情。我们需要将按钮连接到我们目前定义的功能上。当然，这是通过事件侦听器来完成的。我们将为屏幕上每个按钮的点击定义一个事件监听器。</p><h1 id="0e1f" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">第八步。实现事件侦听器</h1><p id="30ab" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">现在我们到了在网页上启用动态内容的最后一步。</p><p id="950e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">页面上有4个按钮，因此我们需要4个事件处理程序。我们正在监听的事件类型是当用户点击4个按钮中的任何一个时的<strong class="kc io">点击</strong>事件。</p><p id="e8c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">下图15 </strong>显示了实施情况。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/ab5bdd30f4ddab15a15430ee8663f475.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C1qmHfO6JA2IeOniJ0UPCA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><strong class="bd ld">Fig. 15 Code Listing #7—Implementing the event listeners</strong></figcaption></figure><p id="1a22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的第83–110行中，为本教程开头的<strong class="kc io">图1 </strong>中所示的四个按钮声明了一个事件监听器。在<strong class="kc io">按钮1 </strong>到<strong class="kc io">按钮3、</strong>的前三个事件监听器中，我们使用了一个<a class="ae jz" href="https://medium.com/@tonyparkerkenz/callback-and-anonymous-functions-in-javascript-8849d57f5ce9" rel="noopener"> <strong class="kc io">匿名函数</strong> </a>，它又调用了在<strong class="kc io">步骤7 </strong>中实现的<strong class="kc io"> setRowContent() </strong>函数。</p><p id="74d2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为这些是<strong class="kc io"> click </strong>事件，所以当用户点击按钮时，附加到该按钮的动态内容将被注入到函数调用中指定的表格行和单元格中。</p><p id="4628" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，在第110行button4的事件监听器中，我们使用了一个回调函数——即前面在<strong class="kc io">步骤6中定义的<strong class="kc io"> resetTable() </strong>函数。</strong></p><p id="f772" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的迷你项目现在完成了。如果你想看这个项目的运作，你可以在<a class="ae jz" href="https://codepen.io/RHieger/pen/jOyYVKP" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">上找到它。</strong></a></p><h1 id="59a3" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">最后一句话</h1><p id="0ae9" class="pw-post-body-paragraph ka kb in kc b kd mj kf kg kh mk kj kk kl ml kn ko kp mm kr ks kt mn kv kw kx ig bi translated">当然，最终产品有点缺乏艺术性，因为用户只能添加JavaScript代码中包含的三只狗的硬编码属性。在现实世界的例子中，您可能希望弹出一个模态对话框，要求用户输入最喜欢的狗品种的数据。</p><p id="913c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">几乎可以肯定，您也不希望表中有预先确定的行数，而只是在用户输入选择时将行动态地添加到表中。我将构建这个更复杂的应用程序，并在不久的将来为它发布一个教程。</p><p id="f04f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然而，本教程的目的是提供一个工作的、至少有点意义的例子，说明内置JavaScript function对象公开的<strong class="kc io"> call() </strong>函数是如何工作的。我对未来的文章或迷你项目的任何建议持开放态度。</p><p id="76f2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你觉得这个教程很有趣。</p><p id="7769" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lh">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lh">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>What’s New In React v18?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React v18有什么新功能？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/whats-new-in-react-v18-71d4c5b87ff0?source=collection_archive---------7-----------------------#2021-11-16">https://javascript.plainenglish.io/whats-new-in-react-v18-71d4c5b87ff0?source=collection_archive---------7-----------------------#2021-11-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4ad9" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们了解React 18的最新功能。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/67b8f62a9cd8af572e05269a19263045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IGZfkCUduk7tZdE1.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">Image source</a></figcaption></figure><p id="0cd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> React 18 </strong>推出新的测试版，很快就会推出。这一次，React 18将带有最新的功能，不同于v17的更新。尽管React是一个受欢迎的JavaScript库，但是开发者社区对这个库有更多的期望。</p><p id="3168" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇博客中，让我们通过更详细的描述来深入了解React 18的主要功能。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="faec" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">1.开始过渡以进行并发渲染</h1><p id="6c11" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在与用户界面(UI)进行交互时，如在输入框中键入内容或单击按钮，在大屏幕更新中可能会出现页面冻结，从而中断工作流程。</p><p id="81c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React 18引入了一个名为<code class="fe mw mx my mz b"><strong class="ky ir">startTransition</strong></code>的新API，即使在大屏幕更新期间，也有助于保持应用程序的响应。这个API通过将特定的动作标记为<strong class="ky ir">转换</strong>，从而告知React哪些更新重要，哪些不重要，从而极大地改善了用户交互。</p><p id="a1fd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe mw mx my mz b">startTransition</code>将更新移至后台，包括复杂的处理或因网络连接而导致的缓慢数据提取。这里的转换会被紧急更新中断，先前不相关的转换会被忽略，从而使UI能够忽略本质上可能较慢的二次更新。</p><p id="bf3c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个真实的例子可以在这个链接<a class="ae kv" href="https://github.com/reactwg/react-18/discussions/65" rel="noopener ugc nofollow" target="_blank">这里</a>看到。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5efb" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">2.自动配料</h1><p id="7b01" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">自动批处理意味着在一次渲染中反应多个状态更新以增强性能的组称为批处理。</p><p id="3b0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它还会阻止组件呈现<em class="na">半成品</em>状态，同时更新单个状态变量，导致应用程序中的某些错误。超时、承诺甚至本机事件处理程序中的更新将按照与React事件中的更新相同的方式进行批处理。这将增加现成的渲染时间，甚至更好的性能。React 18使批处理过程更加高效和一致。</p><p id="e3ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击<a class="ae kv" href="https://codesandbox.io/s/morning-sun-lgz88?file=/src/index.js" rel="noopener ugc nofollow" target="_blank">此处</a>查看新配料技术如何工作的演示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nb nc l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source — React’s Github</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="ab9e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">3.支持悬念:SSR</h1><p id="3258" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">对于那些不知道SSR的人，这里有一个简单的解释:<strong class="ky ir">服务器端渲染(SSR) </strong>，是一个让你直接在服务器上从React组件生成HTML的过程，生成的HTML可以显示给用户。甚至在javascript包加载和运行之前，用户就可以看到服务器提供的内容。因此，给用户提供了更快和更好的感觉。</p><p id="5e41" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但有时，后端的javascript需要很长时间来处理，这段时间被称为<em class="na">补水时间</em>。React 18更新将允许<strong class="ky ir">直接在服务器上流式传输HTML </strong>，从而提高性能，即服务器在使用另一个名为<code class="fe mw mx my mz b"><strong class="ky ir">Suspense</strong></code>的组件渲染组件时发送组件，该组件决定应用程序的哪些部分可能需要更长时间加载，哪些部分应该直接渲染。被悬念包裹的成分不会再阻碍水合作用。这被称为选择性水合方法。一旦浏览器获得其内容和javascript代码，每个就绪的组件都将开始水合。</p><p id="5965" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">点击<a class="ae kv" href="https://codesandbox.io/s/festive-star-9hfqt?file=/src/App.js" rel="noopener ugc nofollow" target="_blank">此处</a>观看实时演示。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1455" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">4.根API改进</h1><p id="2122" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">React中的根API 是React用来跟踪渲染树的应用程序顶层数据结构的指针。在React 18中，将有两种不同的根API——传统的根API和ReactDOM.createRoot。新的根API，称为<code class="fe mw mx my mz b">ReactDOM.createRoot</code>，将通过允许并发模式功能，为应用程序添加所有改进。</p><p id="466b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">旧根API : </em></p><pre class="kg kh ki kj gt nd mz ne nf aw ng bi"><span id="4824" class="nh ma iq mz b gy ni nj l nk nl">import ReactDOM from 'react-dom';<br/>import App from 'App';<br/>const container = document.getElementById('root');<br/>ReactDOM.render(&lt;App /&gt;, container);</span></pre><p id="cbf8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此根API在运行更新时存在一些问题。我们需要继续将<code class="fe mw mx my mz b">container</code>传递到渲染中，即使它从未改变。</p><p id="64bb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">新的根API : </em></p><pre class="kg kh ki kj gt nd mz ne nf aw ng bi"><span id="d4e9" class="nh ma iq mz b gy ni nj l nk nl">import ReactDOM from 'react-dom';<br/>import App from 'App';<br/>const container = document.getElementById('root');<br/>const root = ReactDOM.createRoot(container);<br/>root.render(&lt;App /&gt;);</span></pre><p id="2e2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">新的根API修复了这个问题，因为我们不再需要将<code class="fe mw mx my mz b">container</code>传递到渲染中。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0b2b" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="fefb" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">新的React 18更新看起来很有影响力，尽管还有许多小的更新尚未公布。许多功能可以帮助开发人员简化工作，提高应用程序的速度和效率。让我们继续关注发布日期。要了解更多关于如何安装React 18测试版的信息，请点击链接<a class="ae kv" href="https://github.com/reactwg/react-18/discussions/9" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><p id="f908" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="3cd9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">参考</h1><div class="nm nn gp gr no np"><a href="https://reactjs.org/blog/2021/06/08/the-plan-for-react-18.html" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">React 18 - React博客的计划</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">React团队很高兴分享一些更新:我们已经开始了React 18版本的工作，这将是我们的下一个…</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">reactjs.org</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kp np"/></div></div></a></div><div class="nm nn gp gr no np"><a href="https://github.com/reactwg/react-18" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">GitHub-React WG/React-18:React 18发布工作组。</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">这是React 18发布的工作组。它的成立是为了通过发布……</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">github.com</p></div></div><div class="ny l"><div class="oe l oa ob oc ny od kp np"/></div></div></a></div><p id="de1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
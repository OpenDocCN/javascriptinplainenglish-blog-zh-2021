<html>
<head>
<title>How to format a Number as Currency in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将数字格式化为货币</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-format-a-number-as-currency-in-javascript-ca1b55e8829a?source=collection_archive---------19-----------------------#2021-03-05">https://javascript.plainenglish.io/how-to-format-a-number-as-currency-in-javascript-ca1b55e8829a?source=collection_archive---------19-----------------------#2021-03-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="bbaa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将数字格式化为货币的过程可能是一项繁琐的任务。这看起来像是一个小任务，但是考虑到国际化和不同的格式标准等因素，行数和边界情况会不断增加。幸运的是，ES2015引入了一个国际化API，可以使将数字格式化为货币的过程变得非常简单。</p><h1 id="808c" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">编写我们自己的格式化函数</h1><p id="dff5" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">我们肯定可以为此创建一个hacky函数，对吗？</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="c5b2" class="lu kj in lq b gy lv lw l lx ly">let formatCurrency = (val, currency) =&gt; {<br/>    let val;    <br/>    switch (currency) {<br/>        case 'USD':<br/>            val = `$ ${val}`;<br/>            break;<br/>        case 'EUR':<br/>            val = `€ ${val}`;<br/>            break;<br/>        default:<br/>            throw new Error('Unknown currency format');<br/>    }<br/>    return val;<br/>}</span></pre><p id="92c6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们想要处理诸如$ 100是好的，但是1000应该被显示为$ 1000呢？让我们使用一些正则表达式的魔法？</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="9ed4" class="lu kj in lq b gy lv lw l lx ly">let formatCurrency = (val, currency) =&gt; {<br/>  let currencyVal = val.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&amp;,'); <br/>  switch (currency) {<br/>        case 'USD':<br/>            val = `$ ${currencyVal}`;<br/>            break;<br/>        case 'EUR':<br/>            val = `€ ${currencyVal}`;<br/>            break;<br/>        default:<br/>            throw new Error('Unknown currency format');<br/>    }<br/>    return val;<br/>}<br/><br/><br/>console.log(formatCurrency(1000,'USD'));<br/>// "$ 1,000.00"</span></pre><p id="8c99" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这种方法面临的挑战是:</p><ul class=""><li id="7170" class="lz ma in jm b jn jo jr js jv mb jz mc kd md kh me mf mg mh bi translated">有一堆货币(~300)</li><li id="d1f7" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">有些货币使用“.”作为千位之间的分隔符，而不是'，'</li><li id="e4ed" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">这些货币使用'，'作为阶梯分隔符<br/> "$ 1000.05 "在德国欧元中是"€ 1.000，05 "</li><li id="8b5a" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">一些货币在自定义位置有千位分隔符<br/> 1000000将是₹10,00,000.00″，而不是1，000，000.00美元</li></ul><p id="da1c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">诸如此类。我们不想测试所有货币和所有浏览器。</p><h1 id="121a" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用区域设置字符串格式化(更好的方法)</h1><p id="70f1" class="pw-post-body-paragraph jk jl in jm b jn lg jp jq jr lh jt ju jv li jx jy jz lj kb kc kd lk kf kg kh ig bi translated">在ES2015和国际化API之前，我们仍然可以利用区域设置和字符串格式将数字格式化为货币。区域设置是允许开发人员指定区域特定属性的参数集合，例如:</p><ul class=""><li id="b372" class="lz ma in jm b jn jo jr js jv mb jz mc kd md kh me mf mg mh bi translated">货币格式</li><li id="109d" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">日期时间格式</li><li id="88e9" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">工作日格式</li><li id="ac6f" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">数字格式</li><li id="11d4" class="lz ma in jm b jn mi jr mj jv mk jz ml kd mm kh me mf mg mh bi translated">测量单位</li></ul><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="6447" class="lu kj in lq b gy lv lw l lx ly">const cashBalance = 10000; // 🤑<br/><br/>console.log(<br/>  cashBalance.toLocaleString('en-US',<br/>    {style: 'currency', currency: 'USD'}<br/>  )<br/>); // '$10,000.00'</span></pre><p id="c2c0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这很好，并且是ECMAScript国际化API出现之前推荐的方法。但是一些(旧的)浏览器使用系统区域设置，而不是作为参数指定的区域设置。另外，因为toLocaleString通常是一种字符串操作方法，所以它不是一个性能选项。因此国际机场。引入了NumberFormat规范，这是JavaScript中将数字格式化为货币的首选方式。</p><h1 id="75e9" class="ki kj in bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">使用Intl将数字格式化为货币。数字格式</h1><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="bbb6" class="lu kj in lq b gy lv lw l lx ly">new Intl.NumberFormat([locales[, options]])</span></pre><p id="29fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第一个参数是表示语言和区域设置的locale字符串。它由语言代码和国家代码组成。</p><p id="19ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">英语+美国<br/>德语+德国<br/>英语+印度</p><p id="a6c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">options参数有很多选项。但我们将坚持这个帖子的风格，货币和最小分数位数。</p><p id="37c0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为这篇文章是关于货币的，我们将使用风格作为货币。其他可能的值包括小数和百分比。</p><p id="493f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以查看这些链接，了解更多关于<a class="ae mn" href="https://www.w3schools.com/tags/ref_language_codes.asp" rel="noopener ugc nofollow" target="_blank">语言代码</a>、<a class="ae mn" href="https://www.w3schools.com/tags/ref_country_codes.asp" rel="noopener ugc nofollow" target="_blank">国家代码</a>和<a class="ae mn" href="https://www.currency-iso.org/en/home/tables/table-a1.html" rel="noopener ugc nofollow" target="_blank">货币列表</a>的信息。</p><p id="b89e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最小分数位数表示格式化时要包含的最小小数位数。</p><p id="3cc4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将所有这些放在一起:</p><pre class="ll lm ln lo gt lp lq lr ls aw lt bi"><span id="fe52" class="lu kj in lq b gy lv lw l lx ly">const usDollar = new Intl.NumberFormat('en-US', {<br/>  style: 'currency',<br/>  currency: 'USD',<br/>  minimumFractionDigits: 2<br/>})<br/><br/>const rupeeIndian = Intl.NumberFormat("en-IN", {<br/>    style: "currency",<br/>    currency: "INR",<br/>    minimumFractionDigits: 2<br/>});<br/><br/>const euroGerman = Intl.NumberFormat("de-DE", {<br/>    style: "currency",<br/>    currency: "EUR",<br/>    minimumFractionDigits: 2<br/>});<br/><br/>const price = 1000000.0535;<br/><br/>console.log(usDollar.format(price)); // $1,000,000.05<br/><br/>console.log(rupeeIndian.format(price)); // ₹10,00,000.05<br/><br/>console.log(euroGerman.format(price)); // 1.000.000,05 €</span></pre><p id="361d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是浏览器兼容性，如果您想自己看看是否应该使用国际化API:</p><figure class="ll lm ln lo gt mp gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/2f5475cba378e475398e9b7166a41f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*Ntyj8jwMQYdxz-ym.png"/></div></figure><p id="dfbb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">关于如何使用ECMAScript将一个数字格式化为货币，您只需要知道这些。如果你有任何问题，欢迎在下面留言。</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><p id="0a4c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mz">原载于2021年3月5日</em><a class="ae mn" href="https://www.wisdomgeek.com/development/web-development/javascript/how-to-format-a-number-as-currency-using-es2015/" rel="noopener ugc nofollow" target="_blank"><em class="mz">【https://www.wisdomgeek.com】</em></a><em class="mz">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>From Zero to WebHero [0] — Setting Up a Full Sapper Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从零到WebHero [0] —建立一个完整的Sapper项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/setting-up-a-full-svelte-sapper-project-7e3109c7b530?source=collection_archive---------13-----------------------#2021-03-07">https://javascript.plainenglish.io/setting-up-a-full-svelte-sapper-project-7e3109c7b530?source=collection_archive---------13-----------------------#2021-03-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="8164" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">这个系列将展示一个工兵连项目从构思到制作的全过程。该简介解释了如何设置项目。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1cb3a6470a38510ec81598ffe08e58fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xUiigJFamOjMatTY"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@exxteban?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Esteban Lopez</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ad55" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">周六早上。你醒了。你想到了一个好主意。一个会让所有人惊讶的网站。现在到了困难的部分，从想法到生活。在这个系列中，我将遵循从构思到开发到网站上线的所有步骤。</p><p id="25fb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想直接跳到代码，这里是包含本章开发的代码的<a class="ae ks" href="https://github.com/omirobarcelo/retro-ps5/tree/part0" rel="noopener ugc nofollow" target="_blank">分支</a>。</p><h1 id="0e06" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">这个想法</h1><p id="9238" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">几个月前，PlayStation 5发布了。随着每一款新主机的发布，关于其复古兼容性的讨论——能够从以前的主机上玩游戏——开始被听到。因此，这个想法来了，一个社区驱动的网站，可以很容易地检查游戏是否在新发布的PS5上运行。</p><p id="829c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">开始任何一个新项目都应该有一个前进的方向。所以我做的第一件事是设计一些线框。</p><p id="ac90" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">登陆页面总是一个好的开始。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/ad146fe8ee6beb007cd098643a9e5a60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnBvgoZ_xMWC6NtoSpunwQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Landing page wireframe</figcaption></figure><p id="6f4d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当用户搜索一个术语时，我想显示一个可能匹配的列表。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mm"><img src="../Images/1e0d9053a42bd77f8e3ec6e587532918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AihItLlOFhLPnDaxtS8_Gg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Results wireframe</figcaption></figure><p id="be8f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">或者指示没有任何匹配的消息，以及创建新条目的可能性。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/cb5793e8b44d65229497530c1909be30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VRKvivZSaEL_DKssbs2wKw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">No results wireframe</figcaption></figure><p id="9fee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后是一个详细页面，用户可以在这里投票、评论或写新条目。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/e9e3d1e9f047c2cf1f056ff1ab2cabb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KQ921uKMO7cw1CTCE2esuQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Details wireframe</figcaption></figure><h1 id="7dc2" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">技术</h1><p id="d3fc" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">有了我们的概念，是时候决定如何实现它了。特别是使用哪些技术。在这种情况下，技术先于概念。我想用<a class="ae ks" href="https://sapper.svelte.dev/" rel="noopener ugc nofollow" target="_blank">工兵</a>开发一些东西，这就是我带来的概念。Sapper负责前端，使用Svelte，后端，Node.js。后端默认为<a class="ae ks" href="https://github.com/lukeed/polka" rel="noopener ugc nofollow" target="_blank">波尔卡</a>，但我将其切换到<a class="ae ks" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>，因为我对它更熟悉，它有很多支持。</p><p id="0240" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于样式化，<a class="ae ks" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> Tailwind CSS </a>给了我们一些基本的工具和很大的灵活性。它易于使用和构建。它不是一个组件库，所以我们可以真正适应我们网站的外观和感觉。</p><p id="4626" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于持久化数据，因为我们正在获取信息，可以说是文档，并且它们之间没有很多——实际上没有——引用，所以NoSQL数据库是最合适的。而<a class="ae ks" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>就是其中最受欢迎的一款。另外，使用<a class="ae ks" href="https://mongoosejs.com/" rel="noopener ugc nofollow" target="_blank">mongose</a>可以很好地记录和支持Mongo和Express之间的交互。</p><p id="22bc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于测试，我认为E2E测试对于这种情况是足够的，因为组件背后的逻辑并不复杂到需要单元测试。柏树图书馆是一个著名的图书馆。但是在这个系列中，我们不打算谈论测试。</p></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="bd20" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我确实需要写一个关于Sapper的小说明。在我开始开发这个项目的时候，Sapper是0.28版本，每个人都在等待它的1.0版本。一段时间后，Svelte背后的主要人物Rich Harris说Sapper 1.0永远不会发生，他支持SvelteKit。你可以在这里阅读<a class="ae ks" href="https://svelte.dev/blog/whats-the-deal-with-sveltekit" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="7223" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">安装</h1><p id="d96e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">第一步，搭建我们的项目。Sapper附带了一个我们可以使用的漂亮的<a class="ae ks" href="https://github.com/sveltejs/sapper-template" rel="noopener ugc nofollow" target="_blank">模板</a>。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="ccea" class="na lq in mw b gy nb nc l nd ne">npx degit "sveltejs/sapper-template#rollup" retro-ps5<br/>cd retro-ps5<br/>node scripts/setupTypeScript.js</span></pre><p id="e6ef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后一个脚本准备项目使用TypeScript，并添加了负责传输它的<code class="fe nf ng nh mw b">sveltePreprocess</code>。如果我们选择使用它，它也照顾到了SCSS。</p><p id="dc70" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以用<code class="fe nf ng nh mw b">lang</code>属性来指明我们使用的是什么语言。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="d8ff" class="na lq in mw b gy nb nc l nd ne">&lt;div&gt;<br/>    &lt;h1&gt;Hello, {world}!&lt;/h1&gt;<br/>&lt;/div&gt;</span><span id="410a" class="na lq in mw b gy ni nc l nd ne">&lt;script lang="ts"&gt;<br/>  let name = "world";<br/>&lt;/script&gt;</span><span id="340b" class="na lq in mw b gy ni nc l nd ne">&lt;style lang="scss"&gt;<br/>    div {<br/>        h1 {<br/>            color: red;<br/>        }<br/>    }<br/>&lt;/style&gt;</span></pre><p id="5121" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我还将添加更漂亮的<a class="ae ks" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">来格式化我的代码。我们可以安装一个</a><a class="ae ks" href="https://github.com/sveltejs/prettier-plugin-svelte" rel="noopener ugc nofollow" target="_blank">插件</a>来处理纤细的特定格式，例如，代码的顺序、样式和模板块。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="a6e2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我们的<code class="fe nf ng nh mw b">package.json</code>中，我们添加了以下脚本。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="ff5a" class="na lq in mw b gy nb nc l nd ne">"format:check": "prettier --check .",<br/>"format:write": "prettier --write ."</span></pre><p id="8328" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我之前提到的，Sapper默认带有波尔卡，但我更喜欢使用Express。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="2c53" class="na lq in mw b gy nb nc l nd ne">yarn add express<br/>yarn add --dev <a class="ae ks" href="http://twitter.com/types/express" rel="noopener ugc nofollow" target="_blank">@types/express</a></span></pre><p id="c68a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">而在<code class="fe nf ng nh mw b">server.ts</code>我们切换到Express。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="c031" class="na lq in mw b gy nb nc l nd ne">const app = express();<br/>app.use(express.urlencoded({ extended: true }));<br/>app.use(express.json());</span></pre><p id="a164" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我们使用TypeScript，编译器可能会抱怨错误回调具有隐式的<code class="fe nf ng nh mw b">any</code>类型。通过遵循<a class="ae ks" href="https://stackoverflow.com/questions/56291321/" rel="noopener ugc nofollow" target="_blank">这个答案</a>，我们可以像这样修复它。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="680a" class="na lq in mw b gy nb nc l nd ne">app  <br/>  .listen(PORT)<br/>  .on('error', err =&gt; {<br/>    if (err) console.error('error', err);<br/>  })</span></pre><p id="2988" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以像这样开始使用柏树。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="93da" class="na lq in mw b gy nb nc l nd ne">yarn add --dev cypress<br/>yarn run cypress open</span></pre><p id="f677" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后一个命令为我们的测试创建了一个<code class="fe nf ng nh mw b">cypress</code>文件夹，并填充了示例。为了更容易地访问它，我们可以将下面的脚本添加到<code class="fe nf ng nh mw b">package.json</code>中。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="18f0" class="na lq in mw b gy nb nc l nd ne">"e2e": "cypress open"</span></pre><p id="ab00" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了安装和配置Tailwind CSS，我遵循了本教程的<a class="ae ks" href="https://dev.to/csaltos/tailwindcss-with-sapper-and-svelte-50ll" rel="noopener ugc nofollow" target="_blank"/>，特别是提交历史。我们从安装我们需要的所有软件包开始。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="0826" class="na lq in mw b gy nb nc l nd ne">yarn add --dev "autoprefixer" "cssnano" "postcss" "postcss-import" "postcss-load-config" "postcss-nesting" "postcss-preset-env" "tailwindcss"<br/>npx tailwindcss init -p</span></pre><p id="8498" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后一个命令产生了<code class="fe nf ng nh mw b">tailwind.config.js</code>和<code class="fe nf ng nh mw b">postcss.config.js</code>，我们填充如下。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="31ac" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后在<code class="fe nf ng nh mw b">rollup.config.js</code>我们加上</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="00ab" class="na lq in mw b gy nb nc l nd ne">const preprocess = sveltePreprocess({ postcss: true,});</span><span id="012b" class="na lq in mw b gy ni nc l nd ne">// and in the svelte plugin<br/>svelte({<br/>  dev,<br/>  hydratable: true,<br/>  emitCss: true,<br/>  preprocess: [preprocess]<br/>}),</span></pre><p id="c31b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们移除了模板自带的<code class="fe nf ng nh mw b">global.css</code>和<code class="fe nf ng nh mw b">template.html</code>中的链接。然后我们创建<code class="fe nf ng nh mw b">src/global.pcss</code>和<code class="fe nf ng nh mw b">src/components/GlobalStyle.svelte</code>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c93b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们将<code class="fe nf ng nh mw b">GlobalStyle</code>添加到<code class="fe nf ng nh mw b">src/routes/_layout.svelte</code>中，这是所有路线遵循的基础——页面加载到<code class="fe nf ng nh mw b">&lt;slot /&gt;</code>中——并将<code class="fe nf ng nh mw b">src/routes/index.svelte</code>中的样式更改为使用PostCSS和Tailwind CSS。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="8dec" class="na lq in mw b gy nb nc l nd ne">// _layout.svelte<br/>&lt;main&gt;<br/>  &lt;GlobalStyle /&gt;<br/>  &lt;slot /&gt;<br/>&lt;/main&gt;</span><span id="853f" class="na lq in mw b gy ni nc l nd ne">// index.svelte<br/>&lt;style lang="postcss"&gt;<br/>  h1,<br/>  figure,<br/>  p {<br/>    <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> text-center my-0 mx-auto;<br/>  }<br/>  h1 {<br/>    <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> text-3xl uppercase font-bold m-0 mb-4 text-orange-500 font-sans;<br/>  }<br/>  figure {<br/>    <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> m-0 mb-4;<br/>  }<br/>  img {<br/>    <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> w-full max-w-5xl m-0 mb-4;<br/>  }<br/>  p {<br/>    <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> my-0 mx-auto;<br/>  }<br/>  <a class="ae ks" href="http://twitter.com/screen" rel="noopener ugc nofollow" target="_blank">@screen</a> md {<br/>    h1 {<br/>      <a class="ae ks" href="http://twitter.com/apply" rel="noopener ugc nofollow" target="_blank">@apply</a> text-5xl;<br/>    }<br/>  }<br/>&lt;/style&gt;</span></pre><p id="faf9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当运行我们的应用程序时，有时我们可能会看到一个<code class="fe nf ng nh mw b">Server is not listening on port 3000</code>错误。这停止了我们代码的实时重新加载。最可能的原因是服务器在试图用PostCSS处理所有CSS时超时。其他原因/解决方案可能是<a class="ae ks" href="https://github.com/sveltejs/sapper/issues/730" rel="noopener ugc nofollow" target="_blank">https://github.com/sveltejs/sapper/issues/730</a>和<a class="ae ks" href="https://github.com/sveltejs/sapper/issues/431" rel="noopener ugc nofollow" target="_blank">https://github.com/sveltejs/sapper/issues/431</a>。</p><p id="1afd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于开发，最简单的方法是用MongoDB运行Docker映像。为了方便地检查开发数据库的状态，我们可以使用<a class="ae ks" href="https://hub.docker.com/_/mongo-express" rel="noopener ugc nofollow" target="_blank"> mongo-express </a>图像来拥有一个GUI。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c3cf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于这个设置，我们公开所有默认端口，创建一个卷来保存数据，创建一个网络来从应用程序和管理器访问数据库，并配置一个子网来避免与我们可能正在运行的其他Docker网络冲突。</p><p id="c174" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">随着数据库的建立，我们通过Mongoose连接到它。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="283d" class="na lq in mw b gy nb nc l nd ne">yarn add mongoose<br/>yarn add <a class="ae ks" href="http://twitter.com/types/mongoose" rel="noopener ugc nofollow" target="_blank">@types/mongoose</a> --dev</span></pre><p id="cdcb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在<code class="fe nf ng nh mw b">src/models</code>中创建游戏模型，并在<code class="fe nf ng nh mw b">src/models/index.ts</code>中用<code class="fe nf ng nh mw b">connectDb</code>函数将其导出。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="feac" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们添加<code class="fe nf ng nh mw b">useNewUrlParser</code>和<code class="fe nf ng nh mw b">useUnifiedTopology</code>是为了避免下面的错误。</p><pre class="kd ke kf kg gt mv mw mx my aw mz bi"><span id="a18b" class="na lq in mw b gy nb nc l nd ne">  (node:17808) DeprecationWarning: current URL string parser is deprecated, and will be removed in a future version. To use the new parser, pass option { useNewUrlParser: true } to MongoClient.connect.<br/>  (node:17808) DeprecationWarning: current Server Discovery and Monitoring engine is deprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true } to the MongoClient constructor.</span></pre><p id="e7f9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">理想情况下，我们希望通过环境文件指示数据库链接以及其他信息。Sapper不会自动读取<code class="fe nf ng nh mw b">.env</code>，所以我们用<code class="fe nf ng nh mw b">dotenv</code>来读取。</p><p id="ae44" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们用我们想要的任何信息创建一个<code class="fe nf ng nh mw b">.env</code>文件，将它添加到<code class="fe nf ng nh mw b">.gitignore</code>，因为我们不想将秘密提交给存储库，并在<code class="fe nf ng nh mw b">server.ts</code>中使用它们来连接数据库。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nj nk l"/></div></figure></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="d108" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一个漫长的设置！我希望我没有让你太厌烦。在下一部分，我们将跳转到更有趣的编码。</p><p id="14d0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可以在<a class="ae ks" href="https://github.com/omirobarcelo/retro-ps5/tree/part0" rel="noopener ugc nofollow" target="_blank">https://github.com/omirobarcelo/retro-ps5/tree/part0</a>中看到目前为止的所有代码。</p><p id="94ef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢一路读到最后！<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/lets-build-a-website-search-bar-with-svelte-and-rxjs-d5aab934c6a7">下集</a>再见！</p><p id="ba32" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">参考文献</strong></p><div class="nl nm gp gr nn no"><a href="https://sapper.svelte.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">sapper * web开发中的下一件小事</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">主页web开发中的下一个小东西Sapper是一个用于构建各种规模的web应用程序的框架，它带有一个…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">sapper.svelte.dev</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://expressjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">Express - Node.js web应用程序框架</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">Express是一个最小且灵活的Node.js web应用程序框架，它为web和…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">expressjs.com</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://www.mongodb.com/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">现代应用程序最流行的数据库</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">MongoDB是一个通用的、基于文档的分布式数据库，为现代应用程序开发人员和</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.mongodb.com</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://mongoosejs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">猫鼬</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">让我们面对现实吧，编写MongoDB验证、造型和业务逻辑样板文件是一件很麻烦的事情。这就是为什么我们写了…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">mongoosejs.com</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://www.cypress.io/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">JavaScript端到端测试框架</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">npm安装cypress安装Cypress for Mac、Linux或Windows，然后开始。完整的端到端测试…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">www.cypress.io</p></div></div><div class="nx l"><div class="og l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://github.com/sveltejs/sapper-template" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">sveltejs/sapper-模板</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">Sapper应用程序的入门模板。在GitHub上创建一个帐户，为sveltejs/sapper模板开发做贡献。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="oh l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://prettier.io/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">更漂亮的固执己见的代码格式化程序</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">固执己见的代码格式化程序</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">固执己见的代码格式</p></div></div><div class="nx l"><div class="oi l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://github.com/sveltejs/prettier-plugin-svelte" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">苗条/漂亮-插件-苗条</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">使用更漂亮的格式来格式化你的苗条的组件。用更漂亮的格式来格式化你的HTML，CSS和JavaScript</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">github.com</p></div></div><div class="nx l"><div class="oj l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://tailwindcss.com/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">无需离开你的HTML就能快速建立现代网站。</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">顺风CSS框架的文档。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">tailwindcss.com</p></div></div><div class="nx l"><div class="ok l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://dev.to/csaltos/tailwindcss-with-sapper-and-svelte-50ll" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">带Sapper和Svelte的尾翼</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">包含Sapper 0.28.0、Svelte 3.17.3和Tailwind CSS 1.8.6的初始模板更新至2020年9月25日为什么…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">开发到</p></div></div><div class="nx l"><div class="ol l nz oa ob nx oc km no"/></div></div></a></div><div class="nl nm gp gr nn no"><a href="https://hub.docker.com/_/mongo-express" rel="noopener  ugc nofollow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd io gy z fp nt fr fs nu fu fw im bi translated">mongo-express - Docker中心</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">基于Web的MongoDB管理界面，用Node.js和express写的</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">hub.docker.com</p></div></div></div></a></div></div></div>    
</body>
</html>
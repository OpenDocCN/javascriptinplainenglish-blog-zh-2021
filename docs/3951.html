<html>
<head>
<title>Loki: A Visual Regression Testing for Your Storybook Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">洛基:对你的故事书项目进行可视化回归测试</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/loki-a-visual-regression-testing-journey-on-projects-that-use-storybook-1ff5a8530a51?source=collection_archive---------7-----------------------#2021-08-07">https://javascript.plainenglish.io/loki-a-visual-regression-testing-journey-on-projects-that-use-storybook-1ff5a8530a51?source=collection_archive---------7-----------------------#2021-08-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6a7d12a1bf86d18d1fb8391e3a8913bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WqvePokMOfMJ9lFt"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@charlesdeluvio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charles Deluvio</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d4cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当人们开发和交付他们产品的新特性时，功能回归是观察的主要关键。但是——视觉上的也是。</p><p id="d10e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设你有一个你自己的或者你的团队正在开发的UI库/设计系统。如果你熟悉这些花哨的“UI库、设计系统”关键词，你就知道它们包含了很多原子组件、逻辑和规则。我甚至没有谈论复合组件——就像一张卡片，包含一个动作按钮作为它自己的默认行为。为了更准确地了解这些库在数量上有多复杂，除了钩子之外，<a class="ae jz" href="https://chakra-ui.com/" rel="noopener ugc nofollow" target="_blank"> Chakra UI </a>中有70个UI组件。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="2f24" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您交付新功能时——功能结果、代码质量和开发阶段可能犯的最常见错误可能看起来很容易观察和管理——因为您已经作为团队安排了代码评审会议。但是对于样式方面，它并不(总是)如此。它要求人们有UI意识，对库有深入的了解，并且知道组件之间如何交互。</p><p id="dd48" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个阶段，除了我们的眼睛，我们需要一个自主系统来观察图书馆中的视觉变化。🤔</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="8ac5" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">洛基</h1><p id="1fc3" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated"><a class="ae jz" href="https://loki.js.org/" rel="noopener ugc nofollow" target="_blank"> Loki </a>是由<a class="ae jz" href="https://github.com/oblador" rel="noopener ugc nofollow" target="_blank"> Joel Arvidsson </a>开发的可视化回归库。它的目标是“简单的设置，没有额外的维护成本，独立于操作系统的可重复测试，并支持故事书所支持的所有平台”。</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="e271" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从安装开始，您会注意到Loki是一个几乎不需要配置的库。它还使用CLI处理在<strong class="kc io"> <em class="mo"> package.json </em> </strong>文件中定位其配置的部分。</p><p id="7a72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">初始化后，您应该构建第一批快照，以供将来参考。但是在执行<strong class="kc io"> <em class="mo">更新</em> </strong>命令之前，请确保您已经启动了故事书应用程序，因为Loki将尝试访问您的故事。</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="1ed2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">执行该命令后——现在您应该能够看到在<strong class="kc io"> <em class="mo">下创建的文件夹。洛基</em> </strong>，取名<strong class="kc io"> <em class="mo">参考</em> </strong>。</p><figure class="mi mj mk ml gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/3fd1485e94e82ac6169efac86b5ded8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*6Errr1X0cfuqoLqgcs8cGw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The folder that has been generated by Loki</figcaption></figure><p id="8c40" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在是时候对你的故事中的组件做一些改变了，让洛基注意一下。做出更改后，保存它们并继续执行命令:</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="ca9b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Loki现在将在<strong class="kc io"> <em class="mo">下创建新的快照。loki/current </em> </strong>。它们将用于应用程序当前状态与之前状态的比较(基于<strong class="kc io"> <em class="mo">)。Loki/参考</em> </strong>)。</p><p id="424e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果存在任何倒退或变化，您可以在<strong class="kc io"> <em class="mo">下找到它们。正如你所猜测的，作为结果，测试将会失败。</em></strong></p><p id="aab1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">检查完这些更改后，您可以继续执行“批准”命令来批准这些更改—如果您计划了这些更改的话。</p><figure class="mi mj mk ml gt jo"><div class="bz fp l di"><div class="mm mn l"/></div></figure><blockquote class="mq mr ms"><p id="134e" class="ka kb mo kc b kd ke kf kg kh ki kj kk mt km kn ko mu kq kr ks mv ku kv kw kx ig bi translated">提交您的更改以及新的参考图像，然后重复。</p></blockquote></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="2e4c" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">警告和个人想法</h1><p id="de8a" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">为了确保你的用例首先适合Loki，你应该回顾/重温你的故事书实践。您应该避免只在一种状态下使用组件，这种状态不会告诉您更多关于它自身的信息。如果你的故事中包含了一些场景，那就说得通了。</p><p id="dcd9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但即使在故事没有详细到应有程度的情况下，我相信洛基仍然在向我们介绍一个新的水平的可观察性和检测视觉回归的自主性。</p><p id="c83b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">总结一下，有很多测试库，Loki只是其中之一。我发现这个库很有用，因为它很容易配置，不需要额外开发测试用例。实际上，它也是为了在持续集成服务器上运行而构建的。您也可以在您的软件开发生命周期中轻松地调整它们。✨</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="6f43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以在他们的文档中找到更多关于Loki的详细信息:</p><p id="4469" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">【https://loki.js.org/ T4】</p><p id="cbd2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是该项目的GitHub库:</p><div class="mw mx gp gr my mz"><a href="https://github.com/oblador/loki" rel="noopener  ugc nofollow" target="_blank"><div class="na ab fo"><div class="nb ab nc cl cj nd"><h2 class="bd io gy z fp ne fr fs nf fu fw im bi translated">GitHub-obrador/Loki:👁故事书的视觉回归测试</h2><div class="ng l"><h3 class="bd b gy z fp ne fr fs nf fu fw dk translated">有一些用于web的可视化回归工具，但是大多数要么不能无头运行，要么使用幻想曲</h3></div><div class="nh l"><p class="bd b dl z fp ne fr fs nf fu fw dk translated">github.com</p></div></div><div class="ni l"><div class="nj l nk nl nm ni nn jt mz"/></div></div></a></div></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="0d89" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mo">发现</em> <strong class="kc io"> <em class="mo"> Loki </em> </strong> <em class="mo">有用吗？测试中你最喜欢的库是什么？让我知道就好！</em></p><p id="54c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另外，如果你喜欢这篇文章，请与你的朋友和同事分享。</p><p id="3dd6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">保持安全和健康，再见！👋🏻</p><p id="bab1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mo">更多内容请看</em><a class="ae jz" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mo">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
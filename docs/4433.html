<html>
<head>
<title>How to Seed MongoDB Database From Node: The Simplest Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何从节点播种MongoDB数据库:最简单的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/seeding-mongodb-database-from-node-the-simplest-way-3d6a0c1c4668?source=collection_archive---------0-----------------------#2021-09-04">https://javascript.plainenglish.io/seeding-mongodb-database-from-node-the-simplest-way-3d6a0c1c4668?source=collection_archive---------0-----------------------#2021-09-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1f02193751e5475a4129792d4f0c69ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ty8m8Y3dzgD6P5Xc17gbYw.jpeg"/></div></div></figure><p id="e604" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">假设你正在用express和mongoose构建一个CRUD应用，你需要测试你实现的CRUD功能。你需要数据库里的数据。播种您的MongoDB数据库可以帮助您在Mongo集合中获得一些数据，从而使您能够不受限制地测试您的查询。最简单的播种方式更像是将一些虚拟数据<em class="kt">最初</em>插入到数据库中，以便您可以对其进行处理。</p><p id="8586" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最好的做法是创建一个<em class="kt">单独的、</em> <em class="kt">独立的</em>文件，远离你的其他app相关文件<em class="kt">就为了这个目的</em>。然后，您可以在任何想要将一些数据注入数据库的时候运行种子文件。</p><p id="8bbe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Mongoose基本上是Node js和Mongo DB之间的通信器。Mongoose可以帮助您通过Node创建到数据库的连接。一旦你创建了你的模型，定义了你想要的Mongo集合应该是什么样子，那么你应该从一个单独的文件中播种集合<em class="kt">而不是</em>。您可以从模型本身做到这一点，但是正如我提到的，将代码放在一个单独的文件中是一个很好的做法。</p><p id="ef98" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我对‘产品’的简单模型(<em class="kt"> product.js </em>)。与MongoDB的连接建立在'<em class="kt"> app.js' </em>文件中，这样我就不必在每个模型文件中重复连接代码。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ku"><img src="../Images/2cc6a32661cd32f43d8cd922d2fa1c72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aakRJkJ1p1Yw3dsYXeBYLw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">models/product.js</figcaption></figure><p id="83a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是我的'<em class="kt"> app.js' </em>文件中建立连接的部分。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ld"><img src="../Images/eddedef86d47c28e5d249fa4eb7ac81e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tc-qabUOgayv8xCWhjVZpg.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">app.js</figcaption></figure><p id="9cc3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，是时候创建'<em class="kt"> seeds.js' </em>文件了。如果你想要<em class="kt">或</em>你可以输入数据，你可以使用<a class="ae le" href="https://github.com/marak/Faker.js/" rel="noopener ugc nofollow" target="_blank"> <em class="kt"> faker.js </em> </a>方便地生成一些假数据。创建'<em class="kt"> seeds.js' </em>文件，从要求mongoose开始。在我们创建的模型中，我们没有建立数据库连接。但是在我们的'<em class="kt"> seeds.js' </em>文件中，我们应该继续创建连接，因为该文件应该<em class="kt">袖手旁观它自己的脚</em>而不依赖于任何其他文件，以便它可以独立地用于播种数据库。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lf"><img src="../Images/902c2f4cc9cdec35a428b5bb0b312fd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7hY9soCoWJC68cAOwdySXw.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">seeds.js</figcaption></figure><p id="078d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您可以从您的终端运行'<em class="kt">node</em><em class="kt">seeds . js '</em>命令来运行该文件，它将删除DB中的所有现有记录(如果有)，并用您提供的记录来替换它们。如果不想删除已有记录，只需去掉<em class="kt"> Product.deteleMany({})即可。</em></p></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><p id="8bb0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个关于如何播种MongoDB的简短演示。希望你喜欢。下次见！</p></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><h2 id="1be5" class="ln lo in bd lp lq lr dn ls lt lu dp lv kg lw lx ly kk lz ma mb ko mc md me mf bi translated">进一步阅读</h2><div class="mg mh gp gr mi mj"><a href="https://plainenglish.io/blog/which-database-should-you-use-for-your-next-js-app" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd io gy z fp mo fr fs mp fu fw im bi translated">Next.js应用程序应该使用什么数据库？</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">如果你在2022年要开发一个全栈应用，选择流行的Next.js会让你有95%的机会…</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">简明英语. io</p></div></div><div class="ms l"><div class="mt l mu mv mw ms mx jt mj"/></div></div></a></div><div class="mg mh gp gr mi mj"><a href="https://plainenglish.io/blog/how-to-compose-and-integrate-apis-together-as-if-you-were-using-npm-for-apis" rel="noopener  ugc nofollow" target="_blank"><div class="mk ab fo"><div class="ml ab mm cl cj mn"><h2 class="bd io gy z fp mo fr fs mp fu fw im bi translated">如何将API组合和集成在一起，就像您正在使用API的NPM一样</h2><div class="mq l"><h3 class="bd b gy z fp mo fr fs mp fu fw dk translated">将两个API整合到一个应用程序中，该应用程序显示了历史上最大的音乐会，按国家首都排列。与……</h3></div><div class="mr l"><p class="bd b dl z fp mo fr fs mp fu fw dk translated">简明英语. io</p></div></div><div class="ms l"><div class="my l mu mv mw ms mx jt mj"/></div></div></a></div></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><p id="0288" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">更多内容请看</em><a class="ae le" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">plain English . io</em></strong></a><em class="kt">。报名参加我们的</em> <a class="ae le" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="kt">免费周报</em> </strong> </a> <em class="kt">。关注我们关于</em><a class="ae le" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">Twitter</em></strong></a><a class="ae le" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">LinkedIn</em></strong></a><em class="kt"/><a class="ae le" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">YouTube</em></strong></a><em class="kt"/><a class="ae le" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">不和</em> </strong> </a> <em class="kt">。对增长黑客感兴趣？检查</em> <a class="ae le" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="kt">电路</em> </strong> </a> <em class="kt">。</em></p></div></div>    
</body>
</html>
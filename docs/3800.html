<html>
<head>
<title>Overview: Javascript Memory Leaks and Main Thread Bottleneck</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">概述:Javascript内存泄漏和主线程瓶颈</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/overview-javascript-memory-leaks-and-main-thread-bottleneck-560ba8289dd5?source=collection_archive---------11-----------------------#2021-07-30">https://javascript.plainenglish.io/overview-javascript-memory-leaks-and-main-thread-bottleneck-560ba8289dd5?source=collection_archive---------11-----------------------#2021-07-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7ced" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在您作为JavaScript开发人员的职业生涯中，至少会遇到一次内存泄漏问题(通常是在生产中)，并且您会惊讶地发现这种事情的存在(并且您必须处理它)。Lol。让你过渡到高级开发人员的时刻？</p><p id="feab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最近，在开发<a class="ae kj" href="https://www.ezcreatives.in/" rel="noopener ugc nofollow" target="_blank"> ezCreatives </a>的时候，我碰到了一个这样的问题。</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi kk"><img src="../Images/8761ad66bdf230c3a05a52e0f266ce37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ycoRCFO2xNW6umUxU3SSGQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">Before: Notice how the main thread is always blocked. Tasks are getting sub-listed. (App gonna crash soon)</figcaption></figure><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi la"><img src="../Images/9defc9f5d88286ec70874d0704ecf9f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MkAL2detC96wKIkS2-ifkQ.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">After: Notice the main thread is freed as soon as the task gets completed (though still room for improvement)</figcaption></figure><p id="ccf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">实际上，我并不打算在这里解释任何特定的问题，而是会为您指出理解、调试和解决此类问题所需的所有重要链接和资源。(<em class="ki">有一天我可能会写一篇缩小范围的文章</em>)</p><figure class="kl km kn ko gt kp gh gi paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="gh gi lb"><img src="../Images/c17303b94b0c0b2090032adea4c5010a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lq8KMQvDe2JB-D4spB_log.png"/></div></div><figcaption class="kw kx gj gh gi ky kz bd b be z dk">My problem somewhat looked like this. If you’re assigning a URL to any object like &lt;a&gt; or &lt;img&gt; tag using javascript, then make sure to revoke it after the use, else it causes a memory leak (URL gets attached to the scope of the whole document and won’t be garbage collected unless the document is destroyed)</figcaption></figure><p id="ab5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">你需要知道的解决内存泄漏和CPU瓶颈问题的工具(所有这些都可以在浏览器的开发者工具中找到):</strong></p><ol class=""><li id="de23" class="lc ld in jm b jn jo jr js jv le jz lf kd lg kh lh li lj lk bi translated"><a class="ae kj" href="https://www.debugbear.com/blog/devtools-performance" rel="noopener ugc nofollow" target="_blank">性能</a> <a class="ae kj" href="https://developer.chrome.com/docs/devtools/evaluate-performance/" rel="noopener ugc nofollow" target="_blank">章节</a></li><li id="6c3c" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated"><a class="ae kj" href="https://developer.chrome.com/docs/devtools/memory-problems/memory-101/" rel="noopener ugc nofollow" target="_blank">内存</a> <a class="ae kj" href="https://developer.chrome.com/docs/devtools/memory-problems/heap-snapshots/" rel="noopener ugc nofollow" target="_blank">部分</a></li><li id="1b84" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated"><a class="ae kj" href="https://developers.google.com/web/tools/lighthouse" rel="noopener ugc nofollow" target="_blank">灯塔审计</a></li></ol><p id="145d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">最常见的内存泄漏类型:</strong></p><ol class=""><li id="b76b" class="lc ld in jm b jn jo jr js jv le jz lf kd lg kh lh li lj lk bi translated">意外的全局变量</li><li id="7077" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">未经检查的计时器或回调</li><li id="1a66" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">分离的DOM元素</li><li id="2eed" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">关闭</li></ol><p id="a3a7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在这里阅读这些常见的内存泄漏问题，这里有全面的解释。</p><p id="768f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">主线程(CPU)瓶颈解决方案</strong></p><ol class=""><li id="d6ed" class="lc ld in jm b jn jo jr js jv le jz lf kd lg kh lh li lj lk bi translated">拆分<a class="ae kj" href="https://web.dev/long-tasks-devtools/#what-are-long-tasks" rel="noopener ugc nofollow" target="_blank">长任务</a>(你的以及第三方脚本)</li><li id="9039" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">在正确的时间和正确的地点运行代码块</li><li id="d4f1" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">使用<a class="ae kj" href="https://web.dev/off-main-thread/" rel="noopener ugc nofollow" target="_blank"> web workers </a>来释放你的主线程(终极)</li></ol><p id="f5b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">必备知识:</strong></p><ol class=""><li id="615b" class="lc ld in jm b jn jo jr js jv le jz lf kd lg kh lh li lj lk bi translated">浏览器中<a class="ae kj" href="https://developers.google.com/web/updates/2018/09/inside-browser-part3" rel="noopener ugc nofollow" target="_blank">渲染器进程如何工作</a></li><li id="5685" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">Javascript <a class="ae kj" href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" rel="noopener ugc nofollow" target="_blank">事件循环</a>和<a class="ae kj" href="https://javascript.info/promise-basics" rel="noopener ugc nofollow" target="_blank">承诺</a></li><li id="2d1b" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated">Javascript <a class="ae kj" href="https://javascript.info/garbage-collection" rel="noopener ugc nofollow" target="_blank">垃圾收集</a></li><li id="f642" class="lc ld in jm b jn ll jr lm jv ln jz lo kd lp kh lh li lj lk bi translated"><a class="ae kj" href="https://developer.chrome.com/docs/devtools/" rel="noopener ugc nofollow" target="_blank">开发者工具</a></li></ol><h2 id="421d" class="lq lr in bd ls lt lu dn lv lw lx dp ly jv lz ma mb jz mc md me kd mf mg mh mi bi translated">结论</h2><p id="5c29" class="pw-post-body-paragraph jk jl in jm b jn mj jp jq jr mk jt ju jv ml jx jy jz mm kb kc kd mn kf kg kh ig bi translated">JavaScript很牛逼。明智地使用它的力量。总有一天会写出更好的结论。</p><p id="a164" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢阅读。</p><p id="f8d9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">更多内容请看</em><a class="ae kj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ki">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create Your Own Custom Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在反应中创建您自己的自定义表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-your-custom-forms-in-react-6febdef592b3?source=collection_archive---------6-----------------------#2021-03-23">https://javascript.plainenglish.io/creating-your-custom-forms-in-react-6febdef592b3?source=collection_archive---------6-----------------------#2021-03-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f7e7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">创建自己的表单和验证，就像Formik一样</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/742841ebfd117fa5d726ad1f21a3dc2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MIS8FmEJVfD5bDtg3WWF4A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="http://i-hate-reading-logs.vercel.app/" rel="noopener ugc nofollow" target="_blank">React to our website</a></figcaption></figure><p id="25f2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">创建带有验证的表单、提交表单值、像加载器一样显示API响应、错误是一项相当棘手的任务。表单在前端没有那么简单。开发人员通常会做的最基本的问题是将表单的每个值保存在状态管理存储区(如Redux存储区)或整个应用程序的全局状态中。<br/>将整个表单值保存为全局状态没有问题，但是这个过程对于更新整个用户界面是不必要的。任何形式值的一个微小变化最终都会重新呈现整个应用程序，因为整个应用程序都订阅了我们的全局状态。</p><h1 id="72e7" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">什么是Formik？</strong></h1><p id="ce10" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Formik是一个<strong class="kv io">表单构建库</strong>，这个库在创建表单时简化了一些繁琐的过程。Formik提供了一种简单的方法来获取表单值，验证表单的值，例如，电子邮件验证、电子邮件是必需的验证以及创建简单的表单提交按钮。当我使用Formik时，我很喜欢它，而且它是一个非常小的gzip包(12KB)，很容易使用。</p><p id="ef80" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天，我们将尝试通过所有必需的验证来制作我们自己的自定义表单。我将使用的第三方库是material-UI。我已经在这个报告中安装了材料用户界面库。如果你想了解我是如何安装材料用户界面的，那就在下面添加代码库和文章链接。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="004b" class="mr lq in mn b gy ms mt l mu mv"><strong class="mn io">Article =&gt; </strong><a class="ae ks" href="https://medium.com/nerd-for-tech/perfect-ui-library-with-react-813f41704584" rel="noopener">https://medium.com/nerd-for-tech/perfect-ui-library-with-react-813f41704584</a></span><span id="d739" class="mr lq in mn b gy mw mt l mu mv"><strong class="mn io">Repository =&gt; </strong><a class="ae ks" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/MaterialUIInstallationWithNextJS" rel="noopener ugc nofollow" target="_blank">https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/MaterialUIInstallationWithNextJS</a></span></pre><p id="a52a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Material UI本身提供了许多表单验证方法，您可以在那里使用FormControlAPI来更好地理解。在此处阅读更多<a class="ae ks" href="https://material-ui.com/api/form-control/" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="61b6" class="mr lq in bd lr mx my dn lv mz na dp lz lc nb nc mb lg nd ne md lk nf ng mf nh bi translated">基本表单按材料控制-用户界面</h2><p id="1138" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">Material UI实际上为您提供了一个基本的包装器及其一些子UI组件，以便使用一些助手文本、错误/填充/聚焦输入为表单值创建输入。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="ee18" class="mr lq in mn b gy ms mt l mu mv">&lt;FormControl&gt;<br/>  &lt;InputLabel htmlFor="my-input"&gt;Email address&lt;/InputLabel&gt;<br/>  &lt;Input id="my-input" aria-describedby="my-helper-text" /&gt;<br/>  &lt;FormHelperText id="my-helper-text"&gt;<br/>     We'll never share your email.     <br/>  &lt;/FormHelperText&gt;<br/>&lt;/FormControl&gt;</span></pre><p id="c7d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是，我们不会使用这个API来创建我们的表单，相反，我们将创建我们的自定义表单并添加自定义验证。这个过程通常需要花费时间和精力，但是它可以完全控制表单的每一个细节，尤其是在验证方面，并且给用户一个良好的API响应。</p><h1 id="50b5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">执行</h1><p id="a6d7" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们将从创建一个基本的输入开始，比如Materila-UI的username使用TextField组件，带有标签、提交按钮，并尝试为这个简单的username表单域添加一些验证。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/0e5f99c071b6762a537319a6aaebd54f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6Fy-RlfLdnuBYNvJihBUw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Index.js for custom Form</figcaption></figure><p id="9771" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们有一个useState对象，它将收集表单元素中每个元素的所有值。然后，我们有一个单一的错误useState对象，它将陈述每种情况下的错误，如电子邮件、用户名、密码等。最后，我们有一个按钮，然后将提交所有的值，我们的按钮将涵盖所有的边缘情况，就像它将被禁用时，电子邮件或密码是错误的，或任何输入字段是空的。</p><h2 id="0c03" class="mr lq in bd lr mx my dn lv mz na dp lz lc nb nc mb lg nd ne md lk nf ng mf nh bi translated">电子邮件验证</h2><p id="c257" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">对于电子邮件验证，最好使用正则表达式并禁用提交按钮，直到电子邮件根据正则表达式不正确。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="a2e3" class="mr lq in mn b gy ms mt l mu mv">Email Regex =&gt; <!-- -->/^(([^&lt;&gt;()[\]\\.,;:\s@"]+(\.[^&lt;&gt;()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;</span></pre><p id="3828" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将创建一个函数"<strong class="kv io"><em class="nj">【validate email "</em></strong>，该函数将检查电子邮件表达式是否正确，如果不正确，我们将把错误状态设置为true，并禁用提交按钮，同时向用户显示错误消息。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nk"><img src="../Images/f0f4c0780e7d74d6258941afbea20feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MbPRXlTQ4A8NYXvb0SJchg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">ValidateEmail function will look like this now.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/8b219f0d0d6f0345e70e438260bd4e8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/format:webp/1*Y2sezf1mJVGL5a2PNqOnMA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Error after writing an invalid email</figcaption></figure><p id="ff2b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另一种情况是提供一个密码字段，这个字段将具有显示和隐藏密码的功能。目前，我们不持有任何密码的正则表达式，如一个大写键，一个数字键等。但是你可以添加它们，就像我们有一个电子邮件一样。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/9155fb7308887534daac2965d64bca7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*X6n4qc7Jgi66XlpAuiKtZg.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Password Input with show and hide functionality</figcaption></figure><p id="a705" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下一步是添加密码为空的错误边缘情况，密码字段也不应该为空，所以我们会处理它。对于所有的边缘情况，我们有一个公共的错误状态对象，它告诉我们整个表单的当前错误状态。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nn"><img src="../Images/90ada711ed9c14c77cef2e40d1c33ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:940/format:webp/1*GBuVO0SCVJzLUhiNtQ2Nxw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Password, Email &amp; Username error condition our form</figcaption></figure><p id="aced" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果任何错误状态为真，您还可以添加禁用按钮的功能。怎么做很简单，使用输入的<strong class="kv io"> onBlur </strong>功能，并在每个输入的<strong class="kv io"> onBlur </strong>后添加检查是否所有的值都存在，还检查错误状态是否存在，如果任何错误状态存在，则将按钮的禁用设置为真。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi no"><img src="../Images/00e2b43b009c317f32246ea4c467c6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:922/format:webp/1*fQigdkgTIPlPKdv7XR5jvQ.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Disabled button once email is not entered</figcaption></figure><p id="b4dc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每个错误状态都有能力禁用我们的提交按钮，这样用户就不能向我们的API发出请求，并且在向我们的后端发送数据之前，我们会在前端进行模式检查。我们也可以更喜欢使用typescript，并在前端向每个状态对象添加类型，以再次添加严格的类型检查。</p><h2 id="4962" class="mr lq in bd lr mx my dn lv mz na dp lz lc nb nc mb lg nd ne md lk nf ng mf nh bi translated">收集表单值</h2><p id="6078" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们已经在一个状态中收集了所有的输入值，所以当用户点击提交按钮提交表单时，我们只需要获取整个值状态对象。这使得一切变得非常简单，我们可以将整个values对象作为主体添加到API请求中。</p><h1 id="3869" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">显示API响应</h1><p id="ff21" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">显示API响应总是一个好方法，在我们的例子中，在提交表单值之后，我们将从API得到一个响应，而不管API的响应体是什么。我们应该总是覆盖每一个边缘情况，就像我们上面对值检查所做的那样。<br/>我们将在按钮上添加循环进度，指示用户等待我们的后端给出用户响应。我们需要给出一个适当的错误消息，以防用户输入错误的电子邮件或密码，或者用户没有在我们公司的数据库中创建帐户。在按钮中添加加载器状态，以在最后显示圆形进度条</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="7f58" class="mr lq in mn b gy ms mt l mu mv">&lt;Button <br/>   <em class="nj">disabled</em>={disabled} <br/>   <em class="nj">fullWidth</em> <br/>   si<em class="nj">ze</em>=”large” <br/>   <em class="nj">className=</em>{styles.button} <br/>   <em class="nj">variant</em>=”contained”<br/>   <em class="nj">color</em>=”primary”<br/>    <em class="nj">onClick</em>={(<em class="nj">e</em>) =&gt;  handleSubmit(<em class="nj">e</em>)}&gt;<br/>   {loader ? &lt;CircularProgress <em class="nj">style</em>={{ color: ‘#eeeeee’ }} /&gt;<br/>     :     <br/>    "Submit"<br/>    }<br/>&lt;/Button&gt;</span></pre><h1 id="1199" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="1549" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">创建一个定制的表单并不困难，而且它给了你作为一个开发人员的充分自由，给用户一个更好的体验和反馈给每一个用户填写的表单。我已经创建了注册表单，在未来，我将涵盖另一篇文章，以填补长形式的东西，如浅野应用程序，我将涵盖如何存储这样长的形式的价值在实时。</p><p id="275a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">直到，下一次，有一个美好的一天，人们。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="ea90" class="mr lq in mn b gy ms mt l mu mv">Fell free to hit star button to our code Repository.<br/><a class="ae ks" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/CustomFormsInReact" rel="noopener ugc nofollow" target="_blank">Click to reach repository</a></span></pre><h2 id="c67b" class="mr lq in bd lr mx my dn lv mz na dp lz lc nb nc mb lg nd ne md lk nf ng mf nh bi translated">进一步阅读</h2><div class="np nq gp gr nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-build-your-own-surveys-extend-them-with-custom-javascript-b4c7eb5648c4"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd io gy z fp nx fr fs ny fu fw im bi translated">如何构建自己的调查&amp;用自定义JavaScript扩展调查</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">一本关于如何使用自己的JS函数的入门书，以增强SurveyJS附带的条件逻辑和验证器。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oc l od oe of ob og km ns"/></div></div></a></div><p id="f672" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nj">更内容于</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nj">普通英语</em> </strong> </a> <em class="nj">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nj">免费周报</em> </strong> </a> <em class="nj">。在</em><a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">Twitter</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">LinkedIn</em></strong></a><em class="nj"/><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nj">YouTube</em></strong></a><em class="nj">以及</em><a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">T42不和 </strong> </a> <em class="nj">上跟随我们。</em></p></div></div>    
</body>
</html>
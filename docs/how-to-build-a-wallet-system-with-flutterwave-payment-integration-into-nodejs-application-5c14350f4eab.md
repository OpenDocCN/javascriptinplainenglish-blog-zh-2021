# å¦‚ä½•å°† Flutterwave æ”¯ä»˜é›†æˆåˆ° Node.js åº”ç”¨ç¨‹åºä¸­æ¥æ„å»ºé’±åŒ…ç³»ç»Ÿ

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/how-to-build-a-wallet-system-with-flutterwave-payment-integration-into-nodejs-application-5c14350f4eab?source=collection_archive---------1----------------------->

![](img/443a30c1cb5b3ef643c5edfc6aa3056d.png)

Photo by [Emil Kalibradov](https://unsplash.com/@emkal?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

ä»Šå¤©ï¼Œè®¸å¤šç½‘ç«™æ‰€æœ‰è€…æƒ³è¦åœ¨çº¿æ”¯ä»˜ç½‘å…³ï¼Œå°¤å…¶æ˜¯åœ¨è¡Œä¸šé£é€Ÿå‘å±•çš„æƒ…å†µä¸‹ã€‚ä¸ºå«ç”Ÿéƒ¨é—¨ã€é‡‘èéƒ¨é—¨æˆ–å…¶ä»–éƒ¨é—¨è®¾è®¡åº”ç”¨ç¨‹åºæ—¶ï¼Œåˆ›å»ºé’±åŒ…ç³»ç»Ÿæœ‰ç‚¹åƒå™©æ¢¦ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªé’±åŒ…ç³»ç»Ÿï¼Œä»¥åŠå¦‚ä½•é›†æˆ Flutterwave æ”¯ä»˜ç³»ç»Ÿã€‚

# å…ˆå†³æ¡ä»¶

ä¸ºäº†å®Œæˆæœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦:

*   JavaScript çš„å·¥ä½œçŸ¥è¯†ã€‚
*   å¾ˆå¥½çš„ç†è§£ Node.jsã€‚
*   å¯¹ MongoDB æˆ–æˆ‘ä»¬é€‰æ‹©çš„ä»»ä½•æ•°æ®åº“æœ‰åŸºæœ¬çš„äº†è§£ã€‚
*   [é‚®å·®](https://www.postman.com/)ä»¥åŠä¸€äº›å¦‚ä½•ä½¿ç”¨é‚®å·®çš„çŸ¥è¯†ã€‚

æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ª [Flutterwave](https://dashboard.flutterwave.com/signup) è´¦æˆ·æ¥æ¥æ”¶æˆ–æ¥å—æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„ä»˜æ¬¾ã€‚

# ä»€ä¹ˆæ˜¯é’±åŒ…ç³»ç»Ÿï¼Ÿ

[æ•°å­—é’±åŒ…](https://en.wikipedia.org/wiki/Digital_wallet)ï¼Œé€šå¸¸è¢«ç§°ä¸ºç”µå­é’±åŒ…ï¼Œæ˜¯ä¸€ç§ç”µå­è®¾å¤‡ã€äº’è”ç½‘æœåŠ¡æˆ–è½¯ä»¶åº”ç”¨ç¨‹åºï¼Œå…è®¸ä¸€æ–¹ä¸å¦ä¸€æ–¹äº¤æ¢æ•°å­—è´§å¸å•ä½ä»¥è·å¾—äº§å“å’ŒæœåŠ¡ã€‚è¿™å¯ä»¥åŒ…æ‹¬åˆ©ç”¨ç”µè„‘åœ¨çº¿è´­ä¹°äº§å“æˆ–ä½¿ç”¨æ™ºèƒ½æ‰‹æœºåœ¨å•†åº—è´­ä¹°ã€‚

åœ¨ä»»ä½•äº¤æ˜“ä¹‹å‰ï¼Œé’±å¯ä»¥å­˜å…¥æ•°å­—é’±åŒ…ï¼Œæˆ–è€…åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä¸ªäººçš„é“¶è¡Œè´¦æˆ·å¯ä»¥é“¾æ¥åˆ°æ•°å­—é’±åŒ…ã€‚

# æ•°å­—é’±åŒ…æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ

*   æ¯æ¬¡ä½ æƒ³è¿›è¡Œç½‘ä¸Šäº¤æ˜“æ—¶ï¼Œä¸å¿…ä»é¼“é¼“å›Šå›Šçš„é’±åŒ…é‡Œæå‡ºä½ çš„å¡ï¼Œä½ åªéœ€æ‹¿ç€ä½ çš„æ™ºèƒ½æ‰‹æœºï¼Œç™»å½•ä½ çš„è´¦æˆ·ï¼Œå°±å¯ä»¥å¼€å§‹äº†ã€‚
*   å¤§å¤šæ•°åº”ç”¨ç¨‹åºå…è®¸ä½ ä»¥ä¸€ç§å®¹æ˜“è·å–çš„æ–¹å¼ç»„ç»‡ä½ æ‰€æœ‰çš„ä¿¡æ¯ï¼ŒèŠ‚çœä½ ç¿»éé’±åŒ…å¯»æ‰¾ä½ éœ€è¦çš„ä¸œè¥¿çš„æ—¶é—´ã€‚
*   è®¸å¤šæ•°å­—é’±åŒ…åº”ç”¨ç¨‹åºå‘ç”¨æˆ·æä¾›å„ç§å¥–é‡‘å’Œå¥–å“ï¼Œè¿™å¯èƒ½æœ‰åŠ©äºä½ åœ¨ç‰¹å®šäº¤æ˜“ä¸­è·å¾—æ›´å¤šâ€œç‰©æœ‰æ‰€å€¼â€ã€‚

# ä»€ä¹ˆæ˜¯ Flutterwaveï¼Ÿ

ä»åœ¨çº¿æ”¶æ¬¾åˆ°æ”¯ä»˜ï¼Œä»¥åŠè¿™ä¸¤è€…ä¹‹é—´çš„ä¸€åˆ‡ï¼Œ [Flutterwave](https://flutterwave.com) å¯ä»¥å¸®åŠ©æ‚¨ä¸ºæ‚¨çš„ç‰¹å®šç”¨ä¾‹å¼€å‘ä»»ä½•å½¢å¼çš„æ”¯ä»˜æµç¨‹ã€‚

ä»–ä»¬è¿˜æä¾›å‡ é¡¹æœåŠ¡ï¼Œè®©ä½ åœ¨å‡ åˆ†é’Ÿå†…å°±å¯ä»¥åœ¨ä¸–ç•Œå„åœ°è½¬è´¦å’Œæ”¶æ¬¾ã€‚

# åˆ›å»ºç›®å½•ï¼Œå®‰è£…ä¾èµ–é¡¹ï¼Œå¹¶è®¾ç½®èº«ä»½éªŒè¯

è¦å¼€å§‹ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®æˆ‘ä»¬çš„é¡¹ç›®ã€‚

é€šè¿‡å¯¼èˆªåˆ°æˆ‘ä»¬åœ¨æœºå™¨ä¸Šé€‰æ‹©çš„ç›®å½•å¹¶åœ¨ç»ˆç«¯ä¸Šæ‰“å¼€å®ƒæ¥æ‰“å¼€ Visual Studio ä»£ç ã€‚

ç„¶åæ‰§è¡Œ:

> *æ³¨æ„:* `*code .*` *å¦‚æœæˆ‘ä»¬çš„ç³»ç»Ÿä¸Šæ²¡æœ‰å®‰è£… Visual Studio ä»£ç å°±æ— æ³•å·¥ä½œã€‚*

# åˆ›å»ºç›®å½•å¹¶åˆå§‹åŒ–`npm.`

é€šè¿‡é”®å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»ºç›®å½•å¹¶åˆå§‹åŒ– npm:

```
mkdir wallet-demo-with-flutterwave cd wallet-demo-with-flutterwave npm init -ymkdir wallet-demo-with-flutterwave cd wallet-demo-with-flutterwave npm init -y
```

# åˆ›å»ºæ–‡ä»¶å’Œç›®å½•

åœ¨å‰é¢çš„æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬ç”¨å‘½ä»¤â€œnpm init -yâ€åˆå§‹åŒ–äº†`npm`ï¼Œè¿™å°†è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª package.jsonã€‚

æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åˆ›å»ºæ¨¡å‹ã€é…ç½®ç›®å½•å’Œæ–‡ä»¶ï¼Œä¾‹å¦‚`wallet.js, wallet_transaction.js, transaction.js, database.js`ã€‚

```
mkdir model config touch config/database.js model/wallet.js model/wallet_transaction.js model/transaction.js model/user.js
```

æˆ‘ä»¬ç°åœ¨å¯ä»¥ç”¨å‘½ä»¤åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º`index.js`å’Œ`app.js`æ–‡ä»¶ã€‚

å¦‚ä¸‹å›¾æ‰€ç¤º:

![](img/a65b00a0d99315d414fc5febd4e53c4c.png)

# å®‰è£…ä¾èµ–é¡¹

æˆ‘ä»¬å°†å®‰è£…å‡ ä¸ªåƒ`mongoose, jsonwebtoken, express, dotenv, axios, bcryptjs,`è¿™æ ·çš„ä¾èµ–é¡¹å’Œåƒ`nodemon`è¿™æ ·çš„å¼€å‘ä¾èµ–é¡¹ï¼Œä»¥ä¾¿åœ¨æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œæ›´æ”¹æ—¶é‡å¯æœåŠ¡å™¨ã€‚

æˆ‘ä»¬å°†å®‰è£… mongooseï¼Œå› ä¸ºæˆ‘å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨ MongoDBã€‚

å°†æ ¹æ®æˆ‘ä»¬æ•°æ®åº“ä¸­çš„ä¿¡æ¯æ£€æŸ¥ç”¨æˆ·å‡­è¯ã€‚å› æ­¤ï¼Œæ•´ä¸ªè®¤è¯è¿‡ç¨‹å¹¶ä¸å±€é™äºæˆ‘ä»¬å°†åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ•°æ®åº“ã€‚

```
npm install jsonwebtoken dotenv mongoose express bcryptjs npm install nodemon -D
```

# åˆ›å»º Node.js æœåŠ¡å™¨å¹¶è¿æ¥æ•°æ®åº“

é€šè¿‡å°†ä»¥ä¸‹ä»£ç ç‰‡æ®µæ·»åŠ åˆ°æˆ‘ä»¬çš„ app.jsã€index.jsã€database.jsã€‚æŒ‰ç…§è¿™ä¸ªé¡ºåºï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ›å»º Node.js æœåŠ¡å™¨å¹¶å°†å…¶è¿æ¥åˆ°æ•°æ®åº“ã€‚

åœ¨æˆ‘ä»¬çš„`database.js.`

`config/database.js:`

åœ¨æˆ‘ä»¬çš„ app.js ä¸­:

`wallet-demo-with-flutterwave/app.js`

åœ¨æˆ‘ä»¬çš„ index.js ä¸­:

`wallet-demo-with-flutterwave/index.js`

å¦‚æœä½ æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬çš„æ–‡ä»¶éœ€è¦ä¸€äº›ç¯å¢ƒå˜é‡ã€‚æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„`.env`æ–‡ä»¶ï¼Œå¹¶åœ¨å¯åŠ¨åº”ç”¨ç¨‹åºä¹‹å‰æ·»åŠ å˜é‡ã€‚

åœ¨æˆ‘ä»¬çš„. env ä¸­ã€‚

è¦å¯åŠ¨æˆ‘ä»¬çš„æœåŠ¡å™¨ï¼Œè¯·ç¼–è¾‘ package.json ä¸­çš„è„šæœ¬å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

```
"scripts": { "start": "node index.js", "dev": "nodemon index.js", "test": "echo \"Error: no test specified\" && exit 1" }
```

ä¸Šé¢çš„ä»£ç ç‰‡æ®µå·²ç»æˆåŠŸåœ°æ’å…¥åˆ°`app.js, index.js, and database.js.`ä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨`index.js`ä¸­æ„å»º node.js æœåŠ¡å™¨ï¼Œå¹¶å¯¼å…¥é…ç½®äº†è·¯ç”±çš„`app.js`æ–‡ä»¶ã€‚

ç„¶åï¼Œå¦‚`database.js,`æ‰€ç¤ºï¼Œæˆ‘ä»¬ä½¿ç”¨ mongoose åˆ›å»ºä¸€ä¸ªåˆ°æ•°æ®åº“çš„è¿æ¥ã€‚

æ‰§è¡Œå‘½ä»¤`npm run dev`ã€‚

æœåŠ¡å™¨å’Œæ•°æ®åº“éƒ½åº”è¯¥æ­£å¸¸è¿è¡Œï¼Œä¸ä¼šå´©æºƒã€‚

# åˆ›å»ºç”¨æˆ·æ¨¡å‹å’Œè·¯çº¿

æˆ‘ä»¬å°†åœ¨ç¬¬ä¸€æ¬¡æ³¨å†Œæ—¶ä¸ºç”¨æˆ·è¯¦ç»†ä¿¡æ¯å®šä¹‰æ¨¡å¼ï¼Œå¹¶åœ¨ç™»å½•æ—¶æ ¹æ®ä¿å­˜çš„å‡­è¯éªŒè¯å®ƒä»¬ã€‚

å°†ä»¥ä¸‹ä»£ç ç‰‡æ®µæ·»åŠ åˆ°æ¨¡å‹æ–‡ä»¶å¤¹å†…çš„ user.js ä¸­ã€‚

`model/user.js`

ç°åœ¨è®©æˆ‘ä»¬åˆ†åˆ«ä¸ºæ³¨å†Œå’Œç™»å½•åˆ›å»ºè·¯ç”±ã€‚

`app.js`æ–‡ä»¶çš„æ ¹ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸‹é¢çš„ä»£ç ç‰‡æ®µç”¨äºç”¨æˆ·æ³¨å†Œå’Œç™»å½•ã€‚

# å®ç°æ³¨å†Œå’Œç™»å½•åŠŸèƒ½

æˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°è¿™ä¸¤æ¡è·¯çº¿ã€‚æˆ‘ä»¬å°†ä½¿ç”¨ JWT æ¥ç­¾ç½²å‡­è¯ï¼Œå¹¶ä½¿ç”¨ bycrypt æ¥åŠ å¯†å¯†ç ï¼Œç„¶åå°†å®ƒä»¬å­˜å‚¨åœ¨æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ã€‚

ä»/register è·¯å¾„ï¼Œæˆ‘ä»¬å°†:

*   è·å–ç”¨æˆ·è¾“å…¥ã€‚
*   éªŒè¯ç”¨æˆ·è¾“å…¥ã€‚
*   éªŒè¯ç”¨æˆ·æ˜¯å¦å·²ç»å­˜åœ¨ã€‚
*   åŠ å¯†ç”¨æˆ·å¯†ç ã€‚
*   åœ¨æˆ‘ä»¬çš„æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªç”¨æˆ·ã€‚
*   æœ€åï¼Œåˆ›å»ºä¸€ä¸ªç­¾åçš„ JWT ä»¤ç‰Œã€‚

ä¿®æ”¹æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„/register è·¯ç”±ç»“æ„ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

> *æ³¨æ„:æ›´æ–°æ‚¨çš„ã€‚env æ–‡ä»¶ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªéšæœºå­—ç¬¦ä¸²ã€‚*

ä½¿ç”¨ Postman æµ‹è¯•ç«¯ç‚¹ï¼Œåœ¨æˆåŠŸæ³¨å†Œåï¼Œæˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹æ‰€ç¤ºçš„å“åº”ã€‚

![](img/859b2573e6b29ba90dff17b0e4be4583.png)

ç‚¹å‡»[æ­¤å¤„](https://www.section.io/engineering-education/how-to-build-authentication-api-with-jwt-token-in-nodejs/)äº†è§£æ›´å¤šå…³äºå¦‚ä½•åœ¨ Node.js ä¸­ä½¿ç”¨ JWT ä»¤ç‰Œæ„å»ºè®¤è¯ API çš„ä¿¡æ¯

# æ„å»ºé›†æˆ Flutterwave æ”¯ä»˜çš„é’±åŒ…ç³»ç»Ÿ

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ç”¨æˆ·è¯¦ç»†ä¿¡æ¯æ¥åˆ›å»ºé’±åŒ…ã€ä¿å­˜é’±åŒ…äº¤æ˜“ä»¥åŠåœ¨ç³»ç»Ÿä¸­æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ä¸Šä¸€æ­¥ä¸­æˆåŠŸåˆ›å»ºäº†ç”¨æˆ·æ”¶é›†å’Œèº«ä»½éªŒè¯åŠŸèƒ½ã€‚

è®©æˆ‘ä»¬ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ›´æ–°æˆ‘ä»¬çš„ wallet.jsã€wallet_transaction å’Œ transactionã€‚

`model/wallet.js` `model/wallet_transaction.js` `model/transaction.js`

æˆ‘ä»¬å·²ç»åˆ›å»ºäº†æˆ‘ä»¬çš„é’±åŒ…ã€é’±åŒ…äº¤æ˜“å’Œäº¤æ˜“æ¨¡å¼ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ç°åœ¨å¯ä»¥ä»å®¢æˆ·ç«¯æ¥æ”¶èµ„é‡‘ï¼Œåœ¨åç«¯ä½¿ç”¨ flutterwave éªŒè¯æ”¯ä»˜ï¼Œåˆ†åˆ«åœ¨é’±åŒ…ã€é’±åŒ…äº¤æ˜“å’Œäº¤æ˜“é›†åˆä¸­è®°å½•å’Œæ›´æ–°æ”¯ä»˜ç»†èŠ‚ã€‚

è®©æˆ‘ä»¬è®©å‰ç«¯å®¢æˆ·ç«¯å‡†å¤‡å¥½æ¥å—æ¥è‡ªå®¢æˆ·çš„ä»˜æ¬¾ã€‚

æˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æˆ‘ä»¬çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`index.html`æ–‡ä»¶ã€‚

ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ›´æ–°æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„`index.html`:

ä½ å¯ä»¥ä» [Flutterwave æ–‡æ¡£](https://developer.flutterwave.com/docs/flutterwave-inline)ä¸­äº†è§£æ›´å¤šå…³äºä¸Šé¢ç‰‡æ®µçš„ä¿¡æ¯

æ›´æ–°æˆ‘ä»¬çš„`app.js`ä»¥ä»æœåŠ¡å™¨ç«¯å‘ˆç°`index.html`æ–‡ä»¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µ:

```
const path = require('path'); app.post("/login", async (req, res) => { } app.get("/pay", (req, res) => { res.sendFile(path.join(__dirname + "/index.html")); });
```

åœ¨æˆ‘ä»¬æµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šåœ¨æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„â€œindex.htmlâ€ä¸­çœ‹åˆ°çŸ­è¯­â€œYOUR_PUBLIC_KEY_HERE â€,è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ¥è‡ªæˆ‘ä»¬çš„ [flutterwave ä»ªè¡¨æ¿](https://dashboard.flutterwave.com/dashboard/settings/apis)çš„å…¬é’¥ã€‚è®©æˆ‘ä»¬åˆ°ä»ªè¡¨æ¿ä¸Šæ£€ç´¢æˆ‘ä»¬çš„å…¬é’¥ã€‚

![](img/55b9e2ab04606968ff596aedf589fe77.png)

è®©æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šè¾“å…¥`http://localhost:4001/pay`æ¥æµ‹è¯•ä¸€ä¸‹ã€‚å•å‡»`Pay Now`æŒ‰é’®åï¼Œæˆ‘ä»¬åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:

![](img/26dbacc21bd43f006dfbbe655172c12b.png)

æˆ‘ä»¬å°†ä½¿ç”¨æµ‹è¯•å¡å·:`4242424242424242`ï¼Œæœ‰æ•ˆæœŸ:`04/25`ï¼ŒCVV: `202`ã€‚æˆ‘ä»¬ä¼šè¢«é‡å®šå‘åˆ°ä¸‹é¢çš„é¡µé¢è¿›å…¥ OTPï¼Œæ˜¯`12345`å› ä¸ºæˆ‘ä»¬ç”¨çš„æ˜¯æµ‹è¯•å¡ã€‚

![](img/94462cf95a3d366f5cdc1e327a32dfa5.png)

è¿›å…¥ OTP åï¼Œæˆ‘ä»¬å°†è¢«é‡å®šå‘åˆ° localhost:3000/responseï¼Œä½†æ˜¯ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿã€‚è®©æˆ‘ä»¬é€šè¿‡å®ç°å¤„ç†æ¥ä¸‹æ¥å‘ç”Ÿçš„äº‹æƒ…çš„é€»è¾‘æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

åˆ›å»ºã€‚`/response` endpointï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ›´æ–°æˆ‘ä»¬çš„ app.js:

æˆ‘ä»¬ä»ä¸Šé¢ä»£ç ä¸­å›è°ƒå‡½æ•°çš„æŸ¥è¯¢å‚æ•°ä¸­è·å–`transaction_id`ï¼Œå¹¶é€šè¿‡å‘ flutterwave ç«¯ç‚¹å‘é€è¯·æ±‚æ¥éªŒè¯äº‹åŠ¡ã€‚æˆ‘ä»¬åº”è¯¥ä¼šåœ¨æ—¥å¿—ä¸­çœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æˆªå›¾ã€‚

![](img/98edfc65e6fa32c86c65a2160ef021bd.png)

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé€»è¾‘æ¥ç®¡ç†è¯¸å¦‚éªŒè¯ç”¨æˆ·çš„é’±åŒ…ã€åˆ›å»ºé’±åŒ…äº¤æ˜“å’Œäº¤æ˜“ç­‰æ“ä½œã€‚

åœ¨æˆ‘ä»¬çš„`app.js`ä¸­ï¼Œè®©æˆ‘ä»¬å¯¼å…¥é’±åŒ…ã€é’±åŒ…äº¤æ˜“å’Œäº¤æ˜“æ¨¡å‹ã€‚

ä½¿ç”¨ç®¡ç†æ“ä½œçš„é€»è¾‘æ›´æ–° app.js:

æˆ‘ä»¬ç°åœ¨å¯ä»¥ç”¨æˆ‘ä»¬åˆ›å»ºçš„ç®¡ç†ä¸åŒæ“ä½œçš„æ‰€æœ‰å‡½æ•°æ¥æ›´æ–°`/response`ç«¯ç‚¹ã€‚

ç§ï¼ŒğŸ¥³ï¼Œæˆ‘ä»¬å·®ä¸å¤šå®Œæˆäº†ï¼Œè®©æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚å®Œæˆä»˜æ¬¾åï¼Œæˆ‘ä»¬åº”è¯¥å¾—åˆ°ç±»ä¼¼äºä¸‹é¢çš„å†…å®¹:

![](img/ba8125ec4d9565e1085410d722d1c899.png)

å› ä¸ºå‡ æ¬¡å°è¯•ï¼Œåœ¨è¯•å›¾èµ„åŠ©æˆ‘ä»¬é’±åŒ…çš„åŒæ—¶ï¼Œæˆ‘ä»¬æœ‰äº†ä¸Šé¢æˆªå›¾ä¸­çš„`10,000`ä½™é¢ï¼›ä½†æ˜¯ï¼Œå¦‚æœä»”ç»†æ£€æŸ¥ï¼Œè¿™ä¸ªæ•°å­—å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚

è®©æˆ‘ä»¬ç”¨ä¸‹é¢çš„ä»£ç ç‰‡æ®µåˆ›å»ºä¸€ä¸ªç«¯ç‚¹æ¥æ£€ç´¢ç”¨æˆ·ä½™é¢:

```
app.get("/wallet/:userId/balance", async (req, res) => { try { const { userId } = req.params; const wallet = await Wallet.findOne({ userId }); res.status(200).json(wallet.balance); } catch (err) { console.log(err); } });
```

æµ‹è¯•æˆ‘ä»¬è¿”å›ç”¨æˆ·ä½™é¢çš„ç«¯ç‚¹:

![](img/6aa77dfe490370fd01876a90c6a1a27d.png)

> *æ³¨æ„:æˆ‘ä»¬å¯èƒ½å·²ç»æ³¨æ„åˆ°ï¼Œå¦‚æœæˆ‘ä»¬åœ¨é‡å®šå‘åˆ°â€œ/responseâ€ç«¯ç‚¹åé‡æ–°åŠ è½½é¡µé¢ï¼Œæˆ‘ä»¬çš„ wallet ä¸­å°†æ›´æ–°ç›¸åŒé‡‘é¢çš„ç›¸åŒäº¤æ˜“ã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¿…é¡»éªŒè¯æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ä¸å­˜åœ¨è¿™æ ·çš„*`*transaction_id*`*ï¼›å¦åˆ™ï¼Œæˆ‘ä»¬å°†æ”¶åˆ°é‡å¤äº¤æ˜“é”™è¯¯ã€‚*

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„é€»è¾‘ï¼Œå¦‚ä¸‹æ‰€ç¤º:

æ¥ä¸‹æ¥ï¼Œå½“æˆ‘ä»¬åˆ·æ–°é¡µé¢æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„æˆªå›¾ã€‚

![](img/03b82546079caedd8bde7d6756386cc2.png)

å®Œæ•´ä»£ç å¯ä» [GitHub](https://github.com/Olanetsoft/wallet-demo-with-flutterwave) è·å¾—

# ç»“è®º

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ äº†å¦‚ä½•åœ¨ Node.js åº”ç”¨ç¨‹åºä¸­æ„å»ºä¸€ä¸ªç®€å•çš„èº«ä»½éªŒè¯ã€é’±åŒ…ç³»ç»Ÿå’Œ Flutterwave æ”¯ä»˜é›†æˆ

# å‚è€ƒ

æˆ‘å¾ˆä¹æ„åœ¨[Twitter](https://twitter.com/olanetsoft)|[LinkedIn](https://www.linkedin.com/in/olubisi-idris-ayinde-05727b17a/)|[GitHub](https://github.com/Olanetsoft)|[Portfolio](https://idrisolubisi.com/)ä¸ä½ è”ç³»

åœ¨æˆ‘çš„ä¸‹ä¸€ç¯‡åšå®¢æ–‡ç« ä¸­å†è§ã€‚ä¿é‡ï¼ï¼ï¼

*æœ€åˆå‘è¡¨äº*[*https://blog.idrisolubisi.com*](https://blog.idrisolubisi.com/how-to-build-a-wallet-system-with-flutterwave-payment-integration-into-nodejs-application)*ã€‚*

*æ›´å¤šå†…å®¹çœ‹* [***è¯´ç™½äº†å°±æ˜¯***](http://plainenglish.io/) *ã€‚æŠ¥åå‚åŠ æˆ‘ä»¬çš„* [***å…è´¹æ¯å‘¨ç®€è®¯***](http://newsletter.plainenglish.io/) *ã€‚åœ¨æˆ‘ä»¬çš„* [***ç¤¾åŒºä¸å’Œè°***](https://discord.gg/GtDtUAvyhW) *è·å¾—ç‹¬å®¶è·å–å†™ä½œæœºä¼šå’Œå»ºè®®ã€‚*
<html>
<head>
<title>Add an Audio Player with Vue 3 and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加带有Vue 3和JavaScript的音频播放器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-an-audio-player-with-vue-3-and-javascript-94ec5e997362?source=collection_archive---------10-----------------------#2021-04-04">https://javascript.plainenglish.io/add-an-audio-player-with-vue-3-and-javascript-94ec5e997362?source=collection_archive---------10-----------------------#2021-04-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/74ff1618f405307a6890c5ae7b94dd36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JQ8VX-nh8OOR2Q0H"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@intelligenciya?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexey Ruban</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3552" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是易于使用的Vue JavaScript框架的最新版本，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Vue 3和JavaScript创建一个视频播放器。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vue CLI创建Vue项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npm install -g @vue/cli</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与NPM或:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="80a4" class="mn lc iq mj b gy mo mp l mq mr">yarn global add @vue/cli</span></pre><p id="82da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用纱线。</p><p id="a246" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="02d9" class="mn lc iq mj b gy mo mp l mq mr">vue create audio-player</span></pre><p id="1553" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并选择所有默认选项来创建项目。</p><h1 id="2bef" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建音频播放器</h1><p id="eca2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下代码来创建音频播放器:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="abfc" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;input<br/>    type="range"<br/>    min="0"<br/>    max="100"<br/>    step="1"<br/>    v-model="seekValue"<br/>    @change="onSeek"<br/>  /&gt;<br/>  &lt;audio<br/>    src="https://file-examples-com.github.io/uploads/2017/11/file_example_MP3_700KB.mp3"<br/>    ref="audioPlayer"<br/>    @timeupdate="onPlaying"<br/>  &gt;<br/>    Your browser does not support the<br/>    &lt;code&gt;audio&lt;/code&gt; element.<br/>  &lt;/audio&gt;<br/>  &lt;p&gt;{{ currentTime }}&lt;/p&gt;<br/>  &lt;div&gt;<br/>    &lt;button @click="play"&gt;play&lt;/button&gt;<br/>    &lt;button @click="pause"&gt;pause&lt;/button&gt;<br/>    &lt;button @click="stop"&gt;stop&lt;/button&gt;<br/>    &lt;button @click="setSpeed(0.5)"&gt;0.5x&lt;/button&gt;<br/>    &lt;button @click="setSpeed(1)"&gt;1x&lt;/button&gt;<br/>    &lt;button @click="setSpeed(1.5)"&gt;1.5x&lt;/button&gt;<br/>    &lt;button @click="setSpeed(2)"&gt;2x&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="de1e" class="mn lc iq mj b gy ms mp l mq mr">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>  data() {<br/>    return {<br/>      currentTime: 0,<br/>      seekValue: 0,<br/>    };<br/>  },<br/>  methods: {<br/>    play() {<br/>      this.$refs.audioPlayer.play();<br/>    },<br/>    pause() {<br/>      this.$refs.audioPlayer.pause();<br/>    },<br/>    stop() {<br/>      const { audioPlayer } = this.$refs;<br/>      audioPlayer.pause();<br/>      audioPlayer.currentTime = 0;<br/>    },<br/>    setSpeed(speed) {<br/>      this.$refs.audioPlayer.playbackRate = speed;<br/>    },<br/>    onPlaying() {<br/>      const { audioPlayer } = this.$refs;<br/>      if (!audioPlayer) {<br/>        return;<br/>      }<br/>      this.currentTime = audioPlayer.currentTime;<br/>      this.seekValue = (audioPlayer.currentTime / audioPlayer.duration) * 100;<br/>    },<br/>    onSeek() {<br/>      const { audioPlayer } = this.$refs;<br/>      const seekto = audioPlayer.duration * (this.seekValue / 100);<br/>      audioPlayer.currentTime = seekto;<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="9b95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个范围输入，我们可以滑动它来改变<code class="fe mt mu mv mj b">seekValue</code>，</p><p id="9e0f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">v-model</code>将它绑定到<code class="fe mt mu mv mj b">seekValue</code>。</p><p id="d64d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们将一个<code class="fe mt mu mv mj b">change</code>事件处理程序附加到输入，该处理程序改变音频元素的<code class="fe mt mu mv mj b">currentTime</code>来寻找音频。</p><p id="39bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">audio</code>元素有我们想要播放的音频。</p><p id="704a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们监听<code class="fe mt mu mv mj b">timeUpdate</code>事件，这样我们就可以得到当前时间。</p><p id="9686" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们给它分配一个引用，这样我们就可以在以后操作它。</p><p id="c278" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们显示<code class="fe mt mu mv mj b">currentTime</code>。</p><p id="f585" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有几个按钮让我们播放、暂停、停止和改变音频的速度。</p><p id="2485" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在模板下面，我们有返回了<code class="fe mt mu mv mj b">currentTime</code>和<code class="fe mt mu mv mj b">seekValue</code>反应属性的<code class="fe mt mu mv mj b">data</code>方法。</p><p id="18e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">play</code>方法从ref获取音频播放器元素，并调用<code class="fe mt mu mv mj b">play</code>播放音频。</p><p id="9fb3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">pause</code>方法从ref获取音频播放器元素，并调用<code class="fe mt mu mv mj b">pause</code>暂停音频。</p><p id="9717" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">stop</code>方法暂停音频，并将<code class="fe mt mu mv mj b">currentTime</code>设置为0，以将音频回放重置回起点。</p><p id="76e7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">setSpeed</code>让我们通过改变<code class="fe mt mu mv mj b">playbackRate</code>属性来设置速度。</p><p id="83f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当发出<code class="fe mt mu mv mj b">timeUpdate</code>事件时，调用<code class="fe mt mu mv mj b">onPlaying</code>方法。</p><p id="4dfa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe mt mu mv mj b">this.currentTime</code>的无功属性设置为<code class="fe mt mu mv mj b">audioPlayer</code>的<code class="fe mt mu mv mj b">currentTime</code>属性。</p><p id="84b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们更新了<code class="fe mt mu mv mj b">seekValue</code>，使其与<code class="fe mt mu mv mj b">currentTime</code>同步。</p><p id="0e71" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将更新范围滑块，使其与<code class="fe mt mu mv mj b">currentTime</code>同步。</p><p id="cc22" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们有当范围输入发出<code class="fe mt mu mv mj b">change</code>事件时运行的<code class="fe mt mu mv mj b">onSeek</code>方法，这是在我们完成移动滑块时完成的。</p><p id="2e68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了<code class="fe mt mu mv mj b">seekValue</code>无功属性，并通过将其乘以<code class="fe mt mu mv mj b">duration</code>并除以100来计算<code class="fe mt mu mv mj b">seekTo</code>值。</p><p id="523f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它设置为<code class="fe mt mu mv mj b">currentTime</code>来改变当前时间。</p><h1 id="99a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e085" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加一个带有Vue 3和JavaScript的音频播放器。</p><p id="136c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
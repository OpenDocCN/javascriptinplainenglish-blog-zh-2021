<html>
<head>
<title>Let’s Build an API with Express and MongoDB for CRUD Operations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用Express和MongoDB为CRUD操作构建一个API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-build-an-api-with-express-js-and-mongodb-for-crud-operations-d87182c57fad?source=collection_archive---------2-----------------------#2021-06-26">https://javascript.plainenglish.io/lets-build-an-api-with-express-js-and-mongodb-for-crud-operations-d87182c57fad?source=collection_archive---------2-----------------------#2021-06-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/71860d0f32b978f6979a33115b42b1bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*01MhvxN3qEq7OtqpdJofOg.jpeg"/></div></figure><p id="281f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本文将为您提供一个使用Express和MongoDB为CRUD操作创建API的基础教程。</p><p id="ebf7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> CRUD </strong>操作是操纵数据的四种基本操作，包括<strong class="jt io">C</strong>reate/<strong class="jt io">C</strong>construt、<strong class="jt io"> R </strong> ead、<strong class="jt io"> U </strong> pdate和<strong class="jt io"> D </strong> elete。在本教程的最后，我们将有一个API来服务前端，类似于这里的<a class="ae kp" href="https://www.mecallapi.com/crud/" rel="noopener ugc nofollow" target="_blank">mecallapi.com/crud/</a>。</p><p id="2c6d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="kq">注</em> </strong> <em class="kq">:本文中我们不重点讨论前端。</em></p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kr"><img src="../Images/f8f36700dddd3a244f8c3207ffab07cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogCwwRk_unRU6vPVYMdTYA.png"/></div></div></figure><h1 id="7db4" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">软件安装</h1><ul class=""><li id="a41b" class="ly lz in jt b ju ma jy mb kc mc kg md kk me ko mf mg mh mi bi translated"><strong class="jt io">node . js【https://nodejs.org】:<a class="ae kp" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank"/></strong></li><li id="765e" class="ly lz in jt b ju mj jy mk kc ml kg mm kk mn ko mf mg mh mi bi translated"><strong class="jt io"> MongoDB社区</strong>:本文使用的数据库<a class="ae kp" href="https://www.mongodb.com/try/download/community" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/try/download/community</a></li><li id="976c" class="ly lz in jt b ju mj jy mk kc ml kg mm kk mn ko mf mg mh mi bi translated"><strong class="jt io">Postman</strong>:API测试工具<a class="ae kp" href="https://www.postman.com/downloads/" rel="noopener ugc nofollow" target="_blank">https://www.postman.com/downloads/</a></li></ul><h1 id="4e42" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">在MongoDB中创建一个用户</h1><p id="6380" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">从在MongoDB中创建一个用户开始，从我们的API启用连接。启动<strong class="jt io"> MongoDB Compass </strong>然后进入<strong class="jt io">新连接</strong> &gt; <strong class="jt io">分别填写连接字段</strong>。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/d650f2737ed40bc826ae96559e359b8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_OiZZciiIqW2e3b04ytHTw.png"/></div></div></figure><p id="136c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">主机名</strong>会是<strong class="jt io">本地主机</strong>，然后点击<strong class="jt io">连接</strong>。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/37acc3b2839f6c3e35e01a95f76cea31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vMtHelTEDUt46HkW2_uazA.png"/></div></div></figure><p id="0e3a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们将使用<strong class="jt io"> MongoDB Shell </strong>来创建一个用户。点击<strong class="jt io"> MONGOSH </strong>启用<strong class="jt io"> MongoDB Shell </strong>。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/1eea0db19cc451f4c34b2c6009a30083.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RTLpmHkZo97qEjpEK2CnGw.png"/></div></div></figure><p id="bac3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在shell中，使用admin来切换数据库<strong class="jt io"> admin </strong>。</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="9df4" class="mx lb in mt b gy my mz l na nb">use admin</span></pre><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/0674174edee5547b3227986e4d3b7db4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ECS1jPNTwg_Jbs7FopUexw.png"/></div></div></figure><p id="2a15" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用密码myUserAdmin创建用户:myUserAdmin，并使用以下命令赋予该角色读写任何数据库的权限:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="3362" class="mx lb in mt b gy my mz l na nb">db.createUser({user: "myUserAdmin", pwd: "myUserAdmin", roles: [{role: "userAdminAnyDatabase", db: "admin"}, "readWriteAnyDatabase"]})</span></pre><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/f2c2a3502b6ea991d1cbae3a1d1f1611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1EZiOcYmNjSJ1WnQ0esHFw.png"/></div></div></figure><p id="7987" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用您刚刚创建的用户/密码断开并再次连接MongoDB。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mr"><img src="../Images/cff6d847e0ba24171221a30e0e6300b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0xKUbJ1lRnV5rHJJBOLRpQ.png"/></div></div></figure><h1 id="4854" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">用Express.js创建一个初始API</h1><p id="1a3c" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">为我们的API创建一个文件夹，然后进入该文件夹:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="0a47" class="mx lb in mt b gy my mz l na nb">mkdir express-mongodb-api<br/>cd express-mongodb-api</span></pre><p id="a0b3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用npm init命令初始化您的项目，然后在项目中安装<strong class="jt io"> Express.js </strong>和<strong class="jt io"> cors </strong>。注意<strong class="jt io"> Express.js </strong>将帮助我们创建一个web应用程序作为API，而<strong class="jt io"> cors </strong>将启用来自不同域的API请求。</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="6d6a" class="mx lb in mt b gy my mz l na nb">npm init<br/>npm install express cors --save</span></pre><p id="e6c1" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">创建<strong class="jt io"> index.js </strong>然后添加以下代码:</p><figure class="ks kt ku kv gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d593" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">使用以下命令启动我们的API:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="e7c6" class="mx lb in mt b gy my mz l na nb">node index.js</span></pre><p id="c5b7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">尝试在web浏览器上使用URL<a class="ae kp" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a>访问我们的API，您将看到以下结果:</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ne"><img src="../Images/311b7a81e247c8d6c69dfb0181af8ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWxXDqbdVbWNYDcrffNyhA.png"/></div></div></figure><p id="4847" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用CTRL+C停止API，然后安装其他软件包:</p><ul class=""><li id="6785" class="ly lz in jt b ju jv jy jz kc nf kg ng kk nh ko mf mg mh mi bi translated"><strong class="jt io"> nodemon </strong>在代码改变时启用API的刷新。</li><li id="316a" class="ly lz in jt b ju mj jy mk kc ml kg mm kk mn ko mf mg mh mi bi translated"><strong class="jt io"> mongodb </strong>启用与<strong class="jt io"> mongodb </strong>的连接。</li></ul><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="a85e" class="mx lb in mt b gy my mz l na nb">npm install -g nodemon<br/>npm install mongodb --save</span></pre><p id="b3bd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">因此，使用<strong class="jt io"> nodemon </strong>来启动API。</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="b0aa" class="mx lb in mt b gy my mz l na nb">nodemon index.js</span></pre><h1 id="b8ee" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">创建API</h1><p id="907a" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">用<strong class="jt io"> C </strong> reate API开始编码。</p><ul class=""><li id="b614" class="ly lz in jt b ju jv jy jz kc nf kg ng kk nh ko mf mg mh mi bi translated">在第2行用用户名和密码定义uri来连接MongoDB。</li><li id="3dbc" class="ly lz in jt b ju mj jy mk kc ml kg mm kk mn ko mf mg mh mi bi translated">app。<strong class="jt io"> post </strong> (…)用<strong class="jt io"> POST </strong> HTTP方法定义<strong class="jt io"> API </strong>。在这个函数中，我们将在<strong class="jt io"> mydb </strong>数据库中的<strong class="jt io"> users </strong>集合中创建用户数据。</li></ul><figure class="ks kt ku kv gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3a1a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，让我们用POSTMAN测试API，请求如下:</p><p id="bea7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">HTTP方法:POST<br/>URL:<a class="ae kp" href="http://localhost:3000/users/create" rel="noopener ugc nofollow" target="_blank">HTTP://localhost:3000/users/create</a><br/>示例体(raw — JSON):</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="37d2" class="mx lb in mt b gy my mz l na nb">{<br/>    "id": 1,<br/>    "fname": "Karn",<br/>    "lname": "Yong",<br/>    "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>    "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>    "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>"<br/>}</span></pre><p id="7f63" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">*在这个请求的主体中将有一个JSON数据(键-值对)。如果想了解更多关于JSON的知识，可以看看<a class="ae kp" href="https://www.w3schools.com/js/js_json_intro.asp" rel="noopener ugc nofollow" target="_blank"> w3school </a>。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ni"><img src="../Images/f1a94d48b6ce1acb5143c9cd6fb78c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*joNWwBo2Tu3KfzhA8FQNMQ.png"/></div></div></figure><p id="2ec8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本响应:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="a996" class="mx lb in mt b gy my mz l na nb">{<br/>    "status": "ok",<br/>    "message": "User with ID = 1 is created",<br/>    "user": {<br/>        "id": 1,<br/>        "fname": "Karn",<br/>        "lname": "Yong",<br/>        "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>",<br/>        "_id": "60d426e38c036327886e7fd1"<br/>    }<br/>}</span></pre><p id="650f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我们回到<strong class="jt io"> MongoDB Compass </strong>来看看最近添加的数据。按刷新，然后选择<strong class="jt io"> mydb </strong>数据库&gt;用户<strong class="jt io">集合。</strong></p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nj"><img src="../Images/8bc8ce695acce7238ce118612f7b61de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RY5B1TPqee0FhHU0_1qTvA.png"/></div></div></figure><p id="acc8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">尝试使用以下数据通过POSTMAN添加另一个用户数据:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="0948" class="mx lb in mt b gy my mz l na nb">{<br/>    "id": 2,<br/>    "fname": "Ivy",<br/>    "lname": "Cal",<br/>    "username": "<a class="ae kp" href="mailto:ivy.cal@mecallapi.com" rel="noopener ugc nofollow" target="_blank">ivy.cal@mecallapi.com</a>",<br/>    "email": "<a class="ae kp" href="mailto:ivy.cal@mecallapi.com" rel="noopener ugc nofollow" target="_blank">ivy.cal@mecallapi.com</a>",<br/>    "avatar": "<a class="ae kp" href="https://www.mecallapi.com/users/2.png" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/users/2.png</a>"<br/>}</span></pre><p id="3b78" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">回到<strong class="jt io"> MongoDB Compass </strong>查看最新添加的数据(点击<strong class="jt io">刷新</strong>)</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nk"><img src="../Images/b9380701ff17dfd9e5c87642d6dc725b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZqDGvMqlB2kkGkyNMGi63g.png"/></div></div></figure><h1 id="1298" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">读取所有API</h1><p id="1eef" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">接下来，让我们创建一个API来读取所有用户数据。</p><ul class=""><li id="7d6b" class="ly lz in jt b ju jv jy jz kc nf kg ng kk nh ko mf mg mh mi bi translated">app。<strong class="jt io"> get </strong> (…)用<strong class="jt io"> GET </strong> HTTP方法定义<strong class="jt io"> API </strong>。</li></ul><figure class="ks kt ku kv gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="c2f6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用<strong class="jt io"> POSTMAN </strong>测试API。</p><p id="eb1b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">HTTP方法:获取<br/>URL:<a class="ae kp" href="https://localhost:3000/users" rel="noopener ugc nofollow" target="_blank">https://localhost:3000/users</a></p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nl"><img src="../Images/4440f05dc118076d70004d74097b25d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YwP2JplVX1XVE2fPQRZeyQ.png"/></div></div></figure><p id="4c12" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本响应:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="74ad" class="mx lb in mt b gy my mz l na nb">[<br/>    {<br/>        "_id": "60d5cfd7469c0403e492e1dc",<br/>        "id": 1,<br/>        "fname": "Karn",<br/>        "lname": "Yong",<br/>        "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>"<br/>    },<br/>    {<br/>        "_id": "60d5cfe2469c0403e492e1dd",<br/>        "id": 2,<br/>        "fname": "Ivy",<br/>        "lname": "Cal",<br/>        "username": "<a class="ae kp" href="mailto:ivy.cal@mecallapi.com" rel="noopener ugc nofollow" target="_blank">ivy.cal@mecallapi.com</a>",<br/>        "email": "<a class="ae kp" href="mailto:ivy.cal@mecallapi.com" rel="noopener ugc nofollow" target="_blank">ivy.cal@mecallapi.com</a>",<br/>        "avatar": "<a class="ae kp" href="https://www.mecallapi.com/users/2.png" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/users/2.png</a>"<br/>    }<br/>]</span></pre><h1 id="7d26" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">通过id API读取</h1><p id="2964" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">创建一个API来通过id读取用户数据。</p><figure class="ks kt ku kv gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="343e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">HTTP方法:获取<br/>URL:<a class="ae kp" href="http://localhost:3000/users/1" rel="noopener ugc nofollow" target="_blank">HTTP://localhost:3000/users/1</a><br/>* 1在URL末尾可以更改。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nm"><img src="../Images/6fd251b422a14e586bc7fd79dd272906.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QvtdU6qDKLPlZ_VJERBpCA.png"/></div></div></figure><p id="adec" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本响应:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="a3f1" class="mx lb in mt b gy my mz l na nb">{<br/>    "status": "ok",<br/>    "user": {<br/>        "_id": "60d5cfd7469c0403e492e1dc",<br/>        "id": 1,<br/>        "fname": "Karn",<br/>        "lname": "Yong",<br/>        "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>"<br/>    }<br/>}</span></pre><h1 id="cabb" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">更新API</h1><p id="9cc1" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">APIเส้นนี้จะเป็นการแก้ไขข้อมูลที่มีอยู่แล้วโดยอ้างอิงจากid</p><ul class=""><li id="7aaa" class="ly lz in jt b ju jv jy jz kc nf kg ng kk nh ko mf mg mh mi bi translated">app。<strong class="jt io"> put </strong> (…)用<strong class="jt io"> PUT </strong> HTTP方法定义<strong class="jt io"> API </strong>。</li></ul><figure class="ks kt ku kv gt jo"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="4799" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用<strong class="jt io"> POSTMAN </strong>测试API。</p><p id="adb2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">HTTP方法:PUT<br/>URL:<a class="ae kp" href="http://localhost:3000/users/update" rel="noopener ugc nofollow" target="_blank">HTTP://localhost:3000/users/update</a>T3】示例体(raw — JSON):</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="deae" class="mx lb in mt b gy my mz l na nb">{<br/>    "id": 1,<br/>    "fname": "Cat",<br/>    "lname": "Chat",<br/>    "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>    "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>    "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>"<br/>}</span></pre><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi nn"><img src="../Images/c42bcd197721d22c382c508ad60fab35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PfrPSWJGVJ0xeUuWOVkPKg.png"/></div></div></figure><p id="6a6a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本响应:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="3efa" class="mx lb in mt b gy my mz l na nb">{<br/>    "status": "ok",<br/>    "message": "User with ID = 1 is updated",<br/>    "user": {<br/>        "id": 1,<br/>        "fname": "Cat",<br/>        "lname": "Chat",<br/>        "username": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "email": "<a class="ae kp" href="mailto:karn.yong@mecallapi.com" rel="noopener ugc nofollow" target="_blank">karn.yong@mecallapi.com</a>",<br/>        "avatar": "<a class="ae kp" href="https://mecallapi.com/users/1.png" rel="noopener ugc nofollow" target="_blank">https://mecallapi.com/users/1.png</a>"<br/>    }<br/>}</span></pre><h1 id="6dea" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">删除API</h1><p id="600e" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">最后一个是删除一个id的用户数据。</p><ul class=""><li id="e257" class="ly lz in jt b ju jv jy jz kc nf kg ng kk nh ko mf mg mh mi bi translated">app。<strong class="jt io">删除</strong> (…)用<strong class="jt io">删除</strong> HTTP方法定义<strong class="jt io"> API </strong>。</li></ul><p id="619b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">用<strong class="jt io"> POSTMAN </strong>测试API。</p><p id="deb3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">HTTP方法:删除<br/>URL:<a class="ae kp" href="http://localhost:3000/users/delete" rel="noopener ugc nofollow" target="_blank">HTTP://localhost:3000/users/DELETE</a><br/>示例体(raw — JSON):</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="d88b" class="mx lb in mt b gy my mz l na nb">{<br/>    "id": 1<br/>}</span></pre><p id="2071" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">* id(1)的值可以更改。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi no"><img src="../Images/98ee9e25b55bc4f6567f6d393e5360d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ilesrj4ld7nj5qvHVmImAQ.png"/></div></div></figure><p id="760f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">样本响应:</p><pre class="ks kt ku kv gt ms mt mu mv aw mw bi"><span id="05db" class="mx lb in mt b gy my mz l na nb">{<br/>    "status": "ok",<br/>    "message": "User with ID = 1 is deleted"<br/>}</span></pre><h1 id="3387" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">用网站测试API</h1><p id="4ff1" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">在API完成之后，通常，你会让前端(UI)向API发出请求。因此，我们将通过从GitHub下载示例网站来模拟这样的任务。注意，调用API的代码在<strong class="jt io"> index.js </strong>中。</p><p id="9856" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">ปกติจะส่งให้ผู้พัฒนาในฝั่งของหน้าบ้าน(前端)หรือฝั่งที่พัฒนาส่วนติดต่อผู้ใช้(用户界面)มาเรียกใช้APIของเราเพื่อให้เห็นภาพนะครับผมเตรียมส่วนของหน้าบ้านไว้ให้สามารถดาวน์โหลดได้จากgithubด้านล่างนี้นะครับโดย代码ที่เรียกAPIทั้งหมดจะอยู่ที่<strong class="jt io">index . js</strong></p><div class="np nq gp gr nr ns"><a href="https://github.com/KarnYong/web-crud-api-test" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fo"><div class="nu ab nv cl cj nw"><h2 class="bd io gy z fp nx fr fs ny fu fw im bi translated">KarnYong/web-crud-api-test</h2><div class="nz l"><h3 class="bd b gy z fp nx fr fs ny fu fw dk translated">在GitHub上创建一个帐户，为KarnYong/web-crud-api-test开发做贡献。</h3></div><div class="oa l"><p class="bd b dl z fp nx fr fs ny fu fw dk translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og jp ns"/></div></div></a></div><p id="039e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在网页浏览器上打开<strong class="jt io"> index.js </strong>(网站一)，然后尝试执行<strong class="jt io"> CRUD </strong>操作。</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi oh"><img src="../Images/759370738aba47811cf6460b449bedcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XH534dZWj4tv5Y8wumy41Q.png"/></div></div></figure><p id="d3db" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">尝试创建新用户:</p><figure class="ks kt ku kv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi oh"><img src="../Images/404d206c0d0f35eb13a651e14b25f207.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wq5LIvXi_2oQ-cHqay68kg.png"/></div></div></figure><h2 id="04fd" class="mx lb in bd lc oi oj dn lg ok ol dp lk kc om on lo kg oo op ls kk oq or lw os bi translated"><strong class="ak">结论</strong></h2><p id="e6f2" class="pw-post-body-paragraph jr js in jt b ju ma jw jx jy mb ka kb kc mo ke kf kg mp ki kj kk mq km kn ko ig bi translated">就这样了。请记住，这只是基本的API，因此它不会完美地工作。您可能希望有异常处理程序，并适当地响应错误，如重复的id、找不到id等。对于下一篇文章，可能是关于开发认证API的。再见。:D</p><p id="54c5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kq">朗西特大学数字创新技术学院博士Karn Yongsiriwit的文章</em></p><p id="5157" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kq">更多内容请看</em><a class="ae kp" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="kq">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
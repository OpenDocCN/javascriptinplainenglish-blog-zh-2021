<html>
<head>
<title>Apollo Client vs Redux: Learnings and Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿波罗客户端与Redux:学习和经验</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/apollo-client-vs-redux-learnings-and-experience-c116d139ca0f?source=collection_archive---------14-----------------------#2021-03-22">https://javascript.plainenglish.io/apollo-client-vs-redux-learnings-and-experience-c116d139ca0f?source=collection_archive---------14-----------------------#2021-03-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8ed521444467e2bd123488c2b76aa85d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AwCK3zVtvGdiowzW.jpeg"/></div></div></figure><p id="ee34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不断变化的前端开发世界继续发展，并引入了许多不同的库来解决您的问题。随着GraphQL越来越受欢迎，围绕它的工具和库也在变化。最近，我帮助编写了一个只与GraphQL后端交互的新应用程序，并在我们的React前端应用程序中使用Apollo Client (AC)而不是Redux进行交互。我以前用Redux写过很多javascript应用，下面是我的一些经验。</p><p id="e286" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">免责声明:比较这两个库假设您使用的是GraphQL后端。Apollo Client不能与其他类型的后端一起工作，在这种情况下，它不是Redux的可行替代方案。</em></p><h2 id="0c1a" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><strong class="ak">内置生命周期管理</strong></h2><p id="210b" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">AC在其<code class="fe ls lt lu lv b">useQuery</code>和<code class="fe ls lt lu lv b">useMutation </code>函数中内置了许多方便的状态，redux要么需要手动操作，要么需要一个库来复制。</p><pre class="lw lx ly lz gt ma lv mb mc aw md bi"><span id="e525" class="ku kv in lv b gy me mf l mg mh">// Apollo's built in loading/data/error responses <br/>const [getData, { loading, data, error }] = useQuery(MY_QUERY)</span></pre><p id="9694" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然redux没有内置这些功能，但是您可以在Redux的reducers和actions中构建状态，或者使用Redux的一些插件。</p><h2 id="39d3" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><strong class="ak">数据的严格形状</strong></h2><p id="ac42" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">AC的一个主要优势是它能非常紧密地跟踪你的GraphQL存储和它的形状。这意味着不需要创建减速器，也不需要定义你的商店的形状。AC让您确信，如果不更新您的GraphQL类型或您的<a class="ae mi" href="https://www.apollographql.com/docs/react/caching/cache-configuration/#typepolicy-fields" rel="noopener ugc nofollow" target="_blank">类型策略</a>，您的商店形状<em class="kt">不会被更改</em>。Redux的要求足够宽松，如果您没有遵循良好的实践，您可以随意改变状态。</p><p id="1085" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于AC存储的类型化性质，它还提供了一些类型安全层。在我的例子中，我们使用了React + Javascript前端，但是类型安全也可以通过在前端使用Typescript来实现。</p><h2 id="8344" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><strong class="ak">插件支持差</strong></h2><p id="3c80" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">AC目前不支持插件，而redux有一个相当健壮的插件生态系统。从我的经验来看，这个图书馆并没有留下太多需要填补的空白。redux中的一个常见插件是<a class="ae mi" href="https://github.com/reduxjs/redux-thunk" rel="noopener ugc nofollow" target="_blank"> thunk </a>，它提供了与你的商店异步交互的能力。通过AC对钩子的使用和不同的“响应状态”(加载、数据、错误，甚至<a class="ae mi" href="https://www.apollographql.com/docs/react/performance/optimistic-ui/#gatsby-focus-wrapper" rel="noopener ugc nofollow" target="_blank">乐观UI </a>)，现代前端应用程序的许多常见需求都得到了处理。</p><h2 id="3088" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><strong class="ak">到期日</strong></h2><p id="6264" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">AC是新的，这个项目出现的时间不长，它与另一项新技术(GraphQL)紧密耦合。考虑到这两个限制，整体潜在的开发者基数会因此变小。这意味着文档不再流行，社区仍在增长，最重要的是，库本身仍在经历变化。Redux更老，使用更广泛的后端，并因此拥有强大的社区。对于刚开始从事前端开发的人来说，选择Redux可能是更好的途径，因为它提供了大量的支持。</p><p id="db3c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">AC有更大的进入壁垒，因为它不是那么微不足道的。你不能简单地把任何前端连接到任何后端，redux为你提供了这种自由，因为它不像AC那样固执己见。</p><h2 id="79e5" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated"><strong class="ak">总结</strong></h2><p id="5a41" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">Redux可能不会很快去任何地方。它是一个广为人知的、在众多前端框架中普遍使用的框架。这给了它巨大的优势，但是，它确实需要更多的设置和管理才能正常工作。AC解决了许多常见的前端问题，但是将您与GraphQL后端紧密耦合在一起。下次你有一个要写的应用程序时，如果你幸运地只需要一个GraphQL后端来交互，AC值得一试。</p><p id="14d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读！<br/>帕特</p></div></div>    
</body>
</html>
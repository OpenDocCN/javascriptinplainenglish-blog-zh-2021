<html>
<head>
<title>How to Build Tailwind CSS Plugins and Optimize for Production</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建Tailwind CSS插件并针对生产进行优化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-tailwind-css-plugins-and-optimize-for-production-da94f102462a?source=collection_archive---------5-----------------------#2021-05-14">https://javascript.plainenglish.io/how-to-build-tailwind-css-plugins-and-optimize-for-production-da94f102462a?source=collection_archive---------5-----------------------#2021-05-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="850f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用Next.js和Tailwind CSS创建一个签到页面|第2集</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/437bc07e5769d6d4534af630b40444a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8y66GPYfmZpEOIro"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@zanilic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Zan</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d25d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">介绍</h1><p id="d9c5" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在前面的故事中，我们用Next.js和Tailwind CSS构建了一个带有表单验证的登录页面。我将在Next.js中介绍我们如何使用Tailwind CSS添加对黑暗主题的支持，以及如何优化Tailwind CSS以用于生产。</p><p id="96cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请阅读下面关于如何使用Next.js和Tailwind CSS构建带有表单验证的登录页面的故事，以防您错过。</p><div class="mf mg gp gr mh mi"><a rel="noopener  ugc nofollow" target="_blank" href="/how-can-tailwind-css-boost-your-development-experience-ed4204500cbd"><div class="mj ab fo"><div class="mk ab ml cl cj mm"><h2 class="bd ir gy z fp mn fr fs mo fu fw ip bi translated">Tailwind CSS如何提升你的开发体验？</h2><div class="mp l"><h3 class="bd b gy z fp mn fr fs mo fu fw dk translated">用Next.js和Tailwind CSS构建一个签到页面。</h3></div><div class="mq l"><p class="bd b dl z fp mn fr fs mo fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mr l"><div class="ms l mt mu mv mr mw kv mi"/></div></div></a></div><h2 id="4457" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">为什么是黑暗主题？</h2><p id="254d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">黑暗主题已经存在了一段时间，并被大多数操作系统、浏览器和流行的应用程序所采用。对于一些长时间盯着屏幕的人来说，黑暗模式可能有助于减轻眼睛疲劳和干眼症，尤其是在光线较暗的情况下。对于有机发光二极管和AMOLED显示器，深色主题更适合您的设备电池。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nj nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 1. Are you afraid of the Dark?</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="7f49" class="lc ld iq bd le lf ns lh li lj nt ll lm ln nu lp lq lr nv lt lu lv nw lx ly lz bi translated">增加对黑暗主题的支持</h1><p id="b8d6" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">默认情况下，在顺风CSS中禁用黑暗模式。黑暗变体<strong class="jp ir"> <em class="nx">黑暗:{class} </em> </strong>只有当我们在<em class="nx">中设置了<strong class="jp ir">黑暗模式</strong>时才会启用。/tailwind.config.js </em>文件。</p><p id="8a65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果<strong class="jp ir">黑暗模式</strong>设置为<strong class="jp ir"> <em class="nx">媒体</em> </strong>，则用户操作系统启用黑暗模式。<strong class="jp ir"> <em class="nx">暗:{class} </em> </strong>将优先于无前缀职业。但是，在这个故事中，我们要将<em class="nx">中的<strong class="jp ir"> darkMode </strong>设置为<strong class="jp ir">T21</strong></em>类。/tailwind.config.js 。当HTML树中存在<strong class="jp ir"> <em class="nx">黑暗</em> </strong>类时，将启用黑暗模式，而不是用户的操作系统。</p><h2 id="8901" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">构建一个切换按钮</h2><p id="54d4" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">需要一个切换按钮在亮主题和暗主题之间切换。我们将使用Tailwind CSS构建一个切换按钮。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./components/Toggle/index.js</figcaption></figure><p id="acd9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在上面的代码中，toggle按钮是一个无状态模板，根据<strong class="jp ir"> <em class="nx">活动</em> </strong>道具显示toggle状态，并在toggle按钮被点击时触发<strong class="jp ir"> <em class="nx"> onClick() </em> </strong>回调道具。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./pages/signin.js</figcaption></figure><p id="acdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> darkMode </strong>状态和切换按钮回调函数被添加到签到页面。点击切换按钮时，回调函数负责更新<strong class="jp ir">黑暗模式</strong>状态。在我们实现黑暗模式之前，让我们用<strong class="jp ir"> <em class="nx"> console.log </em> </strong>打印出<strong class="jp ir">黑暗模式</strong>状态来测试切换按钮。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nz"><img src="../Images/3b8dafd94ae6f3babeb0a95bd217e83c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*8NdH3YeytRUitJMULWO57w.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 2. Update darkMode state with toggle button</figcaption></figure><h2 id="6cce" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">启用黑暗模式</h2><p id="662a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">如上所述，我们在<em class="nx">中设置<strong class="jp ir"> darkMode </strong>为<strong class="jp ir"> <em class="nx">类</em> </strong>。/tailwind.config.js </em>根据HTML树中的黑暗类启用黑暗模式。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind.config.js</figcaption></figure><p id="0f00" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据<a class="ae lb" href="https://material.io/design/color/dark-theme.html" rel="noopener ugc nofollow" target="_blank">材质设计</a>，推荐深色主题表面颜色为<strong class="jp ir"> #121212 </strong>。我们在<strong class="jp ir"> <em class="nx">主题中添加了深色主题表面颜色作为自定义颜色。</em></strong></p><p id="e22b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当<strong class="jp ir"> darkMode </strong>状态改变时，<strong class="jp ir"> <em class="nx"> dark </em> </strong>类应相应地添加到车身类列表中或从车身类列表中删除。在<em class="nx">中。/pages/signin.js </em>，我们用<strong class="jp ir"> <em class="nx"> useEffect() </em> </strong>钩子根据<strong class="jp ir"> darkMode </strong>状态为body切换<strong class="jp ir"> <em class="nx"> dark </em> </strong>类。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./pages/signin.js</figcaption></figure><h2 id="0478" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">添加深色主题样式</h2><p id="e5c9" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">启用深色模式后，我们需要用深色变体<strong class="jp ir"> <em class="nx"> dark:{class} </em> </strong>定义深色主题样式。在<em class="nx">中。/styles/globals.css </em>，我们用<strong class="jp ir"> <em class="nx"> @apply </em> </strong>指令给基本css和输入类添加了实用程序类。自定义颜色<strong class="jp ir"> codgray </strong>用于深色模式的背景色。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./styles/globals.css</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/0603e7a9fbf49a519ff4de80056733c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PsEVsnljKVxQzsiHmgRWdg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 3. Apply dark theme styles</figcaption></figure><h2 id="9546" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">为深色主题添加图标</h2><p id="42ef" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">除了改变深色主题中的背景颜色和文本颜色，有时我们需要为深色主题提供不同的图像。上图你可能注意到了，Next.js的logo看起来好像消失在了黑暗主题下。徽标的颜色与背景色非常相似。</p><pre class="km kn ko kp gt ob oc od oe aw of bi"><span id="a1a6" class="mx ld iq oc b gy og oh l oi oj">public/<br/>├── svg/<br/>│   └── <strong class="oc ir">nextjs-dark.svg</strong><br/>│   └── <strong class="oc ir">nextjs-light.svg</strong><br/>│   └── tailwindcss.svg</span></pre><p id="3708" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为深色主题添加一个浅色的Next.js logo，并重命名原来的logo。为了在黑暗模式状态下显示不同的SVG图像，状态被作为道具传递给<code class="fe ok ol om oc b">SignInLogos</code>组件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/1e9d2dc52156894c001d7ffebe361adb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MfkTf0XNM3PV8qTwRBJSgg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 4. Dark theme with light color logo</figcaption></figure><h1 id="5d4e" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">为webkit构建插件-自动填充</h1><p id="ab94" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">到目前为止，在签到页面中添加了黑暗主题支持。当我们在亮模式和暗模式之间切换时，一切看起来都很正常。然而，当我们用自动填充特性填充输入时，输入元素样式并没有像预期的那样显示。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/3dfbd9c0d69a9654619909051d6c8a21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oimvDUqpTSEAW4q9-4K4pA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 5. Unexpected style of input element when auto-fill</figcaption></figure><p id="4bc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从<a class="ae lb" href="https://dev.to/atndesign/a-trick-to-change-the-autocomplete-background-color-21ll" rel="noopener ugc nofollow" target="_blank">这个故事</a>中，我们知道改变自动完成的输入的背景颜色和文本颜色的关键是<strong class="jp ir"><em class="nx">-WebKit-自动填充</em> </strong>选择器。在<strong class="jp ir"><em class="nx">-web kit-自动填充</em> </strong>选择器中，我们可以用<strong class="jp ir"><em class="nx">-web kit-box-shadow</em></strong>声明来改变背景颜色，用<strong class="jp ir"><em class="nx">-web kit-text-fill</em></strong>声明来改变文本颜色。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div></figure><p id="3145" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以通过为<strong class="jp ir"><em class="nx">-web kit-自动填充</em> </strong>伪选择器构建插件来解决这个问题，这是Tailwind CSS不支持的。首先，创建一个插件来注册一个定制的变体<code class="fe ok ol om oc b">autofill</code>。这将启用<strong class="jp ir"> <em class="nx">自动填充:{class} </em> </strong>语法并创建一个函数来修改后缀类。例如:当我们将<strong class="jp ir"> <em class="nx">自动填充:bg-white </em> </strong>类分配给一个元素时，实用程序类<strong class="jp ir"> <em class="nx"> bg-white </em> </strong>将应用于<strong class="jp ir"><em class="nx">{ class }:-WebKit-自动填充</em> </strong>选择器，类似于内置的<a class="ae lb" href="https://tailwindcss.com/docs/hover-focus-and-other-states" rel="noopener ugc nofollow" target="_blank">悬停、聚焦等状态</a>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind/plugins/webkit-autofill.js</figcaption></figure><p id="b003" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根据<a class="ae lb" href="https://tailwindcss.com/docs/plugins#adding-variants" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">添加变体</strong>文档</a>、<strong class="jp ir">和<em class="nx">修改选择符()</em>和</strong>是我们修改基本变体的辅助函数，而<strong class="jp ir">和<em class="nx">分隔符</em>和</strong>是一个可配置的字符串，用来分隔前缀变体和实用程序名称。</p><p id="ede4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<em class="nx">中。/tail wind/plugins/web kit-auto fill . js</em>、我们将<strong class="jp ir"><em class="nx">:-web kit-auto fill</em></strong>添加到具有<strong class="jp ir"><em class="nx">modifieselecters()</em></strong>helper函数的类名中。该插件还将处理<strong class="jp ir"> <em class="nx">:悬停</em> </strong>和<strong class="jp ir"> <em class="nx">:聚焦</em> </strong>状态。</p><h2 id="5bcf" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">Build -webkit-text-fill-color实用程序</h2><p id="5243" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">现在让我们创建一个插件，使用<strong class="jp ir"><em class="nx">add utilities()</em></strong>功能在Tailwind <strong class="jp ir"> utilities </strong>层注册一个新的样式。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind/plugins/webkit-text-fill-color.js</figcaption></figure><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind/utils/flatten-theme.js</figcaption></figure><p id="4156" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如你所看到的，这个插件将顺风的主题颜色展平，并从展平的调色板中生成多种样式。这些新样式的工作原理类似于<strong class="jp ir"> <em class="nx"> text-{color} </em> </strong>和<strong class="jp ir"> <em class="nx"> bg-{color} </em> </strong>的工作原理。我们可以用顺风调色板设置<strong class="jp ir"><em class="nx">-WebKit-text-fill-color</em></strong>。</p><h2 id="7a02" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">构建-webkit-box-shadow实用程序</h2><p id="0d0a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">同<strong class="jp ir"><em class="nx">-WebKit-text-fill-color</em></strong>实用程序，我们创建一个插件为<strong class="jp ir"><em class="nx">-WebKit-box-shadow</em></strong>注册一个新的样式。该实用程序使用展平的颜色生成<strong class="jp ir"><em class="nx">-WebKit-box-shadow</em></strong>属性。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind/plugins/webkit-box-shadow.js</figcaption></figure><h2 id="4cb4" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">注册插件</h2><p id="b525" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">一旦创建了插件，我们就可以在配置文件中注册插件。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./tailwind.config.js</figcaption></figure><p id="07ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要指定我们希望用新样式生成的变体。在我们的例子中，我们应该将<strong class="jp ir">暗</strong>变体和新创建的<code class="fe ok ol om oc b">autofill</code>变体添加到<code class="fe ok ol om oc b">webkitTextFill</code>和<code class="fe ok ol om oc b">webkitBoxShadow</code>实用程序中。</p><h2 id="48a5" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">应用新的实用程序</h2><p id="5205" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">到目前为止，我们已经准备好了插件。现在是时候将新的实用程序应用到输入组件了。在<em class="nx">中。/styles/global.css </em>，用<strong class="jp ir">暗</strong>变体和<code class="fe ok ol om oc b">autofill</code>变体应用<code class="fe ok ol om oc b">webkitTextFill</code>和<code class="fe ok ol om oc b">webkitBoxShadow</code>样式。我们将文本设置为<strong class="jp ir"> <em class="nx">灰色-300 </em> </strong>颜色，背景设置为<strong class="jp ir"> <em class="nx"> codgray </em> </strong>颜色，用于自动填充状态下的深色模式。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./styles/globals.css</figcaption></figure><p id="f65c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">插件工作得很好！干得好！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi oa"><img src="../Images/94692e988c08bbf0af0356312e7030ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xiAHsHb4hRGMa2vUuxWNeQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 6. Customized style of input element when auto-fill</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="f831" class="lc ld iq bd le lf ns lh li lj nt ll lm ln nu lp lq lr nv lt lu lv nw lx ly lz bi translated">针对生产进行优化</h1><p id="2b2e" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">在默认配置下，Tailwind CSS的开发版本超过<em class="nx"> 35kB </em>未压缩。开发构建生成了数以千计的实用程序类，其中大部分在我们的项目中没有使用。</p><h2 id="e62b" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">编写可清除的HTML</h2><p id="ea25" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">因此，我们应该在顺风配置中使用purge选项来删除不必要的实用程序类。Tailwind CSS使用<strong class="jp ir"> PurgeCSS </strong>库来扫描HTML中的类。当我们<a class="ae lb" href="https://tailwindcss.com/docs/optimizing-for-production#writing-purgeable-html" rel="noopener ugc nofollow" target="_blank">编写purgeable HTML </a>时，我们需要注意的一件重要事情是避免在你的模板中用字符串连接动态创建类字符串。否则，该类将不会包含在产品版本中。</p><p id="2a75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">❌ <strong class="jp ir">不使用字符串连接来创建类名</strong></p><pre class="km kn ko kp gt ob oc od oe aw of bi"><span id="6fb2" class="mx ld iq oc b gy og oh l oi oj">&lt;div class="text-{{  error  ?  'red'  :  'green'  }}-600"&gt;&lt;/div&gt;</span></pre><p id="80af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">✅ <strong class="jp ir">动态选择一个完整的类名</strong></p><pre class="km kn ko kp gt ob oc od oe aw of bi"><span id="95c6" class="mx ld iq oc b gy og oh l oi oj">&lt;div class="{{  error  ?  'text-red-600'  :  'text-green-600'  }}"&gt;&lt;/div&gt;</span></pre><h2 id="b76e" class="mx ld iq bd le my mz dn li na nb dp lm jy nc nd lq kc ne nf lu kg ng nh ly ni bi translated">删除未使用的实用程序类</h2><p id="872d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">为了保持产品构建精简，我们可以指定一组路径来清除和删除未使用的实用程序类。在上面的代码中，我们在页面<strong class="jp ir"> <em class="nx">中使用了Tailwind实用程序类。/pages/**/*。js</em>T3，组件<strong class="jp ir">T5。/components/**/*。js  </strong>还有全局风格<strong class="jp ir"> <em class="nx">。/styles/**/*。CSS</em>T11】。</strong></strong></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nk l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">./styles/global.css</figcaption></figure><p id="2550" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们使用purge选项优化生产构建之前，生成的CSS文件大小超过464 <em class="nx"> kB </em>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi on"><img src="../Images/19f93938516950fd30dbd33c63e61f93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x7iX7a_fA_dnNgmm6XeIEQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 7. Generated CSS sized 464kB before optimization</figcaption></figure><p id="d9b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">优化后，CSS文件大小只有3kB左右。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi on"><img src="../Images/81d4ff8c8416a895a80f697e22f924a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFiM4RNFP76c5dMAVGNMsA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Figure 8. Generated CSS sized 3kB after optimization</figcaption></figure></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><h1 id="606d" class="lc ld iq bd le lf ns lh li lj nt ll lm ln nu lp lq lr nv lt lu lv nw lx ly lz bi translated">结论</h1><p id="f042" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Tailwind CSS是一个非常灵活的框架，它使用实用程序优先的方法。这取决于开发人员如何使用这些工具，我们是创建CSS组件还是直接将工具类应用到HTML中，并使样式从元素中可读。</p><p id="e559" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们了解了Tailwind CSS框架应该如何使用。对于那些不太熟悉普通CSS的人来说，它非常强大，对CSS专业人员也有好处！</p><p id="3197" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本系列只涵盖了框架的一个非常基础的部分。更多高级用法在<a class="ae lb" href="https://tailwindcss.com/docs" rel="noopener ugc nofollow" target="_blank"> Tailwind CSS文档</a>中演示。</p><p id="69ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请随意使用<a class="ae lb" href="https://vercel.com/rockyliyanlok/nextjs-with-tailwind-css/cX5gB1Tu5bRLYHNmqBuaHzP63twr" rel="noopener ugc nofollow" target="_blank">演示应用</a>或者在这里克隆或派生存储库<a class="ae lb" href="https://github.com/rockyliyanlok/nextjs-with-tailwind-css" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="79e8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">编码快乐！</p><p id="d43a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nx">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nx">plain English . io</em></a></p></div></div>    
</body>
</html>
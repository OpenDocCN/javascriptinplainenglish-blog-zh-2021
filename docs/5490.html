<html>
<head>
<title>How to Configure ESLint and Prettier in an Angular Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在角度应用中配置更小更漂亮</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-configure-eslint-and-prettier-on-angular-application-87dbd767369c?source=collection_archive---------1-----------------------#2021-11-14">https://javascript.plainenglish.io/how-to-configure-eslint-and-prettier-on-angular-application-87dbd767369c?source=collection_archive---------1-----------------------#2021-11-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/c1990f4cdde93aa211e5967a5a353140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SHVzqot8qY-D2gJc.png"/></div></figure><p id="0007" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这是“开始一个角度项目”之前要做的事情”系列的最后一篇文章。</p><p id="dd50" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们已经看到了如何充分利用角度配置，以及如何在使用角度工具处理项目之前为自己做好准备。在这最后一部分，我们将讨论如何从TSLint迁移到eslit，如何在Angular项目上配置eslit和漂亮点，以及如何通过Husky实现预提交和预推送林挺和格式化过程的自动化。</p><p id="2e8f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们还在等什么？让我们编码——呃，让我们配置！</p><h2 id="184c" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">从TSLint迁移到ESLint</h2><p id="4fc1" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">随着Angular 11的发布，宣布TSLint(在2019年被弃用)已被eslit取代，并且有第三方解决方案允许您通过使用<em class="ln"> schematics </em>轻松地从TSlint迁移到eslit。</p><p id="dbfa" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在运行迁移过程之前，您需要安装<strong class="jt io">convert-t lint-eslit</strong>schematics。为此，只需在要迁移的角度项目的根中运行以下命令:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="ff2e" class="kp kq in lt b gy lx ly l lz ma">ng add @angular-eslint/schematics</span></pre><p id="2316" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后，您需要使用以下命令启动迁移过程:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="ce58" class="kp kq in lt b gy lx ly l lz ma">ng g @angular-eslint/schematics:convert-tslint-to-eslint your_project_name</span></pre><p id="59fc" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上述命令将解析<em class="ln">TSLint . JSON</em>文件，并尝试通过创建一个新的<em class="ln"> .eslintrc.json </em>文件来匹配t lint规则和ESLint规则。该命令还负责删除<em class="ln">t lint . JSON</em>文件，并删除<em class="ln">t lint</em>和<em class="ln">共析器</em>的依赖关系。迁移过程完成后，您的应用程序就可以使用ESLint了。</p><h2 id="b787" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">配置更小更漂亮</h2><p id="574d" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">ESLint的真正力量在于其定制化的可能性。</p><p id="b731" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">通过<em class="ln"> .eslintrc.json </em>文件，可以使用“共享”配置或设置自定义林挺规则。规则一旦设置，如果代码不遵守规则集，将允许我们显示警告。</p><p id="85a3" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在查看我在本文中推荐的配置文件之前，让我们完成漂亮的<strong class="jt io">安装</strong>，它将负责根据<em class="ln">【漂亮的T21】文件中设置的规则格式化代码。</em></p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="4f86" class="kp kq in lt b gy lx ly l lz ma">npm install prettier eslint-plugin-prettier eslint-config-prettier --save-dev</span></pre><p id="3a9a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这个命令，除了安装更漂亮，还负责安装两个软件包，禁用一些ESLint规则，以避免与更漂亮的冲突。一旦安装完成，我们就可以配置林挺和格式规则了。使用以下配置在项目根内创建<em class="ln">. pretierrc . JSON</em>文件:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="12f3" class="kp kq in lt b gy lx ly l lz ma">{<br/>  "singleQuote": true,<br/>  "trailingComma": "none",<br/>  "endOfLine": "auto"<br/>}</span></pre><p id="4eae" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果您想以不同的方式配置更漂亮，请参考<a class="ae mb" href="https://prettier.io/docs/en/options.html" rel="noopener ugc nofollow" target="_blank">可用选项列表</a>。</p><p id="7d70" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">一旦完成了更漂亮的配置，现在让我们通过在项目根内创建<em class="ln">. ESLintrc . JSON</em>文件来配置eslit，配置如下:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="12b1" class="kp kq in lt b gy lx ly l lz ma">{<br/>  "root": true,<br/>  "ignorePatterns": [<br/>    "projects/**/*"<br/>  ],<br/>  "overrides": [<br/>    {<br/>      "files": [<br/>        "*.ts"<br/>      ],<br/>      "parserOptions": {<br/>        "project": [<br/>          "tsconfig.json",<br/>          "e2e/tsconfig.json"<br/>        ],<br/>        "createDefaultProgram": true<br/>      },<br/>      "extends": [<br/>        "eslint:recommended",<br/>        "plugin:@angular-eslint/recommended",<br/>        "plugin:@angular-eslint/template/process-inline-templates",<br/>        "plugin:prettier/recommended"<br/>      ],<br/>      "rules": {<br/>        "@angular-eslint/component-selector": [<br/>          "error",<br/>          {<br/>            "prefix": "app",<br/>            "style": "kebab-case",<br/>            "type": "element"<br/>          }<br/>        ],<br/>        "@angular-eslint/directive-selector": [<br/>          "error",<br/>          {<br/>            "prefix": "app",<br/>            "style": "camelCase",<br/>            "type": "attribute"<br/>          }<br/>        ],<br/>        "sort-imports": [<br/>          "error",<br/>          {<br/>            "ignoreCase": false,<br/>            "ignoreDeclarationSort": false,<br/>            "ignoreMemberSort": false,<br/>            "memberSyntaxSortOrder": ["none", "all", "multiple", "single"],<br/>            "allowSeparatedGroups": false<br/>          }<br/>        ]<br/>      }<br/>    },<br/>    {<br/>      "files": [<br/>        "*.html"<br/>      ],<br/>      "extends": [<br/>        "plugin:@angular-eslint/template/recommended"<br/>      ],<br/>      "rules": {}<br/>    }<br/>  ]<br/>}</span></pre><p id="cbd6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我想注意的部分是:<strong class="jt io">扩展</strong>和<strong class="jt io">规则</strong>。</p><p id="cc9c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">由于安装了第三方包，第一个声明了“共享”规则，而后者显示了自定义规则。</p><p id="eb67" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我觉得必须添加到列表中的唯一规则是<strong class="jt io"> sort-imports </strong>，如果导入的ES6模块没有正确排序，就会导致编译时错误。注意插件和规则的声明顺序很重要。这里是ESLint配置规则的完整<a class="ae mb" href="https://eslint.org/docs/rules" rel="noopener ugc nofollow" target="_blank">列表。</a></p><p id="4a31" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最后，如果你想忽略一些文件的林挺，创建<em class="ln">。项目根目录中的eslintingnore</em>文件:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="8138" class="kp kq in lt b gy lx ly l lz ma"><em class="ln">package.json<br/>package-lock.json<br/>dist<br/>e2e/**<br/>karma.conf.js<br/>commitlint.config.js</em></span></pre><p id="9ca8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在结束之前，让我们在<em class="ln"> package.json </em>中添加脚本，以便从命令行执行林挺和代码格式化:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="627d" class="kp kq in lt b gy lx ly l lz ma">...<br/>"scripts": {<br/>    "ng": "ng",<br/>    "start": "ng serve",<br/>    "build": "ng build",<br/>    "test": "ng test",<br/>    "lint": "npx eslint 'src/**/*.{js,jsx,ts,tsx,html,css,scss}' --quiet --fix",<br/>    "format": "npx prettier 'src/**/*.{js,jsx,ts,tsx,html,css,scss}' --write",<br/>    "e2e": "ng e2e"<br/>  }<br/>...</span></pre><p id="577d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">瞧啊。我们已经完成了ESLint和Prettier的安装和配置。</p><h2 id="9e3c" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">配置Husky</h2><p id="6e29" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">这是本文的最后一部分:在将变更发送到远程存储库之前，我们如何自动化林挺和格式化过程？</p><p id="599b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">简单地说<strong class="jt io">使用Husky </strong>，它通过Git挂钩允许您在<em class="ln">预提交</em>阶段执行命令。</p><p id="1bed" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">要配置自动<em class="ln">预提交</em>林挺和格式化过程，您必须首先安装<strong class="jt io"> lint-staged </strong>:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="3118" class="kp kq in lt b gy lx ly l lz ma">npx mrm@2 lint-staged</span></pre><p id="5895" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">一旦命令被执行，<em class="ln">。哈斯基</em>文件夹将在项目根目录下创建。打开这个文件夹你会找到<em class="ln">。预提交</em>文件。打开文件，编辑如下:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="bed9" class="kp kq in lt b gy lx ly l lz ma"><em class="ln">#!/bin/sh</em><br/>. "$(dirname "$0")/_/husky.sh"<br/>​<br/>npx lint-staged -c .lintstagedrc.js</span></pre><p id="7923" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这样，我们将为<strong class="jt io"> lint-staged </strong>指定配置文件，以自动化林挺和格式化过程。此时，剩下的工作就是在项目根目录下创建<em class="ln"> .lintstagedrc.js </em>文件:</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="b690" class="kp kq in lt b gy lx ly l lz ma">const { ESLint } = <strong class="lt io">require</strong>('eslint')<br/>​<br/>const <strong class="lt io">removeIgnoredFiles</strong> = async (files) =&gt; {<br/>  const eslint = new ESLint()<br/>  const isIgnored = await Promise.<strong class="lt io">all</strong>(<br/>    files.<strong class="lt io">map</strong>((file) =&gt; {<br/>      return eslint.<strong class="lt io">isPathIgnored</strong>(file)<br/>    })<br/>  )<br/>  const filteredFiles = files.<strong class="lt io">filter</strong>((_, i) =&gt; !isIgnored[i])<br/>  return filteredFiles.<strong class="lt io">join</strong>(' ')<br/>}<br/>​<br/>module.exports = {<br/>  'src/**/*.{js,jsx,ts,tsx,html,css,scss}': async (files) =&gt; {<br/>    const filesToLint = await <strong class="lt io">removeIgnoredFiles</strong>(files)<br/>    return [`npx prettier --write ${filesToLint}`, `npx eslint ${filesToLint}`]<br/>  },<br/>}</span></pre><p id="8f0a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">该文件用于指示<strong class="jt io"> lint-staged </strong>忽略<em class="ln">中指定的文件。eslintingnore</em>。最后，我们已经完成了配置，我们可以测试一切都正常工作。打开终端并运行命令</p><pre class="lo lp lq lr gt ls lt lu lv aw lw bi"><span id="6cfd" class="kp kq in lt b gy lx ly l lz ma">npm run format &amp;&amp; npm run lint</span></pre><p id="9a1f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您将有可能运行格式化和林挺脚本。</p><p id="0f3e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">此外，如果您的同事在每次提交之前忘记运行这些命令，那么您的盟友Husky和Lint Staged会立即验证文件的格式和Lint是否正确，如果不正确，就会阻止提交。</p><h2 id="f964" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">结论</h2><p id="4fcb" class="pw-post-body-paragraph jr js in jt b ju li jw jx jy lj ka kb kc lk ke kf kg ll ki kj kk lm km kn ko ig bi translated">这里是“开始角度项目前要做的事情”系列的最后一部分。在开始任何角度的项目之前，我们已经一起看到和学习了我所采用的工具和实践。</p><p id="9ad5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在下一篇文章中，我将讨论一个话题，在过去的几周里，这个话题让我对这个框架以及其他方面有了更多的了解。我们将讨论<strong class="jt io">领域驱动的设计和前端，以及如何在这个领域使用DDD方法的某些方面</strong>。</p></div><div class="ab cl mc md hr me" role="separator"><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh mi"/><span class="mf bw bk mg mh"/></div><div class="ig ih ii ij ik"><p id="7e18" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">关注<a class="ae mb" href="https://devmy.it/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> Devmy </strong> </a> <strong class="jt io"> —软件工厂&amp;学习</strong>关于<strong class="jt io"> </strong> <a class="ae mb" href="https://medium.com/acadevmy" rel="noopener">媒体</a>，<a class="ae mb" href="https://twitter.com/DevmyFactory" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae mb" href="https://www.facebook.com/Devmy.it/" rel="noopener ugc nofollow" target="_blank">脸书</a>和<a class="ae mb" href="https://www.youtube.com/c/devmy" rel="noopener ugc nofollow" target="_blank"> YouTube </a>联系我们或让您了解前端、移动和DevOps开发的最新动态。</p><h2 id="ba9e" class="kp kq in bd kr ks kt dn ku kv kw dp kx kc ky kz la kg lb lc ld kk le lf lg lh bi translated">进一步阅读</h2><div class="mj mk gp gr ml mm"><a href="https://plainenglish.io/blog/create-an-employee-satisfaction-survey-using-angular-and-store-results-in-a-mongodb-collection" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab fo"><div class="mo ab mp cl cj mq"><h2 class="bd io gy z fp mr fr fs ms fu fw im bi translated">使用Angular创建员工满意度调查，并将结果存储在MongoDB集合中</h2><div class="mt l"><h3 class="bd b gy z fp mr fr fs ms fu fw dk translated">一步一步的教程来建立一个员工满意度调查使用Angular和SurveyJS，一个免费的，开源的…</h3></div><div class="mu l"><p class="bd b dl z fp mr fr fs ms fu fw dk translated">简明英语. io</p></div></div><div class="mv l"><div class="mw l mx my mz mv na jp mm"/></div></div></a></div><p id="e041" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="ln">更多内容看</em> <a class="ae mb" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="ln">说白了。报名参加我们的</em> <a class="ae mb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="ln">免费每周简讯</em> </strong> </a> <em class="ln">。关注我们关于</em> <a class="ae mb" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="ln">推特</em> </strong> </a>，<a class="ae mb" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="ln">LinkedIn</em></strong></a><em class="ln">，</em><a class="ae mb" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="ln">YouTube</em></strong></a><em class="ln">，以及</em> <a class="ae mb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="ln">不和</em></strong></a><strong class="jt io"><strong class="jt io"><em class="ln">。</em> </strong></strong></strong></a></p><p id="5399" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> <em class="ln">有兴趣缩放你的软件启动</em> </strong> <em class="ln">？检查出</em> <a class="ae mb" href="https://circuit.ooo/?utm=publication-post-cta" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="ln">电路</em> </strong> </a> <em class="ln">。</em></p></div></div>    
</body>
</html>
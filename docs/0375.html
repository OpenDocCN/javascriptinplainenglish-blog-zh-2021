<html>
<head>
<title>Embedded JavaScript: Everything you need to know to get started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">嵌入式JavaScript:入门所需的一切</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/ejs-everything-you-need-to-know-to-get-started-a039faf53692?source=collection_archive---------6-----------------------#2021-01-22">https://javascript.plainenglish.io/ejs-everything-you-need-to-know-to-get-started-a039faf53692?source=collection_archive---------6-----------------------#2021-01-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4a587c2a5073df61427097d706691507.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*erMDckiFM58I-fh2ZA4Lsw.jpeg"/></div></div></figure><h1 id="a4d5" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">什么是EJS？</h1><p id="906a" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">EJS仅仅代表<em class="lr">嵌入式JavaScript </em>。它是Node.js和Express.js最流行的模板视图引擎之一。</p><p id="c71c" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><strong class="kv io"> <em class="lr">注意:</em> </strong> <em class="lr">模板引擎是一种工具，它使我们能够编写</em> <strong class="kv io"> <em class="lr"> HTML标记</em> </strong> <em class="lr">，其中穿插了其定义的标签或语法，这些标签或语法将在模板的最终输出中插入变量，或者在运行时运行一些编程逻辑，然后将最终的HTML发送到浏览器进行显示。</em></p><h1 id="c866" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">为什么是EJS？</h1><ul class=""><li id="2499" class="lx ly in kv b kw kx la lb le lz li ma lm mb lq mc md me mf bi translated">每当你必须输出带有大量JavaScript的HTML时，EJS最有用。</li><li id="bdb8" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">如果您正在处理生成动态内容或提供与实时更新有关的东西，那么它可以大大减少代码负载。</li></ul></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h1 id="0671" class="jv jw in bd jx jy ms ka kb kc mt ke kf kg mu ki kj kk mv km kn ko mw kq kr ks bi translated"><strong class="ak"><em class="mx">EJS入门</em> </strong></h1><h2 id="91a9" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">使用npm/yarn安装ejs</h2><pre class="nk nl nm nn gt no np nq nr aw ns bi"><span id="b28f" class="my jw in np b gy nt nu l nv nw">$ npm install ejs <br/>or<br/>$ yarn add ejs</span></pre><h2 id="5896" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">普通EJS标签</h2><h2 id="e524" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">1.<code class="fe nx ny nz np b">&lt;%</code></h2><p id="13b9" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">该标签用于嵌入控制流、条件、无输出的JS代码。</p><p id="1734" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><em class="lr"/><strong class="kv io"><em class="lr">注意</em> </strong> <em class="lr"> : </em> <code class="fe nx ny nz np b"><em class="lr">%&gt;</em></code> <em class="lr">称为</em> <strong class="kv io"> <em class="lr">普通结尾</em> </strong> <em class="lr">标签，它是关闭所有标签所必需的。</em></p><p id="3571" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">例如，下面的代码将使用<code class="fe nx ny nz np b">&lt;%</code>标签来执行一个For循环</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">Use of Scriptlet tag in EJS</figcaption></figure><figure class="nk nl nm nn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi og"><img src="../Images/f49d73ec01ea9aa774b9c4f11ea46872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H9OHaNpDX9qXEnijsgwfLw.png"/></div></div></figure><h2 id="37aa" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">2.<code class="fe nx ny nz np b">&lt;%=</code></h2><p id="9d17" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">将值输出到模板中，对HTML进行转义。它用于嵌入JavaScript代码，该代码将输出标签中存在的表达式的结果。</p><p id="a9f1" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">下面的代码使用了<code class="fe nx ny nz np b">&lt;%= %&gt;</code>标签。这里它输出表达式(i+1)的值。</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><figure class="nk nl nm nn gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oh"><img src="../Images/96bf5c78957d2af39ea42ba8ee0084d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5Eb-v0Vs6dk7aEB1vqL-g.png"/></div></div></figure><h2 id="899c" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">3.<code class="fe nx ny nz np b">&lt;%-</code></h2><p id="7256" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">输出时不将HTML值转义到模板中。当使用偏旁时。<code class="fe nx ny nz np b">&lt;%=</code>对进入缓冲区的HTML进行转义，而<code class="fe nx ny nz np b">&lt;%-</code>不会这样做。</p><p id="e695" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">让我们来呈现HTML代码。</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="140a" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">4.<code class="fe nx ny nz np b">&lt;%#</code></h2><p id="31c4" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">注释标记在文件中添加注释。运行脚本时，标记的内容将被自动忽略。</p><p id="d998" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">其他标签是<code class="fe nx ny nz np b">&lt;%_</code> ( ' <strong class="kv io"> <em class="lr">空格符圆滑</em> </strong> ' <em class="lr"> Scriptlet标签</em>，它去除所有前导空格)和<code class="fe nx ny nz np b">&lt;%%</code>(输出一个文字<code class="fe nx ny nz np b">&lt;%</code>)。</p></div><div class="ab cl ml mm hr mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="ig ih ii ij ik"><h2 id="9fe7" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">EJS是翡翠更好更容易的替代品</h2><p id="aa3e" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated"><a class="ae oi" href="http://jade-lang.com/" rel="noopener ugc nofollow" target="_blank"> Jade </a>是Express的默认视图引擎，但是Jade的语法有时很难理解。EJS是一个简单的选择。</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oj ob l"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">easy peasy lemon squeezy</figcaption></figure><p id="a056" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><strong class="kv io">使用express.js和EJS的基本服务器设置:</strong></p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="c779" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><code class="fe nx ny nz np b">app.set('view engine', ‘ejs')</code>帮助将EJS设置为视图引擎。</p><p id="4060" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">此外，创建一个名为<strong class="kv io"> views </strong>的目录，该目录将存储所有的<strong class="kv io"> ejs </strong>文件，这些文件将基于不同的路线呈现由不同部分组成的单独布局。</p><p id="60b0" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">现在在<strong class="kv io">视图</strong>目录中创建一个名为<strong class="kv io"> index.ejs </strong>的文件。这将作为应用程序的起点。</p><h2 id="478f" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">分音</h2><p id="5db4" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">EJS的神奇之处在于，我们可以使用EJS创建局部视图。这在制作大型网站时很方便，因为它通过在文件中定义可重用的代码包并在需要的地方包含它，使开发更容易维护。</p><p id="740c" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">当您想要在多个视图(页面)中重用同一个HTML时，片段就很方便了。片段可以被认为是功能，它们使大型网站更容易维护，因为你不必去改变它出现的每一页的代码。相反，您可以在一个文件中定义可重用代码包，并在任何需要的地方包含它。</p><p id="fe38" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">使用<code class="fe nx ny nz np b">&lt;%- include('RELATIVE/PATH/TO/FILE') %&gt;</code>在文件中嵌入EJS片段。请记住，提到的路径应该是相对于您想要嵌入的文件。</p><p id="4850" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">例如，您可以为所有页面提供通用的页眉、页脚和导航。</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="a92d" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">在index.ejs中，标题和名称将从server.js中传递。</p><p id="6015" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">在上面的代码片段中，第6行和第8行使用了EJS部分音。</p><h2 id="7abe" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">条件式</h2><p id="b82b" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">通过使用<code class="fe nx ny nz np b"> &lt;% %&gt;</code>,我们可以很容易地在普通的HTML中加入一些条件。这里有一个简单的例子:</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="930f" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated">环</h2><p id="a333" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">循环是任何编程语言中非常重要的一部分。它减少了重复性任务的麻烦。在EJS，循环可以以下面的方式使用</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div></figure><h2 id="4406" class="my jw in bd jx mz na dn kb nb nc dp kf le nd ne kj li nf ng kn lm nh ni kr nj bi translated"><strong class="ak">表格效果图</strong></h2><p id="bf96" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">借助于一个<strong class="kv io"> <em class="lr">表格</em> </strong>标签，EJS的一个表格被渲染成HTML格式。</p><p id="5339" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">这里的区别是，在显示动态数据时，我们必须使用<strong class="kv io"> <em class="lr"> Scriptlet </em> </strong>标签，这样，我们就可以呈现一个包含动态内容的表格。</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">rendering of a table in ejs</figcaption></figure><p id="112c" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">在上面的代码中，该表以数组的形式填充了从外部源(renderer，即server.js)传递来的数据。并且通过使用JavaScript <code class="fe nx ny nz np b">forEach</code>数组迭代器方法，遍历数组并将内容显示为单独的<strong class="kv io"> <em class="lr"> td </em> </strong>标签的值。</p><p id="a1f2" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">下面是更新后的<strong class="kv io"> server.js </strong>文件</p><figure class="nk nl nm nn gt jo"><div class="bz fp l di"><div class="oa ob l"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">updated server.js</figcaption></figure><p id="efb4" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">完整代码:</p><div class="ok ol gp gr om on"><a href="https://github.com/sagunjaiswal/EJS101" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd io gy z fp os fr fs ot fu fw im bi translated">sagunjaiswal/EJS101</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">EJS(嵌入式javascript)指南Permalink无法加载最新的提交信息。EJS(嵌入式javascript)指南我的…</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">github.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb jt on"/></div></div></a></div><p id="799e" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">这个帖子到此为止。感谢阅读到最后！✌</p><p id="ebf7" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated">我将非常乐意得到您的反馈和建议。😊</p><p id="21e8" class="pw-post-body-paragraph kt ku in kv b kw ls ky kz la lt lc ld le lu lg lh li lv lk ll lm lw lo lp lq ig bi translated"><strong class="kv io">在这里找到我</strong>👇</p><ul class=""><li id="bf90" class="lx ly in kv b kw ls la lt le pc li pd lm pe lq mc md me mf bi translated">领英:【https://www.linkedin.com/in/sagun-jaiswal/ T4】</li><li id="4f97" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated">GitHub:<a class="ae oi" href="https://github.com/sagunjaiswal" rel="noopener ugc nofollow" target="_blank">https://github.com/sagunjaiswal</a></li></ul></div></div>    
</body>
</html>
<html>
<head>
<title>How to Convert Node.js Code from JavaScript to TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•å°†Node.jsä»£ç ä»JavaScriptè½¬æ¢ä¸ºTypeScript</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-convert-node-js-code-from-javascript-to-typescript-8e7d031a8f49?source=collection_archive---------1-----------------------#2021-09-13">https://javascript.plainenglish.io/how-to-convert-node-js-code-from-javascript-to-typescript-8e7d031a8f49?source=collection_archive---------1-----------------------#2021-09-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/917be5f1200439a4fcb3cacde3d53464.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eX32sidkE5hMsVhw"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@baciutudor?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tudor Baciu</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ca89" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">ä»‹ç»</h1><p id="dd9f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">æœ¬æŒ‡å—åŒ…å«å¤§é‡å…³äºå¦‚ä½•å¼€å§‹å°†ç°æœ‰JavaScripté¡¹ç›®è½¬æ¢ä¸ºTypeScriptçš„ä¿¡æ¯ã€‚</p><h2 id="9a96" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å¾ªåºæ¸è¿›çš„æ–¹æ³•â€¦</h2><p id="5a5f" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">æœ¬æ–‡ä»å»ºç«‹ä¸€ä¸ªé¡¹ç›®(ä»ç„¶æ˜¯JavaScript)å¼€å§‹ï¼Œè¯¥é¡¹ç›®å¸¦æœ‰ä¸€ä¸ªTypeScriptâ€œç¼–è¯‘æ— é”™è¯¯â€è®¾ç½®(å°†æ‰€æœ‰æ–‡ä»¶ä¿ç•™ä¸ºã€‚js)ã€‚ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæˆ‘ä»¬å°†è§£å†³å‘ç°çš„é—®é¢˜ï¼Œå¹¶æœ€ç»ˆæˆä¸ºåªæ”¯æŒæ‰“å­—ç¨¿çš„(ã€‚ä»…é™ts)ã€‚</p><p id="6438" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æˆ‘å»ºè®®é˜…è¯»è¿™ä»½æ–‡ä»¶ä¸¤éã€‚é¦–å…ˆå»ºç«‹ä¸€ä¸ªæ‰€æœ‰å¾…åŠäº‹é¡¹çš„åˆ—è¡¨ï¼Œå…¶æ¬¡å®é™…å¤„ç†å®ƒä»¬ã€‚æœ‰å¾ˆå¤šäº‹æƒ…éå¸¸é‡è¦(â€œè¿™åº”è¯¥åœ¨æ–‡ä»¶çš„æœ€é¡¶ç«¯â€)ï¼Œä½†è¿™å¹¶ä¸çœŸæ­£å¯è¡Œã€‚</p><h2 id="c37d" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ä¸€äº›æ‰“å­—ç¨¿åŸºç¡€</h2><p id="bbe0" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœæ‚¨ä»æœªä½¿ç”¨è¿‡TypeScriptï¼Œè¿™å°†æ˜¯ä¸€ä¸ªé¢å¤–çš„æŒ‘æˆ˜ã€‚æœ‰å‡ ä¸ªé‡è¦çš„â€œæåŠâ€éœ€è¦å®Œæˆ:</p><ul class=""><li id="fb1c" class="mn mo in la b lb mi lf mj lj mp ln mq lr mr lv ms mt mu mv bi translated">TypeScriptåªå­˜åœ¨äºâ€œç¼–è¯‘â€æ—¶ï¼Œåœ¨è¿è¡Œæ—¶å®ƒä»ç„¶æ˜¯JavaScript</li><li id="a7d3" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">TypeScriptå¹¶ä¸çœŸæ­£ç¼–è¯‘ï¼Œå®ƒè½¬æ¢æ–‡ä»¶ã€‚</li><li id="9492" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">ç±»å‹è„šæœ¬ä¼ è¾“ç¨‹åºè¢«å‘½åä¸ºâ€œtscâ€</li><li id="443f" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">node(node.exe)åªèƒ½è¿è¡ŒJavaScriptä»£ç ï¼Œä½†æ˜¯é€šè¿‡æ·»åŠ â€œæ’ä»¶â€ts-nodeï¼Œå®ç°äº†ç±»å‹è„šæœ¬æ”¯æŒã€‚</li><li id="a666" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">VSCodeå¯¹TypeScriptæœ‰å¾ˆå¥½çš„æ”¯æŒï¼ŒESLintä¹Ÿæ˜¯(ç”¨æ­£ç¡®çš„æ’ä»¶)</li></ul><p id="6cb6" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æœ€é‡è¦çš„å¯èƒ½æ˜¯:<em class="nb">è¿è¡Œ</em>ä»£ç å’Œ<em class="nb">ä¼ è¾“</em>ä»£ç æ˜¯ä¸¤å›äº‹ã€‚ä½ éœ€è¦è®©ä¸¤ä¸ªä¸–ç•Œéƒ½å·¥ä½œã€‚</p><p id="5757" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœä½ æƒ³ç­¾å‡ºä¸€ä¸ªå·¥ä½œ(ç©º)é¡¹ç›®ï¼Œé‚£ä¹ˆç­¾å‡º<a class="ae jz" href="https://github.com/tomnil/emptyts" rel="noopener ugc nofollow" target="_blank">https://github.com/tomnil/emptyts</a>ã€‚</p><h2 id="35de" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç±»å‹â€¦</h2><p id="b376" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è™½ç„¶æœ‰è§£å†³å¸¸è§ç±»å‹è„šæœ¬é—®é¢˜çš„æŠ€å·§ï¼Œä½†è¿™é‡Œå‡ ä¹æ²¡æœ‰å…³äºå¦‚ä½•å®é™…ç¼–å†™ç±»å‹çš„ä¿¡æ¯ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä¸€äº›å»ºè®®è¿˜æ˜¯å¾ˆé‡è¦çš„ã€‚</p><p id="8219" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">ä»»ä½•</strong></p><p id="2706" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">AnyåŸºæœ¬ä¸Šç¦ç”¨å˜é‡çš„ç±»å‹æ£€æŸ¥(read:make itâ€œJavaScriptâ€)ã€‚<code class="fe nc nd ne nf b">any</code>åº”è¯¥é¿å…ï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹éå¸¸æœ‰ç”¨ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="cc0d" class="lw kb in nf b gy no np l nq nr">let a : any = {}<br/>a.name = "Sarah";   // TypeScript checking is disabled here</span></pre><p id="c1d6" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">æœªçŸ¥</strong></p><p id="35b5" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><code class="fe nc nd ne nf b">unknown</code>å’Œ<code class="fe nc nd ne nf b">any</code>æ˜¯â€œè¿œç¨‹å¥½å‹â€ï¼Œä½†æ˜¯<code class="fe nc nd ne nf b">unknown</code>ä¸å…è®¸é€šè¿‡ä»–ä»¬çš„åå­—è®¿é—®å±æ€§ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="4153" class="lw kb in nf b gy no np l nq nr">let myBox: unknown = {};       // OK!<br/>myBox = { foo: "bar" };        // OK!<br/>console.log(myBox.foo);        // Error<br/>myBox.foo = "FooBar";          // Error</span></pre><p id="0801" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">å¯¹è±¡</strong></p><p id="9e63" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä¸¤ç§æ–¹å¼éƒ½å¯è¡Œ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="6552" class="lw kb in nf b gy no np l nq nr">let user1: <strong class="nf io">{ Name: string, Age: number };</strong><br/>user1 = { Name: "John", Age: 16 };<br/>console.log(user1.Name);</span><span id="5516" class="lw kb in nf b gy ns np l nq nr"><strong class="nf io">type User = { Name: string, Age: number };</strong><br/>let user2: User = { Name: John", Age: 16 };<br/>console.log(user2.Name);</span></pre><p id="95b7" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç°åœ¨ï¼ŒåŸºæœ¬çš„ä¸œè¥¿éƒ½åœ¨è·¯ä¸Šäº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹è½¬æ¢ã€‚</p><h1 id="230d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">å»ºç«‹å·¥å…·é“¾</h1><p id="39dc" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨TypeScriptï¼Œå¿…é¡»æœ‰è®¸å¤šå·¥å…·ã€‚è¿˜æœ‰è®¸å¤šå·¥å…·å¯ä»¥è®©å®ƒå˜å¾—æ›´å®¹æ˜“:)</p><h2 id="27eb" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">tsc +ç±»å‹è„šæœ¬</h2><p id="2203" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">é¦–å…ˆå¯¹<code class="fe nc nd ne nf b">tsc</code>(trans piler)å’Œ<code class="fe nc nd ne nf b">typescript </code>æœ¬èº«è¿›è¡Œå…¨å±€å®‰è£…ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="63f8" class="lw kb in nf b gy no np l nq nr">npm install tsc -g</span><span id="531e" class="lw kb in nf b gy ns np l nq nr">npm install typescript --save-dev</span></pre><h2 id="bb02" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">tsèŠ‚ç‚¹</h2><p id="2d65" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ts-nodeæ˜¯æ·»åŠ æ”¯æŒç›´æ¥è¿è¡ŒTypeScriptçš„æ¨¡å—(å³ï¼›<em class="nb">é</em> <strong class="la io"> <em class="nb"> </em> </strong>å…ˆç¼–è‡ªã€‚tsåˆ°ã€‚jsç„¶åè¿è¡Œ. js. ts-nodeå°±å¯ä»¥è¿è¡Œäº†ã€‚tsç›´æ¥)ã€‚</p><p id="9706" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¯¥å·¥å…·å¿…é¡»å®‰è£…åœ¨æœ¬åœ°ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a19e" class="lw kb in nf b gy no np l nq nr">npm install ts-node --save-dev</span></pre><h2 id="2965" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç±»å‹åŒæ­¥(å¯é€‰)</h2><p id="35a4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥è‡ªåŠ¨ä¸‹è½½æ‰€æœ‰ä½ å¼•ç”¨çš„æ¨¡å—çš„å®šä¹‰æ–‡ä»¶(å®ƒä¸æ˜¯å†…ç½®åœ¨ä½ å¼•ç”¨çš„æ¨¡å—ä¸­çš„)ã€‚ä½¿ç”¨npmå®‰è£…ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="e1dd" class="lw kb in nf b gy no np l nq nr">npm install -g typesync</span></pre><h2 id="9bb2" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">eslint(å¯é€‰)</h2><p id="0996" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">eslintåŒæ ·é‡è¦ï¼Œä½†ä¸åœ¨æœ¬æ–‡è®¨è®ºèŒƒå›´å†…ã€‚</p><h1 id="9d5d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">ä¸ºTypeScripté…ç½®é¡¹ç›®</h1><h2 id="2c4f" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">åˆ›å»ºtsconfig.json</h2><p id="b81b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»º<code class="fe nc nd ne nf b">tsconfig.json</code>ã€‚ä»ä»¥ä¸‹å†…å®¹å¼€å§‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a520" class="lw kb in nf b gy no np l nq nr">{<br/>  "compilerOptions": { /* Docs: <a class="ae jz" href="https://www.typescriptlang.org/tsconfig" rel="noopener ugc nofollow" target="_blank">https://www.typescriptlang.org/tsconfig</a> */<br/>    "target": "ES2020",<br/>    "module": "commonjs",<br/>    "outDir": "bin",<br/>    "rootDir": "src",<br/>    "strict": true,<br/>    "noImplicitAny": false,<br/>    "strictNullChecks": true,<br/>    "checkJs": true,<br/>    "allowJs": true,<br/>    "moduleResolution": "node",<br/>    "types": [<br/>      "node"<br/>    ],<br/>    "lib": [<br/>      "es6"<br/>    ],<br/>    "esModuleInterop": true,<br/>    "skipLibCheck": true,<br/>    "forceConsistentCasingInFileNames": true,<br/>    "allowUnreachableCode": true,<br/>     "useUnknownInCatchVariables": false,  // TypeScript 4.4+ only!<br/>},<br/>  "include": [<br/>    "src/**/*.ts",<br/>    "src/**/*.js"<br/>  ],<br/>  "exclude": [<br/>    "node_modules",<br/>    "&lt;node_internals&gt;/**",<br/>  ]<br/>}</span></pre><p id="eee7" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç›¸åº”åœ°æ›´æ”¹includeå’Œexclude(æ³¨æ„ï¼Œè¿™äº›è®¾ç½®å°†<strong class="la io"> <em class="nb">è€Œä¸æ˜¯</em> </strong>è¢«ä¸€äº›å·¥å…·ä½¿ç”¨ï¼Œé™¤éç¯å¢ƒå˜é‡<code class="fe nc nd ne nf b">TS_NODE_FILES</code>è¢«è®¾ç½®ä¸º<code class="fe nc nd ne nf b">true</code>)ã€‚</p><h2 id="0e6d" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å…³äºé…ç½®è®¾ç½®çš„ä¸€äº›å¿«é€Ÿæ³¨é‡Š</h2><p id="baff" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated"><strong class="la io">ã€Šç›®æ ‡ã€‹:â€œes 2020â€</strong></p><p id="9f56" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœä½ åœ¨åšåç«¯å¼€å‘ï¼Œé‚£ä¹ˆå°½å¯èƒ½ä½¿ç”¨æ–°çš„EcmaScriptç‰ˆæœ¬æ˜¯æœ€åˆç†çš„ã€‚</p><p id="0efb" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io"> "rootDir": "src" </strong></p><p id="3995" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœæ‚¨éµå¾ªå¤§å¤šæ•°æ ‡å‡†ï¼Œæ‚¨çš„æºä»£ç åœ¨â€œsrcâ€ä¸­</p><p id="b72d" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io"> "outDir": "out" </strong></p><p id="5417" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">Typescriptæ˜¯å›´ç»•ä»/src/æ–‡ä»¶å¤¹åˆ°ç›®æ ‡ç›®å½•/out/çš„â€œç¼–è¯‘â€(å®é™…ä¸Šæ˜¯ä¼ è¾“)è€Œæ„å»ºçš„ã€‚</p><p id="fbd7" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æœ¬æŒ‡å—é¿å…ä½¿ç”¨/out/æ–‡ä»¶å¤¹ï¼Œå› ä¸ºå®ƒä¼šé™ä½å¼€å‘å’Œè°ƒè¯•è¿‡ç¨‹çš„é€Ÿåº¦ã€‚æŒ‰åŸæ ·è¿è¡Œä»£ç (å¦‚ã€‚ts)çš„æ•ˆç‡è¦é«˜å¾—å¤šã€‚ä½†æ˜¯ï¼Œå¿…é¡»è®¾ç½®â€œoutDirâ€ã€‚</p><p id="6b5a" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">â€œallow jsâ€â€”â€”ä¼ è¾“javascriptæ–‡ä»¶</strong></p><p id="8bf2" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœéœ€è¦ï¼Œæ‰“å¼€<code class="fe nc nd ne nf b">allowJs</code>å’Œ<code class="fe nc nd ne nf b">checkJs</code>ã€‚è¦å¤„ç†çš„jsæ–‡ä»¶ã€‚tsæ–‡ä»¶ã€‚æ­¤å¤–ï¼Œç¡®ä¿ä¸¤è€…ã€‚tså’Œã€‚jsåŒ…å«åœ¨<code class="fe nc nd ne nf b">include</code>éƒ¨åˆ†ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="8564" class="lw kb in nf b gy no np l nq nr">"include": [<br/>        "src/**/*.ts",<br/>        "src/**/*.js"<br/>    ],</span></pre><p id="c2b3" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">"<strong class="la io">useunknowincatchpavariables</strong>"</p><p id="a28b" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¿™æ˜¯ä»TypeScript 4.4å¼€å§‹çš„æ–°è®¾ç½®ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒè¢«è®¾ç½®ä¸ºtrueï¼Œè¿™æ„å‘³ç€catchä¸­çš„<code class="fe nc nd ne nf b">error</code>å°†æ˜¯<code class="fe nc nd ne nf b">unknown</code>ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¸å¯èƒ½è®¿é—®<code class="fe nc nd ne nf b">.message</code>ã€‚</p><p id="a25e" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç®€å•çš„è§£å†³æ–¹æ³•æ˜¯(ï¼Œç›®å‰ï¼Œå°†<code class="fe nc nd ne nf b">useUnknownInCatchVariables</code>è®¾ç½®ä¸º<code class="fe nc nd ne nf b">false</code>ï¼Œæˆ–è€…è¿›è¡Œé€‚å½“çš„ä¿®å¤ã€‚æœ‰å…³æ­¤ä¸»é¢˜çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§ä¸‹æ–‡ã€‚</p><h2 id="6f60" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ã€‚gitignoreå‡ºæ–‡ä»¶å¤¹</h2><p id="d54e" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ä½¿ç”¨gitï¼Ÿä¿®æ”¹<code class="fe nc nd ne nf b">.gitignore</code>ä»¥ä»<code class="fe nc nd ne nf b">tsc</code>ä¸­æ’é™¤<code class="fe nc nd ne nf b">out</code>æ–‡ä»¶å¤¹å’Œä¸´æ—¶æ–‡ä»¶ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="8bb4" class="lw kb in nf b gy no np l nq nr">out/<br/># TS -incremental file<br/>tsconfig.tsbuildinfo<br/>node_modules</span></pre><h2 id="a599" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ä»æœç´¢ç»“æœä¸­åˆ é™¤æ–‡ä»¶å¤¹â€œoutâ€</h2><p id="7089" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è‹±å¯¸vscode/settings.jsonï¼Œä½¿ç”¨ä»¥ä¸‹è®¾ç½®:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="09cc" class="lw kb in nf b gy no np l nq nr">{<br/>  "search.exclude": {<br/>     "**/node_modules": true,<br/>     "**/package-lock.json": true,<br/>     "**/package.json": true,<br/>     "out/**": true // Don't search the TypeScript "out" folder<br/>   }<br/>}</span></pre><h2 id="0cb3" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">vscode:é‡æ–°åŠ è½½çª—å£ä»¥ç¡®ä¿æ­£ç¡®åŠ è½½tsconfig.json</h2><p id="d583" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">vscodeå°†å¤„ç†<code class="fe nc nd ne nf b">tsconfig.json</code>ï¼Œä½†æ­¤æ—¶é‡æ–°åŠ è½½vscodeå¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„:æŒ‰<code class="fe nc nd ne nf b">ctrl-shift-p</code>å¹¶æœç´¢å‘½ä»¤â€œå¼€å‘äººå‘˜:é‡æ–°åŠ è½½çª—å£â€ã€‚</p><h1 id="2d2f" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">æ·»åŠ ç°æœ‰ç±»å‹</h1><p id="9834" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ä»npmæ³¨å†Œè¡¨å®‰è£…çš„æ¨¡å—ç±»å‹å¯ä»¥é€šè¿‡å››ç§ä¸åŒçš„æ–¹å¼è¿›è¡Œè§£æ:</p><ul class=""><li id="503e" class="mn mo in la b lb mi lf mj lj mp ln mq lr mr lv ms mt mu mv bi translated">è¿™äº›ç±»å‹åŒ…å«åœ¨æ¨¡å—æ‰€æœ‰è€…ä¸­</li><li id="a910" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">è¿™äº›ç±»å‹å¯ä»¥å•ç‹¬å®‰è£…</li><li id="ee40" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">æ‰‹åŠ¨ç¼–å†™ç¼ºå°‘çš„ç±»å‹</li><li id="ebbf" class="mn mo in la b lb mw lf mx lj my ln mz lr na lv ms mt mu mv bi translated">å°†æ¨¡å—è®¾ç½®ä¸ºâ€œä»»æ„â€</li></ul><p id="6598" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><code class="fe nc nd ne nf b">typesync</code>æ˜¯ä¸€ä¸ªå¾ˆé…·çš„å·¥å…·ï¼Œå¯ä»¥æ£€æµ‹ç¼ºå¤±çš„ç±»å‹(å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œç”¨npmå®‰è£…å®ƒ)</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="9d71" class="lw kb in nf b gy no np l nq nr">&gt; typesync</span><span id="9c98" class="lw kb in nf b gy ns np l nq nr">ğŸ“¦ projectname â€” package.json (1 new typings added, 0 unused typings removed)<br/>â””â”€ + @types/<strong class="nf io">packagename1</strong></span><span id="7ccd" class="lw kb in nf b gy ns np l nq nr">âœ¨  Go ahead and run npm install or yarn to install the packages that were added.</span><span id="3b70" class="lw kb in nf b gy ns np l nq nr">&gt; npm install</span></pre><p id="50dd" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœæ‰¾ä¸åˆ°éœ€è¦çš„ç±»å‹ï¼Œåªæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥è§£å†³ã€‚è¦ä¹ˆè‡ªå·±ç¼–å†™ç±»å‹ï¼Œè¦ä¹ˆå°†æ•´ä¸ª<em class="nb">æ¨¡å—å£°æ˜ä¸ºanyã€‚åè€…é€šå¸¸æ˜¯æœ€å®¹æ˜“çš„:åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºâ€œdeclarations.d.tsâ€çš„æ–‡ä»¶ï¼Œå¹¶å…è®¸å®ƒåªåŒ…å«<strong class="la io">å’Œ</strong>â€œdeclare moduleâ€è¯­å¥(<strong class="la io">æ²¡æœ‰å…¶ä»–å†…å®¹</strong>ï¼Œå¦åˆ™å®ƒå°†åœæ­¢å·¥ä½œ)ã€‚</em></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="3fd8" class="lw kb in nf b gy no np l nq nr">declare module 'excel4node';</span></pre><p id="5774" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœä½ æƒ³è¦ä¸€äº›å…³äºå¦‚ä½•å†™ç±»å‹çš„ä¿¡æ¯ï¼Œå»çœ‹çœ‹https://github.com/DefinitelyTyped/DefinitelyTypedã€‚</p><h2 id="e804" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">è®¾ç½®å˜é‡çš„ç±»å‹</h2><p id="bf5c" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚ä¸Šæ‰€è¿°ï¼Œæœ¬æŒ‡å—ä¸æ˜¯æ‰“å­—ç¨¿æŒ‡å—ã€‚ä½†æ˜¯ç»™ä¸ªæç¤ºå¤§æ¦‚æ˜¯å¥½äº‹å§ã€‚æœ‰ä¸‰ç§æ–¹æ³•å¯ä»¥å°†ç±»å‹åˆ†é…ç»™å˜é‡:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="c051" class="lw kb in nf b gy no np l nq nr">type User = { Name: string, Age: number };</span><span id="6367" class="lw kb in nf b gy ns np l nq nr">let a : User | undefined = undefined;<br/>let b = &lt;User&gt;{ Name: "Karin", Age: 40 };   // Type Assertion<br/>let c = { Name: "Karin", Age: 40 } as User; // Type Assertion</span></pre><h1 id="fce6" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">ä¼ è¾“æ–‡ä»¶å¹¶å†³å®šå¦‚ä½•ä¿®å¤é”™è¯¯</h1><p id="14e8" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">åœ¨ç¬¬ä¸€ä¸ªTypeScript transpileä¸­ï¼Œæ‚¨å½“å‰çš„javascriptæ–‡ä»¶å‡ ä¹è‚¯å®šä¼šç”Ÿæˆå¤§é‡çš„è­¦å‘Šå’Œé”™è¯¯ã€‚åœ¨å°è¯•åˆ‡æ¢åˆ°TypeScriptä¹‹å‰ï¼Œå¾ˆå¯èƒ½å¿…é¡»ä¿®å¤ç°æœ‰javascriptæ–‡ä»¶ä¸­çš„è®¸å¤šé—®é¢˜ã€‚ä»å‘½ä»¤è¡Œè¿è¡Œ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="2f05" class="lw kb in nf b gy no np l nq nr">tsc -b -v</span></pre><p id="1a85" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">â€¦æˆ–è€…ï¼Œå¦‚æœæ‚¨å–œæ¬¢ä½¿ç”¨æ–‡ä»¶ç›‘è§†å™¨ä»¥å¢é‡æ–¹å¼è¿è¡Œ<code class="fe nc nd ne nf b">tsc</code>:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="b049" class="lw kb in nf b gy no np l nq nr">tsc --build --verbose --incremental --watch</span><span id="9912" class="lw kb in nf b gy ns np l nq nr"># or shorter:</span><span id="502a" class="lw kb in nf b gy ns np l nq nr">tsc -b -v -i -w</span></pre><p id="f2fd" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">é€ä¸ªè§£å†³é”™è¯¯æ—¶ï¼Œè®©ç¼–è¯‘å™¨åœ¨çª—å£ä¸­ä»¥ç›‘è§†æ¨¡å¼è¿è¡Œã€‚</p><h2 id="df96" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å›ºå®šé¡ºåº</h2><p id="1102" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœå¯èƒ½çš„è¯ï¼Œä»â€œæœ€æ·±â€å±‚æ¬¡çš„ä»£ç å¼€å§‹ï¼Œå³ä»ç£ç›˜/äº’è”ç½‘åŠ è½½æ•°æ®çš„ä»£ç ã€‚åŸºæœ¬ä¸Šï¼Œå¦‚æœ<code class="fe nc nd ne nf b">LoadWeatherDataFromRemoteAPI()</code>è¿”å›<code class="fe nc nd ne nf b">{ Temparature: 25 }</code>ï¼Œè¿™ä¸ªå‡½æ•°åº”è¯¥æ˜¯è¿™æ ·çš„:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="022b" class="lw kb in nf b gy no np l nq nr">function <!-- -->LoadWeatherDataFromRemoteAPI() : { Temparature: number } {<br/> // ... code for fetching here<!-- --> <br/>}</span></pre><p id="b6ed" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¿™ä¸ªä¸»é¢˜å°†åœ¨ä¸‹é¢è¯¦ç»†è®¨è®º(åŒ…æ‹¬å¦‚ä½•å¤„ç†æ‰¿è¯º/ç­‰å¾…/å¼‚æ­¥)ã€‚</p><h2 id="76d0" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">JsDocæœºä¼š</h2><p id="0f39" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">TypeScript transpilerç†è§£JsDocæ³¨é‡Šï¼Œvscodeè¯†åˆ«å®ƒä»¬ï¼Œä½†æ˜¯ä¸€æ—¦è½¬æ¢å®Œæˆï¼Œä¸€äº›(å¾ˆå¤šï¼Ÿ)æ˜¯ä¸éœ€è¦çš„ã€‚TypeScriptåº”è¯¥ä¸ºç±»å‹è·èƒœ(å¹¶ä¸”å¯ä»¥é€‰æ‹©ä¸ºå…¶ä»–å†…å®¹ä¿ç•™JsDoc)</p><p id="df19" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœæ‚¨çš„ä»£ç åœ¨è¿™ä¸€ç‚¹ä¸Šå®Œå…¨ç¼ºä¹JsDocï¼Œé‚£ä¹ˆå°†å®ƒä½œä¸ºä¸­é—´è§£å†³æ–¹æ¡ˆæ¥ç¼–å†™/ç”Ÿæˆå¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚å®ƒ<em class="nb">å°†</em>å¸®åŠ©ä½ è§£å†³é”™è¯¯ï¼Œä½†ä¹Ÿæ˜¯æœç€é”™è¯¯çš„æ–¹å‘è¿ˆå‡ºçš„ä¸€æ­¥ã€‚ä¸€æ—¦è½¬æ¢å®Œæˆï¼Œè¿™ä¸ªæ–°ç¼–å†™çš„JsDocå¯èƒ½ä¼šè¢«åˆ é™¤ã€‚JsDocç¤ºä¾‹:</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/e8dd79ebafa2e59b855d996d78783093.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/format:webp/1*-oj5COgxAr0DrsKwav6IFA.png"/></div></figure><p id="3ad1" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å’Œå˜é‡ä½¿ç”¨<code class="fe nc nd ne nf b">/** @type { <em class="nb">thetype </em>} */</code></p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/903ce8d133aec35fd95db84986dda9c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/1*0SanGiXQofDGQpyB6yaazw.gif"/></div></figure><h2 id="91d5" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">è‡ªåŠ¨ç¼–å†™æ–‡æ¡£/è§£æç±»å‹</h2><p id="2805" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è€ƒè™‘ä¸‹é¢çš„JavaScriptä»£ç ã€‚è¯¥å‡½æ•°ç¼ºå°‘å‚æ•°ç±»å‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="f230" class="lw kb in nf b gy no np l nq nr">function RandomNumber(iTo) {<br/>    return Math.round(Math.random() * iTo + 0.5);<br/>}</span></pre><p id="1952" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è‡ªåŠ¨æ¨æ–­ç±»å‹æ˜¯å¯èƒ½çš„:)ä½†æ˜¯æˆ‘å¼ºçƒˆå»ºè®®åœ¨æ–‡ä»¶è¢«é‡å‘½åä¸º<code class="fe nc nd ne nf b">.ts</code>ä¹‹å<em class="nb">è¿›è¡Œæ¨æ–­ï¼Œå› ä¸ºå®ƒå°†ç¼–å†™çœŸæ­£çš„ç±»å‹è„šæœ¬ä»£ç (è€Œä¸æ˜¯jsDoc)ã€‚é˜…è¯»ä¸‹é¢å…³äºè¿™ä¸ªè¯é¢˜çš„æ›´å¤šå†…å®¹ã€‚</em></p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nv"><img src="../Images/6721cc6beaa67a26fe40c3c49f2221f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*x6dx0hBwBVl-6eP_EgAqnQ.gif"/></div></div></figure><h1 id="1488" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">è§£å†³é”™è¯¯</h1><p id="24a7" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">åŒæ—¶å°†æ–‡ä»¶ä¿å­˜ä¸ºã€‚jsï¼Œæœ‰å¯èƒ½è§£å†³å¾ˆå¤šé—®é¢˜ã€‚ç°åœ¨ï¼Œå¦‚æœæ‚¨å·²ç»å†³å®šé‡å‘½åä¸ºã€‚tsï¼Œæ²¡å…³ç³»ã€‚å…ˆçœ‹é‡å‘½åéƒ¨åˆ†:)</p><h2 id="f4f7" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">è¿ç®—ç¬¦â€œxyzâ€ä¸èƒ½åº”ç”¨äºâ€œstringâ€å’Œâ€œnumberâ€ç±»å‹ã€‚</h2><p id="7d95" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä¸è¦æ··åˆç±»å‹ã€‚:)</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="0cd8" class="lw kb in nf b gy no np l nq nr">// Incorrect type set<br/>let a="0";<br/>console.log(a+1);   // Disallowed, a is a string</span><span id="2feb" class="lw kb in nf b gy ns np l nq nr">// toFixed converts to string!<br/>const a = 3.1415926;<br/>const b = a.toFixed(2);<br/>const c = 2 * b;     // Disallowed, b is a string</span></pre><h2 id="6b90" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">fs.readFileSyncå’ŒJSON.parseé—®é¢˜</h2><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="e004" class="lw kb in nf b gy no np l nq nr">Argument of type 'Buffer' is not assignable to parameter of type 'string'.ts(2345)</span></pre><p id="d802" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è§£å†³æ–¹æ¡ˆ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="882e" class="lw kb in nf b gy no np l nq nr"># Change from:<br/>let result1 = JSON.parse(fs.readFileSync(fileName));</span><span id="a9e8" class="lw kb in nf b gy ns np l nq nr">To:<br/>let result2 = JSON.parse(fs.readFileSync(fileName, 'utf-8'));</span></pre><h2 id="34c7" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å¦‚æœæ²¡æœ‰åˆ«çš„ï¼Œå°±å¿½ç•¥è¿™ä¸ªé”™è¯¯</h2><p id="7e72" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å—¯ï¼Œç°åœ¨å¯èƒ½æœ‰ä¸€äº›å¾ˆéš¾ä¿®å¤çš„é”™è¯¯ã€‚åªéœ€ç”¨<code class="fe nc nd ne nf b">@ts-ignore</code>æ ‡è®°è¯¥è¡Œå³å¯(ä¹Ÿè®¸å¯ä»¥å°†å…¶æ·»åŠ åˆ°backlogä¸­ï¼Œä»¥ä¾¿ç¨åä¿®å¤):</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="4428" class="lw kb in nf b gy no np l nq nr">process.on('unhandledRejection', (error) =&gt; {<br/>    //@ts-ignore<br/>    logger.info("Unhandled exception - internal error. Stacktrace=" + error.stack);<br/>});</span></pre><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/6562c0e79efc90bdbdd34483ed9d962a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7kEvL6XPcPf3E4yNj9mAgQ.gif"/></div></div></figure><h1 id="e0f6" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">å…³äºå…¨å±€å˜é‡å’ŒExpressçš„ç‰¹æ®Šæ³¨é‡Š</h1><p id="6d21" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¹¶éæ‰€æœ‰é¡¹ç›®éƒ½åŒ…å«å…¨å±€å˜é‡æˆ–ä½¿ç”¨Expressã€‚æœ¬èŠ‚ä¸“é—¨è®¨è®ºä¸æ­¤ç›¸å…³çš„é—®é¢˜ã€‚</p><h2 id="19bc" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å£°æ˜å…¨å±€</h2><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="207d" class="lw kb in nf b gy no np l nq nr">error TS2339: Property â€˜myVariableâ€™ does not exist on type â€˜Global &amp; typeof globalThisâ€™.</span></pre><p id="2edc" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è§£å†³æ–¹æ¡ˆ:åœ¨ä¸€ä¸ª<strong class="la io"> .d.ts </strong>æ–‡ä»¶ä¸­ï¼Œå®šä¹‰å¯¹è±¡ã€‚è¿™é‡Œæœ‰ä¸€äº›è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¾‹å­:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="5dd6" class="lw kb in nf b gy no np l nq nr">var myVariable: boolean;<br/>    var myClass1: Object;<br/>    var myClass2: any;<br/>    var myObject3: { Name: string, Username: string };<br/>    var myObject3Array: { Name: string, Username: string }[];<br/>}</span></pre><p id="f51e" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">é€šå¸¸ä½ ä¼šçœ‹åˆ°ä¸‹é¢çš„é£æ ¼ä½œä¸ºå»ºè®®ï¼Œä½†ä¸Šé¢çš„é£æ ¼å°†ä¸tscä¸€èµ·å·¥ä½œï¼ŒåŒæ—¶ç”¨æ™ºèƒ½æ„ŸçŸ¥è¿è¡Œä»£ç <em class="nb">å’Œ</em>ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a19f" class="lw kb in nf b gy no np l nq nr">declare global {<br/>    namespace NodeJS {<br/>        interface Global {<br/>            myVariable: boolean,<br/>            myClass1: Object,<br/>            myClass2: any,<br/>            myObject3: { Name: string, Username: string },<br/>            myObject3Array: { Name: string, Username: string }[],<br/>        }<br/>    }<br/>}</span></pre><p id="8e75" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æ— è®ºå“ªç§æ–¹å¼ï¼Œè¯·ä½¿ç”¨æœ€é€‚åˆæ‚¨çš„æ–¹å¼ã€‚</p><h2 id="d0fb" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">è¡¨è¾¾</h2><p id="d98e" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å°†ç±»å‹Expressç±»å‹æ·»åŠ ä¸º(ä¸è¦å¿˜è®°å¯¼å…¥Express):</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="cd67" class="lw kb in nf b gy no np l nq nr">import Express from "express";</span><span id="5204" class="lw kb in nf b gy ns np l nq nr">app.get(`/ping`, (req: <strong class="nf io">Express.Request</strong>, res: <strong class="nf io">Express.Response</strong>) =&gt; {<br/>   return res.json({ result: "pong"});<br/>});</span></pre><p id="0504" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨å¸Œæœ›åœ¨<code class="fe nc nd ne nf b">Express.Request</code>ä¸Šæœ‰é¢å¤–çš„å±æ€§ï¼Œæ‚¨å¯èƒ½ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="1579" class="lw kb in nf b gy no np l nq nr">error TS2339: Property â€˜Userâ€™ does not exist on type â€˜Request&lt;ParamsDictionary&gt;â€™.</span></pre><p id="e9f8" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è§£å†³æ–¹æ¡ˆæ˜¯ä¿®æ”¹å…¨å±€åç§°ç©ºé—´(å‚è§ä¸Šé¢çš„å¦ä¸€ä¸ªä¾‹å­)ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="0c29" class="lw kb in nf b gy no np l nq nr">declare global {<br/>  namespace Express {<br/>    interface Request {<br/>      User: { Name: string }<br/>    }<br/>  }<br/>}</span></pre><h1 id="c57a" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">å°è¯•æŒ‰åŸæ ·è¿è¡Œé¡¹ç›®</h1><p id="835b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœæ‚¨æˆåŠŸè¿è¡Œtscï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œé‚£ä¹ˆé¡¹ç›®<em class="nb">å¯èƒ½</em>ä¼šåœ¨æ­¤æ—¶è¿è¡Œã€‚åŒæ ·ï¼Œ<em class="nb">ç¼–è¯‘</em>ä»£ç å’Œ<em class="nb">è¿è¡Œ</em>ä»£ç æ˜¯ä¸¤å›äº‹ã€‚</p><h2 id="005e" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ä»å‘½ä»¤è¡Œ</h2><p id="342b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">æˆ‘ä»¬å°†é¿å…ä½¿ç”¨æ„å»ºæ­¥éª¤â€œç¼–è¯‘â€(read:trans pilling)åˆ°/out/ destinationç›®å½•ï¼Œæœ€å¥½è®¾ç½®æ‰€æœ‰å·¥å…·æŒ‰åŸæ ·è¿è¡Œtypescriptã€‚</p><p id="78bf" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¿è¡Œä»£ç è€Œä¸ä¼ è¾“å¾ˆå®¹æ˜“ï¼Œåªéœ€åœ¨startå‘½ä»¤ä¸­åŒ…å«ts-node:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="6e55" class="lw kb in nf b gy no np l nq nr"># Faster startup<br/>node.exe <strong class="nf io">-r ts-node/register/transpile-only</strong> ./src/index.js</span><span id="dd76" class="lw kb in nf b gy ns np l nq nr"># Or use:<br/>node.exe <strong class="nf io">-r ts-node/register</strong> ./src/index.js</span><span id="ac91" class="lw kb in nf b gy ns np l nq nr"># Read more at: <a class="ae jz" href="https://github.com/TypeStrong/ts-node" rel="noopener ugc nofollow" target="_blank">https://github.com/TypeStrong/ts-node</a></span></pre><p id="cb08" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æ²¡æœ‰æˆåŠŸï¼Ÿæƒ³è¦ä¸€ä¸ªå·¥ä½œé¡¹ç›®ï¼Ÿåœ¨githubä¸ŠæŸ¥çœ‹<a class="ae jz" href="https://github.com/tomnil/emptyts" rel="noopener ugc nofollow" target="_blank"> emptyts </a>é¡¹ç›®ã€‚</p><h2 id="3464" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç›´æ¥ä»vscodeè°ƒè¯•</h2><p id="d12e" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰é…ç½®vscodeã€‚æ‚¨éœ€è¦è¿›è¡Œé¢å¤–çš„æ›´æ”¹æ‰èƒ½ä½¿å…¶å·¥ä½œã€‚æ‰“å¼€â€œlaunch.jsonâ€å¹¶ä½¿ç”¨ä»¥ä¸‹å†…å®¹ã€‚ä¿®æ”¹å‚æ•°ä»¥åŒ¹é…å¯åŠ¨æ–‡ä»¶çš„åç§°ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="ccfb" class="lw kb in nf b gy no np l nq nr">{<br/> // Detailed docs:<br/> // <a class="ae jz" href="https://code.visualstudio.com/docs/nodejs/nodejs-debugging" rel="noopener ugc nofollow" target="_blank">https://code.visualstudio.com/docs/nodejs/nodejs-debugging</a><br/> "version": "0.2.0",<br/> "configurations": [<br/><strong class="nf io">  {<br/>   "name": "Debug typescript",<br/>   "type": "node",<br/>   "request": "launch",<br/>   "smartStep": false,<br/>   "sourceMaps": true,<br/>   "args": [<br/>    "${workspaceRoot}/src/index.ts"<br/>   ],<br/>   "runtimeArgs": [<br/>    "-r",<br/>    "ts-node/register/transpile-only"<br/>   ],<br/>   "cwd": "${workspaceRoot}",<br/>   "protocol": "inspector",<br/>   "internalConsoleOptions": "openOnSessionStart",<br/>   "env": {<br/>    "TS_NODE_FILES": "true" // Respect include/exclude in tsconfig.json =&gt; will read declaration files  (ts-node --files src\index.ts)<br/>   },<br/>   "skipFiles": [<br/>    "&lt;node_internals&gt;/*",<br/>    "&lt;node_internals&gt;/**",<br/>    "&lt;node_internals&gt;/**/*",<br/>    "${workspaceRoot}/node_modules/**",<br/>    "${workspaceRoot}/node_modules/**/*"<br/>   ],<br/>   "outputCapture": "std",<br/>   "stopOnEntry": false<br/>  }</strong><br/> ]<br/>}</span></pre><p id="3a7e" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æŒ‰â€œctrl-shift-pâ€è°ƒå‡ºå‘½ä»¤é¢æ¿ã€‚æœç´¢å¹¶é€‰æ‹©â€œè°ƒè¯•:é€‰æ‹©å¹¶å¼€å§‹è°ƒè¯•â€ã€‚åœ¨å‡ºç°çš„èœå•ä¸­ï¼Œé€‰æ‹©â€œè°ƒè¯•ç±»å‹è„šæœ¬â€(å¦‚ä¸Šæ‰€è¿°)ã€‚</p><p id="7229" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æç¤º:æ–­ç‚¹æ˜¯é€šè¿‡åœ¨ä¸€è¡Œä¸ŠæŒ‰F9æ¥åˆ‡æ¢çš„ã€‚</p><h2 id="dbe8" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">Nodemonï¼Ÿts-nodeï¼Ÿ</h2><p id="77af" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœæ‚¨æƒ³è¿è¡Œnodemonï¼Œè¯·æŸ¥çœ‹<a class="ae jz" href="https://github.com/tomnil/emptyts" rel="noopener ugc nofollow" target="_blank"> emptyts </a>é¡¹ç›®ï¼Œé‚£é‡Œæœ‰ç›¸å…³æ–‡æ¡£ã€‚</p><h1 id="809d" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">å°†requireæ›´æ”¹ä¸ºimportï¼Œå°†module.exportsæ›´æ”¹ä¸ºexport</h1><p id="6114" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ç¡®åˆ‡åœ°è¯´ï¼Œå¦‚ä½•ç¼–å†™å¯¼å…¥å’Œå¯¼å‡ºè¯­å¥è¶…å‡ºäº†æœ¬æŒ‡å—çš„èŒƒå›´ï¼Œä½†æ˜¯å€¼å¾—ä¸€æã€‚æ­¤å¤–ï¼Œè¿™å¯èƒ½ä¸é€‚ç”¨äºæ‚¨çš„é¡¹ç›®ã€‚</p><p id="b7f5" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¯·ç†è§£:ä»…ä»…è§£å†³éœ€æ±‚æ˜¯ä¸å¤Ÿçš„ï¼Œ<em class="nb">éœ€æ±‚å’Œå¯¼å‡ºéƒ½éœ€è¦å®Œæˆã€‚</em></p><h2 id="7cb7" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å°†â€œè¦æ±‚â€æ›¿æ¢ä¸ºâ€œè¿›å£â€ã€‚</h2><p id="b899" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ç¤ºä¾‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="01f0" class="lw kb in nf b gy no np l nq nr">const stack = require('callsite');<br/>const winston = require('winston');<br/>const path = require("path");<br/>require('winston-daily-rotate-file')</span></pre><p id="3a43" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä¼šå˜æˆ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="401c" class="lw kb in nf b gy no np l nq nr">import stack from 'callsite';<br/>import winston from 'winston';<br/>import * as path from 'path';<br/>import 'winston-daily-rotate-file';</span></pre><p id="d6cd" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">æœç´¢å¹¶æ›¿æ¢</strong></p><p id="cb3b" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä¸å¯èƒ½æˆåŠŸåœ°è¿›è¡Œæœç´¢å’Œæ›¿æ¢ï¼Œå› ä¸ºå¯¼å…¥çš„å·¥ä½œæ–¹å¼ç•¥æœ‰ä¸åŒã€‚ä»ä¿®å¤ä¸€äº›å¸¸è§çš„éœ€æ±‚å¼€å§‹ï¼Œæ¯”å¦‚<code class="fe nc nd ne nf b">fs</code>å’Œ<code class="fe nc nd ne nf b">path</code>ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="4965" class="lw kb in nf b gy no np l nq nr">Search: const fs = require("fs");<br/>Replace: import * as fs from 'fs';</span><span id="f292" class="lw kb in nf b gy ns np l nq nr">Search: const path = require("path");<br/>Replace: import * as path from 'path';</span></pre><p id="ec28" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å› ä¸ºrequireåœ¨å¹•åæ–½å±•äº†ä¸€äº›é­”æ³•ï¼Œè€Œimportæ²¡æœ‰:ä¸å¯èƒ½ä»requireåˆ°importç›´æ¥è¿›è¡Œæœç´¢/æ›¿æ¢ã€‚æ ¹æ®æ¨¡å—çš„ä½¿ç”¨æ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»»ä½•ä¸€ç§:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="d732" class="lw kb in nf b gy no np l nq nr">// Entire module<br/>import * as xyz from 'xyz';<br/>import xyz from 'xyz';</span><span id="c3ea" class="lw kb in nf b gy ns np l nq nr">// Specific object<br/>import { User } from 'xyz';</span><span id="b5e6" class="lw kb in nf b gy ns np l nq nr">// Both<br/>import xyz, { User} from 'xyz';</span></pre><p id="614e" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç°åœ¨ï¼Œè¿™å¾ˆå¯èƒ½ä¼šå¤±è´¥ï¼Œä½†è‡³å°‘å¯ä»¥é¿å…ä¸€äº›æ‰‹åŠ¨ç¼–å†™ã€‚æŒ‰â€œctrl-shift-h â€,å¹¶ç¡®ä¿å‹¾é€‰â€œregexâ€:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="aaf4" class="lw kb in nf b gy no np l nq nr">Search: ^\w+\s+(\w+)\s+=\s+require\((["'].*["'])\);{0,2}$<br/>Replace: import * as $1 from $2;</span></pre><p id="4fee" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æ£€æŸ¥tscçš„è¾“å‡ºå¹¶å°è¯•ä¿®å¤ä¸€äº›æ˜æ˜¾çš„é—®é¢˜ï¼Œä½†è¯·æ³¨æ„<strong class="la io">åœ¨ä¿®å¤å¯¼å‡ºä¹‹å‰ä¸å¯èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ã€‚æ‰€ä»¥ç»§ç»­è¯»ä¸‹å»å§â€¦</strong></p><h2 id="c8fb" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å°†â€œmodule.exportsâ€æ›¿æ¢ä¸ºâ€œexportâ€</h2><p id="3573" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ç¤ºä¾‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="c20c" class="lw kb in nf b gy no np l nq nr">module.exports.Function1 = Function1;<br/>module.exports.Function2 = Function2;<br/>module.exports.Function3 = Function3;</span><span id="8da9" class="lw kb in nf b gy ns np l nq nr">// or:<br/>module.exports = { Function1, Function2, Function3}</span></pre><p id="3523" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å˜æˆäº†:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="7974" class="lw kb in nf b gy no np l nq nr">export { Function1, Function2, Function3 }</span><span id="8c19" class="lw kb in nf b gy ns np l nq nr"># Or use export before the function keyword:</span><span id="837a" class="lw kb in nf b gy ns np l nq nr">export function CreateOrder() {<br/>    // Do work<br/>}</span><span id="7292" class="lw kb in nf b gy ns np l nq nr"># If you want a default export, use: </span><span id="2658" class="lw kb in nf b gy ns np l nq nr">export default { Function1, Function2, Function3 }</span></pre><h2 id="478e" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ä¿®å¤â€œmodule.exportsâ€</h2><p id="4f67" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å—¯ï¼Œè¿™å¾ˆéš¾ã€‚æ²¡æœ‰ç®€å•çš„æ–¹æ³•æ¥è¿›è¡Œæœç´¢å’Œæ›¿æ¢ã€‚éœ€è¦å¤§é‡çš„æ‰‹å·¥ä¿®å¤ã€‚è¯•è¯•è¿™ä¸ª:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="96da" class="lw kb in nf b gy no np l nq nr">Search: (module\.exports\s=\s)(.*)$<br/>Replace: export default $2</span></pre><p id="3804" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç°åœ¨ä¿®å¤tscæŠ¥å‘Šçš„é—®é¢˜ã€‚</p><h2 id="c634" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">package.jsonå¯èƒ½é¢ä¸´çš„æŒ‘æˆ˜</h2><p id="0280" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœå°†<code class="fe nc nd ne nf b">type</code>è®¾ç½®ä¸º<code class="fe nc nd ne nf b">module</code>ï¼Œå¯èƒ½ä¼šè®©äº‹æƒ…å˜å¾—æ›´ç³Ÿã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a57d" class="lw kb in nf b gy no np l nq nr">{<br/>	"name": "my project1",<br/>	"version": "1.0.0",<br/>	"private": true,<br/>	"type": "module",<br/>	 ...<br/>}</span></pre><p id="2ded" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æ²¡æœ‰æˆåŠŸï¼Ÿæƒ³è¦ä¸€ä¸ªå·¥ä½œé¡¹ç›®ï¼Ÿåœ¨Githubä¸ŠæŸ¥çœ‹<a class="ae jz" href="https://github.com/tomnil/emptyts" rel="noopener ugc nofollow" target="_blank"> emptyts </a>é¡¹ç›®ã€‚</p><h1 id="00f6" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">é‡å‘½åæ‰€æœ‰æ–‡ä»¶ã€‚jsåˆ°ã€‚åˆ†æ—¶ï¼ˆåŒtimesharingï¼‰</h1><p id="b6c8" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è¿™å°±æ˜¯æœ‰è¶£çš„åœ°æ–¹ã€‚é‡å‘½åæ–‡ä»¶å°†ç¦ç”¨ä¸€äº›åŠŸèƒ½ï¼Œå¹¶å¯ç”¨è®¸å¤šå…¶ä»–åŠŸèƒ½ã€‚</p><p id="7733" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">é‡å‘½åä¸­çš„æ‰€æœ‰æºæ–‡ä»¶ã€‚jsåˆ°ã€‚tsï¼Œä½¿ç”¨æ‚¨é€‰æ‹©çš„å·¥å…·ã€‚è¿˜è¦æŠŠlaunch.json(ä»¥åŠå…¶ä»–åœ°æ–¹)ä»<code class="fe nc nd ne nf b">index.js</code>å¼€å§‹æ”¹æˆ<code class="fe nc nd ne nf b">index.ts</code></p><p id="debb" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">é‡è¦æç¤º</strong>:é‡å‘½ååé‡å¯VSCodeã€‚</p><p id="b5ba" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">é‡å‘½ååï¼ŒTypeScriptçš„æ¯ä¸ªæ£€æŸ¥éƒ½å°†è¢«æ¿€æ´»ã€‚å¤§æ¦‚VSCodeå’Œ<code class="fe nc nd ne nf b">tsc</code>éƒ½ä¼šæŠ¥å‘Šæ–°çš„é”™è¯¯ã€‚å…¶ä¸­ä¸€äº›é—®é¢˜å¾ˆå®¹æ˜“è§£å†³ï¼Œè€Œå…¶ä»–é—®é¢˜ç”šè‡³å¯èƒ½éœ€è¦é‡æ–°è®¾è®¡ä»£ç ã€‚å°½ç®¡å¦‚æ­¤ï¼Œæ‚¨ä»ç„¶å¯ä»¥è®©TypeScripté€€å›åˆ°æ—§çš„javascriptç‰¹æ€§â€”â€”è¿™åœ¨è®¸å¤šæƒ…å†µä¸‹å¯èƒ½æ˜¯å¯ä»¥çš„(åªéœ€ä½¿ç”¨<code class="fe nc nd ne nf b">// @ts-ignore</code>)ã€‚å°†ä¸€ä¸ªé¡¹ç›®å˜æˆ100%çš„TypeScriptä¸æ˜¯ä¸€è¹´è€Œå°±çš„ã€‚:)</p><h2 id="9d8a" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">åˆ é™¤å¯¼å…¥è¯­å¥çš„æ–‡ä»¶æ‰©å±•å</h2><p id="aad8" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœæ‚¨å¼•ç”¨äº†åŒ…å«æ‰©å±•åçš„å®Œæ•´è·¯å¾„çš„æ–‡ä»¶ï¼Œæ‚¨å¯èƒ½ä¼šåœ¨è¿è¡Œä»£ç çš„<em class="nb">ä¸Šå¤±è´¥ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨tscä¼ è¾“æ–‡ä»¶æ—¶<em class="nb">ä¸ä¼šå¤±è´¥ã€‚</em></em></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="461c" class="lw kb in nf b gy no np l nq nr"># Bad<br/>import MeasureTime from "./include/measuretime.js";</span><span id="1596" class="lw kb in nf b gy ns np l nq nr"># Good<br/>import MeasureTime from "./include/measuretime";</span></pre><p id="2ea6" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æœç´¢/æ›¿æ¢ä¸º:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="fbed" class="lw kb in nf b gy no np l nq nr">Search:   (import.*)['|"](.*).js['|"]<br/>Replace:     $1 '$2'</span></pre><h2 id="07b7" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ä»ä¼ è¾“æ–‡ä»¶ä¸­æ’é™¤æ–‡ä»¶å¤¹</h2><p id="13b4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœæ‚¨æœ‰ä¸â€œsrcâ€ç›¸åŒçº§åˆ«çš„æ–‡ä»¶å¤¹ï¼Œå¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="6b5e" class="lw kb in nf b gy no np l nq nr">TS6059: File â€˜abcâ€™ is not under â€˜rootDirâ€™</span></pre><p id="4bd3" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">é€šè¿‡æ’é™¤â€œtsconfig.jsonâ€ä¸­çš„æ–‡ä»¶å¤¹æ¥æ’é™¤æ–‡ä»¶å¤¹ï¼Œä½†ç¡®ä¿è®¾ç½®äº†<code class="fe nc nd ne nf b">TS_NODE_FILES</code>(å¦‚æœä¸ºçœŸï¼Œå°†ä½¿ç”¨åŒ…å«/æ’é™¤)</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="c21a" class="lw kb in nf b gy no np l nq nr">"include": [<br/>	"src/**/*.js",<br/>	"src/**/*.ts"<br/>],<br/>"exclude": [<br/>	"test",<br/>	"bin",<br/>	"out",<br/>	"additionalFolderToSkip"<br/>]</span></pre><h1 id="3d29" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">æ¨æ–­ç±»å‹(ä¹Ÿç§°ä¸ºè‡ªåŠ¨æ–‡æ¡£)</h1><p id="8895" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated"><strong class="la io">è¿™éƒ¨åˆ†æ–‡æ¡£åŒ…å«äº†æœ€å¥½çš„æç¤º:)</strong>è€ƒè™‘ä¸‹é¢çš„ä»£ç ã€‚æˆ‘ä»¬å¾ˆå®¹æ˜“ç†è§£FindUseræ¥å—ä¸€ä¸ªå‚æ•°userIDï¼Œé€šè¿‡æŸ¥çœ‹ä»£ç ï¼Œæ‚¨å’ŒTypeScriptéƒ½çŸ¥é“å®ƒæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="1b55" class="lw kb in nf b gy no np l nq nr">const user = FindUser("John");<br/>if (user)<br/>    console.log(`User found. Name=${user.Name}`);</span><span id="a233" class="lw kb in nf b gy ns np l nq nr">function FindUser(userID) {     // No type on param or return</span><span id="3ab8" class="lw kb in nf b gy ns np l nq nr">    if (userID === "John")<br/>       return { Name: "John", Age: 99 };<br/>    else<br/>        return undefined;<br/>}</span></pre><p id="e4a5" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">..ä½†å¦‚æœæ˜¯è¿™æ ·ä¼šæ›´å¥½:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="6b3d" class="lw kb in nf b gy no np l nq nr">function FindUser(userID<strong class="nf io">: string</strong>)<strong class="nf io"> : { Name: string, Age: number } | undefined</strong> {     // We're clear on expectations!</span><span id="d65c" class="lw kb in nf b gy ns np l nq nr">    ... code follows</span><span id="3ff1" class="lw kb in nf b gy ns np l nq nr">}</span></pre><p id="6311" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¦ä¹ˆæ‰‹å†™ï¼Œ<strong class="la io">è¦ä¹ˆä½¿ç”¨ä»¥ä¸‹æŠ€å·§</strong>:</p><p id="7efe" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¦æ¨æ–­å‚æ•°ï¼Œç‚¹å‡»<strong class="la io">ä¸€ä¸ªå‚æ•°</strong>å¹¶å…è®¸é»„è‰²å»ºè®®å‡ºç°â€œä»ç”¨æ³•æ¨æ–­å‚æ•°â€ã€‚è¿™å°†æ£€æŸ¥ä»£ç ï¼Œç¡®å®šå‚æ•°çš„ç±»å‹ã€‚æœ‰æ—¶ç»“æœä¸æ­£ç¡®ï¼Œæ‰€ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æœ‰æ„ä¹‰ã€‚</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/139488bab93393dd9d63a577c16e5ccf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*luVeLx9NueZXwB0odlesUg.gif"/></div></div></figure><p id="dcd5" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç°åœ¨è¿”å›å‚æ•°<em class="nb">ä¹Ÿå¯ä»¥</em>è¢«æ¨æ–­å‡ºæ¥ã€‚è®¾ç½®å…‰æ ‡å…‰æ ‡éœ€è¦åœ¨<strong class="la io">å‡½æ•°åç§°</strong>å¤„ï¼Œå¹¶æŒ‰ctrl + shift + rã€‚å¯é€‰åœ°ä½¿ç”¨å‘½ä»¤è°ƒè‰²æ¿å¹¶æœç´¢â€œé‡æ„â€¦â€ã€‚</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/db5a54b65155d7d9bbae6e102b5c0e9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*spATDXT5mCkBBIU0BLAVVg.gif"/></div></div></figure><p id="4147" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æœ€åä¸€ä¸ªæŠ€å·§æ˜¯å¯¹è¿”å›å‚æ•°ä½¿ç”¨è¿™ç§æ ·å¼ã€‚è¿™ç§æ„é€ ä»£ç çš„æ–¹å¼ç¡®ä¿äº†è¯¥ç±»å‹åªç¼–å†™ä¸€æ¬¡ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="cc34" class="lw kb in nf b gy no np l nq nr">function FindUser(userID: string): typeof result {</span><span id="e4ed" class="lw kb in nf b gy ns np l nq nr">  let result: { Name: string, Age: number } | undefined = undefined;</span><span id="a1ae" class="lw kb in nf b gy ns np l nq nr">  if (userID === "John")<br/>    result = { Name: "John", Age: 99 };</span><span id="028e" class="lw kb in nf b gy ns np l nq nr">  return result;</span><span id="4068" class="lw kb in nf b gy ns np l nq nr">}</span></pre><p id="4783" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">æˆ–è€…ä½¿ç”¨è¿™ç§é£æ ¼ï¼Œä½†æ˜¯è¿”å›æ‰¿è¯ºçš„æ–¹æ³•å°†å…·æœ‰æŒ‘æˆ˜æ€§:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="85ad" class="lw kb in nf b gy no np l nq nr">function FindUser(userID: string): { Name: string, Age: number } | undefined {</span><span id="1dc2" class="lw kb in nf b gy ns np l nq nr">    let result: ReturnType&lt;typeof FindUser&gt; = undefined;</span><span id="7740" class="lw kb in nf b gy ns np l nq nr">    if (userID === "John")<br/>        result = { Name: "John", Age: 99 };</span><span id="088d" class="lw kb in nf b gy ns np l nq nr">    return result;</span><span id="444d" class="lw kb in nf b gy ns np l nq nr">}</span></pre><h1 id="3725" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">è§£å†³ä¸­çš„é”™è¯¯ã€‚tsæ–‡ä»¶</h1><h2 id="1a82" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å¯¹è±¡å¯èƒ½â€œæœªå®šä¹‰â€</h2><p id="6de2" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ç”±äº<code class="fe nc nd ne nf b">tsconfig.json</code>æŒ‡å®šäº†<code class="fe nc nd ne nf b">strickNullChecks: true</code>ï¼Œé‚£ä¹ˆTypeScriptå°†ä¸ºæ‰€æœ‰æ²¡æœ‰ç‰¹åˆ«æ£€æŸ¥æœªå®šä¹‰çš„ä»£ç ç»™å‡ºé”™è¯¯ã€‚è¿™ä¼šå¯¼è‡´ä»¥ä¸‹é”™è¯¯:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="d350" class="lw kb in nf b gy no np l nq nr">TS2532: Object is possibly 'undefined'.</span></pre><p id="28cf" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä¾‹å¦‚:å¯èƒ½æ‰¾ä¸åˆ°æ‰€å¯»æ‰¾çš„ç”¨æˆ·ã€‚SendResetPasswordLink()å°†å› æ­¤å¤±è´¥ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="5776" class="lw kb in nf b gy no np l nq nr"># Bad code<br/>let user = userlist.find("admin");<br/>user.SendResetPasswordLink();  // No check if user is undefined</span><span id="d43c" class="lw kb in nf b gy ns np l nq nr"># Correct code:<br/>let user = userlist.find("admin");<br/>if (user)<br/>   user.SendResetPasswordLink();</span></pre><h2 id="a716" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å‡½æ•°å‚æ•°</h2><p id="8be4" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">æ‰€æœ‰å‚æ•°éƒ½å¿…é¡»ä½¿ç”¨æˆ–æŒ‡å®šä¸ºå¯é€‰ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="d869" class="lw kb in nf b gy no np l nq nr">TS2554: Expected 2 arguments, but got 1.</span></pre><p id="eb42" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ç¤ºä¾‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="cdb3" class="lw kb in nf b gy no np l nq nr">let user = FindUser("admin");<br/>function FindUser(userName: string, region: string) {<br/>    // ... implementation here<br/>}</span></pre><p id="c519" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è§£å†³æ–¹æ¡ˆæ˜¯ç”¨ä¸¤ä¸ªå‚æ•°è°ƒç”¨ï¼Œä½¿åŒºåŸŸå¯é€‰æˆ–æœ‰ä¸€ä¸ªé»˜è®¤å€¼:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="62be" class="lw kb in nf b gy no np l nq nr">function FindUser(userName: string, region?: string) {<br/>    // ... region can now be a string | undefined.<br/>}</span><span id="c988" class="lw kb in nf b gy ns np l nq nr">function FindUser(userName: string, region= "Europe") {<br/>    // ... region can now be a string <br/>}</span></pre><h2 id="0e31" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">å¼‚æ­¥å‡½æ•°å’Œå…³é”®å­—Promise</h2><p id="10f1" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœä½ å†™ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå‡½æ•°çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªæ‰¿è¯ºã€‚è€ƒè™‘è¿™ä¸ªå‡½æ•°:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="0e14" class="lw kb in nf b gy no np l nq nr">function UserExists(userID: string): boolean {<br/>    return (userID === "John");<br/>}</span></pre><p id="3880" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœéœ€è¦å¼‚æ­¥ï¼Œé‚£ä¹ˆè¿”å›å‚æ•°å°†ä»<code class="fe nc nd ne nf b">boolean</code>å˜ä¸º<code class="fe nc nd ne nf b">Promise&lt;boolean&gt;</code>ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="73ea" class="lw kb in nf b gy no np l nq nr"><strong class="nf io">async </strong>function UserExists(userID: string): <strong class="nf io">Promise&lt;boolean&gt;</strong> {<br/>    // Additional code here requiring it to be async.. :)<br/>    return (userID === "John");<br/>}</span></pre><h2 id="5842" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç°åœ¨å¾ˆå¤šå¯¹è±¡ä¸éƒ½æ˜¯â€œä»»ä½•â€å—ï¼Ÿ</h2><p id="37c9" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å—¯ï¼Œæ˜¯çš„ã€‚<code class="fe nc nd ne nf b">let a;</code>åŸºæœ¬ç­‰äº<code class="fe nc nd ne nf b">let a : any;</code></p><p id="6087" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¿™æ„å‘³ç€æ‚¨å¯ä»¥å¯¹è¯¥å¯¹è±¡åšä»»ä½•æ‚¨æƒ³åšçš„äº‹æƒ…(å°±åƒåœ¨JavaScriptä¸­ä¸€æ ·)ï¼Œä½†è¿™å¹¶ä¸æ˜¯æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„ç±»å‹è„šæœ¬ã€‚æˆ‘ä»¬å¸Œæœ›æ§åˆ¶å’Œ<em class="nb">çŸ¥é“æˆ‘ä»¬åœ¨åšä»€ä¹ˆã€‚</em></p><p id="6ae1" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœä½ æƒ³ç¦ç”¨<code class="fe nc nd ne nf b">any</code>ï¼Œé‚£ä¹ˆæ‰“å¼€<code class="fe nc nd ne nf b">tsconfig.json</code>ï¼Œå°†<code class="fe nc nd ne nf b">noImplicitAny</code>ä»<code class="fe nc nd ne nf b">false</code>æ”¹ä¸º<code class="fe nc nd ne nf b">true</code>ï¼Œäº«å—é”™è¯¯:)</p><h2 id="7778" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">åœ¨TypeScriptä¸­ä½¿ç”¨{}ã€‚</h2><p id="b8dd" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è¿™åœ¨JavaScriptä¸­å¯èƒ½è¡Œå¾—é€šï¼Œä½†åœ¨TypeScriptä¸­å´å¾ˆçƒ¦äººã€‚å˜é‡å°†è¢«å£°æ˜ä¸º<code class="fe nc nd ne nf b">{}</code>ï¼Œä»…æ­¤è€Œå·²ã€‚ç¤ºä¾‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="d508" class="lw kb in nf b gy no np l nq nr">let myBox = {};<br/>myBox.contents = "fruit";<br/># ^^^ Will render "<!-- -->TS2339: Property 'contents' does not exist on type '{}'."</span></pre><p id="032d" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœæ‚¨ç¡®å®æƒ³ä½¿ç”¨{}ï¼Œé‚£ä¹ˆæ‚¨è‡³å°‘å¯ä»¥é€šè¿‡ä¸‰ç§ä¸åŒçš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="4c83" class="lw kb in nf b gy no np l nq nr"># Set the type (Works since contents is optional)<br/>let myBox1: { contents?: string } = {};<br/>myBox1.contents = "fruit";</span><span id="c846" class="lw kb in nf b gy ns np l nq nr"># Better<br/>let myBox2: { contents: string };   // Variable is unused<br/>myBox2 = { contents: "fruit" };</span><span id="4658" class="lw kb in nf b gy ns np l nq nr"># Or in this case, best (the type for myBox3 is inferred automatically)<br/>let myBox3 = { contents: "fruit" };</span><span id="31b6" class="lw kb in nf b gy ns np l nq nr"># Basically turn of type checking (not recommended)<br/>let myBox4 : any = {};<br/>myBox4.contents = "fruit";</span></pre><h2 id="7386" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç±»å‹â€œxyzâ€ä¸å¯åˆ†é…ç»™ç±»å‹â€œneverâ€(ç¬¬1éƒ¨åˆ†)</h2><p id="eb93" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ä¸¾ä¸ªä¾‹å­ã€‚å¯¹å·²ç»åœ¨å¯¹è±¡ä¸­å®šä¹‰çš„æ•°ç»„è¿›è¡Œæ¨é€å°†ä¼šäº§ç”Ÿæ­¤é”™è¯¯ã€‚</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ny"><img src="../Images/4e8db99b52eb5b815ce8824c7e603667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*izbc_2VIPKSNhHEAP0hl-w.png"/></div></div></figure><p id="8fe6" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦ä¸€ä¸ªæ›´ç®€å•çš„ä¾‹å­:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="7ac9" class="lw kb in nf b gy no np l nq nr">let users = [];<br/>users.push("John");</span></pre><p id="3fe2" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å°†å¯¼è‡´:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="8aec" class="lw kb in nf b gy no np l nq nr">TS2345: Argument of type 'string' is not assignable to parameter of type 'never'.</span></pre><p id="859b" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è§£å†³æ–¹æ¡ˆæ˜¯æŒ‡å®šç±»å‹:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="1381" class="lw kb in nf b gy no np l nq nr">let users<strong class="nf io">: string[</strong>] = [];<br/>users.push("John");</span></pre><p id="65f5" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å¦‚æœåœ¨è¿›è¡Œä¿®å¤æ—¶ç±»å‹æœªçŸ¥ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a784" class="lw kb in nf b gy no np l nq nr">let users: any[] = [];</span><span id="65f1" class="lw kb in nf b gy ns np l nq nr">// or, if possible, use unknown. It's a stronger type</span><span id="a0d3" class="lw kb in nf b gy ns np l nq nr">let result : unknown[] = [];</span></pre><h2 id="18d9" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç±»å‹â€œxyzâ€ä¸å¯åˆ†é…ç»™ç±»å‹â€œneverâ€..(ç¬¬äºŒéƒ¨åˆ†)</h2><p id="4390" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¯¹äºå¸¦æœ‰æ•°ç»„çš„å¯¹è±¡ï¼Œè¿™ä¸ªé—®é¢˜è‡³å°‘æœ‰ä¸‰ç§ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="bf36" class="lw kb in nf b gy no np l nq nr">const payload = {<br/>    name: "Tomas",<br/>    accessrights: []       // Will become "never[]"<br/>};</span><span id="f9a9" class="lw kb in nf b gy ns np l nq nr">payload.accessrights.push("Admin"); </span><span id="01d3" class="lw kb in nf b gy ns np l nq nr">// Error: "Argument of type 'string' is not assignable to parameter of type 'never'."</span></pre><p id="2dde" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">è§£å†³æ–¹æ¡ˆ1 â€”å†…åµŒç±»å‹</strong></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="6242" class="lw kb in nf b gy no np l nq nr">const payload:<strong class="nf io"> {<br/>    name: string,<br/>    accessrights: string[]<br/>} </strong>= {<br/>    name: "Tomas",<br/>    accessrights: []<br/>};</span></pre><p id="5b28" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">è§£å†³æ–¹æ¡ˆ2â€”å®šä¹‰ç±»å‹(æˆ–æ¥å£)</strong></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="ed0b" class="lw kb in nf b gy no np l nq nr"><strong class="nf io">type ThePayload = { name: string, accessrights: string[] }<br/></strong>// interface IThePayload { name: string, accessrights: string[] }</span><span id="52cd" class="lw kb in nf b gy ns np l nq nr">const payload<strong class="nf io">: ThePayload</strong> = {<br/>    name: "Tomas",<br/>    accessrights: []<br/>};</span></pre><p id="faf1" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">è§£å†³æ–¹æ¡ˆ3â€”ç±»å‹æ¨ç†</strong></p><p id="2e2c" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">è¿™æ˜¯æœ€å¿«çš„å®ç°ï¼Œä½†æ˜¯å®ƒç»™å‡ºçš„ä»£ç å¯è¯»æ€§è¾ƒå·®:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="8078" class="lw kb in nf b gy no np l nq nr">const payload: ThePayload = {<br/>    name: "Tomas",<br/>    accessrights: <strong class="nf io">&lt;string[]&gt;</strong>[]<br/>};</span></pre><h2 id="c0e3" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">æ—¥æœŸå’Œæ¯«ç§’</h2><p id="b91b" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">æ‚¨ä¸èƒ½æ‰§è¡Œè¿™æ ·çš„æ“ä½œ:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="d5ad" class="lw kb in nf b gy no np l nq nr">let t1 = new Date();<br/>let t2 = new Date();<br/>console.log(t2 - t1);</span></pre><p id="198f" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">ä½¿ç”¨TypeScriptï¼Œæ‚¨éœ€è¦ç²¾ç¡®å’Œå…·ä½“:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="daec" class="lw kb in nf b gy no np l nq nr">let t1 = new Date().getTime();<br/>let t2 = new Date().getTime();<br/>console.log(t2 - t1);</span></pre><h2 id="2b77" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ç±»å‹ä¸åŒ/ TypeScriptå¾ˆæ™ºèƒ½</h2><p id="9c8c" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è€ƒè™‘ä¸‹é¢çš„ä»£ç ã€‚aæ˜¯å­—ç¬¦ä¸²ï¼Œbå¯ä»¥æ˜¯å­—ç¬¦ä¸²<em class="nb">æˆ–è€…</em>æœªå®šä¹‰ã€‚ç¬¬ä¸‰è¡Œçš„ä½œä¸šæ˜¯æ€ä¹ˆå‘ç”Ÿçš„ï¼Ÿ</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="5f2d" class="lw kb in nf b gy no np l nq nr">let a: string;<br/>const b: string | undefined = "Banana";<br/>a = b;</span></pre><p id="9f47" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å—¯ï¼Œæ‰“å­—ç¨¿å¾ˆèªæ˜ã€‚ä¸çŸ¥é“bæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚æ‚¬åœåœ¨bä¸Šç»™å‡º:</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/0240b8bf42af4a867f57f65febefd0e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/1*uKiV8YnMTppDPbu2E4l_fg.gif"/></div></figure><p id="f704" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">Ifè¯­å¥æ˜¯å½¢è±¡åŒ–è¿™ä¸€ç‚¹çš„æœ€ä½³æ–¹å¼ã€‚Fooæ˜¾ç„¶å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–æœªå®šä¹‰çš„ï¼Œä½†åœ¨ifè¯­å¥åå®ƒåªèƒ½æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²:</p><figure class="ng nh ni nj gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oa"><img src="../Images/3e75e646864cf36c2cf7b40ee541a1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*wUSSj7tbR3gWBGkQTAepwA.gif"/></div></div></figure><h1 id="101b" class="ka kb in bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">ç›®çš„åœ°ä»£ç åº”è¯¥æœ‰å¤šä¸¥æ ¼ï¼Ÿ</h1><p id="589c" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å—¯ï¼Œé‚£æ˜¯è§ä»è§æ™ºçš„é—®é¢˜ã€‚ä»¥ä¸‹è®¾ç½®æ§åˆ¶å¤§éƒ¨åˆ†ä¸¥æ ¼æ€§:</p><h2 id="a64d" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">tsconfig.json â€” strictNullChecks</h2><p id="d7d8" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">ä½¿ç”¨æ­¤è®¾ç½®ï¼Œæ‰€æœ‰ä»£ç éƒ½éœ€è¦æ­£ç¡®å¤„ç†æœªå®šä¹‰çš„ã€‚</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="1cef" class="lw kb in nf b gy no np l nq nr">function GetTemparature(): <strong class="nf io">number | undefined</strong> {<br/>    // A piece of code should return the temparature,<br/>    // but that occasionally returns undefined<br/>}</span><span id="f32f" class="lw kb in nf b gy ns np l nq nr">const temp = GetTemparature();<br/>if (temp &gt; 50)  <strong class="nf io">// Error, temp may be undefined</strong><br/>    console.log("It's hot.");</span></pre><h2 id="2c2e" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">ts config . JSON-useunknowincatchpavariables</h2><p id="9e1a" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å¦‚æœè¯¥è®¾ç½®å¼€å¯ï¼Œå¿…é¡»æ­£ç¡®å¤„ç†<code class="fe nc nd ne nf b">catch</code>ä¸­ä½¿ç”¨çš„å˜é‡:</p><p id="e657" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">é”™è¯¯ä»£ç :</strong></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="9903" class="lw kb in nf b gy no np l nq nr">try {<br/>   // Some bad code that generates an exception<br/>} catch (error) {<br/>   console.log(error.message);  // Fail!</span></pre><p id="21ea" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">å¥½ä»£ç :</strong></p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="645e" class="lw kb in nf b gy no np l nq nr">try {<br/>   // Some bad code that generates an exception<br/>} catch (error) {<br/><strong class="nf io">   if (error instanceof Error)<br/>       </strong>console.log(error.message);  // OK!<br/>}</span></pre><h2 id="c2eb" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">tsconfig.json â€” noImplicitAny</h2><p id="ceb0" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">è®¾ç½®ä¸ºtrueæ—¶ï¼Œä¸å…è®¸ä½¿ç”¨<code class="fe nc nd ne nf b">any</code>:</p><pre class="ng nh ni nj gt nk nf nl nm aw nn bi"><span id="a659" class="lw kb in nf b gy no np l nq nr">const user: <strong class="nf io">any </strong>= { name: "Tomas", Foo: "Bar" };</span></pre><h2 id="29dc" class="lw kb in bd kc lx ly dn kg lz ma dp kk lj mb mc ko ln md me ks lr mf mg kw mh bi translated">//@ ts-å¿½ç•¥</h2><p id="289d" class="pw-post-body-paragraph ky kz in la b lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv ig bi translated">å³ä½¿ä»¥ä¸Šæ‰€æœ‰è®¾ç½®éƒ½æ‰“å¼€äº†ï¼Œä»ç„¶å¯ä»¥å¿½ç•¥è¿™äº›é”™è¯¯ã€‚ä¸€ä¸ªå®Œå…¨è½¬æ¢çš„ä»£ç åº“åº”è¯¥äº‰å–æ²¡æœ‰åˆ°å¾ˆå°‘<code class="fe nc nd ne nf b">// @ts-ignore</code>ã€‚</p><p id="d57d" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated">å½“ç„¶ï¼Œè¿˜æœ‰æ›´å¤šè½¬æ¢çš„æŠ€å·§ï¼Œä½†æˆ‘å¸Œæœ›è¿™ä¸ªæŒ‡å—èƒ½ç»™ä½ ä¸€äº›æç¤ºã€‚</p><p id="3013" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><strong class="la io">äº«å—</strong>:)</p><p id="2460" class="pw-post-body-paragraph ky kz in la b lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv ig bi translated"><em class="nb">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="la io"><em class="nb">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
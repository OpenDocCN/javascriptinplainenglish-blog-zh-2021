<html>
<head>
<title>How to Instant Search Using Algolia in a React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React应用程序中使用Algolia进行即时搜索</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/searching-powered-by-algolia-in-react-905f86286188?source=collection_archive---------8-----------------------#2021-08-14">https://javascript.plainenglish.io/searching-powered-by-algolia-in-react-905f86286188?source=collection_archive---------8-----------------------#2021-08-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c37f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">React中由Algolia支持的搜索</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1c72b68841d83f7ce744512518eec826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QxgEf3oXwIuz4K3J6FWHYA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image Designed Using Canva</figcaption></figure><p id="98d0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">大家好，</p><p id="f74d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天，我们将学习一个搜索引擎工具— <strong class="kx ir"> Algolia </strong>。我在我的一些网络应用程序中使用过Algolia，我非常喜欢它。他们有一个免费的计划，所以你可以用它来做一些业余项目，只是为了好玩。正如他们所说，Algolia“<em class="lr">使开发者能够利用API构建下一代应用，在数毫秒内交付相关内容”。</em>是的，使用Algolia搜索时速度相当快。你可以在他们的网站上找到更多关于文档<a class="ae ls" href="https://www.algolia.com/doc/" rel="noopener ugc nofollow" target="_blank">的细节。</a></p><p id="ca43" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们开始吧！</p></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="a20d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在使用Algolia之前，你需要先注册。注册并登录后，您可以开始创建新的应用程序。我正在使用他们的免费计划，您也可以通过点击如下所示的<strong class="kx ir">免费计划</strong>选项卡来这样做:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ma"><img src="../Images/cbfcac4d7431f7ec5de12da4297d01ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eqzzTN8pLbWu22psEevZfw.png"/></div></div></figure><p id="f0db" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，按照他们关于后续步骤的所有说明来完成新应用程序的创建。进入当前应用仪表板后，点击<strong class="kx ir">索引</strong>菜单创建新的索引。在下面的框中命名您的索引:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/92ca95355f63f0a776f95beda4c91431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*QR3RhJtdiNZgasi0wd2A3Q.png"/></div></figure><p id="7352" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，它将显示在您可以在应用程序中实现UI之前需要完成的任务列表。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/a6937f174aa86615a434d449e9c8b3dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*OXxOukrvK599VGLsZv8l2A.png"/></div></figure><p id="64fd" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于上传记录，他们有3个选项，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi md"><img src="../Images/4e49d8cec7e64479985629ec91dfa1f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*0ihRgllfP5Gvsx5jgNJgYg.png"/></div></figure><p id="16d2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在本教程中，我上传了一个JSON文件，该文件是从RSS提要数据下载的，我在之前的教程“<a class="ae ls" rel="noopener ugc nofollow" target="_blank" href="/how-to-embed-medium-rss-feed-and-youtube-rss-feed-in-your-websites-d8c37f923d77">如何在您的网站</a>中嵌入媒体和YouTube RSS提要”中使用过。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi me"><img src="../Images/4bb9ea78daa791b1dcf8e8d3ffc9b73f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n6C1ldpE6O2hwNKVdceG0g.png"/></div></div></figure><p id="3e63" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你愿意，你也可以这样做。然后您可以编辑您的JSON记录，使其格式如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/f622dfb796823ba95e7f5924418dbe49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*klhlij-gqOSAUS2NwnE95g.png"/></div></figure><p id="fb43" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">点击<strong class="kx ir">编辑</strong>按钮后，可以开始编辑并保存。现在你有你的指数记录如下。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mg"><img src="../Images/95ae5da933a2ab6565dd7845805e30e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UdcQVQJEyWDU-fLa1OnRw.png"/></div></div></figure><p id="e9c6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，继续任务列表中的其他步骤，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/65684e89b4bcdad212b914d35bcc824f.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*gTDgpBBcDxG-aoJcmmr-HQ.png"/></div></figure><p id="4d85" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，点击<strong class="kx ir">配置</strong>按钮，开始添加一些重要特性的属性，如<strong class="kx ir">可搜索属性</strong>、<strong class="kx ir">刻面</strong>和<strong class="kx ir">高亮显示</strong>，如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/f53df7b37406b0872e3fe9931b91168d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndW1NoSXJmYKT48O-dnqrA.png"/></div></div></figure><p id="ff79" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">接下来，你可以像这样完成这个列表的最后一个任务:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mj"><img src="../Images/a0873d71775f4c34dc11399820048484.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wOgBP-NXJN5JZrQgp2v6rw.png"/></div></div></figure><p id="620d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们可以打开我们的编码编辑器(我在本教程中使用代码沙箱)并开始编码:</p><p id="ff92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，在react应用程序中安装依赖项“<em class="lr"> algoliasearch </em>和“<em class="lr">React-instant search-DOM</em>”。</p><p id="0b49" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在你的<strong class="kx ir"> App.js </strong>文件中，编码如下:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="1af4" class="mp mq iq ml b gy mr ms l mt mu">import "./styles.css";</span><span id="7171" class="mp mq iq ml b gy mv ms l mt mu">import logo from "./assets/algolia-logo.svg";</span><span id="c8bd" class="mp mq iq ml b gy mv ms l mt mu">import algoliasearch from "algoliasearch/lite";</span><span id="4daf" class="mp mq iq ml b gy mv ms l mt mu">import {</span><span id="a34f" class="mp mq iq ml b gy mv ms l mt mu">InstantSearch,</span><span id="e1be" class="mp mq iq ml b gy mv ms l mt mu">Hits,</span><span id="bf2b" class="mp mq iq ml b gy mv ms l mt mu">SearchBox,</span><span id="8117" class="mp mq iq ml b gy mv ms l mt mu">Highlight,</span><span id="7dbc" class="mp mq iq ml b gy mv ms l mt mu">ClearRefinements,</span><span id="357e" class="mp mq iq ml b gy mv ms l mt mu">RefinementList,</span><span id="beb7" class="mp mq iq ml b gy mv ms l mt mu">Configure</span><span id="7b2e" class="mp mq iq ml b gy mv ms l mt mu">} from "react-instantsearch-dom";</span><span id="39a8" class="mp mq iq ml b gy mv ms l mt mu">import PropTypes from "prop-types";</span><span id="e854" class="mp mq iq ml b gy mv ms l mt mu">import React from "react";</span><span id="8593" class="mp mq iq ml b gy mv ms l mt mu">import { parseDate } from "./util";</span><span id="124a" class="mp mq iq ml b gy mv ms l mt mu">const searchClient = algoliasearch(</span><span id="ae80" class="mp mq iq ml b gy mv ms l mt mu"><strong class="ml ir">"YOUR APPLICATION ID"</strong>,</span><span id="3d73" class="mp mq iq ml b gy mv ms l mt mu">"<strong class="ml ir">YOUR SEARCH-ONLY API KEY</strong>"</span><span id="f244" class="mp mq iq ml b gy mv ms l mt mu">);</span><span id="0c64" class="mp mq iq ml b gy mv ms l mt mu">const App = () =&gt; {</span><span id="15fa" class="mp mq iq ml b gy mv ms l mt mu">return (</span><span id="d8e6" class="mp mq iq ml b gy mv ms l mt mu">&lt;div&gt;</span><span id="6c4f" class="mp mq iq ml b gy mv ms l mt mu">&lt;h2&gt;React InstantSearch Demo&lt;/h2&gt;</span><span id="290d" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="container"&gt;</span><span id="a01a" class="mp mq iq ml b gy mv ms l mt mu">&lt;InstantSearch</span><span id="5c74" class="mp mq iq ml b gy mv ms l mt mu">indexName=<strong class="ml ir">"YOUR INDEX NAME"</strong></span><span id="b61e" class="mp mq iq ml b gy mv ms l mt mu">searchClient={searchClient}</span><span id="3780" class="mp mq iq ml b gy mv ms l mt mu">&gt;</span><span id="3179" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="left-panel"&gt;</span><span id="b077" class="mp mq iq ml b gy mv ms l mt mu">&lt;ClearRefinements /&gt;</span><span id="66d0" class="mp mq iq ml b gy mv ms l mt mu">&lt;h4&gt;Catagories&lt;/h4&gt;</span><span id="56d8" class="mp mq iq ml b gy mv ms l mt mu">&lt;RefinementList attribute="categories" showMore={true} /&gt;</span><span id="23d5" class="mp mq iq ml b gy mv ms l mt mu">&lt;Configure hitsPerPage={20} /&gt;</span><span id="65c4" class="mp mq iq ml b gy mv ms l mt mu">&lt;h4&gt;Published Date&lt;/h4&gt;</span><span id="8672" class="mp mq iq ml b gy mv ms l mt mu">&lt;RefinementList attribute="pubDate" showMore={true} /&gt;</span><span id="e2e9" class="mp mq iq ml b gy mv ms l mt mu">&lt;Configure hitsPerPage={20} /&gt;</span><span id="9b1b" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="5225" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="right-panel"&gt;</span><span id="827a" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="search-box"&gt;</span><span id="0698" class="mp mq iq ml b gy mv ms l mt mu">&lt;a</span><span id="9062" class="mp mq iq ml b gy mv ms l mt mu">href="https://www.algolia.com/"</span><span id="4be7" class="mp mq iq ml b gy mv ms l mt mu">target="_blank"</span><span id="a680" class="mp mq iq ml b gy mv ms l mt mu">aria-label="Search by Algolia"</span><span id="663b" class="mp mq iq ml b gy mv ms l mt mu">rel="noopener noreferrer"</span><span id="2a20" class="mp mq iq ml b gy mv ms l mt mu">&gt;</span><span id="509e" class="mp mq iq ml b gy mv ms l mt mu">&lt;img className="logo" alt="algolia logo" src={logo} /&gt;</span><span id="ebd4" class="mp mq iq ml b gy mv ms l mt mu">&lt;/a&gt;</span><span id="fca8" class="mp mq iq ml b gy mv ms l mt mu">&lt;SearchBox /&gt;</span><span id="4a48" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="5653" class="mp mq iq ml b gy mv ms l mt mu">&lt;Hits hitComponent={Hit} /&gt;</span><span id="2e19" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="9727" class="mp mq iq ml b gy mv ms l mt mu">&lt;/InstantSearch&gt;</span><span id="11a0" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="7503" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="004c" class="mp mq iq ml b gy mv ms l mt mu">);</span><span id="1b2d" class="mp mq iq ml b gy mv ms l mt mu">};</span><span id="acdc" class="mp mq iq ml b gy mv ms l mt mu">function Hit(props) {</span><span id="98d9" class="mp mq iq ml b gy mv ms l mt mu">return (</span><span id="6d75" class="mp mq iq ml b gy mv ms l mt mu">&lt;div&gt;</span><span id="b448" class="mp mq iq ml b gy mv ms l mt mu">&lt;img</span><span id="b26b" class="mp mq iq ml b gy mv ms l mt mu">className="thumbnail"</span><span id="184f" class="mp mq iq ml b gy mv ms l mt mu">src={props.hit.thumbnail}</span><span id="944d" class="mp mq iq ml b gy mv ms l mt mu">alt={props.hit.thumbnail}</span><span id="3853" class="mp mq iq ml b gy mv ms l mt mu">/&gt;</span><span id="9af9" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="title"&gt;</span><span id="542f" class="mp mq iq ml b gy mv ms l mt mu">&lt;Highlight attribute="title" hit={props.hit} /&gt;</span><span id="e597" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="6ff9" class="mp mq iq ml b gy mv ms l mt mu">&lt;div className="date"&gt;{parseDate(props.hit.pubDate)}&lt;/div&gt;</span><span id="ca27" class="mp mq iq ml b gy mv ms l mt mu">&lt;div&gt;</span><span id="a58a" class="mp mq iq ml b gy mv ms l mt mu">&lt;a</span><span id="6f75" class="mp mq iq ml b gy mv ms l mt mu">className="link"</span><span id="a373" class="mp mq iq ml b gy mv ms l mt mu">target="_blank"</span><span id="6d64" class="mp mq iq ml b gy mv ms l mt mu">rel="noreferrer"</span><span id="121c" class="mp mq iq ml b gy mv ms l mt mu">href={props.hit.link}</span><span id="209c" class="mp mq iq ml b gy mv ms l mt mu">&gt;</span><span id="8a84" class="mp mq iq ml b gy mv ms l mt mu">Read more here{" "}</span><span id="6903" class="mp mq iq ml b gy mv ms l mt mu">&lt;/a&gt;</span><span id="3cfb" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="d896" class="mp mq iq ml b gy mv ms l mt mu">&lt;/div&gt;</span><span id="4636" class="mp mq iq ml b gy mv ms l mt mu">);</span><span id="2e87" class="mp mq iq ml b gy mv ms l mt mu">}</span><span id="bebb" class="mp mq iq ml b gy mv ms l mt mu">Hit.propTypes = {</span><span id="8007" class="mp mq iq ml b gy mv ms l mt mu">hit: PropTypes.object.isRequired</span><span id="f557" class="mp mq iq ml b gy mv ms l mt mu">};</span><span id="d31e" class="mp mq iq ml b gy mv ms l mt mu">export default App;</span></pre><p id="8952" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">请注意，您的对象<strong class="kx ir"> searchClient </strong>有两个属性:您的<strong class="kx ir">应用程序ID </strong>和您的<strong class="kx ir">仅搜索API密钥</strong>，您可以通过单击如下所示的API密钥选项卡菜单获得(不显示您的管理API密钥):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/7015631f3aeb4858f2455b7b331aea6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*98ZzWm1Ov2dz2Qo9nRVV0A.png"/></div></figure><p id="3fd5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">并为<InstantSearch/>组件使用您的索引名:</p><pre class="kg kh ki kj gt mk ml mm mn aw mo bi"><span id="9db2" class="mp mq iq ml b gy mr ms l mt mu">&lt;InstantSearch</span><span id="f2e4" class="mp mq iq ml b gy mv ms l mt mu">indexName=<strong class="ml ir">"YOUR INDEX NAME"</strong></span><span id="4d75" class="mp mq iq ml b gy mv ms l mt mu">searchClient={searchClient}</span><span id="32a7" class="mp mq iq ml b gy mv ms l mt mu">&gt;</span></pre><p id="56ed" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，请注意函数<em class="lr"> Hit(props) </em>包含了<em class="lr"> &lt; Highlight/ &gt; </em>组件，用于在搜索查询与这些条目匹配时高亮显示命中的条目。确保您添加了正确的<em class="lr">属性</em>名称。此外，您可以向项目列表中添加尽可能多的可用属性。在这种情况下，我只需要显示文章的<em class="lr">缩略图</em>、<em class="lr">标题</em>、<em class="lr">发布日期</em>和<em class="lr">链接</em>，如下图<a class="ae ls" href="https://v2cl0.csb.app/" rel="noopener ugc nofollow" target="_blank">演示</a>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mx my l"/></div></figure></div><div class="ab cl lt lu hu lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ij ik il im in"><p id="e13a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">今天的教程到此为止。希望你觉得有用，如果你需要进一步的帮助，请不要犹豫，来找我。感谢您的阅读，祝您有美好的一天！</p><p id="e9d4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="lr">更多内容请看</em><a class="ae ls" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="lr">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
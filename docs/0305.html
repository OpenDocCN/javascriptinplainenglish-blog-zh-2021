<html>
<head>
<title>Build a News App with the NYTimes API &amp; React JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用纽约时报API和React JS构建一个新闻应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-news-app-with-the-nytimes-api-react-js-c3b4440ede7f?source=collection_archive---------2-----------------------#2021-01-18">https://javascript.plainenglish.io/build-a-news-app-with-the-nytimes-api-react-js-c3b4440ede7f?source=collection_archive---------2-----------------------#2021-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0c52" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用React挂钩和轴</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/482b8f87457257e390cd8e656e3031fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r5Qyxvr9mk8a_IC9"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@visuals?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">visuals</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6a11" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在用React构建新闻应用程序时，有几个新闻API可供选择，我决定看看纽约时报API，因为NYT是我最喜欢的新闻来源之一，也因为文档非常详细。</p><p id="86ef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我决定写这篇文章，因为我找不到太多关于这个特定API的实现的信息，希望这对其他开发人员有用。</p><p id="9239" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们将使用以下技术来构建这个应用程序，但本文将主要关注对纽约时报API的理解。</p><h1 id="97bf" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用的技术</h1><ul class=""><li id="735d" class="mh mi in kv b kw mj kz mk lc ml lg mm lk mn lo mo mp mq mr bi translated">用于构建用户界面的JavaScript库</li><li id="9175" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io"> Axios: </strong>基于承诺的HTTP客户端</li><li id="f4ce" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io"> Material-UI: </strong>使用Google的Material设计的React的UI框架</li></ul><h1 id="b432" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用纽约时报API</h1><p id="0634" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">首先，创建一个开发者帐户，这样您就可以为您的项目获得一个api密匙。</p><ul class=""><li id="1fda" class="mh mi in kv b kw kx kz la lc na lg nb lk nc lo mo mp mq mr bi translated">在https://developer.nytimes.com/<a class="ae ks" href="https://developer.nytimes.com/" rel="noopener ugc nofollow" target="_blank">创建你的开发者账户</a></li><li id="1102" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated">创建一个应用程序，在<a class="ae ks" href="https://developer.nytimes.com/my-apps" rel="noopener ugc nofollow" target="_blank">https://developer.nytimes.com/my-apps</a>获取api密钥</li></ul><p id="92d4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">开发者页面提供了12个API，包括存档、文章搜索、地理、热门故事、书籍和电影评论API。</p><p id="a7b6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本文中，我们将探索两个API:<strong class="kv io">文章搜索</strong>和<strong class="kv io">热门故事。</strong></p><h1 id="c9c3" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">创建React应用程序</h1><p id="c73f" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">我将这个项目命名为<em class="nd"> react-nytimes </em>，并使用create-react-app来搭建一个基本的react应用程序。有两种方法创建它1)npx-create-react-app react-nytimes或2)使用点。在命令的最后，在我们cd到的文件夹中创建应用程序。让我们也安装axios，这样我们就可以发出API请求。我们将使用VS代码作为我们的代码编辑器。</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="8277" class="nj lq in nf b gy nk nl l nm nn">// Mac terminal commands </span><span id="8ab8" class="nj lq in nf b gy no nl l nm nn">mkdir react-nytimes<br/>cd react-nytimes</span><span id="9425" class="nj lq in nf b gy no nl l nm nn">npx create-react-app .<br/>npm i react-router-dom<br/>npm i axios</span><span id="c89e" class="nj lq in nf b gy no nl l nm nn">npm i @material-ui/core<br/>npm i @material-ui/icons</span><span id="e941" class="nj lq in nf b gy no nl l nm nn">code .<br/>npm start</span></pre><h1 id="7e1e" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">关于API密钥的初始设置</h1><p id="7523" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">React是一个前端UI库，因此你应该总是将API键存储在后端服务器中，而不是React应用程序中。然而，为了这个项目的目的，我们将在前端存储我们的NYTimes API密钥，但请注意，该密钥将对检查您的项目文件的任何人公开。</p><p id="4f80" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在项目的根目录下创建一个. env文件，并在那里添加API键。以REACT_APP_为前缀命名环境变量非常重要。</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="2db5" class="nj lq in nf b gy nk nl l nm nn">// .env file </span><span id="c353" class="nj lq in nf b gy no nl l nm nn">REACT_APP_NYTIMES_API_KEY=typeapikeyfromdeveloper.nytimes.com/my-app</span></pre><p id="7160" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来添加。. gitignore中的env文件。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/6714565a55ca73b02dca240d837b3b44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BlUar333EV8se0qBoNGDtw.png"/></div></div></figure><h1 id="6b5a" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">使用文章搜索API </strong></h1><p id="1ced" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">对于这个新闻应用程序，我们将创建一个搜索栏，用户可以输入关键字，相关的纽约时报文章将呈现在屏幕上。</p><p id="f9ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">关于<a class="ae ks" href="https://developer.nytimes.com/docs/articlesearch-product/1/overview" rel="noopener ugc nofollow" target="_blank">文章搜索API </a>的文档中有一个我们可以参考的调用示例。我们可以注意到，在查询参数之后，我们可以输入任何我们想要的搜索查询，比如election或</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="c66e" class="nj lq in nf b gy nk nl l nm nn">https://api.nytimes.com/svc/search/v2/articlesearch.json?q=election&amp;api-key=yourkey</span></pre><p id="cfb4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您还可以使用<em class="nd">新闻服务台值</em>过滤您的查询，例如艺术、环境、食品，或者使用<em class="nd">部分名称值</em> <strong class="kv io"> </strong>进行查询，并根据其他过滤器进行排序，例如<em class="nd">最新的</em>。</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="12ad" class="nj lq in nf b gy nk nl l nm nn">https://api.nytimes.com/svc/search/v2/articlesearch.json?fq=section_name:("Arts")&amp;sort=newest&amp;api-key=yourkey</span></pre><h1 id="72bb" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用Axios获取API数据</h1><p id="e76a" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">我们之前安装了axios，这样我们就可以通过HTTP请求从纽约时报API获取数据。</p><p id="521e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有了axios，我们可以发出获取、发布、上传或删除等请求。在我们的例子中，我们将从服务器获得作为res.data的响应。</p><p id="7b45" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以使用React的useEffect钩子在App.js文件中进行API调用。首先，我们使用useState钩子定义我们的状态变量对<em class="nd"> loading </em>和<em class="nd"> articles </em>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="0337" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在第12行，我们将API请求的响应设置为<em class="nd"> res (response) </em>变量，在第13行<em class="nd">将Articles </em>设置为(<em class="nd"> res.data.response.docs </em>)。但是我们怎么才能弄清楚呢？</p><h2 id="b5b1" class="nj lq in bd lr ns nt dn lv nu nv dp lz lc nw nx mb lg ny nz md lk oa ob mf oc bi translated">Axios响应对象</h2><p id="ef4e" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">第一部分<strong class="kv io"><em class="nd">RES . data</em></strong><em class="nd"/>对应于Axios响应对象。每当我们通过Axios发送一个GET请求时，我们得到的是返回的数据对象→ data: {}</p><h2 id="cf9e" class="nj lq in bd lr ns nt dn lv nu nv dp lz lc nw nx mb lg ny nz md lk oa ob mf oc bi translated">NYT API响应对象</h2><p id="91df" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">第二部分<strong class="kv io"><em class="nd">response . docs</em></strong>对应于我们返回的Axios数据对象中的NYTimes API模式。</p><p id="d28f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每个API都是不同的，为了准确地知道在Axios <strong class="kv io"> "data" </strong>对象之后应该键入什么，我们需要仔细检查数据是如何在内部返回的。</p><p id="508f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">找出答案的一个方法是阅读NYT API文档和模式，在<strong class="kv io"> </strong>路径<strong class="kv io"> </strong>菜单<strong class="kv io">下的<a class="ae ks" href="https://developer.nytimes.com/docs/articlesearch-product/1/routes/articlesearch.json/get" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">GET/articlesearch . JSON</strong></a><strong class="kv io"/>。</strong>在这里可以看到，文章搜索API返回了一组文章:<strong class="kv io"> response.docs. </strong>并且每篇文章都包括web_url、snippet和multimedia等属性。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/686878ba6c11f9abf28217cd965a6c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obF4Ib47eA8iKrY6OtLLrQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">source: <a class="ae ks" href="https://developer.nytimes.com/docs/articlesearch-product/1/routes/articlesearch.json/get" rel="noopener ugc nofollow" target="_blank">https://developer.nytimes.com/docs/articlesearch-product/1/routes/articlesearch.json/get</a></figcaption></figure><p id="56f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">查看数据对象的另一种方法是将<em class="nd"> get url </em>粘贴到浏览器窗口上。</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="3b3a" class="nj lq in nf b gy nk nl l nm nn"><a class="ae ks" href="https://api.nytimes.com/svc/search/v2/articlesearch.json?fq=section_name:(%22Arts%22)&amp;sort=newest&amp;api-key=ANbWf0Gyc18XxiPWyYbnrP4htpQFammZ" rel="noopener ugc nofollow" target="_blank">https://api.nytimes.com/svc/search/v2/articlesearch.json?fq=section_name:("Arts")&amp;sort=newest&amp;api-key=y</a>ourapikey</span></pre><p id="fa7a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是我们得到的截图。这里我们可以看到在NYT <strong class="kv io">响应</strong>对象中有一个<strong class="kv io">文档</strong>数组，它由我们的文章对象组成，包含摘要、web_url、摘录、多媒体等。</p><p id="1f88" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了呈现我们的每篇文章，我们将使用这些属性中的一些。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oe"><img src="../Images/f14faa9f033931b601096dbd663e6b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gji2K7SWOIeUjOcqjGxrGg.png"/></div></div></figure><h1 id="7471" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">articles . js中的映射</strong></h1><p id="16f9" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">为了动态呈现文章，我们可以创建一个Articles.js文件，在其中映射每个条目，并在单独的Article.js组件中呈现每篇文章。我们还可以在这里导入Material-UI组件来提供一些样式。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h1 id="fb79" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">在Article.js中呈现每个文章卡片</h1><p id="5785" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">在这个Article.js文件中，我们可以利用之前看到的NYT文章搜索API的一些属性。</p><ul class=""><li id="ce6d" class="mh mi in kv b kw kx kz la lc na lg nb lk nc lo mo mp mq mr bi translated"><strong class="kv io">多媒体:</strong>显示图像</li><li id="6c9d" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io"> headline.main: </strong>显示标题</li><li id="2a91" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io"> web_url: </strong>链接到原文</li><li id="8983" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io">署名:</strong>注明记者姓名</li><li id="a2ea" class="mh mi in kv b kw ms kz mt lc mu lg mv lk mw lo mo mp mq mr bi translated"><strong class="kv io">片段:</strong>提供一个摘要</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h1 id="0922" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak">显示属性</strong></h1><p id="6b91" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">因此，再次阅读API文档，我们可以看到<em class="nd"> web_url </em>和<em class="nd">片段</em>位于文章模式下，并且是<em class="nd">字符串</em>。</p><p id="468e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而，为了显示新闻文章的标题，我们需要查看单独的<a class="ae ks" href="https://developer.nytimes.com/docs/articlesearch-product/1/types/Headline" rel="noopener ugc nofollow" target="_blank"> Headline </a>模式，其中有一个名为<em class="nd"> main </em>的属性，也是一个字符串。因此我们使用属性<em class="nd"> headline.main </em>而不仅仅是headline。</p><p id="3d9a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">署名也有自己的<a class="ae ks" href="https://developer.nytimes.com/docs/articlesearch-product/1/types/Byline" rel="noopener ugc nofollow" target="_blank">署名</a>模式，这就是我们使用<em class="nd">署名的原因</em></p><h1 id="f034" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">如何显示图像</h1><p id="fc80" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">最后，显示图像有点棘手，因为多媒体不同于其他属性，它是对象的一个<em class="nd">数组</em>而不是一个字符串。因此数组包含不同的对象，每个对象携带不同的图像文件。对于我们的项目，我们使用第一个图像url，这就是为什么我们将属性设置为<em class="nd"> article.multimedia[0]。网址</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi of"><img src="../Images/315e4fceb04ad90e2f2013e8c063a0bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v3HGceHTJ4aBDrBTJ9HY3A.png"/></div></div></figure><h1 id="b2e6" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">没有形象怎么办？</h1><p id="b43d" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">另一个需要考虑的棘手问题是，有些文章没有附带图片，在这种情况下，您为alt=编写的任何内容都会显示出来。所以我们需要有条件地渲染另一幅图像。</p><h1 id="eb4c" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用Javascript的可选链接(？。)</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi og"><img src="../Images/6be51e03409e8b19e92b9482501ec39b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gC_xRtI2ufMb5kLPlpNoLQ.png"/></div></div></figure><p id="ae49" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这段代码中，我们使用Javascript的<a class="ae ks" href="/https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank">可选链接</a>操作符，这是ECMAScript 2020规范的特性之一。</p><p id="5dbd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们正在检查:多媒体中是否存在[0]元素？如果有，显示网址。可选的链接操作符检查每个引用的有效性，并在控制台中返回undefined，而不是抛出一个错误。</p><p id="50e4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果没有照片存在:我们提供显示NYT标志的股票图片的url。</p><p id="f46d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们还为article.multimedia[0]添加了前缀。url 与URL<a class="ae ks" href="https://nytimes.com" rel="noopener ugc nofollow" target="_blank">https://nytimes.com</a>使用模板文字。</p><blockquote class="oh oi oj"><p id="b1c3" class="kt ku nd kv b kw kx jo ky kz la jr lb ok ld le lf ol lh li lj om ll lm ln lo ig bi translated">前缀https://nytimes.com<a class="ae ks" href="https://nytimes.com" rel="noopener ugc nofollow" target="_blank">可能看起来太明显而不值得一提，但值得注意的是，当使用其他<em class="in">热门故事API </em>时，我花了一段时间才注意到url路径是另一个。(` https://nyt . com/$ { top story . multimedia[0]。url} `</a></p></blockquote><h1 id="5393" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">这个应用程序看起来怎么样？</h1><p id="35c5" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">到目前为止，我们可以看到有10篇文章是根据我们的文章搜索API查询呈现的！</p><p id="b96c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">不过，每次我开发一个应用程序时，我都会感激那些技术背后的工作，那些技术是用来创建看起来如此简单的东西，以及添加更多功能所需的更多代码行。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/6bcebeabc75c490a55efd33afc54aed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z4nLkpPF2vVWM_y0WlUlrw.png"/></div></div></figure><p id="dd0d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">(我们可以使用Material-UI添加加载微调器和导航条等功能，这可以很快完成，所以我不会在这里介绍。)</p><h1 id="f38f" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">动态搜索文章</h1><p id="3e01" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">我们还可以添加一个搜索栏功能。因此，在我们的App.js文件中，我们可以包含一个<em class="nd"> searchArticles </em>函数，使我们的用户能够搜索文章，而不是像我们在<em class="nd"> getArticles </em>函数中那样对查询进行硬编码。</p><h1 id="0e54" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用Top Stories API和React路由器</h1><p id="3ca0" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">我们还可以添加一个函数<em class="nd"> getTopArticles </em>链接到另一条显示其他新闻部分的路线，比如使用Top Stories API的世界、技术和美国。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h1 id="b7bb" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用材料搜索组件-用户界面</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h1 id="bea1" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">具有(导航栏)和搜索栏功能的应用程序</h1><p id="10c2" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">现在，用户可以直接在搜索栏中键入查询，页面将显示相关新闻。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/cbcb3a47a56e91cea56a469c40d1714c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XbbQWFJo8zwKIfLOdyfMMQ.png"/></div></div></figure><h1 id="ec14" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">使用Top Stories API</h1><p id="c8d4" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">现在，在最后一段，我们将包括两个组件:TopStories.js和TopStory.js。(类似于我们使用文章搜索API创建Articles.js和Article.js时所做的事情。)</p><p id="109f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里我们会注意到这个<a class="ae ks" href="https://developer.nytimes.com/docs/top-stories-product/1/overview" rel="noopener ugc nofollow" target="_blank"> Top Stories API </a>看起来有点不同，所以我们需要再次阅读文档。我们需要使用指定的路径参数，如“美国”、“世界”和“技术”。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi op"><img src="../Images/be5c35a6fa9936f3d8bfc3f869bcbbb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kIdL7QNmLczmrSY_FMtDog.png"/></div></div></figure><h1 id="283b" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">顶层组件</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="f33b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个组件中需要注意的一点是使用常规按钮和材质UI按钮之间的区别。在常规按钮中，我们可以包含一个名称属性，我们可以将它与一个事件处理程序链接起来，如下所示:</p><pre class="kd ke kf kg gt ne nf ng nh aw ni bi"><span id="5163" class="nj lq in nf b gy nk nl l nm nn">const clickHandler = (e) =&gt; {    <br/>  getTopArticles(e.target.name);  <br/>};</span><span id="da69" class="nj lq in nf b gy no nl l nm nn">&lt;button className="button" name="world" onClick={clickHandler}&gt;                       <br/>  World News           <br/>&lt;/button&gt;</span></pre><p id="0152" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而<a class="ae ks" href="https://material-ui.com/components/buttons/" rel="noopener ugc nofollow" target="_blank"> Material-UI </a>按钮没有我们可以使用的name属性，所以我们需要不同地处理点击。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oq"><img src="../Images/f06ffc1a854c23eaca62c82df78d5319.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TpM1ktSd40DtzTl5L0BpPQ.png"/></div></div></figure><h1 id="e830" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">顶层组件</h1><p id="a4f8" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">最后，在我们的TopStory组件中，图片url的url前缀花了我很长时间才弄明白，这是我不愿意承认的。因此，如果我们查看来自Top Stories API的响应对象，我们可以看到多媒体的url路径是nyt.com，而不是nytimes.com。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/de590ab87e687222edbac3cafe76ce39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*veijxuM6m_WZqO19EmaAAA.png"/></div></div></figure><p id="9e1e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">TopStory.js文件如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nq nr l"/></div></figure><h1 id="bca2" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="f8ed" class="pw-post-body-paragraph kt ku in kv b kw mj jo ky kz mk jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">总的来说，我确实发现纽约时报的API文档很友好，我期待着探索web提供的其他API。这是按钮和/或上衣路线的外观。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi or"><img src="../Images/a9a8d24bd8d4ee82c2bad5f5d61f6cc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WfMHx7LkyMr-1nPCRt_0uw.png"/></div></div></figure></div></div>    
</body>
</html>
<html>
<head>
<title>How to Build a JavaScript Donut Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建JavaScript环形图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-javascript-donut-chart-1b98a62ee2ef?source=collection_archive---------20-----------------------#2021-07-06">https://javascript.plainenglish.io/how-to-build-a-javascript-donut-chart-1b98a62ee2ef?source=collection_archive---------20-----------------------#2021-07-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="39b1" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">这是一个构建交互式JavaScript甜甜圈图的初级教程，通过音乐应用市场数据的可视化来演示</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b5e29ff07f2d44308e7820ba6a11c8a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TRD2WD_J8NBQZ2qvujprYw.png"/></div></div></figure><p id="ff1b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">想知道数据设计人员和开发人员如何使用JavaScript创建引人注目的圆环图吗？那么你在正确的时间来到了正确的地方。继续学习，你将学会如何轻松地构建一个交互式JavaScript甜甜圈图，即使你是一个初学者！</p><p id="4864" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本教程中，我们将可视化关于顶级在线音乐流媒体平台的全球市场份额的数据。这是一个很好的信息示例，可以很好地用圆环图来表示。</p><p id="727c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了确保我们在同一页上，让我们先看看什么是环形图，然后马上开始制作图表！</p><h1 id="2e3e" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">什么是圆环图？</h1><p id="5481" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">基本上，<a class="ae mh" href="https://www.anychart.com/chartopedia/chart-type/donut-chart/" rel="noopener ugc nofollow" target="_blank">甜甜圈图</a>(或甜甜圈图)是<a class="ae mh" href="https://www.anychart.com/chartopedia/chart-type/pie-chart/" rel="noopener ugc nofollow" target="_blank">饼图</a>，中间有一个镂空区域，可以填充附加信息。它们经常被用作可视化分类数据比例的一种方式。</p><p id="2f9a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在圆环图中，每个扇区(或块)的大小描述了每个类别所代表的总量。因此，这种类型的数据可视化可以帮助您快速了解变量的比例组成。</p><p id="a037" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">根据经验，圆环图图形中显示的类别数量应该限制在少数几个，以保持表示整洁，避免易读性问题。</p><h1 id="95ff" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">JavaScript圆环图预览</h1><p id="e1ae" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">看看JavaScript环形图在本教程结束时会是什么样子。而且会互动！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/87791ad26bff1994d4fcac8c0b60f200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BgGVmj15dPEzeWQG.png"/></div></div></figure><h1 id="62a2" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">构建一个基本的JavaScript圆环图</h1><p id="70de" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">只需四个简单的步骤就可以构建一个漂亮的JavaScript环形图。那不是我们最喜欢的音乐吗？</p><ol class=""><li id="ee29" class="mj mk in kq b kr ks ku kv kx ml lb mm lf mn lj mo mp mq mr bi translated">创建一个HTML页面。</li><li id="bd8e" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">包括JavaScript文件。</li><li id="9f65" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">添加数据。</li><li id="0fcc" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">写一些JavaScript图表代码。</li></ol><h2 id="648b" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">1.创建HTML页面</h2><p id="e5ab" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">我们要做的第一件事是创建一个基本的HTML页面，其中包含一个block元素，用于保存环形图。</p><p id="6ab3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了稍后在代码中识别这个<code class="fe nj nk nl nm b">&lt;div&gt;</code>，我们给它一个id属性。这次就让它只是“容器”吧。</p><p id="59f0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们还将<code class="fe nj nk nl nm b">&lt;style&gt;</code>块中的<code class="fe nj nk nl nm b">width</code>和<code class="fe nj nk nl nm b">height</code>参数指定为“100%”，这样环形图就会填满整个页面。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="7f7b" class="mx ll in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Donut Chart&lt;/title&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="f55e" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">2.包括JavaScript文件</h2><p id="ae2a" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">有许多JavaScript图表库提供了现成的特性，即使没有太多的技术技能和经验，这些特性也非常有助于快速可视化图表中的数据。其中一些支持开箱即用的圆环图。</p><p id="e945" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本教程中，我们使用的是<a class="ae mh" href="https://www.anychart.com" rel="noopener ugc nofollow" target="_blank"> AnyChart JS库</a>。它是一个轻量级的、强大的、灵活的交互式数据可视化解决方案。AnyChart对初学者来说也很棒，因为它有广泛而详细的<a class="ae mh" href="https://docs.anychart.com" rel="noopener ugc nofollow" target="_blank">文档</a>和大量的<a class="ae mh" href="https://www.anychart.com/products/anychart/gallery/" rel="noopener ugc nofollow" target="_blank">图表示例</a>，并附有源代码，可以在专用的<a class="ae mh" href="https://playground.anychart.com" rel="noopener ugc nofollow" target="_blank">操场</a>上玩。</p><p id="239d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，作为第二步，让我们从库的<a class="ae mh" href="https://cdn.anychart.com" rel="noopener ugc nofollow" target="_blank"> CDN </a>中包含必要的JavaScript文件(如果您愿意，也可以下载)。</p><p id="b458" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">AnyChart的JavaScript图表库采用模块化系统来确保最佳性能。为了使用它创建一个交互式HTML5圆环图，我们需要向HTML页面的<code class="fe nj nk nl nm b">&lt;head&gt;</code>部分添加两个脚本——<a class="ae mh" href="https://docs.anychart.com/Quick_Start/Modules#core" rel="noopener ugc nofollow" target="_blank">核心模块</a>和<a class="ae mh" href="https://docs.anychart.com/Quick_Start/Modules#pie_and_doughnut" rel="noopener ugc nofollow" target="_blank">馅饼和圆环模块</a>。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="2e21" class="mx ll in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Donut Chart&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-pie.min.js"&gt;&lt;/script&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;  <br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>    &lt;script&gt;<br/><strong class="nm io"><em class="nv">      // All the code for the JS donut chart will come here<br/></em></strong>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="1f4f" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">3.添加数据</h2><p id="13aa" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">圆环图是一种简单的图表类型，它需要简单而有限的数据集。因此，尽管AnyChart支持多种加载数据的方式，我们还是会以一种简单的方式直接传递数据。</p><p id="72ef" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于本教程，我决定收集领先的音乐流媒体应用程序的市场份额数据，这些数据是我从应用程序的商业网站收集的。所以，我只是添加它，如下所示:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="13f0" class="mx ll in nm b gy nr ns l nt nu">var data = anychart.data.set([<br/>  ['Spotify', 34],<br/>  ['Apple Music', 21],<br/>  ['Amazon Music', 15],<br/>  ['Tencent apps', 11],<br/>  ['YouTube Music', 6],<br/>  ['Others', 13]<br/>]);</span></pre><p id="c65d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在我们已经设置好了一切，让我们通过添加一些JavaScript代码来准备查看环形图的形状！基本上，这是相当直观的。</p><h2 id="3c72" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">4.为我们的圆环图编写JavaScript图表代码</h2><p id="6881" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">我们要做的第一件事是添加一个包含所有代码的函数，确保其中的代码只在页面准备就绪时执行。</p><p id="fe06" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">使用适当的JavaScript库创建圆环图非常简单，在这种情况下，实际上只需要几行代码！</p><p id="bd25" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">正如我们刚刚了解到的，环形图基本上是一个有洞的饼图，就像一个圆环。因此，我们简单地创建一个饼图实例，并给它一个内径值，使它成为一个圆环图。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="3f1c" class="mx ll in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create a pie chart with the data<br/></em></strong>var chart = anychart.pie(data)</span><span id="e44c" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// set the chart radius making a donut chart<br/></em></strong>chart.innerRadius('55%');</span></pre><p id="d609" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，我们给我们的圆环图一个标题，并在最终绘制结果可视化之前设置容器id。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="d683" class="mx ll in nm b gy nr ns l nt nu">chart.title('Music Streaming Apps Global Market Share')<br/>chart.container('container');<br/>chart.draw();</span></pre><p id="fafd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">就这样——一个全功能的基于JavaScript的交互式圆环图已经准备好了！这不是绝对容易吗？</p><p id="7a16" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">请注意，图例是自动创建的。此外，继续点击它的项目或任何一块，看看很酷的交互式甜甜圈切片行为。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/3d22e4f74559b9c93a2a4a5ab1476cc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlZjGsZqUSw1UIfCs2QWTg.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">JS donut chart — basic</figcaption></figure><blockquote class="oc od oe"><p id="6c0d" class="ko kp nv kq b kr ks jo kt ku kv jr kw of ky kz la og lc ld le oh lg lh li lj ig bi translated"><strong class="kq io"> <em class="in">这个基本JavaScript甜甜圈图的初始版本及其完整代码可从</em> </strong> <a class="ae mh" href="https://playground.anychart.com/oGg0sx87/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="in"> AnyChart游乐场</em> </strong> </a> <strong class="kq io"> <em class="in">和</em></strong><a class="ae mh" href="https://codepen.io/shacheeswadia/pen/eYvJxJQ" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="in">CodePen</em></strong></a><strong class="kq io"><em class="in">获得。</em> </strong></p></blockquote><p id="2748" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这张甜甜圈图清楚地表明，Spotify是全球领导者，Spotify和Apple Music共同占据了音乐流媒体应用市场的一半以上。</p><p id="5690" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，让我们定制我们的圆环图，使它看起来更酷，并以更清晰的方式传达见解。</p><h1 id="a934" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">自定义JavaScript圆环图</h1><p id="d844" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">AnyChart的JavaScript库的一个很好的特性是，初始的圆环图构建得非常快，然后有大量的选项来按照我们想要的方式微调图表。</p><p id="2329" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们来看看一些有趣的方法，让我们的交互式圆环图更加美观，信息量更大:</p><ol class=""><li id="c19d" class="mj mk in kq b kr ks ku kv kx ml lb mm lf mn lj mo mp mq mr bi translated">更改调色板。</li><li id="20e4" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">添加标签。</li><li id="ae5a" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">改进工具提示。</li><li id="b48b" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">向甜甜圈的中心添加细节。</li></ol><h2 id="ae49" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">1.更改调色板</h2><p id="ab37" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">颜色是使图表看起来更个性化的最简单也是最有效的方法。因为我们在这里代表品牌，所以我们可以将它们的颜色应用于相应数据点的可视化。</p><p id="d24c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这并不复杂，我们只需定义要使用的调色板，并在创建圆环图时将其作为参数传递。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="398b" class="mx ll in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create a color palette<br/></em></strong>var palette = anychart.palettes.distinctColors();<br/>  <br/><strong class="nm io"><em class="nv">// set the colors according to the brands<br/></em></strong>palette.items([<br/>  { color: '#1dd05d' },<br/>  { color: '#000000' },<br/>  { color: '#00a3da' },<br/>  { color: '#156ef2' },<br/>  { color: '#f60000' },<br/>  { color: '#96a6a6' }<br/>]);</span><span id="db6e" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// apply the donut chart color palette<br/></em></strong>chart.palette(palette);</span></pre><p id="9735" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看我们的甜甜圈图用品牌颜色看起来怎么样！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/060c93f1dee98c96cde638078ae0f996.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c6gFqp59sbuC1jg3axw1Rg.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">JS donut chart — intermediate</figcaption></figure><blockquote class="oc od oe"><p id="c699" class="ko kp nv kq b kr ks jo kt ku kv jr kw of ky kz la og lc ld le oh lg lh li lj ig bi translated"><strong class="kq io"> <em class="in">此甜甜圈图版本可用</em></strong><a class="ae mh" href="https://playground.anychart.com/G0CdHbBP/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="in">any chart游乐场</em> </strong> </a> <strong class="kq io"> <em class="in">和</em></strong><a class="ae mh" href="https://codepen.io/shacheeswadia/pen/BaWjbdv" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="in">code pen</em></strong></a><strong class="kq io"><em class="in">上的代码。</em>T47】</strong></p></blockquote><h2 id="289b" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">2.添加标签</h2><p id="5aa8" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">因为我们的细分市场数量较少，而且每个细分市场都足够大，所以我们可以在环形图的每个部分中添加品牌名称和百分比数字。这将消除对图例的需求。</p><p id="5c09" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，这非常简单，只需两行额外的JavaScript代码就可以完成。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="a123" class="mx ll in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// set the position of labels<br/></em></strong>chart.labels().format('{%x} — {%y}%').fontSize(16);<br/>  <br/><strong class="nm io"><em class="nv">// disable the legend<br/></em></strong>chart.legend(false);</span></pre><h2 id="795a" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">3.改进工具提示</h2><p id="d77e" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">让工具提示变得清晰和有价值总是一个好主意。在我们的环形图中，只有两点信息:品牌名称和百分比份额。因此，我们可以有一个基本的工具提示，没有任何混乱的信息。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="5355" class="mx ll in nm b gy nr ns l nt nu">chart.tooltip().format('Market share: {%PercentValue}%');</span></pre><h2 id="bd30" class="mx ll in bd lm my mz dn lq na nb dp lu kx nc nd lw lb ne nf ly lf ng nh ma ni bi translated">4.将细节添加到圆环的中心</h2><p id="d70d" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">数据可视化的一个重要方面在于空间利用率。由于圆环图中间是空白的，我们可以用它来显示标题和其他一些信息。</p><p id="67b1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们定义一个独立的元素，并将其放置在中心。除了标题，我们还添加了代表我们观察结果的副标题:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="c158" class="mx ll in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create a standalone label<br/></em></strong>var label = anychart.standalones.label();</span><span id="26f1" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// configure the label settings<br/></em></strong>label<br/>  .useHtml(true)<br/>  .text(<br/>    ‘&lt;span style = “color: #313136; font-size:20px;”&gt;Global Market Share of &lt;br/&gt; Music Streaming Apps&lt;/span&gt;’ +<br/>    ‘&lt;br/&gt;&lt;br/&gt;&lt;/br&gt;&lt;span style=”color:#444857; font-size: 14px;”&gt;&lt;i&gt;Spotify and Apple Music have more &lt;br/&gt;than 50% of the total market share&lt;/i&gt;&lt;/span&gt;’<br/>  )<br/> .position(‘center’)<br/> .anchor(‘center’)<br/> .hAlign(‘center’)<br/> .vAlign(‘middle’);</span><span id="abbd" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// set the label as the center content<br/></em></strong>chart.center().content(label);</span></pre><p id="18bb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">结果如下！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/b45d2dbfea924620063d72f65e075f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vB37MxwPEJHDXvWMcN9JhQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">JS donut chart — final</figcaption></figure><p id="bac7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是——一个用JavaScript构建的又酷又时髦的圆环图！</p><blockquote class="oc od oe"><p id="a72e" class="ko kp nv kq b kr ks jo kt ku kv jr kw of ky kz la og lc ld le oh lg lh li lj ig bi translated"><strong class="kq io"> <em class="in">你可以在下面这里找到这个甜甜圈图的最终代码，或者在</em> </strong> <a class="ae mh" href="https://playground.anychart.com/vDHOcQQZ/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="in"> AnyChart游乐场</em> </strong> </a> <strong class="kq io"> <em class="in">，或者在</em></strong><a class="ae mh" href="https://codepen.io/shacheeswadia/pen/VwpeRBx" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="in">code pen</em></strong></a><strong class="kq io"><em class="in">上找到。</em> </strong></p></blockquote><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="c27b" class="mx ll in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Donut Chart&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-pie.min.js"&gt;&lt;/script&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;  <br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>    &lt;script&gt;</span><span id="847c" class="mx ll in nm b gy nw ns l nt nu">anychart.onDocumentReady(function () {<br/>  <br/><strong class="nm io"><em class="nv">  // add data<br/></em></strong>  var data = anychart.data.set([<br/>    ['Spotify', 34],<br/>    ['Apple Music', 21],<br/>    ['Amazon Music', 15],<br/>    ['Tencent apps', 11],<br/>    ['YouTube Music', 6],<br/>    ['Others', 13]<br/>  ]);<br/>  <br/><strong class="nm io"><em class="nv">  // create a pie chart with the data<br/></em></strong>  var chart = anychart.pie(data);<br/>  <br/><strong class="nm io"><em class="nv">  // set the chart radius making a donut chart<br/></em></strong>  chart.innerRadius('55%')</span><span id="06bc" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create a color palette<br/></em></strong>  var palette = anychart.palettes.distinctColors();<br/> <br/><strong class="nm io"><em class="nv">  // set the colors according to the brands<br/></em></strong>  palette.items([<br/>    { color: '#1dd05d' },<br/>    { color: '#000000' },<br/>    { color: '#00a3da' },<br/>    { color: '#156ef2' },<br/>    { color: '#f60000' },<br/>    { color: '#96a6a6' }<br/>  ]);</span><span id="9ccc" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // apply the donut chart color palette<br/></em></strong>  chart.palette(palette);<br/>  <br/><strong class="nm io"><em class="nv">  // set the position of labels<br/></em></strong>  chart.labels().format('{%x} — {%y}%').fontSize(16);<br/>  <br/><strong class="nm io"><em class="nv">  // disable the legend<br/></em></strong>  chart.legend(false);<br/>  <br/><strong class="nm io"><em class="nv">  // format the donut chart tooltip<br/></em></strong>  chart.tooltip().format('Market share: {%PercentValue}%');</span><span id="f330" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create a standalone label<br/></em></strong>  var label = anychart.standalones.label();</span><span id="2394" class="mx ll in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // configure the label settings<br/></em></strong>  label<br/>    .useHtml(true)<br/>    .text(<br/>      '&lt;span style = "color: #313136; font-size:20px;"&gt;Global Market Share of &lt;br/&gt; Music Streaming Apps&lt;/span&gt;' +<br/>      '&lt;br/&gt;&lt;br/&gt;&lt;/br&gt;&lt;span style="color:#444857; font-size: 14px;"&gt;&lt;i&gt;Spotify and Apple Music have more &lt;br/&gt;than 50% of the total market share&lt;/i&gt;&lt;/span&gt;'<br/>    )<br/>    .position('center')<br/>    .anchor('center')<br/>    .hAlign('center')<br/>    .vAlign('middle');<br/>  <br/><strong class="nm io"><em class="nv">  // set the label as the center content<br/></em></strong>  chart.center().content(label);<br/>  <br/><strong class="nm io"><em class="nv">  // set container id for the chart<br/></em></strong>  chart.container('container');<br/>  <br/><strong class="nm io"><em class="nv">  // initiate chart drawing<br/></em></strong>  chart.draw();</span><span id="f596" class="mx ll in nm b gy nw ns l nt nu">});</span><span id="c600" class="mx ll in nm b gy nw ns l nt nu">    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="ceb8" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">结论</h1><p id="acac" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">在本教程中，我们看到了创建和定制一个交互式JavaScript圆环图是多么的快速和简单。这是构建最简单的图表之一，因此在开始学习web数据可视化时，这是一个很好的选择。</p><p id="e2e0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您想进一步改进我们刚刚制作的圆环图，或者根据您自己的需要创建一个完全不同的圆环图，请查看<a class="ae mh" href="https://docs.anychart.com/Basic_Charts/Doughnut_Chart" rel="noopener ugc nofollow" target="_blank">圆环图文档</a>，不要错过<a class="ae mh" href="https://www.anychart.com/products/anychart/gallery/Pie_and_Donut_Charts/" rel="noopener ugc nofollow" target="_blank">圆环图示例</a>来获取灵感。也欢迎您查看AnyChart JavaScript数据可视化库中支持的其他<a class="ae mh" href="https://docs.anychart.com/Quick_Start/Supported_Charts_Types" rel="noopener ugc nofollow" target="_blank">图表类型</a>。</p><p id="99b2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您对构建或使用圆环图或任何与数据可视化相关的问题有任何疑问，请告诉我，我会尽最大努力做出回应并提供帮助。</p><p id="402f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那就继续吧，开始制作不同的图表，坚持听音乐——两者都对创造力有好处！</p></div><div class="ab cl oi oj hr ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ig ih ii ij ik"><p id="2469" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">AnyChart感谢Shachee Swadia制作了这个令人惊叹的JavaScript甜甜圈图教程。 </p><p id="7477" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> <em class="nv">如果您想为我们的博客创建一个酷炫的客座博文，请</em> </strong> <a class="ae mh" href="https://www.anychart.com/support/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nv">与我们联系</em> </strong> </a> <strong class="kq io"> <em class="nv">与我们一起讨论吧。</em> <em class="nv">参见其他</em></strong><a class="ae mh" href="https://www.anychart.com/blog/category/javascript-chart-tutorials/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">JavaScript制图教程</em> </strong> </a> <strong class="kq io"> <em class="nv">。</em>T25】</strong></p></div><div class="ab cl oi oj hr ok" role="separator"><span class="ol bw bk om on oo"/><span class="ol bw bk om on oo"/><span class="ol bw bk om on"/></div><div class="ig ih ii ij ik"><p id="d95b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">原载于2021年7月6日https://www.anychart.com</em><em class="nv"><a class="ae mh" href="https://www.anychart.com/blog/2021/07/06/donut-charts-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="nv">。</em></a></em></p><p id="fdbf" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">更多内容请看</em><a class="ae mh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
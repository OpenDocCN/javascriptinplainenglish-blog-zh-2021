<html>
<head>
<title>Create a Rich Text Editor With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React创建富文本编辑器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-rich-text-editor-with-react-d41e38d43dc6?source=collection_archive---------5-----------------------#2021-05-27">https://javascript.plainenglish.io/create-a-rich-text-editor-with-react-d41e38d43dc6?source=collection_archive---------5-----------------------#2021-05-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8039" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我们将使用React和Quill创建一个富文本编辑器。我们的文本编辑器将能够添加不同的标题，为文本提供不同的颜色，添加下标和上标，缩进或取消缩进文本，等等。要阅读本文，您需要对React有一个基本的了解。</p><p id="24dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我们的应用程序的外观:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9cac461cc969a19f6b7dba8ca6d2f023.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cZURcI5054X1QyhXWX0RfQ.gif"/></div></div></figure><p id="8dcc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么，我们开始吧。</p><p id="3f8e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们跳过终端，编写以下命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ku"><img src="../Images/596398b1d9d6a457bd2497051dd966ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*yo3qOvedRiHa5P31RSik3A.png"/></div></figure><p id="0536" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这应该使我们的文件结构类似于这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/a190c7b67d31f15f6f76f32dd0351622.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*DkirTH3g7yUYKMrbQla8qA.png"/></div></figure><p id="6fcf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这之后，让我们删除一些在<em class="kw"> src </em>目录中的文件。目前，我们的文件结构可能如下所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/0bfebfd8a67ea28500334ef1f1e32c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*WmMb27L0gFq8wcNv4S-e2g.png"/></div></figure><p id="f61b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面删除<strong class="jm io"> App.css </strong>、<strong class="jm io"> App.test.js </strong>、<strong class="jm io"> index.css </strong>、<strong class="jm io"> logo.svg </strong>、<strong class="jm io"> reportWebVitals.js </strong>和<strong class="jm io"> setupTests.js </strong>。这应该使我们的<em class="kw"> src </em>目录的文件结构看起来像这样:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kv"><img src="../Images/17c65be1eea093f60e5b2eedc45ca590.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*ik00sr7yILJJE54PR7lDFg.png"/></div></figure><p id="a79d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们安装我们需要的软件包。为此，让我们跳过终端，编写以下命令:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/9ff02e46f993b3959e5b04b70b2aae1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/format:webp/1*5MdFsgnQ6assORDcw2CpNQ.png"/></div></figure><p id="25c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们已经安装了react-quill，让我们打开<strong class="jm io"> index.js </strong>文件。我们的<strong class="jm io"> index.js </strong>文件应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi kz"><img src="../Images/65e011551be145db4097b9aad22039d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kXSPkpsi_Qlmq2adx0xLAA.png"/></div></div></figure><p id="6ba8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里没什么特别的。我们刚刚从这个文件中删除了几行代码。这只是基本的反应。现在让我们打开名为<strong class="jm io"> App.js </strong>的文件。我们的<strong class="jm io"> App.js </strong>文件应该是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi la"><img src="../Images/4b2f9e1ffa2e5c492b7698627083f35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HZ8ItKorCsWuEo8WRwSdvQ.png"/></div></div></figure><p id="893a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如您所见，我们已经在第1行从<strong class="jm io"> Editor.js </strong>文件导入了<code class="fe lb lc ld le b">Editor</code>。然后我们在第6行的<code class="fe lb lc ld le b">App</code>函数中渲染它。然后，我们出口了<code class="fe lb lc ld le b">App</code>。现在让我们在<em class="kw"> src </em>目录下创建一个名为<strong class="jm io"> Editor.js </strong>的文件，并在该文件中写入以下代码行:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lf lg l"/></div></figure><p id="1e62" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第23行，我们定义了函数<code class="fe lb lc ld le b">Editor</code>。从第31行到第48行，我们渲染了两个<code class="fe lb lc ld le b">ReactQuill</code>组件，它们是我们在第2行导入的。我们的第一个<code class="fe lb lc ld le b">ReactQuill</code>组件充当编辑器，而第二个<code class="fe lb lc ld le b">ReactQuill</code>组件充当预览。让我们首先讨论第二个<code class="fe lb lc ld le b">ReactQuill</code>组件(第42到47行)。我们已经在<code class="fe lb lc ld le b">ReactQuill</code>组件中设置了<code class="fe lb lc ld le b">modules</code>道具。我们已经在<code class="fe lb lc ld le b">modules</code>中将<code class="fe lb lc ld le b">toolbar</code>选项设置为<code class="fe lb lc ld le b">null</code>。这样，就不会出现工具栏。在第44行，我们将<code class="fe lb lc ld le b">value</code> prop设置为<code class="fe lb lc ld le b">value</code>，这是我们在第24行设置的状态。同样的<code class="fe lb lc ld le b">value</code>被<code class="fe lb lc ld le b">ReactQuill</code>用来显示在编辑器上输入的内容。在第45行，我们已经为组件设置了样式。在第46行，我们已经将<code class="fe lb lc ld le b">readOnly</code>设置为<code class="fe lb lc ld le b">true</code>。通过设置<code class="fe lb lc ld le b">readOnly</code>为真，我们使<code class="fe lb lc ld le b">ReactQuill</code>组件不可编辑。</p><p id="1d76" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从第33行到第40行，我们已经创建了编辑器。在第34行，我们已经将<code class="fe lb lc ld le b">theme</code>设置为<code class="fe lb lc ld le b">"snow"</code>。为了让<code class="fe lb lc ld le b">"snow"</code>主题工作，我们需要为它导入CSS文件，我们在第3行已经做了。在第35行，我们将编辑器的<code class="fe lb lc ld le b">value</code>道具设置为<code class="fe lb lc ld le b">value</code>。在第36行，我们已经将<code class="fe lb lc ld le b">onChange</code>设置为<code class="fe lb lc ld le b">setValue</code>。在第38行，我们已经设置了编辑器的样式。在第39行，我们给编辑器添加了一个<code class="fe lb lc ld le b">ref</code>，也就是<code class="fe lb lc ld le b">editorRef</code>。我们已经在第25行设置了<code class="fe lb lc ld le b">editorRef</code>。在第37行，我们将第5行创建的<code class="fe lb lc ld le b">modules</code>设置为<code class="fe lb lc ld le b">modules</code>常量。<code class="fe lb lc ld le b">modules</code>包含<code class="fe lb lc ld le b">toolbar</code>选项。我们向<code class="fe lb lc ld le b">toolbar</code>数组添加了多个选项。顾名思义，这个<code class="fe lb lc ld le b">toolbar</code>数组帮助我们添加工具栏。我们在工具栏中添加了不同的选项。所有这些都是不言自明的。如果你想了解更多关于工具栏选项的信息，你可以看看<a class="ae lh" href="https://quilljs.com/docs/modules/toolbar/" rel="noopener ugc nofollow" target="_blank">文档的这一部分</a>。</p><p id="53c4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意，我们已经使用<code class="fe lb lc ld le b">console.log</code>在第27和29行记录了<code class="fe lb lc ld le b">value</code>和<code class="fe lb lc ld le b">editorRef.current.editor.getContents()</code>。这是因为我只是想向您展示如何在服务器上存储数据。您可以选择<code class="fe lb lc ld le b">value</code>或<code class="fe lb lc ld le b">editorRef.current.editor.getContents()</code>方法在服务器上存储您的数据。</p><p id="1dbc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">至此，我们已经创建了一个富文本编辑器。</p><p id="6ec2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="kw">更多内容请看</em><a class="ae lh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="kw">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Access Nuxt.js Page Data in Route Meta Fields</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何访问路由元字段中的Nuxt.js页面数据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-access-nuxt-js-page-data-in-route-objects-8fa564d0b984?source=collection_archive---------10-----------------------#2021-05-13">https://javascript.plainenglish.io/how-to-access-nuxt-js-page-data-in-route-objects-8fa564d0b984?source=collection_archive---------10-----------------------#2021-05-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/28ac16463eab7bbb87cdf4cf32124eaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0hmj1253C6ADKYJbbWj2w.png"/></div></div></figure><p id="d25f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">嘿，伙计们，这篇文章是关于在路由对象中访问页面数据的。这是我经常遇到的一个用例，例如在生成站点地图时。</p><p id="7b26" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Nuxt页面允许您定义结构化数据，如来自@nuxtjs/auth 的<a class="ae kt" href="https://github.com/nuxt/nuxt.js/issues/1687" rel="noopener ugc nofollow" target="_blank"> meta </a>属性或<a class="ae kt" href="https://auth.nuxtjs.org/guide/middleware" rel="noopener ugc nofollow" target="_blank"> auth属性(注意，它们不应该与</a><a class="ae kt" href="https://nuxtjs.org/docs/2.x/features/meta-tags-seo" rel="noopener ugc nofollow" target="_blank"> meta标签</a>混淆)。如果能在其他地方看到它们，那就太好了。可以在很多地方访问route对象:</p><ul class=""><li id="ce30" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated"><code class="fe ld le lf lg b">asyncData</code>中的<code class="fe ld le lf lg b">context.route</code></li><li id="2ea7" class="ku kv in jx b jy lh kc li kg lj kk lk ko ll ks kz la lb lc bi translated"><code class="fe ld le lf lg b">this.$route.meta</code>在组件中</li><li id="505e" class="ku kv in jx b jy lh kc li kg lj kk lk ko ll ks kz la lb lc bi translated"><code class="fe ld le lf lg b">this.extendRoutes</code>在模块中</li><li id="b8ab" class="ku kv in jx b jy lh kc li kg lj kk lk ko ll ks kz la lb lc bi translated"><code class="fe ld le lf lg b">context.route</code>在瓷器中</li></ul><p id="b726" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我做了一些测试，发现访问页面外的页面数据的唯一可能性是在<code class="fe ld le lf lg b">asyncData</code>和中间件中，正如在本期的<a class="ae kt" href="https://github.com/nuxt/nuxt.js/issues/1687" rel="noopener ugc nofollow" target="_blank">中所讨论的。其他地方都不工作，有空的<code class="fe ld le lf lg b">meta</code>对象。此外，链接问题中讨论的案例在route对象本身中添加了一个<code class="fe ld le lf lg b">meta</code>属性，而不是在<code class="fe ld le lf lg b">matched</code>数组中，因为它在vue-router中(参见vue-router </a>中的<a class="ae kt" href="https://router.vuejs.org/guide/advanced/meta.html" rel="noopener ugc nofollow" target="_blank">示例)。</a></p><p id="d9f2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好吧，这就是目前的状态。现在，我们如何修复它并添加页面数据来路由对象呢？</p><h1 id="2cf4" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">nuxt-路由元</h1><p id="cdb9" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">我编写了<a class="ae kt" href="https://github.com/dword-design/nuxt-route-meta" rel="noopener ugc nofollow" target="_blank"> nuxt-route-meta </a>模块，它在构建时解析页面组件，并通过<code class="fe ld le lf lg b">this.extendRoutes</code>将数据添加到路由中。这是一个零配置模块，所以你可以把它添加到你的<code class="fe ld le lf lg b">nuxt.config.js</code>中，它开箱即用。</p><p id="3115" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，通过<code class="fe ld le lf lg b">npm install nuxt-route-meta</code>安装。</p><p id="a712" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后添加到您的<code class="fe ld le lf lg b">nuxt.config.js</code>:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="ccf6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们用一些数据创建一个页面，如下所示:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="f25a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们已经完成了配置！让我们回顾一下上面讨论的案例:</p><p id="4d4f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">异步数据</strong>:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="b461" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">这个。$route.meta </strong>:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="23fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> this.extendRoutes </strong>:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="045f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">中间件</strong>:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="9501" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我们所看到的，我们现在可以在任何地方访问页面数据！这就是如何使用该模块。</p><h1 id="7ccd" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">生成带有非授权路由的站点地图</h1><p id="b248" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">访问页面数据的一个常见用例是站点地图生成，尤其是有条件地向站点地图添加条目。我们现在将配置<code class="fe ld le lf lg b">@nuxtjs/sitemap</code>仅添加非授权路由。因此，让我们通过<code class="fe ld le lf lg b">npm install @nuxtjs/sitemap</code>添加站点地图模块，并将其添加到我们的配置中:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="d3d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在过滤路由很容易，因为我们只需检查meta属性:</p><figure class="mp mq mr ms gt jo"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="aa0e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样，如果你检查<code class="fe ld le lf lg b">/sitemap.xml</code>，你应该只看到非授权路线！</p><h1 id="bbeb" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">结论</h1><p id="b622" class="pw-post-body-paragraph jv jw in jx b jy mk ka kb kc ml ke kf kg mm ki kj kk mn km kn ko mo kq kr ks ig bi translated">这是对<a class="ae kt" href="https://github.com/dword-design/nuxt-route-meta" rel="noopener ugc nofollow" target="_blank"> nuxt-route-meta </a>的介绍。希望对你有点用！如果你喜欢，可以在GitHub 留下一颗星🌟。此外，该模块可能还需要一些工作，所以如果你需要什么或者有一个bug，<a class="ae kt" href="https://github.com/dword-design/nuxt-route-meta/issues" rel="noopener ugc nofollow" target="_blank">提交一个问题</a>。感谢阅读！</p><p id="9abd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">如果你喜欢我正在做的事情，请关注我的</strong><a class="ae kt" href="https://twitter.com/seblandwehr" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Twitter</strong></a><strong class="jx io">或查看我的</strong> <a class="ae kt" href="https://sebastianlandwehr.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">网站</strong> </a> <strong class="jx io">。也可以考虑在</strong> <a class="ae kt" href="https://www.buymeacoffee.com/dword" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">给我买杯咖啡</strong></a><strong class="jx io"/><a class="ae kt" href="https://www.paypal.com/paypalme/SebastianLandwehr" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">PayPal</strong></a><strong class="jx io">或者</strong><a class="ae kt" href="https://www.patreon.com/dworddesign" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Patreon</strong></a><strong class="jx io">进行捐赠。非常感谢！❤️ </strong></p><p id="3bee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mv">原载于【sebastianlandwehr.com】<a class="ae kt" href="https://sebastianlandwehr.com/blog/how-to-access-nuxt-js-page-data-in-route-meta-fields" rel="noopener ugc nofollow" target="_blank"><em class="mv"/></a></em></p><p id="acc3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mv">更多内容请看</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mv">plain English . io</em></a></p></div></div>    
</body>
</html>
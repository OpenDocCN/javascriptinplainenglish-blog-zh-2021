<html>
<head>
<title>Set up Vue3 Enterprise-Level Development Environments with Vite: Step by Step Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vite设置Vue3企业级开发环境:分步指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/set-up-vue3-enterprise-level-development-environments-with-vite-step-by-step-guide-32964d1df60e?source=collection_archive---------1-----------------------#2021-04-29">https://javascript.plainenglish.io/set-up-vue3-enterprise-level-development-environments-with-vite-step-by-step-guide-32964d1df60e?source=collection_archive---------1-----------------------#2021-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0d86" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Vue3、TypeScript、Element Plus、Axios、Husky、Commitizen、Jest、Vite和GitHub操作创建企业级开发环境。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1940a58bc585d0dc9e26226be880f9ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ew3Gbx_yRh0smRAVVdS_w.png"/></div></div></figure><p id="efdc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Vue3和Vite已经发布很久了，作者在很多项目中都使用了这个技术栈。我的感觉是，这种技术可以更好地帮助我们完成任务。Vue3和Vite的生态系统现在正在蓬勃发展，这非常适合企业级开发项目。</p><p id="c2f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本文将帮助您从零开始，一步一步地构建一个标准的Vite + Vue3 + TypeScript企业级开发环境。</p><p id="8356" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我将与您一起完成一个Vue.js项目的核心框架，使用Vue.js、VueRouter和Vuex等技术。然后，我们将为这个项目添加代码风格、提交风格和单元测试。最后，我们将使用GitHub操作设置自动部署。</p><h2 id="5e1b" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">最终方案</h2><p id="b953" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这是我们最后的项目:</p><div class="ml mm gp gr mn mo"><a href="https://github.com/BytefishMedium/vite-vue3-starter" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">BytefishMedium/vite-vue 3-starter</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">在GitHub上创建一个帐户，为BytefishMedium/vite-vue 3-starter开发做贡献。</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc kp mo"/></div></div></a></div><p id="7109" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是在线演示:</p><div class="ml mm gp gr mn mo"><a href="https://bytefishmedium.github.io/vite-vue3-starter/#/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">Vite应用</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">编辑描述</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">bytefishmedium.github.io</p></div></div></div></a></div><h2 id="f7df" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">目录</h2><ol class=""><li id="7895" class="nd ne iq kt b ku mg kx mh la nf le ng li nh lm ni nj nk nl bi translated"><a class="ae nm" href="#0260" rel="noopener ugc nofollow">核心骨架</a></li><li id="56e9" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ni nj nk nl bi translated"><a class="ae nm" href="#ac1c" rel="noopener ugc nofollow">代码样式</a></li><li id="eaa6" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ni nj nk nl bi translated"><a class="ae nm" href="#0f27" rel="noopener ugc nofollow"> Git提交消息约定</a></li><li id="9e0e" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ni nj nk nl bi translated"><a class="ae nm" href="#5920" rel="noopener ugc nofollow">单元测试</a></li><li id="48a5" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ni nj nk nl bi translated"><a class="ae nm" href="#a990" rel="noopener ugc nofollow">自动化部署</a></li></ol><h2 id="71aa" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">技术堆栈</h2><ul class=""><li id="b0ab" class="nd ne iq kt b ku mg kx mh la nf le ng li nh lm ns nj nk nl bi translated">编程语言:TypeScript + JavaScript</li><li id="fe54" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">构建工具:<a class="ae nm" href="https://vitejs.dev/guide/#overview" rel="noopener ugc nofollow" target="_blank"> Vite 2.x </a></li><li id="88cf" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">核心框架:<a class="ae nm" href="https://v3.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue 3.x </a></li><li id="1e7d" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">路由器:Vue Router 4.x</li><li id="eb73" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">状态管理:Vuex 4.x</li><li id="1ede" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">UI框架:<a class="ae nm" href="https://element-plus.org/#/zh-CN" rel="noopener ugc nofollow" target="_blank">元素加</a></li><li id="8a36" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">CSS预编译器:<a class="ae nm" href="https://stylus-lang.com/" rel="noopener ugc nofollow" target="_blank">Stylus</a>/<a class="ae nm" href="https://sass.bootcss.com/documentation" rel="noopener ugc nofollow" target="_blank">Sass</a>/<a class="ae nm" href="http://lesscss.cn/" rel="noopener ugc nofollow" target="_blank">Less</a></li><li id="696c" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">HTTP客户端:<a class="ae nm" href="https://axios-http.com/" rel="noopener ugc nofollow" target="_blank"> Axios </a></li><li id="a176" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">Git挂钩:<a class="ae nm" href="https://typicode.github.io/husky/#/" rel="noopener ugc nofollow" target="_blank">哈士奇</a> + <a class="ae nm" href="https://github.com/okonet/lint-staged" rel="noopener ugc nofollow" target="_blank">皮棉阶段</a></li><li id="d9b5" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">代码风格:<a class="ae nm" href="http://editorconfig.org/" rel="noopener ugc nofollow" target="_blank">editor config</a>+<a class="ae nm" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">beauty</a>+<a class="ae nm" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank">ESLint</a>+Airbnb JavaScript风格指南</li><li id="a186" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">提交样式:<a class="ae nm" href="http://commitizen.github.io/cz-cli/" rel="noopener ugc nofollow" target="_blank">commit izen</a>+<a class="ae nm" href="https://commitlint.js.org/#/" rel="noopener ugc nofollow" target="_blank">commit list</a></li><li id="96da" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">单元测试:<a class="ae nm" href="https://next.vue-test-utils.vuejs.org/" rel="noopener ugc nofollow" target="_blank">vue-Test-utils</a>+<a class="ae nm" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">jest</a>+<a class="ae nm" href="https://github.com/vuejs/vue-jest" rel="noopener ugc nofollow" target="_blank">vue-jest</a>+<a class="ae nm" href="https://kulshekhar.github.io/ts-jest/" rel="noopener ugc nofollow" target="_blank">ts-jest</a></li><li id="71fc" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">自动部署:GitHub动作</li></ul><h2 id="e5fd" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">注意:</h2><ul class=""><li id="ca2e" class="nd ne iq kt b ku mg kx mh la nf le ng li nh lm ns nj nk nl bi translated">文章很长，但都是有用的东西。请耐心等待。</li><li id="0f2c" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">这篇文章关注的是如何在不使用Vue.js、Vuex和Axios的情况下建立一个开发环境<strong class="kt ir">。在阅读这篇文章之前，你需要对它们有一些基本的了解。</strong></li><li id="7fbc" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">当你在读这篇文章的时候，你可以打开电脑和我一起工作。</li><li id="e7a6" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">如果你对文章中的一些步骤有疑问或者有bug，欢迎你留下评论，我会尽力解答。</li></ul><p id="e126" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们走吧！</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="0260" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">型芯骨架</h1><p id="6af3" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">首先，确保您的计算机上成功安装了Node.js。该项目使用的Vite要求Node.js版本高于<code class="fe ol om on oo b">12.0.0</code>。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="d820" class="ln lo iq oo b gy ot ou l ov ow">$ node -v<br/>v12.16.1</span></pre><p id="11ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您运行的是低版本的Node，可以使用NVM将Node升级到最新的稳定版本:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="a1e7" class="ln lo iq oo b gy ot ou l ov ow">$ nvm install stable</span></pre><h2 id="1e21" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">使用Vite初始化项目</h2><p id="260a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们可以使用以下命令通过Vite初始化Vue.js项目:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="6229" class="ln lo iq oo b gy ot ou l ov ow">$ npm init @vitejs/app</span></pre><p id="4d04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您的计算机上尚未安装Vite，运行此命令将自动安装它。所以不需要执行<code class="fe ol om on oo b">npm install vite -g</code>这样的命令。</p><p id="c952" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者您可以使用Yarn来初始化项目:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="e0ef" class="ln lo iq oo b gy ot ou l ov ow">$ yarn create @vitejs/app</span></pre><p id="e60b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，我们将进入一个命令行交互界面。</p><p id="db69" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，当我们初始化项目时，我们需要输入项目的名称:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/1aa4192d6f2fd1aa8b4e66cd3ccee593.png" data-original-src="https://miro.medium.com/v2/format:webp/1*RC86UCdyUwM873YyQpx5VA.png"/></div></figure><p id="e7cd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后Vite让我们选择一个前端框架。虽然它是由Vue的开发团队发明的，但Vite是一个通用的构建工具，可以构建各种项目，包括React。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/3cb084eb4b894a3c8bd1f2de13fe4df3.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aro9GKnNHbdUIAB3Ox9YXA.png"/></div></figure><p id="7bb6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们选择选项<code class="fe ol om on oo b">vue</code>。</p><p id="6752" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后它会问我们是想使用JavaScript还是TypeScript，这里我们选择TS:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/9155db1283e1a3693dd8a807eba43292.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uJj7xsLlEMBYwVBBP5lZ1Q.png"/></div></figure><p id="f537" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，我们的基本项目模板创建完毕:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/4dd696aa8f97f9da9455e3220260670b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*aabD7484_PdxodnxvHY0-Q.png"/></div></figure><p id="893f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，按照提示，我们转到项目的根目录并安装依赖包。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="1ca9" class="ln lo iq oo b gy ot ou l ov ow">$ cd vite-vue3-starter</span><span id="9588" class="ln lo iq oo b gy oy ou l ov ow">$ npm install</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/15876ad7c98193f3e206cee955da6bdb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uHmMyhRTXrXsIT6S04YEqg.png"/></div></figure><p id="fc53" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，您可以在您喜欢的编辑器中打开该项目:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oz"><img src="../Images/0f342004abbdc0f994bbd1ed2fcd9a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TzienhzhhlX2-_v3ireMiA.png"/></div></div></figure><p id="7431" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是之前生成的项目的目录结构和<code class="fe ol om on oo b">package.json</code>的具体内容。</p><p id="358a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我将继续分享我的编辑器的截图，以便我们可以更好地保持一致性。</p><p id="fba8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装完成后，我们可以开始项目:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="6d41" class="ln lo iq oo b gy ot ou l ov ow">$ npm run dev</span></pre><p id="fae6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">运行上述命令时，您可能会收到类似以下内容的错误:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="f12c" class="ln lo iq oo b gy ot ou l ov ow">Error: esbuild: Failed to install correctly</span><span id="ab06" class="ln lo iq oo b gy oy ou l ov ow">Make sure you don't have "ignore-scripts" set to true. You can check this with "npm config get ignore-scripts". If that returns true you can reset it back to false using "npm config set ignore-scripts false" and then reinstall esbuild.</span><span id="9000" class="ln lo iq oo b gy oy ou l ov ow">If you're using npm v7, make sure your package-lock.json file contains either "lockfileVersion": 1 or the code "hasInstallScript": true. If it doesn't have either of those, then it is likely the case that a known bug in npm v7 has corrupted your package-lock.json file. Regenerating your package-lock.json file should fix this issue.</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pa"><img src="../Images/dcdf5f7d0051e75b1b7d7b5b803a9e2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPkna1GW0jUXmko5pfJd6w.png"/></div></div></figure><p id="6e63" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">解决方案:在使用<code class="fe ol om on oo b">npm run dev</code>之前运行以下命令</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="95ca" class="ln lo iq oo b gy ot ou l ov ow">$ node node_modules/esbuild/install.js</span></pre><p id="3a07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">参考:</p><div class="ml mm gp gr mn mo"><a href="https://github.com/evanw/esbuild/issues/462#issuecomment-771328459" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">macOS上的安装二进制文件损坏问题#462 evanw/esbuild</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">我猜这是一个新的bug，因为这个项目支持macOS(没有用旧版本测试)。运行纱线添加…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="pb l mz na nb mx nc kp mo"/></div></div></a></div><p id="7e32" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pc"><img src="../Images/85c41bfc4853d38e972b2425ef182d6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25tV1pkhRII9MGn-LUt8-Q.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/87c8cd0626b2c37e72e5f73921d033c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4tBiJTrPyoCNuLkU1M0KdQ.png"/></div></div></figure><p id="807a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如上图，我们项目的骨架就完成了。虽然流程有点长，但是操作很简单。</p><h2 id="b233" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">设置Vite配置文件</h2><p id="5624" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Vite配置文件<code class="fe ol om on oo b">vite.config.ts</code>位于根目录下，通过它我们可以配置和调整Vite的默认行为。</p><p id="fceb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们先做一些简单的配置，比如设置<code class="fe ol om on oo b">@</code>指向<code class="fe ol om on oo b">src</code>目录，修改服务端口和打包路径等。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pe"><img src="../Images/64385120350cfcf2e65dd696d251edea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJHm9HuS4AWZ1ksR4_Y_HQ.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="97a5" class="ln lo iq oo b gy ot ou l ov ow">import { defineConfig } from "vite";<br/>import vue from "<a class="ae nm" href="http://twitter.com/vitejs/plugin-vue" rel="noopener ugc nofollow" target="_blank">@vitejs/plugin-vue</a>";<br/>import { resolve } from "path";</span><span id="1c67" class="ln lo iq oo b gy oy ou l ov ow">// <a class="ae nm" href="https://vitejs.dev/config/" rel="noopener ugc nofollow" target="_blank">https://vitejs.dev/config/</a><br/>export default defineConfig({<br/>  plugins: [vue()],<br/>  resolve: {<br/>    alias: {<br/>      "@": resolve(__dirname, "src"), // Set '@' to point to the 'src' directory<br/>    },<br/>  },<br/>  base: "./", // Set the packing path<br/>  server: {<br/>    port: 4000,<br/>    open: true, // The browser opens automatically when the service starts<br/>    cors: true, // Allow cross-origin resource sharing</span><span id="a09a" class="ln lo iq oo b gy oy ou l ov ow">// Configure the proxy service according to your needs<br/>    // proxy: {<br/>    //   '/api': {<br/>    //     target: '<a class="ae nm" href="http://xxx.xxx.xxx.xxx:8000'" rel="noopener ugc nofollow" target="_blank">http://xxx.xxx.xxx.xxx:8000'</a>,<br/>    //     changeOrigin: true,<br/>    //     secure: false,<br/>    //     rewrite: (path) =&gt; path.replace('/api/', '/')<br/>    //   }<br/>    // }<br/>  },<br/>});</span></pre><p id="4783" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这时我们可以关闭之前启动的Vite程序，重新执行<code class="fe ol om on oo b">npm run dev</code>。</p><p id="786c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此时，您应该能够看到新的服务器程序监听端口4000，并自动在浏览器中打开网页，这表明我们之前的配置是成功的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/0cdeb8e4b1a97022bb6a04d2004752ac.png" data-original-src="https://miro.medium.com/v2/format:webp/1*FuOBvWU1par4JANTSIpVwQ.png"/></div></figure><p id="6434" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我不会在这里深入介绍更高级的Vite配置技术。你可以在官网上查看一下:</p><div class="ml mm gp gr mn mo"><a href="https://vitejs.dev/config/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">配置Vite | Vite</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">从命令行运行vite时，Vite会自动尝试解析一个名为vite.config.js的配置文件…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">vitejs.dev</p></div></div></div></a></div><h2 id="587c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">标准化目录结构</h2><p id="340f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">那么Vite默认生成的源代码的目录结构就比较简单，无法满足大型项目的需求。这里我们可以添加一些新的目录。</p><p id="5af8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为我们的项目将包含各种组件、视图、样式等。，我在<code class="fe ol om on oo b">src</code>目录中创建了以下目录结构:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="29b2" class="ln lo iq oo b gy ot ou l ov ow">├── public/<br/>└── src/<br/>    ├── assets/                    // store static resources<br/>    ├── common/                    // general library <br/>    ├── components/                // general components<br/>    ├── router/                    // routers for Vue Router<br/>    ├── store/                     // state for Vuex<br/>    ├── style/                     // general CSS file<br/>    ├── utils/                     // utils function<br/>    ├── views/                     // pages<br/>    ├── App.vue<br/>    ├── main.ts<br/>    ├── shims-vue.d.ts<br/>├── tests/                         // unit test<br/>├── index.html<br/>├── tsconfig.json                  // TypeScript config file<br/>├── vite.config.ts                 // Vite config file<br/>└── package.json</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pf"><img src="../Images/88fa9fd9edddaeeb5ef2836ec90b35af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*UP0gB0h15h-DvnrDf0zzSg.png"/></div></figure><h2 id="a9a4" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">集成Vue路由器</h2><p id="2b9c" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">首先，我们需要安装路由工具Vue Router。因为我们这里用的是Vue3，所以Vue路由器的版本必须在<code class="fe ol om on oo b">4.0</code>以上。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="a789" class="ln lo iq oo b gy ot ou l ov ow">$ npm i vue-router@4</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/af4a4f45138c2aadac640c3db414d2cd.png" data-original-src="https://miro.medium.com/v2/format:webp/1*EiV5yZ34YZOTEhCx2dRQCQ.png"/></div></figure><p id="6be7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二步，我们需要编写一个路由配置文件。在<code class="fe ol om on oo b">src</code>下创建一个<code class="fe ol om on oo b">router</code>目录，然后在该目录下创建一个<code class="fe ol om on oo b">index.ts</code>文件:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="d639" class="ln lo iq oo b gy ot ou l ov ow">└── src/<br/>     ├── router/<br/>         ├── index.ts</span></pre><p id="e446" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ol om on oo b">index.ts</code>的内容:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="14e6" class="ln lo iq oo b gy ot ou l ov ow"><strong class="oo ir">import</strong> {<br/>  createRouter,<br/>  createWebHashHistory,<br/>  RouteRecordRaw,<br/>} <strong class="oo ir">from</strong> "vue-router";<br/><strong class="oo ir">import</strong> Home <strong class="oo ir">from</strong> "@/views/home.vue";<br/><strong class="oo ir">import</strong> Vuex <strong class="oo ir">from</strong> "@/views/vuex.vue";</span><span id="db39" class="ln lo iq oo b gy oy ou l ov ow"><strong class="oo ir">const</strong> routes: Array&lt;RouteRecordRaw&gt; = [<br/>  {<br/>    path: "/",<br/>    name: "Home",<br/>    component: Home,<br/>  },<br/>  {<br/>    path: "/vuex",<br/>    name: "Vuex",<br/>    component: Vuex,<br/>  },<br/>  {<br/>    path: "/axios",<br/>    name: "Axios",<br/>    component: () =&gt; <strong class="oo ir">import</strong>("@/views/Axios.vue"), <em class="pg">// lazy-load</em><br/>  },<br/>];</span><span id="7937" class="ln lo iq oo b gy oy ou l ov ow"><strong class="oo ir">const</strong> router = createRouter({<br/>  history: createWebHashHistory(),<br/>  routes,<br/>});</span><span id="5979" class="ln lo iq oo b gy oy ou l ov ow"><strong class="oo ir">export</strong> <strong class="oo ir">default</strong> router;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ph"><img src="../Images/9eea875fa701d2dcda0a21c3540d30dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*377AGd29P15ZBEQAV2kRDw.png"/></div></div></figure><p id="3e6a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的文件中，我们配置了三台路由器。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="d507" class="ln lo iq oo b gy ot ou l ov ow">/      ==&gt; @/views/Home.vue<br/>/vuex  ==&gt; @/views/Vuex.vue<br/>/axios ==&gt; @/views/Axios.vue</span></pre><p id="6d56" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是，目前没有对应于路由的组件。</p><p id="8906" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了使项目能够运行，让我们在<code class="fe ol om on oo b">views</code>目录下创建<code class="fe ol om on oo b">Home.vue</code>、<code class="fe ol om on oo b">Vuex.vue</code>和<code class="fe ol om on oo b">Axios.vue</code>。</p><p id="c9cb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为现阶段我们还在测试Vue路由器的功能，所以不会写什么有意义的组件。我们只需在组件中编写以下内容:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="fa0e" class="ln lo iq oo b gy ot ou l ov ow">&lt;template&gt;<br/>  &lt;div&gt;<br/>    Home.vue<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d77b" class="ln lo iq oo b gy oy ou l ov ow">&lt;script lang="ts"&gt;<br/>import { defineComponent } from 'vue'</span><span id="a7e0" class="ln lo iq oo b gy oy ou l ov ow">export default defineComponent({<br/>  setup() {<br/>    <br/>  },<br/>})<br/>&lt;/script&gt;</span></pre><div class="kg kh ki kj gt ab cb"><figure class="pi kk pj pk pl pm pn paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/0010f3c7a146c79ea3a31c721330aff2.png" data-original-src="https://miro.medium.com/v2/resize:fit:644/format:webp/1*7HPxkFUHGFuesOlUWzAptw.png"/></div></figure><figure class="pi kk po pk pl pm pn paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/e73d49764ff084e3fa72d30d3e9eeeb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*9zq-CTgbfffaWVNL6SeCdQ.png"/></div></figure><figure class="pi kk pp pk pl pm pn paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><img src="../Images/6d5cd494ad8ff5ddd1ca48024a713168.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/format:webp/1*O6nhxGaJ2SGO-S4CBB-F6Q.png"/></div></figure></div><p id="88c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">稍后，我们将为这些组件添加更有意义的内容。</p><p id="9376" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们需要在<code class="fe ol om on oo b">main.ts</code>安装这个路由器:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pq"><img src="../Images/1bdd5b386f2fb38f1db59b0d8abed901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnrG-Vu42S3zcoDJ3lDQTg.png"/></div></div></figure><p id="da5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们已经在前面的步骤中配置了路由，但是我们并没有在页面上实际使用这些路由器。我们可以修改我们的<code class="fe ol om on oo b">App.vue</code>文件来实际使用这个路由器:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="c830" class="ln lo iq oo b gy ot ou l ov ow">&lt;template&gt;<br/>  &lt;ul&gt;<br/>    &lt;li&gt;&lt;router-link to="/"&gt;Home&lt;/router-link&gt;&lt;/li&gt;<br/>    &lt;li&gt;&lt;router-link to="/vuex"&gt;Vuex&lt;/router-link&gt;&lt;/li&gt;<br/>    &lt;li&gt;&lt;router-link to="/axios"&gt;Axios&lt;/router-link&gt;&lt;/li&gt;<br/>  &lt;/ul&gt;<br/>  &lt;router-view/&gt;<br/>&lt;/template&gt;</span><span id="0255" class="ln lo iq oo b gy oy ou l ov ow">&lt;script lang="ts"&gt;<br/>import { defineComponent } from 'vue'</span><span id="c5fa" class="ln lo iq oo b gy oy ou l ov ow">export default defineComponent({<br/>  name: 'App'<br/>})<br/>&lt;/script&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pr"><img src="../Images/867429bd35446271baa53ca17ae58bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-CUIRkjrpfMFVFBfd3FDuA.png"/></div></div></figure><p id="bdf6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好了，这时候我们终于完成了路由器的配置。</p><p id="9845" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们来看看这个项目的结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/6b27814645ee34aea6fa5587190677a7.png" data-original-src="https://miro.medium.com/v2/1*vamwWcoOcJQ7A9_qGXyrqA.gif"/></div></figure><p id="eda9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在配置Vue路由器时，我们大致遵循以下流程:</p><ul class=""><li id="98ec" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">安装软件包</li><li id="e415" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">编写配置文件</li><li id="5797" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">将其安装在<code class="fe ol om on oo b">main.ts</code></li></ul><p id="0cc8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">配置Vuex的过程完全一样。</p><h2 id="ccb4" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">集成Vuex</h2><ol class=""><li id="b57c" class="nd ne iq kt b ku mg kx mh la nf le ng li nh lm ni nj nk nl bi translated">安装Vuex:</li></ol><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="f5d8" class="ln lo iq oo b gy ot ou l ov ow">$ npm i vuex@next</span></pre><p id="9bb9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.创建配置文件:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="a857" class="ln lo iq oo b gy ot ou l ov ow">└── src/<br/>    ├── store/<br/>        ├── index.ts</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pv"><img src="../Images/ae9c156e853fef1e1c09ea5d7eefb7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h1_yTBKXj475gKwiw3iE8g.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="eb4d" class="ln lo iq oo b gy ot ou l ov ow">import { createStore } from "vuex";</span><span id="0bba" class="ln lo iq oo b gy oy ou l ov ow">const defaultState = {<br/>  count: 0,<br/>};</span><span id="119c" class="ln lo iq oo b gy oy ou l ov ow">// Create a new store instance.<br/>export default createStore({<br/>  state() {<br/>    return defaultState;<br/>  },<br/>  mutations: {<br/>    increment(state: typeof defaultState) {<br/>      state.count++;<br/>    },<br/>  },<br/>  actions: {<br/>    increment(context) {<br/>      context.commit("increment");<br/>    },<br/>  },<br/>  getters: {<br/>    double(state: typeof defaultState) {<br/>      return 2 * state.count;<br/>    },<br/>  },<br/>});</span></pre><p id="617a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.将其安装在<code class="fe ol om on oo b">main.ts</code>中</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pw"><img src="../Images/cf99722c11616c424728327047ef055d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PkFVbA1WvmBc9tkYt8qwxw.png"/></div></div></figure><h2 id="fc0d" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">集成元素增强版</h2><p id="4eb4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Element Plus是一个支持Vue3的UI框架，这里我们先安装一下:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="5793" class="ln lo iq oo b gy ot ou l ov ow">$ npm i element-plus</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/ee7d5fac7cb4167c851ed6bee53ea26e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*43-2DeDer3MfTgMpHgumLA.png"/></div></figure><p id="3ec9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后在<code class="fe ol om on oo b">main.ts</code>文件中挂载Element Plus:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="b06c" class="ln lo iq oo b gy ot ou l ov ow">import { createApp } from 'vue'<br/>import App from './App.vue'</span><span id="2deb" class="ln lo iq oo b gy oy ou l ov ow">import ElementPlus from 'element-plus'<br/>import 'element-plus/lib/theme-chalk/index.css'</span><span id="9980" class="ln lo iq oo b gy oy ou l ov ow">createApp(App).use(ElementPlus).mount('#app')</span></pre><p id="c3d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">需要注意的是，对于UI框架，我们不仅要导入它的JavaScript模块，还要导入一个CSS样式文件。</p><p id="fd54" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我用的是Element Plus框架，你可以选择一个你喜欢的UI框架。不考虑UI框架，使用流程如下:</p><ul class=""><li id="e1b7" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">安装软件包</li><li id="c2fd" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">在<code class="fe ol om on oo b">main.ts</code>中导入JavaScript模块</li><li id="63f1" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">导入CSS样式</li></ul><h2 id="bb52" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">为HTTP请求集成Axios</h2><p id="f66a" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Axios和Vue之间没有耦合关系，我们可以直接安装最新版本的Axios:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="54e5" class="ln lo iq oo b gy ot ou l ov ow">$ npm i axios</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="ab gu cl ox"><img src="../Images/a92db2b150768e7a5726e5afe8e12efb.png" data-original-src="https://miro.medium.com/v2/format:webp/1*3nxqBwqTzY6kgLDpivQP4Q.png"/></div></figure><p id="9573" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Axios是一个进行HTTP请求的工具。因此，我们在<code class="fe ol om on oo b">utils</code>目录中创建<code class="fe ol om on oo b">axios.ts</code>作为Axios配置文件:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="0b93" class="ln lo iq oo b gy ot ou l ov ow">└── src/<br/>    ├── utils/<br/>        ├── axios.ts</span></pre><p id="0d87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ol om on oo b">axios.ts</code>的内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="px py l"/></div></figure><p id="c847" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">以下是Axios工作原理的一个示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="px py l"/></div></figure><h2 id="1f59" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">集成CSS预编译器手写笔/Sass/Less</h2><p id="f9fc" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">本项目使用CSS预编译器手写笔，可以直接作为开发依赖安装。Vite已经在内部为我们集成了相关的加载器，所以不需要额外的配置。当然，你也可以用同样的方法使用Sass和Less。</p><p id="5bde" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="9338" class="ln lo iq oo b gy ot ou l ov ow">$ npm i stylus -D</span><span id="8465" class="ln lo iq oo b gy oy ou l ov ow"># or<br/>$ npm i sass -D<br/>$ npm i less -D</span></pre><p id="f68f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">用法:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="1d9a" class="ln lo iq oo b gy ot ou l ov ow">&lt;style lang="stylus"&gt;<br/>  ...<br/>&lt;/style&gt;</span></pre></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="f36a" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">真实项目</h1><p id="869d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">恭喜你，我们项目的核心框架已经完成了。</p><p id="dfe0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之前解释Vuex、Element Plus、Axios的时候，并没有提供具体的代码示例。因此，我准备了一个完整的项目，完全使用了前面提到的技术:</p><p id="547b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae nm" href="https://github.com/BytefishMedium/vite-vue3-starter-core" rel="noopener ugc nofollow" target="_blank">https://github.com/BytefishMedium/vite-vue3-starter-core</a></p><p id="3de4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">与我们之前展示的最终项目相比，这个repo只包含核心工作代码，没有其他复杂的配置，非常适合个人项目。</p><p id="1e3d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于文章篇幅原因，我就不分析这个项目的具体内容了。可以自己看源代码，有问题可以留言评论。当然，如果你想让我再写一篇关于这个项目的文章，请告诉我。</p><p id="b407" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你只是想开发一个个人项目，那么上面的tech stack就足够你用了。但是如果你想开发一个企业级的项目，代码风格检查，单元测试，自动部署是必须的。下面我们将依次介绍这些。</p><p id="33e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">来吧，我的朋友。</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="ac1c" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">代码风格</h1><p id="4aa0" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">随着前端应用逐渐变得更大更复杂，当多人参与同一个项目时，每个人的习惯都不一样。他们经常使用不同的编码风格在项目中编写代码。如果继续下去，项目的健壮性会越来越差。</p><p id="c015" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要解决这些问题，理论上来说，口头约定和代码审查都可以，但是这些方法不能提供实时反馈，沟通成本高，不够灵活。更重要的是，它无法控制。我们必须在项目中使用一些工具来约束代码风格。</p><p id="2b60" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">本节解释了如何使用editor config+appearlier+ESLint来实现代码格式标准化。</p><p id="0ac1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样做有好处:</p><ul class=""><li id="6e04" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">解决跨团队代码不规范导致的可读性差、可维护性差的问题。</li><li id="6269" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">解决团队成员使用不同编辑器导致的编码风格不一致的问题。</li><li id="4c9d" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">提前发现代码风格问题，给出相应的提示，及时修复</li><li id="7572" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">通过减少代码审查过程的来回次数来节省时间。</li><li id="54b3" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">自动格式化，统一编码风格。</li></ul><h2 id="4559" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">编辑器配置</h2><p id="d7ae" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">不同的编辑器有不同的默认行为:</p><ul class=""><li id="3f66" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">一些编辑器默认使用UTF8字符集；其他人没有。</li><li id="26bb" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">有些编辑器默认缩进2个空格，有些是4个。</li><li id="92f7" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi">…</li></ul><p id="4a19" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">要为项目的不同成员统一编辑器的默认行为，我们可以使用EditorConfig。EditorConfig有助于为在不同编辑器和ide中处理同一项目的多个开发人员保持一致的编码风格。</p><p id="6804" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在打开我们之前的项目，在项目的根目录下添加一个<code class="fe ol om on oo b">.editorconfig</code>文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pz"><img src="../Images/16c1d72ae9828c21c483c8bacf6588d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnh-PfDFOMahytUYLocqOA.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="1afd" class="ln lo iq oo b gy ot ou l ov ow"># Editor configuration, see <a class="ae nm" href="http://editorconfig.org" rel="noopener ugc nofollow" target="_blank">http://editorconfig.org</a></span><span id="8735" class="ln lo iq oo b gy oy ou l ov ow"># Indicates that this is the top level EditorConfig configuration file<br/>root = true</span><span id="ce16" class="ln lo iq oo b gy oy ou l ov ow">[*] # Indicates that the following rules apply to all files<br/>charset = utf-8 # Set the character set to utf-8<br/>indent_style = space # tab | space）<br/>indent_size = 2 # 2 spaces<br/>end_of_line = lf<br/>trim_trailing_whitespace = true<br/>insert_final_newline = true</span><span id="090c" class="ln lo iq oo b gy oy ou l ov ow">[*.md] # Indicates that only md files apply the following rules<br/>max_line_length = off<br/>trim_trailing_whitespace = false</span></pre><p id="ad67" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，这个特性还没有内置到VSCode中，您需要安装一个插件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qa"><img src="../Images/ec6470e93508e8d5e1c083d59f096997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GNFPq_SIuWPO0rPBfKWSHQ.png"/></div></div></figure><p id="20b7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像WebStorm这样的编辑器已经内置了这个功能，你可以直接使用。</p><h2 id="cc86" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">较美丽</h2><p id="d6b3" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">漂亮是一个强大的代码格式化工具，支持诸如JavaScript、TypeScript、CSS、SCSS、LESS、JSX、Angular、Vue、GraphQl、JSON、Markdown等语言。它可以处理几乎任何前端可用的文件格式，是目前最流行的代码格式化工具。</p><p id="b493" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="876c" class="ln lo iq oo b gy ot ou l ov ow">$ npm i prettier -D</span></pre><p id="4aa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">漂亮的支持多种格式的配置文件，如<code class="fe ol om on oo b">.json</code>、<code class="fe ol om on oo b">.yml</code>、<code class="fe ol om on oo b">.yaml</code>、<code class="fe ol om on oo b">.js</code>等。这里我们在这个项目的根目录下创建一个<code class="fe ol om on oo b">.prettierrc</code>文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qb"><img src="../Images/4d3c3a870bf8fe79af64745410477fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TdC5IMGW3NOflVtCd9znYg.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="7314" class="ln lo iq oo b gy ot ou l ov ow">{<br/>  "useTabs": false,<br/>  "tabWidth": 2,<br/>  "printWidth": 100,<br/>  "singleQuote": true,<br/>  "trailingComma": "none",<br/>  "bracketSpacing": true,<br/>  "semi": false<br/>}</span></pre><p id="c63e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦安装并配置了更漂亮的，您可以使用以下命令来格式化您的文件。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="4347" class="ln lo iq oo b gy ot ou l ov ow"><em class="pg"># </em>Format all files<br/>$ npx prettier --write .</span></pre><p id="0c93" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">注意，这个功能还没有内置到VSCode中，您需要安装一个插件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qc"><img src="../Images/c79e390ed0bb8ace61e4aea228ab968d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MwypYu_TA90zSRbFHCeh9g.png"/></div></div></figure><p id="e1fc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像WebStorm这样的ide已经内置了这个功能，所以您可以直接使用它。</p><p id="0c87" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在配置了更漂亮的配置文件后，当使用诸如VSCode或WebStorm之类的编辑器的格式化功能时，编辑器将根据在更漂亮的配置文件中指定的规则格式化文件。</p><p id="4b15" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">示例:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qd"><img src="../Images/afe2f35a00a9f630e1df54ab5085ee15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1ZjiK3uQFLCbniTwN3C3HA.gif"/></div></div></figure><p id="1fa7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这样，每个团队成员在格式化代码后都会得到相同的结果。</p><h2 id="660d" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">ESLint</h2><p id="d5c2" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">只有EditorConfig和漂亮是不够的，如果我们想对代码风格进行更深入的检查，那么ESLint是必不可少的。</p><p id="5454" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="bf96" class="ln lo iq oo b gy ot ou l ov ow">$ npm i eslint -D</span></pre><p id="725a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当使用eslit时，我们还需要编写一个eslit配置文件来说明代码风格的规则。但是手动编写配置文件太麻烦，而且容易出错，所以我们可以使用下面的命令自动生成配置文件。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="c818" class="ln lo iq oo b gy ot ou l ov ow">$ npx eslint --init</span></pre><p id="ab89" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">之后，我们将进入命令行交互界面，然后它将让我们做出一些选择:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qe"><img src="../Images/9f0644865ee1e8b656d7094133d7bf3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8K1Zsa7y1zNK1JOjCviKdg.png"/></div></div></figure><p id="c099" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，它将让我们选择严格的代码检查级别。在这里，我们希望ESLint能够强制执行代码样式检查，所以我们选择了第三个选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qf"><img src="../Images/35092af2fb256680f5831ce799dd609e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mtfDTuQUXkBRdWIqkdlR5w.png"/></div></div></figure><p id="c3b0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们选择JavaScript模块。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qg"><img src="../Images/fe49faba86a1cf2641bab984e1dfa454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-SHjA__uuXwP4G40scOA_A.png"/></div></div></figure><p id="e675" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们选择Vue.js。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qh"><img src="../Images/762eab17592507a91da4c9fed2c858d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgL1aV5kBoelOXQx1rQ4JQ.png"/></div></div></figure><p id="831d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是的，我们使用打字稿。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qi"><img src="../Images/90cfd4b9d2fc3364846a61143d0bc9d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lOogKaW0f7rhRJu1_r0Hdw.png"/></div></div></figure><p id="d543" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们的项目在浏览器中运行，构建工具和稍后的测试框架在Node.js中运行，所以检查浏览器和Node.js。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qj"><img src="../Images/b34a9cd8d76b3c2a91196c0bea860531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nk-5k-YxWdkU2pWUKdwI6g.png"/></div></div></figure><p id="678c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">接下来是最重要的一步:配置代码样式规则。虽然我们可以定制规则，但我们没有必要。我们可以从社区获得一个成熟的解决方案。</p><p id="7cc4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以我们选择了“使用流行的风格指南”。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qk"><img src="../Images/28ac1e87a28fe42084b8520a3054bcce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ty8Wta9GzbHIsvWSup37Vg.png"/></div></div></figure><p id="89c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ESLint给我们列出了三个在社区中流行的JavaScript风格指南:Airbnb、Standard和Google。</p><p id="9940" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这三个风格指南是由许多有多年开发经验的人编写的，足以被世界各地的许多大小公司使用。</p><p id="145f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们选择了Airbnb，它是GitHub上最著名的，以节省配置ESLint规则的繁琐时间，然后让团队成员学习Airbnb的JavaScript风格指南。</p><p id="52bf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae nm" href="https://github.com/airbnb/javascript" rel="noopener ugc nofollow" target="_blank">https://github.com/airbnb/javascript</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ql"><img src="../Images/7a0635cf66a9f72a585545869f7b64fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bTzUWaefyVZz6kaa"/></div></div></figure><p id="e68d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">继续。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qm"><img src="../Images/9e4ab22ba7a40e9434f3d315df7f697d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iSj45ThoZcjjyWco19WKYw.png"/></div></div></figure><p id="5544" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们选择JavaScript。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qn"><img src="../Images/fffc515d0104fd14cbfbf30aaca414ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T59xByKiSotEw0V7AG5duw.png"/></div></div></figure><p id="f99d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">是的，我们想现在安装npm。</p><p id="4ec1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">注意:</strong>如果自动安装依赖失败，可以手动安装:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="f6bd" class="ln lo iq oo b gy ot ou l ov ow">$ npm i <a class="ae nm" href="http://twitter.com/typescript" rel="noopener ugc nofollow" target="_blank">@typescript</a>-eslint/eslint-plugin <a class="ae nm" href="http://twitter.com/typescript" rel="noopener ugc nofollow" target="_blank">@typescript</a>-eslint/parser eslint-config-airbnb-base eslint-plugin-import eslint-plugin-vue -D</span></pre><p id="7ecb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">完成这些选项后，我们可以在项目的根目录中看到配置文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qo"><img src="../Images/18c1fbad24c11f58e133f5ea54347e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R1_uzsOjcNkpbn2DesaDow.png"/></div></div></figure><p id="7448" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以使用ESLint，但是如果你使用VS代码，你需要安装一个插件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qp"><img src="../Images/9f33a73f69f42a2d8828a3896a315224.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t4ITTafRZqW6qerEmSXI4w.png"/></div></div></figure><p id="605f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">ESLint会提示我们是否有不符合规则的代码:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qq"><img src="../Images/68278bccd35c15e069707950b570de40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BeJXfIK2e-9kpHkgl6Bu7w.png"/></div></div></figure><h2 id="ec2a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">编辑器配置、更漂亮和ESLint之间的关系</h2><p id="6c7e" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在这里，您可能想知道为什么我们需要这么多与风格相关的工具，只使用一个可以吗？</p><p id="cf30" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">事实上，这三种工具的功能完全不同。EditorConfig用于控制编辑器的默认行为，并且仅在您通过编辑器输入代码时才起作用。</p><p id="f451" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您正在复制和粘贴其他人的代码，那么EditorConfig不会帮助您更正代码样式。更漂亮的是，它重新格式化了代码，广泛适用，但无法在更深的层次解析JavaScript代码。另一方面，ESLint旨在检查JavaScript和TypeScript代码，以便更深入地了解语法细节。</p><p id="d982" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，“更漂亮”和“ESLint”在某些方面有重叠，所以它们会发生冲突。让我们解决这个问题。</p><h2 id="e79b" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">解决“漂亮”和“聪明”之间的冲突</h2><p id="3fa5" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Airbnb JavaScript Style Guide验证用于本项目的ESLint配置中。其中一个规则是在代码结束后添加一个分号，但是我们在代码结束后添加了一个规则，非分号项，到了更漂亮的配置文件中，所以有一个冲突。</p><p id="587a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了解决这些冲突，我们需要使用<code class="fe ol om on oo b">eslint-plugin-prettier</code>和<code class="fe ol om on oo b">eslint-config-prettier</code>。</p><ul class=""><li id="ced0" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated"><code class="fe ol om on oo b">eslint-plugin-prettier</code>:将“更漂亮”的规则设置为ESLint的规则。</li><li id="1650" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated"><code class="fe ol om on oo b">eslint-config-prettier</code>:关闭ESLint中与“更漂亮”冲突的规则。</li></ul><p id="e3ef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，形成优先级:更漂亮的规则&gt; ESLint规则。</p><p id="4034" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在让我们安装这两个插件:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="9f45" class="ln lo iq oo b gy ot ou l ov ow">$ npm i eslint-plugin-prettier eslint-config-prettier -D</span></pre><p id="773a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并将更漂亮的插件添加到<code class="fe ol om on oo b">.eslintrc.js</code>:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="ce51" class="ln lo iq oo b gy ot ou l ov ow">module.exports = {<br/>  ...<br/>  extends: [<br/>    'plugin:vue/essential',<br/>    'airbnb-base',<br/>    'plugin:prettier/recommended'<br/>  ],<br/>  ...<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qr"><img src="../Images/19b5ed63cc54268b0a5435994384683b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*khGljQvZ9LL8ggXq5_Y9Vw.png"/></div></div></figure><h2 id="9354" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">强壮的</h2><p id="5ea4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">虽然我们以前通过漂亮点和ESLint写了很多规则，但是对于一个大项目来说，总会有人不遵守规则，或者不小心违反了规则。为了使这些规则可以执行，我们可以使用一种叫做哈斯基的工具。</p><p id="c2e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当用户试图提交时，哈士奇可以拦截<code class="fe ol om on oo b">git comit</code>、通过哈士奇执行eslit命令，如果发现代码不符合eslit的规则，则不允许<code class="fe ol om on oo b">git commit</code>。</p><p id="2e77" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">安装Husky并初始化配置:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="5d9b" class="ln lo iq oo b gy ot ou l ov ow">$ npx husky-init &amp;&amp; npm install</span></pre><p id="1994" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令执行以下操作:</p><ol class=""><li id="86a5" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ni nj nk nl bi translated">安装哈士奇</li></ol><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qs"><img src="../Images/cb26404e860a7768bcd663c9b5c9e818.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pfvrZvKNVlU8EpwlbPpCzA.png"/></div></div></figure><p id="2e4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.在项目根目录下创建<code class="fe ol om on oo b">.husky</code>目录</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qt"><img src="../Images/3e0fa37b674b932bf147bde462deaec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_kBrBxrmLkEiclHPvgyPQ.png"/></div></div></figure><p id="8be5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.在<code class="fe ol om on oo b">.husky</code>目录下创建一个<code class="fe ol om on oo b">pre-commit</code>钩子，并将<code class="fe ol om on oo b">precommit</code>命令初始化为<code class="fe ol om on oo b">npm test</code>。</p><p id="8b07" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">4.修改<code class="fe ol om on oo b">package.json</code>的<code class="fe ol om on oo b">scripts</code>，增加<code class="fe ol om on oo b">“prepare”: “husky install”</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qu"><img src="../Images/ad2409e5096c4e7e6bd0dd336b772ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EQc0lOXI6YIfE24D7SUonA.png"/></div></div></figure><p id="ab2f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面生成的内容是默认配置。现在我们将对以上内容做一些简单的修改。</p><p id="010d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">修改<code class="fe ol om on oo b">.husky/pre-commit</code>文件:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qv"><img src="../Images/33a5e007c300c01acf17c81e78c7eb88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*heTdb5iin-iykDyQRHt4Ww.png"/></div></div></figure><p id="3e4b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将<code class="fe ol om on oo b">npm test</code>改为<code class="fe ol om on oo b">eslint — fix ./src — ext .vue,.js,.ts</code></p><p id="c7dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面的<code class="fe ol om on oo b">pre-commit</code>钩子文件做的是:当我们做<code class="fe ol om on oo b">git commit-m “XXX”</code>时，它首先对<code class="fe ol om on oo b">src</code>目录中的所有<code class="fe ol om on oo b">.vue</code>、<code class="fe ol om on oo b">.js</code>和<code class="fe ol om on oo b">.ts</code>文件执行<code class="fe ol om on oo b">eslint — fix</code>命令。如果ESLint没有报告错误，那么提交过程是正常的；如果ESLint报告了一个错误，那么这个提交被终止。</p><p id="5fbb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，一个新的问题出现了:有时我们只改变一个或两个文件，但我们对所有文件执行<code class="fe ol om on oo b">eslint --fix</code>。如果这是一个历史项目，并且我们在过程中间配置了ESLint规则，那么当提交代码时，所有其他未修改的“历史”文件也将被检查，这可能会导致大量文件带有ESLint错误，这显然不是我们想要的。</p><p id="c90d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要确保只使用ESLint修复这次写的代码，不影响其他代码。是一个很棒的工具，我们可以用它来代替。</p><h2 id="7131" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">皮棉阶段</h2><p id="b587" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><code class="fe ol om on oo b">lint-staged</code>常用与哈士奇配合使用。它允许Husky的钩子仅对Git暂存区中的文件(由<code class="fe ol om on oo b">git add</code>创建的文件)发出命令，而不对任何其他文件发出命令。</p><ol class=""><li id="3442" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ni nj nk nl bi translated">安装:</li></ol><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="0e01" class="ln lo iq oo b gy ot ou l ov ow">$ npm i lint-staged -D</span></pre><p id="6238" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.在<code class="fe ol om on oo b">package.json</code>上添加配置</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qw"><img src="../Images/88c1fc2d9ba39abe7168f94bcd4b0894.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5g3TuEJ-vudTuAkG-YJE2Q.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="0dc5" class="ln lo iq oo b gy ot ou l ov ow">"lint-staged": {<br/>  "*.{vue,js,ts}": "eslint --fix"<br/>},</span></pre><p id="bfd0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令意味着只对git暂存区中的<code class="fe ol om on oo b">.vue</code>、<code class="fe ol om on oo b">.js</code>和<code class="fe ol om on oo b">.ts</code>文件执行<code class="fe ol om on oo b">eslint --fix</code>。</p><p id="e87e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">3.将<code class="fe ol om on oo b">.husky/pre-commit</code>挂钩触发命令修改为:<code class="fe ol om on oo b">npx lint-staged</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qx"><img src="../Images/a0b3590fbafb2fff9216e2f1320f514a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BO8afrgyLwh5k1pz9c4B7Q.png"/></div></div></figure></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="0f27" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">Git提交消息约定</h1><p id="fdcf" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们之前已经统一了代码风格，并对提交进行了严格的限制，以确保项目的质量。在多人项目中，也有提交代码的情况:不能保证每个人都能准确描述提交消息。</p><p id="4da5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了使提交消息标准化，我们可以采用社区中最流行的风格:<strong class="kt ir"> AngularJS Git提交消息约定</strong></p><p id="1de2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">看看Angular项目的提交历史:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qy"><img src="../Images/e774782685626ca5df31654432b28dfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VIhtuKHeVrJUC-2x"/></div></div></figure><p id="594b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从上面的图像中可以看出，这些提交消息是格式化的。</p><p id="4174" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于<em class="pg">Git Commit Message conventi on</em>的详细信息，您可以到下面的链接查看官方文件:</p><p id="43a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae nm" href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit#" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/document/d/1qr dfciipjsldn 3el 15 ijygynpihorgul 1 _ OOAqWjiDU5Y/edit #</a></p><p id="820b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们集中讨论如何在项目中使用它。</p><h2 id="5b2d" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">委托</h2><p id="5421" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">Commititizen是一个帮助您编写格式良好的提交消息的工具。</p><ol class=""><li id="fd96" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ni nj nk nl bi translated">装置</li></ol><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="b323" class="ln lo iq oo b gy ot ou l ov ow">$ npm install commitizen -D</span></pre><p id="c065" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.初始化</p><p id="fe8b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">成功安装调试后，我们使用<code class="fe ol om on oo b">cz-conventional-changelog</code>适配器初始化项目:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="7d89" class="ln lo iq oo b gy ot ou l ov ow">$ npx commitizen init cz-conventional-changelog --save-dev --save-exact</span></pre><p id="fb17" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个命令做了一些事情:</p><ul class=""><li id="c112" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">安装<code class="fe ol om on oo b">cz-conventional-changelog</code>到开发依赖项</li><li id="08c3" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated">将<code class="fe ol om on oo b">config.commitizen</code>添加到<code class="fe ol om on oo b">package.json</code></li></ul><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="2a2e" class="ln lo iq oo b gy ot ou l ov ow">"config": {<br/>  "commitizen": {<br/>    "path": "./node_modules/cz-conventional-changelog"<br/>  }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qz"><img src="../Images/6a93d15ea641af78a6f74bb2f93c7804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-G6bNo2QGJkEGgCmjp0kww.png"/></div></div></figure><h2 id="972a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">使用佣金</h2><p id="4e20" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">过去，我们使用<code class="fe ol om on oo b">git commit -m ‘xxx'</code>提交代码，但是现在我们可以更改为<code class="fe ol om on oo b">git cz</code>或<code class="fe ol om on oo b">npx cz</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ra"><img src="../Images/19c590c5f506c58b67b96a6818f8b176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cRkWHyk8gFdPH--5nHytqg.png"/></div></div></figure><p id="4727" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">执行该命令后，我们将进入一个命令行交互界面，在那里我们将被提示写一个标准的提交消息。</p><p id="3e0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">示例:</strong></p><ul class=""><li id="41b9" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">功绩</li></ul><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="22a3" class="ln lo iq oo b gy ot ou l ov ow">feat(browser): onUrlChange event (popstate/hashchange/polling)</span><span id="4e7f" class="ln lo iq oo b gy oy ou l ov ow">Added new event to browser:<br/>- forward popstate event if available<br/>- forward hashchange event if popstate not available<br/>- do polling when neither popstate nor hashchange available</span><span id="bfc2" class="ln lo iq oo b gy oy ou l ov ow">Breaks $browser.onHashChange, which was removed (use onUrlChange instead)</span></pre><ul class=""><li id="4e1d" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">固定</li></ul><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="ef2c" class="ln lo iq oo b gy ot ou l ov ow">fix(compile): couple of unit tests for IE9</span><span id="4781" class="ln lo iq oo b gy oy ou l ov ow">Older IEs serialize html uppercased, but IE9 does not...<br/>Would be better to expect case insensitive, unfortunately jasmine does<br/>not allow to user regexps for throw expectations.</span><span id="53fc" class="ln lo iq oo b gy oy ou l ov ow">Closes #392<br/>Breaks foo.bar api, foo.baz should be used instead</span></pre><ul class=""><li id="2793" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated">风格</li></ul><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="98b5" class="ln lo iq oo b gy ot ou l ov ow">style(location): add couple of missing semi colons</span></pre><h2 id="d318" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">佣金</h2><p id="6e4c" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">为了确保每个提交消息都满足我们的要求，我们可以使用husky+commit lit来实施验证。这与我们之前在代码样式部分使用它的方式相同。</p><ol class=""><li id="e6ed" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ni nj nk nl bi translated">装置</li></ol><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="a6a5" class="ln lo iq oo b gy ot ou l ov ow">$ npm i @commitlint/config-conventional @commitlint/cli -D</span></pre><p id="278f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">2.配置</p><p id="72b9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建<code class="fe ol om on oo b">commitlint.config.js</code>并填写以下内容:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="90b6" class="ln lo iq oo b gy ot ou l ov ow">module.exports = { extends: ['<a class="ae nm" href="http://twitter.com/commitlint/config-conventional" rel="noopener ugc nofollow" target="_blank">@commitlint/config-conventional</a>'] }</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rb"><img src="../Images/36a4165977d779c275a433b31ac1e89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCTWZK6DQiv2F_6YmS9tjA.png"/></div></div></figure><p id="1541" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">加哈士奇<code class="fe ol om on oo b">commit-msg</code>钩:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="8343" class="ln lo iq oo b gy ot ou l ov ow">$ npx husky add .husky/commit-msg "npx --no-install commitlint --edit $1"</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rc"><img src="../Images/10b1a59574633a70f83b40b8ec6d287e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MHs7d5Rd8Ln8JWLlV9oAtw.png"/></div></div></figure><p id="5c84" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，如果我们试图提交一个不符合规则的信息，它将被彻底拒绝。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rd"><img src="../Images/b0a24b0659d8008febcfa27caf900843.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwCaqI_s-UoK5DlGU9R2NA.png"/></div></div></figure></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="5920" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">单元测试</h1><p id="48d3" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">单元测试是项目开发中的一个重要步骤。完整的测试可以为代码提供质量保证，减少错误的发生。</p><p id="e43c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这里，我们使用以下工具:</p><ul class=""><li id="532a" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated"><a class="ae nm" href="https://github.com/vuejs/vue-test-utils-next" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">Vue-Test util</strong></a>:Vue Test util的下一次迭代。它的目标是Vue 3。</li><li id="e069" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated"><a class="ae nm" href="https://github.com/facebook/jest" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">玩笑</strong> </a>:令人愉悦的JavaScript测试。</li><li id="74cc" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated"><a class="ae nm" href="https://github.com/vuejs/vue-jest" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">Vue-Jest</strong></a><strong class="kt ir">:</strong>Jest Vue变压器</li><li id="ad12" class="nd ne iq kt b ku nn kx no la np le nq li nr lm ns nj nk nl bi translated"><a class="ae nm" href="https://github.com/kulshekhar/ts-jest" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">ts-jest</strong></a><strong class="kt ir">:</strong>一个带有源映射支持的Jest转换器，可以让你使用Jest来测试用TypeScript编写的项目。</li></ul><h2 id="0e4b" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">安装:</h2><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="d094" class="ln lo iq oo b gy ot ou l ov ow">$ npm i <a class="ae nm" href="http://twitter.com/vue/test-utils" rel="noopener ugc nofollow" target="_blank">@vue/test-utils</a>@next jest vue-jest@next ts-jest -D</span><span id="b095" class="ln lo iq oo b gy oy ou l ov ow"># or use yarn</span><span id="e823" class="ln lo iq oo b gy oy ou l ov ow">$ yarn add @vue/test-utils@next jest vue-jest@next ts-jest --dev</span></pre><h2 id="02b9" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">配置:</h2><p id="175d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在根目录下创建<code class="fe ol om on oo b">jest.config.js</code>。</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="5111" class="ln lo iq oo b gy ot ou l ov ow">module.exports = {<br/>  moduleFileExtensions: ['vue', 'js', 'ts'],<br/>  preset: 'ts-jest',<br/>  testEnvironment: 'jsdom',<br/>  transform: {<br/>    '^.+\\.vue$': 'vue-jest',<br/>    '^.+\\.ts$': 'ts-jest'<br/>  },<br/>  testRegex: '(/__tests__/.*|(\\.|/)(test|spec))\\.(ts)$'<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi re"><img src="../Images/9239665b7b6f0dec057bc2564cdc6f34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVFXkV3cblmRUzI_GDHF-A.png"/></div></div></figure><h2 id="8895" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">测试文件:</h2><p id="3559" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">创建要测试的Vue组件:</p><ul class=""><li id="3425" class="nd ne iq kt b ku kv kx ky la ps le pt li pu lm ns nj nk nl bi translated"><code class="fe ol om on oo b">./src/views/Test.vue</code></li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rf"><img src="../Images/8d6e25e935b93d075d87f45005bfd351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*de4mxgD_OVt11j3tx8W2gA.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="1fb7" class="ln lo iq oo b gy ot ou l ov ow">&lt;template&gt;<br/>  &lt;div class="test-container page-container"&gt;<br/>    &lt;div class="page-title"&gt;Unit Test Page&lt;/div&gt;<br/>    &lt;p&gt;count is: {{ count }}&lt;/p&gt;<br/>    &lt;button <a class="ae nm" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="increment"&gt;increment&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="6498" class="ln lo iq oo b gy oy ou l ov ow">&lt;script lang="ts"&gt;<br/> import { defineComponent, ref } from 'vue'</span><span id="7cae" class="ln lo iq oo b gy oy ou l ov ow">export default defineComponent({<br/>    name: 'Vuex',<br/>    setup() {<br/>      const count = ref&lt;number&gt;(0)<br/>      const increment = () =&gt; {<br/>        count.value += 1<br/>      }<br/>      return { count, increment }<br/>    }<br/>  })<br/>&lt;/script&gt;</span></pre><p id="a041" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在<code class="fe ol om on oo b">tests</code>目录下创建一个测试文件:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="73aa" class="ln lo iq oo b gy ot ou l ov ow">├── src/<br/>└── tests/                      <br/>    ├── Test.spec.ts</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rg"><img src="../Images/c5399d811d62a35e7b16317035b3260d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qCDVa21H2ilBgy4fls46uQ.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="631f" class="ln lo iq oo b gy ot ou l ov ow">import { mount } from '<a class="ae nm" href="http://twitter.com/vue/test-utils" rel="noopener ugc nofollow" target="_blank">@vue/test-utils</a>'<br/>import Test from '../src/views/Test.vue'</span><span id="0f5d" class="ln lo iq oo b gy oy ou l ov ow">test('Test.vue', async () =&gt; {<br/>  const wrapper = mount(Test)<br/>  expect(wrapper.html()).toContain('Unit Test Page')<br/>  expect(wrapper.html()).toContain('count is: 0')<br/>  await wrapper.find('button').trigger('click')<br/>  expect(wrapper.html()).toContain('count is: 1')<br/>})</span></pre><h2 id="2eac" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">整合<code class="fe ol om on oo b">@type/jest</code></h2><p id="9e11" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">如果您发现此错误:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi qy"><img src="../Images/ef4b8b9d4384ca75f9511600b3f49642.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tm7oVKGuVJoDyF4u"/></div></div></figure><p id="85f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过安装此软件包来解决此问题:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="1303" class="ln lo iq oo b gy ot ou l ov ow">$ npm i <a class="ae nm" href="http://twitter.com/types/jest" rel="noopener ugc nofollow" target="_blank">@types/jest</a> -D</span></pre><h2 id="0b2c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">集成eslint-插件-jest</h2><p id="3d29" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">您可能会发现以下错误:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rh"><img src="../Images/efb7614201ca4452d71a222227e5634f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hMI0gLmLZlNv1EuD"/></div></div></figure><p id="9b13" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为我们在项目中使用了ESLint，而测试文件不符合ESLint的规则。因此，我们还需要给ESLint添加<code class="fe ol om on oo b">eslint-plugin-jest</code>插件，让它去验证jest文件。</p><p id="f055" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以通过安装此软件包来解决此问题:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="344e" class="ln lo iq oo b gy ot ou l ov ow">$ npm i eslint-plugin-jest -D</span></pre><p id="ed44" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后配置<code class="fe ol om on oo b">.eslintrc.js</code>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ri"><img src="../Images/4d2c7065b9fa36ec74c87301ce6bbce0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3zenUWku16Q-uzAmzgChEw.png"/></div></div></figure><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="fbbe" class="ln lo iq oo b gy ot ou l ov ow">module.exports = {<br/>  ...<br/>  extends: [<br/>    ...<br/>    'plugin:jest/recommended'<br/>  ],<br/>  ...<br/>}</span></pre><h2 id="b1eb" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">执行单元测试</h2><p id="35b3" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在<code class="fe ol om on oo b">package.json</code>中添加新脚本:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="e276" class="ln lo iq oo b gy ot ou l ov ow">{<br/>  "script": {<br/>    "test": "jest"<br/>  }<br/>}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rj"><img src="../Images/00af37c8afe644ca2f15fe64e03a39dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1h9mg8Sfz5661-rS5BRdeg.png"/></div></div></figure><p id="e937" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们可以用<code class="fe ol om on oo b">npm run test</code>开始单元测试:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rk"><img src="../Images/8696ccf685f4aee10cd0e9aad730fcb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6jPUwZdl8KgHG7dyglI46w.png"/></div></div></figure><p id="ef82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当单元测试没有全部通过时，我们需要根据错误信息优化相应组件的代码，以进一步提高项目的健壮性。</p><p id="6956" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，编写单元测试是一件痛苦的事情。我个人认为没有必要为所有组件编写单元测试。根据项目的实际情况来写就好了。</p><h2 id="4e92" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">推送测试</h2><p id="7590" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">和以前一样，每当开发人员试图将提交推送到远程存储库时，我们可以使用git挂钩来强制进行单元测试。</p><p id="9438" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">哈士奇打造<code class="fe ol om on oo b">pre-push</code>勾手:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="b7c4" class="ln lo iq oo b gy ot ou l ov ow">$ npx husky add .husky/pre-push "npm run test $1"</span></pre><p id="3e24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该命令将在<code class="fe ol om on oo b">.husky</code>目录下创建一个<code class="fe ol om on oo b">pre-push</code>文件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rl"><img src="../Images/fcb6ef3d8659fb8f73788b47439e8a37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Np6NBMw2gPL9tsUQ6Pk9dQ.png"/></div></div></figure><p id="e53f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ol om on oo b">npm run test</code>现在，每当开发人员试图将代码提交到远程存储库时，就会强制执行。</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="a990" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">自动化部署</h1><p id="ec25" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这个项目是建立一个标准的前端开发环境，为此我们使用CI(持续集成)来完成项目的最终部署。</p><p id="4e65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">常见的CI工具有GitHub Actions、GitLab CI、Travis CI、Circle CI等。</p><p id="f967" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里，我们使用GitHub动作。</p><h2 id="f264" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">什么是GitHub动作？</h2><p id="2aca" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">GitHub Actions是GitHub的持续集成服务。持续集成由捕获代码、运行测试、登录到远程服务器、发布到第三方服务等行为组成。</p><h2 id="8c3b" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">创建GitHub存储库</h2><p id="99fa" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">因为GitHub操作只对GitHub存储库可用，所以我们创建了GitHub存储库来托管项目代码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rm"><img src="../Images/934fe54b1e492afbf6a4100a339ed5e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxlQxf_Z9zB-ZZk695FyHQ.png"/></div></div></figure><h2 id="2520" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">生成令牌</h2><p id="df8d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">当使用GitHub动作时，我们需要生成一个具有足够权限的令牌。</p><p id="0b25" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，打开我们的GitHub帐户，进入:个人资料→开发者设置→个人访问令牌:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi rn"><img src="../Images/895a0195c0092274ea89c4a748e7882d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*CLL-3i5cPirgXm7fVno-nw.jpeg"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi pd"><img src="../Images/5a990c87c9f8e791d0de96845a917136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o74N91UAKbIl1NS1-vHn6g.jpeg"/></div></div></figure><p id="291f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们单击<code class="fe ol om on oo b">Generate new token</code>并获取令牌作为我们的访问凭证。</p><p id="99ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">生成令牌时，有一些权限控制选项。对于本文，我们将选择回购和工作流:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ro"><img src="../Images/6d57d1fdb5509c85b63687cfac353370.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yA20QUEdMtWF8sR8L8KcOg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rp"><img src="../Images/fbccc3ecbf2ff73464dc7a44a497d058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HxI9cK5KD59u8o7CfFs0eg.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rq"><img src="../Images/4b329e52a660d7dfb30f64af95ecfdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2psZzHRVvGoriEgPuy8bw.jpeg"/></div></div></figure><p id="25b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们有了自己的令牌。</p><h2 id="d5f6" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">将令牌设置到存储库</h2><p id="7749" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">将令牌添加到您的项目中:</p><p id="b7db" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ol om on oo b">settings</code>-&gt;-<code class="fe ol om on oo b">Secrets</code>-&gt;-<code class="fe ol om on oo b">New repository secret</code></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rr"><img src="../Images/abd4ddb773a01e8e6c7f05c4015c63c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S_mFWuOyDlbuCwzmHRckKw.png"/></div></div></figure><h2 id="276c" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">为操作创建配置文件</h2><p id="8bc4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">在<code class="fe ol om on oo b">.github/workflows</code>中创建<code class="fe ol om on oo b">deploy.yml</code>，内容如下:</p><pre class="kg kh ki kj gt op oo oq or aw os bi"><span id="3e9f" class="ln lo iq oo b gy ot ou l ov ow">name: deploy</span><span id="657f" class="ln lo iq oo b gy oy ou l ov ow">on:<br/>  push:<br/>    branches: [master]</span><span id="08be" class="ln lo iq oo b gy oy ou l ov ow">jobs:<br/>  deploy:<br/>    runs-on: ubuntu-latest<br/>    steps:<br/>      - uses: actions/checkout@v2</span><span id="9b6c" class="ln lo iq oo b gy oy ou l ov ow">- name: Setup Node.js v14.x<br/>        uses: actions/setup-node@v1<br/>        with:<br/>          node-version: "14.x"</span><span id="1fbd" class="ln lo iq oo b gy oy ou l ov ow">- name: Install<br/>        run: npm install</span><span id="ea58" class="ln lo iq oo b gy oy ou l ov ow">- name: Build<br/>        run: npm run build</span><span id="b8ba" class="ln lo iq oo b gy oy ou l ov ow">- name: Deploy<br/>        uses: peaceiris/actions-gh-pages@v3<br/>        with:<br/>          publish_dir: ./dist<br/>          github_token: ${{ secrets.GH_PAGES_DEPLOY }}<br/>          user_name: ${{ secrets.MY_USER_NAME }}<br/>          user_email: ${{ secrets.MY_USER_EMAIL }}<br/>          commit_message: Update Vite2.x + Vue3.x + TypeScript Starter</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rs"><img src="../Images/5a7595d7669d348a4a0a3bd9a0f68768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CcbdbOmCG5c8OlfNz3FWBg.png"/></div></div></figure><h2 id="7082" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">这是如何工作的？</h2><p id="39df" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">当新提交的代码被推送到GitHub仓库时，GitHub动作被触发，在GitHub服务器上执行动作命令，比如:安装依赖项，打包项目等等，然后将打包的静态文件部署到GitHub页面，最后，我们就可以在线访问了。</p><p id="a459" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用自动化部署，我们只需关注项目的开发阶段，将任何重复和枯燥的活动留给程序来完成。</p><blockquote class="rt ru rv"><p id="4ec3" class="kr ks pg kt b ku kv jr kw kx ky ju kz rw lb lc ld rx lf lg lh ry lj lk ll lm ij bi translated">懒惰是程序员的首要生产力。</p></blockquote><p id="930a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">其实GitHub Action可以完成很多，但这只是一个简单的练习。</p><h2 id="43a6" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">GitHub页面</h2><p id="2056" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">经过上面的配置，每当我们向资源库推送代码时，GitHub服务器都会自动为我们打包代码，并将打包后的代码放在<code class="fe ol om on oo b">gh-pages</code>分支中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi rz"><img src="../Images/ed0fdb24a0acd9c842877af78653b0d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y9h8wgmMDUQxYL0f4EHhCQ.png"/></div></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi sa"><img src="../Images/a56c1a92d8920d1590fad1782192b95c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/format:webp/1*LW18FHt47KjOxWZl0Nt4LA.png"/></div></figure><p id="387d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个分支<code class="fe ol om on oo b">gh-pages</code>是由GitHub Action创建的。</p><p id="1ceb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后让我们设置GitHub页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi sb"><img src="../Images/1b586d5782b061f3e32e689c62f390ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zaM4XBXpFnXlJyEbRAlFow.png"/></div></div></figure><p id="f0f8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">至此，我们的项目上线了:</p><div class="ml mm gp gr mn mo"><a href="https://bytefishmedium.github.io/vite-vue3-starter/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd ir gy z fp mt fr fs mu fu fw ip bi translated">Vite应用</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">编辑描述</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">bytefishmedium.github.io</p></div></div></div></a></div><p id="d158" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您后来对项目进行了更改并将其推送到GitHub，GitHub Actions会自动重新打包项目并为您更新GitHub页面。自动化部署可以为您节省大量时间。</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><h1 id="d95b" class="oa lo iq bd lp ob oc od ls oe of og lv jw oh jx ly jz oi ka mb kc oj kd me ok bi translated">结论</h1><p id="ede4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这是一篇长文。很高兴你看了。这既是对我的认可，也是对你的提升。</p><p id="ce8c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们总结一下我们以前所做的。</p><p id="8738" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们使用Vite初始化一个基本的项目模板。然后，我们手动安装了Vue路由器、Axios和其他库。在使用这些库的时候，基本上有三个步骤:安装相应的包，写配置文件，挂载到主程序中。</p><p id="2f80" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们使用EditorConfig、appeller和ESLint来标准化我们的代码格式，我们还设置了git提交规则，然后我们为项目添加了单元测试。为了确保遵守这些规则，我们使用Husky来设置git挂钩，并在提交和推送期间强制执行一些检查。</p><p id="9e34" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，我们使用GitHub Action来自动化部署。</p><p id="41d4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您对这些步骤有任何疑问，请随时发表评论。</p><p id="c381" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae nm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="pg">更多内容看plainenglish.io </em> </a></p></div></div>    
</body>
</html>
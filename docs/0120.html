<html>
<head>
<title>Create an Image Slideshow in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中创建图像幻灯片</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-react-js-slideshow-1b2f5bfb0ee6?source=collection_archive---------5-----------------------#2021-01-07">https://javascript.plainenglish.io/create-a-react-js-slideshow-1b2f5bfb0ee6?source=collection_archive---------5-----------------------#2021-01-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0e6d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">响应式、自动播放、手动导航按钮</h2></div><p id="9a4e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将构建一个具有自动播放功能和手动导航按钮的React图像滑块。我们不会使用任何外部库；所有原生JSX，CSS，JavaScript。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/e88eb308bacd7d7ae1bc20d922c349d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KWSlysN2ANm99Nad.png"/></div></div></figure><h1 id="88fa" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">我们将从把所有的元素放在屏幕上开始。</h1><p id="4dae" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">我们需要两个组件:<strong class="ke io"> Deck.js </strong>和<strong class="ke io"> Card.js </strong></p><p id="6cbc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">我们有6个元素需要处理:</strong></p><ul class=""><li id="8eed" class="mh mi in ke b kf kg ki kj kl mj kp mk kt ml kx mm mn mo mp bi translated">在<strong class="ke io">deck . js</strong>T8】1。一个<strong class="ke io"> img </strong>，我们将使用它作为向右移动(IMG) <br/> 2的按钮。一个<strong class="ke io"> img </strong>，我们将使用它作为向左移动(IMG) <br/> 3的按钮。一个<strong class="ke io">观察口</strong> (DIV) <br/> 4。一个<strong class="ke io">图片容器</strong> (DIV) <br/> 5。一个<strong class="ke io"> DIV </strong>来装我们的<strong class="ke io">单选</strong>按钮(DIV)</li><li id="f890" class="mh mi in ke b kf mq ki mr kl ms kp mt kt mu kx mm mn mo mp bi translated">在<strong class="ke io"> Card.js </strong>中<br/> 6。一个“<strong class="ke io">卡</strong>”，我们将使用它来保存图像(DIV) <br/> 7。实际<strong class="ke io">形象</strong> (IMG)</li></ul><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mv"><img src="../Images/a001906fcb55e48aa6b0fc87e2bab6d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9gpK3IXPZJHqgHFy.png"/></div></div></figure><h2 id="6d67" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">现在我们需要在屏幕上居中显示所有内容。</h2><p id="6288" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">我们将使用<strong class="ke io">绝对位置</strong>和<strong class="ke io">变换</strong>的组合。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ni"><img src="../Images/64ac1247c8738eb29061f2b2ce666358.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4jbSuRkQ-POzkadE.png"/></div></div></figure><h2 id="254b" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">现在一切都居中了，我们需要从左到右排列卡片。</h2><p id="6c92" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">我们编写了一个简单的函数来确定我们的卡片组中的<strong class="ke io">中间的卡片</strong>，并将中间左边的卡片移到左边，将中间右边的卡片移到右边。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="5669" class="mw ll in nk b gy no np l nq nr">order_cards = () =&gt; {<br/>  let counter_for_right = 1,<br/>      counter_for_left = this.middle_card_by_index;</span><span id="e326" class="mw ll in nk b gy ns np l nq nr">  for (let i = 0; i &lt; this.images.children.length; i++) {<br/>    this.images.children[i].style.transitionDuration = '0.0s';</span><span id="a9a5" class="mw ll in nk b gy ns np l nq nr">    if (i &lt; this.middle_card_by_index) {<br/>      this.images.children[i].style.left = `-${(counter_for_left * <br/>                        this.new_width) - (this.new_width / 2)}px`;<br/>      counter_for_left--;<br/>    } else if (i &gt; this.middle_card_by_index) {<br/>      this.images.children[i].style.left = `${(counter_for_right * <br/>                       this.new_width) + (this.new_width / 2)}px`;<br/>      counter_for_right++;<br/>    } else {<br/>      this.images.children[i].style.left = `${this.new_width / <br/>                                                             2}px`;<br/>    }<br/>  }<br/>}</span></pre><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi nt"><img src="../Images/675182249d15981132f74c4ba9ad2a88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qcRgZd8wZcLHtM6z.png"/></div></div></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="8f0a" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">让我们讨论响应。</h1><p id="2e95" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">为了让我们的传送带响应，我们需要根据<strong class="ke io">百分比</strong>而不是硬像素单位来调整<strong class="ke io">视口</strong>的大小。</p><p id="f4a8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以我们将只选择<strong class="ke io"> 50% </strong>并根据用户浏览器窗口的宽度计算一个硬<strong class="ke io">像素</strong>计数；然后我们将在<strong class="ke io">调整窗口事件监听器</strong>中运行这段代码。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="edb7" class="mw ll in nk b gy no np l nq nr">window.addEventListener(‘resize’, () =&gt; {<br/> img_width_as_percentage = 50;<br/> // img_width_as_percentage = window.innerWidth &lt; 768 ? 100 : img_width_as_percentage;</span><span id="e0ac" class="mw ll in nk b gy ns np l nq nr">this.new_width =<br/> /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ?<br/> (img_width_as_percentage / 100) * window.screen.width :<br/> (img_width_as_percentage / 100) * window.innerWidth;</span><span id="bdbd" class="mw ll in nk b gy ns np l nq nr">this.view_port.style.width = `${this.new_width}px`;</span><span id="6296" class="mw ll in nk b gy ns np l nq nr">this.order_cards();<br/>});</span></pre><p id="5c85" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">我们还根据视窗和窗口宽度调整了左&amp;右按钮和“单选”按钮的大小。</strong></p><h2 id="6b0d" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">现在我们有了调整大小的代码，每次我们调整浏览器窗口的大小时，我们的旋转木马也会调整大小。</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi og"><img src="../Images/9e522a58611a4389dd39dd329ecfb56d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tHXKsQX8_FKxb-dN.png"/></div></div></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="4718" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">我们手头有3个大任务</h1><ol class=""><li id="1c8a" class="mh mi in ke b kf mc ki md kl oh kp oi kt oj kx ok mn mo mp bi translated">按钮导航</li><li id="ffac" class="mh mi in ke b kf mq ki mr kl ms kp mt kt mu kx ok mn mo mp bi translated"><strong class="ke io">无线电</strong>导航</li><li id="dac9" class="mh mi in ke b kf mq ki mr kl ms kp mt kt mu kx ok mn mo mp bi translated">自动播放功能</li></ol><h2 id="ab64" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">所有导航的基础是这段代码:</h2><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="2aea" class="mw ll in nk b gy no np l nq nr">for (let i = 0; i &lt; this.images.children.length; i++) {<br/>  this.images.children[i].style.transitionDuration = ‘0.0s’;</span><span id="485f" class="mw ll in nk b gy ns np l nq nr">  const updated_position = this.last_positions[i] + /* some difference */;</span><span id="9617" class="mw ll in nk b gy ns np l nq nr">  this.images.children[i].style.left = `${updated_position}px`;<br/>  this.last_positions[i] = updated_position;<br/>}</span></pre><h2 id="9d15" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">它是这样说的:</h2><p id="4b74" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">获取所有图像的当前位置…</p><blockquote class="ol om on"><p id="133d" class="kc kd oo ke b kf kg jo kh ki kj jr kk op km kn ko oq kq kr ks or ku kv kw kx ig bi translated">它们在X轴的什么位置？</p></blockquote><p id="b66d" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">…添加一些<strong class="ke io">差异</strong>，这将使它们移动到新的位置。</p><p id="8782" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有一个<strong class="ke io"> last_positions </strong>数组来跟踪我们的图像在屏幕上的位置。</p></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="eac0" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">让我们编写按钮导航的代码</h1><p id="c6a2" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">很简单。</p><p id="e042" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将图像向左或向右移动<strong class="ke io">一整张卡宽</strong>。<br/>这就使得我们的<strong class="ke io">差</strong>简单的等于一张牌的宽度。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="a96a" class="mw ll in nk b gy no np l nq nr">this.images.children[i].style.transitionDuration = ‘0.0s’;</span><span id="0702" class="mw ll in nk b gy ns np l nq nr">const updated_position = this.last_positions[i] + this.new_width;</span><span id="42ba" class="mw ll in nk b gy ns np l nq nr">this.images.children[i].style.left = `${updated_position}px`;<br/>this.last_positions[i] = updated_position;</span></pre><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="ab gu cl os"><img src="../Images/92841afe4cc21de047b303678118614e.png" data-original-src="https://miro.medium.com/v2/0*_Rv8X5GQwBzY1WWM.gif"/></div></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="d7e3" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">让我们给无线电导航编码</h1><p id="e9f7" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">很简单。</p><p id="1444" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们计算用户点击了哪个"<strong class="ke io">单选按钮</strong>。</p><p id="a1fa" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">做一点计算来决定向左或向右移动多少像素。<br/>那就是我们的<strong class="ke io">区别</strong>。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="cba6" class="mw ll in nk b gy no np l nq nr">let new_card = null;</span><span id="0877" class="mw ll in nk b gy ns np l nq nr">for (let i = 0; i &lt; this.images.children.length; i++) {<br/>  if (event.target === this.selection_buttons_container.children[i]) <br/>    new_card = i;<br/>}</span><span id="b60b" class="mw ll in nk b gy ns np l nq nr">for (let i = 0; i &lt; this.images.children.length; i++) {<br/>  const updated_position = this.last_positions[i] + <br/>            ((this.current_card — new_card) * this.new_width);</span><span id="fccf" class="mw ll in nk b gy ns np l nq nr">  this.images.children[i].style.transitionDuration = ‘0.0s’;<br/>  this.images.children[i].style.left = `${updated_position}px`;<br/>  this.last_positions[i] = updated_position;<br/>}</span></pre><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/287e352960b31eea9865e875ad47376e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZdJd_cujMlMJmS12.gif"/></div></div></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="ccc0" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">让我们来处理自动播放</h1><h2 id="5cb2" class="mw ll in bd lm mx my dn lq mz na dp lu kl nb nc lw kp nd ne ly kt nf ng ma nh bi translated">逻辑很简单。</h2><p id="7e50" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">只需将我们的<strong class="ke io"> next </strong>按钮导航逻辑放在一个<strong class="ke io"> setInterval() </strong>函数中。</p><pre class="kz la lb lc gt nj nk nl nm aw nn bi"><span id="b2c9" class="mw ll in nk b gy no np l nq nr">this.autoplay_timeout_id = setTimeout(() =&gt; {<br/>  this.autoplay_interval_id = setInterval(() =&gt; {<br/>    for (let i = 0; i &lt; this.images.children.length; i++) {<br/>      this.images.children[i].style.transitionDuration = ‘0.0s’;</span><span id="8b2d" class="mw ll in nk b gy ns np l nq nr">      const updated_position = this.last_positions[i] — <br/>                                                  this.new_width;</span><span id="a170" class="mw ll in nk b gy ns np l nq nr">      this.images.children[i].style.left = `${updated_position}px`;<br/>      this.last_positions[i] = updated_position;<br/>    }</span><span id="25a7" class="mw ll in nk b gy ns np l nq nr">    this.current_card = (this.current_card ===    <br/>           this.number_of_cards_by_index) ? 0 : ++this.current_card;<br/>  }, 1100);<br/>}, 1200);</span></pre><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/dc81b7ef0e0603bcb650863c806468e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/0*LqfjCFKcVWRangDj.gif"/></div></figure></div><div class="ab cl nu nv hr nw" role="separator"><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz oa"/><span class="nx bw bk ny nz"/></div><div class="ig ih ii ij ik"><h1 id="8e7f" class="lk ll in bd lm ln ob lp lq lr oc lt lu jt od ju lw jw oe jx ly jz of ka ma mb bi translated">这个项目有更多的细微差别</h1><p id="a334" class="pw-post-body-paragraph kc kd in ke b kf mc jo kh ki md jr kk kl me kn ko kp mf kr ks kt mg kv kw kx ig bi translated">你可以在这里得到源文件<a class="ae ou" href="https://github.com/an-object-is-a/reactjs-autoplay-slideshow" rel="noopener ugc nofollow" target="_blank">，你也可以跟随下面的视频教程。</a></p><p id="de17" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想要更深入的指导，请查看我在YouTube上的完整视频教程，<a class="ae ou" href="https://www.youtube.com/c/anobjectisa" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io">一个对象是一个</strong> </a>。</p><p id="612c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一定要在<a class="ae ou" href="https://www.instagram.com/an_object_is_a/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Instagram </strong> </a>和<a class="ae ou" href="https://twitter.com/anobjectisa1" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Twitter </strong> </a>上关注我们，跟上我们最新的<strong class="ke io"> Web开发教程</strong>。</p><p id="be11" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一定要在<a class="ae ou" href="https://www.instagram.com/an_object_is_a/" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Instagram </strong> </a>和<a class="ae ou" href="https://twitter.com/anobjectisa1" rel="noopener ugc nofollow" target="_blank"> <strong class="ke io"> Twitter </strong> </a>上关注我们，及时了解我们最新的<strong class="ke io"> Web开发教程</strong>。</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="ov ow l"/></div></figure></div></div>    
</body>
</html>
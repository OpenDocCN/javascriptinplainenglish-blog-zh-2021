<html>
<head>
<title>Adding Graphics to a React App with D3 — Loading JSON, XML, and TSV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用D3向React应用程序添加图形——加载JSON、XML和TSV</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-loading-json-xml-and-tsv-cc5b1579a4a5?source=collection_archive---------18-----------------------#2021-02-10">https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-loading-json-xml-and-tsv-cc5b1579a4a5?source=collection_archive---------18-----------------------#2021-02-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/42ba637a81e51fd1336ea980f1c2e2d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-j2B9nOO4NWewWd4"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@heftiba?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Toa Heftiba</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0e73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3让我们可以轻松地向前端web应用添加图形。</p><p id="461d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue是一个流行的前端web框架。</p><p id="55a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。在本文中，我们将了解如何使用D3为Vue应用添加图形。</p><h1 id="2460" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正在加载JSON</h1><p id="2960" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以加载存储在外部文件中的JSON。</p><p id="526b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="0c8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">public/data.json</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7299" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  {<br/>    "name": "John",<br/>    "age": 30,<br/>    "city": "New York"<br/>  },<br/>  {<br/>    "name": "Jane",<br/>    "age": 20,<br/>    "city": "San Francisco"<br/>  }<br/>]</span></pre><p id="b834" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a92c" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="33dc" class="mq lc iq mh b gy mv ms l mt mu">const readJson = async () =&gt; {<br/>  const data = await d3.json("/data.json");<br/>  for (const { name, age } of data) {<br/>    console.log(name, age);<br/>  }<br/>};</span><span id="6d3c" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    readJson();<br/>  }, []);</span><span id="7397" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="5c6a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有从<code class="fe me mf mg mh b">data.json</code>读取数据的<code class="fe me mf mg mh b">readJson</code>函数。</p><p id="23eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们遍历包含已解析条目的<code class="fe me mf mg mh b">data</code>数组。</p><p id="d899" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f405" class="mq lc iq mh b gy mr ms l mt mu">John 30<br/>Jane 20</span></pre><p id="0750" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><h1 id="f226" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">正在加载XML文件</h1><p id="e675" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">D3还附带了加载XML文件的<code class="fe me mf mg mh b">d3.xml</code>方法。</p><p id="6d21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="92d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">public/data.xml</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="dc35" class="mq lc iq mh b gy mr ms l mt mu">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br/>&lt;root&gt;<br/>&lt;row&gt;<br/>    &lt;name&gt;John&lt;/name&gt;<br/>    &lt;age&gt;30&lt;/age&gt;<br/>&lt;/row&gt;<br/>&lt;row&gt;<br/>    &lt;name&gt;Jane&lt;/name&gt;<br/>    &lt;age&gt;32&lt;/age&gt;<br/>&lt;/row&gt;<br/>&lt;/root&gt;</span></pre><p id="0598" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4df7" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="6425" class="mq lc iq mh b gy mv ms l mt mu">const readXml = async () =&gt; {<br/>  const data = await d3.xml("/data.xml");<br/>  for (const n of data.documentElement.getElementsByTagName("name")) {<br/>    console.log(n.textContent);<br/>  }<br/>};</span><span id="2ec2" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    readXml();<br/>  }, []);</span><span id="aec2" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="c90f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">readXml</code>函数中，我们调用<code class="fe me mf mg mh b">d3.xml</code>来读取数据。</p><p id="5e3e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们获取带有<code class="fe me mf mg mh b">name</code>标签的元素，然后遍历返回的项目。</p><h1 id="4664" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">加载制表符分隔的文件</h1><p id="4495" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">d3.tsv</code>方法加载制表符分隔的文件。</p><p id="2d17" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="6876" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">public/data.tsv</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="777e" class="mq lc iq mh b gy mr ms l mt mu">name age city<br/>John 30 New York<br/>Jane 20 San Francisco</span></pre><p id="1996" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">src/App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="54e2" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="9eb7" class="mq lc iq mh b gy mv ms l mt mu">const readTsv = async () =&gt; {<br/>  const data = await d3.tsv("/data.tsv");<br/>  for (const { name, age, city } of data) {<br/>    console.log(name, age, city);<br/>  }<br/>};</span><span id="c19d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    readTsv();<br/>  }, []);</span><span id="0e00" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="f035" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们称之为<code class="fe me mf mg mh b">readTsv</code>方法。</p><p id="3f48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们遍历解析过的行并记录它们。</p><p id="d828" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1ddc" class="mq lc iq mh b gy mr ms l mt mu">John 30 New York <br/>Jane 20 San Francisco</span></pre><p id="3a3f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">已登录控制台。</p><h1 id="3a45" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5f2f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Vue应用中用D3加载CSV、TSV、XML和JSON文件。</p><p id="80a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
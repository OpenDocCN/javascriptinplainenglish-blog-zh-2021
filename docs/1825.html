<html>
<head>
<title>Deploy a React App with AWS S3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AWS S3部署React应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deploy-a-react-app-with-aws-s3-e0a7bccd3790?source=collection_archive---------6-----------------------#2021-04-17">https://javascript.plainenglish.io/deploy-a-react-app-with-aws-s3-e0a7bccd3790?source=collection_archive---------6-----------------------#2021-04-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2690ec7941253b23fb78c3d5658594f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6v8REs1k_SHvGJHHA5qtYw.png"/></div></div></figure><p id="ed06" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">部署React应用程序需要几个包来捆绑文件并将代码转换成JavaScript。</p><p id="7063" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在本React教程中，我们将首先把我们的<a class="ae kw" href="../../../../../blog/article/reactjs-chatbot" rel="noopener ugc nofollow" target="_blank"> React聊天机器人</a>与webpack和Babel捆绑在一起。然后在后面的部分中，我们将把它部署到AWS S3存储桶。</p><h2 id="b996" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">捆绑一个React App需要什么？</strong></h2><ul class=""><li id="5338" class="lq lr iq ka b kb ls kf lt kj lu kn lv kr lw kv lx ly lz ma bi translated">React应用程序</li><li id="8db0" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">安装和配置webpack和webpack-cli</li><li id="4996" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">安装和配置Babel</li><li id="ec11" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">安装和配置HTML webpack插件</li><li id="5557" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">安装和配置webpack开发服务器</li></ul><p id="dc1a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所有这些包都将在下面详细讨论。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="dff0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">创建React应用</strong></p><p id="7b78" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">本教程假设您已经使用<a class="ae kw" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">脸书的create-react-app </a>创建并配置了React应用。但是，任何React应用程序都可以使用这种方法部署。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="7556" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak"> Webpack和webpack CLI </strong></h1><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/cb79a2aa821535942b21dedcc5c82e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qlgsxieuMWm1oNI7.png"/></div></div></figure><h2 id="5f9b" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">什么是webpack？</strong></h2><p id="9c6b" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">Webpack是一个JavaScript模块捆绑器。它于2012年发布，是一款开源软件，专为现代JavaScript应用而设计。</p><p id="e036" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Webpack捆绑了HTML、CSS、JS和图像，生成表示这些原始模块的静态资产。</p><h2 id="9843" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">为什么要将webpack与React一起使用？</strong></h2><p id="e205" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">Webpack将把所有的React组件捆绑成易于web浏览器阅读的压缩资产。</p><h2 id="cc9a" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">安装webpack和webpack-cli </h2><p id="7e48" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装webpack和webpack-cli — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="378a" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm install webpack webpack-cli --save-dev</span></pre><p id="6e35" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack和webpack-cli — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="16c3" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm i webpack webpack-cli --save-dev</span></pre><p id="d8ca" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在你的应用目录中安装<code class="fe nw nx ny no b">webpack</code>和<code class="fe nw nx ny no b">webpack-cli</code>。安装将需要几分钟时间。</p><h2 id="396d" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">更新packages.json </strong></h2><p id="b11d" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;package . JSON</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="cafd" class="kx ky iq no b gy ns nt l nu nv">...<br/>"scripts": {<br/>    "start": "react-scripts start",<br/>    "build": "webpack --mode production",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>...</span></pre><p id="877a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，转到文件<em class="nm"> package.json </em>，用<code class="fe nw nx ny no b">"build":"webpack --mode production"</code>替换<code class="fe nw nx ny no b">"build":"react-scripts build"</code>，如上图。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="d2c9" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">巴别塔</strong></h1><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nz"><img src="../Images/1d348784667fee00bc5a7be967c166ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g4IPaEX1LNxYnKI8.png"/></div></div></figure><p id="799f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在是时候安装<a class="ae kw" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank">巴贝尔</a>了。</p><h2 id="cdce" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">巴别塔是什么？</strong></h2><p id="a793" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">Babel是一个JavaScript编译器，它将下一代JavaScript代码转换成浏览器兼容的JavaScript。</p><h2 id="8da8" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">为什么用Babel with React？</strong></h2><p id="231e" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">Babel将把React类组件、ES6变量和JSX代码转换成常规的JavaScript，这样旧的浏览器就可以正确地呈现组件。</p><h2 id="b37f" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">安装巴别塔</strong></h2><p id="718a" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装Babel及其依赖项——Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="a28e" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm i @babel/core babel-loader @babel/preset-env @babel/preset-react --save-dev</span></pre><p id="aaae" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装Babel及其依赖项— macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="e7a7" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm i @babel/core babel-loader @babel/preset-env @babel/preset-react --save-dev</span></pre><p id="ff46" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将安装<code class="fe nw nx ny no b">babel-loader</code>，Babel的webpack加载器，将JavaScript编译成ES5的<code class="fe nw nx ny no b">babel/preset-env</code>和将JSX编译成JS的<code class="fe nw nx ny no b">babel/preset-react</code>。</p><h2 id="5e46" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">创建一个名为。babelrc </strong></h2><p id="eaaa" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm"> react-chatbot &gt;(新文件)。babelrc </em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="d809" class="kx ky iq no b gy ns nt l nu nv">{<br/>  "presets": ["@babel/preset-env", "@babel/preset-react"]<br/>}</span></pre><p id="8560" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装完成后，创建名为。在你的应用程序目录中。这和<em class="nm"> package.json </em>是同一个目录。</p><h2 id="b913" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">创建一个名为webpack.config.js的新文件</strong></h2><p id="d6c8" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm"> react-chatbot &gt;(新文件)webpack.config.js </em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="0975" class="kx ky iq no b gy ns nt l nu nv">module.exports = {<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.(js|jsx)$/,<br/>        exclude: /node_modules/,<br/>        use: {<br/>          loader: "babel-loader"<br/>        }<br/>      }<br/>    ]<br/>  }<br/>};</span></pre><p id="fb97" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">另外，创建另一个名为<em class="nm"> webpack.config.js </em>的文件。同样，在应用程序的目录中创建这个文件，与<em class="nm"> package.json </em>在同一个文件夹中。</p><p id="d937" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的代码是一个说明文件是否以<em class="nm">结尾的文件。js </em>或<em class="nm">。jsx </em>，让webpack通过<code class="fe nw nx ny no b">babel-loader</code>发送代码。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="274c" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">创建捆绑包</strong></h1><p id="4b05" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">现在我们可以创建包了。</p><h2 id="4090" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">运行构建命令</strong></h2><p id="00ff" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><code class="fe nw nx ny no b"><em class="nm">npm run build </em></code> <em class="nm"> — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="20c2" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm run build</span></pre><p id="579f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nw nx ny no b"><em class="nm">npm run build </em></code> <em class="nm"> — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="3707" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm run build</span></pre><p id="2c03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行命令npm run build，<em class="nm"> package.json </em>文件中的脚本<code class="fe nw nx ny no b">"webpack --mode production"</code>就会运行。</p><p id="96b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后命令提示符会说资产<em class="nm"> main.js </em>已经创建并且webpack已经成功编译。</p><h2 id="f688" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">查看dist &gt; main.js </strong></h2><p id="a746" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;dist&gt;main . js</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="672b" class="kx ky iq no b gy ns nt l nu nv">/*! For license information please see main.js.LICENSE.txt */<br/>(()=&gt;{var e={669:(e,t,n)=&gt;{e.exports=n(609)},592:(e,t,n)=&gt;{"use strict";var r=n(867),o=n(26),i=n(372),a=n(327),l=n(97),u=n(109),s=n(985),c=n(61);e.exports=function(e){return new Promise((function(t,n){var f=e.data,p=e.headers;r.isFormData(f)&amp;&amp;delete ...(e.Component);t.render(e.createElement(j,null),document.getElementById("root"))})()})();</span></pre><p id="afdf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你查看应用程序的文件结构，你会注意到一个名为<em class="nm"> dist </em>的新目录，其中有一个名为<em class="nm"> main.js </em>的文件。文件<em class="nm"> main.js </em>是整个React app的捆绑版本。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="2fe1" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">将包添加到HTML页面</strong></h1><p id="a157" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">创建好包之后，让我们将它加载到HTML文件中。</p><h2 id="e147" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">为webpack再安装两个包</strong></h2><p id="c1f4" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装html-webpack和html-loader — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="12af" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm install html-webpack-plugin html-loader --save-dev</span></pre><p id="8276" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装html-webpack和html-loader — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="45d6" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm install html-webpack-plugin html-loader --save-dev</span></pre><p id="0ace" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行命令<code class="fe nw nx ny no b">npm install html-webpack-plugin html-loader --save-dev</code>来安装html-webpack-plugin和html-loader。</p><h2 id="5b09" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">更新webpack.config.js文件</strong></h2><p id="e5f3" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;web pack . config . js</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="12e9" class="kx ky iq no b gy ns nt l nu nv">const HtmlWebPackPlugin = require("html-webpack-plugin");<br/><br/>module.exports = {<br/>  module: {<br/>    rules: [<br/>      {<br/>        test: /\.(js|jsx)$/,<br/>        exclude: /node_modules/,<br/>        use: {<br/>          loader: "babel-loader"<br/>        }<br/>      },<br/>      {<br/>        test: /\.html$/,<br/>        use: [<br/>          {<br/>            loader: "html-loader"<br/>          }<br/>        ]<br/>      }<br/>    ]<br/>  },<br/>  plugins: [<br/>    new HtmlWebPackPlugin({<br/>      template: "./public/index.html",<br/>      filename: "./index.html"<br/>    })<br/>  ]<br/>};</span></pre><p id="e702" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后用在<code class="fe nw nx ny no b">plugins</code>下调用的名为<code class="fe nw nx ny no b">HtmlWebPackPlugin</code>的新<code class="fe nw nx ny no b">const</code>变量更新<em class="nm"> webpack.config.js </em>文件。</p><p id="f23a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">还要添加另一个规则，声明文件是否以<em class="nm">结尾。html </em>，让webpack通过<code class="fe nw nx ny no b">html-loader</code>发送代码。</p><p id="9e66" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你使用create-react-app来制作你的React app，那么<em class="nm">index.html</em>在<em class="nm">公共</em>文件夹中。用<code class="fe nw nx ny no b">template:"./public/index.html"</code>链接到文件，如上面的例子所示。</p><p id="aab4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">否则，如果你的<em class="nm">index.html</em>在<em class="nm"> src </em>目录中，使用<code class="fe nw nx ny no b">template:"./src/index.html"</code>。</p><h2 id="313c" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">再次运行构建命令</strong></h2><p id="d6e3" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm"> npm运行构建— Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="7bc3" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm run build</span></pre><p id="a5db" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm"> npm运行构建— macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="818f" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm run build</span></pre><p id="4295" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">再次运行命令<code class="fe nw nx ny no b">npm run build</code>来捆绑您的<em class="nm">index.html</em>文件，并在<em class="nm">区&gt;index.html创建捆绑资产。</em></p><h2 id="43b8" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">查看dist&gt;index.html文件</strong></h2><p id="c0d4" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;dist&gt;index.html</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="0f20" class="kx ky iq no b gy ns nt l nu nv">&lt;!doctype html&gt;&lt;html lang="en"&gt;&lt;head&gt;&lt;meta charset="utf-8"/&gt;&lt;link rel="icon" href="%PUBLIC_URL%/favicon.ico"/&gt;&lt;meta name="viewport" content="width=device-width,initial-scale=1"/&gt;&lt;meta name="theme-color" content="#000000"/&gt;&lt;meta name="description" content="Web site created using create-react-app"/&gt;&lt;link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png"/&gt;&lt;link rel="manifest" href="%PUBLIC_URL%/manifest.json"/&gt;&lt;title&gt;React App&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;&lt;div id="root"&gt;&lt;/div&gt;&lt;script src="main.js"&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</span></pre><p id="842c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你在<em class="nm"> dist </em>文件夹中查看名为<em class="nm">index.html</em>的新文件，你会看到它是来自【index.html】public&gt;的<em class="nm">HTML代码的编译版本。</em></p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1575" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">使用webpack配置开发服务器</strong></h1><p id="13cc" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">我们的项目现在是捆绑的，所以为了避免每次都不得不使用<code class="fe nw nx ny no b">run npm build</code>来推送变更，请安装<code class="fe nw nx ny no b">webpack-dev-server</code>。</p><h2 id="c433" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">安装webpack-dev-server </strong></h2><p id="9a65" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="8039" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm install webpack-dev-server --save-dev</span></pre><p id="797b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="d6bb" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm install webpack-dev-server --save-dev</span></pre><p id="14ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">运行<code class="fe nw nx ny no b">npm install webpack-dev-server</code>。</p><h2 id="bf1d" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">更新packages.json </strong></h2><p id="66d7" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;package . JSON</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="b867" class="kx ky iq no b gy ns nt l nu nv">...<br/>"scripts": {<br/>    "start": "webpack-dev-server --open --mode development",<br/>    "build": "webpack --mode production",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject"<br/>  },<br/>...</span></pre><p id="6531" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来，用<code class="fe nw nx ny no b">npm start</code>的新脚本更新<em class="nm"> package.json </em>文件。</p><h2 id="e675" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">运行开发服务器</strong></h2><p id="cf54" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="170d" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm start</span></pre><p id="c5b6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="e7e8" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm start</span></pre><p id="8a76" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，当您<code class="fe nw nx ny no b">run start</code>web pack开发服务器将在浏览器中启动捆绑的应用程序版本。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="d304" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">将React应用部署到AWS S3存储桶</strong></h1><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oa"><img src="../Images/a33fdf907f0a44ddf0388897d1240320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iv86AsbT9ryjJJFk.gif"/></div></div></figure><p id="1779" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">如果你有兴趣阅读更多AWS相关内容，一定要查阅</em> <a class="ae kw" href="https://aws.plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="nm"> AWS直白英语</em> </strong> </a> <em class="nm">。</em></p><p id="aa2b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">既然我们的应用程序已经打包，我们可以将压缩文件部署到AWS S3存储桶中。</p><h2 id="0935" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">将React应用部署到S3存储桶需要什么？</strong></h2><ul class=""><li id="070e" class="lq lr iq ka b kb ls kf lt kj lu kn lv kr lw kv lx ly lz ma bi translated">创建免费的AWS帐户</li><li id="a01e" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">创建S3存储桶</li><li id="2564" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">安装和配置AWS CLI</li></ul><h2 id="7f2b" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">创建一个AWS账户</strong></h2><p id="da1f" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">在https://aws.amazon.com/free/<a class="ae kw" href="https://aws.amazon.com/free/" rel="noopener ugc nofollow" target="_blank">创建一个免费的AWS账户</a>。</p><h2 id="deae" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">使用IAM授予您的用户名AWS S3权限</strong></h2><p id="5fdb" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">在创建S3存储桶之前，您需要授予您的用户对AWS S3的权限。</p><p id="a104" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要授予用户S3权限:</p><ol class=""><li id="53a6" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">登录AWS</li><li id="b7f8" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">在<em class="nm"> AWS管理控制台</em>页面上，通过在搜索栏中输入<em class="nm"> IAM </em>找到<em class="nm"> IAM </em>服务(a)在<em class="nm">安全、识别、&amp;合规</em>部分下的<em class="nm">所有服务</em>或(b)</li><li id="e790" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击<em class="nm"> IAM </em>链接</li><li id="e484" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击左侧菜单中<em class="nm">访问管理</em>部分下的<em class="nm">用户</em>选项卡</li><li id="f0c6" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">单击您想授予访问权限的用户名</li><li id="4545" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">单击“添加权限”按钮</li><li id="683b" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">选择“直接附加现有策略”并输入<em class="nm"> AmazonS3FullAccess </em></li><li id="cab1" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击“下一步:回顾”按钮</li><li id="368b" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">检查“权限摘要”页面上的权限是否已添加到正确的用户</li><li id="b3f9" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">单击“添加权限”保存更改</li></ol><h2 id="9b25" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">为你的React应用创建一个S3桶</strong></h2><p id="df15" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">现在，添加了适当的权限后，您就可以创建您的S3桶了。</p><p id="159f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">AWS简单存储服务(S3)使用可扩展的存储基础架构存储文件和对象。S3桶充当这些文件的容器，甚至可以用来托管一个静态网站。</p><p id="fc84" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建S3存储桶，请执行以下操作:</p><ol class=""><li id="2dd0" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">在AWS管理控制台页面上，通过以下方式找到S3服务:( a)在所有服务的存储部分下，或(b)在搜索栏中键入S3</li><li id="215a" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击S3链接</li><li id="4102" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击屏幕右侧的“创建存储桶”按钮</li></ol><p id="ddd5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在“创建存储桶”页面上:</p><ol class=""><li id="8a11" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">在常规配置下:</li></ol><ul class=""><li id="6e09" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv lx ly lz ma bi translated">命名您的存储桶并划分您的区域</li></ul><ol class=""><li id="0507" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">在“阻止公共访问的存储桶设置”下:</li></ol><ul class=""><li id="603b" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv lx ly lz ma bi translated">取消选择“阻止所有公共访问”复选框</li><li id="3225" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv lx ly lz ma bi translated">选择警告框“关闭阻止所有公共访问可能会导致此存储桶和其中的对象成为公共的”</li></ul><ol class=""><li id="517f" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">保持其余的默认配置不变</li><li id="fcf9" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击页面底部的按钮“创建存储桶”</li></ol><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi of"><img src="../Images/b8b22745b0e839ce06f3f32628334100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jHje5CwMFZzCBEYk.png"/></div></div></figure><h2 id="693c" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">更新S3斗权限</strong></h2><p id="597e" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">现在我们有了我们的bucket，让我们为匿名用户添加只读权限。</p><p id="9415" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要添加权限:</p><ol class=""><li id="68de" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">点击你的S3桶</li><li id="bea2" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">选择“权限”选项卡</li><li id="93db" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">单击“存储桶策略”按钮</li><li id="eef4" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">在<em class="nm">存储桶策略编辑器</em>中添加以下代码，用您的存储桶名称替换<code class="fe nw nx ny no b">"Resource"</code></li></ol><ul class=""><li id="9ace" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv lx ly lz ma bi translated"><code class="fe nw nx ny no b">{ "Version": "2012-10-17", "Statement": [ { "Sid": "AllowPublicReadAccess", "Effect": "Allow", "Principal": "*", "Action": "s3:GetObject", "Resource": "arn:aws:s3:::name-of-your-bucket/*" } ] }</code></li></ul><ol class=""><li id="c5c3" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">完成后，单击“保存”按钮。</li></ol><h2 id="608e" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">添加CORS配置</strong></h2><p id="91bb" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">我们还将把CORS配置添加到S3存储桶，以允许跨产地请求。</p><p id="215d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要添加CORS配置:</p><ol class=""><li id="f0cb" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">点击你的S3桶</li><li id="2bbd" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">选择“权限”选项卡</li><li id="30fe" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击“CORS配置”按钮</li><li id="c6c4" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">在<em class="nm"> CORS配置编辑器</em>中添加以下代码</li></ol><ul class=""><li id="560a" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv lx ly lz ma bi translated"><code class="fe nw nx ny no b">&lt;?xml version="1.0" encoding="UTF-8"?&gt; &lt;CORSConfiguration &gt; &lt;CORSRule&gt; &lt;AllowedOrigin&gt;*&lt;/AllowedOrigin&gt; &lt;AllowedMethod&gt;GET&lt;/AllowedMethod&gt; &lt;AllowedMethod&gt;PUT&lt;/AllowedMethod&gt; &lt;AllowedMethod&gt;POST&lt;/AllowedMethod&gt; &lt;MaxAgeSeconds&gt;3000&lt;/MaxAgeSeconds&gt; &lt;ExposeHeader&gt;x-amz-meta-custom-header&lt;/ExposeHeader&gt; &lt;AllowedHeader&gt;*&lt;/AllowedHeader&gt; &lt;/CORSRule&gt; &lt;/CORSConfiguration&gt;</code></li></ul><ol class=""><li id="f0c1" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">完成后，单击“保存”按钮。</li></ol><h2 id="5b00" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">安装AWS CLI </strong></h2><p id="4908" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">创建并配置了bucket，现在我们可以将React应用包上传到S3 bucket。</p><p id="c1a1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们将通过AWS命令行界面上传。</p><p id="9175" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在继续之前，请遵循适用于您的特定操作系统的<a class="ae kw" href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI安装说明</a>。</p><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi og"><img src="../Images/0f6938a535d3f1ed6812f63a98909a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MhdvvMDztL1ssD2y.png"/></div></div></figure><h2 id="39b6" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">检查是否安装了AWS CLI</strong></h2><p id="67cd" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="f48f" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; aws --v<br/>aws-cli/2.0.47 Python/3.7.4 Windows/10 botocore/2.0.0</span></pre><p id="0a82" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="bd15" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ aws --v<br/>aws-cli/2.0.47 Python/3.7.4 Darwin/18.7.0 botocore/2.0.0</span></pre><p id="afba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦安装过程完成，继续运行命令<code class="fe nw nx ny no b">aws --v</code>来检查安装工作。</p><h2 id="b08b" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">创建一组AWS访问密钥</strong></h2><p id="68cc" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">使用AWS CLI时，您需要提供一组AWS访问密钥，以便CLI可以正确连接到您的AWS帐户。</p><p id="4bfd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">要创建一组密钥:</p><ol class=""><li id="0948" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">点击右上角的用户名</li><li id="6a63" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">从下拉菜单中选择<em class="nm">我的安全凭证</em></li><li id="5e21" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击【CLI、SDK、&amp; API访问的<em class="nm">访问密钥</em>部分下的“创建访问密钥”按钮</li><li id="b1e4" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">两个访问键将出现在弹出菜单中</li><li id="2005" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击“下载。csv文件"按钮并保存密钥</li></ol><p id="a2ad" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在下一步配置AWS CLI时，您将需要保存在文件中的两个密钥。</p><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oh"><img src="../Images/cf1d2d4be6a07f501af865a384f368ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*RjulaDsMv3ptGTN8.gif"/></div></div></figure><p id="061f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您碰巧丢失了访问密钥，只需创建另一组。</p><h2 id="6512" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">配置AWS CLI </strong></h2><p id="5fbb" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">配置AWS CLI — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="7518" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; aws configure<br/>AWS Access Key ID:****************<br/>AWS Secret Access Key:****************<br/>Default region name [us-west-1]:<br/>Default output format [None]:</span></pre><p id="6ccc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">配置AWS CLI — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="d7b1" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ aws configure<br/>AWS Access Key ID:****************<br/>AWS Secret Access Key:****************<br/>Default region name [us-west-1]:<br/>Default output format [None]:</span></pre><p id="6c75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在项目的命令提示符下，运行命令aws configure。然后输入您在上一步中创建的AWS访问密钥和AWS秘密密钥。</p><p id="17b0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后，您可以跳过剩余的配置部分，对每个部分单击Enter。</p><h2 id="24df" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">更新package.json文件</strong></h2><p id="8921" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;package . JSON</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="aea7" class="kx ky iq no b gy ns nt l nu nv">...<br/>"scripts": {<br/>    "start": "webpack-dev-server --open --mode development",<br/>    "build": "webpack --mode production",<br/>    "test": "react-scripts test",<br/>    "eject": "react-scripts eject",<br/>    "deploy": "aws s3 sync dist/ s3://name-of-your-bucket"<br/>  },<br/>...</span></pre><p id="8828" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">转到package.json，添加一个新的部署脚本:<code class="fe nw nx ny no b">"deploy": "aws s3 sync webpack/dist/ s3://name-of-your-bucket"</code>。</p><p id="04ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">确保用正确的桶名替换<code class="fe nw nx ny no b">name-of-your-bucket</code>并保存文件。</p><h2 id="6c4f" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">部署到AWS S3存储桶</strong></h2><p id="6754" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><em class="nm">部署到S3铲斗— Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="5542" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm run build<br/><br/>C:\Users\Owner\desktop\react\react-chatbot&gt; npm run deploy</span></pre><p id="8fcd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">部署到S3木桶— macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="4544" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm run build<br/><br/>User-Macbook:react-chatbot user$ npm run deploy</span></pre><p id="8e0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">返回到您的CLI并运行npm run build以捆绑任何更改，然后使用<code class="fe nw nx ny no b"> npm run deploy</code>将捆绑包上传到您的S3存储桶。</p><p id="057b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<em class="nm"> dist </em>目录中的所有文件都将上传到S3存储桶。</p><h2 id="90ec" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated"><strong class="ak">让你的S3斗一个域</strong></h2><p id="f6ea" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated">要使您的S3成为一个域:</p><ol class=""><li id="fdaf" class="lq lr iq ka b kb kc kf kg kj ob kn oc kr od kv oe ly lz ma bi translated">点击你的桶</li><li id="7a51" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">你应该看到<em class="nm">index.html</em>、<em class="nm"> main.js、</em>和<em class="nm"> main.js.LICENSE.txt </em>文件</li><li id="4871" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">选择“属性”选项卡</li><li id="f450" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击“静态网站托管”卡</li><li id="6fd4" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">选择“使用此存储桶托管网站”按钮</li><li id="11b6" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">键入<em class="nm">index.html</em>作为“索引文件”和“错误文件”</li><li id="42c3" class="lq lr iq ka b kb mb kf mc kj md kn me kr mf kv oe ly lz ma bi translated">点击“保存”按钮完成</li></ol><figure class="nf ng nh ni gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi oi"><img src="../Images/98eea74e85880e7784f7e9de1249711a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*E4va8ry56cDEYPm4.png"/></div></div></figure><p id="8972" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您再次检查卡，您应该注意到一个URL端点。</p><p id="0151" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">点击此URL，您的应用将出现在新的浏览器选项卡中。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="1686" class="mn ky iq bd kz mo mp mq lc mr ms mt lf mu mv mw li mx my mz ll na nb nc lo nd bi translated"><strong class="ak">解决可能出现的常见错误</strong></h1><p id="26fb" class="pw-post-body-paragraph jy jz iq ka b kb ls kd ke kf lt kh ki kj nj kl km kn nk kp kq kr nl kt ku kv ij bi translated"><code class="fe nw nx ny no b">ERROR: 'MODULE_NOT_FOUND" webpack-dev-server</code></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="ad45" class="kx ky iq no b gy ns nt l nu nv">code: 'MODULE_NOT_FOUND',<br/>  requireStack: [<br/>    'C:\\Users\\Owner\\Desktop\\react\\react-chatbot\\node_modules\\webpack-dev-server\\bin\\webpack-dev-server.js'<br/>  ]<br/>}<br/>npm ERR! code ELIFECYCLE<br/>npm ERR! errno 1<br/>npm ERR! react-tutorial@0.1.0 start: `webpack-dev-server --open --mode development`<br/>npm ERR! Exit status 1<br/>npm ERR!<br/>npm ERR! Failed at the react-tutorial@0.1.0 start script.<br/>npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span></pre><p id="78c4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您在安装<code class="fe nw nx ny no b">webpack-dev-server</code>后运行<code class="fe nw nx ny no b">npm start</code>时出错，您需要降级您的webpack-cli版本。</p><p id="c004" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">1.更新package.json</p><p id="cb11" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">react-chatbot&gt;package . JSON</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="97d0" class="kx ky iq no b gy ns nt l nu nv">...<br/> },<br/>  "devDependencies": {<br/>    ...<br/>    "webpack-cli": "^3.3.12",<br/>    ...<br/>  }<br/>}</span></pre><p id="5543" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">将<em class="nm"> package.json </em>中的<code class="fe nw nx ny no b">"webpack-cli"</code>版本更改为<code class="fe nw nx ny no b">"^3.3.12"</code>，一个没有bug的webpack-cli版本。</p><p id="d0fd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">请务必保存该文件。</p><p id="63bb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">2.重新安装webpack-cli</p><p id="8e72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="d44e" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm install</span></pre><p id="31ed" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack-dev-server — macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="a111" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm install</span></pre><p id="2e02" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后运行<code class="fe nw nx ny no b">npm install</code>安装<em class="nm"> package.json </em>中指定的版本。</p><p id="9243" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">3.再次运行开发服务器</p><p id="4514" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">运行webpack开发服务器— Windows命令提示符</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="0291" class="kx ky iq no b gy ns nt l nu nv">C:\Users\Owner\desktop\react\react-chatbot&gt; npm start</span></pre><p id="a7b9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">安装webpack开发服务器— macOS终端</em></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="8c8b" class="kx ky iq no b gy ns nt l nu nv">User-Macbook:react-chatbot user$ npm start</span></pre><p id="5f22" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，当您运行<code class="fe nw nx ny no b">npm start</code>时，开发者服务器应该会打开。</p><p id="a692" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nw nx ny no b">ERROR: Failed to parse json; Unexpected token } in JSON</code></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="dcbf" class="kx ky iq no b gy ns nt l nu nv">npm ERR! code EJSONPARSE<br/>npm ERR! file C:\Users\Owner\Desktop\code\react\react-chatbot\package.json<br/>npm ERR! JSON.parse Failed to parse json<br/>npm ERR! JSON.parse Unexpected token } in JSON at position 662 while parsing near '...y-react-example",<br/>npm ERR! JSON.parse   },</span></pre><p id="171e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果您在尝试运行<code class="fe nw nx ny no b">npm run build</code>时收到此错误，请确保最后添加的脚本末尾没有逗号。</p><p id="a3bd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><code class="fe nw nx ny no b">ERROR: fatal error: An error occurred (NoSuchBucket) when calling the ListObjectsV2 operation: The specified bucket does not exist</code></p><pre class="nf ng nh ni gt nn no np nq aw nr bi"><span id="7a90" class="kx ky iq no b gy ns nt l nu nv">fatal error: An error occurred (NoSuchBucket) when calling the ListObjectsV2 operation: The specified bucket does not exist<br/>npm ERR! code ELIFECYCLE<br/>npm ERR! errno 1<br/>npm ERR! react-chatbot@0.1.0 deploy: `aws s3 sync dist/ s3://deploy-react-example`<br/>npm ERR! Exit status 1</span></pre><p id="f8df" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果在尝试部署到您的S3存储桶时出现此错误，您可能在<em class="nm"> package.json </em>中拼错了存储桶名称。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="507e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nm">最初发表于</em><a class="ae kw" href="https://www.ordinarycoders.com/blog/article/deploy-reactjs-webpack-aws-s3" rel="noopener ugc nofollow" target="_blank"><em class="nm">【https://ordinarycoders.com】</em></a>。</p></div></div>    
</body>
</html>
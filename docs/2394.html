<html>
<head>
<title>Turning your React Websites into Native Phone Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将React网站转变为本地手机应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/turning-your-react-websites-into-native-phone-apps-9cc7ccc4baf?source=collection_archive---------31-----------------------#2021-05-17">https://javascript.plainenglish.io/turning-your-react-websites-into-native-phone-apps-9cc7ccc4baf?source=collection_archive---------31-----------------------#2021-05-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d9e773fb01c0345e898c7a8b3d341694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Y9IbdXFyuUT4DuRrLx2vQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://www.pexels.com/@fauxels?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">fauxels</a> from <a class="ae jz" href="https://www.pexels.com/photo/top-view-photo-of-person-holding-earphones-3183198/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="ae2a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">构建web应用程序是整整一代开发人员成长的过程。然而，在android和iOS中构建手机应用程序通常需要Swift或Kotlin知识，这可能不是你编程的第一语言。</p><p id="0808" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让你的所有代码在所有设备上工作，在同一个repo中，是那些首先建立web的人的梦想场景。幸运的是，我们可以用Apache Cordova实现这一点。在本文中，我们将了解如何将您的React项目转换成原生的iOS或Android应用程序。让我们开始吧。</p><p id="8570" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky">注</em> </strong>:本教程基于<code class="fe kz la lb lc b">react-create-app</code>。如果你以前没有用过这个，你可以用下面的命令创建一个新的应用。这将创建一个标准的React文件结构:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><h1 id="2efe" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第一步。科尔多瓦</h1><p id="d854" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">Cordova允许我们将HTML、CSS和Javascript网站变成原生的iOS应用程序。首先，让我们在命令行上安装它。<code class="fe kz la lb lc b">-g</code>在这里很重要，所以我们可以在命令行上使用cordova:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="ee14" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们需要创建一个cordova文件夹。打开react项目，在基本目录中运行以下命令:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="a1a3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这一行简单的代码在React文件夹结构中创建了一个名为“cordova”的新项目。你可以做<code class="fe kz la lb lc b">cordova create myApp</code>来创建一个myApp文件夹，但是我发现在已经存在的项目中将这个文件夹标记为cordova更容易。</p><h1 id="eadd" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第二步。更新您的Package.json</h1><p id="e93f" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">在您的React根目录中，您将拥有一个<code class="fe kz la lb lc b">package.json</code>文件。我们需要添加一行，这就是<code class="fe kz la lb lc b">"homepage" : "./"</code>。这需要添加，以便我们将来构建的所有cordova文件都有正确的路径:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><h1 id="eb7b" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第三步。移动您的科尔多瓦脚本</h1><p id="6214" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">接下来，进入cordova文件夹，找到在<code class="fe kz la lb lc b">./cordova/www/js/index.js</code>中生成的index.js文件。复制这个脚本并将其放在React <code class="fe kz la lb lc b">./public</code>文件夹中，如下所示:</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/9a387df65cfdab96b945b987d080b3fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwYEbZZ9G-3XPDi7563pIA.png"/></div></div></figure><p id="a06e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe kz la lb lc b">./public</code>中更新您的index.html文件，在您的<code class="fe kz la lb lc b">root</code> div之后包含这个新文件:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><h1 id="d1cf" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第四步。更新index.jsx</h1><p id="ff36" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">接下来，我们需要更新React <code class="fe kz la lb lc b">./src</code>文件夹中的index.jsx文件，这样，如果cordova可用，它将识别cordova。为此，请将其更新为如下所示:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="fba5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你通过网络访问，上面的代码将运行一个普通的react应用程序，或者它将运行我们在iOS或Android上的cordova <code class="fe kz la lb lc b">deviceready</code>事件。</p><p id="39a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您运行在typescript上，您需要将cordova对象添加到您的window对象中。您可以通过将以下内容添加到您的<code class="fe kz la lb lc b">index.tsx</code>文件的顶部，导入语句的下方来实现:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><h1 id="61e6" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第五步。向package.json添加一个构建命令</h1><p id="c47d" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">接下来，向package.json添加一个构建命令。</p><ul class=""><li id="f572" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated">为web使用创建一个普通的React构建</li><li id="8c15" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated">将构建复制到<code class="fe kz la lb lc b">./cordova/www</code>，这样它就可以在iOS和Android上使用了</li></ul><p id="410f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新你的<code class="fe kz la lb lc b">package.json</code>脚本，看起来像下面的代码。请注意我们是如何更新构建行的:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="b7f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，运行您的构建:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="c414" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果一切按计划进行，您将在您的<code class="fe kz la lb lc b">cordova/www</code>文件夹中有一个构建。现在我们已经完成了，移动到您的cordova文件夹，在命令行上显示cd cordova:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="0a88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在可以用cordova命令行添加我们的设备。我将添加iOS。您可以通过键入以下命令来完成此操作:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="8ff8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们需要构建我们的iOS应用程序。为此，请在cordova文件夹中运行以下命令:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lh li l"/></div></figure><p id="e338" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky">注意</em> </strong>:你需要安装XCode来做这个位，所以要确保你已经安装了，并且之前至少打开过一次。在Android上，你可能会有一些类似的限制。</p><h1 id="baf6" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">第六步:用XCode启动它</h1><p id="f686" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">接下来，在XCode中打开你的<code class="fe kz la lb lc b">./cordova/platforms/ios</code>文件夹。当您这样做时，您可以模拟您的新设备，并且您应该有一个基于React代码的功能完整的iOS应用程序:</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/9161844fda3cdec8527b7ad9e615494f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6duUi28hT3OeUtwyzeUhhQ.png"/></div></div></figure><h1 id="55bc" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">维护<a class="ae jz" href="https://fjolt.com/article/react-apache-cordova-ios-android#maintenance" rel="noopener ugc nofollow" target="_blank"> # </a></h1><p id="15e5" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">为了在添加新特性时保持代码的最新版本，只需运行<code class="fe kz la lb lc b">npm run build</code>来构建React代码，这将在cordova中自动创建一个版本。</p><p id="3c6f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来用<code class="fe kz la lb lc b">cd cordova</code>进入cordova目录，用<code class="fe kz la lb lc b">cordova build ios</code>创建XCode的最新版本。您也可以创建自己的cordova构建脚本，或者将所有内容合并到<code class="fe kz la lb lc b">npm run build</code>中。</p><h1 id="1004" class="lj lk in bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论</h1><p id="6bd5" class="pw-post-body-paragraph ka kb in kc b kd mh kf kg kh mi kj kk kl mj kn ko kp mk kr ks kt ml kv kw kx ig bi translated">我们已经介绍了iOS，但是您可以使用<code class="fe kz la lb lc b">cordova platform add android</code>和<code class="fe kz la lb lc b">cordova build android</code>对android进行同样的操作。</p><p id="2d59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">做完这一切，就只剩下更新你的app图标和名称的问题了。我们希望您喜欢这篇文章——下面是一些您可能会觉得有用的链接:</p><ul class=""><li id="4ecc" class="mn mo in kc b kd ke kh ki kl mp kp mq kt mr kx ms mt mu mv bi translated"><a class="ae jz" href="https://github.com/smpnjn/react-cordova-native" rel="noopener ugc nofollow" target="_blank">本教程的Github代码</a></li><li id="6aaa" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated"><a class="ae jz" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank">创建React App网站</a></li><li id="5141" class="mn mo in kc b kd mw kh mx kl my kp mz kt na kx ms mt mu mv bi translated"><a class="ae jz" href="https://cordova.apache.org/docs/en/10.x/guide/overview/index.html" rel="noopener ugc nofollow" target="_blank"> Apache Cordova Docs </a></li></ul><p id="5d62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
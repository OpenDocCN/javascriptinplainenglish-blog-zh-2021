<html>
<head>
<title>How I Created My Own Search City and Country APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何创建自己的搜索城市和国家API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/i-create-my-own-search-city-country-api-de8891b259e?source=collection_archive---------5-----------------------#2021-04-16">https://javascript.plainenglish.io/i-create-my-own-search-city-country-api-de8891b259e?source=collection_archive---------5-----------------------#2021-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="5fce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过为选定的城市开发我们自己的搜索查询来解决现实世界的问题。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/aa75cbc1fe676b9a0d6b6ced003f1fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ll-az4Pmkmk9kWie_yUIqA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><a class="ae lb" href="http://ihatereading.in" rel="noopener ugc nofollow" target="_blank">A search creative designed by me</a></figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="f3a6" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">在后台</h1><p id="f88b" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我正在为用户开发一些前端表单。我们有一个下拉和搜索输入选项，用户输入他们的城市和相应的过滤功能。我们在前端使用React第三方库创建这样的功能时遇到了一些问题。最后，我们不得不添加一个简单的下拉菜单，并删除用户输入和过滤城市的附加功能。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="9254" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">入门指南</h1><p id="431e" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">今天，我们将通过创建一个API来解决这个问题。我们的议程将是首先创建一个API，为我的国家(印度)的所有城市提供。接下来是一个搜索API，它将根据我传递的查询过滤城市。这是一个非常简单的方法。为了返回所有城市，我们需要所有城市的列表，下面是到我国所有城市的JSON数据的链接。</p><div class="mm mn gp gr mo mp"><a href="https://github.com/nshntarora/Indian-Cities-JSON/blob/master/cities.json" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">nshntarora/印度城市-JSON</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">一个json文件，包含1220个印度城市及其各自的州- nshntarora/Indian-Cities-JSON</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">github.com</p></div></div><div class="my l"><div class="mz l na nb nc my nd kv mp"/></div></div></a></div><p id="c5da" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我相信你可以很容易地找到你们国家所有城市的JSON数据。一旦有了这些数据，您就有两种方法来开发API:</p><ul class=""><li id="70e4" class="ne nf iq jp b jq jr ju jv jy ng kc nh kg ni kk nj nk nl nm bi translated">下载城市的JSON文件，并将其放入代码库中。</li><li id="d248" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated">使用axios从URL获取这些城市。</li></ul><p id="c33f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我将使用后者，因为这将使我开发搜索API变得容易。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="0e3a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">编写代码</h1><p id="8c6d" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我们将使用axios通过上面的链接获取城市列表。一旦所有城市的获取完成，我们简单地返回这个。这个很简单。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ns"><img src="../Images/aaa5a9387dc60c883da907233b86ef2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*98JT76yDUCQMsP8urWL6yQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Response of <code class="fe nt nu nv nw b"><strong class="bd nx">/cities</strong></code> endpoint</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nz l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Fetching all cities from the endpoint.</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="1905" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">搜索API</h1><p id="eeb9" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">为了搜索一个城市，我们创建了另一个端点<code class="fe nt nu nv nw b"><strong class="jp ir">searchCity</strong></code> <strong class="jp ir">。</strong>该端点将接受URL请求中的查询参数，并相应地从所有城市的数组中过滤响应或城市。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ny nz l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">SearchCity router filtering cities on the basis of user query</figcaption></figure><p id="f71b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">路由器上的端点使用<code class="fe nt nu nv nw b"><strong class="jp ir">filter</strong></code>方法从用户传递的城市参数中过滤数据。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="f54f" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">为什么？<code class="fe nt nu nv nw b">includes</code>方法？</h1><p id="7faa" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我们可以使用<code class="fe nt nu nv nw b">===</code>操作符来交叉检查用户添加的参数中的城市值，但这不是一种准确的方法，一旦用户键入，它总是返回空城市，直到用户提供完整的城市名称。自己去试试。除了includes方法，您可以尝试使用<code class="fe nt nu nv nw b">===</code>操作符。结果会不一样。</p><h1 id="826e" class="lj lk iq bd ll lm oa lo lp lq ob ls lt lu oc lw lx ly od ma mb mc oe me mf mg bi translated">状态搜索API</h1><p id="8706" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">一旦城市搜索API完成，我们将创建一个端点来过滤状态，并返回具有相同状态的对象数组。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi of"><img src="../Images/1eeb29b2e862d4690b337bee23473dfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lV9U7pkITtP7JLxiEJhamQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd nx">searchState</strong> endpoint with the state parameter</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="06d6" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">从州过滤城市</h1><p id="d387" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">下一步是，一旦用户选择他/她的州并开始键入，就从相同的州中筛选城市。我们可以相应地过滤城市，因为该州已经被选中，现在我们在过滤后的州占据上风。我们只需要从一个更小的数组中搜索，而不是从整个城市数组中搜索。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi og"><img src="../Images/ee50411ff16fee3d23c486c681b98c55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ku1kFy2HtXPn7vK8KzWLBg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd nx">searchCity</strong> API with state and city as parameters</figcaption></figure><p id="9db6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一步通过提供准确的数据使用户体验占据上风。在前端执行这个端点时，我们只需要添加2个selects。第一个选择将采用用户的州，第二个选择将采用用户的城市。一旦选择了州，我们就可以简单地从单个州获取城市。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="5068" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论</h1><p id="e801" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">如果你想为你的国家创建这个API，那么你只需要找到你的特定国家的城市列表，你就可以去了。您可以使用此<a class="ae lb" href="https://rapidapi.com/wirefreethought/api/geodb-cities" rel="noopener ugc nofollow" target="_blank">链接</a>查找特定国家/地区的城市API。</p><p id="4603" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码存储库:</p><div class="mm mn gp gr mo mp"><a href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogsBackend/CreatingCity%26StateApi" rel="noopener  ugc nofollow" target="_blank"><div class="mq ab fo"><div class="mr ab ms cl cj mt"><h2 class="bd ir gy z fp mu fr fs mv fu fw ip bi translated">shreyvijayvargiya/ihateredingglogs</h2><div class="mw l"><h3 class="bd b gy z fp mu fr fs mv fu fw dk translated">100天代码质询存储库。。通过创建一个……</h3></div><div class="mx l"><p class="bd b dl z fp mu fr fs mv fu fw dk translated">github.com</p></div></div><div class="my l"><div class="oh l na nb nc my nd kv mp"/></div></div></a></div><p id="9413" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你每天都想学习技术，请随时跟我来。直到下次。各位，祝大家有愉快的一天！</p><p id="2b81" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="oi">更内容于</em> <a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="oi">通俗地说就是</em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>3 New JavaScript Operators</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">3个新的JavaScript操作符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-new-javascript-operators-that-you-can-use-today-649da09df09d?source=collection_archive---------13-----------------------#2021-01-05">https://javascript.plainenglish.io/3-new-javascript-operators-that-you-can-use-today-649da09df09d?source=collection_archive---------13-----------------------#2021-01-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c179" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你今天可以使用的</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/469f739ace155135d1acf903dc753cb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*we4uVbgTv2Ciwzh-F9HjfA.jpeg"/></div></div></figure><p id="50bb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">受Ruby的启发，下一个ECMAScript版本有3个新的操作符，您现在就可以使用。</p><blockquote class="ln lo lp"><p id="5950" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">这里有这篇文章的视频版本:<a class="ae lu" href="https://youtu.be/siqhEc3QnxE" rel="noopener ugc nofollow" target="_blank">https://youtu.be/siqhEc3QnxE</a></p></blockquote><h1 id="cb3d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">逻辑零赋值(？？=)</h1><p id="6a2d" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">假设您有以下类:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="dbfb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">并且您想要设置🐈严格地说，只有在必要的时候，并且只有在它是nullish的情况下，因为这是一个开销很大的操作，涉及到一些DOM操作，会弄乱页面状态。</p><h2 id="d5db" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">JavaScript的现状</h2><p id="38b1" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">今天你要做的事情如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="4add" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是我们通常测试一个值是否为falsy的方法，实际上是为了检查是否为零。</p><p id="f03b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我提醒您，<code class="fe ng nh ni nj b">!a</code>检查虚假值，如<code class="fe ng nh ni nj b">false</code>、<code class="fe ng nh ni nj b">0</code>、<code class="fe ng nh ni nj b">''</code>、<code class="fe ng nh ni nj b">NaN</code>、<code class="fe ng nh ni nj b">null</code>、&amp;、<code class="fe ng nh ni nj b">undefined</code>，当我们实际上想要测试无效值(<code class="fe ng nh ni nj b">null</code>、&amp;、<code class="fe ng nh ni nj b">undefined</code>)时，bang语法不会帮助我们。)</p><h2 id="b166" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">举例说明falsy和nullish之间的区别</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="bf24" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里我们不想把<code class="fe ng nh ni nj b">Pepo</code>指定为猫的名字，规则是，当且仅当那里什么都没有时才指定(nullish。)</p><p id="bbb2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，我们可以根据新的Nullish Coallisng运算符重写我们的赋值。</p><h2 id="857f" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">零融合算子</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="ca64" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">尼利斯👏👏不过，有一点要提醒你，你还记得我们的昂贵的二传手吗？它一直在被调用。</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="ec1e" class="mu lw iq nj b gy no np l nq nr">Console:<br/>get called Pepo<br/>set called Pepo &lt; but the name was already set, there was no change!<br/>get called Pepo</span></pre><p id="8715" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以试着让它变得更懒。让我们试试那个。</p><h2 id="3889" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">带有无效合并运算符的惰性设置器</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="1786" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">控制台怎么样？</p><pre class="kg kh ki kj gt nk nj nl nm aw nn bi"><span id="0a6f" class="mu lw iq nj b gy no np l nq nr">get called Pepo<br/>get called Pepo<br/>*************** &lt;- perfect, no call here!<br/>get called Pepo<br/>set called undefined<br/>get called undefined<br/>set called Cleo<br/>get called Cleo &lt;- perfect, now it was called!</span></pre><p id="a044" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">太好了！但是你不同意<code class="fe ng nh ni nj b">x ?? (x = y)</code>写起来很复杂吗？</p><p id="e220" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于这种类型的赋值，我们应该有一个类似于<code class="fe ng nh ni nj b">+=</code>、<code class="fe ng nh ni nj b">*=</code>、<code class="fe ng nh ni nj b">-=</code>的简短语法，但不是算术性质的，而是逻辑性质的:“如果值为null，则赋值”。</p><h2 id="8bcc" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">逻辑无效赋值</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><p id="53cf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，这就是我所说的！</p><p id="43c4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">简洁的语法，其中:</p><ul class=""><li id="0160" class="ns nt iq kt b ku kv kx ky la nu le nv li nw lm nx ny nz oa bi translated">Setters不会被不必要地调用。</li><li id="bb01" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">而且，没有重复的代码！</li></ul><p id="4da8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">做得好，JavaScript！</p><h2 id="c495" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">和睦相处</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/8cffe2d8ac4ac1c0228fb128ce857696.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W39aqLsryi5Js0SDHl8IHQ.png"/></div></div></figure><h1 id="ac6d" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">逻辑AND赋值(&amp;&amp;=)</h1><p id="0b20" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">你还能想到什么其他的逻辑赋值？</p><p id="dbeb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们有“如果为空则赋值”，我们肯定需要“如果为真则赋值”，某种更新操作符。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="1d98" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">短路评估</h2><p id="0477" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">与前面的逻辑Nullish运算符相同，逻辑AND赋值具有内置的短路。</p><p id="f63f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从MDN Web文档:</p><blockquote class="ln lo lp"><p id="5552" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">从左到右对<a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND" rel="noopener ugc nofollow" target="_blank">逻辑AND </a>运算符进行评估，使用以下规则测试可能的短路评估:</p><p id="5542" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">(some falsy expression) &amp;&amp; expr</code>是对falsy表达式的短路评估；</p><p id="7a32" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">短路意味着上面的<code class="fe ng nh ni nj b"><em class="iq">expr</em></code>部分没有被<strong class="kt ir">求值</strong>，因此这样做的任何副作用都不会生效(例如，如果<code class="fe ng nh ni nj b"><em class="iq">expr</em></code>是一个函数调用，则调用永远不会发生)。</p><p id="3aaa" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">逻辑和赋值短路也意味着<code class="fe ng nh ni nj b">x &amp;&amp;= y</code>相当于:</p><p id="395a" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">x &amp;&amp; (x = y);</code></p><p id="7dc0" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">并且不等同于将总是执行赋值的以下内容:</p><p id="6cf2" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">x = x &amp;&amp; y;</code></p></blockquote><p id="4e2a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">好光滑！🐼</p><h2 id="218d" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">和睦相处</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/6131041553c5c45d1f62192bd0629a3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Flj6oTIUHuhpMLVzcSuyA.png"/></div></div></figure><h1 id="39cd" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">逻辑OR赋值(||=)</h1><p id="c1a2" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">现在，如果测试作业中的错误值是我们想要做的呢？</p><p id="d225" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是逻辑或任务的来源！🦸‍♂️</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ms mt l"/></div></figure><h2 id="6439" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">短路评估</h2><p id="fee3" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">短路机制与前面的运算符相同，来自MDN:</p><blockquote class="ln lo lp"><p id="22c4" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">逻辑OR运算符的工作方式如下:</p><p id="324d" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">x || y;<br/>// returns x when x is truthy<br/>// returns y when x is not truthy</code></p><p id="c640" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">逻辑OR操作符短路:只有当第一个操作数还没有确定结果时，才计算第二个操作数。</p><p id="d8cf" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">逻辑OR赋值也会短路，这意味着只有当逻辑运算要对右边求值时，它才会执行赋值。换句话说，<code class="fe ng nh ni nj b">x ||= y</code>相当于:</p><p id="c4b8" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">x || (x = y);</code></p><p id="646b" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">并且不等同于将总是执行赋值的以下内容:</p><p id="5862" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated"><code class="fe ng nh ni nj b">x = x || y;</code></p><p id="3217" class="kr ks lq kt b ku kv jr kw kx ky ju kz lr lb lc ld ls lf lg lh lt lj lk ll lm ij bi translated">请注意，这种行为不同于数学运算符和按位赋值运算符。</p></blockquote><h2 id="515a" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">和睦相处</h2><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi og"><img src="../Images/2d7432385607b4b5fb5a04fd8150c893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Feico8KdYy4io9Gk0bDOIw.png"/></div></div></figure><h1 id="d3fb" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">结论&amp;健康的自我推销</h1><p id="6617" class="pw-post-body-paragraph kr ks iq kt b ku mn jr kw kx mo ju kz la mp lc ld le mq lg lh li mr lk ll lm ij bi translated">这些新的操作符和JavaScript下一版本的新建议真的很令人兴奋，使我们的代码简洁明了，我邀请你在下面的链接中查看TC39的工作建议，但在两个问题之前:</p><ol class=""><li id="85a2" class="ns nt iq kt b ku kv kx ky la nu le nv li nw lm oh ny nz oa bi translated">您是否发现自己在代码中使用了这些操作符？</li><li id="012f" class="ns nt iq kt b ku ob kx oc la od le oe li of lm oh ny nz oa bi translated">你还期待看到哪些JavaScript提案最终定稿？</li></ol><h2 id="720f" class="mu lw iq bd lx mv mw dn mb mx my dp mf la mz na mh le nb nc mj li nd ne ml nf bi translated">如果你想以任何方式支持我</h2><ul class=""><li id="1f0f" class="ns nt iq kt b ku mn kx mo la oi le oj li ok lm nx ny nz oa bi translated"><a class="ae lu" href="https://www.youtube.com/channel/UCIrkqvbX0xx7Rm88kSGJ72Q" rel="noopener ugc nofollow" target="_blank">加入我的YouTube频道。</a></li><li id="23c8" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated">订阅我的每月简讯。</li></ul><h1 id="eceb" class="lv lw iq bd lx ly lz ma mb mc md me mf jw mg jx mh jz mi ka mj kc mk kd ml mm bi translated">参考</h1><ul class=""><li id="326e" class="ns nt iq kt b ku mn kx mo la oi le oj li ok lm nx ny nz oa bi translated"><a class="ae lu" href="https://github.com/tc39/proposal-logical-assignment" rel="noopener ugc nofollow" target="_blank"> TC39提案</a>。</li><li id="cfa8" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://tc39.es/proposal-logical-assignment/#sec-assignment-operators" rel="noopener ugc nofollow" target="_blank"> TC39规格。</a></li><li id="449e" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://nodejs.medium.com/node-js-v15-0-0-is-here-deb00750f278" rel="noopener"> Node.js v15宣布支持这些运营商。</a></li><li id="d301" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://v8.dev/blog/v8-release-85" rel="noopener ugc nofollow" target="_blank"> V8博客支持新运营商。</a></li><li id="31d8" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_nullish_assignment" rel="noopener ugc nofollow" target="_blank"> MDN逻辑无效赋值(？？=) </a></li><li id="f4c5" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_AND_assignment" rel="noopener ugc nofollow" target="_blank"> MDN逻辑与赋值(&amp; &amp; =) </a></li><li id="5c2b" class="ns nt iq kt b ku ob kx oc la od le oe li of lm nx ny nz oa bi translated"><a class="ae lu" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Logical_OR_assignment" rel="noopener ugc nofollow" target="_blank"> MDN逻辑或赋值(||=) </a></li></ul></div></div>    
</body>
</html>
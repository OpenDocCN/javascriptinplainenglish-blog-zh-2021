<html>
<head>
<title>Creating Perfect Endpoints for Filtering Currencies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为过滤货币创建完美的端点</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-perfect-endpoints-for-filtering-currencies-in-88945e6a81c7?source=collection_archive---------9-----------------------#2021-04-28">https://javascript.plainenglish.io/the-perfect-endpoints-for-filtering-currencies-in-88945e6a81c7?source=collection_archive---------9-----------------------#2021-04-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1ad4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们不需要使用第三方库来搜索和过滤货币。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/6b332502ff3b6dec4a30945c70bed1a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q9VNLpGa_lgd58mJlQKXww.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><a class="ae lb" href="http://ihatereading.in" rel="noopener ugc nofollow" target="_blank">Reach the website</a></figcaption></figure><h1 id="d29d" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">在后台</h1><p id="cfe8" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">过滤国家或为用户提供搜索他/她所属国家的搜索功能不是一件容易的事情。大多数时候，我们最终会在前端或后端使用第三方库来创建it端点。</p><p id="01e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将开发的终端</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="fb95" class="mk ld iq mg b gy ml mm l mn mo"><a class="ae lb" href="https://ihatereading.in/projects/search-currency?type=introduction" rel="noopener ugc nofollow" target="_blank">https://ihatereading.in/projects/search-currency?type=introduction</a></span></pre></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="b376" class="lc ld iq bd le lf mw lh li lj mx ll lm ln my lp lq lr mz lt lu lv na lx ly lz bi translated">概观</h1><p id="1e6a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">今天，我们将创建一个基本端点来获取所有国家及其各自货币的列表，并使用国家代码或名称过滤货币。</p><p id="b5af" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经在前端创建了一个搜索和过滤国家的组件。下面提供了链接。</p><div class="nb nc gp gr nd ne"><a href="https://shreyvijayvargiya26.medium.com/one-json-object-for-developing-the-complete-currency-select-b6da93dacc4e" rel="noopener follow" target="_blank"><div class="nf ab fo"><div class="ng ab nh cl cj ni"><h2 class="bd ir gy z fp nj fr fs nk fu fw ip bi translated">一个用于开发完整货币选择的JSON对象</h2><div class="nl l"><h3 class="bd b gy z fp nj fr fs nk fu fw dk translated">从单个JSON对象在react应用程序中创建货币选择下拉列表</h3></div><div class="nm l"><p class="bd b dl z fp nj fr fs nk fu fw dk translated">shreyvijayvargiya26.medium.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns kv ne"/></div></div></a></div></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="9b16" class="lc ld iq bd le lf mw lh li lj mx ll lm ln my lp lq lr mz lt lu lv na lx ly lz bi translated">入门指南</h1><p id="047a" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我将使用simple Express和Node.js来创建一个端点。</p><p id="ef87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你是我的追随者或者是我文章的忠实读者，那么你应该知道，大多数时候，我会提供知识库的链接，但是今天，我们不会这样做。相反，我将指导您自己创建存储库的步骤。</p><p id="7722" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">按照步骤添加使用Express创建端点的基本设置。</p><ul class=""><li id="fe04" class="nt nu iq jp b jq jr ju jv jy nv kc nw kg nx kk ny nz oa ob bi translated">安装快速主体解析器和cors</li><li id="1ecc" class="nt nu iq jp b jq oc ju od jy oe kc of kg og kk ny nz oa ob bi translated">添加<code class="fe oh oi oj mg b"><strong class="jp ir">package.json</strong></code>文件</li><li id="2170" class="nt nu iq jp b jq oc ju od jy oe kc of kg og kk ny nz oa ob bi translated">在<code class="fe oh oi oj mg b"><strong class="jp ir">package.json</strong></code>中添加脚本标签</li><li id="d1d7" class="nt nu iq jp b jq oc ju od jy oe kc of kg og kk ny nz oa ob bi translated">在根目录中为路由端点创建一个名为routes的文件夹</li><li id="172a" class="nt nu iq jp b jq oc ju od jy oe kc of kg og kk ny nz oa ob bi translated">创建一个名为Controller的文件夹来定义端点方法</li></ul><p id="402f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个过程完成后，您的基本设置就准备好了:</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="e028" class="mk ld iq mg b gy ml mm l mn mo">yarn init</span><span id="0374" class="mk ld iq mg b gy ok mm l mn mo">yarn add express body-parser cors nodemon</span><span id="7757" class="mk ld iq mg b gy ok mm l mn mo">// Inside package.json<br/>"scripts": {<br/>   "dev": nodemon server.js<br/>}</span></pre><p id="1999" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">确保你的完整代码存在于<code class="fe oh oi oj mg b"><strong class="jp ir">server.js</strong></code>根目录下。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="9f3a" class="lc ld iq bd le lf mw lh li lj mx ll lm ln my lp lq lr mz lt lu lv na lx ly lz bi translated">创建端点</h1><p id="348f" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">第一步是下载所有国家及其各自货币的列表。我将使用的JSON对象可以从下面的链接下载。</p><pre class="km kn ko kp gt mf mg mh mi aw mj bi"><span id="2e94" class="mk ld iq mg b gy ml mm l mn mo"><a class="ae lb" href="https://gist.github.com/Fluidbyte/2973986" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Fluidbyte/2973986</a></span></pre></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="0556" class="mk ld iq bd le ol om dn li on oo dp lm jy op oq lq kc or os lu kg ot ou ly ov bi translated">获取所有货币的第一个端点</h2><p id="efdb" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我已经创建了一个端点<code class="fe oh oi oj mg b"><strong class="jp ir">/search-all-currencies</strong></code>，它基本上从JSON对象导入货币列表，并简单地将它们与响应中的一些更关键的值一起导出，比如API响应的长度和状态。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ow"><img src="../Images/0aef20309322899b6e1aec6b1e9f546d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWqpx4p0I3CqylGg6v21iQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe oh oi oj mg b"><strong class="bd ox">/searchAllCurrencies</strong></code> response in the localhost</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><p id="d451" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我还返回了作为API状态和数据长度的成功键值，它基本上给出了返回的所有货币的计数。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="63d0" class="mk ld iq bd le ol om dn li on oo dp lm jy op oq lq kc or os lu kg ot ou ly ov bi translated">对货币列表进行分页</h2><p id="6458" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">有时在前端，我们不想一起获取119个对象，这需要大量的数据获取，所以为了防止过度获取，我们简单地添加一个限制，只返回第<strong class="jp ir"> x </strong>页上的第一个<strong class="jp ir"> x </strong>项。例如，如果限制是10，页面是1，那么我们将只返回从索引0开始的10个项目。</p><p id="63f4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在端点中提供limit和pagination作为查询总是一个好方法，这使得前端中的一切都变得更容易，以避免一次性获取过多的数据。</p><p id="9d73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在同一个endpoint/search-all-currency中，我们将在查询中接受来自用户的限制和页码，并相应地过滤数据。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pa"><img src="../Images/0af62bf177d9a581b106ce55a000ef1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjgrcY4dWhNuBEIVtx-gTg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Paginated data on the basis of limit and page value in the query object</figcaption></figure><p id="1af7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，查询中返回的值默认为字符串类型，所以我们使用<code class="fe oh oi oj mg b"><strong class="jp ir">Number</strong></code>构造函数将它们转换为数字。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="1403" class="mk ld iq bd le ol om dn li on oo dp lm jy op oq lq kc or os lu kg ot ou ly ov bi translated">用于筛选单一货币的端点</h2><p id="dac1" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">下一个过程是根据国家的名称过滤货币，该名称将由用户在请求对象的查询中提供。</p><p id="ab33" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用名称过滤货币，通过javascript的<code class="fe oh oi oj mg b"><strong class="jp ir">toUpperCase</strong></code>方法将每个货币名称转换为大写，然后使用javascript的<code class="fe oh oi oj mg b"><strong class="jp ir">includes</strong></code>方法在数组中搜索查询值。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oy oz l"/></div></figure><p id="95d2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们导入所有货币，然后根据查询中提供的名称过滤货币，最后我们获取这些货币并在响应中返回。</p></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="e14d" class="mk ld iq bd le ol om dn li on oo dp lm jy op oq lq kc or os lu kg ot ou ly ov bi translated">使用代码过滤货币</h2><p id="e0a0" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们可以添加一个端点，使用查询中提供的<code class="fe oh oi oj mg b"><strong class="jp ir">code</strong></code>值来过滤货币。您还可以在请求对象的主体中包含多个查询或一个while JSON数据来过滤数据。</p><p id="4e89" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个过程与我们按名称过滤货币的过程相同。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pb"><img src="../Images/db99dafd31081389fe9beeb52a752c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J-ZRWIUbm3rY8Ci64nNZRw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Response object of the currency filtered using code</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h2 id="11fb" class="mk ld iq bd le ol om dn li on oo dp lm jy op oq lq kc or os lu kg ot ou ly ov bi translated">根据用户在货币查询中键入的任何内容过滤货币</h2><p id="cd51" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们现在将向前迈进一步，提供更好的搜索体验。如果用户在查询中提供任何值，而不是映射确切的关键字，如名称、符号或代码，我们会将它们映射在一起，以向用户返回一些内容。</p><p id="155c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是一种罕见的情况，但假设您在网站上有搜索输入，用户仍然根据前2/3个字符输入任何内容，我们会向用户返回一些内容。这种用户体验基本上不会迎合用户的欠数据图像。</p><p id="5d2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将接受查询，并简单地尝试查找与符号或代码或name_plural的名称匹配的值，并在响应中返回该项。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="oy oz l"/></div></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pc"><img src="../Images/3afc7da40052391b9c42e40742f2a538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IuldKsVoLsOBQQL1q0fkRg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Filtered currency on the basis of value</figcaption></figure></div><div class="ab cl mp mq hu mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ij ik il im in"><h1 id="9700" class="lc ld iq bd le lf mw lh li lj mx ll lm ln my lp lq lr mz lt lu lv na lx ly lz bi translated">结论</h1><p id="9197" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这个JSON对象使得一切都变得如此简单，为过滤货币提供了一个无缝且轻松的端点。请继续关注，获取更多关于技术问题的更新。</p><p id="63fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是你的作者<a class="ae lb" href="http://ihatereading.in/squad" rel="noopener ugc nofollow" target="_blank">T5 ShreyT7。下次见。祝大家愉快。</a></p><p id="bab5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="pd">更多内容尽在plainenglish.io </em> </a></p></div></div>    
</body>
</html>
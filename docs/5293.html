<html>
<head>
<title>How to Convert a Unix Timestamp to Time in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将Unix时间戳转换成时间？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-convert-a-unix-timestamp-to-time-in-javascript-d8f6ef1d32b5?source=collection_archive---------3-----------------------#2021-10-30">https://javascript.plainenglish.io/how-to-convert-a-unix-timestamp-to-time-in-javascript-d8f6ef1d32b5?source=collection_archive---------3-----------------------#2021-10-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a59bb7a97f79440d04822b5e1123c1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*19F_V2rTBCnZvsTj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@yl1980s?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Yan L</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0493" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们必须将Unix时间戳转换成更易于阅读的格式。</p><p id="5acc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何用JavaScript将Unix时间戳转换成可读性更好的格式。</p><h1 id="674d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用日期构造函数及其实例方法</h1><p id="4cc4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将Unix时间戳(以毫秒为单位)传递给<code class="fe me mf mg mh b">Date</code>构造函数来创建一个<code class="fe me mf mg mh b">Date</code>实例。</p><p id="7751" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以使用它的实例方法获取日期的不同部分，并将其放入一个字符串中。</p><p id="676d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ca9e" class="mq lc iq mh b gy mr ms l mt mu">const unixTimestamp = 15493124560<br/>const date = new Date(unixTimestamp * 1000);<br/>const hours = date.getHours();<br/>const minutes = "0" + date.getMinutes();<br/>const seconds = "0" + date.getSeconds();<br/>const formattedTime = `${hours}:${minutes.substr(-2)}:${seconds.substr(-2)}`;</span><span id="acca" class="mq lc iq mh b gy mv ms l mt mu">console.log(formattedTime);</span></pre><p id="18be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在几秒钟内就有了<code class="fe me mf mg mh b">unixTimestamp</code>。</p><p id="7d97" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将其乘以1000，并将其传递给<code class="fe me mf mg mh b">Date</code>构造函数。</p><p id="95f2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们调用<code class="fe me mf mg mh b">getHours</code>从<code class="fe me mf mg mh b">Date</code>实例中获取小时数。</p><p id="57bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">getMinutes</code>来得到会议记录。</p><p id="27d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">getSeconds</code>来获取秒数。</p><p id="c764" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把它们放在<code class="fe me mf mg mh b">formattedTime</code>字符串中。</p><p id="ac23" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了得到2位数的分和秒，我们用-2调用<code class="fe me mf mg mh b">substr</code>来得到它们的最后2位数。</p><p id="7f02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将删除数字字符串中的任何前导零。</p><p id="9e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后应该会看到<code class="fe me mf mg mh b">’5:42:40'</code>的结果。</p><p id="a60b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要获得年、月和日，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e686" class="mq lc iq mh b gy mr ms l mt mu">const unixTimestamp = 1613330814<br/>const date = new Date(unixTimestamp * 1000);<br/>const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];<br/>const year = date.getFullYear();<br/>const month = months[date.getMonth()];<br/>const dt = date.getDate();<br/>const hours = date.getHours();<br/>const minutes = "0" + date.getMinutes();<br/>const seconds = "0" + date.getSeconds();<br/>const formattedTime = `${year}-${month}-${dt} ${hours}:${minutes.substr(-2)}:${seconds.substr(-2)}`;</span><span id="15c7" class="mq lc iq mh b gy mv ms l mt mu">console.log(formattedTime);</span></pre><p id="839a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有以秒为单位的Unix时间戳。</p><p id="e9d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，在将它传递给<code class="fe me mf mg mh b">Date</code>构造函数之前，我们必须将它乘以1000。</p><p id="1b09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们有一个包含月份缩写的<code class="fe me mf mg mh b">months</code>数组。</p><p id="fbb0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getFullYear</code>返回一个<code class="fe me mf mg mh b">Date</code>实例的4位数年份。</p><p id="8470" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getMonth</code>返回<code class="fe me mf mg mh b">Date</code>实例的月份号，0表示一月，1表示二月，一直到11表示十二月。</p><p id="aa2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">getDate</code>方法返回一个月中的某一天。</p><p id="81e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码的其余部分是相同的。</p><p id="c8f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么<code class="fe me mf mg mh b">formattedDate</code>就是<code class="fe me mf mg mh b">'2021-Feb-14 11:26:54'</code>。</p><h1 id="fd9e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">The toLocaleTimeString Method</code></h1><p id="743d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">将日期格式化为可读字符串的另一种方法是使用<code class="fe me mf mg mh b">toLocaleTimeString</code>方法。</p><p id="2620" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将区域设置字符串作为其参数。</p><p id="ae34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3e67" class="mq lc iq mh b gy mr ms l mt mu">const str = new Date(1613331041675).toLocaleTimeString("en-US")<br/>console.log(str)</span></pre><p id="fecb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将转换成毫秒的Unix时间戳传递给<code class="fe me mf mg mh b">Date</code>构造函数。</p><p id="8428" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">'en-US'</code>地点调用<code class="fe me mf mg mh b">toLocaleDateString</code>。</p><p id="e1cb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果我们应该得到<code class="fe me mf mg mh b">‘11:30:41 AM’</code>。</p><h1 id="e7aa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">The Intl.DateTimeFormat Constructor</code></h1><p id="7c3f" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以格式化日期的另一种方法是使用<code class="fe me mf mg mh b">Intl.DateTimeFormat</code>构造函数。</p><p id="b1f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3cab" class="mq lc iq mh b gy mr ms l mt mu">const dtFormat = new Intl.DateTimeFormat('en-US', {<br/>  timeStyle: 'medium',<br/>  timeZone: 'PST'<br/>});<br/>const str = dtFormat.format(new Date(1613331041675));<br/>console.log(str)</span></pre><p id="883c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将locale作为构造函数的第一个参数传入。</p><p id="f470" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传递一些选项作为第二个参数。</p><p id="bf5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">timeStyle</code>有当时的格式化风格。</p><p id="6acd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">timeZone</code>设置返回时间的时区。</p><p id="4b53" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">format</code>返回一个带有时间的字符串。</p><p id="d487" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果我们得到了<code class="fe me mf mg mh b">‘11:30:41 AM’</code>。</p><h1 id="519b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="a6f4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用自己的代码用JavaScript格式化Unix时间戳，或者使用本地方法和构造函数来格式化日期。</p><p id="06f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>3 Ways to Write Elegant JavaScript Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写优雅JavaScript代码的3种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-ways-to-write-elegant-javascript-df9d02cb97b5?source=collection_archive---------1-----------------------#2021-04-10">https://javascript.plainenglish.io/3-ways-to-write-elegant-javascript-df9d02cb97b5?source=collection_archive---------1-----------------------#2021-04-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="378b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">是时候结束意大利面代码了。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8399a2a55dae6bbc939da030cabc19df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bxt_7BaL_n4_I1vr"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@cebbbinghaus?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christopher Robin Ebbinghaus</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2504" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每当我完成一个项目或者查看一些旧代码时，我总是试图找到重构和提高可读性的方法。实现这一点的方法可以包括编写定制的React钩子，将重复的代码封装到子例程中，等等。在本文中，我将分享三种模块化和提高代码可维护性的常用方法。让我们开始吧。</p><h1 id="54d5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak"> 1。使用打字稿</strong></h1><p id="ac83" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">这可能会让一些人感到惊讶，但是TypeScript减轻了许多在某些情况下使JavaScript成为不安全语言的问题。这也使你的代码意图更加清晰。让我们看一个简单React组件<code class="fe mm mn mo mp b">People</code>的JavaScript示例:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="0568" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在这里可以看到，<code class="fe mm mn mo mp b">People</code>接受了<code class="fe mm mn mo mp b">peopleList</code>作为道具，这是一个对象列表，每个对象代表一个将被渲染为<code class="fe mm mn mo mp b">&lt;ListItem /&gt;</code>的人。所有这些都很好，但是如果其中一个人的财产丢失了呢？如果一个人的职业或薪水是<code class="fe mm mn mo mp b">undefined</code>呢？你们中的许多人可能认为我们可以使用<code class="fe mm mn mo mp b">prop-types</code>来处理这个问题，但是在我看来，TypeScript提供了一个更好的解决方案。让我们看看用TypeScript编写的同一个<code class="fe mm mn mo mp b">People</code>组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="6cdb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个例子中，我们定义了一个带有可选属性的接口<code class="fe mm mn mo mp b">Person</code>。)通知编译器<code class="fe mm mn mo mp b">peopleList</code>中的人可能只包含<code class="fe mm mn mo mp b">Person</code>中属性的子集。我们还定义了一个<code class="fe mm mn mo mp b">PeopleProps</code>接口，它指定了prop <code class="fe mm mn mo mp b">People</code>应该接收的类型，这是一个<code class="fe mm mn mo mp b">Person</code>数组。因此，<code class="fe mm mn mo mp b">People</code>组件更加灵活和坚固。</p><h1 id="53af" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak"> 2。使用指纹</strong></h1><p id="9cc2" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">如果您熟悉立即调用函数表达式(IIFE ),那么您肯定知道它们作为一种将两个语句合成一个语句的简洁方法是多么有用。假设您想用一些外部数据初始化一个数组:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="1aa7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这个例子中，我们定义了一个函数<code class="fe mm mn mo mp b">initList</code>，它返回一个包含外部数据的数组。然后我们调用该函数并将结果存储在<code class="fe mm mn mo mp b">dataList</code>中。这并不是说这段代码有什么问题，但它可以写得更优雅，就像这样:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="2294" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我们通过将<code class="fe mm mn mo mp b">dataList</code>分配给一个立即被调用的匿名函数来节省几行代码。</p><h1 id="11b9" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated"><strong class="ak"> 3 .关注点分离</strong></h1><p id="7bda" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">将代码库中的功能问题分开总是很重要的，尤其是在处理日益复杂的项目时。让一个函数同时执行多个任务通常是不理想的，尤其是当它们彼此没有关系时。让我们来分析一个依赖于一些外部API数据的组件<code class="fe mm mn mo mp b">Example</code>的不良反应示例:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="99e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个例子不好的原因是因为<code class="fe mm mn mo mp b">Example</code>组件应该只负责在屏幕上显示数据，而不是获取外部数据。这会造成混乱，并使组件更难调试。幸运的是，我们可以通过编写自己的钩子来解决这个问题，钩子包含了发出请求的逻辑。这个钩子将是一个接受url和选项的函数，发出post请求，并返回如下数据:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="c884" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">既然调用API的所有逻辑都在这个自定义钩子中，我们的<code class="fe mm mn mo mp b">Example</code>组件现在看起来如下:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="664b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">随着<code class="fe mm mn mo mp b">usePost</code>对请求后逻辑的抽象，现在<code class="fe mm mn mo mp b">Example</code>组件只负责显示数据。通过做出这种改变，代码库变得更加容易维护。</p><p id="1bb2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你来了，谢谢你的阅读！我希望你觉得这篇文章很有见地。祝您一天愉快。</p><p id="909a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ms">更多内容参见</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ms">简明英语. io </em> </a></p></div></div>    
</body>
</html>
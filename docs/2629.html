<html>
<head>
<title>An Introduction to State Management in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的状态管理介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-management-in-react-e2c001815669?source=collection_archive---------9-----------------------#2021-05-30">https://javascript.plainenglish.io/state-management-in-react-e2c001815669?source=collection_archive---------9-----------------------#2021-05-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/70eaf9e419817cf3ebce0885031911ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*k_QFNR6kQD0h53vE"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@joshua_j_woroniecki?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Woroniecki</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b27e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">状态管理是React中最重要的主题之一，今天我们将在类组件和功能组件中使用状态。在此之前，我们先来学习一下什么是状态。</p><p id="0c05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">状态是一个JavaScript对象。它存储数据，对该数据的任何更改都将再次重新呈现页面。为什么这很重要？因为我们总是希望显示我们数据的最新版本，而有了state，我们就能做到这一点。</p><h2 id="3f94" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><strong class="ak">类组件中的状态管理</strong></h2><p id="9102" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">当使用状态时，我们要做的第一件事是创建对象。通常，状态是在类的构造函数中创建的。</p><p id="633f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，让我们在state中定义一些数据，并在页面上显示它们。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi lw"><img src="../Images/8edb6dd7802a99cd9269dbc38ff0dcef.png" data-original-src="https://miro.medium.com/v2/resize:fit:410/format:webp/1*OgpdUrod0KHou1lptcAHLg.png"/></div></figure><p id="12f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在我的州定义了姓名和年份。如您所见，名称是一个字符串，年份是一个数字。现在我们已经创建了我们的状态，我们可以显示它。</p><p id="1c20" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们想在HTML中显示状态变量，我们用花括号把它括起来，如下所示。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mb"><img src="../Images/dc0baca1c30793816a5dbc67febec0cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*G4cSbPDdXioaFje0eYI9xw.png"/></div></figure><p id="8738" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的名称和年份值是静态的。但是在现实世界的项目中，我们通常不会这样使用它。状态值通常随着用户输入而改变。</p><p id="c7e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了调整用户输入状态的变化，我们使用<strong class="kc io"> setState() </strong>。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/875f6ec640720d06608f602c5f46bca0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*GOu6ni452xTzd5vSJYd2ng.png"/></div></figure><p id="8f4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在使用setState()时，有一些规则是我们应该注意的。其中一些如下:</p><ul class=""><li id="1a70" class="md me in kc b kd ke kh ki kl mf kp mg kt mh kx mi mj mk ml bi translated">不要直接更改状态值。React给了我们一个巨大的能力来再现状态的可能性。如果我们直接改变一个状态值，不可避免的会遇到渲染问题。</li></ul><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/c7bb04e0c3bab94d4346a4a8592c79a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*FRQ8z_zlFU42cJACNsC9dA.png"/></div></figure><ul class=""><li id="e9ec" class="md me in kc b kd ke kh ki kl mf kp mg kt mh kx mi mj mk ml bi translated">您在状态中所做的更改可能是异步的。所以，在你改变状态值之后，如果你必须使用一个更新的值，使用一个回调函数。</li></ul><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/04e48de0d0a4e9fb94c82f349b9383b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*k8CTqQWXObsTJXNg6rc0qg.png"/></div></figure><ul class=""><li id="b18f" class="md me in kc b kd ke kh ki kl mf kp mg kt mh kx mi mj mk ml bi translated">如果您的状态中有嵌套对象，并且想要更改其中的特定值，请先复制上一个状态对象，然后更改想要更新的值。这样，您不会丢失任何未更新的值。</li></ul><p id="8070" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设我们有一个如下所示的状态:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/6fcada580da8ef84266d17ae039b264c.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*4g4KLhh8glUG7T7P1izuJA.png"/></div></figure><p id="e81d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们只想更新联系人信息中的电子邮件信息，我们应该这样更新它:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/22f86a54b56908a3fa303cca99f53975.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*oVRQckvQ8sBa8ytqRCdVoQ.png"/></div></figure><h2 id="0e78" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><strong class="ak">功能组件中的状态管理</strong></h2><p id="82ff" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">在功能组件中，我们对状态的定义和使用略有不同。我们必须使用<strong class="kc io"> useState() </strong>钩子来使用状态。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/10471875c7db7007e45a41473b8afe07.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*5hTY5AoWBXeunNEIFQc4hA.png"/></div></figure><p id="c891" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> useState() </strong>是一个将状态的初始值作为参数的函数。并返回包含两项的数组。第一项是状态的值，第二项是更新状态值的函数。如果我们想用用户输入改变状态值，我们可以这样改变它:</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/6ab1bb2145a8f0760ea785fb97fe154f.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*gTKN1Gs0yS0UT-swTFLhZA.png"/></div></figure><p id="ad7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，我们可以更改嵌套对象的特定值，如下所示。</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/dca24d66815a5b08ae622e7ded8c6fc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/format:webp/1*ttDL6I5iyfl-NSuTZ9gcPg.png"/></div></figure><p id="297e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今天，我试图解释我们如何在React中管理类组件和功能组件的状态。我希望我的帖子对某人有所帮助。</p><p id="d0a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你有美好的一天。</p><p id="f159" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">参考资料:</p><div class="ms mt gp gr mu mv"><a href="https://reactjs.org/docs/state-and-lifecycle.html" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd io gy z fp na fr fs nb fu fw im bi translated">状态和生命周期-反应</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">本页介绍了React组件中状态和生命周期的概念。你可以找到详细的组件API…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">reactjs.org</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj jt mv"/></div></div></a></div><div class="ms mt gp gr mu mv"><a href="https://www.digitalocean.com/community/tutorials/how-to-manage-state-with-hooks-on-react-components" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd io gy z fp na fr fs nb fu fw im bi translated">如何用React组件上的钩子管理状态| DigitalOcean</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">React钩子是React前端JavaScript库中的一组广泛的工具，当一个…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">www.digitalocean.com</p></div></div><div class="ne l"><div class="nk l ng nh ni ne nj jt mv"/></div></div></a></div><p id="571f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nl">更多内容看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nl">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
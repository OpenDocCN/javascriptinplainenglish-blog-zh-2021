# 实现一流 API 的一些简单技巧

> 原文：<https://javascript.plainenglish.io/few-tips-for-implementing-kick-ass-apis-2c563670fff8?source=collection_archive---------18----------------------->

![](img/1399ea9074278aa1e5831965b3bc842e.png)

Photo by [Justin Veenema](https://unsplash.com/@justinveenema?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/kick-ass?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

在这篇文章中，我将分享从实现 API 的经验中学到的技巧。

为什么首先要实现 API？

API 是定义 API 用户和 API 提供者之间交互边界的好方法。这实现了以下结果:

*   API 用户只知道 API 做什么以及如何成功地与它集成，而不需要了解它的底层实现。
*   API 提供者记录 API 做什么以及如何使用它，并保留在他们认为合适的时候改变 API 底层实现的自由。

是什么让一个 API 成为一流的 API？

一流的 API 是由它的易用性定义的。API 用户应该很容易理解 API 操作的作用、输入和输出。它应该易于集成，易于测试，并且操作安全。

此外，一流的 API 永远不会中断，不断发展，提供价值，相应地扩展和执行。

什么样的 API 适合一流的 API？

让我们从那些不适合一流 API 的开始:Web 服务、SOAP、基于 XML/Atom 的 API。虽然这些类型的 API 已被证明能够工作并提供巨大的价值，甚至是巨大的价值，但它们也被证明在集成、维护、发展、操作、更改、淘汰、退役、消除方面的成本非常高……这是一个易受过度设计、过度复杂和耦合系统影响的雷区。

那还剩下什么？

嗯，我们可能读过 REST，HATEOAS，Richardson 成熟模型…都很好…优雅，聪明，聪明…有时是天才。但这是 API 用户的角度还是 API 提供者的角度？我不得不承认，在 Richardson 成熟度模型中实现最高水平的成熟度有一种工程上的乐趣，它让位于一种被美化了的 REST API！但是说实话，谁在乎呢？API 用户在这个模型中看到了同样的荣耀吗，或者它只是一个过度设计的 API？

那又怎样？

嗯，这里的一个好原则是*保持事情简单愚蠢*。HTTP 是一个很好的协议规范，它定义了 API 用户期望的和 API 提供者应该支持的语义。

就这样吗？HTTP 真的？传输数据的内容类型呢？

JSON 是一个很好的例子， *JavaScript Object Notation，*我喜欢它。它足够简洁，可读性强，易学易形。它拥有 API 处理数据所需的一切，不多也不少。此外，它还附带了一个模式，这是一种指定和验证 API 支持的事物的形状的简便方法。

我们是在说 HTTP 和 JSON 是实现一流 API 的关键吗？这不是和休息一样吗？

不完全是，这是对 REST 的简化，REST 是一种将 HTTP 端点公开为能够在 JSON 中处理数据的操作的风格，没有通过 URIs 管理 REST API 中公开的资源的复杂性。

但是还有更多，它通过一个简单的界面解决了一个复杂的问题。请记住:

> 完美是可以达到的，不是当没有什么可以再增加的时候，而是当没有什么可以拿走的时候(安托万·德·圣·埃克苏佩里)

优秀的 API 关注用户的需求，并通过采用用户理解的语言来提供满足这些需求的智能方法。

由于 API 是双方交流信息的一种方式，所以优秀的 API 会采用一种与用户所说的语言产生共鸣的语言。定义这样的语言应该驱动端点的命名和 API 处理的事物的命名。将一个 API 提升到这样一个水平是很关键的，即用户可以对这个 API 进行推理，并且理解他们将如何使用它来支持他们的功能需求，而不必将他们的领域转换成技术术语。

在实现任何东西之前，领域驱动的设计和定义 API 用户和 API 提供者所说的无处不在的语言 T2 的练习将极大地促进 API 的易用性。在设计 API 时，API 提供者有责任确保他们的 API 所使用的语言被他们的目标 API 用户所理解，并与他们的用户的需求产生共鸣。因此，通过尽早与 API 用户接触、向这些用户展示 API 的草稿以及 API 支持的功能场景来获取这些信息是至关重要的。演示、研讨会、邀请客户，还有看看其他公司是如何做的，所有这些都有助于一个持续的反馈循环，帮助 API 提供者设计出一流的 API。

API 通常解决两类问题:

*   摄取数据
*   访问数据

在数据获取方面，让我们尝试让 API 用户尽可能容易地获取 API 提供者所需的数据。

我们能做些什么来简化数据接收？

找出 API 用户打算摄取的数据的来源，使用一种易于与 API 用户后端系统匹配的语言来形成数据，并尽可能减少成功摄取数据所需的工作量，以便开始成功操作 API。例如，设计您的 API 时，只需要对底层系统绝对关键的最少量的信息，而让其余的信息是可选的。让 API 用户决定可以添加哪些额外数据，用于哪些目的，以便 API 用户逐渐增加其 API 集成所实现的价值。

理想情况下，只要接收的数据符合 API 定义中指定的模式，API 生产者就应该接受它，然后让内部流程丰富这些数据以交付目标值。

在数据访问方面，API 用户需要使用他们知道的信息来访问他们需要的信息。因此，API 提供者应该关注于暴露和丰富访问模式，以最好地支持他们的用户。定义如何访问信息对于轻松集成 API 至关重要。好消息是，这样的访问模式已经为人所知，因为它们可以从 API 用户谈论他们的功能需求时所说的语言中派生出来。当 API 提供者做到这一点时，就会产生一个非常棒的 API！

如何让 API 使用安全，操作安全？

API 提供者有责任保证他们的 API 用户可以安全地使用 API。根据 API 的功能和正在处理的数据的性质，这可以采取许多不同的形式。

API 提供者应该通过适当的 API 用户识别机制来了解谁在使用他们的 API。他们还应该确保 API 用户在获取和访问数据时得到相应的授权，以保证他们的 API 正在处理的数据的完整性。数据的传输显然应该加密。至于存储，必须根据数据的敏感性来完成(编码、加密、编辑)。

归根结底，API 用户决定一个 API 是否配得上一流 API 的称号，只有这样，API 提供商才能声称他们做到了！

*更多内容看*[***plain English . io***](http://plainenglish.io/)
<html>
<head>
<title>Angular Preloading Strategies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度预加载策略</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-preloading-strategies-what-are-they-and-how-are-they-used-fb8a92e9d158?source=collection_archive---------6-----------------------#2021-02-24">https://javascript.plainenglish.io/angular-preloading-strategies-what-are-they-and-how-are-they-used-fb8a92e9d158?source=collection_archive---------6-----------------------#2021-02-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="df81" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">它们是什么？它们是如何使用的？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e60da8072848a79c1d2cefabad98f91e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aoCWIXdPumbET9X2.png"/></div></div></figure><p id="950a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">想要深入了解延迟加载模块和<a class="ae lk" href="https://angular.io/api/router/PreloadingStrategy" rel="noopener ugc nofollow" target="_blank">预加载策略</a>？</p><p id="343d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是完整的指南，将教你一切你需要知道的关于Angular的预加载策略。</p><p id="1833" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Angular有一个非常酷的功能，叫做<a class="ae lk" href="https://angular.io/guide/architecture-modules" rel="noopener ugc nofollow" target="_blank">角度模块</a>。</p><p id="9bc6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但这是什么呢？</p><p id="b66d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">角度模块是可以导入应用程序不同部分的代码块。一个模块可以包含成组的组件、服务和其他功能，每一个都专注于一个功能领域、特定的领域、工作流等</p><p id="4214" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">还有他们为什么<strong class="kq io">酷</strong>？</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://school.danielk.tech/course/unleash-your-angular-testing-skills?utm_source=medium&amp;utm_medium=banner&amp;utm_campaign=unleash_testing_skills"><div class="gh gi ll"><img src="../Images/f1b6577fb74e9686aa28b76134fcd343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIckqGEatusFxMIp0LnzNw.png"/></div></a></figure><p id="1d41" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">它们很酷，因为角形模块给网络应用带来了模块化的超能力。据我所知，没有其他前端框架或库能像Angular做得这么好。</p><p id="de5c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">随着Angular应用的增长，模块特性变得越来越重要。它允许您将web应用程序的各个部分分割成可以在以后加载的片段。</p><p id="9146" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，当您的Angular应用程序的核心被加载到浏览器中时，这些延迟加载的模块将不会被加载，直到被请求。这意味着当用户点击一个需要你的一个惰性加载模块的链接时，他们将不得不等待直到那个模块被下载和初始化。</p><p id="39a3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是<strong class="kq io">预加载策略</strong>可以帮助你的角度应用闪闪发光的地方。</p><p id="9d6f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">预加载策略指导Angular如何加载你的懒惰模块。</p><p id="dc4b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你想马上装货吗？</p><p id="9365" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">还是在用户需要的时候？</p><p id="502b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者等到用户将鼠标悬停在一个还没有加载的懒加载模块上，又如何呢？</p><p id="cc19" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我的意思是，嘿伙计，你是老板，你可以在这种偷懒的事情上发号施令。</p><h1 id="114f" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">内置角度预加载策略。</h1><p id="1c8a" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">有两种基本预载策略的角船。</p><p id="d3a9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">策略表明你不能预加载任何懒惰加载的模块。</p><p id="6c63" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe mj mk ml mm b">PreloadAllModules</code>采用完全相反的方法，立即加载所有模块。</p><p id="de90" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">对于小角度应用，这两个选项中的一个可能有效。但是我的经验是，一旦Angular应用程序超出了任何小的范围，你就会想要一个更具战略性的预加载策略。</p><p id="5789" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">那么我们还有其他选择吗？</p><h1 id="a9da" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">其他角度预加载策略。</h1><p id="b12d" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">还有其他预加载策略可以使用，由社区建立。</p><p id="6118" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该软件包是一个<a class="ae lk" href="https://angular.io/api/router/PreloadingStrategy" rel="noopener ugc nofollow" target="_blank">预加载策略</a>，当用户将鼠标悬停在相应的路由器链路上时，该软件包将预加载一个惰性加载的路由。它是由<a class="ae lk" href="https://github.com/mgechev" rel="noopener ugc nofollow" target="_blank">明科·格切夫</a>建造的。</p><p id="7f50" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">你知道吗？他恰好是Angular团队的一员。</p><p id="b6ff" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">要安装<a class="ae lk" href="https://www.npmjs.com/package/ngx-hover-preload" rel="noopener ugc nofollow" target="_blank"> ngx-hover-preload软件包</a>，请运行以下命令。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="4037" class="mr ln in mm b gy ms mt l mu mv">yarn add ngx-hover-preload</span></pre><p id="448c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者如果你使用npm。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="963e" class="mr ln in mm b gy ms mt l mu mv">npm install --save ngx-hover-preload</span></pre><p id="bce2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在您的应用程序模块和延迟加载的模块中导入悬停预加载模块，以确保所需的指令可用:</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="c517" class="mr ln in mm b gy ms mt l mu mv">import { HoverPreloadModule } from 'ngx-hover-preload'; </span><span id="c042" class="mr ln in mm b gy mw mt l mu mv">@NgModule({ <br/>   declarations: [ // ... ], <br/>   imports: [ // ... HoverPreloadModule ], <br/>   bootstrap: [AppComponent] <br/>}) export class AppModule { }</span></pre><p id="a873" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">接下来，您将把悬停预加载模块导入到所有延迟加载的模块中。</p><p id="00d3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，将悬停预加载策略设置为您的预加载策略:</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="7125" class="mr ln in mm b gy ms mt l mu mv">import { HoverPreloadStrategy } from 'ngx-hover-preload'; </span><span id="33d9" class="mr ln in mm b gy mw mt l mu mv">@NgModule({ <br/>   // ... <br/>   imports: [RouterModule.forRoot(routes, { preloadingStrategy: HoverPreloadStrategy })], <br/>}) export class AppModule {}</span></pre><p id="24ad" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个包是由同一个天才构建的另一个预载策略。它提供了一个预加载策略，自动下载与屏幕上所有可见链接相关的惰性加载模块。</p><p id="0b95" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这是为了让后续页面导航更快。是这样的。</p><ul class=""><li id="f03b" class="mx my in kq b kr ks ku kv kx mz lb na lf nb lj nc nd ne nf bi translated">首先，它检测视口中的routerLinks。</li><li id="5e10" class="mx my in kq b kr ng ku nh kx ni lb nj lf nk lj nc nd ne nf bi translated">第二，等待，直到浏览器空闲，页面完全加载并呈现。</li><li id="7015" class="mx my in kq b kr ng ku nh kx ni lb nj lf nk lj nc nd ne nf bi translated">第三，确保用户没有慢速连接或启用了数据保护。</li><li id="e715" class="mx my in kq b kr ng ku nh kx ni lb nj lf nk lj nc nd ne nf bi translated">最后，它使用Angular的预取策略预取延迟加载的模块。</li></ul><p id="653c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">以下是如何在您的Angular应用程序中安装和使用它。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="5e91" class="mr ln in mm b gy ms mt l mu mv">npm install --save ngx-quicklink</span></pre><p id="ece1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后将快速链接模块导入应用模块，并在路由器配置中使用快速链接策略作为预加载策略。就像这样。</p><pre class="kd ke kf kg gt mn mm mo mp aw mq bi"><span id="3f3d" class="mr ln in mm b gy ms mt l mu mv">// ... <br/>import { QuicklinkModule, QuicklinkStrategy } from 'ngx-quicklink'; </span><span id="d116" class="mr ln in mm b gy mw mt l mu mv">@NgModule({ <br/>   declarations: [...], <br/>   imports: [ // ... <br/>     QuicklinkModule, <br/>     RouterModule.forRoot(routes, { preloadingStrategy: QuicklinkStrategy }),<br/>    ], <br/>   bootstrap: [...] }) export class AppModule {}</span></pre><p id="0448" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，您将把悬停预加载模块导入到所有延迟加载的模块中。</p><h1 id="851b" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">您应该为您的Angular应用程序使用哪种类型的策略？</h1><p id="b3af" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">我的朋友，这是每个角度应用程序独有的决定。您必须分析您的场景，并决定什么策略最适合您的用户。</p><p id="5f40" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果用户是商业光纤连接的雇员，则使用预载全部策略。Juz拿起那些文件，把它们塞住！</p><p id="adad" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是如果你的Angular应用程序有移动用户，我建议采取保守的方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><a href="https://school.danielk.tech/course/unleash-your-angular-testing-skills?utm_source=medium&amp;utm_medium=banner&amp;utm_campaign=unleash_testing_skills"><div class="gh gi ll"><img src="../Images/f1b6577fb74e9686aa28b76134fcd343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIckqGEatusFxMIp0LnzNw.png"/></div></a></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/ec80fd72095fcafb3d0c298144c427a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:570/format:webp/0*xItVF8O0e6VGjnxy.png"/></div></figure></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><p id="af6c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nt">最初发布于</em><a class="ae lk" href="https://danielk.tech/home/the-complete-guide-to-angular-preloading-strategies" rel="noopener ugc nofollow" target="_blank"><em class="nt">https://danielk . tech</em></a><em class="nt">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create Vue 3 Apps with the Composition API — Check Reactive Properties</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用组合API创建Vue 3应用程序—检查反应属性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-vue-3-apps-with-the-composition-api-check-reactive-properties-9f3b2f4ebe51?source=collection_archive---------20-----------------------#2021-04-15">https://javascript.plainenglish.io/create-vue-3-apps-with-the-composition-api-check-reactive-properties-9f3b2f4ebe51?source=collection_archive---------20-----------------------#2021-04-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/24749510bdc0a890a385306bb1e5b2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AKQQQCK46uu5NPNi"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@hermez777?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Hermes Rivera</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f056" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们可以轻松地提取逻辑，而不必担心代码中<code class="fe lb lc ld le b">this</code>的值。</p><p id="77ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用TypeScript也能更好地工作，因为不再需要键入<code class="fe lb lc ld le b">this</code>的值。</p><p id="46b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用复合API创建Vue 3应用程序。</p><h1 id="079c" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">toRefs</code></h1><p id="92d8" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用<code class="fe lb lc ld le b">toRefs</code>函数将引用转换成普通对象。</p><p id="3b5c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="43f1" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="c9d2" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { reactive, toRefs } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      foo: 1,<br/>      bar: 2,<br/>    });</span><span id="132a" class="mq lg iq le b gy mv ms l mt mu">    const stateAsRefs = toRefs(state);<br/>    console.log(stateAsRefs);</span><span id="5d7d" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="241c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe lb lc ld le b">state</code>反应属性转换为普通对象。</p><p id="7a45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">state.foo</code>和<code class="fe lb lc ld le b">stat.bar</code>是无功属性，其值是我们在<code class="fe lb lc ld le b">reactive</code>函数中设置的值。</p><h1 id="f5a9" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">isRef</code></h1><p id="2a0b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">isRef</code>函数检查变量是否为ref。</p><p id="0b27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="8946" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="f1e2" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { isRef, reactive, ref } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      foo: 1,<br/>      bar: 2,<br/>    });</span><span id="fad6" class="mq lg iq le b gy mv ms l mt mu">    const r = ref(0);<br/>    console.log(isRef(state));<br/>    console.log(isRef(r));</span><span id="52f5" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="464a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe lb lc ld le b">state</code>调用<code class="fe lb lc ld le b">isRef</code>，返回<code class="fe lb lc ld le b">false</code>。</p><p id="ba3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而当我们用<code class="fe lb lc ld le b">r</code>调用<code class="fe lb lc ld le b">isRef</code>时，它返回<code class="fe lb lc ld le b">true</code>。</p><h1 id="675e" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">isProxy</code></h1><p id="435e" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">isProxy</code>函数检查一个对象是被动的还是只读的。</p><p id="92fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="b1d7" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="08f0" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { isProxy, reactive, readonly, ref } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      foo: 1,<br/>      bar: 2,<br/>    });<br/>    const ro = readonly({ foo: 1 });</span><span id="483e" class="mq lg iq le b gy mv ms l mt mu">    const r = ref(0);<br/>    console.log(isProxy(state));<br/>    console.log(isProxy(ro));<br/>    console.log(isProxy(r));</span><span id="7476" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="ce66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">前两个控制台日志是日志<code class="fe lb lc ld le b">true</code>，因为我们用<code class="fe lb lc ld le b">reactive</code>和<code class="fe lb lc ld le b">readonly</code>创建了变量。</p><p id="2a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第三个记录了<code class="fe lb lc ld le b">false</code>，因为ref不是用<code class="fe lb lc ld le b">reactive</code>或<code class="fe lb lc ld le b">readonly</code>创建的。</p><h1 id="b79d" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">isReactive</code></h1><p id="7d6b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以用<code class="fe lb lc ld le b">isReactive</code>检查变量是否是从<code class="fe lb lc ld le b">reactive</code>创建的。</p><p id="4354" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="d5a9" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2f04" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { isReactive, reactive, readonly, ref } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      foo: 1,<br/>      bar: 2,<br/>    });<br/>    const ro = readonly({ foo: 1 });</span><span id="2b62" class="mq lg iq le b gy mv ms l mt mu">    const r = ref(0);<br/>    console.log(isReactive(state));<br/>    console.log(isReactive(ro));<br/>    console.log(isReactive(r));</span><span id="cf2a" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="6361" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只有<code class="fe lb lc ld le b">state</code>是用<code class="fe lb lc ld le b">reactive</code>函数创建的，所以只有第一个控制台日志记录<code class="fe lb lc ld le b">true</code>。</p><h1 id="6aba" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><code class="fe lb lc ld le b">isReadonly</code></h1><p id="75ce" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以检查用<code class="fe lb lc ld le b">readonly</code>创建的变量是否为<code class="fe lb lc ld le b">isReadonly</code>。</p><p id="5059" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c911" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;&lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2de8" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { isReadonly, reactive, readonly, ref } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      foo: 1,<br/>      bar: 2,<br/>    });<br/>    const ro = readonly({ foo: 1 });</span><span id="4882" class="mq lg iq le b gy mv ms l mt mu">    const r = ref(0);<br/>    console.log(isReadonly(state));<br/>    console.log(isReadonly(ro));<br/>    console.log(isReadonly(r));</span><span id="037e" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="f5b0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">呼叫<code class="fe lb lc ld le b">isReadonly</code>。</p><p id="696c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只有第二控制台日志记录<code class="fe lb lc ld le b">true</code>，因为只有<code class="fe lb lc ld le b">ro</code>是用<code class="fe lb lc ld le b">readonly</code>创建的。</p><h1 id="ce52" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="e66b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用Vue 3组合API中的各种函数对反应属性进行各种检查。</p><p id="5ed3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
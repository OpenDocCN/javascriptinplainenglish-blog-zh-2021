<html>
<head>
<title>How to Convert a React Component to an Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将React组件转换为图像</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-convert-a-react-component-to-an-image-dc081de0f431?source=collection_archive---------10-----------------------#2021-09-28">https://javascript.plainenglish.io/how-to-convert-a-react-component-to-an-image-dc081de0f431?source=collection_archive---------10-----------------------#2021-09-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6b4816617632144aa79a3dc6172bbe03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*um0VMbb3hwG5LjkV.jpeg"/></div></div></figure><p id="d6b0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有时，您想让用户能够以图像的形式下载web应用程序的一部分。在这种情况下，您需要一种将React组件转换为图像的方法。使用一个名为html2canvas的第三方NPM包可以很简单。让我们看看如何去做。</p><h1 id="2f0b" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">设置</h1><p id="0b8e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我们希望首先在HTML标记中标记当用户点击下载按钮时要下载的div。这可能是一个图表，用户数据，表格，或者任何我们想要的东西。我们将为该元素分配一个id。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="63ad" class="mf ku in mb b gy mg mh l mi mj">&lt;div id="print"&gt;This will be downloaded as an image&lt;/div&gt;</span></pre><p id="22ae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以将它包装成一个React组件，并在下载按钮上附加一个事件处理程序:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="5901" class="mf ku in mb b gy mg mh l mi mj">const App = () =&gt; {<br/>  const handleImageDownload = () =&gt; {<br/>    // TODO: add logic here<br/>  };<br/>  return (<br/>    &lt;&gt;<br/>      &lt;button type="button" onClick={handleImageDownload}&gt;Download&lt;/button&gt;<br/>      &lt;div id="print"&gt;This will be downloaded as an image&lt;/div&gt;<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><h1 id="2fe2" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">程序设计逻辑</h1><p id="8e76" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">正如我们前面讨论的，我们将安装html2canvas NPM包。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="743a" class="mf ku in mb b gy mg mh l mi mj">npm install html2canvas</span></pre><p id="4bc3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，我们需要做的就是使用这个包获取我们想要转换成图像的相应的div。然后，我们在内存中创建一个链接来下载图像，以编程方式单击它，然后从DOM中删除该链接。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="a5e3" class="mf ku in mb b gy mg mh l mi mj">const handleDownloadImage = () =&gt; {<br/>    const element = document.getElementById('print'),<br/>    canvas = await html2canvas(element),<br/>    data = canvas.toDataURL('image/jpg'),<br/>    link = document.createElement('a');<br/> <br/>    link.href = data;<br/>    link.download = 'downloaded-image.jpg';<br/> <br/>    document.body.appendChild(link);<br/>    link.click();<br/>    document.body.removeChild(link);<br/>  };</span></pre><p id="1a03" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是我们将React组件转换成图像所需要做的全部工作！希望这篇文章对你有用。</p></div><div class="ab cl mk ml hr mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ig ih ii ij ik"><p id="c457" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mr">原载于2021年9月28日</em><a class="ae ms" href="https://www.wisdomgeek.com/development/web-development/react/how-to-convert-a-react-component-to-an-image/" rel="noopener ugc nofollow" target="_blank"><em class="mr">【https://www.wisdomgeek.com】</em></a><em class="mr">。</em></p><p id="4938" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mr">更多内容看</em> <a class="ae ms" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mr">说白了。报名参加我们的</em> <a class="ae ms" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mr">免费周报</em> </strong> </a> <em class="mr">。关注我们关于</em> <a class="ae ms" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mr">推特</em> </strong> </a>，<a class="ae ms" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mr">LinkedIn</em></strong></a><em class="mr">，</em><a class="ae ms" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mr">YouTube</em></strong></a><em class="mr">，以及</em> <a class="ae ms" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mr">不和</em> </strong> </a> <em class="mr">。</em></strong></a></p></div></div>    
</body>
</html>
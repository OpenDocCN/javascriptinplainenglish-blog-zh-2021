<html>
<head>
<title>I Created a PWA Game in Next.js, This is What I Learned from the Process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在Next.js中创建了一个PWA游戏，这是我从这个过程中学到的</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/i-created-a-pwa-game-in-next-js-and-this-is-what-i-learned-from-the-process-62b68e8bba?source=collection_archive---------9-----------------------#2021-10-11">https://javascript.plainenglish.io/i-created-a-pwa-game-in-next-js-and-this-is-what-i-learned-from-the-process-62b68e8bba?source=collection_archive---------9-----------------------#2021-10-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8e338d9ceac56205d032af4894751cde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-YBkq8BljrNYXAj-"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jupp?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jonathan Kemper</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d8ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我住在澳大利亚的悉尼，在我写这篇文章的时候，我们刚刚走出由于新冠肺炎的Delta变体而导致的长期封锁。</p><p id="7492" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">几周前，我意识到我们将在家里呆很长时间。所以我决定把多余的时间花在家里做点别的事情，而不是沉迷于网飞。</p><p id="2944" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我决定重新启动一个老项目，把它变成一个功能齐全的产品，当人们问我:“这段时间你做了什么？”的时候，我可以回顾并为之自豪</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="de98" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">灵感</h1><p id="7d12" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">几年前，我向澳大利亚一家非常有名的公司申请JavaScript工程师的工作。按照惯例，他们会给你一个展示技能的编码挑战。</p><p id="d23a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这一次的挑战是使用您选择的JavaScript库重现经典的十五人游戏。我决定用普通的JavaScript编写代码，通过实现一个<a class="ae jz" href="https://en.wikipedia.org/wiki/Model–view–controller" rel="noopener ugc nofollow" target="_blank"> MVC </a>架构而不使用<a class="ae jz" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank"> React </a>来打动他们。我错了。</p><p id="2036" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">他们希望我使用React，当然，这是我的工作。不仅如此，我收到了对状态管理和动画的严厉批评，实际上是演示中缺少动画。</p><p id="7fdd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以下是原始源代码的链接:</p><div class="mi mj gp gr mk ml"><a href="https://github.com/andresdhn/puzzle-15" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd io gy z fp mq fr fs mr fu fw im bi translated">GitHub-andresdhn/puzzle-15:15 puzzle是一个滑动拼图，由一帧编号的…</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">15拼图是一种滑动拼图，由一帧随机排列的编号方块拼图组成，其中一个拼图缺失…</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">github.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz jt ml"/></div></div></a></div><p id="8a71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">演示页面:</p><div class="mi mj gp gr mk ml"><a href="https://andresdhn.github.io/puzzle-15/" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd io gy z fp mq fr fs mr fu fw im bi translated">@andresdhn的15个难题</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">编辑描述</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">andresdhn.github.io</p></div></div></div></a></div><p id="7685" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你看，我当时做的是全职工作，我的“自由”时间被限制在下班后，所以我没有太在意细节。最终，我没有得到这份工作，我也学会了不要过多考虑项目的要求。尽管如此，我认为结果还不错？—让我知道你的想法。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="e481" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">快进到几个星期前，我决定接受那次失败，那次失败一直在我的脑海里，用给我的一点额外时间把它变成一次成功。</p><p id="de16" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，在创建生产就绪的应用程序时，会面临许多挑战。因此，我决定分享我克服这些挑战的经验，并帮助任何经历相同过程的人。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="4abd" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">挑战</h1><p id="3367" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated"><strong class="kc io">产品:</strong>想出一个产品创意并不容易。我必须确切地知道它是什么，它会做什么。</p><p id="131c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的情况下，我需要把旧项目转化成原创的、吸引人的、高质量的、有价值的，特别是属于我的东西。我愿意相信我做到了。如果你玩这个游戏，请让我知道。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="c85c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">技术栈:</strong>这需要一点思考，但我知道我会从一开始就使用React。我已经和这个库一起工作了足够长的时间，让它唱歌，但我也知道我将在多个层次上管理状态，React正是合适的工具。</p><p id="88e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个游戏需要是一个<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/Progressive_web_apps" rel="noopener ugc nofollow" target="_blank">渐进式网络应用</a> (PWA)。在我看来，使用服务人员来允许下载和离线游戏给了游戏很好的用户体验。</p><p id="dcf8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您正在考虑创建自己的渐进式Web应用程序，您将会偶然发现PWABuilder。这个工具对我帮助很大，让服务人员变得更健康。</p><div class="mi mj gp gr mk ml"><a href="https://www.pwabuilder.com" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd io gy z fp mq fr fs mr fu fw im bi translated">PWABuilder</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">构建和部署渐进式Web应用程序所需的所有工具。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">www.pwabuilder.com</p></div></div></div></a></div><p id="daef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为<a class="ae jz" href="https://gempuzzle.com" rel="noopener ugc nofollow" target="_blank">gempuzzle.com</a>是一款免费的网络游戏，<a class="ae jz" href="https://en.wikipedia.org/wiki/Search_engine_optimization" rel="noopener ugc nofollow" target="_blank"> SEO </a>是游戏成功的关键部分。因此，它不能仅仅是一个<a class="ae jz" href="https://en.wikipedia.org/wiki/Single-page_application" rel="noopener ugc nofollow" target="_blank">单页应用</a> (SPA)，它需要或者是<a class="ae jz" href="https://www.educative.io/edpresso/what-is-server-side-rendering" rel="noopener ugc nofollow" target="_blank">服务器端呈现的</a> (SSR)或者是<a class="ae jz" href="https://www.cloudflare.com/en-au/learning/performance/static-site-generator/" rel="noopener ugc nofollow" target="_blank">静态生成的站点</a> (SGS)以获得最佳的搜索结果。</p><p id="d908" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我选择使用混合SSG和SSR架构的Next.js。这让我在不牺牲性能的情况下获得了两全其美。这也为将来的版本和新特性打下了良好的基础。我很高兴我同意了。</p><p id="90aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你需要计划一个好的搜索引擎优化策略。看，搜索引擎爬虫不会阅读你所有的JavaScript。而如果爬不出来，就不存在。有一些规则需要遵守，这段视频在这方面给了我很大帮助:</p><figure class="na nb nc nd gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="ed1f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">动画:每个从事JavaScript工作的人，尤其是React，都知道组件在每次状态改变时都会呈现。React在<a class="ae jz" href="https://reactjs.org/docs/faq-internals.html" rel="noopener ugc nofollow" target="_blank">虚拟DOM </a>中利用它们创建平滑的不易察觉的变化。</p><p id="66d0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您需要动画显示刚插入DOM的对象的位置时，问题就来了。解决方案:<strong class="kc io">翻转</strong> <strong class="kc io">手法</strong>。</p><p id="f5a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我不会在这里解释它是如何工作的，那将是一篇全新的文章，但是请查看这个<a class="ae jz" href="https://css-tricks.com/everything-you-need-to-know-about-flip-animations-in-react/" rel="noopener ugc nofollow" target="_blank">链接</a>来阅读更多关于它的内容。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="3f4e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">优化:</strong>这可能是创建一个在线产品更耗时的方面。</p><p id="27f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我用<a class="ae jz" href="https://developers.google.com/web/tools/lighthouse" rel="noopener ugc nofollow" target="_blank">谷歌Chrome的Lighthouse </a>来测试和评估这个页面。然后我通读了他们所有的建议，使它在各方面的得分接近100分。</p><p id="aa77" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这并不容易，它改变了我最初的一些想法，但在这样做的过程中，应用程序得到了巨大的改进。这绝对值得花时间。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/b7ed7e562d4e9f9d4995b38263fd1366.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*god4Wzel0lJz2UYnhUdZ7w.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Screenshot taken and edited by the Author</figcaption></figure></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="e4c8" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">游戏</h1><p id="fab8" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">游戏的本质本身就是一种挑战。任何一个谜题关卡都有百分之五十的拼图配置是不可解的。这是因为一个数学问题，如<em class="nh"> Jhonson &amp;故事</em><a class="ae jz" href="https://en.wikipedia.org/wiki/American_Journal_of_Mathematics" rel="noopener ugc nofollow" target="_blank"><em class="nh">【15】谜题注释1879 </em> </a>所示。</p><p id="3aa4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于用户来说，没有什么比花大量时间在一个无法解决的10x10的难题上更令人沮丧的了。这个游戏在网络上的所有其他版本都忽略了这个问题。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/f1f08d302ec2c1301ab06e18752cfdaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*qQ3_xZVHjOZH1dhpe0e6xQ.png"/></div></figure><p id="b43a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我必须想出一个过程来检查游戏在每一次重现时的可解性，我做到了，而且它以一种惊人的表现方式做到了。</p><p id="17e5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">游戏在<a class="ae jz" href="https://gempuzzle.com" rel="noopener ugc nofollow" target="_blank">gempuzzle.com</a>上的每一个配置都是100%可解的。而且，完成它是非常令人满意的。做吧，你会看到的。😉</p><h1 id="adc6" class="lf lg in bd lh li nj lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly nn ma mb mc bi translated">今后</h1><p id="a6e7" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">如前所述，我已经在考虑游戏的新功能了。它们将涉及一些API集成，推送通知，更多的共享选项，也许还有一些额外的内容。</p><h1 id="7e3b" class="lf lg in bd lh li nj lk ll lm nk lo lp lq nl ls lt lu nm lw lx ly nn ma mb mc bi translated">结论</h1><p id="aa78" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我非常高兴我花时间完成了这个想法；把痛苦的经历变成快乐的过程，证明给自己足够的时间我能做什么。</p><p id="dada" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这需要很多的奉献和承诺，我对目前的结果很满意。我敢打赌，公司现在想再次与我联系，但就目前而言，我只是高兴地回到外面。</p><p id="8893" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望每个人都喜欢这个游戏。如果你喜欢这篇文章，请给我留言。</p><p id="24fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">干杯，注意安全。</p><p id="7703" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nh">更多内容看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nh">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
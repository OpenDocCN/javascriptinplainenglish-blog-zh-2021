<html>
<head>
<title>Resize An Image Using Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js调整图像大小</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/resize-an-image-using-nodejs-f5e57ac10419?source=collection_archive---------3-----------------------#2021-03-06">https://javascript.plainenglish.io/resize-an-image-using-nodejs-f5e57ac10419?source=collection_archive---------3-----------------------#2021-03-06</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="08f3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Node.js和Sharp创建不同大小的上传图像</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/39658f85f231096efb1bbf031c819ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZXs-zJQ7IaSsjAv_m1f-RA.png"/></div></div></figure><p id="b611" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天，我们有更先进的设备来捕捉图像。每个人都有高分辨率的手机或专业相机。由于先进的设备，总是图像的尺寸也很大。一幅普通的相机图像至少占用<strong class="kt ir"> 2MB </strong>的内存。我们将图片上传到云服务器，或者通过社交媒体或其他通讯工具与我们认识的人分享图片。服务器存储高分辨率图像(客户上传的原始图像)。然而，由于图像的使用越来越多，我们不能保存原始图像的大文件。所以我们需要对用户上传的图片做两件事。</p><ol class=""><li id="361a" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">将大文件减小到最佳大小(15MB到800KB，而不损失质量)</li><li id="cab4" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">以较小的尺寸创建相同图像的不同尺寸(个人资料图标、缩略图尺寸、明信片尺寸、封面图像尺寸等)。</li></ol><p id="5532" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">比方说，假设你用专业相机拍摄一张照片，文件大小约为15MB。服务器将存储15MB的图像。然而，每次将图像显示给用户需要15MB的带宽。今天，我们有更好的互联网连接。但是并不是所有人都有同样好的连接。所以完全加载图像对用户来说将是一个大问题。为了解决这个问题，作为一名web开发人员，我们总是会在图像上传到服务器时自动执行<strong class="kt ir">图像</strong> <strong class="kt ir">调整大小</strong>活动。</p><p id="87dd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你拿脸书来说，它使用各种图像尺寸来给用户更好的用户体验。一旦用户上传一张图片到<strong class="kt ir">脸书</strong>，他们会根据他们的优化理念自动将你的图片转换成不同的尺寸。下面列出了一些图像尺寸。</p><blockquote class="mb"><p id="3603" class="mc md iq bd me mf mg mh mi mj mk lm dk translated"><em class="ml"> 360 * 360 —缩略图尺寸</em></p><p id="91aa" class="mc md iq bd me mf mg mh mi mj mk lm dk translated"><em class="ml"> 500 * 261 —卡片布局图像尺寸</em></p><p id="8e09" class="mc md iq bd me mf mg mh mi mj mk lm dk translated"><em class="ml"> 132 * 132 —个人资料图标图像尺寸</em></p></blockquote><p id="2e10" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">在本教程中，我们将使用NodeJS Sharp库来执行图像调整活动。</p><h1 id="a041" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">安装库</strong></h1><p id="8651" class="pw-post-body-paragraph kr ks iq kt b ku nj jr kw kx nk ju kz la nl lc ld le nm lg lh li nn lk ll lm ij bi translated">在NodeJS项目中使用下面的命令安装NodeJS的sharp库。</p><pre class="kg kh ki kj gt no np nq nr aw ns bi"><span id="648e" class="nt ms iq np b gy nu nv l nw nx">npm install sharp</span></pre><h1 id="fc8a" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">回调示例</strong></h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><ol class=""><li id="d256" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><strong class="kt ir"> resize() </strong> —获取新图像尺寸的宽度和高度。</li><li id="faa0" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated"><strong class="kt ir"> toFile() </strong> —用于将调整后的图像以新的文件名保存。</li></ol><h1 id="c112" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">许诺示例</strong></h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ny nz l"/></div></figure><p id="9faa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以通过任何方式回电或许诺。这里我只展示了两个函数——resize和toFile。我们在sharp库中有更多的功能。我们可以改变<strong class="kt ir">背景</strong>颜色。我们可以改变<strong class="kt ir">颜色</strong>通道<strong class="kt ir">通道</strong>。这个名单还在继续。你可以参考夏普库的官方文档中的那些东西。</p><p id="b62d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae oa" href="https://github.com/lovell/sharp" rel="noopener ugc nofollow" target="_blank"> NodeJS锐库</a></p><p id="cff4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我用的是<strong class="kt ir"> 1MB </strong>的文件大小进行测试。然后我新建了一个文件，宽度和高度都是200 * 200。新文件大小只有<strong class="kt ir"> 15kb </strong>。</p><h1 id="b937" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated"><strong class="ak">结论</strong></h1><p id="68e7" class="pw-post-body-paragraph kr ks iq kt b ku nj jr kw kx nk ju kz la nl lc ld le nm lg lh li nn lk ll lm ij bi translated">调整图像大小一直是所有现代web应用程序的必备功能。大多数语言提供了更好的图像库来调整图像大小。我喜欢NodeJS库<strong class="kt ir"> sharp </strong>，它简化了我调整图像大小的工作。当我们调整大小时，夏普图书馆提供了更好的图像质量。毫无疑问，这将是开发者的一大福音。</p><p id="6bf3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您是其他语言的开发人员，并且您找不到更好的库来调整图像大小，那么您可以通过两个简单的步骤在您的语言中使用这个NodeJS库。</p><ol class=""><li id="46ed" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">为这个(sharp) NodeJS库功能创建<strong class="kt ir"> REST API </strong>。</li><li id="f71a" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">使用<strong class="kt ir"> CURL </strong>概念从您的语言中调用NodeJS REST API。</li></ol><h2 id="1f20" class="nt ms iq bd mt ob oc dn mx od oe dp nb la of og nd le oh oi nf li oj ok nh ol bi translated"><strong class="ak">延伸阅读</strong></h2><p id="7d62" class="pw-post-body-paragraph kr ks iq kt b ku nj jr kw kx nk ju kz la nl lc ld le nm lg lh li nn lk ll lm ij bi translated"><a class="ae oa" rel="noopener ugc nofollow" target="_blank" href="/create-rest-api-using-nodejs-and-mysql-from-scratch-d1844601e21">使用Node.js和MySQL从头开始创建REST API。</a></p><p id="e59c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae oa" rel="noopener ugc nofollow" target="_blank" href="/implement-jwt-based-authorization-using-nodejs-and-angular-9f75ab5904ac">使用NodeJS和Angular实现基于JWT的授权。</a></p></div></div>    
</body>
</html>
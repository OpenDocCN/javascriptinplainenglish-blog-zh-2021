<html>
<head>
<title>Function Composition in JavaScript Explained with Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">举例说明JavaScript中的函数组合</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-working-example-of-function-composition-in-javascript-5e8c704a13ca?source=collection_archive---------6-----------------------#2021-03-25">https://javascript.plainenglish.io/a-working-example-of-function-composition-in-javascript-5e8c704a13ca?source=collection_archive---------6-----------------------#2021-03-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f039" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">函数式编程:在执行长过程时，函数组合是保持代码整洁、可读的一种很好的方式。</h2></div><p id="64b0" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将简要介绍函数组合的概念，并讨论它如何使JavaScript项目更具可读性。然后，我们将讨论一个工作示例来演示这一点。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/610aaa1bf71d6a64779238be7ef618e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*F_-DydnY7sdyW73qxpgRXA.jpeg"/></div></figure><h2 id="6ba5" class="lg lh in bd li lj lk dn ll lm ln dp lo kl lp lq lr kp ls lt lu kt lv lw lx ly bi translated">那么什么是函数合成呢？</h2><p id="8ce8" class="pw-post-body-paragraph kc kd in ke b kf lz jo kh ki ma jr kk kl mb kn ko kp mc kr ks kt md kv kw kx ig bi translated">数学上，<a class="ae me" href="https://www.mathsisfun.com/sets/functions-composition.html" rel="noopener ugc nofollow" target="_blank">函数合成</a>是将一个函数应用于另一个函数的结果，例如:</p><pre class="kz la lb lc gt mf mg mh mi aw mj bi"><span id="f2d7" class="lg lh in mg b gy mk ml l mm mn">Given:<br/><strong class="mg io">g(x) = x + 5<br/>f(x) = x / 2</strong></span><span id="93c2" class="lg lh in mg b gy mo ml l mm mn">Let's evaluate: <strong class="mg io">f(g(5))</strong></span><span id="a229" class="lg lh in mg b gy mo ml l mm mn">First...<br/><strong class="mg io">g(5) = 5 + 5 <br/></strong>//we get 10</span><span id="48a8" class="lg lh in mg b gy mo ml l mm mn">Then...<br/><strong class="mg io">f(10) = 10 / 2 <br/></strong>//we get 5</span><span id="cfa0" class="lg lh in mg b gy mo ml l mm mn">So... <strong class="mg io">f(g(5)) = 5</strong></span></pre><p id="1130" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你明白了，太好了！但我们是程序员，不是数学家，对吗？那么我们如何用比较科学的术语来定义它呢？</p><blockquote class="mp mq mr"><p id="d470" class="kc kd ms ke b kf kg jo kh ki kj jr kk mt km kn ko mu kq kr ks mv ku kv kw kx ig bi translated"><strong class="ke io">“功能组合</strong>是将两个或两个以上的功能组合起来产生一个新功能的过程。将函数组合在一起就像是将一系列管道连接在一起，让我们的数据流过。”— <a class="ae me" href="https://medium.com/javascript-scene/master-the-javascript-interview-what-is-function-composition-20dfb109a1a0" rel="noopener"> Eric Elliot，JavaScript高手访谈:什么是函数组合？</a></p></blockquote><p id="68f7" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们在ES6中尝试一下:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="7a7c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好的。现在感觉不错，但是当我们需要组合越来越多的函数时会发生什么呢？比如说:</p><pre class="kz la lb lc gt mf mg mh mi aw mj bi"><span id="d007" class="lg lh in mg b gy mk ml l mm mn">a(b(c(d(e(5))))</span></pre><p id="490e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">读起来不太愉快，是吗？这就是常用的compose函数的用处。</p><h2 id="7f47" class="lg lh in bd li lj lk dn ll lm ln dp lo kl lp lq lr kp ls lt lu kt lv lw lx ly bi translated">构成</h2><p id="4eb3" class="pw-post-body-paragraph kc kd in ke b kf lz jo kh ki ma jr kk kl mb kn ko kp mc kr ks kt md kv kw kx ig bi translated">Compose将从一个函数获取输出，并自动将它修补到下一个函数的输入，并一次又一次地重复这个过程，直到它吐出最终值。我们可以使用一个库(如ramda或lodash ),也可以创建自己的组合方法，如下所示:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="3df8" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，这个高阶函数接受任意数量的函数作为参数，然后返回一个函数，这个函数将从右到左调用这些给定的函数。你可以在这里阅读更多关于它是如何工作的<a class="ae me" href="https://medium.com/free-code-camp/pipe-and-compose-in-javascript-5b04004ac937" rel="noopener">。这有点令人困惑，所以让我们用之前介绍的例子来试一试:</a></p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="112e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在可能感觉不到显著的差异，但是考虑一下当作品变得非常大时，例如:</p><pre class="kz la lb lc gt mf mg mh mi aw mj bi"><span id="92dd" class="lg lh in mg b gy mk ml l mm mn"><strong class="mg io">a(b(c(d(e(5))))</strong></span><span id="9edd" class="lg lh in mg b gy mo ml l mm mn">becomes...</span><span id="8c76" class="lg lh in mg b gy mo ml l mm mn"><strong class="mg io">compose(a,b,c,d,e)(5)</strong></span></pre><p id="c4ce" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">谈论更少的括号和更多的可读性，我说的对吗？</p><h2 id="6440" class="lg lh in bd li lj lk dn ll lm ln dp lo kl lp lq lr kp ls lt lu kt lv lw lx ly bi translated">一个工作实例</h2><p id="bc8f" class="pw-post-body-paragraph kc kd in ke b kf lz jo kh ki ma jr kk kl mb kn ko kp mc kr ks kt md kv kw kx ig bi translated">让我们探索一下compose函数，它被用来为一个教希伯来语动词变化的<a class="ae me" href="https://github.com/jtalz/hebrootsMobileClient" rel="noopener ugc nofollow" target="_blank">教育应用实例化一个匹配游戏</a>。最后，这里是我们应该期待看到的:</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div class="gh gi my"><img src="../Images/17f567b0fe3dcd1add001d9f6ba00ee1.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*XEGrq5h--FTMrfYo68MOPw.gif"/></div></figure><p id="df88" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设我们得到了一组<code class="fe mz na nb mg b">conjugation_pronoun</code>对象(在西班牙语中，出于同样的ASCII字符目的),如下所示:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="6b1a" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">忘记所有本质的样式细节，现在只关注JavaScript，我们如何将这些数据转化为我们的最终产品？要考虑以下几点:<strong class="ke io">配对游戏一共呈现六张牌。三个动词变化和三个代词。另外，卡片是随机排列的。</strong>基于这些考虑，初始化我们的匹配游戏的程序步骤必须是:</p><p id="90cd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">1.随机选择3个变化代词对象<br/> 2。独立代词和动词变化<br/> 3。洗牌的对象(牌)顺序<br/> 4。显示用户界面</p><p id="9b7c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，让我们构建我们的助手方法。</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="cfbc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，假设我们有一个名为<code class="fe mz na nb mg b"><strong class="ke io">displayUI</strong></code> <strong class="ke io"> </strong>的函数，它获取我们的最终输出，并在屏幕上显示所有的卡片，让我们探索几种不同的方法来将我们的助手方法联系在一起。</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="02fd" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这真的很麻烦，让我想起了链接，并且不太可能让你成为团队中最受欢迎的开发人员。我认为这里的另一个问题是陷入超深度嵌套函数调用的可能性，这是我们想要避免的。</p><p id="f7f6" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个怎么样？</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="50de" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这样更好，但我认为还是有办法去掉不必要的赘言。我们也可以不需要声明一次性使用的变量。</p><p id="da9e" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们尝试使用我们的<strong class="ke io">编写</strong>函数:</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="mw mx l"/></div></figure><p id="9fec" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">看那个！很好用！</p><h2 id="5b9f" class="lg lh in bd li lj lk dn ll lm ln dp lo kl lp lq lr kp ls lt lu kt lv lw lx ly bi translated">结论</h2><p id="48e7" class="pw-post-body-paragraph kc kd in ke b kf lz jo kh ki ma jr kk kl mb kn ko kp mc kr ks kt md kv kw kx ig bi translated">通过利用compose函数，我们成功地执行了所有必要的任务，并且用更简洁、可读性更好、但描述性更强的几行代码实现了相同的目标。</p><p id="1e7b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">随意查看完整应用程序<a class="ae me" href="https://github.com/jtalz/hebrootsMobileClient" rel="noopener ugc nofollow" target="_blank">的源代码。如果你打算使用compose和/或类似的函数，我还推荐你去看看</a><a class="ae me" href="https://lodash.com/docs/4.17.15" rel="noopener ugc nofollow" target="_blank"> lodash </a>或<a class="ae me" href="https://ramdajs.com/" rel="noopener ugc nofollow" target="_blank"> ramda </a>库。</p><p id="6520" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">谢谢！</p></div></div>    
</body>
</html>
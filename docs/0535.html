<html>
<head>
<title>Creating a RESTful API with Node.js, Express and MongoDB (Atlas cloud)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js、Express和MongoDB (Atlas cloud)创建RESTful API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-restful-api-with-node-js-express-and-mongodb-atlas-cloud-fdb8459f1c7?source=collection_archive---------12-----------------------#2021-02-01">https://javascript.plainenglish.io/creating-a-restful-api-with-node-js-express-and-mongodb-atlas-cloud-fdb8459f1c7?source=collection_archive---------12-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/df7261ef33a02fce00c040d11b465d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZDE5UQQ-Y4u0LEly"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sctgrhm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Scott Graham</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4252" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在当今的软件开发中，RESTful APIs几乎无处不在。作为一名程序员，几乎不可能不知道它或者没有使用过它。</p><p id="0dfb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">本文解释了如何创建和服务RESTful API。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lb"><img src="../Images/f40cf15dcd3d3754bfb30213021c32ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUxu4tEB97VXN7f4yT8G9w.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">API — Tech Stack</figcaption></figure><h2 id="7dc3" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">定义</h2><p id="ecbc" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">应用程序编程接口。REST=表征状态转移。(<a class="ae kc" href="https://en.wikipedia.org/wiki/Representational_state_transfer" rel="noopener ugc nofollow" target="_blank">维基百科</a>)</p><p id="5171" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">RESTful web服务最常见的实现是JSON API。JSON= JavaScript对象符号。</p><h2 id="b581" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">开发堆栈及其原因:</h2><ol class=""><li id="b3da" class="me mf iq kf b kg lz kk ma ko mg ks mh kw mi la mj mk ml mm bi translated"><a class="ae kc" href="https://www.mongodb.com/try" rel="noopener ugc nofollow" target="_blank"> MongoDB </a> : MongoDB也被称为“NoSQL”数据库。它可以以JSON格式存储文档。你可以开始在亚马逊云上免费使用MongoDB Atlas。这意味着你不需要在电脑上安装任何东西。</li><li id="8795" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated"><a class="ae kc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>:虽然javascript在互联网早期主要用于在你的网络浏览器中制作网站动画，但它现在已经发展成为一种主要的后端和前端编程语言。Nodejs是用于开发web应用程序的javascript运行时环境。</li><li id="070c" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mj mk ml mm bi translated">Express是一个用于Nodejs的极简后端web应用框架。它非常适合服务web APIs。</li></ol><p id="430d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还将使用<a class="ae kc" href="https://nodemon.io/" rel="noopener ugc nofollow" target="_blank"> nodemon </a>和<a class="ae kc" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank"> postman </a>。Nodemon将监视源代码中的任何变化，并自动重启服务器。非常适合开发，并能立即看到您的变化。Postman是一个可以用于API开发和测试的平台。</p><h2 id="54f5" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">如何使用MongoDB Atlas</h2><p id="ef59" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><a class="ae kc" href="https://www.mongodb.com/try" rel="noopener ugc nofollow" target="_blank">我在AWS上注册了一个免费的云共享集群</a>，不过你也可以选择Google Cloud或者Azure。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/10d7b98317e6e20ba450045c85d479d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_aiNHF68i95l21C3qnxJBw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">AWS Cloud example</figcaption></figure><p id="924f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我创建了一个零项目:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mt"><img src="../Images/c37376cd54a6b2d6050b4a4249225c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r1ugmfxFKY7k7PKH1I4NWw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Cluster main screen setup example</figcaption></figure><ul class=""><li id="56bb" class="me mf iq kf b kg kh kk kl ko mu ks mv kw mw la mx mk ml mm bi translated">数据库访问:创建一个用户+密码</li><li id="d907" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">网络访问:可以选择0.0.0.0/0作为IP地址。这样，当您的IP地址改变时(当您使用DHCP或通过调制解调器和路由器连接时)，您也可以从任何地方连接。</li><li id="b63e" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">连接:如果您选择“连接您的应用程序”，您可以从那里复制粘贴您的连接代码。</li></ul><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi my"><img src="../Images/79a7e137d76fa6cc873d9b68aa2ed376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uoPMxFunaOg8vJh2fuZPZA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Choose ‘Connect your application’</figcaption></figure><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mz"><img src="../Images/c73b3e9a629e0f1ef07a52fd50fbacaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1onwZYJ6N2RiT3MaaZhNUg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Copy + Paste connection string to your code</figcaption></figure><p id="8cff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后点击Collections并创建一个test.projects</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi na"><img src="../Images/2ef1faebc0eb5d4adf0680c99ddef349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z4we5OxKNgf63TC_333YKw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">db= test , collection= projects</figcaption></figure><h2 id="f306" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">接下来是安装Node.js、Express和nodemon</h2><p id="4ebe" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">下载并安装<a class="ae kc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nb"><img src="../Images/a9828d086ddef628efc25325874e98d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gaTEVPN6HKB54WLv3GreNQ.png"/></div></div></figure><p id="4e0a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过检查节点版本来检查是否一切安装正常:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nc"><img src="../Images/eb239b7c7567cd91f5ebba68b9fa2d27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gLb6ttGs64Hhkfwkld484A.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">The version numbers on your computer might be different but that’s okay</figcaption></figure><p id="5124" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在您的计算机上创建一个子目录，例如“node-mongo”。</p><p id="be72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">mkdir节点-mongo，cd节点-mongo</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nd"><img src="../Images/b23b3f197fc0e12b1350f4385725e538.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i67Ru2w04PFOLEmVkX95Og.png"/></div></div></figure><p id="98bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在此目录中键入:</p><ul class=""><li id="d1b0" class="me mf iq kf b kg kh kk kl ko mu ks mv kw mw la mx mk ml mm bi translated">npm init —是(在“是”之前有2个破折号)</li><li id="29cb" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">npm install express</li><li id="b1e6" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">npm安装mongodb</li><li id="86e7" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">npm安装nodemon</li></ul><p id="fbc7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">注意:我不得不这样强制安装我的nodemon:</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ne"><img src="../Images/601170f734b3a93de7eceb4ea2fd14d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8G0EETW_oF4R5GN8cXZo5A.png"/></div></div></figure><p id="22a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在你的“node-mongo”目录中创建一个文件<a class="ae kc" href="https://bitbucket.org/mxm304/node-mongo/src/master/app.js" rel="noopener ugc nofollow" target="_blank"> app.js </a></p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nf"><img src="../Images/b9bf29a45bfc688cee5f2eb775dab8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*067_JgPUmtSJmtbdl3QgEQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">This is all the code you need to get started (source: Caleb Curry)</figcaption></figure><p id="a07d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该代码的作用是:</p><ul class=""><li id="771c" class="me mf iq kf b kg kh kk kl ko mu ks mv kw mw la mx mk ml mm bi translated">第2行:它使用了Express框架。</li><li id="0009" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第3到6行:它定义了与MongoDB的连接。请确保用您的连接代码和密码替换它(如上面关于如何使用MongoDB的部分所述)。</li><li id="bbe8" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第7行:它创建了快速应用程序。</li><li id="bb57" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第8行:这对于让JSON的一切工作都很重要。</li><li id="3985" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第39到40行:它启动在端口3000监听的应用程序。</li><li id="d4e6" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第10到12行:当您在网络浏览器中键入“localhost:3000”时，它会发送一个“我听到了”字符串。</li><li id="3b68" class="me mf iq kf b kg mn kk mo ko mp ks mq kw mr la mx mk ml mm bi translated">第14到25行和第27到37行:这两行都是GET和POST操作的回调函数。代码与数据库&amp;集合连接，如果出了问题就会抛出一个错误。POST将把JSON字符串发送到数据库，GET将从数据库中检索JSON数据，并在浏览器中显示。此简短示例中未定义的其他操作是用于更新的PUT和用于删除的DELETE。在这个简短的示例中，GET检索并显示了所有存储的数据，但是也可以找到一个特定的集合，但是它不在这个小代码示例的范围之内。</li></ul><h2 id="5def" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">与邮递员一起测试</h2><p id="4725" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">像这样启动node mon:node mon app . js</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ng"><img src="../Images/82056361e4d82b8095c5bd36b32ba630.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1lGmSXS82O1FUuHiyf5Omg.png"/></div></div></figure><p id="8b18" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<a class="ae kc" href="https://www.postman.com/" rel="noopener ugc nofollow" target="_blank">邮差</a>中，你可以将一个JSON字符串发布到应用程序中。</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/d143c5a053a8024573e64aa3f47fbd2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_PbRRQ0IFnRukupdcjKM6w.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">POST - localhost:3000/api/projects</figcaption></figure><p id="c4c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">键入与上述示例类似的正文，确保所有内容都设置为JSON并发送。</p><p id="f1a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到您的浏览器并键入“http://localhost:3000/API/projects”</p><figure class="lc ld le lf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ni"><img src="../Images/14910cbca621d34d389ae4cfde575443.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hgbuArsFtjL4N8EPtgoGTw.png"/></div></div></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><h2 id="355d" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">文档版本:</h2><p id="0df4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">2021年2月1日:初稿</p><h2 id="2309" class="lg lh iq bd li lj lk dn ll lm ln dp lo ko lp lq lr ks ls lt lu kw lv lw lx ly bi translated">关于我:</h2><p id="0866" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><a class="ae kc" href="https://www.linkedin.com/in/patrick-swiggers/" rel="noopener ugc nofollow" target="_blank">领英</a></p><p id="971b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有任何问题，请随时与我联系或向我发送反馈。</p></div></div>    
</body>
</html>
<html>
<head>
<title>What is GraphQL? A Comprehensive Introduction for Beginners with Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GraphQL是什么？带示例的初学者综合介绍</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-graphql-6e0e31bcba7e?source=collection_archive---------15-----------------------#2021-07-01">https://javascript.plainenglish.io/what-is-graphql-6e0e31bcba7e?source=collection_archive---------15-----------------------#2021-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/e37716af5726ee81814f46c76dfb6bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rytrGJyYbXwTlDAN-Tr5tA.jpeg"/></div></div></figure><p id="a80a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">简单来说，这就像你去一家披萨店，点一份“自己做披萨”——你选择基底、酱料、奶酪和配料，当披萨做好了，你就会得到你想要的东西。</p><p id="f924" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了REST，就像你从预定义的菜单项中挑选一个披萨。你可能会得到你想要的浇头，但你也可能会得到你没有要求的其他浇头(如西红柿)，有时，我们将不得不手动从中挑选西红柿。</p><p id="f754" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用技术术语来说，GraphQL是一种查询语言——一种从任何数据源查询数据的语法——无论是API还是数据库。GraphQL是REST APIs的替代品，提供了一种新的请求数据的方式。GraphQL允许您指定您需要的数据字段，并准确地交付这些字段。GraphQL <a class="ae kw" href="https://spec.graphql.org/" rel="noopener ugc nofollow" target="_blank">规范</a>定义了实现GraphQL API的规则集。</p><p id="07b5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">需要注意的重要一点是，GraphQL不是数据库的查询语言。与SQL不同，您的数据库没有像<code class="fe kx ky kz la b">SELECT * from users</code>这样的查询。相反，GraphQL语法定义了如何从API请求数据。GraphQL查询的语法如下所示</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="e6af" class="lj lk iq la b gy ll lm l ln lo">query getUsers{<br/>    users {<br/>        firstname<br/>    }<br/>}</span></pre><p id="a529" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">所以，GraphQL中的<code class="fe kx ky kz la b">QL</code>意味着你的API的查询语言，而不是数据库。</p><p id="8ca4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">值得注意的是，GraphQL可以用于任何数据源，比如REST APIs &amp; database。它可以在任何地方插入，以任何语言构建，可以安装在任何数据库和技术堆栈的顶部，这意味着您可以在REST APIs的顶部使用GraphQL，并且仍然可以获得GraphQL的好处，而不必拆除现有的基于REST的架构。你可以在Java应用，JavaScript应用，Python，Django，Next.js中使用GraphQL。</p><p id="ba53" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">GraphQL适用于客户端和服务器端层。您在服务器端构建一个GraphQL API，然后通过触发GraphQL请求(查询、突变等)在客户端使用这个GraphQL API。).有一些工具，如<a class="ae kw" href="https://www.apollographql.com/docs/tutorial/introduction/" rel="noopener ugc nofollow" target="_blank"> Apollo </a>提供全栈解决方案，帮助在服务器上构建GraphQL API，并在客户端使用它。</p><h1 id="3f7b" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">REST vs GraphQL示例:发出API请求</h1><p id="0a1c" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">假设我们想获取一个用户名。在REST API中，我们有一个端点可以用来发出GET请求。端点可能看起来像<code class="fe kx ky kz la b">/users/{id}/</code>。如果我们使用curl请求进行调用并传入一个用户的<code class="fe kx ky kz la b">id</code>,它将看起来像这样</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="e946" class="lj lk iq la b gy ll lm l ln lo">curl \<br/>-H "Content-Type: application/json" \<br/>https://www.example.com/api/users/123`</span></pre><p id="1f6d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">让我们看看GraphQL请求是什么样子的</p><ol class=""><li id="ff87" class="mr ms iq ka b kb kc kf kg kj mt kn mu kr mv kv mw mx my mz bi translated">REST的“GET”操作由GraphQL中的<a class="ae kw" href="https://graphql.org/learn/queries/" rel="noopener ugc nofollow" target="_blank">“Query”</a>完成。</li><li id="0ea5" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">在GraphQL中，我们没有单独的端点用于<code class="fe kx ky kz la b">users</code>。每个请求都被发送到<code class="fe kx ky kz la b">/graphql</code>端点。</li><li id="c847" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">为了描述我们对哪些数据感兴趣，我们将相关参数传递给“查询”操作，并描述我们对哪个查询感兴趣。GraphQL API可能支持类似“getUsers”的查询，这是一个我们可以用来获取用户的查询。</li></ol><p id="4702" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">对GraphQL API的curl请求看起来像-</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="2258" class="lj lk iq la b gy ll lm l ln lo">curl \<br/>-X POST \<br/>-H "Content-Type: application/json" \<br/>--data '{ "query": "{ user(id:123 ) { name } } " }' \<br/>https://www.example.com/graphql</span></pre><p id="f1ec" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://graphqlzero.almansi.me/api" rel="noopener ugc nofollow" target="_blank">在此尝试示例GraphQL请求</a></p><h1 id="e309" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">REST与GraphQL:实现API</h1><p id="a62e" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">在REST世界中，我们将为每个操作实现资源，比如<code class="fe kx ky kz la b">GET /user/{id}</code>被映射到<code class="fe kx ky kz la b">getUser(String id)</code>。<code class="fe kx ky kz la b">getUser</code>定义如果这个端点被调用，传递什么数据。如果需要的话，这个资源实现还将调用任何下游操作——其他API或直接从数据库获取。</p><p id="2d61" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在GraphQL中，当实现一个GraphQL API时，我们需要首先定义API的模式。模式是对允许哪些查询、突变和参数的完整描述。一个“GET”操作是由GraphQL中的“Query”完成的。我们可以指定查询在模式中接受什么参数。</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="85f9" class="lj lk iq la b gy ll lm l ln lo">type Query {<br/>    getUser(id: $String!)<br/>}</span></pre><p id="f90a" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们从这个<code class="fe kx ky kz la b">getUser</code>查询返回的内容由一个名为resolvers的函数定义。解析器定义了当一个字段被调用时应该返回什么数据。每个查询都映射到一个解析器。解析器函数可以调用任何API或数据源。我们的解析器可以这样写-</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="e7ab" class="lj lk iq la b gy ll lm l ln lo">getUser(args){<br/>    const { id } = args;<br/>    //fetch from database / API <br/>}</span></pre><p id="e0f4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当客户端获取<code class="fe kx ky kz la b">getUser</code>查询时，他们会得到这样的数据-</p><pre class="lb lc ld le gt lf la lg lh aw li bi"><span id="0ec9" class="lj lk iq la b gy ll lm l ln lo">{<br/>    "data" : {<br/>        "name": "Sample name"<br/>    }<br/>}</span></pre><h1 id="37a6" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">GraphQL术语</h1><ol class=""><li id="15f8" class="mr ms iq ka b kb mm kf mn kj nf kn ng kr nh kv mw mx my mz bi translated">查询:查询类似于GET in REST。当我们想从GraphQL API获取信息时，我们使用Query。</li><li id="53cb" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">突变:当我们想要对服务器上的数据进行突变时，就会用到突变。变异类似于REST API中的PUT、POST、DELETE、PATCH。</li><li id="b124" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">模式:模式是GraphQL API支持的操作的完整表示。</li></ol><h1 id="28d3" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">REST和GraphQL的主要区别</h1><ul class=""><li id="70b3" class="mr ms iq ka b kb mm kf mn kj nf kn ng kr nh kv ni mx my mz bi translated">REST有多个端点。GraphQL有一个端点— /graphql。</li><li id="e300" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv ni mx my mz bi translated">REST APIs支持PUT、GET、POST、DELETE、PATCH。GraphQL支持查询、变异、订阅。</li><li id="7acd" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv ni mx my mz bi translated">REST端点由资源实现填充。GraphQL字段由解析器填充。</li><li id="90dc" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv ni mx my mz bi translated">REST — 200、400、500级状态代码。GraphQL — 200级状态代码。</li><li id="d88b" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv ni mx my mz bi translated">在REST中，为了获取完整的数据，经常需要进行往返。使用GraphQL，您可以获取多个字段，因此可以通过一个请求获取您需要的所有数据。</li><li id="f2c9" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv ni mx my mz bi translated">对于REST，数据的形状由服务器决定。对于GraphQL，数据的形状由调用API的客户端决定。</li></ul><h1 id="44d3" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">何时使用GraphQL与REST</h1><p id="5cdc" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated"><strong class="ka ir">何时使用GraphQL </strong></p><ol class=""><li id="1d09" class="mr ms iq ka b kb kc kf kg kj mt kn mu kr mv kv mw mx my mz bi translated">当您有多个下游API时</li><li id="567b" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当您有来自下游API的无关数据时</li><li id="59f2" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当您关心哪些字段被哪些客户端使用时。在GraphQL的帮助下，您可以拥有字段级的工具。</li><li id="cb25" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当您希望确保所有客户端都拥有最新版本的API时。使用GraphQL，因为有一个端点，所以所有更新都提供给每个人。</li><li id="ec28" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当你想构建一个UI优先的API时。</li><li id="3862" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当你关心蚀刻不足和蚀刻过度时。</li></ol><p id="6e4e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">何时使用REST </strong></p><ol class=""><li id="e552" class="mr ms iq ka b kb kc kf kg kj mt kn mu kr mv kv mw mx my mz bi translated">当您非常依赖缓存时。</li><li id="a1df" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当您不知道一个完整的字段集时，您可以从下游API获得。使用GraphQL，您需要提前了解模式。</li><li id="bade" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">当您非常依赖下游API的状态代码时。GraphQL中的所有内容都是200，因此您需要解析响应对象或错误对象。</li></ol><h1 id="4e74" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">学习GraphQL的先决条件</h1><p id="cef9" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">虽然我不认为有任何必要的先决条件，但了解以下内容会有所帮助-</p><ol class=""><li id="df35" class="mr ms iq ka b kb kc kf kg kj mt kn mu kr mv kv mw mx my mz bi translated">API开发的基础</li><li id="9a14" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">REST APIs</li><li id="dea9" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">超文本传送协议</li><li id="bb49" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">实现GraphQL API的首选语言——JavaScript、Go、Java、Python等。</li></ol><h1 id="67c9" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">学习GraphQL的资源</h1><ol class=""><li id="0255" class="mr ms iq ka b kb mm kf mn kj nf kn ng kr nh kv mw mx my mz bi translated"><a class="ae kw" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank">GraphQL.org</a></li><li id="92c7" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://www.howtographql.com/" rel="noopener ugc nofollow" target="_blank"> howtographql </a></li><li id="f584" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">伊芙·波尔切洛的书</li><li id="0da4" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated">斯蒂芬·格里德的《我的课程》</li></ol><h1 id="2735" class="lp lk iq bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="96cd" class="pw-post-body-paragraph jy jz iq ka b kb mm kd ke kf mn kh ki kj mo kl km kn mp kp kq kr mq kt ku kv ij bi translated">简单地说，GraphQL是一种请求数据的语法。REST和GraphQL之间的最大区别是只有一个端点— <code class="fe kx ky kz la b">graphql</code>，除了调用API端点和传递所需参数之外，我们还需要准确地提供我们想要访问的字段。</p><p id="e4bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">用技术术语来说，GraphQL是一种规范，提供了一种查询数据的方式。该规范规定了当数据被请求和变异时应该发生什么。GraphQL指定了一种请求数据的方式，并准确地传递所请求的数据。既然是规范，GraphQL APIs就可以用语言来创建——JavaScript、Java、Go、Python。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="633b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我发表的其他GraphQL资源-</p><ol class=""><li id="2a76" class="mr ms iq ka b kb kc kf kg kj mt kn mu kr mv kv mw mx my mz bi translated"><a class="ae kw" href="https://frontendhappyhour.com/episodes/no-rest-with-quintessential-libations-graphql/" rel="noopener ugc nofollow" target="_blank">什么是GraphQL，为什么要使用它——前端欢乐时光播客</a></li><li id="7773" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://dev.to/shrutikapoor08/what-is-graphql-the-misconceptions-57b9" rel="noopener ugc nofollow" target="_blank">常见的GraphQL误解</a></li><li id="e1d9" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://www.youtube.com/watch?v=axQzCQ2Q4Rc" rel="noopener ugc nofollow" target="_blank">在企业中使用graph QL</a></li><li id="da63" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://www.youtube.com/watch?v=HL7gZnrEy68" rel="noopener ugc nofollow" target="_blank">从Redux移动到GraphQL </a></li><li id="82a6" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://www.youtube.com/watch?v=7raJccyHh0Y" rel="noopener ugc nofollow" target="_blank"> GraphQL &amp;状态管理</a></li><li id="a856" class="mr ms iq ka b kb na kf nb kj nc kn nd kr ne kv mw mx my mz bi translated"><a class="ae kw" href="https://learninggraphql.com/" rel="noopener ugc nofollow" target="_blank">graph QL Hub——在建</a></li></ol></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="fd95" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="https://tinyletter.com/shrutikapoor" rel="noopener ugc nofollow" target="_blank"> <em class="nq">在您的收件箱中获得这样的文章</em></a><em class="nq"><br/></em><a class="ae kw" href="https://twitch.tv/shrutikapoor" rel="noopener ugc nofollow" target="_blank"><em class="nq">与我实时合作</em> </a></p><p id="f282" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nq">更多内容请看</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="nq">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Why Use a Database When You Can Use the Web Storage API?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如果可以使用Web存储API，为什么还要使用数据库呢？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-use-a-database-when-you-can-use-the-web-storage-api-b87be20e2f1b?source=collection_archive---------11-----------------------#2021-07-16">https://javascript.plainenglish.io/why-use-a-database-when-you-can-use-the-web-storage-api-b87be20e2f1b?source=collection_archive---------11-----------------------#2021-07-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/70a04af7ae1137ac7a815ba4e8548d26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mOkPFygZViNwb7MRSyK2DA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by: @<a class="ae jz" href="https://unsplash.com/@kirill2020" rel="noopener ugc nofollow" target="_blank">kirill2020</a> on Unsplash.</figcaption></figure><p id="2d2e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每当我们决定在web应用程序上保存信息时，我们会立即想到数据库。比方说，如果我们要保存的信息涉及到一段数据，我们可以选择使用PHP中的Session。</p><p id="0321" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您决定使用会话或数据库，那么您必须将服务器考虑在内。使用服务器需要PHP、Python之类的后端语言，或者Express.js之类的框架，这需要一些额外的工作。</p><h2 id="f11b" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">Web存储API</h2><p id="b50e" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">为了避免通过会话和数据库存储少量信息，我们可以依赖Web存储API，正如我们在Mozilla Developer Network中的朋友所定义的:</p><blockquote class="lw"><p id="8cb3" class="lx ly in bd lz ma mb mc md me mf kx dk translated">Web存储API提供了浏览器可以安全存储键/值对的机制。</p></blockquote><p id="ae0e" class="pw-post-body-paragraph ka kb in kc b kd mg kf kg kh mh kj kk kl mi kn ko kp mj kr ks kt mk kv kw kx ig bi translated">Web存储就像JavaScript中的键值数据类型，我们有一个属性，每个属性都有一个值。Web存储技术与众不同，它可以在刷新页面甚至关闭标签时保持不变。</p><p id="a3a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在不使用服务器的情况下，在页面之间甚至关闭浏览器时保存数据是一个好主意。</p><p id="5db5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">尽管我们是从使用数据库开始运行的，但Web存储仍然充当一个微型数据库，在特定设备上的浏览器中存储数据。当处理使用多个设备的用户时，使用Web存储没有帮助。</p><p id="86eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在去年使用<code class="fe ml mm mn mo b">localStorage</code>机制的时候了解了Web存储，但是在最近的一个项目中我没有使用Web存储APIs tell 2021。</p><p id="fa47" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的项目中，我需要存储用户选择的值。存储的值将决定我们应该用哪种语言显示网站。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/2b2a686068192913ee27bd92e733d826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PMithO9D2_zAHa9JJKvejQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by the author</figcaption></figure><p id="9567" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上图显示了一个包含选择列表的表单。选择所需的语言并单击save后，我们将使用Web Storage API来存储所选的值(如下所示)。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/db1ea17d7a581c2501dc5d6239513b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xt7UvDwZ13tDcF0tNdgOUw.png"/></div></div></figure><p id="60c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如你在上面的例子中看到的，在获得选择的值后，我们使用Web存储API的<code class="fe ml mm mn mo b">localStorage</code>机制将其存储在“langaugetype”的名称下，尽管如果你不了解Web存储API，这可能看起来很复杂。</p><p id="cb01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在让我们来看看Web存储API是如何工作的。</p><h2 id="5e54" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">使用Web存储API</h2><p id="ae89" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">Web存储API有两种机制:<code class="fe ml mm mn mo b">sessionStorage</code>和<code class="fe ml mm mn mo b">localStorage</code>。两者都用于存储数据，但每种机制都有独特的使用案例。</p><h2 id="cc50" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><strong class="ak">会话存储机制</strong></h2><p id="b6f0" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">对于<code class="fe ml mm mn mo b">sessionStorage</code>,我们只为一个会话存储数据。这种机制会存储数据，直到您关闭浏览器/选项卡。我们可以说它有一个有效期。</p><p id="4b2a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">开发人员很少使用<code class="fe ml mm mn mo b">sessionStorage</code>，因此，我们将不深究这种机制。你不必担心<code class="fe ml mm mn mo b">sessionStorage</code>如何工作，我们将专注于工作方式类似的<code class="fe ml mm mn mo b">localStorage</code>。</p><p id="7972" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果对<code class="fe ml mm mn mo b">sessionStorage</code>感兴趣可以去Mozilla开发者网查看<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage" rel="noopener ugc nofollow" target="_blank"><em class="mv">window . session storage</em></a>。</p><h2 id="c6be" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><code class="fe ml mm mn mo b">LocalStorage mechanisme</code></h2><p id="6e75" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">localStorage中的数据不会像sessionStorage那样过期。即使您关闭了浏览器/窗口，数据也会持续存在，破坏这些数据的唯一方法是通过JavaScript或清除浏览器缓存。</p><p id="e105" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要在<code class="fe ml mm mn mo b">localStorage</code>对象中设置数据，我们将使用setItem()方法:</p><pre class="mq mr ms mt gt mw mo mx my aw mz bi"><span id="74a9" class="ky kz in mo b gy na nb l nc nd">localStorage.setItem('dataname', 'datavalue');<br/> <br/>//example</span><span id="5bdb" class="ky kz in mo b gy ne nb l nc nd">localStorage.setItem('birthday',<!-- -->new Date().toLocaleDateString()<!-- -->);</span></pre><p id="f3ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了从<code class="fe ml mm mn mo b">localStorage</code>对象中获取数据，我们可以使用getItem()方法:</p><pre class="mq mr ms mt gt mw mo mx my aw mz bi"><span id="b656" class="ky kz in mo b gy na nb l nc nd">const birthday= localStorage.getItem('birthday');</span></pre><p id="d427" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要获取本地存储的值，需要将其名称传递给getItem()方法，这与在Map中存储和获取数据是一样的。</p><p id="07e7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果不再需要存储的数据，可以使用removeItem()方法删除它:</p><pre class="mq mr ms mt gt mw mo mx my aw mz bi"><span id="319a" class="ky kz in mo b gy na nb l nc nd">localStorage.removeItem('birthday');</span></pre><p id="439a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，Web存储机制的存储空间有限，不同浏览器的存储空间各不相同。如果你决定清理被占用的空间，你可以使用clear()方法。</p><pre class="mq mr ms mt gt mw mo mx my aw mz bi"><span id="4628" class="ky kz in mo b gy na nb l nc nd">localStorage.clear();</span></pre><p id="9885" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ml mm mn mo b">localStorage</code>有一些缺点，比如不能以除字符串之外的任何格式存储数据，你可以通过使用JSON.stringify()方法将你的数据转换成字符串，然后使用JSON.parse()进行反向操作来克服这个缺点。</p><h2 id="4cae" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">最后。</h2><p id="3b37" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">无论您使用的是<code class="fe ml mm mn mo b">sessionStorage</code>还是<code class="fe ml mm mn mo b">localStorage</code>，Web存储API的这些机制都非常容易使用。</p><p id="caa1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用Web存储API和fetch()方法，您可以将SPA或单页面应用程序推向下一个级别，而不需要外部方。</p><p id="f7e4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mv">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
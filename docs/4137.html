<html>
<head>
<title>React Custom Hooks #2: useFontSize</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React自定义钩子#2: useFontSize</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-custom-hooks-2-usefontsize-3f636d0ecb88?source=collection_archive---------13-----------------------#2021-08-17">https://javascript.plainenglish.io/react-custom-hooks-2-usefontsize-3f636d0ecb88?source=collection_archive---------13-----------------------#2021-08-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1e91" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">REACT HOOKS食谱</h2><div class=""/><div class=""><h2 id="f754" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">设置并使用一个全局CSS变量来改变页面的基本字体大小。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/937c228858f94cc0a27f33042ad2f196.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZavK8wox9qycqWsAaiLDA.png"/></div></div></figure><p id="cd61" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">继第一篇关于React定制钩子的文章之后，今天我们将看到如何在我们的应用中简化和重用另一个逻辑，一点一点地增强我们作为React开发人员的技能。我说的是<strong class="lc ja"> useFontSize </strong>自定义钩子，我们一起来看看它为什么这么有用！</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h2 id="f2d2" class="md me iq bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu iw bi translated">为什么需要一个useFontSize钩子？</h2><p id="0543" class="pw-post-body-paragraph la lb iq lc b ld mv ka lf lg mw kd li lj mx ll lm ln my lp lq lr mz lt lu lv ij bi translated">我在智能手机上使用Medium应用程序，在阅读时浏览应用程序的选项，我遇到了一个非常好的功能:Medium让你能够调整应用程序的字体大小，以帮助你阅读更好的帖子内容。</p><p id="d8e4" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">这在许多平台中是一个非常常见的特性，但是我从来没有想过要实现它，即使是出于学习的目的。</p><p id="ad02" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">所以，为了实现我的<a class="ae na" href="https://marcoghiani.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">个人页面</strong> </a>上的功能，我想出了这个允许我控制CSS变量的自定义钩子。这样，我就可以在我的文本组件中使用这个变量，并获得一个完整的字体大小调整特性，而无需呈现所有的文本组件(将来可能会有一篇新文章)😁).</p><p id="d978" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在查看它的实现之前，我更愿意向您展示结果，您可以在我的<a class="ae na" href="https://marcoghiani.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">页面</strong> </a> <strong class="lc ja">上看到结果。</strong></p><h2 id="8c16" class="md me iq bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu iw bi translated">它是如何工作的？</h2><p id="2d0b" class="pw-post-body-paragraph la lb iq lc b ld mv ka lf lg mw kd li lj mx ll lm ln my lp lq lr mz lt lu lv ij bi translated">这种定制挂钩具有一些特性:</p><ul class=""><li id="1818" class="nb nc iq lc b ld le lg lh lj nd ln ne lr nf lv ng nh ni nj bi translated">在文档元素中设置一个CSS变量。变量名可以自定义。</li><li id="30cb" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">将保存的值存储在localStorage中，这样我们的用户就不需要在每次重新加载页面时更改字体大小。</li><li id="0cea" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">钩子是同构的，这意味着它也可以进行服务器端渲染。</li></ul><p id="cc83" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">钩子接受一些可选参数来定制它的功能，比如存储字体大小的<strong class="lc ja"> localStorage键</strong>、CSS变量名和SSR情况下的<strong class="lc ja"> initialSize </strong>。</p><h2 id="b835" class="md me iq bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu iw bi translated">实施</h2><p id="f63a" class="pw-post-body-paragraph la lb iq lc b ld mv ka lf lg mw kd li lj mx ll lm ln my lp lq lr mz lt lu lv ij bi translated">下面是代码实现！我知道这是一段很长的代码，但大部分是我留下的注释，以澄清它的作用，所以让我们阅读代码，让我们一起检查幕后发生了什么！🚀</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="4c37" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">现在让我们一步一步地看看发生了什么:</p><ul class=""><li id="0c6a" class="nb nc iq lc b ld le lg lh lj nd ln ne lr nf lv ng nh ni nj bi translated">首先，它导入了实现所必需的工具和钩子，你可以在<a class="ae na" href="https://github.com/tonyghiani/mountain-ui" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> mountain-ui仓库</strong> </a> <strong class="lc ja">中找到它们。</strong></li><li id="570f" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">下一步是定义一个接口来描述3个接受的选项:<strong class="lc ja"> storageKey、initialSize </strong>和<strong class="lc ja"> variableName。</strong>如果你没有使用typescript，你可以跳过这一步。</li><li id="3191" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">是时候声明一些实用程序来从DOM中的<code class="fe nr ns nt nu b">&lt;html&gt;</code>节点设置和检索字体大小变量了。两个函数<strong class="lc ja"> applyPropToDocument </strong>和<strong class="lc ja">getdocumenprop</strong>分别完成这些操作。</li><li id="152a" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">我们终于准备好开始声明自定义钩子了！我们将从<em class="nv"> options </em>对象中析构先前定义的参数，在使用钩子时没有传递它们的情况下分配默认值。</li><li id="5f1a" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">在实现之初，钩子调用了另一个自定义钩子，useLocalStorage实用程序，你可以在<a class="ae na" href="https://marcoghiani.com/blog/react-custom-hooks-uselocalstorage" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">我之前关于这个钩子的帖子</strong> </a>中深入阅读。正如您在代码注释中看到的，它创建了一个连接到localStorage的React状态，因此它可以满足我们之前看到的需求。</li><li id="6a99" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">由于我们将使用<a class="ae na" href="https://marcoghiani.com/blog/how-to-use-react-reducer-effectively" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> useReducer钩子</strong> </a>来实现，因此有必要定义<strong class="lc ja"> init </strong>函数，该函数将在钩子第一次被调用时处理各种细节。检查钩子是否在客户端运行，否则返回默认值。<em class="nv"> <br/> </em> 2 <em class="nv">。</em>如果字体大小已经存储在localStorage中，将其设置为CSS变量。<br/> 3。将存储的值作为状态值返回。</li><li id="d8da" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated">返回useReducer结果之前的最后一步显然是定义必要的逻辑来更新font-size值，并将其存储到localStorage中，并将更改通知组件。所有这些逻辑都包含在<strong class="lc ja">减速器</strong>的功能中。</li></ul><h2 id="cff2" class="md me iq bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu iw bi translated">如何使用useFontSize钩子？</h2><p id="88ed" class="pw-post-body-paragraph la lb iq lc b ld mv ka lf lg mw kd li lj mx ll lm ln my lp lq lr mz lt lu lv ij bi translated">在要点的最后，你会发现一个如何使用定制钩子的基本例子，但是这不应该限制你如何让用户与你的页面交互的想象力！在我的网站上，我通过一个滑块来实现互动！</p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h2 id="b5d6" class="md me iq bd mf mg mh dn mi mj mk dp ml lj mm mn mo ln mp mq mr lr ms mt mu iw bi translated">结论</h2><p id="3629" class="pw-post-body-paragraph la lb iq lc b ld mv ka lf lg mw kd li lj mx ll lm ln my lp lq lr mz lt lu lv ij bi translated">我们已经结束了第二个React Hooks的故事，我希望它能有所帮助，我希望听到你的任何疑问，你可以直接在<a class="ae na" href="https://twitter.com/tonyghiani" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja"> Twitter </strong> </a>上ping我，或者在这里评论帖子！</p><p id="a031" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">您还可以在以下页面找到更多关于我正在使用的资源的信息:</p><ul class=""><li id="aa8d" class="nb nc iq lc b ld le lg lh lj nd ln ne lr nf lv ng nh ni nj bi translated"><a class="ae na" href="https://github.com/tonyghiani/mountain-ui" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">山-ui </strong> </a></li><li id="17c4" class="nb nc iq lc b ld nk lg nl lj nm ln nn lr no lv ng nh ni nj bi translated"><a class="ae na" href="https://marcoghiani.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="lc ja">我的个人页面</strong> </a></li></ul><p id="873c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">在这里你也可以找到这个系列以前的帖子！</p><div class="nw nx gp gr ny nz"><a href="https://marcoghiani.com/blog/react-custom-hooks-uselocalstorage" rel="noopener  ugc nofollow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ja gy z fp oe fr fs of fu fw iz bi translated">React自定义钩子#1: useLocalStorage</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">使用React在localStorage上创建简单的持久化数据，以保存用户首选项。图片由马可在我开始后…</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">marcoghiani.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on ky nz"/></div></div></a></div><p id="122c" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">感谢您花时间阅读，下一篇文章再见！🚀</p><p id="51c7" class="pw-post-body-paragraph la lb iq lc b ld le ka lf lg lh kd li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated"><em class="nv">更多内容请看</em><a class="ae na" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lc ja"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Linting and Formatting for your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为你的React应用添加林挺和格式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-linting-and-formatting-for-your-react-app-78227b328910?source=collection_archive---------6-----------------------#2021-01-20">https://javascript.plainenglish.io/how-to-add-linting-and-formatting-for-your-react-app-78227b328910?source=collection_archive---------6-----------------------#2021-01-20</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="fef2" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">做好这一点，否则，你的代码会有问题</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/29e38ebb9ed3867db261ccc102fba581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhR0GNM_wrfEawQ4HfU2ZQ.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@clemhlrdt?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Clément H</a> on <a class="ae kw" href="https://unsplash.com/s/photos/code-programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3b70" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">编程是一件艺术作品。但是当谈到编码时，并不是每个人都能欣赏你的作品。因为编码风格因人而异很多。所以你的作品对另一个人来说可能是垃圾:P</p><p id="b6ed" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">当我们在团队项目中工作时，这就成了一个大问题。其中每个成员都试图覆盖其他人的代码。因此，在这些场景中，建立编码标准是必须的。</p><p id="c4e8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">有一些图书馆可以使我们的生活变得非常容易。他们是…</p><ul class=""><li id="fb5d" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">Linters是你代码的静态检查器。它可以在编写代码时发现常见错误。</li><li id="a3b0" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz is">格式化器</strong>可以用某种方式格式化你的代码，这样其他人就可以理解了</li></ul><p id="76ae" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天我们将学习如何使用这两个库。</p><h2 id="6caa" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated"><a class="ae kw" href="https://eslint.org/docs/user-guide/getting-started" rel="noopener ugc nofollow" target="_blank"> ESLint </a></h2><p id="b9bd" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">ESLint是一个工具，用于识别和报告ECMAScript/JavaScript代码中发现的模式，目标是使代码更加一致，并避免错误(来自文档)</p><h2 id="61d0" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated"><a class="ae kw" href="https://prettier.io/docs/en/index.html" rel="noopener ugc nofollow" target="_blank">更漂亮</a></h2><p id="1351" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">它是一个固执己见的代码格式化程序。我们可以定制它来满足我们的需求。</p><h2 id="d692" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">第一步。安装</h2><p id="a30a" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">首先，我们需要安装ESLint和更漂亮。我们将把它们保存为开发依赖项，因为我们在生产中不需要它们。</p><p id="ed01" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果你的应用是用create-react-app搭建的，你不需要单独安装<code class="fe nf ng nh ni b">eslint</code>。已经有了。</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="b88a" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev eslint prettier</span></pre><p id="be30" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">ESLint和beauty可以有一些重叠的规则。因此，我们需要确保它们能够协同工作。我们还需要2包</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="f975" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev eslint-config-prettier eslint-plugin-prettier</span></pre><p id="96bb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将安装另外两个依赖项来使用react。它们包含<code class="fe nf ng nh ni b">React</code>特定的风格指南。</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="ad7e" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev eslint-plugin-react eslint-plugin-react-hooks</span></pre><h2 id="1382" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">第二步。配置ESLint</h2><p id="2882" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">现在在项目的根文件夹中添加一个名为<code class="fe nf ng nh ni b">.eslintrc.js</code>的文件。它将作为ESLint的配置文件。文件的内容可能会根据您的需要而有所不同。这是我使用的一个示例配置。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nr ns l"/></div></figure><p id="2485" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">还可以添加一个<code class="fe nf ng nh ni b">.eslintignore</code>文件。这就像<code class="fe nf ng nh ni b">.gitignore</code>,因为我们不想格式化我们的构建文件或node_modules。<code class="fe nf ng nh ni b">.eslintignore</code>的内容与<code class="fe nf ng nh ni b">.gitignore</code>几乎相同</p><h2 id="a8bd" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">第三步。配置更漂亮</h2><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="03ba" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev prettier</span></pre><p id="367e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在项目的根目录中添加一个. prettierrc文件。它将包含漂亮工作所需的规则。内容可以根据你的需要而变化。你可以在这里得到更多的选项。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nr ns l"/></div></figure><p id="44ff" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">类似地，我们可以添加一个. prettierignore文件来忽略我们不想格式化的文件。</p><h2 id="9a63" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">第四步。添加到脚本</h2><p id="b11c" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">现在，我们将向package.json文件添加另外两个脚本</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nr ns l"/></div></figure><p id="2a00" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们可以运行下面的命令来Lint并修复错误</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="e015" class="mh mi ir ni b gz nn no l np nq">npm run lint</span></pre><p id="aa2f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">或者要格式化项目，请运行以下命令</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="293d" class="mh mi ir ni b gz nn no l np nq">npm run format</span></pre><p id="7ed8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，您的项目已准备好获得一致的外观。但是等等！您可以做一些额外的工作来自动化这个过程。以下是如何…</p><h2 id="991e" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">步骤5(可选)。每次提交前运行linter</h2><p id="d134" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">作为开发人员，你很懒。您不希望每次想要提交时都运行这些命令。我们可以使用一个名为husky的附加库来自动化这个过程</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="0b83" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev husky -D</span></pre><p id="08da" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">会帮助我们使用预提交git-hook。所以每当我们犯了什么错误，它就会自动为我们运行。</p><p id="7769" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为此，我们需要在package.json文件中添加以下配置</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nr ns l"/></div></figure><h2 id="4aa7" class="mh mi ir bd mj mk ml dn mm mn mo dp mp lg mq mr ms lk mt mu mv lo mw mx my mz bi translated">第六步。仅对暂存文件运行linter</h2><p id="4258" class="pw-post-body-paragraph kx ky ir kz b la na js lc ld nb jv lf lg nc li lj lk nd lm ln lo ne lq lr ls ik bi translated">对于小项目来说，每次提交时在整个项目中运行linter是可以的。但是随着你的项目越来越大，你不想在每次提交前等待几分钟。为此，我们将添加另一个包来帮助我们。</p><pre class="kh ki kj kk gu nj ni nk nl aw nm bi"><span id="f441" class="mh mi ir ni b gz nn no l np nq">npm install --save-dev lint-staged -D</span></pre><p id="c2c1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在package.json文件中添加以下配置</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nr ns l"/></div></figure><p id="1a78" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，只有项目的暂存文件会受到git的预提交挂钩的影响。</p><p id="55b4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最终的package.json应该是这样的</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nt"><img src="../Images/5e047dec7c015852282fc4af048259d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hqN5HkF9cEGcAySpiXyVcg.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">package.json</figcaption></figure><p id="f332" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">好了，现在你准备好摇滚了。您的项目现在是干净的，并且格式正确。此外，你是在强迫每个人在按下某个东西之前运行linter。</p><p id="243c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在本文中，我们只关注react to，但是这个过程对于任何类型的nodejs/javascript项目都是一样的。</p><p id="fdeb" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天到此为止。编码快乐！:D</p><p id="8836" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">通过</strong> <a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is"> LinkedIn </strong> </a> <strong class="kz is">或我的</strong> <a class="ae kw" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is">个人网站</strong> </a> <strong class="kz is">与我取得联系。</strong></p></div></div>    
</body>
</html>
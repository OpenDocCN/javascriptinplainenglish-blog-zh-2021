<html>
<head>
<title>Introducing Flareact: Cloudflare’s Brand New Next.js Alternative</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍Flareact: Cloudflare的全新Next.js替代方案</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/flareact-64a6ea185b8?source=collection_archive---------8-----------------------#2021-07-20">https://javascript.plainenglish.io/flareact-64a6ea185b8?source=collection_archive---------8-----------------------#2021-07-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5108" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不，你不需要付费计划</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/46626736a1644929127ce77491cba0ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uzYiiVSipOf8VTNvi9jWDQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image credits: <a class="ae kv" href="https://unsplash.com/@cullansmith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Cullan Smith</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a> &amp; <a class="ae kv" href="https://github.com/flareact/flareact" rel="noopener ugc nofollow" target="_blank">GitHub</a></figcaption></figure><p id="4d5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">几天前，我发现Cloudflare有多棒。</p><p id="3676" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我过去认为它只提供DDoS保护，但我错了。你可以做更多的事情。通过Cloudflare网络托管静态页面是这些选项之一。另一个是用编程语言如Go、Python和JavaScript托管无服务器功能。</p><p id="1461" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使事情变得更简单，有许多初学者模板可以满足您的所有需求。我发现的一个特别的程序叫做<em class="ls">Flareact</em>——它是一个基于React.js的无服务器启动器。别问我怎么念。(也许Flare-act？)</p><p id="edd0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">坦率地说:<strong class="ky ir"> Flareact是并且感觉像Next.js. </strong></p><p id="4352" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果有Next.js我们为什么还需要它？</p><p id="e8be" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在开始实践之前，让我们先弄清楚这一点。</p><p id="04a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Next.js是一个开发完善且稳定的React.js框架。如果您愿意，您可以将Next.js应用程序导出为静态页面，并将其托管在几乎任何地方。</p><p id="8afa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">除了静态托管，一个Next.js app可以在服务器上主动渲染，给你带来很多好处。为了实现这一点，可以将Next.js集成到Node.js应用程序中，或者将其作为云功能托管在Vercel等平台上。</p><p id="ba0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Flareact的理念是<strong class="ky ir">而不是</strong>静态托管。</p><p id="728c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目前，甚至没有静态导出页面的选项。Flareact是并且仍然是Cloudflare的无服务器功能“workers”的启动器，因此它是基于云的。</p><p id="cd64" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想利用在服务器上主动渲染应用程序的优势，请仅使用Flareact。例如，动态路由或预取数据是服务器端呈现的独有功能。这两者在静态页面上技术上都是不可能的。</p><p id="f038" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，Flareact专注于SSR，这需要运行后端功能。这说明了为什么它不仅仅是另一个不必要的框架。</p><p id="f33a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，您可以在Cloudflare上使用SSR托管您的Node.js + Next.js应用程序(我完全爱上了这一点)，但为什么不让事情变得更简单，并使用Flareact，它正是为此目的而优化的呢？</p><p id="423f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">总而言之:Flareact的目标是成为在Cloudflare服务器上渲染React.js的首选。开始吧！</p><p id="dfe3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们开始之前的两个提示，摘自<a class="ae kv" href="https://www.npmjs.com/package/flareact" rel="noopener ugc nofollow" target="_blank">NPM官方页面</a>:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lt"><img src="../Images/de9caba0a5107aef6337979d82ccb612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lhdNpDr9zCpA4EB60wIZow.png"/></div></div></figure><p id="1ec6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Flareact只有一岁，因此，请对它有点同情心。</p><p id="8459" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，首先您需要在这里创建一个Cloudflare Workers帐户<a class="ae kv" href="https://workers.cloudflare.com/" rel="noopener ugc nofollow" target="_blank">。别担心，这不会花你什么钱。</a></p><p id="79a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要构建新的Flareact项目，我们需要安装Cloudflare的无服务器CLI:</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="fabd" class="lz ma iq lv b gy mb mc l md me">npm i @cloudflare/wrangler -g</span></pre><p id="8242" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，您需要登录刚刚创建的Cloudflare帐户:</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="96fe" class="lz ma iq lv b gy mb mc l md me">wrangler login </span></pre><p id="7a39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按“y”确认—浏览器将打开，您将登录。如果过一会儿终端仍然显示“等待API令牌”,不要担心——我在两台不同的机器上遇到了这个错误。谢天谢地，我知道解决办法；)</p><p id="49f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">再次运行<code class="fe mf mg mh lv b">wrangler login</code>——然后，您应该会看到这个页面:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mi"><img src="../Images/1b76cca23a380abe6f6a0af2113e7a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FwyLwFzZldpihx9P8okPuQ.png"/></div></div></figure><p id="5330" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">按下“API令牌”点击您的令牌的3个条，并选择“滚动”然后，复制新令牌。在终端中运行<code class="fe mf mg mh lv b">wrangler config</code>,手动输入您的API密钥——现在您已经登录了！</p><p id="6a93" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">终于，我们可以做我们想做的事了。</p><h1 id="34d7" class="mj ma iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">创建我们的Flareact项目</h1><p id="f0b9" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">找到您想要创建新项目的位置。然后，跑</p><pre class="kg kh ki kj gt lu lv lw lx aw ly bi"><span id="ba78" class="lz ma iq lv b gy mb mc l md me">wrangler generate my-project <a class="ae kv" href="https://github.com/flareact/flareact-template" rel="noopener ugc nofollow" target="_blank">https://github.com/flareact/flareact-template</a></span></pre><p id="0355" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将创建一个名为“my-project”的新目录选择名字由你决定。</p><p id="9a82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在是我想到另一个问题的时候了:不知何故，wrangler只生成了一个使用0.0.7版Flareact依赖项的项目。因此，在初始化之后，确保检查<em class="ls"> flareact </em>是版本1.2.1或更高版本。</p><p id="30b7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">项目创建完成后，终端应该会显示您的帐户ID。<br/>确保复制该值并将其粘贴到<code class="fe mf mg mh lv b">wrangler.toml</code>中，此处“account_id”字段目前为空。这赋予了将您的应用即时部署到Cloudflare网络的权利。</p><p id="4d0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后但同样重要的是，确保在项目目录中运行<code class="fe mf mg mh lv b">npm install</code>。</p><p id="d762" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，在我们进行任何更改之前，让我们运行并部署它—我想让您知道它有多简单。</p><p id="3e8c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe mf mg mh lv b">npm run dev</code>创建开发服务器。你可以在它给你的端口上打开它(应该是端口8080)。然后，在我们部署它之前，我们需要构建我们的生产版本。用<code class="fe mf mg mh lv b">npm run build</code>可以做到这一点。</p><p id="7ced" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，要发布您的应用，运行<code class="fe mf mg mh lv b">npm run deploy</code> —这将立即将您的应用发布到Cloudflare网络。</p><p id="51a5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将构建一个<em class="ls"> Cloudflare Workers </em>项目，这意味着我们将使用Cloudflare的无服务器功能。</p><h1 id="0a9f" class="mj ma iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">Flareact与Next.js的相似之处</h1><p id="33c3" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">当你看到我们现在得到的东西时，它看起来非常类似于Next.js设置——这是有意的。下面是与Next类似的内容:</p><h2 id="e220" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated">按指定路线发送</h2><p id="40e4" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">在Next.js中，所有具有唯一URL的页面都位于/pages目录中。这同样适用于Flareact。</p><h2 id="518c" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated">动态路由</h2><p id="dfcb" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">但是如果我们想要动态地提供页面，那么基于我们请求的URL呢？在Next.js中，可以让页面处理不同的请求——例如，<code class="fe mf mg mh lv b">/pages/posts/[title].js</code>可以处理像<code class="fe mf mg mh lv b">/posts/first-post</code>和<code class="fe mf mg mh lv b">/posts/second-post</code>这样的请求。Flareact提供了相同的功能。</p><h2 id="3332" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated">自定义应用程序和文档页面</h2><p id="747c" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">当我们想要在Next.js应用程序中进行更深入的更改时，我们可以在pages目录中实现一个自定义的<code class="fe mf mg mh lv b">_document.js</code>和<code class="fe mf mg mh lv b">_app.js</code>文件。通过这些文件，我们可以指定渲染，应用全局样式或围绕整个应用程序进行布局。在Flareact中，两者都有</p><h2 id="e190" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated">设计我们的应用</h2><p id="6c66" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">像Next.js中一样，有许多选项来设计应用程序的样式。最基础的一个:把css写成. CSS文件，导入。在Next.js中，这导致了一个问题:默认情况下，CSS文件只能导入到<code class="fe mf mg mh lv b">_app.js</code>中，而不能导入到pages文件夹中的文件中。</p><p id="760f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是Flareact实际上比Next.js有优势的地方:我们可以很容易地在任何地方导入CSS文件。</p><p id="8336" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你像我一样，是一个风格组件的狂热爱好者，Flareact会支持我们。就像在Next.js中一样，我们可以使用样式化的组件，甚至只需要很少的额外配置就可以在服务器上呈现它。GitHub上有一个<a class="ae kv" href="https://github.com/flareact/flareact/tree/canary/examples/with-styled-components" rel="noopener ugc nofollow" target="_blank"> Flareact样式组件示例</a>。</p><h2 id="eee7" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated">默认组件</h2><p id="4c75" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">说到默认组件可能会有点混乱。但是当我提到Next.js的<code class="fe mf mg mh lv b">next/link</code>组件时，我相信你明白我的意思。</p><p id="d1fe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Flareact提供了几乎相同的组件— <code class="fe mf mg mh lv b">flareact/link</code>来支持其他站点的预取。然后是<code class="fe mf mg mh lv b">flareact/head</code>来操作你的站点的头部区域。</p><h1 id="6c79" class="mj ma iq bd mk ml mm mn mo mp mq mr ms jw mt jx mu jz mv ka mw kc mx kd my mz bi translated">最终想法</h1><p id="442c" class="pw-post-body-paragraph kw kx iq ky b kz na jr lb lc nb ju le lf nc lh li lj nd ll lm ln ne lp lq lr ij bi translated">Flareact与Next.js非常相似。如果你喜欢Cloudflare(我绝对喜欢)，在某些情况下，它是Next.js的一个很好的替代选择。Flareact针对Cloudflare网络进行了优化，使您的SSR应用程序变得非常容易。</p><p id="cd2f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一方面，它是一项新生技术，因此存在一些问题。我注意到，开发模式下的性能和缺失的功能是主要原因。</p><p id="4b1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读！</p><h2 id="a0f4" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated"><a class="ae kv" href="http://eepurl.com/hacY0v" rel="noopener ugc nofollow" target="_blank">加入我的时事通讯，了解最新消息</a></h2></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h2 id="185f" class="lz ma iq bd mk nf ng dn mo nh ni dp ms lf nj nk mu lj nl nm mw ln nn no my np bi translated"><em class="nx">延伸阅读</em></h2><div class="ny nz gp gr oa ob"><a href="https://bit.cloud/blog/how-to-build-a-reusable-cloudflare-worker-component-l4bf0swo" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">如何构建可重用的Cloudflare Worker组件</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">生成和部署无服务器Cloudflare worker的过程非常简单:派生一个现有的Cloudflare…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">比特云</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div><p id="e315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容请看</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a><em class="ls">。报名参加我们的</em> <a class="ae kv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。关注我们关于</em><a class="ae kv" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">Twitter</em></strong></a><a class="ae kv" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">LinkedIn</em></strong></a><strong class="ky ir"><em class="ls"/></strong><a class="ae kv" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">YouTube</em></strong></a><strong class="ky ir"><em class="ls">，以及</em></strong><em class="ls"/><a class="ae kv" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">不和</em> </strong> </a>  <em class="ls">对成长黑客感兴趣？检查</em> <a class="ae kv" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="ls">电路</em> </strong> </a> <strong class="ky ir"> <em class="ls">。</em> </strong></p></div></div>    
</body>
</html>
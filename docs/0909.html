<html>
<head>
<title>6 Git Practices I Found Most Useful</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我发现最有用的6个Git实践</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/5-git-practices-i-found-most-useful-af7410f390dd?source=collection_archive---------10-----------------------#2021-02-25">https://javascript.plainenglish.io/5-git-practices-i-found-most-useful-af7410f390dd?source=collection_archive---------10-----------------------#2021-02-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="c211" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph">Git初始化、重命名、隐藏、重置和重置</h2><div class=""/><div class=""><h2 id="8dfd" class="pw-subtitle-paragraph jt iw in bd b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dk translated">除了普通的工作流程之外，这些是我发现在工作中非常有用的Git实践</h2></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/414214be943aab62f2821883d9a1b54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bxv2T_IzKl3_6L-v"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@ffstop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fotis Fotopoulos</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="lc ld le"><p id="fe63" class="lf lg lh li b lj lk jx ll lm ln ka lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">先决条件</p></blockquote><ol class=""><li id="21e0" class="mc md in li b lj lk lm ln me mf mg mh mi mj mb mk ml mm mn bi translated">您必须在本地机器上安装Git。你可以按照<a class="ae lb" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="noopener ugc nofollow" target="_blank">官方文档</a>来做。</li><li id="c9ee" class="mc md in li b lj mo lm mp me mq mg mr mi ms mb mk ml mm mn bi translated">有一个<a class="ae lb" href="https://github.com/" rel="noopener ugc nofollow" target="_blank"> Github </a>账户(免费版就够了)。</li></ol><h1 id="1989" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">1.在您的项目中启动Git，并将其发布到Github</h1><p id="bbb1" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">你可能已经独自工作一段时间了。而有一天你需要和别人分享或者合作。也许你的主管想看看你一直在做什么，也许有新员工会分担你的工作量，或者你只是想分享你的工作！本练习由两部分组成，启动Git并将您的项目发布到Github。</p><p id="91ee" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">首先，您需要在项目的根目录中启动Git。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="7fb3" class="nv mu in nr b gy nw nx l ny nz">$cd root/path/to/project<br/>$git init</span></pre><p id="e98c" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">这将在目录中创建一个隐藏文件夹<code class="fe oa ob oc nr b">.git</code>，其中包含Git用来跟踪项目的元数据和版本历史。下一步是告诉Git提交内容。这里我们使用<code class="fe oa ob oc nr b">-A</code>来包含这个项目目录中的所有文件。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="a6e7" class="nv mu in nr b gy nw nx l ny nz">$git add -A</span></pre><p id="4f54" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">现在，您已经准备好进行第一次提交了。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="c177" class="nv mu in nr b gy nw nx l ny nz">$git commit -m 'This is the first commit. Add all files'</span></pre><p id="6ec2" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">本地工作已经完成。让我们转移到Github。我们需要的非常简单，一个新的存储库。在创建阶段，您可以将其公开或私有，可以有也可以没有<code class="fe oa ob oc nr b">README</code>和<code class="fe oa ob oc nr b">.gitignore</code>文件。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi od"><img src="../Images/5010fa72e06ea0799eb73e7accbc3254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*3iQuA2Cd69WItH_wJubYzg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Image from <a class="ae lb" href="https://github.com/" rel="noopener ugc nofollow" target="_blank">Github</a></figcaption></figure><p id="deee" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">创建存储库后，您可以通过HTTPS或SSH将此存储库添加为您的远程存储库:</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="0386" class="nv mu in nr b gy nw nx l ny nz">$git remote add origin https://github.com/{usrname}/{repo_name}.git</span></pre><p id="835b" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">最后，将本地存储库的上游设置为刚刚添加的远程存储库。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="9017" class="nv mu in nr b gy nw nx l ny nz">$git push --set-upstream origin main</span></pre><h2 id="fb43" class="nv mu in bd mv oe of dn mz og oh dp nd me oi oj nf mg ok ol nh mi om on nj it bi translated">1.1 .gitignore</h2><p id="dd02" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">我花了一段时间才真正明白这个文件是用来做<em class="lh">的。</em> <code class="fe oa ob oc nr b">.gitignore</code> <em class="lh"> </em>是一个纯文本文件，Git使用它来标识那些不应该跟踪和包含在提交中的文件。换句话说，只要你的文件名在<code class="fe oa ob oc nr b">.gitignore</code>里，就不会出现在修订里。它通常用于虚拟环境、敏感数据(如凭据)或缓存文件等。当您创建资源库时，Github上有许多适合不同环境的模板。</p><h1 id="4fb6" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">2.重命名分支</h1><p id="74d2" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">这是我发现自己经常使用的另一种常见做法。有时你会意识到给分支机构命名有一定的规则，或者有时你会觉得原来的名字不够有代表性，或者有错别字，等等。</p><p id="6bb4" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">使用<code class="fe oa ob oc nr b">git branch -m</code>重命名您的分支非常简单。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="108b" class="nv mu in nr b gy nw nx l ny nz">$git branch -m {old_branch_name} {new_branch_name}</span></pre><p id="4d3d" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">这只会更改本地的分支名称。如果您已经将分支推送到remote，那么您还必须运行以下命令来更改remote上的名称。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="57ba" class="nv mu in nr b gy nw nx l ny nz">$git push origin -u {new_branch_name}</span><span id="6ed6" class="nv mu in nr b gy oo nx l ny nz"># This resets the upstream branch, don't forget to delete the old branch</span><span id="2066" class="nv mu in nr b gy oo nx l ny nz">$git push origin -d {old_branch_name}</span></pre><h1 id="6af7" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">3.撤消最近的提交</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi op"><img src="../Images/b10f098a64159cd7c0ece43242dbedd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GMeqIv4Rr3sEW7WG.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Image from <a class="ae lb" href="https://www.atlassian.com/git/tutorials/undoing-changes" rel="noopener ugc nofollow" target="_blank">Altassian</a></figcaption></figure><p id="4fe5" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">很常见的情况是，您已经提交并更改了分支，但是之后想要撤销提交。别担心，在Git中，我们总是可以退一步，回到我们渴望的点。</p><p id="f88e" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">我们使用<code class="fe oa ob oc nr b">git reset</code>来撤销提交。如果您还想删除该提交中所做的所有更改，请使用<code class="fe oa ob oc nr b">--hard</code>。如果您只想对提交做一些调整，并保留那些更改，请使用<code class="fe oa ob oc nr b">--soft</code>。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="b072" class="nv mu in nr b gy nw nx l ny nz"># This will keep the changes untouched<br/>$git reset --soft HEAD~1</span><span id="0ce3" class="nv mu in nr b gy oo nx l ny nz"># This will remove all the changes in this commit<br/>$git reset --hard HEAD~1 </span></pre><h1 id="f536" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">4.隐藏</h1><p id="4fc9" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">通常，为了做其他的工作，你不得不检查你的分支，而没有到达一个你乐意提交你的工作的地方。你肯定不想一切从头再来。藏起来才是你要找的。隐藏将保存您所有的更改，并将工作树恢复到最近的<code class="fe oa ob oc nr b">HEAD</code>提交。如果你有未被追踪的文件要隐藏，就需要<code class="fe oa ob oc nr b">-u, --untracked-files</code>。可以在末尾添加可选注释。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="d875" class="nv mu in nr b gy nw nx l ny nz">$git stash save -u 'stash message'</span></pre><p id="6e61" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">你在其他事情上工作了一段时间，最后回来继续你离开的地方。但是你忘了你做了什么，忘了藏了什么。要查看所有现有的仓库，运行</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="6f97" class="nv mu in nr b gy nw nx l ny nz">$git stash list</span></pre><p id="5e32" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">栈被命名为<code class="fe oa ob oc nr b">stash@{0}</code>、<code class="fe oa ob oc nr b">stash@{1}</code>、<code class="fe oa ob oc nr b">stash@{2}</code>等。要检查单个存储，请使用</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="e572" class="nv mu in nr b gy nw nx l ny nz">$git stash show stash@{0}</span></pre><p id="1497" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><code class="fe oa ob oc nr b">apply</code>和<code class="fe oa ob oc nr b">pop</code>都用于将存储区中的更改带回工作树，不同的是<code class="fe oa ob oc nr b">apply</code>会保留存储区，而<code class="fe oa ob oc nr b">pop</code>不会。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="5b90" class="nv mu in nr b gy nw nx l ny nz">$git stash apply stash@{0} <br/>#stash@{0} is kept after bringing back changes</span><span id="9574" class="nv mu in nr b gy oo nx l ny nz">$git stash pop stash@{0}   <br/>#stash@{0} is deleted after bringing back changes</span></pre><p id="aae6" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><code class="fe oa ob oc nr b">git stash pop</code>等于运行<code class="fe oa ob oc nr b">git stash apply</code> + <code class="fe oa ob oc nr b">git stash drop</code>。要删除所有隐藏，请运行</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="b0ca" class="nv mu in nr b gy nw nx l ny nz">git stash clear<!-- --> </span></pre><h1 id="8b6b" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">5.交互式rebase</h1><p id="1971" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">在<code class="fe oa ob oc nr b">git rebase</code>命令后添加一个<code class="fe oa ob oc nr b">-i</code>，代表交互，将打开一个文本编辑器，允许您修改提交历史。它看起来像这样:</p><p id="9ad6" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><code class="fe oa ob oc nr b">$git rebase -i {The_branch_you_rebase_on}</code></p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="54b7" class="nv mu in nr b gy nw nx l ny nz">pick dd113af This is the first commit<br/>pick ca101aa This is the second commit<br/>pick 4448c6c This is the third commit</span><span id="d8eb" class="nv mu in nr b gy oo nx l ny nz"># Rebase dc50ea8..4448c6c onto 4448c6c (4 commands)<br/>#<br/># Commands:<br/># p, pick &lt;commit&gt; = use commit<br/># r, reword &lt;commit&gt; = use commit, but edit the commit message<br/># e, edit &lt;commit&gt; = use commit, but stop for amending<br/># s, squash &lt;commit&gt; = use commit, but meld into previous commit<br/># f, fixup &lt;commit&gt; = like "squash", but discard this commit's log message<br/>.<br/>.<br/>.<br/>.<br/>.<br/></span></pre><p id="9aac" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">最新提交在底部，最早提交在顶部。下面你可以看到很多命令，你可以用它们来'<em class="lh">'重写</em>'提交历史。每个命令后的描述已经很清楚了。您只需要用您想要应用的命令更改提交前的“<em class="lh">选择</em>”。这里有一篇很棒的文章在实践中展示了其中的一些。</p><p id="4446" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated">请注意，当您编辑提交时，您基本上是抛弃旧的提交并创建新的提交。你在重写仓库的历史。如果你是这个部门唯一的工作人员，这没什么大不了的。但是如果其他人从你修改的提交中分支出来，他们就会被搞砸，因为那个提交已经不存在了。因此，在重新设定基数时，要非常确定自己在做什么，并保持谨慎。</p><h1 id="4230" class="mt mu in bd mv mw mx my mz na nb nc nd kc ne kd nf kf ng kg nh ki ni kj nj nk bi translated">6.检查他人的分支机构</h1><p id="b684" class="pw-post-body-paragraph lf lg in li b lj nl jx ll lm nm ka lo me nn lr ls mg no lv lw mi np lz ma mb ig bi translated">这在合作中很常见。有时你不得不审查其他人的PR，或者你的同事向你伸出手，请你看一看他们的代码。无论什么原因，你都需要进入别人的分支。首先，必须将该分支推送到Github。然后，您设置一个本地分支，它通过在<code class="fe oa ob oc nr b">git checkout</code>之后添加<code class="fe oa ob oc nr b">— track</code>来跟踪远程分支。</p><pre class="km kn ko kp gt nq nr ns nt aw nu bi"><span id="d15d" class="nv mu in nr b gy nw nx l ny nz">$git checkout --track origin/{other people's branch on remote}</span></pre><p id="fac4" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><strong class="li ix"> <em class="lh">我的Git系列故事:</em> </strong></p><p id="cf2e" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><a class="ae lb" href="https://medium.com/swlh/an-intro-to-git-and-github-for-beginners-157c4374deff" rel="noopener">针对初学者的Git和GitHub介绍</a></p><p id="7702" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><a class="ae lb" href="https://towardsdatascience.com/hands-on-git-workflow-with-code-example-a89ec2b3110b" rel="noopener" target="_blank">带代码示例的实际操作Git工作流</a></p><p id="f24b" class="pw-post-body-paragraph lf lg in li b lj lk jx ll lm ln ka lo me lq lr ls mg lu lv lw mi ly lz ma mb ig bi translated"><a class="ae lb" href="https://towardsdatascience.com/the-differences-between-rebase-and-merge-30c91cd18f30" rel="noopener" target="_blank">Rebase和Merge的区别</a></p></div></div>    
</body>
</html>
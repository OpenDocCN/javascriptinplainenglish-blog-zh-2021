<html>
<head>
<title>Ways to Render Large Lists with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React呈现大型列表的方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/ways-to-render-large-lists-with-react-82421b7498a6?source=collection_archive---------7-----------------------#2021-03-26">https://javascript.plainenglish.io/ways-to-render-large-lists-with-react-82421b7498a6?source=collection_archive---------7-----------------------#2021-03-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/731be3cfe1c0b67661018238678175af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QarfsAMi4bnRI-mP"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@chasingafterdear?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jenny Smith</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2b55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们经常要在React应用中渲染大型列表。</p><p id="eaa3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究在React应用程序中呈现大型列表的方法。</p><h1 id="5012" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">页码</h1><p id="8b34" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用react-paginate库向react列表添加分页。</p><p id="6f07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="1196" class="mn lc iq mj b gy mo mp l mq mr">npm i react-paginate</span></pre><p id="62e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0011" class="mn lc iq mj b gy mo mp l mq mr">import React, { useEffect, useState } from "react";<br/>import ReactPaginate from "react-paginate";</span><span id="4508" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [pagination, setPagination] = useState({<br/>    data: new Array(1000).fill().map((value, index) =&gt; ({<br/>      id: index,<br/>      title: index,<br/>      body: index<br/>    })),<br/>    offset: 0,<br/>    numberPerPage: 10,<br/>    pageCount: 0,<br/>    currentData: []<br/>  });<br/>  useEffect(() =&gt; {<br/>    setPagination((prevState) =&gt; ({<br/>      ...prevState,<br/>      pageCount: prevState.data.length / prevState.numberPerPage,<br/>      currentData: prevState.data.slice(<br/>        pagination.offset,<br/>        pagination.offset + pagination.numberPerPage<br/>      )<br/>    }));<br/>  }, [pagination.numberPerPage, pagination.offset]);<br/>  const handlePageClick = (event) =&gt; {<br/>    const selected = event.selected;<br/>    const offset = selected * pagination.numberPerPage;<br/>    setPagination({ ...pagination, offset });<br/>  };<br/>  return (<br/>    &lt;div&gt;<br/>      {pagination.currentData &amp;&amp;<br/>        pagination.currentData.map((item, index) =&gt; (<br/>          &lt;div key={item.id} className="post"&gt;<br/>            &lt;h3&gt;{item.title}&lt;/h3&gt;<br/>            &lt;p&gt;item {item.body}&lt;/p&gt;<br/>          &lt;/div&gt;<br/>        ))}<br/>      &lt;ReactPaginate<br/>        previousLabel="previous"<br/>        nextLabel="next"<br/>        breakLabel="..."<br/>        pageCount={pagination.pageCount}<br/>        marginPagesDisplayed={2}<br/>        pageRangeDisplayed={5}<br/>        onPageChange={handlePageClick}<br/>        containerClassName={"pagination"}<br/>        activeClassName={"active"}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="778c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组件让我们可以将分页控件添加到React应用程序中。</p><p id="f705" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用<code class="fe mt mu mv mj b">handlePageClick</code>方法从数组中获取数据，并对其进行切片，以获得给定页码的所需项目。</p><p id="e00d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">currentData</code>拥有当前页面的数据。</p><p id="42db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从<code class="fe mt mu mv mj b">event.selected</code>属性中获取页码。</p><p id="2aa6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用分页，我们每页加载少量数据。</p><h1 id="e8c7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">无限卷轴</h1><p id="68f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">加载大量数据的另一种方法是使用无限滚动。</p><p id="af48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们向下滚动时，我们将更多的数据附加到列表中。</p><p id="001f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了增加无限滚动，我们可以使用<code class="fe mt mu mv mj b">react-infinite-scroll-component</code>库。</p><p id="a2fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过运行以下命令来安装它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="be54" class="mn lc iq mj b gy mo mp l mq mr">npm i react-infinite-scroll-component</span></pre><p id="c67a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0cc7" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";<br/>import InfiniteScroll from "react-infinite-scroll-component";</span><span id="ce3d" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const data = new Array(1000).fill().map((value, id) =&gt; ({<br/>    id: id,<br/>    title: id,<br/>    body: id<br/>  }));</span><span id="efb2" class="mn lc iq mj b gy ms mp l mq mr">  const [count, setCount] = useState({<br/>    prev: 0,<br/>    next: 10<br/>  });<br/>  const [hasMore, setHasMore] = useState(true);<br/>  const [current, setCurrent] = useState(data.slice(count.prev, count.next));</span><span id="87de" class="mn lc iq mj b gy ms mp l mq mr">  const getMoreData = () =&gt; {<br/>    if (current.length === data.length) {<br/>      setHasMore(false);<br/>      return;<br/>    }<br/>    setTimeout(() =&gt; {<br/>      setCurrent(current.concat(data.slice(count.prev + 10, count.next + 10)));<br/>    }, 2000);<br/>    setCount((prevState) =&gt; ({<br/>      prev: prevState.prev + 10,<br/>      next: prevState.next + 10<br/>    }));<br/>  };</span><span id="d853" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;InfiniteScroll<br/>      dataLength={current.length}<br/>      next={getMoreData}<br/>      hasMore={hasMore}<br/>      loader={&lt;h4&gt;Loading...&lt;/h4&gt;}<br/>    &gt;<br/>      &lt;div&gt;<br/>        {current &amp;&amp;<br/>          current.map((item, index) =&gt; (<br/>            &lt;div key={index} className="post"&gt;<br/>              &lt;h3&gt;{item.title}&lt;/h3&gt;<br/>              &lt;p&gt;item {item.body}&lt;/p&gt;<br/>            &lt;/div&gt;<br/>          ))}<br/>      &lt;/div&gt;<br/>    &lt;/InfiniteScroll&gt;<br/>  );<br/>}</span></pre><p id="8bcd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">InfiniteScroll</code>组件来添加无限滚动容器。</p><p id="56d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">dataLength</code>当我们向下滚动时，有多少项目要加载。</p><p id="30f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">getMoreData</code>方法从数组中获得更多的数据。</p><p id="b4bc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们加载新数据并将其添加到<code class="fe mt mu mv mj b">setTimeout</code>回调中的<code class="fe mt mu mv mj b">current</code>数组中。</p><p id="ce55" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后更新<code class="fe mt mu mv mj b">count.prev</code>和<code class="fe mt mu mv mj b">count.next</code>属性来更新我们想要获取的项目的索引。</p><h1 id="1d65" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e29e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在React应用程序中添加分页和无限滚动，以高效的方式加载大量数据。</p><p id="e343" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p><p id="acb2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
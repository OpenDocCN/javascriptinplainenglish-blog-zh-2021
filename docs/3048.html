<html>
<head>
<title>How to Implement Loaders in React and Improve User Experience for Your Site</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中实现加载器并改善站点的用户体验</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/implementing-loaders-in-react-a5e41cd04f0b?source=collection_archive---------3-----------------------#2021-06-21">https://javascript.plainenglish.io/implementing-loaders-in-react-a5e41cd04f0b?source=collection_archive---------3-----------------------#2021-06-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="6007" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">利用装载机创造更好的用户体验</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/0b6c23bd941e363ea434b0387e9c5110.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Q2PjhTNC1RvTbm7xsAv8-Q.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Sunspot Loader from react-awesome-loaders</figcaption></figure><p id="75ec" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有没有注意到当你的React应用程序完成一个获取请求时出现一个暂时的黑屏，或者当字体和图像加载时出现一个暂时的小故障？您的代码没有问题，但浏览器本身需要一些时间来处理信息，然后才能呈现在屏幕上。虽然大多数情况下可能只需要一秒钟或更短的时间，但有些情况下加载可能需要很长时间，让您的用户不知道发生了什么。</p><p id="dfd7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个很好的解决方案是实现一个负载指示器。这样做可以在后台进程完成时为用户提供确认。在本文中，我们将探索如何使用<code class="fe kv kw kx ky b">react-loaders-kit</code>包和React钩子实现一个基本的加载器，以及对其他流行的加载器包的建议。</p><h1 id="51d2" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">用React钩子实现一个加载器</h1><p id="3c36" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">在创建了React应用程序、选择了想要使用的加载器并决定了它应该放在哪里之后，第一步是为加载器创建一个组件。我将使用<a class="ae mc" href="https://seimodei.github.io/react-loaders-kit-examples/" rel="noopener ugc nofollow" target="_blank">反应装载机套件</a>中的<code class="fe kv kw kx ky b">GooeyCircleLoader</code>。请务必查看加载器包的文档，因为可能会有您可以更改的属性。在这种情况下，我将改变大小，加载器循环的次数(持续时间)，以及使用的颜色。下面是一段代码。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="md me l"/></div></figure><blockquote class="mf mg mh"><p id="9eca" class="jk jl ki jm b jn jo jp jq jr js jt ju mi jw jx jy mj ka kb kc mk ke kf kg kh ig bi translated">注意:我还使用了<a class="ae mc" href="https://www.npmjs.com/package/react-typed" rel="noopener ugc nofollow" target="_blank"> react-typed </a>包来合并一个类型化的“loading…”文本，并且我已经在样式表中设置了组件的样式，这样加载器就出现在屏幕的中央。</p></blockquote><p id="1b2c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦我们对加载器的外观感到满意，我们将把加载器导入到我们希望它在流程加载时显示的组件中。我将使用<code class="fe kv kw kx ky b">useState</code>和<code class="fe kv kw kx ky b">useEffect</code>挂钩来管理是否应该显示加载器以及显示多长时间，但是您可以使用<code class="fe kv kw kx ky b">async</code> / <code class="fe kv kw kx ky b">await</code>函数来做同样的事情。</p><p id="56f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们首先声明一个布尔状态，决定是否显示加载程序，并将初始状态设置为<code class="fe kv kw kx ky b">false</code>。如果状态为假，则应用程序知道显示加载程序。同时，会有进程在后台运行，以预加载数据或发出网络请求。</p><p id="199d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当数据正在加载时，我们将使用带有<code class="fe kv kw kx ky b">setTimeout()</code>函数的<code class="fe kv kw kx ky b">useEffect</code>钩子来指定在将状态更改为<code class="fe kv kw kx ky b">true</code>之前要等待的时间。分配的时间应该是加载数据或发出网络请求所需的时间。一旦<code class="fe kv kw kx ky b">setTimeout()</code>功能的时间到了，状态设置为<code class="fe kv kw kx ky b">true</code>，满载的组件将出现在屏幕上，加载器将消失。</p><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="md me l"/></div></figure><p id="ae3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最终的产品应该是这样的。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="ml mm di mn bf mo"><div class="gh gi kj"><img src="../Images/8e2078aee6911e5e06f3cef3dafb33ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*4AjUITuF5hiUuknKqK3YIg.gif"/></div></div></figure><blockquote class="mf mg mh"><p id="7543" class="jk jl ki jm b jn jo jp jq jr js jt ju mi jw jx jy mj ka kb kc mk ke kf kg kh ig bi translated">注意:我还使用了<a class="ae mc" href="https://react-spring.io/" rel="noopener ugc nofollow" target="_blank"> react-spring </a>来淡出加载器，但是你可以加入任何最适合你的应用的过渡</p></blockquote><h1 id="dd79" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">流行的加载程序包</h1><h2 id="bda7" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">反应装载机套件</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/4999b69f18ef903896478a9060d4dd10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Q3fhJW7JYuaJibG1IwcZpA.gif"/></div></figure><p id="958f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我在上面的演示中使用的包，但是还有更多独特的和动画加载器的选项。查看<a class="ae mc" href="https://seimodei.github.io/react-loaders-kit-examples/" rel="noopener ugc nofollow" target="_blank">演示</a>和<a class="ae mc" href="https://github.com/Seimodei/react-loaders-kit" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="b6e7" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">反作用载荷</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/4d6a9c3f3e12fa9078e6b5887ba04182.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/1*AY1jIMpCFjC8dDHqzTC-2g.gif"/></div></figure><p id="6688" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个包提供了一些简单的动画加载器。参见<a class="ae mc" href="https://agneym.github.io/react-loading/" rel="noopener ugc nofollow" target="_blank">演示</a>和<a class="ae mc" href="https://github.com/agneym/react-loading" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="91fa" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">反应装载机</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/187eac8881319d88857131972c931ad1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ZFOj3VYXT7-56bH2bYT8xg.gif"/></div></figure><p id="9185" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个包只有一个简单的spinner loader，但是它是高度可定制的。更多信息请访问<a class="ae mc" href="https://codesandbox.io/s/optimistic-hooks-4ihxj?fontsize=14" rel="noopener ugc nofollow" target="_blank">演示</a>和<a class="ae mc" href="https://www.npmjs.com/package/react-loader" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="e8a4" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">反应-纯-装载机</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/3060f7f619cd7ffdffd80b034bca4a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*-B8iQ1s65JMB0K86i0DqIQ.gif"/></div></figure><p id="a3ca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个套装提供了相当多的选择。我个人最喜欢的是Pacman装载机。访问<a class="ae mc" href="https://reactpureloaders.io/story/?path=/story/ball-loaders--beat" rel="noopener ugc nofollow" target="_blank">演示</a>和<a class="ae mc" href="https://reactpureloaders.io/" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="ad7e" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">反应加载g</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/5cb2ca64c0dbe467019a40f751f6b61f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*kOCPldpF1w7O_JpGnoPvkQ.gif"/></div></figure><p id="f59a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个包提供了一些独特而有趣的加载器。查看<a class="ae mc" href="http://139.196.82.33:8080/iframe.html?id=demo--demo" rel="noopener ugc nofollow" target="_blank">演示</a>和<a class="ae mc" href="https://github.com/Summer-andy/react-loading" rel="noopener ugc nofollow" target="_blank">文档</a>。</p><h2 id="7ff5" class="mp la in bd lb mq mr dn lf ms mt dp lj jv mu mv ln jz mw mx lr kd my mz lv na bi translated">react-awesome-装载机</h2><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/0224e114d9915977e61ee12d56cb2998.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/1*0mGTV30CIO15rW9y56puQQ.gif"/></div></figure><p id="e51e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个包中的加载器绝对是最生动和最精细的。查看其余的加载器选项，并查看文档<a class="ae mc" href="https://awesome-loaders.netlify.app/docs/getting-started/" rel="noopener ugc nofollow" target="_blank">此处</a>。</p><h1 id="747f" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">最后</h1><p id="738a" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">加载器是向您的应用程序用户提供确认并改善整体用户体验的好方法。有许多令人惊奇的软件包，它们提供了易于实现的代码片段，无论您的技能水平如何。</p><p id="4a4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下次当你创建一个具有加载周期的React应用程序时，遵循这里分享的步骤，找到一个最适合你的用户的加载器。</p><p id="1237" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">更多内容尽在</em><a class="ae mc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ki">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
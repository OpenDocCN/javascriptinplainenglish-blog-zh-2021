<html>
<head>
<title>How Maps solve the limitations of Objects in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地图如何解决JavaScript中对象的局限性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-maps-make-up-for-limitations-of-objects-in-javascript-6c71f6e61af0?source=collection_archive---------4-----------------------#2021-11-05">https://javascript.plainenglish.io/how-maps-make-up-for-limitations-of-objects-in-javascript-6c71f6e61af0?source=collection_archive---------4-----------------------#2021-11-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5851" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript中地图的概述，以及它们如何弥补使用对象带来的限制。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/524c913e11e0d6d4949f486685040668.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t9Z2pITR0Y-Xxlpj"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@dmjdenise?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Denise Jans</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2384" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在JavaScript中，对象是最常用的数据结构之一。它们为您提供了一种以键/值对的形式组织和存储数据的方法。尽管如此，它们也有一些值得指出的限制。在本文中，我们将讨论这些限制，并展示如何使用<code class="fe lp lq lr ls b">Map</code>对象比使用常规对象更有效。</p><h1 id="32a4" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">什么是地图对象？</h1><p id="3ed0" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated"><code class="fe lp lq lr ls b">Map</code>对象最初是在JavaScript的ES6版本中引入的。像常规对象一样，它们可以包含键、值对，并允许您添加、检索、删除和检查这些键和值。</p><p id="4b2c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要创建一个<code class="fe lp lq lr ls b">Map</code>对象的新实例，我们可以这样做:</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="1bfc" class="mu lu in ls b gy mv mw l mx my">const map = new Map([<br/>    ["key", "value"]<br/>]);</span></pre><p id="25ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有几个内置的属性和方法与<code class="fe lp lq lr ls b">Map</code>对象的实例一起提供。这些包括但不限于一些更常见的问题，例如:</p><ul class=""><li id="347c" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated"><code class="fe lp lq lr ls b">.set()</code> -添加键、值对，第一个参数是键，第二个是值<code class="fe lp lq lr ls b">.set(key, value)</code></li><li id="d4a6" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><code class="fe lp lq lr ls b">.get()</code> -通过将指定的键作为唯一参数传入来检索链接到键的值<code class="fe lp lq lr ls b">.get(key)</code></li><li id="8def" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><code class="fe lp lq lr ls b">.delete()</code> -删除由传入的键名<code class="fe lp lq lr ls b">.delete(key)</code>标识的键、值对</li><li id="6983" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><code class="fe lp lq lr ls b">.has()</code> -检查键、值对是否存在，并返回一个布尔值。将密钥作为唯一参数<code class="fe lp lq lr ls b">.has(key)</code></li><li id="c806" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><code class="fe lp lq lr ls b">.size</code> -返回一个整数，表示包含在<code class="fe lp lq lr ls b">Map</code>对象中的键/值对的数量</li></ul><p id="a3af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nn">要了解更多关于</em> <code class="fe lp lq lr ls b"><em class="nn">Map</em></code> <em class="nn">对象的内置属性和方法，请查看此</em> <a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#constructor" rel="noopener ugc nofollow" target="_blank"> <em class="nn">链接</em> </a> <em class="nn">。</em></p><h1 id="b192" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">使用地图避免使用对象的限制</h1><p id="5af0" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">为了展示使用<code class="fe lp lq lr ls b">Map</code>对象如何解决使用对象时出现的限制，让我们来看看这些限制是什么，以及我们如何使用地图来避免它们。</p><h2 id="645a" class="mu lu in bd lv no np dn lz nq nr dp md lc ns nt mf lg nu nv mh lk nw nx mj ny bi translated">不保证对象是有序的</h2><p id="b4a4" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">尽管自JavaScript更新到ES6后这种情况有所改变，但常规对象的键/值对的排序仍然不可靠。</p><p id="82d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以我们声明的以下对象为例:</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="3150" class="mu lu in ls b gy mv mw l mx my">const obj = {<br/>    1: 2,<br/>    0: false,<br/>    "Greet": "Hello World",<br/>    a: "b",<br/>    c: "c"<br/>}</span></pre><p id="2e0d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们将<code class="fe lp lq lr ls b">obj</code>登录到控制台时，它显示的顺序与我们最初声明的顺序不同:</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="493a" class="mu lu in ls b gy mv mw l mx my">{0: false, 1: 2, Greet: 'Hello World', a: 'b', c: 'c'}</span></pre><p id="ac06" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们试图用一个映射声明相同的键/值对时，</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="1a73" class="mu lu in ls b gy mv mw l mx my">const map = new Map([<br/>    [1, 2],<br/>    [0, false],<br/>    ["Greet", "Hello World"],<br/>    ["a", "b"],<br/>    ["c", "c"]<br/>]);</span></pre><p id="4dd3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">相反，我们得到的是声明它们的原始顺序。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="92ad" class="mu lu in ls b gy mv mw l mx my">{1 =&gt; 2, 0 =&gt; false, 'Greet' =&gt; 'Hello World', 'a' =&gt; 'b', 'c' =&gt; 'c'}</span></pre><h2 id="900c" class="mu lu in bd lv no np dn lz nq nr dp md lc ns nt mf lg nu nv mh lk nw nx mj ny bi translated">没有快速确定物体长度或大小的方法</h2><p id="3882" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">对于一个对象，我们通过使用for循环和计数器或者使用<code class="fe lp lq lr ls b">Object.entries()</code>方法和<code class="fe lp lq lr ls b">.length</code>迭代对象来手动确定大小。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="d0b3" class="mu lu in ls b gy mv mw l mx my">const obj = {<br/>    1: "one",<br/>    2: "two",<br/>    3: "three"<br/>};</span><span id="0fbe" class="mu lu in ls b gy nz mw l mx my">Object.entries(obj).length; // 3</span></pre><p id="0a4e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们需要找出一个<code class="fe lp lq lr ls b">Map</code>对象中键/值对的数量时，我们可以使用<code class="fe lp lq lr ls b">.size</code>属性轻松地得到它。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="0946" class="mu lu in ls b gy mv mw l mx my">const map = new Map([<br/>    [1, "one"],<br/>    [2, "two"],<br/>    [3, "three"]<br/>]);</span><span id="1794" class="mu lu in ls b gy nz mw l mx my">console.log(map.size); // 3</span></pre><h2 id="f524" class="mu lu in bd lv no np dn lz nq nr dp md lc ns nt mf lg nu nv mh lk nw nx mj ny bi translated"><strong class="ak">地图对象自然是可迭代的，对象不是</strong></h2><p id="42ab" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">为了迭代对象，我们通常使用一个<code class="fe lp lq lr ls b">for..in</code>循环来手动获取每个键和值。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="68cd" class="mu lu in ls b gy mv mw l mx my">// obj = {1: 'one', 2: 'two', 3: 'three'}</span><span id="7a8f" class="mu lu in ls b gy nz mw l mx my">for (let key in obj) {<br/>    console.log(key, ": ", obj[key]);<br/>    // 1: one<br/>    // 2: two<br/>    // 3: three<br/>}</span></pre><p id="fd08" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是请注意，<code class="fe lp lq lr ls b">Object.keys()</code>和<code class="fe lp lq lr ls b">Object.values()</code>或<code class="fe lp lq lr ls b">Object.entries()</code>也可以用来使一个对象可迭代。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="84d4" class="mu lu in ls b gy mv mw l mx my">Object.entries(obj)<br/>  .forEach(entry =&gt; console.log(entry[0], ": ", entry[1]));<br/>  // 1: one<br/>  // 2: two<br/>  // 3: three</span></pre><p id="ae3e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">可以使用类似<code class="fe lp lq lr ls b">.forEach()</code>的方法轻松直接地迭代map对象来访问每个值。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="cef8" class="mu lu in ls b gy mv mw l mx my">// map = {1 =&gt; 'one', 2 =&gt; 'two', 3 =&gt; 'three'}</span><span id="53fe" class="mu lu in ls b gy nz mw l mx my">map.forEach(value =&gt; console.log(value));<br/>// one<br/>// two<br/>// three</span></pre><h2 id="a707" class="mu lu in bd lv no np dn lz nq nr dp md lc ns nt mf lg nu nv mh lk nw nx mj ny bi translated">对象的键类型只能是字符串或符号</h2><p id="b673" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">当声明Javascript对象时，我们可以用作键的唯一类型是字符串或符号。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="0f5a" class="mu lu in ls b gy mv mw l mx my">const obj = {<br/>    ["key"]: "value"<br/>};</span><span id="64d7" class="mu lu in ls b gy nz mw l mx my">console.log(obj); <br/>// automatically converts array key to a symbol: {key: 'value'}</span><span id="e880" class="mu lu in ls b gy nz mw l mx my">const obj2 = {<br/>    ["key"]: "value",<br/>    function key(), "Value"<br/>};</span><span id="ec7f" class="mu lu in ls b gy nz mw l mx my">console.log(obj2); // throws an error</span></pre><p id="d2d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">虽然常规JavaScript对象的键只能是字符串或符号，但地图对象却不是这样。对于Map对象，它的键可以是任何类型，包括函数、对象和数组。</p><pre class="kd ke kf kg gt mq ls mr ms aw mt bi"><span id="f255" class="mu lu in ls b gy mv mw l mx my">const map = new Map([<br/>    [ ["key"], "value" ],<br/>    [ function key() {}, "value" ],<br/>    [ { "a": 1 }, "b" ],<br/>]);</span><span id="44d9" class="mu lu in ls b gy nz mw l mx my">console.log(map); <br/>// {Array(1) =&gt; 'value', ƒ =&gt; 'value', {…} =&gt; 'b'}</span></pre><h1 id="5ece" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">摘要</h1><p id="a264" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">在Javascript中，映射是非常有用的数据结构。它们提供了比常规对象更大的灵活性，例如，映射让我们能够使用任何数据类型作为键，同时还能保持声明它们的原始顺序。</p><p id="d255" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下一次当您使用普通的ol' JavaScript对象来存储某种复杂数据时，可以考虑使用映射。根据使用情况，它可能会更好地为您服务！</p></div><div class="ab cl oa ob hr oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ig ih ii ij ik"><ul class=""><li id="110c" class="mz na in kv b kw kx kz la lc nb lg nc lk nd lo ne nf ng nh bi translated"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#objects_vs._maps" rel="noopener ugc nofollow" target="_blank">地图</a></li><li id="84e8" class="mz na in kv b kw ni kz nj lc nk lg nl lk nm lo ne nf ng nh bi translated"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#objects_vs._maps" rel="noopener ugc nofollow" target="_blank">物体对地图</a></li></ul><p id="aed1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nn">更多内容请看</em><a class="ae ks" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nn">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
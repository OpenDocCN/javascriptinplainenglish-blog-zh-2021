<html>
<head>
<title>Create a Todo App with GraphQL, React, MongoDB and Apollo (Client-Side)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GraphQL，React，MongoDB和Apollo创建一个Todo App(客户端)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-todo-app-with-graphql-react-mongodb-and-apollo-client-side-8a946d869014?source=collection_archive---------5-----------------------#2021-09-19">https://javascript.plainenglish.io/create-a-todo-app-with-graphql-react-mongodb-and-apollo-client-side-8a946d869014?source=collection_archive---------5-----------------------#2021-09-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6697" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在React应用程序中使用变异和查询</h2></div><p id="4245" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/create-a-todo-app-with-graphql-react-mongodb-and-apollo-server-side-292ce42b9eea">在前一篇文章</a>中，我们已经创建了服务器端。</p><p id="a527" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将构建客户端并执行CRUD操作。</p><p id="bd22" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/create-a-todo-app-with-graphql-react-mongodb-and-apollo-server-side-292ce42b9eea">第一部分:用GraphQL、React、MongoDB和Apollo(服务器端)创建一个Todo应用</a></p><p id="2db7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://ckmobile.medium.com/create-a-todo-app-with-graphql-react-mongodb-and-apollo-client-side-8a946d869014" rel="noopener">第二部分:用GraphQL、React、MongoDB和Apollo(客户端)创建一个Todo应用</a></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/99573f25c0d7fdd6b0767a427f9cd3a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0e2CpIEuVSq9ic1z-Zm15g.png"/></div></div></figure><p id="e917" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">源代码:</p><div class="lo lp gp gr lq lr"><a href="https://ckmobile.gumroad.com/l/graphql-apollo-mongodb-todo-app" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd ir gy z fp lw fr fs lx fu fw ip bi translated">用React GraphQL MongoDB和Apollo创建一个Todo应用程序</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">为什么选择GraphQL？GraphQL使我们能够通过一个查询得到我们想要东西。例如，我们通常获取一个对象数组…</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">ckmobile.gumroad.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf lm lr"/></div></div></a></div></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><p id="fe48" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们创建一个名为“client”的文件夹，并通过输入“client folder”将其作为一个React。然后打字</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="1e3a" class="ms mt iq mo b gy mu mv l mw mx">npm i create-react-app .</span></pre><p id="293f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">删除不必要的文件。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi my"><img src="../Images/a2b7f4f66d2a4f920cb9c518f559c39a.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*CDZqwp4fry2x9KRrdAT5DA.png"/></div></figure><h2 id="dfbb" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">添加引导程序并添加表单</h2><p id="df7b" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">要使用引导程序，我们需要将CDN添加到公共文件夹的index.html中。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="9f15" class="ms mt iq mo b gy mu mv l mw mx">&lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous"&gt;</span></pre><p id="ef0e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://getbootstrap.com/docs/4.0/components/forms/" rel="noopener ugc nofollow" target="_blank">我们转到引导表单文档并复制表单示例。</a></p><p id="edc7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在App.js中，删除小标签，删除标签，id并将所有输入类型更改为文本。改变输入类型为日期为日期。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="9923" class="ms mt iq mo b gy mu mv l mw mx">function App() {</span><span id="a2f7" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="b4ab" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container"&gt;</span><span id="7da8" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="1da8" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="c425" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="1462" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="a4cc" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="4b1a" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="f8a2" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="dce5" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="4379" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="d9d7" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="a0f9" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="33dd" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="a50e" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="f276" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="8cab" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="c6d8" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="25bb" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="52ea" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="584e" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nw"><img src="../Images/0df5f3c73e64102dff16c969bd26dd48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DDIVx3VGM9gM1r5BT3pBmg.png"/></div></div></figure><h1 id="5b95" class="nx mt iq bd mz ny nz oa nc ob oc od nf jw oe jx ni jz of ka nl kc og kd no oh bi translated">添加自定义CSS</h1><p id="2070" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">创建名为App.css的文件</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="f2cb" class="ms mt iq mo b gy mu mv l mw mx">body{</span><span id="e6f9" class="ms mt iq mo b gy nv mv l mw mx">background-color: gray;;</span><span id="14f5" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="026e" class="ms mt iq mo b gy nv mv l mw mx">.todobox{</span><span id="54a1" class="ms mt iq mo b gy nv mv l mw mx">margin-top: 10px;</span><span id="b2e6" class="ms mt iq mo b gy nv mv l mw mx">padding:30px;</span><span id="0096" class="ms mt iq mo b gy nv mv l mw mx">background-color: #fafafa;</span><span id="ffc8" class="ms mt iq mo b gy nv mv l mw mx">-webkit-box-shadow: 5px 5px 15px 5px #000000;</span><span id="1d2b" class="ms mt iq mo b gy nv mv l mw mx">box-shadow: 5px 5px 15px 5px #000000;</span><span id="0a98" class="ms mt iq mo b gy nv mv l mw mx">}</span></pre><p id="5d2c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到App.js，导入App.css，添加todobox样式。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="db99" class="ms mt iq mo b gy mu mv l mw mx"><strong class="mo ir">import './App.css';</strong></span><span id="f1bd" class="ms mt iq mo b gy nv mv l mw mx">function App() {</span><span id="27ae" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="57e6" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container <strong class="mo ir">todobox</strong>"&gt;</span><span id="736c" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="0842" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="956f" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="dd4f" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="6be4" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="9409" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="6347" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="a6e6" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="ffb1" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="d0e0" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="8067" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="9bec" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="a738" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="a5c3" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="0c50" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="2725" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="7508" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="38cc" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="192f" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oi"><img src="../Images/1714d6baa56174c5ab504c8032127f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1UeY3dTb9avVHWYqrWGr2A.png"/></div></div></figure><h1 id="92ae" class="nx mt iq bd mz ny nz oa nc ob oc od nf jw oe jx ni jz of ka nl kc og kd no oh bi translated">添加列表组</h1><p id="e84f" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated"><a class="ae lb" href="https://getbootstrap.com/docs/4.0/components/list-group/" rel="noopener ugc nofollow" target="_blank">现在，我们需要将列表组添加到App.js中</a></p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="bb39" class="ms mt iq mo b gy mu mv l mw mx">import './App.css';</span><span id="ebe8" class="ms mt iq mo b gy nv mv l mw mx">function App() {</span><span id="7d66" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="521a" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span><span id="a097" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="db3b" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="1018" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="1d49" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="4ff6" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="e1e2" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="7b0b" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="740a" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="cdb2" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="77c0" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group"&gt;</span><span id="affc" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="d4a8" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="5c23" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="3008" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="f597" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="93c1" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="list-group"&gt;</span><span id="dd97" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start active"&gt;</span><span id="47f0" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="7bae" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;List group item heading&lt;/h5&gt;</span><span id="58b0" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;3 days ago&lt;/small&gt;</span><span id="01da" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="e71b" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.&lt;/p&gt;</span><span id="8135" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;Donec id elit non mi porta.&lt;/small&gt;</span><span id="927b" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="67b6" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start"&gt;</span><span id="fc03" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="ab1b" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;List group item heading&lt;/h5&gt;</span><span id="b1f3" class="ms mt iq mo b gy nv mv l mw mx">&lt;small className="text-muted"&gt;3 days ago&lt;/small&gt;</span><span id="090a" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="be77" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.&lt;/p&gt;</span><span id="ddf4" class="ms mt iq mo b gy nv mv l mw mx">&lt;small className="text-muted"&gt;Donec id elit non mi porta.&lt;/small&gt;</span><span id="5e13" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="6ef9" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start"&gt;</span><span id="f886" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="d4ba" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;List group item heading&lt;/h5&gt;</span><span id="240d" class="ms mt iq mo b gy nv mv l mw mx">&lt;small className="text-muted"&gt;3 days ago&lt;/small&gt;</span><span id="2635" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="29a9" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;Donec id elit non mi porta gravida at eget metus. Maecenas sed diam eget risus varius blandit.&lt;/p&gt;</span><span id="6fd3" class="ms mt iq mo b gy nv mv l mw mx">&lt;small className="text-muted"&gt;Donec id elit non mi porta.&lt;/small&gt;</span><span id="ba13" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="d552" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="667e" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="227a" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="b96e" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="f07f" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oj"><img src="../Images/a953f13a048272d119a513cfc83ae60a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O-jtHnb6uRxG2Y5A9Deg5Q.png"/></div></div></figure><p id="30a5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到输入框、提交按钮和列表组粘在一起。因此，我们需要为每个输入字段添加下边距，并为列表组添加上边距。</p><p id="c33b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://icons.getbootstrap.com/icons/trash/" rel="noopener ugc nofollow" target="_blank">添加删除图标</a>，同时准备标题、细节和日期的占位符。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="814c" class="ms mt iq mo b gy mu mv l mw mx">import './App.css';</span><span id="23de" class="ms mt iq mo b gy nv mv l mw mx">function App() {</span><span id="1552" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="b81e" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span><span id="12c8" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="51a5" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;div className="form-group mb-3"&gt;</strong></span><span id="5777" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="462f" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="881e" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="8713" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;div className="form-group mb-3"&gt;</strong></span><span id="86e3" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="9865" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="6f97" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="7984" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;div className="form-group mb-3"&gt;</strong></span><span id="9ee2" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="2a78" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="aad0" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="672a" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="736b" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="3501" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="list-group <strong class="mo ir">mt-4</strong>"&gt;</span><span id="975e" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="7e50" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="6fdb" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;Todo title&lt;/h5&gt;</span><span id="0e5b" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;todo date&lt;/small&gt;</span><span id="8249" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="9cc8" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;Todo detail Todo detail Todo detail Todo detail. &lt;/p&gt;</span><span id="2f77" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;&lt;svg  width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"&gt;</span><span id="0c0e" class="ms mt iq mo b gy nv mv l mw mx">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</span><span id="a487" class="ms mt iq mo b gy nv mv l mw mx">&lt;path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</span><span id="8a0d" class="ms mt iq mo b gy nv mv l mw mx">&lt;/svg&gt;&lt;/small&gt;</span><span id="41a9" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="0ebb" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="901f" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="47a0" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;<strong class="mo ir">Todo title</strong>&lt;/h5&gt;</span><span id="a0d2" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;<strong class="mo ir">todo date</strong>&lt;/small&gt;</span><span id="160a" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="8f38" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;<strong class="mo ir">Todo detail Todo detail Todo detail Todo detail</strong>. &lt;/p&gt;</span><span id="0224" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;<strong class="mo ir">&lt;svg  width="16" height="16" fill="currentColor" class="bi bi-trash" viewBox="0 0 16 16"&gt;</strong></span><span id="0c64" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</strong></span><span id="c522" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</strong></span><span id="4454" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;/svg&gt;</strong>&lt;/small&gt;</span><span id="5e9c" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="6441" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="4753" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="79fa" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="e903" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="976b" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><h2 id="b5d7" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">导入Apollo客户端和GraphQL</h2><p id="f579" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">转到终端，在客户端文件夹内。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="dea0" class="ms mt iq mo b gy mu mv l mw mx">npm install @apollo/client graphql</span></pre><p id="65fe" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">index.js内部</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="ca91" class="ms mt iq mo b gy mu mv l mw mx">import React from 'react';</span><span id="ca21" class="ms mt iq mo b gy nv mv l mw mx">import ReactDOM from 'react-dom';</span><span id="3991" class="ms mt iq mo b gy nv mv l mw mx">import App from './App';</span><span id="2a42" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { ApolloClient, InMemoryCache, ApolloProvider } from "@apollo/client"</strong></span><span id="1a86" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">const client = new ApolloClient({</strong></span><span id="80f4" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">uri: 'http://localhost:5000/graphql',</strong></span><span id="d310" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">cache: new InMemoryCache()</strong></span><span id="efcc" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">})</strong></span><span id="3a0e" class="ms mt iq mo b gy nv mv l mw mx">ReactDOM.render(</span><span id="854d" class="ms mt iq mo b gy nv mv l mw mx">&lt;ApolloProvider client={client}&gt;</span><span id="e175" class="ms mt iq mo b gy nv mv l mw mx">&lt;App /&gt;</span><span id="9210" class="ms mt iq mo b gy nv mv l mw mx">&lt;/ApolloProvider&gt;,</span><span id="2a99" class="ms mt iq mo b gy nv mv l mw mx">document.getElementById('root')</span><span id="5b90" class="ms mt iq mo b gy nv mv l mw mx">);</span></pre><p id="2616" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">启动Node.js服务器，并启动React应用程序。应该不会出现错误。</p><h2 id="1294" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">创建一个GraphQL文件夹</h2><p id="fbaa" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">创建graphQL文件夹，并在该文件夹中创建Mutation.js和Query.js。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="6274" class="ms mt iq mo b gy mu mv l mw mx">import { gql } from '@apollo/client';</span><span id="f381" class="ms mt iq mo b gy nv mv l mw mx">export const GET_TODOS = gql`</span><span id="03b0" class="ms mt iq mo b gy nv mv l mw mx">{</span><span id="07eb" class="ms mt iq mo b gy nv mv l mw mx">getTodos{</span><span id="aba8" class="ms mt iq mo b gy nv mv l mw mx">id</span><span id="903f" class="ms mt iq mo b gy nv mv l mw mx">title</span><span id="88e9" class="ms mt iq mo b gy nv mv l mw mx">detail</span><span id="730b" class="ms mt iq mo b gy nv mv l mw mx">date</span><span id="142d" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="97e8" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="c1a4" class="ms mt iq mo b gy nv mv l mw mx">`</span></pre><p id="cc48" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在App.js中，从apollo客户端导入useQuery，并从Query.js导入GET_TODOS</p><p id="9c1d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们console.log('data '，data)看看数据能不能取回来。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="5fb2" class="ms mt iq mo b gy mu mv l mw mx">import './App.css';</span><span id="c797" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { GET_TODOS } from './graphql/Query';</strong></span><span id="583e" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { useQuery, useMutation } from '@apollo/client'</strong></span><span id="f883" class="ms mt iq mo b gy nv mv l mw mx">function App() {</span><span id="c88b" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">const { loading, error, data } = useQuery(GET_TODOS);</strong></span><span id="27cf" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">console.log('data', data)</strong></span><span id="3c8a" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="07be" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ok"><img src="../Images/7170ab847fcf47bfb877be4246547d38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_F7vnpp5Fx0GPAqWmlUYfQ.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk">The data displayed in the console</figcaption></figure><h2 id="f030" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">渲染todos</h2><p id="4fc3" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">导入时刻，因为我们需要呈现日期</p><p id="6fb3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还添加了两个if子句来检查是否有加载和错误情况</p><p id="9d8a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有问题，它将呈现数据。getTodos，我们将显示标题，细节和日期。我们将使用时刻来格式化日期</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="8c92" class="ms mt iq mo b gy mu mv l mw mx">function App() {</span><span id="f64b" class="ms mt iq mo b gy nv mv l mw mx">const { loading, error, data } = useQuery(GET_TODOS);</span><span id="cb29" class="ms mt iq mo b gy nv mv l mw mx">console.log('data', data)</span><span id="5da6" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">if (loading) return &lt;p&gt;loading...&lt;/p&gt;</strong></span><span id="294c" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">if (error) return &lt;p&gt;{error.message}&lt;/p&gt;</strong></span><span id="9586" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="8c50" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span><span id="aa79" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="1466" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="5212" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="fa7b" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="2dc9" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="20da" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="f4ec" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="acc0" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="5e89" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="f23a" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="6422" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="9072" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="9db6" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="1e0f" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="5ccc" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="ec9c" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="list-group mt-4"&gt;</span><span id="8f24" class="ms mt iq mo b gy nv mv l mw mx">{</span><span id="1f45" class="ms mt iq mo b gy nv mv l mw mx">data?.getTodos.map(todo =&gt; (</span><span id="bea5" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="1390" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="9116" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;h5 className="mb-1"&gt;{todo.title}&lt;/h5&gt;</strong></span><span id="0781" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;small&gt;{moment(todo.date).format("MMM Do YY")}&lt;/small&gt;</strong></span><span id="406d" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="0967" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;p className="mb-1"&gt;{todo.detail} &lt;/p&gt;</strong></span><span id="907f" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;&lt;svg  width="16" height="16" fill="currentColor" className="bi bi-trash" viewBox="0 0 16 16"&gt;</span><span id="4845" class="ms mt iq mo b gy nv mv l mw mx">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</span><span id="b1c4" class="ms mt iq mo b gy nv mv l mw mx">&lt;path fillRule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</span><span id="11d4" class="ms mt iq mo b gy nv mv l mw mx">&lt;/svg&gt;&lt;/small&gt;</span><span id="733e" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="880a" class="ms mt iq mo b gy nv mv l mw mx">))</span><span id="8c56" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="3c0d" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="4e05" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="691c" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="aab0" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="dea4" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><h2 id="04cb" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">将输入表单和列表项提取到组件</h2><p id="04a2" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">创建一个组件文件夹。在组件文件夹中，我们添加了AddTodo.js和Todo.js</p><p id="1ec6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在AddTodo.js下</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="fe2b" class="ms mt iq mo b gy mu mv l mw mx">import React from 'react'</span><span id="9e52" class="ms mt iq mo b gy nv mv l mw mx">const AddTodos = () =&gt; {</span><span id="b9ac" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="ef45" class="ms mt iq mo b gy nv mv l mw mx">&lt;form&gt;</span><span id="e7f4" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="2bbd" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="befd" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter title" /&gt;</span><span id="e075" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="4171" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="fc7f" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="c9ee" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="d683" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="0447" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="3828" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="feb6" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" className="form-control" placeholder="Password" /&gt;</span><span id="356f" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="1a3a" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="3d41" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="a122" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="ed1c" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="fe3e" class="ms mt iq mo b gy nv mv l mw mx">export default AddTodos</span></pre><p id="2b2b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Todo.js下，我们从moment导入moment。移除App.js中的力矩，因为我们不需要App.js中的力矩</p><p id="54ea" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们析构道具来获得标题、细节和日期。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="8617" class="ms mt iq mo b gy mu mv l mw mx">import React from 'react'</span><span id="d7d5" class="ms mt iq mo b gy nv mv l mw mx">import moment from 'moment';</span><span id="bb01" class="ms mt iq mo b gy nv mv l mw mx">const Todo = (<strong class="mo ir">{ title, detail, date }</strong>) =&gt; {</span><span id="9187" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="455e" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="ff31" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="6bd9" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;h5 className="mb-1"&gt;{title}&lt;/h5&gt;</strong></span><span id="b89a" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;small&gt;{moment(date).format("MMM Do YY")}&lt;/small&gt;</strong></span><span id="db97" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="c0bf" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;p className="mb-1"&gt;{detail} &lt;/p&gt;</strong></span><span id="be61" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;&lt;svg  width="16" height="16" fill="currentColor" className="bi bi-trash" viewBox="0 0 16 16"&gt;</span><span id="82e9" class="ms mt iq mo b gy nv mv l mw mx">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</span><span id="62b1" class="ms mt iq mo b gy nv mv l mw mx">&lt;path fillRule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</span><span id="a1bd" class="ms mt iq mo b gy nv mv l mw mx">&lt;/svg&gt;&lt;/small&gt;</span><span id="03ce" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="d1b1" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="4c23" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="ae29" class="ms mt iq mo b gy nv mv l mw mx">export default Todo</span></pre><p id="5ed0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Inside App.js</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="0599" class="ms mt iq mo b gy mu mv l mw mx">import './App.css';</span><span id="86a3" class="ms mt iq mo b gy nv mv l mw mx">import { GET_TODOS } from './graphql/Query';</span><span id="9385" class="ms mt iq mo b gy nv mv l mw mx">import { useQuery, useMutation } from '@apollo/client'</span><span id="c663" class="ms mt iq mo b gy nv mv l mw mx">import AddTodos from './components/AddTodos';</span><span id="a0e8" class="ms mt iq mo b gy nv mv l mw mx">import Todo from './components/Todo';</span><span id="052d" class="ms mt iq mo b gy nv mv l mw mx">function App() {</span><span id="41a3" class="ms mt iq mo b gy nv mv l mw mx">const { loading, error, data } = useQuery(GET_TODOS);</span><span id="3537" class="ms mt iq mo b gy nv mv l mw mx">console.log('data', data)</span><span id="7075" class="ms mt iq mo b gy nv mv l mw mx">if (loading) return &lt;p&gt;loading...&lt;/p&gt;</span><span id="a477" class="ms mt iq mo b gy nv mv l mw mx">if (error) return &lt;p&gt;{error.message}&lt;/p&gt;</span><span id="846c" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="207f" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span><span id="576e" class="ms mt iq mo b gy nv mv l mw mx">&lt;AddTodos /&gt;</span><span id="f8f9" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="list-group mt-4"&gt;</span><span id="37b6" class="ms mt iq mo b gy nv mv l mw mx">{</span><span id="e63f" class="ms mt iq mo b gy nv mv l mw mx">data?.getTodos.map(todo =&gt; (&lt;Todo key={todo.id}</span><span id="0902" class="ms mt iq mo b gy nv mv l mw mx">title={todo.title}</span><span id="626f" class="ms mt iq mo b gy nv mv l mw mx">detail={todo.detail}</span><span id="ecdc" class="ms mt iq mo b gy nv mv l mw mx">date={todo.date}</span><span id="4b3f" class="ms mt iq mo b gy nv mv l mw mx">/&gt;)</span><span id="8f57" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="68c3" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="8ecc" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="7e20" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="0fc9" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="6874" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="6af1" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><p id="9e9a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果一切正常，网络应该像以前一样没有任何错误。</p><h2 id="be6d" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">创建待办事项</h2><p id="c52a" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">转到Mutation.js</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="dad7" class="ms mt iq mo b gy mu mv l mw mx">import { gql } from '@apollo/client'</span><span id="2d48" class="ms mt iq mo b gy nv mv l mw mx">export const ADD_TODO = gql`</span><span id="147f" class="ms mt iq mo b gy nv mv l mw mx">mutation addTodo($title:String,$detail:String,$date:Date){</span><span id="1acd" class="ms mt iq mo b gy nv mv l mw mx">addTodo(title:$title,detail:$detail,date:$date){</span><span id="6350" class="ms mt iq mo b gy nv mv l mw mx">id</span><span id="3fd8" class="ms mt iq mo b gy nv mv l mw mx">title</span><span id="4c8f" class="ms mt iq mo b gy nv mv l mw mx">detail</span><span id="c804" class="ms mt iq mo b gy nv mv l mw mx">date</span><span id="76c4" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="c55b" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="f6d5" class="ms mt iq mo b gy nv mv l mw mx">`</span></pre><p id="6aa9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到AddTodo.js，导入useMutation，然后从ADD_TODO获取AddTodo。</p><p id="151f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建onSubmit函数，从e.target.elements中析构标题、细节和日期。</p><p id="e459" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加标题等于title.value、细节等于detail.value、日期等于date.value的todo。添加todo后，使用refetch查询来重新提取最新的todo列表。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="5110" class="ms mt iq mo b gy mu mv l mw mx">import React, {useState} from 'react';</span><span id="73a0" class="ms mt iq mo b gy nv mv l mw mx">import { useMutation } from '@apollo/client';</span><span id="a85d" class="ms mt iq mo b gy nv mv l mw mx">import { ADD_TODO } from '../graphql/Mutation';</span><span id="fb59" class="ms mt iq mo b gy nv mv l mw mx">import { GET_TODOS } from '../graphql/Query';</span><span id="8d99" class="ms mt iq mo b gy nv mv l mw mx">const AddTodos = () =&gt; {<br/>  const [todo, setTodo] = useState({</span><span id="4dea" class="ms mt iq mo b gy nv mv l mw mx">title: '',</span><span id="b686" class="ms mt iq mo b gy nv mv l mw mx">detail: '',</span><span id="6575" class="ms mt iq mo b gy nv mv l mw mx">date: ''</span><span id="4e10" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="153a" class="ms mt iq mo b gy nv mv l mw mx">const [addTodo] = useMutation(ADD_TODO)</span><span id="1a6d" class="ms mt iq mo b gy nv mv l mw mx">const onSubmit = e =&gt; {</span><span id="e36c" class="ms mt iq mo b gy nv mv l mw mx">e.preventDefault();</span><span id="4536" class="ms mt iq mo b gy nv mv l mw mx">addTodo({</span><span id="2f03" class="ms mt iq mo b gy nv mv l mw mx">variables: {</span><span id="860b" class="ms mt iq mo b gy nv mv l mw mx">title: todo.title,</span><span id="a26b" class="ms mt iq mo b gy nv mv l mw mx">detail: todo.detail,</span><span id="2901" class="ms mt iq mo b gy nv mv l mw mx">date: todo.date</span><span id="b51f" class="ms mt iq mo b gy nv mv l mw mx">},</span><span id="3c6f" class="ms mt iq mo b gy nv mv l mw mx">refetchQueries: [</span><span id="7a75" class="ms mt iq mo b gy nv mv l mw mx">{ query: GET_TODOS }</span><span id="1933" class="ms mt iq mo b gy nv mv l mw mx">]</span><span id="e106" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="f52e" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="a74b" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="95a2" class="ms mt iq mo b gy nv mv l mw mx">&lt;form onSubmit={onSubmit}&gt;</span><span id="3e01" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="6170" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="d888" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="title" className="form-control" placeholder="Enter title"</span><span id="2718" class="ms mt iq mo b gy nv mv l mw mx">value={todo.title}</span><span id="6391" class="ms mt iq mo b gy nv mv l mw mx">onChange={e =&gt; setTodo({ ...todo, title: e.target.value })}</span><span id="01cc" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="cf43" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="9e24" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="8317" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="4138" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="detail" className="form-control" placeholder="Enter Detail"</span><span id="72f9" class="ms mt iq mo b gy nv mv l mw mx">value={todo.detail}</span><span id="c7b0" class="ms mt iq mo b gy nv mv l mw mx">onChange={e =&gt; setTodo({ ...todo, detail: e.target.value })}</span><span id="28d1" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="c778" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="690d" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="b41e" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date{moment(todo.date).format('yyyy-MM-DD')}&lt;/label&gt;</span><span id="4f67" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" name="date" className="form-control"</span><span id="c9dd" class="ms mt iq mo b gy nv mv l mw mx">value={moment(todo.date).format('yyyy-MM-DD')}</span><span id="fa19" class="ms mt iq mo b gy nv mv l mw mx">onChange={e =&gt; setTodo({ ...todo, date: e.target.value })}</span><span id="2b5d" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="16e5" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="6e18" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="aa44" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="1041" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="98d3" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="ff4c" class="ms mt iq mo b gy nv mv l mw mx">export default AddTodos</span></pre><p id="924a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们输入标题、细节和日期，它将显示在列表中</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi op"><img src="../Images/d0bdc6278ccb07053efe8752095332ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*65-Whtdtag2C7Nifyi1yxg.png"/></div></div></figure><p id="9dfd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们忘记了输入标题，您将看到以下错误。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oq"><img src="../Images/63356fad2fd3f76f4d2701f37f61bb80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYKOExxYjWCOqnWluwfULw.png"/></div></div></figure><p id="93e3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">输入if子句检查标题是否有值。如果没有输入值，则提示消息“请输入标题”。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="06e3" class="ms mt iq mo b gy mu mv l mw mx">const onSubmit = e =&gt; {</span><span id="3dc2" class="ms mt iq mo b gy nv mv l mw mx">e.preventDefault();</span><span id="cff8" class="ms mt iq mo b gy nv mv l mw mx">const { title, detail, date } = e.target.elements;</span><span id="aa24" class="ms mt iq mo b gy nv mv l mw mx">if (!title.value) {</span><span id="cae6" class="ms mt iq mo b gy nv mv l mw mx">alert('Please enter a title')</span><span id="81e0" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="010b" class="ms mt iq mo b gy nv mv l mw mx">addTodo({</span><span id="ae3a" class="ms mt iq mo b gy nv mv l mw mx">variables: {</span><span id="aa73" class="ms mt iq mo b gy nv mv l mw mx">title: title.value,</span><span id="cf05" class="ms mt iq mo b gy nv mv l mw mx">detail: detail.value,</span><span id="c036" class="ms mt iq mo b gy nv mv l mw mx">date: date.value</span><span id="8cca" class="ms mt iq mo b gy nv mv l mw mx">},</span><span id="08c7" class="ms mt iq mo b gy nv mv l mw mx">refetchQueries: [</span><span id="50e7" class="ms mt iq mo b gy nv mv l mw mx">{ query: GET_TODOS }</span><span id="7ab8" class="ms mt iq mo b gy nv mv l mw mx">]</span><span id="0ba7" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="9220" class="ms mt iq mo b gy nv mv l mw mx">}</span></pre><h2 id="4bd4" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">删除特定的待办事项</h2><p id="7458" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">首先，我们需要去Mutation.js</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="f63f" class="ms mt iq mo b gy mu mv l mw mx">export const DELETE_TODO = gql`</span><span id="559f" class="ms mt iq mo b gy nv mv l mw mx">mutation deleteTodo($id: ID) {</span><span id="b315" class="ms mt iq mo b gy nv mv l mw mx">deleteTodo(id: $id)</span><span id="8991" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="5e48" class="ms mt iq mo b gy nv mv l mw mx">`;</span></pre><p id="e6c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们转到组件Todo.js，导入useMutation，从Mutation.js导入DELETE_TODO，从Query.js导入GET_TODOS。</p><p id="f2ba" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获取deleteTodo，然后在我们的“removeTodo”函数中使用它。</p><p id="9508" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们移除特定的todo之后，我们重新获取最新的todos数组。</p><p id="f36d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们完成“removeTodo”函数后，我们希望将它绑定到删除按钮。但是在继续之前，我们需要将id属性添加到Todo组件中。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="54dc" class="ms mt iq mo b gy mu mv l mw mx">data?.getTodos.map(todo =&gt; (&lt;Todo key={todo.id}</span><span id="04b2" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">id={todo.id}</strong></span><span id="08bf" class="ms mt iq mo b gy nv mv l mw mx">title={todo.title}</span><span id="bc48" class="ms mt iq mo b gy nv mv l mw mx">detail={todo.detail}</span><span id="625f" class="ms mt iq mo b gy nv mv l mw mx">date={todo.date}</span><span id="7be3" class="ms mt iq mo b gy nv mv l mw mx">/&gt;)</span></pre><p id="8fc5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以将它绑定到垃圾桶图标。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="54b8" class="ms mt iq mo b gy mu mv l mw mx">&lt;small onClick={()=&gt;removeTodo(id)}</span><span id="6e54" class="ms mt iq mo b gy nv mv l mw mx">import React from 'react'</span><span id="f305" class="ms mt iq mo b gy nv mv l mw mx">import moment from 'moment';</span><span id="9834" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { useMutation } from '@apollo/client';</strong></span><span id="51c7" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { DELETE_TODO } from '../graphql/Mutation';</strong></span><span id="a726" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { GET_TODOS } from '../graphql/Query';</strong></span><span id="6b1f" class="ms mt iq mo b gy nv mv l mw mx">const Todo = ({ <strong class="mo ir">id</strong>,title, detail, date }) =&gt; {</span><span id="c838" class="ms mt iq mo b gy nv mv l mw mx">console.log('id',id)</span><span id="9055" class="ms mt iq mo b gy nv mv l mw mx">const [deleteTodo ] = useMutation(DELETE_TODO);</span><span id="c853" class="ms mt iq mo b gy nv mv l mw mx">const removeTodo=(id)=&gt;{</span><span id="31f5" class="ms mt iq mo b gy nv mv l mw mx">console.log('delete id',id)</span><span id="c0ca" class="ms mt iq mo b gy nv mv l mw mx">deleteTodo({</span><span id="4f3d" class="ms mt iq mo b gy nv mv l mw mx">variables:{</span><span id="8330" class="ms mt iq mo b gy nv mv l mw mx">id:id</span><span id="f793" class="ms mt iq mo b gy nv mv l mw mx">} ,refetchQueries: [</span><span id="7be6" class="ms mt iq mo b gy nv mv l mw mx">{ query: GET_TODOS }</span><span id="dc4a" class="ms mt iq mo b gy nv mv l mw mx">]</span><span id="be4f" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="a9ed" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="b30a" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="4a77" class="ms mt iq mo b gy nv mv l mw mx">&lt;a href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="c7bc" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="e7d2" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;{title}&lt;/h5&gt;</span><span id="6565" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;{moment(date).format("MMM Do YY")}&lt;/small&gt;</span><span id="5e7f" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="2458" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;{detail} &lt;/p&gt;</span><span id="60e9" class="ms mt iq mo b gy nv mv l mw mx">&lt;small onClick={()=&gt;removeTodo(id)}&gt;&lt;svg  width="16" height="16" fill="currentColor" className="bi bi-trash" viewBox="0 0 16 16"&gt;</span><span id="b41c" class="ms mt iq mo b gy nv mv l mw mx">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</span><span id="607c" class="ms mt iq mo b gy nv mv l mw mx">&lt;path fillRule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</span><span id="92fb" class="ms mt iq mo b gy nv mv l mw mx">&lt;/svg&gt;&lt;/small&gt;</span><span id="7a40" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span><span id="4e23" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="8993" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="5ba7" class="ms mt iq mo b gy nv mv l mw mx">export default Todo</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi or"><img src="../Images/d0df0ca6f71e7442d97116745dc81ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/1*4PQYB_Kb9p6gPwasV3I6JA.gif"/></div></figure><h2 id="52b1" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">检测是否处于编辑模式</h2><p id="12cf" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">我们需要从“react”导入useEffect。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="e372" class="ms mt iq mo b gy mu mv l mw mx">useEffect(() =&gt; {</span><span id="89ad" class="ms mt iq mo b gy nv mv l mw mx">const checkIfClickedOutside = e =&gt; {</span><span id="ed62" class="ms mt iq mo b gy nv mv l mw mx">if (!inputAreaRef.current.contains(e.target)) {</span><span id="4930" class="ms mt iq mo b gy nv mv l mw mx">console.log('outside input area')</span><span id="fff3" class="ms mt iq mo b gy nv mv l mw mx">// setselectedId(0)</span><span id="e191" class="ms mt iq mo b gy nv mv l mw mx">} else {</span><span id="4496" class="ms mt iq mo b gy nv mv l mw mx">console.log('inside input area')</span><span id="df7a" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="cb8a" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="f1eb" class="ms mt iq mo b gy nv mv l mw mx">document.addEventListener("mousedown", checkIfClickedOutside)</span><span id="5a55" class="ms mt iq mo b gy nv mv l mw mx">return () =&gt; {</span><span id="f728" class="ms mt iq mo b gy nv mv l mw mx">// Cleanup the event listener</span><span id="c6b8" class="ms mt iq mo b gy nv mv l mw mx">document.removeEventListener("mousedown", checkIfClickedOutside)</span><span id="9958" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="4edb" class="ms mt iq mo b gy nv mv l mw mx">}, [])</span></pre><p id="46b8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将inputAreaRef绑定到表单</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="8d2d" class="ms mt iq mo b gy mu mv l mw mx">&lt;form onSubmit={onSubmit} ref={inputAreaRef}&gt;</span><span id="2734" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="e2fb" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="2da0" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="title" className="form-control" placeholder="Enter title" /&gt;</span><span id="6461" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="7f33" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="2f6e" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="ea6a" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="detail" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="5d80" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="0f99" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="c99a" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="16d0" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" name="date" className="form-control" placeholder="Password" /&gt;</span><span id="3c65" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="0c65" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit&lt;/button&gt;</span><span id="b57a" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span></pre><p id="8d20" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当点击输入区域时，你应该在控制台内看到“内部输入区域”,当点击其他区域时，你应该看到“外部输入区域”。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi os"><img src="../Images/e2d367de2f9101a5753a5bd121a7a1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h_Z6x5aDFB_Jbe516b11bw.png"/></div></div></figure><h2 id="53fd" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">使用TodoContext存储所选的Id</h2><p id="6cb4" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">在“src”文件夹中创建TodoContext.js</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="8a5c" class="ms mt iq mo b gy mu mv l mw mx">import {createContext} from 'react';</span><span id="e654" class="ms mt iq mo b gy nv mv l mw mx">export const TodoContext = createContext(null)</span></pre><p id="0d98" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到App.js</p><p id="0512" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">导入TodoContext和useState</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="eb93" class="ms mt iq mo b gy mu mv l mw mx">import {TodoContext} from './TodoContext';</span><span id="f20b" class="ms mt iq mo b gy nv mv l mw mx">import { useState } from 'react';</span></pre><p id="f3cf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">设置selectedId的默认值为0。然后我们使用TodoContext。提供者包装整个应用程序，传递selectedId和setselectedId。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="704e" class="ms mt iq mo b gy mu mv l mw mx">function App() {</span><span id="e4b6" class="ms mt iq mo b gy nv mv l mw mx">const { loading, error, data } = useQuery(GET_TODOS);</span><span id="c38b" class="ms mt iq mo b gy nv mv l mw mx">console.log('data', data)</span><span id="41e9" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">const [selectedId, setselectedId] = useState(0)</strong></span><span id="29f3" class="ms mt iq mo b gy nv mv l mw mx">if (loading) return &lt;p&gt;loading...&lt;/p&gt;</span><span id="ea65" class="ms mt iq mo b gy nv mv l mw mx">if (error) return &lt;p&gt;{error.message}&lt;/p&gt;</span><span id="b21c" class="ms mt iq mo b gy nv mv l mw mx">return (</span><span id="8428" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;TodoContext.Provider value={{selectedId,setselectedId}}&gt;</strong></span><span id="e4aa" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="container todobox"&gt;</span><span id="b433" class="ms mt iq mo b gy nv mv l mw mx">&lt;AddTodos /&gt;</span><span id="c3c8" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="list-group mt-4"&gt;</span><span id="5e0b" class="ms mt iq mo b gy nv mv l mw mx">{</span><span id="664e" class="ms mt iq mo b gy nv mv l mw mx">data?.getTodos.map(todo =&gt; (&lt;Todo key={todo.id}</span><span id="2a8d" class="ms mt iq mo b gy nv mv l mw mx">id={todo.id}</span><span id="74a9" class="ms mt iq mo b gy nv mv l mw mx">title={todo.title}</span><span id="d9c9" class="ms mt iq mo b gy nv mv l mw mx">detail={todo.detail}</span><span id="315e" class="ms mt iq mo b gy nv mv l mw mx">date={todo.date}</span><span id="cbe4" class="ms mt iq mo b gy nv mv l mw mx">/&gt;)</span><span id="f433" class="ms mt iq mo b gy nv mv l mw mx">)</span><span id="3572" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="78eb" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="1446" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="ea64" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;/TodoContext.Provider&gt;</strong></span><span id="cee8" class="ms mt iq mo b gy nv mv l mw mx">);</span><span id="0555" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="4fa1" class="ms mt iq mo b gy nv mv l mw mx">export default App;</span></pre><p id="f5f6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，无论是在AddTodos组件还是Todo组件，我们都可以获得selectedId值。</p><p id="8ae0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">位于AddTodos component.js</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="cc58" class="ms mt iq mo b gy mu mv l mw mx">import React, { useContext, useEffect, useRef } from 'react';</span><span id="406b" class="ms mt iq mo b gy nv mv l mw mx">import { useMutation } from '@apollo/client';</span><span id="25a8" class="ms mt iq mo b gy nv mv l mw mx">import { ADD_TODO } from '../graphql/Mutation';</span><span id="9019" class="ms mt iq mo b gy nv mv l mw mx">import { GET_TODOS } from '../graphql/Query';</span><span id="b290" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { TodoContext } from '../TodoContext';</strong></span><span id="4e19" class="ms mt iq mo b gy nv mv l mw mx">const AddTodos = () =&gt; {</span><span id="cf4a" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">const { selectedId, setselectedId } = useContext(TodoContext)</strong></span><span id="dc0e" class="ms mt iq mo b gy nv mv l mw mx">const [addTodo] = useMutation(ADD_TODO)</span><span id="e0c3" class="ms mt iq mo b gy nv mv l mw mx">const inputAreaRef = useRef();</span><span id="87d9" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;{title} | {selectedId}&lt;/h5&gt;</span></pre><p id="98df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Todos component.js上，</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="3a41" class="ms mt iq mo b gy mu mv l mw mx">import React, { useContext } from 'react'</span><span id="c8a7" class="ms mt iq mo b gy nv mv l mw mx">import moment from 'moment';</span><span id="2591" class="ms mt iq mo b gy nv mv l mw mx">import { useMutation } from '@apollo/client';</span><span id="7735" class="ms mt iq mo b gy nv mv l mw mx">import { DELETE_TODO } from '../graphql/Mutation';</span><span id="ca1e" class="ms mt iq mo b gy nv mv l mw mx">import { GET_TODOS } from '../graphql/Query';</span><span id="48a1" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">import { TodoContext } from '../TodoContext';</strong></span><span id="a4f7" class="ms mt iq mo b gy nv mv l mw mx">const Todo = ({ id,title, detail, date }) =&gt; {</span><span id="564e" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">const { selectedId, setselectedId } = useContext(TodoContext)</strong></span><span id="e68a" class="ms mt iq mo b gy nv mv l mw mx">const [deleteTodo ] = useMutation(DELETE_TODO);</span><span id="e5e0" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;Submit | {selectedId}&lt;/button&gt;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/580a2ae8d4dac2dbed6c826aca08c50f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1166/format:webp/1*XN-k6NCJSUnfvDfWfca03Q.png"/></div></figure><h2 id="56a8" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">更改用户界面并依赖于选定的ID</h2><p id="0e5a" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">现在我们要用selectedID的值来改变UI，如果值为0，那么按钮文本为“Submit”，否则为“Update”。</p><p id="f299" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在AddTodos.js中，我们检查用户是否在输入区域外单击，我们将selectedId设置为0。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="532b" class="ms mt iq mo b gy mu mv l mw mx">useEffect(() =&gt; {</span><span id="4381" class="ms mt iq mo b gy nv mv l mw mx">const checkIfClickedOutside = e =&gt; {</span><span id="ca4f" class="ms mt iq mo b gy nv mv l mw mx">if (!inputAreaRef.current.contains(e.target)) {</span><span id="85b7" class="ms mt iq mo b gy nv mv l mw mx">console.log('outside input area')</span><span id="5724" class="ms mt iq mo b gy nv mv l mw mx">setselectedId(0)</span><span id="04e9" class="ms mt iq mo b gy nv mv l mw mx">} else {</span><span id="e775" class="ms mt iq mo b gy nv mv l mw mx">console.log('inside input area')</span><span id="0920" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="1ace" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="f463" class="ms mt iq mo b gy nv mv l mw mx">document.addEventListener("mousedown", checkIfClickedOutside)</span><span id="4ac2" class="ms mt iq mo b gy nv mv l mw mx">return () =&gt; {</span><span id="afae" class="ms mt iq mo b gy nv mv l mw mx">// Cleanup the event listener</span><span id="1b47" class="ms mt iq mo b gy nv mv l mw mx">document.removeEventListener("mousedown", checkIfClickedOutside)</span><span id="8e04" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="ae14" class="ms mt iq mo b gy nv mv l mw mx">}, [])</span><span id="0661" class="ms mt iq mo b gy nv mv l mw mx">&lt;form onSubmit={onSubmit} ref={inputAreaRef}&gt;</span><span id="fff2" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="9dd7" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="e546" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="title" className="form-control" placeholder="Enter title" /&gt;</span><span id="5a67" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="7951" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="3c3b" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="62f9" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="detail" className="form-control" placeholder="Enter Detail" /&gt;</span><span id="1e6f" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="a009" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="0b5e" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date&lt;/label&gt;</span><span id="d7c8" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" name="date" className="form-control" placeholder="Password" /&gt;</span><span id="df20" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="b6e7" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">&lt;button type="submit" className="btn btn-primary"&gt;{(selectedId==0)?'Add':'Update'}&lt;/button&gt;</strong></span><span id="2563" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span><span id="073d" class="ms mt iq mo b gy nv mv l mw mx">)</span></pre><p id="72c4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Todos.js里面，</p><p id="bf08" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当用户单击列表项时，它会将selectedId设置为该todo。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="f4a0" class="ms mt iq mo b gy mu mv l mw mx"><strong class="mo ir">&lt;a onClick={()=&gt;setselectedId(id)}</strong></span><span id="90e6" class="ms mt iq mo b gy nv mv l mw mx">href="#" className="list-group-item list-group-item-action flex-column align-items-start "&gt;</span><span id="208f" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="d-flex w-100 justify-content-between"&gt;</span><span id="4619" class="ms mt iq mo b gy nv mv l mw mx">&lt;h5 className="mb-1"&gt;{title} | {selectedId}&lt;/h5&gt;</span><span id="fb2b" class="ms mt iq mo b gy nv mv l mw mx">&lt;small&gt;{moment(date).format("MMM Do YY")}&lt;/small&gt;</span><span id="014e" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="845b" class="ms mt iq mo b gy nv mv l mw mx">&lt;p className="mb-1"&gt;{detail} &lt;/p&gt;</span><span id="59e4" class="ms mt iq mo b gy nv mv l mw mx">&lt;small onClick={()=&gt;removeTodo(id)}&gt;&lt;svg  width="16" height="16" fill="currentColor" className="bi bi-trash" viewBox="0 0 16 16"&gt;</span><span id="3967" class="ms mt iq mo b gy nv mv l mw mx">&lt;path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" /&gt;</span><span id="9b77" class="ms mt iq mo b gy nv mv l mw mx">&lt;path fillRule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" /&gt;</span><span id="d169" class="ms mt iq mo b gy nv mv l mw mx">&lt;/svg&gt;&lt;/small&gt;</span><span id="043d" class="ms mt iq mo b gy nv mv l mw mx">&lt;/a&gt;</span></pre><h2 id="8ddb" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">创建更新功能</h2><p id="7196" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">在Mutation.js中，创建一个常量UPDATE_TODO</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="a5d7" class="ms mt iq mo b gy mu mv l mw mx">export const UPDATE_TODO = gql`</span><span id="1ab6" class="ms mt iq mo b gy nv mv l mw mx">mutation updateTodo($id:String,$title:String,$detail:String,$date:Date){</span><span id="bb7e" class="ms mt iq mo b gy nv mv l mw mx">updateTodo(</span><span id="7d50" class="ms mt iq mo b gy nv mv l mw mx">id:$id</span><span id="d354" class="ms mt iq mo b gy nv mv l mw mx">,title:$title,</span><span id="908c" class="ms mt iq mo b gy nv mv l mw mx">detail:$detail,</span><span id="d836" class="ms mt iq mo b gy nv mv l mw mx">date:$date</span><span id="23d3" class="ms mt iq mo b gy nv mv l mw mx">){</span><span id="4d15" class="ms mt iq mo b gy nv mv l mw mx">id</span><span id="75cf" class="ms mt iq mo b gy nv mv l mw mx">title</span><span id="3d0a" class="ms mt iq mo b gy nv mv l mw mx">detail</span><span id="aebd" class="ms mt iq mo b gy nv mv l mw mx">date</span><span id="ac4c" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="00be" class="ms mt iq mo b gy nv mv l mw mx">}</span></pre><p id="618f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到AddTodos.js，从突变导入UPDATE_TODO</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="0cf3" class="ms mt iq mo b gy mu mv l mw mx">import { ADD_TODO, UPDATE_TODO } from '../graphql/Mutation';</span></pre><p id="3c51" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从UPDATE_TODO中获取updateTodo</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="e806" class="ms mt iq mo b gy mu mv l mw mx">const [updateTodo] = useMutation(UPDATE_TODO)</span></pre><p id="c16c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将修改添加到onSubmit函数中，如果selectedId等于0，则意味着它正在提交新的todo，因此我们使用addTodo变异，否则我们使用updateTodo变异。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="4b3c" class="ms mt iq mo b gy mu mv l mw mx">const onSubmit = e =&gt; {</span><span id="6802" class="ms mt iq mo b gy nv mv l mw mx">e.preventDefault();</span><span id="55a6" class="ms mt iq mo b gy nv mv l mw mx">const { title, detail, date } = e.target.elements;</span><span id="8c1c" class="ms mt iq mo b gy nv mv l mw mx">if (!title.value) {</span><span id="a46d" class="ms mt iq mo b gy nv mv l mw mx">alert('Please enter a title')</span><span id="f082" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="d2ba" class="ms mt iq mo b gy nv mv l mw mx">if (selectedId == 0) {</span><span id="594a" class="ms mt iq mo b gy nv mv l mw mx">addTodo({</span><span id="aa34" class="ms mt iq mo b gy nv mv l mw mx">variables: {</span><span id="2407" class="ms mt iq mo b gy nv mv l mw mx">title: title.value,</span><span id="0556" class="ms mt iq mo b gy nv mv l mw mx">detail: detail.value,</span><span id="19e2" class="ms mt iq mo b gy nv mv l mw mx">date: date.value</span><span id="b33f" class="ms mt iq mo b gy nv mv l mw mx">},</span><span id="a1b9" class="ms mt iq mo b gy nv mv l mw mx">refetchQueries: [</span><span id="e004" class="ms mt iq mo b gy nv mv l mw mx">{ query: GET_TODOS }</span><span id="1ac7" class="ms mt iq mo b gy nv mv l mw mx">]</span><span id="7444" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="6203" class="ms mt iq mo b gy nv mv l mw mx">} else {</span><span id="87a3" class="ms mt iq mo b gy nv mv l mw mx">updateTodo({</span><span id="c9ad" class="ms mt iq mo b gy nv mv l mw mx">variables: {</span><span id="beb9" class="ms mt iq mo b gy nv mv l mw mx">id: selectedId,</span><span id="8697" class="ms mt iq mo b gy nv mv l mw mx">title: title.value,</span><span id="d110" class="ms mt iq mo b gy nv mv l mw mx">detail: detail.value,</span><span id="2414" class="ms mt iq mo b gy nv mv l mw mx">date: date.value</span><span id="d98b" class="ms mt iq mo b gy nv mv l mw mx">},</span><span id="032f" class="ms mt iq mo b gy nv mv l mw mx">refetchQueries: [</span><span id="59f4" class="ms mt iq mo b gy nv mv l mw mx">{ query: GET_TODOS }</span><span id="142b" class="ms mt iq mo b gy nv mv l mw mx">]</span><span id="2f08" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="78da" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="39df" class="ms mt iq mo b gy nv mv l mw mx">}</span></pre><p id="27f0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们测试它，在我们点击一个todo之后，然后如果我们在输入域中输入一些东西，它将更新那个特定的todo。</p><h2 id="ab20" class="ms mt iq bd mz na nb dn nc nd ne dp nf ko ng nh ni ks nj nk nl kw nm nn no np bi translated">获取单个待办事项</h2><p id="e719" class="pw-post-body-paragraph kf kg iq kh b ki nq jr kk kl nr ju kn ko ns kq kr ks nt ku kv kw nu ky kz la ij bi translated">现在，您可以看到，如果我们单击列表项，我们希望该todo的值应该显示在输入框中，所以现在我们希望获得特定todo的值</p><p id="939e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在Query.js创建一个getTodo查询。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="1c7e" class="ms mt iq mo b gy mu mv l mw mx">export const GET_TODO = gql`</span><span id="7067" class="ms mt iq mo b gy nv mv l mw mx">query getTodo($id:ID){</span><span id="d03d" class="ms mt iq mo b gy nv mv l mw mx">getTodo(id:$id){</span><span id="0343" class="ms mt iq mo b gy nv mv l mw mx">id</span><span id="dd98" class="ms mt iq mo b gy nv mv l mw mx">title</span><span id="7643" class="ms mt iq mo b gy nv mv l mw mx">detail</span><span id="8041" class="ms mt iq mo b gy nv mv l mw mx">date</span><span id="f7b4" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="4554" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="0cd2" class="ms mt iq mo b gy nv mv l mw mx">`</span></pre><p id="39fd" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个名为“todo”的状态来存储该todo的值。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="3812" class="ms mt iq mo b gy mu mv l mw mx">const [todo, setTodo] = useState({</span><span id="d32c" class="ms mt iq mo b gy nv mv l mw mx">title: '',</span><span id="afea" class="ms mt iq mo b gy nv mv l mw mx">detail: '',</span><span id="3ded" class="ms mt iq mo b gy nv mv l mw mx">date: ''</span><span id="0978" class="ms mt iq mo b gy nv mv l mw mx">})</span></pre><p id="478b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在AddTodo.js中，使用useMutation提取updateTodo。获得数据后，我们将todo设置为data.getTodo。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="eade" class="ms mt iq mo b gy mu mv l mw mx">const { loading, error, data } = useQuery(GET_TODO, {</span><span id="6e4c" class="ms mt iq mo b gy nv mv l mw mx">variables: { id: selectedId }, onCompleted: (data) =&gt; setTodo(data.getTodo)</span><span id="cf15" class="ms mt iq mo b gy nv mv l mw mx">});</span></pre><p id="3801" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在表单中，</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="23e5" class="ms mt iq mo b gy mu mv l mw mx">return (</span><span id="6baf" class="ms mt iq mo b gy nv mv l mw mx">&lt;form onSubmit={onSubmit} ref={inputAreaRef}&gt;</span><span id="313a" class="ms mt iq mo b gy nv mv l mw mx">&lt;pre&gt;{JSON.stringify(todo)}&lt;/pre&gt;</span><span id="5a2e" class="ms mt iq mo b gy nv mv l mw mx">&lt;p&gt;{moment(todo.date).format('yyyy-MM-DD')}&lt;/p&gt;</span><span id="1cc5" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="fd6e" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Title&lt;/label&gt;</span><span id="fe36" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="title" className="form-control" placeholder="Enter title"</span><span id="3dd5" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">value={todo.title}</strong></span><span id="1681" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">onChange={e =&gt; setTodo({ ...todo, title: e.target.value })}</strong></span><span id="2c12" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="6478" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="67f1" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="4e78" class="ms mt iq mo b gy nv mv l mw mx">&lt;label&gt;Detail&lt;/label&gt;</span><span id="d7d8" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="text" name="detail" className="form-control" placeholder="Enter Detail"</span><span id="892b" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">value={todo.detail}</strong></span><span id="f56e" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">onChange={e =&gt; setTodo({ ...todo, detail: e.target.value })}</strong></span><span id="3472" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="a5d1" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="fa54" class="ms mt iq mo b gy nv mv l mw mx">&lt;div className="form-group mb-3"&gt;</span><span id="d449" class="ms mt iq mo b gy nv mv l mw mx">&lt;label &gt;Date{moment(todo.date).format('yyyy-MM-DD')}&lt;/label&gt;</span><span id="80f8" class="ms mt iq mo b gy nv mv l mw mx">&lt;input type="date" name="date" className="form-control"</span><span id="c45a" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">value={moment(todo.date).format('yyyy-MM-DD')}</strong></span><span id="ec4d" class="ms mt iq mo b gy nv mv l mw mx"><strong class="mo ir">onChange={e =&gt; setTodo({ ...todo, date: e.target.value })}</strong></span><span id="fb82" class="ms mt iq mo b gy nv mv l mw mx">/&gt;</span><span id="1b10" class="ms mt iq mo b gy nv mv l mw mx">&lt;/div&gt;</span><span id="1bcc" class="ms mt iq mo b gy nv mv l mw mx">&lt;button type="submit" className="btn btn-primary"&gt;{(selectedId == 0) ? 'Add' : 'Update'}&lt;/button&gt;</span><span id="8f6b" class="ms mt iq mo b gy nv mv l mw mx">&lt;/form&gt;</span></pre><p id="bb2d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果不在编辑模式下，我们也想清除所有的东西。所以在useEffect中，如果用户在输入区域之外点击。我们将把todo的所有属性重置为空字符串。</p><pre class="ld le lf lg gt mn mo mp mq aw mr bi"><span id="f982" class="ms mt iq mo b gy mu mv l mw mx">useEffect(() =&gt; {</span><span id="f819" class="ms mt iq mo b gy nv mv l mw mx">const checkIfClickedOutside = e =&gt; {</span><span id="9302" class="ms mt iq mo b gy nv mv l mw mx">if (!inputAreaRef.current.contains(e.target)) {</span><span id="5c87" class="ms mt iq mo b gy nv mv l mw mx">console.log('outside input area')</span><span id="1b87" class="ms mt iq mo b gy nv mv l mw mx">setselectedId(0)</span><span id="cc72" class="ms mt iq mo b gy nv mv l mw mx">setTodo({</span><span id="d751" class="ms mt iq mo b gy nv mv l mw mx">title: '',</span><span id="72e2" class="ms mt iq mo b gy nv mv l mw mx">detail: '',</span><span id="0106" class="ms mt iq mo b gy nv mv l mw mx">date: ''</span><span id="5cdb" class="ms mt iq mo b gy nv mv l mw mx">})</span><span id="b5bb" class="ms mt iq mo b gy nv mv l mw mx">} else {</span><span id="751c" class="ms mt iq mo b gy nv mv l mw mx">console.log('inside input area')</span><span id="3735" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="5494" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="883b" class="ms mt iq mo b gy nv mv l mw mx">document.addEventListener("mousedown", checkIfClickedOutside)</span><span id="4eb0" class="ms mt iq mo b gy nv mv l mw mx">return () =&gt; {</span><span id="52c0" class="ms mt iq mo b gy nv mv l mw mx">// Cleanup the event listener</span><span id="0076" class="ms mt iq mo b gy nv mv l mw mx">document.removeEventListener("mousedown", checkIfClickedOutside)</span><span id="7c44" class="ms mt iq mo b gy nv mv l mw mx">}</span><span id="6185" class="ms mt iq mo b gy nv mv l mw mx">}, [])</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi ou"><img src="../Images/12cf6ef2468963b6af1bc347688c76e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tgTEAJ9fELSc1Ar1aWlxew.png"/></div></div><figcaption class="ol om gj gh gi on oo bd b be z dk">example of showing the value when clicking on one of the item.</figcaption></figure><p id="5f7f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">关注我们:<a class="ae lb" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad课程</a>，<a class="ae lb" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae lb" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae lb" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae lb" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae lb" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae lb" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae lb" href="https://jp-ex.io/register?code=S6Gcvun6" rel="noopener ugc nofollow" target="_blank"> JPEX </a></p></div></div>    
</body>
</html>
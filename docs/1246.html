<html>
<head>
<title>7 Ways to Debug Jest Tests in Terminal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨ç»ˆç«¯ä¸­è°ƒè¯•Jestæµ‹è¯•çš„7ç§æ–¹æ³•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/7-ways-to-debug-jest-tests-in-terminal-400eec99281a?source=collection_archive---------25-----------------------#2021-03-15">https://javascript.plainenglish.io/7-ways-to-debug-jest-tests-in-terminal-400eec99281a?source=collection_archive---------25-----------------------#2021-03-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="aa7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ¬¢è¿ï¼Œä½ å¯èƒ½å·²ç»æœç´¢äº†å¦‚ä½•ç”¨Jestè°ƒè¯•ä½ çš„æµ‹è¯•ã€‚æˆ‘å¾ˆé«˜å…´ä½ å‘ç°äº†è¿™ç¯‡åšæ–‡ï¼Œå› ä¸ºä½ å°†è¦å­¦ä¹ åœ¨ä½ çš„ç»ˆç«¯å†…éƒ¨è°ƒè¯•Jestæµ‹è¯•çš„7ç§æ–¹æ³•ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼Œä½¿ç”¨åƒVSCodeæˆ–WebStormè¿™æ ·çš„IDEå¯ä»¥å¾ˆå®¹æ˜“åœ°åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä¸ä½¿ç”¨å®ƒä»¬å‘¢ï¼Ÿä½ å¦‚ä½•ç€æ‰‹è°ƒè¯•å®ƒä»¬å‘¢ï¼Ÿå‰§é€è­¦æŠ¥â€”ä¸å«<code class="fe kl km kn ko b">console.log()</code>ã€‚</p><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/5ff3ea56b95cdf06f929cc707d58fc0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vi0Zx5SzwSR5AfyHgJ5Nhw.jpeg"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk"><em class="lf">Photo by </em><a class="ae lg" href="https://unsplash.com/@nikolalsvk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><em class="lf">Nikola Äuza</em></a><em class="lf"> on </em><a class="ae lg" href="https://pragmaticpineapple.com/s/photos/bugs?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><em class="lf">Unsplash</em></a></figcaption></figure><h1 id="fbb3" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">1.æ ‡å‡†æ–¹å¼</h1><p id="eb34" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¦‚æœæ‚¨åœ¨Jestæ–‡æ¡£ä¸­æœç´¢ä¸€ç§æ–¹æ³•ï¼Œå®ƒä¼šå‘Šè¯‰æ‚¨ä»¥ä¸‹ä¿¡æ¯:</p><ul class=""><li id="b8ec" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated">è½¬åˆ°åŸºäºChromiumçš„æµè§ˆå™¨ï¼Œæ‰“å¼€<code class="fe kl km kn ko b">chrome://inspect</code>ã€‚</li><li id="20dc" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated">å¦‚ä¸‹é¢çš„å±å¹•æˆªå›¾æ‰€ç¤ºï¼Œå•å‡»â€œä¸ºèŠ‚ç‚¹æ‰“å¼€ä¸“ç”¨çš„å¼€å‘å·¥å…·â€:</li></ul><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div class="gh gi my"><img src="../Images/14b70c4e6d591526f4a97023880c3911.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/0*nK1V76WVYYdtKcQ4.png"/></div></figure><ul class=""><li id="4a6a" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated">åœ¨ä½ çš„ä»£ç ä¸­çš„æŸä¸ªåœ°æ–¹æ”¾ä¸€ä¸ª<code class="fe kl km kn ko b">debugger</code>è¯­å¥(æµ‹è¯•æˆ–ç”Ÿäº§ä»£ç )ã€‚</li><li id="e2f3" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated">è¿è¡Œ<code class="fe kl km kn ko b">node --inspect-brk node_modules/.bin/jest --runInBand [any other arguments here]</code>ã€‚</li></ul><p id="9888" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç§ï¼Œæ‚¨çš„æµ‹è¯•åº”è¯¥åœ¨æ‚¨åœ¨æ­¥éª¤2ä¸­æ‰“å¼€çš„DevToolsä¸­çš„è°ƒè¯•å™¨å¤„è¿è¡Œå’Œåœæ­¢ã€‚å®é™…ä¸Šï¼Œç”±äº<code class="fe kl km kn ko b">--inspect-brk</code>ï¼Œè¿™ä¸ªè¿›ç¨‹ä¸€è¿è¡Œå°±ä¼šåœæ­¢ï¼Œä½†æ˜¯æˆ‘ä»¬ç¨åä¼šè®²åˆ°ã€‚</p><p id="db6d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨é¡¹ç›®ä¸­ï¼Œé€šå¸¸ä¸ä½¿ç”¨raw Jestå‘½ä»¤ã€‚æœ‰æ—¶å®ƒè¢«åŒ…è£…åœ¨å…¶ä»–åº“ä¸­ï¼Œæˆ–è€…ä½¿ç”¨ä¸€äº›é¢å¤–çš„é…ç½®æ¥å¯åŠ¨å®ƒã€‚å¦‚æœæ‚¨æ˜¯è¿™ç§æƒ…å†µï¼Œè®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶å¹¶æ‰¾å‡ºä¸åŒçš„æ–¹æ³•æ¥è°ƒè¯•å’Œæ£€æŸ¥æˆ‘ä»¬çš„æµ‹è¯•ã€‚</p><blockquote class="mz na nb"><p id="85e8" class="jn jo nc jp b jq jr js jt ju jv jw jx nd jz ka kb ne kd ke kf nf kh ki kj kk ij bi translated"><em class="iq">ğŸ’¡</em>è®©èŠ‚ç‚¹ä¸“ç”¨çš„DevToolsçª—å£ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œæˆ‘ä»¬å°†ç»§ç»­è¿›è¡Œå…¶ä»–æ–¹å¼çš„è°ƒè¯•ã€‚</p></blockquote><h1 id="e059" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">2.æ²¡æœ‰æœ€åˆçš„é—´æ–­</h1><p id="d717" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¦‚æœä½ çœ‹ä¸€çœ‹ï¼Œè¿™é‡Œçš„å¤§éƒ¨åˆ†é­”æœ¯æ˜¯ç”±èŠ‚ç‚¹æ£€æŸ¥å™¨å®Œæˆçš„ã€‚èŠ‚ç‚¹æ£€æŸ¥å™¨çš„é…·ä¹‹å¤„åœ¨äºï¼Œå½“æ‚¨æ‰§è¡Œ<code class="fe kl km kn ko b">node --inspect</code>æ—¶ï¼ŒNode.jsè¿›ç¨‹ä¼šåœ¨<code class="fe kl km kn ko b">127.0.0.1:9229</code>ç›‘å¬è°ƒè¯•å®¢æˆ·ç«¯ã€‚è¿™ä¸ªå˜åŒ–åœ¨2016å¹´å¾—åˆ°äº†<a class="ae lg" href="https://github.com/nodejs/node/pull/6792" rel="noopener ugc nofollow" target="_blank">çš„å¼•å…¥ã€‚</a>å¹¶å…è®¸æ¯ä¸ªäººè½»æ¾æ£€æŸ¥ä»–ä»¬çš„æµç¨‹ã€‚</p><p id="5bff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">åœ¨å‰ä¸€èŠ‚çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<code class="fe kl km kn ko b">node --inspect-brk ...</code>ã€‚ä½¿ç”¨<code class="fe kl km kn ko b">--inspect-brk</code>æ ‡å¿—å°†åœ¨ç”¨æˆ·ä»£ç å¼€å§‹å‰ä¸­æ–­ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä¸åœ¨ä¹æµ‹è¯•ä¸€å¼€å§‹å°±åœæ­¢ï¼Œåªæ˜¯æ±‚åŠ©äºç®€å•çš„<code class="fe kl km kn ko b">node --inspect</code>ã€‚<code class="fe kl km kn ko b">node --inspect</code>ä¼šåœ¨ä½ æ”¾<code class="fe kl km kn ko b">debugger</code>çš„åœ°æ–¹æ–­è£‚ï¼Œè€Œä¸æ˜¯åœ¨å‘å°„æ—¶ç«‹å³æ–­è£‚ã€‚ä»ç°åœ¨å¼€å§‹æˆ‘ä»¬ç»§ç»­å§ã€‚æˆ‘ä»¬çš„è°ƒè¯•å‘½ä»¤å°†æ˜¯:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="2c73" class="nk li iq ko b gy nl nm l nn no">$ node --inspect node_modules/.bin/jest --runInBand</span></pre><p id="d8d5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç”±äº<code class="fe kl km kn ko b">node_modules</code>ä½ç½®å¯ä»¥ä¾èµ–äºæ“ä½œç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä½¿å®ƒä¸å¯çŸ¥ï¼Œå¹¶ä½¿ç”¨<code class="fe kl km kn ko b">yarn bin</code>æˆ–<code class="fe kl km kn ko b">npm bin</code>ã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å°†åƒè¿™æ ·ä½¿ç”¨<code class="fe kl km kn ko b">npm bin</code>:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="309e" class="nk li iq ko b gy nl nm l nn no">$ node --inspect $(npm bin)/jest --runInBand</span></pre><h1 id="f3fc" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">3.è°ƒè¯•ç±»å‹è„šæœ¬æµ‹è¯•</h1><p id="d8b7" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¦‚æœæ‚¨ç°åœ¨æ­£åœ¨ä½¿ç”¨TypeScriptï¼Œå¦‚æœæ‚¨å°è¯•è¿è¡Œ:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="3446" class="nk li iq ko b gy nl nm l nn no">$ node --inspect $(npm bin)/jest --runInBand</span></pre><p id="2da5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨å¯èƒ½ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸ºTypeScriptæµ‹è¯•æ²¡æœ‰è½¬æ¢æˆJavaScriptã€‚ç¡®ä¿æ‚¨åœ¨<code class="fe kl km kn ko b">jest.config.js</code>ä¸­é…ç½®äº†ç±»ä¼¼äºä»¥ä¸‹é…ç½®çš„Jest:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="82cd" class="nk li iq ko b gy nl nm l nn no">module.exports = {<br/>  roots: ["&lt;rootDir&gt;/src"],<br/>  testMatch: [<br/>    "**/__tests__/**/*.+(ts|tsx|js)",<br/>    "**/?(*.)+(spec|test).+(ts|tsx|js)",<br/>  ],<br/>  transform: {<br/>    "^.+\\.(ts|tsx)$": "ts-jest", // The important part right here<br/>  },<br/>}</span></pre><p id="e2c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ä»¬å‘Šè¯‰Jestä½¿ç”¨<code class="fe kl km kn ko b">ts-jest</code>è½¬æ¢<code class="fe kl km kn ko b">.ts</code>å’Œ<code class="fe kl km kn ko b">.tsx</code>æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰<code class="fe kl km kn ko b">ts-jest</code>ï¼Œå¯ä»¥è£…ä¸Š<code class="fe kl km kn ko b">npm install -D ts-jest</code>ï¼Œåº”è¯¥å°±å¯ä»¥äº†ã€‚æˆ‘åšäº†ä¸€ä¸ªå›è´­æ ·æœ¬ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œè¯•ç”¨<a class="ae lg" href="https://github.com/nikolalsvk/abacus" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p><h1 id="3fbe" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">4.è°ƒè¯•â„¢ï¸çš„æœ€ä½³æ–¹æ³•</h1><p id="108e" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¥½å§ï¼Œæ‰€ä»¥è¿™ä¸€èŠ‚çš„æ ‡é¢˜æ‰¿è¯ºäº†å¾ˆå¤šï¼Œå¤šåŒ…æ¶µã€‚å¦‚æœä½ æ²¡æœ‰å¬è¯´è¿‡Jestæ‰‹è¡¨æ¨¡å¼ï¼Œä½ ä¼šå–œæ¬¢è¿™ä¸ªã€‚å¤§éƒ¨åˆ†æ—¶é—´æˆ‘åœ¨å†™ä»£ç ï¼Œæˆ‘è®©<code class="fe kl km kn ko b">jest --watch</code>è¿è¡Œã€‚ç›‘è§†æ¨¡å¼çš„ä¼˜ç‚¹æ˜¯å®ƒä¼šç›‘è§†æ‚¨æ‰€åšçš„ä»»ä½•æ›´æ”¹ï¼Œå¹¶è¿è¡Œç›¸å…³çš„æµ‹è¯•ã€‚è¦åœ¨ç›‘è§†æ¨¡å¼ä¸‹è°ƒè¯•æµ‹è¯•ï¼Œå¯ä»¥é”®å…¥ä»¥ä¸‹å†…å®¹:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="3d54" class="nk li iq ko b gy nl nm l nn no">$ node --inspect $(npm bin)/jest --watch --no-cache --runInBand</span></pre><p id="31c7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è®©æˆ‘ä»¬åœ¨è¿™é‡Œåˆ†è§£ä¸€ä¸‹ç¬‘è¯çš„è®ºç‚¹:</p><ul class=""><li id="6979" class="mk ml iq jp b jq jr ju jv jy mm kc mn kg mo kk mp mq mr ms bi translated"><code class="fe kl km kn ko b">--watch</code>ä»Jestå¯åŠ¨æ‰‹è¡¨æ¨¡å¼ï¼Œç›¸å½“é…·ã€‚</li><li id="6815" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><code class="fe kl km kn ko b">--no-cache</code>å°†ç¡®ä¿æˆ‘ä»¬çš„ä»£ç è¢«æ­£ç¡®é‡è½½ã€‚æ‚¨å¯ä»¥å°è¯•ä¸ä½¿ç”¨å®ƒï¼Œä½†æ‰‹è¡¨æ¨¡å¼å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œã€‚</li><li id="5812" class="mk ml iq jp b jq mt ju mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><code class="fe kl km kn ko b">--runInBand</code> -å¥½å§ï¼Œè¿™é¢æ——å¸œä»ä¸€å¼€å§‹å°±è·Ÿç€æˆ‘ä»¬ã€‚å®ƒç¡®ä¿æ‰€æœ‰æµ‹è¯•åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿ç»­è¿è¡Œï¼Œè€Œä¸æ˜¯åˆ›å»ºå­è¿›ç¨‹ã€‚æ‹¥æœ‰ä¸€ä¸ªè¿‡ç¨‹ä½¿å¾—<code class="fe kl km kn ko b">node --inspect</code>èƒ½å¤Ÿæ­£ç¡®åœ°â€œæ£€æŸ¥â€æµ‹è¯•ã€‚</li></ul><p id="5056" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ‚¨è¿˜å¯ä»¥ç»„åˆå…¶ä»–Jestå‘½ä»¤ï¼Œå¦‚è¿è¡Œå•ä¸ªæµ‹è¯•:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="1515" class="nk li iq ko b gy nl nm l nn no">$ node --inspect $(npm bin)/jest --runTestsByPath src/index.test.ts --runInBand</span></pre><p id="787e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ä½†æ˜¯ä¸è¦å¿˜è®°é™„åŠ <code class="fe kl km kn ko b">--runInBand</code>æˆ–è€…ä»…ä»…æ˜¯<code class="fe kl km kn ko b">-i</code>æ¥ç¡®ä¿Node.jsæ£€æŸ¥å™¨å‘æŒ¥å®ƒçš„é­”åŠ›ã€‚</p><h1 id="de11" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">5.CRAæ€ä¹ˆæ ·ï¼Ÿ</h1><p id="f503" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¦‚æœä½ ä½¿ç”¨create-react-app (CRA)å¹¶è®©ä½ çš„æµ‹è¯•è„šæœ¬ä½¿ç”¨react-scripts testï¼Œè°ƒè¯•å¯¹ä½ æ¥è¯´ä¼šæœ‰ç‚¹ä¸åŒã€‚æ¨èçš„æ–¹æ³•æ˜¯å‘<code class="fe kl km kn ko b">package.json</code>æ·»åŠ ä¸€ä¸ªæ–°è„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="98cb" class="nk li iq ko b gy nl nm l nn no">"scripts": {<br/>  ...,<br/>  "test:debug": "react-scripts --inspect test --runInBand --no-cache"<br/>}</span></pre><p id="667a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨ï¼Œæ¯å½“ä½ è¿è¡Œ<code class="fe kl km kn ko b">npm run test:debug</code>ï¼ŒJestå°±ä¼šä»¥æ‰‹è¡¨æ¨¡å¼è¿è¡Œï¼Œåœåœ¨ä½ æ”¾<code class="fe kl km kn ko b">debugger</code>çš„åœ°æ–¹ã€‚å½“ç„¶ï¼Œæ‚¨éœ€è¦æ‰“å¼€ä¸€ä¸ªç”¨äºNode.jsçš„ä¸“ç”¨DevToolsï¼Œå°±åƒæˆ‘ä»¬åœ¨ç¬¬ä¸€èŠ‚ä¸­æè¿°çš„é‚£æ ·ã€‚</p><h1 id="70ee" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">6.ä»å‘½ä»¤è¡Œè°ƒè¯•</h1><p id="c4c6" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å¥½äº†ï¼Œç°åœ¨ä½ å·²ç»æœ‰äº†ä½¿ç”¨Chromiumæµè§ˆå™¨å’ŒDevToolsçš„åˆå§‹è°ƒè¯•å™¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æ˜¯å‘½ä»¤è¡Œçˆ±å¥½è€…ï¼Œæ‚¨å¯èƒ½æ­£åœ¨è€ƒè™‘ä¸€ç§ä¸ä½¿ç”¨DevToolsçš„æ–¹æ³•ã€‚å¯¹ä½ æ¥è¯´æ˜¯ä¸ªå¥½æ¶ˆæ¯ï¼Œè¿™æ˜¯å¯ä»¥åšåˆ°çš„ã€‚å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬æœ‰<code class="fe kl km kn ko b">node inspect</code>ä¸ºæˆ‘ä»¬å¯åŠ¨å‘½ä»¤è¡Œè°ƒè¯•å™¨ã€‚å°è¯•è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="0496" class="nk li iq ko b gy nl nm l nn no">$ node inspect $(npm bin)/jest --runInBand</span></pre><p id="e05c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘åœ¨æˆ‘åˆ¶ä½œçš„ç¤ºä¾‹å›è´­ä¸­è¿è¡Œäº†è¿™ä¸ªï¼Œè¿™æ˜¯æˆ‘å¾—åˆ°çš„ç»“æœ:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="690e" class="nk li iq ko b gy nl nm l nn no">$ node inspect $(npm bin)/jest --runInBand<br/>&lt; Debugger listening on ws://127.0.0.1:9229/be2d3410-48ad-46fb-a345-bb37339b5e38<br/>&lt; For help, see: https://nodejs.org/en/docs/inspector<br/>&lt; Debugger attached.<br/>Break on start in node_modules/jest/bin/jest.js:9<br/>  7  */<br/>  8<br/>&gt; 9 const importLocal = require('import-local');<br/> 10<br/> 11 if (!importLocal(__filename)) {<br/>debug&gt;</span></pre><p id="3e47" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ£€æŸ¥å‘˜åœ¨<code class="fe kl km kn ko b">node_modules/jest/bin/jest.js:9</code>å†…çš„ç¬¬ä¸€è¡Œåœäº†ä¸‹æ¥ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡é”®å…¥<code class="fe kl km kn ko b">cont</code>æˆ–<code class="fe kl km kn ko b">c</code>ç»§ç»­è°ƒè¯•:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="c0ca" class="nk li iq ko b gy nl nm l nn no">$ node inspect $(npm bin)/jest --runInBand<br/>&lt; Debugger listening on ws://127.0.0.1:9229/be2d3410-48ad-46fb-a345-bb37339b5e38<br/>&lt; For help, see: https://nodejs.org/en/docs/inspector<br/>&lt; Debugger attached.<br/>Break on start in node_modules/jest/bin/jest.js:9<br/>  7  */<br/>  8<br/>&gt; 9 const importLocal = require('import-local');<br/> 10<br/> 11 if (!importLocal(__filename)) {<br/>debug&gt; cont<br/>break in src/index.test.ts:6<br/>  4 test("add", function () {<br/>  5     var result = index_1.add(1, 2);<br/>&gt; 6     debugger;<br/>  7     expect(result).toEqual(3);<br/>  8 });<br/>debug&gt;</span></pre><p id="09a9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç°åœ¨æ£€æŸ¥å‘˜åœåœ¨äº†æˆ‘ä»¬æµ‹è¯•ä»£ç ä¸­çš„<code class="fe kl km kn ko b">debugger</code>è¯­å¥ã€‚æˆ‘ä»¬å¯ä»¥é”®å…¥<code class="fe kl km kn ko b">help</code>å¹¶ç†Ÿæ‚‰æˆ‘ä»¬å¯ä»¥åœ¨é‚£é‡Œé”®å…¥çš„æ‰€æœ‰å‘½ä»¤ã€‚æˆ‘ä¸ä¼šä¸€ä¸€ä»‹ç»ï¼Œä½†æˆ‘ä¼šæåˆ°<code class="fe kl km kn ko b">repl</code>å‘½ä»¤ã€‚é€šè¿‡åœ¨è°ƒè¯•å™¨ä¸­é”®å…¥<code class="fe kl km kn ko b">repl</code>ï¼Œæ‚¨å°†è¿›å…¥è¯»å–-è¯„ä¼°-æ‰“å°-å¾ªç¯(REPL)æ¨¡å¼ï¼Œåœ¨è¿™é‡Œæ‚¨å¯ä»¥è¯„ä¼°å˜é‡ã€‚å¦‚æœæˆ‘åœ¨æˆ‘çš„ä¾‹å­ä¸­è¿™æ ·åšï¼Œæˆ‘å°†å¾—åˆ°ä»¥ä¸‹ç»“æœ:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="7522" class="nk li iq ko b gy nl nm l nn no">$ node inspect $(npm bin)/jest --runInBand<br/>&lt; Debugger listening on ws://127.0.0.1:9229/be2d3410-48ad-46fb-a345-bb37339b5e38<br/>&lt; For help, see: https://nodejs.org/en/docs/inspector<br/>&lt; Debugger attached.<br/>Break on start in node_modules/jest/bin/jest.js:9<br/>  7  */<br/>  8<br/>&gt; 9 const importLocal = require('import-local');<br/> 10<br/> 11 if (!importLocal(__filename)) {<br/>debug&gt; cont<br/>break in src/index.test.ts:6<br/>  4 test("add", function () {<br/>  5     var result = index_1.add(1, 2);<br/>&gt; 6     debugger;<br/>  7     expect(result).toEqual(3);<br/>  8 });<br/>debug&gt; repl<br/>Press Ctrl + C to leave debug repl<br/>&gt; result<br/>3<br/>&gt;</span></pre><p id="422b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è¿™äº›æ˜¯ä»å‘½ä»¤è¡Œæ£€æŸ¥ä»£ç çš„åŸºç¡€ã€‚å¼€å‘è€…ä½“éªŒ(DX)å¯èƒ½æ²¡æœ‰DevToolsæ‰“å¼€æ—¶çš„ä½“éªŒå¥½ï¼Œåœ¨dev toolsæ‰“å¼€æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡æ‚¬åœåœ¨å˜é‡ä¸Šæ¥è·å¾—å˜é‡çš„å€¼ï¼Œä½†è¿™ä»ç„¶æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚è®©æˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚çœ‹çœ‹å¦‚ä½•ä»å‘½ä»¤è¡Œæ‰“å¼€DevToolsã€‚</p><h1 id="051a" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">7.ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆâ€” ndb</h1><p id="400c" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">ndbæ˜¯ä¸ºNode.jsæ”¹å–„è°ƒè¯•ä½“éªŒçš„åº“ï¼Œä½ å¯ä»¥ç”¨<code class="fe kl km kn ko b">npm install -g ndb</code>å…¨å±€å®‰è£…ï¼Œä¹Ÿå¯ä»¥ç”¨<code class="fe kl km kn ko b">npm install -D ndb</code>æœ¬åœ°å®‰è£…ã€‚æˆ‘åœ¨æˆ‘çš„<a class="ae lg" href="https://github.com/nikolalsvk/abacus" rel="noopener ugc nofollow" target="_blank"> Abacus repo </a>ä¸Šç”¨å…¨å±€å‘½ä»¤è¯•è¿‡ï¼Œæ¯”å¦‚:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="c923" class="nk li iq ko b gy nl nm l nn no">$ ndb $(npm bin)/jest --watch --no-cache --runInBand</span></pre><p id="7e84" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">è€Œä¸”æ•ˆæœå¾ˆå¥½ã€‚ä½ ä¸€è¾“å…¥å®ƒï¼Œå®ƒå°±ä¼šä¸ºä½ æ‰“å¼€DevToolsã€‚å®ƒçš„è¡¨ç°ä¹Ÿæ¯”æ™®é€šçš„<code class="fe kl km kn ko b">node --inspect</code>æ›´å¿«ã€‚ndbçš„ä¼Ÿå¤§ä¹‹å¤„åœ¨äºï¼Œä½ å¯ä»¥è½»æ¾åœ°ä¸º<code class="fe kl km kn ko b">package.json</code>è¿è¡Œä½ çš„è„šæœ¬ã€‚æˆ‘è®¾æ³•è¿è¡Œäº†ä»¥ä¸‹å†…å®¹:</p><pre class="kq kr ks kt gt ng ko nh ni aw nj bi"><span id="f369" class="nk li iq ko b gy nl nm l nn no">$ ndb npm run test -- --watch --no-cache --runInBand</span></pre><p id="3781" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æˆ‘ç›¸ä¿¡ä½¿ç”¨ndbçš„æ–¹æ³•å¯¹é‚£äº›æƒ³ä»å‘½ä»¤è¡Œåšä»»ä½•äº‹æƒ…çš„äººæ¥è¯´æœ€æœ‰å¸å¼•åŠ›ã€‚å®ƒè®©ä½ ä¸ç”¨åœ¨æµè§ˆå™¨ä¸Šæ‰“å¼€DevTools for Node.jsï¼Œndbä¼šå¸®ä½ å®Œæˆã€‚</p><h1 id="bbf6" class="lh li iq bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">æœ€åçš„æƒ³æ³•</h1><p id="dc57" class="pw-post-body-paragraph jn jo iq jp b jq mf js jt ju mg jw jx jy mh ka kb kc mi ke kf kg mj ki kj kk ij bi translated">å°±è¿™æ ·äº†ï¼Œä¼™è®¡ä»¬ã€‚æ‚¨åº”è¯¥èƒ½å¤ŸæŒ‘é€‰è°ƒè¯•Jestæµ‹è¯•çš„æ–¹æ³•ã€‚åœ¨Jestä¸­è°ƒè¯•æµ‹è¯•çš„æƒ³æ³•å›°æ‰°äº†æˆ‘å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œæˆ‘å¾ˆé«˜å…´æˆ‘æ‰¾åˆ°äº†å„ç§è§£å†³æ–¹æ¡ˆï¼Œå¹¶ä¸å¤§å®¶åˆ†äº«ã€‚</p><p id="5bdb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">æ„Ÿè°¢æ”¶å¬ï¼Œè¯·åŠ¡å¿…è®¢é˜…<a class="ae lg" href="https://pragmaticpineapple.com/newsletter" rel="noopener ugc nofollow" target="_blank">æ—¶äº‹é€šè®¯</a>å¹¶åœ¨<a class="ae lg" href="https://twitter.com/nikolalsvk" rel="noopener ugc nofollow" target="_blank">æ¨ç‰¹</a>ä¸Šå…³æ³¨æˆ‘ï¼Œè·å–æ–°çš„åšå®¢å¸–å­å’ŒæŠ€å·§ã€‚å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œå¯ä»¥è€ƒè™‘åœ¨Twitterä¸Šä¸ä½ çš„æœ‹å‹å’ŒåŒäº‹åˆ†äº«:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="ab36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">ç›´åˆ°ä¸‹ä¸€ä¸ªï¼Œå¹²æ¯ã€‚</p></div><div class="ab cl nr ns hu nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ij ik il im in"><p id="5f5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nc">åŸè½½äº2021å¹´3æœˆ15æ—¥https://pragmaticpineapple.com</em><a class="ae lg" href="https://pragmaticpineapple.com/7-ways-to-debug-jest-tests-in-terminal/" rel="noopener ugc nofollow" target="_blank"><em class="nc"/></a><em class="nc">ã€‚</em></p></div></div>    
</body>
</html>
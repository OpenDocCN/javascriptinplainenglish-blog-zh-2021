<html>
<head>
<title>If and If/Else Statements “Considered Harmful”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">If和If/Else语句“被认为有害”</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/if-and-if-else-statements-are-harmful-e387472cf59f?source=collection_archive---------9-----------------------#2021-01-18">https://javascript.plainenglish.io/if-and-if-else-statements-are-harmful-e387472cf59f?source=collection_archive---------9-----------------------#2021-01-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7fa6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">编程错误往往属于某一类。程序员的错误有一个模式，大约90%的错误都属于这个简单的模式。<strong class="jm io">同一条件在代码的多个部分重复出现。</strong>这是一个控制两段或多段不同代码的条件。</p><p id="2a4d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最初看起来并不明显的代码片段，因为它们被<strong class="jm io">时间</strong>的维度所分隔。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/6c09047538cb617842c36ed4d1f11242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z1sSpPE4LqYB_aCj"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@fabrizioverrecchia?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fabrizio Verrecchia</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5028" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">Goto被认为有害</h1><p id="fffe" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">这是一个众所周知的概念，即程序中bug的数量与其中的<code class="fe mc md me mf b">goto</code>语句的数量成正比。当我们看一个我们在代码中描述的程序时，我们看着它，把它想成一系列固定的步骤，但这在大部分bug的情况下是不正确的。</p><p id="4a11" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">第X行，第Y列，我们指着代码说，“看，就是这个！”但是老实说，我们缺少了一些理解的成分，那就是<strong class="jm io">时间</strong>。</p><p id="7341" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们按照调试器的过程，我们会看到有一个<strong class="jm io"> time </strong>元素改变了函数执行的参数。这在使用<code class="fe mc md me mf b">goto</code>语句的代码中尤其可怕。代码开始跳跃。</p><p id="05ae" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">程序员用<code class="fe mc md me mf b">for</code>、<code class="fe mc md me mf b">continue</code>、<code class="fe mc md me mf b">break</code>、三元运算符(<code class="fe mc md me mf b">(x) ? y : z</code>)和<code class="fe mc md me mf b">return</code>语句限制了这些“跳转”的版本。这些概念通常不被认为是有害的，但是有可能无意中用嵌套的<code class="fe mc md me mf b">if</code>语句和<code class="fe mc md me mf b">else</code>语句重现<code class="fe mc md me mf b">goto</code>语句的问题。</p><blockquote class="mg"><p id="48f2" class="mh mi in bd mj mk ml mm mn mo mp kh dk translated"><em class="mq">“时间操作可以创建时间分支。不稳定的空间开口。空间悖论！时间循环！你是想一遍又一遍地重复同样的时刻，还是想永远不存在？”</em></p><p id="09f3" class="mh mi in bd mj mk ml mm mn mo mp kh dk translated"><em class="mq"> —莫尔多男爵，《奇异博士(2016)》</em></p></blockquote><h1 id="8611" class="kz la in bd lb lc ld le lf lg lh li lj lk mr lm ln lo ms lq lr ls mt lu lv lw bi translated">一个函数应该做一件事</h1><p id="f407" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">理想情况下，一个函数应该以可测试的方式做一件事情。如果一个函数中有一个else语句，那么根据定义，它现在不是在做一件事，而是在做另一件事。明白了吗？然后它在做两件事，一件是积极的，另一件是消极的。</p><p id="0361" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">负数应该总是触发默认值返回，这样函数就不会做多件事。为了确定分支是否必要，首先需要进行所有参数的计算。一些额外的代码，以确保代码的工作与这些计算的运营商也可以这样做。</p><p id="ae3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果代码不能一起计算，则需要将错误返回给任何输入的值或返回的默认值(视情况而定)。那些定义条件的设置，而不是功能块的执行，才是应该使用<code class="fe mc md me mf b">if</code>语句的地方。</p><h1 id="a963" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">保护条款，垃圾进垃圾出</h1><p id="fde0" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">编写、编辑或调试代码的人有责任记住代码跳转到的位置、时间、原因以及值。随着复杂性的增加，这增加了人为错误的机会。因此，我们希望通过使不完整或不兼容的值无法继续通过代码流来最小化认知负荷。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mu mv l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Any defect throws an error.</figcaption></figure><p id="9232" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对此的解决方案是，不要试图修改值或分支代码，而是简单地拒绝它。JavaScript没有提供硬类型系统，但是如果使用了一个值，可以用<code class="fe mc md me mf b">if</code>语句和<code class="fe mc md me mf b">typeof</code>来检查它的类型是否正确。然后，在继续并创建新的条件之前，该函数可以以默认值退出。</p><p id="f446" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后计算这些新值，函数应该退出。这个模型中没有else语句，因为代码路由条件只在定义过程中涉及。在这一点上，else是无用的语法。<strong class="jm io">人类程序员不再需要进行与条件相反的心理环境转换。</strong></p><p id="9cf9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">条件越接近程序的入口，不管是函数还是整个程序，它就能越快地解决它认为有问题的东西，并把它转移到它应该流动的地方。</p></div></div>    
</body>
</html>
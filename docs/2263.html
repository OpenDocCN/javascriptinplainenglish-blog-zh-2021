<html>
<head>
<title>Get Kanye West Quotes with Vue.js and Axios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue.js和Axios获取Kanye West报价</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/get-kanye-west-quotes-w-vue-and-axios-cf11e5e3197f?source=collection_archive---------16-----------------------#2021-05-11">https://javascript.plainenglish.io/get-kanye-west-quotes-w-vue-and-axios-cf11e5e3197f?source=collection_archive---------16-----------------------#2021-05-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fe29" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Vue.js初学者指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/693fb744662b4bc82f72100b997aae14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7Qra8ppgQAo4HG6ZQ_B_A.png"/></div></div></figure><blockquote class="kr ks kt"><p id="1fab" class="ku kv kw kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Axios是最流行的Javascript HTTP请求库之一，通常用于调用Vue应用程序内部的API。</p></blockquote><p id="bfbe" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在本文中，我们将在Vue 3应用程序中使用Axios制作一个Kanye West报价生成器。我们不仅将从叶本人那里获得一些深刻的灵感，而且我们将学习如何将我们的Vue应用程序与API连接起来，甚至学习如何使用可重用的API调用更好地组织Vue项目。</p><p id="820a" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">让我们直接进入代码。</p><h2 id="c454" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">设置我们的第一个基本HTTP请求</h2><p id="52c7" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">我们要做的第一件事是在终端中将Axios安装到我们的项目中</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e549" class="lu lv iq mt b gy mx my l mz na">npm install axios</span></pre><p id="987e" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">然后，我们可以进入Vue组件内部，像这样导入axios。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="b935" class="lu lv iq mt b gy mx my l mz na">&lt;script&gt;<br/>import axios from 'axios'<br/><br/>export default {<br/>  setup () {<br/>  <br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="a999" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">接下来，在我们的设置方法中，让我们用Kanye REST API的URL运行<code class="fe nb nc nd mt b">axios.get </code>来获得一个随机报价。之后，我们可以使用一个<code class="fe nb nc nd mt b">Promise.then</code>来等待我们的请求给我们一个响应。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="3ecb" class="lu lv iq mt b gy mx my l mz na">&lt;script&gt;<br/>import axios from 'axios'<br/><br/>export default {<br/>  setup () {<br/>     axios.get('https://api.kanye.rest/').then(response =&gt; {<br/>        // handle response<br/>     })<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="1277" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好了，现在我们从API中得到一个响应，但是让我们来看看它实际上是什么。为此，我们将它存储为一个名为<code class="fe nb nc nd mt b">quote</code>的ref。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="f6b5" class="lu lv iq mt b gy mx my l mz na">&lt;script&gt;<br/>import axios from 'axios'<br/>import { ref } from 'vue'<br/><br/>export default {<br/>  setup () {<br/>     axios.get('https://api.kanye.rest/').then(response =&gt; {<br/>        // handle response<br/>        quote.value = response<br/>     })<br/>     return {<br/>      quote<br/>     }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="53ea" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">最后，让我们在模板中用斜体打印出来，并用引号括起来。当然，我们需要对这段引文进行一些归因。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="5914" class="lu lv iq mt b gy mx my l mz na">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;i&gt;"{{ quote }}"&lt;/i&gt;<br/>    &lt;p&gt;- Kanye West&lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="196f" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好的——让我们看看浏览器里有什么。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/211c046e410ec6e9c372b3f3a0599757.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zHg1mwXY_o-SInA_.png"/></div></div></figure><p id="e71c" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><strong class="kx ir">我们可以在这里看到我们的报价，但是还有所有这些额外的信息，比如我们请求的响应代码。</strong></p><p id="d3a5" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">对于我们的Kanye报价生成器，我们只对这个<code class="fe nb nc nd mt b">data.quote</code>值感兴趣——所以回到我们的脚本部分，让我们指定我们想要访问<code class="fe nb nc nd mt b">response</code>上的哪个属性。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="32b6" class="lu lv iq mt b gy mx my l mz na">axios.get('https://api.kanye.rest/').then(response =&gt; {<br/>        // handle response<br/>        quote.value = response.data.quote<br/>})</span></pre><p id="3803" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好的，如果我们回去，我们会看到我们只得到报价。太棒了。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/7bb00f5fbfcb79c7a3fd0731857a6d51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mKdVUMDspNQVDh7R.png"/></div></div></figure><h2 id="c6a1" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">将Axios与async/await配合使用</h2><p id="7c1a" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">我们在Vue应用中使用Axios的另一种方式是使用<code class="fe nb nc nd mt b">async</code> / <code class="fe nb nc nd mt b">await</code>模式。</p><p id="88fc" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在setup中，让我们从注释掉当前的GET代码并创建一个名为<code class="fe nb nc nd mt b">loadQuote</code>的异步方法开始。在内部，我们可以使用相同的<code class="fe nb nc nd mt b">axios.get</code>方法，但是这次我们想使用<code class="fe nb nc nd mt b">async</code>来等待它完成，然后将结果存储在一个名为<code class="fe nb nc nd mt b">response</code>的常量中。</p><p id="2ba6" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">然后，我们再一次设置<code class="fe nb nc nd mt b">quote</code>的值。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="00f2" class="lu lv iq mt b gy mx my l mz na">const loadQuote = async () =&gt; {<br/>      const response = await KanyeAPI.getQuote()<br/>      quote.value = response.data.quote<br/>}</span></pre><p id="c199" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">就是这样。如果我们看看我们的应用程序，它的工作方式完全相同，但是在我们的代码中，我们使用的是async/await模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/607b3e1177316f4037acbea88c6de8b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ydy8-27mz9kk285w.png"/></div></div></figure><p id="0d60" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">太棒了。</p><h2 id="5fd3" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">Axios中的错误处理</h2><p id="1204" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">在async-await模式中，我们可以通过用<code class="fe nb nc nd mt b">try</code>和<code class="fe nb nc nd mt b">catch</code>包围我们的API调用来添加错误处理。就是这样。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="b6b6" class="lu lv iq mt b gy mx my l mz na">try {<br/>        const response = await KanyeAPI.getQuote()<br/>        quote.value = response.data.quote<br/>} catch (err) {<br/>        console.log(err)<br/>}</span></pre><p id="2539" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">使用原始的promises语法，我们可以在API调用后添加一个<code class="fe nb nc nd mt b">.catch</code>来捕获来自请求的任何错误。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="a2b7" class="lu lv iq mt b gy mx my l mz na">axios.get('https://api.kanye.rest/')<br/>      .then(response =&gt; {<br/>        // handle response<br/>        quote.value = response.data.quote<br/>      }).catch(err =&gt; {<br/>      console.log(err)<br/>})</span></pre><h2 id="8368" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">发送发布请求</h2><p id="23ce" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">现在我们知道了如何用Axios发送GET请求，让我们看看如何发送POST请求。</p><p id="ea16" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">为了在本教程中做到这一点，我们将使用<a class="ae nf" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> JSONPlaceholder模拟API调用</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/715a2cd42b98cc162770ba058fb2d503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*u0yd0k-E6gYiFJNM.png"/></div></div></figure><p id="f4c7" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">如果我们查看他们的<a class="ae nf" href="https://jsonplaceholder.typicode.com/guide/" rel="noopener ugc nofollow" target="_blank">文档</a>，他们会给我们一个<code class="fe nb nc nd mt b">/posts </code> POST请求。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/9b3c1fc2d9b8a8d2d989e7306f1938c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fTGiCpDfdXL68282.png"/></div></div></figure><p id="c2d5" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好的——让我们制作一个触发API调用的按钮。在我们的模板中，让我们制作一个按钮，上面写着<em class="kw">“创建帖子”</em>，当它被点击时，它调用一个叫做<code class="fe nb nc nd mt b">createPost</code>的方法。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="9818" class="lu lv iq mt b gy mx my l mz na">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;i&gt;"{{ quote }}"&lt;/i&gt;<br/>    &lt;p&gt;- Kanye West&lt;/p&gt;<br/>    &lt;p&gt;<br/>      &lt;button @click="createPost"&gt;Create Post&lt;/button&gt;<br/>    &lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="66df" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好的——我们可以开始写我们的脚本，创建这个<code class="fe nb nc nd mt b">createPost</code>方法，并从<code class="fe nb nc nd mt b">setup</code>返回它。</p><p id="ba4a" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">在这个方法中，类似于我们的GET请求，我们只需要说<code class="fe nb nc nd mt b">axios.post</code>，传入我们的URL，也就是<code class="fe nb nc nd mt b">https://jsonplaceholder.typicode.com/posts</code>，然后我们就可以从他们的文档中复制并粘贴占位符数据。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="818c" class="lu lv iq mt b gy mx my l mz na">const createPost = () =&gt; {<br/>      axios.post('https://jsonplaceholder.typicode.com/posts', JSON.stringify({<br/>          title: 'foo',<br/>          body: 'bar',<br/>          userId: 1,<br/>      })).then(response =&gt; {<br/>        console.log(response)<br/>      })<br/>}</span></pre><p id="a563" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">好吧，让我们试试这个。</p><p id="290d" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">如果我们点击我们的按钮，我们会看到我们的控制台正在记录大量的信息，告诉我们我们的post请求是成功的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ne"><img src="../Images/adeb80a4a0b183f0b88dfeced3d59752.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*I3FU6gyZbQIhGKuf.png"/></div></div></figure><p id="09eb" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">太棒了。</p><h2 id="8610" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">专业技巧:用Axios编写可重用的API调用</h2><p id="323e" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">我在项目中用来帮助组织所有api调用的一个技巧是创建一个包含我的API调用的<code class="fe nb nc nd mt b">src/services</code>文件夹。</p><p id="c666" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">这些文件有两种类型:</p><ul class=""><li id="7824" class="ng nh iq kx b ky kz lb lc lr ni ls nj lt nk lq nl nm nn no bi translated"><code class="fe nb nc nd mt b">API.js</code>–创建Axios实例的文件，该实例定义了将用于所有路线的<code class="fe nb nc nd mt b">baseURL</code></li><li id="c946" class="ng nh iq kx b ky np lb nq lr nr ls ns lt nt lq nl nm nn no bi translated"><code class="fe nb nc nd mt b"><em class="kw">{specific functionality}</em>API.js</code>–更具体的文件，可用于将api调用组织成<strong class="kx ir">可重用模块</strong></li></ul><p id="c1ec" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">这有几个好处。首先，通过创建一个用于创建axios实例的<code class="fe nb nc nd mt b">API.js</code>文件，这意味着您的基本URL被设置在一个地方——这意味着如果您想在dev和prod服务器之间切换，<strong class="kx ir">您只需更改该文件中的代码。</strong></p><p id="e5a5" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">因此，让我们创建我们的<code class="fe nb nc nd mt b">services/API.js</code>文件，并将我们的Axios baseURL设置为Kanye REST API的默认值，除非我们传入另一个值。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ab26" class="lu lv iq mt b gy mx my l mz na">import axios from 'axios'<br/><br/>export default(url='https://api.kanye.rest') =&gt; {<br/>    return axios.create({<br/>        baseURL: url,<br/>    })<br/>}</span></pre><p id="d36d" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">这就是那个文件，接下来让我们制作一个<code class="fe nb nc nd mt b">KanyeAPI.js</code>文件和<code class="fe nb nc nd mt b">import API from './API'</code>。这里，我们希望导出不同的API调用。</p><p id="b057" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">调用<code class="fe nb nc nd mt b">API()</code>给了我们一个Axios实例，我们可以在其上调用<code class="fe nb nc nd mt b">.get</code>或<code class="fe nb nc nd mt b">.post</code>！这是得到我们随机报价的代码。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e9b8" class="lu lv iq mt b gy mx my l mz na">import API from './API'<br/><br/>export default {<br/>    getQuote() {<br/>        return API().get('/')<br/>    },<br/>}</span></pre><p id="7cb8" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">然后，在<code class="fe nb nc nd mt b">App.vue</code>中，让我们的组件通过可重用的API调用使用这个新文件，而不是自己创建Axios。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="9420" class="lu lv iq mt b gy mx my l mz na">const loadQuote = async () =&gt; {<br/>      try {<br/>        const response = await KanyeAPI.getQuote() // &lt;--- THIS LINE<br/>        quote.value = response.data.quote<br/>      } catch (err) {<br/>        console.log(err)<br/>      }<br/>}</span></pre><p id="024d" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">就是这样！如果我们加载我们的应用程序，我们仍然可以完美地加载报价。</p><p id="e016" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><strong class="kx ir">现在，让我们把这个我们的</strong> <code class="fe nb nc nd mt b"><strong class="kx ir">createPost</strong></code> <strong class="kx ir">移入它自己的可重用方法。</strong></p><p id="4295" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">回到<code class="fe nb nc nd mt b">KanyeAPI.js</code>，让我们将<code class="fe nb nc nd mt b">createPost</code>添加到导出默认值中，这将把post请求的数据作为参数传递给我们的HTT请求。</p><p id="99ce" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">类似于我们的GET请求，我们想要返回我们的API来获取一个axios实例，但是这次我们需要覆盖默认的URL值并传入我们的JSONplaceholder url。然后，我们可以像以前一样调用Axios post。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="0e67" class="lu lv iq mt b gy mx my l mz na">export default {<br/>    getQuote() {<br/>        return API().get('/')<br/>    },<br/>    createPost(data) {<br/>        return API('https://jsonplaceholder.typicode.com/').post('/posts', data)<br/>    }<br/>}</span></pre><p id="ea38" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><strong class="kx ir">就这么简单。</strong></p><p id="01a2" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">回到<code class="fe nb nc nd mt b">App.vue</code>，我们可以这样调用我们的新post方法。</p><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="6a45" class="lu lv iq mt b gy mx my l mz na">const createPost = () =&gt; {<br/>      const response = await KanyeAPI.createPost(JSON.stringify({<br/>          title: 'foo',<br/>          body: 'bar',<br/>          userId: 1,<br/>      }))<br/><br/>      console.log(response)<br/>}</span></pre><p id="b9f0" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">现在，当我们点击我们的按钮时，我们将看到我们专用的API文件正在工作——给我们一个201代码，意味着我们有一个成功的post。</p><h2 id="fe70" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">就是这样！</h2><p id="e7e4" class="pw-post-body-paragraph ku kv iq kx b ky mn jr la lb mo ju ld lr mp lg lh ls mq lk ll lt mr lo lp lq ij bi translated">将我们的API调用从这些Vue组件中转移到它们自己的文件中的好处是，我们现在可以在应用程序中的任何地方使用这些API调用。它让我们创建更多可重用和可伸缩的代码。</p><p id="975a" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated">希望这对你有所帮助，祝你编码愉快！</p><h2 id="0d92" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lr md me mf ls mg mh mi lt mj mk ml mm bi translated">完成Vue和Axios代码</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="d0ca" class="lu lv iq mt b gy mx my l mz na">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;i&gt;"{{ quote }}"&lt;/i&gt;<br/>    &lt;p&gt;- Kanye West&lt;/p&gt;<br/>    &lt;p&gt;<br/>      &lt;button @click="createPost"&gt;Create Post&lt;/button&gt;<br/>    &lt;/p&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;<br/><br/>&lt;script&gt;<br/>import axios from 'axios'<br/>import { ref } from 'vue'<br/>import KanyeAPI from './services/KanyeAPI'<br/>export default {<br/>  setup () {<br/><br/>    const quote = ref('')<br/><br/>    const loadQuote = async () =&gt; {<br/>      try {<br/>        const response = await KanyeAPI.getQuote()<br/>        quote.value = response.data.quote<br/>      } catch (err) {<br/>        console.log(err)<br/>      }<br/>    }<br/><br/>    loadQuote()<br/>    <br/>    // axios.get('https://api.kanye.rest/')<br/>    //   .then(response =&gt; {<br/>    //     // handle response<br/>    //     quote.value = response.data.quote<br/>    //   }).catch(err =&gt; {<br/>    //   console.log(err)<br/>    // })<br/><br/>    const createPost = () =&gt; {<br/>      const response = await KanyeAPI.createPost(JSON.stringify({<br/>          title: 'foo',<br/>          body: 'bar',<br/>          userId: 1,<br/>      }))<br/><br/>      console.log(response)<br/>      // axios.post('https://jsonplaceholder.typicode.com/posts', JSON.stringify({<br/>      //     title: 'foo',<br/>      //     body: 'bar',<br/>      //     userId: 1,<br/>      // })).then(response =&gt; {<br/>      //   console.log(response)<br/>      // })<br/><br/>      <br/>    }<br/>    <br/>    return {<br/>      createPost,<br/>      quote<br/>    }<br/>  }<br/>}<br/>&lt;/script&gt;<br/><br/>&lt;style&gt;<br/>#app {<br/>  font-family: Avenir, Helvetica, Arial, sans-serif;<br/>  -webkit-font-smoothing: antialiased;<br/>  -moz-osx-font-smoothing: grayscale;<br/>  text-align: center;<br/>  color: #2c3e50;<br/>  margin-top: 60px;<br/>}<br/>&lt;/style&gt;</span><span id="6cd1" class="lu lv iq mt b gy nu my l mz na">import axios from 'axios'<br/><br/>export default(url='https://api.kanye.rest') =&gt; {<br/>    return axios.create({<br/>        baseURL: url,<br/>    })<br/>}</span><span id="c1b6" class="lu lv iq mt b gy nu my l mz na">import API from './API'<br/><br/>export default {<br/>    getQuote() {<br/>        return API().get('/')<br/>    },<br/>    createPost(data) {<br/>        return API('https://jsonplaceholder.typicode.com/').post('/posts', data)<br/>    }<br/>}</span></pre><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="6a1f" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><a class="ae nf" href="https://learnvue.co/vue-3-essentials-cheatsheet/" rel="noopener ugc nofollow" target="_blank">如果你有兴趣了解更多关于Vue 3的知识，请下载我的免费Vue 3备忘单，里面有一些基本知识，比如组合API、Vue 3模板语法和事件处理。</a></p><p id="9047" class="pw-post-body-paragraph ku kv iq kx b ky kz jr la lb lc ju ld lr lf lg lh ls lj lk ll lt ln lo lp lq ij bi translated"><em class="kw">更多内容请看</em><a class="ae nf" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="kw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a Recycling Bin Finder With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React创建一个回收站查找器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-recycling-bin-finder-with-react-ba08cf09bda5?source=collection_archive---------18-----------------------#2021-08-09">https://javascript.plainenglish.io/building-a-recycling-bin-finder-with-react-ba08cf09bda5?source=collection_archive---------18-----------------------#2021-08-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="ecb6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">用React、Node.js和Kakao Maps API构建的首尔公共垃圾桶和回收站查找器。</em></p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/9c81a94cd664200eb95712a569bc46ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UnnhxkYXRU6FE9OPHYR7uw.png"/></div></div></figure><h1 id="377d" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">关于🚮</h1><p id="26e7" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">我今年夏天完成的Sseuregi Club 是一个<strong class="jm io">移动优先的React web应用</strong>，它可以找到用户的当前位置，并显示附近的公共回收和垃圾箱。然后，用户可以选择一个箱柜，并获取到该位置的方向。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/b172836de2b40f1a0870a82b9d00a6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4L7kfGcsDfzizBtD7Ki6Ww.png"/></div></div></figure><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi lz"><img src="../Images/ffcffa9f486025385ad0a05abea5e770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stShzhe12uM8Kbbi8pgedQ.png"/></div></div></figure><p id="43d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">目前，全市大约有80个垃圾箱，但我希望随着应用程序的增长，这个数字会增加。</p><h1 id="c308" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">这个概念💡</h1><p id="d252" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">任何一个在城市中行走的人，在某个时候都经历过一个共同的问题:<strong class="jm io"> <em class="ki">我到底可以在哪里扔掉东西？我想开发一个应用程序，可以帮助用户在城市中外出时找到公共垃圾和回收箱。</em></strong></p><p id="0b05" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过一点研究，我发现Kakao(韩国软件巨头)为他们流行的地图应用<strong class="jm io"> Kakao Maps </strong>的软件提供了<a class="ae ly" href="https://apis.map.kakao.com/" rel="noopener ugc nofollow" target="_blank">一个开放的web API </a>。虽然API没有为公共垃圾容器提供任何位置，但我认为这将是我的项目的一个很好的起点，并决定开始。</p><h1 id="430c" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">技术👨🏼‍💻</h1><p id="b39c" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">这个项目的完整代码可以在我的GitHub上的<a class="ae ly" href="https://github.com/dunleavyjack/Sseuregi-Club-V2" rel="noopener ugc nofollow" target="_blank">这里</a>找到。它由以下部分组成:</p><ul class=""><li id="d060" class="ma mb in jm b jn jo jr js jv mc jz md kd me kh mf mg mh mi bi translated"><strong class="jm io">做出反应</strong></li><li id="b9c6" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io">React-路由器</strong></li><li id="ad86" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io">Kakao地图API </strong></li><li id="749b" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io"> Axios </strong>(针对API请求)</li><li id="4dd1" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io">柏树</strong>(用于UI测试)</li><li id="58a1" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io">图马</strong>(用于设计UI)</li><li id="3b57" class="ma mb in jm b jn mj jr mk jv ml jz mm kd mn kh mf mg mh mi bi translated"><strong class="jm io"> Vercel </strong>(用于部署)</li></ul><h1 id="80c1" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">该计划👨‍🔬</h1><p id="e77a" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">首先，程序使用<strong class="jm io"> HTML5地理定位</strong>找到用户的当前坐标。然后锁定该位置，并以该点为中心创建地图。我还使用了一个动画来创建一个从整个城市的大地图“放大”的效果。</p><p id="c3a3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，当地图被放大时，计算用户离每个箱的距离(该距离在本地存储有<strong class="jm io">经度</strong>和<strong class="jm io">纬度</strong>)。这是通过编程在两点之间画一条不可见的线，然后求出这条线的距离来实现的。</p><pre class="kk kl km kn gt mo mp mq mr aw ms bi"><span id="6633" class="mt kw in mp b gy mu mv l mw mx">// Draw an 'invisible' line to each bin from user location</span><span id="863e" class="mt kw in mp b gy my mv l mw mx">let line = new kakao.maps.Polyline({</span><span id="9568" class="mt kw in mp b gy my mv l mw mx">    map: map,</span><span id="de3c" class="mt kw in mp b gy my mv l mw mx">    path: [userPosition, binPosition],</span><span id="7e80" class="mt kw in mp b gy my mv l mw mx">    strokeOpacity: 0, // Makes line invisible</span><span id="070d" class="mt kw in mp b gy my mv l mw mx">});<br/></span><span id="638b" class="mt kw in mp b gy my mv l mw mx">// Get length of each line to find distance from user</span><span id="a502" class="mt kw in mp b gy my mv l mw mx">let lineLength = Math.round(line.getLength());</span></pre><p id="2d17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，程序决定那个箱子是否离用户足够近，以将其标记为附近。在这种情况下，距离被设置为用户周围800米的半径，并且使用<code class="fe mz na nb mp b">useState()</code>钩保存附近箱子的总量。</p><pre class="kk kl km kn gt mo mp mq mr aw ms bi"><span id="e57e" class="mt kw in mp b gy mu mv l mw mx">// Check if bin is nearby</span><span id="1a21" class="mt kw in mp b gy my mv l mw mx">if (lineLength &lt; 800) {</span><span id="f83f" class="mt kw in mp b gy my mv l mw mx">    setNearbyBins((prevCount) =&gt; prevCount + 1);</span></pre><p id="a328" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该程序还会跟踪每个垃圾箱是回收还是只放垃圾，如下所示:</p><pre class="kk kl km kn gt mo mp mq mr aw ms bi"><span id="9818" class="mt kw in mp b gy mu mv l mw mx">// Check if nearby bin is recyling or trash</span><span id="a896" class="mt kw in mp b gy my mv l mw mx">if (bin.recycling) {</span><span id="ed45" class="mt kw in mp b gy my mv l mw mx">    setRecyclingBinCount(</span><span id="74b7" class="mt kw in mp b gy my mv l mw mx">        (prevCount) =&gt; prevCount + 1</span><span id="4144" class="mt kw in mp b gy my mv l mw mx">    );</span><span id="de23" class="mt kw in mp b gy my mv l mw mx">} else {</span><span id="aa6f" class="mt kw in mp b gy my mv l mw mx">    setTrashBinCount((prevCount) =&gt; prevCount + 1);</span><span id="e6f2" class="mt kw in mp b gy my mv l mw mx">}</span></pre><p id="d9ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，向每个标记添加一个“click”事件监听器，当用户选择它时，它会启动一个关于该媒体夹的信息窗口。该窗口包括垃圾箱与用户的距离，是否是垃圾或回收，以及查看其位置方向的选项。</p><p id="0dce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，一旦每个垃圾箱都被映射，附近垃圾箱的总数以及回收垃圾箱和垃圾专用垃圾箱的数量都被传递到一个定制的<code class="fe mz na nb mp b">&lt;InfoPanel /&gt;</code>组件中，并显示在UI中。</p><pre class="kk kl km kn gt mo mp mq mr aw ms bi"><span id="614f" class="mt kw in mp b gy mu mv l mw mx">&lt;InfoPanel</span><span id="366e" class="mt kw in mp b gy my mv l mw mx">    nearby={nearbyBins}</span><span id="ffd1" class="mt kw in mp b gy my mv l mw mx">    nearbyTrash={trashBinCount}</span><span id="e5dc" class="mt kw in mp b gy my mv l mw mx">    nearbyRecycling={recyclingBinCount}</span><span id="becd" class="mt kw in mp b gy my mv l mw mx">/&gt;</span></pre><h1 id="7c40" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">收集数据🚴‍♂️</h1><p id="eca4" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">该项目的一个早期障碍是首尔没有垃圾和回收容器的公共数据库。我花了一些时间浏览该市及其不同市辖区的政府网站，但什么也没找到。</p><p id="a7c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相反，应用程序中每个垃圾箱的数据是使用自行车和地理定位应用程序收集的。我会找到一个垃圾箱，用手机上的应用程序锁定坐标。后来，我会在家里把数据添加到我机器上的程序中。</p><h1 id="3ba5" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">设计用户界面🎨</h1><p id="c2ae" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">我认为这个应用程序的用户可能不在他们的个人电脑前，所以我采用了移动优先的设计。我在桌面和移动布局上都测试了这个程序，但是我为移动用户做了特别的考虑。</p><p id="d63a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我还发现，首先使用<strong class="jm io"> Figma </strong>进行设计可以节省很多时间。我仍然不能相信这个程序是完全免费的，我用它来制作我所有的蓝图和模型。</p><h1 id="51c5" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">挑战和解决方案🚧</h1><h2 id="c899" class="mt kw in bd kx nc nd dn lb ne nf dp lf jv ng nh lj jz ni nj ln kd nk nl lr nm bi translated">了解Kakao地图API</h2><p id="10d4" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">这是我第一次使用Kakao Maps API以及一个自托管项目的地图软件。我很高兴地发现这个API有很好的文档以及一个有用的韩国开发者在线社区，他们也在自己的项目中使用这个API。</p><p id="cbca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">特别是一个开发者写了一个<a class="ae ly" href="https://velog.io/@bearsjelly/series/%EC%9A%B8%EB%A9%B4%EC%84%9C-%EC%B9%B4%EC%B9%B4%EC%98%A4%EB%A7%B5-%EC%A0%81%EC%9A%A9%ED%95%98%EA%B8%B0" rel="noopener ugc nofollow" target="_blank">优秀的教程系列</a>，它真的帮助了我的起步，我强烈推荐它。题目也很大程度上总结了自学的经验:“边哭边应用Kakao地图”。</p><h2 id="c1c9" class="mt kw in bd kx nc nd dn lb ne nf dp lf jv ng nh lj jz ni nj ln kd nk nl lr nm bi translated"><strong class="ak">制作演示</strong></h2><p id="b5bc" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">Kakao Maps只为韩国提供位置服务，所以我意识到一些用户(住在其他地方的朋友或潜在的招聘人员)将无法尝试它。</p><p id="f63a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，我用首尔的固定地址建了一个演示版。虽然演示只是一个演示，但它确实让用户感受到了应用程序是如何工作的。顺便说一下，地点:我的旧公寓。</p><h1 id="0ee2" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">后续步骤🚀</h1><p id="7c7d" class="pw-post-body-paragraph jk jl in jm b jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ig bi translated">我真的希望用户能够将他们自己的垃圾桶和回收站添加到数据库中，目前我正在使用<strong class="jm io"> MongoDB </strong>和<strong class="jm io"> Express </strong>将这变成一个全栈项目。用一点时间，我希望它能越来越好！</p><p id="ef38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki">更多内容尽在</em><a class="ae ly" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ki">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Build Marketplace Site with React and Real-Time Chat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React和实时聊天功能构建市场网站</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-marketplace-site-with-react-and-real-time-chat-amazon-clone-16ec7f96730e?source=collection_archive---------6-----------------------#2021-05-07">https://javascript.plainenglish.io/build-marketplace-site-with-react-and-real-time-chat-amazon-clone-16ec7f96730e?source=collection_archive---------6-----------------------#2021-05-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5c27" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在React中构建一个亚马逊克隆</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/92216ca0faa91bf35f6e055dbe117374.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LNfmBxuM0GfAdRi1KzMRdA.jpeg"/></div></div></figure><h1 id="b5a0" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">先决条件</h1><p id="adb4" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了完成本教程并拥有一个可用的应用程序，可能需要以下方面的一些知识:</p><ul class=""><li id="7fb2" class="mc md in li b lj me lm mf lp mg lt mh lx mi mb mj mk ml mm bi translated">React、React钩子、一般JavaScript的基础知识；</li><li id="219f" class="mc md in li b lj mn lm mo lp mp lt mq lx mr mb mj mk ml mm bi translated"><a class="ae ms" href="https://firebase.google.com" rel="noopener ugc nofollow" target="_blank">火基</a>特性知识；</li><li id="4ad1" class="mc md in li b lj mn lm mo lp mp lt mq lx mr mb mj mk ml mm bi translated"><a class="ae ms" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">TailwindCSS</a>；</li><li id="054c" class="mc md in li b lj mn lm mo lp mp lt mq lx mr mb mj mk ml mm bi translated">任何文本编辑器(我推荐<a class="ae ms" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>)。</li></ul><h1 id="b5c9" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">介绍</h1><p id="d1c0" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">你有没有浏览过亚马逊网站，试图找到你需要符合特定特征的特定产品？您最终找到了它，但是您有一些产品描述没有回答的问题。</p><h2 id="1741" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">如果能和亚马逊上的</strong> <strong class="ak">卖家聊天该有多好？</strong></h2><p id="adce" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">在本教程中，您将学习如何从头开始创建一个React应用程序，该应用程序将作为一个基本的Amazon克隆，在产品页面上使用CometChat的一些功能和组件以及简单的步骤来实现聊天功能！</p><p id="8233" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">在产品页面上，你会有一个按钮开始与卖家聊天。如果您是卖家，所有聊天请求都会到达您的收件箱，您可以在这里帮助客户解决他们的问题。</p><p id="5737" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">完美！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ni"><img src="../Images/2dc8ca741afb8268c321ce5bc9f92adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sEGI9Yu5QgGpJ_d7"/></div></div></figure><p id="e02d" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><em class="nj">如果你更喜欢直接跳到代码里，可以在这里</em>  <em class="nj">找到</em> <a class="ae ms" href="https://github.com/igorasilveira/marketplace-cometchat" rel="noopener ugc nofollow" target="_blank"> <em class="nj">。</em></a></p><h1 id="41c9" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">第一步。创建React应用程序</h1><h2 id="f480" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建React应用</strong></h2><p id="ebe4" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我们的第一步应该是创建我们的vanilla React应用程序的框架，为此，我喜欢使用<code class="fe nk nl nm nn b">create-react-app</code>包。因此，使用<em class="nj"> npx </em>不需要全局安装软件包，您可以在您希望项目存活的文件夹上运行下面的命令。</p><pre class="kd ke kf kg gt no nn np nq aw nr bi"><span id="f338" class="mt kp in nn b gy ns nt l nu nv">npx create-react-app chat-marketplace</span></pre><p id="9c95" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">你现在有了一个名为<em class="nj">聊天市场</em>的新文件夹，它将保存我们所有的代码和配置。</p><h2 id="e943" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">安装尾翼</strong></h2><p id="9e15" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了安装我们将用来设计组件样式的<a class="ae ms" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank"> TailwindCSS </a>，请参考与使用<em class="nj"> Create React App </em> starter、<a class="ae ms" href="https://tailwindcss.com/docs/guides/create-react-app" rel="noopener ugc nofollow" target="_blank">此处</a>相关的TailwindCSS文档的最新官方教程。</p><p id="5d51" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">设置完成后，将您的<code class="fe nk nl nm nn b">tailwind.config.js</code>替换为以下内容，以获得最佳效果。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h1 id="8c64" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">第二步。准备Firebase集成</h1><p id="0899" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了让它运行起来，你应该采取的下一步是设置你的无服务器后端。对于这个项目，我们使用Firebase来处理我们的用户认证和存储我们的应用程序数据。</p><p id="17af" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><em class="nj">如果您复制存储库中的</em><strong class="li io"><em class="nj">. env . example</em></strong><em class="nj">文件，并按照自述文件中的说明对其进行重命名，那么已经提供了一个Firebase项目并配置了环境变量，但是如果您选择创建自己的项目，请按照下面的步骤操作。</em></p><h2 id="218d" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建Firebase项目</strong></h2><p id="6201" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果你去Firebase的网站<a class="ae ms" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank">这里</a>，你可以用你的谷歌账户登录并创建一个新项目。给它起个类似<code class="fe nk nl nm nn b">Chat Marketplace</code>的名字。一旦你在那里，你现在能够添加应用程序到你新创建的项目。选择<strong class="li io"> Web App </strong>，您将看到运行该项目所需的必要项目证书。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ny"><img src="../Images/51ba0dbcbd57cd117862e09223a0cf74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xkWYeB5XAHIxH9Yv"/></div></div></figure><p id="3d51" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">在React项目的根目录下，创建一个包含以下内容的新文件<code class="fe nk nl nm nn b">.env</code>，用您自己的项目凭证替换这些值。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="fc1e" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">启用认证</strong></h2><p id="f1a0" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">Firebase具有管理用户身份验证和状态的内置功能。为了能够利用这一点，我们必须首先在我们的项目中启用<strong class="li io">身份验证</strong>，方法是转到侧栏选项并启用<strong class="li io">电子邮件和密码登录</strong>方法。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/fb96b0a21529f74c0e51016f8ab42c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rVjI5tae5QsmwjrO"/></div></div></figure><h2 id="8af8" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">初始化数据库</strong></h2><p id="e3e1" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了存储数据，我们将使用<a class="ae ms" href="https://firebase.google.com/docs/firestore" rel="noopener ugc nofollow" target="_blank"> Firebase的Firestore数据库</a>，这是一个云上的非SQL数据库。您还可以在项目的侧栏中找到它，并完成配置过程。最后，您应该看到一个空的数据库。我们现在需要向它添加数据，这样我们的应用程序就不会加载为空。</p><p id="f352" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">您应该创建两个<strong class="li io">集合</strong>，一个名为<em class="nj">类别</em>，另一个名为<em class="nj">产品</em>。之后，在第一个集合上创建几个类别文档，为集合的每个文档添加一个<code class="fe nk nl nm nn b">*name*</code>和<code class="fe nk nl nm nn b">image</code>属性。</p><p id="6e41" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">对于<em class="nj">产品</em>集合，每个条目至少应具有以下属性:<code class="fe nk nl nm nn b">category</code>(应为之前创建的类别之一的名称)、<code class="fe nk nl nm nn b">description</code>、<code class="fe nk nl nm nn b">id</code>、<code class="fe nk nl nm nn b">image</code>、<code class="fe nk nl nm nn b">price</code>、<code class="fe nk nl nm nn b">title</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/70ac30554ea63f10375feac4784d33e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8WNGKRw0nYyaDbIn"/></div></div></figure><p id="bbfa" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">我们现在应该已经做好了关于无服务器后端的一切准备，可以继续将其与React项目集成。</p><p id="ba3c" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">为了无缝集成，我们将使用<a class="ae ms" href="https://react-firebase-js.com/" rel="noopener ugc nofollow" target="_blank"> React Firebase </a>包。要安装它，请运行以下命令。</p><pre class="kd ke kf kg gt no nn np nq aw nr bi"><span id="17ae" class="mt kp in nn b gy ns nt l nu nv">npm i firebase &amp;&amp; npm i @react-firebase/auth &amp;&amp; npm i @react-firebase/firestore</span></pre><p id="7d9d" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">配置的下一步是在项目的<code class="fe nk nl nm nn b">src</code>文件夹中创建一个<code class="fe nk nl nm nn b">firebase.js</code>文件，firebase应用程序的配置将在这个文件夹中构建并在以后使用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h1 id="e5eb" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">第三步。准备CometChat集成</h1><h2 id="7a75" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">拿好你的钥匙</strong></h2><p id="465d" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">正如你现在可能知道的，我们将使用由<a class="ae ms" href="https://www.cometchat.com/" rel="noopener ugc nofollow" target="_blank"> CometChat </a>提供的惊人的实时聊天解决方案。</p><p id="2875" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">让我们首先进入他们的<a class="ae ms" href="https://app.cometchat.com/signup" rel="noopener ugc nofollow" target="_blank">注册页面</a>，创建一个CometChat帐户。注册后，您将登陆新的CometChat仪表板，现在您可以创建一个应用程序。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/405ea4b74a8bab60077d55123a483f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kjAKG9NqEOZgrPXa"/></div></div></figure><p id="8c75" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">创建并选择应用程序后，您会在页面顶部找到必要的配置信息。这些是<code class="fe nk nl nm nn b">appId</code>、<code class="fe nk nl nm nn b">authKey</code>和<code class="fe nk nl nm nn b">region</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/a9a5a432c8d5305d0f73bedccd25a918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*R8jPFmG1Yoq5OHXt"/></div></div></figure><p id="9475" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">复制这些值并将其添加到先前创建的<code class="fe nk nl nm nn b">.env</code>文件中，变量名如下:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="222f" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">安装CometChat依赖项</strong></h2><p id="ff05" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">要将CometChat所需的依赖项安装到React应用程序中，请运行以下命令。</p><pre class="kd ke kf kg gt no nn np nq aw nr bi"><span id="363d" class="mt kp in nn b gy ns nt l nu nv">npm install @cometchat-pro/chat@2.2.1 --save</span></pre><p id="0b4c" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">就是这样。</p><h2 id="1343" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建一个助手文件</strong></h2><p id="3ed2" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">这一步旨在将CometChat所需的大部分步骤抽象化，以便将注册、登录、创建和加入群组转换成简单的功能，这些功能可以在应用程序内的任何地方调用。</p><p id="288b" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">在<code class="fe nk nl nm nn b">src</code>文件夹的根目录下，创建一个名为<code class="fe nk nl nm nn b">cometchat.js</code>的文件，内容如下。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><h2 id="284f" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">复制React UI套件</strong></h2><p id="f26d" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">因为我们将使用React构建我们的marketplace应用程序，所以我们将利用预构建的CometChat React UI套件，在该套件中，我们获得了所有必要的组件来完成这项工作，而无需我们自己的任何进一步实现和设计！</p><p id="13ab" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">为此，请前往<a class="ae ms" href="https://github.com/cometchat-pro/cometchat-pro-react-ui-kit" rel="noopener ugc nofollow" target="_blank"> CometChat React UI套件库</a>并克隆它。将<code class="fe nk nl nm nn b">CometChatWorkspace</code>文件夹移动到React app <code class="fe nk nl nm nn b">src</code>文件夹，并将存储库的依赖项复制到您的<code class="fe nk nl nm nn b">package.json</code>文件夹，然后运行<code class="fe nk nl nm nn b">npm install</code>来安装它们。</p><p id="05e7" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在所有的配置都设置好了，我们可以开始编码我们的前端项目了！</p><h1 id="aa71" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">第四步。将碎片拼在一起</h1><p id="d512" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">现在是时候将上述所有内容结合起来，创建具有实时聊天功能的页面，使我们的市场成为现实。</p><h2 id="77c2" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建入口点</strong></h2><p id="592b" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">在你的<code class="fe nk nl nm nn b">src</code>文件夹的根目录下，创建一个<code class="fe nk nl nm nn b">index.js</code>，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="e30c" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">这段代码负责初始化CometChat和设置Firebase，并将其提供给应用程序的其余部分。</p><h2 id="59cc" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">设置我们的路由器</strong></h2><p id="8888" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">下一个重要的步骤是创建我们的React路由器，它将使我们能够浏览我们的页面。</p><p id="0885" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">在<code class="fe nk nl nm nn b">src</code>目录下应该有一个<code class="fe nk nl nm nn b">App.js</code>文件，代码如下:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8622" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在，通过在呈现相应的组件之前检查未经身份验证的用户是否登录，您添加了浏览页面和保护路由免受未经身份验证的用户访问的功能！</p><h2 id="5b84" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建布局包装</strong></h2><p id="059b" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">这是一个很好的实践，我喜欢这样做，以便将代码重复保持在最低限度，并且易于开发。创建一个高阶组件，您可以使用它来包装每个页面的呈现，处理页脚和导航栏等公共元素，并为每个页面提供公共和必要的道具。</p><p id="f60d" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">在<code class="fe nk nl nm nn b">src</code>目录下，创建一个新的<code class="fe nk nl nm nn b">wrappers</code>文件夹，并在其中创建一个包含以下内容的<code class="fe nk nl nm nn b">layout.js</code>文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="e8da" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在，任何组件都可以用<code class="fe nk nl nm nn b">withLayout(Component)</code>包装，并在相同的条件下呈现。</p><h2 id="a521" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建我们的组件</strong></h2><p id="76bc" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">在<code class="fe nk nl nm nn b">src</code>目录下，创建一个<code class="fe nk nl nm nn b">components</code>文件夹，我们所有的组件都将存在于其中。</p><p id="11e0" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">让我们首先创建我们的导航栏。用以下内容创建一个<code class="fe nk nl nm nn b">Navbar.js</code>文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="b590" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">接下来，我们正在创建页脚。和前面一样，用这些内容创建一个<code class="fe nk nl nm nn b">Footer.js</code>文件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="6748" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在，我们最常见的组件(属于我们的<code class="fe nk nl nm nn b">Layout</code>组件的一部分)已经完成，我们可以继续学习您的特定页面组件了。</p><p id="f2f7" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">让我们从主页上的分类卡片开始。创建一个<code class="fe nk nl nm nn b">CategoryCard.js</code>并添加以下代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="bc96" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">对于主页面，让我们创建一个具有水平滚动功能的产品滑块！使用以下内容创建一个<code class="fe nk nl nm nn b">ProductSlider.js</code>:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="d9ab" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">当我们在一个特定的类别页面上时，我们有多个产品以一种非常结构化的方式展示。让我们创建那个特定的个性化组件，<code class="fe nk nl nm nn b">ProductCard</code>。创建文件并添加代码:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="3e6b" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">就组件而言，剩下的就是我们通常在亚马逊的产品搜索页面上看到的侧过滤器。我们的完全被嘲笑，没有真正的功能，但它服务于它的目的。添加一个新的<code class="fe nk nl nm nn b">SideFilter.js</code>文件并粘贴内容:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="a658" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在都完成了。让我们创建页面！</p><h2 id="f7f7" class="mt kp in bd kq mu mv dn ku mw mx dp ky lp my mz la lt na nb lc lx nc nd le ne bi translated"><strong class="ak">创建页面</strong></h2><p id="4262" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我们已经有了一些组件，但是没有地方显示它们，因为我们的路由器甚至找不到正确管理导航所需的页面，所以让我们来解决这个问题。仍然在<code class="fe nk nl nm nn b">src</code>文件夹中，创建一个新的目录来保存我们的页面。称之为<code class="fe nk nl nm nn b">pages</code>。</p><p id="e9f1" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">从登录和注册页面开始，创建两个名为<code class="fe nk nl nm nn b">login.js</code>和<code class="fe nk nl nm nn b">register.js</code>的文件，并分别添加以下代码。</p><p id="e9b7" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><strong class="li io"> login.js </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="9bb0" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><strong class="li io"> register.js </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="1994" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在转到主页面，索引页面是我们第一次求助于Firestore集合来呈现它，因为它将显示类别和产品列表！创建一个新的<code class="fe nk nl nm nn b">index.js</code>文件并粘贴其内容:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="4f67" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">其余的页面非常简单。我们将为<em class="nj">类别</em>、<em class="nj">产品</em>、<em class="nj">新产品</em>和一个简单的<em class="nj">注销创建特定的页面。</em></p><p id="4c51" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><strong class="li io"> category.js </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="a416" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><strong class="li io"> newProduct.js </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="837a" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated"><strong class="li io"> logout.js </strong></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="3fb0" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">现在是最重要的一页，也是最简单的一页。用于可视化对话的CometChat集成，发送和接收消息的能力可以使用CometChat React UI工具包缩小到一行代码。我们将CometChat集成到它自己的页面中，我们称之为收件箱页面。创建一个新的<code class="fe nk nl nm nn b">inbox.js</code>文件并粘贴以下几行:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="8868" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">就是这样，你现在有一个完全成熟的聊天窗口！</p><h1 id="4603" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">第五步。目睹奇迹的发生</h1><p id="e338" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果一切按计划进行，您现在可以运行下面的命令在本地启动您的web应用程序，并在<em class="nj"> localhost:3000 </em>访问它:</p><pre class="kd ke kf kg gt no nn np nq aw nr bi"><span id="96cd" class="mt kp in nn b gy ns nt l nu nv">npm run start</span></pre><p id="b3b2" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">如果它编译了第一次尝试，现在剩下的就是创建一些用户，让他们互相聊天！</p><h1 id="14a5" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">结论</h1><p id="385d" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">希望通过本教程，您能够创建一个具有实时聊天功能的工作市场web应用程序，并且不需要任何类型的后端编码。</p><p id="d0c5" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">您已经配置了一个全新的Firebase项目，将非SQL数据插入到云数据源中，对用户进行了身份验证，使用CometChat建立了一个实时聊天解决方案，并让您的用户在大约30分钟内相互发送消息。</p><p id="a6cb" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">希望本教程对您有所帮助，并且不要忘记查看<a class="ae ms" href="https://prodocs.cometchat.com/docs" rel="noopener ugc nofollow" target="_blank"> CometChat </a>的官方文档，以进一步探索并为您的应用程序添加更多功能。本教程的完整源代码可以在<a class="ae ms" href="https://github.com/igorasilveira/marketplace-cometchat" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上找到。</p></div><div class="ab cl oa ob hr oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ig ih ii ij ik"><p id="5023" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp nf lr ls lt ng lv lw lx nh lz ma mb ig bi translated">【http://github.com】最初发表于<a class="ae ms" href="https://gist.github.com/65b032afb753aa1d5cf12f135fe7d910" rel="noopener ugc nofollow" target="_blank"><em class="nj"/></a><em class="nj">。</em></p></div></div>    
</body>
</html>
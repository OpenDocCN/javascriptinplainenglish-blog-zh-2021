<html>
<head>
<title>JavaScript Is Drunk</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript醉了</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-is-drunk-ec4ca3a84608?source=collection_archive---------7-----------------------#2021-03-05">https://javascript.plainenglish.io/javascript-is-drunk-ec4ca3a84608?source=collection_archive---------7-----------------------#2021-03-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="48c8" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">弱类型编程语言的奇特之处</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a4f2c3433f1c99619de2a7674abd785e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KHOPaXyCo_ylYCCP"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@jasonstrull?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jason Strull</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ba1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript是一种弱类型编程语言。换句话说，它对你的变量类型做出假设，因为你不能指定它们。</p><p id="77b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在强类型编程语言中，比如Java，你必须指定你的变量类型。这允许编译器在运行前捕捉更多的错误，比如不允许将某种类型的值赋给另一种类型的变量。这保证了你得到的结果更有可能是你期望的结果。</p><h2 id="9ad3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">那么JavaScript为什么不这么做呢？</h2><p id="8282" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">简单的答案是JavaScript没有编译步骤，否则强类型语言会验证类型。这种语言是为浏览器在网站上编写脚本而设计的。这通过为开发人员做决策而减少了他们的工作，但代价是可能产生错误的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/8b49c76e81b5b07711c0c946a9a78f2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K8_ovuvp2drTBE7jepZu4Q.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://knowyourmeme.com/memes/ive-won-but-at-what-cost" rel="noopener ugc nofollow" target="_blank">https://knowyourmeme.com/memes/ive-won-but-at-what-cost</a></figcaption></figure><p id="1cf4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看这个用Java写的代码片段。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="e319" class="ls lt iq ms b gy mw mx l my mz">public class HelloWorld {</span><span id="a6bc" class="ls lt iq ms b gy na mx l my mz">  public static void main(String[] args) {<br/>    String first = “1”;<br/>    int second = 1;<br/>    System.out.println(first — second);<br/>  }<br/>}</span><span id="51e0" class="ls lt iq ms b gy na mx l my mz">// Output: error: bad operand types for binary operator '-'<br/>// Java threw an error because it cannot subtract a string.</span></pre><p id="0954" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们用JavaScript做同样的事情。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="13d8" class="ls lt iq ms b gy mw mx l my mz">var first = "1"<br/>var second = 1<br/>console.log(first - second)</span><span id="55a8" class="ls lt iq ms b gy na mx l my mz">// Output: 0<br/>// JavaScript implicitly converted "1" to 1, and computed 1 - 1.</span></pre><p id="4d91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，Java抛出了一个错误，而JavaScript没有，代价是产生了一个潜在的意外结果。</p><p id="deeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看JavaScript隐式类型转换的几种奇怪结果。我将解释JavaScript在做什么，甚至试图解释它为什么要这么做。</p><p id="3df5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，就像你在感恩节喝醉的叔叔一样，有时我不太确定JavaScript为什么会这样做。</p><h2 id="8504" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">3个奇怪的JavaScript隐式类型转换</h2><blockquote class="nb nc nd"><p id="6b86" class="kw kx ne ky b kz la jr lb lc ld ju le nf lg lh li ng lk ll lm nh lo lp lq lr ij bi translated"><code class="fe ni nj nk ms b">“11” + 1 = "111"</code>但是<code class="fe ni nj nk ms b">“11” — 1 = 10</code></p></blockquote><p id="9101" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于前者，JavaScript将1转换为“1”，从而连接两个字符串。</p><p id="5e46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于后者，JavaScript将“11”转换为11。这可能是因为它不能减去字符串，所以它假定“11”是一个数字。</p><blockquote class="nb nc nd"><p id="f8ab" class="kw kx ne ky b kz la jr lb lc ld ju le nf lg lh li ng lk ll lm nh lo lp lq lr ij bi translated"><code class="fe ni nj nk ms b">[] + {} = "[object Object]”</code>但是<code class="fe ni nj nk ms b">{} + [] = 0</code></p></blockquote><p id="fee9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们已经非常深入地了解了JavaScript的奥秘，但是让我们来分析一下。</p><p id="2e90" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于前者，JavaScript将<code class="fe ni nj nk ms b">[]</code>和<code class="fe ni nj nk ms b">{}</code>都转换成字符串。这导致了连接<code class="fe ni nj nk ms b">"" + "[object Object]”</code>。</p><p id="095f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于后者，JavaScript将<code class="fe ni nj nk ms b">{}</code>解析为空代码块，然后将<code class="fe ni nj nk ms b">+</code>读取为一元加运算符，<code class="fe ni nj nk ms b">[]</code>为操作数。一元加号运算符将其操作数转换为数字。在这种情况下，<code class="fe ni nj nk ms b">[]</code>转换为<code class="fe ni nj nk ms b">0</code>。</p><blockquote class="nb nc nd"><p id="dd48" class="kw kx ne ky b kz la jr lb lc ld ju le nf lg lh li ng lk ll lm nh lo lp lq lr ij bi translated"><code class="fe ni nj nk ms b">("b" + "a" + + "a" + "a").toLowerCase() = "banana”</code></p></blockquote><p id="4b95" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">什么鬼东西？</p><p id="b9c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">开玩笑的。我可以解释这个。</p><p id="5150" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是一元加号运算符的另一种情况。JavaScript正在对<code class="fe ni nj nk ms b">"b"</code>、<code class="fe ni nj nk ms b">"a"</code>、<code class="fe ni nj nk ms b">"NaN"</code>和<code class="fe ni nj nk ms b">"a"</code>进行字符串串联，因为<code class="fe ni nj nk ms b">+ "a" = NaN</code>。<code class="fe ni nj nk ms b">"a"</code>到数字的隐式类型转换的结果是<code class="fe ni nj nk ms b">NaN</code>，它代表“不是一个数字”，实际上是一个数字。</p><pre class="kg kh ki kj gt mr ms mt mu aw mv bi"><span id="6f52" class="ls lt iq ms b gy mw mx l my mz">console.log(typeof(NaN))<br/>// Output: "number"</span></pre><h2 id="f44b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">这一切意味着什么？</h2><p id="a75b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">表示是时候切换到<a class="ae kv" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank">打字稿</a>了。</p></div><div class="ab cl nl nm hu nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ij ik il im in"><p id="27b3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您的阅读！在Medium ( <a class="ns nt ep" href="https://medium.com/u/6da6b651e31a?source=post_page-----ec4ca3a84608--------------------------------" rel="noopener" target="_blank"> Charlie Levine </a>)上关注我，了解我的日常编程和技术相关文章。</p></div></div>    
</body>
</html>
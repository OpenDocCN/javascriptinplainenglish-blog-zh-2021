<html>
<head>
<title>How to Upload a File in Cypress</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在赛普拉斯上传文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-upload-a-file-in-cypress-e6b2beafec8c?source=collection_archive---------4-----------------------#2021-10-25">https://javascript.plainenglish.io/how-to-upload-a-file-in-cypress-e6b2beafec8c?source=collection_archive---------4-----------------------#2021-10-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c31ccb577ae96520448bcc3e670701d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oeB6T95mcGZZyfC_Q1Dk3A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Cypress Upload File</figcaption></figure><p id="173d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本教程中，我们将学习如何使用<a class="ae kx" href="https://www.npmjs.com/package/cypress-file-upload" rel="noopener ugc nofollow" target="_blank"> <em class="ky">柏树-文件-上传</em> </a> <em class="ky"> </em> NPM软件包在柏树上上传文件。赛普拉斯目前没有本地支持上传文件；然而，这是他们<a class="ae kx" href="https://github.com/cypress-io/cypress/issues/170" rel="noopener ugc nofollow" target="_blank">计划在未来增加的</a>。</p><h1 id="e6e0" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">装置</h1><p id="f61d" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks mb ku kv kw ig bi translated">因为我们需要使用第三方库来上传文件，所以我们需要安装和设置该库，使其与柏树一起工作。</p><h2 id="63e5" class="mc la in bd lb md me dn lf mf mg dp lj kk mh mi ln ko mj mk lr ks ml mm lv mn bi translated">安装NPM软件包</h2><p id="616f" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks mb ku kv kw ig bi translated">您需要做的第一件事是安装软件包——</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="651b" class="mc la in mt b gy mx my l mz na">npm install --save-dev cypress-file-upload</span></pre><h2 id="af92" class="mc la in bd lb md me dn lf mf mg dp lj kk mh mi ln ko mj mk lr ks ml mm lv mn bi translated">设置自定义命令</h2><p id="f77f" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks mb ku kv kw ig bi translated">cypress-file-upload库提供了一个自定义命令，我们可以在设置后使用。为此，我们需要在自定义命令文件(cypress/support/commands.js)中导入库，如下所示——</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="6dc9" class="mc la in mt b gy mx my l mz na">import 'cypress-file-upload';</span></pre><p id="01b9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，确保该<code class="fe nb nc nd mt b">commands.js</code>是在<code class="fe nb nc nd mt b">cypress/support/index.js</code>中导入的(可能是注释):</p><pre class="mo mp mq mr gt ms mt mu mv aw mw bi"><span id="ea1c" class="mc la in mt b gy mx my l mz na">import './commands';</span></pre></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h1 id="d237" class="kz la in bd lb lc nl le lf lg nm li lj lk nn lm ln lo no lq lr ls np lu lv lw bi translated">上传文件测试</h1><p id="a20a" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks mb ku kv kw ig bi translated">现在，我们已经安装了软件包，我们可以继续并开始使用自定义命令。在下面的例子中，我将在我的测试网站上上传一个文件。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/90ba8c0729fbdb222462b207c127b325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*74FrIYh-yvNxhVAIwMVKQw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">cypress file upload example</figcaption></figure><p id="2039" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在上面的例子中，重点关注的是由我们安装的助手库添加的<code class="fe nb nc nd mt b">.attachFile()</code>命令。它引入了一个参数，即文件名，该参数应包含在<code class="fe nb nc nd mt b">fixtures</code>文件夹中，如下所示。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div class="gh gi nr"><img src="../Images/f5885b87fcdb87657fd6300f82d70190.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*gK-biNVq3Lx5YeEUSojuCw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">cypress fixtures folder</figcaption></figure></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h1 id="7e08" class="kz la in bd lb lc nl le lf lg nm li lj lk nn lm ln lo no lq lr ls np lu lv lw bi translated">使用隐藏的输入字段</h1><p id="fe90" class="pw-post-body-paragraph jz ka in kb b kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks mb ku kv kw ig bi translated">通常情况下,<code class="fe nb nc nd mt b">.attachFile()</code>命令会在<code class="fe nb nc nd mt b">input[type=file]</code>元素难以处理的情况下发挥作用。然而，如果元素是隐藏的，那么您将需要进行必要的更改，以使元素再次可见和难以处理。您可以在赛普拉斯<code class="fe nb nc nd mt b">.invoke()</code>功能的帮助下完成，如下所示——</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/548becdfdc936a08adb0a591432598ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJWKCIEMdCVLvS5Jf2zGUA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Cypress .invoke function</figcaption></figure><p id="ce74" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在这个例子中，我使用jQuery <code class="fe nb nc nd mt b">removeClass</code>函数移除了隐藏的类，这使得我的元素再次变得难以处理。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="7067" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">如需了解更多关于如何在柏树上传文件的信息，请查看下面的视频</strong> —</p><figure class="mo mp mq mr gt jo"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="382d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">希望你喜欢读这篇文章！</p><p id="9558" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="ky">多内容于</em> <a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="ky">浅显易懂</em></strong></a></p></div></div>    
</body>
</html>
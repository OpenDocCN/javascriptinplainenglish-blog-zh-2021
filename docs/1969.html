<html>
<head>
<title>How to Send Notifications in Chrome Extensions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Chrome扩展中发送通知</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-send-notifications-in-chrome-extensions-7b7b3f5a0e9b?source=collection_archive---------15-----------------------#2021-04-24">https://javascript.plainenglish.io/how-to-send-notifications-in-chrome-extensions-7b7b3f5a0e9b?source=collection_archive---------15-----------------------#2021-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/85cdc7c1065974a3a7d5d46a95728345.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GvWHLcbBbfOSBXzjYf38UQ.jpeg"/></div></div></figure><p id="204e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，我们将讨论如何在Chrome扩展中发送通知。我们将讨论如何发送一个通知，以及如何安排在以后发送通知。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="86a4" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">先决条件</h2><p id="987c" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">本教程假设你已经知道如何创建一个Chrome扩展。如果你没有，那么这里的<a class="ae ly" href="https://blog.shahednasser.com/chrome-extension-tutorial-replace-images-in-any-website-with-pikachu/" rel="noopener ugc nofollow" target="_blank"/>是你可以先开始的。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="9f89" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">设置权限</h2><p id="e228" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">在您发送任何类型的通知之前，您需要首先在您的<code class="fe lz ma mb mc b">permissions</code>键中添加以下内容:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="04e4" class="la lb in mc b gy ml mm l mn mo">"permissions": [<br/>          "notifications"<br/>          //other permissions in your extension<br/>  ]</span></pre><p id="ce3c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这意味着用户在安装或更新您的扩展时必须接受他们将收到通知，以便使用该扩展。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="f341" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">发送通知</h2><p id="beac" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">要发送通知，您需要使用<a class="ae ly" href="https://developer.chrome.com/docs/extensions/reference/notifications" rel="noopener ugc nofollow" target="_blank">通知API </a>。特别是<code class="fe lz ma mb mc b">chrome.notifications.create</code>方法，它采用以下必需选项:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="3427" class="la lb in mc b gy ml mm l mn mo">chrome.notifications.create('NOTFICATION_ID', {<br/>    type: 'basic',<br/>    iconUrl: 'path',<br/>    title: 'notification title',<br/>    message: 'notification message',<br/>    priority: 2<br/>})</span></pre><p id="1eca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以下是这些选项的含义:</p><ol class=""><li id="4882" class="mp mq in jx b jy jz kc kd kg mr kk ms ko mt ks mu mv mw mx bi translated"><strong class="jx io"> NOTIFICATION_ID: </strong>通知的ID。这可能是更新通知或清除通知所必需的。</li><li id="c22d" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><strong class="jx io">类型:</strong>通知的类型。其值可以是“基本”、“图像”、“列表”、“进度”</li><li id="babe" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><strong class="jx io"> iconUrl: </strong>应该在通知中显示的图标的路径。这应该是相对于你的扩展的根。</li><li id="8351" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><strong class="jx io">标题:</strong>通知的标题。</li><li id="a2d1" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><strong class="jx io">消息:</strong>通知中显示的消息。</li><li id="65ae" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated"><strong class="jx io">优先级:</strong>这个不是必须的，但是我推荐包含。它的值可以从-2到2，其中-2是最低优先级，2是最高优先级。此选项的默认值为0，因此如果不包含此选项，您的通知可能会被忽略。还应注意，小于0的值会在没有通知中心的设备上产生错误。</li></ol><p id="58fb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还有其他一些可选选项:</p><p id="f394" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">按钮:</strong>您希望在通知中显示的按钮。这需要一个最多包含2个按钮的按钮数组。该数组应该是一个具有属性<code class="fe lz ma mb mc b">title</code>的对象，该属性将是按钮的标题。例如:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="5158" class="la lb in mc b gy ml mm l mn mo">buttons: [<br/>    {<br/>        title: 'Yes'<br/>    },<br/>    {<br/>        title: 'No'<br/>    }<br/>]</span></pre><p id="d4c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">上下文消息:</strong>该消息将以较低的字体显示。</p><p id="372b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">事件时间:</strong>与通知相关联的时间戳。例如:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="09c1" class="la lb in mc b gy ml mm l mn mo">eventTime: Date.now()</span></pre><p id="7278" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">项目:</strong>这将只在Mac OS X上显示。这对于<code class="fe lz ma mb mc b">list</code>类型的通知可能很有用。例如:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="cb5e" class="la lb in mc b gy ml mm l mn mo">items: [<br/>    {<br/>        title: 'Item 1',<br/>        message: 'This is first item'<br/>    }<br/>]</span></pre><p id="fb96" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">进度:</strong>这对于<code class="fe lz ma mb mc b">progress</code>类型的通知很有用。它取0到100之间的值</p><p id="36ab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> requiresInteraction: </strong>这个只适用于50以后的Chrome版本。其值为布尔值。如果设置为true，这意味着通知不会从屏幕上消失，直到用户通过单击它或取消它来与消息进行交互。此项的默认值为false。</p><p id="2bbd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">静音:</strong>这个只对70以后的Chrome版本有效。它的值是布尔值。如果设置为true，那么通知将不会发出声音或振动。默认值为false。</p><p id="0f83" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要向用户发送仅显示消息的基本通知:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="c26d" class="la lb in mc b gy ml mm l mn mo">chrome.notifications.create('test', {<br/>    type: 'basic',<br/>    iconUrl: 'images/1.png',<br/>    title: 'Test Message',<br/>    message: 'You are awesome!',<br/>    priority: 2<br/>});</span></pre><p id="d4fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将在执行时发送一个通知。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="1828" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">计划通知</h2><p id="2dbd" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">在许多情况下，您实际上并不想现在发送通知，或者您希望每隔一段时间发送一次通知，比如一天一次。为此，我们将使用<a class="ae ly" href="https://developer.chrome.com/docs/extensions/reference/alarms/" rel="noopener ugc nofollow" target="_blank">警报API </a>。</p><p id="e5be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">警报允许我们安排某件事在以后运行。创建提醒时，您可以指定提醒运行的时间间隔。然后，您可以收听警报，并在警报运行时执行您想要的任何代码。</p><p id="a682" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了能够使用警报，我们还需要在<code class="fe lz ma mb mc b">manifest.json</code>中将其包括在我们的权限中:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="8735" class="la lb in mc b gy ml mm l mn mo">"permissions": [<br/>          "alarms",<br/>          "notifications"<br/>          //other permissions your extension require<br/>  ],</span></pre><p id="0d8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要按特定时间表发送通知，工作流程如下:</p><ol class=""><li id="0023" class="mp mq in jx b jy jz kc kd kg mr kk ms ko mt ks mu mv mw mx bi translated">创建以特定时间间隔运行的警报</li><li id="1bb7" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated">注意听闹钟什么时候响</li><li id="aeb2" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated">当警报运行时，执行一些逻辑并创建一个通知</li></ol><h2 id="c118" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak">创建一个以特定时间间隔运行的警报</strong></h2><p id="85b4" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">为了创建警报，我们将使用<code class="fe lz ma mb mc b">chrome.alarms.create</code>方法:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="9011" class="la lb in mc b gy ml mm l mn mo">chrome.alarms.create('ALARM_NAME', {<br/>    //options<br/>});</span></pre><p id="7f18" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你只需要指定闹钟的名字<code class="fe lz ma mb mc b">ALARM_NAME</code>，以后听闹钟的时候会用到。不需要其他选项。但是，如果您在没有选项的情况下使用它，警报只会在创建时运行一次。</p><p id="439d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以传递的选项有:</p><p id="f54f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">什么时候:</strong>闹钟应该什么时候开始工作。如果您希望它立即启动:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="bec8" class="la lb in mc b gy ml mm l mn mo">when: Date.now()</span></pre><p id="96f8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">周期分钟:</strong>这是我们指定闹钟运行的时间。它需要一个数字，即每次报警之间的分钟数。所以，如果我想让闹钟每五分钟响一次:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="1120" class="la lb in mc b gy ml mm l mn mo">periodInMinutes: 5</span></pre><p id="27ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">delay minutes:</strong>指定<code class="fe lz ma mb mc b">onAlarm</code>事件在触发前是否应该延迟一点。</p><p id="7d94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里最重要的选项是<code class="fe lz ma mb mc b">periodInMinutes</code>。它指定了我们希望何时创建通知。</p><p id="f9b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果我们想要创建一个提醒，让我们创建一个每天运行的通知:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="abad" class="la lb in mc b gy ml mm l mn mo">chrome.alarm.create('testAlarm', {<br/>	periodInMinutes: 1440<br/>});</span></pre><h2 id="201e" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated"><strong class="ak">监听闹钟何时响起</strong></h2><p id="9a7b" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">下一步是当警报响起时进行监听。这通常应该在清单V2的后台脚本中完成，或者在清单V3的服务工作人员中完成。</p><p id="aaad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">你可以在这里</em>  <em class="nd">阅读更多关于Manifest V2和V3 </em> <a class="ae ly" href="https://blog.shahednasser.com/chrome-extension-tutorial-migrating-to-manifest-v3-from-v2" rel="noopener ugc nofollow" target="_blank"> <em class="nd">的区别。</em></a></p><p id="526b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你不知道什么是后台脚本，正如它的名字所说，它是一个总是在后台运行的脚本，即使你的扩展的页面或弹出窗口或你的扩展使用的任何东西没有打开或运行。这有助于我们随时收听事件、警报、消息等。</p><p id="1bd5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Manifest V3中引入了服务工作器，作为后台脚本的替代。主要区别在于服务人员并不总是跑步。服务人员向警报、消息等注册事件监听器，与后台脚本相同，因此只有监听器在必要时运行，如事件发生时。</p><p id="bfbe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你的chrome扩展中还没有后台脚本，你需要首先在<code class="fe lz ma mb mc b">manifest.json</code>中包含它:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="2a3d" class="la lb in mc b gy ml mm l mn mo">"background": {<br/>    "scripts": ["js/background.js"],<br/>    "persistent": false<br/>},</span></pre><p id="2f66" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者，如果您使用的是Manifest V3，您需要注册一个服务人员:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="fbf4" class="la lb in mc b gy ml mm l mn mo">"background": {<br/>    	"service_worker": "js/background.js"<br/> },</span></pre><p id="c944" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，在脚本中，我们将使用接受回调函数的<code class="fe lz ma mb mc b">chrome.alarms.onAlarm.addListener</code>来监听警报，这将是我们的监听器。这个回调函数将在我们的扩展中的警报每次运行时执行，所以我们需要确保我们只监听我们需要的警报，我们将其命名为<code class="fe lz ma mb mc b">testAlarm</code>:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="2c61" class="la lb in mc b gy ml mm l mn mo">chrome.alarms.onAlarm.addListener((alarm) =&gt; {<br/>    if (alarm.name === "testAlarm") {<br/>        //our alarm is running, send notification<br/>    }<br/>});</span></pre><p id="b9c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要检查<code class="fe lz ma mb mc b">alarm.name === "testAlarm"</code>，以确保我们的通知警报正在运行。如果您的扩展中有多个警报，这也很重要，以确保您正在为正确的警报执行所需的逻辑。</p><p id="76ad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果条件为真，我们可以创建通知。</p><h2 id="5e25" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">当警报运行时，执行一些逻辑并创建一个通知</h2><p id="a01f" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">根据您的用例，您可能会执行一些逻辑，可能会向服务器或任何其他逻辑发送请求，然后运行通知。</p><p id="5744" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们要做的是，在警报运行时创建消息。这是可以做到的:</p><pre class="md me mf mg gt mh mc mi mj aw mk bi"><span id="1808" class="la lb in mc b gy ml mm l mn mo">chrome.alarms.onAlarm.addListener((alarm) =&gt; {<br/>    if (alarm.name === "testAlarm") {<br/>        chrome.notifications.create('test', {<br/>            type: 'basic',<br/>            iconUrl: 'images/1.png',<br/>            title: 'Test Message',<br/>            message: 'You are awesome!',<br/>            priority: 2<br/>        });<br/>    }<br/>});</span></pre><p id="5cec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这3个步骤之后，我们的扩展将创建一个每天运行一次的警报，并执行我们添加到<code class="fe lz ma mb mc b">onAlarm</code>事件的监听器中的代码。该侦听器将创建一个通知。因此，每天都会向用户发送通知。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="8f51" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">在Firefox上发送通知</h2><p id="8933" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">在Firefox上发送通知是完全一样的，除了你只需要在所有使用<code class="fe lz ma mb mc b">browser.*</code>的方法中替换<code class="fe lz ma mb mc b">chrome.*</code>。你可以在这里阅读更多关于火狐和Chrome的区别。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h2 id="82bd" class="la lb in bd lc ld le dn lf lg lh dp li kg lj lk ll kk lm ln lo ko lp lq lr ls bi translated">摘要</h2><p id="106d" class="pw-post-body-paragraph jv jw in jx b jy lt ka kb kc lu ke kf kg lv ki kj kk lw km kn ko lx kq kr ks ig bi translated">要创建通知，您需要:</p><ol class=""><li id="79c5" class="mp mq in jx b jy jz kc kd kg mr kk ms ko mt ks mu mv mw mx bi translated">将<code class="fe lz ma mb mc b">notifications</code>添加到<code class="fe lz ma mb mc b">manifest.json</code>的<code class="fe lz ma mb mc b">permissions</code>阵中</li><li id="28d4" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated">使用<code class="fe lz ma mb mc b">chrome.notifications.create</code>创建并发送通知。</li></ol><p id="03cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要安排通知按时间间隔运行，您需要:</p><ol class=""><li id="a6ac" class="mp mq in jx b jy jz kc kd kg mr kk ms ko mt ks mu mv mw mx bi translated">将<code class="fe lz ma mb mc b">alarms</code>添加到<code class="fe lz ma mb mc b">manifest.json</code>中的<code class="fe lz ma mb mc b">permissions</code>数组</li><li id="eb6b" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated">使用<code class="fe lz ma mb mc b">chrome.alarms.create</code>创建一个警报。</li><li id="8dee" class="mp mq in jx b jy my kc mz kg na kk nb ko nc ks mu mv mw mx bi translated">用<code class="fe lz ma mb mc b">chrome.alarms.onAlarm.addListener</code>监听警报，并在监听器中创建一个通知。</li></ol><p id="630d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">如果您想连接并谈论更多关于本文或编程的一般内容，您可以在我的Twitter帐户</em><a class="ae ly" href="https://twitter.com/shahednasserr" rel="noopener ugc nofollow" target="_blank"><em class="nd">@ shahednasserr</em></a><em class="nd">上找到我。本文原载于</em> <a class="ae ly" href="https://blog.shahednasser.com/how-to-send-notifications-in-chrome-extensions/" rel="noopener ugc nofollow" target="_blank"> <em class="nd">我的个人博客</em> </a> <em class="nd">。</em></p><p id="18b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">更多内容请看</em><a class="ae ly" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nd">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Build a Voting App with GraphCMS and Nuxt</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GraphCMS和Nuxt构建投票应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-voting-app-with-graph-cms-and-nuxt-ac806c1bd1?source=collection_archive---------20-----------------------#2021-07-08">https://javascript.plainenglish.io/build-a-voting-app-with-graph-cms-and-nuxt-ac806c1bd1?source=collection_archive---------20-----------------------#2021-07-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7b86" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">用Nuxt.js和GraphCMS构建一个应用程序:投票选出你最喜欢的科技课程</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/3fe70c6af94c10b835d20b645c0411a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IPB81PkKM9kFKIeq"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@glencarrie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Glen Carrie</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="8a87" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">视频版本</h2><p id="0490" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated"><a class="ae ks" href="https://www.youtube.com/watch?v=bsOHkdYFSK4" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=bsOHkdYFSK4</a></p><p id="238c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在本教程中，您将为技术课程构建一个投票应用程序。投票应用程序允许人们对技术课程进行投票，这样人们就可以找到优质的课程。</p><p id="ec84" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果你喜欢一门课程，并认为它是一门优质课程，你可以投票支持它。一门课程获得的支持票数越多，它在页面上的位置就越高。</p><p id="0cce" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">要构建应用程序，您将使用:</p><ul class=""><li id="dbff" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">GraphCMS</li><li id="9c8a" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">Nuxt.js</li><li id="bd7a" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">尾翼CSS</li></ul><p id="2475" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">事不宜迟，让我们开始构建应用程序吧！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="7e56" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">关于GraphCMS</h1><p id="a313" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">GraphCMS是第一个GraphQL原生无头CMS。它旨在通过利用GraphQL的强大功能来消除传统内容管理的痛点。</p><p id="87e4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们看看GraphQL的目标是什么。GraphCMS的一些最显著的特性如下:</p><ul class=""><li id="d015" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">它有一个支持查询和变异的GraphQL端点。</li><li id="5a60" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">它有一个优秀的用户界面。你可以使用它来构建，配置和维护你的应用程序通过他们的用户界面后端。</li><li id="e639" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">它有内容本地化。这意味着您可以将内容本地化并翻译成任何语言。</li><li id="da01" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">它支持基于付费计划的环境，这允许您独立地开发新特性，然后将其提升到主环境。</li><li id="95a3" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">智能边缘缓存，这意味着您的查询响应会在全球190个边缘点进行缓存。</li></ul><p id="3cde" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">这些只是让你相信它的力量的一小部分功能。然而，你可以在这里阅读更多关于GraphCMS及其特性<a class="ae ks" href="https://graphcms.com/features" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="7498" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated"><strong class="lr io">简而言之，你可以使用GraphCMS作为一个数据库或内容管理系统，这可以从名字</strong>中推断出来。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="5f18" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">创建一个GraphCMS帐户</h1><p id="839b" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">本教程的第一步是创建一个GraphCMS帐户，这样您就可以使用它了。</p><p id="92b4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">转到<a class="ae ks" href="https://graphcms.com/" rel="noopener ugc nofollow" target="_blank"> GraphCMS </a>网站，点击<em class="nt">“注册”</em>链接。请参见下面的图1以供参考。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/b3816429bf6e2f15962e4ffa3f196f7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SfoLnYp_WAZb7BpR.png"/></div></div></figure><blockquote class="nv nw nx"><p id="46c8" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图1</p></blockquote><p id="ae85" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，它会带你到注册页面。在注册页面上，您可以注册以下内容:</p><ul class=""><li id="6bd6" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">使用您的脸书帐户</li><li id="3428" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">使用您的GitHub帐户</li><li id="b450" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">使用您的Google帐户</li><li id="2af4" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">用你的电子邮件，密码和名字</li></ul><p id="49bf" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">你可以使用任何适合你需要的方法。就我而言，我是用我的GitHub账户注册的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/5c3745240439c720401d641cb3d26840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xZZMymthx9kiaURh.png"/></div></div></figure><blockquote class="nv nw nx"><p id="f2a7" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图2</p></blockquote><p id="6c22" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图2展示了注册页面。在选择您首选的注册方式之前，请勾选表示您同意其条款和政策的方框。最后，点击<em class="nt">“注册”</em>按钮。</p><p id="812b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，你就大功告成了。您应该会看到下面图3所示的页面。如果您想参加他们的游览，点击<em class="nt">【开始游览】</em>按钮。如果没有，直接跳到概述。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/8348c2184149fbd6f06807bfcb2b7ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G1HUR4jo4gSbE_wL.png"/></div></div></figure><blockquote class="nv nw nx"><p id="381d" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图3</p></blockquote><p id="8943" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">这就是创建新的GraphCMS帐户的方法。如果您点击<em class="nt">“Skip to overview”</em>(如图3所示)，您将被带到一个页面，在这里您可以创建一个新项目或者从现有的启动项目中进行选择。</p><p id="18ff" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，下一步是为技术课程创建和配置投票应用程序。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="a5db" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">项目结构</h1><p id="e4dd" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">该项目将科技课程与作者放在一起。因此，您将有两个模型:</p><ul class=""><li id="02e2" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">课程模型</li><li id="bc17" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">作家的典范</li></ul><p id="ef78" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此外，两者之间还会有多对多的关系。例如，一门课程可以有多个作者，作者也可以有多门课程。</p><p id="872a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">解决了这个问题，让我们开始构建项目吧！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="e819" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">创建项目</h1><p id="a570" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">创建帐户后，您将进入一个新页面，在这里您可以创建新项目。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/d33e43088bc551418d0529b6246a8959.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c6EUAddP5jYVKGfz.png"/></div></div></figure><blockquote class="nv nw nx"><p id="94e5" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图4</p></blockquote><p id="bf39" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">需要注意的是，您可以从他们的初始项目中进行选择。但是，对于本教程，您将创建一个新项目。</p><p id="dc16" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">要创建一个新项目，点击<strong class="lr io"> + </strong>按钮，上面写着<em class="nt">“从头开始”</em>。上面的图4说明了这一点。</p><p id="73a7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击按钮将进入新页面，您需要:</p><ul class=""><li id="cfdc" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">为项目添加名称和描述</li><li id="54e7" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">选择您首选的CDN</li></ul><p id="dbf2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的图5中，您可以看到这个项目的名称和描述。还有，你可以看到我选择的数据中心来自<em class="nt">欧洲(法兰克福)</em>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/80236040a9844f5aafa765daf19584de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ni2ywhR1c2MUBCsg.png"/></div></div></figure><blockquote class="nv nw nx"><p id="f53e" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图5</p></blockquote><p id="8e11" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">填写完所有详细信息后，单击页面底部的“创建项目”按钮。在图5中，您看不到它，但是您应该在您的页面上看到它。</p><p id="a4b2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">创建项目后，您将被带到定价页面，如图6所示。你有四种选择。对于本教程，您只需要免费版本。对于大多数副业项目来说绰绰有余。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/f20bf49759559526cfa51ebf97e9322b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Sk9KA_NK2Dbf9Nlj.png"/></div></div></figure><blockquote class="nv nw nx"><p id="e95d" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图6</p></blockquote><p id="edf6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">选择“永远免费”计划。选择计划后，您将进入一个新页面，在此您可以邀请团队成员。但是，您目前没有任何团队成员，因此请点击页面底部的<em class="nt">“稍后邀请”</em>。</p><p id="a7f1" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在您已经完成并准备好配置您的应用程序了！您可以在下面的图7中看到项目仪表板。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/cfd6b59b09481cc8f452cda10b8d7b8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LRCzwtEu6ayKYnKU.png"/></div></div></figure><blockquote class="nv nw nx"><p id="c1a3" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图7</p></blockquote><p id="ce99" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们进入下一步，即创建模型。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="8a09" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">创建模型</h1><p id="137e" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">下一步是创建模型。当您创建模型时，您描述了数据的结构。例如，您需要一个课程模式和一个作者模式。</p><p id="b421" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在项目仪表板上，点击选项<em class="nt">“设置您的模式”</em>。请参见下面的图8以供参考。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/cdf28d312bb992e69e60b973079edbe8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*C_eau3Y0nA4vA47f.png"/></div></div></figure><blockquote class="nv nw nx"><p id="abea" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图8</p></blockquote><p id="cbb4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击该选项后，您将进入一个新页面，为您的数据创建模型。例如，您将为课程创建模型。</p><p id="7058" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击按钮<em class="nt">“创建模型”</em>，如图9所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/ed7b34a31eee2c7bbb0ea25b900fbee5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vBYxA_88Flxj2D3J.png"/></div></div></figure><blockquote class="nv nw nx"><p id="df3c" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图9</p></blockquote><p id="b5b2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是创建模型。然后，您需要做的就是为您的模型选择一个名称和描述。</p><p id="1adc" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">对于这个例子，模型的显示名称是<code class="fe oe of og oh b">Course</code>。输入显示名称后，<code class="fe oe of og oh b">API ID</code>和<code class="fe oe of og oh b">Plural API ID</code>字段会自动更新。因此，你可以让它们保持原样。最后，输入模型的描述。</p><p id="57fa" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">输入所有细节后，点击按钮<em class="nt">“创建模型”</em>。在图10中，您可以看到一个设置<code class="fe oe of og oh b">Course</code>模型的例子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/3c02686f89438391ea02884193d30da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x_U7oVJ08ZpnpmvB.png"/></div></div></figure><blockquote class="nv nw nx"><p id="c370" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图10</p></blockquote><p id="ec49" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">创建模型之后，您就有了一个用于<code class="fe oe of og oh b">Course</code>的空模型。</p><p id="50e5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">作为练习，为<code class="fe oe of og oh b">Author</code>创建模型。转到<code class="fe oe of og oh b">Schema</code>页面，然后点击左侧的<em class="nt"> +添加</em>按钮。请参见下面的图11以供参考。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oi"><img src="../Images/fb97a7563a83199770e1b8351329f75f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tRt2ODroTm3Dhzcn.png"/></div></div></figure><blockquote class="nv nw nx"><p id="2939" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图11</p></blockquote><p id="8183" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击“add”按钮后，您可以像创建<code class="fe oe of og oh b">Course</code>模型一样创建<code class="fe oe of og oh b">Author</code>模型。</p><p id="b1f9" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面的图12显示了<code class="fe oe of og oh b">Author</code>模型的设置。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oj"><img src="../Images/42b487366d360b0147f6b33e8954cf8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VoVRn0VVnmnhvuS7.png"/></div></div></figure><blockquote class="nv nw nx"><p id="6503" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图12</p></blockquote><p id="4560" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是通过添加字段来配置模型。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="db78" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">配置课程模型</h1><p id="70b8" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">一旦创建了模型，您需要添加字段。这些字段描述了您存储的有关课程的内容。例如，您至少需要一个名称和描述。</p><p id="f4f2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦您创建了模型，您就可以访问专用于它的页面。在该页面中，您可以添加和删除字段。图13说明了这一点。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/904f206cbb5bbf32658950d3f326242b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tw8C_g8G6CKpmQtd.png"/></div></div></figure><blockquote class="nv nw nx"><p id="a080" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图13</p></blockquote><p id="8d31" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">对于本教程，<code class="fe oe of og oh b">Course</code>模型将具有以下字段:</p><ul class=""><li id="2a9d" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">名字</li><li id="5eea" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">描述</li><li id="d9ec" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">作者</li><li id="2854" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">环</li><li id="f25b" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">投票</li></ul><p id="3ce3" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果您查看上面的图13，您可以看到您可以从页面的右侧选择字段。您可以创建如下字段:</p><ul class=""><li id="f189" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">多行文本</li><li id="d82b" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">减价</li><li id="6881" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">富文本编辑器</li><li id="0e92" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">数字</li></ul><p id="1d55" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">还有很多。</p><h2 id="e310" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">名字域</h2><p id="d9d3" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">让我们从添加名称字段开始。首先点击“单行文本”字段。单击该字段后，将会出现一个新框，如图14所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ok"><img src="../Images/290b18890e4680116c941cf8a9c1702b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nATsd9wuZW8bnmaL.png"/></div></div></figure><blockquote class="nv nw nx"><p id="5ae1" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图14</p></blockquote><p id="e58f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">您需要为该字段指定<strong class="lr io">名称</strong>、<strong class="lr io"> API ID </strong>和<strong class="lr io">描述</strong>。您可以使用与图14中相同的细节，也可以使用您自己的细节。</p><p id="789c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此外，您可能希望显示字段的值，而不是关系中的ID，所以检查字段是否为<strong class="lr io">用作标题字段</strong>。</p><p id="077f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在继续之前，转到<em class="nt">“验证”</em>选项卡，并填写必填字段。这意味着<code class="fe oe of og oh b">name</code>字段不能为空。请参考图15。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ol"><img src="../Images/9a459be96d6ef29096ee2d1d05000cd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Npy64WwHwX6YZWYH.png"/></div></div></figure><blockquote class="nv nw nx"><p id="8263" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图15</p></blockquote><p id="4e23" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">完成<code class="fe oe of og oh b">name</code>字段的配置后，点击“创建”按钮。创建字段后，您应该会在仪表板中看到它。</p><h2 id="545c" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">描述字段</h2><p id="7d41" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">下一步是创建描述字段。因为描述比<code class="fe oe of og oh b">name</code>字段更复杂，所以让我们选择“降价”字段。</p><p id="8c3b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击“Markdown”字段，应该会出现图16所示的弹出窗口。像往常一样，为您的字段选择名称、API ID和描述。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi om"><img src="../Images/4ccd7fec6e6fced190265beb9ac3f3a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZjBO10JsVmHU0MoQ.png"/></div></div></figure><blockquote class="nv nw nx"><p id="7f83" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图16</p></blockquote><p id="b603" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">作为验证，让我们将该字段设置为必填字段，并添加100到1000个单词的字符数。因此，在以下情况下，不能将课程添加到数据库中:</p><ul class=""><li id="b3ea" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">描述为空</li><li id="64d6" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">描述少于100字或多于1000字</li></ul><p id="1bbf" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">参见图17，它展示了验证。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/9c38deb728761b770dd9a0bf5a4a6108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YjfmamqsBH6z_JDH.png"/></div></div></figure><blockquote class="nv nw nx"><p id="80d8" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图17</p></blockquote><p id="f640" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在单击按钮创建字段。此时，您应该有两个字段，并且应该在您的仪表板中看到它们。</p><h2 id="117f" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">投票字段</h2><p id="b816" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated"><code class="fe oe of og oh b">Vote</code>字段属于数字类型。因此，转到右侧，单击“数字”字段。</p><p id="0a64" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图18展示了这个字段的信息。但是，对于这个字段，您需要一些验证和一个起始值。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/960dc3a8495e394935c99100de084974.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ICOUhtrssqi8Wqk-.png"/></div></div></figure><blockquote class="nv nw nx"><p id="4ed1" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图18</p></blockquote><p id="5b8e" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">转到“验证”选项卡，将该字段设置为必填字段。您可以按照与其他步骤相同的步骤将该字段标记为必填字段。为了避免重复，我没有包括图片，因为它是相同的东西。</p><p id="5b4d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在转到“高级”选项卡，选中选项“设置初始值”。将初始值设置为“0 ”,以便所有课程的投票从0开始。请参见下面的图19以供参考。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi op"><img src="../Images/ad89f218a8cb5e47a5b3e2313f1c0bac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qy1adv4NLPZ5gkeg.png"/></div></div></figure><blockquote class="nv nw nx"><p id="ee34" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图19</p></blockquote><p id="e3d5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">创建字段，它应该出现在仪表板中。</p><h2 id="7890" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">URL字段</h2><p id="bbb1" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">对于URL字段，您可以简单地使用<em class="nt">“单行文本”</em>字段。图20显示了URL字段的基本配置。它遵循与其他字段相同的模式。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oq"><img src="../Images/3edde4f058be93f644f9578824b4ca7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*39pLr5WxJNpeTnFR.png"/></div></div></figure><blockquote class="nv nw nx"><p id="87e1" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图20</p></blockquote><p id="fece" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">另外，让我们将字段设置为必填字段。然后，转到“Validations”选项卡，选中使该字段成为必填字段的选项。</p><p id="4fd3" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此外，您希望避免恶意或无效的URL。因此，启用选项<em class="nt">“匹配特定模式”</em>。当选项处于活动状态时，应用程序只接受匹配特定正则表达式的URL。</p><p id="0aba" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面的图21说明了这一点。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi on"><img src="../Images/1781bcc2b9f511189cca45e3fa98c73b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uHQvcAJzUWbJiwod.png"/></div></div></figure><blockquote class="nv nw nx"><p id="a2e5" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图21</p></blockquote><p id="5dd6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果您转到仪表板，您应该能够看到您创建的所有字段。图22展示了您的仪表板应该是什么样子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi or"><img src="../Images/72b702a6ec7146e6cff003646f1052b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IAfd1OibzoWmnQgg.png"/></div></div></figure><blockquote class="nv nw nx"><p id="33e4" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图22</p></blockquote><p id="dd6a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在配置“作者”字段和创建关系之前，让我们配置一下<code class="fe oe of og oh b">Author</code>模型。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="1e15" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">配置作者模型</h1><p id="3ad7" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">对于作者模型，您可能对以下字段感兴趣:</p><ul class=""><li id="2f9a" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">全名</li><li id="15da" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">短篇传记</li><li id="f260" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">Twitter个人资料等社交媒体链接</li></ul><p id="7c56" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此时，您应该熟悉字段类型。因此，字段将具有以下类型:</p><ul class=""><li id="fef4" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated"><code class="fe oe of og oh b">Single line text</code>为全称</li><li id="dc4a" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated"><code class="fe oe of og oh b">Multi line text</code>为短篇传记</li><li id="67fc" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated"><code class="fe oe of og oh b">Single line text</code>对于Twitter个人资料</li></ul><p id="cb99" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">对于字段的验证规则，以下规则适用于所有字段:</p><ul class=""><li id="b898" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">所有字段都是必填的——每个作者都应该有一个名字，一个简短的传记和一个Twitter个人资料</li><li id="8fba" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">所有字段都应该是唯一的——没有两个作者应该有相同的名字、传记或Twitter个人资料。</li></ul><p id="18c8" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">从模式仪表板中，选择<em class="nt">“单行文本”</em>创建全名。图23展示了这个字段的细节。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/636bc2ccb4aca96c85294f89bbd0fc1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3pOWeAaXeEXX0x6k.png"/></div></div></figure><blockquote class="nv nw nx"><p id="0da2" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图23</p></blockquote><p id="0b46" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的图24中，您可以看到用于这个字段和其他字段的验证。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/26d787297e8f2672fce960b8dccd6c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*CVCTSecJ-_vKmXHv.png"/></div></div></figure><blockquote class="nv nw nx"><p id="4a59" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图24</p></blockquote><p id="8825" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是添加<strong class="lr io">传记</strong>字段。然后，从右侧边栏中选择<em class="nt">“多行文本”</em>字段。一旦你点击它，一个新的弹出窗口出现。您可以在图25中看到这个字段的细节。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi om"><img src="../Images/ef11d62b675370c9237be83f00951920.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3DwqdK_L22004ePP.png"/></div></div></figure><blockquote class="nv nw nx"><p id="bf5c" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图25</p></blockquote><p id="7818" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated"><strong class="lr io">传记</strong>字段有一个额外的验证规则。你不希望作者有一个空的简历或5000字的简历。因此，您可以限制<code class="fe oe of og oh b">100</code>和<code class="fe oe of og oh b">500</code>单词之间的字符数。</p><p id="1229" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图26展示了如何限制字符数。您还可以看到，您可以自定义错误消息。因此，您可以添加一条描述性的错误消息，这将有助于而不是混淆用户。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi op"><img src="../Images/ecf4053d9275c1ee86e12680bd90da05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Vk8HBXhpNnYUL3Jt.png"/></div></div></figure><blockquote class="nv nw nx"><p id="7ed7" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图26</p></blockquote><p id="b19c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，您需要为<strong class="lr io"> Twitter个人资料URL </strong>设置字段。从侧栏中，选择<em class="nt">“单行文本”</em>字段，并添加显示名称、API ID、描述和验证。</p><p id="9ea8" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的图27中，您可以看到Twitter profile URL字段的设置。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oo"><img src="../Images/e2a551bed0f0f80c41fdde71f4348103.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NRs3_Zlc2GvQVXUf.png"/></div></div></figure><blockquote class="nv nw nx"><p id="d56e" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图27</p></blockquote><p id="b3d4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">像往常一样，您使字段成为必需的和唯一的。因此，人们不能添加没有Twitter个人资料或有重复Twitter个人资料的作者。此外，您希望避免恶意或无效的URL。因此，您可以勾选<strong class="lr io">匹配特定模式</strong>特征的复选框。</p><p id="218b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">请参见下面的图28。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi os"><img src="../Images/6deea045288cc01f9ce82baa08c26144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9XpYSxXqDgn9REKh.png"/></div></div></figure><blockquote class="nv nw nx"><p id="9a48" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图28</p></blockquote><p id="078b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">你也完成了<code class="fe oe of og oh b">Author</code>模型的配置！如果您查看您的仪表板，您应该会看到您创建的字段。下面的图29说明了这一点。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi or"><img src="../Images/6aac3fbcb72aa07ec0d628cf679fec2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eKbYXH-cMIddZc8H.png"/></div></div></figure><blockquote class="nv nw nx"><p id="560f" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图29</p></blockquote><p id="2fb1" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">既然您已经配置了这两个模型，那么是时候在它们之间创建一个关系了。所以这就是你下一步要做的！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="aa23" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">建立关系</h1><p id="a185" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">在使用应用程序之前，最后一步是在<code class="fe oe of og oh b">Course</code>和<code class="fe oe of og oh b">Author</code>模型之间创建多对多关系。概括地说，一门课程可以有多个作者，作者也可以有多门课程。</p><p id="8bd5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面的视频展示了如何创建“课程”和“作者”之间的关系。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ot ou l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Create the relationship preview</figcaption></figure><p id="f703" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">创建关系的第一步是从任何模型中选择<code class="fe oe of og oh b">Reference</code>字段。<code class="fe oe of og oh b">Reference</code>字段允许您在模型之间创建不同类型的关系。</p><p id="30de" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击该字段后，会出现一个新的弹出窗口，您可以在其中定义关系。首先，您选择要引用的模型。然后，您有一个下拉框，您可以从中选择模型。</p><p id="c98e" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您可以通过两种方式创建关系:</p><ul class=""><li id="f84c" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">您可以根据需要勾选/取消勾选复选框。当您勾选/取消勾选复选框时，关系会自动更新。</li><li id="2155" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">您可以点击下拉菜单选择您想要的关系。</li></ul><p id="5879" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图30显示了这两个选项。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ov"><img src="../Images/e8c63eb517516ed0c720cf5a03ea8581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VE34k5K58CRZdddc.png"/></div></div></figure><blockquote class="nv nw nx"><p id="0487" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图30</p></blockquote><p id="31ac" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您可以配置<code class="fe oe of og oh b">reference</code>和<code class="fe oe of og oh b">reverse</code>字段。它们是为您预先配置的，但是如果您愿意，也可以使用自定义选项。对于本教程来说，预先配置的细节就足够了。</p><p id="40c7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，按“创建”按钮创建关系。正如您在上面的视频中看到的，关系已经创建。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="b2ad" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">添加内容</h1><p id="005c" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">在测试和使用应用程序之前，您需要添加内容。</p><p id="010b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">使用GraphCMS，您可以无缝地从用户界面添加内容。或者，您可以通过编程来实现。因此，在添加内容时，您有两种选择。</p><p id="9d35" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">要创建内容，单击“笔”图标，如图31所示。或者，您可以点击<em class="nt">“您的快速入门指南”</em>部分的第二个选项。请参考图31。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ow"><img src="../Images/1d29a5d5ac5b2fe02425d99b18f20711.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*9hyXWoxwv5gBpZpL.png"/></div></div></figure><blockquote class="nv nw nx"><p id="c0ce" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图31</p></blockquote><p id="492f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击两个选项中的任何一个，你将进入一个新的页面，在这里你可以添加作者和课程。</p><p id="d4af" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图32显示了可以添加内容的页面。在左侧，您可以选择想要添加的内容类型。例如，如果你想添加一个新的作者，从栏中选择<code class="fe oe of og oh b">Author</code>。</p><p id="e3a8" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦你决定了你想添加什么类型的内容，点击按钮<em class="nt"> "+创建项目"</em>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/93a8774f6dd0ef2cc814fd8f74c04902.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QhiWEHQni5_G8nKx.png"/></div></div></figure><blockquote class="nv nw nx"><p id="02d3" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图32</p></blockquote><p id="5032" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您可以创建一个新的内容。在图33中，您可以看到一个创建作者的例子。这里有您在配置模型时添加的所有字段。</p><p id="58e7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此外，在底部，您可以看到您可以添加<strong class="lr io">现有课程</strong>或者您可以<strong class="lr io">创建并添加</strong>新课程。因此，您可以链接一个现有的作者和一门课程。</p><p id="3945" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">目前，<strong class="lr io">保存并发布</strong>作者，因为您将在创建课程后链接作者和课程。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ox"><img src="../Images/101b75fe0f2bcad2392fea2eab71edc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1wxjwViWL-snLTrq.png"/></div></div></figure><blockquote class="nv nw nx"><p id="21b7" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图33</p></blockquote><p id="b310" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此时，您应该有了第一部分内容——一个作者。干得好！您将按照相同的步骤添加课程。</p><p id="1b33" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在左侧，点击“课程”选项。然后再次点击按钮<em class="nt">“+创建项目”</em>。请参考图32。</p><p id="a77d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">当新页面打开时，可以随意添加您的课程细节，或者您可以使用与图34中相同的信息。</p><p id="ea61" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在底部，你可以看到你可以为你的课程添加作者。由于您在上一步中创建了一个作者，所以让我们添加一个作者。点击<strong class="lr io">添加现有作者</strong>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/5ea5e66be14da75e353d56f35a37ca0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ae8IKBEOet5mZXvo.png"/></div></div></figure><blockquote class="nv nw nx"><p id="7dc9" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图34</p></blockquote><p id="f440" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击该按钮后，会出现一个新的弹出窗口，您可以在其中选择要添加的作者。例如，在下面的图35中，您可以看到您之前创建的作者。</p><p id="046d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">通过勾选框来选择作者，如图中突出显示的。之后，点击<em class="nt">“添加选定作者”</em>按钮添加作者。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oy"><img src="../Images/d0f5f35873471df9111a128af272d1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6-VrsGgJe4w2vSbh.png"/></div></div></figure><blockquote class="nv nw nx"><p id="9bb4" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图35</p></blockquote><p id="f988" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您应该会看到作者嵌入到您的课程中。最后，您应该会看到类似于图36的内容。</p><p id="a3b0" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在点击绿色按钮<em class="nt">“保存并发布”</em>来创建关系。作者和课程现在链接了！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oz"><img src="../Images/089b80a387fa7676f2b219c186219038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*DI8bLMMR_3a2Ysco.png"/></div></div></figure><blockquote class="nv nw nx"><p id="34e0" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图36</p></blockquote><p id="c8bd" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在您已经完成了应用程序的创建和配置，您可以开始使用它了！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="3cc4" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">查询和变异数据</h1><p id="55bb" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">GraphCMS有一个集成的GraphQL平台。这意味着您可以读取和编辑现有数据或添加新数据。</p><p id="625f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，要访问操场，请转到项目的仪表板，然后单击“play”图标，如下面的图37所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pa"><img src="../Images/e05571f5f5f1a4908a8e946b294a24ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rofbYRCdtPTW2lRJ.png"/></div></div></figure><blockquote class="nv nw nx"><p id="dfc3" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图37</p></blockquote><p id="5930" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦到了游乐场，您可以手动编写查询和变异，也可以使用explorer。使用explorer，您可以交互式地构建查询和突变。</p><p id="29a4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击按钮后，GraphQL playground打开，您就可以开始玩数据了。</p><p id="778c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图38显示了操场页面。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/32a00a53fb1ba6f07309c2a39355bedb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KQU7tZvpTlRgf1cz.png"/></div></div></figure><blockquote class="nv nw nx"><p id="4d3d" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图38</p></blockquote><p id="ebbb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们开始编写一些GraphQL查询。第一个GraphQL查询显示了所有的课程和作者。您可以看到每门课程的所有详细信息以及每位课程作者的信息。</p><p id="aa8b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">请参见下面的查询:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="579c" class="kt ku in oh b gy pf pg l ph pi">query Courses {<br/>  courses {<br/>    name<br/>    description<br/>    publishedAt<br/>    url<br/>    vote<br/>    authors {<br/>      name<br/>      biography<br/>      twitterProfile<br/>    }<br/>  }<br/>}</span></pre><p id="c7bc" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">以下查询显示了所有作者及其创建的课程。它检索关于作者及其课程的所有细节。</p><p id="57be" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">将以下查询复制到操场:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="523e" class="kt ku in oh b gy pf pg l ph pi">query Authors {<br/>  authors {<br/>    name<br/>    biography<br/>    twitterProfile<br/>    courses {<br/>      name<br/>      url<br/>      vote<br/>      description<br/>    }<br/>  }<br/>}</span></pre><p id="a7e7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">交互式构建器可以无缝地创建查询。例如，在下面的视频中，您可以看到我用GraphCMS explorer构建了两个查询。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="pj ou l"/></div></figure><p id="6f04" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">而且，可以用<strong class="lr io">突变</strong>。这意味着您可以添加和编辑应用程序中的现有数据，或者删除数据。</p><p id="46e0" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果你在“Explorer”标签的底部滚动，你可以看到一个选项，上面写着<em class="nt">“Add New Mutation”</em>。点击该选项后，您将在“Explorer”选项卡中看到所有可用的突变。</p><p id="0ecb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">例如，您可以创建一个包含以下变化的新课程:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="c8eb" class="kt ku in oh b gy pf pg l ph pi">mutation CourseCreation {<br/>  createCourse(data: {name: "Test Course", description: "Add a longer description", vote: 10, url: "https://google.com"}) {<br/>    id<br/>    name<br/>  }<br/>}</span></pre><p id="93a5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">重要的是要记住，您为一些字段添加了验证，比如描述。因此，您需要添加比示例中的描述更长的描述。之后，您可以成功地将新课程添加到应用程序中。</p><p id="0db7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">或者，您可以删除课程。要删除课程(或作者)，您需要将课程的id(或作者)传递给<code class="fe oe of og oh b">deleteCourse</code>。下面的变化显示了你如何能做到这一点。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="bd4b" class="kt ku in oh b gy pf pg l ph pi">mutation CourseDeletion {<br/>  deleteCourse(where: {id: "ckqg8wi7s13ko0c56z71xw139"}) {<br/>    id<br/>    name<br/>  }<br/>}</span></pre><p id="fea4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">创建作者类似于创建课程，只是有不同的字段。下面的突变显示了如何做到这一点。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="f46b" class="kt ku in oh b gy pf pg l ph pi">mutation AuthorCreation {<br/>  createAuthor(data: {name: "Test Author", biography: "A short biography.", twitterProfile: "https://twitter.com/testauthor"}) {<br/>    id<br/>    name<br/>  }<br/>}</span></pre><p id="e01c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的视频中，你可以看到以下的突变:</p><ul class=""><li id="fa41" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">添加和删除课程</li><li id="54ea" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">添加和删除作者</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="pj ou l"/></div></figure><p id="0212" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">GraphCMS的“Explorer”选项非常方便，它使得创建查询和变异的过程非常简单。</p><p id="a72a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">既然您已经在本教程中看到了查询和变异的例子，那么也去探索其他例子吧。尝试添加新数据或修改现有数据。</p><p id="1739" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是设置对API的访问，这样您就可以从前端应用程序中使用它。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="792a" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">设置API访问权限</h1><p id="3cf3" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">根据<a class="ae ks" href="https://graphcms.com/docs/authorization#public-api-permissions" rel="noopener ugc nofollow" target="_blank"> GraphCMS文档</a>，“默认情况下，查询和突变需要一个永久的Auth Token令牌”。</p><p id="23e6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，在您可以在应用程序中使用API之前，您需要设置权限。转到项目仪表板，单击下面图39中突出显示的两个选项中的任何一个。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/19421f3c22c2a57e0c2cb71fbe31ac71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*teMhogcU_GkVsv2O.png"/></div></div></figure><blockquote class="nv nw nx"><p id="d85e" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图39</p></blockquote><p id="ae97" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击任何选项后，将打开一个新页面，您可以在其中配置API访问。在新页面上，您应该会看到以下信息:</p><ul class=""><li id="8703" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">内容和管理API</li><li id="1f88" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">内容API权限</li><li id="f80e" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">永久授权令牌</li></ul><h2 id="3c58" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">未经验证的用户的权限</h2><p id="a496" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">如果你在页面底部滚动，你会看到<strong class="lr io">公共内容API </strong>和<strong class="lr io">永久授权令牌</strong>。使用<strong class="lr io">公共内容API </strong>，您可以为<strong class="lr io">未认证的</strong>用户设置权限。</p><p id="9b38" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">对于未经身份验证的用户，您可能只需要“读取”权限。这意味着未经验证的用户只能读取数据。</p><p id="09fd" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，从<strong class="lr io">公共内容API </strong>中，您可以点击按钮<em class="nt">“Yes，initialize defaults”</em>，如图40所示。</p><p id="35e6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如图40所示，默认权限只允许未经身份验证的人读取数据。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pk"><img src="../Images/ae98b5d0f2537485a91f985321d20682.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dBu2TqWWFZKNxnsi.png"/></div></div></figure><blockquote class="nv nw nx"><p id="a8e1" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图40</p></blockquote><p id="e72b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击按钮后，将应用默认权限，您可以为经过身份验证的用户设置权限了。</p><h2 id="f272" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">创建身份验证令牌</h2><p id="451a" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">根据<a class="ae ks" href="https://graphcms.com/docs/authorization#permanent-auth-tokens" rel="noopener ugc nofollow" target="_blank"> GraphCMS文档</a>，“永久认证令牌用于控制对查询的访问，改变内容，并以不记名令牌认证的形式出现”。</p><p id="8078" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">要为您的应用程序创建新的令牌，请单击页面底部的按钮<em class="nt"> "+ Create token" </em>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pl"><img src="../Images/67f40c494cf57ef9a1d98682711a9a03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IXkJpIVFu9slUyi_.png"/></div></div></figure><blockquote class="nv nw nx"><p id="e659" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图41</p></blockquote><p id="1350" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击“创建令牌”按钮后，会出现一个新的弹出窗口。从弹出窗口中，您可以创建新令牌。系统会提示您输入一个<strong class="lr io">名称</strong>，一个<strong class="lr io">描述</strong>，以及内容交付的<strong class="lr io">默认阶段</strong>。您希望用户只能访问发布的数据，因此保留默认选项— <code class="fe oe of og oh b">Published</code>。</p><p id="aac6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图42展示了配置令牌的弹出窗口。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pm"><img src="../Images/d7ccc040c3be7707d5e2c67610e1f50c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HWF_hYydzVOGRr3z.png"/></div></div></figure><blockquote class="nv nw nx"><p id="f9fe" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图42</p></blockquote><h2 id="869e" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">已验证用户的权限</h2><p id="8e23" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">创建令牌后，您将进入令牌控制面板来配置权限。在新页面上，您应该会看到以下信息:</p><ul class=""><li id="cd7e" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">您的令牌名称</li><li id="cb26" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">令牌描述</li><li id="539b" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">代币价值</li><li id="6174" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">内容API</li><li id="6172" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">管理API</li></ul><p id="4751" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">目前，您只对内容API感兴趣。内容API权限指定了可以对数据做什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pn"><img src="../Images/e77581ca6e4d00d19e45f042b956d308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zS1JHRBlFhuAFtAu.png"/></div></div></figure><blockquote class="nv nw nx"><p id="eca5" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图43</p></blockquote><p id="da42" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们创建一些权限。要创建新的权限，点击按钮<em class="nt"> "+ Create permission" </em>，如上面的图43所示。</p><p id="84af" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">单击“create permission”按钮后，会出现一个新的弹出窗口，您可以在其中配置您的模型。有两个重要步骤:</p><ul class=""><li id="ef00" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">从“<strong class="lr io">型号</strong>”下拉菜单中，单独选择每个型号。不要保留缺省选项“全部”，因为系统还创建了其他模型。分别为每个模型创建权限。</li><li id="b70b" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">勾选<strong class="lr io">发布</strong>和<strong class="lr io">取消发布</strong>选项。您需要能够为投票功能发布课程。</li></ul><p id="0edc" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，您希望能够通过<strong class="lr io">读取</strong>、<strong class="lr io">创建</strong>、<strong class="lr io">编辑</strong>和<strong class="lr io">删除</strong>数据。因此，勾选适当的方框。</p><p id="ff6c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图44展示了创建权限的过程。请注意，在图中，没有选择模型。因此，当您创建权限时，应该为每个模型单独创建。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi po"><img src="../Images/58a92310b8f381860d4d522da51903a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3ML8kn1E6zzQ3nv0.png"/></div></div></figure><blockquote class="nv nw nx"><p id="bb92" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图44</p></blockquote><p id="9bec" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">完成所有步骤并创建权限后，您应该会在仪表板中看到它们。例如，您的仪表板应该类似于下面的图45。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pp"><img src="../Images/293f15903f44c3607c2d012ec0dea7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SpYZgSoVBp9AB608.png"/></div></div></figure><blockquote class="nv nw nx"><p id="0882" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图45</p></blockquote><p id="bb89" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在您已经有了一个端点并设置了权限，您已经准备好构建前端部分了！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="9de8" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">如何获得您的端点和身份验证令牌</h1><p id="891d" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">这是建设前端前的最后一步，我保证。在这一步中，您将收集所有需要的信息，例如:</p><ul class=""><li id="1209" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">终点</li><li id="1820" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">你的令牌呢</li></ul><p id="8cb5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">第一步是进行如下图46所示的设置。单击滑块。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/d78030a964ba60d5331fe5ef0fe1d0dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ns7J7uuQjlUFQueJ.png"/></div></div></figure><blockquote class="nv nw nx"><p id="027f" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图46</p></blockquote><p id="fc3f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">点击设置后，您将进入另一个页面。从那里，点击左侧边栏中的<code class="fe oe of og oh b">API Access</code>选项，如图47所示。</p><p id="e071" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您应该会看到您的端点。然后，复制下面图47中突出显示的<code class="fe oe of og oh b">Content API</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/5349306ce1aca22621b50f03368fb6d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JdAQ2aOylPWE_YsZ.png"/></div></div></figure><blockquote class="nv nw nx"><p id="f35e" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图47</p></blockquote><p id="23a9" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，滚动页面底部，您应该会看到一个名为<code class="fe oe of og oh b">Permanent Auth Tokens</code>的部分。一旦您看到它，点击令牌来复制它，如下面的图48所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/b2e38db38f7ccd75c7a69475b0a35a3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FdYcQj6JUKsPYvnD.png"/></div></div></figure><blockquote class="nv nw nx"><p id="85c2" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图48</p></blockquote><p id="6c76" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">既然有了<code class="fe oe of og oh b">endpoint</code>和<code class="fe oe of og oh b">auth token</code>，就可以从外部使用GraphCMS应用程序了——例如，从Nuxt这样的JavaScript框架中。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="44db" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">创建和配置Nuxt应用程序</h1><p id="6cde" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">对于前端，您将使用Nuxt.js，这是一个Vue框架。如果你想了解更多或看到它的好处，请查看他们的官方网站。</p><p id="d01f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">第一步是创建和配置Nuxt应用程序。转到您的终端，运行以下命令:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="e369" class="kt ku in oh b gy pf pg l ph pi">npx create-nuxt-app voting-app</span></pre><p id="ff64" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">运行该命令后，您将得到一系列允许您配置项目的问题。</p><p id="f22d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图49显示了该项目的设置。您可以使用相同的选项，也可以根据需要配置项目。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pq"><img src="../Images/599d5361f43241c33c49251859bf1ddd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*w1getn6dGmX2egXu.png"/></div></div></figure><blockquote class="nv nw nx"><p id="2916" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图49</p></blockquote><p id="16cb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦安装了所有的依赖项，就可以开始构建应用程序了。但在此之前，你需要清理一下。因此，使用以下命令打开目录:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="72c4" class="kt ku in oh b gy pf pg l ph pi">cd voting-app</span></pre><p id="d35c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果您转到<code class="fe oe of og oh b">components</code>文件夹，您应该会看到两个组件:</p><ul class=""><li id="bba4" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">NuxtLogo.vue</li><li id="0691" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">Tutorial.vue</li></ul><p id="7904" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">两个都删。下一步是创建新的组件。创建以下组件:</p><ul class=""><li id="46e8" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated"><strong class="lr io"> CourseCard.vue </strong> = &gt;从名字可以推断，这个组件是用来创建课程卡片的。数据库中的每门课程都有它的卡片。</li><li id="1225" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">该组件呈现数据库中的所有课程。它还利用了<code class="fe oe of og oh b">CourseCard.vue</code>组件来呈现每个课程。</li><li id="9f93" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated"><strong class="lr io"> Hero.vue </strong>和<strong class="lr io"> Footer.vue </strong></li></ul><p id="cc50" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面的图50显示了组件文件夹应该是什么样子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pr"><img src="../Images/645585acd782e7c414f5289bf1c158de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QSfwGToBs67ryyTe.png"/></div></div></figure><blockquote class="nv nw nx"><p id="40a4" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图50</p></blockquote><h2 id="4dde" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">管理环境变量</h2><p id="d684" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">在继续之前，您需要设置环境变量，这些变量存储敏感信息，例如:</p><ul class=""><li id="6085" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">GraphCMS端点URL</li><li id="d421" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">不记名令牌</li></ul><p id="18ec" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">第一步是安装所需的软件包。转到项目的根目录，安装包<code class="fe oe of og oh b">dotenv</code>，如下所示:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="116d" class="kt ku in oh b gy pf pg l ph pi">npm i @nuxtjs/dotenv</span></pre><p id="1f9f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦你安装了这个包，你需要注册它。转到<code class="fe oe of og oh b">nuxt.config.js</code>并将模块添加到<code class="fe oe of og oh b">buildModules</code>数组。您的构建模块应该如下所示:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="320f" class="kt ku in oh b gy pf pg l ph pi">buildModules: [<br/>    // https://go.nuxtjs.dev/eslint<br/>    '@nuxtjs/eslint-module',<br/>    // https://go.nuxtjs.dev/tailwindcss<br/>    '@nuxtjs/tailwindcss',<br/>    '@nuxtjs/dotenv'<br/>  ],</span></pre><p id="7ef3" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是创建<code class="fe oe of og oh b">.env</code>文件，您将在其中添加您的敏感信息。在项目的根目录下创建<code class="fe oe of og oh b">.env</code>文件。您可以按如下方式操作:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="bb1d" class="kt ku in oh b gy pf pg l ph pi">touch .env</span></pre><p id="f23b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在打开文件并添加以下几行:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="f67c" class="kt ku in oh b gy pf pg l ph pi">GRAPHCMS_ENDPOINT=<br/>BEARER=</span></pre><p id="5e4a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">当然，你需要添加你的信息。添加您的GraphCMS端点URL和不记名令牌。<strong class="lr io">在进一步移动</strong>之前，您需要将<code class="fe oe of og oh b">.env</code>文件添加到<code class="fe oe of og oh b">.gitignore</code>中，这样您就不会公开您的敏感信息。</p><p id="6476" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在，您可以访问敏感信息，例如:</p><ul class=""><li id="96b3" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated"><code class="fe oe of og oh b">process.env.GRAPHCMS_ENDPOINT</code></li><li id="23a2" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated"><code class="fe oe of og oh b">process.env.BEARER</code></li></ul><p id="4a70" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们进入下一步，这是关于创建GraphCMS Nuxt插件。</p><h2 id="a293" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">GraphCMS Nuxt插件</h2><p id="9f03" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">在继续之前，您需要添加GraphCMS插件。GraphCMS客户端允许您向GraphCMS数据库发出请求。</p><p id="917b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">所以，首先，你需要在项目的根目录下创建一个名为<code class="fe oe of og oh b">plugins</code>的新文件夹。之后，在<code class="fe oe of og oh b">plugins</code>文件夹中创建一个名为<code class="fe oe of og oh b">graphcms.js</code>的文件。</p><p id="f35f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦创建了目录和文件，打开<code class="fe oe of og oh b">graphcms.js</code>并添加以下代码:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="1b8f" class="kt ku in oh b gy pf pg l ph pi">import { GraphQLClient } from 'graphql-request';<br/><br/>const graphcmsClient = new GraphQLClient(process.env.GRAPHCMS_ENDPOINT, {<br/>    headers: {<br/>        authorization: `Bearer ${process.env.BEARER}`<br/>    }<br/>});<br/><br/>export default(_, inject) =&gt; {<br/>    inject('graphcms', graphcmsClient);<br/>};</span></pre><p id="6dbb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">上面的代码创建了一个新的GraphQL客户端实例，并传递您的<code class="fe oe of og oh b">GraphCMS</code>端点和承载令牌。因此，您可以在Nuxt.js应用程序的任何地方使用<code class="fe oe of og oh b">graphcms</code>客户端。</p><p id="c954" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">既然已经设置好了一切，下一步就是单独构建每个组件。<strong class="lr io">在您构建并使用所有组件之前，应用程序将无法运行。</strong>因此，只能尝试在以后运行它。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="27f1" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">构建Hero.vue</h2><p id="d846" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">第一个组件是<code class="fe oe of og oh b">Hero.vue</code>。这个组件只有两行文本。打开它并添加以下代码:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="408d" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>  &lt;div class="flex flex-col items-center text-center mt-10"&gt;<br/>      &lt;h1 class="text-3xl"&gt;Vote &lt;span class="font-bold"&gt;your favourite&lt;/span&gt; tech courses&lt;/h1&gt;<br/>      &lt;div class="m-4 text-lg"&gt;<br/>          &lt;p&gt;Finding the right courses in tech is difficult so we make it easier&lt;/p&gt;<br/>      &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="5a00" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面的图51展示了运行应用程序时您将看到的内容。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ps"><img src="../Images/bed05f5e2e65a64974a50fa3e5fb3f96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Y2n1puTJr1LTjvkW.png"/></div></div></figure><blockquote class="nv nw nx"><p id="a445" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图51</p></blockquote><p id="5f49" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在转到<code class="fe oe of og oh b">pages &gt; index.vue</code>并删除文件中的所有内容。然后，添加以下代码:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="d79e" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div class="relative flex flex-col items-top justify-center min-h-screen bg-gray-100 sm:items-center sm:pt-0"&gt;<br/>      &lt;Hero/&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="27db" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在上面的代码中，您使用了新创建的组件Hero。下一步是构建课程卡组件，以便可以在页面上显示课程。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="43f6" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">构建CourseCard.vue</h2><p id="d5a2" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">课程卡片显示所有课程的信息。它显示名称、描述和其他详细信息。<strong class="lr io">它还允许你投票支持一门课程。</strong></p><p id="4fc3" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">让我们从构建模板开始。你在小胡子符号中看到的一切—<code class="fe oe of og oh b">{{ }}</code>—都是来自数据库的数据。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="c1b3" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div class="max-w-4xl mx-auto px-8 sm:px-6 lg:px-8 flex flex-row justify-center"&gt;<br/>        &lt;div class="mt-8 bg-white overflow-hidden shadow sm:rounded-lg p-6"&gt;<br/>            &lt;h2 class="text-2xl leading-7 font-semibold"&gt;<br/>                &lt;NuxtLink :to='id' class="hover:underline"&gt;{{ name }}&lt;/NuxtLink&gt;<br/>            &lt;/h2&gt;<br/>            &lt;p class="mt-1 font-extralight italic text-gray-600"&gt;by {{ authors.toString() }}&lt;/p&gt;<br/>            &lt;p class="mt-3 text-gray-600 italic"&gt;<br/>                {{ excerpt }} &lt;br&gt;<br/>            &lt;/p&gt;<br/>            &lt;div class="flex flex-col items-center border-t border-dashed mt-5"&gt;<br/>                &lt;p class="mt-4 pt-4 text-gray-800 font-bold text-xl tracking-wider"&gt;<br/>                    The course has &lt;code class="bg-gray-100 text-2xl p-1 rounded border"&gt;{{ newVote }}&lt;/code&gt; votes.<br/>                &lt;/p&gt;<br/>                &lt;p&gt;<br/>                    &lt;button class="bg-white hover:bg-gray-200 mt-5 mb-2 text-gray-800 font-semibold py-2 px-4 border border-gray-400 rounded shadow" @click="fetchData"&gt;Vote +1&lt;/button&gt;<br/>                &lt;/p&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="b882" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在组件的第二部分，您描述了属性的类型、方法和计算属性。</p><p id="b117" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">方法<code class="fe oe of og oh b">fetchData</code>允许用户投票支持课程。当用户点击投票按钮时，调用<code class="fe oe of og oh b">fetchData</code>方法，它向数据库发出POST请求。然后，它增加投票数并返回新值。</p><p id="f659" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">端点<code class="fe oe of og oh b">/upvote/${this.id}</code>是在Nuxt中创建的自定义API端点。在下一节中，您将看到如何做到这一点。</p><p id="2424" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">由于<strong class="lr io">变异道具</strong>是一个反模式，我们创建了一个名为<code class="fe oe of og oh b">newVote</code>的新领域。将<code class="fe oe of og oh b">vote</code>道具的值赋给这个新属性。此外，当用户对课程投票时，属性<code class="fe oe of og oh b">newVote</code>被更新并显示在页面上。</p><p id="9c67" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，您有一个计算属性<code class="fe oe of og oh b">excerpt</code>，它只显示了部分描述。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="d685" class="kt ku in oh b gy pf pg l ph pi">&lt;script&gt;<br/>export default {<br/>    props: {<br/>        id: {<br/>            type: String,<br/>            required: true<br/>        },<br/>        name: {<br/>            type: String,<br/>            required: true<br/>        },<br/>        description: {<br/>            type: String,<br/>            required: true<br/>        },<br/>        url: {<br/>            type: String,<br/>            required: true<br/>        },<br/>        vote: {<br/>            type: Number,<br/>            required: true<br/>        },<br/>        authors: {<br/>            type: Array,<br/>            required: true<br/>        }<br/>    },<br/>    data() {<br/>        return {<br/>            newVote: this.vote<br/>        }<br/>    },<br/>    methods: {<br/>        async fetchData() {<br/>                const options = {<br/>                method: "POST"<br/>            };<br/><br/>            const upvoted = await fetch(`/upvote/${this.id}`, options).then(res =&gt; res.json());<br/><br/>            this.newVote = upvoted.votes;<br/>        }<br/>    },<br/>    computed: {<br/>        excerpt() {<br/>            return this.description.substring(0, 150) + "...";<br/>        }<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="4501" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图52展示了课程卡的外观。此外，当您点击课程名称时，它会将您带到课程页面。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pt"><img src="../Images/a800b2d9a0789c2217305982cca1337b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8GiwStGYIK4Xem_5.png"/></div></div></figure><blockquote class="nv nw nx"><p id="bf4c" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图52</p></blockquote><p id="0499" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此时，您已经有了每门课程的卡片。所以问题是——如何循环遍历课程列表并呈现它们。</p><h2 id="4e57" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">用于投票的自定义API端点</h2><p id="5769" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">js允许您在应用程序中创建自定义API端点。例如，您可以在Nuxt应用程序中创建一个Express服务器。</p><p id="b149" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">Nuxt.js有一个<code class="fe oe of og oh b">serverMiddleware</code>属性，允许您使用额外的定制API路由，而不需要外部服务器。如果你想阅读更多关于<code class="fe oe of og oh b"><a class="ae ks" href="https://nuxtjs.org/docs/2.x/configuration-glossary/configuration-servermiddleware" rel="noopener ugc nofollow" target="_blank">serverMiddlware</a></code>属性的内容，我推荐官方文档。</p><p id="851d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，<strong class="lr io">第一步</strong>是在项目的根目录下创建一个文件夹。创建一个名为<code class="fe oe of og oh b">server-middleware</code>的新文件夹。然后，创建一个新文件，<code class="fe oe of og oh b">upvoteCourse.js</code>目录内。</p><p id="7912" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated"><strong class="lr io">下一步</strong>是打开文件<code class="fe oe of og oh b">nuxt.config.js</code>并在文件末尾添加以下一行:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="969b" class="kt ku in oh b gy pf pg l ph pi">serverMiddleware: ['~/server-middleware/upvoteCourse.js']</span></pre><p id="3a78" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">您的文件<code class="fe oe of og oh b">nuxt.config.js</code>应该如下所示:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="3a89" class="kt ku in oh b gy pf pg l ph pi">export default {<br/>  // Target: https://go.nuxtjs.dev/config-target<br/>  target: 'static',<br/><br/>  // Global page headers: https://go.nuxtjs.dev/config-head<br/>  head: {<br/>    title: 'Vote Tech Courses',<br/>    htmlAttrs: {<br/>      lang: 'en'<br/>    },<br/>    meta: [<br/>      { charset: 'utf-8' },<br/>      { name: 'viewport', content: 'width=device-width, initial-scale=1' },<br/>      { hid: 'description', name: 'description', content: '' },<br/>      { name: 'format-detection', content: 'telephone=no' }<br/>    ],<br/>    link: [<br/>      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }<br/>    ]<br/>  },<br/><br/>  // Plugins to run before rendering page: https://go.nuxtjs.dev/config-plugins<br/>  plugins: [<br/>    '~/plugins/graphcms.js'<br/>  ],<br/><br/>  // Auto import components: https://go.nuxtjs.dev/config-components<br/>  components: true,<br/><br/>  // Modules for dev and build (recommended): https://go.nuxtjs.dev/config-modules<br/>  buildModules: [<br/>    // https://go.nuxtjs.dev/eslint<br/>    '@nuxtjs/eslint-module',<br/>    // https://go.nuxtjs.dev/tailwindcss<br/>    '@nuxtjs/tailwindcss',<br/>  ],<br/><br/>  serverMiddleware: ['~/server-middleware/upvoteCourse.js']<br/>}</span></pre><p id="a9ea" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在，您已经准备好为投票课程构建自定义API端点了。打开文件<code class="fe oe of og oh b">upvoteCourse.js</code>，导入以下包:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="6ec2" class="kt ku in oh b gy pf pg l ph pi">const express = require('express');<br/>const { GraphQLClient } = require('graphql-request');</span></pre><p id="6fbf" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">首先，您需要<code class="fe oe of og oh b">express</code>来创建API端点。其次，您需要<code class="fe oe of og oh b">graphql-request</code>向GraphCMS服务器发出GraphQL请求。</p><p id="c06b" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您需要:</p><ul class=""><li id="0384" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">创建快速实例</li><li id="a068" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">使用<code class="fe oe of og oh b">json()</code>中间件</li></ul><p id="6ad2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">导入上述包后，添加以下行:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="2322" class="kt ku in oh b gy pf pg l ph pi">const app = express();<br/><br/>app.use(express.json());</span></pre><p id="e290" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在构建API端点之前还有一个步骤。您需要创建一个新的GraphQL客户端实例。GraphQL实例需要您的GraphCMS内容API URL和不记名令牌。</p><p id="37be" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">添加以下代码:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="c341" class="kt ku in oh b gy pf pg l ph pi">const client = new GraphQLClient(<br/>    process.env.GRAPHCMS_ENDPOINT,<br/>    {<br/>        headers: {<br/>            authorization: `Bearer ${process.env.BEARER}`,<br/>        }<br/>    }<br/>);</span></pre><p id="7380" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">此时，您的文件<code class="fe oe of og oh b">upvoteCourse.js</code>应该是这样的:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="0d8d" class="kt ku in oh b gy pf pg l ph pi">const express = require('express');<br/>const { GraphQLClient } = require('graphql-request');<br/><br/>const app = express();<br/><br/>app.use(express.json());<br/><br/>const client = new GraphQLClient(<br/>    process.env.GRAPHCMS_ENDPOINT,<br/>    {<br/>        headers: {<br/>            authorization: `Bearer ${process.env.BEARER}`,<br/>        }<br/>    }<br/>);</span></pre><p id="08c1" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在是时候构建API端点了。让我们从函数头开始。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="ce19" class="kt ku in oh b gy pf pg l ph pi">app.post('/upvote/:slug', async (req, res) =&gt; {<br/><br/>}</span></pre><p id="1ab8" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">您需要向<code class="fe oe of og oh b">/upvote/:slug</code>端点发出异步请求。因此，你需要使用<code class="fe oe of og oh b">POST</code>方法。</p><p id="a2c6" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">由于<code class="fe oe of og oh b">:slug</code>是一个动态值，您需要从URL中检索它。您可以从URL中获取slug，如下所示:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="6866" class="kt ku in oh b gy pf pg l ph pi">app.post('/upvote/:slug', async (req, res) =&gt; {<br/>    const { slug } = req.params;<br/>}</span></pre><p id="db99" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">您访问了<code class="fe oe of og oh b">request</code>对象的<code class="fe oe of og oh b">params</code>属性。</p><p id="58f9" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您将在方法中执行<strong class="lr io">三个</strong>动作:</p><ul class=""><li id="4448" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">您可以使用课程ID<code class="fe oe of og oh b">slug</code>从数据库中获取课程</li><li id="23dd" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">增加选票</li><li id="65e0" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">重新发布课程</li></ul><p id="8ce5" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，您需要一个GraphQL查询和两个突变。您可以通过查询从数据库中检索课程。然而，要投票支持并出版一门课程，你需要一个突变。</p><p id="9f5d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的代码片段中，您可以看到查询和两个突变:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="d5a6" class="kt ku in oh b gy pf pg l ph pi">app.post('/upvote/:slug', async (req, res) =&gt; {<br/>    const { slug } = req.params;<br/><br/>    const getCourse =<br/>    `<br/>        query getCourse($slug: ID!) {<br/>            course(where: { id: $slug }) {<br/>                id<br/>                vote<br/>                name<br/>            }<br/>        }<br/>    `;<br/><br/>    const upvoteCourse = <br/>    `<br/>        mutation voteCourse($slug: ID!, $existingVotes: Int) {<br/>            updateCourse(where: { id: $slug }, data: { vote: $existingVotes }) {<br/>                id<br/>                name<br/>                vote<br/>            }<br/>        }<br/>    `;<br/><br/>    const publishCourse = <br/>    `<br/>        mutation publishCourse($slug: ID!) {<br/>            publishCourse(where: { id: $slug }) {<br/>                id<br/>                name<br/>                vote<br/>            }<br/>        }<br/>    `;<br/>});</span></pre><p id="e726" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">当您向GraphCMS数据库发出请求时，您将使用查询和突变。</p><p id="84e0" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，使用GraphQL客户端发出请求。以下请求从数据库中检索课程:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="5637" class="kt ku in oh b gy pf pg l ph pi">const { course } = await client.request(getCourse, { slug });</span></pre><p id="2070" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦课程从数据库中返回，就增加投票数并将其存储在一个新的变量中。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="a906" class="kt ku in oh b gy pf pg l ph pi">const existingVotes = course.vote + 1;</span></pre><p id="8b6f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">之后，您通过向数据库发出请求并传递新增加的数字<code class="fe oe of og oh b">slug</code>和<code class="fe oe of og oh b">existingVotes</code>来对课程进行投票。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="b348" class="kt ku in oh b gy pf pg l ph pi">const voteCourse = await client.request(upvoteCourse, { slug, existingVotes });</span></pre><p id="3588" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">当您对现有数据执行变异时，它会进入<code class="fe oe of og oh b">DRAFT</code>阶段。这意味着更新的数据在前端是不可见的，除非你发布它。</p><p id="2807" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，您再次请求服务器发布数据。您通过了slug，因此数据库知道要更新什么课程。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="ded8" class="kt ku in oh b gy pf pg l ph pi">const publishedCourse = await client.request(publishCourse, { slug });</span></pre><p id="2435" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">最后，在所有操作成功之后，您发送一个JSON响应，其中包含:</p><ul class=""><li id="4916" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">一条信息</li><li id="c1fc" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">更新后的投票数</li></ul><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="3439" class="kt ku in oh b gy pf pg l ph pi">res.json({ message: 'Course upvoted successfully!', votes: publishedCourse.publishCourse.vote });</span></pre><p id="b92e" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面是<code class="fe oe of og oh b">upvoteCourse.js</code>的完整代码:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="7bac" class="kt ku in oh b gy pf pg l ph pi">const express = require('express');<br/>const { GraphQLClient } = require('graphql-request');<br/><br/>const app = express();<br/><br/>app.use(express.json());<br/><br/>const client = new GraphQLClient(<br/>    process.env.GRAPHCMS_ENDPOINT,<br/>    {<br/>        headers: {<br/>            authorization: `Bearer ${process.env.BEARER}`,<br/>        }<br/>    }<br/>);<br/><br/>app.post('/upvote/:slug', async (req, res) =&gt; {<br/>    const { slug } = req.params;<br/><br/>    const getCourse =<br/>    `<br/>        query getCourse($slug: ID!) {<br/>            course(where: { id: $slug }) {<br/>                id<br/>                vote<br/>                name<br/>            }<br/>        }<br/>    `;<br/><br/>    const upvoteCourse = <br/>    `<br/>        mutation voteCourse($slug: ID!, $existingVotes: Int) {<br/>            updateCourse(where: { id: $slug }, data: { vote: $existingVotes }) {<br/>                id<br/>                name<br/>                vote<br/>            }<br/>        }<br/>    `;<br/><br/>    const publishCourse = <br/>    `<br/>        mutation publishCourse($slug: ID!) {<br/>            publishCourse(where: { id: $slug }) {<br/>                id<br/>                name<br/>                vote<br/>            }<br/>        }<br/>    `;<br/><br/>    const { course } = await client.request(getCourse, { slug });<br/>    const existingVotes = course.vote + 1;<br/>    const voteCourse = await client.request(upvoteCourse, { slug, existingVotes });<br/>    const publishedCourse = await client.request(publishCourse, { slug });<br/><br/>    res.json({ message: 'Course upvoted successfully!', votes: publishedCourse.publishCourse.vote });<br/>});<br/><br/>module.exports = app</span></pre><p id="b5ec" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在，您可以使用自定义API端点来投票支持课程。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="6017" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">构建CourseList.vue</h2><p id="7c0d" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated"><code class="fe oe of og oh b">CourseList.vue</code>组件遍历课程数组，并单独呈现每个课程。</p><p id="a0fa" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的代码中，您为每个课程调用了<code class="fe oe of og oh b">CourseCard</code>组件，并且您传递了所需的道具。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="d044" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div&gt;<br/>        &lt;ul&gt;<br/>            &lt;li v-for="course in courses" :key="course.id"&gt;<br/>                &lt;CourseCard<br/>                    :id="course.id"<br/>                    :name="course.name"<br/>                    :description="course.description"<br/>                    :url="course.url"<br/>                    :vote="course.vote"<br/>                    :authors="course.authors.map(author =&gt; author.name)"<br/>                /&gt;<br/>            &lt;/li&gt;<br/>        &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="6573" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在组件的第二部分，您可以指定属性细节。你只有这个组件的道具——<code class="fe oe of og oh b">courses</code>。它的类型是array，它是必需的，默认情况下，它是一个空数组。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="6114" class="kt ku in oh b gy pf pg l ph pi">&lt;script&gt;<br/>export default {<br/>    props: {<br/>        courses: {<br/>            type: Array,<br/>            default: () =&gt; {<br/>                return []<br/>            },<br/>            required: true<br/>        }<br/>    },<br/>}<br/>&lt;/script&gt;</span></pre><p id="fbd4" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在，您可以使用<code class="fe oe of og oh b">CourseList</code>组件在页面上呈现数据库中的课程。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h2 id="9d14" class="kt ku in bd kv kw kx dn ky kz la dp lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">Build Footer.vue</h2><p id="da90" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">页脚组件只包含两个图标:</p><ul class=""><li id="1b77" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">GitHub图标</li><li id="61f5" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">推特图标</li></ul><p id="028d" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下面，你可以看到页脚的代码(<em class="nt">它对图标</em>使用SVGs):</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="5cf0" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div class="flex justify-center pt-4 space-x-2 mb-10"&gt;<br/>        &lt;a href="https://github.com/" target="_blank"&gt;&lt;svg<br/>            class="w-6 h-6 text-gray-600 hover:text-gray-800"<br/>            <br/>            xmlns:xlink="http://www.w3.org/1999/xlink"<br/>            aria-hidden="true"<br/>            role="img"<br/>            width="32"<br/>            height="32"<br/>            preserveAspectRatio="xMidYMid meet"<br/>            viewBox="0 0 24 24"<br/>        &gt;&lt;path d="M12 2.247a10 10 0 0 0-3.162 19.487c.5.088.687-.212.687-.475c0-.237-.012-1.025-.012-1.862c-2.513.462-3.163-.613-3.363-1.175a3.636 3.636 0 0 0-1.025-1.413c-.35-.187-.85-.65-.013-.662a2.001 2.001 0 0 1 1.538 1.025a2.137 2.137 0 0 0 2.912.825a2.104 2.104 0 0 1 .638-1.338c-2.225-.25-4.55-1.112-4.55-4.937a3.892 3.892 0 0 1 1.025-2.688a3.594 3.594 0 0 1 .1-2.65s.837-.262 2.75 1.025a9.427 9.427 0 0 1 5 0c1.912-1.3 2.75-1.025 2.75-1.025a3.593 3.593 0 0 1 .1 2.65a3.869 3.869 0 0 1 1.025 2.688c0 3.837-2.338 4.687-4.563 4.937a2.368 2.368 0 0 1 .675 1.85c0 1.338-.012 2.413-.012 2.75c0 .263.187.575.687.475A10.005 10.005 0 0 0 12 2.247z" fill="currentColor" /&gt;&lt;/svg&gt;&lt;/a&gt;<br/>        &lt;a href="https://twitter.com/" target="_blank"&gt;&lt;svg<br/>            class="w-6 h-6 text-gray-600 hover:text-gray-800"<br/>            <br/>            xmlns:xlink="http://www.w3.org/1999/xlink"<br/>            aria-hidden="true"<br/>            role="img"<br/>            width="32"<br/>            height="32"<br/>            preserveAspectRatio="xMidYMid meet"<br/>            viewBox="0 0 24 24"<br/>        &gt;&lt;path d="M22.46 6c-.77.35-1.6.58-2.46.69c.88-.53 1.56-1.37 1.88-2.38c-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29c0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15c0 1.49.75 2.81 1.91 3.56c-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07a4.28 4.28 0 0 0 4 2.98a8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21C16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56c.84-.6 1.56-1.36 2.14-2.23z" fill="currentColor" /&gt;&lt;/svg&gt;&lt;/a&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="1413" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">建立主页</h1><p id="dc6e" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">像往常一样，我们把主页分成两部分。主页位于<code class="fe oe of og oh b">pages</code>目录下，名为<code class="fe oe of og oh b">index.js</code>。</p><p id="bbcb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">主页由以下部分组成:</p><ol class=""><li id="21d2" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh pu mt mu mv bi translated">英雄成分</li><li id="9756" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh pu mt mu mv bi translated">CourseList组件，呈现数据库中的所有课程</li><li id="ce8f" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh pu mt mu mv bi translated">页脚组件</li></ol><p id="9895" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，将它们添加到您的模板中，如下所示:</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="6044" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div class="relative flex flex-col items-top justify-center min-h-screen bg-gray-100 sm:items-center sm:pt-0"&gt;<br/>      &lt;Hero/&gt;<br/>      &lt;CourseList :courses="courses" /&gt;<br/>      &lt;Footer/&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="f8cb" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果你看一下<code class="fe oe of og oh b">CourseList</code>组件，你会看到<code class="fe oe of og oh b">courses</code>道具被通过。道具是一个包含对象的数组，每个对象代表一个单独的球场。</p><p id="cbee" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">您从数据库中获得了<code class="fe oe of og oh b">courses</code>数组。您可以使用<code class="fe oe of og oh b">asyncData</code>钩子从数据库中异步加载数据。此外，您发出一个GraphQL请求，因此需要一个特殊的包。</p><p id="a394" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在下面的代码片段中，您使用<code class="fe oe of og oh b">graphql-request</code>包和<code class="fe oe of og oh b">asyncData</code>钩子向GraphCMS发出请求。您还可以指定要返回的字段。然后，一旦从数据库中获得了数据，就返回它并将其作为道具传递给<code class="fe oe of og oh b">CourseList</code>。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="b190" class="kt ku in oh b gy pf pg l ph pi">&lt;script&gt;<br/>import { gql } from 'graphql-request';<br/><br/>export default {<br/>  async asyncData({ $graphcms }) {<br/>    const { courses } = await $graphcms.request(<br/>      gql`<br/>        {<br/>          courses(orderBy: vote_DESC) {<br/>            id<br/>            name<br/>            description<br/>            url<br/>            vote<br/>            authors {<br/>              name<br/>            }<br/>          }<br/>        }<br/>      `<br/>    );<br/><br/>    return { courses };<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="2ed8" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">如果您运行该应用程序，主页应该以降序显示数据库中的所有课程。这意味着得票最多的课程将首先显示。下面的图53展示了一个来自我的数据库的课程的例子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pv"><img src="../Images/e30fba692275b44e447cf3fa34aca92b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lBZarlvncq1xmVAq.png"/></div></div></figure><blockquote class="nv nw nx"><p id="4cf1" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图53</p></blockquote><p id="613e" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">下一步是为每个课程创建一个单独的页面。在页面上，你会看到所有的课程详情和关于作者的细节。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="1ab0" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">创建个人课程页面</h1><p id="c3cf" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">教程的最后一步是为每门课程创建个人页面。个人页面显示了关于课程和作者的更多信息。</p><p id="7d5c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在继续之前，对动态页面如何在Nuxt中工作有一个概念是很重要的。要在Nuxt中创建动态页面，需要在页面名称前使用下划线(<strong class="lr io"> _ </strong>)。</p><p id="9a40" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">因此，在“pages”文件夹中创建一个新页面<code class="fe oe of og oh b">_slug.vue</code>。因为您在它前面加了下划线，所以它将是一个动态页面。<strong class="lr io">然后，您可以从参数中访问该值。</strong>在这种情况下，您可以通过<code class="fe oe of og oh b">params.slug</code>获得值，如您将在下面的代码中看到的。</p><p id="8f2a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">现在，让我们进入第一步，即构建模板。你在小胡子符号中看到的一切——<code class="fe oe of og oh b">{{ }}</code>——都是来自数据库的动态数据。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="57f6" class="kt ku in oh b gy pf pg l ph pi">&lt;template&gt;<br/>    &lt;div class="relative flex flex-col items-top justify-center min-h-screen bg-gray-100 sm:items-center sm:pt-0"&gt;<br/>      &lt;div class="max-w-4xl mx-auto px-8 sm:px-6 lg:px-8 flex flex-col justify-center"&gt;<br/>          &lt;Hero/&gt;<br/>          &lt;div class="mt-8 bg-white overflow-hidden shadow sm:rounded-lg p-6"&gt;<br/>              &lt;h2 class="text-2xl leading-7 font-semibold"&gt;<br/>                {{ course.name }}<br/>              &lt;/h2&gt;<br/>              &lt;p class="mt-1 font-extralight italic text-gray-600"&gt;by {{ course.authors.map(author =&gt; author.name).toString() }}&lt;/p&gt;<br/>              &lt;p class="mt-3 text-gray-600"&gt;<br/>                  {{ course.description }} &lt;br&gt;<br/>              &lt;br&gt;<br/>                  We recommend you take a look at the &lt;a :href="course.url" target="_blank" class="text-green-500 hover:underline"&gt;course&lt;/a&gt; page.&lt;br&gt;<br/>              &lt;/p&gt;<br/>              &lt;div class="flex flex-col items-center border-t border-dashed mt-5"&gt;<br/>                  &lt;p class="mt-4 pt-4 text-gray-800 font-bold text-xl tracking-wider"&gt;<br/>                      The course has &lt;code class="bg-gray-100 text-2xl p-1 rounded border"&gt;{{ course.vote }}&lt;/code&gt; votes.<br/>                  &lt;/p&gt;<br/>              &lt;/div&gt;<br/>          &lt;/div&gt;<br/>      &lt;/div&gt;<br/>      &lt;div class="max-w-4xl mx-auto px-8 sm:px-6 lg:px-8 flex flex-col justify-center"&gt;<br/>          &lt;div class="mt-8 bg-white overflow-hidden shadow sm:rounded-lg p-6"&gt;<br/>              &lt;h2 class="text-2xl leading-7 font-semibold mb-3"&gt;<br/>                {{ course.authors.map(author =&gt; author.name).toString() }}<br/>              &lt;/h2&gt;<br/>              &lt;a :href="course.authors.map(author =&gt; author.twitterProfile).toString()" class="mt-1 font-extralight italic text-gray-600"&gt;&lt;code class="bg-gray-100 p-2 rounded border"&gt;@catalinmpit&lt;/code&gt; Twitter&lt;/a&gt;<br/>              &lt;div class="flex flex-col items-center border-t border-dashed mt-5"&gt;<br/>                  &lt;p class="mt-4 pt-4 text-gray-800 tracking-wider"&gt;<br/>                    {{ course.authors.map(author =&gt; author.biography).toString() }}<br/>                  &lt;/p&gt;<br/>              &lt;/div&gt;<br/>          &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="f11c" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">在第二部分中，您使用<code class="fe oe of og oh b">graphql-request</code>向GraphCMS数据库发出一个GraphQL请求。您还将<code class="fe oe of og oh b">slug</code>传递给请求，它代表课程的ID。</p><p id="233f" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">使用这个ID，GraphCMS数据库知道检索哪个课程并发回。此外，您还可以检索关于课程作者的信息。</p><p id="ab52" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">一旦检索到课程，它就返回它，以便您可以在页面上呈现它。</p><pre class="kd ke kf kg gt pb oh pc pd aw pe bi"><span id="c1f8" class="kt ku in oh b gy pf pg l ph pi">&lt;script&gt;<br/>import { gql } from 'graphql-request';<br/><br/>export default {<br/>  async asyncData({ $graphcms, params }) {<br/>    const { slug } = params;<br/>    const query = <br/>      gql`<br/>        query getCourse($slug: ID!) {<br/>          course(where: { id: $slug }) {<br/>            id<br/>            name<br/>            description<br/>            url<br/>            vote<br/>            authors {<br/>              name<br/>              biography<br/>              twitterProfile<br/>            }<br/>          }<br/>        }<br/>      `<br/>    ;<br/><br/>    const course = await $graphcms.request(query, { slug });<br/>    return course;<br/>  }<br/>}<br/>&lt;/script&gt;</span></pre><p id="d7c7" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">图54展示了个人课程页面的外观。你可以看到关于课程和作者的所有细节。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pw"><img src="../Images/d46c125bb4f920992bed8b0730ca4f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Oj7tNMBuCHgwBSg1.png"/></div></div></figure><blockquote class="nv nw nx"><p id="2a1a" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">图54</p></blockquote><p id="269a" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">你完了！</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="6893" class="ni ku in bd kv nj nk nl ky nm nn no lb jt np ju lf jw nq jx lj jz nr ka ln ns bi translated">结论</h1><p id="42d2" class="pw-post-body-paragraph lp lq in lr b ls lt jo lu lv lw jr lx lc ly lz ma lg mb mc md lk me mf mg mh ig bi translated">构建应用程序做得很好！现在你可以存储科技课程，并允许人们投票。</p><p id="def0" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">这个应用程序并不完美，你可以做一些改进。其中一些如下:</p><ul class=""><li id="b1f4" class="mn mo in lr b ls mi lv mj lc mp lg mq lk mr mh ms mt mu mv bi translated">为课程和作者添加图像</li><li id="6cac" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">允许人们发表评论</li><li id="a24f" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">每个用户只能投一票</li><li id="7947" class="mn mo in lr b ls mw lv mx lc my lg mz lk na mh ms mt mu mv bi translated">添加身份验证和授权</li></ul><p id="24c2" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated">还有更多。</p><blockquote class="nv nw nx"><p id="2716" class="lp lq nt lr b ls mi jo lu lv mj jr lx ny mk lz ma nz ml mc md oa mm mf mg mh ig bi translated">这里可以看到直播应用<a class="ae ks" href="https://vapp-ten.vercel.app/" rel="noopener ugc nofollow" target="_blank">。此外，GitHub存储库可从</a><a class="ae ks" href="https://github.com/catalinpit/vote-tech-courses" rel="noopener ugc nofollow" target="_blank">链接</a>获得。</p></blockquote><p id="9b91" class="pw-post-body-paragraph lp lq in lr b ls mi jo lu lv mj jr lx lc mk lz ma lg ml mc md lk mm mf mg mh ig bi translated"><em class="nt">更多内容请看</em><a class="ae ks" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="lr io"><em class="nt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
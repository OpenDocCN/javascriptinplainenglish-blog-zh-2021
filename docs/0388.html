<html>
<head>
<title>Implementing Infinite Scroll In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中实现无限滚动</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/implementing-infinite-scroll-in-react-34b112813de7?source=collection_archive---------4-----------------------#2021-01-23">https://javascript.plainenglish.io/implementing-infinite-scroll-in-react-34b112813de7?source=collection_archive---------4-----------------------#2021-01-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/de1bec67d1094fddee1f2663abc947e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*u2NsCOwtd1isp6ighrPY8A.jpeg"/></div></figure><p id="b6d6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在本文中，我们将开发一个React应用程序，该应用程序将从下面的API—<a class="ae kp" href="https://jsonplaceholder.typicode.com/photos" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/photos</a>中获取数据(一页一页)，并将它们以表格的形式显示在浏览器上。当应用程序在浏览器中打开时，它将显示第一页的内容，滚动时，应用程序将加载并显示后续页面。应用程序的最终外观如下所示—</p><figure class="kq kr ks kt gt jo"><div class="bz fp l di"><div class="ku kv l"/></div></figure><h1 id="c491" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">初始设置</h1><p id="5f70" class="pw-post-body-paragraph jr js in jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ig bi translated">首先，我们已经确保Node.js安装在我们的系统中。如果是这样，我们将创建一个名为<strong class="jt io"> React_Projects </strong>的目录，然后，我们将打开终端并导航到该目录。在那里，我们将运行以下命令—</p><pre class="kq kr ks kt gt lz ma mb mc aw md bi"><span id="8a0d" class="me kx in ma b gy mf mg l mh mi">npx create-react-app myapp</span></pre><p id="c1ec" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后我们将运行run下面的命令来安装<code class="fe mj mk ml ma b">axios</code>。</p><pre class="kq kr ks kt gt lz ma mb mc aw md bi"><span id="d621" class="me kx in ma b gy mf mg l mh mi">npm install axios</span></pre><p id="b70d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mj mk ml ma b">axios</code>是一个基于promise的HTTP客户端，用于浏览器和node.js。</p><h1 id="845c" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">程序</h1><p id="c41b" class="pw-post-body-paragraph jr js in jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ig bi translated">这个项目的<code class="fe mj mk ml ma b">src</code>目录如下所示</p><figure class="kq kr ks kt gt jo gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/001c67da08b5521d295d690373d64d89.png" data-original-src="https://miro.medium.com/v2/resize:fit:706/format:webp/1*cPYo9_KpS3UkEiuA8AIeow.jpeg"/></div></figure><h2 id="c5b4" class="me kx in bd ky mn mo dn lc mp mq dp lg kc mr ms lk kg mt mu lo kk mv mw ls mx bi translated"><strong class="ak">第一步</strong></h2><p id="c317" class="pw-post-body-paragraph jr js in jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ig bi translated">首先，我们将修改文件<code class="fe mj mk ml ma b">App.js</code>如下—</p><figure class="kq kr ks kt gt jo"><div class="bz fp l di"><div class="my kv l"/></div></figure><h2 id="24b7" class="me kx in bd ky mn mo dn lc mp mq dp lg kc mr ms lk kg mt mu lo kk mv mw ls mx bi translated"><strong class="ak">第二步</strong></h2><p id="3836" class="pw-post-body-paragraph jr js in jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ig bi translated">现在，我们将在<code class="fe mj mk ml ma b">src</code>中创建一个<code class="fe mj mk ml ma b">components</code>目录。然后，在<code class="fe mj mk ml ma b">components</code>中，我们将创建一个文件<code class="fe mj mk ml ma b">ImageAPI.js</code>。</p><figure class="kq kr ks kt gt jo"><div class="bz fp l di"><div class="my kv l"/></div></figure><p id="ae83" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当应用程序加载到浏览器中时，<code class="fe mj mk ml ma b">useEffect</code>钩子将运行函数<code class="fe mj mk ml ma b">getData()</code>，该函数将调用API并获取第一页。所有提取的数据将存储在状态变量<code class="fe mj mk ml ma b">data</code>中。并且在<code class="fe mj mk ml ma b">data.map()</code>方法的帮助下，保存在<code class="fe mj mk ml ma b">data</code>变量中的所有数据都会在浏览器中显示出来。</p><p id="bcb2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mj mk ml ma b">useEffect</code>钩子让我们在函数组件中执行副作用。</p><p id="0382" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们还使用了<code class="fe mj mk ml ma b">onScroll</code>事件，为此我们需要创建一个CSS文件<code class="fe mj mk ml ma b">ImageAPI.css</code>。</p><figure class="kq kr ks kt gt jo"><div class="bz fp l di"><div class="my kv l"/></div></figure><p id="825a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上面提到的<code class="fe mj mk ml ma b">height</code>属性将是应用程序的<code class="fe mj mk ml ma b">clientHeight</code>。</p><p id="8b9d" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，当用户滚动页面时，<code class="fe mj mk ml ma b">onScroll</code>事件将被触发，这将由函数<code class="fe mj mk ml ma b">firstEvent</code>处理。一旦用户到达页面底部，<code class="fe mj mk ml ma b">bottom</code>变量将存储一个<code class="fe mj mk ml ma b">true</code>值，并且<code class="fe mj mk ml ma b">if</code>语句将被执行。因此，页码将增加，并且调用<code class="fe mj mk ml ma b">getData()</code>函数，该函数将再次调用API的第二页。现在，在<code class="fe mj mk ml ma b">data</code>状态变量中，第一页和第二页的数据都将被存储，并在<code class="fe mj mk ml ma b">data.map()</code>方法的帮助下显示在网页上。</p><h1 id="047d" class="kw kx in bd ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt bi translated">结论</h1><p id="f4af" class="pw-post-body-paragraph jr js in jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ig bi translated">按照上面的简单步骤，可以在react应用程序中实现无限滚动。</p><p id="a239" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上述代码也可以在我的GitHub知识库中找到，可以通过以下链接访问—</p><div class="mz na gp gr nb nc"><a href="https://github.com/souvik-pl/React_infiniteScroll" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">souvik-pl/React_infiniteScroll</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jp nc"/></div></div></a></div></div></div>    
</body>
</html>
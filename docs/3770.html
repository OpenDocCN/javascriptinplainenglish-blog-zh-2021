<html>
<head>
<title>How to Build a JavaScript Line Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建JavaScript折线图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-javascript-line-chart-1258b98c632e?source=collection_archive---------16-----------------------#2021-07-28">https://javascript.plainenglish.io/how-to-build-a-javascript-line-chart-1258b98c632e?source=collection_archive---------16-----------------------#2021-07-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7b12" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">创建交互式JS折线图的分步教程</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/6c713da8ae97ba74dc2e80cc421ce4f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0sSHL94Yv0dl0MpSrbXSA.png"/></div></div></figure><p id="c591" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">一张</strong> <a class="ae lk" href="https://www.anychart.com/chartopedia/chart-type/line-chart/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">折线图</strong> </a> <strong class="kq io">是</strong> <a class="ae lk" href="https://www.anychart.com/blog/2018/11/20/data-visualization-definition-history-examples/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">数据可视化</strong> </a> <strong class="kq io">的基本和最常用的技术之一。众所周知，这种图形提供了一个或几个变量随时间变化的信息。现在，我将解释如何使用JavaScript轻松创建一个很酷的交互式折线图！</strong></p><p id="2e31" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这一过程将借助令人信服的示例来演示，您可以在以后使用这些示例来磨练您新的数据可视化开发技能。</p><p id="73b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了让您阅读和学习这篇文章时特别激动人心，我决定展示折线图在现实世界数据中的实际应用。六月被庆祝为“骄傲月”,我认为看到人们对同性恋者的态度在最近几年发生了怎样的变化会很棒。然后我从综合社会调查(GSS)中发现了有趣的民意数据，这是芝加哥大学全国民意研究中心(NORC)的一个项目，看起来很适合，并在本指南中将其部分可视化。</p><p id="79a2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所以，跟着教程走，你也将能够探索在过去的二十年里，美国在接受同性关系方面的转变！我们将首先创建一个单系列JS折线图，代表总趋势，然后创建一个多系列JS折线图，以可视化按年龄组的细分。</p><p id="ada4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">上船啦</p><h1 id="75d2" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">JS折线图预览</h1><p id="9308" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">在我们开始之前，先来看看预览吧！这是我们在本数据可视化教程结束时用JavaScript构建的漂亮的折线图。此外，它将是互动的，很容易嵌入任何网页或应用程序！</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/5413dc8d672cb88bd4ebcd7467ec9562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_pvEXsUusmJ38Rqm.png"/></div></div></figure><p id="cfa6" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看着这张彩色的图表，对未来的前景感到乐观，这种感觉不是很棒吗？</p><p id="878a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">从头到尾一步一步地阅读这个教程，你将学会如何用很少的代码轻松地生成这样一个线图。</p><h1 id="ecc6" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">用4个简单的步骤构建一个基本的JavaScript折线图</h1><p id="8d6b" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">JavaScript图表中可视化数据的正常顺序可以分为四个基本步骤，构建JS折线图遵循相同的模式:</p><ol class=""><li id="5e6a" class="mj mk in kq b kr ks ku kv kx ml lb mm lf mn lj mo mp mq mr bi translated">创建一个基本的HTML页面来显示图表。</li><li id="53b4" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">包括我们需要的所有JS脚本。</li><li id="1f5e" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">为图表添加数据。</li><li id="4024" class="mj mk in kq b kr ms ku mt kx mu lb mv lf mw lj mo mp mq mr bi translated">编写JS图表代码。</li></ol><p id="fe93" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，让我们深入研究每一个步骤，马上画出我们的折线图。</p><h2 id="b6e7" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">1.创建基本的HTML页面</h2><p id="1684" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">首先，我们为折线图创建一个带有<code class="fe nj nk nl nm b">&lt;div&gt;</code>块元素的基本HTML页面。为了在后面的代码中引用这个block元素，我们给它一个id属性，比如“container”。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="8138" class="mx lm in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Line Chart&lt;/title&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="71d0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里，我们为<code class="fe nj nk nl nm b">&lt;div&gt;</code>提供100%的宽度和高度，以便在全屏上呈现折线图。但这不是必须的，当然可以根据你的要求定制。</p><h2 id="c66f" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">2.包括所有的JS脚本</h2><p id="907a" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">第二步是引用所有必要的脚本来构建JS折线图。这些脚本将放在<code class="fe nj nk nl nm b">&lt;head&gt;</code>部分的<code class="fe nj nk nl nm b">&lt;script&gt;</code>标签中。</p><p id="400c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在本教程中，折线图是用<a class="ae lk" href="https://www.anychart.com/" rel="noopener ugc nofollow" target="_blank"> AnyChart </a>构建的。这是一个轻量级和灵活的JavaScript (HTML5)图表库，具有详细的<a class="ae lk" href="https://docs.anychart.com/" rel="noopener ugc nofollow" target="_blank">文档</a>和<a class="ae lk" href="https://api.anychart.com" rel="noopener ugc nofollow" target="_blank"> API参考</a>。此外，还有大量的<a class="ae lk" href="https://www.anychart.com/products/anychart/gallery/" rel="noopener ugc nofollow" target="_blank">图表示例</a>可供查看并用作起点，还有一个名为<a class="ae lk" href="https://playground.anychart.com/" rel="noopener ugc nofollow" target="_blank"> Playground </a>的实用程序可用于试验代码。</p><p id="2d3c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">由于折线图是基本图表类型之一，所以只需要AnyChart的<a class="ae lk" href="https://docs.anychart.com/Quick_Start/Modules#base" rel="noopener ugc nofollow" target="_blank">基础</a>模块。我们可以很容易地从<a class="ae lk" href="https://cdn.anychart.com" rel="noopener ugc nofollow" target="_blank"> CDN </a>中获得。JS折线图代码本身将被写在<code class="fe nj nk nl nm b">&lt;body&gt;</code>部分内的<code class="fe nj nk nl nm b">&lt;script&gt;</code>标签中。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="a35e" class="mx lm in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Line Chart&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>    &lt;style type="text/css"&gt;      <br/>      html, body, #container { <br/>        width: 100%; height: 100%; margin: 0; padding: 0; <br/>      } <br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;  <br/>    &lt;div id="container"&gt;&lt;/div&gt;<br/>    &lt;script&gt;<br/><strong class="nm io"><em class="nv">      // All the code for the JS line chart will come here<br/></em></strong>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="fb17" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">3.添加数据</h2><p id="c064" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">在本教程中，我们将可视化来自<a class="ae lk" href="https://gssdataexplorer.norc.org/trends/Gender%20&amp;%20Marriage?measure=homosex" rel="noopener ugc nofollow" target="_blank"> GSS数据浏览器</a>的数据，即显示“同性成年人发生性关系是错误的吗？”这个问题的答案的分解的数据在1990年至2018年间随着时间的推移发生了变化。也就是说，我们将表示“一点也没错”的回答的百分比，这看起来是一个很好的接受指标。</p><p id="9de8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">AnyChart支持多种选项将数据加载到图表中。我们的折线图的数据集非常简单，一点也不大。所以我们可以简单地将它包含在代码本身中。</p><p id="1dc9" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为此，我们创建了一个返回数据的函数，将数据保存为一个单独的代码块。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="cf40" class="mx lm in nm b gy nr ns l nt nu">function getData() {<br/>  return [<br/>    ['1990',12],<br/>    ['1991',14],<br/>    ['1993',21],<br/>    ['1994',21],<br/>    ['1996',26],<br/>    ['1998',26],<br/>    ['2000',27],<br/>    ['2002',31],<br/>    ['2004',29],<br/>    ['2006',31],<br/>    ['2008',36],<br/>    ['2010',41],<br/>    ['2012',42],<br/>    ['2014',48],<br/>    ['2016',50],<br/>    ['2018',57]<br/>  ];<br/>}</span></pre><p id="325a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">所有准备工作都已完成，现在是时候用几行JavaScript代码创建折线图了！</p><h2 id="2251" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">4.编写JS线条图表代码</h2><p id="2a20" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">首先，我们添加一个函数，其中包含了创建预期的交互式折线图所需的所有JavaScript代码。这确保了其中的代码只有在页面全部加载后才会执行。</p><p id="a1ae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们通过调用在上一步中创建的函数来设置数据，然后映射数据以指示每个数据点的第一个参数是X值，第二个参数是Y值。接下来，我们调用<code class="fe nj nk nl nm b">line()</code>函数来创建JS折线图。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="1631" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create a data set on our data<br/></em></strong>var dataSet = anychart.data.set(getData());</span><span id="f58a" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// map data for the line chart,<br/>// take x from the zero column and value from the first column<br/></em></strong>var seriesData = dataSet.mapAs({ x: 0, value: 1 });</span><span id="f0e9" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// create a line chart<br/></em></strong>var chart = anychart.line();</span></pre><p id="5fbc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，我们为折线图和Y轴设置标题。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="af69" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// configure the chart title text settings<br/></em></strong>chart.title('Acceptance of same-sex relationships in the US over the last 2 decades');</span><span id="0c19" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// set the y axis title<br/></em></strong>chart.yAxis().title('% of people who accept same-sex relationships');</span></pre><p id="87ff" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，我们将映射的数据加载到折线图中，设置容器id，并绘制图形。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="5941" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create a line series with the mapped data<br/></em></strong>var lineChart = chart.line(seriesData);</span><span id="a15c" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// set the container id for the line chart<br/></em></strong>chart.container('container');</span><span id="a64e" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// draw the line chart<br/></em></strong>chart.draw();</span></pre><p id="12a8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">瞧啊。一个实用的、交互式的、基于JavaScript的折线图创建出来了！这很快也很简单，不是吗？</p><p id="94e3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">看看下面的结果，非常欢迎你在</strong> <a class="ae lk" href="https://playground.anychart.com/AMYKy0zt/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> AnyChart游乐场</strong> </a> <strong class="kq io">上看到这个图表并玩它的代码。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nx"><img src="../Images/465d7d7bc537ee80bd21cfdc59918c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rZKyQgSNKtPzRsnPnmujHQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><a class="ae lk" href="https://playground.anychart.com/AMYKy0zt/" rel="noopener ugc nofollow" target="_blank">https://playground.anychart.com/AMYKy0zt/</a></figcaption></figure><p id="0578" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这个折线图告诉我们什么？我们可以清楚地看到随着时间的推移发生的积极变化，以及在1990年至2018年期间，美国对同性关系的接受度是如何逐渐增加的，只有几次轻微的停顿。</p><p id="16f4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是不要离开！虽然这个图表看起来已经很好了，但它只是我们能够负担得起的JS折线图的一个非常基础的版本。只需要再多几个步骤就可以增加功能和交互性。</p><p id="579f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在，准备好做一个惊人的多线图表，将可视化按年龄细分！</p><h1 id="649b" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">创建交互式多系列JS折线图</h1><p id="a5a1" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">当存在分离的数据时，我们使用多系列折线图将每个部分表示为单独的线条。来看看是怎么做的吧！</p><p id="029f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">基本代码保持不变。但我们将创建多个系列，而不是一个系列。当然，这些数据将包含每年的多个数据点，因为我们将“一点都没错”的总百分比按年龄组进行了细分:18-34岁、35-49岁、50-64岁和65岁以上。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="70da" class="mx lm in nm b gy nr ns l nt nu">function getData() {<br/>  return [<br/>    ['1990',16.9,12.2,10.2,5.2],<br/>    ['1991',17,17.8,10,4.8],<br/>    ['1993',26.5,23.8,16.8,6.6],<br/>    ['1994',28.7,22,17.3,9.1],<br/>    ['1996',35.7,24,22.6,9.2],<br/>    ['1998',37.2,24.6,22.4,11.2],<br/>    ['2000',36.5,26.2,23.7,9.9],<br/>    ['2002',40,34.4,23.8,16.4],<br/>    ['2004',33.3,28.8,32.5,14.3],<br/>    ['2006',40.2,32.1,27.5,15.1],<br/>    ['2008',49.3,37.2,31.4,17.1],<br/>    ['2010',51.9,42.5,36.1,28.5],<br/>    ['2012',53.1,43.8,36,24.6],<br/>    ['2014',63.7,45.9,44.7,31.3],<br/>    ['2016',66.3,52,42.3,37.2],<br/>    ['2018',70.1,57.7,49.2,39]<br/>  ];<br/>}</span></pre><p id="feeb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们需要为每个系列创建不同的数据映射。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="8ff7" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// map data for the first series,<br/>// take x from the zero column and value from the first column<br/></em></strong>var firstSeriesData = dataSet.mapAs({ x: 0, value: 1 });</span><span id="2813" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// map data for the second series,<br/>// take x from the zero column and value from the second column<br/></em></strong>var secondSeriesData = dataSet.mapAs({ x: 0, value: 2 });</span><span id="5cc6" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// map data for the third series,<br/>// take x from the zero column and value from the third column<br/></em></strong>var thirdSeriesData = dataSet.mapAs({ x: 0, value: 3 });<br/>  <br/><strong class="nm io"><em class="nv">// map data for the fourth series,<br/>// take x from the zero column and value from the fourth column<br/></em></strong>var fourthSeriesData = dataSet.mapAs({ x: 0, value: 4 });</span></pre><p id="5a6b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然后，我们将这些系列中的每一个链接到不同的行，并根据分段为每个系列命名。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="0636" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create the first series with the mapped data<br/></em></strong>var firstSeries = chart.line(firstSeriesData);<br/>firstSeries.name('18-34');</span><span id="88b9" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// create the second series with the mapped data<br/></em></strong>var secondSeries = chart.line(secondSeriesData);<br/>secondSeries.name('35-49');</span><span id="a2a4" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// create the third series with the mapped data<br/></em></strong>var thirdSeries = chart.line(thirdSeriesData);<br/>thirdSeries.name('50-64');<br/>  <br/><strong class="nm io"><em class="nv">// create the fourth series with the mapped data<br/></em></strong>var fourthSeries = chart.line(fourthSeriesData);<br/>fourthSeries.name('65+');</span></pre><p id="34aa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这里，因为我们在JS线图中描绘了多条线，所以我们需要一个图例来帮助识别哪条线代表哪一段。别担心，没什么复杂的。图表图例是由JS库自动创建的，我们只需要打开它。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="50db" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// turn the legend on<br/></em></strong>chart.legend().enabled(true);</span></pre><p id="6360" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">就是这样！通过这些简单的修改，我们得到了一个用JavaScript构建的漂亮的多系列折线图！也可以在</strong> <a class="ae lk" href="https://playground.anychart.com/1tvaNdD6/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> AnyChart游乐场</strong> </a> <strong class="kq io">上观看并进一步玩。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/3dffe0f3d0d7e93ba1d205dab464f55b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gUDqvOJct9GLFu4C9RZ_rQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><a class="ae lk" href="https://playground.anychart.com/1tvaNdD6/" rel="noopener ugc nofollow" target="_blank">https://playground.anychart.com/1tvaNdD6/</a></figcaption></figure><p id="5c98" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">同样，我们可以清楚地了解所有年龄组，尤其是年轻一代的总体趋势是积极的。</p><h1 id="e88e" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">定制多系列JS折线图设计</h1><p id="c453" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">多系列折线图看起来很棒，但我们可以通过一些定制让它更棒！AnyChart在这方面很棒，因为它提供了大量现成的选项，允许您像这样轻松地修改JS (HTML5)图表。</p><p id="557c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，让我们做一些快速的调整，以便更深入地了解数据。</p><h2 id="beac" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">1.平滑线条</h2><p id="0227" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">正如我们所见，目前形成的线条在连接处很清晰，给人一种更具几何感的感觉。在AnyChart JS库中，我们在将数据与系列链接时，只需用“spline”替换“line”就可以得到更平滑的线条。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="9daf" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// create the first series with the mapped data<br/></em></strong>var firstSeries = chart.spline(firstSeriesData);<br/>firstSeries.name('18-34');</span><span id="44ff" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// create the second series with the mapped data<br/></em></strong>var secondSeries = chart.spline(secondSeriesData);<br/>secondSeries.name('35-49');</span><span id="e734" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">// create the third series with the mapped data<br/></em></strong>var thirdSeries = chart.spline(thirdSeriesData);<br/>thirdSeries.name('50-64');<br/>  <br/><strong class="nm io"><em class="nv">// create the fourth series with the mapped data<br/></em></strong>var fourthSeries = chart.spline(fourthSeriesData);<br/>fourthSeries.name('65+');</span></pre><p id="7d3f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">经过这些简单的修改，我们的折线图变成了<a class="ae lk" href="https://www.anychart.com/chartopedia/chart-type/spline-chart/" rel="noopener ugc nofollow" target="_blank">样条图</a>！</p><h2 id="424c" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">2.在悬停时为每个数据点添加十字准线</h2><p id="3e97" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">因为我们的可视化中的线条现在是平滑的，所以当查看者悬停在线条上时显示十字准线可以提高可读性。自定义十字准线行为也很容易。在这种情况下，例如，让我们只保留X轴连接器和标签。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="d587" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// turn on the crosshair<br/></em></strong>chart.crosshair().enabled(true).yLabel(false).yStroke(null);</span></pre><p id="a457" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">用十字准线查看交互式JavaScript样条图！在</strong> <a class="ae lk" href="https://playground.anychart.com/7l7UhiWw" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> AnyChart游乐场</strong> </a> <strong class="kq io">有售。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi od"><img src="../Images/3c513c8c39bf8684e8381929a5e4a6ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*19VOHBURf1-ukBeTnRUwjw.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><a class="ae lk" href="https://playground.anychart.com/7l7UhiWw" rel="noopener ugc nofollow" target="_blank">https://playground.anychart.com/7l7UhiWw</a></figcaption></figure><blockquote class="oe of og"><p id="bc76" class="ko kp nv kq b kr ks jo kt ku kv jr kw oh ky kz la oi lc ld le oj lg lh li lj ig bi translated">最后，对于这个JS折线图教程的最后一个图表，让我们用直线代替平滑的曲线。但我们还是会保留十字准线。</p></blockquote><h2 id="380a" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">3.改进JS折线图工具提示</h2><p id="a7e9" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">为了让折线图工具提示提供更多信息，我们将数字显示为百分比值，分段显示为年龄组。</p><p id="fed4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这可以简单地通过为每个行系列中的工具提示设置<code class="fe nj nk nl nm b">format()</code>功能来完成。下面是第一个例子:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="0760" class="mx lm in nm b gy nr ns l nt nu">firstSeries<br/>  .tooltip()<br/>  .format("Age group 18-34 : {%value}%");</span></pre><h2 id="ad63" class="mx lm in bd ln my mz dn lr na nb dp lv kx nc nd lx lb ne nf lz lf ng nh mb ni bi translated">4.改变颜色和其他美学</h2><p id="f616" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">因为这个基于JavaScript的折线图讨论了同性关系，所以我们可以用骄傲的颜色来表示线条。这使得图表看起来更个性化，更好地代表了主题。</p><p id="6901" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们把线条变粗一点，这样看起来更明显。使用每个系列设置中的<code class="fe nj nk nl nm b">stroke</code>属性，可以同时修改颜色和线宽。像这样:</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="f090" class="mx lm in nm b gy nr ns l nt nu">firstSeries<br/>  .stroke('3 #f49595')</span></pre><p id="743c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">最后，我们添加了一个简单的动画来活跃折线图，这也很容易，因为JavaScript库已经将它作为一个预构建的特性。</p><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="b21f" class="mx lm in nm b gy nr ns l nt nu"><strong class="nm io"><em class="nv">// turn on the line chart animation<br/></em></strong>chart.animation(true);</span></pre><p id="b029" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">结束了。一个令人瞠目结舌的交互式JavaScript折线图已经完成！</p><p id="e6cb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">为了您的方便，最终的HTML/CSS/JS折线图代码在可视化下方。不要犹豫，在</strong> <a class="ae lk" href="https://playground.anychart.com/4L1XeREM/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io">或</strong> </a> <strong class="kq io">上查看任意图表，并应用您的数据和其他更改。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/ed112047cf41e3c95f3fce381e190b71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gEmYuXyAprVRYD0WTGNdJQ.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk"><a class="ae lk" href="https://playground.anychart.com/4L1XeREM/" rel="noopener ugc nofollow" target="_blank">https://playground.anychart.com/4L1XeREM/</a></figcaption></figure><pre class="kd ke kf kg gt nn nm no np aw nq bi"><span id="06af" class="mx lm in nm b gy nr ns l nt nu">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;JavaScript Line Chart&lt;/title&gt;<br/>      &lt;script src="https://cdn.anychart.com/releases/8.10.0/js/anychart-base.min.js"&gt;&lt;/script&gt;<br/>      &lt;style type="text/css"&gt;      <br/>        html, body, #container { <br/>          width: 100%; height: 100%; margin: 0; padding: 0; <br/>        } <br/>      &lt;/style&gt;<br/>    &lt;/head&gt;<br/>    &lt;body&gt;  <br/>      &lt;div id="container"&gt;&lt;/div&gt;<br/>      &lt;script&gt;</span><span id="965d" class="mx lm in nm b gy nw ns l nt nu">anychart.onDocumentReady(function () {</span><span id="43b3" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create a data set on our data<br/></em></strong>  var dataSet = anychart.data.set(getData());<br/>  <br/><strong class="nm io"><em class="nv">  // map data for the first series,<br/>  // take x from the zero column and value from the first column<br/></em></strong>  var firstSeriesData = dataSet.mapAs({ x: 0, value: 1 });</span><span id="6cd1" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // map data for the second series,<br/>  // take x from the zero column and value from the second column<br/></em></strong>  var secondSeriesData = dataSet.mapAs({ x: 0, value: 2 });<br/> <br/><strong class="nm io"><em class="nv">  // map data for the third series,<br/>  // take x from the zero column and value from the third column <br/></em></strong>  var thirdSeriesData = dataSet.mapAs({ x: 0, value: 3 });<br/>  <br/><strong class="nm io"><em class="nv">  // map data for the fourth series,<br/>  // take x from the zero column and value from the fourth column<br/></em></strong>  var fourthSeriesData = dataSet.mapAs({ x: 0, value: 4 });</span><span id="8836" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create a line chart<br/></em></strong>  var chart = anychart.line();</span><span id="e8ae" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // turn on the line chart animation<br/></em></strong>  chart.animation(true);<br/>  <br/><strong class="nm io"><em class="nv">  // configure the chart title text settings<br/></em></strong>  chart.title('Acceptance of same-sex relationships in the US over the last 2 decades');</span><span id="9793" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // set the y axis title<br/></em></strong>  chart.yAxis().title('% of people who accept same-sex relationships');<br/>  <br/><strong class="nm io"><em class="nv">  // turn on the crosshair<br/></em></strong>  chart.crosshair().enabled(true).yLabel(false).yStroke(null);</span><span id="723a" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create the first series with the mapped data<br/></em></strong>  var firstSeries = chart.line(firstSeriesData);<br/>  firstSeries<br/>    .name('18-34')<br/>    .stroke('3 #f49595')<br/>    .tooltip()<br/>    .format("Age group 18-34 : {%value}%");<br/>  <br/><strong class="nm io"><em class="nv">  // create the second series with the mapped data<br/></em></strong>  var secondSeries = chart.line(secondSeriesData);<br/>  secondSeries<br/>    .name('35-49')<br/>    .stroke('3 #f9eb97')<br/>    .tooltip()<br/>    .format("Age group 35-49 : {%value}%");</span><span id="be44" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // create the third series with the mapped data<br/></em></strong>  var thirdSeries = chart.line(thirdSeriesData);<br/>  thirdSeries<br/>    .name('50-64')<br/>    .stroke('3 #a8d9f6')<br/>    .tooltip()<br/>    .format("Age group 50-64 : {%value}%");<br/>  <br/><strong class="nm io"><em class="nv">  // create the fourth series with the mapped data<br/></em></strong>  var fourthSeries = chart.line(fourthSeriesData);<br/>  fourthSeries<br/>    .name('65+')<br/>    .stroke('3 #e2bbfd')<br/>    .tooltip()<br/>    .format("Age group 65+ : {%value}%");</span><span id="9f75" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // turn the legend on<br/></em></strong>  chart.legend().enabled(true);</span><span id="efd5" class="mx lm in nm b gy nw ns l nt nu"><strong class="nm io"><em class="nv">  // set the container id for the line chart<br/></em></strong>  chart.container('container');<br/>  <br/><strong class="nm io"><em class="nv">  // draw the line chart<br/></em></strong>  chart.draw();</span><span id="8e5c" class="mx lm in nm b gy nw ns l nt nu">});</span><span id="c43e" class="mx lm in nm b gy nw ns l nt nu">function getData() {<br/>  return [<br/>    ['1990',16.9,12.2,10.2,5.2],<br/>    ['1991',17,17.8,10,4.8],<br/>    ['1993',26.5,23.8,16.8,6.6],<br/>    ['1994',28.7,22,17.3,9.1],<br/>    ['1996',35.7,24,22.6,9.2],<br/>    ['1998',37.2,24.6,22.4,11.2],<br/>    ['2000',36.5,26.2,23.7,9.9],<br/>    ['2002',40,34.4,23.8,16.4],<br/>    ['2004',33.3,28.8,32.5,14.3],<br/>    ['2006',40.2,32.1,27.5,15.1],<br/>    ['2008',49.3,37.2,31.4,17.1],<br/>    ['2010',51.9,42.5,36.1,28.5],<br/>    ['2012',53.1,43.8,36,24.6],<br/>    ['2014',63.7,45.9,44.7,31.3],<br/>    ['2016',66.3,52,42.3,37.2],<br/>    ['2018',70.1,57.7,49.2,39]<br/>  ];<br/>}</span></pre><h1 id="59da" class="ll lm in bd ln lo lp lq lr ls lt lu lv jt lw ju lx jw ly jx lz jz ma ka mb mc bi translated">结论</h1><p id="1c68" class="pw-post-body-paragraph ko kp in kq b kr md jo kt ku me jr kw kx mf kz la lb mg ld le lf mh lh li lj ig bi translated">折线图是一种非常实用的数据可视化形式。它使用得相当频繁。所以我想你会很想知道如何轻松地创建折线图。使用像AnyChart这样的JavaScript图表库是一种方便的方式，不仅可以快速创建美观和信息丰富的折线图，还可以添加一些自定义项，以非常简单的方式定制可视化效果以满足您的特定需求。</p><p id="d7ab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如需了解如何构建和个性化JS折线图，请参阅<a class="ae lk" href="https://docs.anychart.com/Basic_Charts/Line_Chart" rel="noopener ugc nofollow" target="_blank">折线图文档</a>。此外，不要错过查看这些<a class="ae lk" href="https://www.anychart.com/products/anychart/gallery/Line_Charts/" rel="noopener ugc nofollow" target="_blank">折线图示例</a>以获取灵感。</p><p id="314e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果您对本教程中构建的JavaScript折线图，或者是一般的<a class="ae lk" href="https://www.anychart.com/chartopedia/chart-type/line-chart/" rel="noopener ugc nofollow" target="_blank">折线图类型</a>或者是您不知道如何实现的特定功能有任何疑问，请将它们留在评论中，我会尽我所能提供及时的回复。</p><p id="b884" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们都为我们是谁而自豪，并将此图表添加到数据可视化开发技能集中来炫耀！</p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="830d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"><em class="nv">any Chart团队感谢自由数据设计师Shachee Swadia贡献了这篇出色的JS折线图教程。</em> </strong></p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="476b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><a class="ae lk" href="https://www.anychart.com/support/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nv">如果你想为我们的博客创建一个很酷的客座博文，请联系我们。</em> </strong></a></p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="d343" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io"> <em class="nv">查看其他</em> </strong> <a class="ae lk" href="https://www.anychart.com/blog/category/javascript-chart-tutorials/" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="nv"> JavaScript制图教程</em> </strong> </a> <strong class="kq io"> <em class="nv">。</em>T13】</strong></p></div><div class="ab cl ok ol hr om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ig ih ii ij ik"><p id="8e7d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">原载于2021年7月28日</em><a class="ae lk" href="https://www.anychart.com/blog/2021/07/28/line-chart-js/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">anychart.com</em></strong></a><em class="nv">。</em></p><p id="dd72" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nv">更多内容请看</em><a class="ae lk" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
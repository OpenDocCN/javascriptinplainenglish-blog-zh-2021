<html>
<head>
<title>MongoDB Atlas Setup and Express Connection</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MongoDB Atlas设置和快速连接</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/mongodb-atlas-setup-and-express-connection-7dcf87bcc2e?source=collection_archive---------23-----------------------#2021-01-13">https://javascript.plainenglish.io/mongodb-atlas-setup-and-express-connection-7dcf87bcc2e?source=collection_archive---------23-----------------------#2021-01-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c856" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇文章中，我将解释如何在MongoDB Atlas上创建一个在线MongoDB数据库，并在express中编写一个基本的连接脚本来连接该数据库。</p><p id="acfe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我们在“<a class="ae ki" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/</a>”上创建一个帐户。</p><p id="4718" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">然后，您应该创建一个项目，如文档“<a class="ae ki" href="https://docs.atlas.mongodb.com/getting-started/" rel="noopener ugc nofollow" target="_blank">https://docs.atlas.mongodb.com/getting-started/</a>”中所述，在该部分之后您唯一需要的是接收您的连接字符串，但是为了在设置您的连接凭证时从任何地方访问您的数据库，您可以如下设置IP区域，以便允许所有IP:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi kj"><img src="../Images/f44f5b919c20f895ec898624e3d79d8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/0*7HK9a7Vfg0KYUlKP.png"/></div></figure><p id="0f9e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">项目所需的依赖项将类似于package.json文件中的依赖项:</p><p id="dc9a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kr ks kt ku b">{ "name": "projectname", "version": "1.0.0", "description": "projectdesc", "main": "server.js", "scripts": { "start": "node server", "server": "nodemon server" }, "author": "Eren Akbulut", "license": "MIT", "dependencies": { "config": "^3.3.1", "express": "^4.17.1", "mongoose": "^5.9.17", }, "devDependencies": { "nodemon": "^2.0.4" } }</code></p><p id="ee20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用npm install命令安装节点文件后，您可以在根目录中创建server.js文件和config文件夹，您应该将db.js default.json文件添加到config文件夹中。</p><p id="fc1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些文件准备就绪后，您可以将以下代码添加到这些文件中:</p><p id="e512" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">server.js文件</p><p id="5059" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kr ks kt ku b">const express = require("express"); const connectDB = require("./config/db"); const app = express();</code> <code class="fe kr ks kt ku b">//Connect to our db finally connectDB();</code> <code class="fe kr ks kt ku b">const PORT = 5000;</code></p><p id="9595" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kr ks kt ku b">app.listen(PORT, () =&gt; console.log(` Server is running on port ${PORT}`));</code></p><p id="7e3b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本地主机上运行代码:5000。</p><p id="0e46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kr ks kt ku b">const mongoose = require("mongoose"); const config = require("config"); const db = config.get("mongoURI");</code> <code class="fe kr ks kt ku b">const connectDB = async () =&gt; { try { await mongoose.connect(db, { useNewUrlParser: true, useUnifiedTopology: true, useFindAndModify: false, }); console.log("Mongo DB Connected"); } catch (err) { console.error(err.message); process.exit(1); } };</code></p><p id="b512" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe kr ks kt ku b">module.exports = connectDB;</code></p><p id="73ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">db.js文件包含许多样板文件，这样设置后，您不需要进行额外的更改，下面给出了最后一个必需的文件package.json文件，</p><p id="b8cd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">{ " mongoURI ":" your mongodbatlaskey "，}</p><p id="ba67" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">设置好一切后，您可以通过运行“npm run server”来运行您的代码。顺便说一句，因为我们将nodemon添加为一个开发依赖项，所以您可以保存并查看您的更改，而无需再次运行代码。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kv"><img src="../Images/16a67fd857445e4f302bc54bb914a1ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vBh6BzG_s0Q9ZT26.png"/></div></div></figure><p id="1b22" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以在链接上看到该项目的代码:<a class="ae ki" href="https://github.com/eren23/mongo-express-userauth" rel="noopener ugc nofollow" target="_blank">源代码</a>，但它包含的内容比我们今天解释的要多一点，剩下的部分也将很快发布。</p></div><div class="ab cl la lb hr lc" role="separator"><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf lg"/><span class="ld bw bk le lf"/></div><div class="ig ih ii ij ik"><p id="0963" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lh">最初发表于</em><a class="ae ki" href="https://blog.akbuluteren.com/blog/mongoatlas-express-starter" rel="noopener ugc nofollow" target="_blank">T5【https://blog.akbuluteren.com】</a><em class="lh">。</em></p></div></div>    
</body>
</html>
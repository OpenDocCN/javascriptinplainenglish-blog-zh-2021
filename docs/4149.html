<html>
<head>
<title>I Built the Same App Using Astro, Next.js, and Gatsby — Here Are the Differences</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我使用Astro、Next.js和Gatsby构建了相同的应用程序——区别如下</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/astro-next-js-gatsby-3517e0dc884?source=collection_archive---------2-----------------------#2021-08-18">https://javascript.plainenglish.io/astro-next-js-gatsby-3517e0dc884?source=collection_archive---------2-----------------------#2021-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3876" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">管束尺寸、结构和特征</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f49142db383ae6bc822c0c0c8e4476f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M2y_yDWaHSAtkTDwbNVvtg.png"/></div></div></figure><p id="7e00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Gatsby和Next.js——可能是React.js最著名的框架。虽然Gatsby只是一个静态站点生成器，但next . js是一个多才多艺的网站。但是最后，我们也可以很好地使用Next.js作为React的静态站点生成器。</p><p id="72ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">除了这两个老大，静态站点生成器领域还有一颗新星:Astro。我之前称赞SSG的创新和年轻，主要是因为它的独特之处。而Next和Gatsby是React.js独占，Astro可以用于Vue，React，Svelte等等。当谈到包大小和加载组件的不同选项时，新的SSG大放异彩。</p><p id="55f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但这一次，这不是与众不同的问题，而是在与顶级公司的直接比较中变得更好或更差。</p><p id="a9ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为此，我在Gatsby、Next.js和Astro中构建了相同的小应用程序——以下是差异、性能等方面的结果。</p><h1 id="7eb4" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">小“应用”</h1><p id="8261" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">我们的项目将由两个React.js组件组成。</p><p id="7414" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这两个组件都被设置为直接加载——不使用按需加载形式的延迟加载，也不使用一旦主线程空闲就加载的方式。因此，这是一场公平的比赛。</p><p id="bdb5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第一个组件是一个简单的计数器，使用useState:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b817" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二个是一个呈现的简单列表:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="a39b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我知道你想先看看包的尺寸，这就对了。之后我们会看看其他的。</p><h1 id="93ee" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">捆绑尺寸</h1><p id="3b33" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">让我们来看看最有趣的部分:包的大小，这在很大程度上决定了你的网站的性能。尽管所有三个静态站点生成器都使用相同的React代码，但是包的大小有所不同。尤其是阿童木在这里有所作为。</p><p id="cf35" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">它的哲学是部分水合，意味着页面由孤立的组件组成。这些组件导致只运送将它们呈现给浏览器所需的代码。另一方面，Next和Gatsby是以反应为中心的框架。换句话说:</p><blockquote class="mm mn mo"><p id="ea5d" class="kr ks mp kt b ku kv jr kw kx ky ju kz mq lb lc ld mr lf lg lh ms lj lk ll lm ij bi translated">Next.js、Gatsby和其他JavaScript框架不支持部分水合，因为它们将整个网站/页面想象成一个JavaScript应用程序。<br/> — <a class="ae mt" href="https://docs.astro.build/core-concepts/component-hydration" rel="noopener ugc nofollow" target="_blank"> <em class="iq">天文文献</em> </a></p></blockquote><p id="b58e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我不想在这里长篇大论。以下是提供给浏览器的必要代码的结果:</p><pre class="kg kh ki kj gt mu mv mw mx aw my bi"><span id="6f6d" class="mz lo iq mv b gy na nb l nc nd">Next.js:    206 kilobytes <br/>Gatsby:     185 kilobytes<br/>Astro:      134 kilobytes</span></pre><p id="e973" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如你所看到的，Astro发布了更少的代码，导致页面整体速度更快。</p><p id="69d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，为了这个福利，你能把你的Next.js或Gatsby应用程序移到Astro吗？让我们看看一个天文项目的结构，与顶级狗相比，是否与此相符。</p><h1 id="6f87" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">应用程序的结构</h1><p id="f3a6" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">实际上，在我看来，这三个静态站点生成器更像是不同的。具有唯一URL的页面基于<em class="mp"> pages </em>目录中的组件。组件及其所有物的最佳实践是将它们存储在<em class="mp">组件</em>目录中。将整个应用程序从一个静态站点生成器转移到另一个应该不会太难，只要不使用专有功能。</p><p id="4217" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一开始，我觉得Astro手柄对组件的反应有所不同。它们不允许像《盖茨比》或《下一个》那样存储在<code class="fe ne nf ng mv b">.js</code>文件中。相反，我们需要使用<code class="fe ne nf ng mv b">.jsx</code>或<code class="fe ne nf ng mv b">.tsx</code>文件——但这已经够了。</p><p id="86b4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Astro是一个通用的静态站点生成器，而不是React独有的，这一点可以在运行产品包时获取数据时看到。是的，我的意思是获取数据并静态地呈现在页面上——例如，托管一个静态博客并用一个无头CMS来填充它。</p><p id="da5a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些特征需要在每个静态站点生成器中有单独的解决方案。虽然Next.js和Gatsby采用了更为React的方式，但Astro依靠其特殊的<code class="fe ne nf ng mv b">.astro</code>文件/组件来实现这一点。使用Astro时，</p><h1 id="8628" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">技术特性表</h1><p id="3f71" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">当选择静态站点生成器时，性能并不是我们应该考虑的一切。因为Next和Gatsby已经为社区所熟知，所以我想更多地关注Astro——当然是相对于其他人而言。</p><p id="1822" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我提到的，Astro并不特别遵循事物的反应方式。我不认为这是个问题，因为</p><p id="1c18" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我已经介绍了如何<a class="ae mt" rel="noopener ugc nofollow" target="_blank" href="/want-to-make-your-next-js-app-faster-enable-preact-support-heres-how-f993c95a3f93">将Next.js切换到Preact </a>。然而，据我所知，没有办法进行部分转换。如果你切换到Preact，你的整个应用程序使用Preact。这似乎也适用于盖茨比。</p><p id="6fad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">另一方面，Astro从它的哲学中受益匪浅。对于不同的组件同时使用React.js和Preact是没有问题的。因此，完全不需要一个完整的开关。使用Preact，如果您无法将此组件切换到Preact，请使用React.js来加速您的应用程序。</p><p id="c748" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当在Next中切换到轻量级React替代方案并且Gatsby需要一些配置时，如果您选择用这两个库来初始化您的项目，Astro支持Preact开箱即用(CLI允许您选择这一点)。你需要改变的只是你的<code class="fe ne nf ng mv b">.jsx</code>文件上面的导入。</p><p id="4db8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此外，如果不对Astro在客户端构建中加载组件的不同方式表示敬意，我就无法写这篇文章。虽然Next.js和Gatsby确实提供了延迟加载，但是Astro支持更多的加载方式，因为您的组件需要它。这使得编写高性能和组件驱动的ui变得非常容易。</p><p id="a956" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为我不想只表扬阿童木，所以让我们给每只冠军狗一个好的分数。</p><p id="abb3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我真正喜欢Gatsby的是它对GraphQL和大量无头CMS的默认支持。如果我想把我的WordPress博客迁移到一个静态网站，Gatsby将是我的首选。然而，很难将这一优势与其他优势进行比较，因为Next.js不仅仅是为静态页面而设计的，而且Astro还非常年轻。</p><p id="673a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">说到Next.js，当涉及到一个特殊的场景时，该框架是明显的赢家:希望让您的页面尽可能静态，但仍然需要在服务器上主动呈现一些页面。</p><p id="43e0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">Next.js的亮点在于它可以在服务器上呈现一些页面，出于性能和服务器负载的原因，它还可以静态地为其他页面提供服务。此外，像<a class="ae mt" rel="noopener ugc nofollow" target="_blank" href="/static-regeneration-next-js-fca80134991a">静态再生</a>这样的复杂特性有助于结合两个世界的优点——静态页面和服务器端主动呈现的页面。</p><p id="532d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读！</p><p id="92d2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于Next.js &amp; Astro的更多信息:</p><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/next-js-tricks-6dd97ee66c7c"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">添加到工具箱中的5个有用的Next.js技巧</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">构建脚本、加载外部JavaScript、重定向等等。</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kp nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/astro-906b03f63ab8"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">Astro将成为您最喜爱的静态网站生成器</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">用它构建下一个项目的4个理由</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny kp nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a rel="noopener  ugc nofollow" target="_blank" href="/next-js-webassembly-77df3537690"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">用Next.js构建您的第一个WebAssembly组件</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">而不必首先设置编译器</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nt l"><div class="oa l nv nw nx nt ny kp nk"/></div></div></a></div><p id="247d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="mp">更多内容尽在</em><a class="ae mt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="mp">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
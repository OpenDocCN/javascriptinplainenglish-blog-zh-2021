# åœ¨ React ä¸­é›†æˆåœ°å›¾æœåŠ¡

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/integrating-map-services-in-react-c7196dfc7e09?source=collection_archive---------12----------------------->

![](img/ea289acd9f8f3343fc4f15e9603d4343.png)

# React åœ°å›¾æ¡†æŒ‡å—

å¤šå¹´æ¥ï¼Œå¼€å‘è¡Œä¸šä¸€ç›´åœ¨äº‰è®ºè°æ˜¯æœ€å¥½çš„åœ°å›¾æä¾›å•†ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è°ä¼šèµ¢å¾—åœ°å›¾æä¾›å•†çš„æ¸¸æˆã€‚

ç”±äºå…¶å¯é æ€§ï¼Œè°·æ­Œåœ°å›¾ SDK åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ä¸€ç›´æ˜¯ç‹è€…ï¼Œä½†éšç€ä»·æ ¼ç‚¹è¿œè¿œé«˜äºç«äº‰å¯¹æ‰‹ï¼Œå¹¶ä¸”æ²¡æœ‰åƒ Mapbox æˆ–å…è´¹ä¼ å•é‚£æ ·çš„å¯å®šåˆ¶æ€§ï¼Œè¿™ç§æƒ…å†µå¼€å§‹å‘ç”Ÿå˜åŒ–ã€‚

å½“æ‚¨å†³å®šä½¿ç”¨åœ°å›¾æœåŠ¡æ—¶ï¼Œæ‚¨å¿…é¡»è€ƒè™‘å¤šä¸ªå› ç´ :

*   ä»·æ ¼ç‚¹(ç¾å…ƒ/åœ°å›¾åŠ è½½æˆ– API è¯·æ±‚)
*   å¯é æ€§(æœåŠ¡çš„å‡†ç¡®æ€§å’Œç¨³å¥æ€§)
*   å¯å®šåˆ¶æ€§(å¯ç”¨çš„ä¸ªæ€§åŒ–çº§åˆ«ã€è°ƒè‰²æ¿æˆ–æ ‡è®°)
*   å¼€å‘è€…ä½“éªŒ(åœ¨åº”ç”¨ç¨‹åºä¸­é›†æˆå’Œå¼€å‘æœ‰å¤šå®¹æ˜“)
*   å…¶ä»–æœåŠ¡ï¼Œå¦‚æœç´¢(ä¹Ÿç§°ä¸ºåœ°ç†ç¼–ç )ã€å¯¼èˆªç­‰

![](img/2a8dc78c54670a528cc1ff7f8ba9b57a.png)

# 1.ä¸ºä»€ä¹ˆé€‰æ‹©[åœ°å›¾æ¡†](https://www.mapbox.com/)ï¼Ÿ

ä»Šå¹´æ—©äº›æ—¶å€™ï¼Œæˆ‘å¼€å‘äº†ä¸€ä¸ªå…¨æ ˆåº”ç”¨ç¨‹åºï¼Œä½¿ç”¨ Mapbox å’Œ React æ¥æé«˜è‡ªè¡Œè½¦ç›—çªƒæ„è¯†ï¼Œæˆ‘å–œæ¬¢å®ƒçš„æ˜“ç”¨æ€§å’Œå®šåˆ¶æ€§ã€‚åœ¨ bike-theft-map.bikmo.com çš„[æ£€æŸ¥ä¸€ä¸‹ã€‚](https://bike-theft-map.bikmo.com/)

![](img/54f0d46afadfbe592a15759a7c85af5a.png)

åœ¨å¤§é‡ä½¿ç”¨è°·æ­Œåœ°å›¾çš„åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡åˆ©ç”¨ Mapbox çš„ä¼—å¤šå¯å®šåˆ¶åŠŸèƒ½ï¼Œè½»æ¾è„±é¢–è€Œå‡ºã€‚

ä½¿ç”¨ Mapbox Studioï¼Œä½ å¯ä»¥åˆ›å»ºä½ æ¢¦æƒ³ä¸­çš„é»‘æš—æ¨¡å¼åœ°å›¾ï¼Œç”šè‡³å¯ä»¥å°†æŸä¸ªå“ç‰Œçš„è°ƒè‰²æ¿æ•´åˆåˆ°æ ‘çš„å¶å­é¢œè‰²ä¸­ã€‚

æ›´é‡è¦çš„æ˜¯ï¼Œå…è´¹è®¡åˆ’å…è®¸é«˜è¾¾ 100k/æœˆçš„åœ°å›¾åŠ è½½ï¼Œè¿™å¯¹äºå¼€å‘ç”šè‡³å°å‹åº”ç”¨ç¨‹åºæ¥è¯´éƒ½æ˜¯éå¸¸å¥½çš„ã€‚

# 2.æˆ‘ä»¬åœ¨å»ºé€ ä»€ä¹ˆï¼Ÿ

![](img/fedf70c4d0269ab103c1025f5a74e886.png)

æˆ‘ä»¬å°†ä¸ºåœ¨çº½çº¦æœ‰å¤šä¸ªè¯Šæ‰€çš„å® ç‰©å…½åŒ»åˆ¶ä½œä¸€ä¸ª [NextJS](https://nextjs.org/) åº”ç”¨ç¨‹åºï¼Œä½¿ç”¨å®ƒäººä»¬å¯ä»¥æŸ¥çœ‹åœ°å›¾ä¸Šæ¯ä¸ªä½ç½®çš„æ ‡è®°ï¼Œå¹¶é€šè¿‡ç‚¹å‡»å®ƒå¯ä»¥åœ¨å¸¦å®ƒå»é‚£é‡Œä¹‹å‰å®Œæˆå…³äºä»–ä»¬å® ç‰©è¯¦ç»†ä¿¡æ¯çš„è¡¨æ ¼ã€‚

# 3.åˆ›å»ºè‡ªå®šä¹‰åœ°å›¾æ ·å¼

åˆ›å»ºå¸æˆ·åï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—® [Mapbox Studio](https://studio.mapbox.com/) å¹¶æŒ‰ä¸‹æ–°æ ·å¼æŒ‰é’®åˆ›å»ºæ–°æ ·å¼ã€‚

é€‰æ‹©ä¸€ä¸ªåŸºç¡€é£æ ¼ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥ç”¨æˆ‘ä»¬çš„å® ç‰©è¯Šæ‰€å“ç‰Œé¢œè‰²å®šåˆ¶ã€‚

è®©æˆ‘ä»¬é€‰æ‹©å•è‰²é£æ ¼ï¼Œå› ä¸ºå®ƒéœ€è¦æœ€å°‘çš„æ—¶é—´æ¥å®šåˆ¶ã€‚

![](img/867fa47a2204e266bdc5bdf173472712.png)

åœ¨å·¦ä¾§è¾¹æ èœå•ä¸­çš„é¢œè‰²ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰é¢œè‰²(#00A896)ã€‚

![](img/8dff3722210a70f30d0fe6c060624252.png)

ä¸ºäº†å‘å¸ƒä¿®æ”¹ï¼Œæˆ‘ä»¬å¿…é¡»ç‚¹å‡»å³ä¸Šè§’çš„å‘å¸ƒæŒ‰é’®ã€‚ç°åœ¨æˆ‘ä»¬æ‰€éœ€è¦çš„æ˜¯åœ¨æˆ‘ä»¬çš„ç½‘ç«™ä¸­ä½¿ç”¨çš„é£æ ¼ urlï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å³ä¸Šè§’æ‰¾åˆ°å®ƒã€‚

![](img/6ff6e9073cd1a0336aea832cbedfc39c.png)

# 4.React ä¸­çš„åœ°å›¾æ¡†

ç”±äºæˆ‘ä»¬æ˜¯åœ¨ NextJS ä¸­æ„å»ºè¿™ä¸ªåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ Vanilla JS [Mapbox GL JS](https://docs.mapbox.com/mapbox-gl-js/example/) åº“æˆ–è€…ä¼Ÿå¤§çš„ React åŒ…è£…å™¨ [react-map-gl](https://visgl.github.io/react-map-gl/) ã€‚æˆ‘å°†ä½¿ç”¨åè€…ï¼Œå› ä¸ºå®ƒåœ¨æˆ‘ä»¬çš„ç”¨ä¾‹ä¸­æ•ˆæœå¾ˆå¥½ã€‚

è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ NextJS é¡¹ç›®å¹¶å®‰è£…ä¾èµ–é¡¹:

![](img/64ba7911d3bb4d2d0d304c016b70c244.png)

è®©æˆ‘ä»¬é¦–å…ˆä» react-map-gl ä¸­æ‰©å±•ä¸åœ°å›¾ç›¸å…³çš„ç»„ä»¶ï¼Œå¹¶åœ¨ components/ folder ä¸­åˆ›å»ºä¸€äº›è‡ªå®šä¹‰ç»„ä»¶ã€‚

åœ¨ components/pin/index.js ä¸­ï¼Œæˆ‘ä»¬åœ¨æ ‡è®°ä¸­æ·»åŠ äº†è‡ªå®šä¹‰çš„åœ°å›¾å›¾é’‰å›¾æ ‡(æŸ¥çœ‹è¿™ä¸ª [CodeSandbox](https://codesandbox.io/s/react-mapbox-example-t7xv0?file=/pages/index.js) ):

![](img/0e064d3ea45455738546f8ecbf1d620a.png)

åœ¨ components/marker/index.js ä¸­ï¼Œæˆ‘ä»¬æ‰©å±•äº†æ ‡è®°ç»„ä»¶:

![](img/c4b20eb568d2f79cd1a193d1827a5c28.png)

æœ€åï¼Œåœ¨ components/popup/index.js ä¸­ä¸ºçª—ä½“ popup

![](img/c070273ca6b9d8b98b58a2f01d2e90fb.png)

ç°åœ¨æˆ‘ä»¬å¯ä»¥ç»§ç»­æ·»åŠ åœ°å›¾å’Œæ˜¾ç¤ºæ ‡è®°å’Œå¼¹å‡ºçª—å£çš„ä¸šåŠ¡é€»è¾‘ã€‚è¿™å°†åŒ…æ‹¬æœ€å°‘çš„æ ·å¼å’Œåœ°å›¾è§†å£çŠ¶æ€ï¼Œå› æ­¤å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°æ›´æ–°ï¼Œä»¥ä½¿ç”¨æ ‡è®°æˆ–è¡¨å•æäº¤çš„ APIã€‚

![](img/bf7516c761f6c64258dfff6e6c451df7.png)

è¿™å°±æ˜¯æˆ‘ä»¬ä½¿ç”¨ MapBox å¼€å‘åŸºäºåœ°å›¾çš„ React åº”ç”¨ç¨‹åºæ‰€éœ€çš„å…¨éƒ¨å†…å®¹ï¼Œä½¿ç”¨è¿™ä¸ªä»¤äººæƒŠå¹çš„å·¥å…·è¿˜å¯ä»¥åšæ›´å¤šçš„äº‹æƒ…ï¼Œå¦‚çƒ­å›¾ã€åœ°å›¾è½¬æ¢ã€GeoJSON åŠ¨ç”»ç­‰ã€‚

å¦‚æœä½ æƒ³æ£€æŸ¥è¿™ä¸ªæ¼”ç¤ºé¡¹ç›®(æ›¿æ¢ index.js ä¸­çš„ mapboxApiAccessToken & mapStyle)ï¼Œè¿™é‡Œæ˜¯ [CodeSandbox](https://codesandbox.io/s/react-mapbox-example-t7xv0?file=/pages/index.js) ã€‚

æŸ¥çœ‹å®˜æ–¹ç½‘ç«™[ç¤ºä¾‹](https://visgl.github.io/react-map-gl/examples)æˆ–æŸ¥çœ‹è¿™ä¸ªåŸºäºåœ°å›¾æ¡†çš„ä¼Ÿå¤§å·¥å…·[æ¥æé«˜è‡ªè¡Œè½¦ç›—çªƒæ„è¯†](https://bike-theft-map.bikmo.com/)ã€‚

> æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªå…³äºå°†åœ°å›¾æœåŠ¡ä¸ Mapbox å’Œ NextJS é›†æˆçš„ç®€çŸ­æ•™ç¨‹ğŸ¦„ï¼
> 
> åœ¨ [alexstreza.dev](http://alexstreza.dev/) æŸ¥çœ‹æ›´å¤šæˆ‘çš„**ä½œå“**ã€‚

*æ›´å¤šå†…å®¹è¯·çœ‹*[*plain English . io*](http://plainenglish.io/)
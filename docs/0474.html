<html>
<head>
<title>Continuous Deployment Pipeline for React Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React应用的持续部署渠道</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/continuous-deployment-pipeline-for-react-apps-886f887996f8?source=collection_archive---------6-----------------------#2021-01-28">https://javascript.plainenglish.io/continuous-deployment-pipeline-for-react-apps-886f887996f8?source=collection_archive---------6-----------------------#2021-01-28</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="770e" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">使用Github操作和AWS S3</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/055c57b7887cbf97cfd5e2e9ab4c0746.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uEzbw6ACVYwcTEzKfTBOiw.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@_ferh97?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Fernando Hernandez</a> on <a class="ae kw" href="https://unsplash.com/s/photos/programming?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2e47" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">对于托管React应用程序，有许多好的选择。AWS s3就是其中之一，非常便宜可靠。</p><p id="26c7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">部署可能是您日常工作中非常无聊的一部分。我们应该尽可能自动化。</p><p id="7412" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将了解如何使用Github actions创建一个持续的部署管道，该管道将自动构建我们的网站并将其部署到aws s3。</p><h2 id="4291" class="lt lu ir bd lv lw lx dn ly lz ma dp mb lg mc md me lk mf mg mh lo mi mj mk ml bi translated">先决条件</h2><p id="c46c" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">跟我来，我想你已经知道了</p><ul class=""><li id="00f9" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">GitHub账户</li><li id="9bc1" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls mw mx my mz bi translated">AWS帐户</li><li id="6da3" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls mw mx my mz bi translated">正在运行的反应堆项目</li></ul><p id="6449" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧。。。</p><h1 id="40f8" class="nf lu ir bd lv ng nh ni ly nj nk nl mb jx nm jy me ka nn kb mh kd no ke mk np bi translated">第一步。创建S3存储桶</h1><ol class=""><li id="b687" class="mr ms ir kz b la mm ld mn lg nq lk nr lo ns ls nt mx my mz bi translated">登录AWS控制台</li><li id="b6ef" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls nt mx my mz bi translated">从您的服务中搜索S3，然后点击<strong class="kz is">创建存储桶</strong></li><li id="8273" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls nt mx my mz bi translated">给<strong class="kz is">起一个合适的名字</strong>，选择<strong class="kz is">区域</strong>。记住您所在地区的值<strong class="kz is">(对我来说是</strong>AP-south-1)</li></ol><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nu"><img src="../Images/b6385264f8017171b47c1d5d0cd222b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6HVfPihE26SaL0UfAysetQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">aws s3 console</figcaption></figure><ul class=""><li id="15e7" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">向下滚动并取消选中<strong class="kz is">阻止公共访问。</strong>如果您将S3用于其他目的，建议不要这样做。但是如果你想托管你的静态网站，这是必要的。</li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nv"><img src="../Images/52eda2bae28e4a8ee0bac21517aaa2c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dNB6l3ewInf1-l1W3w4YQQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">aws s3 console</figcaption></figure><ul class=""><li id="ec44" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">保持其他选项不变，点击<strong class="kz is">创建存储桶。</strong></li></ul></div><div class="ab cl nw nx hv ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ik il im in io"><h1 id="4480" class="nf lu ir bd lv ng od ni ly nj oe nl mb jx of jy me ka og kb mh kd oh ke mk np bi translated">第二步。编辑属性以启用静态宿主</h1><ul class=""><li id="10cb" class="mr ms ir kz b la mm ld mn lg nq lk nr lo ns ls mw mx my mz bi translated">创建存储桶后，您可以在列表中看到它。单击存储桶名称并打开存储桶概述。选择属性选项卡</li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oi"><img src="../Images/3e5ef0571a25dae7feacf973251618e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKPAQhcq89UPRmMzuAP7HA.png"/></div></div></figure><p id="5c07" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">向下滚动找到静态网站托管的选项。点击<strong class="kz is">编辑</strong></p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oj"><img src="../Images/d4bbf1a0d135ceeeb96ea821dd96310a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D9PMO4qwbwBN-TKUAeeVmg.png"/></div></div></figure><ul class=""><li id="3821" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated"><strong class="kz is">启用</strong>托管选项。并选择<strong class="kz is">托管一个静态网站</strong></li><li id="8792" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls mw mx my mz bi translated">将index.html作为索引文档。重要的是要注意错误文件，你也应该给index.html，因为当我们在构建文件夹中构建react应用程序时，只有一个index.html文件。</li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oj"><img src="../Images/d6dc01d1953fbdb8a76be84e69856516.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zhmmOf5KkzqmLjrvyAXKhA.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">static hosting properties</figcaption></figure><ul class=""><li id="31b3" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated"><strong class="kz is">保存修改。然后复制给你的网址。它将用于访问您的网站。</strong></li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj ok"><img src="../Images/eaef8fd8c814837369795609ea30b2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YFBPFJmVH1WnQj7Wa0L_kw.png"/></div></div></figure></div><div class="ab cl nw nx hv ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ik il im in io"><h1 id="cc53" class="nf lu ir bd lv ng od ni ly nj oe nl mb jx of jy me ka og kb mh kd oh ke mk np bi translated">第三步。允许访问网站的权限</h1><p id="a75b" class="pw-post-body-paragraph kx ky ir kz b la mm js lc ld mn jv lf lg mo li lj lk mp lm ln lo mq lq lr ls ik bi translated">现在打开属性选项卡旁边的<strong class="kz is">权限</strong>。单击编辑存储桶策略并添加以下代码</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ol om l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">s3 permissions</figcaption></figure><blockquote class="on oo op"><p id="a0d4" class="kx ky oq kz b la lb js lc ld le jv lf or lh li lj os ll lm ln ot lp lq lr ls ik bi translated"><strong class="kz is">需要注意的重要一点:</strong>用你的桶名替换<strong class="kz is"> </strong> <code class="fe ou ov ow ox b">&lt;bucket-name&gt;</code>。</p></blockquote><ul class=""><li id="b0a5" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">点击保存，你就可以开始了。</li></ul><p id="fdd5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在您可以上传您的静态网站(在我们运行命令<strong class="kz is"> npm run build之后，对build文件夹中的内容做出反应)。如果你去你的静态主机的网址，你可以看到你的网站。</strong></p><p id="a69c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是我们需要自动化。我们不想每次需要发布我们的网站时都要传输构建文件夹的内容。</p><p id="5d10" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为此，我们将使用GitHub操作。</p></div><div class="ab cl nw nx hv ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ik il im in io"><h1 id="41c2" class="nf lu ir bd lv ng od ni ly nj oe nl mb jx of jy me ka og kb mh kd oh ke mk np bi translated">第四步。将AWS秘密添加到Github</h1><ul class=""><li id="4b1d" class="mr ms ir kz b la mm ld mn lg nq lk nr lo ns ls mw mx my mz bi translated">现在我们需要从aws控制台获取一些秘密，让GitHub代表我们进行身份验证。从AWS控制台转到<strong class="kz is"> IAM &gt;用户&gt;安全凭证&gt;创建访问密钥</strong>。</li><li id="8c7d" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls mw mx my mz bi translated">会给你两个值<strong class="kz is">AWS _ ACCESS _ KEY</strong>T5】AWS _ SECRET _ ACCESS _ KEY。将这两个值与您的存储桶的区域名称相加。</li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oy"><img src="../Images/3e8321f247d6833ca7a697e28e94c82d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ablu1WtoPdtYSQsj3PrXQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">GitHub repository</figcaption></figure><ul class=""><li id="6612" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">将这些值添加到您的存储库设置-&gt;机密选项。</li></ul></div><div class="ab cl nw nx hv ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="ik il im in io"><h1 id="f25b" class="nf lu ir bd lv ng od ni ly nj oe nl mb jx of jy me ka og kb mh kd oh ke mk np bi translated"><strong class="ak">第五步。设置动作</strong></h1><ul class=""><li id="9040" class="mr ms ir kz b la mm ld mn lg nq lk nr lo ns ls mw mx my mz bi translated">在存储库中设置新操作。我们将从头开始创建一个工作流。</li><li id="631e" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls mw mx my mz bi translated">它将在<code class="fe ou ov ow ox b">.github/workflows/main.yml</code>中创建一个新文件。您可以更改名称main。拍卖描述(如aws_deployment.yml)</li></ul><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oz"><img src="../Images/79bf0ac8b1de49e6dc764509417a18f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAgy3vUH_pwQD2p_AOENuQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">GitHub actions</figcaption></figure><ul class=""><li id="333d" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls mw mx my mz bi translated">添加以下代码。将文件底部的<bucket-name>替换为您之前创建的自己的bucket名称。</bucket-name></li></ul><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ol om l"/></div></figure><p id="bbff" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这一行动将</p><ol class=""><li id="9944" class="mr ms ir kz b la lb ld le lg mt lk mu lo mv ls nt mx my mz bi translated">在每次发布时运行(您可以将其修改为在每次推送到主分支时运行)</li><li id="643c" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls nt mx my mz bi translated">它将使用您的秘密访问密钥登录aws</li><li id="53d7" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls nt mx my mz bi translated">它将构建您的项目</li><li id="725e" class="mr ms ir kz b la na ld nb lg nc lk nd lo ne ls nt mx my mz bi translated">然后将构建文件夹中的内容转移到s3 bucket中。</li></ol><p id="b93b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，您可以提交文件并运行作业。或者为您的项目创建一个版本，并从“操作”标签中查看进度。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj pa"><img src="../Images/67bdf590682213047f641279b5234f63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nu5Pl_P0PNNgMtBL1rpobw.png"/></div></div></figure><p id="c2ce" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果一切顺利，您可以转到aws bucket，查看它现在包含了您的构建文件夹的内容。</p><p id="029b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">恭喜</strong>！现在您有了一个连续的部署管道，每次您为您的项目创建一个发布时，它都会被触发。您不再需要自己做部署的脏活累活了。</p><p id="9980" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果是今天的话。编码快乐！</p><p id="14cf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">通过</strong><a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is">LinkedIn</strong></a><strong class="kz is">或我的</strong> <a class="ae kw" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is">个人网站</strong> </a> <strong class="kz is">与我取得联系。</strong></p></div></div>    
</body>
</html>
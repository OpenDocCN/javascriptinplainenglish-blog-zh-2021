<html>
<head>
<title>How to Setup and Add Google Analytics to your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置谷歌分析并将其添加到React应用程序中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-setup-and-add-google-analytics-to-your-react-app-fd361f47ac7b?source=collection_archive---------0-----------------------#2021-01-23">https://javascript.plainenglish.io/how-to-setup-and-add-google-analytics-to-your-react-app-fd361f47ac7b?source=collection_archive---------0-----------------------#2021-01-23</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/97a07f8b1075faf4cdf9a33cf4a95199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7nz5apjozJwonwNtpaS9og.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@jannerboy62?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Nick Fewings</a> on <a class="ae kd" href="https://unsplash.com/s/photos/analytics?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c31a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在当前的信息时代，每一个成功的企业都需要了解其客户以及他们最关心的是什么。最简单的方法就是在他们访问你的网站时跟踪他们。</p><p id="c96f" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">他们与你网站的互动可以让你更好地了解他们在寻找什么，帮助你更好地优化用户体验。</p><p id="44d9" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">幸运的是，Google已经使洞察你的网络应用变得很容易。</p><h1 id="009e" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">你能用分析做什么？</h1><ul class=""><li id="2a4e" class="ma mb ir kg b kh mc kl md kp me kt mf kx mg lb mh mi mj mk bi translated">你可以深入了解他们居住的<strong class="kg is">地区</strong>。</li><li id="529f" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">你可以了解哪些<strong class="kg is">年龄段的人</strong>对你的生意更感兴趣</li><li id="f938" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">记录他们平均花费了多少时间</li><li id="a8ec" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">跟踪新的<strong class="kg is">用户获取率</strong></li><li id="0062" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">跟踪您的<strong class="kg is">收入</strong></li></ul><h1 id="b81d" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">作为开发人员的好处</h1><ul class=""><li id="3eba" class="ma mb ir kg b kh mc kl md kp me kt mf kx mg lb mh mi mj mk bi translated">您可以跟踪您的应用程序中是否有任何<strong class="kg is"> bug </strong></li><li id="8232" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">您可以根据用户的兴趣<strong class="kg is">优化</strong></li></ul><p id="3529" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">还有更多…</p><p id="2f49" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">因此，无论你是一个多么小的开发者或企业，你都应该将分析整合到你的网站中，因为它是免费的，并且容易设置。</p><h1 id="1c1d" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第一步。创建一个帐户</h1><p id="c156" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">转到<a class="ae kd" href="https://analytics.google.com/" rel="noopener ugc nofollow" target="_blank">analytics.google.com</a></p><p id="a72a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">如果你已经有一个谷歌帐户(你可能已经有了)，你只需要建立一个新的帐户，并给它一个名字。</p><h1 id="0553" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第二步。创建属性</h1><p id="c343" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">属性是谷歌追踪你网站的一种方式。我们需要为我们的网站创建一个新的属性。</p><ul class=""><li id="4db1" class="ma mb ir kg b kh ki kl km kp mt kt mu kx mv lb mh mi mj mk bi translated">去你的仪表盘找到<code class="fe mw mx my mz b">Admin</code>-&gt;T1】</li><li id="6a6e" class="ma mb ir kg b kh ml kl mm kp mn kt mo kx mp lb mh mi mj mk bi translated">填写所需的名称和其他详细信息，并提供您网站的URL。</li></ul><blockquote class="na nb nc"><p id="6cab" class="ke kf nd kg b kh ki kj kk kl km kn ko ne kq kr ks nf ku kv kw ng ky kz la lb ik bi translated">确保点击高级设置并打开创建通用属性选项。默认情况下，谷歌不会创建一个通用属性。</p></blockquote><figure class="ni nj nk nl gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nh"><img src="../Images/a7ca0f7a31958259fd72e5858325f2c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cIfHIh_jnDAZdBZY5ZD2aQ.png"/></div></div></figure><ul class=""><li id="fed0" class="ma mb ir kg b kh ki kl km kp mt kt mu kx mv lb mh mi mj mk bi translated">然后选择一个属性，获取跟踪id并将其保存在某个地方。</li></ul><figure class="ni nj nk nl gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj nm"><img src="../Images/be838ba10692f762cbfdfbf80e8ec733.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hj7AdusSGWj2152T2htKYQ.png"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Getting Tracking ID</figcaption></figure><p id="248d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在，您已经完成了在Google Analytics中设置您的项目。如果你有一个实时网站，你会开始对访问者有所了解。</p><blockquote class="na nb nc"><p id="af0a" class="ke kf nd kg b kh ki kj kk kl km kn ko ne kq kr ks nf ku kv kw ng ky kz la lb ik bi translated">到这一部分，我们没有做任何具体的反应。这些是任何一个直播网站都可以做到的！</p></blockquote><p id="7dbf" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">但是我们想要的不止这些。我们希望跟踪用户的确切旅程。我们想更多地了解我们的网站和用户之间的互动。为此，我们需要为我们的项目设置谷歌分析。</p><h1 id="27dd" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第三步。安装依赖项</h1><p id="4a1a" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">首先，从npm安装<code class="fe mw mx my mz b">react-ga</code>包。这是React与Google analytics集成的官方npm包。</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="d6c4" class="nr ld ir mz b gz ns nt l nu nv">yarn add react-ga</span></pre><p id="c87e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">或者</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="2b61" class="nr ld ir mz b gz ns nt l nu nv">npm i react-ga -S</span></pre><h1 id="1f59" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第四步。在项目内设置分析</h1><p id="08ea" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">在你的项目中设置<strong class="kg is">谷歌分析</strong>。你应该在<code class="fe mw mx my mz b">App.js</code>或者<code class="fe mw mx my mz b">index.js</code>里面做。来自react-ga文档</p><blockquote class="na nb nc"><p id="1d0c" class="ke kf nd kg b kh ki kj kk kl km kn ko ne kq kr ks nf ku kv kw ng ky kz la lb ik bi translated">在任何其他跟踪功能记录任何数据之前，必须使用此功能初始化GA。</p></blockquote><p id="7734" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">因此，将以下代码添加到您的App.js文件中</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="e681" class="nr ld ir mz b gz ns nt l nu nv">import ReactGA from 'react-ga';</span><span id="00ac" class="nr ld ir mz b gz nw nt l nu nv">const TRACKING_ID = "UA-12341234-1"; // YOUR_OWN_TRACKING_ID<br/>ReactGA.initialize(TRACKING_ID);</span></pre><h1 id="1007" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第五步。记录自定义事件</h1><p id="57a1" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">现在你有这么多的选择来玩。如果您想跟踪用户点击特定按钮或执行特定操作的次数，您可以这样做。</p><p id="4d79" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">要跟踪用户创建事件，您可以在用户创建帐户时调用以下函数。</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="1b16" class="nr ld ir mz b gz ns nt l nu nv">ReactGA.event({<br/>  category: 'User',<br/>  action: 'Created an Account'<br/>});</span></pre><p id="9ff6" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">为了捕捉异常，</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="6d92" class="nr ld ir mz b gz ns nt l nu nv">ReactGA.exception({<br/>  description: 'An error ocurred',<br/>  fatal: true<br/>});</span></pre><p id="4f1a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">你能做的远不止这些。点击<a class="ae kd" href="https://github.com/react-ga/react-ga" rel="noopener ugc nofollow" target="_blank">查看更多信息</a>。</p><h1 id="016f" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第六步。与React路由器集成</h1><p id="70bf" class="pw-post-body-paragraph ke kf ir kg b kh mc kj kk kl md kn ko kp mq kr ks kt mr kv kw kx ms kz la lb ik bi translated">大多数时候，我们想知道我们的用户访问哪些页面更多。但不幸的是，很难用React这样的<strong class="kg is"> CSR </strong>(客户端渲染)库来跟踪。因为React只加载一个HTML文件。</p><p id="d999" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">但是有一个解决方法。对于react中的路由，我们主要使用<code class="fe mw mx my mz b">react-router-dom</code>，这个库为我们提供了一个跟踪URL变化的特设工具。</p><p id="5c1a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">因此，我们可以将URL更改数据发送到google analytics，以跟踪用户访问哪些页面的频率高于其他页面。</p><p id="844d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我们可以创建一个<code class="fe mw mx my mz b">RouteChangeTracker</code>组件来监听路线的变化，并将数据发送回<strong class="kg is"> Google Analytics </strong></p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="cfd7" class="nr ld ir mz b gz ns nt l nu nv">import <strong class="mz is"><em class="nd">React </em></strong>from 'react'</span><span id="988e" class="nr ld ir mz b gz nw nt l nu nv">import { withRouter } from 'react-router-dom';<br/>import ReactGA from 'react-ga';</span><span id="6fe0" class="nr ld ir mz b gz nw nt l nu nv">const RouteChangeTracker = ({ history }) =&gt; {<br/><br/>    history.listen((location, action) =&gt; {<br/>        <!-- -->ReactGA.set({ page: location.pathname });<br/>        ReactGA.pageview(location.pathname);<br/>    });<br/><br/>    return &lt;div&gt;&lt;/div&gt;;<br/>};<br/><br/>export default withRouter(RouteChangeTracker);</span></pre><p id="bf7a" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">不要忘记在你的<code class="fe mw mx my mz b">App.js</code>文件中添加<code class="fe mw mx my mz b">RouteChangeTracker</code>组件。</p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="d39a" class="nr ld ir mz b gz ns nt l nu nv">import RouteChangeTracker from './RouteChangeTracker'</span><span id="e164" class="nr ld ir mz b gz nw nt l nu nv">export const App = () =&gt; {</span><span id="1658" class="nr ld ir mz b gz nw nt l nu nv">  //other logics goes here</span><span id="614e" class="nr ld ir mz b gz nw nt l nu nv">  return &lt;div&gt;<br/>    &lt;RouteChangeTracker /&gt;<br/>  &lt;/div&gt;</span><span id="85c3" class="nr ld ir mz b gz nw nt l nu nv">}</span></pre><p id="f9fa" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在你都准备好了。您应该在您的分析仪表板中看到用户如何与您的应用程序交互。</p><p id="98f3" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">今天到此为止。编码快乐！:D</p><p id="f911" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is">有话要说？</strong></p><pre class="ni nj nk nl gu nn mz no np aw nq bi"><span id="c75b" class="nr ld ir mz b gz ns nt l nu nv"><strong class="mz is">Get in touch with me via </strong><a class="ae kd" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="mz is">LinkedIn</strong></a><strong class="mz is"> or my </strong><a class="ae kd" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="mz is">Personal Website</strong></a><strong class="mz is">.</strong></span></pre><div class="nx ny gq gs nz oa"><a href="https://betterprogramming.pub/21-best-practices-for-a-clean-react-project-df788a682fb" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd is gz z fq of fs ft og fv fx iq bi translated">清洁React项目的21个最佳实践</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">提高代码质量的实用建议</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">better编程. pub</p></div></div><div class="oj l"><div class="ok l ol om on oj oo jx oa"/></div></div></a></div><div class="nx ny gq gs nz oa"><a rel="noopener  ugc nofollow" target="_blank" href="/45-npm-packages-to-solve-16-react-problems-a9ab18946224"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd is gz z fq of fs ft og fv fx iq bi translated">45个NPM软件包解决16个React问题</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">关于如何选择完美的npm包的深入指导</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="oj l"><div class="op l ol om on oj oo jx oa"/></div></div></a></div><div class="nx ny gq gs nz oa"><a rel="noopener  ugc nofollow" target="_blank" href="/20-essential-parts-of-any-large-scale-react-app-ee4bd35436a0"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd is gz z fq of fs ft og fv fx iq bi translated">任何大型React应用程序的20个基本部分</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">如果您正在编写企业级代码，您需要了解这一点</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="oj l"><div class="oq l ol om on oj oo jx oa"/></div></div></a></div><div class="nx ny gq gs nz oa"><a href="https://betterprogramming.pub/the-7-traits-of-a-rock-star-react-developer-747fbb001c05" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd is gz z fq of fs ft og fv fx iq bi translated">摇滚明星React开发者的7个特质</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">造成差异的习惯</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">better编程. pub</p></div></div><div class="oj l"><div class="or l ol om on oj oo jx oa"/></div></div></a></div><h2 id="f873" class="nr ld ir bd le os ot dn li ou ov dp lm kp ow ox lq kt oy oz lu kx pa pb ly pc bi translated">进一步阅读</h2><div class="nx ny gq gs nz oa"><a rel="noopener  ugc nofollow" target="_blank" href="/5-tips-to-scale-up-your-react-apps-8fb68319062e"><div class="ob ab fp"><div class="oc ab od cl cj oe"><h2 class="bd is gz z fq of fs ft og fv fx iq bi translated">扩展React应用的5个技巧</h2><div class="oh l"><h3 class="bd b gz z fq of fs ft og fv fx dk translated">1.将Bit用于可组合设计2。设计令牌3。网络请求的定制钩子4。客户端与服务器状态5。一个…</h3></div><div class="oi l"><p class="bd b dl z fq of fs ft og fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="oj l"><div class="pd l ol om on oj oo jx oa"/></div></div></a></div></div><div class="ab cl pe pf hv pg" role="separator"><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj pk"/><span class="ph bw bk pi pj"/></div><div class="ik il im in io"><p id="9e03" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="nd">更多内容请看</em><a class="ae kd" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nd">plain English . io</em></strong></a><em class="nd">。报名参加我们的</em> <a class="ae kd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="nd">免费周报</em> </strong> </a> <em class="nd">。关注我们关于</em><a class="ae kd" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nd">Twitter</em></strong></a><a class="ae kd" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nd">LinkedIn</em></strong></a><em class="nd"/><a class="ae kd" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nd">YouTube</em></strong></a><em class="nd"/><a class="ae kd" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kg is"><em class="nd">不和</em> </strong> </a> <em class="nd">。对增长黑客感兴趣？检查</em> <a class="ae kd" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="nd">电路</em> </strong> </a> <em class="nd">。</em></p></div></div>    
</body>
</html>
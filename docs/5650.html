<html>
<head>
<title>TypeScript Environment with Webpack Compilation and Automatic Reload</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有Webpack编译和自动重新加载的TypeScript环境</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-environment-with-webpack-compilation-and-automatic-reload-b4d6d5a60f6f?source=collection_archive---------5-----------------------#2021-11-26">https://javascript.plainenglish.io/typescript-environment-with-webpack-compilation-and-automatic-reload-b4d6d5a60f6f?source=collection_archive---------5-----------------------#2021-11-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/3fc8eb675f7b6b8dc049db453234027f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jF3ud2JHAzzyQyCggs9Hww.png"/></div></figure><p id="5390" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这篇文章中，我将提供一个非常详细的解释，说明如何轻松地建立一个本地开发环境来编译TypeScript和捆绑您的代码，以便在不使用框架的情况下进行生产。干净简单。</p><p id="27fb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这篇文章将会被尽可能详细地解释，所以一个完全的初学者不应该去别处寻找答案。</p><h1 id="4802" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">使用</h1><p id="f85c" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">有人可能会问为什么不采用React、Vue.js或Angular之类的现代框架，答案很简单——你不想要或不需要它们，或者你只是想探索这些框架是如何在非常低的水平上用编译架构启动的。</p><p id="75c6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我通常为互联网创建游戏(我将在另一个教程中展示)，但这里的想法是，如果你不需要，或者特别是如果你有大小限制，你可能不想依赖于框架，所以这是简单明了的重点和实际的语言和构建过程。</p><h1 id="3c0d" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">设置</h1><p id="d1b5" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">你需要启动的是Node.js或者npm，当然也可以是任何其他的包管理器。</p><p id="a143" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">起点是您的终端:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="3e14" class="mb kq in lx b gy mc md l me mf"># create a folder<br/>mkdir webpack-ts-starter</span><span id="82d7" class="mb kq in lx b gy mg md l me mf"># navigate to folder<br/>cd webpack-ts-starter</span><span id="c404" class="mb kq in lx b gy mg md l me mf"># initialize node.js project, skipping npm's interactive tutorial<br/>npm init -y</span></pre><p id="616e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在您已经有了一个node.js项目，您可以使用它轻松地安装项目的依赖项，并在<code class="fe mh mi mj lx b">package.json</code>文件中跟踪它们。</p><h1 id="0860" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">。gitignore</h1><p id="e13a" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">我总是建议尽早添加一个<code class="fe mh mi mj lx b">.gitignore</code>文件。我是这样创建我的:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="9e6a" class="mb kq in lx b gy mc md l me mf"># create the file through the terminal<br/>touch .gitignore</span></pre><p id="d041" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">和它的实际内容:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="999e" class="mb kq in lx b gy mc md l me mf"># mac os finder hidden file<br/>.DS_Store</span><span id="0c9b" class="mb kq in lx b gy mg md l me mf"># the installed npm packages<br/>node_modules</span><span id="c1ce" class="mb kq in lx b gy mg md l me mf"># compilation folder if we decide to deploy our package as a library<br/>lib</span><span id="c2d9" class="mb kq in lx b gy mg md l me mf"># main project compilation folder<br/>dist</span><span id="1208" class="mb kq in lx b gy mg md l me mf"># hidden folder that contains local history from the Local History <br/># extension<br/>.history</span></pre><p id="e825" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这个文件确保所有那些不必要的文件不会上传到git，所以我们的库将保持干净，只有源文件。</p><h1 id="dcd4" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">属国</h1><p id="760d" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">先说最主要的，写这篇文章的原因— TypeScript。</p><p id="4fba" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mh mi mj lx b">npm install --save-dev typescript</code></p><p id="8cc6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">上面的命令为我们提供了正式的TypeScript包和对<code class="fe mh mi mj lx b">tsc</code>命令的访问，以便手动编译代码。这通常需要一个<code class="fe mh mi mj lx b">tsconfig.json</code>文件，放在项目的根目录下，否则，TypeScript将遍历父文件夹，直到找到一个为止，或者它将退回到缺省值，这也不错，但不是完全为我们的特定需求配置的。</p><p id="26f4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">因此，创建一个<code class="fe mh mi mj lx b">tsconfig.json</code>文件并用以下内容填充它:</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="6dd0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您已经准备好使用TypeScript了。创建这个文件后，你可以在同一个文件夹中运行<code class="fe mh mi mj lx b">tsc</code>命令，它将编译在<code class="fe mh mi mj lx b">src</code>下找到的所有内容，并将其导出到<code class="fe mh mi mj lx b">lib</code>文件夹。</p><p id="64e4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">自动化</strong></p><p id="e725" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这基本上就是你所需要的，但是随着项目变得越来越大，仅仅使用<code class="fe mh mi mj lx b">tsc</code>命令是不够的。编译有很多选择，但我个人使用webpack，下面是你也可以使用的方法:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="e776" class="mb kq in lx b gy mc md l me mf">npm install --save-dev webpack webpack-cli</span></pre><p id="1be8" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这将把webpack及其CLI添加到项目的开发依赖项中。对于那些不知道的人来说，开发依赖是指那些包，它们只在开发时需要，例如构建管道、链接各种任务运行程序等等，在最终构建的项目中通常不需要。</p><p id="c00b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">与<code class="fe mh mi mj lx b">tsconfig.json</code>类似，webpack需要一个配置文件来完成编译。在项目的根目录下创建一个<code class="fe mh mi mj lx b">webpack.config.js</code>文件，并像这样填充它:</p><figure class="ls lt lu lv gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="8eaf" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在继续之前，让我们再安装几个依赖项:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="eaa0" class="mb kq in lx b gy mc md l me mf">npm install --save-dev ts-loader html-webpack-plugin</span></pre><p id="4d07" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mh mi mj lx b">ts-loader</code>实际上是为webpack加载TypeScript文件，而<code class="fe mh mi mj lx b">html-webpack-plugin</code>是一个包，它将为构建文件夹创建一个index.html文件，并将自动包含编译后的代码作为其源代码。</p><p id="011b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这是一个非常简单的webpack配置，它将从位于<code class="fe mh mi mj lx b">src</code>文件夹中的index.ts文件开始，并将编译和捆绑连接到它的每个文件，跳过未使用的文件(通常称为树抖动)。</p><p id="54f2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在这个阶段，您已经可以访问将编译和捆绑代码的<code class="fe mh mi mj lx b">webpack</code>命令。我所做的是将它添加到<code class="fe mh mi mj lx b">package.json</code>中，在<code class="fe mh mi mj lx b">scripts</code>下，就像这样:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="0907" class="mb kq in lx b gy mc md l me mf">"scripts": {</span><span id="279b" class="mb kq in lx b gy mg md l me mf"> "build": "webpack"<br/>}</span></pre><p id="4f54" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">那么运行<code class="fe mh mi mj lx b">npm run build</code>就会帮你做到。</p><h1 id="1883" class="kp kq in bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">下一关</h1><p id="da93" class="pw-post-body-paragraph jr js in jt b ju ln jw jx jy lo ka kb kc lp ke kf kg lq ki kj kk lr km kn ko ig bi translated">因此，每次需要更改代码库时运行这个命令可能会有点乏味，所以webpack也有一个开发服务器来代替我们进行监视和编译，甚至不要求我们在任何可能的时候重新加载应用程序。这一概念被称为<a class="ae mm" href="https://webpack.js.org/guides/hot-module-replacement/" rel="noopener ugc nofollow" target="_blank">热模块更换</a>，设置方法如下:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="e76f" class="mb kq in lx b gy mc md l me mf">npm install --save-dev webpack-dev-server</span><span id="0e93" class="mb kq in lx b gy mg md l me mf"># within package.json, add the script<br/>"serve": "webpack serve"</span><span id="d217" class="mb kq in lx b gy mg md l me mf"># webpack.config.js<br/>devServer: {<br/>  static: "./dist",<br/>  hot: true<br/>}</span></pre><p id="bbd5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">然后运行<code class="fe mh mi mj lx b">npm run serve</code>将启动一个本地服务器，并在每次代码更改时自动编译和重新加载。</p><p id="4517" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">就是这样，现在你有了一个非常简单的开发环境，可以编译TypeScript并使用HMR。整个项目上传到这里:</p><div class="mn mo gp gr mp mq"><a href="https://github.com/idzhurov/webpack-ts-starter" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd io gy z fp mv fr fs mw fu fw im bi translated">GitHub-idzhurov/web pack-ts-starter</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">此时您不能执行该操作。您已使用另一个标签页或窗口登录。您已在另一个选项卡中注销，或者…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">github.com</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne jp mq"/></div></div></a></div><p id="1320" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="nf">更多内容看</em> <a class="ae mm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="nf">说白了。报名参加我们的</em> <a class="ae mm" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> <em class="nf">免费每周简讯点击这里</em> </strong> </a> <strong class="jt io"> <em class="nf">。</em> </strong></strong></a></p></div></div>    
</body>
</html>
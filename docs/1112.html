<html>
<head>
<title>Formatting Dates with Helpers in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript中的助手格式化日期</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/formatting-dates-with-custom-helpers-in-javascript-973f11ea8c5d?source=collection_archive---------9-----------------------#2021-03-08">https://javascript.plainenglish.io/formatting-dates-with-custom-helpers-in-javascript-973f11ea8c5d?source=collection_archive---------9-----------------------#2021-03-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/6af691026cc8e7ad5dba2586a8a8787d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7hRdRBPZ--QAq7PM"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">The Land Before Time</figcaption></figure><h1 id="459d" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="b02c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我正在为公寓设计一个HUD(平视显示器),上面会有一些重要的项目，比如:当前天气、7天天气预报以及我们所有室内植物的植物护理说明。这个React应用程序基于Ruby on Rails RESTful API，最终将从一个平板电脑上访问，该平板电脑显著地显示在一面重要的墙上，运行在本地Raspberry Pi服务器上。</p><p id="bda2" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">当然，我可以买一个谷歌主页，亚马逊Alexa之类的东西，或者苹果什么的，但是这有什么意思呢？</p><h1 id="1b95" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">时代</h1><p id="d6a6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">对于我的应用程序的天气部分，我使用的是<a class="ae lw" href="https://openweathermap.org/" rel="noopener ugc nofollow" target="_blank">的OpenWeather </a>的免费<a class="ae lw" href="https://openweathermap.org/api/one-call-api" rel="noopener ugc nofollow" target="_blank"> OneCall API </a>。你会得到这样的回应:</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mb mc l"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Example API Response</figcaption></figure><h2 id="4c9c" class="md jw in bd jx me mf dn kb mg mh dp kf le mi mj kj li mk ml kn lm mm mn kr mo bi translated">UNIX纪元</h2><p id="8013" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">我不知道你怎么想，但是当日期/时间信息以基于“纪元”以来的秒数的<a class="ae lw" href="https://en.wikipedia.org/wiki/Unix_time" rel="noopener ugc nofollow" target="_blank"> UNIX格式</a>书写时，我在读取它时有一点麻烦。比如<code class="fe mp mq mr ms b">595832400</code> Epoch？是的，我在90年代看了大约100倍的<a class="ae lw" href="https://en.wikipedia.org/wiki/The_Land_Before_Time" rel="noopener ugc nofollow" target="_blank"><em class="mt"/></a>之前的土地，他们从来没有用过那个词。</p><p id="6300" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">幻想出UNIX时代的酷猫们决定这个重要的日子应该是1970年1月1日。巧合的是，这一天美国总统理查德·尼克松签署了国家环境政策法案，使之成为法律……但是我跑题了。</p><h2 id="54e7" class="md jw in bd jx me mf dn kb mg mh dp kf le mi mj kj li mk ml kn lm mm mn kr mo bi translated">JavaScript纪元</h2><p id="1942" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">为了保持事情的趣味性，JavaScript工厂的人决定从任何时候到1970年1月1日之间的时间应该以毫秒为单位。因此，我们必须获取返回的日期/时间对象，并将其乘以1000(也就是一秒钟内有多少毫秒)。因此，如果我们把土地的释放日期放在时间之前，<code class="fe mp mq mr ms b">595832400</code>并将其转换为毫秒，我们将得到<code class="fe mp mq mr ms b">595832400 * 1000 = 595832400000</code></p><h1 id="883c" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">日期对象</h1><p id="3701" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">假设我想从我的日期对象中获取一周中的某一天。我会这样做:</p><pre class="lx ly lz ma gt mu ms mv mw aw mx bi"><span id="6f87" class="md jw in ms b gy my mz l na nb">let date = new Date(595832400000)</span><span id="b835" class="md jw in ms b gy nc mz l na nb">let day = date.getDay() <br/>day // =&gt; 5</span></pre><p id="f4b5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">所以返回一个数字，这意味着我们要做更多的工作。</p><pre class="lx ly lz ma gt mu ms mv mw aw mx bi"><span id="47b7" class="md jw in ms b gy my mz l na nb">const dayMap = {  <br/>  0: "Sunday",  <br/>  1: "Monday",  <br/>  2: "Tuesday",  <br/>  3: "Wednesday",  <br/>  4: "Thursday",  <br/>  5: "Friday",  <br/>  6: "Saturday"<br/>}</span><span id="4814" class="md jw in ms b gy nc mz l na nb">dayMap[day] // =&gt; "Friday"</span></pre><p id="1c9d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">现在我们有点进展了，但是让我们玩得更开心一点。如果我只想呈现前三个字母，或者前两个字母。我想把它作为一个选项，而不是仅仅把<code class="fe mp mq mr ms b">dayMap</code>硬编码成更短的字符串。</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="b581" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">看一看<code class="fe mp mq mr ms b">uppercaseAbbreviate()</code>。它有两个参数:1)日期(“星期一、星期二等”)，2)指定返回的字符数的选项。现在我们需要把这些都转换成大写:<code class="fe mp mq mr ms b">“FRI”</code>。怎么会？</p><ol class=""><li id="51e5" class="nd ne in kv b kw lr la ls le nf li ng lm nh lq ni nj nk nl bi translated">只选择前3个字母。</li><li id="d155" class="nd ne in kv b kw nm la nn le no li np lm nq lq ni nj nk nl bi translated">将数组中的每个字符大写。</li></ol><pre class="lx ly lz ma gt mu ms mv mw aw mx bi"><span id="3d65" class="md jw in ms b gy my mz l na nb">let day = "Friday"</span><span id="b64f" class="md jw in ms b gy nc mz l na nb">day.slice(0, 3) //=&gt; "Fri"<br/>// this slices the string from the first character, <br/>// at the 0th index, all the way up to and including <br/>// the 3rd character, "i"</span><span id="7a70" class="md jw in ms b gy nc mz l na nb">day.slice(0, 3).toUpperCase()<br/>// here we capitalize every member of the string<br/>//=&gt;"FRI"</span></pre><h1 id="1ee6" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">收场白</h1><p id="28af" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">坦白说:有一个名为<a class="ae lw" href="https://day.js.org/docs/en/display/format" rel="noopener ugc nofollow" target="_blank"> Day.js </a>的很棒的库，它让所有这些变得更容易，但是知道如何深入事物如何工作的本质以及如何将工具添加到您的工具箱中是很重要的！</p><div class="nr ns gp gr nt nu"><a href="https://day.js.org/docs/en/display/format" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd io gy z fp nz fr fs oa fu fw im bi translated">格式化Day.js</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">根据传入的标记字符串获取格式化的日期。要转义字符，请用方括号将它们括起来…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">day.js.org</p></div></div><div class="od l"><div class="oe l of og oh od oi jp nu"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>One Step to Load MP3s into a React Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将MP3加载到React应用程序的一个步骤</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/one-step-to-load-mp3-in-react-b952250912e2?source=collection_archive---------2-----------------------#2021-05-02">https://javascript.plainenglish.io/one-step-to-load-mp3-in-react-b952250912e2?source=collection_archive---------2-----------------------#2021-05-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d276" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">是的，你只需要执行这一步就可以在React应用程序中加载MP3。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ca80d939cca203cf2b55d243a834a4cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MsJQMs5-lNxWMSko"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">NeONBRAND</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="b03c" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">在后台</h1><p id="04ff" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我正在开发一个帮助编辑音频文件的应用程序。我需要在我的React应用程序中加载音频文件。我谷歌了一下，得到了一堆加载MP3的包。尽管如此，我在静态文件夹中的mp3文件还没有导出或准备好使用。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="2c45" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">概观</h1><p id="370d" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">在谷歌搜索了将近一个小时后，我找到了答案。您只需要执行一个步骤就可以将MP3加载到React应用程序中。</p><p id="4591" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们直接跳到例子。假设我们的React应用程序中有音频文件，我们需要加载所有的音频文件控件，比如播放按钮、暂停按钮、扬声器音量范围按钮等等。</p><p id="9192" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">React应用程序的问题是，特别是当您使用Next.js时，它们在一个目录中提供静态文件(对于Next.js是公共的)，并且在服务器端从单个目录加载这些静态文件是困难的。</p><p id="299d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您不熟悉服务器端，那么服务器端渲染基本上是在服务器上运行应用程序，而不是在本地运行。</p><p id="ddd3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以加载图像是非常容易的，并且在服务器端由Next.js轻松处理。</p><p id="4594" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Next.js只是在服务器上加载这些静态图像，在构建应用程序之后，这些图像是从Next.js自己创建的Express服务器上加载的。我们从来不把应用程序和图片捆绑在一起，只是为了一个性能上的原因。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="0faa" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">问题</h1><p id="12cd" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">mp3文件的主要问题是它们在服务器端不能被识别。音频支持是浏览器的功能，而不是服务器的功能。所以我们将面临在服务器端运行MP3的问题。</p><p id="557c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要一个名为url-loader的npm包，它可以简单地处理HTML文件，并将它们转换成数据URL base 64编码字符串。就像你在浏览器上传一个PDF或者图片，把它们转换成base 64发送给服务器一样。</p><p id="18e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将HTML文件转换成数据URL是很重要的，因为数据URL很容易被服务器识别和理解。我们不需要在服务器上实时转换；相反，我们可以使用webpack来为我们做这件事。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="0f64" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">解决办法</h1><p id="7f8f" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">您只需遵循一个步骤来配置webpack并使用npm包来提供mp3文件。</p><p id="d125" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦我们用url加载器包配置了webpack，我们只需告诉webpack将mp3文件作为整个应用程序包中的数据URL。Webpack将简单地把我们的脚本和mp3文件捆绑到一个数据URL中，以便在浏览器中理解和加载。</p><p id="ed15" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用的npm包是url-loader。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="29e6" class="mr lk iq mn b gy ms mt l mu mv"><a class="ae lb" href="https://www.npmjs.com/package/url-loader" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/url-loader</a></span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="743a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">编写代码</h1><p id="e97d" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我将把所有基本的必要过程留给您，比如创建Next.js存储库和添加一些示例mp3文件的过程。</p><p id="a7bc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">相反，我用的是现成的<a class="ae lb" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/NextJSArchitecture" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">例子</strong> </a> <strong class="jp ir">。</strong>一旦克隆了存储库，使用yarn或npm安装url-loader包。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="d9c1" class="mr lk iq mn b gy ms mt l mu mv">yarn add url-loader</span></pre><p id="90f8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在加载mp3的唯一也是最重要的步骤是配置webpack。在根目录中创建<code class="fe mw mx my mn b"><strong class="jp ir">next.config.js</strong></code>文件，并添加以下几行。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mz na l"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">next.config.js</figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><p id="b759" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">添加到<code class="fe mw mx my mn b"><strong class="jp ir">next.config.js</strong></code>文件后，我们就可以从公共文件夹导入mp3文件并使用它们了。</p><p id="f5d1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您查看我们提到的代码，比如test，这是我们将使用的文件格式或文件扩展名。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h1 id="6a6e" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">结论</h1><p id="5f88" class="pw-post-body-paragraph jn jo iq jp b jq mh js jt ju mi jw jx jy mj ka kb kc mk ke kf kg ml ki kj kk ij bi translated">我们简单地使用webpack和外部加载器来捆绑和使用我们的mp3文件。我们可以为webpack配置提供更多的加载器来捆绑想要的文件，例如SVG、js或png或handlebars等等。我们甚至可以将webpack用于Node.js中的服务器应用程序。</p><p id="7534" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请继续关注，我将在另一篇文章中完整介绍一个webpack。</p><pre class="km kn ko kp gt mm mn mo mp aw mq bi"><span id="3754" class="mr lk iq mn b gy ms mt l mu mv">Until, next time. Have a good day, People.</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><div class="km kn ko kp gt nb"><a href="https://medium.com/nerd-for-tech/flatlist-is-still-underrated-796130a8b8f2" rel="noopener follow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">Flatlist仍然被低估了</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">也许你使用Flatlist的方式是错误的，这里有一些提示和技巧</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">medium.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np kv nb"/></div></div></a></div><div class="nq nr gp gr ns nb"><a href="https://medium.com/nerd-for-tech/top-5-ui-libraries-for-react-native-2ce8a973bb1c" rel="noopener follow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">React Native的前5个用户界面库</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">列出了前5个React原生UI库</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">medium.com</p></div></div><div class="nk l"><div class="nt l nm nn no nk np kv nb"/></div></div></a></div><div class="nq nr gp gr ns nb"><a href="https://medium.com/nerd-for-tech/perfect-styling-library-for-react-native-9de410d9d5eb" rel="noopener follow" target="_blank"><div class="nc ab fo"><div class="nd ab ne cl cj nf"><h2 class="bd ir gy z fp ng fr fs nh fu fw ip bi translated">React Native的完美样式库</h2><div class="ni l"><h3 class="bd b gy z fp ng fr fs nh fu fw dk translated">使用React Native处理顺风CSS</h3></div><div class="nj l"><p class="bd b dl z fp ng fr fs nh fu fw dk translated">medium.com</p></div></div><div class="nk l"><div class="nu l nm nn no nk np kv nb"/></div></div></a></div><p id="4b24" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="nv">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
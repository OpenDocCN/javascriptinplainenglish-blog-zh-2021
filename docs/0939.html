<html>
<head>
<title>Remove Item with Animation in a Horizontal FlatList in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中移除水平平面列表中带动画的项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/remove-item-with-animation-in-a-horizontal-flatlist-with-layoutanimation-in-react-native-4cd5fc172cb3?source=collection_archive---------5-----------------------#2021-02-27">https://javascript.plainenglish.io/remove-item-with-animation-in-a-horizontal-flatlist-with-layoutanimation-in-react-native-4cd5fc172cb3?source=collection_archive---------5-----------------------#2021-02-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9969" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用布局动画</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a25b6bb52a1b262023743798c8a9ed19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wC4FIVYC2mhxEvAOZ2a5_A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Our horizontal FlatList</figcaption></figure><p id="fdb4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">我一直在React Native里做一个横向的平面列表。这个想法是，用户可以通过点击项目来移除项目。因此，一旦项目被删除，我需要:</p><ul class=""><li id="c2f6" class="lo lp in ku b kv kw ky kz lb lq lf lr lj ls ln lt lu lv lw bi translated">用一个漂亮的不透明动画从列表中删除项目</li><li id="ef64" class="lo lp in ku b kv lx ky ly lb lz lf ma lj mb ln lt lu lv lw bi translated">同时，我需要用下一个滑入的项目来填充空间，以便正确地填充它。</li></ul><p id="93e6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">起初，我用react native<strong class="ku io">Animated</strong>library试了一下，但是它越来越乱，我无法实现我想要的效果。然而，使用react-native的<strong class="ku io"> LayoutAnimation </strong>，这可以很容易地完成。那我们开始吧。首先，我们将为我们的横向平面列表进行初始设置。</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="90e6" class="mh mi in md b gy mj mk l ml mm">onst { height, width } = Dimensions.get("window");<br/>const dummyData = [<br/>  {<br/>    id: 1,<br/>    name: "orange card",<br/>    color: "orange",<br/>  },<br/>  {<br/>    id: 2,<br/>    name: "red card",<br/>    color: "red",<br/>  },<br/>  {<br/>    id: 3,<br/>    name: "green card",<br/>    color: "green",<br/>  },<br/>  {<br/>    id: 4,<br/>    name: "blue card",<br/>    color: "blue",<br/>  },<br/>  {<br/>    id: 5,<br/>    name: "cyan card",<br/>    color: "cyan",<br/>  },<br/>];<br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    justifyContent: "center",<br/>    paddingTop: 120,<br/>    backgroundColor: "#ecf0f1",<br/>    padding: 8,<br/>  },<br/>  flatList: {<br/>    paddingHorizontal: 16,<br/>    paddingVertical: 16,<br/>  },<br/>  cardContainer: {<br/>    height: 100,<br/>    width: width * 0.5,<br/>    marginRight: 8,<br/>  },<br/>  card: {<br/>    height: 100,<br/>    width: width * 0.5,<br/>    borderRadius: 12,<br/>    padding: 10,<br/>  },<br/>  text: { color: "white", fontWeight: 'bold' }<br/>});</span><span id="469c" class="mh mi in md b gy mn mk l ml mm">export default function App() {<br/>  const [data, setData] = React.useState(dummyData);<br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;FlatList<br/>        showsHorizontalScrollIndicator={false}<br/>        contentContainerStyle={styles.flatList}<br/>        horizontal={true}<br/>        data={data}<br/>        keyExtractor={(item) =&gt; item.id.toString()}<br/>        renderItem={({ item }) =&gt; {<br/>          return (<br/>            &lt;TouchableOpacity<br/>              style={styles.cardContainer}<br/>              onPress={() =&gt; removeItem(item.id)}<br/>            &gt;<br/>              &lt;Card style={[styles.card, {backgroundColor: item.color}]}&gt;<br/>                &lt;Text style={styles.text}&gt;{item.name}&lt;/Text&gt;<br/>              &lt;/Card&gt;<br/>            &lt;/TouchableOpacity&gt;<br/>          );<br/>        }}<br/>      /&gt;<br/>    &lt;/View&gt;<br/>  );<br/>}</span></pre><p id="e307" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">这样，我们得到以下输出。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/a64f6c2686a6872904ef6ab17fb0ccdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*zh6DCKKq1aNxzXuI53xBgg.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">init</figcaption></figure><p id="30cb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">现在是从平面列表中删除项目的时候了，我们可以将项目的id传递给我们的平面列表，并删除与id匹配的项目。像这样:</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="805a" class="mh mi in md b gy mj mk l ml mm">const removeItem = (id) =&gt; {<br/>    let arr = data.filter(function(item) {<br/>      return item.id !== id<br/>    })<br/>    setData(arr);<br/>  };</span></pre><p id="29b9" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果我们单击我们的项目，项目将从平面列表中删除，但没有任何动画。这会很奇怪。输出将如下所示-</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/2f57ab537fd292c21445798f5062b108.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*1KpcNdlnmO5ptv39ZtcBnA.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">remove without animation</figcaption></figure><p id="cdf7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">好了，开始动画吧。用<strong class="ku io">布局动画</strong>我们可以很容易地创建一个布局配置，将有效果。</p><pre class="kd ke kf kg gt mc md me mf aw mg bi"><span id="9ca7" class="mh mi in md b gy mj mk l ml mm">const layoutAnimConfig = {<br/>  duration: 300,<br/>  update: {<br/>    type: LayoutAnimation.Types.easeInEaseOut, <br/>  },<br/>  delete: {<br/>    duration: 100,<br/>    type: LayoutAnimation.Types.easeInEaseOut,<br/>    property: LayoutAnimation.Properties.opacity,<br/>  },<br/>};</span><span id="7fef" class="mh mi in md b gy mn mk l ml mm">const removeItem = (id) =&gt; {<br/>   let arr = data.filter(function(item) {<br/>     return item.id !== id<br/>   })<br/>   setData(arr);<br/>   // after removing the item, we start animation<br/>   LayoutAnimation.configureNext(layoutAnimConfig) <br/>};</span></pre><p id="27bc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">如果我们检查配置，我们可以看到从列表中删除项目时的动画。类型为<strong class="ku io"> easeInEaseOut </strong>，属性为<strong class="ku io">不透明度</strong>。因此，让我们看看最终的结果与<strong class="ku io">布局动画</strong>的影响。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b0a666c700c507f72b2c7afe417a9169.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/1*7hxrHEMdPKZj4b7ouCnxHw.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">remove animation</figcaption></figure><p id="52a0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">你可以在这里获得完整的源代码)(https://snack.expo.io/@saad-bashar/remove-item-flatlist)</p></div></div>    
</body>
</html>
<html>
<head>
<title>Gatsby.js — SASS, Plugins, Themes, and Data Sources</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Gatsby.js — SASS、插件、主题和数据源</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/gatsby-js-sass-plugins-themes-and-data-sources-5d6e5c531712?source=collection_archive---------14-----------------------#2021-02-08">https://javascript.plainenglish.io/gatsby-js-sass-plugins-themes-and-data-sources-5d6e5c531712?source=collection_archive---------14-----------------------#2021-02-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1661c44b7edaa4e25c9ec2a0c99a5283.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*knysKp5RXzhnFZL7"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@webstacks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Webstacks</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="85db" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Gatsby是一个基于React的静态网站框架。</p><p id="f7a9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它从外部数据源创建静态网站等等。</p><p id="fb08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Gatsby创建一个站点。</p><h1 id="3fe0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">与萨斯/SCSS的风格</h1><p id="6d3a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用萨斯和SCSS来设计Gatsby项目中组件的样式。</p><p id="5dca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只需要创建<code class="fe me mf mg mh b">.sass</code>和<code class="fe me mf mg mh b">.scss</code>文件，它们会被自动编译成<code class="fe me mf mg mh b">.css</code>。</p><h1 id="f62f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用插件</h1><p id="bfb5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过安装所需的包来添加插件，然后将它们添加到我们的配置中。</p><p id="4440" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们想要添加<code class="fe me mf mg mh b">gatsby-source-filesystem</code>插件，我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1cf9" class="mq lc iq mh b gy mr ms l mt mu">npm install gatsby-source-filesystem</span></pre><p id="4f9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">gatsby-config.js</code>中，我们加上:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9362" class="mq lc iq mh b gy mr ms l mt mu">/**<br/> * Configure your Gatsby site with this file.<br/> *<br/> * See: https://www.gatsbyjs.com/docs/gatsby-config/<br/> */</span><span id="cf0a" class="mq lc iq mh b gy mv ms l mt mu">module.exports = {<br/>  /* Your site config here */<br/>  plugins: [<br/>    {<br/>      resolve: `gatsby-source-filesystem`,<br/>      options: {<br/>        name: `images`,<br/>        path: `${__dirname}/src/images`,<br/>      },<br/>    },<br/>  ],<br/>}</span></pre><p id="588e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加插件。</p><h1 id="dbfa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建新插件</h1><p id="f4b1" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用Gatsby plugin starter创建自己的插件。</p><p id="acef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="e156" class="mq lc iq mh b gy mr ms l mt mu">gatsby new my-plugin https://github.com/gatsbyjs/gatsby-starter-plugin</span></pre><p id="05c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在我们的项目文件夹中添加插件。</p><p id="955d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe me mf mg mh b">gatsby-config.js</code>中，我们通过编写以下代码添加插件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d03e" class="mq lc iq mh b gy mr ms l mt mu">/**<br/> * Configure your Gatsby site with this file.<br/> *<br/> * See: https://www.gatsbyjs.com/docs/gatsby-config/<br/> */</span><span id="36b0" class="mq lc iq mh b gy mv ms l mt mu">module.exports = {<br/>  /* Your site config here */<br/>  plugins: [<br/>    require.resolve(`../my-plugin`),<br/>  ],<br/>}</span></pre><h1 id="d33a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">主题</h1><p id="edf0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">盖茨比让我们用主题来抽象盖茨比配置。</p><p id="bab5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们运行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ab5e" class="mq lc iq mh b gy mr ms l mt mu">npm install gatsby-theme-blog</span></pre><p id="6ea6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe me mf mg mh b">gatsby-theme-blog</code>安装到我们的项目文件夹中。</p><p id="2b26" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了添加主题，我们添加:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="abcc" class="mq lc iq mh b gy mr ms l mt mu">module.exports = {<br/>  plugins: [<br/>    {<br/>      resolve: `gatsby-theme-blog`,<br/>      options: {<br/>        /*<br/>        - basePath defaults to `/`<br/>        */<br/>        basePath: `/blog`,<br/>      },<br/>    },<br/>  ],<br/>}</span></pre><p id="a8fa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">成<code class="fe me mf mg mh b">gatsby-config.js</code>。</p><p id="64ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以通过运行以下命令来创建一个具有给定主题的新项目:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8be4" class="mq lc iq mh b gy mr ms l mt mu">gatsby new {your-project-name} https://github.com/gatsbyjs/gatsby-starter-blog-theme</span></pre><p id="5e93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用<code class="fe me mf mg mh b">gatsby-starter-blog-theme</code>创造我们的盖茨比项目。</p><h1 id="b998" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数据来源</h1><p id="677a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将自己的数据源添加到Gatsby项目中。</p><p id="1bcd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><p id="721b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">gatsby-node.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="edb9" class="mq lc iq mh b gy mr ms l mt mu">exports.sourceNodes = ({ actions, createNodeId, createContentDigest }) =&gt; {<br/>  const people = [<br/>    { name: "james", age: 20 },<br/>    { name: "mary", age: 23 },<br/>  ]<br/>  people.forEach(({ name, age }) =&gt; {<br/>    const node = {<br/>      name,<br/>      age,<br/>      id: createNodeId(`person-${name}`),<br/>      internal: {<br/>        type: "person",<br/>        contentDigest: createContentDigest({ name, age }),<br/>      },<br/>    }<br/>    actions.createNode(node)<br/>  })<br/>}</span></pre><p id="5b1f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">people</code>数组条目作为数据源，以便它们可以在GraphQL API中被查询。</p><p id="3971" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">actions.createNode</code>方法让我们创建可以查询的数据。</p><p id="37dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">createNodeId</code>创建条目的ID。</p><p id="a947" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">createContentDigest</code>从字符串或对象创建稳定的内容摘要。</p><p id="67c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们转到<a class="ae kc" href="http://localhost:8000/__graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:8000/_ _ graph QL</a>时，我们可以进行以下查询:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8d89" class="mq lc iq mh b gy mr ms l mt mu">query MyQuery {<br/>  allPerson {<br/>    nodes {<br/>      id<br/>      name<br/>      age<br/>    }<br/>  }<br/>}</span></pre><p id="f242" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来获取数据。</p><p id="b4ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们应该得到这样的结果:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6b43" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "data": {<br/>    "allPerson": {<br/>      "nodes": [<br/>        {<br/>          "id": "48340d0f-e756-5cc7-abb2-c6d83821835e",<br/>          "name": "james",<br/>          "age": 20<br/>        },<br/>        {<br/>          "id": "d2eaea74-1415-52b0-b732-2ac106ec6f55",<br/>          "name": "mary",<br/>          "age": 23<br/>        }<br/>      ]<br/>    }<br/>  },<br/>  "extensions": {}<br/>}</span></pre><p id="b47a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为响应返回。</p><h1 id="72e1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="023b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用SASS或SCSS，并在我们的Gatsby项目中添加插件、主题和数据源。</p><p id="d7d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
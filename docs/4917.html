<html>
<head>
<title>Level 3: Practical RxJS Guide to Learn RxJS for Life!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">第三关:实用RxJS指南终身学习RxJS！</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/practical-rxjs-guide-to-learn-rxjs-for-life-88f2ee508d5c?source=collection_archive---------6-----------------------#2021-10-04">https://javascript.plainenglish.io/practical-rxjs-guide-to-learn-rxjs-for-life-88f2ee508d5c?source=collection_archive---------6-----------------------#2021-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8737" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第3级:深入理解RxJS模式(高级)</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d944f3f55482ac97fcab1ed759a1b32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1x2fHJDjWPRXPGN-gW3kFQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">By FAM (All rights reserved)</figcaption></figure><p id="930e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">嗨，欢迎。如果你已经到了RxJS难题的第三部分，这意味着你是一个真正的开发人员，在编码之前渴望知识和对事物的深刻理解，并且是一个坚持不懈的人。尊重！</p><p id="94cf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如RxJS系列的第2部分所讨论的。本文将涵盖RxJS的更多高级功能。这需要你目前为止在0级、1级和2级中收集的知识。所以，如果你还没有获得这些知识，我不建议你从这篇文章开始，除非你知道你在做什么。</p><p id="f207" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">好了，回到我们的RxJS之旅，下面是这篇文章将要谈论的内容:</p><ul class=""><li id="e04c" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">组播观察值&amp;主题</strong></li><li id="4fce" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">冷</strong> ⛄ <strong class="kx ir">对热</strong>🔥<strong class="kx ir">可观测量</strong></li><li id="235d" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">组播运营商</strong></li></ul><p id="a57b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">你的思想准备好了吗？如果是，让我们回到RxJS盒子里面！</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="6cee" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated"><strong class="ak"> 1。多播观察值&amp;主题</strong></h1><p id="b54d" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">到目前为止，我们了解到可观测性本质上是单播的。你可能注意到了，这和这个标题是矛盾的，不是吗？</p><p id="aa80" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">不，不，这不是错误。您可以将单播可观察对象转换为多播可观察对象。但是，在此之前，我们需要先了解一下<code class="fe nj nk nl nm b">Subject</code>，你听说过这个词吗？</p><p id="d45a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">以下是主题的特征:</p><ul class=""><li id="4a12" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">只不过是一个可观察的(耳语:这个家伙也有一个subscribe()方法)</li><li id="d624" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">也是一个观察者(WTF，是的，你可以这么说…我也是这么说的，但总有一个原因让我们以后会知道)</li><li id="1e31" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">可以产生和接受价值，因为他同时是一个可观察的人和观察者。</li><li id="cffb" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">他可以有一个观察者的列表(不像可观察的物体)</li><li id="e2df" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">他有一种状态(就像React应用程序一样)。他可以维护已经订阅他的观察者的列表。</li><li id="fffa" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">可以同时将价值推送给多个观察者(与可观察不同，一次只能推送给一个观察者。如果另一个观察者订阅了相同的可观察值，它将被第二次执行。还记得第1部分中演示超时的例子吗？)</li><li id="aecd" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">因此，他是一个多播(不像可观察的)</li></ul><p id="663a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们跳到这些家伙(观察者、可观察对象和主体)的大图</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d70afe6a8b6c948912a711bceaae71d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*V7IhF2V5wlKPSPSGXO-8HA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">By FAM (All rights reserved)</figcaption></figure><p id="6e97" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您在主题中看到的，我们刚刚将可观察的单播性质转换为多播(数据由两个观察者同时接收，一次执行)。</p><p id="8632" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用一些代码立即行动:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="1461" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated"><strong class="ak"> 2。寒冷的</strong> ⛄ <strong class="ak">对炎热的</strong>🔥<strong class="ak">可观测量</strong></h1><p id="225c" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">先从冷的说起(他已经冷了，可怜的家伙！开玩笑:p)。以下是感冒可观察到的特征:</p><ul class=""><li id="8b76" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">价值(数据)产生于可观察的内部。数据是<strong class="kx ir"> <em class="np">声明的</em> </strong>，<strong class="kx ir"> <em class="np">创建的，</em> </strong>和<strong class="kx ir"> <em class="np">产生的</em> </strong>在定义可观察的代码里面。</li><li id="fc5c" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">每次执行一个观察器(每次调用<code class="fe nj nk nl nm b">subscribe()</code>时，一个新的数据生产者在该观察器内创建)。</li><li id="a7ce" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">Unicat(每次执行一个观察者)，冷可观察值推送到一个<strong class="kx ir"> <em class="np">单个</em> </strong>观察者。</li><li id="8adc" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">一个例子是RxJS APIs，比如在可观察对象内部产生整数的<code class="fe nj nk nl nm b">interval()</code>。另一个例子<code class="fe nj nk nl nm b">ajax()</code> API，数据来自ajax调用。因此，数据是在可观测的内部产生的。那些可观的(interval和ajax)冷！</li></ul><p id="eb2c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，让我们看看什么定义了热可观测性(完全相反):</p><ul class=""><li id="37c7" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">价值是在可观察之外产生的。它包装了存在于可观察之外的价值。因此，不管有没有观察者，它都能产生价值。</li><li id="e873" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">共享价值生产者，因为它在可观察的范围之外。</li><li id="bd6d" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">因此，多播允许在每次执行时有多个观察器同时接收产生的值)</li><li id="124b" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">一个例子是包装了<em class="np"> DOM事件</em>的可观察对象(这些事件(例如鼠标事件)一直在返回光标的位置(值、数据)，不管可观察对象是否需要它们)。事件存在于可观测之外，因此可以被同时共享和多播给许多观察者。这同样适用于<em class="np">网络插座</em>。</li></ul><p id="1a6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，您可能想知道…如果您需要从一个冷可观察对象(例如ajax数据)多播值，该怎么办？</p><blockquote class="nq nr ns"><p id="8345" class="kv kw np kx b ky kz jr la lb lc ju ld nt lf lg lh nu lj lk ll nv ln lo lp lq ij bi translated">需要魔法的地方。它具有将冷单播可观察转变为多播热可观察所需的所有特性。</p></blockquote><p id="da69" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个将冷可观测值转换为热可观测值的示例:</p><ul class=""><li id="ed3f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">冷观察病例:</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="7bdb" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">通过将主体置于中间，将冷的可观察物转换为热的可观察物(参见，如在视觉示例中所解释的)</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="b1a1" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">视觉上会发生什么？</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6d48660ce21d5a9a5d5db3fd7a38e132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*pJr86xjv0nCNCxd0mtcXTA.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">By FAM (All rights reserved)</figcaption></figure><p id="bdb4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如你所看到的，将冷的可观测数据转换成热的是相当容易的。但是，仍然有一些代码要做。令人欣慰的是，RxJS的理念是防止您做重复的事情，只关注功能和逻辑，为我们提供可以为我们完成工作的操作员！是不是很牛逼？</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="91f3" class="mm mn iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated"><strong class="ak"> 3。多播运营商</strong></h1><p id="768e" class="pw-post-body-paragraph kv kw iq kx b ky ne jr la lb nf ju ld le ng lg lh li nh lk ll lm ni lo lp lq ij bi translated">多播运营商是你的神奇工具，可以将任何冷的可观察对象变成热的多播可观察对象。它为您管理我们在示例中看到的所有细节(在可观察对象和观察者之间添加主题……)。</p><h2 id="4e64" class="nw mn iq bd mo nx ny dn ms nz oa dp mw le ob oc my li od oe na lm of og nc oh bi translated">常见多播运营商的示例:</h2><ul class=""><li id="0b3b" class="lr ls iq kx b ky ne lb nf le oi li oj lm ok lq lw lx ly lz bi translated"><a class="ae ol" href="https://rxjs.dev/api/operators/connect" rel="noopener ugc nofollow" target="_blank"> connect() </a>(取代将在v8中删除的<a class="ae ol" href="https://rxjs.dev/api/operators/multicast" rel="noopener ugc nofollow" target="_blank"> multicast() </a>运算符)</li></ul><p id="d383" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要使用<code class="fe nj nk nl nm b">connect</code>，您需要提供一个<code class="fe nj nk nl nm b">selector</code>函数，该函数将为您提供一个尚未连接的多播观察。当你订阅了<code class="fe nj nk nl nm b">connect</code>的结果后，就会调用<code class="fe nj nk nl nm b">selector</code>函数。在<code class="fe nj nk nl nm b">selector</code>函数返回后，它返回的可观测值将被订阅。那么多播将被连接到源。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="3f1f" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ol" href="https://rxjs.dev/api/operators/refCount" rel="noopener ugc nofollow" target="_blank"> refCount() </a>(在最新RxJS版本中替换为<strong class="kx ir"> <em class="np"> share </em> </strong>)</li></ul><p id="a296" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当您有不止一个观察者订阅它时，这个将自动触发源可观察对象的执行。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="5467" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ol" href="https://rxjs.dev/api/operators/publish" rel="noopener ugc nofollow" target="_blank">发布()</a></li></ul><p id="c9e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就像<code class="fe nj nk nl nm b">multicast</code>，它实际上是一个包装器，不需要传递主题作为输入。它会在屏幕后面自动创建它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><ul class=""><li id="5c17" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><a class="ae ol" href="https://rxjs.dev/api/operators/share" rel="noopener ugc nofollow" target="_blank"> share() </a></li></ul><p id="f294" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">像<code class="fe nj nk nl nm b">refCount()</code>一样，当观察者的数量&gt;为0时，它自动执行可观察。当订阅的观察者计数下降到0时，它也从源可观察对象中取消订阅。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nn no l"/></div></figure><p id="78c7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这些是一些常见的多播操作符，列表很长，你可以依靠<a class="ae ol" href="https://rxjs.dev/" rel="noopener ugc nofollow" target="_blank"> RxJS </a>文档来查看其他现有的API。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="d357" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这篇文章太长了，无法继续介绍RxJS的下一个高级元素:</p><ul class=""><li id="b72c" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated"><strong class="kx ir">可观察的执行</strong></li><li id="61b3" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated"><strong class="kx ir">控制和调度可观测量的执行</strong></li><li id="7acb" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">测试可观察性和订阅(单元测试，构建单元测试…等等)。)</li></ul><p id="e2af" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是不用担心！会在下一集播出😉</p><blockquote class="om"><p id="7626" class="on oo iq bd op oq or os ot ou ov lq dk translated">每当有新的热门文章发布时，第一个得到通知！</p></blockquote><p id="cd41" class="pw-post-body-paragraph kv kw iq kx b ky ow jr la lb ox ju ld le oy lg lh li oz lk ll lm pa lo lp lq ij bi translated">如果你有兴趣成为付费会员，你可以使用我的推荐链接。下次见</p><div class="pb pc gp gr pd pe"><a href="https://famzil.medium.com/subscribe" rel="noopener follow" target="_blank"><div class="pf ab fo"><div class="pg ab ph cl cj pi"><h2 class="bd ir gy z fp pj fr fs pk fu fw ip bi translated">让我们在生活中接触并一起行动吧！</h2><div class="pl l"><h3 class="bd b gy z fp pj fr fs pk fu fw dk translated">让我们在生活中接触并一起行动吧！通过注册，您将创建一个中型帐户，如果您还没有…</h3></div><div class="pm l"><p class="bd b dl z fp pj fr fs pk fu fw dk translated">famzil.medium.com</p></div></div><div class="pn l"><div class="po l pp pq pr pn ps kp pe"/></div></div></a></div></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="d263" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">亲爱的读者，感谢你在我生命中的存在。</p><p id="1872" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">让我们在</strong> <a class="ae ol" href="https://medium.com/@famzil/" rel="noopener"> <strong class="kx ir">上取得联系</strong></a><strong class="kx ir"/><a class="ae ol" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir">Linkedin</strong></a><strong class="kx ir"/><a class="ae ol" href="https://www.facebook.com/The-Front-End-World" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir">脸书</strong></a><strong class="kx ir"/><a class="ae ol" href="https://www.instagram.com/the_frontend_world/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir">insta gram</strong></a><strong class="kx ir"/><a class="ae ol" href="https://www.youtube.com/channel/UCaxr-f9r6P1u7Y7SKFHi12g" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir">Youtube</strong></a><strong class="kx ir">或</strong> <a class="ae ol" href="https://twitter.com/FatimaAMZIL9" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"/></a></p><p id="d0a8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">参见我的关于网络要素和一般文化的电子书。</p><p id="c306" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="np">更多内容请看</em><a class="ae ol" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="np">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>React With A Little Help From My Node Package Friends</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从我的节点包朋友那里得到一点帮助</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-with-a-little-help-from-my-node-package-friends-bdf8a57a6e7a?source=collection_archive---------15-----------------------#2021-10-22">https://javascript.plainenglish.io/react-with-a-little-help-from-my-node-package-friends-bdf8a57a6e7a?source=collection_archive---------15-----------------------#2021-10-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1f957b913dc72642ba6800fb751f45f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x8k2kFjYd7-lpgAz"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@pinjasaur?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Paul Esch-Laurent</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e6d2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在使用React制作一个琐事应用程序时，我使用了几个不同的包，我想在这里谈谈为什么我认为它们是有用的。</p><p id="766a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我继续学习编码的旅程中，我喜欢写下我的学习经历，因为它帮助我反思我所做的事情，并希望包含一些对其他人有用的信息。说完了，让我们开始吧！</p><p id="f5a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我发现了一个很好的资源，可以通过<a class="ae jz" href="https://opentdb.com/" rel="noopener ugc nofollow" target="_blank"> Open Trivia Database </a>收集琐事问题。该数据库免费使用，允许用户提交问题的开放贡献，并有许多类别和困难可供选择。它对我的总体需求非常有用，但也有一个问题。因为问题是由许多用户创建的，所以它们的格式不尽相同。一些问题的文本在问题正文及其答案文本中使用了HTML实体。例如，像这样的问题:</p><p id="35c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">“谁在《比尔·泰德的精彩冒险》中扮演两个有名无实的角色？”</em></p><p id="a431" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">显示为:</p><p id="a8ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">T9【x22】；谁扮演&amp;中的两个挂名角色？账单&amp;# x26；泰德&amp;# x27；■精彩冒险&amp;# x27；？&amp; #x22:</em></p><p id="c68c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将这些数据保存到我自己的后台数据库中，以创建定制游戏，所以我的分析欲希望一切都是一致的。如果我还决定以后操纵任何数据，如果一切都是一致的，那么编写方法会容易得多。为此，Mathias Bynens提供了一个名为<a class="ae jz" href="https://github.com/mathiasbynens/he" rel="noopener ugc nofollow" target="_blank"> he </a>的包，它是一个用JavaScript编写的HTML编码器/解码器。现在，让我们从上面的例子琐事问题，解码它:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="31a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，所有传入的数据都被快速轻松地格式化了。这个包也将使用HTML实体对字符串进行编码，但是我只使用了decode函数。</p><p id="f5c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">从那里开始，我创建的琐事游戏是一个使用React的单页应用程序(SPA ),它在顶部有一个导航栏，用户可以在菜单之间单击以创建新游戏，查看他们的统计页面，或玩游戏。导航栏将始终存在，但其他组件(称为NewGame、Game和Stats，以供将来参考)不会堆叠在彼此之上，而是会在页面上相互替换。我决定采用的方法是使用<a class="ae jz" href="https://reactrouter.com/web/guides/quick-start" rel="noopener ugc nofollow" target="_blank"> React路由器</a>。这样，我可以使用<code class="fe lf lg lh li b">&lt;Redirect /&gt;</code>组件来更改页面上显示的组件，同时也给我的应用程序提供了在更改当前呈现在页面上的组件时动态更新URL的功能。</p><p id="2c83" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用“react-router-dom”附带的组件设置了导航栏:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="cca5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用方便的<code class="fe lf lg lh li b">&lt;NavLink /&gt;</code>组件，创建一个样式化的链接，默认情况下，多个链接并排呈现。<code class="fe lf lg lh li b">activeStyle</code>道具允许外观改变来指示它当前被选中的时间。相当整洁！现在有了一个指向特定URL的链接当然很好，但是如果没有一个组件来呈现这个特定的URL，这是没有用的。这就是<code class="fe lf lg lh li b">&lt;Route /&gt;</code>组件的用武之地。</p><p id="4a04" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">导航栏下有三个路线组件。第一个有一条<code class="fe lf lg lh li b">“/game/new”</code>的路径。当当前URL匹配该路径时，<code class="fe lf lg lh li b">&lt;NewGame /&gt;</code>组件将呈现在导航栏下面。注意<code class="fe lf lg lh li b">exact path</code>标志。说明这一点意味着组件只有在URL完全匹配时才会被呈现。澄清一下，没有声明一个<code class="fe lf lg lh li b">exact path</code>匹配的路径的任何部分仍然会呈现那个组件。如果URL是<code class="fe lf lg lh li b">“/game/new”</code>，那么路径为<code class="fe lf lg lh li b">“/game”</code>的<code class="fe lf lg lh li b">&lt;Game /&gt;</code>组件仍然会呈现。根据应用程序的不同，在某些情况下可能需要这种行为，但是在我的例子中，我希望在导航栏下一次只显示一个组件。</p><p id="be76" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">React路由器是一个非常有用的包。实际上非常有用，其中还有一个组件值得一提。上面提到的<code class="fe lf lg lh li b">&lt;Game /&gt;</code>组件应该只在它先从用户那里收集了一些信息之后才呈现。因为直接链接到<code class="fe lf lg lh li b">“/game”</code> URL不是一个好主意，重定向到它是一个好办法。反应路由器再次救援！<code class="fe lf lg lh li b">&lt;Redirect /&gt;</code>组件可以处理这个问题，但是需要一点额外的工作。一旦在组件的<code class="fe lf lg lh li b">render()</code>方法中被读取，它将导航到新的位置并呈现与该URL相关联的组件。</p><p id="a71d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面的<code class="fe lf lg lh li b">&lt;NewGame /&gt;</code>组件展示了这是如何付诸实践的:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="40a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终目标是在<code class="fe lf lg lh li b">User.js</code>中只呈现导航条下面的<code class="fe lf lg lh li b">&lt;Game /&gt;</code>组件，并附带用户输入的数据。游戏不应该在没有启动所需数据的情况下渲染，因为<code class="fe lf lg lh li b">&lt;Redirect /&gt;</code>一渲染就激活，它必须只在满足特定条件时才渲染。在这种情况下，一旦提交了表单，就会触发<code class="fe lf lg lh li b">handleOnSubmit()</code>事件处理程序，并添加带有<code class="fe lf lg lh li b">&lt;Game/&gt;</code>URL值的“redirect”键。<code class="fe lf lg lh li b">redirect()</code>函数从<code class="fe lf lg lh li b">this.state.redirect</code>返回带有目标路径的<code class="fe lf lg lh li b">&lt;Redirect /&gt;</code>。<code class="fe lf lg lh li b">&lt;Redirect/&gt;</code>中的状态对象<code class="fe lf lg lh li b">{ gameData: this.state }</code>允许将props传递给重定向到的组件，在本例中是<code class="fe lf lg lh li b">&lt;Game/&gt;</code>。这可以通过<code class="fe lf lg lh li b">this.props.location.state</code>从该组件中访问。</p><p id="bf8d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将所有这些联系在一起的是三元运算符:</p><p id="6ada" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe lf lg lh li b">this.state.redirect ? this.redirect() : null</code></p><p id="fc0d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当<code class="fe lf lg lh li b">handleOnSubmit()</code>触发时，它在状态中设置新的“重定向”键，状态被更新，组件重新呈现，由于三元运算符的条件现在为真，它将调用返回<code class="fe lf lg lh li b">&lt;Redirect/&gt;</code>组件的<code class="fe lf lg lh li b">redirect()</code>函数。这将改变网址为<code class="fe lf lg lh li b">"/game"</code>和渲染<code class="fe lf lg lh li b">&lt;Game/&gt;</code>。因为这条路线是用<code class="fe lf lg lh li b">exact path</code>声明的，所以它将取代导航栏下面的<code class="fe lf lg lh li b">&lt;NewGame/&gt;</code>组件。</p><p id="341b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用React Router内置的三个组件，我能够相对容易地改变路线并实现SPA的良好流程。通过确保我所有的数据都是统一格式的，这个包允许我防止以后出现意外的问题。这就是用JavaScript开发应用程序的美妙之处。有无数的代码库，如果它节省了一些时间和大量的麻烦，那么为什么不通过一些朋友的帮助呢？</p><p id="fc60" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
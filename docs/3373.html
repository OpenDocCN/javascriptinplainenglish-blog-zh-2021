<html>
<head>
<title>Secure Web Applications Using Sub Resource Integrity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用子资源完整性保护Web应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/secure-web-applications-using-sub-resource-integrity-2fb4b214036b?source=collection_archive---------23-----------------------#2021-07-08">https://javascript.plainenglish.io/secure-web-applications-using-sub-resource-integrity-2fb4b214036b?source=collection_archive---------23-----------------------#2021-07-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c52c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用子资源完整性保护web应用程序指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e995829df89e663e74bd7cfaf84c99c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_YJnhURdqDP63xbICkuCiw.jpeg"/></div></div></figure><p id="d50f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">子资源完整性(SRI)是一种安全特性，可用于验证浏览器获取的资源是否被操纵。</p><p id="fd06" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是你为什么需要它呢？还记得你一直在代码中随意放置的脚本标签吗？如果有人访问了托管它的CDN/第三方服务器并修改了所提供的JavaScript，会怎么样？这将是一个严重的安全漏洞，会引发很多问题。</p><p id="f4a2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">子资源完整性允许提供文件的散列，当浏览器获取文件时，该散列必须匹配。</p><h1 id="2e3d" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">如何使用子资源完整性</h1><p id="5f0d" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">如前所述，需要在脚本标签中添加一个散列。然后，浏览器会比较下载的脚本文件是否具有相同的哈希。</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="e83a" class="mm ll in mi b gy mn mo l mp mq">&lt;script src="https://example.com/example-framework.js" integrity="sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wC" crossorigin="anonymous"&gt;&lt;/script&gt;</span></pre><p id="f958" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">Integrity是一种base64编码的加密哈希，可以生成(下面将详细介绍)。知道需要在供应商服务器上启用跨源也很重要。</p><p id="a864" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果脚本或样式表与关联的完整性值不匹配，浏览器将不会执行文件/呈现样式表。浏览器会抛出网络错误。</p><p id="97df" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这避免了篡改文件和中间人攻击。但是开发人员有责任确保该文件没有其他漏洞。</p><h1 id="7115" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">生成SRI</h1><p id="6a8c" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">使用OpenSSL可以生成子资源完整性。文件的内容需要作为输入传递给OpenSSL命令，并且需要使用sha384创建一个摘要。然后，需要将摘要传递给另一个OpenSSL命令，对其进行base64编码。要在一个命令中完成:</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="5355" class="mm ll in mi b gy mn mo l mp mq">cat example-framework.js | openssl dgst -sha384 -binary | openssl base64 -A</span></pre><p id="bf06" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">或者也有<a class="ae mr" href="https://www.srihash.org/" rel="noopener ugc nofollow" target="_blank">在线工具</a>可以做到这一点。</p><h1 id="0b4d" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">SRI和Webpack</h1><p id="2f3e" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">和所有的Webpack一样，有一个插件可以自动生成子资源完整性标签。因为我们避免在使用Webpack时手动添加标签，所以这个插件在处理散列生成过程时变得很有用。</p><p id="39a8" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">安装插件:</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="bcc8" class="mm ll in mi b gy mn mo l mp mq">npm install webpack-subresource-integrity — save-dev<br/>or<br/>yarn add --dev webpack-subresource-integrity</span></pre><p id="8726" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在webpack.config.js文件中，添加:</p><pre class="kd ke kf kg gt mh mi mj mk aw ml bi"><span id="d06f" class="mm ll in mi b gy mn mo l mp mq">import SRIPlugin from 'webpack-subresource-integrity';<br/>const compiler = webpack({<br/>  output: { <br/>    crossOriginLoading: 'anonymous'<br/>  },<br/>  plugins: [<br/>    new SRIPlugin({<br/>      hashFuncNames: ['sha256', 'sha384'],<br/>      enabled: process.env.NODE_ENV === 'production',<br/>    }),<br/>  ],<br/>});</span></pre><h1 id="40d3" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">浏览器支持</h1><p id="69db" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">所有主流浏览器(不，IE不在那个列表中)都支持SRI。但它不会破坏IE，因此它是避免安全风险的必备工具。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ms"><img src="../Images/ec369c44afcac9f93cbf8499a0fb1c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WxAbsGWNbyQsoUE5.png"/></div></div></figure><p id="c3f3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是你需要知道的关于子资源完整性和如何使用它的全部内容！</p></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="6b22" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="na">原载于2021年7月8日</em><a class="ae mr" href="https://www.wisdomgeek.com/development/web-development/using-sub-resource-integrity-to-secure-web-applications/" rel="noopener ugc nofollow" target="_blank"><em class="na">【https://www.wisdomgeek.com】</em></a><em class="na">。</em></p><p id="32a0" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="na">更多内容看</em> <a class="ae mr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="na">说白了. io </em> </a> <em class="na">。报名参加我们的</em> <a class="ae mr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="na">免费每周简讯</em> </a> <em class="na">。在我们的</em> <a class="ae mr" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="na">社区</em> </a> <em class="na">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
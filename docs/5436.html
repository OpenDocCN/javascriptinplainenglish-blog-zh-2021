<html>
<head>
<title>Create WhatsApp clone with Next.js Part 8 Display Chats</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Next.js创建WhatsApp克隆第8部分显示聊天</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-whatsapp-clone-with-next-js-part-8-display-chats-63d714f07168?source=collection_archive---------26-----------------------#2021-11-09">https://javascript.plainenglish.io/create-whatsapp-clone-with-next-js-part-8-display-chats-63d714f07168?source=collection_archive---------26-----------------------#2021-11-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="cd64" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在这一部分，我们将在侧边栏添加聊天项目。</h2></div><figure class="kf kg kh ki gt kj"><div class="bz fp l di"><div class="kk kl l"/></div></figure><p id="8b54" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><a class="ae li" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww/join" rel="noopener ugc nofollow" target="_blank">源代码</a></p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/09904b82ef7f783a73fd7a92a80eece8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*zo8W8N3ZBm5vjUErNblrgQ.png"/></div></figure><p id="dce7" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">每个聊天项目都是一个组件。因此，我们转到components文件夹，创建一个文件“Chat.js”。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lm"><img src="../Images/37089afba40ffe91128eb3aa255ecfc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GliZDnH9J5iTcJe2H1C_Ew.jpeg"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Chat Component</figcaption></figure><p id="47cb" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">聊天项目包含<container>、<frdavatar>和<chatcontainer>。</chatcontainer></frdavatar></container></p><p id="264e" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">在这一部分，我们将显示时间，这需要<code class="fe lv lw lx ly b">moment</code>包的帮助。所以我们打字</p><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="5c65" class="md me iq ly b gy mf mg l mh mi">yarn add moment</span></pre><h2 id="1a8b" class="md me iq bd mj mk ml dn mm mn mo dp mp kv mq mr ms kz mt mu mv ld mw mx my mz bi translated">容器</h2><p id="18b2" class="pw-post-body-paragraph km kn iq ko b kp na jr kr ks nb ju ku kv nc kx ky kz nd lb lc ld ne lf lg lh ij bi translated">对于容器，我们将显示设置为flex，因此默认的方向是row。我们还将对齐项目设置为居中，因此所有项目都垂直居中对齐。</p><p id="4188" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">添加光标:指针和背景颜色为灰色的悬停效果。鼠标会变成一个手指，当鼠标经过它的时候颜色会变成浅灰色。</p><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="6c20" class="md me iq ly b gy mf mg l mh mi">const Container = styled.div`</span><span id="dccb" class="md me iq ly b gy nf mg l mh mi">display:flex;</span><span id="bf78" class="md me iq ly b gy nf mg l mh mi">align-items:center;</span><span id="fb13" class="md me iq ly b gy nf mg l mh mi">cursor:pointer;</span><span id="e5f9" class="md me iq ly b gy nf mg l mh mi">min-height:67px;</span><span id="33b1" class="md me iq ly b gy nf mg l mh mi">padding-left: 15px;</span><span id="39ae" class="md me iq ly b gy nf mg l mh mi">word-break:break-word;</span><span id="87e2" class="md me iq ly b gy nf mg l mh mi">:hover {</span><span id="a531" class="md me iq ly b gy nf mg l mh mi">background-color:#F5F5F5;</span><span id="3d8a" class="md me iq ly b gy nf mg l mh mi">}</span></pre><h2 id="986a" class="md me iq bd mj mk ml dn mm mn mo dp mp kv mq mr ms kz mt mu mv ld mw mx my mz bi translated">FrdAvatar</h2><p id="6524" class="pw-post-body-paragraph km kn iq ko b kp na jr kr ks nb ju ku kv nc kx ky kz nd lb lc ld ne lf lg lh ij bi translated">对于<frdavatar>，我们只是加了5px的边距，右边边距到15px。</frdavatar></p><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="4b4b" class="md me iq ly b gy mf mg l mh mi">const FrdAvatar = styled(Avatar)`</span><span id="5ef1" class="md me iq ly b gy nf mg l mh mi">margin:5px;</span><span id="3f3a" class="md me iq ly b gy nf mg l mh mi">margin-right:15px;</span><span id="0ea6" class="md me iq ly b gy nf mg l mh mi">`</span></pre><h2 id="4caa" class="md me iq bd mj mk ml dn mm mn mo dp mp kv mq mr ms kz mt mu mv ld mw mx my mz bi translated">聊天容器</h2><p id="69d3" class="pw-post-body-paragraph km kn iq ko b kp na jr kr ks nb ju ku kv nc kx ky kz nd lb lc ld ne lf lg lh ij bi translated">对于<chatcontainer>，我们将显示设置为网格。所以它创建了三列两行。我们将为不同的<div>设置名称。</div></chatcontainer></p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="gh gi lm"><img src="../Images/07bda1a080f5c63b391895d67591417a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CMkfXFFkEWUy9ZlQh8McRg.jpeg"/></div></div></figure><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="b8ff" class="md me iq ly b gy mf mg l mh mi">const ChatContainer = styled.div`</span><span id="c4ae" class="md me iq ly b gy nf mg l mh mi">display:grid;</span><span id="d6d6" class="md me iq ly b gy nf mg l mh mi">padding:10px;</span><span id="f5c9" class="md me iq ly b gy nf mg l mh mi">width:100%;</span><span id="4adb" class="md me iq ly b gy nf mg l mh mi">grid-template-columns: repeat(3,1fr);</span><span id="19f4" class="md me iq ly b gy nf mg l mh mi">border-bottom: 1px solid #ededed;</span><span id="1793" class="md me iq ly b gy nf mg l mh mi">gap:10px;</span><span id="2666" class="md me iq ly b gy nf mg l mh mi">grid-template-areas:</span><span id="9b7b" class="md me iq ly b gy nf mg l mh mi">"name name time"</span><span id="bdad" class="md me iq ly b gy nf mg l mh mi">"latest_message latest_message."</span><span id="a9cd" class="md me iq ly b gy nf mg l mh mi">;</span><span id="6504" class="md me iq ly b gy nf mg l mh mi">`</span><span id="282b" class="md me iq ly b gy nf mg l mh mi">import { Avatar } from '@mui/material';</span><span id="8394" class="md me iq ly b gy nf mg l mh mi">import styled from 'styled-components';</span><span id="6f54" class="md me iq ly b gy nf mg l mh mi">import moment from 'moment';</span><span id="1e2d" class="md me iq ly b gy nf mg l mh mi">const Chat = ({ photoURL, name, timestamp, latestMessage }) =&gt; {</span><span id="7243" class="md me iq ly b gy nf mg l mh mi">console.log('timestamp', timestamp)</span><span id="bd50" class="md me iq ly b gy nf mg l mh mi">return (</span><span id="84d4" class="md me iq ly b gy nf mg l mh mi">&lt;Container &gt;</span><span id="d7e8" class="md me iq ly b gy nf mg l mh mi">{photoURL ? &lt;FrdAvatar src={photoURL} /&gt; : &lt;FrdAvatar /&gt;}</span><span id="8946" class="md me iq ly b gy nf mg l mh mi">&lt;ChatContainer&gt;</span><span id="2a32" class="md me iq ly b gy nf mg l mh mi">&lt;div style={{ gridArea: 'name' }}&gt;{name}&lt;/div&gt;</span><span id="0486" class="md me iq ly b gy nf mg l mh mi">&lt;div style={{</span><span id="7b9f" class="md me iq ly b gy nf mg l mh mi">gridArea: 'latest_message'</span><span id="c574" class="md me iq ly b gy nf mg l mh mi">}}&gt;{latestMessage}&lt;/div&gt;</span><span id="0e0c" class="md me iq ly b gy nf mg l mh mi">&lt;div style={{ fontSize: '14px', gridArea: 'time', width: '100%' }}&gt;{moment(timestamp.seconds * 1000).format('LT')}&lt;/div&gt;</span><span id="c3f7" class="md me iq ly b gy nf mg l mh mi">&lt;/ChatContainer&gt;</span><span id="58f7" class="md me iq ly b gy nf mg l mh mi">&lt;/Container &gt;</span><span id="208c" class="md me iq ly b gy nf mg l mh mi">)</span><span id="d5ce" class="md me iq ly b gy nf mg l mh mi">}</span><span id="8e3c" class="md me iq ly b gy nf mg l mh mi">export default Chat</span></pre><p id="baa2" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们将为三个<div>设置不同的gridArea名称、latest_message和时间</div></p><p id="2055" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">通过使用网格模板区域，设置名称占用第一行的2个分数，时间占用第一行的1个分数。</p><p id="2396" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">最新的消息将占据第二行的整行。</p><p id="ef2e" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">我们传递photoURL、名称、latest_message和时间戳作为道具。</p><p id="bfcb" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">为了显示时间，我们称之为时刻(timestamp.seconds * 1000)。格式(' LT ')</p><h2 id="032a" class="md me iq bd mj mk ml dn mm mn mo dp mp kv mq mr ms kz mt mu mv ld mw mx my mz bi translated">循环浏览聊天记录</h2><p id="2d82" class="pw-post-body-paragraph km kn iq ko b kp na jr kr ks nb ju ku kv nc kx ky kz nd lb lc ld ne lf lg lh ij bi translated">转到SideBar.js，从chats.json导入聊天数据。</p><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="15cf" class="md me iq ly b gy mf mg l mh mi">import * as chats from '../data/chats.json';</span></pre><p id="9266" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">然后遍历聊天记录并呈现<chat>组件。</chat></p><pre class="kf kg kh ki gt lz ly ma mb aw mc bi"><span id="dd50" class="md me iq ly b gy mf mg l mh mi">{chats.map(chat=&gt;(</span><span id="d6a7" class="md me iq ly b gy nf mg l mh mi">&lt;Chat  photoURL={chat.photoURL}  name={chat.name} latestMessage={chat.latestMessage} timestamp={chat.timestamp}/&gt;</span><span id="7664" class="md me iq ly b gy nf mg l mh mi">))}</span></pre><p id="b08e" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated">您应该会在边栏上看到这个聊天项目。</p><figure class="kf kg kh ki gt kj gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/09904b82ef7f783a73fd7a92a80eece8.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*zo8W8N3ZBm5vjUErNblrgQ.png"/></div></figure><h2 id="a5cb" class="md me iq bd mj mk ml dn mm mn mo dp mp kv mq mr ms kz mt mu mv ld mw mx my mz bi translated">关注我们:<a class="ae li" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad课程</a>，<a class="ae li" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae li" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae li" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae li" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae li" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae li" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a></h2></div><div class="ab cl ng nh hu ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ij ik il im in"><p id="0c59" class="pw-post-body-paragraph km kn iq ko b kp kq jr kr ks kt ju ku kv kw kx ky kz la lb lc ld le lf lg lh ij bi translated"><em class="nn">更多内容请看</em><a class="ae li" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ko ir"><em class="nn">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
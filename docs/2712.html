<html>
<head>
<title>Maybe You Should Think Twice Before Installing That NPM Module?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">也许你在安装NPM模块之前应该三思？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/maybe-you-should-think-twice-before-installing-that-npm-module-275c31e105c5?source=collection_archive---------23-----------------------#2021-06-03">https://javascript.plainenglish.io/maybe-you-should-think-twice-before-installing-that-npm-module-275c31e105c5?source=collection_archive---------23-----------------------#2021-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="f188" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NPM库中的NPM模块提供了很多功能，但是应该谨慎使用。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/45c2756e2ecdf792f9eaaf599b80e260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwC7P6FPH02sUpo6nf0ixQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Image courtesy of Marcus Kauffman on Unsplash</figcaption></figure><p id="edda" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">原载于</em><a class="ae lc" href="https://fek.io/blog/maybe-you-should-think-twice-before-installing-that-npm-module/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://fek . io</em></a><em class="lb">。</em></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="b866" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">被称为“左垫启示”的事件已经过去五年多了。2016年3月，一名NPM用户从NPM库中删除了他们的模块“左补”，导致任何具有该依赖性的<a class="ae lc" href="https://nodejs.org" rel="noopener ugc nofollow" target="_blank"> Node.js </a>应用程序中断。</p><p id="25fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这为Node.js社区敲响了警钟，并在此事件后对<a class="ae lc" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>进行了一些更改，以防止这种情况再次发生。</p><h1 id="a980" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">到底发生了什么</h1><p id="14c6" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">一家名为<a class="ae lc" href="https://www.kik.com/" rel="noopener ugc nofollow" target="_blank"> Kik </a>的公司开发了一个messenger应用程序，它想和NPM的另一个用户<a class="ae lc" href="https://www.kodfabrik.com/" rel="noopener ugc nofollow" target="_blank">Azer kou Lu</a>使用同一个名为“Kik”的模块。他们给Koç ulu先生发了一封来自专利律师的电子邮件，要求他放弃名为“kik”的模块。科祖卢拒绝透露模块的名称。然后Kik带着商标申请去了NPM，让他们使用这个模块，他们最终照做了。</p><p id="351b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在失去模块名称后，Koç ulu先生决定取消出版他在NPM的所有250个其他模块。其中一个模块被用于数千个项目，包括<a class="ae lc" href="https://www.npmjs.com/package/@babel/runtime" rel="noopener ugc nofollow" target="_blank"> Babel.js </a>。当他取消出版“左垫”，它基本上打破了互联网。这是因为很多项目依赖于NPM，更不用说模块也有它们的依赖关系。你最终会得到这些巨大的依赖树结构，有时有10层之深。如果您想可视化这个，只需在您的模块目录中运行<code class="fe mi mj mk ml b">npm list</code>。</p><p id="032e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是由当时只有11行的模块造成的。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mm le l"/></div></figure><p id="b207" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">时任NPM首席技术官的劳里·沃斯采取了前所未有的举措，取消了一个模块的发布。作为一家公司，NPM还相当年轻，以前从未遇到过这种情况。他们对他们的系统进行了更改，以防止用户在模块存在依赖关系的情况下取消发布该模块，从而防止此类事件再次发生。</p><p id="b993" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一些真实事件的帖子；</p><div class="mn mo gp gr mp mq"><a href="https://medium.com/@mproberts/a-discussion-about-the-breaking-of-the-internet-3d4d2a83aa4d" rel="noopener follow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">关于互联网断裂的讨论</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">大家好，我是Kik的信使主管。我不希望这是我在媒体上的第一篇文章，但是开源…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">medium.com</p></div></div></div></a></div><div class="mn mo gp gr mp mq"><a href="https://kodfabrik.com/journal/i-ve-just-liberated-my-modules" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">我刚刚解放了我的模块——阿泽·科丘鲁的日记</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">几周前，一位专利律师给我发了一封电子邮件，要求我不要公开NPM的“kik”模块。我的回答是“不”,而且…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">kodfabrik.com</p></div></div></div></a></div><div class="mn mo gp gr mp mq"><a href="https://www.davidhaney.io/npm-left-pad-have-we-forgotten-how-to-program/" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">NPM和左垫:我们忘记了如何编程吗？</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">好了，开发者们，是时候进行一次严肃的谈话了。正如你可能已经意识到的，本周做出反应，巴别塔，和一个…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">www.davidhaney.io</p></div></div><div class="mz l"><div class="na l nb nc nd mz ne kv mq"/></div></div></a></div><div class="mn mo gp gr mp mq"><a href="https://blog.npmjs.org/post/141577284765/kik-left-pad-and-npm" rel="noopener  ugc nofollow" target="_blank"><div class="mr ab fo"><div class="ms ab mt cl cj mu"><h2 class="bd ir gy z fp mv fr fs mw fu fw ip bi translated">npm博客存档:kik，left-pad和npm</h2><div class="mx l"><h3 class="bd b gy z fp mv fr fs mw fu fw dk translated">本周早些时候，许多npm用户遭遇了中断，因为许多项目都直接或…</h3></div><div class="my l"><p class="bd b dl z fp mv fr fs mw fu fw dk translated">blog.npmjs.org</p></div></div><div class="mz l"><div class="nf l nb nc nd mz ne kv mq"/></div></div></a></div><h1 id="e466" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">反思NPM模块</h1><p id="7750" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">Node的一个优点也可能是一个弱点，即能够随心所欲地使用任何功能。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/a6e3ced3828e157c6d28495c0652ea95.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/0*piKYkY6ImcdQ5crl.jpg"/></div></figure><p id="abc8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在安装任何NPM模块之前，你应该先问问自己，我真的需要包括这个模块吗？一个很好的例子就是<a class="ae lc" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> moment.js </a>。Moment主要用于处理JavaScript中的日期对象。它还可以格式化日期和获取日期部分。</p><pre class="km kn ko kp gt nh ml ni nj aw nk bi"><span id="33cc" class="nl lg iq ml b gy nm nn l no np">const year = moment().format('YYYY');</span></pre><p id="1dba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您也可以通过在JavaScript中对date对象调用<code class="fe mi mj mk ml b">getYear()</code>函数来完成同样的事情。</p><pre class="km kn ko kp gt nh ml ni nj aw nk bi"><span id="3671" class="nl lg iq ml b gy nm nn l no np">const year = new Date().getYear();</span></pre><h1 id="c8a1" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">本地回购</h1><p id="ba73" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">许多较大的组织现在预先批准哪些NPM模块可以用于一个项目。有些使用本地回购协议，这样他们的开发人员只能在他们的应用程序中使用预先批准的模块。</p><p id="5ad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NPM也提供NPM的本地版本，所以你可以为你的组织运行它。</p><h1 id="b840" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">德诺的方法</h1><p id="c2fd" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">如果你不熟悉<a class="ae lc" href="https://deno.land/" rel="noopener ugc nofollow" target="_blank"> Deno </a>，它是Node.js的发明者Ryan Dahl的替代JavaScript运行时，Ryan在创建Deno时做的事情之一就是重新思考他如何在Node中做某些事情。</p><p id="6c9b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Node.js没有标准库。当Ryan创建Deno时，他还确保它包含一个标准的模块库，您可以使用它而不必安装第三方模块。</p><p id="e883" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Deno还允许开发人员直接从源代码导入模块，因此不需要包管理器。你可以简单地在你的应用程序中使用<code class="fe mi mj mk ml b">import 'https://github.com/someuser/mymodule/main/src.js'</code>，Deno会在你的系统中缓存这个模块。</p><p id="002c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Deno还有一个依赖检查器，可以用来评估你的依赖。只需运行<code class="fe mi mj mk ml b">deno info</code>，Deno就会运行它的inspector。</p><h1 id="5e36" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">研究您的模块</h1><p id="b2c2" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">在你<code class="fe mi mj mk ml b">npm install</code>任何你以前没有用过的模块之前，看一下源代码。NPM上的大多数模块都是开源的，或者有许可证，你可以在那里查看源代码。<strong class="jp ir">看出处！</strong></p><p id="d6bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">另一件要看的事情是模块使用的依赖关系。您应该关注的一件事是这些依赖关系存在了多长时间，是否存在任何安全问题。NPM提供了一个安全审计，你可以在你的模块上执行。</p><p id="aceb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mi mj mk ml b">nome audit</code>将生成包含任何漏洞的报告。您还可以使用<code class="fe mi mj mk ml b">npm audit fix</code>来解决模块中的任何漏洞。</p><h1 id="077e" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="26b8" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">NPM可以为您的节点应用程序添加大量额外的功能，但是您应该只在需要尚未提供的特定功能时使用它。尽可能考虑编写自己的模块。</p><p id="e16b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">NPM上的大多数模块都是开源项目，大多数也在<a class="ae lc" href="https://github.com" rel="noopener ugc nofollow" target="_blank"> Github </a>上。如果你发现一个现有的模块有问题，考虑做一个pull请求来回馈这个了不起的社区。</p><p id="29e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">更多内容尽在</em><a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lb">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Clear the Canvas for Redrawing?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何清空画布进行重绘？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-clear-the-canvas-for-redrawing-a4eefcfabeab?source=collection_archive---------3-----------------------#2021-11-07">https://javascript.plainenglish.io/how-to-clear-the-canvas-for-redrawing-a4eefcfabeab?source=collection_archive---------3-----------------------#2021-11-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/0f3922a4b26ff4abb180aa0d40c9252d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Jy_Cvqz9VN1N6Nsu"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@miracleday?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Elena Mozhvilo</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="be82" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们有一个画布，我们可能要清除它，以便我们可以在上面画新的东西。</p><p id="2863" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何清除画布，以便我们可以再次在其上绘制。</p><h1 id="0e81" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">清除画布以便重新绘制</h1><p id="419c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">clearRect</code>方法轻松地清除画布，它是画布上下文对象的一部分。</p><p id="84d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有下面的HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="49ad" class="mq lc iq mh b gy mr ms l mt mu">&lt;canvas&gt;&lt;/canvas&gt;<br/>&lt;button&gt;<br/>  clear<br/>&lt;/button&gt;</span></pre><p id="0ce0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="7e41" class="mq lc iq mh b gy mr ms l mt mu">const canvas = document.querySelector("canvas");<br/>const button = document.querySelector("button");<br/>const ctx = canvas.getContext("2d");<br/>ctx.beginPath();<br/>ctx.lineWidth = "6";<br/>ctx.strokeStyle = "green";<br/>ctx.rect(5, 5, 290, 140);<br/>ctx.stroke();</span><span id="3665" class="mq lc iq mh b gy mv ms l mt mu">button.addEventListener('click', () =&gt; {<br/>  ctx.clearRect(0, 0, canvas.width, canvas.height);<br/>})</span></pre><p id="e372" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">绘制一些东西，并向按钮添加一个单击侦听器，以便在我们单击按钮时清除画布。</p><p id="750a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">getContext</code>来获取上下文对象。</p><p id="7ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们叫<code class="fe me mf mg mh b">beginPath</code>开始画画。</p><p id="df34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置<code class="fe me mf mg mh b">lineWidth</code>来设置线条的宽度。</p><p id="5977" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">strokeStyle</code>设置笔画样式。</p><p id="5088" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">rect</code>分别以左上角的x、y坐标和宽度、高度绘制矩形。</p><p id="92ed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">stroke</code>方法绘制矩形。</p><p id="d4ec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们用<code class="fe me mf mg mh b">'click'</code>调用<code class="fe me mf mg mh b">addEventListener</code>来为按钮添加一个点击监听器。</p><p id="4116" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们点击按钮时，回调就会运行。</p><p id="dfca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用与<code class="fe me mf mg mh b">rect</code>相同的参数调用带有画布上下文的<code class="fe me mf mg mh b">clearRect</code>。</p><p id="58ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它清除画布，而不是在画布上绘制。</p><h1 id="49be" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">转换坐标</h1><p id="7c47" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">如果我们在画布上添加了坐标转换，那么我们必须先添加更多的代码来保存转换矩阵。</p><p id="ea1a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以清空画布，然后恢复变换矩阵。</p><p id="1822" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b5b0" class="mq lc iq mh b gy mr ms l mt mu">const canvas = document.querySelector("canvas");<br/>const button = document.querySelector("button");<br/>const ctx = canvas.getContext("2d");<br/>ctx.beginPath();<br/>ctx.lineWidth = "6";<br/>ctx.strokeStyle = "green";<br/>ctx.rect(5, 5, 290, 140);<br/>ctx.stroke();</span><span id="5a85" class="mq lc iq mh b gy mv ms l mt mu">button.addEventListener('click', () =&gt; {<br/>  ctx.save();<br/>  ctx.setTransform(1, 0, 0, 1, 0, 0);<br/>  ctx.clearRect(0, 0, canvas.width, canvas.height);<br/>  ctx.restore();<br/>})</span></pre><p id="aaab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在回调中，我们调用<code class="fe me mf mg mh b">save</code>来保存转换矩阵。</p><p id="9740" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">setTransform</code>将变换设置为单位矩阵，以移除变换。</p><p id="fc73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">clearRect</code>来清除画布。</p><p id="2cd9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">restore</code>来恢复转换。</p><h1 id="cec1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cd49" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过调用<code class="fe me mf mg mh b">clearRect</code>方法来清除画布。</p><p id="1d3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们已经转换了坐标，那么我们可以保存转换矩阵，清除画布，然后恢复转换矩阵。</p><p id="c552" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
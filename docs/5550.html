<html>
<head>
<title>Create Fast Vanilla JavaScript Plugins With This Easy Template System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用这个简单的模板系统创建快速的普通JavaScript插件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-fast-vanilla-javascript-plugins-with-this-easy-template-system-bc30b5a0b095?source=collection_archive---------1-----------------------#2021-11-18">https://javascript.plainenglish.io/create-fast-vanilla-javascript-plugins-with-this-easy-template-system-bc30b5a0b095?source=collection_archive---------1-----------------------#2021-11-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="7efb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在本文中，我将向您展示如何使用我的样板文件用普通JavaScript开发插件和组件。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e94ab197ffb8396a700c81a8b1d07081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUGcwk4B_5T0-2zIkw0IFA.jpeg"/></div></div></figure><p id="c1ab" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在我20年的开发经验中，我从来不喜欢使用非自己编写的JavaScript插件和组件。于是在2015年，我开始编写自己的插件库。从那时起，我对我的插件使用相同的样板概念。</p><h2 id="f181" class="lk ll in bd lm ln lo dn lp lq lr dp ls kx lt lu lv lb lw lx ly lf lz ma mb mc bi translated">自写插件的优势显而易见</h2><ul class=""><li id="adf7" class="md me in kq b kr mf ku mg kx mh lb mi lf mj lj mk ml mm mn bi translated">我知道密码</li><li id="a2ed" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">我控制发生了什么</li><li id="c03e" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">插件/组件做了它应该做的事情</li><li id="bd92" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">我不使用由于浏览器更新而在某个时间点不再有效的黑客</li></ul><h1 id="ee1d" class="mt ll in bd lm mu mv mw lp mx my mz ls jt na ju lv jw nb jx ly jz nc ka mb nd bi translated">需要的文件</h1><p id="c27c" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated">我的插件样板文件中有三个文件:</p><ul class=""><li id="5415" class="md me in kq b kr ks ku kv kx nh lb ni lf nj lj mk ml mm mn bi translated">index.html</li><li id="35fe" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">我的插件. js</li><li id="b409" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">project.js</li></ul><blockquote class="nk nl nm"><p id="fb00" class="ko kp nn kq b kr ks jo kt ku kv jr kw no ky kz la np lc ld le nq lg lh li lj ig bi translated">在本文的结尾，您会找到一个到Github的链接，在那里可以下载所有的项目文件。</p></blockquote><h1 id="126e" class="mt ll in bd lm mu mv mw lp mx my mz ls jt na ju lv jw nb jx ly jz nc ka mb nd bi translated">实际的插件(myPlugin.js)</h1><p id="d3f2" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated">代码清单显示了JavaScript插件的完整框架。在所有引用代码段中，插件都被称为<code class="fe nr ns nt nu b">myPlugin</code>。</p><p id="3638" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因为变量的作用域，我用<a class="ae nv" href="https://en.wikipedia.org/wiki/Immediately-invoked_function_expression" rel="noopener ugc nofollow" target="_blank"><strong class="kq io">life</strong></a>(立即调用的函数表达式)。<strong class="kq io"> </strong>创建后立即执行。</p><p id="ec44" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我的插件模板有三个部分:</p><ul class=""><li id="f526" class="md me in kq b kr ks ku kv kx nh lb ni lf nj lj mk ml mm mn bi translated">在<em class="nn">窗口中<code class="fe nr ns nt nu b">register myPlugin</code>对象并定义其核心变量</em></li><li id="595a" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated"><code class="fe nr ns nt nu b">public methods</code></li><li id="4c9d" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated"><code class="fe nr ns nt nu b">private methods</code></li></ul><p id="6404" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在接下来的步骤中，我将向您展示在这些部分中会发生什么。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="c06c" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">第1部分:在全局窗口中注册插件</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="92af" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在第一部分，我在窗口对象中注册了名为<code class="fe nr ns nt nu b">myPlugin</code>的插件。我还在<em class="nn">第5行</em>中将所有默认设置定义为一个对象。</p><p id="9b25" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe nr ns nt nu b">this.elements</code>是一个可选的容器，用于存储插件所应用的DOM元素。</p><p id="2efa" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe nr ns nt nu b">this.settings</code>存储插件设置，无论是<em class="nn">第5行</em>中设置的默认值，还是通过调用骨架列表中显示的<strong class="kq io">第40行的<em class="nn">私有方法【extendDefaults() </em> </strong>覆盖的默认值。</p><p id="e76b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><code class="fe nr ns nt nu b">this.init()</code>调用公共方法<strong class="kq io"> <em class="nn"> init() </em> </strong>来启动插件。</p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="c32a" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">第2节:定义公共方法</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="9c69" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">公共方法可以在插件外部调用。我通常用它们来更新插件的大小。下面是一个从外部调用插件方法的例子。</p><p id="59ac" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">因此，由于方法是公共的，它们必须被定义为<em class="nn">原型</em>。</p><pre class="kd ke kf kg gt ok nu ol om aw on bi"><span id="aafd" class="lk ll in nu b gy oo op l oq or">myPlugin.prototype.methodName = function() { ... }</span></pre><p id="a46c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">❕在<em class="nn">第七行</em>你看我怎么调用私有方法:</p><pre class="kd ke kf kg gt ok nu ol om aw on bi"><span id="6070" class="lk ll in nu b gy oo op l oq or">build.call(this);</span></pre></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="a80a" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">第3节:定义私有方法</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="4a62" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">私有方法只是我们函数内部的函数。</p><p id="019e" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在每个插件中，我都有这两个公共函数</p><ul class=""><li id="96b0" class="md me in kq b kr ks ku kv kx nh lb ni lf nj lj mk ml mm mn bi translated"><code class="fe nr ns nt nu b">build()</code>被<strong class="kq io"> <em class="nn">调用init() </em> </strong>来设置DOM中的一切，事件等。</li><li id="fa41" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">在窗口对象中注册插件时使用<code class="fe nr ns nt nu b">extendDefaults(defaults,properties)</code>。</li></ul></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="478b" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">用JavaScript初始化插件(project.js)</h1><p id="0c07" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated">下面的代码展示了我如何在我的标准项目文件中初始化插件。</p><ul class=""><li id="390e" class="md me in kq b kr ks ku kv kx nh lb ni lf nj lj mk ml mm mn bi translated">我在第3行<em class="nn">的窗口对象中注册了一个全局变量‘elements’。</em></li><li id="e85e" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">在事件监听器DOMContentLoaded中，我初始化了第7行上的插件。</li><li id="5e84" class="md me in kq b kr mo ku mp kx mq lb mr lf ms lj mk ml mm mn bi translated">在事件监听器resize中，我调用了第15行上的公共函数<code class="fe nr ns nt nu b">update()</code>。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="5c0b" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">用HTML实现(index.html)</h1><p id="680c" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated">下面的代码展示了我如何在一个HTML站点中实现插件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="36d1" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">顺便说一下，如果你有兴趣优化你的HTML代码以获得更好的SEO结果和机器可读性，请阅读我的文章。</p><div class="os ot gp gr ou ov"><a href="https://levelup.gitconnected.com/semantics-how-i-structure-html-without-divitis-dd0d376f193" rel="noopener  ugc nofollow" target="_blank"><div class="ow ab fo"><div class="ox ab oy cl cj oz"><h2 class="bd io gy z fp pa fr fs pb fu fw im bi translated">我如何构建HTML以获得更好的搜索引擎优化结果</h2><div class="pc l"><h3 class="bd b gy z fp pa fr fs pb fu fw dk translated">这篇文章展示了我如何使用语义HTML标签优化网站，为更好的机器准备内容…</h3></div><div class="pd l"><p class="bd b dl z fp pa fr fs pb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="pe l"><div class="pf l pg ph pi pe pj km ov"/></div></div></a></div></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><h1 id="12c1" class="mt ll in bd lm mu of mw lp mx og mz ls jt oh ju lv jw oi jx ly jz oj ka mb nd bi translated">Github链接</h1><p id="58c4" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated"><a class="ae nv" href="https://github.com/stephan-romhart/Javascript-Plugin-Boilerplate" rel="noopener ugc nofollow" target="_blank">https://github . com/Stephan-rom hart/Javascript-Plugin-Boilerplate</a></p><h1 id="e6e8" class="mt ll in bd lm mu mv mw lp mx my mz ls jt na ju lv jw nb jx ly jz nc ka mb nd bi translated">结论</h1><p id="4927" class="pw-post-body-paragraph ko kp in kq b kr mf jo kt ku mg jr kw kx ne kz la lb nf ld le lf ng lh li lj ig bi translated">我仍然记得我使用一些古怪的jQuery插件的日子，我不得不改变它们的功能或纠正它们的古怪之处。太烦人了。</p><p id="493c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">用提交的JavaScript插件样板文件，我为我的日常工作构建了大约20个可重用的易于风格化的插件。我在生产中使用它，直到现在都没有问题。它结构清晰，易于使用。我很满意，❤️.</p></div><div class="ab cl ny nz hr oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ig ih ii ij ik"><p id="55b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">感谢阅读。<br/> </strong>期待您的反馈。😍</p><p id="cddb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">请评论、书签或关注我，支持我的频道。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi pk"><img src="../Images/5083aad6143eb39201170a80a170da7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*914H2YMGNos4XMHRIqDBsQ.jpeg"/></div></div></figure><p id="f574" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你想让我写第二篇文章，介绍一个使用我提供的样板文件的示例JavaScript插件，请告诉我！</p><p id="3064" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">如果你心中有一个特定的主题，你会希望我写下来，让我在推特上知道:<a class="ae nv" href="https://www.twitter.com/@stephan_romhart" rel="noopener ugc nofollow" target="_blank">https://www.twitter.com/@stephan_romhart</a></p><p id="e758" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="nn">更多内容请看</em><a class="ae nv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="nn">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
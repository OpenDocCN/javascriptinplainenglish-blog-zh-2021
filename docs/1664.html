<html>
<head>
<title>How to Sort Arrays in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中对数组排序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-sort-arrays-in-javascript-7c50d0fc4d9a?source=collection_archive---------20-----------------------#2021-04-09">https://javascript.plainenglish.io/how-to-sort-arrays-in-javascript-7c50d0fc4d9a?source=collection_archive---------20-----------------------#2021-04-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c8b3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">字符串、数字和对象的排序列表。构建一个通用的比较函数。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/afeccd1254ab27e1d38a12471495eb73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-wI3tXEESs6MQTm8bYFHWw.jpeg"/></div></div></figure><p id="702e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我们将了解如何对数字、字符串和对象的数组进行排序。最后，我们将尝试创建一个通用函数，它可以根据任意数量的属性对数据对象列表进行排序。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="6b0e" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">对字符串数组排序</h1><p id="70a0" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated"><code class="fe mr ms mt mu b">sort</code>方法将元素转换成字符串，并按字母顺序排序。当然，这对于排序字符串非常有用。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="fdcf" class="mz lv iq mu b gy na nb l nc nd">const fruits = ["Lemon", "Apple", "Mango"];<br/>fruits.sort()</span><span id="57b5" class="mz lv iq mu b gy ne nb l nc nd">console.log(fruits);<br/>//["Apple", "Lemon", "Mango"]</span></pre><p id="9854" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">记住<code class="fe mr ms mt mu b">sort</code>方法是不纯的。它改变输入数组。</p></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="f8ee" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">对数字数组排序</h1><p id="d32d" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">如前所述,<code class="fe mr ms mt mu b">sort</code>在排序之前将值转换成字符串。这对我们排序字符串很有用，但对数字不起作用。看看下面的例子。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="5f5e" class="mz lv iq mu b gy na nb l nc nd">const numbers = [-1, -3, -2];<br/>console.log(numbers.sort());<br/>//[-1, -2, -3]</span></pre><p id="c920" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当数字按字符串排序时，<code class="fe mr ms mt mu b">'-2'</code>在<code class="fe mr ms mt mu b">'-1'</code>之后。</p><p id="ee9b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然而，我们可以通过提供一个比较函数来解决这个问题。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="49b8" class="mz lv iq mu b gy na nb l nc nd">function asc(a, b){<br/>  if(a &gt; b) return 1;<br/>  if(a &lt; b) return -1;<br/>  return 0;<br/>}</span><span id="54a7" class="mz lv iq mu b gy ne nb l nc nd">const numbers = [-1, -3, -2];<br/>console.log(numbers.sort(asc));<br/>//[-3, -2, -1]</span></pre><p id="eaf4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">比较函数定义了排序顺序。它取两个元素<code class="fe mr ms mt mu b">a</code>和<code class="fe mr ms mt mu b">b</code>，如果<code class="fe mr ms mt mu b">a</code>在<code class="fe mr ms mt mu b">b</code>之前，则返回<code class="fe mr ms mt mu b">-1</code>，如果<code class="fe mr ms mt mu b">b</code>在<code class="fe mr ms mt mu b">a</code>之后，则返回<code class="fe mr ms mt mu b">1</code>，如果顺序保持不变，则返回<code class="fe mr ms mt mu b">0</code>。</p><p id="74fe" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mr ms mt mu b">asc</code>是比较功能。</p><p id="15d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是前面compare函数的一个简短版本，可以用来对数字进行升序排序。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="fda2" class="mz lv iq mu b gy na nb l nc nd">function asc(a, b){<br/>  return a - b;<br/>}</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="87bc" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">排序对象数组</h1><p id="a38d" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">接下来，让我们看看如何对对象数组进行排序。</p><p id="d99c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑购物清单。对于列表中的每个水果，我们都有<code class="fe mr ms mt mu b">name</code>和<code class="fe mr ms mt mu b">quantity</code>属性。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="5f0c" class="mz lv iq mu b gy na nb l nc nd">const shoppingList = [<br/> {name: 'Lemon', quantity: 3},<br/> {name: 'Apple', quantity: 2},<br/> {name: 'Mango', quantity: 1}<br/>]</span></pre><p id="9eee" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是我们如何根据水果名称对列表进行排序。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="df8a" class="mz lv iq mu b gy na nb l nc nd">shoppingList.sort(function (objA, objB) {<br/>  const a = objA.name;<br/>  const b = objB.name;<br/>  return a === b <br/>    ? 0 <br/>    : a &gt; b <br/>      ? 1 <br/>      : -1;<br/>});</span><span id="7f1d" class="mz lv iq mu b gy ne nb l nc nd">console.log(shoppingList);<br/>//[<br/>//{name: "Apple", quantity: 2},<br/>//{name: "Lemon", quantity: 3},<br/>//{name: "Mango", quantity: 1}<br/>//]</span></pre><p id="038e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">compare函数从两个对象中获取名称，然后用它来决定返回的结果。</p><p id="13e6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以通过提取compare函数并给它一个揭示意图的名称来提高可读性。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="110e" class="mz lv iq mu b gy na nb l nc nd">function byName(objA, objB) {<br/>  const a = objA.name;<br/>  const b = objB.name;<br/>  return a === b <br/>    ? 0 <br/>    : a &gt; b <br/>      ? 1 <br/>      : -1;<br/>}</span><span id="b1a2" class="mz lv iq mu b gy ne nb l nc nd">shoppingList.sort(byName);</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="6e09" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">创建通用比较函数</h1><p id="5dd4" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">之前的比较函数<code class="fe mr ms mt mu b">byName</code>只能按name属性排序。根据任何包含字符串或数字的属性进行排序将非常有用。</p><p id="cfa9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果我们创建一个接受属性名并使用该属性返回比较函数的函数会怎么样？这是它可能的样子。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="b789" class="mz lv iq mu b gy na nb l nc nd">function by(propName){<br/>  return function(objA, objB){<br/>    ...<br/>  }<br/>}</span></pre><p id="147e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mr ms mt mu b">by</code>是返回另一个函数的函数。<code class="fe mr ms mt mu b">by</code>是高阶函数。</p><p id="517a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是我们如何实现它。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="cc53" class="mz lv iq mu b gy na nb l nc nd">function by(propName){<br/>  return function(objA, objB){<br/>    const a = objA[propName];<br/>    const b = objB[propName];<br/>    return a === b <br/>      ? 0 <br/>      : a &gt; b <br/>        ? 1 <br/>        : -1;<br/>  }<br/>}</span><span id="85fd" class="mz lv iq mu b gy ne nb l nc nd">shoppingList.sort(by("name"));</span></pre><p id="7a04" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">括号符号用于读取sort属性的值。然后基于这些值，返回升序的正确结果<code class="fe mr ms mt mu b">-1</code>、<code class="fe mr ms mt mu b">0</code>或<code class="fe mr ms mt mu b">1</code>。</p><p id="dcfc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">compare函数适用于字符串和数字。下面是一个根据数量对列表进行排序的示例。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="ffbd" class="mz lv iq mu b gy na nb l nc nd">shoppingList.sort(by("quantity"));<br/>//[<br/>//{name: "Mango", quantity: 1},<br/>//{name: "Apple", quantity: 2},<br/>//{name: "Lemon", quantity: 3}<br/>//]</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="879d" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">按任意数量的属性排序</h1><p id="2bbe" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">前面的比较函数适用于基于一个属性的排序，但是如果我们想要使用多个属性进行排序呢？</p><p id="cbeb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">考虑下一个例子。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="a226" class="mz lv iq mu b gy na nb l nc nd">const shoppingList = [<br/> {name: 'Broccoli', quantity: 1, type:'Vegetables'},<br/> {name: 'Lemon', quantity: 2, type: 'Fruits'},<br/> {name: 'Apple', quantity: 2, type: 'Fruits'},<br/> {name: 'Orange', quantity: 1, type: 'Fruits'},<br/> {name: 'Mango', quantity: 1, type: 'Fruits'}<br/>];</span></pre><p id="1aa8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在这种情况下，我们有几个对象具有相同的<code class="fe mr ms mt mu b">type</code>和<code class="fe mr ms mt mu b">quantity</code>。</p><p id="9102" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们想先按<code class="fe mr ms mt mu b">type</code>排序。如果两个元素有相同的<code class="fe mr ms mt mu b">type</code>，那么我们将按<code class="fe mr ms mt mu b">quantity</code>排序。如果两个元素具有相同的数量，那么我们将按照<code class="fe mr ms mt mu b">name</code>对它们进行排序。</p><p id="5fb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个可能的实现<br/><code class="fe mr ms mt mu b">by</code>函数使用rest参数对所有属性进行排序。rest参数是一个数组。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="722b" class="mz lv iq mu b gy na nb l nc nd">function by(...props){    <br/>  return function(objA, objB){<br/>    const propName = props[0];<br/>    const otherProps = props.slice(1);<br/>  <br/>    const a = objA[propName];<br/>    const b = objB[propName];<br/><br/>    return a === b <br/>      ?  otherProps.length<br/>        ? by(...otherProps)(objA, objB)<br/>        : 0<br/>      : a &gt; b <br/>        ? 1 <br/>        : -1;<br/>  }<br/>}</span></pre><p id="8a4e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">事情是这样的。</p><p id="d227" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mr ms mt mu b">slice()</code>从<code class="fe mr ms mt mu b">start</code>到<code class="fe mr ms mt mu b">end</code> indexs返回一部分现有数组的新副本。如果省略<code class="fe mr ms mt mu b">end</code>，则<code class="fe mr ms mt mu b">slice</code>提取到数组末尾，表示<code class="fe mr ms mt mu b">arr.length</code>。</p><p id="0b81" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe mr ms mt mu b">props.slice(1)</code>返回包含除第一个值之外的所有当前值的新数组。</p><p id="c6cf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">带有所有属性的数组中的第一个属性用于排序。当两个元素具有相同的值时，列表中的下一个属性用于排序。这种行为是通过对当前两个元素的剩余排序属性调用<code class="fe mr ms mt mu b">by</code>函数实现的:<code class="fe mr ms mt mu b">by(...otherProps)(objA, objB)</code>。当两个值相等，并且没有更多属性要排序时，返回<code class="fe mr ms mt mu b">0</code>，因此顺序保持不变。</p><p id="9a23" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是结果。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="31e8" class="mz lv iq mu b gy na nb l nc nd">shoppingList.sort(by("type", "quantity", "name"));<br/>console.log(shoppingList);</span><span id="4f37" class="mz lv iq mu b gy ne nb l nc nd">//[<br/>//  {name: "Mango", quantity: 1, type: "Fruits"},<br/>//  {name: "Orange", quantity: 1, type: "Fruits"}, <br/>//  {name: "Apple", quantity: 2, type: "Fruits"},<br/>//  {name: "Lemon", quantity: 2, type: "Fruits"},<br/>//  {name: "Broccoli", quantity: 1, type: "Vegetables"},<br/>//]</span></pre></div><div class="ab cl ln lo hu lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="ij ik il im in"><h1 id="0d59" class="lu lv iq bd lw lx ly lz ma mb mc md me jw mf jx mg jz mh ka mi kc mj kd mk ml bi translated">结论</h1><p id="23fa" class="pw-post-body-paragraph kr ks iq kt b ku mm jr kw kx mn ju kz la mo lc ld le mp lg lh li mq lk ll lm ij bi translated">正如您所看到的，对字符串进行排序与<code class="fe mr ms mt mu b">sort</code>方法的默认行为配合得很好，但是对于其他值类型，可能需要一个比较函数。您在本文中找到的比较函数可能对您在不同的项目中有用。感谢阅读。</p><p id="0bf5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nf">更多内容请看</em><a class="ae ng" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nf">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
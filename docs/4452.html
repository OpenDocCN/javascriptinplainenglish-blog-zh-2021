<html>
<head>
<title>Create a Todo App with GraphQL, React, MongoDB and Apollo (Server-Side)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用GraphQL，React，MongoDB和Apollo创建一个Todo App(服务器端)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-todo-app-with-graphql-react-mongodb-and-apollo-server-side-292ce42b9eea?source=collection_archive---------2-----------------------#2021-09-05">https://javascript.plainenglish.io/create-a-todo-app-with-graphql-react-mongodb-and-apollo-server-side-292ce42b9eea?source=collection_archive---------2-----------------------#2021-09-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3668" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用GraphQL进行CRUD操作</h2></div><p id="95bf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将学习如何使用GraphQL、React、MongoDB和Apollo创建一个todo应用程序。本文将关注服务器端。我们将像获取单个待办事项一样进行查询，并获取所有待办事项。并进行类似更新特定todo和删除todo的变异。</p><p id="41ca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" rel="noopener ugc nofollow" target="_blank" href="/create-a-todo-app-with-graphql-react-mongodb-and-apollo-server-side-292ce42b9eea">第一部分:用GraphQL、React、MongoDB和Apollo(服务器端)创建一个Todo应用</a></p><p id="1e71" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://ckmobile.medium.com/create-a-todo-app-with-graphql-react-mongodb-and-apollo-client-side-8a946d869014" rel="noopener">第二部分:用GraphQL、React、MongoDB和Apollo(客户端)创建一个Todo应用</a></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/babc66f056e4bb08851aaf5aa52fa9f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*evGM8e3kh5j5zjSa-2n0MA.png"/></div></div></figure></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="682f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">源代码:</p><div class="lv lw gp gr lx ly"><a href="https://ckmobile.gumroad.com/l/graphql-apollo-mongodb-todo-app" rel="noopener  ugc nofollow" target="_blank"><div class="lz ab fo"><div class="ma ab mb cl cj mc"><h2 class="bd ir gy z fp md fr fs me fu fw ip bi translated">用React GraphQL MongoDB和Apollo创建一个Todo应用程序</h2><div class="mf l"><h3 class="bd b gy z fp md fr fs me fu fw dk translated">为什么选择GraphQL？GraphQL使我们能够通过一个查询得到我们想要东西。例如，我们通常获取一个对象数组…</h3></div><div class="mg l"><p class="bd b dl z fp md fr fs me fu fw dk translated">ckmobile.gumroad.com</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm lm ly"/></div></div></a></div><p id="3f99" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们需要创建一个服务器文件夹</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mn"><img src="../Images/f74c5b74451fe3c542438e7526992fef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Viie6eaZgPFtWOOnx8KYCw.png"/></div></div></figure><p id="5a3d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入该文件夹并键入npm init -y。它将创建package.json</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi mn"><img src="../Images/aa17297d754774896c979a4c8f7588e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*23y6l78RGdMsXlZUbQL_zQ.png"/></div></div></figure><p id="d40b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">进入终端，安装express、apollo-server-express、graphql和mongoose。</p><p id="13ac" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您还没有安装nodemon，最好安装nodemon，它允许在文件发生变化时自动重启服务器。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="c450" class="mt mu iq mp b gy mv mw l mx my">npm i express apollo-server-express graphql mongoose</span><span id="2381" class="mt mu iq mp b gy mz mw l mx my">npm i nodemon -g</span></pre><p id="6549" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们转到package.json，添加一行</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="204b" class="mt mu iq mp b gy mv mw l mx my">"type":"module",</span></pre><p id="a24f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这意味着我们可以使用导入和导出语法。</p><p id="93ab" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以导入express，即阿波罗服务器。</p><p id="338f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个名为welcome的简单查询，它将向ckmobile返回welcome。所以在typeDefs下，我们输入</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="3526" class="mt mu iq mp b gy mv mw l mx my">type Query{</span><span id="8f66" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="8fc9" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="9194" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们希望它会返回一个字符串。</p><p id="4c68" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在解析器下，我们键入</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="5fa0" class="mt mu iq mp b gy mv mw l mx my">Query: {</span><span id="93d3" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="e636" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="96f3" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="88d7" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="420e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果用户发出查询“Welcome ”,它将生成返回“Welcome to ckmobile”的响应。</p><p id="5c4b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，我们创建一个init服务器函数。在这个函数下，我们将typeDefs和解析器传递给apollo服务器。</p><p id="9221" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在应用中间件之前启动apollo服务器。创建一个简单的响应，以便我们稍后可以检查服务器是否成功启动。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="a21d" class="mt mu iq mp b gy mv mw l mx my">app.use((req, res) =&gt; {</span><span id="77ea" class="mt mu iq mp b gy mz mw l mx my">res.send("Server started")</span><span id="9957" class="mt mu iq mp b gy mz mw l mx my">})</span></pre><p id="656b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样做是为了将来的部署做好准备。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="f759" class="mt mu iq mp b gy mv mw l mx my">create PORT = process.env.PORT || 5000;</span></pre><p id="00a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，执行“initServer”函数。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="9042" class="mt mu iq mp b gy mv mw l mx my">import express from 'express';</span><span id="6dd2" class="mt mu iq mp b gy mz mw l mx my">import {ApolloServer} from 'apollo-server-express';</span><span id="ce4f" class="mt mu iq mp b gy mz mw l mx my">const typeDefs = gql`</span><span id="9154" class="mt mu iq mp b gy mz mw l mx my">type Query{</span><span id="8ba4" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="ea3c" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="4f4b" class="mt mu iq mp b gy mz mw l mx my">`</span><span id="309b" class="mt mu iq mp b gy mz mw l mx my">const resolvers = {</span><span id="74e8" class="mt mu iq mp b gy mz mw l mx my">Query: {</span><span id="f6e9" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="f02f" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="f922" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="d5f9" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="fe11" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="3ad5" class="mt mu iq mp b gy mz mw l mx my">async function initServer() {</span><span id="cfb5" class="mt mu iq mp b gy mz mw l mx my">const app = express();</span><span id="4f3f" class="mt mu iq mp b gy mz mw l mx my">const apolloServer = new ApolloServer({</span><span id="9428" class="mt mu iq mp b gy mz mw l mx my">typeDefs, resolvers</span><span id="6b35" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="03f9" class="mt mu iq mp b gy mz mw l mx my">await apolloServer.start();</span><span id="e77d" class="mt mu iq mp b gy mz mw l mx my">apolloServer.applyMiddleware({ app });</span><span id="8618" class="mt mu iq mp b gy mz mw l mx my">app.use((req, res) =&gt; {</span><span id="16ef" class="mt mu iq mp b gy mz mw l mx my">res.send("Server started")</span><span id="32af" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="d45e" class="mt mu iq mp b gy mz mw l mx my">const PORT = process.env.PORT || 5000;</span><span id="18e2" class="mt mu iq mp b gy mz mw l mx my">app.listen(PORT, () =&gt; console.log(`Express server is running on port ${PORT}`))</span><span id="5243" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="2010" class="mt mu iq mp b gy mz mw l mx my">initServer()</span></pre><p id="a725" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们去</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="49ee" class="mt mu iq mp b gy mv mw l mx my"><a class="ae lb" href="http://localhost:5000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:5000</a></span></pre><p id="b6c7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将返回“服务器已启动”</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi na"><img src="../Images/d5fdb57c32815b183768552da8724f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EfauIcDT46Gh7b-w1Au7pA.png"/></div></div></figure><p id="5e34" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们说</p><p id="7aee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="http://localhost:5000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/graph QL</a></p><p id="8635" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将转到GraphQL UI页面</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nb"><img src="../Images/0688141c2135717e0262d1e03384d805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yf5-GmnJWBQ1_rEn3cpK3w.png"/></div></div></figure><p id="79cc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">按下“查询您的服务器”按钮。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nc"><img src="../Images/544703dcde8be83294dd3a1ef49bbac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H14vHoH8oD2SG1vN6IdC6A.png"/></div></div></figure><p id="bccf" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们打字</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="93bc" class="mt mu iq mp b gy mv mw l mx my">query{</span><span id="9adb" class="mt mu iq mp b gy mz mw l mx my">welcome</span><span id="497f" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="cb89" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会回来的</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="f7a2" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="8f6d" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="a31c" class="mt mu iq mp b gy mz mw l mx my">"welcome": "Welcome to ckmobile"</span><span id="cfc3" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="da25" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><h2 id="0b1c" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">将resolvers.js和typeDefs.js分开</h2><p id="faee" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">对于resolvers.js，我们删除了以下代码</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="e44c" class="mt mu iq mp b gy mv mw l mx my">const resolvers = {</span><span id="71db" class="mt mu iq mp b gy mz mw l mx my">Query: {</span><span id="9297" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="1788" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="529c" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="8743" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="2e0b" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="99a2" class="mt mu iq mp b gy mz mw l mx my">export default resolvers</span></pre><p id="61df" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于typeDefs.js</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="493b" class="mt mu iq mp b gy mv mw l mx my">const {  gql } = require('apollo-server-express');</span><span id="fbf3" class="mt mu iq mp b gy mz mw l mx my">const typeDefs = gql`</span><span id="1f15" class="mt mu iq mp b gy mz mw l mx my">type Query{</span><span id="00db" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="d441" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="0202" class="mt mu iq mp b gy mz mw l mx my">`</span><span id="3dc1" class="mt mu iq mp b gy mz mw l mx my">export default typeDefs</span></pre><p id="d7e5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将这两个文件导入index.js</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="1ba1" class="mt mu iq mp b gy mv mw l mx my">import express from 'express';</span><span id="0a84" class="mt mu iq mp b gy mz mw l mx my">import typeDefs from './typeDefs.js';</span><span id="32f2" class="mt mu iq mp b gy mz mw l mx my">import resolvers from './resolvers.js';</span><span id="2883" class="mt mu iq mp b gy mz mw l mx my">import {ApolloServer} from 'apollo-server-express';</span><span id="4262" class="mt mu iq mp b gy mz mw l mx my">async function initServer() {</span><span id="a9f0" class="mt mu iq mp b gy mz mw l mx my">const app = express();</span><span id="0e38" class="mt mu iq mp b gy mz mw l mx my">const apolloServer = new ApolloServer({</span><span id="099a" class="mt mu iq mp b gy mz mw l mx my">typeDefs, resolvers</span><span id="9bb6" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="48a2" class="mt mu iq mp b gy mz mw l mx my">await apolloServer.start();</span><span id="bb7f" class="mt mu iq mp b gy mz mw l mx my">apolloServer.applyMiddleware({ app });</span><span id="3743" class="mt mu iq mp b gy mz mw l mx my">app.use((req, res) =&gt; {</span><span id="fc71" class="mt mu iq mp b gy mz mw l mx my">res.send("Server started")</span><span id="7067" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="97e7" class="mt mu iq mp b gy mz mw l mx my">const PORT = process.env.PORT || 5000;</span><span id="cdb9" class="mt mu iq mp b gy mz mw l mx my">app.listen(PORT, () =&gt; console.log(`Express server is running on port ${PORT}`))</span><span id="a379" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="ac63" class="mt mu iq mp b gy mz mw l mx my">initServer()</span></pre><p id="05a6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们再次运行<a class="ae lb" href="http://localhost/grahql" rel="noopener ugc nofollow" target="_blank"> http://localhost/grahql </a>，它将返回到GraphQL UI，并且仍然工作。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nz"><img src="../Images/8f2f5fb3727a007d591f14221f7bdae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1GKvHW9nIoBSpMbO9ZcJKg.png"/></div></div></figure><h2 id="23e7" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">创建Todo模型</h2><p id="6e89" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">创建一个名为“模型”的新文件夹。在此文件夹下，创建Todo.js。</p><p id="6fe9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用Mongoose创建一个模式，根据需要设置标题，标题和细节的数据类型是string，日期的数据类型是date。</p><p id="3084" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还启用了时间戳,“createdAt”和“updatedAt”属性将被添加到模式中。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="8443" class="mt mu iq mp b gy mv mw l mx my">import mongoose from 'mongoose';</span><span id="4ebb" class="mt mu iq mp b gy mz mw l mx my">const Schema = mongoose.Schema;</span><span id="a461" class="mt mu iq mp b gy mz mw l mx my">const todoSchema = new Schema({</span><span id="c96e" class="mt mu iq mp b gy mz mw l mx my">title: {</span><span id="183d" class="mt mu iq mp b gy mz mw l mx my">type: String,</span><span id="da90" class="mt mu iq mp b gy mz mw l mx my">required: true</span><span id="8fab" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="c2bc" class="mt mu iq mp b gy mz mw l mx my">detail: String,</span><span id="55c3" class="mt mu iq mp b gy mz mw l mx my">date:Date</span><span id="135d" class="mt mu iq mp b gy mz mw l mx my">}, { timestamps: true });</span><span id="c267" class="mt mu iq mp b gy mz mw l mx my">const Todo = mongoose.model('todo', todoSchema)</span><span id="2241" class="mt mu iq mp b gy mz mw l mx my">export default Todo;</span></pre><h2 id="a463" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">连接到MongoDB</h2><p id="d777" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">在连接到MongoDB之前，您应该已经注册了MongoDB atlas。如果您还没有这样做的经验，请参考下面的视频，了解如何设置MongoDB。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="oa ob l"/></div></figure><p id="3b13" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个. env文件</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oc"><img src="../Images/3a13c93b6382dbac724fed99fff000fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*e074g8Khe78M-m5EO_RvBg.png"/></div></div></figure><p id="76c8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在里面。环境文件</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="fdfc" class="mt mu iq mp b gy mv mw l mx my">mongodb=mongodb+srv://ckmobile:ckmobilepassword@nodetuts.qwlpv.mongodb.net/post-database?retryWrites=true&amp;w=majority</span></pre><p id="bdcb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后安装两个包，一个是cors，它允许我们用不同的选项启用CORS。另一个是可以读取。env文件并解析内容。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="53d3" class="mt mu iq mp b gy mv mw l mx my">npm i cors dotenv</span></pre><p id="1ac3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">去index.js，我们导入mongoose，cors，和dotenv包。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="2b65" class="mt mu iq mp b gy mv mw l mx my">import express from 'express';</span><span id="ff1c" class="mt mu iq mp b gy mz mw l mx my">import typeDefs from './typeDefs.js';</span><span id="26de" class="mt mu iq mp b gy mz mw l mx my">import resolvers from './resolvers.js';</span><span id="e663" class="mt mu iq mp b gy mz mw l mx my">import {ApolloServer} from 'apollo-server-express';</span><span id="3311" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">import mongoose from 'mongoose';</strong></span><span id="ce77" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">import cors from 'cors';</strong></span><span id="72e2" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">import dotenv from 'dotenv';</strong></span><span id="c940" class="mt mu iq mp b gy mz mw l mx my">async function initServer() {</span><span id="b073" class="mt mu iq mp b gy mz mw l mx my">const app = express();</span><span id="afdc" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">app.use(cors());</strong></span><span id="3303" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">dotenv.config();</strong></span><span id="4062" class="mt mu iq mp b gy mz mw l mx my">const apolloServer = new ApolloServer({</span><span id="c593" class="mt mu iq mp b gy mz mw l mx my">typeDefs, resolvers</span><span id="e785" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="6289" class="mt mu iq mp b gy mz mw l mx my">await apolloServer.start();</span><span id="cc14" class="mt mu iq mp b gy mz mw l mx my">apolloServer.applyMiddleware({ app });</span><span id="21d3" class="mt mu iq mp b gy mz mw l mx my">app.use((req, res) =&gt; {</span><span id="a793" class="mt mu iq mp b gy mz mw l mx my">res.send("Server started")</span><span id="5d4e" class="mt mu iq mp b gy mz mw l mx my">})</span><span id="9158" class="mt mu iq mp b gy mz mw l mx my">const PORT = process.env.PORT || 5000;</span><span id="e09a" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">try {</strong></span><span id="b405" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">await mongoose.connect(process.env.mongodb, { useNewUrlParser: true, useUnifiedTopology: true })</strong></span><span id="ae40" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">console.log(`Mongoose connected on port ${PORT}`)</strong></span><span id="281e" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">} catch (error) {</strong></span><span id="a75b" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">console.log(error)</strong></span><span id="19f0" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="d3a6" class="mt mu iq mp b gy mz mw l mx my">app.listen(PORT, () =&gt; console.log(`Express server is running on port ${PORT}`))</span><span id="ff4d" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="3283" class="mt mu iq mp b gy mz mw l mx my">initServer();</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi od"><img src="../Images/6395d3398ee2ff0133dd6ebaf81a2928.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*28fEIoJR5BPGIb_XoWA6ow.png"/></div></figure><p id="3ae7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">保存后，命令行将显示上面的日志，这意味着它可以连接到MongoDB。</p><h2 id="4f55" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">获取所有待办事项</h2><p id="72f5" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">要获取所有的Todo，请进入typeDefs.js。在查询中，创建getTodos并期望返回Todo数组。</p><p id="4255" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是我们还没有创建Todo。因此，我们需要添加带有id、标题、细节和日期的类型Todo。</p><p id="e421" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于typeDefs</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="b5df" class="mt mu iq mp b gy mv mw l mx my">import {  gql } from 'apollo-server-express';</span><span id="8732" class="mt mu iq mp b gy mz mw l mx my">const typeDefs = gql`</span><span id="9b2c" class="mt mu iq mp b gy mz mw l mx my">scalar Date</span><span id="327a" class="mt mu iq mp b gy mz mw l mx my">type Todo{</span><span id="6e01" class="mt mu iq mp b gy mz mw l mx my">id:ID</span><span id="d0bd" class="mt mu iq mp b gy mz mw l mx my">title:String</span><span id="22f7" class="mt mu iq mp b gy mz mw l mx my">detail:String</span><span id="6bae" class="mt mu iq mp b gy mz mw l mx my">date:Date</span><span id="6204" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="874d" class="mt mu iq mp b gy mz mw l mx my">type Query{</span><span id="9163" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="6ba7" class="mt mu iq mp b gy mz mw l mx my">getTodos:[Todo]</span><span id="cc11" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="da5b" class="mt mu iq mp b gy mz mw l mx my">`</span><span id="ed5a" class="mt mu iq mp b gy mz mw l mx my">export default typeDefs</span></pre><p id="5fd8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在resolvers.js中，我们从MongoDB返回todos。</p><p id="32f9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于resolvers.js</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="0b26" class="mt mu iq mp b gy mv mw l mx my">import Todo from "./models/Todo.js";</span><span id="936b" class="mt mu iq mp b gy mz mw l mx my">const resolvers = {</span><span id="3267" class="mt mu iq mp b gy mz mw l mx my">Query: {</span><span id="96a6" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="70a9" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="8bd7" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="ca21" class="mt mu iq mp b gy mz mw l mx my">getTodos:async()=&gt;{</span><span id="4b75" class="mt mu iq mp b gy mz mw l mx my">const todos = await Todo.find()</span><span id="4c35" class="mt mu iq mp b gy mz mw l mx my">return todos</span><span id="ec76" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="f0d4" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="40a2" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="2f15" class="mt mu iq mp b gy mz mw l mx my">export default resolvers;<br/></span></pre><p id="7eae" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们尝试在graphqlUI上进行查询。我们可以看到这是一个空数组，这很正常，因为还没有todos。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oe"><img src="../Images/261cc3630ab841d5b07cde1f3459fd6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bxak_mtvGaFAqp8SQJl8VQ.png"/></div></div></figure><h2 id="33ea" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">创建待办事项</h2><p id="36af" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">转到typeDefs.js，我们添加一个名为“addTodo”的变异。然后我们将标题、细节和日期传递给addTodo。它应该返回类型Todo。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="826a" class="mt mu iq mp b gy mv mw l mx my">import {  gql } from 'apollo-server-express';</span><span id="2555" class="mt mu iq mp b gy mz mw l mx my">import { GraphQLScalarType, Kind } from 'graphql';</span><span id="2c7c" class="mt mu iq mp b gy mz mw l mx my">const typeDefs = gql`</span><span id="c503" class="mt mu iq mp b gy mz mw l mx my">scalar Date</span><span id="2168" class="mt mu iq mp b gy mz mw l mx my">type Todo{</span><span id="9f86" class="mt mu iq mp b gy mz mw l mx my">id:ID</span><span id="c9a9" class="mt mu iq mp b gy mz mw l mx my">title:String</span><span id="01b7" class="mt mu iq mp b gy mz mw l mx my">detail:String</span><span id="7456" class="mt mu iq mp b gy mz mw l mx my">date:Date</span><span id="bb5d" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="c748" class="mt mu iq mp b gy mz mw l mx my">type Query{</span><span id="6cf5" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="cb44" class="mt mu iq mp b gy mz mw l mx my">getTodos:[Todo]</span><span id="d172" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="4789" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">type Mutation{</strong></span><span id="240c" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">addTodo(title:String, detail:String,date:Date):Todo</strong></span><span id="8767" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="dc4a" class="mt mu iq mp b gy mz mw l mx my">`</span><span id="e858" class="mt mu iq mp b gy mz mw l mx my">export default typeDefs</span></pre><p id="22e9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到resolvers.js</p><p id="13c6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在变异部分，我们基于用户传递的参数创建了一个新的todo。将使用Todo.save()保存新创建的todo。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="d48e" class="mt mu iq mp b gy mv mw l mx my">import Todo from "./models/Todo.js";</span><span id="5b88" class="mt mu iq mp b gy mz mw l mx my">const resolvers = {</span><span id="bf28" class="mt mu iq mp b gy mz mw l mx my">Query: {</span><span id="59c3" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="bca7" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="6ee1" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="7dc1" class="mt mu iq mp b gy mz mw l mx my">getTodos:async()=&gt;{</span><span id="5082" class="mt mu iq mp b gy mz mw l mx my">const todos = await Todo.find()</span><span id="42c8" class="mt mu iq mp b gy mz mw l mx my">return todos</span><span id="8878" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="028b" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="9fd6" class="mt mu iq mp b gy mz mw l mx my">Mutation:{</span><span id="f5be" class="mt mu iq mp b gy mz mw l mx my">addTodo:async(root,args)=&gt;{</span><span id="26d8" class="mt mu iq mp b gy mz mw l mx my">const newTodo = new Todo({title:args.title,detail:args.detail,date:args.date})</span><span id="c8fb" class="mt mu iq mp b gy mz mw l mx my">await newTodo.save();</span><span id="290d" class="mt mu iq mp b gy mz mw l mx my">return newTodo;</span><span id="eaf2" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="2c62" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="e386" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="0165" class="mt mu iq mp b gy mz mw l mx my">export default resolvers;</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi of"><img src="../Images/b12941c6548c040cd668300940fa01ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KRW4t7hN7zUDQScfV2rjtg.png"/></div></div></figure><p id="ed26" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在GraphQL用户界面中键入以下内容</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="6828" class="mt mu iq mp b gy mv mw l mx my">mutation{</span><span id="d4a5" class="mt mu iq mp b gy mz mw l mx my">addTodo (</span><span id="8406" class="mt mu iq mp b gy mz mw l mx my">title:"first todo"</span><span id="cb7b" class="mt mu iq mp b gy mz mw l mx my">detail:"first detail first detail first detail"</span><span id="6ea7" class="mt mu iq mp b gy mz mw l mx my">date:"2021-9-10"</span><span id="e25f" class="mt mu iq mp b gy mz mw l mx my">){</span><span id="d2aa" class="mt mu iq mp b gy mz mw l mx my">id</span><span id="97a0" class="mt mu iq mp b gy mz mw l mx my">title</span><span id="d40c" class="mt mu iq mp b gy mz mw l mx my">detail</span><span id="0cea" class="mt mu iq mp b gy mz mw l mx my">date</span><span id="78f4" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="02f7" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="1658" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们会得到</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="aaca" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="3651" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="37ef" class="mt mu iq mp b gy mz mw l mx my">"addTodo": {</span><span id="79c1" class="mt mu iq mp b gy mz mw l mx my">"id": "6131ce9079d2b4a8d9598bd0",</span><span id="cc54" class="mt mu iq mp b gy mz mw l mx my">"title": "first todo",</span><span id="77cc" class="mt mu iq mp b gy mz mw l mx my">"detail": "first detail first detail first detail",</span><span id="a048" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-09T16:00:00.000Z"</span><span id="ef1a" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="b2b5" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="7cbb" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><figure class="ld le lf lg gt lh gh gi paragraph-image"><div class="gh gi og"><img src="../Images/f28a4de94ba7fcf49bd12569ea025260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*SJPKvkCsQK4wUI1Mrb_JAg.png"/></div></figure><p id="dde1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在MongoDB内部我们也可以看到这一点。</p><p id="0822" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在GraphQL UI中键入以下内容，并尝试再次获取todos。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="1b87" class="mt mu iq mp b gy mv mw l mx my">query{</span><span id="79cb" class="mt mu iq mp b gy mz mw l mx my">getTodos{</span><span id="3693" class="mt mu iq mp b gy mz mw l mx my">title</span><span id="3527" class="mt mu iq mp b gy mz mw l mx my">detail</span><span id="ef48" class="mt mu iq mp b gy mz mw l mx my">date</span><span id="b429" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="48b7" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="d261" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这次我们将得到一个todos数组，而不是一个空数组。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="9d47" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="5d80" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="fcfb" class="mt mu iq mp b gy mz mw l mx my">"getTodos": [</span><span id="e466" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="afb1" class="mt mu iq mp b gy mz mw l mx my">"title": "first todo",</span><span id="ed37" class="mt mu iq mp b gy mz mw l mx my">"detail": "first detail first detail first detail",</span><span id="78fd" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-09T16:00:00.000Z"</span><span id="b474" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="b064" class="mt mu iq mp b gy mz mw l mx my">]</span><span id="68e5" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="c584" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><h2 id="b4b1" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">获得一个待办事项</h2><p id="d792" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">来获取单个todo，就像前面的过程一样。我们进入typeDefs.js，添加查询getTodo</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="a6fa" class="mt mu iq mp b gy mv mw l mx my">import {  gql } from 'apollo-server-express';</span><span id="83ed" class="mt mu iq mp b gy mz mw l mx my">const typeDefs = gql`</span><span id="61a7" class="mt mu iq mp b gy mz mw l mx my">scalar Date</span><span id="a0e2" class="mt mu iq mp b gy mz mw l mx my">type Todo{</span><span id="ad1e" class="mt mu iq mp b gy mz mw l mx my">id:ID</span><span id="d371" class="mt mu iq mp b gy mz mw l mx my">title:String</span><span id="c453" class="mt mu iq mp b gy mz mw l mx my">detail:String</span><span id="9dae" class="mt mu iq mp b gy mz mw l mx my">date:Date</span><span id="3d06" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="ec9a" class="mt mu iq mp b gy mz mw l mx my">type Query{</span><span id="cf1d" class="mt mu iq mp b gy mz mw l mx my">welcome:String</span><span id="2d0f" class="mt mu iq mp b gy mz mw l mx my">getTodos:[Todo]</span><span id="e731" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">getTodo(id:ID):Todo</strong></span><span id="f6e6" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="b679" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">resolvers.js内部</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="fa63" class="mt mu iq mp b gy mv mw l mx my">import Todo from "./models/Todo.js";</span><span id="65ab" class="mt mu iq mp b gy mz mw l mx my">const resolvers = {</span><span id="c8e8" class="mt mu iq mp b gy mz mw l mx my">Query: {</span><span id="822e" class="mt mu iq mp b gy mz mw l mx my">welcome: () =&gt; {</span><span id="849c" class="mt mu iq mp b gy mz mw l mx my">return "Welcome to ckmobile"</span><span id="8d83" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="1a34" class="mt mu iq mp b gy mz mw l mx my">getTodos:async()=&gt;{</span><span id="cf17" class="mt mu iq mp b gy mz mw l mx my">const todos = await Todo.find()</span><span id="5635" class="mt mu iq mp b gy mz mw l mx my">return todos</span><span id="107e" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="7dc2" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">getTodo:async(root,args)=&gt;{</strong></span><span id="c4e6" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">return await Todo.findById(args.id)</strong></span><span id="2863" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="e27e" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">},</strong></span><span id="2c6a" class="mt mu iq mp b gy mz mw l mx my">Mutation:{</span><span id="7f7d" class="mt mu iq mp b gy mz mw l mx my">addTodo:async(root,args)=&gt;{</span><span id="2532" class="mt mu iq mp b gy mz mw l mx my">const newTodo = new Todo({title:args.title,detail:args.detail,date:args.date})</span><span id="896d" class="mt mu iq mp b gy mz mw l mx my">await newTodo.save();</span><span id="dde2" class="mt mu iq mp b gy mz mw l mx my">return newTodo;</span><span id="cf6e" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="bf35" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="6e7f" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="c6e8" class="mt mu iq mp b gy mz mw l mx my">export default resolvers;</span></pre><p id="6892" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在GraphQL UI中运行以下查询。复制待办事项之一的id</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="7958" class="mt mu iq mp b gy mv mw l mx my">query{</span><span id="ace3" class="mt mu iq mp b gy mz mw l mx my">getTodo(id:"6131ce9079d2b4a8d9598bd0"){</span><span id="4d1f" class="mt mu iq mp b gy mz mw l mx my">title</span><span id="4757" class="mt mu iq mp b gy mz mw l mx my">detail</span><span id="5214" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="3047" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="ed5f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将获得该todo的所有属性。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="fddd" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="58e6" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="420a" class="mt mu iq mp b gy mz mw l mx my">"getTodo": {</span><span id="c972" class="mt mu iq mp b gy mz mw l mx my">"title": "first todo",</span><span id="2eb8" class="mt mu iq mp b gy mz mw l mx my">"detail": "first detail first detail first detail"</span><span id="da48" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="10e5" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="7a01" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><h2 id="43af" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">删除待办事项</h2><p id="484d" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">Delete todo非常类似于get single todo，这也需要一个ID。</p><p id="81c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">typeDefs.js内部</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="630e" class="mt mu iq mp b gy mv mw l mx my">type Mutation{</span><span id="02ba" class="mt mu iq mp b gy mz mw l mx my">addTodo(title:String, detail:String,date:Date):Todo</span><span id="5f19" class="mt mu iq mp b gy mz mw l mx my">deleteTodo(id:ID):String</span><span id="eae9" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="d16b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在resolvers.js中，我们将找到id并删除该特定的todo。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="3f33" class="mt mu iq mp b gy mv mw l mx my">Mutation:{</span><span id="3401" class="mt mu iq mp b gy mz mw l mx my">addTodo:async(root,args)=&gt;{</span><span id="f1e2" class="mt mu iq mp b gy mz mw l mx my">const newTodo = new Todo({title:args.title,detail:args.detail,date:args.date})</span><span id="b63e" class="mt mu iq mp b gy mz mw l mx my">await newTodo.save();</span><span id="fae3" class="mt mu iq mp b gy mz mw l mx my">return newTodo;</span><span id="4455" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="d0ff" class="mt mu iq mp b gy mz mw l mx my">deleteTodo:async(root,args)=&gt;{</span><span id="3a05" class="mt mu iq mp b gy mz mw l mx my">await Post.findByIdAndDelete(args.id)</span><span id="20d6" class="mt mu iq mp b gy mz mw l mx my">return "The todo is deleted"</span><span id="9c6b" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="2275" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="b299" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以检查它是否在GraphQL UI中工作</p><p id="75ce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们键入以下内容</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="8c34" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="6990" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="d046" class="mt mu iq mp b gy mz mw l mx my">"getTodos": [</span><span id="11f5" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="c23b" class="mt mu iq mp b gy mz mw l mx my">"id": "6131ce9079d2b4a8d9598bd0",</span><span id="7606" class="mt mu iq mp b gy mz mw l mx my">"title": "first todo",</span><span id="f699" class="mt mu iq mp b gy mz mw l mx my">"detail": "first detail first detail first detail",</span><span id="d9ca" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-09T16:00:00.000Z"</span><span id="d41a" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="c002" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="ce27" class="mt mu iq mp b gy mz mw l mx my">"id": "6131d5351ef74bdaf301cdba",</span><span id="318f" class="mt mu iq mp b gy mz mw l mx my">"title": "second todo",</span><span id="383d" class="mt mu iq mp b gy mz mw l mx my">"detail": "second detail second detail second detail",</span><span id="512f" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-12T16:00:00.000Z"</span><span id="1aec" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="8030" class="mt mu iq mp b gy mz mw l mx my">]</span><span id="e7b9" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="65dd" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="17e6" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到它返回两个todos</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="9a24" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="0de2" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="cb3f" class="mt mu iq mp b gy mz mw l mx my">"getTodos": [</span><span id="13ff" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="f5e5" class="mt mu iq mp b gy mz mw l mx my">"id": "6131ce9079d2b4a8d9598bd0",</span><span id="846c" class="mt mu iq mp b gy mz mw l mx my">"title": "first todo",</span><span id="4b2c" class="mt mu iq mp b gy mz mw l mx my">"detail": "first detail first detail first detail",</span><span id="0edd" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-09T16:00:00.000Z"</span><span id="ab0d" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="278e" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="9470" class="mt mu iq mp b gy mz mw l mx my">"id": "6131d5351ef74bdaf301cdba",</span><span id="f3a7" class="mt mu iq mp b gy mz mw l mx my">"title": "second todo",</span><span id="dc38" class="mt mu iq mp b gy mz mw l mx my">"detail": "second detail second detail second detail",</span><span id="7218" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-12T16:00:00.000Z"</span><span id="1488" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="44bc" class="mt mu iq mp b gy mz mw l mx my">]</span><span id="37d4" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="5329" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="8f0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们执行以下命令</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="c89a" class="mt mu iq mp b gy mv mw l mx my">mutation{</span><span id="b6d5" class="mt mu iq mp b gy mz mw l mx my">deleteTodo(id:"6131ce9079d2b4a8d9598bd0")</span><span id="8c0a" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="788b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会回来的</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="fc02" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="56d3" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="75a1" class="mt mu iq mp b gy mz mw l mx my">"deleteTodo": "The todo is deleted"</span><span id="80d0" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="fad0" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="dfb7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们再次执行getTodos，它现在只有一个todo。</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="08ad" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="6d81" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="1ac2" class="mt mu iq mp b gy mz mw l mx my">"getTodos": [</span><span id="076a" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="d632" class="mt mu iq mp b gy mz mw l mx my">"id": "6131d5351ef74bdaf301cdba",</span><span id="f088" class="mt mu iq mp b gy mz mw l mx my">"title": "second todo",</span><span id="49c5" class="mt mu iq mp b gy mz mw l mx my">"detail": "second detail second detail second detail",</span><span id="de0b" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-12T16:00:00.000Z"</span><span id="a9f7" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="63bc" class="mt mu iq mp b gy mz mw l mx my">]</span><span id="a6e0" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="a7e7" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><h2 id="8ba1" class="mt mu iq bd nd ne nf dn ng nh ni dp nj ko nk nl nm ks nn no np kw nq nr ns nt bi translated">更新待办事项</h2><p id="b8c8" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">为了更新todo，我们不仅需要id，还需要其他属性，如标题、细节和日期。</p><p id="c8ee" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">typeDefs.js内部</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="65a0" class="mt mu iq mp b gy mv mw l mx my">type Mutation{</span><span id="3934" class="mt mu iq mp b gy mz mw l mx my">addTodo(title:String, detail:String,date:Date):Todo</span><span id="76d1" class="mt mu iq mp b gy mz mw l mx my">deleteTodo(id:ID):String</span><span id="cd21" class="mt mu iq mp b gy mz mw l mx my">updateTodo(id:String,title:String,detail:String,date:Date):Todo</span><span id="0cf1" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="4c16" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回到resolvers.js，我们从参数中获得id、标题、细节和日期。然后，我们创建一个更新的todo对象，该对象已准备好将值传递给它。</p><p id="9926" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们检查是否有未定义的值，这意味着用户没有输入新值。那我们就用原来的值。</p><p id="cb75" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">获得所有值后，我们将使用提供的id找到todo，并用最新的值进行更新。</p><p id="39be" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">resolvers.js内部</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="9ffd" class="mt mu iq mp b gy mv mw l mx my">Mutation: {</span><span id="9b5b" class="mt mu iq mp b gy mz mw l mx my">addTodo: async (root, args) =&gt; {</span><span id="7a22" class="mt mu iq mp b gy mz mw l mx my">const newTodo = new Todo({ title: args.title, detail: args.detail, date: args.date })</span><span id="9f97" class="mt mu iq mp b gy mz mw l mx my">await newTodo.save();</span><span id="aa6e" class="mt mu iq mp b gy mz mw l mx my">return newTodo;</span><span id="6a1f" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="2132" class="mt mu iq mp b gy mz mw l mx my">deleteTodo: async (root, args) =&gt; {</span><span id="fb3d" class="mt mu iq mp b gy mz mw l mx my">await Todo.findByIdAndDelete(args.id)</span><span id="4173" class="mt mu iq mp b gy mz mw l mx my">return "The todo is deleted"</span><span id="cb94" class="mt mu iq mp b gy mz mw l mx my">},</span><span id="2f55" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">updateTodo: async (root, args) =&gt; {</strong></span><span id="aacd" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">const { id, title, detail, date } = args;</strong></span><span id="7f18" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">const updatedTodo = {};</strong></span><span id="e6c5" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">if (title !== undefined) {</strong></span><span id="0485" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">updatedTodo.title = title</strong></span><span id="6d84" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="b6e5" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">if (detail !== undefined) {</strong></span><span id="690f" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">updatedTodo.detail = detail</strong></span><span id="a3c0" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="8e5a" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">if (date !== undefined) {</strong></span><span id="0029" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">updatedTodo.date = date</strong></span><span id="1aa7" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="633a" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">const todo = await Todo.findByIdAndUpdate(</strong></span><span id="dd9c" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">id,</strong></span><span id="9874" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">{ title, detail, date },</strong></span><span id="c248" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">{ new: true }</strong></span><span id="8d3b" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">)</strong></span><span id="6551" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">return todo;</strong></span><span id="2590" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">},</strong></span><span id="81b3" class="mt mu iq mp b gy mz mw l mx my"><strong class="mp ir">}</strong></span><span id="f853" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="6ce7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们在GraphQL UI中键入以下内容</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="ba4e" class="mt mu iq mp b gy mv mw l mx my">mutation{</span><span id="98ae" class="mt mu iq mp b gy mz mw l mx my">updateTodo(</span><span id="d2ff" class="mt mu iq mp b gy mz mw l mx my">id:"6131d5351ef74bdaf301cdba"</span><span id="df0b" class="mt mu iq mp b gy mz mw l mx my">,title:"This2 is a new titl22e2"</span><span id="98ac" class="mt mu iq mp b gy mz mw l mx my">){</span><span id="4b61" class="mt mu iq mp b gy mz mw l mx my">id</span><span id="13a6" class="mt mu iq mp b gy mz mw l mx my">title</span><span id="0dc5" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="c138" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="8464" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它会回来的</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="0839" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="58e7" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="4d5b" class="mt mu iq mp b gy mz mw l mx my">"updateTodo": {</span><span id="99fc" class="mt mu iq mp b gy mz mw l mx my">"id": "6131d5351ef74bdaf301cdba",</span><span id="3c21" class="mt mu iq mp b gy mz mw l mx my">"title": "This2 is a new titl22e2"</span><span id="dca3" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="e239" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="bbf7" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="0171" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们再次运行getTodos查询</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="4676" class="mt mu iq mp b gy mv mw l mx my">query{</span><span id="7306" class="mt mu iq mp b gy mz mw l mx my">getTodos{</span><span id="1bfb" class="mt mu iq mp b gy mz mw l mx my">id</span><span id="7251" class="mt mu iq mp b gy mz mw l mx my">title</span><span id="b7ec" class="mt mu iq mp b gy mz mw l mx my">detail</span><span id="c9de" class="mt mu iq mp b gy mz mw l mx my">date</span><span id="5e59" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="55cb" class="mt mu iq mp b gy mz mw l mx my">}</span></pre><p id="df5c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到标题已更新</p><pre class="ld le lf lg gt mo mp mq mr aw ms bi"><span id="725a" class="mt mu iq mp b gy mv mw l mx my">{</span><span id="897d" class="mt mu iq mp b gy mz mw l mx my">"data": {</span><span id="a07b" class="mt mu iq mp b gy mz mw l mx my">"getTodos": [</span><span id="8f1d" class="mt mu iq mp b gy mz mw l mx my">{</span><span id="4473" class="mt mu iq mp b gy mz mw l mx my">"id": "6131d5351ef74bdaf301cdba",</span><span id="5cb9" class="mt mu iq mp b gy mz mw l mx my">"title": "This2 is a new titl22e2",</span><span id="50d5" class="mt mu iq mp b gy mz mw l mx my">"detail": "second detail second detail second detail",</span><span id="e65e" class="mt mu iq mp b gy mz mw l mx my">"date": "2021-09-12T16:00:00.000Z"</span><span id="c887" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="2404" class="mt mu iq mp b gy mz mw l mx my">]</span><span id="68c6" class="mt mu iq mp b gy mz mw l mx my">}</span><span id="cdc1" class="mt mu iq mp b gy mz mw l mx my">}</span></pre></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="b482" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你喜欢这个故事，你可能也喜欢中等会员。一个月才5美元(一杯咖啡的价格！)但是它会在支持你最喜欢的作家的同时，给你无限的接触故事的机会。如果你用<a class="ae lb" href="https://ckmobile.medium.com/membership" rel="noopener">这个链接</a>注册，我会赚一小笔佣金。谢谢！</p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><h1 id="22fd" class="oh mu iq bd nd oi oj ok ng ol om on nj jw oo jx nm jz op ka np kc oq kd ns or bi translated">关注我们:<a class="ae lb" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae lb" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae lb" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae lb" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae lb" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae lb" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae lb" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad </a>，<a class="ae lb" href="https://ckmobile.quora.com/" rel="noopener ugc nofollow" target="_blank"> Quora </a>，<a class="ae lb" href="https://t.me/ckmobi" rel="noopener ugc nofollow" target="_blank"> Telegram </a></h1><p id="6b57" class="pw-post-body-paragraph kf kg iq kh b ki nu jr kk kl nv ju kn ko nw kq kr ks nx ku kv kw ny ky kz la ij bi translated">加入分支机构赚钱</p><p id="7bce" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lb" href="https://ckmobile.gumroad.com/affiliates" rel="noopener ugc nofollow" target="_blank">https://ckmobile.gumroad.com/affiliates</a></p><p id="5239" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="os">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="os">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
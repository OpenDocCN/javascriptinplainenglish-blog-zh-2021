<html>
<head>
<title>How to Build Image Size Validation using Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用普通JavaScript构建图像大小验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-image-size-validation-using-vanilla-js-da1fc6b258b?source=collection_archive---------10-----------------------#2021-07-28">https://javascript.plainenglish.io/how-to-build-image-size-validation-using-vanilla-js-da1fc6b258b?source=collection_archive---------10-----------------------#2021-07-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3ab218b2decffeea69358189c2e763b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JvVh2zmVweR2-cKG"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@kobuagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">KOBU Agency</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7ff3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Web开发人员可以使用<strong class="kc io">普通JavaScript </strong> <em class="ky"> </em>来构建各种功能。使用普通JavaScript可以加快web编程的开发过程。这是因为不需要外部库和插件。例如，vanilla JS提供了可用于在网站上进行图像大小验证的方法。这些方法嵌入在JavaScript引擎中。在本文中，我将一步步向您展示如何使用普通的JavaScript来验证图像。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="c017" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第一步:</strong>创建一个文件夹，在里面创建三个文件。这些是<strong class="kc io"><em class="ky"/></strong><strong class="kc io"><em class="ky">styles . CSS</em></strong><em class="ky"/><strong class="kc io"><em class="ky">script . js</em></strong><em class="ky">。</em></p><p id="416d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤2: </strong>添加HTML样板代码，然后在&lt;标题&gt;标签之间添加图片上传标题。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="4568" class="lp lq in ll b gy lr ls l lt lu">&lt;!DOCTYPE <em class="ky">html</em>&gt;<br/>&lt;html <em class="ky">lang</em>="en"&gt;<br/>&lt;head&gt;<br/> &lt;meta <em class="ky">charset</em>="UTF-8"&gt;<br/> &lt;meta <em class="ky">http-equiv</em>="X-UA-Compatible" <em class="ky">content</em>="IE=edge"&gt;<br/> &lt;meta <em class="ky">name</em>="viewport" <em class="ky">content</em>="width=device-width, initial-scale=1.0"&gt;</span><span id="313e" class="lp lq in ll b gy lv ls l lt lu">&lt;title&gt;Image Upload&lt;/title&gt;</span><span id="3a66" class="lp lq in ll b gy lv ls l lt lu">&lt;/head&gt;</span><span id="6c6d" class="lp lq in ll b gy lv ls l lt lu">&lt;body&gt;&lt;/body&gt;</span><span id="8235" class="lp lq in ll b gy lv ls l lt lu">&lt;/html&gt;</span></pre><p id="d12c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第三步:</strong>将<em class="ky"> styles.css </em>文件和<em class="ky"> script.js </em>文件链接到<em class="ky">index.html的头部。</em></p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="1b1a" class="lp lq in ll b gy lr ls l lt lu">&lt;link <em class="ky">rel</em>="stylesheet" <em class="ky">href</em>="styles.css"&gt;<br/>&lt;script <em class="ky">src</em>="script.js"&gt;&lt;/script&gt;</span></pre><p id="ddb5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第四步:</strong>在<em class="ky">index.html的主体部分内创建一个带有名为container的类的<strong class="kc io"> <em class="ky"> div </em> </strong>标签。</em></p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="79de" class="lp lq in ll b gy lr ls l lt lu">&lt;body&gt;<br/>  &lt;div <em class="ky">class</em>="container"&gt;<br/>  &lt;/div&gt;<br/>&lt;/body&gt;</span></pre><p id="9d23" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第五步:</strong>添加<strong class="kc io"> <em class="ky">标签</em> </strong>，<strong class="kc io"> <em class="ky">输入</em> </strong>，<strong class="kc io"> <em class="ky"> span </em> </strong>标签在容器内。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="0d8c" class="lp lq in ll b gy lr ls l lt lu">&lt;body&gt;<br/> &lt;div <em class="ky">class</em>="container"&gt;<br/>  &lt;label <em class="ky">for</em>="imageuploadbutton" class="label"&gt;Upload Image Here&lt;/label&gt;<br/>  &lt;input  <em class="ky">type</em>="file" id="imageuploadbutton" &gt;<br/>  &lt;span class="validation-message" &gt;&lt;/span&gt;<br/> &lt;/div&gt;<br/>&lt;/body&gt;</span></pre><p id="544b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终的<strong class="kc io"><em class="ky">index.html</em></strong>文件应该是这样的</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="bf64" class="lp lq in ll b gy lr ls l lt lu">&lt;!DOCTYPE <em class="ky">html</em>&gt;<br/>&lt;html <em class="ky">lang</em>="en"&gt;<br/>&lt;head&gt;<br/> &lt;meta <em class="ky">charset</em>="UTF-8"&gt;<br/> &lt;meta <em class="ky">http-equiv</em>="X-UA-Compatible" <em class="ky">content</em>="IE=edge"&gt;<br/> &lt;meta <em class="ky">name</em>="viewport" <em class="ky">content</em>="width=device-width, initial-scale=1.0"&gt;</span><span id="361b" class="lp lq in ll b gy lv ls l lt lu">&lt;title&gt;Image Upload&lt;/title&gt;<br/>&lt;link <em class="ky">rel</em>="stylesheet" <em class="ky">href</em>="styles.css"&gt;<br/>&lt;script <em class="ky">src</em>="script.js"&gt;&lt;/script&gt;</span><span id="b07f" class="lp lq in ll b gy lv ls l lt lu">&lt;/head&gt;</span><span id="3c54" class="lp lq in ll b gy lv ls l lt lu">&lt;body&gt;<br/> &lt;div <em class="ky">class</em>="container"&gt;<br/>  &lt;label <em class="ky">for</em>="imageuploadbutton" class="label"&gt;Upload Image Here&lt;/label&gt;<br/>  &lt;input  <em class="ky">type</em>="file" id="imageuploadbutton" &gt;<br/>  &lt;span class="validation-message" &gt;&lt;/span&gt;<br/> &lt;/div&gt;<br/>&lt;/body&gt;</span><span id="7066" class="lp lq in ll b gy lv ls l lt lu">&lt;/html&gt;</span></pre><p id="5af7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第六步:</strong>在<strong class="kc io"> <em class="ky"> style.css </em> </strong>中，添加<em class="ky">容器</em>、<em class="ky">标签</em>和<em class="ky">验证-消息</em>类样式。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="d8ae" class="lp lq in ll b gy lr ls l lt lu"><em class="ky">.container</em>{<br/>   padding-left: 30px;<br/>   padding-right: 30px;<br/>   padding-top: 15px;<br/>   padding-bottom: 15px;<br/>   display: flex;<br/>   flex-direction: column;<br/>   align-items: center;</span><span id="6761" class="lp lq in ll b gy lv ls l lt lu">}</span><span id="7a7a" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">.label</em> {<br/>   color: navy;<br/>   font-size: larger;<br/>   font-weight: bold;<br/>}</span><span id="ca49" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">.validation-message</em>{<br/>   color: crimson;<br/>   font-size: smaller;<br/>   font-weight: normal;<br/>}</span></pre><p id="070b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第七步:</strong>现在在<strong class="kc io"> <em class="ky"> script.js </em> </strong>中创建两个名为input和span的变量。这些将保存HTML输入和span标签。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="c700" class="lp lq in ll b gy lr ls l lt lu"><em class="ky">let</em> input = document.querySelector('input');<br/><em class="ky">let</em> span = document.querySelector('span');</span></pre><p id="bec6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤8: </strong>在输入变量中创建一个事件监听器，它将响应文件上传。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="9bb0" class="lp lq in ll b gy lr ls l lt lu"><em class="ky">let</em> input = document.querySelector('input');</span><span id="9e2a" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">let</em> span = document.querySelector('span');</span><span id="0237" class="lp lq in ll b gy lv ls l lt lu">input.addEventListener('', () =&gt; {})</span></pre><p id="4415" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">第九步:</strong>在<strong class="kc io"><em class="ky">addevent listener</em></strong>return语句里面，创建一个名为<em class="ky"> files </em>的变量和一个if语句来检查<em class="ky"> files </em>变量的长度。该变量将保存任何上传的文件。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="6ea9" class="lp lq in ll b gy lr ls l lt lu">input.addEventListener('change', () =&gt; {</span><span id="d44c" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">let</em> files = input.files;</span><span id="e84e" class="lp lq in ll b gy lv ls l lt lu">if (files.length &gt; 0) {}</span><span id="a199" class="lp lq in ll b gy lv ls l lt lu">span.innerText = '';</span><span id="63ae" class="lp lq in ll b gy lv ls l lt lu">})</span></pre><p id="8fe4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤10: </strong>在if语句中，添加另一个将验证文件类型的if语句</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="a3b1" class="lp lq in ll b gy lr ls l lt lu">input.addEventListener('change', () =&gt; {</span><span id="1eef" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">let</em> files = input.files;</span><span id="0153" class="lp lq in ll b gy lv ls l lt lu">if (files.length &gt; 0) {</span><span id="56f3" class="lp lq in ll b gy lv ls l lt lu">  if (files[0].type != 'jpeg' || files[0].type != 'png' ) {<br/>   span.innerText = 'File Type must be jpeg or png';<br/>   return;<br/>  }</span><span id="4c31" class="lp lq in ll b gy lv ls l lt lu">}</span><span id="d2e6" class="lp lq in ll b gy lv ls l lt lu">span.innerText = '';</span><span id="ce52" class="lp lq in ll b gy lv ls l lt lu">})</span></pre><p id="f2b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">步骤11: </strong>接下来添加另一个if语句，该语句现在将验证图像大小</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="4d08" class="lp lq in ll b gy lr ls l lt lu">input.addEventListener('change', () =&gt; {</span><span id="3db8" class="lp lq in ll b gy lv ls l lt lu"><em class="ky">let</em> files = input.files;</span><span id="7d80" class="lp lq in ll b gy lv ls l lt lu">if (files.length &gt; 0) {</span><span id="deb0" class="lp lq in ll b gy lv ls l lt lu">  if (files[0].type != 'jpeg' || files[0].type != 'png' ) {<br/>   span.innerText = 'File Type must be jpeg or png';<br/>   return;<br/>  }</span><span id="a9d8" class="lp lq in ll b gy lv ls l lt lu">  if (files[0].size &gt; 500 * 1024) {<br/>   span.innerText = 'File Size Exceeds 500kb';<br/>   return;<br/>  }<br/>}</span><span id="6388" class="lp lq in ll b gy lv ls l lt lu">span.innerText = '';</span><span id="7484" class="lp lq in ll b gy lv ls l lt lu">})</span></pre><p id="d168" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最终的<strong class="kc io"> <em class="ky"> script.js </em> </strong>文件应该是这样的。</p><pre class="lg lh li lj gt lk ll lm ln aw lo bi"><span id="00ea" class="lp lq in ll b gy lr ls l lt lu"><em class="ky">let</em> input = document.querySelector('input');<br/><em class="ky">let</em> span = document.querySelector('span');</span><span id="2483" class="lp lq in ll b gy lv ls l lt lu">input.addEventListener('change', () =&gt; {<br/> <em class="ky">let</em> files = input.files;<br/>  if (files.length &gt; 0) {<br/>   if (files[0].type != 'jpeg' || files[0].type != 'png' )            {span.innerText = 'File Type must be jpeg or png';</span><span id="7ae8" class="lp lq in ll b gy lv ls l lt lu">return;</span><span id="73bc" class="lp lq in ll b gy lv ls l lt lu">}</span><span id="b2f8" class="lp lq in ll b gy lv ls l lt lu"> if (files[0].size &gt; 500 * 1024) {</span><span id="f67c" class="lp lq in ll b gy lv ls l lt lu">   span.innerText = 'File Size Exceeds 500kb';</span><span id="f92b" class="lp lq in ll b gy lv ls l lt lu">   return;</span><span id="1947" class="lp lq in ll b gy lv ls l lt lu">}</span><span id="9d31" class="lp lq in ll b gy lv ls l lt lu">}</span><span id="24dc" class="lp lq in ll b gy lv ls l lt lu">span.innerText = '';</span><span id="f209" class="lp lq in ll b gy lv ls l lt lu">})</span></pre><p id="e1bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在浏览器中打开索引文件来运行一切。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h2 id="7e21" class="lp lq in bd lw lx ly dn lz ma mb dp mc kl md me mf kp mg mh mi kt mj mk ml mm bi translated"><strong class="ak">结论</strong></h2><p id="4604" class="pw-post-body-paragraph ka kb in kc b kd mn kf kg kh mo kj kk kl mp kn ko kp mq kr ks kt mr kv kw kx ig bi translated">现在我们有了。我希望你已经发现这是有用的。我会带着更多有趣的文章回来。感谢您的阅读。</p><p id="a5bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">去<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/API/File/Using_files_from_web_applications" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> Mozilla开发者</strong> </a> <strong class="kc io"> </strong>了解更多关于这个的信息。</p><p id="e94a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
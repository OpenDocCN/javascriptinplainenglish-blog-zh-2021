<html>
<head>
<title>How to Loop Through Each Item in a JavaScript FileList?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何遍历JavaScript文件列表中的每一项？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-loop-through-each-item-in-a-javascript-filelist-469c2634ae39?source=collection_archive---------7-----------------------#2021-08-19">https://javascript.plainenglish.io/how-to-loop-through-each-item-in-a-javascript-filelist-469c2634ae39?source=collection_archive---------7-----------------------#2021-08-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/dfb0cc1bc078a348b3478a3b4b5e4a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3jQ12LU7B_lNF37k"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@shutters_guild?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Travis Yewell</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0ff2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望遍历JavaScript文件列表中的每一项。</p><p id="8385" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何遍历JavaScript文件列表对象中的每一项。</p><h1 id="93dc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Array.from方法转换FileList对象，并使用Array.prototype.forEach方法</h1><p id="691b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">让我们遍历文件列表对象中的每一项的一种方法是用<code class="fe me mf mg mh b">Array.from</code>方法将其转换成一个数组。</p><p id="4267" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以对它使用<code class="fe me mf mg mh b">forEach</code>方法来遍历文件列表条目。</p><p id="db78" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下文件输入:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="38b9" class="mq lc iq mh b gy mr ms l mt mu">&lt;input type='file' multiple&gt;</span></pre><p id="2b8f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以获取输入并监听文件输入的更改事件，以在选定文件后获取选定的文件:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="fd10" class="mq lc iq mh b gy mr ms l mt mu">const input = document.querySelector('input');<br/>input.addEventListener('change', () =&gt; {<br/>  Array.from(input.files)<br/>    .forEach(file =&gt; {<br/>      console.log(file)<br/>    });<br/>})</span></pre><p id="c753" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">文件输入具有<code class="fe me mf mg mh b">multiple</code>属性，这样我们可以选择多个文件。</p><p id="c3df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">input</code>上的<code class="fe me mf mg mh b">addEventListener</code>来向它添加一个变更监听器。</p><p id="5ebe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe me mf mg mh b">Array.from</code>方法将<code class="fe me mf mg mh b">input.files</code>文件列表转换为包含所选文件的数组。</p><p id="0263" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">input.files</code>是包含所选文件的文件列表对象。</p><p id="92f5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以调用<code class="fe me mf mg mh b">forEach</code>方法来遍历每个文件。</p><h1 id="99c3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用Spread运算符转换FileList对象，并使用Array.prototype.forEach方法</h1><p id="d1bb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">将文件列表对象转换为数组的另一种方法是使用spread运算符。</p><p id="5560" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是可行的，因为文件列表是一个可迭代的对象。</p><p id="d5ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a2ca" class="mq lc iq mh b gy mr ms l mt mu">const input = document.querySelector('input');<br/>input.addEventListener('change', () =&gt; {<br/>  [...input.files]<br/>  .forEach(file =&gt; {<br/>    console.log(file)<br/>  });<br/>})</span></pre><p id="4f30" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe me mf mg mh b">input.files</code>条目分散到一个数组中。</p><p id="da59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以像以前一样在上面调用<code class="fe me mf mg mh b">forEach</code>。</p><h1 id="3f84" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用for-of循环</h1><p id="c7af" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">因为文件列表对象是一个iterable对象，所以我们也可以对它使用for-of循环来遍历每个文件列表条目。</p><p id="1db4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c4ab" class="mq lc iq mh b gy mr ms l mt mu">const input = document.querySelector('input');<br/>input.addEventListener('change', () =&gt; {<br/>  for (const file of input.files) {<br/>    console.log(file)<br/>  }<br/>})</span></pre><p id="802b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用for-of循环遍历<code class="fe me mf mg mh b">input.files</code>的每个条目。</p><h1 id="e860" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1cc0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将文件列表对象转换成一个数组，并使用<code class="fe me mf mg mh b">forEach</code>方法或使用for-of循环遍历文件列表中的每一项。</p><p id="a765" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create a Gitlab Merge Request Using Just One Command</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何仅使用一个命令创建Gitlab合并请求</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-gitlab-merge-request-using-one-command-a57d857ea94c?source=collection_archive---------4-----------------------#2021-04-03">https://javascript.plainenglish.io/how-to-create-gitlab-merge-request-using-one-command-a57d857ea94c?source=collection_archive---------4-----------------------#2021-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c18d0043258051d88f1e69c667b78cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c1wyW181d8jRLbvv"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@oskaryil?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Oskar Yildiz</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="9266" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">介绍</h1><p id="b87d" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">故事开始于一个开发人员开始对开发工作流感到厌烦和厌倦，并尽最大努力至少改进工作流的一个部分，并感到更有生产力。</p><p id="142e" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">如果你厌倦了使用Gitlab网站创建合并请求，你想以一种更快更简单的方式来做，那么这篇文章可能就是你正在寻找的。事不宜迟，我们开始吧。</p><h1 id="20ab" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">逐步指南</h1><p id="e908" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">在我们深入研究分步指南之前，让我们先定义一下我们希望实现的结果。</p><h1 id="a58e" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结果</h1><p id="c2a3" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">这是我们希望的最终结果。</p><ul class=""><li id="0712" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><strong class="ld ir">使用一行命令创建合并请求。</strong></li></ul><h1 id="bc7e" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">将任务分成更小的部分</h1><ul class=""><li id="1548" class="me mf iq ld b le lf li lj lm mn lq mo lu mp ly mj mk ml mm bi translated">将当前本地分支推至远程。</li><li id="dcd3" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">为此本地分支创建合并请求。</li><li id="ef0c" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">将合并请求目标设置为主分支。</li><li id="aa26" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">合并后必须删除源分支。(删除源分支)。</li></ul><p id="05f0" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">事实上，Gitlab提供了push选项，使用一个命令就可以做到这一点。你可以参考完整的文档<a class="ae kc" href="https://docs.gitlab.com/ee/user/project/push_options.html" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><ul class=""><li id="d5b3" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">推送选项— <code class="fe mv mw mx my b">merge_request.create</code>允许我们创建合并请求。</li><li id="13e5" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">推送选项— <code class="fe mv mw mx my b">merge_request.target=master</code>允许我们将合并请求的目标分支设置为主分支。</li><li id="d4eb" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">推送选项— <code class="fe mv mw mx my b">merge_request.remove_source_branch</code>允许我们在合并请求被合并时设置移除源分支。</li></ul><p id="f690" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">在我们理解了每个选项的作用之后，下面是完整的命令:</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="7364" class="nh ke iq my b gy ni nj l nk nl"># Here will be the format of the command line</span><span id="98bb" class="nh ke iq my b gy nm nj l nk nl">git push -o merge_request.create -o merge_request.target=master -o merge_request.remove_source_branch $upstream_remote_name $local_branch_name</span><span id="9376" class="nh ke iq my b gy nm nj l nk nl"># Sample run command</span><span id="eb72" class="nh ke iq my b gy nm nj l nk nl">git push -o merge_request.create -o merge_request.target=master -o merge_request.remove_source_branch origin feature/payment-integration</span></pre><h1 id="0e46" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">优化命令</h1><p id="486c" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我们已经取得了我们想要的结果。但是，写上面这个长命令可能比在Gitlab网站上创建合并请求还要糟糕(我个人的感觉)。</p><p id="6661" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">幸运的是，我们可以使用Git alias使它变得更好、更短。下面是我如何在我的<code class="fe mv mw mx my b">.gitconfig</code>文件中定义我的Git别名。</p><pre class="mz na nb nc gt nd my ne nf aw ng bi"><span id="0596" class="nh ke iq my b gy ni nj l nk nl">[alias]<br/>  bn = "!git rev-parse --abbrev-ref HEAD"<br/>  <br/>  mrtd = "!git push -o merge_request.create -o merge_request.target=development -o merge_request.remove_source_branch origin $(git bn)"</span><span id="1f59" class="nh ke iq my b gy nm nj l nk nl">  mrts = "!git push -o merge_request.create -o merge_request.target=staging -o merge_request.remove_source_branch origin $(git bn)"</span><span id="6d3e" class="nh ke iq my b gy nm nj l nk nl">  mrtp = "!git push -o merge_request.create -o merge_request.target=master -o merge_request.remove_source_branch origin $(git bn)"</span></pre><p id="9907" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我有4个Git别名:</p><ul class=""><li id="d032" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><strong class="ld ir"> bn </strong>:打印当前分行名称</li><li id="e445" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated"><strong class="ld ir"> mtrd </strong>(合并开发请求):这为我们必须输入的长命令创建了一个别名，该命令创建了一个从当前分支到开发分支的合并请求。</li></ul><p id="4dea" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">简而言之，这个长命令已经简化为:</p><p id="3ee4" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><code class="fe mv mw mx my b">git push -o merge_request.create -o merge_request.target=master -o merge_request.remove_source_branch origin feature/payment-integration</code></p><p id="f923" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">对此:</p><ul class=""><li id="9ae6" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated"><code class="fe mv mw mx my b">git mrtd</code>:创建合并请求到开发分支。</li><li id="cf8c" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated"><code class="fe mv mw mx my b">git mrts</code>:创建对暂存分支的合并请求。</li><li id="5f70" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated"><code class="fe mv mw mx my b">git mrtp</code>:创建生产分支的合并请求。</li></ul><h1 id="9099" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="ee19" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">我个人非常喜欢这样的结果，因为它节省了我创建合并请求的大量时间。你每天节省的一点点时间累积起来，在你的整个职业生涯中会节省大量的时间。</p><p id="5b25" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated">我希望你喜欢这篇文章，我会在下一篇文章中看到你！</p><h1 id="97bb" class="kd ke iq bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">参考</h1><p id="3b28" class="pw-post-body-paragraph lb lc iq ld b le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly ij bi translated">本节总结了我在研究该主题时发现的资源:</p><ul class=""><li id="5f37" class="me mf iq ld b le lz li ma lm mg lq mh lu mi ly mj mk ml mm bi translated">Gitlab推送选项<a class="ae kc" href="https://docs.gitlab.com/ee/user/project/push_options.html" rel="noopener ugc nofollow" target="_blank">文档</a>。</li><li id="4dd0" class="me mf iq ld b le mq li mr lm ms lq mt lu mu ly mj mk ml mm bi translated">罗布·米勒的<a class="ae kc" href="https://gist.github.com/robmiller/6018582" rel="noopener ugc nofollow" target="_blank">Git config</a>——一些每天都在使用的有用的Git别名。</li></ul><blockquote class="nn no np"><p id="9740" class="lb lc nq ld b le lz lg lh li ma lk ll nr mb lo lp ns mc ls lt nt md lw lx ly ij bi translated">最初发表在我的<a class="ae kc" href="https://tekloon.dev/how-to-create-gitlab-merge-request-using-one-command" rel="noopener ugc nofollow" target="_blank">博客</a>上。</p></blockquote><p id="f959" class="pw-post-body-paragraph lb lc iq ld b le lz lg lh li ma lk ll lm mb lo lp lq mc ls lt lu md lw lx ly ij bi translated"><em class="nq">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nq">plain English . io</em></a></p></div></div>    
</body>
</html>
# å¦‚ä½•é¿å… JavaScript ä¸­çš„å¯¹è±¡çªå˜(ç§»é™¤å±æ€§)

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/how-to-avoid-object-mutation-in-javascript-removing-properties-df32a2debd3d?source=collection_archive---------12----------------------->

## å±•ç¤ºå¦‚ä½•åœ¨åˆ é™¤å±æ€§æ—¶é¿å… JavaScript ä¸­å¯¹è±¡å˜å¼‚çš„å¿«é€ŸæŒ‡å—&å…è´¹çš„ä¹”æ©Â·æ–¯å›¾å°”ç‰¹ Gifs å†ä¸€æ¬¡â€¦

![](img/bf839fb74720f34fafc7b42b37e7bd5a.png)

Photo by [Gary Chan](https://unsplash.com/@gary_at_unsplash?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

ä¸Šå‘¨ï¼Œæˆ‘æ·±å…¥æ¢è®¨äº† [JavaScript å¯¹è±¡ä»¥åŠå¦‚ä½•é¿å…å¯¹å®ƒä»¬è¿›è¡Œå˜å¼‚](/javascript-how-to-avoid-object-mutation-7cd733913a9f)çš„è¯é¢˜ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»ç¤¾åŒºä¸­å¾—åˆ°äº†ä¸€äº›å¾ˆå¥½çš„å›åº”ï¼Œæ‰€ä»¥æˆ‘æƒ³è·Ÿè¿›å…¶ä¸­çš„ä¸€äº›å›åº”ã€‚é¦–å…ˆï¼Œè°¢è°¢å¤§å®¶ï¼æˆ‘çœŸçš„å¾ˆæ„Ÿæ¿€ä½ ä»¬è¿™ä¹ˆå¤šäººæ„¿æ„å›åº”å’Œåˆ†äº«ä½ ä»¬çš„æƒ³æ³•ã€‚ç¬¬äºŒï¼Œä¸Šå‘¨æˆ‘åªæ¶‰åŠäº†è¿™ä¸ªä¸»é¢˜çš„ä¸€éƒ¨åˆ†ï¼Œå› ä¸ºæˆ‘å¿½ç•¥äº†å…³äºå¯¹è±¡å˜å¼‚çš„æŸä¸ªæ–¹é¢â€¦

## ç§»é™¤å±æ€§æ—¶å¦‚ä½•é¿å…å¯¹è±¡çªå˜

æˆ‘è®©ä½ å¤±æœ›äº†ã€‚æˆ‘å¾ˆæŠ±æ­‰ã€‚æˆ‘åªå‘æ‚¨å±•ç¤ºäº†å¦‚ä½•åœ¨æ·»åŠ å±æ€§æ—¶é¿å…å¯¹è±¡çªå˜ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³åˆ é™¤å±æ€§å‘¢ï¼Ÿè¿™å®é™…ä¸Šæ¯”ä½ æƒ³è±¡çš„è¦å®¹æ˜“ï¼Œè€Œä¸”ä½ å·²ç»åœ¨ä¸çŸ¥ä¸è§‰ä¸­å­¦ä¼šäº†å¦‚ä½•å»åšï¼

å¥½å§ã€‚è®©æˆ‘ä»¬ä»ä¸Šå‘¨çš„ç›¸åŒè®¾ç½®å¼€å§‹ã€‚

```
let character = {
    firstName: 'Captain',
    lastName: 'America'
}let avenger = character;character.lastName = 'Marvel';
```

ä½¿ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬æ”¹å˜äº†æˆ‘ä»¬çš„åŸå§‹å¯¹è±¡å­—ç¬¦ï¼Œå› ä¸ºä¸¤ä¸ªå˜é‡ï¼Œ`character`å’Œ`avenger,`å¼•ç”¨äº†åŒä¸€ä¸ªå¯¹è±¡ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬å¦‚ä½•åˆ›å»ºä¸€ä¸ªç”± avenger å˜é‡å¼•ç”¨çš„æ–°å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ é™¤å±æ€§å‘¢ï¼Ÿ

## 1.[å±•å¼€è¯­æ³•](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals)ä¸[å¯¹è±¡ææ„](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#object_destructuring)

æ²¡é”™ï¼Œæœ‹å‹ä»¬ï¼æˆ‘ä»¬æ‹¿å‡ºæˆ‘ä»¬é‚£ç¢—è¯­æ³•ä¸Šå«ç³–çš„å¥½ä¸œè¥¿ï¼Œå¼€å§‹æŠŠè¿™äº›ä¸œè¥¿å±•å¼€ï¼Œä½†æ˜¯å¤šåŠ äº†ä¸€ç‚¹ç³–ã€‚è¿™ä¸æˆ‘ä»¬ä¹‹å‰æ‰€åšçš„å¹¶æ²¡æœ‰å¤ªå¤§çš„ä¸åŒï¼Œåªæ˜¯ç°åœ¨æˆ‘ä»¬å°†é€šè¿‡ç»“åˆ spread æ“ä½œç¬¦å’Œ object destructuring æ¥åˆ é™¤æˆ‘ä»¬ä¸æƒ³åŒ…å«åœ¨æ–°å¯¹è±¡ä¸­çš„å±æ€§ã€‚

```
let character = {
    firstName: 'Captain',
    lastName: 'America'
};let { lastName, ...avenger } = character;avenger.lastName = 'Marvel';
```

å°±æ˜¯è¿™æ ·ã€‚æˆ‘ä»¬å‚¨å­˜åœ¨è§’è‰²ä¸­çš„ç‰©å“å®Œå¥½æ— æŸï¼Œæˆ‘ä»¬ç»§ç»­æ„‰å¿«åœ°å®Œæˆå‚¨å­˜åœ¨å¤ä»‡è€…ä¸­çš„ç‰©å“ã€‚

è¿™ç§ä½¿ç”¨ spread è¯­æ³•çš„æ–¹å¼ä¸æˆ‘ä»¬åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­ä½¿ç”¨çš„æ–¹å¼ä¹‹é—´çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œåœ¨æˆ‘ä»¬è®¾ç½®`avenger.lastName = â€˜Marvelâ€™;`çš„å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬çš„æ–°å¯¹è±¡æ˜¯ä»€ä¹ˆæ ·å­çš„ã€‚è¯·å‚è§ä¸‹é¢çš„å·®å¼‚:

```
let character = {
    firstName: 'Captain',
    lastName: 'America'
};let avenger = { ...character };
let { lastName, ...avenger2 } = character;console.log(avenger);
console.log(avenger2);// { firstName: 'Captain', lastName: 'America' }// { firstName: 'Captain' }
```

åœ¨æˆ‘ä¹‹å‰çš„åšå®¢ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ spread è¯­æ³•`let avenger = { â€¦character };`ç›´æ¥å¤åˆ¶äº†æ•´ä¸ªå¯¹è±¡ã€‚é€šè¿‡å¯¹è±¡ææ„ï¼Œæˆ‘ä»¬ç§»é™¤äº†`lastName`å±æ€§ï¼Œå¹¶å¤åˆ¶äº†åœ¨å˜é‡`character`ä¸­å¼•ç”¨çš„å¯¹è±¡çš„å‰©ä½™éƒ¨åˆ†ï¼Œå°†å…¶å­˜å‚¨åœ¨å˜é‡`avenger2`ä¸­ã€‚æˆ‘ä¸ç¡®å®šå…¶ä¸­ä¸€ç§ä¸€å®šæ¯”å¦ä¸€ç§æ›´å¥½ï¼Œä½†æ˜¯ä¸¤ç§æ–¹å¼éƒ½å®Œæˆäº†æˆ‘ä»¬æƒ³è¦åšçš„äº‹æƒ…ã€‚

## 2.æ²¡æœ‰ 2ï¼

æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œæ²¡æœ‰ 2 æœ‰ç‚¹è¯¯å¯¼ã€‚åœ¨è¿™ä¸ªåšå®¢ç³»åˆ—ä¸­ï¼Œæˆ‘å¸Œæœ›åœ¨æ²¡æœ‰åº“å¸®åŠ©çš„æƒ…å†µä¸‹ï¼Œä¸¥æ ¼ä½¿ç”¨æ™®é€šçš„ JavaScriptã€‚ç„¶è€Œï¼Œå½“æˆ‘ç ”ç©¶æ˜¯å¦æœ‰å…¶ä»–æˆ‘ä¸çŸ¥é“çš„æ–¹æ³•æ—¶ï¼Œæˆ‘å¶ç„¶å‘ç°äº†å‡ ä¸ª [å¼•ç”¨](https://stackoverflow.com/questions/33053310/remove-value-from-object-without-mutation)åˆ° [Lodash çš„åº“](https://lodash.com/)ã€‚æ‚¨å¯ä»¥åŒæ—¶ä½¿ç”¨`[_.omit](https://lodash.com/docs/4.17.15#omit)` & `[_.pick](https://lodash.com/docs/4.17.15#pick)`ä¸¤ç§æ–¹æ³•æ¥è¾¾åˆ°æƒ³è¦çš„æ•ˆæœã€‚æˆ‘ä¸ä¼šåœ¨è¿™ä¸ªåšå®¢ä¸­æ¶‰åŠ Lodashï¼Œä½†æˆ‘æƒ³ç»™ä½ ä¸€ä¸ªå‚è€ƒã€‚

## ç»“è®º

å°±æ˜¯è¿™æ ·ï¼Œæœ‹å‹ä»¬ï¼å†æ¬¡æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰åœ¨ä¸Šä¸€ç¯‡åšå®¢ä¸­æåˆ°è¿™ä¸ªã€‚æˆ‘å¸Œæœ›è¿™å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæˆ‘é¼“åŠ±ä½ ç»ƒä¹ æ‰€æœ‰è¿™äº›ä¸åŒçš„æ–¹æ³•æ¥å·©å›ºè¿™äº› JS æŠ€èƒ½ã€‚ä¸‹æ¬¡è§ï¼

å¿«ä¹ç¼–ç ğŸ¤“
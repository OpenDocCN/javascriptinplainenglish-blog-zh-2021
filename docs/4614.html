<html>
<head>
<title>Yes, JavaScript Classes are Real Classes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">是的，JavaScript类是真正的类</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/yes-javascript-classes-are-real-classes-a87906b6b512?source=collection_archive---------14-----------------------#2021-09-14">https://javascript.plainenglish.io/yes-javascript-classes-are-real-classes-a87906b6b512?source=collection_archive---------14-----------------------#2021-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7bea1ba7c7300b4c12c5e3f7791f8c99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3BqUnIdn7pQ1A8ORwl07Nw.png"/></div></div></figure><p id="0e75" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你听说过像这样的争论吗？</p><p id="6105" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">JavaScript中没有所谓的“类”, JavaScript也不支持经典继承。JavaScript被迫以各种方式偏离现代OOP的类概念(即Java类)，因为它的类语法是建立在原型继承之上的。这可能会导致新手和经验丰富的开发人员出现奇怪和混乱的行为。最好不要使用类语法，而是接受JavaScript的原型性质。</p><p id="666a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这种听起来令人费解的论点的变体经常被传来传去，但只要稍加挖掘，你很快就会发现这种论点没有任何分量。所以让我们拿起铁锹开始工作吧！</p><h1 id="26e4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">JavaScript类是不是充满了古怪？</h1><p id="397c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><strong class="jx io">原论点:</strong><em class="kt">“JavaScript被迫以多种方式偏离现代OOP的类概念(意为Java类)，由于其类语法建立在原型继承之上的事实。这可能会给新手和经验丰富的开发人员带来奇怪和困惑的行为。”</em></p><p id="d951" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">实际上，这些偏差大部分与原型继承无关，而与JavaScript的动态本质有关。python语言提供了一个很好的有效性检测工具来对付这些类型的“奇怪的类行为”参数——如果一个反对JavaScript类的特定参数也适用于python类，那么这个参数一定没有太大的分量，否则，我们会看到python社区中的人拿着干草叉和尖桩到处跑，高呼“Python类去死吧！”。所以，让我们列出一些经常被引用的论点，看看它们与我们的有效性检测工具相比如何。</p><p id="668e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong>我打算让这个部分成为一个“活的”部分。我会继续更新它，以解决人们将来可能提出的问题。</p><h2 id="cb69" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">实例可以在运行时改变类</h2><p id="304c" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">在JavaScript中，可以使用<a class="ae mj" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf" rel="noopener ugc nofollow" target="_blank"> Object.setPrototypeOf() </a>在运行时切换原型。在Python中，通过修改__class__字段也可以做到这一点。如果不是Python中的问题，那就不可能是JavaScript中的“真正问题”。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="33b2" class="lx kv in mp b gy mt mu l mv mw">class Square:<br/>    width = 1<br/>    height = 1</span><span id="2331" class="lx kv in mp b gy mx mu l mv mw">class Circle:<br/>    r = 1</span><span id="24a4" class="lx kv in mp b gy mx mu l mv mw">my_square = Square()<br/>my_square.__class__ = Circle</span><span id="88bb" class="lx kv in mp b gy mx mu l mv mw">print(isinstance(my_square, Square)) # False<br/>print(isinstance(my_square, Circle)) # True<br/>print(my_square.r) # 1</span></pre><h2 id="e04c" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">一个类的方法可以在声明后动态改变</h2><p id="bb67" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Python是一种非常动态的语言，所以它也支持这种行为。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="b49d" class="lx kv in mp b gy mt mu l mv mw">class Square:<br/>    width = 1<br/>    height = 1<br/>    def area():<br/>        return width * height</span><span id="8beb" class="lx kv in mp b gy mx mu l mv mw">my_square = Square()<br/>Square.area = lambda self: 5<br/>print(my_square.area()) # 5</span></pre><h2 id="fa80" class="lx kv in bd kw ly lz dn la ma mb dp le kg mc md li kk me mf lm ko mg mh lq mi bi translated">您可以实例化一个JavaScript类并接收一个完全不相关的实例</h2><p id="99ba" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">这是在讨论一个事实，即JavaScript构造函数能够返回一个不是构造类的实例的值。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="6e38" class="lx kv in mp b gy mt mu l mv mw">class Square {<br/>  constructor() {<br/>    return { x: 2 }<br/>  }<br/>}</span><span id="f27b" class="lx kv in mp b gy mx mu l mv mw">const mySquare = new Square()<br/>console.log(mySquare) // { x: 2 }<br/>console.log(mySquare instanceof Square) // false</span></pre><p id="d43c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这也可以在Python中完成。</p><pre class="mk ml mm mn gt mo mp mq mr aw ms bi"><span id="a3f7" class="lx kv in mp b gy mt mu l mv mw">class Square:<br/>    def __new__(*args):<br/>        return {'x': 2}</span><span id="952d" class="lx kv in mp b gy mx mu l mv mw">my_square = Square()<br/>print(my_square) # {'x': 2}<br/>print(isinstance(my_square, Square)) # False</span></pre><h1 id="020d" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">JavaScript有类和经典继承吗？</h1><p id="73be" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><strong class="jx io">原论点:</strong>“<em class="kt">JavaScript中没有所谓的“类”，JavaScript也不支持古典继承。”</em></p><p id="89b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">虽然类语法的确主要是原型的语法糖，但这本身并不能成为JavaScript没有类的令人信服的理由。毕竟，C++整体上不就是汇编/二进制的语法糖吗？有人可能会说，C++没有真正的函数，因为它只是标签和gotos的糖衣——你甚至可以在运行时做一些花哨的内存把戏，拉开窗帘，揭示函数如何运行的真相，因为，嗯，它是C++，它可以让你做任何事情。也可以说Python类不是真实的，它们只是内置type()函数的语法糖(尽管没人这么说)。用Python的类语法可以做的任何事情也可以用type函数动态地完成，然而，我们说Python有类。</p><p id="55d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">那么JavaScript有类吗？JavaScript支持经典继承吗？答案是绝对的<strong class="jx io">是的！只需要一点糖就能赋予一种语言特色。</strong></p><h1 id="9ad8" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">应该避免JavaScript类吗？</h1><p id="17d5" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><strong class="jx io">原始论点:</strong> <em class="kt">“最好不要使用类语法，而是拥抱JavaScript的原型本质。”</em></p><p id="bd97" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">是否要使用类语法取决于您。人们有正当的理由希望避免它。例如，您可能会发现继承已经是一个足够复杂的主题，拥有一种具有两种继承形式(经典和原型)的语言实在是太多了——最好保持简单，将一切都视为原型。或者，也许你不知道为什么你不喜欢类的语法，或者为什么你喜欢原型——很难精确地指出偏好背后的确切原因。如果这种“类是奇怪的，因为它们是建立在原型继承基础上的”理论一直被搁置，我不会感到惊讶，因为人们不确定他们不喜欢类语法的什么，这是一个容易指责的目标。</p><p id="709f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果说我学到了什么的话，学习和发展你自己观点的最好方法是就这些事情进行对话，特别是与那些持相反观点的人，所以请随意在评论中开始讨论(只是，请尊重)。</p></div><div class="ab cl my mz hr na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ig ih ii ij ik"><p id="12aa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不说这些:如果我收到一些评论，谈论如何简单地添加类语法以使JavaScript成为一种“成熟”的语言，或者因为它想看起来更面向对象，我不会感到惊讶。我将非常严厉地反对这个理论。这个论点是“反对团体只是盲目地遵循教条”论点的变体。这是一种非常有害的思想，它以伤害性的标签针对特定人群，比如“他们只是随大流”，或者“他们没有一个好的信仰理由”。这真的就像一个孩子感到沮丧，大喊“你就是不明白”，然后走开——这种行为永远不会帮助任何人学到任何东西。如果你不认为类语法是一个好的补充，那很好，告诉我为什么它不适合JavaScript，给我实际的论据！不要只是说语言设计者不知道他们在做什么——这不是反对功能本身，而是反对功能背后的原因，这是一个非常无用的、破坏性的论点(也是一个逻辑谬误)。</p></div><div class="ab cl my mz hr na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ig ih ii ij ik"><p id="d15e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">延伸阅读</strong></p><ul class=""><li id="eacd" class="nf ng in jx b jy jz kc kd kg nh kk ni ko nj ks nk nl nm nn bi translated"><a class="ae mj" href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/this%20%26%20object%20prototypes/ch4.md#javascript-classes" rel="noopener ugc nofollow" target="_blank">反对的观点</a>。他们的结论恰恰相反:“但是这意味着JavaScript实际上有类吗？简单明了:没有。”</li><li id="bc60" class="nf ng in jx b jy no kc np kg nq kk nr ko ns ks nk nl nm nn bi translated">一个(有点过时)<a class="ae mj" href="https://stackoverflow.com/questions/2752868/does-javascript-have-classes" rel="noopener ugc nofollow" target="_blank">关于“JavaScript有类吗”的StackOverflow问题</a>。</li><li id="a067" class="nf ng in jx b jy no kc np kg nq kk nr ko ns ks nk nl nm nn bi translated">我有一个<a class="ae mj" href="http://stupidpythonideas.blogspot.com/2015/12/prototype-inheritance-is-inheritance.html#:~:text=The%20only%20difference%20is%20that,but%20let's%20ignore%20that%20here." rel="noopener ugc nofollow" target="_blank">类似的观点</a>，也比较了Python类和Javascript类。</li><li id="dc03" class="nf ng in jx b jy no kc np kg nq kk nr ko ns ks nk nl nm nn bi translated">道格拉斯·克洛克福特—“精彩部分”<a class="ae mj" href="https://youtu.be/PSGEjv3Tqo0?t=1090" rel="noopener ugc nofollow" target="_blank">谈到</a>他完全否定了JavaScript类语法。</li></ul><p id="517b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">更多内容请看</em><a class="ae mj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
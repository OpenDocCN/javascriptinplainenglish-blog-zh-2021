<html>
<head>
<title>Let’s Deduce the Reduce Method in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们推导一下JavaScript中的Reduce方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-deduce-the-reduce-method-in-javascript-bdc828f368a2?source=collection_archive---------7-----------------------#2021-10-27">https://javascript.plainenglish.io/lets-deduce-the-reduce-method-in-javascript-bdc828f368a2?source=collection_archive---------7-----------------------#2021-10-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fa36d827ceebe101729f0051af277f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2dIXR94-NecFxfrc3g8eIg.png"/></div></div></figure><p id="6135" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我学习JavaScript已经两年了，很快就熟悉了几乎所有的技巧——函数<code class="fe kt ku kv kw b">map</code>、<code class="fe kt ku kv kw b">filter</code>、<code class="fe kt ku kv kw b">sort</code>等等。好吧，不撒谎，我在某些点上卡住了，但一些像样的解释在网络或YouTube上覆盖了这些主题，除了一件事——<code class="fe kt ku kv kw b">reduce</code>方法。</p><p id="02b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我想知道为什么没有人像JavaScript中的其他方法一样自信地谈论<code class="fe kt ku kv kw b">reduce</code>方法。这促使我深入研究它，弄清楚JavaScript中的reduce方法是什么、为什么以及如何使用的。在这4分钟的阅读之后，我向你保证的一件事是，你将更加自信地在你的代码中使用<code class="fe kt ku kv kw b">reduce</code>方法。</p><h2 id="4fa7" class="kx ky in bd kz la lb dn lc ld le dp lf kg lg lh li kk lj lk ll ko lm ln lo lp bi translated">那是什么呢？</h2><p id="1c87" class="pw-post-body-paragraph jv jw in jx b jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko lu kq kr ks ig bi translated">Mozilla文档将<code class="fe kt ku kv kw b">reduce</code>方法定义为，</p><blockquote class="lv lw lx"><p id="c893" class="jv jw ly jx b jy jz ka kb kc kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b"><strong class="jx io">reduce()</strong></code>方法在数组的每个元素上执行用户提供的“reducer”回调函数，并传入前一个元素的计算返回值。对数组的所有元素运行缩减器的最终结果是一个值”</p></blockquote><p id="fab1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">乍一看这似乎很可怕，但让我们用通俗的术语来简化它。这是我对它的定义。</p><blockquote class="lv lw lx"><p id="06cc" class="jv jw ly jx b jy jz ka kb kc kd ke kf lz kh ki kj ma kl km kn mb kp kq kr ks ig bi translated">"<strong class="jx io"> reduce() </strong>方法从左到右遍历数组，对于每个元素，在给定现有值和计算新值的方法的情况下，计算下一个值。现有值是第一次迭代的初始值和所有其他迭代的前一次迭代的结果。它返回最终迭代的值作为结果”</p></blockquote><p id="c1b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望这张更清晰。reduce方法的语法是，</p><pre class="mc md me mf gt mg kw mh mi aw mj bi"><span id="98f7" class="kx ky in kw b gy mk ml l mm mn">arr.reduce(<br/>   (accumulator, currentValue, index, array) =&gt; {}, // <strong class="kw io">callback function </strong><br/>   initialValue <br/>)</span></pre><p id="3529" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在您已经看到了语法，让我们进一步分解我对<code class="fe kt ku kv kw b">reduce</code>方法的定义。</p><ul class=""><li id="7315" class="mo mp in jx b jy jz kc kd kg mq kk mr ko ms ks mt mu mv mw bi translated">它将遍历数组中的所有元素，就像<code class="fe kt ku kv kw b">map</code>或<code class="fe kt ku kv kw b">filter</code>方法一样。</li><li id="abe1" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated">它将根据我们提供的方法为每次迭代计算一个值。同样，与<code class="fe kt ku kv kw b">map</code>或<code class="fe kt ku kv kw b">filter</code>方法相同。这个方法就是我们所说的<code class="fe kt ku kv kw b">callback</code>函数。</li><li id="a2c3" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated">对于每次迭代，我们将在<code class="fe kt ku kv kw b">callback</code>函数中获得前一次迭代的结果。这个结果将出现在回调函数的第一个参数中，即<code class="fe kt ku kv kw b">accumulator</code>。</li><li id="9244" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated">在第一次迭代的情况下，这个值将是我们作为第二个参数提供给<code class="fe kt ku kv kw b">reduce</code>方法的<code class="fe kt ku kv kw b">initialValue</code>。</li><li id="1039" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated">回调函数的第二个参数是数组的当前元素，这个迭代是针对这个元素的。这同样类似于我们在回调<code class="fe kt ku kv kw b">map</code>方法时得到的第一个参数。</li><li id="70cd" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated">最后一次迭代的结果就是我们从<code class="fe kt ku kv kw b">reduce</code>方法中得到的结果。这里需要注意的一点是<code class="fe kt ku kv kw b">reduce</code>返回一个单值。与<code class="fe kt ku kv kw b">map</code>或<code class="fe kt ku kv kw b">filter</code>方法不同，我们从JavaScript的<code class="fe kt ku kv kw b">reduce</code>方法中获取单个值。</li><li id="d3c7" class="mo mp in jx b jy mx kc my kg mz kk na ko nb ks mt mu mv mw bi translated"><code class="fe kt ku kv kw b">index</code>和<code class="fe kt ku kv kw b">array</code>是可选参数，其中索引是当前迭代元素的索引，就像<code class="fe kt ku kv kw b">map</code>函数一样，数组是我们使用<code class="fe kt ku kv kw b">reduce</code>方法的完整数组。</li></ul><p id="e8bf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">哇哦。这差不多就是JavaScript的<code class="fe kt ku kv kw b">reduce</code>方法。拍拍自己的背，你已经成功了。</p><p id="1e23" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在我们知道了<code class="fe kt ku kv kw b">reduce</code>方法是什么。让我们看看如何使用它来编写一个整洁干净的JavaScript代码。</p><h2 id="e553" class="kx ky in bd kz la lb dn lc ld le dp lf kg lg lh li kk lj lk ll ko lm ln lo lp bi translated">为什么减少？</h2><p id="c700" class="pw-post-body-paragraph jv jw in jx b jy lq ka kb kc lr ke kf kg ls ki kj kk lt km kn ko lu kq kr ks ig bi translated">利用我们对<code class="fe kt ku kv kw b">reduce</code>方法的了解，我们可以重构很多代码。让我们从一个简单的例子开始。假设我们需要找到一个数组中所有元素的和。在了解<code class="fe kt ku kv kw b">reduce</code>方法之前，我会这样做。</p><pre class="mc md me mf gt mg kw mh mi aw mj bi"><span id="59ab" class="kx ky in kw b gy mk ml l mm mn">const arr = [1,2,3,4,5];<br/>let sum = 0;<br/>for (let i = 0; i &lt; arr.length; i++) {<br/>     sum += arr[i]; <br/>} <br/>console.log(sum); // 15</span></pre><p id="6517" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但那看起来很幼稚。这看起来不像现代的JavaScript代码，它是一个<code class="fe kt ku kv kw b">for loop</code>。我现在是这样做的。</p><pre class="mc md me mf gt mg kw mh mi aw mj bi"><span id="81ce" class="kx ky in kw b gy mk ml l mm mn">const sum = [1,2,3,4,5].reduce((a,c)=&gt;a+c, 0);<br/>console.log(sum); // 15</span></pre><p id="430f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这看起来像JavaScript。另外，注意在<code class="fe kt ku kv kw b">for loop</code>代码中我们如何使用<code class="fe kt ku kv kw b">let</code>来表示变量<code class="fe kt ku kv kw b">sum</code>，但是在<code class="fe kt ku kv kw b">reduce</code>方法中，我们可以使用<code class="fe kt ku kv kw b">const</code>。</p><p id="0369" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们再简化一点。我们的回调函数是<code class="fe kt ku kv kw b">(a,c) =&gt; a+c</code>，非常简单。对于每一次迭代，我们将数组的当前元素<code class="fe kt ku kv kw b">c</code>与前一次迭代的结果<code class="fe kt ku kv kw b">a</code>相加。同样，我们的初始值是0，这仅仅是因为没有数的和是0。</p><p id="e078" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">好了，现在我知道了如何用reduce方法得到数组元素的和。让我们再向<code class="fe kt ku kv kw b">reduce</code>迈进一步，计算一个数组中所有元素的平均值。我不会告诉你这个问题的<code class="fe kt ku kv kw b">for loop</code>解决方案，因为你足够聪明，如果你一直呆到这里。让我们看看<code class="fe kt ku kv kw b">reduce</code>对此的解决方案。</p><pre class="mc md me mf gt mg kw mh mi aw mj bi"><span id="b283" class="kx ky in kw b gy mk ml l mm mn">[10,20,10,5,5].reduce((a,c,i) =&gt; {<br/>     a+=c;<br/>     if(i===4) return a/5; <br/>     else return a;<br/>}); // 10</span></pre><p id="fa99" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的例子中，我将当前元素添加到累加器中，然后检查这是否是最后一次迭代。如果是，我返回的是总和除以数组的大小。否则，我已经把钱还了。</p><p id="9aab" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你已经呆了这么久，给你一个临别提示。注意，在上面的例子中，我没有给我的方法<code class="fe kt ku kv kw b">reduce</code>赋予初始值。这是一个可选参数，如果没有提供<strong class="jx io">，数组的第一个元素将作为初始值，迭代从第二个元素开始</strong>。</p><p id="13e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这差不多就是JavaScript中的reduce方法。希望你今天学到了新东西。请务必查看这个空间，了解更多关于JavaScript的内容。</p><p id="0c04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ly">让你内心的极客赢！</em></p><p id="03ae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ly">更多内容请看</em><a class="ae nc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ly">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Next.js Firebase v9: Sign In with Google</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js Firebase v9:登录谷歌</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nextjs-firebase-v9-part-16-sign-in-with-google-a24310b080db?source=collection_archive---------6-----------------------#2021-10-25">https://javascript.plainenglish.io/nextjs-firebase-v9-part-16-sign-in-with-google-a24310b080db?source=collection_archive---------6-----------------------#2021-10-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="d776" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第16部分:使用GoogleAuthProvider登录</h2></div><p id="e50a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使应用程序能够使用Google帐户登录，我们需要返回到<strong class="kh ir"> firebase.js </strong>(配置文件)。从firebase auth导入<code class="fe lb lc ld le b">getAuth</code>、<code class="fe lb lc ld le b">GoogleAuthProvider</code>。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/57ec7b0749223da29d7807af83e4d858.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*asGeUTcUxJoGhA0G.png"/></div></figure><p id="e6d1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">观看<a class="ae ln" href="https://www.youtube.com/watch?v=Sdv3bw2rIuQ&amp;list=PLC5vixW_4xSKqwpgaPEcLj7O3SvUNqC9L" rel="noopener ugc nofollow" target="_blank">视频系列</a>和<a class="ae ln" href="https://www.udemy.com/course/complete-nextjs-firebase-firestore-course/?referralCode=50C342DE4DD73B4428F4" rel="noopener ugc nofollow" target="_blank">源代码</a></p></div><div class="ab cl lo lp hu lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ij ik il im in"><p id="93b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过使用<code class="fe lb lc ld le b">getAuth</code>创建常量auth，通过<code class="fe lb lc ld le b">GoogleAuthProvider</code>创建提供者。</p><pre class="lg lh li lj gt lv le lw lx aw ly bi"><span id="1054" class="lz ma iq le b gy mb mc l md me">// Import the functions you need from the SDKs you need</span><span id="a0bb" class="lz ma iq le b gy mf mc l md me">import { initializeApp } from "firebase/app";</span><span id="93ef" class="lz ma iq le b gy mf mc l md me">// TODO: Add SDKs for Firebase products that you want to use</span><span id="7a0c" class="lz ma iq le b gy mf mc l md me">// https://firebase.google.com/docs/web/setup#available-libraries</span><span id="2ae2" class="lz ma iq le b gy mf mc l md me">import { getFirestore } from "firebase/firestore";</span><span id="5c66" class="lz ma iq le b gy mf mc l md me"><strong class="le ir">import { getAuth, GoogleAuthProvider } from 'firebase/auth';</strong></span><span id="9b4f" class="lz ma iq le b gy mf mc l md me">const firebaseConfig = {</span><span id="89a1" class="lz ma iq le b gy mf mc l md me">apiKey: "",</span><span id="a432" class="lz ma iq le b gy mf mc l md me">authDomain: "",</span><span id="2a36" class="lz ma iq le b gy mf mc l md me">projectId: ",</span><span id="8754" class="lz ma iq le b gy mf mc l md me">storageBucket: "wm",</span><span id="706a" class="lz ma iq le b gy mf mc l md me">messagingSenderId: "",</span><span id="f50c" class="lz ma iq le b gy mf mc l md me">appId: ""</span><span id="540c" class="lz ma iq le b gy mf mc l md me">};</span><span id="4176" class="lz ma iq le b gy mf mc l md me">const app = initializeApp(firebaseConfig);</span><span id="4594" class="lz ma iq le b gy mf mc l md me">const db = getFirestore()</span><span id="5acb" class="lz ma iq le b gy mf mc l md me"><strong class="le ir">const auth = getAuth();</strong></span><span id="3f58" class="lz ma iq le b gy mf mc l md me"><strong class="le ir">const provider = new GoogleAuthProvider();</strong></span><span id="bb38" class="lz ma iq le b gy mf mc l md me">export { db, auth, provider}</span></pre><p id="ccd3" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">备注:</strong>记住，我们需要把auth和provider放在<code class="fe lb lc ld le b">intiializeApp</code>后面，否则，你会得到下面的错误。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi mg"><img src="../Images/ec61193784a07642669cfb741c710d74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bvo4A8DeYWXHy_dRBtlUVQ.png"/></div></div></figure><h2 id="a7de" class="lz ma iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">创建登录功能</h2><p id="f108" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">转到<strong class="kh ir"> login.js </strong>，从firebase auth导入<code class="fe lb lc ld le b">signInwithPopup</code>，从firebase配置文件导入<code class="fe lb lc ld le b">auth</code>和<code class="fe lb lc ld le b">provider</code>。</p><pre class="lg lh li lj gt lv le lw lx aw ly bi"><span id="ce57" class="lz ma iq le b gy mb mc l md me">import { signInWithPopup } from 'firebase/auth';</span><span id="3545" class="lz ma iq le b gy mf mc l md me">import { auth, provider } from '../firebase'</span></pre><p id="5cca" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建loginwithGoogle函数。</p><pre class="lg lh li lj gt lv le lw lx aw ly bi"><span id="16f3" class="lz ma iq le b gy mb mc l md me">&lt;Button</span><span id="e258" class="lz ma iq le b gy mf mc l md me">variant="contained"</span><span id="929e" class="lz ma iq le b gy mf mc l md me">startIcon={&lt;GoogleIcon /&gt;}</span><span id="677f" class="lz ma iq le b gy mf mc l md me">onClick={loginWithGoogle}</span><span id="3f7d" class="lz ma iq le b gy mf mc l md me">&gt;</span><span id="003b" class="lz ma iq le b gy mf mc l md me">Login with Google</span><span id="7adf" class="lz ma iq le b gy mf mc l md me">&lt;/Button&gt;</span></pre><h2 id="f3ef" class="lz ma iq bd ml mm mn dn mo mp mq dp mr ko ms mt mu ks mv mw mx kw my mz na nb bi translated">测试登录</h2><p id="f6ab" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated">现在我们可以尝试登录，看看令牌和用户是否出现。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="mh mi di mj bf mk"><div class="gh gi nh"><img src="../Images/21ee99c6efba0b18001fc42dc5d4895d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OdiAc_Uup_Mjn_mnjHYiQw.png"/></div></div></figure><p id="59f5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">您可以看到，我们在控制台获得了令牌和用户信息。</p><h1 id="78bd" class="ni ma iq bd ml nj nk nl mo nm nn no mr jw np jx mu jz nq ka mx kc nr kd na ns bi translated">关注我们:<a class="ae ln" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae ln" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae ln" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae ln" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae ln" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae ln" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae ln" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad </a></h1><p id="5d16" class="pw-post-body-paragraph kf kg iq kh b ki nc jr kk kl nd ju kn ko ne kq kr ks nf ku kv kw ng ky kz la ij bi translated"><em class="nt">更多内容请看</em><strong class="kh ir"><em class="nt"/></strong><a class="ae ln" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
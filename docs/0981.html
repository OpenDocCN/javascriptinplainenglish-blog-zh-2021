<html>
<head>
<title>How to Setup AWS Authentication for React Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何为React应用程序设置AWS身份验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-setup-aws-authentication-for-react-applications-8bbf03bb722?source=collection_archive---------12-----------------------#2021-03-01">https://javascript.plainenglish.io/how-to-setup-aws-authentication-for-react-applications-8bbf03bb722?source=collection_archive---------12-----------------------#2021-03-01</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="c3f3" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">简单但强大</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/e6c5206758a5b50412e06e6c6a60f1af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fFkW7axrq4f9F8mJqaaPRw.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@nicoli_?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Chepe Nicoli</a> on <a class="ae kw" href="https://unsplash.com/s/photos/lock?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d94f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">身份验证是任何现代web应用程序的首要方面之一，作为开发人员，您需要注意这一点。幸运的是，今天我们有这么多优秀的解决方案，其中之一就是<strong class="kz is"> AWS Amplify。</strong></p><p id="86e4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将使用这个服务来创建一个简单的React应用程序。我们的目标是</p><ul class=""><li id="aef7" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">在我们的机器上安装并配置<strong class="kz is"> Amplify CLI </strong></li><li id="9c6b" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">创建一个基本的React项目</li><li id="aa26" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">向其添加用户<strong class="kz is">认证</strong></li><li id="4e19" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated"><strong class="kz is">在云中部署</strong> it</li></ul><p id="951d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始吧。</p><h1 id="ae57" class="mh mi ir bd mj mk ml mm mn mo mp mq mr jx ms jy mt ka mu kb mv kd mw ke mx my bi translated">什么是AWS Amplify？</h1><p id="a92e" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">AWS Amplify是一项由AWS自己管理的服务。它负责现代应用程序的大部分常见功能，如<strong class="kz is"> Auth </strong>、<strong class="kz is"> Hosting </strong>、<strong class="kz is"> API </strong>等，这样您就可以专注于自己构建实际的产品。</p><h2 id="1b99" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第一步。在你的机器上安装放大器</h2><p id="dec1" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">运行以下命令在您的机器上安装amplify</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="aca3" class="ne mi ir nr b gz nv nw l nx ny">npm i -g <a class="ae kw" href="http://twitter.com/aws" rel="noopener ugc nofollow" target="_blank">@aws</a>-amplify/cli</span></pre><h2 id="61e4" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第二步。配置放大器</h2><p id="7b18" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">安装后，运行以下命令来配置amplify</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="a07d" class="ne mi ir nr b gz nv nw l nx ny">amplify configure</span></pre><p id="04cf" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这2个步骤只有一次。在这一步中，您将需要<code class="fe nz oa ob nr b">aws secret access key</code>和<code class="fe nz oa ob nr b">aws access key id</code>。这两者都可以在aws概要文件的IAM设置中找到。</p><h2 id="7aaf" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第三步。创建新的React项目</h2><p id="56aa" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">首先，为我们的目的创建一个全新的项目</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="e021" class="ne mi ir nr b gz nv nw l nx ny">npx create-react-app learning-amplify</span></pre><h2 id="fb0c" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第四步。为项目配置放大器</h2><p id="1fed" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">进入项目的根目录。</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="cd68" class="ne mi ir nr b gz nv nw l nx ny">cd learning-amplify</span></pre><p id="076f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后通过运行以下命令配置一个放大项目</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="c650" class="ne mi ir nr b gz nv nw l nx ny">amplify init</span></pre><p id="8661" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这将带你通过一个标准程序。大多数选项都可以保留为默认值。这里有一个例子</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oc"><img src="../Images/66c8f8ddc71fa8738cfa6d15b4208080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ml55VNjnwS9U2RAq4eyCYg.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">amplify init</figcaption></figure><p id="e885" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它将在你的项目中创建一个<code class="fe nz oa ob nr b">amplify</code>目录。别碰那个。</p><h2 id="f36a" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第五步。添加身份验证</h2><p id="6156" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">现在我们已经把这个项目认定为<code class="fe nz oa ob nr b">Amplify</code>项目。现在我们需要做的是向这个项目添加身份验证。</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="9049" class="ne mi ir nr b gz nv nw l nx ny">amplify add auth</span></pre><p id="9dbc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这一步中，您必须配置您希望您的用户如何登录。有很多选择</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj od"><img src="../Images/9ba5431352419734f5cc6b676921a201.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RW-l1CGO0o2UpxOBUzqcrw.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">authentication options</figcaption></figure><p id="c50b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">选择你想要的。我们现在选择<code class="fe nz oa ob nr b">Username</code>。</p><p id="6c9d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">将其他一切都保留为默认设置，您将在几分钟内完成设置。</p><h2 id="3dfc" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第六步。将一切都推至云端</h2><p id="196f" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">现在我们需要把我们的项目放到云上。为此，运行以下命令</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="6a77" class="ne mi ir nr b gz nv nw l nx ny">amplify push</span></pre><p id="6166" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这需要一些时间。但在那之后，你就万事俱备了。</p><h2 id="f7c4" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第七步。在项目中使用Amplify SDK</h2><p id="8735" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">它将处理我们所有的用户界面，并与aws同步。首先，安装它</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="d7a1" class="ne mi ir nr b gz nv nw l nx ny">yarn add <!-- -->aws-amplify </span></pre><p id="e5f9" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">您需要在根级别配置您的项目(在我们的例子中是<code class="fe nz oa ob nr b">index.js</code>文件)。在您的<code class="fe nz oa ob nr b">index.js</code>文件中添加以下3行代码</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="39f2" class="ne mi ir nr b gz nv nw l nx ny">import Amplify from "aws-amplify";<br/>import <strong class="nr is"><em class="oe">awsExports </em></strong>from "./aws-exports";<br/>Amplify.configure(<strong class="nr is"><em class="oe">awsExports</em></strong>);</span></pre><p id="a6b2" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">之后，我们的<code class="fe nz oa ob nr b">index.js</code>看起来会像这样</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="of og l"/></div></figure><p id="d3d0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们可以自己处理身份验证了。<a class="ae kw" href="https://aws-amplify.github.io/amplify-js/api/classes/authclass.html" rel="noopener ugc nofollow" target="_blank">这里的</a>是所有可用功能的文档。</p><h2 id="dee2" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第八步。让它变得更好</h2><p id="8195" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">有一个很棒的名为<code class="fe nz oa ob nr b">@aws-amplify/ui-react</code>的库，它自动为我们处理最常见的认证流程。它包括</p><ul class=""><li id="f5a4" class="lt lu ir kz b la lb ld le lg lv lk lw lo lx ls ly lz ma mb bi translated">签到</li><li id="b672" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">签名登记离开</li><li id="bea0" class="lt lu ir kz b la mc ld md lg me lk mf lo mg ls ly lz ma mb bi translated">重置密码</li></ul><p id="7f84" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">和许多其他事情。为了利用认证库，我们必须首先安装软件包</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="374c" class="ne mi ir nr b gz nv nw l nx ny">yarn add <!-- -->@aws-amplify/ui-react</span></pre><p id="0c81" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，在我们的<code class="fe nz oa ob nr b">App.js</code>中，我们需要导入一个高阶函数，并用它包装我们的<code class="fe nz oa ob nr b">App</code>组件。</p><p id="9dad" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">最后，它看起来会像这样。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="of og l"/></div></figure><p id="e136" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">注意，我们还为我们的应用程序添加了一个<code class="fe nz oa ob nr b">Signout</code>按钮。</p><h2 id="45f8" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第九步。运行应用程序</h2><p id="9e4c" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">现在像往常一样启动应用程序</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="1800" class="ne mi ir nr b gz nv nw l nx ny">yarn start</span></pre><p id="e5d8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">而且你会被Amplify Ui React提供的登录UI问候！</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj od"><img src="../Images/61485b5adfa01f9c68e72c8220e4f868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2eREJwql3AzOqKGK65fW8Q.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Amplify UI</figcaption></figure><p id="1f92" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这里，您可以创建一个新帐户，然后登录。</p><h2 id="49c5" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">第十步。发布您的应用</h2><p id="9ff5" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated">好极了。现在是时候与世界分享你的成就了。只需转到终端并运行以下命令。</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="450a" class="ne mi ir nr b gz nv nw l nx ny">amplify hosting add</span></pre><p id="bc1e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它将提示您希望在哪里托管您的应用程序。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oh"><img src="../Images/d424e50dfd12e8dff6051d29121ca351.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9VmUP0QBSH9ptJ3JVYLbCg.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">hosting option</figcaption></figure><p id="fde4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们选择放大器控制台，这样我们就不需要做任何事情！</p><p id="ba0a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后运行下面的命令把所有东西都放到云中！</p><pre class="kh ki kj kk gu nq nr ns nt aw nu bi"><span id="4f4e" class="ne mi ir nr b gz nv nw l nx ny">amplify publish</span></pre><p id="5e68" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这将需要一些时间，在那之后，你将会看到这个</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj oh"><img src="../Images/4adf49402bf9fa47b61ffc0879fe1561.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RoGLZoeHWUcRFRkJ7GpLYQ.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">deployment successful</figcaption></figure><p id="bf8d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">厉害！现在访问网址，看看你的应用生活！</p><p id="7cc6" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">就是这样。现在，您知道了如何使用AWS Amplify构建端到端产品。探索更多，找出你可以用它做的其他事情。感谢您的阅读！</p><p id="7247" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><strong class="kz is">通过</strong><a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is">LinkedIn</strong></a><strong class="kz is">或我的</strong> <a class="ae kw" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="kz is">个人网站</strong> </a> <strong class="kz is">与我取得联系。</strong></p><h2 id="0ce2" class="ne mi ir bd mj nf ng dn mn nh ni dp mr lg nj nk mt lk nl nm mv lo nn no mx np bi translated">资源:</h2><p id="f768" class="pw-post-body-paragraph kx ky ir kz b la mz js lc ld na jv lf lg nb li lj lk nc lm ln lo nd lq lr ls ik bi translated"><a class="ae kw" href="https://docs.amplify.aws/start/q/integration/react?sc_icampaign=react-start&amp;sc_ichannel=choose-integration" rel="noopener ugc nofollow" target="_blank">https://docs.amplify.aws/start/q/integration/react?sc _ I campaign = react-start&amp;sc _ I channel = choose-integration</a></p></div></div>    
</body>
</html>
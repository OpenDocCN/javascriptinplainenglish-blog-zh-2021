<html>
<head>
<title>Build Mobile Apps with Ionic, ViteJS, React and Capacitor</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ionic、ViteJS、React和Capacitor构建移动应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/vitejs-ionic-framework-beta-v6-reactjs-and-capacitor-mobile-device-deployment-5b6ac7e5d249?source=collection_archive---------12-----------------------#2021-09-17">https://javascript.plainenglish.io/vitejs-ionic-framework-beta-v6-reactjs-and-capacitor-mobile-device-deployment-5b6ac7e5d249?source=collection_archive---------12-----------------------#2021-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/1531d855d1cdca5e206de19292066723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FeYUMMuitr364A8nHdLLEw.png"/></div></div></figure><p id="f93d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">由于Ionic已经宣布了v6的测试版，我想看看我是否可以开始使用Ionic框架和带有<a class="ae kw" href="https://vitejs.dev/guide/#scaffolding-your-first-vite-project" rel="noopener ugc nofollow" target="_blank"> ViteJS </a>的电容器。</p><p id="4278" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">即使您不使用<a class="ae kw" href="https://ionicframework.com/docs/react" rel="noopener ugc nofollow" target="_blank"> Ionic ReactJS组件</a>，该视频也将向您展示如何使用<a class="ae kw" href="https://capacitorjs.com/" rel="noopener ugc nofollow" target="_blank"> Ionic Capacitor </a>将您的ViteJS应用部署到移动设备上</p><blockquote class="kx ky kz"><p id="7324" class="jy jz la ka b kb kc kd ke kf kg kh ki lb kk kl km lc ko kp kq ld ks kt ku kv ij bi translated">如果您正在寻找VueJS集成，我在这里为您提供了帮助。<a class="ae kw" href="https://www.youtube.com/watch?v=JnfAH1gXVdU" rel="noopener ugc nofollow" target="_blank"> ViteJS离子框架和VueJS </a></p></blockquote><p id="53d3" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在这个视频中，我采用的方法是按照说明在ViteJS中创建一个ReactJS项目，然后添加带有npm的Ionic包，然后粘贴到所需的样式中，这样就成功了！！</p><h2 id="c8b5" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">录像</h2><p id="70e0" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated"><a class="ae kw" href="https://www.youtube.com/watch?v=uVjPBiNz5yk" rel="noopener ugc nofollow" target="_blank"> ViteJS、Ionic Framework Beta v6、ReactJS和Capacitor移动设备部署教程— YouTube </a></p><figure class="mc md me mf gt jr"><div class="bz fp l di"><div class="mg mh l"/></div></figure><h2 id="c0f7" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">从这里开始</h2><p id="3f7b" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">我们使用命令<code class="fe mi mj mk ml b">npm init vite@latest</code>让事情运转起来，见下面的输出。</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="14dd" class="le lf iq ml b gy mq mr l ms mt">Aarons-iMac:vite aaronksaunders$ <strong class="ml ir">npm init vite@latest</strong><br/>npx: installed 6 in 2.281s<br/>✔ Project name: … vite-ionic-react<br/>✔ Select a framework: › react<br/>✔ Select a variant: › react-ts<br/><br/>Scaffolding project in /Users/aaronksaunders/dev/projects/vite/vite-ionic-react...<br/><br/>Done. Now run:<br/><br/>  cd vite-ionic-react<br/>  npm install<br/>  npm run dev<br/><br/>Aarons-iMac:vite aaronksaunders$ <strong class="ml ir">cd vite-ionic-react/</strong><br/>Aarons-iMac:vite-ionic-react aaronksaunders$ <strong class="ml ir">npm install</strong><br/>Aarons-iMac:vite-ionic-react aaronksaunders$ <strong class="ml ir">npm i @ionic/react@next  @ionic/react-router@next react-router react-router-dom</strong></span></pre><p id="b245" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">既然项目已经建立并运行，我们需要使它成为一个Ionic React项目。通过用以下代码替换<code class="fe mi mj mk ml b">App.jsx</code>中的现有代码，添加一些ionic特定代码</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="e620" class="le lf iq ml b gy mq mr l ms mt">import React, { useState } from "react";<br/>import logo from "./logo.svg";<br/>import "./App.css";<br/>import {<br/>  IonContent,<br/>  IonPage,<br/>  IonRouterOutlet,<br/>  IonApp,<br/>  IonToolbar,<br/>  IonHeader,<br/>  IonButtons,<br/>  IonBackButton,<br/>  IonButton,<br/>  IonTitle,<br/>  IonItem,<br/>  IonLabel,<br/>} from "@ionic/react";<br/>import { IonReactRouter } from "@ionic/react-router";<br/>import { Redirect, Route, useHistory } from "react-router-dom";<br/><br/>/* Core CSS required for Ionic components to work properly */<br/>import "@ionic/react/css/core.css";<br/><br/>/* Basic CSS for apps built with Ionic */<br/>import "@ionic/react/css/normalize.css";<br/>import "@ionic/react/css/structure.css";<br/>import "@ionic/react/css/typography.css";<br/><br/>/* Optional CSS utils that can be commented out */<br/>import "@ionic/react/css/padding.css";<br/>import "@ionic/react/css/float-elements.css";<br/>import "@ionic/react/css/text-alignment.css";<br/>import "@ionic/react/css/text-transformation.css";<br/>import "@ionic/react/css/flex-utils.css";<br/>import "@ionic/react/css/display.css";<br/><br/>function App() {<br/>  return (<br/>    &lt;IonApp&gt;<br/>      &lt;IonReactRouter&gt;<br/>        &lt;IonRouterOutlet&gt;<br/>          &lt;Route path="/home" component={HomePage} exact={true} /&gt;<br/>          &lt;Route path="/detail" component={DetailPage} exact={true} /&gt;<br/>          &lt;Route path="/" exact={true}&gt;<br/>            &lt;Redirect to="/home" /&gt;<br/>          &lt;/Route&gt;<br/>        &lt;/IonRouterOutlet&gt;<br/>      &lt;/IonReactRouter&gt;<br/>    &lt;/IonApp&gt;<br/>  );<br/>}<br/><br/>function HomePage() {<br/>  const history = useHistory();<br/>  const nextPage = () =&gt; {<br/>    history.push("/detail");<br/>  };<br/><br/>  return (<br/>    &lt;IonPage&gt;<br/>      &lt;IonHeader&gt;<br/>        &lt;IonToolbar&gt;<br/>          &lt;IonTitle&gt;Home&lt;/IonTitle&gt;<br/>        &lt;/IonToolbar&gt;<br/>      &lt;/IonHeader&gt;<br/>      &lt;IonContent className="ion-padding"&gt;<br/>        &lt;h1&gt;HOME PAGE&lt;/h1&gt;<br/>        &lt;IonButton onClick={nextPage}&gt;NEXT PAGE&lt;/IonButton&gt;<br/>      &lt;/IonContent&gt;<br/>    &lt;/IonPage&gt;<br/>  );<br/>}<br/><br/>function DetailPage() {<br/>  return (<br/>    &lt;IonPage&gt;<br/>      &lt;IonHeader&gt;<br/>        &lt;IonToolbar&gt;<br/>          &lt;IonButtons slot="start"&gt;<br/>            &lt;IonBackButton&gt;&lt;/IonBackButton&gt;<br/>          &lt;/IonButtons&gt;<br/>          &lt;IonTitle&gt;Detail Page&lt;/IonTitle&gt;<br/>        &lt;/IonToolbar&gt;<br/>      &lt;/IonHeader&gt;<br/>      &lt;IonContent className="ion-padding"&gt;<br/>        &lt;h1&gt;DETAIL&lt;/h1&gt;<br/>        &lt;IonItem details&gt;<br/>          &lt;IonLabel&gt;More Information&lt;/IonLabel&gt;<br/>        &lt;/IonItem&gt;<br/>      &lt;/IonContent&gt;<br/>    &lt;/IonPage&gt;<br/>  );<br/>}<br/><br/>export default App;</span></pre><p id="a524" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">更新<code class="fe mi mj mk ml b">index.html</code>，替换<code class="fe mi mj mk ml b">viewport</code>标签以确保页面正确呈现。</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="9494" class="le lf iq ml b gy mq mr l ms mt">&lt;meta<br/>   name="viewport"<br/>   content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"<br/>/&gt;</span></pre><p id="0475" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">你现在可以运行应用程序，看看它作为一个网站正常工作之前，我们在设备上安装，在项目目录中键入以下命令。</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="3263" class="le lf iq ml b gy mq mr l ms mt">vite</span></pre><p id="0a77" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您应该看到您的ionic项目运行时有一个主页和一个详细页面。</p><h2 id="2791" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">在设备上运行应用程序</h2><p id="2fd8" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">我们现在要添加电容器到项目中，这样我们就可以在设备上部署，我只是在这里做IOS，但类似的方法将与Android一起工作</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="c2e0" class="le lf iq ml b gy mq mr l ms mt">npm install @capacitor/core<br/>npm install @capacitor/cli --save-dev<br/>npx cap init --web-dir dist</span></pre><p id="14f0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">注意<code class="fe mi mj mk ml b">npx cap init</code>命令末尾的<code class="fe mi mj mk ml b">--web-dir dist</code>。这是必需的，因为vite将它的构建输出打包到<code class="fe mi mj mk ml b">dist</code>目录中。</p><p id="4ae6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">接下来运行命令来构建应用程序</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="2166" class="le lf iq ml b gy mq mr l ms mt">vite build</span></pre><p id="9de5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在要运行IOS，我们需要安装平台代码，然后将其添加到项目配置中</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="5e92" class="le lf iq ml b gy mq mr l ms mt">npm install @capacitor/ios<br/>npx cap add ios</span></pre><p id="1472" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后运行应用程序在设备上查看</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="e018" class="le lf iq ml b gy mq mr l ms mt">npx cap run ios</span></pre><h2 id="3d18" class="le lf iq bd lg lh li dn lj lk ll dp lm kj ln lo lp kn lq lr ls kr lt lu lv lw bi translated">运行电容带电重载</h2><p id="db33" class="pw-post-body-paragraph jy jz iq ka b kb lx kd ke kf ly kh ki kj lz kl km kn ma kp kq kr mb kt ku kv ij bi translated">输入下面的命令，当提示输入项目类型时，选择<code class="fe mi mj mk ml b">custom</code></p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="b880" class="le lf iq ml b gy mq mr l ms mt">ionic init</span></pre><p id="3f23" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">然后修改<code class="fe mi mj mk ml b">package.json</code>文件的脚本部分。我们需要这样做，以便Ionic知道如何构建web应用程序...可能有另一种方法来实现这一点，但我不确定在这一点上。下面的新代码是<code class="fe mi mj mk ml b">"ionic:serve": "vite"</code></p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="611d" class="le lf iq ml b gy mq mr l ms mt">"scripts": {<br/>  "dev": "vite",<br/>  "build": "vite build",<br/>  "serve": "vite preview",<br/>  <strong class="ml ir">"ionic:serve": "vite"</strong><br/>},</span></pre><p id="23b2" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">现在，您可以运行下面的命令来运行设备上的应用程序，并在您对网站进行更改时使用live reload。</p><pre class="mc md me mf gt mm ml mn mo aw mp bi"><span id="b2d7" class="le lf iq ml b gy mq mr l ms mt">ionic cap run ios --livereload --external</span></pre><p id="1fcf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="la">更多内容尽在</em><a class="ae kw" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="la">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
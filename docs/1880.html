<html>
<head>
<title>Google pauses plan to break your PWA</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">谷歌暂停计划打破你的PWA</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/google-pauses-plan-to-break-your-pwa-d249bca27852?source=collection_archive---------1-----------------------#2021-04-20">https://javascript.plainenglish.io/google-pauses-plan-to-break-your-pwa-d249bca27852?source=collection_archive---------1-----------------------#2021-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/d089a61a4cc126a88d8f34835873146c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*38au2I8U2g6o_mhmjL8waQ.jpeg"/></div></figure><p id="c23a" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">一个月前，我发表了<a class="ae kp" rel="noopener ugc nofollow" target="_blank" href="/your-pwa-is-going-to-break-in-august-2021-34982f329f40">你的PWA将于2021年8月崩溃</a>以帮助开发者应对Chrome 93中随后即将到来的变化，这些变化在每个人的浏览器控制台中弹出“<em class="kq">页面无法离线工作。从Chrome 93开始，可安装性标准正在改变，该网站将无法安装。</em></p><h2 id="6453" class="kr ks in bd kt ku kv dn kw kx ky dp kz kc la lb lc kg ld le lf kk lg lh li lj bi translated">谷歌正在后退</h2><p id="9c68" class="pw-post-body-paragraph jr js in jt b ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk lo km kn ko ig bi translated">好消息！几天前，谷歌决定暂停他们的计划。看起来这些计划将会被搁置一段时间——如果不是无限期的话。</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lp"><img src="../Images/341367feb4a54a4c2d0da503105f75eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bgfP_jrKFkLo_Xs12UMvKQ.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Google decided to put their plans to break your PWA on hold. You can see the announcement <a class="ae kp" href="https://developer.chrome.com/blog/improved-pwa-offline-detection/" rel="noopener ugc nofollow" target="_blank">here</a>.</figcaption></figure><p id="82be" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在我的原始文章中，我假设谷歌想要改变可安装性规则，因为许多开发人员使用一种黑客技术，允许他们从安装功能中受益，而不必做任何事情来使应用程序实际上可以离线访问。</p><figure class="lq lr ls lt gt jo"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">This is what the fetch event listener looks like for a lot of installable high-traffic websites. That’s enough to satisfy the criteria of “being available offline” currently.</figcaption></figure><h2 id="a24f" class="kr ks in bd kt ku kv dn kw kx ky dp kz kc la lb lc kg ld le lf kk lg lh li lj bi translated">离线！=可安装</h2><p id="2c0a" class="pw-post-body-paragraph jr js in jt b ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk lo km kn ko ig bi translated">我真的想知道为什么谷歌绝对坚持将这两个概念结合在一起。他们的教条是PWA应该离线工作。因此，对于可安装的PWA，它应该证明它可以脱机工作。</p><p id="3d3f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">问题是有些app在离线状态下真的做不了什么有用的事情。这实际上没问题，不是吗？看看下面LinkedIn app的离线回退。它真的能让你做任何有用的事情吗？</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi me"><img src="../Images/e04a442fa80729e577e44e630c35ea86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJiCt2jkOt2mCLk_35lNOw.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">I can’t do much useful with LinkedIn app when offline. And that’s a native app.</figcaption></figure><p id="83ab" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">不完全是。因此，为什么谷歌不认为原生恐龙页面是一个可接受的离线退路，这让我有点困惑——特别是考虑到这是他们自己的页面。</p><figure class="lq lr ls lt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi mf"><img src="../Images/f5cd58020b98a59a4a89f8555e95370e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KFp0e7v-NoaO67az3-udlg.png"/></div></div></figure><h2 id="c240" class="kr ks in bd kt ku kv dn kw kx ky dp kz kc la lb lc kg ld le lf kk lg lh li lj bi translated">谷歌为什么退缩了？</h2><p id="ff21" class="pw-post-body-paragraph jr js in jt b ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk lo km kn ko ig bi translated">在我的原创文章<a class="ae kp" rel="noopener ugc nofollow" target="_blank" href="/your-pwa-is-going-to-break-in-august-2021-34982f329f40">的clickbait标题背后，有一种真诚的意愿，那就是警告开发者谷歌现已取消的计划的后果。</a></p><p id="f177" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让一个web应用程序持续离线工作比大多数开发者想象的要困难得多。事实上，许多认为他们已经为8月21日做好准备的人，可能会在几个月后得到一个令人讨厌的惊喜。</p><p id="6b96" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">当第一次从服务器上检索资源时，需要对其进行缓存，以便以后在没有网络的情况下可以访问它们。但这还不够。对于真正的离线体验，你还必须<em class="kq">预先缓存</em>大量资源。</p><p id="4603" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">直截了当地说，在复杂的应用程序中多次迭代地管理预先缓存的资源是一件非常痛苦的事情。在某些时候，您会忘记将新资源添加到要缓存的资源列表中，这将会破坏您的离线体验——并且没有任何机制会通知您这一点。</p><p id="9546" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">此外，服务工作器<em class="kq"> fetch </em>事件处理程序并非没有<a class="ae kp" href="https://stackoverflow.com/questions/48463483/what-causes-a-failed-to-execute-fetch-on-serviceworkerglobalscope-only-if" rel="noopener ugc nofollow" target="_blank">错误和奇怪之处</a>，尤其是在获取和缓存来自其他域的资源时。这里也一样，<a class="ae kp" href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS" rel="noopener ugc nofollow" target="_blank"> CORS </a>会让人非常头疼。</p><p id="edbd" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">根据定义，当用户离线时，您必须向他们显示最新版本的缓存数据。在一些应用程序中，不显示任何数据比显示陈旧数据更好。</p><p id="be54" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但是如果您决定在脱机状态下显示过时的数据，您必须在您的UI中清楚地表明所显示的数据是过时的。有趣的故事:在冠状病毒应用的早期，我们会收到大量愤怒用户的电子邮件，声称数据没有更新。事实上，他们只是在离线时看到缓存的数据。</p><p id="2adb" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">缓存是一项了不起的改进。如果做得好，它可以让你的应用程序几乎瞬间加载。通过减少发往服务器的请求数量，它可以为您节省大量AWS/GCP资金。它可以让你的应用程序的一部分在离线时也很有用。</p><p id="191b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">但谷歌计划的Chrome更新本质上说的是“<em class="kq">建立一个完美的缓存实现或不再安装功能</em>”。考虑到缓存是如此脆弱和困难，完美的实现对于大多数开发人员来说可能是遥不可及的。通过破坏其他东西来迫使他们就范可能不是办法。</p><h2 id="5033" class="kr ks in bd kt ku kv dn kw kx ky dp kz kc la lb lc kg ld le lf kk lg lh li lj bi translated">适时给予的应得的赞扬</h2><p id="9335" class="pw-post-body-paragraph jr js in jt b ju lk jw jx jy ll ka kb kc lm ke kf kg ln ki kj kk lo km kn ko ig bi translated">感谢谷歌听取我们的反馈！令人惊讶的是，在他们的规模下，他们仍然能够测试，迭代和快速改变方向。希望在可预见的将来，他们更新可安装性标准的计划将被搁置。如果没有，你绝对可以期待我再写一次！</p><p id="e767" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">所以总而言之，好消息是——看起来毕竟你的PWA <strong class="jt io">不会在2021年8月</strong>破。</p><p id="3f94" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kq"> PS:如果你想节省时间，可以考虑用</em><a class="ae kp" href="https://progressier.com" rel="noopener ugc nofollow" target="_blank"><em class="kq">Progressier</em></a><em class="kq">代替你的PWA实现。它是免费的，没有代码，带有推送通知，最重要的是，我们掌握着一切，所以你不必担心。</em></p><p id="6a40" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="kq">更多内容请看</em><a class="ae kp" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jt io"><em class="kq">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
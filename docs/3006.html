<html>
<head>
<title>My Preferred Way of Working with Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在React中处理表单的首选方式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/my-preferred-way-of-working-with-forms-in-react-4014afad865c?source=collection_archive---------7-----------------------#2021-06-18">https://javascript.plainenglish.io/my-preferred-way-of-working-with-forms-in-react-4014afad865c?source=collection_archive---------7-----------------------#2021-06-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/04063fed58b9fc6fda8866796ca3286c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c4YS1G6YSz4FwETH"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@romaindancre?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Romain Dancre</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b914" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的日常工作中，我一直在大量使用一些前端框架和库。使用React与使用Angular之类的东西不同，至少在两个框架处理表单的方式上不同。</p><p id="690d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Angular中，对于简单的表单类型，您可以获得模板驱动的表单，对于具有不同值和复杂验证等的更复杂的表单，您可以获得反应式表单。</p><p id="3d26" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用React时，首先我们应该明白它只是应用程序视图部分的一个库，其他实现如状态管理(“Context API在那里”)、路由和表单处理等。</p><h1 id="aaff" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">实现表单的不同方式:</h1><p id="31cc" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">最简单的方法是对某种状态(组件状态或全局状态解决方案)使用handle change，但我不喜欢这样做，而且考虑到我处理的表单类型可能有5到30个字段，用if-else子句创建自定义验证对我来说不是很直观，我很快就厌倦了这样做。</p><p id="968e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另一个解决方案是类似于<strong class="kc io"> Formik </strong>的东西，这是许多人的首选，但我最近发现它很慢，我有一个用户注册页面，要求有近15个字段。<strong class="kc io">UI突然变得很慢，我已经编写了验证程序。</strong></p><p id="28db" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的救星和转变是瞬间的。</p><h2 id="a89e" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">我处理表单的方式:</h2><p id="28a8" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我使用一个名为react-hook-forms的库。</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/c237ed66b1cdca8be8ef815c7de93f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ImHDTvFlN-blfWvn3yqGUA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">npm react-hook-from</figcaption></figure><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/4b98c2f57cbc406d972e2b4fd4cb2ec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fDkNefv0U1vkrENJo6EmrQ.gif"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Courtesty of React-hook-form team</figcaption></figure><p id="6686" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这不是一个新的东西，相反，它在社区中非常受欢迎，并且不断上升。</p><p id="caf4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该库非常直观，并且具有最小数量的模板。</p><p id="8889" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有一个名为useForm的钩子，它提供了一些属性，比如handleSubmit、getValues、register。</p><p id="5db5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Register是最重要的一个，因为它可以确保你的表单域注册到钩子表单，绑定也完成了，所以你现在可以很容易地做验证和其他事情。不需要创建一个handleChange和所有的事情。</p><p id="8e5f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我处理大多数字段的方式是创建一个自定义组件:</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="08a8" class="mb kz in mu b gy my mz l na nb"><br/>const FormField = ({ <em class="nc">name</em>, <em class="nc">label</em>, <em class="nc">register, required </em>}) =&gt; {<br/>let type="text";</span><span id="0dc6" class="mb kz in mu b gy nd mz l na nb">switch (<em class="nc">name</em>) {<br/>  case 'password':<br/>    type = 'password';<br/>  default:<br/>    type = 'text';<br/>}</span><span id="6451" class="mb kz in mu b gy nd mz l na nb">return (<br/>&lt;label&gt;{<em class="nc">label</em>}&lt;/label&gt;<br/>&lt;input <em class="nc">type</em>={type} {...register(name,{<br/>                     required<br/>                   })}&gt;<br/>&lt;/input&gt;<br/>&lt;ErrorMsg inputName={name} /&gt;<br/>)</span><span id="1a64" class="mb kz in mu b gy nd mz l na nb">}</span><span id="0e02" class="mb kz in mu b gy nd mz l na nb"><br/> const ErrorMsg = ({ inputName }) =&gt; (<br/>    &lt;&gt;<br/>      {errors[inputName] &amp;&amp; (<br/>        &lt;small className="text-sm text-red-400 font-medium block mt-1 px-4"&gt;<br/>          {<br/>            errors[inputName]['message'] ?<br/>            errors[inputName]['message'] :<br/>            errors[inputName]['type'] === 'allowed' ?<br/>            `invalid username` :<br/>            `${inputName} is required`<br/>          }<br/>        &lt;/small&gt;<br/>      )}<br/>    &lt;/&gt;<br/>  )</span></pre><p id="1d11" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在使用这个:</p><pre class="mo mp mq mr gt mt mu mv mw aw mx bi"><span id="1ef6" class="mb kz in mu b gy my mz l na nb">&lt;form onSubmit={handleSubmit}&gt;<br/> &lt;FormField name="userName" register={register} label="User Name*" required/&gt;<br/> &lt;FormField name="password" register={register} label="Password *"/&gt;<br/>&lt;/form&gt;</span></pre><p id="2239" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用这个名字，我们也可以编写不同种类的验证，这非常简单，我也使用了Yup验证和其他不同的内置验证。</p><p id="123b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">除了直观之外，我更喜欢这个库，因为它的性能优势，同样的表单，15到25个字段的钩子表单感觉非常快。</p><p id="fc6e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于其他库和自定义实现，当您添加复杂的错误处理时，每次击键时所有字段的重新呈现次数都会增加，但hook form团队在这方面做得很好。</p><p id="555c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如截图所示，重新渲染的次数非常少。</p><p id="8699" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">欲了解更多统计数据，请访问网站:</p><p id="9365" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">【https://react-hook-form.com/ T4】</p><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/2733635b96cfdf29dd0abfa8d3dc091b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w4PVR2uGXmNWHaiwIosENA.png"/></div></div></figure><h2 id="28bf" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">结论</h2><p id="4815" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我强烈建议您亲自尝试一下，如果您使用react，您也会喜欢使用hook表单，很高兴看到一个更成熟、更实用的库，但不太为人所知。</p><p id="1107" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是在离开之前，我想强调一点，就像任何其他库一样，注意突发的变化并相应地工作，因为这可能会导致最后一分钟的恐慌。</p><p id="b47b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">快乐编码，并作为软件工程师关注更多真实世界的问题及其解决方案。</p><h2 id="4c7b" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">进一步阅读</h2><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-build-your-own-surveys-extend-them-with-custom-javascript-b4c7eb5648c4"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd io gy z fp nn fr fs no fu fw im bi translated">如何构建自己的调查并使用定制的JavaScript扩展它们</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">这是一本关于如何使用自己的JS函数来扩充SurveyJS附带的条件逻辑和验证器的入门书。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw jt ni"/></div></div></a></div><p id="abd5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nc">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">plain English . io</em></strong></a><em class="nc">。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nc">免费周报</em> </strong> </a> <em class="nc">。关注我们关于</em><a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">Twitter</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">LinkedIn</em></strong></a><em class="nc"/><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">YouTube</em></strong></a><em class="nc"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">不和</em> </strong> </a> <em class="nc">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Send Gmail Emails with Nodemailer and OAuth2?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Nodemailer和OAuth2发送Gmail邮件？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sending-emails-with-nodemailer-with-gmail-and-oauth2-e0b609587b7a?source=collection_archive---------3-----------------------#2021-07-28">https://javascript.plainenglish.io/sending-emails-with-nodemailer-with-gmail-and-oauth2-e0b609587b7a?source=collection_archive---------3-----------------------#2021-07-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2303" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用Node.js、OAuth2和nodemailer的编码部分</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e2649204c2c10a6398b916aa4280faa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4_AJZEzxZeNLE2tUE0jCA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">By FAM</figcaption></figure><h2 id="4489" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">要求</h2><ul class=""><li id="e3ba" class="lr ls iq lt b lu lv lw lx le ly li lz lm ma mb mc md me mf bi translated">Nodemailer用于Node.js apps，所以你需要<strong class="lt ir"> </strong> <a class="ae mg" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> <strong class="lt ir">安装它</strong> </a>。</li><li id="ca6d" class="lr ls iq lt b lu mh lw mi le mj li mk lm ml mb mc md me mf bi translated">Nodemailer帮你轻松的为你的node app发邮件，像做蛋糕一样。所以，我们当然需要<a class="ae mg" href="https://www.npmjs.com/package/nodemailer" rel="noopener ugc nofollow" target="_blank">用NPM或纱线安装</a>才能使用。</li><li id="34db" class="lr ls iq lt b lu mh lw mi le mj li mk lm ml mb mc md me mf bi translated">为Gmail安装<a class="ae mg" href="https://www.npmjs.com/package/googleapis" rel="noopener ugc nofollow" target="_blank">Google API</a>。</li></ul></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><p id="6b47" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated">让我们一步一步地进入代码，了解它做什么。如果你想要完整的代码，你可以在文章的结尾找到。</p><ul class=""><li id="fab9" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">添加所需的包:</strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="c4fb" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">使用我们的应用程序中的凭证(我们随文章一起生成)环境常量:</strong></li></ul><p id="35a5" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated">/!\-如果您尚未为您的应用程序生成凭据，以下是您需要的内容:</p><div class="nn no gp gr np nq"><a href="https://medium.com/geekculture/how-do-i-get-an-oauth-credential-35d6d0e5d617" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">我如何获得OAuth证书？</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">获取Google Oauth2客户端ID的步骤？</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kp nq"/></div></div></a></div><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="e2d4" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><strong class="lt ir"> <em class="of"> /！\ —注意，我使用的是环境常数。这是更干净的，因为文件是隐藏的(</em> </strong> <code class="fe og oh oi oj b"><strong class="lt ir"><em class="of">.env</em></strong></code> <strong class="lt ir"> <em class="of">)，当你想改变一个常数时，你只需做一次，因此非常适合维护应用程序。</em>T25】</strong></p><p id="a074" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated">我的<code class="fe og oh oi oj b"><em class="of">.env</em></code> <em class="of">看起来像是(你需要填写你自己的证书和电子邮件):</em></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="5076" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated">如果你感兴趣，也想这么做，下面是一些快速的步骤:</p><div class="nn no gp gr np nq"><a href="https://levelup.gitconnected.com/how-to-create-node-global-variables-to-use-in-react-app-9df1514a4eb7" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">如何创建用于React应用程序的节点全局变量</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">修复返回未定义的process.env.VARIABLE_NAME</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nz l"><div class="ok l ob oc od nz oe kp nq"/></div></div></a></div><p id="3e91" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated">否则，您也可以首先对同意进行硬编码，当一切正常时，在您的代码中进行一些改进。</p><ul class=""><li id="6386" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">在Google APIs和设置凭证时进行身份验证:</strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="1421" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">动态生成</strong> <code class="fe og oh oi oj b"><strong class="lt ir">accessToken</strong></code> <strong class="lt ir">，用</strong> <code class="fe og oh oi oj b"><strong class="lt ir">nodemailer</strong></code> <strong class="lt ir"> : </strong>构建电子邮件</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="bcad" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">整个代码:</strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><ul class=""><li id="93be" class="lr ls iq lt b lu mv lw mx le ni li nj lm nk mb mc md me mf bi translated"><strong class="lt ir">使用路由器中的功能(这里我用的是express和React) </strong></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div></figure><h2 id="95d5" class="kv kw iq bd kx ky kz dn la lb lc dp ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">有用的资源:</h2><ul class=""><li id="2604" class="lr ls iq lt b lu lv lw lx le ly li lz lm ma mb mc md me mf bi translated"><a class="ae mg" href="https://community.nodemailer.com/2-0-0-beta/using-oauth2/" rel="noopener ugc nofollow" target="_blank">https://community.nodemailer.com/2-0-0-beta/using-oauth2/</a></li><li id="47f2" class="lr ls iq lt b lu mh lw mi le mj li mk lm ml mb mc md me mf bi translated"><a class="ae mg" href="https://developers.google.com/identity/protocols/oauth2/javascript-implicit-flow" rel="noopener ugc nofollow" target="_blank">https://developer . Google . com/identity/protocol/oauth 2/JavaScript-implicit-flow</a></li></ul><p id="9e08" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><strong class="lt ir">/<em class="of">！\ —如果您想深入了解整个过程的全貌，下一篇文章将于本周末发表。</em> </strong></p><p id="a8e1" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><strong class="lt ir"> <em class="of">【更新】:如承诺</em>😉</strong></p><div class="nn no gp gr np nq"><a href="https://levelup.gitconnected.com/nodemailer-with-gmail-not-working-4ed254258ac" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">带有Gmail的节点邮件程序不工作？</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">了解它是如何工作的部分:我如何在Gmail中使用节点邮件？…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="nz l"><div class="ol l ob oc od nz oe kp nq"/></div></div></a></div></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="f8e5" class="om kw iq bd kx on oo op la oq or os ld jw ot jx lh jz ou ka ll kc ov kd lp ow bi translated">谢谢你宝贵的时间，希望这对你有用！</h1><p id="2def" class="pw-post-body-paragraph mt mu iq lt b lu lv jr mw lw lx ju my le ox na nb li oy nd ne lm oz ng nh mb ij bi translated">亲爱的读者，我希望这是明确和有用的。我希望你无论在哪里都是安全的，你的家人也是！坚持住。明天会更好！</p><p id="0b33" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><strong class="lt ir">让我们在</strong> <a class="ae mg" href="https://medium.com/@famzil/" rel="noopener"> <strong class="lt ir">中</strong></a><strong class="lt ir"/><a class="ae mg" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="lt ir">Linkedin</strong></a><strong class="lt ir"/><a class="ae mg" href="https://www.facebook.com/The-Front-End-World" rel="noopener ugc nofollow" target="_blank"><strong class="lt ir">脸书</strong><strong class="lt ir"/></a><a class="ae mg" href="https://www.instagram.com/the_frontend_world/" rel="noopener ugc nofollow" target="_blank"><strong class="lt ir">insta gram</strong></a><strong class="lt ir">、</strong><a class="ae mg" href="https://www.youtube.com/channel/UCaxr-f9r6P1u7Y7SKFHi12g" rel="noopener ugc nofollow" target="_blank">T37you tube</a>、<strong class="lt ir">或<a class="ae mg" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank">上取得联系</a></strong></p><p id="e0a6" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><a class="ae mg" href="http://www.fam-front.com/" rel="noopener ugc nofollow" target="_blank">www.fam-front.com</a></p><p id="224e" class="pw-post-body-paragraph mt mu iq lt b lu mv jr mw lw mx ju my le mz na nb li nc nd ne lm nf ng nh mb ij bi translated"><em class="of">更多内容参见</em><a class="ae mg" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lt ir"><em class="of"/></strong></a></p></div></div>    
</body>
</html>
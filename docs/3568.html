<html>
<head>
<title>How To Use SvelteKit With Electron</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用SvelteKit与电子</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sveltekit-electron-d1fc80065fbf?source=collection_archive---------0-----------------------#2021-07-18">https://javascript.plainenglish.io/sveltekit-electron-d1fc80065fbf?source=collection_archive---------0-----------------------#2021-07-18</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/63480e839cc11df85e1956983dc60dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SI0lZ7B1coPteNyy992jtg.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo by <a class="ae kd" href="https://unsplash.com/@fabioha?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">fabio</a> on <a class="ae kd" href="https://unsplash.com/@fabioha?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="896d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我几乎已经完成了我的想法，为苗条和电子创建3个模板。还有一些细节需要修正，但主要方面还可以。第三个也是最后一个模板涉及<a class="ae kd" href="https://kit.svelte.dev/" rel="noopener ugc nofollow" target="_blank"> SvelteKit </a>，电子和打字稿。与其他两个模板不同，这个模板有一个更具体的用途。为什么？</p><p id="131b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">因为没有必要使用带电子的SvelteKit。我可以用苗条的身材得到同样的结果，而且并发症更少。我的意图略有不同。我想让我的博客更吸引人一点，尤其是c3demo.stranianelli.com部分。我想使用相同的代码创建一个离线应用程序来在itchio上发布。我觉得SvelteKit适合这个用途。</p><figure class="ld le lf lg gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj lc"><img src="../Images/623a49c96ce0f8bba8e33d951dc81007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*gy7HpOUj7H-CtSSa.gif"/></div></div></figure><p id="280f" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">但这关乎未来。今天我想写下一些关于如何将SvelteKit与电子和打字稿整合的事情。我从文件结构开始，它不同于其他模板:</p><pre class="ld le lf lg gu lh li lj lk aw ll bi"><span id="e8f0" class="lm ln ir li b gz lo lp l lq lr">root<br/>├──electron<br/>│   ├──IPC<br/>│   │   └──...<br/>│   ├──index.ts<br/>│   ├──mainWindow.ts<br/>│   ├──preload.ts<br/>│   └──configureDev.ts<br/>├──svelte<br/>│   ├──src<br/>│   │   ├──lib<br/>│   │   │   ├──components<br/>│   │   │   │   └──...<br/>│   │   │   ├──header<br/>│   │   │   │   └──...<br/>│   │   │   └──...<br/>│   │   ├──routes<br/>│   │   │   ├──help<br/>│   │   │   │   └──...<br/>│   │   │   ├──todos<br/>│   │   │   │   └──...<br/>│   │   │   ├──__layout.svelte<br/>│   │   │   ├──about.svelte<br/>│   │   │   └──index.svelte<br/>│   │   ├──app.css<br/>│   │   ├──app.html<br/>│   │   └──global.d.ts<br/>│   ├──static<br/>│   │   ├──favicon.png<br/>│   │   └──loading.html<br/>│   ├──svelte.config.js<br/>│   └──tsconfig.json<br/>├──package.json<br/>├──tsconfig.json<br/>├──nodemon.json<br/>├──icon.ico<br/>└──dev-app-update.yml</span></pre><p id="bc87" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">当然，主要的区别是与苗条有关。我发现的最快最简单的方法是在一个单独的文件夹中创建一个“SvelteKit项目”。我在shell中创建了<code class="fe ls lt lu li b">Svelte</code>文件夹:</p><pre class="ld le lf lg gu lh li lj lk aw ll bi"><span id="3908" class="lm ln ir li b gz lo lp l lq lr">npm init svelte@next<br/>npm install</span></pre><p id="11ea" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这样我就把前端开发和电子开发分开了。另一方面，电子实际上与以前的设计相同。唯一的区别是增加了启动时闪屏的功能:</p><figure class="ld le lf lg gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj lv"><img src="../Images/0340e9d2ee9c6d1cec1a28efa7d4e960.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hpzn9sz62mCFZf0e.gif"/></div></div></figure><p id="2051" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">另一个变化是添加了<code class="fe ls lt lu li b">configureDev.ts</code>类来简化应用程序开发。我可以将下面的代码添加到<code class="fe ls lt lu li b">index.ts</code>文件中:</p><figure class="ld le lf lg gu js"><div class="bz fq l di"><div class="lw lx l"/></div></figure><p id="4459" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">通过修改各种选项，我可以使用命令<code class="fe ls lt lu li b">nodemon</code>在各种场景中使用模板。</p><p id="25d4" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">为了使用SvelteKit生成的文件，我必须使用一个技巧。不使用<code class="fe ls lt lu li b">win.loadURL('file://...')</code>，我决定使用<a class="ae kd" href="https://www.npmjs.com/package/electron-serve" rel="noopener ugc nofollow" target="_blank">电子发球</a>:</p><pre class="ld le lf lg gu lh li lj lk aw ll bi"><span id="21de" class="lm ln ir li b gz lo lp l lq lr">const loadURL = serve({ directory: "dist/www" });<br/>loadURL(mainWindow)</span></pre><figure class="ld le lf lg gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj lv"><img src="../Images/ce46b664d6e4042c7ee989863787eaa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Asp-Y4kvW3qG04sF.gif"/></div></div></figure><p id="a370" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我可以直接调用SvelteKit生成的各种HTML页面。或者我也可以使用某种定制的迷你路由器。就<code class="fe ls lt lu li b"><a class="ae kd" href="https://svelte.dev/docs#svelte_component" rel="noopener ugc nofollow" target="_blank">&lt;svelte:component&gt;</a></code>:</p><pre class="ld le lf lg gu lh li lj lk aw ll bi"><span id="894e" class="lm ln ir li b gz lo lp l lq lr">import PageA from "./pageA.svelte";<br/>import PageB from "./pageB.svelte";<br/>import PageC from "../others/pageC.svelte";<br/><br/>let page = PageA</span></pre><p id="df3e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在HTML中</p><pre class="ld le lf lg gu lh li lj lk aw ll bi"><span id="e41a" class="lm ln ir li b gz lo lp l lq lr">&lt;button on:click="{() =&gt; page=PageB}"&gt;Go to PageB&lt;/button&gt;<br/>&lt;svelte:component this={page} /&gt;</span></pre><figure class="ld le lf lg gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj lv"><img src="../Images/74f18c435f4f09cc2ac08b602cb3b62e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bq7XrE1Z_H7ZbZ9e.gif"/></div></div></figure><p id="8c7b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">最后，我增加了将“待办事项”部分的项目直接保存到磁盘的可能性。这不是一个基本的方面，但我需要记住如何使用<a class="ae kd" href="https://blog.stranianelli.com/sveltekit-and-electron-english/(https://nodejs.org/api/fs.html)" rel="noopener ugc nofollow" target="_blank"> NodeJs fs API </a>。</p><figure class="ld le lf lg gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj lv"><img src="../Images/c97d8fb8615bfb2ec527f96be97f540d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*usuYGezIlyslmYsI.gif"/></div></div></figure><p id="b7ba" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我知道这篇文章没有前几篇那么专业，但是所有的代码都可以在GitHub上找到:</p><div class="ly lz gq gs ma mb"><a href="https://github.com/el3um4s/memento-sveltekit-electron-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd is gz z fq mg fs ft mh fv fx iq bi translated">GitHub-El 3um 4s/memento-sveltekit-electronic-typescript:创建桌面应用程序的模板</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">模板创建一个桌面应用程序与SvelteKit，电子和打字稿(与电子更新，电子重新加载和…</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">github.com</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp jx mb"/></div></div></a></div><p id="1cc5" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl mq mr hv ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is"> <em class="mx">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kd" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="kg is"> <em class="mx">中邮箱列表</em> </strong> </a></p><div class="ly lz gq gs ma mb"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd is gz z fq mg fs ft mh fv fx iq bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">el3um4s.medium.com</p></div></div><div class="mk l"><div class="my l mm mn mo mk mp jx mb"/></div></div></a></div></div><div class="ab cl mq mr hv ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ik il im in io"><div class="ld le lf lg gu mb"><a href="https://differ.plainenglish.io/p/stylify-css-code-your-sveltekit-website-faster-with-csslike-utilities-ly2ujg9f" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd is gz z fq mg fs ft mh fv fx iq bi translated">风格化CSS:用类似CSS的工具更快地编写你的SvelteKit网站</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">Stylify + SvelteKit。使用Stylify更快地设计您的SvelteKit网站。不要研究选择器和语法。使用纯CSS…</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">different . plain English . io</p></div></div><div class="mk l"><div class="mz l mm mn mo mk mp jx mb"/></div></div></a></div><p id="4955" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="mx">原载于2021年7月18日https://blog.stranianelli.com</em><a class="ae kd" href="https://blog.stranianelli.com/sveltekit-and-electron-english/" rel="noopener ugc nofollow" target="_blank"><em class="mx"/></a><em class="mx">。</em></p><p id="6fd5" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="mx">更多内容请看</em><a class="ae kd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mx">plain English . io</em></a><em class="mx">。报名参加我们的</em> <a class="ae kd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mx">免费每周简讯</em> </a> <em class="mx">。在我们的</em> <a class="ae kd" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mx">社区不和谐</em> </a> <em class="mx">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Integrating Map Services in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中集成地图服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/integrating-map-services-in-react-c7196dfc7e09?source=collection_archive---------12-----------------------#2021-08-18">https://javascript.plainenglish.io/integrating-map-services-in-react-c7196dfc7e09?source=collection_archive---------12-----------------------#2021-08-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/ea289acd9f8f3343fc4f15e9603d4343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bcucYGcemS9QQ7qp"/></div></div></figure><div class=""/><h1 id="e91f" class="jy jz jb bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">React地图框指南</h1><p id="4e02" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">多年来，开发行业一直在争论谁是最好的地图提供商，让我们看看谁会赢得地图提供商的游戏。</p><p id="5916" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">由于其可靠性，谷歌地图SDK在很长一段时间内一直是王者，但随着价格点远远高于竞争对手，并且没有像Mapbox或免费传单那样的可定制性，这种情况开始发生变化。</p><p id="ea5e" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">当您决定使用地图服务时，您必须考虑多个因素:</p><ul class=""><li id="1b55" class="lz ma jb ky b kz lu ld lv lh mb ll mc lp md lt me mf mg mh bi translated">价格点(美元/地图加载或API请求)</li><li id="6992" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">可靠性(服务的准确性和稳健性)</li><li id="059e" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">可定制性(可用的个性化级别、调色板或标记)</li><li id="57d6" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">开发者体验(在应用程序中集成和开发有多容易)</li><li id="9f09" class="lz ma jb ky b kz mi ld mj lh mk ll ml lp mm lt me mf mg mh bi translated">其他服务，如搜索(也称为地理编码)、导航等</li></ul><figure class="mo mp mq mr gt is gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/2a8dc78c54670a528cc1ff7f8ba9b57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*YCsDSMz_cLWDA-h5"/></div></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="fa93" class="jy jz jb bd ka kb mz kd ke kf na kh ki kj nb kl km kn nc kp kq kr nd kt ku kv bi translated">1.为什么选择<a class="ae ne" href="https://www.mapbox.com/" rel="noopener ugc nofollow" target="_blank">地图框</a>？</h1><p id="0751" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">今年早些时候，我开发了一个全栈应用程序，使用Mapbox和React来提高自行车盗窃意识，我喜欢它的易用性和定制性。在bike-theft-map.bikmo.com的<a class="ae ne" href="https://bike-theft-map.bikmo.com/" rel="noopener ugc nofollow" target="_blank">检查一下。</a></p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nf"><img src="../Images/54f0d46afadfbe592a15759a7c85af5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ufznDnQ2BCn9Z0Kx"/></div></div></figure><p id="3260" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在大量使用谷歌地图的应用中，你可以通过利用Mapbox的众多可定制功能，轻松脱颖而出。</p><p id="410c" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">使用Mapbox Studio，你可以创建你梦想中的黑暗模式地图，甚至可以将某个品牌的调色板整合到树的叶子颜色中。</p><p id="187b" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">更重要的是，免费计划允许高达100k/月的地图加载，这对于开发甚至小型应用程序来说都是非常好的。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="6d7d" class="jy jz jb bd ka kb mz kd ke kf na kh ki kj nb kl km kn nc kp kq kr nd kt ku kv bi translated">2.我们在建造什么？</h1><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ng"><img src="../Images/fedf70c4d0269ab103c1025f5a74e886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XapYfE2iyzxw_FUr"/></div></div></figure><p id="8dd8" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">我们将为在纽约有多个诊所的宠物兽医制作一个<a class="ae ne" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> NextJS </a>应用程序，使用它人们可以查看地图上每个位置的标记，并通过点击它可以在带它去那里之前完成关于他们宠物详细信息的表格。</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="2d57" class="jy jz jb bd ka kb mz kd ke kf na kh ki kj nb kl km kn nc kp kq kr nd kt ku kv bi translated">3.创建自定义地图样式</h1><p id="50fd" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">创建帐户后，我们可以访问<a class="ae ne" href="https://studio.mapbox.com/" rel="noopener ugc nofollow" target="_blank"> Mapbox Studio </a>并按下新样式按钮创建新样式。</p><p id="3803" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">选择一个基础风格，然后我们可以用我们的宠物诊所品牌颜色定制。</p><p id="a293" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">让我们选择单色风格，因为它需要最少的时间来定制。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nh"><img src="../Images/867fa47a2204e266bdc5bdf173472712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*syjqGBcWD6GA7hjm"/></div></div></figure><p id="6813" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在左侧边栏菜单中的颜色下，我们可以自定义颜色(#00A896)。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi ni"><img src="../Images/8dff3722210a70f30d0fe6c060624252.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SKVMeLcQ6GqUM-oy"/></div></div></figure><p id="39d4" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">为了发布修改，我们必须点击右上角的发布按钮。现在我们所需要的是在我们的网站中使用的风格url，我们可以在右上角找到它。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nj"><img src="../Images/6ff6e9073cd1a0336aea832cbedfc39c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kpS4tRwhMPUSB7Wp"/></div></div></figure></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="2b86" class="jy jz jb bd ka kb mz kd ke kf na kh ki kj nb kl km kn nc kp kq kr nd kt ku kv bi translated">4.React中的地图框</h1><p id="6132" class="pw-post-body-paragraph kw kx jb ky b kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt ij bi translated">由于我们是在NextJS中构建这个应用程序，我们可以使用官方的Vanilla JS <a class="ae ne" href="https://docs.mapbox.com/mapbox-gl-js/example/" rel="noopener ugc nofollow" target="_blank"> Mapbox GL JS </a>库或者伟大的React包装器<a class="ae ne" href="https://visgl.github.io/react-map-gl/" rel="noopener ugc nofollow" target="_blank"> react-map-gl </a>。我将使用后者，因为它在我们的用例中效果很好。</p><p id="a07e" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">让我们创建一个全新的NextJS项目并安装依赖项:</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nk"><img src="../Images/64ba7911d3bb4d2d0d304c016b70c244.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2LMrBK0aJXCMe4bpjn6uCQ.png"/></div></div></figure><p id="abe6" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">让我们首先从react-map-gl中扩展与地图相关的组件，并在components/ folder中创建一些自定义组件。</p><p id="0c44" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在components/pin/index.js中，我们在标记中添加了自定义的地图图钉图标(查看这个<a class="ae ne" href="https://codesandbox.io/s/react-mapbox-example-t7xv0?file=/pages/index.js" rel="noopener ugc nofollow" target="_blank"> CodeSandbox </a>):</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/0e064d3ea45455738546f8ecbf1d620a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R3ERu6Ss42qm5OzvMm_XXw.png"/></div></div></figure><p id="db22" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">在components/marker/index.js中，我们扩展了标记组件:</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nm"><img src="../Images/c4b20eb568d2f79cd1a193d1827a5c28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LoTCYIClalhxt1gyJkcWvA.png"/></div></div></figure><p id="908b" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">最后，在components/popup/index.js中为窗体popup</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nn"><img src="../Images/c070273ca6b9d8b98b58a2f01d2e90fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ls1WOC55SOpjETPrCeySZA.png"/></div></div></figure><p id="b7ec" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">现在我们可以继续添加地图和显示标记和弹出窗口的业务逻辑。这将包括最少的样式和地图视口状态，因此它可以很容易地更新，以使用标记或表单提交的API。</p><figure class="mo mp mq mr gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nl"><img src="../Images/bf7516c761f6c64258dfff6e6c451df7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HElcQN1WmU2NKt-wxtrFqw.png"/></div></div></figure><p id="b3d8" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">这就是我们使用MapBox开发基于地图的React应用程序所需的全部内容，使用这个令人惊叹的工具还可以做更多的事情，如热图、地图转换、GeoJSON动画等。</p><p id="6e6f" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">如果你想检查这个演示项目(替换index.js中的mapboxApiAccessToken &amp; mapStyle)，这里是<a class="ae ne" href="https://codesandbox.io/s/react-mapbox-example-t7xv0?file=/pages/index.js" rel="noopener ugc nofollow" target="_blank"> CodeSandbox </a>。</p><p id="ff68" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated">查看官方网站<a class="ae ne" href="https://visgl.github.io/react-map-gl/examples" rel="noopener ugc nofollow" target="_blank">示例</a>或查看这个基于地图框的伟大工具<a class="ae ne" href="https://bike-theft-map.bikmo.com/" rel="noopener ugc nofollow" target="_blank">来提高自行车盗窃意识</a>。</p><blockquote class="no np nq"><p id="5a1f" class="kw kx nr ky b kz lu lb lc ld lv lf lg ns lw lj lk nt lx ln lo nu ly lr ls lt ij bi translated">我希望你喜欢这个关于将地图服务与Mapbox和NextJS集成的简短教程🦄！</p><p id="77db" class="kw kx nr ky b kz lu lb lc ld lv lf lg ns lw lj lk nt lx ln lo nu ly lr ls lt ij bi translated">在<a class="ae ne" href="http://alexstreza.dev/" rel="noopener ugc nofollow" target="_blank"> alexstreza.dev </a>查看更多我的<strong class="ky jc">作品</strong>。</p></blockquote><p id="6c40" class="pw-post-body-paragraph kw kx jb ky b kz lu lb lc ld lv lf lg lh lw lj lk ll lx ln lo lp ly lr ls lt ij bi translated"><em class="nr">更多内容请看</em><a class="ae ne" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nr">plain English . io</em></a></p></div></div>    
</body>
</html>
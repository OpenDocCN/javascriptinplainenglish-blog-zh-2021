<html>
<head>
<title>How to Upload Files in Node.js using Multer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä½¿ç”¨Multerä¸Šä¼ Node.jsä¸­çš„æ–‡ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/uploading-files-in-node-js-using-multer-754526aa6817?source=collection_archive---------0-----------------------#2021-11-06">https://javascript.plainenglish.io/uploading-files-in-node-js-using-multer-754526aa6817?source=collection_archive---------0-----------------------#2021-11-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9a86d2f333db34ad07fb67e610910c5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gkQuAqB6mio5nuUqyee-AA.png"/></div></div></figure><p id="c719" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨Node.jsåº”ç”¨ç¨‹åºä¸­ï¼Œå¦‚æœéœ€è¦å°†æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼ŒMulteræ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚å®ƒå¯ä»¥åœ¨ä»»ä½•JavaScriptåç«¯ä½¿ç”¨ã€‚å¯¹äºæœ¬æ–‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Expressã€‚</p><p id="644f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://www.npmjs.com/package/multer" rel="noopener ugc nofollow" target="_blank"> Multer </a>æ˜¯ä¸€ä¸ªNode.jsä¸­é—´ä»¶ï¼Œç”¨äºå¤„ç†<code class="fe ku kv kw kx b">multipart/form-data</code></p><h1 id="c34d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Multerçš„ä½¿ç”¨æ–¹æ³•:</h1><p id="20a7" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">ä½¿ç”¨Multeræœ‰å¤šç§æ–¹å¼:</p><p id="fcbd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1.æˆ‘ä»¬å°†æ–‡ä»¶ç›´æ¥ä¸Šä¼ åˆ°èŠ‚ç‚¹æœåŠ¡å™¨(åœ¨æœåŠ¡å™¨ä¸­)</p><p id="92ce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.åœ¨æ•°æ®åº“ä¸­ä¿å­˜æ–‡ä»¶æ•°æ®æˆ–base64æ•°æ®</p><p id="5a33" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.ä¿å­˜AWS S3å­˜å‚¨æ¡¶ä»¥ä¿å­˜å’Œç®¡ç†æ–‡ä»¶(ä½¿ç”¨æœåŠ¡)</p><p id="b0bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠæ–‡ä»¶ç›´æ¥ä¿å­˜åˆ°æœåŠ¡å™¨ã€‚</p></div><div class="ab cl mb mc hr md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ig ih ii ij ik"><h1 id="9b3a" class="ky kz in bd la lb mi ld le lf mj lh li lj mk ll lm ln ml lp lq lr mm lt lu lv bi translated">è®¾ç½®å¿«é€Ÿåº”ç”¨ç¨‹åº:</h1><p id="c584" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">â†’æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…åŸºæœ¬å¿«é€Ÿè®¾ç½®</p><pre class="mn mo mp mq gt mr kx ms mt aw mu bi"><span id="aff2" class="mv kz in kx b gy mw mx l my mz">express &lt;your_app_name&gt; --view=ejs</span></pre><p id="f571" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’åœ¨expressæ ¹ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…Multer:</p><pre class="mn mo mp mq gt mr kx ms mt aw mu bi"><span id="5091" class="mv kz in kx b gy mw mx l my mz">npm i multer</span></pre><p id="6736" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æ­¥éª¤1:åˆ›å»ºè·¯çº¿:</p><p id="d965" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬å¯ä»¥ä¸Šä¼ å•ä¸ªæ–‡ä»¶ä»¥åŠå¤šä¸ªæ–‡ä»¶ã€‚</p><pre class="mn mo mp mq gt mr kx ms mt aw mu bi"><span id="5de6" class="mv kz in kx b gy mw mx l my mz">var express = require("express");<br/>var router = express.Router();</span><span id="6b8b" class="mv kz in kx b gy na mx l my mz">const upload = require("../common");</span><span id="5831" class="mv kz in kx b gy na mx l my mz">/* GET home page. */<br/>router.get("/", function (req, res, next) {<br/>  res.render("index", { title: "Express" });<br/>});</span><span id="554f" class="mv kz in kx b gy na mx l my mz">// Single file Upload - image key should be passed postman</span><span id="20ac" class="mv kz in kx b gy na mx l my mz">router.post("/single", upload.single("image"), (req, res, next) =&gt; {<br/>  console.log(req.file);  // UPLOADED FILE DESCRIPTION RECEIVED<br/>  res.send("uploaded successfully");<br/>});</span><span id="274d" class="mv kz in kx b gy na mx l my mz">// Multiple files Upload - images key should be passed in postman</span><span id="a837" class="mv kz in kx b gy na mx l my mz">router.post("/multiple", upload.array("images"), (req, res) =&gt; {<br/>  console.log(req.files); // UPLOADED FILE DESCRIPTION RECEIVED<br/>  res.send({<br/>    status: "success",<br/>    message: "Files uploaded successfully",<br/>    data: req.files,<br/>  });<br/>});</span><span id="f470" class="mv kz in kx b gy na mx l my mz">module.exports = router;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/662de142e324495e93c3ffe8ca9bea70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2Srij5Se0gMQq9A2NFE3w.png"/></div></div></figure><p id="e60c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> common.js(å¤„ç†ä¸Šä¼ åŠŸèƒ½)</strong></p><p id="d0fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’è¿™é‡Œæˆ‘ä»¬å†™ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘</p><pre class="mn mo mp mq gt mr kx ms mt aw mu bi"><span id="b236" class="mv kz in kx b gy mw mx l my mz">const multer = require("multer");<br/>var fs = require("fs");</span><span id="b709" class="mv kz in kx b gy na mx l my mz">var dir = "./public/images/nov";   // PATH TO UPLOAD FILE<br/>if (!fs.existsSync(dir)) {  // CREATE DIRECTORY IF NOT FOUND<br/>  fs.mkdirSync(dir, { recursive: true });<br/>}</span><span id="ecf5" class="mv kz in kx b gy na mx l my mz">const fileStorageEngine = multer.diskStorage({<br/>  destination: (req, file, cb) =&gt; {<br/>    cb(null, dir);<br/>  },<br/>  filename: (req, file, cb) =&gt; {<br/>    cb(null, Date.now() + "-" + file.originalname);<br/>  },<br/>});</span><span id="06c1" class="mv kz in kx b gy na mx l my mz">const upload = multer({ storage: fileStorageEngine });</span><span id="2822" class="mv kz in kx b gy na mx l my mz">module.exports = upload;</span></pre><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/90ad2fa26d9b009eb97cbadc57c0f35d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HnoI87DktRv1iBVsGgIjxA.png"/></div></div></figure><p id="6b1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿è¡ŒèŠ‚ç‚¹æœåŠ¡å™¨</p><pre class="mn mo mp mq gt mr kx ms mt aw mu bi"><span id="df43" class="mv kz in kx b gy mw mx l my mz">npm start</span></pre><p id="c902" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’æˆ‘ä»¬å°†ä½¿ç”¨Postmanå¯¼å…¥æ–‡ä»¶ã€‚ä½ å¯ä»¥æŒ‰ç…§ä¸‹é¢çš„æˆªå›¾å’Œè§†é¢‘ä¸ºé‚®é€’å‘˜</p><blockquote class="nc nd ne"><p id="c8ce" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">è·¯çº¿:<a class="ae kt" href="http://localhost:5000/single" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/single</a></p><p id="f16e" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">ç±»å‹:é‚®æ”¿</p><p id="a7f2" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">æ­£æ–‡:è¡¨å•æ•°æ®ï¼Œé€‰æ‹©å…³é”®å­—ä½œä¸ºç±»å‹æ–‡ä»¶çš„å›¾åƒ</p></blockquote><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/ed32466f0fa39d9f988e43bf9ac1d80f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TE1hCyAdlsYw9RY4a46C3g.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nj"><img src="../Images/14cc9d4170b212778cee357d909e28c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFD83w4gM4AD36QQk3Z_uQ.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/9c5b4ede20560c48fbc1c4c328ab06e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IPldIHf7JBhxaFoTtHJqXg.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/aa8138b185fa048baf3cce12fc172603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FdFgqDCrbO3BtIyz6cnh8Q.png"/></div></div></figure><p id="97c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’æˆ‘ä»¬å¾—åˆ°ä¿å­˜æ–‡ä»¶çš„æ–‡ä»¶åå’Œè·¯å¾„ã€‚ç°åœ¨è®©æˆ‘ä»¬è½¬åˆ°ä»£ç åº“ä¸­çš„ä»¥ä¸‹è·¯å¾„ã€‚</p><p id="bc3b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’æˆ‘ä»¬å·²æˆåŠŸä¸Šä¼ æ–‡ä»¶</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/1c1b9f19582f2a56ac818890a53fc9e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0F71u_FHreeir-cxMnhe4Q.png"/></div></div></figure><p id="3d97" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’ç°åœ¨è®©æˆ‘ä»¬ä½¿ç”¨ç¬¬äºŒæ¡è·¯çº¿è¿›è¡Œ<strong class="jx io">å¤šæ¬¡ä¸Šä¼ </strong>:</p><blockquote class="nc nd ne"><p id="45bd" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">è·¯ç”±:<a class="ae kt" href="http://localhost:5000/single" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/m</a>multiple</p><p id="be53" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">ç±»å‹:é‚®æ”¿</p><p id="5a11" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">Body: form-dataï¼Œé€‰æ‹©é”®ä½œä¸ºç±»å‹æ–‡ä»¶çš„<strong class="jx io">å›¾åƒ</strong></p></blockquote><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/1aecfb24aab1f8f0472aa559cb76f74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQ_5MUBHf73dxipmZGBxfw.png"/></div></div></figure><p id="303a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’æˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªå¸¦æœ‰æ–‡ä»¶åå’Œè·¯å¾„çš„å›¾åƒæ•°ç»„</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/6061ff37311c4618800a67ffbd90592d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fudyAzuHBAuuAR4Pm-xUHA.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/9a1bce7d5c39df7f55935e2662858892.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O1PmXtr5Wn65kTXhgFWwTg.png"/></div></div></figure><p id="b8ba" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â†’è®©æˆ‘ä»¬æ£€æŸ¥ä»£ç åº“ä¸­çš„æ–‡ä»¶</p><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/00a6169937fe79f5a8fe10474889da10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*03w4RbTE-DcsW-yQsK3fTg.png"/></div></div></figure><figure class="mn mo mp mq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/da315f929472d814bb0e321d80b661b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*phZwt5I3P2OqIthl8PmVyw.png"/></div></div></figure><h1 id="487d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">è§†é¢‘:</h1><p id="fc31" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated"><a class="ae kt" href="https://secure.vidyard.com/organizations/1904214/players/EkWR8TTLuNCPL6vnsV6hTU?edit=true&amp;npsRecordControl=1" rel="noopener ugc nofollow" target="_blank">https://secure . vid yard . com/organizations/1904 214/players/QR 56 rbg 9 fmt qb1 sretx 2 utï¼Ÿedit = true&amp;npsRecordControl = 1</a></p><h1 id="1bde" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å­˜å‚¨åº“:</h1><p id="f353" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/AmirMustafa/upload_file_nodejs" rel="noopener ugc nofollow" target="_blank">https://github.com/AmirMustafa/export-to-excel</a></p><h1 id="faf4" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ç»“æŸè¯­:</h1><p id="0de7" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">æˆ‘ä»¬å·²ç»å­¦ä¹ äº†å¦‚ä½•åœ¨Node.jsä¸­ç›´æ¥ä¸Šä¼ æ–‡ä»¶ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åœ¨AWS S3å­˜å‚¨æ¡¶ä¸­ä¸Šä¼ æ–‡ä»¶ï¼Œä»¥åŠåœ¨æ•°æ®åº“ä¸­ä¸Šä¼ base 64æ•°æ®ã€‚</p><blockquote class="nc nd ne"><p id="3041" class="jv jw nf jx b jy jz ka kb kc kd ke kf ng kh ki kj nh kl km kn ni kp kq kr ks ig bi translated">è°¢è°¢ä½ ä¸€ç›´åšæŒåˆ°æœ€åğŸ™Œã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« æˆ–è€…å­¦åˆ°äº†æ–°çš„ä¸œè¥¿ï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„åˆ†äº«æŒ‰é’®æ¥æ”¯æŒæˆ‘ï¼Œè®©æ›´å¤šçš„äººäº†è§£æˆ‘å’Œ/æˆ–åœ¨<a class="ae kt" href="https://twitter.com/amir__mustafa" rel="noopener ugc nofollow" target="_blank"> Twitter </a>ä¸Šå…³æ³¨æˆ‘ï¼Œçœ‹çœ‹æˆ‘åœ¨é‚£é‡Œå­¦åˆ°å’Œåˆ†äº«çš„å…¶ä»–æŠ€å·§ã€æ–‡ç« å’Œä¸œè¥¿ã€‚</p></blockquote><div class="no np gp gr nq nr"><a href="https://twitter.com/amir__mustafa" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd io gy z fp nw fr fs nx fu fw im bi translated">å…³æ³¨Amir Mustafaçš„JavaScriptã€TypeScriptå’ŒAWSå†…å®¹ã€‚</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">twitter.com</h3></div></div><div class="nz l"><div class="oa l ob oc od nz oe jt nr"/></div></div></a></div><p id="66e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nf">æ›´å¤šå†…å®¹å°½åœ¨</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nf">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
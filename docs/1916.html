<html>
<head>
<title>What is the Best Way to Build a Login Page?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建登录页面的最佳方式是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-login-page-whats-the-best-way-to-build-it-1c4bdf41092a?source=collection_archive---------1-----------------------#2021-04-22">https://javascript.plainenglish.io/a-login-page-whats-the-best-way-to-build-it-1c4bdf41092a?source=collection_archive---------1-----------------------#2021-04-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="e3cc" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何优化一个非常普通的页面的性能——这个页面可能会很快变得复杂。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/9053abe674f594b3ab2ff556f8ced24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*ACC_V4uMygHZY3pVM_LCrg.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Basic Login UI</figcaption></figure><h1 id="248d" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">动机</h1><p id="b24c" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">作为一名前端开发人员，我在过去的3.5年里一直在构建UI。在我工作过的大多数应用程序中，都有一个进入/登录页面。我已经使用普通HTML和JavaScript、Polymer、React和React Native构建了登录组件。</p><p id="5d7a" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">每次，目的都是用干净的代码创建一个简单的页面。毕竟，它看起来很简单，对吗？一个电子邮件输入框，一个密码输入框，最后是一个登录按钮。</p><p id="e923" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">外表可能具有欺骗性，因为一旦我们开始适应各种用例及条件，这个页面很容易变得复杂。因此，让我们直接进入主题，浏览一个示例。</p><h1 id="74b6" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">设置</h1><p id="9143" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">我使用<a class="ae mh" href="https://nextjs.org/docs/api-reference/create-next-app" rel="noopener ugc nofollow" target="_blank"> create-next-app </a>创建了一个简单的<a class="ae mh" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a> app。添加了一个简单的登录页面，包含电子邮件、密码和提交按钮。我没有纠结于样式和CSS，而是在本文的范围内使用了material UI。</p><div class="kd ke kf kg gt ab cb"><figure class="mi kh mj mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/cd39b942e4a8ffcec9f7c6d7a45c6cdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*T3YNfLzDgbOFYZqdIJ3ESw.png"/></div></figure><figure class="mi kh ms mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/366d325a769a4085568f47128bf4b109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*C1wQe6B4L1UHXBilhO5zYQ.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk mt di mu mv">The initial code for the login page.</figcaption></figure></div><p id="1170" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">正如你在上面的图片中看到的，有两个输入框，一个提交按钮，非常简洁的样式。我认为这是你日常登录页面的基本表现。</p><p id="39fd" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">由于我们使用React，我使用了两个useState变量来处理电子邮件和密码，并使用一个submit按钮来模拟登录过程。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/83e2e4e6d2ea5824841494f67393cba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:872/format:webp/1*yEUoXaaneM4psHryELf2kg.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">The login Page UI</figcaption></figure><p id="6f49" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">这就是它看起来的样子，和你在本文顶部看到的一样。</p><h1 id="e75f" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">并发症</h1><p id="11fd" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">既然我们已经创建了基本的UI，我们必须开始考虑所有的用例:验证输入、显示错误状态、登录时的可视指示器等。让我们继续将它们添加到我们的页面中。</p><div class="kd ke kf kg gt ab cb"><figure class="mi kh mj mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/d2c52e3aac4f15318cbb76875cea6a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:762/format:webp/1*dpvOfufPOglgCbQ-1GCEHA.png"/></div></figure><figure class="mi kh ms mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/3d75325ab214880c4b87490cc38d9394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*6d1csbR0kyS_m-i8XiWMsg.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk mt di mu mv">The code after adding other fields.</figcaption></figure></div><p id="6474" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我们添加了以下内容:</p><ol class=""><li id="19fd" class="mx my in li b lj mc lm md lp mz lt na lx nb mb nc nd ne nf bi translated">直观显示成功登录的小吃店。</li><li id="0287" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">两个字段的错误状态和错误处理。</li><li id="3293" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">提交时使用正则表达式对电子邮件和密码进行输入验证。</li></ol><p id="6ab0" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">正如你所看到的，它变成了一个更大的页面，只有这些非主要的功能，我们现在在页面上有5个状态变量。</p><p id="6988" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">现在，让我们来衡量性能。</p><h1 id="c219" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">过程</h1><p id="a2e1" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">为了简单起见，我在我的登录组件上添加了一个简单的<strong class="li io">控制台。count </strong>，以测量登录过程中的重新渲染量。</p><p id="5fb3" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">然后，我经历了以下步骤:</p><ol class=""><li id="7dc1" class="mx my in li b lj mc lm md lp mz lt na lx nb mb nc nd ne nf bi translated">提交两个空白字段。</li><li id="6b20" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">输入电子邮件:电子邮件，提交。</li><li id="c3e0" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">输入电子邮件:email@website.com，提交。</li><li id="b995" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">添加密码:1234，提交。</li><li id="d80b" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">添加密码1234ABC@，提交。</li><li id="d80a" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">控制台中渲染计数的数量。</li></ol><p id="46f3" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我发现这种方法是明智的，因为它为代码提供了一个机会来运行我处理过的所有条件，即测量整个流程。</p><p id="0798" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">当我检查控制台时，这个过程的重新渲染总数是惊人的<strong class="li io"> 33。</strong></p><p id="7e38" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">33次，整个页面被重新渲染，主要是因为每次我在文本字段中输入一个值，整个页面都要重新渲染，这要感谢状态。可以想象，在真实的页面中，这将是一个巨大的性能难题，因为有更多的代码和更多的状态变量！</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><h1 id="fb67" class="ko kp in bd kq kr ns kt ku kv nt kx ky jt nu ju la jw nv jx lc jz nw ka le lf bi translated">另一种方法</h1><p id="d0b8" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">另一种方法是使用Refs而不是state变量，并将TextField移到一个单独的组件中，以保持代码干燥。</p><div class="kd ke kf kg gt ab cb"><figure class="mi kh nx mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/38fc989964d412825a7ae43f45e4b6d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*fIu1WiML41sZt0eO8E7BxQ.png"/></div></figure><figure class="mi kh ny mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/b7ceb8eb76e6093594a8ae9c61f1dced.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*HT1x8qHBysGfvBiCBxD9nw.png"/></div></figure><figure class="mi kh nz mk ml mm mn paragraph-image"><div role="button" tabindex="0" class="mo mp di mq bf mr"><img src="../Images/232aaf674933854ada1258a223a1b671.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*rGsCfCIqYHhIHAQq63Q8zQ.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk oa di ob mv">L to R: The login page functions, the login page UI, and the Input component.</figcaption></figure></div><p id="b4fb" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">你可以在这里看到更新的代码。需要注意的主要事情是，我们现在使用ref来访问输入字段的值，而不是在登录页面中使用state。使用React的<strong class="li io"> forwardRef </strong>和<strong class="li io"> useImperativeHandle，</strong>我们能够接收我们定义的输入组件的值和功能，并根据需要在父组件中使用它们。</p><p id="c78f" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">关键是，无论何时修改输入组件，只有那个特定的组件会重新呈现，而其他输入(和页面的其余部分)保持不变。</p><p id="034e" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">虽然这种特殊情况下的性能提升可能微乎其微，但我们可以想象在包含更多组件的大型应用程序中的性能提升。</p><p id="a0e4" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">现在，让我们在与上一个相同的测试下运行这个新的登录页面，完成以下任务:</p><ol class=""><li id="3f29" class="mx my in li b lj mc lm md lp mz lt na lx nb mb nc nd ne nf bi translated">添加邮箱:发邮件，提交。</li><li id="47c3" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">添加邮箱:email@website.com，提交。</li><li id="59c5" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">添加密码:1234，提交。</li><li id="98ac" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">添加密码1234ABC@，提交。</li><li id="f2fc" class="mx my in li b lj ng lm nh lp ni lt nj lx nk mb nc nd ne nf bi translated">控制台中渲染计数的数量。</li></ol><p id="3a0a" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">我再次检查控制台来查看渲染的数量，在这里我们看到了巨大的差异:<strong class="li io"> 2。</strong></p><p id="4d74" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">由于状态变量的本地化，整个页面在整个过程中只呈现了两次。</p><p id="0063" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">使用这种组件和引用的方法，我们将能够以更高效的方式构建登录页面。</p><p id="70b5" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated">感谢阅读！</p></div><div class="ab cl nl nm hr nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ig ih ii ij ik"><p id="fa73" class="pw-post-body-paragraph lg lh in li b lj mc jo ll lm md jr lo lp me lr ls lt mf lv lw lx mg lz ma mb ig bi translated"><em class="oc">更多内容请看</em><a class="ae mh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="oc">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Send Draft.js data to a server and fetch it with React hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Draft.js数据发送到服务器，并使用React钩子获取它</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/send-draft-js-data-to-a-server-and-fetch-it-with-react-hooks-735f20cc2b5c?source=collection_archive---------1-----------------------#2021-02-10">https://javascript.plainenglish.io/send-draft-js-data-to-a-server-and-fetch-it-with-react-hooks-735f20cc2b5c?source=collection_archive---------1-----------------------#2021-02-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/bcd4bd54ed053a27349f396d39e2586b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U_M_ixQPH3FI-ELof-DVUQ.png"/></div></div></figure><p id="926d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本教程将介绍使用POST请求向服务器发送Draft.js数据的步骤，以及如何使用GET请求检索和显示该数据。</p><p id="3f65" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我使用的是Express后端、MongoDB数据库和React前端。这需要对Draft.js有一些基本的了解——有很多很好的设置指南。</p><p id="3aae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">依赖关系:</strong><code class="fe kt ku kv kw b">react</code><code class="fe kt ku kv kw b">axios</code><code class="fe kt ku kv kw b">draft-js</code></p><p id="25bd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">结构:</strong></p><ul class=""><li id="8b6e" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">用Draft.js编辑器→ <code class="fe kt ku kv kw b">useSubmit() </code>钩子添加Post组件来处理POST请求。</li><li id="bf10" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">显示帖子的PostGallery组件→ <code class="fe kt ku kv kw b">usePosts()</code>钩子处理获取帖子。</li></ul><h2 id="d57c" class="ll lm in bd ln lo lp dn lq lr ls dp lt kg lu lv lw kk lx ly lz ko ma mb mc md bi translated">设置获取和发布路线的先决条件</h2><p id="47a4" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">首先，确保您已经建立了可以接受POST请求的路由。我将从Draft.js发送笔记，因此我的路线被称为<code class="fe kt ku kv kw b">/posts</code>。解释如何设置后端超出了本文的范围，但是模式、路由和控制器都在repo中。</p><blockquote class="mj mk ml"><p id="4c2b" class="jv jw mm jx b jy jz ka kb kc kd ke kf mn kh ki kj mo kl km kn mp kp kq kr ks ig bi translated">Express用户:确保在发出POST请求之前已经设置了主体解析中间件:</p></blockquote><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="391c" class="ll lm in kw b gy my mz l na nb">app.use(express.json());</span><span id="bad8" class="ll lm in kw b gy nc mz l na nb">app.use(express.urlencoded({extended: true}));</span></pre><blockquote class="mj mk ml"><p id="3649" class="jv jw mm jx b jy jz ka kb kc kd ke kf mn kh ki kj mo kl km kn mp kp kq kr ks ig bi translated">最上面一行允许您在请求体中发送JSON对象，最下面一行允许您发送字符串、数组和嵌套对象。</p></blockquote><h1 id="130d" class="nd lm in bd ln ne nf ng lq nh ni nj lt nk nl nm lw nn no np lz nq nr ns mc nt bi translated">1.POST Draft.js数据</h1><h2 id="67bf" class="ll lm in bd ln lo lp dn lq lr ls dp lt kg lu lv lw kk lx ly lz ko ma mb mc md bi translated">使用POST请求将Draft.js数据发送到服务器</h2><p id="f573" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">当我单击React界面上的保存按钮时，我想提交我的数据。我将为该按钮附加一个发送POST请求的函数。我将在提交时将它保存在父组件中。</p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="5e90" class="ll lm in kw b gy my mz l na nb">import React from 'react';<br/>import RichEditor from '../components/editor/RichEditor';<br/>import Button from '../components/Button';<br/>import useSubmit from '../hooks/useSubmit';<br/>import useRichEditor from '../hooks/useRichEditor';</span><span id="6f3b" class="ll lm in kw b gy nc mz l na nb">const Add = () =&gt; {</span><span id="e243" class="ll lm in kw b gy nc mz l na nb">const {<br/>  editorState,<br/>  onNoteChange,<br/>  clearEditor,<br/>  mapKeyToEditorCommand,<br/>  handleKeyCommand,<br/>  toggleInlineStyle,<br/>  toggleBlockType<br/> } = useRichEditor();</span><span id="dcda" class="ll lm in kw b gy nc mz l na nb">const { submitPage } = useSubmit();</span><span id="3f43" class="ll lm in kw b gy nc mz l na nb">const <strong class="kw io">handleSubmit</strong> = async (e) =&gt; {<br/>   e.preventDefault();<br/>   <strong class="kw io">const data = editorState.getCurrentContent();</strong><br/>   await submitPage(data);<br/>};</span><span id="2e20" class="ll lm in kw b gy nc mz l na nb">return (<br/>   &lt;form <strong class="kw io">handleSubmit={handleSubmit}</strong>&gt;<br/>      &lt;RichEditor <br/>          editorState={editorState}<br/>          onNoteChange={onNoteChange}<br/>          clearEditor={clearEditor}<br/>          mapKeyToEditorCommand={mapKeyToEditorCommand}<br/>          handleKeyCommand={handleKeyCommand}<br/>          toggleInlineStyle={toggleInlineStyle}<br/>          toggleBlockType={toggleBlockType}<br/>         /&gt;<br/>        &lt;Button kind="primary" type="submit" label="add"/&gt;<br/>   &lt;/form&gt;<br/>  );<br/>}</span><span id="19c9" class="ll lm in kw b gy nc mz l na nb">export default Add;</span></pre><p id="14f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在提交时，我们调用<code class="fe kt ku kv kw b">e.preventDefault()</code>来防止页面刷新，然后用<code class="fe kt ku kv kw b">editorState.getCurrentContent()</code>获取编辑器中的所有当前内容。然后我们调用自定义钩子中的handleSubmit函数。</p><p id="baf3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们编写附加到保存按钮的函数，<strong class="jx io"> handleSave() </strong>这是我们实际发送数据的部分。我所有的API调用都使用Axios。Axios是一个用于发出HTTP请求的库；<a class="ae nu" href="https://www.digitalocean.com/community/tutorials/react-axios-react" rel="noopener ugc nofollow" target="_blank">本</a>是使用React的良好入门。</p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="cb13" class="ll lm in kw b gy my mz l na nb">import { useState } from 'react';<br/>import axios from 'axios';<br/>import { convertToRaw } from 'draft-js';</span><span id="10df" class="ll lm in kw b gy nc mz l na nb">export default function useSubmit() {</span><span id="89ee" class="ll lm in kw b gy nc mz l na nb">const submitPage = async (data) =&gt; {<br/><strong class="kw io">     const content = JSON.stringify(convertToRaw(data));<br/></strong>     <br/>     return axios.post('/posts', {<br/>        content<br/>     }).catch(err =&gt; console.log(err));<br/>   }</span><span id="1051" class="ll lm in kw b gy nc mz l na nb">  return {<br/>    submitPage<br/>  }<br/>}</span></pre><p id="fc1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们将这个POST请求分成几个部分:</p><ol class=""><li id="fdb3" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks nv ld le lf bi translated">我在editorState上调用内置的Draft.js方法<code class="fe kt ku kv kw b"><a class="ae nu" href="https://draftjs.org/docs/api-reference-editor-state/#getcurrentcontent" rel="noopener ugc nofollow" target="_blank">getCurrentContent()</a></code>。该方法返回<code class="fe kt ku kv kw b"><a class="ae nu" href="https://draftjs.org/docs/api-reference-content-state" rel="noopener ugc nofollow" target="_blank">currentState</a></code>对象，该对象包含文本及其所有样式。</li><li id="d84b" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks nv ld le lf bi translated">我使用内置的Draft.js方法<code class="fe kt ku kv kw b">convertToRaw()</code>，它将内容状态转换为包含内容块的js对象。在此基础上，我使用了方法<code class="fe kt ku kv kw b">JSON.stringify()</code>，它将JS对象转换成JSON字符串。作为一个字符串，它现在是可存储的。</li><li id="26b2" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks nv ld le lf bi translated">我设置了我的axios请求。这些可以用几种方式格式化；对于POST请求，我更喜欢使用这种类似对象的格式。我指定了<code class="fe kt ku kv kw b">method</code>、<code class="fe kt ku kv kw b">url</code>和端点、<code class="fe kt ku kv kw b">data</code>和<code class="fe kt ku kv kw b">headers</code>。请注意，我的数据对象是这样格式化的:</li></ol><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="cf1b" class="ll lm in kw b gy my mz l na nb">{ <br/>   <strong class="kw io">content<br/></strong>}</span></pre><p id="a443" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因为它反映了我的数据对象是如何在Express中的createNote() API调用中设置的:</p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="f9c7" class="ll lm in kw b gy my mz l na nb">res.status(201).json({<br/>     status: 'success',<br/>     data: {<br/>        <strong class="kw io">content</strong>: newNote<br/>       }<br/>    })</span></pre><p id="4689" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些必须对应，以便数据可以正确路由！</p><p id="6c52" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们为POST请求获取一些数据。我将进入我的Draft.js编辑器，编写一些要发送的示例数据:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nw"><img src="../Images/b4be27652cc081617660f65ad189274a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oN2uMRx1JNqAsOPfmXQ2fQ.png"/></div></div></figure><p id="2df2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将为该笔记添加一些格式，以便在我发布这些数据并在以后获取时确保保留我的格式。我将添加一些粗体文本和项目符号列表:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nx"><img src="../Images/02ee46258077904b65e104877da78505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LxLtGZQO0Hwee3lsYSGV_g.png"/></div></div><figcaption class="ny nz gj gh gi oa ob bd b be z dk">Inline style: bold, block style: unordered list</figcaption></figure><p id="c03f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当通知发布后，它也会出现在我的数据库中，如下所示:</p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="1719" class="ll lm in kw b gy my mz l na nb">content: {"blocks":<br/>[<br/>{"key":"4rh99","text":"It's very gray today. I ate cornflakes ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},<br/>{"key":"fdh6","text":"honey","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"13aee","text":"a banana","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"bb1p5","text":"and peanutbutter ","type":"unordered-list-item","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"8j2ad","text":"for breakfast. ","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"fjio6","text":"","type":"unstyled","depth":0,"inlineStyleRanges":[],"entityRanges":[],"data":{}},{"key":"eblll","text":"Valentine's day is this weekend. ","type":"unstyled","depth":0,"inlineStyleRanges":[{"offset":0,"length":16,"style":"BOLD"}],"entityRanges":[],"data":{}}],"entityMap":{}}</span></pre><p id="ca2e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是块图，它描绘了不同的内容块，就像段落一样。如果你通读了这篇文章，你会发现Draft.js是如何设计和存储数据的。</p><h1 id="9e3c" class="nd lm in bd ln ne nf ng lq nh ni nj lt nk nl nm lw nn no np lz nq nr ns mc nt bi translated">2.获取Draft.js数据</h1><p id="a67b" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated">在前端显示Draft.js数据并不像获取数据并将其映射到组件那样简单。但并不难。</p><p id="1629" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们使用GET请求和之前在API中创建的<code class="fe kt ku kv kw b">/posts </code>路由从数据库中检索Draft.js数据。</p><p id="4d42" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是获取文章的自定义挂钩，将与PostGallery组件一起使用来显示文章。</p><p id="7509" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> &gt; usePosts.js </strong></p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="acae" class="ll lm in kw b gy my mz l na nb">import { useState } from 'react';<br/>import axios from 'axios';<br/>import { convertToRaw } from 'draft-js';</span><span id="6852" class="ll lm in kw b gy nc mz l na nb">export default function usePosts() {</span><span id="4f96" class="ll lm in kw b gy nc mz l na nb">const [posts, setPosts] = useState(null);</span><span id="8e91" class="ll lm in kw b gy nc mz l na nb">const getPosts = async (page, add) =&gt; {<br/>   return axios.get(`/posts/`)<br/>       .then(res =&gt; {<br/>           const { docs } = res.data.data;<br/>           setPosts(docs);<br/>      }).catch(err =&gt; console.log(err));<br/>  }</span><span id="7b88" class="ll lm in kw b gy nc mz l na nb">return {<br/>   posts,<br/>   getPosts<br/>  }<br/>}</span></pre><p id="86b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个GET请求获取存储在<code class="fe kt ku kv kw b">/posts</code>路径的数据，这些数据都是注释，并将这些文档设置为<code class="fe kt ku kv kw b">posts</code>状态。但是记住，这些内容是存储在一个对象中的。在对象中，内容是包含注释内容块的JSON字符串。</p><p id="c868" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在文章库中，内容必须经过适当的解析。我们将在Draft.js编辑器对象中显示文章——与用来写文章的对象相同，但是设置了属性<code class="fe kt ku kv kw b">readOnly</code>,因此显示的注释不能被编辑。</p><p id="74f1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用编辑器显示注释，除了编写注释之外，还有几个优点:</p><ul class=""><li id="203c" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">更容易显示所有笔记的风格。</li><li id="9129" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">如果帖子显示后是可编辑的，那么<code class="fe kt ku kv kw b">readOnly</code>属性可以切换到<code class="fe kt ku kv kw b">false</code>。</li></ul><p id="676a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> &gt; PostGallery.js </strong></p><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="579f" class="ll lm in kw b gy my mz l na nb">import React, { useEffect } from 'react';<br/>import { Editor, EditorState, convertFromRaw } from 'draft-js';<br/>import usePosts from '../hooks/usePosts';</span><span id="4f4e" class="ll lm in kw b gy nc mz l na nb">const PostGallery = () =&gt; {</span><span id="7e2f" class="ll lm in kw b gy nc mz l na nb">const { posts, getPosts } = usePosts();</span><span id="a738" class="ll lm in kw b gy nc mz l na nb">useEffect(() =&gt; { <br/>    getPosts(); <br/>}, []);</span><span id="5939" class="ll lm in kw b gy nc mz l na nb">return(<br/>   &lt;div className="posts"&gt;<br/>   {pages &amp;&amp; pages.map(el =&gt; {<br/>   <strong class="kw io"> const contentState = convertFromRaw(JSON.parse(el.content));<br/>    const editorState = EditorState.createWithContent(contentState);</strong><br/>       return(<br/>        &lt;div style={{paddingTop:'3rem'}}&gt;<br/>          &lt;Editor editorState={editorState} <strong class="kw io">readOnly={true}<br/>          </strong>/&gt;<br/>       &lt;/div&gt;<br/>        )<br/>     })}<br/>  &lt;/div&gt;<br/>)<br/>};</span><span id="6ca2" class="ll lm in kw b gy nc mz l na nb">export default PostGallery; </span></pre><p id="41cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该组件是:</p><ul class=""><li id="d8f4" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">在<code class="fe kt ku kv kw b">useEffect</code>钩子的自定义钩子中调用发出GET请求的函数。</li><li id="0e2d" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">使用<code class="fe kt ku kv kw b">el.content</code>从注释对象中获取注释内容，使用<code class="fe kt ku kv kw b">JSON.parse</code>将其从字符串状态转换回对象。然后应用<code class="fe kt ku kv kw b">convertFromRaw</code>，Draft.js函数将带有内容块的对象转换回可读文本。</li><li id="1020" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">初始化Draft.js编辑器，并将解析后的内容设置为编辑器的初始编辑状态。</li><li id="582b" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">如前所述，将编辑器设置为<code class="fe kt ku kv kw b">readOnly</code>，因此无法编辑。</li></ul><p id="b04c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它将作为文本块出现在前端(不可编辑)，并保留丰富的样式。如果您保存了其他属性，如文章作者、创建日期等。他们可以很容易地在这里出现。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oc"><img src="../Images/53ba71641a34443504ea2108b1fc6f85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rKu3HaVUwTff2T2CeZVxbQ.png"/></div></div></figure><p id="4f8c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是发布和获取Draft.js数据的全部内容。</p><h2 id="f85b" class="ll lm in bd ln lo lp dn lq lr ls dp lt kg lu lv lw kk lx ly lz ko ma mb mc md bi translated">摘要</h2><p id="4a38" class="pw-post-body-paragraph jv jw in jx b jy me ka kb kc mf ke kf kg mg ki kj kk mh km kn ko mi kq kr ks ig bi translated"><strong class="jx io">发布</strong></p><ul class=""><li id="372a" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">使用<code class="fe kt ku kv kw b">editorState.getCurrentContent()</code>从编辑器状态获取当前内容，并将其保存到一个变量中。</li><li id="1203" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">用这些方法将当前状态转换成字符串:<code class="fe kt ku kv kw b">JSON.stringify(convertToRaw(data));</code></li></ul><p id="df6f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">获取</strong></p><ul class=""><li id="9f93" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">在设置为<code class="fe kt ku kv kw b">readOnly</code>的Draft.js编辑器中显示数据</li><li id="98b2" class="kx ky in jx b jy lg kc lh kg li kk lj ko lk ks lc ld le lf bi translated">从服务器获取文章，然后用。</li></ul><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="a0e7" class="ll lm in kw b gy my mz l na nb"><strong class="kw io">   </strong> const contentState = convertFromRaw(JSON.parse(el.content));<br/>    const editorState = EditorState.createWithContent(contentState);</span></pre><ul class=""><li id="c5ce" class="kx ky in jx b jy jz kc kd kg kz kk la ko lb ks lc ld le lf bi translated">在编辑器中显示它，如下所示:</li></ul><pre class="mq mr ms mt gt mu kw mv mw aw mx bi"><span id="f8d2" class="ll lm in kw b gy my mz l na nb">&lt;Editor editorState={editorState} <strong class="kw io">readOnly={true}</strong></span></pre></div></div>    
</body>
</html>
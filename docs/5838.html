<html>
<head>
<title>Set Up Web3 in Your React App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React应用程序中设置Web3</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/set-up-web3-in-your-react-app-dec6d6f45b4d?source=collection_archive---------0-----------------------#2021-12-14">https://javascript.plainenglish.io/set-up-web3-in-your-react-app-dec6d6f45b4d?source=collection_archive---------0-----------------------#2021-12-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0563" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">这是在React应用程序中设置web3的快速指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ec9ac5c7c93806a43322188db6d5b558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fIp-NQYPmKrerg6hcMQ1EQ.png"/></div></div></figure><h2 id="3812" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">在本指南中，您将能够:</h2><p id="efbc" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">I .检查<strong class="lm io">用户是否连接了</strong>他们的钱包。<br/>二世。<strong class="lm io">连接用户钱包</strong>，获取账户详情。<br/>三。允许用户授权并从他们的钱包中发送交易。<br/>四。断开/注销用户。</p><h2 id="3629" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">你为什么要将web3添加到React应用程序中？</h2><ol class=""><li id="82f8" class="md me in lm b ln lo lq lr kx mf lb mg lf mh mc mi mj mk ml bi translated">赚取直接收入。你可以直接接受客户的付款。</li><li id="c4e7" class="md me in lm b ln mm lq mn kx mo lb mp lf mq mc mi mj mk ml bi translated">认证和授权。<br/>您将能够使用用户的钱包来验证用户，从而<strong class="lm io">根据他们的钱包状态来授权访问</strong>。</li><li id="37ec" class="md me in lm b ln mm lq mn kx mo lb mp lf mq mc mi mj mk ml bi translated">分散身份。<br/>您将能够在您的应用中利用基于钱包地址的分散身份，例如<a class="ae mr" href="https://ens.domains/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io">。ETH域名</strong> </a>以及后来关于NFT的简介图片。</li></ol><h1 id="c455" class="ms kp in bd kq mt mu mv kt mw mx my kw jt mz ju la jw na jx le jz nb ka li nc bi translated">开始使用。</h1><p id="456a" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">我们将创建一个简单的react应用程序。对于这个例子，我们将创建一个铸造网站，验证用户的钱包，并允许他们铸造一个NFT。</p><h2 id="29a1" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">要<a class="ae mr" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">创建一个react应用，</a>运行:</h2><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="2f37" class="ko kp in ne b gy ni nj l nk nl">npx create-react-app react-minting-website</span></pre><p id="47bb" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">现在运行下面的代码，在http://localhost:3000 为应用程序提供本地服务</p><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="a1d5" class="ko kp in ne b gy ni nj l nk nl">npm start</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nr"><img src="../Images/5fc9e6bfbdb93ff08b73cb1d712ade11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RW4Ofe3xQ9y547xJG7YNag.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">view app at http://localhost:3000</figcaption></figure><h2 id="221f" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">更新用户界面</h2><p id="8245" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">我们将为铸币网站创建如下所示的用户界面:<br/> <a class="ae mr" href="https://geoffmahugu.github.io/react-minting-template/" rel="noopener ugc nofollow" target="_blank">演示链接</a></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nw"><img src="../Images/a704680e588f0ed6f16ea186b076d145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZsYzSWFCYzipm11JyrokuQ.gif"/></div></div></figure><p id="8d8a" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">将下面的代码复制并粘贴到<strong class="lm io"> App.css </strong>中以获得样式。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">App.css</figcaption></figure><p id="e94e" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">将下面的代码复制粘贴到<strong class="lm io"> App.js </strong>中，得到jsx布局。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">App.css</figcaption></figure><h2 id="8e87" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">正在安装依赖项。</h2><ol class=""><li id="6115" class="md me in lm b ln lo lq lr kx mf lb mg lf mh mc mi mj mk ml bi translated"><a class="ae mr" href="https://web3js.readthedocs.io/en/v1.5.2/getting-started.html" rel="noopener ugc nofollow" target="_blank">安装web3.js </a></li></ol><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="0f9d" class="ko kp in ne b gy ni nj l nk nl">npm i web3</span></pre><p id="1794" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">2.Install @web3-react <br/>这个库将使我们能够轻松地将react应用程序与web3集成，并且还可以利用我们可以监听的钩子。</p><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="ab6b" class="ko kp in ne b gy ni nj l nk nl">npm i @web3-react/core @web3-react/injected-connector</span></pre><h2 id="eb98" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">配置Web3连接器。</h2><p id="95c2" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">现在我们已经准备好了所有的包，我们可以开始配置web3连接器了。<br/>在根文件夹<strong class="lm io"> <em class="nz">(。/src) </em> </strong>，创建钱包文件夹<strong class="lm io"> <em class="nz">(。/src/wallet) </em> </strong>它将包含连接到web3的配置。</p><p id="3fbb" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">在<strong class="lm io"> <em class="nz">内创建<strong class="lm io"> Connect.js </strong>文件。/src/wallet </em> </strong>文件夹，粘贴下面的内容。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Connector.js</figcaption></figure><p id="e4f3" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated"><strong class="lm io">设置Web3提供商</strong></p><p id="dd76" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">为了访问全局web3对象和钩子，我们需要在<strong class="lm io">中设置web3提供者。/src/index.js </strong>文件通过用<strong class="lm io">&lt;web 3 react provider&gt;</strong>包装<strong class="lm io">App&gt;</strong>组件</p><p id="621f" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">更新<strong class="lm io">。/src/index.js </strong>如下图。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">index.js</figcaption></figure><h1 id="f156" class="ms kp in bd kq mt mu mv kt mw mx my kw jt mz ju la jw na jx le jz nb ka li nc bi translated">连接到钱包</h1><p id="a515" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">为了连接到钱包，我们需要更新<strong class="lm io"> App.js </strong>文件，因为它包含了我们的铸造按钮。</p><ol class=""><li id="db84" class="md me in lm b ln nm lq nn kx oa lb ob lf oc mc mi mj mk ml bi translated"><strong class="lm io">导入依赖关系</strong></li></ol><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="d355" class="ko kp in ne b gy ni nj l nk nl">import { useWeb3React } from "@web3-react/core";</span><span id="65ce" class="ko kp in ne b gy od nj l nk nl">import { injected } from "./wallet/Connector";</span><span id="b854" class="ko kp in ne b gy od nj l nk nl">import web3 from "web3";</span></pre><p id="a7c6" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated"><strong class="lm io"> 2。添加web3React钩子</strong></p><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="b54a" class="ko kp in ne b gy ni nj l nk nl">const { active, account, library, activate,deactivate } = useWeb3React()</span></pre><p id="ac89" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">—<strong class="lm io">活动</strong>属性<strong class="lm io"> </strong>返回一个布尔值，允许我们检查用户是否连接了他们的钱包。<br/>—<strong class="lm io">帐户</strong>属性返回用户帐户(或。eth名称)。<br/>—<strong class="lm io">库</strong>属性为我们提供了web3React函数，我们可以调用这些函数来与区块链/智能合约进行交互。<br/>—<strong class="lm io">激活</strong>属性是我们为了验证用户钱包而调用的函数。<br/>—<strong class="lm io">停用</strong>属性是我们将调用来注销用户的函数。</p><p id="cf3b" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated"><strong class="lm io"> 3。添加钱包连接功能。</strong></p><p id="8ba3" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">为了连接到钱包，我们将在App组件中创建一个<strong class="lm io">连接函数</strong>，如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="f23d" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">为了绑定连接功能，让我们更新<strong class="lm io">薄荷按钮</strong>，如下所示:</p><pre class="kd ke kf kg gt nd ne nf ng aw nh bi"><span id="865a" class="ko kp in ne b gy ni nj l nk nl">&lt;button className="main-mint-btn" onClick={connect} &gt;Mint&lt;/button&gt;</span></pre><p id="4f3e" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">点击<strong class="lm io">薄荷按钮</strong>，用户将能够使用他们的钱包进行身份验证。(在这个例子中，我使用的是<a class="ae mr" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>，但是你可以使用任何浏览器钱包)</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nw"><img src="../Images/d69c2386a6bac3df0d96e35054e24a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zirbyVWrI21ydNTc4Gu_aQ.gif"/></div></div></figure><p id="1789" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">接下来，我们将创建一些模板逻辑，仅当用户通过身份验证时按钮才可用，并提示未通过身份验证的用户使用他们的钱包进行连接，如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nw"><img src="../Images/467734ed8f9d38ab6cffa960fb31c40d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*kpTyYyn3Oa6XwzSm_tj30g.gif"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk">Prompt user to connect</figcaption></figure><h2 id="51e8" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">铸币/借记账户功能。</h2><p id="0127" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls kx lt lu lv lb lw lx ly lf lz ma mb mc ig bi translated">为了向账户收费，我们需要创建一个M <strong class="lm io">打印函数</strong>，提示用户允许购买资产。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="2a89" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">要绑定薄荷功能，请更新薄荷按钮，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="bf13" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">要对其进行全面测试，请单击mint来启用metamask进行事务处理。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oe"><img src="../Images/e7850c4f68145798a8305162e4c27240.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aSuJm2DDp_c3JfiuZHSKHQ.png"/></div></div><figcaption class="ns nt gj gh gi nu nv bd b be z dk"><strong class="bd of">Click Reject to cancel the transaction.</strong></figcaption></figure><p id="9237" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated"><strong class="lm io">注销用户</strong> <br/>要注销用户，只需<strong class="lm io">停用</strong>帐户实例。您可以创建一个断开功能，如下所示:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div></figure><p id="e45d" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">随着我们看到越来越多的人采用区块链技术，我认为我们作为软件开发人员有必要装备自己必要的工具来帮助企业过渡到web3。</p><p id="6902" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">希望你学到了一些新东西，全部代码都在这个<a class="ae mr" href="https://github.com/GeoffMahugu/react-minting-template" rel="noopener ugc nofollow" target="_blank"> GitHub链接</a>上。</p><p id="621b" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated">对于所有区块链的解决方案，请通过geoffreymahugu@gmail.com<strong class="lm io">联系我</strong></p><p id="a7d2" class="pw-post-body-paragraph lk ll in lm b ln nm jo lp lq nn jr ls kx no lu lv lb np lx ly lf nq ma mb mc ig bi translated"><em class="nz">更多内容看</em> <a class="ae mr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lm io"> <em class="nz">说白了就是</em> </strong> </a> <strong class="lm io"> <em class="nz">。</em> </strong> <em class="nz">报名参加我们的</em><strong class="lm io"><em class="nz"/></strong><a class="ae mr" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lm io"><em class="nz">免费每周简讯这里</em> </strong> </a> <strong class="lm io"> <em class="nz">。</em> </strong></p></div></div>    
</body>
</html>
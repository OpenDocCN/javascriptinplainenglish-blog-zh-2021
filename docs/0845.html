<html>
<head>
<title>My Super Simple Developer’s Guide to Writing Clean and Readable Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我的超级简单的开发人员指南写干净和可读的代码</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/8-simple-developers-guide-to-writing-super-clean-and-readable-code-3f4f5c3dab8f?source=collection_archive---------12-----------------------#2021-02-21">https://javascript.plainenglish.io/8-simple-developers-guide-to-writing-super-clean-and-readable-code-3f4f5c3dab8f?source=collection_archive---------12-----------------------#2021-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1129" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">可读性和可维护性代码的最佳实践</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9274d778fb19c42e2df19f88c89fc0d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MdVHj8jVEH25r1qW"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@wezlar11?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dean Pugh</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4768" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的代码易于阅读、理解和维护。作为一名程序员，我不能总是期望我的代码能够顺利运行，并且能够被任何试图修改它的人理解。</p><p id="4d15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以这里有一个我一直遵循的八步计划，让我的脚本对维护者来说更容易。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="f686" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">1.保持你的语法和结构的整洁和逻辑性</h2><p id="fc46" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这意味着你缩进你的代码，保持80个字符的行长度限制，并且保持函数合理的小。一个经验法则是让每个任务保持在它自己的功能中，而不是让一个大的功能做所有的事情。</p><p id="489f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个好处是，这意味着您可以在以后扩展脚本时重用这些函数。但是，不要走“IDE生成— Java”的路线，创建许多单行函数—这可能比使用一个庞大的函数更令人困惑。</p><p id="47cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有一场关于制表符和空格的圣战正在进行，是为了在自己的行上缩进和花括号，还是为了开始命令。只要你保持一致，并与其他代码一致，我不在乎扩展一个现有的项目。</p><p id="5357" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，让我们用一个为弹出窗口生成“关闭”和“打印”链接的函数——这些链接只有在JavaScript可用时才有意义，因此应该用JavaScript生成。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="7e0d" class="lz ma iq my b gy nc nd l ne nf">function toolLinks(){<br/>  var tools = document.createElement('ul');<br/>  var item = document.createElement('li');<br/>  var itemlink = document.createElement('a');<br/>  itemlink.setAttribute('href', '#');<br/>  itemlink.appendChild(document.createTextNode('close'));<br/>  itemlink.onclick = function(){window.close();}<br/>  item.appendChild(itemlink);<br/>  tools.appendChild(item);<br/>  var item2 = document.createElement('li');<br/>  var itemlink2 = document.createElement('a');<br/>  itemlink2.setAttribute('href', '#');<br/>  itemlink2.appendChild(document.createTextNode('print'));<br/>  itemlink2.onclick = function(){window.print();}<br/>  item2.appendChild(itemlink2);<br/>  tools.appendChild(item2);<br/>  document.body.appendChild(tools);<br/>}</span></pre><p id="5248" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过将每个任务缩进并分离成各自的功能，您可以使它更具可读性:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d0be" class="lz ma iq my b gy nc nd l ne nf">function toolLinks(){<br/>  var tools = document.createElement('ul');<br/>  var item = document.createElement('li');<br/>  var itemlink = createLink('#', 'close', closeWindow);<br/>  item.appendChild(itemlink);<br/>  tools.appendChild(item);<br/>  var item2 = document.createElement('li');<br/>  var itemlink2 = createLink('#', 'print', printWindow);<br/>  item2.appendChild(itemlink2);<br/>  tools.appendChild(item2);<br/>  document.body.appendChild(tools);<br/>}<br/>function printWindow(){<br/>  window.print();<br/>}<br/>function closeWindow() {<br/>  window.close();<br/>}<br/>function createLink(url,text,func){<br/>  var temp = document.createElement('a');<br/>  temp.setAttribute('href', url);<br/>  temp.appendChild(document.createTextNode(text));<br/>  temp.onclick = func;<br/>  return temp;<br/>}</span></pre><h2 id="6038" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">2.使用清晰的变量名和函数名</h2><p id="c99d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这是基本的良好编码实践，尽管你看到它做得更差。再一次，快速解决方案和迫在眉睫的最后期限是罪魁祸首。本质上，这意味着您使用的变量和函数名称可以立即告诉维护人员这部分数据是什么。</p><p id="2cc8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以使用下划线或者came case来连接不同的单词——我个人更喜欢came case，这与JavaScript为你提供的方法一致(例如<code class="fe ng nh ni my b">getElementsByTagName()</code>)。对于那些只在函数或循环中计算的、不需要维护的变量，比如前面例子中的<code class="fe ng nh ni my b">createLink()</code>函数中的“temp”变量，使用通用名称可能是个好主意。</p><p id="597e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从书中学习好的CSS设计——确保你的函数和变量名是通用的，描述一个任务而不是一个视觉结果。在另一次代码迭代中,<code class="fe ng nh ni my b">createFatRedBoxForLeftNavigation()</code>可能会变成<code class="fe ng nh ni my b">createTopBarForSectionNavigation()</code>,但如果从一开始就调用了createSecondaryMenu (),就不会变成这样。<br/>它也是坚持英文变量和函数名的完美选择——你永远不知道你是否必须在世界范围内共享代码，或者把它送到另一个国家进行维护。</p><h2 id="b757" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">3.注释您的代码</h2><p id="bb32" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">评论可以节省很多时间和悲伤。但是，也可以过度。在教程和书籍中，你会发现代码的每一行都有注释，解释发生了什么。这是因为目标受众的缘故，在教程中很有意义，但在实际代码中却是多余的。</p><p id="ca01" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">在下列情况下需要意见:</strong></p><ul class=""><li id="9f32" class="nj nk iq ky b kz la lc ld lf nl lj nm ln nn lr no np nq nr bi translated">有一段代码需要维护，例如“在此更改ID名称”</li><li id="577d" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">一个部分可能会过时，因为它现在为hip用户代理解决了一个问题。</li><li id="e887" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">当可能有更好的方法时，你用一种方法编程是有原因的，你想解释一下。</li><li id="2081" class="nj nk iq ky b kz ns lc nt lf nu lj nv ln nw lr no np nq nr bi translated">代码段依赖于另一个脚本，或者获取最初来源可能不明显的参数。</li></ul><h2 id="6e72" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">4.保持你的脚本独立</h2><p id="51d8" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这一步与不引人注目的JavaScript有关，所以我们不要在这上面纠缠。本质上，这意味着维护人员可以将您的脚本添加到任何页面中，而不必冒覆盖其他代码的风险。你可以通过命名空间或者通过<a class="ae kv" href="http://christianheilmann.com/2006/02/16/show-love-to-the-object-literal/" rel="noopener ugc nofollow" target="_blank">对象文字</a>将它们包装在一个对象中来保持脚本的自包含性。通过var关键字将变量保持在函数范围内，可以确保不会劫持变量，也不会通过使用<code class="fe ng nh ni my b">addEvent()</code>或其派生词劫持事件。</p><h2 id="b8b8" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">5.将维护的变量分开，并测试依赖性</h2><p id="2612" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">这一步很简单:在函数开始时保留需要维护的变量，必要时用虚拟值预先设置它们。这样，维护人员总是知道在哪里改变设置，而不必浏览整个脚本，你也不会遇到“未定义”的错误。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="4253" class="lz ma iq my b gy nc nd l ne nf">function toolLinks(){<br/>  var tools, closeWinItem, closeWinLink, printWinItem, printWinLink;</span><span id="1eca" class="lz ma iq my b gy nx nd l ne nf">  // link labels, please edit<br/>  <strong class="my ir">var printLinkLabel = ‘print’;</strong><br/>  <strong class="my ir"> var closeLinkLabel = ‘close’;</strong>#</span><span id="6a17" class="lz ma iq my b gy nx nd l ne nf">   tools = document.createElement(’ul’);<br/>   closeWinItem = document.createElement(’li’);<br/>   closeWinLink = createLink(’#', <strong class="my ir">closeLinkLabel</strong>, closeWindow);<br/>   closeWinItem.appendChild(closeWinLink);<br/>   tools.appendChild(closeWinItem);<br/>   printWinItem = document.createElement(’li’);<br/>   printWinLink = createLink(’#', <strong class="my ir">printLinkLabel</strong>, printWindow);<br/>   printWinItem.appendChild(printWinLink);<br/>   tools.appendChild(printWinItem);<br/>   document.body.appendChild(tools);<br/>}</span></pre><p id="9ce9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">测试依赖关系是不引人注目的JavaScript的一个特点——在通过DOM方法访问HTML元素之前，先测试它们是否存在。</p><h2 id="0514" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">6.分离和传达视觉效果</h2><p id="7fbc" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">对于不引人注目的JavaScript，没有办法动态地应用和删除CSS类名来形成元素。几乎没有任何情况下你需要直接访问一个对象的样式集合，以免给维护者增加难度。</p><p id="413a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">拖放接口是个例外，但即使这样，通过JavaScript改变的只是元素的x和y坐标。其余的外观应该留在它应该在的地方:在CSS文件中。这确保了CSS设计者不会弄乱你的代码，你也不需要知道浏览器中CSS错误的所有细节——而且比我们希望的要多得多。</p><p id="8e65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">传达这些类的名称的最基本的方法是将它们保存在变量中，并在脚本的开头对它们进行注释:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="7053" class="lz ma iq my b gy nc nd l ne nf">demo = {<br/>  // CSS classes<br/>  hideClass : 'hide', // hide elements<br/>  currentClass : 'current', // current navigation element<br/>  hoverClass : 'over', // hover state<br/>  [... rest of the code ...]<br/>}</span></pre><p id="630f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想进一步分离，那么您可以创建一个自己的包含文件，例如名为<code class="fe ng nh ni my b">cssClassNames.js</code>的文件，并在这个文件中使用一个<a class="ae kv" href="https://web.archive.org/web/20101130194708/http://www.json.org/" rel="noopener ugc nofollow" target="_blank"> JSON </a>符号。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="2f94" class="lz ma iq my b gy nc nd l ne nf">css={<br/>  'hide' : 'hide', // hide elements<br/>  'current' : 'current', // current navigation element<br/>  'hover' : 'over', // hover state [... and so on for a lot of them...]<br/>}</span></pre><p id="4b94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的脚本中，您可以分别使用<code class="fe ng nh ni my b">css.hide</code>或<code class="fe ng nh ni my b">css.current</code>到达不同的类名。你甚至可以使用更自然的标签，比如“隐藏元素”，并通过CSS的“隐藏元素”来访问它们，这对维护人员来说更容易，但对编码人员来说就更难了。</p><p id="4219" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个简单的技巧是用一个类名来与CSS设计器通信，以应用于文档的主体。这将允许CSS设计者区分应用于非JavaScript版本和脚本增强版本的样式。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="c32b" class="lz ma iq my b gy nc nd l ne nf">if(!document.getElementById || !document.createElement){return;}<br/>  cssjs('add',document.body,'jsenabled');</span></pre><p id="5177" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CSS:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="d6a7" class="lz ma iq my b gy nc nd l ne nf">/* No JavaScript */<br/>#nav li{<br/>  [...settings...]<br/>}<br/>/* JavaScript */<br/>body.jsenabled #nav li{<br/>  [...settings...]<br/>}</span></pre><p id="f191" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也非常方便通过CSS隐藏许多元素，而不是遍历所有元素。在极端的情况下，对于支持脚本的版本，您有许多样式和完全不同的设置，您甚至可以通过JavaScript应用一个完全不同的样式表(或者使用<code class="fe ng nh ni my b">document.write()</code>或者创建一个新的LINK元素)。</p><h2 id="7c2d" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">7.分离文本内容和代码</h2><p id="7f00" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">同样的技巧也适用于文本内容。你可以将标签作为变量分离出来，或者——更好的是——放入一个名为<code class="fe ng nh ni my b">textContent.js</code>的JSON格式的文档中。一个非常有效的例子是:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="b303" class="lz ma iq my b gy nc nd l ne nf">var locales = {<br/>  'en': {<br/>    'homePageAnswerLink':'Answer a question now',<br/>    'homePageQuestionLink':'Ask a question now',<br/>    'contactHoverMessage':'Click to send this info as a message',<br/>    'loadingMessage' : 'Loading your data...',<br/>    'noQAmessage' : 'You have no Questions or Answers yet',<br/>    'questionsDefault': 'You have not asked any questions yet',<br/>    'answersDefault': 'You have not answered any questions yet.',<br/>    'questionHeading' : 'My Questions',<br/>    'answersHeading' : 'My Answers',<br/>    'seeAllAnswers' : 'See all your Answers',<br/>    'seeAllQuestions' : 'See all your Questions',<br/>    'refresh': 'refresh'<br/>  },<br/>  'fr': {<br/>  },<br/>  'de': {<br/>  }<br/>};</span></pre><p id="78ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它允许编辑人员在不接触代码的情况下翻译和维护所有不同语言的标签。我甚至设法将id分开，以便他们与HTML开发人员一起整理。JavaScript所要做的就是读出应用程序的区域设置，并遍历可用的元素:</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="0108" class="lz ma iq my b gy nc nd l ne nf">function doI18N(){<br/>   var lang = yhost.PluginLocale;<br/>   for(i in locales[lang]){<br/>     if(document.getElementById(i)){<br/>       document.getElementById(i).innerHTML = <strong class="my ir">locales[lang][i]</strong>;<br/>     }<br/>   }<br/>  }</span></pre><h2 id="351c" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">8.记录您的代码</h2><p id="e1ce" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">最后，但不是最不重要的:写关于你的脚本/库/效果的文档。好的文档考虑到了受众，这意味着最好保持经典的API文档，包含一些库的“techspeak”中解释的方法的所有可能的属性和参数。不过，总的来说，我在“举例说明，然后列出所有可能性”的文档方面取得了更多的成功。</p><p id="cfeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好的文档可以节省最多的时间和金钱，事实上，我们很少有时间去创建它。</p><p id="afb4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">其他编程语言从代码注释中自动生成文档(例如PHP)。然而，这并不一定会带来更好的文档，只会减少工作量。</p><h2 id="5415" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">高流量网站怎么办？</h2><p id="2b1d" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">如果您在一个高流量的环境中工作，或者只允许小的代码包(移动市场)，您可能会反对这里解释的想法，因为它们会使代码膨胀。解决这个问题的方法是在去掉注释、用较短的变量名替换较长的变量名以及执行其他打包和缩小任务之后，维护一个代码库和一个从原始代码生成的动态代码库。为你做到这一点的工具是道格拉斯·克洛克福特的JSmin和迪安·爱德华的T2 packer。</p><h1 id="f300" class="ny ma iq bd mb nz oa ob me oc od oe mh jw of jx mk jz og ka mn kc oh kd mq oi bi translated">结论</h1><p id="e09f" class="pw-post-body-paragraph kw kx iq ky b kz ms jr lb lc mt ju le lf mu lh li lj mv ll lm ln mw lp lq lr ij bi translated">是的，有些步骤对于那些时髦的、游历广泛的、经验丰富的JavaScript开发人员来说可能是非常明显的，但是提醒我们自己它们的优点也无妨。</p><p id="4dde" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望我给出的上面的例子给你一个让你的代码更易维护的想法，或者提醒你一些潜伏在你大脑深处的想法。如果您有其他想法或强烈反对某些实践(您有充分的理由)，请让我知道，就像所有最佳实践一样，“这是一项正在进行的工作，协作只会使它变得更好。</p></div></div>    
</body>
</html>
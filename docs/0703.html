<html>
<head>
<title>The Ultimate Guide to Infinite Scrolling in Angular 11</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular 11中无限滚动的终极指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-ultimate-guide-to-infinite-scrolling-in-angular-11-36d3bbce9fff?source=collection_archive---------3-----------------------#2021-02-13">https://javascript.plainenglish.io/the-ultimate-guide-to-infinite-scrolling-in-angular-11-36d3bbce9fff?source=collection_archive---------3-----------------------#2021-02-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="1d28" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">极限角度导轨</h2><div class=""/><div class=""><h2 id="5428" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">由Open Brewery DB、NGX-Infinite-Scroll和角状材料提供动力</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/fd0121aeee51e9365770017ab029501b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EuUIWcW2TuU9CE_A"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@kate_torline?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kate Torline</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="ce01" class="lm ln iq bd lo lp lq lr ls lt lu lv lw kf lx kg ly ki lz kj ma kl mb km mc md bi translated">道德免责声明</h1><blockquote class="me"><p id="300b" class="mf mg iq bd mh mi mj mk ml mm mn mo dk translated">无限滚动很容易让人上瘾。</p></blockquote><p id="b9f8" class="pw-post-body-paragraph mp mq iq mr b ms mt ka mu mv mw kd mx my mz na nb nc nd ne nf ng nh ni nj mo ij bi translated">我推荐<a class="nk nl ep" href="https://medium.com/u/ceee6ebf074c?source=post_page-----36d3bbce9fff--------------------------------" rel="noopener" target="_blank">格兰特·柯林斯</a>的文章《<a class="ae le" href="https://uxdesign.cc/why-the-infinite-scroll-is-so-addictive-9928367019c5" rel="noopener" target="_blank">无限卷轴为何如此令人上瘾</a>》。它深入探究了诱使用户永不停止滚动的心理因素。</p><p id="a69e" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">我也强烈推荐网飞的《社会困境》。这部纪录片调查了社交媒体对人类的强烈负面影响，这种影响往往伴随着无限滚动。不要让我开始谈论我在Instagram上浪费了多少时间。</p><p id="0bcb" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">也就是说，无限滚动无疑是向用户展示无限数据列表的一种非常有效的方式。</p><p id="b95b" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">事不宜迟，让我们直接开始吧。</p></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="7391" class="lm ln iq bd lo lp lq lr ls lt lu lv lw kf lx kg ly ki lz kj ma kl mb km mc md bi translated">使用角形材料设置</h1><p id="3f83" class="pw-post-body-paragraph mp mq iq mr b ms nr ka mu mv ns kd mx my nt na nb nc nu ne nf ng nv ni nj mo ij bi translated">这个命令将创建我们的角度应用程序。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="c9bb" class="ob ln iq nx b gy oc od l oe of">ng new infinite-scroll --routing=false --style=scss --skip-tests</span></pre><p id="6848" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">现在，我们将<a class="ae le" href="https://material.angular.io/" rel="noopener ugc nofollow" target="_blank">角形材质</a>添加到我们的应用程序中。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="d69e" class="ob ln iq nx b gy oc od l oe of">ng add @angular/material</span></pre></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="c4af" class="lm ln iq bd lo lp lq lr ls lt lu lv lw kf lx kg ly ki lz kj ma kl mb km mc md bi translated">NGX-无限卷轴</h1><blockquote class="me"><p id="d4b4" class="mf mg iq bd mh mi mj mk ml mm mn mo dk translated"><a class="ae le" href="https://github.com/orizens/ngx-infinite-scroll" rel="noopener ugc nofollow" target="_blank">角状无限卷轴</a></p></blockquote><p id="fb07" class="pw-post-body-paragraph mp mq iq mr b ms mt ka mu mv mw kd mx my mz na nb nc nd ne nf ng nh ni nj mo ij bi translated">安装软件包。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="1b28" class="ob ln iq nx b gy oc od l oe of">npm i ngx-infinite-scroll</span></pre><p id="0a4b" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">现在我们可以在<strong class="mr ja"> app.module.ts </strong>中导入<code class="fe og oh oi nx b">InfiniteScrollModule</code>，并将其添加到我们的导入中。让我们对<code class="fe og oh oi nx b">HttpClientModule</code>和<code class="fe og oh oi nx b">MatCardModule</code>做同样的事情，我们稍后会用到它们。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="186e" class="ob ln iq nx b gy oc od l oe of"><em class="oj">...<br/>import</em> { HttpClientModule } <em class="oj">from</em> '@angular/common/http';<br/><em class="oj">import</em> { MatCardModule } <em class="oj">from</em> '@angular/material/card';<br/><em class="oj">import</em> { InfiniteScrollModule } <em class="oj">from</em> ‘ngx-infinite-scroll’;<br/>...<br/>    imports: [..., HttpClientModule, MatCardModule, InfiniteScrollModule],<br/>...</span></pre><p id="b1b1" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">现在我们可以服务我们的应用程序了，因为我们已经安装了所有需要的包。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="ae6d" class="ob ln iq nx b gy oc od l oe of">ng serve</span></pre><blockquote class="me"><p id="d244" class="mf mg iq bd mh mi ok ol om on oo mo dk translated">在这个演示中，我们将创建一个无限的啤酒厂列表。</p></blockquote><p id="c449" class="pw-post-body-paragraph mp mq iq mr b ms mt ka mu mv mw kd mx my mz na nb nc nd ne nf ng nh ni nj mo ij bi translated">让我们创建一个无限滚动组件，其中包含一个包含每个啤酒厂信息的角状材料卡片列表。</p><ul class=""><li id="7748" class="op oq iq mr b ms nm mv nn my or nc os ng ot mo ou ov ow ox bi translated">如果<code class="fe og oh oi nx b">[infiniteScrollDistance]</code>被设置为1，那么当用户向下滚动页面90%时<code class="fe og oh oi nx b">onScroll()</code>将被触发。如果是两个，那么是80%，以此类推。</li><li id="a3de" class="op oq iq mr b ms oy mv oz my pa nc pb ng pc mo ou ov ow ox bi translated">如果<code class="fe og oh oi nx b">[infiniteScrollThrottle]</code>设置为500毫秒，那么<code class="fe og oh oi nx b">onScroll()</code>将仅在用户停止滚动500毫秒时触发。</li><li id="0a27" class="op oq iq mr b ms oy mv oz my pa nc pb ng pc mo ou ov ow ox bi translated"><code class="fe og oh oi nx b">(scrolled)</code>是当用户向下滚动时触发的事件，由上述属性定义。</li></ul><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="e037" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">我们想要这样的东西。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pf"><img src="../Images/7f80f56507eca87ea170d4781718aaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*voQKMdr2BViNU51wv8qDKQ.png"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Screenshot by Author</figcaption></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="e5fe" class="lm ln iq bd lo lp lq lr ls lt lu lv lw kf lx kg ly ki lz kj ma kl mb km mc md bi translated">打开啤酒厂数据库</h1><blockquote class="me"><p id="0b20" class="mf mg iq bd mh mi mj mk ml mm mn mo dk translated">Open Brewery DB是一个免费的数据集和API，提供关于啤酒厂、苹果酒、啤酒店和瓶装店的公共信息。</p></blockquote><p id="0566" class="pw-post-body-paragraph mp mq iq mr b ms mt ka mu mv mw kd mx my mz na nb nc nd ne nf ng nh ni nj mo ij bi translated">让我们为啤酒厂创建一个界面。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="dca5" class="ob ln iq nx b gy oc od l oe of">ng g i brewery --type=model</span></pre><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="bcc4" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">现在让我们创建一个获取啤酒厂的服务。</p><pre class="kp kq kr ks gt nw nx ny nz aw oa bi"><span id="5eaf" class="ob ln iq nx b gy oc od l oe of">ng g s brewery</span></pre><p id="c386" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">在我们的服务中，我们希望使用API的<a class="ae le" href="https://www.openbrewerydb.org/documentation/01-listbreweries" rel="noopener ugc nofollow" target="_blank">列表啤酒厂端点</a>。</p><p id="466f" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">亲自查看一下终点:【https://api.openbrewerydb.org/breweries】T4。如果你这样做了，我推荐你使用一个名为<a class="ae le" href="https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en" rel="noopener ugc nofollow" target="_blank"> JSON Formatter </a>的Chrome扩展来查看解析后的JSON数据。</p><p id="a607" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">注意我们是如何利用URL中的查询参数进行分页的。我们配置每页获取10个啤酒厂。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div></figure><p id="045c" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">现在，在我们的组件中，当页面加载时，我们加载前十个啤酒厂。然后，用户每滚动一次，页面就增加一，这样就可以获取下面的十家啤酒厂。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="pd pe l"/></div></figure></div><div class="ab cl lf lg hu lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ij ik il im in"><h1 id="4612" class="lm ln iq bd lo lp lq lr ls lt lu lv lw kf lx kg ly ki lz kj ma kl mb km mc md bi translated">结果</h1><p id="64b1" class="pw-post-body-paragraph mp mq iq mr b ms nr ka mu mv ns kd mx my nt na nb nc nu ne nf ng nv ni nj mo ij bi translated">我在Giphy <a class="ae le" href="https://media.giphy.com/media/8VYABkBrS0wDfbFanm/giphy.gif" rel="noopener ugc nofollow" target="_blank">这里</a>发表了结果。</p><p id="28fd" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">请注意，当我将页面向下滚动80%时，滚动条是如何收缩的，这表示已经加载了更多的数据。</p><p id="573e" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">另外，可以在Github上查看源代码。</p><div class="pg ph gp gr pi pj"><a href="https://github.com/charlielevine/infinite-scroll" rel="noopener  ugc nofollow" target="_blank"><div class="pk ab fo"><div class="pl ab pm cl cj pn"><h2 class="bd ja gy z fp po fr fs pp fu fw iz bi translated">查理莱文/无限卷轴</h2><div class="pq l"><h3 class="bd b gy z fp po fr fs pp fu fw dk translated">此项目是使用Angular CLI版本11.1.4生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="pr l"><p class="bd b dl z fp po fr fs pp fu fw dk translated">github.com</p></div></div><div class="ps l"><div class="pt l pu pv pw ps px ky pj"/></div></div></a></div><p id="9aae" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">本指南到此为止。感谢您的阅读！我希望我为你简化了无限滚动的角度。</p><p id="3d58" class="pw-post-body-paragraph mp mq iq mr b ms nm ka mu mv nn kd mx my no na nb nc np ne nf ng nq ni nj mo ij bi translated">在推特<a class="ae le" href="https://twitter.com/charliechamp616" rel="noopener ugc nofollow" target="_blank">上找到我</a>！</p></div></div>    
</body>
</html>
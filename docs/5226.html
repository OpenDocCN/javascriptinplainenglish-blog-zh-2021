<html>
<head>
<title>How to Shuffle a JavaScript Array?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何洗牌一个JavaScript数组？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-shuffle-a-javascript-array-1357eed1680f?source=collection_archive---------3-----------------------#2021-10-24">https://javascript.plainenglish.io/how-to-shuffle-a-javascript-array-1357eed1680f?source=collection_archive---------3-----------------------#2021-10-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d666cc2728e9e9c91d9006f4fd785e1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*op40Bu8tR78GJL9w"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@amandagraphc?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Amanda Jones</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0a68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">打乱JavaScript数组是我们有时不得不做的事情。</p><p id="4165" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何洗牌一个JavaScript数组。</p><h1 id="5dfa" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">随机交换数组条目</h1><p id="a5bb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">打乱JavaScript数组的一种方法是随机交换不同数组条目的位置。</p><p id="ef1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="629a" class="mn lc iq mj b gy mo mp l mq mr">const shuffleArray = (array) =&gt; {<br/>  for (let i = array.length - 1; i &gt; 0; i--) {<br/>    const j = Math.floor(Math.random() * (i + 1));<br/>    [array[i], array[j]] = [array[j], array[i]];<br/>  }<br/>}</span><span id="a8fe" class="mn lc iq mj b gy ms mp l mq mr">const arr = [1, 2, 3]<br/>shuffleArray(arr)<br/>console.log(arr)</span></pre><p id="5b87" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">shuffleArray</code>函数中，我们用for循环遍历数组。</p><p id="be40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe mt mu mv mj b">Math.random</code>方法从数组中选择一个随机索引。</p><p id="31c9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过获取条目并把它们分配到另一个条目的位置来进行交换。</p><p id="7dcc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">array</code>是换了地方。</p><p id="8e32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以在对<code class="fe mt mu mv mj b">arr</code>调用<code class="fe mt mu mv mj b">shuffleArray</code>之后，我们得到一个数组，其中的项目交换了位置。</p><p id="895c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这被称为<a class="ae kc" href="http://en.wikipedia.org/wiki/Fisher-Yates_shuffle#The_modern_algorithm" rel="noopener ugc nofollow" target="_blank"> Durstenfeld shuffle </a>，它是Fisher-Yates shuffle算法的优化版本。</p><h1 id="3e39" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">排序方法和数学随机</h1><p id="f34a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以一起使用<code class="fe mt mu mv mj b">sort</code>方法和<code class="fe mt mu mv mj b">Math.random</code>来洗牌。</p><p id="d9c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4325" class="mn lc iq mj b gy mo mp l mq mr">const arr = [1, 2, 3].sort(() =&gt; .5 - Math.random());<br/>console.log(arr)</span></pre><p id="ea43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在回调中返回一个介于-0.5和0.5之间的随机数，让我们洗牌。</p><p id="6782" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是因为如果返回的数字是负数，那么它迭代的两个元素的位置保持不变。</p><p id="0f21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，它们会被交换。</p><p id="531e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然而，这是有偏见的，而且也很慢。</p><p id="eef0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但这是用JavaScript混洗数组最简单的方法。</p><h1 id="f3b3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="9be4" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">用JavaScript混洗数组有几种方法。</p><p id="3d07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们都需要<code class="fe mt mu mv mj b">Math.random</code>方法来挑选一个随机数。</p></div></div>    
</body>
</html>
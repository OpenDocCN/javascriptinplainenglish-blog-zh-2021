<html>
<head>
<title>Let’s Develop a Video Chat App using JavaScript and WebRTC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们使用JavaScript和WebRTC开发一个视频聊天应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-develop-a-video-chat-app-using-javascript-and-webrtc-71d86cff8faf?source=collection_archive---------2-----------------------#2021-01-22">https://javascript.plainenglish.io/lets-develop-a-video-chat-app-using-javascript-and-webrtc-71d86cff8faf?source=collection_archive---------2-----------------------#2021-01-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="b0dc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第2部分:如何在后端使用JavaScript和Node.js实现WebRTC</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3468c49f3dffa0c6f7744ac23ef04eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n2-kxXeawh5SPbCK"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="83d3" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">本系列教程</h1><ol class=""><li id="c528" class="lo lp iq lq b lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><a class="ae kv" href="https://medium.com/p/de745072c38c/edit" rel="noopener">了解WebRTC </a></li><li id="ba23" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb mc md me mf bi translated">用代码实现WebRTC(本教程)</li></ol><p id="67f8" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">在上一个教程中，我们学习了WebRTC的基础知识。</p><blockquote class="na"><p id="63d9" class="nb nc iq bd nd ne nf ng nh ni nj mb dk translated"><a class="ae kv" href="https://www.simplecoding.dev/articles/let-s-build-a-video-chat-app-with-javascript-and-webrtc-29cd" rel="noopener ugc nofollow" target="_blank">本文最初发表于简单编码</a></p></blockquote><div class="nk nl nm nn no np"><a href="https://medium.com/javascript-in-plain-english/lets-build-a-video-chat-app-with-javascript-and-webrtc-de745072c38c" rel="noopener follow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">让我们用JavaScript和WebRTC构建一个视频聊天应用程序</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">第1部分:了解WebRTC</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">medium.com</p></div></div><div class="ny l"><div class="nz l oa ob oc ny od kp np"/></div></div></a></div><p id="ae0e" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">在本教程中，我们将学习如何用代码实现这些概念，并创建一个在线视频会议网站。</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="a2f7" class="kw kx iq bd ky kz ol lb lc ld om lf lg jw on jx li jz oo ka lk kc op kd lm ln bi translated">现场演示</h1><p id="6c63" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">你可以通过下面提到的链接看到并使用网站<strong class="lq ir">实况</strong>。您只需输入房间名称即可创建/加入房间。</p><div class="ot ou gp gr ov np"><a href="https://desolate-depths-86299.herokuapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nq ab fo"><div class="nr ab ns cl cj nt"><h2 class="bd ir gy z fp nu fr fs nv fu fw ip bi translated">WebTutsPlus WebCon</h2><div class="nw l"><h3 class="bd b gy z fp nu fr fs nv fu fw dk translated">立即加入</h3></div><div class="nx l"><p class="bd b dl z fp nu fr fs nv fu fw dk translated">desolate-depths-86299.herokuapp.com</p></div></div></div></a></div><p id="6411" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">注意:-</p><ul class=""><li id="8ce5" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">该网站目前仅支持每个房间2人。</li></ul><h2 id="12c7" class="pa kx iq bd ky pb pc dn lc pd pe dp lg lv pf pg li lx ph pi lk lz pj pk lm pl bi translated">录像</h2><p id="a60f" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">你也可以观看下面的视频，看看如何使用这个网站。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pm pn l"/></div></figure></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="e57f" class="kw kx iq bd ky kz ol lb lc ld om lf lg jw on jx li jz oo ka lk kc op kd lm ln bi translated">要求</h1><p id="8904" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">如果您还没有阅读前面的教程，强烈建议您在开始本教程之前阅读它。</p><p id="1e4c" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">我们将使用以下内容:-</p><ul class=""><li id="ab20" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">节点。Js(版本12 . 14 . 1)—JS的运行时环境</li><li id="3cdd" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">插座。IO(版本1.2.0) —用于WebRTC中的信令</li><li id="81b3" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">快递。Js:(版本4.17.1) —后端框架</li><li id="a80f" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">代码编辑器(推荐使用Microsoft Visual Studio代码)</li><li id="0ff3" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">一个好的浏览器(推荐谷歌浏览器)</li></ul><p id="4d7a" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">我们将使用节点。带有Express的Js。后端的Js框架。<strong class="lq ir">如果不熟悉Node。Js和Express。Js但是你知道任何其他的MVC框架，不用担心</strong>。我们试图用这样一种方式来解释，即使你从未使用过Node，你也应该能够理解。Js &amp;快递。射流研究…</p></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="e45d" class="kw kx iq bd ky kz ol lb lc ld om lf lg jw on jx li jz oo ka lk kc op kd lm ln bi translated">第一步。设置项目</h1><p id="0dcc" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">让我们从建立项目开始。</p><p id="27c3" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">步骤1.1。下载节点。Js </strong></p><ul class=""><li id="7e5d" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">你可以下载节点。点击<a class="ae kv" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank">这个</a>链接。下载节点。Js会自动在你的电脑上安装NPM ( <strong class="lq ir">节点包管理器)</strong>。NPM是节点的默认程序包管理器。射流研究…</li></ul><p id="3c74" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">步骤1.2。创建一个节点项目</strong></p><ul class=""><li id="052f" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">创建一个新文件夹。这个文件夹将是我们项目的根目录。</li><li id="ca55" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">打开该文件夹中的terminal/CMD，运行命令<code class="fe po pp pq pr b">npm init</code>。</li><li id="4682" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">持续按下<code class="fe po pp pq pr b">Enter Key</code>跳过项目的附加配置，并在提示时写入<code class="fe po pp pq pr b">YES</code>。</li><li id="be04" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">这将在项目的根目录下创建一个文件<code class="fe po pp pq pr b">package.json</code>。这个文件将包含关于我们的项目的所有必要信息，如项目依赖性。</li></ul><p id="0329" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">步骤1.3。安装依赖关系</strong></p><ul class=""><li id="374e" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">在终端中，运行以下命令。它将安装依赖项— Express。JS和socket。我们项目中的IO。</li></ul><p id="74a9" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><code class="fe po pp pq pr b">npm install express@4.17.1 socket.io@1.2.0 --save</code></p><ul class=""><li id="d416" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">标志<code class="fe po pp pq pr b">--save</code>会将这些依赖项的名称和版本保存在<code class="fe po pp pq pr b"><strong class="lq ir">package.json</strong></code>中，以备将来参考。</li><li id="4e9c" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">上述命令执行完毕后，您会看到在项目的根目录下创建了一个文件夹<code class="fe po pp pq pr b">node_modules</code>。该文件夹包含我们刚刚安装的依赖项。</li></ul><p id="5282" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">现在我们已经完成了项目的设置。以下是本阶段的项目结构</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/b4700d9c1ae57525fbbf76adfe0a860a.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*QZgg7gAsMiZ317_h0YTD4g.png"/></div></figure></div><div class="ab cl oe of hu og" role="separator"><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj ok"/><span class="oh bw bk oi oj"/></div><div class="ij ik il im in"><h1 id="3d2f" class="kw kx iq bd ky kz ol lb lc ld om lf lg jw on jx li jz oo ka lk kc op kd lm ln bi translated">第二步。创建后端</h1><p id="31ac" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">现在让我们开始编写后端代码。在我们开始之前，让我们回顾一下之前教程中的几点。</p><ul class=""><li id="2940" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">我们需要一个后端服务器来发送信号。</li><li id="41a7" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">某些信息—候选(网络)信息和媒体编解码器必须在两个对等体之间交换，然后才能使用WebRTC在它们之间建立直接连接。</li><li id="118a" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">信令指的是两个对等体用来交换信息的机制</li></ul><p id="66fb" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">以上几点告诉我们，我们必须实现一种机制，使用这种机制，两个客户端(浏览器)可以互相发送消息。我们将使用插座。木卫一为此目的。插座。IO适合学习WebRTC信令，因为它内置了“房间”的概念。我们先来讨论一下什么是Socket。超正析象管(Image Orthicon)</p><p id="3ec7" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">插座。IO </strong></p><ul class=""><li id="cab1" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">插座。IO由两部分组成— <code class="fe po pp pq pr b">client Library</code> &amp; <code class="fe po pp pq pr b">server Library</code>。显然，<code class="fe po pp pq pr b">client library</code>用于客户端，&amp;用于服务器端。</li><li id="89f9" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">插座。IO有助于实现以下功能——假设有四个客户端连接到服务器。当服务器从一个客户端收到新消息时，它应该通知所有其他客户端，并将该消息转发给其他客户端。它类似于群聊。</li><li id="5760" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">在插座中。IO，发送到服务器或从服务器接收的每条消息都与一个事件相关联。因此，如果一个客户端向服务器发送一个关于特定事件的消息，服务器将只把这个消息转发给那些正在监听这个相应事件的客户端。</li><li id="a950" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">有一些保留的事件。然而，我们也可以定义自定义事件。要了解预约活动，您可以访问<a class="ae kv" href="https://www.tutorialspoint.com/socket.io/socket.io_event_handling.htm" rel="noopener ugc nofollow" target="_blank">此</a>链接。</li><li id="fdcc" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">此外，客户端可以加入一个房间，并要求服务器只向那些已经加入特定房间的客户端发送消息。</li></ul><p id="b549" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">既然我们已经讨论了套接字。IO，我们可以开始实现后端服务器了</p><p id="20db" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第2.1步。创建文件索引. js </strong></p><ul class=""><li id="a107" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">在Express框架中，默认情况下，<code class="fe po pp pq pr b">index.js</code>是服务器的起点。因此，在项目的根级别创建一个文件索引. js。</li></ul><p id="7ebe" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第2.2步。创建公共文件夹和视图文件夹</strong></p><ul class=""><li id="7cc0" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">在项目的根级别创建以下文件夹<br/>*<code class="fe po pp pq pr b">public</code>——包含前端的静态文件，如CSS和JS文件<br/>*<code class="fe po pp pq pr b">views</code>——包含前端的视图</li><li id="f916" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">我们的网站将只包含一个页面。在<code class="fe po pp pq pr b">views</code>文件夹中，创建一个包含前端HTML代码的文件<code class="fe po pp pq pr b">index.ejs</code>。表示使用<code class="fe po pp pq pr b">ejs</code>作为模板引擎。</li><li id="a9a0" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">项目结构现在将如下所示</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pt"><img src="../Images/b34717707ed94c1d21374b591a2ba68f.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/format:webp/1*Fy5gYeelvABxl50icdrfIw.png"/></div></figure><p id="d6af" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第2.3步。初始化Express和一个HTTP服务器</strong></p><ul class=""><li id="3bbf" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">现在，我们必须初始化Express、HTTP服务器和套接字。我们后端的输入输出。为此，将以下代码粘贴到位于项目根级别的<code class="fe po pp pq pr b">index.js</code>中</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><p id="cb25" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第2.3步。机具插座。IO </strong></p><ul class=""><li id="54df" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">现在，是时候实现套接字了。后端中的IO。</li><li id="2280" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">将以下代码粘贴到<code class="fe po pp pq pr b">index.js</code>文件中</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><p id="d57d" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">所以，现在我们已经实现了我们网站的后端。以下为<code class="fe po pp pq pr b">index.js</code>的完整代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><h1 id="b298" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">第三步。创建我们网站的前端</h1><p id="5ab8" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">现在，让我们创建我们网站的前端</p><p id="1acf" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第3.1步。创建HTML文件</strong></p><ul class=""><li id="9fcc" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">让我们为前端创建一个HTML文件。</li><li id="13f7" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">我们将分别在<code class="fe po pp pq pr b">public/css/styles.css</code>和<code class="fe po pp pq pr b">public/js/main.js</code>中定义前端的CSS和Javascript。因此，我们必须导入这些文件。在后端，我们明确地将<code class="fe po pp pq pr b">public</code>设置为服务静态文件的默认目录。因此，我们将从HTML中的<code class="fe po pp pq pr b">css/styles.css</code> &amp; <code class="fe po pp pq pr b">js/main.js</code>导入文件。</li><li id="e919" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">我们还将为<code class="fe po pp pq pr b">socket.io</code>导入客户端库</li><li id="637e" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">我们还将为WebRTC导入<code class="fe po pp pq pr b">adapter.js</code>,因为WebRTC的实现仍在发展中，并且因为每个浏览器对编解码器和WebRTC特性的支持<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/Media/Formats/WebRTC_codecs" rel="noopener ugc nofollow" target="_blank">都有不同的级别。适配器是一个JavaScript垫片，它允许您的代码按照规范编写，这样它就可以在所有支持WebRTC的浏览器中“正常工作”。</a></li><li id="71ac" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">我们在之前的教程中讨论了STURN/TURN服务器。我们将从<code class="fe po pp pq pr b">public/js/config.js</code>导入回合/眩晕URL。我们将在本教程的后面创建这个文件。</li><li id="0b20" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">将下面的代码粘贴到<code class="fe po pp pq pr b">views/index.ejs</code></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><p id="a730" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">步骤3.2。添加CSS代码</strong></p><ul class=""><li id="8b3f" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">我们不解释CSS代码。</li><li id="0395" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">将以下代码粘贴到<code class="fe po pp pq pr b">public/css/styles.css</code></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><p id="ab35" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">步骤3.3。添加JS文件</strong></p><ul class=""><li id="4d6b" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">现在，让我们将javascript添加到我们的前端。我们在<code class="fe po pp pq pr b">index.ejs</code>已经有了文件<code class="fe po pp pq pr b">public/js/main.js</code>。正是在这个文件中，我们将实现使用<code class="fe po pp pq pr b">WebRTC</code>和<code class="fe po pp pq pr b">client library of Socket.IO</code>的各种方法</li><li id="f94d" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">在两个客户端之间创建直接连接之前，它们之间会交换大量消息。在上一个教程中，我们以Amy和Bernadette为例，详细介绍了这一点。强烈建议您阅读该示例。我们已经使用Socket简单地实现了那篇文章中提到的每个步骤。超正析象管(Image Orthicon)</li><li id="106a" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">将以下代码粘贴到<code class="fe po pp pq pr b">public/js/main.js</code></li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><p id="ea36" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated"><strong class="lq ir">第3.4步。在config.js中添加STUN/TURN URL</strong></p><ul class=""><li id="fa03" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">要在现实世界中制作这个网站，我们必须将TURN/STUN配置指定为<code class="fe po pp pq pr b">RTCPeerConnection()</code>。有很多公司提供免费的眩晕/转身服务器。我们将使用XirSys提供的服务器。</li><li id="5c61" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">本自述文件的<a class="ae kv" href="https://github.com/webtutsplus/videoChat-WebFrontend/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">中提到了从XirSys获取回合/眩晕URL的步骤</a></li><li id="fbce" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">将获得的配置粘贴到<code class="fe po pp pq pr b">public/js/config.js</code></li><li id="c23c" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">下面是<code class="fe po pp pq pr b">config.js</code>的样子。(网址会有所不同</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pu pn l"/></div></figure><h1 id="307c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">恭喜你！</h1><p id="513b" class="pw-post-body-paragraph ml mm iq lq b lr ls jr mo lt lu ju mq lv oq ms mt lx or mv mw lz os my mz mb ij bi translated">您现在已经创建了一个网络会议网站。要在localhost上部署并测试您的网站，请遵循以下步骤</p><ul class=""><li id="46bf" class="lo lp iq lq b lr mn lt mp lv ow lx ox lz oy mb oz md me mf bi translated">在我们项目的根目录下打开一个终端。</li><li id="296d" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">运行以下命令— <code class="fe po pp pq pr b">node index.js</code>。</li><li id="4b19" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">打开谷歌Chrome，访问<code class="fe po pp pq pr b">localhost:8000</code>。输入房间名称(比如foo)。你应该看看你的视频。</li><li id="f935" class="lo lp iq lq b lr mg lt mh lv mi lx mj lz mk mb oz md me mf bi translated">打开一个新标签并访问<code class="fe po pp pq pr b">localhost:8000</code>。输入相同的房间名称(foo)。您现在应该会看到两个视频元素。</li></ul><p id="5e88" class="pw-post-body-paragraph ml mm iq lq b lr mn jr mo lt mp ju mq lv mr ms mt lx mu mv mw lz mx my mz mb ij bi translated">你可以在<a class="ae kv" href="https://github.com/webtutsplus/videoChat-WebFrontend" rel="noopener ugc nofollow" target="_blank">这个GitHub回购</a>中找到完整的代码</p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting Started with Storybook for React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React故事书入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-storybook-for-react-c0785d4a47ba?source=collection_archive---------18-----------------------#2021-01-08">https://javascript.plainenglish.io/getting-started-with-storybook-for-react-c0785d4a47ba?source=collection_archive---------18-----------------------#2021-01-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/25c7d144f3bfbe341831ed8a6439502c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*huIGajlzrR8yGgDG"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@roadtripwithraj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Road Trip with Raj</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3e8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Storybook让我们可以用各种参数轻松地构建组件原型。</p><p id="aeb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何开始与故事书。</p><h1 id="108e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="fed0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以先用Create React App创建一个React项目。</p><p id="19c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了创建它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="f2d4" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app storybook-project</span></pre><p id="2290" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过运行以下命令向其添加故事书:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="7e2d" class="mn lc iq mj b gy mo mp l mq mr">npx sb init</span></pre><p id="c2ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过运行以下命令来运行它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="dd5a" class="mn lc iq mj b gy mo mp l mq mr">npm run storybook</span></pre><p id="ffc6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">运行故事书。</p><p id="5769" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以创造一个故事。</p><p id="8605" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个故事的组成部分可能需要一些参数来让我们调整它。</p><p id="6da7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以为这些参数提供默认值。</p><p id="5986" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们创建一个需要一些道具的组件。</p><p id="624a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe ms mt mu mj b">src/stories</code>文件夹中，我们创建了一个<code class="fe ms mt mu mj b">Button.js</code>来创建一个接受一些道具的按钮:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="52f4" class="mn lc iq mj b gy mo mp l mq mr">import React from 'react';<br/>import PropTypes from 'prop-types';<br/>import './button.css';</span><span id="15a1" class="mn lc iq mj b gy mv mp l mq mr">export const Button = ({ primary, backgroundColor, size, label, ...props }) =&gt; {<br/>  const mode = primary ? 'button-primary' : 'button-secondary';<br/>  return (<br/>    &lt;button<br/>      type="button"<br/>      className={['button', `button-${size}`, mode].join(' ')}<br/>      style={backgroundColor &amp;&amp; { backgroundColor }}<br/>      {...props}<br/>    &gt;<br/>      {label}<br/>    &lt;/button&gt;<br/>  );<br/>};</span><span id="66bd" class="mn lc iq mj b gy mv mp l mq mr">Button.propTypes = {<br/>  primary: PropTypes.bool,<br/>  backgroundColor: PropTypes.string,<br/>  size: PropTypes.oneOf(['small', 'medium', 'large']),<br/>  label: PropTypes.string.isRequired,<br/>  onClick: PropTypes.func,<br/>};</span><span id="ee60" class="mn lc iq mj b gy mv mp l mq mr">Button.defaultProps = {<br/>  backgroundColor: null,<br/>  primary: false,<br/>  size: 'medium',<br/>  onClick: undefined,<br/>};</span></pre><p id="00b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们给它添加一个<code class="fe ms mt mu mj b">button.css</code>样式:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8ba4" class="mn lc iq mj b gy mo mp l mq mr">.button {<br/>  font-weight: 700;<br/>  border: 0;<br/>  border-radius: 3em;<br/>  cursor: pointer;<br/>  display: inline-block;<br/>  line-height: 1;<br/>}<br/>.button-primary {<br/>  color: white;<br/>  background-color: #1ea7fd;<br/>}<br/>.button-secondary {<br/>  color: #333;<br/>  background-color: transparent;<br/>}<br/>.button-small {<br/>  font-size: 12px;<br/>  padding: 10px;<br/>}<br/>.button-medium {<br/>  font-size: 14px;<br/>  padding: 11px;<br/>}<br/>.button-large {<br/>  font-size: 16px;<br/>  padding: 12px;<br/>}</span></pre><p id="cc07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们的按钮需要一堆道具来让我们修改不同风格的按钮。</p><p id="d92f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">primary</code>是布尔型道具。</p><p id="108c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">backgroundColor</code>是一串道具。</p><p id="7c96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">size</code>让我们用一个枚举类型来改变大小。</p><p id="994d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们展示一个标签。</p><p id="77da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">是一个让我们处理点击的函数。</p><p id="7b36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让它在Storybook中显示，我们添加了<code class="fe ms mt mu mj b">Button.stories.js</code>文件并添加了:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="71a9" class="mn lc iq mj b gy mo mp l mq mr">import React from 'react';</span><span id="eab3" class="mn lc iq mj b gy mv mp l mq mr">import { Button } from './Button';</span><span id="b530" class="mn lc iq mj b gy mv mp l mq mr">export default {<br/>  title: 'Example/Button',<br/>  component: Button,<br/>  argTypes: {<br/>    backgroundColor: { control: 'color' },<br/>  },<br/>};</span><span id="1ca8" class="mn lc iq mj b gy mv mp l mq mr">const Template = (args) =&gt; &lt;Button {...args} /&gt;;</span><span id="2c52" class="mn lc iq mj b gy mv mp l mq mr">export const Primary = Template.bind({});<br/>Primary.args = {<br/>  primary: true,<br/>  label: 'Button',<br/>};</span><span id="e050" class="mn lc iq mj b gy mv mp l mq mr">export const Secondary = Template.bind({});<br/>Secondary.args = {<br/>  label: 'Button',<br/>};</span><span id="9a71" class="mn lc iq mj b gy mv mp l mq mr">export const Large = Template.bind({});<br/>Large.args = {<br/>  size: 'large',<br/>  label: 'Button',<br/>};</span><span id="b765" class="mn lc iq mj b gy mv mp l mq mr">export const Small = Template.bind({});<br/>Small.args = {<br/>  size: 'small',<br/>  label: 'Button',<br/>};</span></pre><p id="654e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们导出一个包含我们想要显示的东西的对象。</p><p id="1610" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有我们想在故事书中显示的标题。</p><p id="c26c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">component</code>是我们要预览的组件。</p><p id="c357" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">argTypes</code>让我们设置各种道具的控制类型，以便我们可以在故事书中更改和预览它们。</p><p id="7458" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是参数。args允许我们将道具传递给组件，这样我们就可以更改它。</p><p id="9fb9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">Template.bind</code>方法提供了一些默认值，并将<code class="fe ms mt mu mj b">args</code>属性设置为我们想要的值。</p><h1 id="a888" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b2c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建组件并用Storybook预览它们。</p><p id="f7fb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接受道具并用args绑定就可以换。</p><p id="2cd8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
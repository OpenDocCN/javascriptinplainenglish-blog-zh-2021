<html>
<head>
<title>How to Add Dark Mode to a Gatsby Site 🌑</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向盖茨比网站添加暗模式🌑</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-dark-mode-to-a-gatsby-site-2638fc841038?source=collection_archive---------8-----------------------#2021-01-26">https://javascript.plainenglish.io/how-to-add-dark-mode-to-a-gatsby-site-2638fc841038?source=collection_archive---------8-----------------------#2021-01-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c33333d36335746c224bdcbc99c63a92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zwf5QF-CkwYxlUkX"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@zanilic?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Zan</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5c36" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我刚刚给我的网站增加了一个黑暗模式，这非常简单！为了实现这一点，我使用了<a class="ae jz" href="https://www.gatsbyjs.com/plugins/gatsby-plugin-dark-mode/" rel="noopener ugc nofollow" target="_blank">盖茨比插件黑暗模式</a>。</p><p id="4a52" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">是这样的…</p><h2 id="8c7d" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">第一步。安装插件</h2><p id="98b2" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">只需用<code class="fe lw lx ly lz b">npm install gatsby-plugin-dark-mode</code>安装插件。</p><p id="758f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，您可以将其添加到您的gatsby-config.js文件中，如下所示:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="92bd" class="ky kz in lz b gy mi mj l mk ml">plugins: [ <br/>  “gatsby-plugin-dark-mode”,<br/>  …<br/>]</span></pre><p id="05cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个插件为您提供了一个反应组件，用于在您的站点中实现主题切换。它为您处理了添加暗模式的许多困难部分。例如，它处理用于持久化主题的浏览器代码。因此，如果您将网站设置为暗模式，关闭浏览器，稍后再访问该网站，它会记住您选择的模式。它还会自动使用首选配色方案CSS媒体查询，所以如果您的系统配置为在可用时使用深色方案，网站将首先在深色模式下打开！</p><h2 id="a5e8" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">第二步。添加切换组件</h2><p id="d8e6" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">我决定切换黑暗模式，在我网站的每个页面的右上角添加一个漂亮的小图标。因为我在每一页上都使用了Header组件，所以很容易在Header组件中添加这个切换:</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/c6634fd4c588a8228442375726998556.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hXpRUjGhCZB3b9slturHsw.png"/></div></div></figure><p id="e1df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如你所看到的，我使用了一个漂亮的小字体图标。如果你想看看如何在你的反应项目中使用他们的图标，你可以在这里阅读更多关于它的<a class="ae jz" href="https://fontawesome.com/how-to-use/on-the-web/using-with/react" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="19b8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">主题生成器组件提供了对主题状态(“暗”或“亮”)的访问以及在这些状态之间切换的功能。当您在这些状态之间切换时，一类“暗”或“亮”会应用于您站点的主体。</p><h2 id="d0b2" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">第三步。应用相关样式</h2><p id="7a81" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">所以现在我们的网站主体上有一个“暗”或“亮”的类别，我们可以通过点击图标在不同状态之间切换。但是我们仍然需要一种方法来根据这个类应用不同的风格。</p><p id="4788" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为此，我使用了主体范围内的CSS变量:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="634c" class="ky kz in lz b gy mi mj l mk ml">body {<br/>  --bg: #fff;<br/>  --primaryText: #000;<br/>  --secondaryText: #777;<br/>  ...<br/>  background-color: var(--bg);<br/>}</span><span id="4125" class="ky kz in lz b gy mn mj l mk ml">body.dark {<br/>  -webkit-font-smoothing: antialiased;<br/>  --bg: #222831;<br/>  --primaryText: #e8e8e8;<br/>  --secondaryText: #9d9d9d;<br/>  ...<br/>}</span></pre><p id="b95e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，现在身体内的每个元素都可以访问CSS变量，例如“primaryText ”,这个变量的值将根据身体是否应用了一个“dark”类而改变。现在我可以在我的网站上的任何元素上使用这些变量，当主题切换时，它们会改变样式！</p><p id="3f62" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用这个简单的概念，您可以做很多事情。我认为根据网站当前的主题改变光标的高亮颜色会很有趣😊</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="66a7" class="ky kz in lz b gy mi mj l mk ml">body *::selection {<br/>  background: var(--link);<br/>  color: #fff;<br/>}</span></pre><p id="db4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是全部！</p></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="c479" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你喜欢这个教程。如果你想看更多这样的教程，请考虑成为<a class="ae jz" href="https://www.patreon.com/wilstaley" rel="noopener ugc nofollow" target="_blank">www.patreon.com/wilstaley</a>的赞助人</p><p id="6b0b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">谢谢！</p></div></div>    
</body>
</html>
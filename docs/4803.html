<html>
<head>
<title>6 Useful JavaScript Code Snippets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个有用的JavaScript代码片段</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-useful-javascript-code-snippets-91424efd1c55?source=collection_archive---------3-----------------------#2021-09-25">https://javascript.plainenglish.io/6-useful-javascript-code-snippets-91424efd1c55?source=collection_archive---------3-----------------------#2021-09-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1ee0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">这个列表可能很主观，但我还是分享了我自己的版本。示例和代码。</h2></div><p id="304d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然Medium上有其他优秀的作家写过这个主题，但我注意到这个列表的极端主观性，因为每个人心里都有不同的日常用例。类似地，我有我个人的JavaScript代码片段列表，对一些读者来说会很方便。</p><h2 id="72ac" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">1.文件内容上传</h2><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="a5d3" class="md lc iq lz b be me mf l mg mh">var selectContent=document.getElementById("selectContent");<br/>var contentForSelection=document.getElementById("contentForSelection");selectContent.onchange=function(e) {<br/>  if (!window.FileReader) {<br/>   alert("Your browser does not support HTML5 'FileReader' function required to open a file.");<br/>  } else {<br/>   let fileis = this.files[0];<br/>   let fileredr = new FileReader();<br/>   fileredr.onload = function (fle) {<br/>    let filecont = fle.target.result;<br/>    contentForSelection.value=filecont;<br/>   };<br/>   //fileredr.readAsArrayBuffer(fileis);<br/>   fileredr.readAsText(fileis);<br/>  }<br/>};</span></pre><figure class="lu lv lw lx gt mj gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/050e0867a45743fc3b55ff7f84848db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*pk4ygEkHyEaOjK1U6sANCA.gif"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">Screenshot by Author | Select .txt file to upload into a textarea</figcaption></figure><p id="ac1f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的例子中，因为我选择导入的文件是文本格式的，所以使用了方法<code class="fe mq mr ms lz b"><strong class="kh ir">readAsText</strong></code>而不是<code class="fe mq mr ms lz b"><strong class="kh ir">readAsArrayBuffer</strong></code>。使用<code class="fe mq mr ms lz b"><strong class="kh ir">readAsArrayBuffer</strong></code>的例子包括读取图像流或读取ZIP存档文件。导入成功后，文件内容被自动渲染到文本区，元素id为<strong class="kh ir">“contentForSelection”</strong>。</p><h2 id="6ff8" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">2.保存文件内容</h2><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="eed0" class="md lc iq lz b be me mf l mg mh">var saveBtn=document.getElementById("saveBtn");<br/>var contentForSelection=document.getElementById("contentForSelection");<br/>saveBtn.onclick=function() {<br/> let txtContent=contentForSelection.value;<br/> if (!window.Blob) {<br/>  alert("Your browser does not support HTML5 'Blob' function required to save a file.");<br/> } else {<br/>  let textblob = new Blob([txtContent], {<br/>   type: "text/plain"<br/>  });<br/>  let dwnlnk = document.createElement("a");<br/>  dwnlnk.download = "output.txt";<br/>  dwnlnk.innerHTML = "Download File";<br/>  if (window.webkitURL != null) {<br/>    dwnlnk.href = window.webkitURL.createObjectURL(textblob);<br/>  }<br/>  dwnlnk.click();<br/>  }<br/>};</span></pre><figure class="lu lv lw lx gt mj gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/99050c520ad04e2ecb3ca07b4fc14ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Gqb2aw0sbDyBQPuPQbFS5w.gif"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">Screenshot by Author | Content present in the textarea is saved by the user via a download link generated by JavaScript</figcaption></figure><p id="273d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上面的代码片段通常在在线笔记应用程序中实现，以便用户导出他们的输出。或者，在诸如数据/代码格式化程序之类的web实用程序中，通常也提供<strong class="kh ir">【Save】</strong>功能，以允许用户将后续格式化的文本内容保存到本地存储文件中。</p><h2 id="b964" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">3.复制到剪贴板</h2><p id="a464" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">复制到剪贴板是基于浏览器设置的另一个经典功能。通常情况下，<strong class="kh ir">如果转换后的输出仅用于一次性任务</strong>，此时没有必要将输出保存到文件中，使用以下JS代码片段会更合适:</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="c07d" class="md lc iq lz b be me mf l mg mh">var copyBtn=document.getElementById("copyBtn");<br/>var contentForSelection=document.getElementById("contentForSelection");<br/>copyBtn.onclick=function(evt) {<br/> copyBtn.nextElementSibling.innerHTML="";<br/> copyTransformedOutput("contentForSelection");<br/> let smallEle=evt.currentTarget.nextElementSibling;<br/> smallEle.innerHTML="&lt;span style='color:green'&gt; Copied to Clipboard!&lt;/span&gt;";<br/>};<br/>function copyTransformedOutput(inputEleId) {<br/> let copyText = document.getElementById(inputEleId);<br/> copyText.select();<br/> copyText.setSelectionRange(0, 99999); /* For mobile devices */<br/> navigator.clipboard.writeText(copyText.value);<br/>}</span></pre><p id="03f4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">注意，我选择在代码片段中成功复制后显示消息“复制到剪贴板”。</strong></p><p id="cdeb" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，转换后的输出可以随后粘贴到其他地方，而不需要存储到本地文件中使用。</p><h2 id="7429" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">4.全部查找和替换</h2><p id="1071" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">虽然在最新的JavaScript控制台中，此<a class="ae my" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll" rel="noopener ugc nofollow" target="_blank">功能目前是内置的</a>，但由于其实现的独创性&amp;简单性，了解以下JavaScript功能仍然是相关且有用的:</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="0fe9" class="md lc iq lz b be me mf l mg mh">function replaceAll(inputStr,toReplace,replaceWith) {<br/>  return inputStr.split(toReplace).join(replaceWith);<br/>}</span></pre><p id="db0c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我希望在文本区域中用“id”替换“ID ”:</p><figure class="lu lv lw lx gt mj gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/1c11570751ae89c7daf8c64c0c8028d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*1rzjYEHzA3kyQepgux0wFA.gif"/></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">Screenshot by Author | “id” attribute of the JSON object is now replaced with its uppercase counterparts “ID” in the above implementation</figcaption></figure><p id="3a74" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">代码片段的其余部分如下:</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="3083" class="md lc iq lz b be me mf l mg mh">var replaceBtn=document.getElementById("replaceBtn");<br/>replaceBtn.onclick=function() {<br/> let toFind=document.getElementById("ToFind").value;<br/> let replaceWith=document.getElementById("ReplaceWith").value;<br/>contentForSelection.value=replaceAll(contentForSelection.value,toFind,replaceWith);<br/>};</span></pre><h2 id="2a4c" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">5.生成随机十六进制颜色</h2><p id="d523" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">我发现这种JavaScript方法不太受欢迎的一种情况是，当我必须在同一个web应用程序上呈现多条驾驶路线时:</p><figure class="lu lv lw lx gt mj gh gi paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="gh gi mz"><img src="../Images/2da5df18b467c1f0522cf953f23b04c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kd209v7UEmki_Pll-dGqjA.png"/></div></div><figcaption class="mm mn gj gh gi mo mp bd b be z dk">Illustration by Author | In this routing application I have created, the fastest route is lightgreen while the shortest distance route is displayed in brown. Depending on no. of routes returned by each map service provider, an infinite no. of colours would be required for each route.</figcaption></figure><p id="fb6f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">显然，对于任何观看者来说，区分不同颜色的无限数量的重叠驾驶路线更容易比较和对比地图可视化上显示的各种路线。因此，动态生成不同的颜色是必要的，可以通过以下方式实现:</p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="347e" class="md lc iq lz b be me mf l mg mh">function generateRandomHexColor() {<br/>    let colorGenerated="#" + (Math.random() * 0xfffff * 1000000).toString(16).slice(0, 6);<br/>    if(colorGenerated !== "#0000ff" &amp;&amp; colorGenerated !== "#ff0000") {<br/>      return colorGenerated;<br/>    }<br/>    colorGenerated="#" + (Math.random() * 0xfffff * 1000000).toString(16).slice(0, 6);<br/>}</span></pre><h2 id="875e" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">6.突出显示JSON语法</h2><p id="f130" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">对于地图服务提供者返回的每条路线，我都集成了路线的JSON数据输出的导出功能。因此，为了区分JSON对象中的对象类型，如字符串、浮点、整数、布尔，我选择了如下所示的颜色编码:</p><figure class="lu lv lw lx gt mj gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/8c0e0fcd3fba29eef67c375c66b82fca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*58q4jFkLjXhNLqYbTiFDCA.png"/></div></figure><p id="a0b1" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述效果可以通过CSS和JavaScript来实现。</p><p id="a414" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> JavaScript代码:</strong></p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="fce2" class="md lc iq lz b be me mf l mg mh">function syntaxHighlight(json) {<br/>    json = json.replace(/&amp;/g, "&amp;amp;").replace(/&lt;/g, "&amp;lt;").replace(/&gt;/g, "&amp;gt;");<br/>    return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {<br/>        var cls = "number";<br/>        if (/^"/.test(match)) {<br/>            if (/:$/.test(match)) {<br/>                cls = "key";<br/>            } else {<br/>                cls = "string";<br/>            }<br/>        } else if (/true|false/.test(match)) {<br/>            cls = "boolean";<br/>        } else if (/null/.test(match)) {<br/>            cls = "null";<br/>        }<br/>        return "&lt;span class='" + cls + "'&gt;" + match + "&lt;/span&gt;";<br/>    });<br/>}</span></pre><p id="3290" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> CSS代码:</strong></p><pre class="lu lv lw lx gt ly lz ma bn mb mc bi"><span id="42b8" class="md lc iq lz b be me mf l mg mh">.string { <br/>  color: green; <br/>}<br/>.number { <br/>  color: darkorange; <br/>}<br/>.boolean { <br/>  color: blue; <br/>}<br/>.null { <br/>  color: magenta; <br/>}<br/>.key { <br/>  color: red; <br/>}</span></pre></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><h2 id="f173" class="lb lc iq bd ld le lf dn lg lh li dp lj ko lk ll lm ks ln lo lp kw lq lr ls lt bi translated">我觉得有用的值得分享的6个JavaScript代码片段列表到此结束！</h2><p id="fcce" class="pw-post-body-paragraph kf kg iq kh b ki mt jr kk kl mu ju kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated"><strong class="kh ir">个人评论:</strong>虽然没有绝对的清单列出哪些JavaScript函数/代码片段是最有用的，但是当这些建议适用于您的特定用例时，由媒体作者编辑的清单确实证明是非常有价值的。当重新查看我的列表时，我注意到它们大多是在浏览器设置中使用的I/O文件实用程序，因为我经常发现自己在数据分析中使用web实用程序。</p><p id="5254" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nm">非常感谢坚持到本文结束！❤希望您发现这适用于您的用例。如需更多数据分析&amp; Web应用相关内容，请随时关注我的媒体</em>  <em class="nm">。非常感谢</em>😀</p><div class="nn no gp gr np nq"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">geek-cc.medium.com</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe mk nq"/></div></div></a></div><p id="43b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你也可以看看下面这篇关于HTML标签的文章:</p><div class="nn no gp gr np nq"><a href="https://medium.com/weekly-webtips/6-useful-but-lesser-known-html-tags-attributes-9e9f2c0208c4" rel="noopener follow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">6个有用但鲜为人知的HTML标签和属性</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">这些标签的存在是有充分理由的…包括示例+用例。</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">medium.com</p></div></div><div class="nz l"><div class="of l ob oc od nz oe mk nq"/></div></div></a></div><p id="c7a0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nm">更多内容请看</em><a class="ae my" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
# 在 JavaScript 中创建唯一的 JSON 对象数组的简单方法

> 原文：<https://javascript.plainenglish.io/the-easy-way-to-create-a-unique-array-of-json-objects-in-javascript-5634254b17aa?source=collection_archive---------1----------------------->

## 没有过滤器，没有回调，没有依赖，没有“for”循环🙌 🎉

![](img/f3de88233d456a212568ece3926b7218.png)

Google *"* [*JS 唯一 JSON 对象数组*](https://www.google.com/search?q=JS+array+of+unique+JSON+Objects) *"* 你会陷入一个惊慌失措的 StackOverflow 答案的世界，答案从多余到荒谬——第三方库、自定义迭代器函数、难以阅读的不可移植代码…

你什么都不需要！

是的，我完全理解这篇文章现在出现在谷歌搜索的第一页的讽刺意味。我早该料到会有这一天🤦🏻‍♂️

在我继续之前，让我明确一下我们试图解决的确切问题。考虑下面的 JSON 数组:

如您所见，我们为名为`John`的人创建了一个重复的对象。如果您的应用程序需要一组唯一的对象，您需要找到一种方法来过滤掉重复的条目。

## 介绍器械包()

对于大多数数组，我们可以使用`[Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)`来解决这个问题，它是一个 JavaScript 全局对象，强制其每个值都是唯一的，并丢弃任何重复的值。请参见下面的示例:

然而，如果我们在一组 JSON 对象上使用`Set`,它不会删除重复的对象。这是因为`Set`基于原语的严格子集(字符串、数字、布尔等)评估一个项目是否是重复的。)但这并不包括完整的对象。`Set`不遍历对象来检查数组中其他地方的属性和值是否完全匹配。相反，它假设它们是唯一的，并跳过它们。

![](img/c61f66fb7ad7350ec4f61fd5f7fec14f.png)

显然，我们需要遍历数组中的每个对象，并找到某种方法来确定它是否是重复的。也许你的对象有一个唯一的标识符(比如`"id"`)。但也许，就像我们的例子一样，他们没有。即使他们这样做了，我们需要编写的使用这个属性的解决方案也不是可移植的。

我们需要的是一种将对象转换成原语的方法，这种原语可以有效地进行评估，但不破坏对象的数据结构，也不依赖于任何短暂的东西(比如特定的属性名或数据结构)。

## JSON.stringify()和 JSON.parse()来拯救！

`[JSON.stringify()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)`将对象转换成字符串，然后`Set`可以评估这些字符串是否重复。我们需要做的就是映射我们的数组，并将`JSON.stringify`定义为回调函数:

现在我们可以使用`JSON.parse()`将这些字符串转换回 JSON 对象:

如果您在控制台中继续操作，您会注意到一个错误:

```
Uncaught TypeError: uniquePeopleStrings.map is not a function
```

![](img/8765908de8e394cdd38240af42b5a508.png)

还记得我们说过`Set`创建了一个**对象**吗？这意味着它不是一个数组，所以我们不能覆盖它的值。我们需要做的是从我们的集合中创建一个数组:

现在我们有了一系列独特的对象！

如果简洁和可读性是您的目标(它们应该是)，那么您会很高兴地知道我们实际上可以将这些方法链接在一起，并使用一点速记在一行中执行整个操作。参见下面的完整解决方案:

## 警告

这种方法适用于任何 JSON 对象数组，但是有一个很大的警告:如果数据结构不一致，重复的数据将会丢失。例如，考虑以下对象:

正如我们所看到的，这个数组中的两个项目是重复的，但是属性的顺序不同。当我们使用`JSON.stringify()`时，属性顺序被保留，这意味着`Set`不会识别重复的。如果您从 API 或数据库中提取数据，您可能会收到具有一致结构的干净的数据，因此您可以相当自信地认为这不是问题。但是，如果您对一致性有任何疑问，您需要执行以下操作:

第一行从数组中的第一个对象(在本例中是`["name", "age"]`)创建一个属性键数组，第二行映射我们的 JSON 数组，并使用`keys`数组作为属性添加的顺序返回一个对象。当然，如果您有一个更深层次的嵌套数据结构，您可能希望这个过程是递归的。

我希望这种技术能在您下次尝试创建一个独特的 JSON 数组时节省一些时间！**如果您从这篇文章中获得了任何价值，请关注、回复并分享🙏**

*发现我的代码有问题？知道更干净的方法来达到同样的效果吗？请在评论中告诉我！👇*
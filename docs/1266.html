<html>
<head>
<title>Add a Mercator Map into Our React App with the Visx Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visx库将墨卡托地图添加到我们的React应用程序中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-a-mercator-map-into-our-react-app-with-the-visx-library-9eeaaa92d07a?source=collection_archive---------19-----------------------#2021-03-16">https://javascript.plainenglish.io/add-a-mercator-map-into-our-react-app-with-the-visx-library-9eeaaa92d07a?source=collection_archive---------19-----------------------#2021-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/f2b4e2ed4652aaba990fecdb07d9eab6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7kClcH28wXFXVO0N"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@mrrrk_smith?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">John-Mark Smith</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3132" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Visx是一个库，让我们可以轻松地将图形添加到React应用程序中。</p><p id="ee07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用它将地图视图添加到React应用程序中</p><h1 id="396e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">安装所需的软件包</h1><p id="2968" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们必须安装一些模块来创建地图。</p><p id="61e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="89df" class="mn lc iq mj b gy mo mp l mq mr">npm i @visx/geo @visx/responsive @visx/scale</span></pre><p id="8e2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装软件包。</p><h1 id="ec44" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">添加地图</h1><p id="89d5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过编写以下内容来添加带有墨卡托投影的地图:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="76d5" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { scaleQuantize } from "@visx/scale";<br/>import { Mercator, Graticule } from "@visx/geo";<br/>import * as topojson from "topojson-client";<br/>import topology from "./world-topo.json";</span><span id="2759" class="mn lc iq mj b gy ms mp l mq mr">const background = "#f9f7e8";<br/>const world = topojson.feature(topology, topology.objects.units);</span><span id="f810" class="mn lc iq mj b gy ms mp l mq mr">const color = scaleQuantize({<br/>  domain: [<br/>    Math.min(...world.features.map((f) =&gt; f.geometry.coordinates.length)),<br/>    Math.max(...world.features.map((f) =&gt; f.geometry.coordinates.length))<br/>  ],<br/>  range: [<br/>    "#ffb01d",<br/>    "#ffa020",<br/>    "#ff9221",<br/>    "#ff8424",<br/>    "#ff7425",<br/>    "#fc5e2f",<br/>    "#f94b3a",<br/>    "#f63a48"<br/>  ]<br/>});</span><span id="2be0" class="mn lc iq mj b gy ms mp l mq mr">const Example = ({ width, height, events = false }) =&gt; {<br/>  const centerX = width / 2;<br/>  const centerY = height / 2;<br/>  const scale = (width / 630) * 100;</span><span id="0970" class="mn lc iq mj b gy ms mp l mq mr">  return width &lt; 10 ? null : (<br/>    &lt;svg width={width} height={height}&gt;<br/>      &lt;rect<br/>        x={0}<br/>        y={0}<br/>        width={width}<br/>        height={height}<br/>        fill={background}<br/>        rx={14}<br/>      /&gt;<br/>      &lt;Mercator<br/>        data={world.features}<br/>        scale={scale}<br/>        translate={[centerX, centerY + 50]}<br/>      &gt;<br/>        {(mercator) =&gt; (<br/>          &lt;g&gt;<br/>            &lt;Graticule<br/>              graticule={(g) =&gt; mercator.path(g) || ""}<br/>              stroke="rgba(33,33,33,0.05)"<br/>            /&gt;<br/>            {mercator.features.map(({ feature, path }, i) =&gt; (<br/>              &lt;path<br/>                key={`map-feature-${i}`}<br/>                d={path || ""}<br/>                fill={color(feature.geometry.coordinates.length)}<br/>                stroke={background}<br/>                strokeWidth={0.5}<br/>                onClick={() =&gt; {<br/>                  if (events)<br/>                    alert(<br/>                      `Clicked: ${feature.properties.name} (${feature.id})`<br/>                    );<br/>                }}<br/>              /&gt;<br/>            ))}<br/>          &lt;/g&gt;<br/>        )}<br/>      &lt;/Mercator&gt;<br/>    &lt;/svg&gt;<br/>  );<br/>};</span><span id="3df1" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Example width={500} height={300} /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="9827" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">world-topo.json</code>可在<a class="ae kc" href="https://codesandbox.io/s/github/airbnb/visx/tree/master/packages/visx-demo/src/sandboxes/visx-geo-custom?file=/world-topo.json" rel="noopener ugc nofollow" target="_blank">https://code sandbox . io/s/github/Airbnb/visx/tree/master/packages/visx-demo/src/sandboxes/visx-geo-custom？file=/world-topo.json </a></p><p id="18f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">color</code>变量来添加地图上国家的颜色。</p><p id="6b8c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe mt mu mv mj b">Example</code>组件中，我们添加了<code class="fe mt mu mv mj b">centerX</code>和<code class="fe mt mu mv mj b">centerY</code>变量来设置地图的中心。</p><p id="523e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">scale</code>有初始缩放级别。</p><p id="75cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后添加一张使用墨卡托投影的2D地图，我们添加了<code class="fe mt mu mv mj b">Mercator</code>组件。</p><p id="c877" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe mt mu mv mj b">data</code>属性设置为<code class="fe mt mu mv mj b">world</code>变量，该变量是使用th <code class="fe mt mu mv mj b">topology</code> JSON作为参数从<code class="fe mt mu mv mj b">topojson.feature</code>方法创建的。</p><p id="f1be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在它的渲染道具中，我们添加了<code class="fe mt mu mv mj b">Graticule</code>组件来添加地图网格线。</p><p id="37d6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且<code class="fe mt mu mv mj b">path</code>元素绘制国家。</p><h1 id="bc7d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="ad2c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过Visx库轻松地将简单的2D地图添加到React应用程序中。</p><p id="3127" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p><p id="901c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容尽在</em> <a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">说白了</em> </strong> </a></p></div></div>    
</body>
</html>
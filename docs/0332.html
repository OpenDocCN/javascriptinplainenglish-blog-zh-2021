<html>
<head>
<title>Building Forms in React Native With Formik</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native与Formik中构建表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-forms-in-react-native-with-formik-474be9d54a62?source=collection_archive---------11-----------------------#2021-01-19">https://javascript.plainenglish.io/building-forms-in-react-native-with-formik-474be9d54a62?source=collection_archive---------11-----------------------#2021-01-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df23" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">React Native中带有验证的更好的表单</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/65d612ae27f88a55b27962a27f528d3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G01iQxSmZ34JgORE.jpg"/></div></div></figure><h1 id="e7fc" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">为什么是福米克？</h1><p id="56e8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">每个<strong class="ll ir"> React-Native </strong>应用程序都需要添加表单来处理用户输入交互。在没有<strong class="ll ir"> Formik </strong>的情况下，处理来自输入字段的用户凭证变得非常痛苦，因为我们必须处理多个输入表单的状态，另一方面，在处理错误的同时进行验证。有了<strong class="ll ir"> Formik </strong>表单更加有条理，具有超级简单的测试和重构特性。</p><p id="04a8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们将了解如何使用Formik构建表单，以及为什么它更好:</p><ul class=""><li id="c326" class="mk ml iq ll b lm mf lp mg ls mm lw mn ma mo me mp mq mr ms bi translated">使用<strong class="ll ir"> useState </strong>钩子处理表单状态。</li><li id="a730" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">用<strong class="ll ir"> Formik </strong>构建模板。</li><li id="8e70" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">用<strong class="ll ir">验证表单是</strong>。</li></ul><h2 id="8688" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lw nf ng lf ma nh ni lh nj bi translated">使用useState挂钩处理窗体状态</h2><ul class=""><li id="c000" class="mk ml iq ll b lm ln lp lq ls nk lw nl ma nm me mp mq mr ms bi translated">在给定的示例中，有两个组件需要查看，一个是带有图标道具的漂亮的文本输入组件<strong class="ll ir">AppTextInput</strong>，另一个是包装在可触摸的内的视图组件<strong class="ll ir">AppButton</strong>组件<strong class="ll ir">。</strong></li></ul><p id="d0e1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><em class="nn">现在为了让这个表单能够处理状态，我们将在React中使用</em><strong class="ll ir"><em class="nn">useState</em></strong><em class="nn">钩子。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/27a359106f699c63d65eb37ebf5bf067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cAOz6-7gzXPdc1Fyv1bvNA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk"><strong class="bd nt">Forms Without Hooks</strong></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/5df090c720a7db29fb832cb2ff587e60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AmKva0hE7423VU6YmB5_sA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk"><strong class="bd nt">Forms With Hooks</strong></figcaption></figure><ul class=""><li id="63b5" class="mk ml iq ll b lm mf lp mg ls mm lw mn ma mo me mp mq mr ms bi translated">我们已经使用<strong class="ll ir"> useState </strong>钩子在函数组件中定义了两个<strong class="ll ir"> const </strong>变量，其中email &amp; password将存储我们的输入值，而<strong class="ll ir">set email</strong>&amp;<strong class="ll ir">set password</strong>是负责改变表单状态的函数。</li><li id="ef55" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">为了使我们的表单能够处理状态，我们使用了<strong class="ll ir"> AppTextInput </strong>组件中的<strong class="ll ir"> onChangeText </strong>属性，它存储一个值，并将该值传递给<strong class="ll ir"> setEmail </strong>在我们的电子邮件表单字段&amp;中，类似地，在密码字段中，我们将文本传递给<strong class="ll ir"> setPassword。</strong></li><li id="8c92" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">在<strong class="ll ir"> AppButton </strong>组件中，我们记录用户在表单字段中输入的电子邮件和密码。</li><li id="dca1" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">当我们按下<em class="nn">登录按钮</em>时，我们可以在控制台上看到记录的数值。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nu"><img src="../Images/20dd6f5f6631fea8b925491520bc8136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ohbmv_ZfSDuR_AQL46cWmw.png"/></div></div></figure><h2 id="c0a8" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lw nf ng lf ma nh ni lh nj bi translated">使用Formik构建表单</h2><p id="f9ab" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">要使用<strong class="ll ir"> Formik </strong>，请使用<strong class="ll ir"> <em class="nn"> npm在您的项目目录中安装formik </em> </strong>，并导入它。现在，为了实现相同的功能，我们必须配置一些属性:</p><ul class=""><li id="e936" class="mk ml iq ll b lm mf lp mg ls mm lw mn ma mo me mp mq mr ms bi translated">负责输入表单值的<strong class="ll ir"> initialValues </strong>，在我们的例子中就是<strong class="ll ir"> email </strong>和<strong class="ll ir"> password </strong>值。</li><li id="b0c9" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated"><strong class="ll ir"> onSubmit </strong>属性处理输入值的日志记录部分(在我们的例子中，我们在控制台中记录它们)。</li><li id="7c1d" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">之后，我们将三个主要组件(<strong class="ll ir">AppTextInput</strong>&amp;<strong class="ll ir">AppButton</strong>)移动到一个片段中，或者你可以说一对尖括号，因为我们在Formik组件中渲染了多个组件</li><li id="e84d" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">我们还定义了两个函数来处理表单的状态-(<strong class="ll ir">handle change</strong>&amp;<strong class="ll ir">handle submit</strong>)，这两个函数在我们将<strong class="ll ir"> handleChange </strong>传递给<strong class="ll ir"> AppTextInput </strong>组件中的<strong class="ll ir"> onChangeText </strong>属性以及将<strong class="ll ir"> handleSubmit </strong>传递给<strong class="ll ir"> AppButton </strong>组件时跟踪表单的状态。</li></ul><p id="98ee" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">在我们的表单中完成这些配置后，我们能够构建具有相同特性的表单，而无需使用<strong class="ll ir"> <em class="nn"> useState </em> </strong>钩子，现在我们不再在函数组件中处理多个状态。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi no"><img src="../Images/3b33d9e10b2c61a2db103c907e30bb8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUVxUc8F5w0m1tYrE7z-UA.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk"><strong class="bd nt">Adding Formik In Our Form</strong></figcaption></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nv"><img src="../Images/8e4f7595613a6801769703548858c302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVxI5HpFRDcSdNXf_qvh0g.png"/></div></div><figcaption class="np nq gj gh gi nr ns bd b be z dk"><strong class="bd nt">Logged results on the console (returns an object)</strong></figcaption></figure><h2 id="ee40" class="my ks iq bd kt mz na dn kx nb nc dp lb ls nd ne ld lw nf ng lf ma nh ni lh nj bi translated">用Yup验证表单</h2><p id="52e8" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">由于<strong class="ll ir"> Formik </strong>内置了对<strong class="ll ir"> Yup </strong>的支持特性，因此使用Yup来实现表单验证非常容易。</p><p id="80d1" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">要安装Yup:</p><p id="46d9" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">NPM I Yup&amp;</strong>import as<strong class="ll ir">-(</strong>import * as Yup from‘Yup’；<strong class="ll ir"> ) </strong></p><ul class=""><li id="ffa2" class="mk ml iq ll b lm mf lp mg ls mm lw mn ma mo me mp mq mr ms bi translated">要使用Yup在我们的电子邮件和密码字段中添加表单验证，我们必须定义一个<strong class="ll ir"> valiationSchema </strong>来保存我们表单的所有验证规则。为此，我们只需在函数组件外部定义一个const，这样它就不会在每次表单状态改变时重新呈现。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/61575a4a9e9cbe54838b4fb8f1bc8af2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*46692Ad4eJx3CFWN1STAPA.png"/></div></div></figure><ul class=""><li id="9c72" class="mk ml iq ll b lm mf lp mg ls mm lw mn ma mo me mp mq mr ms bi translated">在Yup中有很多方法可以用于表单验证，在我们的例子中，我们将简单地为电子邮件和密码字段设置验证模式。</li><li id="74fb" class="mk ml iq ll b lm mt lp mu ls mv lw mw ma mx me mp mq mr ms bi translated">在定义了验证模式之后，我们所要做的就是将它传递给我们的<strong class="ll ir"> Formik </strong>组件中的<strong class="ll ir"> validationSchema </strong>属性，这样我们就完成了在表单中设置验证的工作。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/810c54fc146180c45a9422b23262a93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnGugrnSDlJJEAgiRJhGCA.png"/></div></div></figure></div></div>    
</body>
</html>
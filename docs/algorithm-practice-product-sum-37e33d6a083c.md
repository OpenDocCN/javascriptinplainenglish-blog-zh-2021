# 算法练习:乘积和

> 原文：<https://javascript.plainenglish.io/algorithm-practice-product-sum-37e33d6a083c?source=collection_archive---------15----------------------->

2021 年快乐！这是新的一年和新的开始，我们将重新开始掌握算法。

我一直忙于准备即将到来的面试，并加倍努力进行算法实践，所以本周，让我们进入算法实践系列的第三次迭代。

![](img/fa204678d6886db2f45664a8f5d9ea68.png)

Photo by [timJ](https://unsplash.com/@the_roaming_platypus?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

## **乘积和**

本周，我们将演练乘积和算法问题。这是另一个经常在技术面试中出现的算法。*给定一个数组，我们的任务是写一个返回其乘积和的函数。*

在我们开始考虑如何处理手头的任务之前，有些事情需要澄清。给定的数组(我们称之为“特殊”数组)总是包含整数或其他嵌套“特殊”数组的非空数组。

我们所说的乘积和是什么意思？一个“特殊”数组的**乘积和**是它的元素的和，但是有一个条件——当有嵌套的“特殊”数组时，嵌套数组的元素被求和并乘以它们的深度级别(“特殊”数组的嵌套程度)。

让我们看几个例子来说明这个概念:

```
Given Array: [a, b]
Product Sum = a + bGiven Array: [a, [b, c]]
Product Sum = a + 2(b + c)Given Array: [a, [b, [c]]]
Product Sum = a + 2(b + 3c)
```

这个问题看起来简单明了，但是嵌套数组会很快变得复杂和混乱。我们如何跟踪一个元素的嵌套程度，以便获得该元素的准确乘积和？

## **概念概述**

处理这个问题的主要挑战是找到元素的深度级别。由于给定的数组可以包含更多的嵌套数组，这可能会变得非常混乱。但是，让我们考虑一下——当我们遍历数组时，如果当前元素是另一个数组，我们知道这是一个嵌套元素。如果遍历给定的数组，并且没有命中另一个数组元素，那么我们知道我们处理的是一个只有一层深度的数组。当我们试图提出解决方案时，这是要记住的重要一点。

因此，在我们进入实质性的细节之前，让我们重申一下我们目前所知道的。我们知道，我们需要循环遍历数组，对于每个元素，检查元素是否嵌套。我们可以通过检查元素是否是另一个数组来做到这一点。如果它不是另一个数组——这意味着它是一个非嵌套的元素——我们只需将该元素添加到我们的 sum 中。如果元素确实是另一个数组，我们知道必须首先找出元素的嵌套程度，这样我们就可以用它乘以内部数组的和。这可能会涉及到某种递归。

## **代码演练**

现在我们可以开始实际的编码了。

我将使用一个 **for 循环**来遍历数组。为了检查一个元素是否是一个数组，我将使用`[Array.isArray()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray)`方法，它确定传入的值是否是一个数组。

我们可以初始化一个 *sum* 变量，并将其设置为初始值 0，这样我们就可以跟踪总和。我们还需要记录筑巢的情况。这里我将使用一个设置为默认值 1 的*嵌套*属性来跟踪元素的深度级别。

当我们遍历数组时，我们希望检查每个元素是否都是数组。如果是，我们递归调用我们的函数来更新我们的和。我们还想通过给我们的*嵌套*变量加 1 来说明元素的嵌套。如果我们不是在处理一个数组，我们可以简单地把元素加到我们的和中。最后，我们将返回总和乘以我们的*嵌套*变量，以获得我们的乘积总和。

这在 JavaScript 中是这样的:
<html>
<head>
<title>How to Build a Database Helper Class for Google Firestore with Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Node.js构建Google Firestore的数据库助手类</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-database-helper-class-for-google-firestore-with-node-js-1e0c4a8e168a?source=collection_archive---------1-----------------------#2021-12-09">https://javascript.plainenglish.io/how-to-build-a-database-helper-class-for-google-firestore-with-node-js-1e0c4a8e168a?source=collection_archive---------1-----------------------#2021-12-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/c5da1683fabb3cb32d7e974bcc726739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eYoUYipWafydC-y6sF1cMw.png"/></div></div></figure><p id="0b1d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">抽象数据库操作可能具有挑战性。</p><p id="a581" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我想分享我构建的数据库助手类，以便在Node.js API中与Google Firestore交互。</p><p id="f614" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">以下示例假设您已经安装并连接了Firestore。</p><p id="4a7d" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">不带类的初始设置</strong></p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="6c6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果我们以此作为管理数据库中用户的初始设置，那么一切都会很好。</p><p id="5f16" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">理想情况下，我们需要一个支持以下内容的类:</p><ol class=""><li id="eb6a" class="lc ld iq ka b kb kc kf kg kj le kn lf kr lg kv lh li lj lk bi translated">任何集合的可重用数据库功能。</li><li id="13bb" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">类型安全。</li><li id="84ec" class="lc ld iq ka b kb ll kf lm kj ln kn lo kr lp kv lh li lj lk bi translated">一次只允许使用一个数据库连接。</li></ol><p id="a579" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们最重要的目标是减少在应用程序的其他部分实现类似交互所需的重复代码。</p><p id="8e03" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我将在下面提供完整的示例类，然后是初始设置的更新版本。</p><p id="4d6f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">数据库类助手</strong></p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="cacb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">上面的类抽象了我的应用程序需要的所有数据库交互。Typescript泛型和联合类型有助于使函数尽可能安全。</p><p id="9882" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这个类也遵循单例设计模式，这意味着一次只能使用一个数据库连接。</p><p id="f06e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果需要进行独特的数据库交互，我们可以使用<code class="fe lq lr ls lt b">db</code>变量与firestore进行交互，就像我们之前所做的那样。</p><p id="720e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">更新数据库功能</strong></p><figure class="kw kx ky kz gt jr"><div class="bz fp l di"><div class="la lb l"/></div></figure><p id="df93" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了这个类，您可以减少应用程序中样板文件的数量，而不会牺牲启用定制函数的能力。</p><p id="d9e4" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="lu">更多内容看</em> <a class="ae lv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir"> <em class="lu">说白了就是io </em> </strong> </a> <strong class="ka ir"> <em class="lu">。</em> </strong> <em class="lu">报名参加我们的</em><strong class="ka ir"><em class="lu"/></strong><a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="lu">免费每周简讯点击这里</em> </strong> </a> <strong class="ka ir"> <em class="lu">。</em> </strong></p></div></div>    
</body>
</html>
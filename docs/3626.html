<html>
<head>
<title>Perfect Express Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">完美快递架构</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/perfect-express-architecture-ba28c2bfc8b3?source=collection_archive---------6-----------------------#2021-07-21">https://javascript.plainenglish.io/perfect-express-architecture-ba28c2bfc8b3?source=collection_archive---------6-----------------------#2021-07-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="b52d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Express的可扩展且易于理解的体系结构。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/1f2e0f141043e8c8709d6c4389365537.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*H895eKWosZtqj7Mm"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@josealjovin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">jose aljovin</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="9701" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">在后台</h2><p id="44a2" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">同样的故事，一遍又一遍，😁，我目前正在运行一个概念，或者说是一个想法，编写一次，随时随地使用逻辑或代码。到目前为止，其他开发人员已经创建、形成并重用了大量代码库。您可以在下面的链接中找到这些代码库。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="a694" class="lj lk iq mi b gy mm mn l mo mp"><a class="ae lb" href="www.ihatereading.in/repos" rel="noopener ugc nofollow" target="_blank"><strong class="mi ir">iHateReading Code Repos</strong></a></span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="bf90" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">概观</h2><p id="9068" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">在今天的故事中，我们将创建Express JS框架库，并遵循创建可伸缩且易于理解的架构的概念。</p><p id="923a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们开始之前，第一步也是最重要的一步是下载Express framework中最常用的包。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="b3e3" class="lj lk iq mi b gy mm mn l mo mp">yarn add express body-parser dotenv nodemon axios</span></pre><ul class=""><li id="fbef" class="mq mr iq jp b jq jr ju jv jy ms kc mt kg mu kk mv mw mx my bi translated">正文解析器—解析请求正文</li><li id="c052" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">dotenv —读取env文件</li><li id="ea9a" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">nodemon —查看实时变化</li><li id="bd8c" class="mq mr iq jp b jq mz ju na jy nb kc nc kg nd kk mv mw mx my bi translated">axios —进行API调用</li></ul></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="b20d" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">创建路线</h2><p id="5617" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">每个端点称为一个路由，每个路由都放在根目录的一个文件夹中。不要在单个route.js文件中添加所有端点路由，而是根据它们的逻辑将它们解耦，这是一个很好的做法。</p><p id="9962" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，身份验证将具有端点，所有端点(如登录、注册和重置密码)都可以在routes文件夹的authentication.js中定义。类似地，我们可以为我们的服务器将提供的每项服务创建分段路由。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="4a64" class="lj lk iq mi b gy mm mn l mo mp">-routes<br/> -authentication</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="7a10" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">创建控制器</h2><p id="6015" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">控制器是每个路由的方法或回调。它们是从客户端调用每个端点时执行的业务逻辑。例如，假设客户端使用其电子邮件和密码对端点<code class="fe ne nf ng mi b">/login</code>进行服务器调用，验证用户真实性的整个认证逻辑将只在控制器内部编写。</p><h2 id="74e0" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">控制器架构</h2><p id="3ac2" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">我经常发现将控制器按照它所服务的服务进行命名是一个很好的做法。例如，登录、签名和重置密码方法可以在身份验证控制器中定义。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="5910" class="lj lk iq mi b gy mm mn l mo mp">-controllers<br/> -authentication<br/>   -login.js<br/>   -register.js<br/>   -reset-password.js</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="2b93" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">定义模式</h2><p id="6640" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">嗯，大多数时候你会在REST API中使用ORM层。因此，无论使用什么数据库，定义模式都是绝对必要的。我总是喜欢用一个完全不同的模式文件夹来定义模式。这使得集成第三方模式定义库(如mongoose)变得很容易。</p><p id="2e45" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">类似地，您可以像controller和routes一样在根目录中创建一个名为<code class="fe ne nf ng mi b">models</code>的新文件夹。这将包含您将在数据库中创建的每个集合或表记录的所有模式。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="4c72" class="lj lk iq mi b gy mm mn l mo mp">-models<br/> -user.js<br/> -product.js</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="5b50" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">环境文件</h2><p id="df6f" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">每次都需要处理env文件，所以我建议安装dotenv npm模块，以便在节点应用程序中轻松处理env文件。</p><p id="8977" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您将需要env来定义数据库URL、应用程序的节点环境、用于部署、开发和生产的服务器端口。所以使用env是不可避免的，这是dotenv最初安装的。</p></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="c5c5" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">静态文件</h2><p id="fd20" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">对于某些应用程序，您需要处理静态文件，如HTML、CSS或图像。Node JS自带完善的第三方支持，比如Mustache等等，可以处理所有静态文件。</p><p id="82a6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">放置所有静态文件的传统方法是在根目录的视图目录中。所以最好遵循相同的常规规则来处理静态文件，当然，您可以在将来相应地更改它。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="f5f7" class="lj lk iq mi b gy mm mn l mo mp">view<br/> -styles.css<br/> -index.html</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="c5e3" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">测试目录</h2><p id="4ea0" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">编写测试用例总是成为node js应用程序的低优先级，但我确实建议编写测试用例，因为它们有助于提供更好的服务，并覆盖人类无法覆盖的边缘情况。</p><p id="3c13" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了编写测试用例，你可以简单地在根目录下创建一个名为<code class="fe ne nf ng mi b">tests</code>的文件夹，并在其中定义所有的测试用例。同样，这是我在chai和mocha的文档中读到的传统方法，chai和mocha是Node JS应用程序编写测试用例的npm模块。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="1071" class="lj lk iq mi b gy mm mn l mo mp">-tests<br/> -userTest.js</span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="5555" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">结论</h2><p id="92a3" class="pw-post-body-paragraph jn jo iq jp b jq mc js jt ju md jw jx jy me ka kb kc mf ke kf kg mg ki kj kk ij bi translated">您可以在下面的链接中找到最终的资源库。我没有详细介绍很多故事，因为这只是为了对perfect express架构有一个基本的了解，而不是深入细节。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="6eba" class="lj lk iq mi b gy mm mn l mo mp"><a class="ae lb" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogsBackend/ExpressBasicSetup" rel="noopener ugc nofollow" target="_blank"><strong class="mi ir">Click to reach the code repository</strong></a></span></pre><p id="54e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">直到，下一次，有一个美好的一天，人们。</p><pre class="km kn ko kp gt mh mi mj mk aw ml bi"><span id="8a68" class="lj lk iq mi b gy mm mn l mo mp">For more such stories visit our website - 💻 <a class="ae lb" href="http://www.ihatereading.in" rel="noopener ugc nofollow" target="_blank"><strong class="mi ir">iHateReading</strong></a></span></pre></div><div class="ab cl lc ld hu le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ij ik il im in"><h2 id="ed11" class="lj lk iq bd ll lm ln dn lo lp lq dp lr jy ls lt lu kc lv lw lx kg ly lz ma mb bi translated">更多阅读</h2><div class="nh ni gp gr nj nk"><a href="https://medium.com/nerd-for-tech/5-reasons-why-vercel-is-the-best-for-application-deployment-92009b17e601" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">Vercel最适合应用部署的5个原因</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">无论是React project还是Gatsby还是Next JS或者Vue JS或者Nuxt JS或者Nest JS或者Node JS Vercel都是完美的选择…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">medium.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny kv nk"/></div></div></a></div><div class="nh ni gp gr nj nk"><a href="https://medium.com/geekculture/13-steps-for-perfect-authentication-flow-in-backend-4fad7dce0e0" rel="noopener follow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd ir gy z fp np fr fs nq fu fw ip bi translated">后端完美认证流程的13个步骤</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">我把我的应用服务器当作一个俱乐部聚会，只需13个步骤就能开发出完美的认证流程</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">medium.com</p></div></div><div class="nt l"><div class="nz l nv nw nx nt ny kv nk"/></div></div></a></div><p id="ace3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="oa">更多内容看</em> <strong class="jp ir"> <em class="oa"> </em> </strong> <a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="oa">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
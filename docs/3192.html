<html>
<head>
<title>How to Synchronize React-Redux with Local storage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将React-Redux与本地存储同步</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-synchronize-react-redux-with-local-storage-a2498564c295?source=collection_archive---------1-----------------------#2021-06-29">https://javascript.plainenglish.io/how-to-synchronize-react-redux-with-local-storage-a2498564c295?source=collection_archive---------1-----------------------#2021-06-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="efb2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用本地存储来缓存API调用，以获得最佳体验</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0eafb7af0f02c484f426e59f4fb3b1d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*60xmToGpTwmdDLtt38dTtw.png"/></div></div></figure><h2 id="b537" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">简介:</h2><p id="9975" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">React Redux作为一个全局状态管理系统与React一起使用时，是一个经过验证的解决方案。许多公司在招聘时要求Redux和React相结合。</p><h2 id="454b" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">为什么要坚持？</h2><p id="5265" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">Redux是一个很好的解决方案，用于在令人敬畏的组件之间共享状态，但是更多的时候，当您在一个新的选项卡或页面刷新中打开应用程序时，会面临一个挑战，这会导致状态丢失，如果处理不当，会导致React for nested values出现黑屏。</p><h2 id="8ce8" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated"><strong class="ak">如何坚持？</strong></h2><p id="3993" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">您可以使用几个解决方案来解决这个问题。我们可以使用一个定制的钩子来获取Redux状态，并将其放入本地存储中，但是尽管这种方法可能有其好处，但它就像重新发明轮子一样，可能弊大于利。</p><p id="64ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">我的坚持之道？</strong></p><p id="f919" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用一个名为redux-persist的库，这是一个非常著名的包，每周下载量超过50万次，它使用起来非常简单、直观，并且可以完成任务。</p><pre class="kj kk kl km gt ls lt lu lv aw lw bi"><span id="a35c" class="ku kv in lt b gy lx ly l lz ma">// configureStore.js<br/> <br/>import { createStore } from 'redux'<br/>import { persistStore, persistReducer } from 'redux-persist'<br/>import storage from 'redux-persist/lib/storage' // defaults to localStorage for web<br/> <br/>import rootReducer from './reducers'<br/> <br/>const persistConfig = {<br/>  key: 'root',<br/>  storage,<br/>}<br/> <br/>const persistedReducer = persistReducer(persistConfig, rootReducer)<br/> <br/>export default () =&gt; {<br/>  let store = createStore(persistedReducer)<br/>  let persistor = persistStore(store)<br/>  return { store, persistor }<br/>}</span></pre><p id="f2e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">只需几行代码就可以实现基本设置:您的存储与本地存储同步。</p><p id="0e6b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">添加到应用程序</p><pre class="kj kk kl km gt ls lt lu lv aw lw bi"><span id="3de5" class="ku kv in lt b gy lx ly l lz ma">import { PersistGate } from 'redux-persist/integration/react'<br/> <br/>// ... normal setup, create store and persistor, import components etc.<br/> <br/>const App = () =&gt; {<br/>  return (<br/>    &lt;Provider store={store}&gt;<br/>      &lt;PersistGate loading={null} persistor={persistor}&gt;<br/>        &lt;RootComponent /&gt;<br/>      &lt;/PersistGate&gt;<br/>    &lt;/Provider&gt;<br/>  );<br/>};</span></pre><p id="5cf3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除此之外，您还可以在每次构建时传递键名来自动递增和废弃缓存，以避免与代码和本地存储不匹配。</p><p id="4efd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过这种设置，您可以将Redux状态的一部分列入黑名单或白名单。</p><p id="35e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，如果您希望每次都更新一个状态，您可以将它添加到黑名单中，也可以编写其他逻辑来根据需要进行处理。</p><p id="eebc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为该库提供了多个API，比如purge flush等等。</p><p id="8050" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作为一名软件工程师，请继续关注更多真实世界的例子和用例。</p><p id="93fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">和平！</p><p id="0d19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mb">更多内容尽在</em><a class="ae mc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="mb">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
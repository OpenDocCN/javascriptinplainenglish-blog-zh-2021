<html>
<head>
<title>How to Remove Duplicates From an Array of Objects in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中删除对象数组中的重复项？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-remove-duplicates-from-an-array-of-objects-in-javascript-71ce1bc96265?source=collection_archive---------4-----------------------#2021-09-22">https://javascript.plainenglish.io/how-to-remove-duplicates-from-an-array-of-objects-in-javascript-71ce1bc96265?source=collection_archive---------4-----------------------#2021-09-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/fba433948cf8c224f9a8f7849a590562.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AQKu7XCnpFiT9zr0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@newhighmediagroup?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Richard T</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0b2b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们的JavaScript代码中有一组对象，它们有重复的对象。</p><p id="5244" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可能希望找到重复的内容并删除它们。</p><p id="fba0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何从JavaScript数组中移除重复的对象。</p><h1 id="12f5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数组.原型.过滤器</h1><p id="74fb" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用JavaScript数组的<code class="fe me mf mg mh b">filter</code>方法从数组中删除重复的条目。</p><p id="1bf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使用它，我们写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="087d" class="mq lc iq mh b gy mr ms l mt mu">const arr = [{<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "new york",<br/>    name: "james"<br/>  }<br/>]<br/>const result = arr.filter((thing, index, self) =&gt;<br/>  index === self.findIndex((t) =&gt; (<br/>    t.place === thing.place &amp;&amp; t.name === thing.name<br/>  ))<br/>)<br/>console.log(result)</span></pre><p id="577a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">arr</code>中的第2个条目是重复的，我们想删除它。</p><p id="a42c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们用回调函数调用<code class="fe me mf mg mh b">arr.filter</code>来检查该项目的<code class="fe me mf mg mh b">index</code>是否与<code class="fe me mf mg mh b">findIndex</code>返回的索引相同。</p><p id="7f1c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们相同，那么它们就是对象的第一个实例。</p><p id="c8f1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">findIndex</code>接受一个回调，该回调返回我们正在寻找的项目的条件。</p><p id="4157" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">回调检查<code class="fe me mf mg mh b">thing.place</code>是否与<code class="fe me mf mg mh b">t.place</code>相同。</p><p id="3832" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对<code class="fe me mf mg mh b">name</code>属性进行同样的检查。</p><p id="9f34" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">t</code>是<code class="fe me mf mg mh b">arr</code>数组中的项目。</p><p id="f728" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">self</code>如果是<code class="fe me mf mg mh b">arr</code>数组。</p><p id="3575" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们遍历<code class="fe me mf mg mh b">arr</code>数组来检查这个索引是否是满足给定条件的第一个条目的索引。</p><p id="50c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结果，我们得到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0c30" class="mq lc iq mh b gy mr ms l mt mu">[<br/>  {<br/>    "place": "san francisco",<br/>    "name": "jane"<br/>  },<br/>  {<br/>    "place": "new york",<br/>    "name": "james"<br/>  }<br/>]</span></pre><p id="ca70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从<code class="fe me mf mg mh b">filter</code>返回并分配给<code class="fe me mf mg mh b">result</code>。</p><h1 id="47d4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">Using JSON.stringify</code></h1><p id="3370" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">JSON.stringify</code>方法将普通的JavaScript对象转换成字符串。</p><p id="66a8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这让我们可以一次检查所有的属性，而不是像上一个例子那样对检查进行硬编码。</p><p id="2a09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2a4c" class="mq lc iq mh b gy mr ms l mt mu">const arr = [{<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "new york",<br/>    name: "james"<br/>  }<br/>]<br/>const result = arr.filter((thing, index, self) =&gt;<br/>  index === self.findIndex((t) =&gt; (<br/>    JSON.stringify(t) === JSON.stringify(thing)<br/>  ))<br/>)<br/>console.log(result)</span></pre><p id="7069" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过使用<code class="fe me mf mg mh b">JSON.stringify</code>将<code class="fe me mf mg mh b">t</code>和<code class="fe me mf mg mh b">thing</code>转换为字符串来删除重复项。</p><p id="94c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe me mf mg mh b">===</code>检查JSON字符串指令。</p><p id="5f8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了和以前一样的结果。</p><h1 id="481a" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe me mf mg mh b">Using Sets and JSON.stringify</code></h1><p id="b13c" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">JavaScript附带了<code class="fe me mf mg mh b">Set</code>构造函数来让我们创建集合，集合是没有重复项的数据结构。</p><p id="5486" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用它和<code class="fe me mf mg mh b">JSON.stringify</code>一起创建一组字符串化的JavaScript对象。</p><p id="3456" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用spread操作符将集合转换回数组。</p><p id="8547" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以用<code class="fe me mf mg mh b">JSON.parse</code>将字符串数组转换回对象数组。</p><p id="9f3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="c0be" class="mq lc iq mh b gy mr ms l mt mu">const arr = [{<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "san francisco",<br/>    name: "jane"<br/>  },<br/>  {<br/>    place: "new york",<br/>    name: "james"<br/>  }<br/>]<br/>const result = [...new Set(arr.map(a =&gt; JSON.stringify(a)))].map(a =&gt; JSON.parse(a))<br/>console.log(result)</span></pre><p id="9170" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">来做这个。</p><p id="e5c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用以下方式将<code class="fe me mf mg mh b">arr</code>条目映射到字符串:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="46b9" class="mq lc iq mh b gy mr ms l mt mu">arr.map(a =&gt; JSON.stringify(a)</span></pre><p id="2943" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将它传递给<code class="fe me mf mg mh b">Set</code>构造函数。</p><p id="0180" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这将删除重复项。</p><p id="7f95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把它展开成一个数组。</p><p id="3c13" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们调用<code class="fe me mf mg mh b">map</code>将字符串化的对象数组映射回带有<code class="fe me mf mg mh b">JSON.parse</code>的对象数组。</p><p id="3ad5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到了和以前一样的结果。</p><h1 id="de3e" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="73b2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用集合、<code class="fe me mf mg mh b">filter</code>或JSON方法移除JavaScript数组中的重复对象。</p><p id="4a96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
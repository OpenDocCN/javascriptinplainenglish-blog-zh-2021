<html>
<head>
<title>An Easy Way To Measure Performance In JavaScript/TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">测量JavaScript/TypeScript性能的简单方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-easy-way-to-measure-performance-in-javascript-typescript-293628a5f08d?source=collection_archive---------9-----------------------#2021-02-07">https://javascript.plainenglish.io/an-easy-way-to-measure-performance-in-javascript-typescript-293628a5f08d?source=collection_archive---------9-----------------------#2021-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="73b4" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在JavaScript和TypeScript中测量方法性能的一种快速简单的方法。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/650375179409064638bb7df482e526b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Si78QfG5Hk3Wj3v7"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@djmalecki" rel="noopener ugc nofollow" target="_blank">Dawid Małecki</a> on <a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="20fe" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">JavaScript中的性能测量</h1><p id="42b1" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在JavaScript或任何其他语言中测量某个方法的性能实际上非常简单，通常可以分为4个部分。</p><ul class=""><li id="dd94" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj mr ms mt mu bi translated">获取当前时间=开始时间</li><li id="c7ce" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">运行方法代码</li><li id="13fa" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">获取当前时间=结束时间</li><li id="32e7" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj mr ms mt mu bi translated">从方法的开始时间=运行持续时间中减去结束时间</li></ul><p id="3376" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">因此，下一个代码片段显示了您在JavaScript中要做的事情:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="81e2" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">但是您可以想象，一直添加这些代码是相当多的样板文件，并且每次您想要测量某个方法的性能时，您都必须重复许多工作。此外，如果您想要测量多个嵌套方法，您可能会遇到命名冲突，并且必须使用不同的变量名，从而增加了开销。</p><p id="d201" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">为了简化这一部分，我写了一个没有依赖关系的小NPM包，它可以帮助你摆脱这些样板代码。该软件包提供了完整的类型脚本支持和严格的类型。此外，它支持同步和异步方法。</p><div class="nf ng gp gr nh ni"><a href="https://www.npmjs.com/package/easy-performance-measure" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">简易性能测量</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">测试方法性能的超小型包装方法</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">www.npmjs.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw kp ni"/></div></div></a></div><p id="16b3" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">这个包可以帮助你包装你想要的方法，用一行代码代替上面的代码。</p><h1 id="e86f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">简易性能测量</h1><p id="91d2" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在您使用它之前，您首先必须通过<code class="fe nx ny nz oa b">npm install --save easy-performance-measure</code>将它添加到您的JavaScript应用程序中。</p><p id="56a8" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">之后，您可以像下面这样使用它，或者使用同步方法，或者使用异步方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="f42a" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">让我们简单解释一下上面的步骤:</p><ol class=""><li id="2e97" class="mk ml iq lq b lr mm lu mn lx mo mb mp mf mq mj ob ms mt mu bi translated">创建同步方法来测量</li><li id="d6f6" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj ob ms mt mu bi translated">创建一个异步方法，在特定超时后包装并调用同步方法</li><li id="356c" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj ob ms mt mu bi translated">通过<code class="fe nx ny nz oa b">measureSync</code>测量同步方法</li><li id="48f1" class="mk ml iq lq b lr mv lu mw lx mx mb my mf mz mj ob ms mt mu bi translated">通过<code class="fe nx ny nz oa b">measureAsync</code>测量异步方法</li></ol><p id="714c" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">测量方法返回一个数组，每个数组包含测量方法对<code class="fe nx ny nz oa b">[0]</code>索引的响应和在<code class="fe nx ny nz oa b">[1]</code>的测量结果(毫秒)。</p><p id="4037" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">你可以看到，你可以在那里插入任何方法，然后毫不费力地测量它的性能。</p><p id="c6e5" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">以下是与NPM包装一起交付的上述测量方法的签名。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="e136" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">如您所见，这里使用了一个<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters" rel="noopener ugc nofollow" target="_blank"> rest参数</a>，因此您可以为您想要测量的方法传入任意多个方法参数。</p><p id="30bf" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">所以下面所有的都是有效的。当然，您的<code class="fe nx ny nz oa b">syncFn</code>应该定义适当的输入参数来处理这些参数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nd ne l"/></div></figure><h2 id="b42a" class="oc kx iq bd ky od oe dn lc of og dp lg lx oh oi li mb oj ok lk mf ol om lm on bi translated">类型脚本支持</h2><p id="a179" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><a class="ae kv" href="https://www.npmjs.com/package/easy-performance-measure" rel="noopener ugc nofollow" target="_blank">简单的性能测量</a>包提供了完整的字体支持和严格的打字。如果你访问<a class="ae kv" href="https://github.com/Abszissex/easy-performance-measure" rel="noopener ugc nofollow" target="_blank"> Github库</a>或者<a class="ae kv" href="https://www.npmjs.com/package/easy-performance-measure" rel="noopener ugc nofollow" target="_blank"> NPM页面</a>，你可以在<code class="fe nx ny nz oa b">README.md</code>中看到一个工作的打字稿示例。</p><h1 id="d226" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="d0ca" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我希望我可以通过发布这个小小的NPM包为您提供一些价值，这样您就不必一遍又一遍地编写相同的样板代码来对您的方法进行简单的度量。</p><p id="b264" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">感谢您花时间阅读我的文章。</p><h2 id="cfe5" class="oc kx iq bd ky od oe dn lc of og dp lg lx oh oi li mb oj ok lk mf ol om lm on bi translated">你想联系吗？</h2><p id="6350" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">如果你想联系我，请在LinkedIn上打电话给我。</p><p id="c598" class="pw-post-body-paragraph lo lp iq lq b lr mm jr lt lu mn ju lw lx na lz ma mb nb md me mf nc mh mi mj ij bi translated">另外，请随意查看<a class="ae kv" href="https://medium.com/@mr-pascal/my-book-recommendations-4b9f73bf961b" rel="noopener">我的书籍推荐</a>📚。</p></div><div class="ab cl oo op hu oq" role="separator"><span class="or bw bk os ot ou"/><span class="or bw bk os ot ou"/><span class="or bw bk os ot"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt ni"><a href="https://mr-pascal.medium.com/my-book-recommendations-4b9f73bf961b" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">我的书籍推荐</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">在接下来的章节中，你可以找到我对所有日常生活话题的书籍推荐，它们对我帮助很大。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nr l"><div class="ov l nt nu nv nr nw kp ni"/></div></div></a></div><div class="nf ng gp gr nh ni"><a href="https://mr-pascal.medium.com/membership" rel="noopener follow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd ir gy z fp nn fr fs no fu fw ip bi translated">通过我的推荐链接加入Medium—Pascal Zwikirsch</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">mr-pascal.medium.com</p></div></div><div class="nr l"><div class="ow l nt nu nv nr nw kp ni"/></div></div></a></div></div></div>    
</body>
</html>
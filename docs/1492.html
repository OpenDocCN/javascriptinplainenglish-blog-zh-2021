<html>
<head>
<title>Authentication using Phone Number</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用电话号码的认证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/authentication-using-phone-number-fd5b10727fed?source=collection_archive---------7-----------------------#2021-03-30">https://javascript.plainenglish.io/authentication-using-phone-number-fd5b10727fed?source=collection_archive---------7-----------------------#2021-03-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5bb6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用电话号码登录您的用户</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/4c6660bf02d6dac5bc174f00e3120f64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OMPJjaGhPkxDP5333Yl0SQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="http://i-hate-reading-logs.vercel.app/" rel="noopener ugc nofollow" target="_blank">Read the articles</a></figcaption></figure><p id="fc5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天，我们将使用电话号码来验证用户。通过Google登录后，我发现通过OTP进行身份验证是最简单、最容易实现的过程。</p><p id="a629" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用我们使用Firebase添加Twitter身份验证的存储库，并将继续在同一个存储库中使用Firebase添加电话号码身份验证。</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="4c5c" class="le lf in la b gy lg lh l li lj">Twitter authentication repository =&gt; <a class="ae ky" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/TwitterAuthenticationUsingFirebase" rel="noopener ugc nofollow" target="_blank">Repo</a></span></pre></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="1a77" class="lr lf in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">概观</h1><ol class=""><li id="c18d" class="mo mp in jm b jn mq jr mr jv ms jz mt kd mu kh mv mw mx my bi translated">在Firebase身份验证控制台中启用登录方法</li><li id="f777" class="mo mp in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">在“歌唱方法”部分添加您的电话号码</li><li id="c92c" class="mo mp in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">启用Firebase Recaptcha验证程序以防止滥用身份验证过程。</li><li id="8f13" class="mo mp in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">使用firebase提供商向用户电话号码发送验证码。</li><li id="b40c" class="mo mp in jm b jn mz jr na jv nb jz nc kd nd kh mv mw mx my bi translated">验证发送给用户和一个用户输入的验证码。</li></ol></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="a248" class="lr lf in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">启用Recaptcha验证器</strong></h1><p id="c4be" class="pw-post-body-paragraph jk jl in jm b jn mq jp jq jr mr jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">Firebase提供了一种启用重新验证码验证器的方法。我们将使用Firebase的隐形Recaptcha验证方法。您可以在此阅读更多内容= &gt;</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="93e2" class="le lf in la b gy lg lh l li lj"><a class="ae ky" href="https://firebase.google.com/docs/auth/web/phone-auth?authuser=0" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/docs/auth/web/phone-auth?authuser=0</a></span></pre><p id="9b4f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">启用reCaptcha验证器非常简单，当组件被挂载或者可能正在使用react提供的钩子时，可以调用firebase enabling Recaptcha函数。您可以从上面的链接复制粘贴代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nh"><img src="../Images/87fdb66acde9f603ebaf1b16a8b9ff73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e-aqfD7i-zRlYv9H-iKXBw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">PhoneNumber.jsx in module</figcaption></figure><p id="6de4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个过程应该是这样的，用户应该输入他/她的电话号码，然后通过Firebase API将验证码发送到用户输入的电话号码，然后要求用户提交他/她的验证码，在验证用户之前的最后一步是使用Firebase方法检查他/她输入的验证码。为了让用户输入他/她的电话号码，我使用了一个react电话输入包。</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="3e58" class="le lf in la b gy lg lh l li lj">NPM package =&gt; <a class="ae ky" href="https://www.npmjs.com/package/react-phone-input-2" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/react-phone-input-2</a></span></pre><p id="9de1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个包简单地提供了电话号码输入和选择用户所在国家的附加功能。它很容易集成和处理。</p><p id="a6e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ni">如果你使用这个包，有一点很重要:在你的pages文件夹中添加react-phone-input-2 CSS inside _ app . js文件。</em></p></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="685e" class="lr lf in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated"><strong class="ak">发送代码</strong></h1><p id="9eb5" class="pw-post-body-paragraph jk jl in jm b jn mq jp jq jr mr jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">Firebase提供了<strong class="jm io"> signInWithPhone </strong>方法，该方法接受用户电话号码和reCaptcha验证器。这种方法有助于确认reCaptcha和用户电话号码，然后将代码发送到相应的电话号码。</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="de82" class="le lf in la b gy lg lh l li lj">firebase.auth().signInWithPhoneNumber(phoneValue, appVerifier)  .then((<em class="ni">confirmationResult</em>) =&gt; {<br/>    window.confirmationResult = <em class="ni">confirmationResult</em>;<br/>}).catch(<em class="ni">error</em> =&gt; console.log(<em class="ni">error</em>));</span></pre><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nj"><img src="../Images/4ae08cfff25105f299fc992104e1d69f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UwGVg7yiklKl4GG8zd2CNQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Sending code to the user-entered phone number</figcaption></figure></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="1525" class="lr lf in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">验证代码</h1><p id="a9c1" class="pw-post-body-paragraph jk jl in jm b jn mq jp jq jr mr jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">最后一步是将用户输入的代码和发送给用户的代码进行交叉。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nk"><img src="../Images/99681bd9bdf008992148b372f2a3ea65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nNhO_IuaTyllm4zogvOCag.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Checking the Code Send to user</figcaption></figure><p id="fb56" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们设置为窗口对象的<strong class="jm io"> confirmationResult </strong>用于确认代码，当输入的代码正确时，firebase会向您发送用户对象作为响应。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/ffb86f207c0b66e530ff056b533c16a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2GugutdqXVOFgFhhuGQ2g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">User object in the console after entering correct code</figcaption></figure><p id="0a4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Firebase还提供了错误对象，以防用户输入无效代码或错误代码。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nl"><img src="../Images/5f38cb8f290747ca2e0fb248a84f9e0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OuqPujzdqJJdApH3sTxZzg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Error in console when the user entered the wrong code</figcaption></figure></div><div class="ab cl lk ll hr lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ig ih ii ij ik"><h1 id="53d7" class="lr lf in bd ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn bi translated">结论</h1><p id="8b57" class="pw-post-body-paragraph jk jl in jm b jn mq jp jq jr mr jt ju jv ne jx jy jz nf kb kc kd ng kf kg kh ig bi translated">Firebase为用户提供了最简单的方法。您可以在“身份验证”-&gt;“登录方法”选项卡下检查用户的登录方法。我已经介绍了5种验证用户身份的方法。请继续关注，因为我将涵盖所有的方法来唱-在你的用户。</p><p id="ee57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下次见。祝你今天开心！玩的开心！</p><pre class="kj kk kl km gt kz la lb lc aw ld bi"><span id="2ef2" class="le lf in la b gy lg lh l li lj">Code Repository =&gt; <a class="ae ky" href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/PhoneNumberAuthentication" rel="noopener ugc nofollow" target="_blank">https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/PhoneNumberAuthentication</a></span></pre></div></div>    
</body>
</html>
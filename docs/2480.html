<html>
<head>
<title>How to Create a Popup Modal in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建弹出模式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-popup-modal-in-react-39315907998e?source=collection_archive---------1-----------------------#2021-05-22">https://javascript.plainenglish.io/how-to-create-a-popup-modal-in-react-39315907998e?source=collection_archive---------1-----------------------#2021-05-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2485" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何使用React构建一个简单的弹出模式。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7216746cd8b3dd1cd4ccce68944a51a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7mv3iUOgLS66mkCKgjblw.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created with ❤️️ By author.</figcaption></figure><p id="eac7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">React是一个非常有用的JavaScript库，它允许我们创建非常棒的用户界面。我们也可以称之为框架，因为有许多其他的库和包可以用来使React库像框架一样。所以你可以用React构建很多很棒的东西。但是我们今天的重点是构建一个简单的弹出模型。</p><p id="5dee" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如你所知，React中的所有东西都嵌套在一个组件中，这使得完成某些任务变得很困难。其中一项任务就是弹出模式。它们需要在一个独立于我们的应用程序的组件中呈现。React门户网站出来帮助解决这个问题。它们提供了一种在React中处理模态的简单方法。</p><p id="0c18" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，在本文中，我们将使用React门户创建一个非常棒的弹出模型。让我们开始吧。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="3d93" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">项目设置</h1><p id="3eb2" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">我们将使用create-react-app来设置我们的项目。因此，只需打开命令行(如果您安装了Git，则打开Git bash ),编写下面的命令来启动本地服务器，以便查看您的更改。</p><p id="a787" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个例子:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="3a53" class="na lz iq mw b gy nb nc l nd ne">npx create-react-app popup-modal<br/>cd popup-modal<br/>npm start</span></pre><p id="1902" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之后，您需要打开您的文本编辑器并删除<code class="fe nf ng nh mw b">src</code>文件夹中所有不必要的文件。我们将只需要文件<code class="fe nf ng nh mw b">index.js</code>、<code class="fe nf ng nh mw b">App.js</code>和<code class="fe nf ng nh mw b">styles.css</code>。然后我们将创建另一个名为<code class="fe nf ng nh mw b">Modal.js</code>的文件来放置弹出模态组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/c43106541e2158a4d26bc053043085e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/1*QfKwFkrVbMXlttOH921GtQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Our files.</figcaption></figure></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="fed6" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">编写代码</h1><p id="2f0f" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">在使用create-react-app进行项目设置之后，您已经拥有了在根元素中呈现您的应用程序的条目文件<code class="fe nf ng nh mw b">index.js</code>。代码将是这样的:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="e094" class="na lz iq mw b gy nb nc l nd ne">//index.js</span><span id="1dc9" class="na lz iq mw b gy nj nc l nd ne">import { StrictMode } from "react";<br/>import ReactDOM from "react-dom";</span><span id="d8ab" class="na lz iq mw b gy nj nc l nd ne">import App from "./App";</span><span id="ce85" class="na lz iq mw b gy nj nc l nd ne">const rootElement = document.getElementById("root");<br/>ReactDOM.render(<br/>  &lt;StrictMode&gt;<br/>    &lt;App /&gt;<br/>  &lt;/StrictMode&gt;,<br/>  rootElement<br/>);</span></pre><p id="e3ea" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如您所见，这只是导入app组件并在根元素上呈现它的基本React代码。</p><p id="7822" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们必须转到文件<code class="fe nf ng nh mw b">App.js</code>，在这里我们将导入模态组件，并使用状态钩子来处理显示和隐藏模态组件的状态。</p><p id="5493" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是代码示例:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="d641" class="na lz iq mw b gy nb nc l nd ne">//App.js</span><span id="9027" class="na lz iq mw b gy nj nc l nd ne"><strong class="mw ir">import React, { useState } from "react";</strong><br/>import "./styles.css";<br/><strong class="mw ir">import { Modal } from "./Modal";</strong></span><span id="bc90" class="na lz iq mw b gy nj nc l nd ne">export default function App() {<br/>  <strong class="mw ir">const [showModal, setShowModal] = useState(false);</strong></span><span id="8846" class="na lz iq mw b gy nj nc l nd ne">const openModal = () =&gt; {<br/>    setShowModal(true);<br/>  };<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;h1&gt;Popup Modal&lt;/h1&gt;<br/>      &lt;button onClick={<strong class="mw ir">openModal</strong>}&gt;Open Modal&lt;/button&gt;<br/>      <strong class="mw ir">{showModal ? &lt;Modal setShowModal={setShowModal} /&gt; : null}</strong><br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="6fc5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如您所见，我们根据状态的值在应用程序中呈现模态组件。如果状态<code class="fe nf ng nh mw b">showModal</code>是<code class="fe nf ng nh mw b">true</code>，我们呈现模态组件，并将状态作为道具传递给它，这样我们就可以在文件<code class="fe nf ng nh mw b">Modal.js</code>中使用它。如果状态是<code class="fe nf ng nh mw b">false</code>，我们返回<code class="fe nf ng nh mw b">null</code>(无)。我们还有一个按钮，单击它可以显示我们的模态。</p><p id="b150" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，由于我们的模态将要弹出，我们需要在另一个DOM元素中呈现模态组件。默认情况下，它在根元素中呈现。所以我们必须转到public文件夹中的文件<code class="fe nf ng nh mw b">index.html</code>并在根元素之后创建另一个div元素。确保给它一个ID。</p><p id="ed58" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在下面的例子中，我们在<code class="fe nf ng nh mw b">index.html</code>中创建了一个div元素，并给它一个名为<code class="fe nf ng nh mw b">portal</code>的ID。你想怎么叫都行。</p><p id="5eb1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是一个例子:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="5948" class="na lz iq mw b gy nb nc l nd ne"><em class="nk">&lt;!-- </em>index.html --&gt;</span><span id="0fcf" class="na lz iq mw b gy nj nc l nd ne">&lt;div id="root"&gt;&lt;/div&gt;</span><span id="0a11" class="na lz iq mw b gy nj nc l nd ne"><strong class="mw ir">&lt;div id="portal"&gt;&lt;/div&gt;</strong></span></pre><p id="a08e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在我们必须在<code class="fe nf ng nh mw b">Modal.js</code>中创建模态组件，并将其呈现在ID为<code class="fe nf ng nh mw b">portal</code>的DOM元素中，而不是呈现在根元素中。为此，我们在模态组件中使用了方法<code class="fe nf ng nh mw b"><strong class="kx ir">ReactDom.createPortal()</strong></code>。</p><p id="5e3b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是代码示例:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="1205" class="na lz iq mw b gy nb nc l nd ne">//Modal.js</span><span id="eac6" class="na lz iq mw b gy nj nc l nd ne">import React, { useRef } from "react";<br/><strong class="mw ir">import ReactDom from "react-dom";</strong></span><span id="0ef2" class="na lz iq mw b gy nj nc l nd ne">export const Modal = (<strong class="mw ir">{ setShowModal }</strong>) =&gt; {</span><span id="538d" class="na lz iq mw b gy nj nc l nd ne">  // close the modal when clicking outside the modal.<br/>  const modalRef = useRef();<br/>  const closeModal = (e) =&gt; {<br/>    if (e.target === modalRef.current) {<br/>      setShowModal(false);<br/>    }<br/>  };</span><span id="399b" class="na lz iq mw b gy nj nc l nd ne">  //render the modal JSX in the portal div.<br/>  return <strong class="mw ir">ReactDom.createPortal(</strong><br/>    &lt;div className="container" <strong class="mw ir">ref={modalRef}</strong> onClick={closeModal}&gt;<br/>      &lt;div className="modal"&gt;<br/>        &lt;h2&gt;This is a Modal&lt;/h2&gt;<br/>        &lt;button onClick={() =&gt; <strong class="mw ir">setShowModal(false)</strong>}&gt;X&lt;/button&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;,<br/>    <strong class="mw ir">document.getElementById("portal")</strong><br/>  <strong class="mw ir">)</strong>;<br/>};</span></pre><p id="d280" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如上所示，我们使用方法<code class="fe nf ng nh mw b"><strong class="kx ir">ReactDom.createPortal()</strong></code> <strong class="kx ir"> </strong>渲染了门户div中的所有模态JSX。我们还使用我们传递的状态作为单击x按钮后模态组件关闭模态的道具。</p><p id="e5e3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里的钩子<code class="fe nf ng nh mw b">useRef</code>用于当我们在模态之外点击时关闭模态。正如您在示例中看到的，它允许我们引用DOM元素(容器div)。</p><p id="df7d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">经过这一切，我们的模型现在工作正常。我们只需要添加造型，使它看起来真棒。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="d521" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">造型的模态</h1><p id="68a5" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">现在，我们需要做的就是转到文件<code class="fe nf ng nh mw b">styles.css</code>并使用CSS样式化我们的UI。</p><p id="7bcf" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">下面是代码示例:</p><pre class="kg kh ki kj gt mv mw mx my aw mz bi"><span id="cb13" class="na lz iq mw b gy nb nc l nd ne">.App {<br/>  font-family: sans-serif;<br/>  text-align: center;<br/>}<br/>.App button {<br/>  padding: 13px 29px;<br/>  font-size: 1rem;<br/>  font-weight: bold;<br/>  border-radius: 5px;<br/>  border: none;<br/>  outline: none;<br/>  background: crimson;<br/>  color: white;<br/>  cursor: pointer;<br/>}</span><span id="e3e7" class="na lz iq mw b gy nj nc l nd ne">#portal .container {<br/>  position: fixed;<br/>  top: 0;<br/>  left: 0;<br/>  bottom: 0;<br/>  right: 0;<br/>  height: 100vh;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  background: rgba(0, 0, 0, 0.7);<br/>}</span><span id="2786" class="na lz iq mw b gy nj nc l nd ne">.container .modal {<br/>  z-index: 1;<br/>  width: 350px;<br/>  height: 220px;<br/>  background: white;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  border-radius: 5px;<br/>  position: relative;<br/>  animation: animate 0.3s;<br/>}<br/>.modal button {<br/>  position: absolute;<br/>  top: 7px;<br/>  right: 7px;<br/>  padding: 8px 11px;<br/>  background: crimson;<br/>  color: white;<br/>  font-weight: bold;<br/>  border: none;<br/>  outline: none;<br/>  border-radius: 2px;<br/>  cursor: pointer;<br/>}</span><span id="fe39" class="na lz iq mw b gy nj nc l nd ne">@keyframes animate {<br/>  from {<br/>    transform: scale(0.5);<br/>  }<br/>  to {<br/>    transform: scale(1);<br/>  }<br/>}</span></pre><p id="a489" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们的模型已经完全正常工作，可以部署了。您可以通过使用<code class="fe nf ng nh mw b">npm run build</code>来构建生产文件，并且您的模型在部署到Netlify或GitHub页面之后将是活动的。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="d31c" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">项目演示</h1><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">CodePen by author.</figcaption></figure><p id="fd65" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您也可以在<a class="ae nn" href="https://codesandbox.io/s/immutable-sea-dimm8?file=/src/Modal.js" rel="noopener ugc nofollow" target="_blank"> codeSandBox </a>访问所有代码。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="5fe8" class="ly lz iq bd ma mb mc md me mf mg mh mi jw mj jx mk jz ml ka mm kc mn kd mo mp bi translated">结论</h1><p id="d36e" class="pw-post-body-paragraph kv kw iq kx b ky mq jr la lb mr ju ld le ms lg lh li mt lk ll lm mu lo lp lq ij bi translated">正如你所看到的，这就是如何在React中创建一个弹出模态。它非常快，没有任何问题。这就是为什么react portal是react中处理模态的简单方法。</p><p id="8e75" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">感谢您阅读这篇文章。希望你觉得有用。</p><p id="4494" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">更多阅读</strong></p><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/5-powerful-react-libraries-that-you-can-use-in-2021-496b975c7bef"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">您可以在2021年使用的5个强大的React库</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">React库使开发应用程序变得更加容易</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oa l"><div class="ob l oc od oe oa of kp nr"/></div></div></a></div><div class="no np gp gr nq nr"><a rel="noopener  ugc nofollow" target="_blank" href="/5-useful-website-cheatsheets-for-all-web-developers-70290340385"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd ir gy z fp nw fr fs nx fu fw ip bi translated">对所有网站开发者有用的5个网站备忘单</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">面向所有网站开发者的超赞网站备忘单。</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oa l"><div class="og l oc od oe oa of kp nr"/></div></div></a></div><p id="2647" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nk">更多内容看</em> <a class="ae nn" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kx ir"> <em class="nk">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Tip: Why “0” is Rendered When Using the Logical AND (&amp;&amp;) Operator with Array.length</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提示:为什么对Array.length使用逻辑AND (&amp;&amp;)运算符时会呈现“0”</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tip-why-0-is-rendered-when-using-the-logical-and-operator-with-array-length-aae24d05c9d7?source=collection_archive---------0-----------------------#2021-10-13">https://javascript.plainenglish.io/javascript-tip-why-0-is-rendered-when-using-the-logical-and-operator-with-array-length-aae24d05c9d7?source=collection_archive---------0-----------------------#2021-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a7a3" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解短路评估的工作原理。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/fca9b1a66573d5261c7ff75737a35820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dC9cThfgQkl0ZKcW"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@missinformed?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">TJ Arnold</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0e6f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前几天，我在用JavaScript和React编码时遇到了一个有趣的问题。</p><p id="b34b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我有一系列物品。如果数组中有条目，我想呈现一个字符串通知用户有条目。如果数组中没有项目，我不想渲染任何东西。</p><p id="91d9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我在React中使用了逻辑AND (&amp;&amp;)操作符。在我看来，如果数组是空的，那么屏幕上不会显示任何内容，因为数组的长度是0，这是一个假值。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="ef84" class="lx ly iq lt b gy lz ma l mb mc">{items.length &amp;&amp; "There are items"}</span></pre><p id="86c2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，当项目列表为空时，我看到一个<code class="fe md me mf lt b">0</code>呈现在屏幕上。</p><p id="0ab4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将通过理解逻辑AND (&amp;&amp;)操作符在JavaScript中如何工作，以及如何使用它在React中有条件地呈现组件，来了解为什么会发生这种情况。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="9daa" class="mn ly iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">问题</h1><p id="f46c" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">为了重现这个问题，我在下面创建了一个简单的例子。我有一个基本的反应功能组件。在这个组件中，我创建了一个项目数组。如果数组中有条目，我将把字符串<code class="fe md me mf lt b">There are items</code>呈现到屏幕上。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="664e" class="lx ly iq lt b gy lz ma l mb mc">export default function App() {<br/>  const items = ["item1", "item2", "item3"];<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;div&gt;{items.length &amp;&amp; "There are items"}&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="7f12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为数组中有条目，字符串，<code class="fe md me mf lt b">There are items</code>被呈现到屏幕上。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/4a6e12a83e0938fdf1bfa9cfee8dde8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*Jg6p8J9btcoJV2t_Nsiuxw.png"/></div></figure><p id="0cb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，如果我从数组中移除项目，我将看到数字，<code class="fe md me mf lt b">0</code>呈现在屏幕上。预期的行为是不呈现任何内容。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/fb9ff23ac5590de5d8afcb99f57e31bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:112/format:webp/1*8RobkgBVlJuuZ0-y65A35Q.png"/></div></div></figure><h2 id="c0b7" class="lx ly iq bd mo nl nm dn ms nn no dp mw lf np nq my lj nr ns na ln nt nu nc nv bi translated">为什么会这样</h2><p id="043c" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">在本例中，我们使用JavaScript中的逻辑AND (&amp;&amp;)运算符有条件地呈现字符串。为了理解为什么我们会看到一个<code class="fe md me mf lt b">0</code>，让我们来看看这个操作符是如何工作的。</p><h2 id="c49c" class="lx ly iq bd mo nl nm dn ms nn no dp mw lf np nq my lj nr ns na ln nt nu nc nv bi translated">逻辑与(&amp;&amp;)</h2><p id="6d90" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">如果您熟悉JavaScript，我相信您以前可能见过或使用过逻辑AND (&amp;&amp;)运算符。根据MDN网络文档，</p><blockquote class="nw nx ny"><p id="5e44" class="kw kx nz ky b kz la jr lb lc ld ju le oa lg lh li ob lk ll lm oc lo lp lq lr ij bi translated">一组操作数的逻辑AND ( <code class="fe md me mf lt b">&amp;&amp;</code>)运算符(逻辑合取)当且仅当其所有操作数为真时为真。它通常与<code class="fe md me mf lt b">Boolean</code>(逻辑)值一起使用。当它为时，它返回一个布尔值。然而，<code class="fe md me mf lt b">&amp;&amp;</code>操作符实际上是返回一个指定操作数的值，所以如果这个操作符与非布尔值一起使用，它将返回一个非布尔值。</p></blockquote><p id="58c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">基本上，它的工作原理是，如果第一个表达式被转换成<code class="fe md me mf lt b">true</code>，它将返回第二个表达式。例如，如果<code class="fe md me mf lt b">items.length</code>等于3，将返回字符串，<code class="fe md me mf lt b">There are items</code>。这是因为3是一个真值。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="c6f9" class="lx ly iq lt b gy lz ma l mb mc">// items.length === 3<br/>{items.length &amp;&amp; "There are items"}<br/>// will return "There are items"</span></pre><h2 id="5a6d" class="lx ly iq bd mo nl nm dn ms nn no dp mw lf np nq my lj nr ns na ln nt nu nc nv bi translated">短路评估</h2><p id="8b0a" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">逻辑AND (&amp;&amp;)运算符从左到右计算。使用以下规则测试可能的“短路”评估:</p><p id="fa30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe md me mf lt b">(some falsy expression) &amp;&amp; expr</code>是对falsy表达式的短路评估。</p><p id="8f0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这意味着如果第一个表达式被转换成一个falsy值，它将返回falsy值。例如，如果<code class="fe md me mf lt b">items.length</code>等于0(一个假值)，将返回数字<code class="fe md me mf lt b">0</code>。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="2d4b" class="lx ly iq lt b gy lz ma l mb mc">// items.length === 0<br/>{items.length &amp;&amp; "There are items"}<br/>// will return 0</span></pre><p id="f0db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么我们在例子中看到一个<code class="fe md me mf lt b">0</code>渲染到屏幕上的原因。</p><h1 id="e9a2" class="mn ly iq bd mo mp od mr ms mt oe mv mw jw of jx my jz og ka na kc oh kd nc nd bi translated">解决办法</h1><p id="1fdd" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">要解决这个问题，您可以简单地让第一个表达式总是返回一个布尔值。通过使用<code class="fe md me mf lt b">&gt;</code>操作符可以实现这一点。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="fde7" class="lx ly iq lt b gy lz ma l mb mc">{items.length &gt; 0 &amp;&amp; "There are items"}</span></pre><h2 id="1409" class="lx ly iq bd mo nl nm dn ms nn no dp mw lf np nq my lj nr ns na ln nt nu nc nv bi translated">为什么会这样</h2><p id="6c1d" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">通过使用<code class="fe md me mf lt b">items.length &gt; 0</code>，当条目数组为空时，我们返回false。</p><p id="25e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">将第一个表达式转换为布尔值的另一种方法是使用(！！)运算符。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="d619" class="lx ly iq lt b gy lz ma l mb mc">{!!items.length &amp;&amp; "There are items"}</span></pre><p id="b5b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可能知道，逻辑NOT(！)运算符将返回<code class="fe md me mf lt b">false</code>如果一个表达式可以转换为<code class="fe md me mf lt b">true</code>；否则将返回<code class="fe md me mf lt b">true</code>。通过使用两个(！！)如果一个表达式可以转换成<code class="fe md me mf lt b">true</code>，它将返回<code class="fe md me mf lt b">true</code>；否则将返回<code class="fe md me mf lt b">false</code>。</p><p id="fe4b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，如果<code class="fe md me mf lt b">items.length === 0</code>，<code class="fe md me mf lt b">!items.length</code>将被评估为<code class="fe md me mf lt b">true</code>，因此<code class="fe md me mf lt b">!!items.length</code>将被评估为<code class="fe md me mf lt b">false</code>。</p><p id="807d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为第一个表达式现在是一个布尔值，我们将得到我们想要的预期行为。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="b8a1" class="mn ly iq bd mo mp mq mr ms mt mu mv mw jw mx jx my jz mz ka na kc nb kd nc nd bi translated">结论</h1><p id="a75b" class="pw-post-body-paragraph kw kx iq ky b kz ne jr lb lc nf ju le lf ng lh li lj nh ll lm ln ni lp lq lr ij bi translated">感谢阅读！我希望这篇文章有助于您理解逻辑AND (&amp;&amp;)操作符在JavaScript中的工作方式。</p><p id="8d3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">找到解决问题的方法总是一种很棒的感觉。但是首先理解问题发生的原因可以帮助您成长为一名开发人员，并防止它在将来再次发生。</p><p id="c48c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">查看下面更多的JavaScript技巧。</p><div class="oi oj gp gr ok ol"><a rel="noopener  ugc nofollow" target="_blank" href="/javascript-tip-conditionally-add-an-item-to-an-array-5877a9d7c88b"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd ir gy z fp oq fr fs or fu fw ip bi translated">JavaScript提示:有条件地向数组中添加一个项目</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">使用扩展语法和条件三元运算符</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ou l"><div class="ov l ow ox oy ou oz kp ol"/></div></div></a></div><div class="oi oj gp gr ok ol"><a rel="noopener  ugc nofollow" target="_blank" href="/javascript-tip-remove-an-item-from-an-array-using-the-filter-method-249b2c720e02"><div class="om ab fo"><div class="on ab oo cl cj op"><h2 class="bd ir gy z fp oq fr fs or fu fw ip bi translated">JavaScript提示:使用Filter方法从数组中移除一个项</h2><div class="os l"><h3 class="bd b gy z fp oq fr fs or fu fw dk translated">探究JavaScript中过滤方法和拼接方法的区别。</h3></div><div class="ot l"><p class="bd b dl z fp oq fr fs or fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ou l"><div class="pa l ow ox oy ou oz kp ol"/></div></div></a></div><p id="9a7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Make your React/Rails App Come Alive with Heroku</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Heroku让您的React/Rails应用变得生动</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-your-react-rails-app-alive-with-heroku-1f27ce6d0246?source=collection_archive---------14-----------------------#2021-02-27">https://javascript.plainenglish.io/make-your-react-rails-app-alive-with-heroku-1f27ce6d0246?source=collection_archive---------14-----------------------#2021-02-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b631812a0e8e00e580692ee1c6ba86e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bYQxJ0rKM21744qx"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@freestocks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">freestocks</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d534" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是漫长的一年，我在熨斗营学到了很多。我的最后一个项目是一个具有React前端和Rails后端的应用程序。一旦我通过了最后的评估，我只有一个问题要问我的导师——“我如何让它变得生动？”他建议使用Heroku，所以我认为这将是一个有趣的话题。</p><p id="3647" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有3个先决条件:</p><ol class=""><li id="c7f0" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">您应该在Rails后端使用<strong class="kc io"> PostgreSQL </strong>数据库。</li><li id="434c" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated"><strong class="kc io">app的前端</strong>和后端<strong class="kc io">应该有自己的git <strong class="kc io">库</strong>。</strong></li><li id="e343" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">使用<strong class="kc io"> Yarn </strong>作为你的Node.js包管理器。</li></ol><p id="8669" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在您需要更新代码并为部署做准备。先说后端。你需要更新<strong class="kc io"> cors.rb </strong>文件。在我们的开发版本中，我们允许来自本地应用程序的请求。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="a11a" class="lv lw in lr b gy lx ly l lz ma">Rails.application.config.middleware.insert_before 0, Rack::Cors do<br/>  allow do<br/>    origins 'http://localhost:3000/'</span><span id="7624" class="lv lw in lr b gy mb ly l lz ma">    resource '*',<br/>      headers: :any, methods: [:get, :post, :put, :patch, :delete]<br/>  end<br/>end</span></pre><p id="76e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们需要指向我们新的实时应用程序。我们的live应用程序名称将为“<strong class="kc io"> fixer-tube </strong>”，因此Heroku URL将为“https://fixer-tube . Heroku app . com”。因此，让我们将代码修改如下。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="b73d" class="lv lw in lr b gy lx ly l lz ma">Rails.application.config.middleware.insert_before 0, Rack::Cors do<br/>  allow do<br/>    origins 'https://fixer-tube.herokuapp.com'</span><span id="adc8" class="lv lw in lr b gy mb ly l lz ma">    resource '*',<br/>      headers: :any, methods: [:get, :post, :put, :patch, :delete]<br/>  end<br/>end</span></pre><p id="079e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在前端，我们也需要一些更新。在您的前端根目录中，让我们创建一个<strong class="kc io"> static.json </strong>并添加以下代码</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="35d5" class="lv lw in lr b gy lx ly l lz ma">{ "root": "build/", "routes": { "/**": "index.html" } }</span></pre><p id="b1fe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">由于我们的后端现在将在线托管，我们将需要更新我们的获取请求。我们加载数据的开发代码如下所示:</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="67a5" class="lv lw in lr b gy lx ly l lz ma">export const loadData = () =&gt; {<br/>    return (dispatch) =&gt; {<br/>        fetch('http://localhost:3001/main_categories')<br/>        .then(resp =&gt; resp.json())<br/>        .then(data =&gt; dispatch({type: LOAD_DATA, payload: data}))<br/>    }<br/>};</span></pre><p id="fb22" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们需要为我们的后端API取一个名字，让我们称之为<strong class="kc io"> fixer-tube-API </strong>，因此我在Heroku上的APIs URL将是——'https://fixer-tube-api.herokuapp.com/main_categories'。</p><pre class="lm ln lo lp gt lq lr ls lt aw lu bi"><span id="652d" class="lv lw in lr b gy lx ly l lz ma">export const loadData = () =&gt; {<br/>    return (dispatch) =&gt; {<br/>        fetch('https://fixer-tube-api.herokuapp.com/main_categories')<br/>        .then(resp =&gt; resp.json())<br/>        .then(data =&gt; dispatch({type: LOAD_DATA, payload: data}))<br/>    }<br/>};</span></pre><p id="660f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">文件更新已经完成，请确保将所有更改都推送到Github。</p><p id="00ba" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Heroku网站上注册。</p><p id="9e70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">根据您的操作系统，使用此处的说明安装Heroku CLI。</p><p id="d174" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将首先从后端开始实际部署。</p><ol class=""><li id="4404" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">导航到后端应用程序目录并登录heroku <code class="fe mc md me lr b">heroku login</code>。</li><li id="97bc" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">创建Heroku项目— <code class="fe mc md me lr b">heroku create fixer-tube-api</code></li><li id="41bb" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">初始化Heroku git仓库— <code class="fe mc md me lr b">git remote add heroku git@heroku.com:fixer-tube-api.git</code></li><li id="c513" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">向存储库添加文件<code class="fe mc md me lr b">git add .</code></li><li id="58d1" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">提交文件<code class="fe mc md me lr b">git commit -m "1st heroku commit"</code></li><li id="4fb4" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">并按下<code class="fe mc md me lr b">git push heroku master</code></li><li id="5d01" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">是时候迁移数据库了<code class="fe mc md me lr b">heroku run rake db:migrate</code></li><li id="e9fa" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">如果您想在seeds.rd <code class="fe mc md me lr b">heroku run rake db:seed</code>中查看一些数据</li></ol><p id="69ba" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的后端已经完成，我们可以在这里查看—<a class="ae jz" href="https://fixer-tube-api.herokuapp.com/main_categories." rel="noopener ugc nofollow" target="_blank">https://fixer-tube-api.herokuapp.com/main_categories.</a></p><p id="3bda" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们部署前端。</p><ol class=""><li id="7ba4" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">导航到我们的前端文件夹</li><li id="d611" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">创建Heroku应用程序集以创建-反应-应用程序-构建<code class="fe mc md me lr b">heroku create fixer-tube --buildpack <a class="ae jz" href="https://github.com/mars/create-react-app-buildpack.git" rel="noopener ugc nofollow" target="_blank">https://github.com/mars/create-react-app-buildpack.git</a></code></li><li id="aa0c" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">初始化Heroku遥控器<code class="fe mc md me lr b">git remote add heroku git@heroku.com:fixer-tube.</code></li><li id="cb70" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">向资源库添加文件<code class="fe mc md me lr b">git add .</code></li><li id="95f6" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">提交文件<code class="fe mc md me lr b">git commit -m "heroku app created"</code></li><li id="8ca8" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">并按下<code class="fe mc md me lr b">git push heroku master</code></li><li id="9725" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">现在让我们看看它是否能与<code class="fe mc md me lr b">heroku open</code>一起工作</li></ol><p id="e3c1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果一切正常，您将被重定向到<a class="ae jz" href="https://fixer-tube.herokuapp.com/." rel="noopener ugc nofollow" target="_blank">https://fixer-tube.herokuapp.com/.</a></p><p id="016a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您的项目在线直播，而不仅仅是在您的计算机上！</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="d360" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在关于<a class="ae jz" href="https://nicksolonyy.medium.com/front-end-form-validation-in-react-33595dec8d6f?sk=b6a12799b8a6076aa51715f92f6088e9" rel="noopener">“React中的前端表单验证”</a>的帖子中阅读更多关于我在这个项目中的发现，查看<a class="ae jz" href="https://github.com/nicksolony/fixer-tube" rel="noopener ugc nofollow" target="_blank"> GitHub </a>并观看下面的快速演示。</p><figure class="lm ln lo lp gt jo"><div class="bz fp l di"><div class="mm mn l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fixer-Tube Demo</figcaption></figure></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="0125" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mo">请在以下社交网络上查看我，我很乐意收到您的来信！——</em><a class="ae jz" href="https://www.linkedin.com/in/nick-solonyy/" rel="noopener ugc nofollow" target="_blank"><em class="mo">LinkedIn</em></a><em class="mo">，</em> <a class="ae jz" href="https://github.com/nicksolony" rel="noopener ugc nofollow" target="_blank"> <em class="mo"> GitHub </em> </a>，<a class="ae jz" href="https://www.facebook.com/nick.solony" rel="noopener ugc nofollow" target="_blank"> <em class="mo">脸书</em> </a> <em class="mo">。</em></p><p id="b145" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mo">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mo">plain English . io</em></a></p></div></div>    
</body>
</html>
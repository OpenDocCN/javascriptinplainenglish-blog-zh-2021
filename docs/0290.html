<html>
<head>
<title>Redux: Hook, Line, and Simple</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Redux:钩、线和简单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/redux-hook-line-and-simple-2d6180229a82?source=collection_archive---------6-----------------------#2021-01-17">https://javascript.plainenglish.io/redux-hook-line-and-simple-2d6180229a82?source=collection_archive---------6-----------------------#2021-01-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="fd59" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">至少可以说，<a class="ae kc" href="https://react-redux.js.org/api/hooks" rel="noopener ugc nofollow" target="_blank"> React Redux指南</a>有点冗长，所以我希望这个快速入门指南更简单。</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/b264be9644eb7b0109fd6b1ff5342e86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qAEz5KrIJoG6cZzD.jpg"/></div></div></figure><p id="24ac" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">如果你熟悉React(如果你想理解这一点，你应该熟悉)，那么你就会理解在我的讲师所说的“道具训练”中通过多个组件和道具管理状态的麻烦。Redux是这个单一来源的真相难题的一个很好的解决方案；但是，类组件Redux很多。你需要地图，然后从道具调度行动，这只是我想有多懒有点多。幸运的是，编写Redux的漂亮的人们给了我们功能组件生活方式的钩子。</p><p id="aad5" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">这并不是要取代正式文件，而是作为一种补充，强调相关要点。我已经省略了导入和代码片段，它们不是使Redux挂钩正常工作的因素，所以重点只放在Redux上。</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="cfb8" class="lq lr in lm b gy ls lt l lu lv"># If you use npm:</span><span id="1f9f" class="lq lr in lm b gy lw lt l lu lv">npm install react-redux</span><span id="8126" class="lq lr in lm b gy lw lt l lu lv"># Or if you use Yarn:</span><span id="1705" class="lq lr in lm b gy lw lt l lu lv">yarn add react-redux</span></pre><h1 id="4378" class="lx lr in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">索引. js</h1><p id="66d5" class="pw-post-body-paragraph kp kq in kr b ks mo jo ku kv mp jr kx ky mq la lb lc mr le lf lg ms li lj lk ig bi translated">在你的index.js文件中，你将做一些Redux设置，可以在他们的<a class="ae kc" href="https://react-redux.js.org/next/api/hooks" rel="noopener ugc nofollow" target="_blank">快速入门指南</a>中找到。您创建了一个商店，并将您的reducer传递给它。你可以有一个以上的减速器，并使用<a class="ae kc" href="https://redux.js.org/api/combinereducers" rel="noopener ugc nofollow" target="_blank">组合减速器</a>。你也可以对比他们的<a class="ae kc" href="https://codesandbox.io/s/9on71rvnyo" rel="noopener ugc nofollow" target="_blank">示例代码</a>。</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="d783" class="lq lr in lm b gy ls lt l lu lv">import { Provider } from "react-redux";<br/>import { createStore } from "redux";<br/>import reducer from "./reducer";</span><span id="aba8" class="lq lr in lm b gy lw lt l lu lv">const store = createStore(reducer);</span><span id="73ce" class="lq lr in lm b gy lw lt l lu lv">ReactDOM.render(<br/>    &lt;<em class="mt">Provider</em> <em class="mt">store</em>={store}&gt;<br/>        &lt;<em class="mt">App</em> /&gt;<br/>    &lt;/<em class="mt">Provider</em>&gt;<br/>document.getElementById("root")<br/>);</span></pre><h1 id="b335" class="lx lr in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">常数</h1><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="323a" class="lq lr in lm b gy ls lt l lu lv">export const INCREMENT_COUNT = "INCREMENT_COUNT";</span></pre><p id="2b66" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">首先，我们需要一个有助于自动完成的文件，这样我们可以避免耗时的打字错误。我们可以称之为‘action types . js’。我们创建的任何动作都将存在于一个动作类型文件中。</p><h1 id="b932" class="lx lr in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">还原剂</h1><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="a4f4" class="lq lr in lm b gy ls lt l lu lv">import * as actionTypes from "./actions";</span><span id="d87a" class="lq lr in lm b gy lw lt l lu lv">const initialState = {</span><span id="f380" class="lq lr in lm b gy lw lt l lu lv">count: 0,</span><span id="af93" class="lq lr in lm b gy lw lt l lu lv">}<br/></span><span id="3081" class="lq lr in lm b gy lw lt l lu lv">const reducer = (<em class="mt">state</em> = initialState, <em class="mt">action</em>) =&gt; {</span><span id="8581" class="lq lr in lm b gy lw lt l lu lv">switch (action.type) {</span><span id="8a38" class="lq lr in lm b gy lw lt l lu lv">    case actionTypes.INCREMENT_COUNT:</span><span id="5265" class="lq lr in lm b gy lw lt l lu lv">        return {</span><span id="e427" class="lq lr in lm b gy lw lt l lu lv">        count: state.count + 1,</span><span id="e226" class="lq lr in lm b gy lw lt l lu lv">        }<br/>    }</span><span id="8bd5" class="lq lr in lm b gy lw lt l lu lv">    return state;<br/>}</span></pre><p id="316f" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">在一个单独的文件中，我们的reducer将使用您创建的常量来处理实际逻辑所在的开关中的情况。所有减速器都应该是<a class="ae kc" href="https://en.wikipedia.org/wiki/Pure_function" rel="noopener ugc nofollow" target="_blank">纯功能</a>。</p><h1 id="238a" class="lx lr in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">成分</h1><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="0a2e" class="lq lr in lm b gy ls lt l lu lv">import { useSelector, useDispatch } from "react-redux";<br/>import * as actionTypes from "./actions";</span></pre><p id="ef7a" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><a class="ae kc" href="https://react-redux.js.org/api/hooks#useselector" rel="noopener ugc nofollow" target="_blank"> useSelector </a>挂钩将允许您读取存储。</p><p id="855b" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated"><a class="ae kc" href="https://react-redux.js.org/api/hooks#usedispatch" rel="noopener ugc nofollow" target="_blank"> useDispatch </a>钩子允许你分派动作。</p><p id="26d4" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">然后，您将像这样调用useSelector挂钩:</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="f30c" class="lq lr in lm b gy ls lt l lu lv">const count = useSelector((<em class="mt">state</em>) =&gt; state.count);</span></pre><p id="ab99" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">你可以在返回或任何你喜欢的地方呈现计数。</p><p id="aad1" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">调度工作稍有不同:</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="5130" class="lq lr in lm b gy ls lt l lu lv">const dispatch = useDispatch();</span></pre><p id="108c" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">您仍然调用它并将它存储在一个变量中，但是随后您将操作传递给它:</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="27fc" class="lq lr in lm b gy ls lt l lu lv">dispatch({ type: actionTypes.INCREMENT_COUNT });</span></pre><h1 id="6561" class="lx lr in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">可选项:操作文件</h1><p id="c3ee" class="pw-post-body-paragraph kp kq in kr b ks mo jo ku kv mp jr kx ky mq la lb lc mr le lf lg ms li lj lk ig bi translated">还可以有一个返回action对象的actions文件。</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="c972" class="lq lr in lm b gy ls lt l lu lv">import * as actionTypes from "../actionsTypes";</span><span id="68d1" class="lq lr in lm b gy lw lt l lu lv">export const incrementCount = () =&gt; {<br/>    <br/>    return {<br/>        type: actionTypes.INCREMENT_COUNT,<br/>    }<br/>};</span></pre><p id="c35c" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">然后将它导入到一个文件中，并作为另一个抽象/简化来调用它。</p><pre class="ke kf kg kh gt ll lm ln lo aw lp bi"><span id="174d" class="lq lr in lm b gy ls lt l lu lv">import * as actionTypes from "../actionsTypes";<br/>import * as actions from "../actions";</span><span id="4dc5" class="lq lr in lm b gy lw lt l lu lv">dispatch(actions.incrementCount());</span></pre><p id="c41f" class="pw-post-body-paragraph kp kq in kr b ks kt jo ku kv kw jr kx ky kz la lb lc ld le lf lg lh li lj lk ig bi translated">希望这个小指南能帮助你试用Redux！我知道这可能有点吓人，但这真的只是很好地组织了你的代码。黑客快乐！</p></div></div>    
</body>
</html>
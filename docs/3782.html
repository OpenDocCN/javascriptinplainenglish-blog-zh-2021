<html>
<head>
<title>What is “this” in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的“this”是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/this-in-javascript-451bb6d4be31?source=collection_archive---------6-----------------------#2021-07-29">https://javascript.plainenglish.io/this-in-javascript-451bb6d4be31?source=collection_archive---------6-----------------------#2021-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="60b2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解如何在JavaScript程序中使用“this”关键字。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2c25ce9f7b2631d1974b1bccb0bff1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UfApx5eVkEUfebXgSLaSzg.png"/></div></div></figure><p id="631d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在JavaScript中，<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>是执行当前函数的对象。</p><ul class=""><li id="8f9e" class="lr ls iq kt b ku kv kx ky la lt le lu li lv lm lw lx ly lz bi translated">如果函数是对象的方法，<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>表示对象本身。</li><li id="9232" class="lr ls iq kt b ku ma kx mb la mc le md li me lm lw lx ly lz bi translated">如果函数没有绑定到一个对象，<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指的是<a class="ae mf" href="https://www.contentful.com/blog/2017/01/17/the-global-object-in-javascript/" rel="noopener ugc nofollow" target="_blank">全局对象</a>。</li></ul><p id="75c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您不熟悉全局对象，简而言之，它是:</p><ul class=""><li id="b2e9" class="lr ls iq kt b ku kv kx ky la lt le lu li lv lm lw lx ly lz bi translated">控制台中的<code class="fe ln lo lp lq b">Window</code>对象。</li><li id="d5d7" class="lr ls iq kt b ku ma kx mb la mc le md li me lm lw lx ly lz bi translated">node.js中的<code class="fe ln lo lp lq b">Global</code>对象</li><li id="0acc" class="lr ls iq kt b ku ma kx mb la mc le md li me lm lw lx ly lz bi translated"><code class="fe ln lo lp lq b">undefined</code>在严格模式下。</li></ul><h1 id="3931" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">Javascript函数中“this”的例子</h1><p id="35bd" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">让我们看一堆在不同语境下理解和使用<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>的例子。</p><h2 id="4843" class="nd mh iq bd mi ne nf dn mm ng nh dp mq la ni nj ms le nk nl mu li nm nn mw no bi translated">这在一个方法中</h2><p id="12be" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">让我们创建一个<code class="fe ln lo lp lq b">person</code>对象和一个<code class="fe ln lo lp lq b">getInfo</code>方法。让我们在<code class="fe ln lo lp lq b">getInfo</code>方法中调用<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="d029" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">调用<code class="fe ln lo lp lq b">person.getInfo()</code>记录控制台中的person对象。</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="4487" class="nd mh iq lq b gy nv nw l nx ny">{name: "Jack", getInfo: ƒ}</span></pre><p id="470d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为<code class="fe ln lo lp lq b">getName()</code>方法属于<code class="fe ln lo lp lq b">person</code>对象，所以<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指的是对象本身。</p><h2 id="410f" class="nd mh iq bd mi ne nf dn mm ng nh dp mq la ni nj ms le nk nl mu li nm nn mw no bi translated">这在函数内部</h2><p id="5b7e" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">让我们看另一个例子。</p><p id="164f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这一次，让我们创建一个不依赖于任何对象的函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="5b67" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指向全局对象，即控制台中的<code class="fe ln lo lp lq b">Window</code>对象:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="b100" class="nd mh iq lq b gy nv nw l nx ny">Window {0: global, window: Window, self: Window, document: document, name: "", location: Location, …}</span></pre><h2 id="6bc4" class="nd mh iq bd mi ne nf dn mm ng nh dp mq la ni nj ms le nk nl mu li nm nn mw no bi translated">这在构造函数中</h2><p id="0ce8" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">让我们看看<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>如何与<strong class="kt ir">构造函数</strong>一起工作。</p><p id="e8d8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你不记得了，一个<strong class="kt ir">构造函数</strong>是一个创建对象实例的函数。在JavaScript中，通过关键字<code class="fe ln lo lp lq b"><strong class="kt ir">new</strong></code>调用构造函数。</p><p id="409b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们创建一个用于创建person对象的构造函数<code class="fe ln lo lp lq b">Person</code>:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="04b6" class="nd mh iq lq b gy nv nw l nx ny"><strong class="lq ir">function</strong> Person(name) {<br/>  this.name = name;<br/>  console.log(this);<br/>}</span></pre><p id="2774" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在您可以使用它来创建初始化person对象:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="1bd8" class="nd mh iq lq b gy nv nw l nx ny"><strong class="lq ir">const</strong> employee = <strong class="lq ir">new</strong> Person('Jack');</span></pre><p id="6f7d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在输出的是新的<code class="fe ln lo lp lq b">Person</code>对象:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="1583" class="nd mh iq lq b gy nv nw l nx ny">{name "Jack"}</span></pre><p id="f9d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但这怎么可能呢？我们刚刚看到<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>是函数中的<code class="fe ln lo lp lq b">Window</code>对象。这个函数与我们之前使用的函数有什么不同吗？</p><p id="1113" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是因为您使用<code class="fe ln lo lp lq b"><strong class="kt ir">new</strong></code>操作符创建了<code class="fe ln lo lp lq b">employee</code>。使用<code class="fe ln lo lp lq b"><strong class="kt ir">new</strong></code>创建一个<strong class="kt ir">新对象</strong>并设置<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指向它。</p><h2 id="f0b8" class="nd mh iq bd mi ne nf dn mm ng nh dp mq la ni nj ms le nk nl mu li nm nn mw no bi translated">这在回调函数中</h2><p id="8938" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">作为最后一个例子，让我们创建一个<code class="fe ln lo lp lq b">person</code>对象，它有一个<code class="fe ln lo lp lq b">name</code>和一组存储在数组中的兴趣。为了打印出兴趣，我们给<code class="fe ln lo lp lq b">person</code>对象添加一个<code class="fe ln lo lp lq b">showInterests()</code>方法。该方法调用<code class="fe ln lo lp lq b">interests</code>数组上的<code class="fe ln lo lp lq b">forEach</code>,并以如下格式打印利息:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="c324" class="nd mh iq lq b gy nv nw l nx ny">Matt is interested in Golf.<br/>Matt is interested in Tennis.<br/>Matt is interested in Padel.</span></pre><p id="b93d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在代码中，它看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="f69e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">但是现在输出看起来像这样:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="7f80" class="nd mh iq lq b gy nv nw l nx ny">is interested in Golf.<br/>is interested in Tennis.<br/>is interested in Padel.</span></pre><p id="6886" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">缺少<code class="fe ln lo lp lq b">name</code>零件。这意味着在<code class="fe ln lo lp lq b">forEach</code>回调函数内部调用<code class="fe ln lo lp lq b">this.name</code>由于某种原因失败。</p><p id="924d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看回调中只打印<code class="fe ln lo lp lq b">this</code>而不是<code class="fe ln lo lp lq b">this.name</code>是怎么回事:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="0966" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="2260" class="nd mh iq lq b gy nv nw l nx ny">[object Window] is into Golf.<br/>[object Window] is into Tennis.<br/>[object Window] is into Padel.</span></pre><p id="f563" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">啊哈！现在<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指向全局对象<code class="fe ln lo lp lq b">Window</code>而不是<code class="fe ln lo lp lq b">person</code>。但是为什么呢？<code class="fe ln lo lp lq b">forEach</code>回调住在<code class="fe ln lo lp lq b">person</code>里面，那么<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>不应该指<code class="fe ln lo lp lq b">person</code>本身吗？</p><p id="d84f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">没有。这是因为<code class="fe ln lo lp lq b">forEach</code>里面的函数只是一个常规函数。这不是<code class="fe ln lo lp lq b">person</code>对象的方法。正如您所记得的，一个<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指的是一个函数内部的全局对象，它不依赖于一个对象。因此，在<code class="fe ln lo lp lq b">forEach</code>中调用<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>是指<code class="fe ln lo lp lq b">Window</code>对象。</p><p id="6313" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">既然您已经理解了为什么会发生这种情况，那么让我们来看看如何修复这个问题。</p><p id="0cd4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe ln lo lp lq b">forEach</code>方法碰巧接受另一个参数。这个参数就是<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>在回调里面引用的对象。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/ad942c9e7d9a433ae1ae04c783424210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLiTzhz0u4J7Bu2561tVDQ.png"/></div></div></figure><p id="e9a7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您想在回调函数中调用<code class="fe ln lo lp lq b">this.name</code>，您需要将<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>作为第二个参数传递给<code class="fe ln lo lp lq b">forEach</code>方法:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="np nq l"/></div></figure><p id="7bdf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">输出:</p><pre class="kg kh ki kj gt nr lq ns nt aw nu bi"><span id="6e70" class="nd mh iq lq b gy nv nw l nx ny">Matt is into Golf.<br/>Matt is into Tennis.<br/>Matt is into Padel.</span></pre><p id="705d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在<code class="fe ln lo lp lq b">showInterests()</code>方法如预期的那样工作了。</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="1842" class="mg mh iq bd mi mj oh ml mm mn oi mp mq jw oj jx ms jz ok ka mu kc ol kd mw mx bi translated">结论</h1><p id="b1c1" class="pw-post-body-paragraph kr ks iq kt b ku my jr kw kx mz ju kz la na lc ld le nb lg lh li nc lk ll lm ij bi translated">感谢阅读。我希望你喜欢它。</p><p id="3c5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在JavaScript中，<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>对象是执行当前函数的对象。</p><ul class=""><li id="2dd9" class="lr ls iq kt b ku kv kx ky la lt le lu li lv lm lw lx ly lz bi translated">在一个对象的方法中<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>是对象本身。</li><li id="f0e2" class="lr ls iq kt b ku ma kx mb la mc le md li me lm lw lx ly lz bi translated">在函数中<code class="fe ln lo lp lq b"><strong class="kt ir">this</strong></code>指的是<a class="ae mf" href="https://www.contentful.com/blog/2017/01/17/the-global-object-in-javascript/" rel="noopener ugc nofollow" target="_blank">的全局对象</a>。</li></ul><p id="d88e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">编码快乐！</p></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="b81d" class="mg mh iq bd mi mj oh ml mm mn oi mp mq jw oj jx ms jz ok ka mu kc ol kd mw mx bi translated">进一步阅读</h1><div class="om on gp gr oo op"><a href="https://www.codingem.com/50-buzzwords-of-web-development-and-design-in-2021/" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">2021年网络开发和设计的50多个流行语</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">学习创业公司使用的网页开发和网页设计语言。这篇文章是关于…的很好的入门读物</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">www.codingem.com</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kp op"/></div></div></a></div><div class="om on gp gr oo op"><a href="https://betterprogramming.pub/25-useful-javascript-shorthands-for-web-developers-771ac550a7ba" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">25个对Web开发人员有用的JavaScript简写</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">学习这些惊人的简笔和一行程序来编写干净快速的代码</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">better编程. pub</p></div></div><div class="oy l"><div class="pe l pa pb pc oy pd kp op"/></div></div></a></div></div><div class="ab cl oa ob hu oc" role="separator"><span class="od bw bk oe of og"/><span class="od bw bk oe of og"/><span class="od bw bk oe of"/></div><div class="ij ik il im in"><h1 id="c435" class="mg mh iq bd mi mj oh ml mm mn oi mp mq jw oj jx ms jz ok ka mu kc ol kd mw mx bi translated">参考</h1><div class="om on gp gr oo op"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" rel="noopener  ugc nofollow" target="_blank"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">JavaScript | MDN</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">JavaScript (JS)是一种轻量级、解释型或即时编译的编程语言，具有一流的…</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">developer.mozilla.org</p></div></div><div class="oy l"><div class="pf l pa pb pc oy pd kp op"/></div></div></a></div><p id="8c97" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="pg">更多内容请看</em><a class="ae mf" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="pg">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
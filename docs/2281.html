<html>
<head>
<title>Everything You Need to Know About REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于REST API您需要知道的一切</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/everything-you-need-to-know-about-rest-api-20fd8b9ae862?source=collection_archive---------9-----------------------#2021-05-12">https://javascript.plainenglish.io/everything-you-need-to-know-about-rest-api-20fd8b9ae862?source=collection_archive---------9-----------------------#2021-05-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a60c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">它是如何工作的，它的原理是什么，它的优点是什么？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/01b5574bf6e17139d715af442ae20229.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UZYHY_183GoKpTxN.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image source: <a class="ae ks" href="https://www.nylas.com/blog/category/engineering/technical-guides/" rel="noopener ugc nofollow" target="_blank">Nylas</a></figcaption></figure><p id="b748" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">REST——表述性状态转移——一种基于预定规则的软件架构风格，这些规则描述了如何定义资源以及如何访问资源。罗伊·菲尔丁在2000年提出了它。</p><p id="eb41" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">API——应用编程接口——定义计算机系统之间以及计算机系统与人类之间通信的一组规则。</p><p id="02b3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">简而言之——API定义了用户如何与系统通信，定义了用户如何访问资源以及以何种形式接收资源的规则。另一方面，REST是一种定义API形状的架构风格。</p><p id="80bc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后一个缩写是HTTP，它与REST API主题有着千丝万缕的联系。超文本传输协议(Hypertext Transfer Protocol)是你每天(甚至现在)浏览网页时都会用到的协议(或者它的加密版本——HTTPS)。创建REST API时，通信使用HTTP方法，总共有9种方法:</p><ul class=""><li id="49aa" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">得到</li><li id="ccec" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">邮政</li><li id="278b" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">放</li><li id="6775" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">删除</li><li id="454d" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">连接</li><li id="58f4" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">选择</li><li id="ec70" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">找到；查出</li><li id="f3a6" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">修补</li><li id="7f9e" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">头</li></ul><p id="e140" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而，要构建一个允许你读、写、更新和删除数据的基本API，只有4个方法就足够了——GET、POST、PUT和delete。</p><h1 id="e2b4" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">API工作周期可以定义如下:</h1><ul class=""><li id="1c53" class="lp lq in kv b kw mv kz mw lc mx lg my lk mz lo lu lv lw lx bi translated">客户端以适当地址(端点)的形式准备查询，</li><li id="bd7f" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">客户端发送准备好的查询(请求)，</li><li id="2551" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">系统接收客户的查询并准备响应，</li><li id="62b3" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">系统返回对客户询问的响应，</li><li id="b4ec" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">客户接收并处理响应。</li></ul><p id="1d4c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于很多人来说，我写的东西可能看起来很明显。然而，我希望每个人在读完这篇文章之后，都知道它们是干什么的，以及API是如何工作的。</p><h1 id="2627" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">HTTP方法</h1><p id="ddd6" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">由于这仅仅是对这个主题的介绍，我将把自己限制在绝大多数REST APIs中都有的4个基本HTTP方法上:</p><ul class=""><li id="a7c6" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">GET——顾名思义，是用来下载数据的。这里足以给出一个适当的端点或修改头(headers)和参数(params query)。一个示例查询可能如下所示。使用GET方法的一个普遍情况是验证给定的资源是否存在。然而，在我看来，在这种情况下，更好的办法是使用HEAD方法。这些方法之间的主要区别在于，对HEAD查询的回答仅包含头部，这在所描述的情况下是足够的。但是，我们确实需要一个响应代码，例如，如果资源存在，则为200；如果资源不存在，则为404。</li><li id="9df2" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">POST —它用于创建和发送新数据。在这种情况下，已经有必要创建一个主体来将数据传递给我们的REST API。因此，响应应该是一个HTTP头位置，带有指向新创建的资源的地址。</li><li id="669d" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">PUT —非常类似于POST方法。PUT的主要特点是PUT查询必须指向特定的资源。PUT主要用于更新现有资源。值得一提的是，PUT会覆盖整个资源PATCH方法用于部分覆盖。</li><li id="122d" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">删除—删除数据的方法。在这一点上，我想提一下所谓的软删除技术，在我的博客文章中，我用Node.js和MongoDB做了一点软删除。简而言之，这意味着通过使用API删除数据，我们实际上只向已被删除的实体添加了信息。因此，数据仍保留在数据库中，但在API级别上不可用。所以这个机制应该已经在API本身实现了，和HTTP无关。</li></ul><h1 id="57a4" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">构成休息的原则</h1><p id="c472" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">为了让一个API被称为RESTful或REST API，它必须满足几个假设:</p><ul class=""><li id="7c41" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">将用户界面与服务器操作分开。通过“发布命令”，客户端不会影响服务器端发生的事情。反过来也一样——服务器只给客户端一个答案，无权干涉UI。这允许在许多独立的应用程序中使用一个REST API，并且数据将保持一致。</li><li id="68b7" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">无状态——据说REST是无状态的——这意味着来自客户端的每个请求都必须包含所有信息，并且服务器端不存储用户会话的状态。REST中没有状态或会话之类的术语。</li><li id="aa94" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">可缓存性——来自REST API的用户响应必须明确定义是可缓存还是不可缓存。这对于很快就会过期的数据非常重要。对于相对很少更新的数据—例如，缓存一架高速飞行的飞机的地理坐标是没有意义的，但它的颜色或名称是有意义的。</li><li id="ac74" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">端点，即资源地址，应该清楚地指出它们指的是哪个资源。因此，从它们的构造中，我们应该知道我们将得到什么具体的资源。重要的是API中接收的数据不应该独立于存储它们的数据库模式。当然，没有理由说数据结构应该与数据库模式相同——尽管如此，结构不应该依赖于这个模式。</li><li id="8e1e" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">层分离——我们应该分离数据访问、业务逻辑和表示层。任何一层都不应该与其他层直接交互。间接和外部API的使用(实现)应该是隐藏的。前面提到的飞机就是一个例子。例如，颜色信息可能来自完全不同的API——客户端不需要知道它。</li><li id="1010" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">与用户共享适配器和脚本的可能性。这是一个可选的规则，但是你一定要考虑应用它。比如，如果我们知道客户会对特定的数据进行特定的操作，我们就可以为他们提供现成的解决方案。<br/>使用REST API敲门的优势</li></ul><h1 id="32a4" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">使用REST API有什么好处？</h1><p id="cd01" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc na le lf lg nb li lj lk nc lm ln lo ig bi translated">使用这种解决方案有好处——否则，没有人会使用它，我也不会写这篇文章。SOAP架构被挤出市场，转而支持REST，这不是没有原因的。</p><p id="44c0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">REST最大的好处就是普遍性。例如，假设您需要为一家书店创建一个电话应用程序和网站。您可以创建一个应用程序和网站都将使用的API！</p><p id="8e38" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">第二，真正的REST界面直观易用。直观的界面使得与我们的API集成更加容易，并且减少了阅读文档所花费的时间。</p><p id="2db3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们从API接收的数据通常是最方便的工作格式——JSON，即JavaScript对象符号。有时候也有XML格式，但更多的是和SOAP架构联系在一起。使用JSON真的很舒服，很直观，也不会造成大的困难。</p><p id="ff6a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们还可以同时从多个来源获得数据。例如，我们可以创建一个使用脸书登录和谷歌地图的应用程序。在这两种情况下，我们都将使用这些公司提供的API。</p><p id="51b5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另一个优点是能够将客户机层与服务器层分开。API的替代方法是使用Pug、Twig和Blade等模板引擎创建视图。</p><p id="b093" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">提到的最后一个优点是端点的简单测试。为了这个目的，已经创造了真正伟大和普遍的工具。我最喜欢的是Postman，我将在以后的一篇单独的文章中详细介绍他。最后，还有一个给大麻溶液爱好者的冰壶工具。</p><h1 id="cc1e" class="md me in bd mf mg mh mi mj mk ml mm mn jt mo ju mp jw mq jx mr jz ms ka mt mu bi translated">流行API的示例</h1><ul class=""><li id="9637" class="lp lq in kv b kw mv kz mw lc mx lg my lk mz lo lu lv lw lx bi translated">谷歌地理定位API，</li><li id="f104" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">YouTube数据API，</li><li id="93d9" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">我写了一篇关于它的文章，</li><li id="e551" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">SWAPI——包括人物、行星、交通工具等。来自星球大战宇宙，</li><li id="a310" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">脸书编写的一系列接口。</li></ul><p id="2319" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我可以在这里没完没了地列举例子，但是我鼓励你至少尝试其中的一个！</p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><p id="8124" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我希望你从这篇文章中学到了一些新的东西，更重要的是，一些对你有用的东西。</p><p id="3ee3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nk">更多内容看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nk">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Selenium 4.0: Major Changes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Selenium 4.0:主要变化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/selenium-4-0-major-changes-c2d0112756a2?source=collection_archive---------11-----------------------#2021-11-19">https://javascript.plainenglish.io/selenium-4-0-major-changes-c2d0112756a2?source=collection_archive---------11-----------------------#2021-11-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/22102c6b895cf71329a93c2b9d11b95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VrdfgJT-lN3tuR8Xexr-zw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium 4.0 Major Changes</figcaption></figure><p id="8f56" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">嘿，大家好。在本文中，我将介绍Selenium 4.0的一些主要变化。我们开始吧！</p><h1 id="99ee" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">切换到W3C协议</h1><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/0c61ceeb3fbd8cd8847228ab5a2d2c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TRoWbegdSpBiIU9T"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">W3C protocol</figcaption></figure><p id="dc08" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Selenium项目迁移到了一个全新的协议——W3C协议，他们将不再使用JSON wire协议。</p><h2 id="d346" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">为什么会这样？</h2><p id="dc69" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">因为最近所有的浏览器(例如Chrome、Firefox、Safari等。)，包括Internet Explorer，都被认为是符合W3C的。这样做的原因是，所有的浏览器都以相似的方式开发，没有兼容性问题。现在，这种迁移将确保测试在所有这些浏览器上一致地运行。</p><h2 id="3afd" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">稳定性</h2><p id="6ed5" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">由于Selenium WebDriver和浏览器使用相同的协议，web自动化中的缺陷可以大大减少，从而提高测试的稳定性。</p><h2 id="9590" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">动作API支持</h2><p id="dcda" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">与JSON Wire协议相比，W3C协议也有更丰富的动作API支持。它让你表演—</p><ul class=""><li id="007b" class="ms mt in kb b kc kd kg kh kk mu ko mv ks mw kw mx my mz na bi translated">多点触摸动作</li><li id="57d6" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">放大，缩小</li><li id="bae3" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">同时按下两个键</li><li id="60e3" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">还有更多…</li></ul></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><h1 id="97bd" class="kx ky in bd kz la nn lc ld le no lg lh li np lk ll lm nq lo lp lq nr ls lt lu bi translated">硒网格4.0</h1><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/23d1d53e0297b13206e0bbc799589545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CF8yEE0g6irpcz7u"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium Grid 4.0 Architecture</figcaption></figure><p id="c14c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Selenium Grid 4.0也发生了很多变化。</p><h2 id="75a0" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">码头支持</h2><p id="dac1" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">有了Grid 4.0，您现在可以轻松快速地启动docker容器，在不同的浏览器中运行测试，而不是设置虚拟机。所有的步骤都在<a class="ae mr" href="https://github.com/SeleniumHQ/docker-selenium" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>中有很好的记录。</p><h2 id="fc77" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">Kubernetes支持</h2><p id="b57d" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">Grid 4.0也经过了重新设计，可以在Kubernetes上部署网格，以获得更好的伸缩能力。你可以在这里看一个<a class="ae mr" href="https://github.com/kubernetes/examples/tree/master/staging/selenium" rel="noopener ugc nofollow" target="_blank">的例子</a>，用Kubernetes设置Grid 4.0。</p><h2 id="19f2" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">改进的用户界面</h2><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/464fc804d473448a01dd03ea64d84c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7x6zt9GBLhsydEM9y1SH7w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Grid 4.0 Improved UI</figcaption></figure><p id="a1ca" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Selenium Grid 4.0现在也有一个漂亮的UI，可以让你很容易地看到所有正在运行的容器、会话数和最大并发数。它还插入了一个VNC播放器来观看容器内运行的测试视频！🤯</p><h2 id="85b2" class="ma ky in bd kz mb mc dn ld md me dp lh kk mf mg ll ko mh mi lp ks mj mk lt ml bi translated">IPV6和HTTPS协议</h2><p id="b7fd" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">Selenium grid现在还支持IPv6地址和IPv4地址，您现在也可以使用Grid 4与HTTPS协议进行通信。</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><h1 id="982c" class="kx ky in bd kz la nn lc ld le no lg lh li np lk ll lm nq lo lp lq nr ls lt lu bi translated">新定位器策略</h1><p id="b7c6" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">Selenium 4.0推出了一个新的<a class="ae mr" href="https://www.selenium.dev/documentation/webdriver/locating_elements/#relative-locators" rel="noopener ugc nofollow" target="_blank">相对定位器策略</a>，它更加友好，因为它基于DOM的可视化表示。可用的定位器有—</p><ul class=""><li id="bee0" class="ms mt in kb b kc kd kg kh kk mu ko mv ks mw kw mx my mz na bi translated">下方-位于指定元素下方的web元素</li><li id="0c76" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">toLeftOf —位于指定元素左侧的web元素</li><li id="c632" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">to right of-位于指定元素右侧的web元素</li><li id="6e7d" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">上方-位于指定元素上方的web元素</li><li id="41da" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">near-位于附近(大约。50像素)指定的元素</li></ul><p id="3bcf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里有一个例子—</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nu"><img src="../Images/7ddd879bc57f2bd39a82b33c8f12464d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWAFofQGJizKKTAnVOpdVw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Relative ‘above’ locator strategy</figcaption></figure></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><h1 id="ce64" class="kx ky in bd kz la nn lc ld le no lg lh li np lk ll lm nq lo lp lq nr ls lt lu bi translated"><strong class="ak"> CDP集成&amp;BiDi API</strong></h1><p id="7795" class="pw-post-body-paragraph jz ka in kb b kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw ig bi translated">有了Selenium 4，您还可以访问Chrome调试协议，该协议有一组API，可以让您做以下事情</p><ul class=""><li id="a545" class="ms mt in kb b kc kd kg kh kk mu ko mv ks mw kw mx my mz na bi translated">查看控制台日志</li><li id="70bb" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">拦截网络请求</li><li id="0295" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">执行基本身份验证</li><li id="214b" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">抑制网络性能</li></ul><p id="ed10" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">但是因为这是CDP，所以它只能在基于Chromium的浏览器上工作。</p><p id="e1a0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然而，Selenium团队正在努力让<a class="ae mr" href="https://www.selenium.dev/documentation/webdriver/bidi_apis/" rel="noopener ugc nofollow" target="_blank"> Webdriver双向协议</a>在所有浏览器上实现，这样你就不会受限于某个特定的浏览器或版本。</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><h1 id="b6a0" class="kx ky in bd kz la nn lc ld le no lg lh li np lk ll lm nq lo lp lq nr ls lt lu bi translated">硒IDE</h1><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/ae94593e7a00f1ab94ea2baaa628de6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*uMMZmb9lH7LJURGK"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium IDE</figcaption></figure><ul class=""><li id="43a7" class="ms mt in kb b kc kd kg kh kk mu ko mv ks mw kw mx my mz na bi translated">除了Selenium 4的变化，我们还有一个全新的Selenium IDE，它具有改进的UI和更好的用户体验。</li><li id="0163" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">它还带有自己的命令行运行程序，可以在任何浏览器中运行测试，无论是并行的还是网格的。</li><li id="0a35" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">IDE也有控制流结构，在IDE中有if、while和times等命令</li><li id="d21d" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">Selenium IDE还为与之交互的每个元素记录多个定位器。如果一个定位器在播放过程中失败，将尝试其他定位器，直到一个定位器成功。</li><li id="f172" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">您还可以为所有官方语言绑定(如Java、.Net，Python，Ruby &amp; JavaScript。</li><li id="5c3e" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">IDE也可以通过使用<a class="ae mr" href="https://www.selenium.dev/selenium-ide/docs/en/plugins/plugins-getting-started" rel="noopener ugc nofollow" target="_blank">插件</a>来扩展</li></ul></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><p id="a19a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">如果你想看上面列出的一些功能的演示，你可以看看下面的视频— </strong></p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="a3d7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">至此，Selenium 4的所有主要新功能都已包含在内。希望你喜欢这篇文章！</p><p id="30f6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="ny">更多内容请看</em><a class="ae mr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="ny">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
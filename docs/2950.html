<html>
<head>
<title>An Ajax Crash Course Tutorial Using jQuery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用jQuery的Ajax速成教程</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-ajax-crash-course-tutorial-using-jquery-23dec8cc9a99?source=collection_archive---------14-----------------------#2021-06-15">https://javascript.plainenglish.io/an-ajax-crash-course-tutorial-using-jquery-23dec8cc9a99?source=collection_archive---------14-----------------------#2021-06-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/8a5f9f8f283f038ea3c5001fef880316.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*IhTrMkDdCGFkgSa0rJd7kw.png"/></div></figure><p id="2a76" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">本教程展示了如何使用jQuery通过Ajax刷新网页的一部分。</p><blockquote class="kp kq kr"><p id="f523" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated">下面的例子被大大简化了。在我的书《面向中级程序员的Web开发——用PHP开发》中，我用了整整一节(大约50页)一步步地讲解了通过jQuery与Ajax进行的所有常见数据库交互。</p></blockquote><h1 id="72a2" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">什么是Ajax？</h1><p id="4852" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">Ajax允许网页的一部分发生变化，<em class="ks">而无需刷新整个网站</em>。例如，当你使用搜索引擎时，自动预测建议出现，这是因为网站的一部分更新了(文本框/下拉菜单/光标所在的部分)。</p><p id="66d0" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这是用JavaScript完成的。更具体地说，“异步JavaScript和XML”(缩写为“Ajax”)。</p><h1 id="31a6" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated"><strong class="ak">为什么要使用jQuery？</strong></h1><p id="8bdf" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">jQuery是一个JavaScript库，允许您使用快捷方式编写代码。</p><p id="ef9c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果用普通/普通的JavaScript编写Ajax，会涉及到很多代码，特别是因为每个web浏览器对它的处理略有不同。幸运的是，jQuery具有内置的Ajax功能，这使得跨浏览器兼容性变得非常容易。</p><h1 id="7c80" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">这个例子</h1><p id="60f7" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">Ajax的一个常见用途是提交表单(例如保存数据)。为了使本教程简单，让我们假设用户刚刚按下了save按钮，现在我们希望看到新更新的数据。</p><p id="3290" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">我们希望只刷新页面的<em class="ks">部分</em>，我们将使用jQuery的get()函数通过Ajax来实现这一点。</strong></p><h2 id="b9a9" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">HTML代码</h2><p id="f8de" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">下面是一个简单的页面来演示这个概念。它包括:</p><ul class=""><li id="854c" class="mm mn in jt b ju jv jy jz kc mo kg mp kk mq ko mr ms mt mu bi translated">jQuery的引用</li><li id="3571" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">调用JavaScript函数<em class="ks"> loadContents( ) </em>的按钮</li><li id="dfa8" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">ID为“内容”的DIV</li><li id="3191" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">用于<em class="ks"> loadContents( ) </em>的JavaScript函数，该函数在浏览器控制台中显示文本以供测试</li></ul><figure class="na nb nc nd gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="2848" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">它看起来会像这样:</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/947e8423fb6ae1e429991a200b24617d.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*u8vAcaDKlttj1bMmp4-40A.png"/></div></figure><h2 id="2fc8" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">服务器端代码</h2><p id="ef34" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">让我们显示一个简单的有序列表:</p><figure class="na nb nc nd gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="7680" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最终，这里的代码可以运行一个查询来从数据库中检索数据。这里，我只是打印出最终的HTML输出。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi nh"><img src="../Images/ad6096c758eabdf0dd254e8adca54383.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*AjQdXN8AMz5D41_lo1mPpA.png"/></div></figure><p id="e272" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">目标是获取服务器端呈现的HTML并将其显示在DIV </strong>中(ID为<em class="ks"> contents </em>的DIV)。</p><h2 id="6afc" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">JavaScript代码</h2><p id="5f23" class="pw-post-body-paragraph jr js in jt b ju lv jw jx jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ig bi translated">我们将使用jQuery的<strong class="jt io"> get( ) </strong>函数。</p><blockquote class="kp kq kr"><p id="922e" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated">这对于本例来说是合适的，因为我们只是在读取网页的内容。或者，如果我们将数据保存到数据库中，我们可以使用<strong class="jt io"> post( ) </strong>。</p></blockquote><p id="c377" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">jQuery的get()和post()函数遵循以下格式:</p><pre class="na nb nc nd gt ni nj nk nl aw nm bi"><span id="b873" class="ma ky in nj b gy nn no l np nq">$.get(<br/>  urlEndPointHere,<br/>  {variableOne: varOneValue, variableTwo: varTwoValue},<br/>  function(responseText){<br/>    // do something with the results<br/>  },<br/>  dataFormat<br/>);</span></pre><p id="51e5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以看到传入了四个参数:</p><ol class=""><li id="e23e" class="mm mn in jt b ju jv jy jz kc mo kg mp kk mq ko nr ms mt mu bi translated">代码将访问的URL端点</li><li id="e61d" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">要传入的变量(例如。表单中的数据)</li><li id="e122" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">脚本完成处理时运行的函数</li><li id="b34c" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">返回数据的格式(例如:HTML、JSON或XML)</li></ol><p id="a4c4" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我们用这些值来调用函数:</p><figure class="na nb nc nd gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><ol class=""><li id="c34e" class="mm mn in jt b ju jv jy jz kc mo kg mp kk mq ko nr ms mt mu bi translated">第一个参数(第3行)表示加载哪个网页。</li><li id="89c7" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">第二个参数(第5行)是我们传入页面的数据。假设我们需要用户ID 1的数据。在服务器端页面上，我们当然会检索URL参数并将值注入到SQL查询中。</li><li id="7586" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">第7行到第9行定义了函数完成后会发生什么。这里，返回的HTML被放入一个名为<em class="ks"> responseText </em>的变量中(第7行)。然后我们找到ID为<em class="ks">内容</em>的元素，并将返回的HTML放入其中(第8行)。</li><li id="4627" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko nr ms mt mu bi translated">最后一个参数指示返回的数据类型(第11行)，在本例中是“html”。</li></ol><p id="9cd2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以在您的服务器上尝试一下，上面的代码应该可以工作:服务器端呈现的页面的输出现在出现在给定ID的DIV的内容中。</p><figure class="na nb nc nd gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nt nu di nv bf nw"><div class="gh gi ns"><img src="../Images/4319db361b9fef87eac109cc631a68a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ku_15J63l-RlJLh1XBY_Lg.png"/></div></div></figure><p id="b933" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在Chrome的开发者工具窗格中，网络选项卡显示对指定的URL进行了调用。因为它的类型是“GET”，所以它生成了URL，并在末尾附加了参数。</p><blockquote class="kp kq kr"><p id="eb75" class="jr js ks jt b ju jv jw jx jy jz ka kb kt kd ke kf ku kh ki kj kv kl km kn ko ig bi translated">注意:当使用<strong class="jt io"> get() </strong>函数时，您可以选择用已经存在的参数预先生成URL。在<strong class="jt io"> post() </strong>中，更常见的是使用代码中描述的方法来传递参数。</p></blockquote><h1 id="9ff7" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">但是等等，还有呢！</h1><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi nx"><img src="../Images/bcf4739ae23f59b20b5ed87782732804.png" data-original-src="https://miro.medium.com/v2/resize:fit:592/format:webp/1*ytbTjNxHALDLviSyrLYGvw.png"/></div></figure><p id="7c8f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我想提一下我经常做的一些修改:</p><ul class=""><li id="5925" class="mm mn in jt b ju jv jy jz kc mo kg mp kk mq ko mr ms mt mu bi translated">通常我会有几个JavaScript函数都使用同一个URL端点(对于那些熟悉模型-视图-控制器概念的人来说，我的“控制器”)。因此，我将定义一个变量，并将其传递给<em class="ks"> get() </em>和<em class="ks"> post() </em>函数。</li><li id="d158" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">当页面加载(即检索新数据)时，我喜欢有一个动画GIF。因为这个图像的路径在几个JavaScript函数中都要用到，所以我也将它设置为一个变量。</li><li id="5950" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">我明确地关闭了<em class="ks">缓存。这确保了每次页面刷新都获得最新的数据。</em></li></ul><h2 id="601d" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">最终的JavaScript代码:使用GET()的jQuery的Ajax</h2><figure class="na nb nc nd gt jo"><div class="bz fp l di"><div class="ne nf l"/></div></figure><h2 id="c4bf" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">发生了什么变化</h2><ul class=""><li id="3755" class="mm mn in jt b ju lv jy lw kc ny kg nz kk oa ko mr ms mt mu bi translated">被调用的URL(通常是我的“控制器”)在第16行被定义为一个变量，并在第30行使用。</li><li id="7e5d" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">我在第18行指定了加载图像的路径。当JavaScript函数第一次被调用时，它将出现在第26行的DIV(即将填充新内容的那个)中。一旦加载了新页面，DIV的内容将被覆盖(从而删除动画)。</li><li id="566e" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">第20到22行关闭缓存，确保我们总是从服务器获得最新的值(下面Chrome开发者工具中网络面板的截图)。</li></ul><figure class="na nb nc nd gt jo gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/c67005c8904442f206b4d181997d4396.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*CrL4jjgmfxogZ_ak3l1Njg.png"/></div><figcaption class="oc od gj gh gi oe of bd b be z dk">An additional parameter with the timestamp is automatically generated — ensuring the URL is unique for each request</figcaption></figure><h2 id="6734" class="ma ky in bd kz mb mc dn ld md me dp lh kc mf mg ll kg mh mi lp kk mj mk lt ml bi translated">最终注释:</h2><ul class=""><li id="dc0c" class="mm mn in jt b ju lv jy lw kc ny kg nz kk oa ko mr ms mt mu bi translated">在这个例子中，我们使用了jQuery的<em class="ks"> get() </em>函数，我提到的<em class="ks"> post() </em>函数也是相当类似的。jQuery还有一个<em class="ks"> ajax() </em>函数，它提供了一些额外的功能和选项。</li><li id="5f78" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">所述附加选项中的一些将考虑服务器端页面呈现的成功/失败。</li><li id="3621" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">你很容易受到同源政策的影响，这意味着你不能从其他人的网站(T2的网站)进入页面。</li><li id="3d9f" class="mm mn in jt b ju mv jy mw kc mx kg my kk mz ko mr ms mt mu bi translated">提交数据时，除了给“name”属性加上之外，给输入元素一个ID <em class="ks">会很有帮助(就像我们对上面的DIV所做的那样)。这样更容易瞄准/参考输入。</em></li></ul></div><div class="ab cl og oh hr oi" role="separator"><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol om"/><span class="oj bw bk ok ol"/></div><div class="ig ih ii ij ik"><p id="10a9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="ks">喜欢这种文笔？有兴趣了解jQuery的Ajax，或者如何用PHP创建服务器端web应用程序吗？查看我的书</em> <a class="ae kw" href="https://stevesohcot.com/php-book" rel="noopener ugc nofollow" target="_blank"> <em class="ks">《面向中级程序员的Web开发——使用PHP </em> </a> <em class="ks">,该书对这些主题进行了更详细的介绍。</em></p><p id="ed1e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="ks">更多内容请看</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ks">plain English . io</em></a></p></div></div>    
</body>
</html>
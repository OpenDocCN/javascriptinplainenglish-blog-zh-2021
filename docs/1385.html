<html>
<head>
<title>Media Queries in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的媒体查询</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/media-queries-in-javascript-f7e5a41d83a1?source=collection_archive---------10-----------------------#2021-03-23">https://javascript.plainenglish.io/media-queries-in-javascript-f7e5a41d83a1?source=collection_archive---------10-----------------------#2021-03-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4a78" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解如何根据媒体查询有条件地运行JavaScript代码。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/cc73c5640dd121c4c2b326cb04cac6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sldGc4yV4H04T4vTgyCvIw.png"/></div></div></figure><p id="600c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们都知道CSS媒体查询，它允许我们根据一个<code class="fe lk ll lm ln b">@media</code>规则应用不同的样式。</p><p id="9e70" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">但是你知道媒体查询不仅限于CSS吗？有时，根据媒体查询运行JavaScript代码会很有用。</p><p id="75d5" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">怎么会？用<code class="fe lk ll lm ln b">window</code> API方法<code class="fe lk ll lm ln b">matchMedia()</code>。</p><h1 id="4d38" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">matchMedia()方法</h1><p id="589a" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">简而言之，这是用JavaScript编写媒体查询的一种简单快捷的方式。这个概念和CSS中的一样:如果媒体查询的条件匹配，那么运行一些代码。我们可以通过任何CSS <code class="fe lk ll lm ln b">@media</code>规则(屏幕、方向、最小宽度等。)作为该方法的字符串参数，它返回一个带有两个属性和两个方法的<code class="fe lk ll lm ln b">MediaQueryList</code>对象。</p><p id="c551" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">属性:</p><ul class=""><li id="8529" class="ml mm in kq b kr ks ku kv kx mn lb mo lf mp lj mq mr ms mt bi translated"><code class="fe lk ll lm ln b">matches</code>:布尔值，如果满足媒体查询，则为<code class="fe lk ll lm ln b">true</code>，否则为<code class="fe lk ll lm ln b">false</code>。这是您将在大多数情况下使用的基本用法和更直观的属性，与我们编写CSS媒体查询的方式非常相似。</li><li id="2d37" class="ml mm in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><code class="fe lk ll lm ln b">media</code>:媒体查询本身。</li></ul><p id="0251" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">方法:</p><ul class=""><li id="cb7d" class="ml mm in kq b kr ks ku kv kx mn lb mo lf mp lj mq mr ms mt bi translated"><code class="fe lk ll lm ln b">addListener()</code>或<code class="fe lk ll lm ln b">addEventListener()</code>:添加一个回调，当媒体查询改变状态时调用。</li><li id="1ed6" class="ml mm in kq b kr mu ku mv kx mw lb mx lf my lj mq mr ms mt bi translated"><code class="fe lk ll lm ln b">removeListener()</code>或<code class="fe lk ll lm ln b">removeEventListener()</code>:删除之前在<code class="fe lk ll lm ln b">addListener()</code>中定义的指定回调。</li></ul><h1 id="c9d7" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">例子</h1><p id="42e6" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">下面的代码片段包含两个带有<code class="fe lk ll lm ln b">matchMedia()</code>方法的属性和方法的例子。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mz na l"/></div></figure><h1 id="84ab" class="lo lp in bd lq lr ls lt lu lv lw lx ly jt lz ju ma jw mb jx mc jz md ka me mf bi translated">结论</h1><p id="381d" class="pw-post-body-paragraph ko kp in kq b kr mg jo kt ku mh jr kw kx mi kz la lb mj ld le lf mk lh li lj ig bi translated">在第二个代码块中，可以认为使用传统的<code class="fe lk ll lm ln b">window.addEventListener('resize', callbackFunction)</code>和使用<code class="fe lk ll lm ln b">window.innerWidth</code>来获得当前的视窗宽度会更好，但是使用<code class="fe lk ll lm ln b">matchMedia()</code>的方法旨在展示这种方法如何让我们检测JavaScript中的媒体查询变化，而不是提供针对特定问题的最佳方法。</p><p id="6494" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">然而，监听<code class="fe lk ll lm ln b">resize</code>事件将在每次调整视窗大小时调用回调函数，这比使用<code class="fe lk ll lm ln b">matchMedia</code>方法的性能要差，后者只在指定的媒体查询匹配时调用回调函数。</p><p id="d66a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">除此之外，使用所提出的方法为我们提供了更广泛的可能性，因为它不仅可以执行传统的操作，如监听视口宽度的变化，还可以检测众所周知的媒体查询的变化。</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><h1 id="5d54" class="lo lp in bd lq lr ni lt lu lv nj lx ly jt nk ju ma jw nl jx mc jz nm ka me mf bi translated">参考</h1><div class="nn no gp gr np nq"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/matchMedia" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">Window.matchMedia()</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">窗口接口的matchMedia()方法返回一个新的MediaQueryList对象，该对象可用于确定是否…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.mozilla.org</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe km nq"/></div></div></a></div><div class="nn no gp gr np nq"><a href="https://www.w3.org/TR/cssom-view/#dom-window-matchmedia" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">CSSOM视图模块</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">该规范中定义的许多特性已经被浏览器支持了很长一段时间。目标是…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">www.w3.org</p></div></div></div></a></div><div class="nn no gp gr np nq"><a href="https://developer.mozilla.org/en-US/docs/Web/API/MediaQueryList" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">MediaQueryList</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">MediaQueryList对象存储应用于文档的媒体查询的信息，同时支持即时和…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.mozilla.org</p></div></div></div></a></div><div class="nn no gp gr np nq"><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Testing_media_queries" rel="noopener  ugc nofollow" target="_blank"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd io gy z fp nv fr fs nw fu fw im bi translated">以编程方式测试媒体查询</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">DOM提供了可以通过MediaQueryList接口以编程方式测试媒体查询结果的特性…</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">developer.mozilla.org</p></div></div><div class="nz l"><div class="of l ob oc od nz oe km nq"/></div></div></a></div></div></div>    
</body>
</html>
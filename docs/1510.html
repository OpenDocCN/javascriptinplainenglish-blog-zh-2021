<html>
<head>
<title>Build a Power 3D Animation with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React构建Power 3D动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-power-3d-animation-on-react-c2b76daa0606?source=collection_archive---------4-----------------------#2021-03-31">https://javascript.plainenglish.io/build-a-power-3d-animation-on-react-c2b76daa0606?source=collection_archive---------4-----------------------#2021-03-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="0ed8" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">快速开始使用react-three-fiber</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/147800edfb16a681981ddd3d389dc1c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gr89HfLijJMWnCNb3iWL-g.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@olav_ahrens?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Olav Ahrens Røtne</a> on <a class="ae ks" href="https://unsplash.com/s/photos/cube?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2a76" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天我想谈谈JavaScript开发中的3D动画。在网络浏览器中可以使用3D图形吗？我们如何实现这一目标？有兴趣的话，我们一起来挖掘一下。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="56b6" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">基本概念</h1><h2 id="f013" class="mo lx in bd ly mp mq dn mc mr ms dp mg lc mt mu mi lg mv mw mk lk mx my mm mz bi translated">WebGL</h2><p id="da23" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><a class="ae ks" href="https://www.khronos.org/webgl/wiki/Main_Page" rel="noopener ugc nofollow" target="_blank">WebGL</a></code> (Web Graphics Library)是一个跨平台的免费JavaScript API，用于在Web浏览器中创建3D图形，无需插件。当你使用WebGL时，我们必须描述每个点、线、面等等。它就像一个低级系统。</p><h2 id="cf9b" class="mo lx in bd ly mp mq dn mc mr ms dp mg lc mt mu mi lg mv mw mk lk mx my mm mz bi translated">三. js</h2><p id="a0e0" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><a class="ae ks" href="https://threejs.org" rel="noopener ugc nofollow" target="_blank">Three.js</a></code>是一个跨浏览器的JavaScript库，用于使用WebGL在web浏览器中创建和显示动画3D计算机图形和组件。所以Three.js用图形加快开发进程。Three.js的名字有三个主要内容:</p><ul class=""><li id="7698" class="nj nk in kv b kw kx kz la lc nl lg nm lk nn lo no np nq nr bi translated">场景——所有行动将要发生的地方；</li><li id="2eee" class="nj nk in kv b kw ns kz nt lc nu lg nv lk nw lo no np nq nr bi translated">相机—捕捉并显示场景中的所有对象；</li><li id="3500" class="nj nk in kv b kw ns kz nt lc nu lg nv lk nw lo no np nq nr bi translated">渲染器—显示相机捕获的场景。</li></ul><h2 id="d0a5" class="mo lx in bd ly mp mq dn mc mr ms dp mg lc mt mu mi lg mv mw mk lk mx my mm mz bi translated">反应三纤维</h2><p id="eb85" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><a class="ae ks" href="https://github.com/pmndrs/react-three-fiber" rel="noopener ugc nofollow" target="_blank">react-three-fiber</a></code>是React和react-native应用上three.js的React <a class="ae ks" href="https://reactjs.org/docs/codebase-overview.html#renderers" rel="noopener ugc nofollow" target="_blank">渲染器</a>。您可以构建可重用的react组件，并为相应的three.js原语提供自己的状态、钩子和道具。three.js中的所有对象都可以很好地工作，没有异常和额外的开销。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="f8ab" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">设置项目</h1><p id="ece6" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">现在，我将用<code class="fe nf ng nh ni b">react-three-fiber</code>的基本组件创建一个关于太空的<code class="fe nf ng nh ni b">react-space</code>项目。</p><p id="7587" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，我将使用<code class="fe nf ng nh ni b"><a class="ae ks" href="https://create-react-app.dev/" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>创建一个快速的单页面React应用程序。我们可以通过运行一个简单的命令来设置一个现代化的web应用程序:</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="f054" class="mo lx in ni b gy ob oc l od oe">npx create-react-app react-space</span></pre><p id="8d16" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">之后，将其移动到<code class="fe nf ng nh ni b">react-space</code>目录，并从终端运行:</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="7ba8" class="mo lx in ni b gy ob oc l od oe">cd react-space<br/>npm start</span></pre><p id="0235" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">太好了，我们已经成功创建了React应用程序。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="2999" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">制作魔法代码</h1><p id="8834" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">首先你要安装<code class="fe nf ng nh ni b">react-three-fiber</code>。这很简单，只需要一个命令:</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="8cd9" class="mo lx in ni b gy ob oc l od oe">npm install three react-three-fiber</span></pre><p id="57a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我将创建<code class="fe nf ng nh ni b">Stars</code>组件来模拟太空中的群星。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="8209" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面，我生成了恒星坐标，几何图形和材质。是我们放置在场景中的基本组件。<code class="fe nf ng nh ni b">Geometry</code>允许我们给网格分配各种形状(立方体、金字塔等)。</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="409b" class="mo lx in ni b gy ob oc l od oe">const geometry = new THREE.SphereBufferGeometry(1, 10, 10)</span></pre><p id="d95f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b">Material</code>允许我们使用不同的材料制作网格。例如，我们使用了<code class="fe nf ng nh ni b"><a class="ae ks" href="https://threejs.org/docs/#api/en/geometries/SphereGeometry" rel="noopener ugc nofollow" target="_blank">SphereBufferGeometry</a></code>和<code class="fe nf ng nh ni b"><a class="ae ks" href="https://threejs.org/docs/#api/en/materials/MeshBasicMaterial" rel="noopener ugc nofollow" target="_blank">MeshBasicMaterial</a></code>。</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="61cc" class="mo lx in ni b gy ob oc l od oe">const material = new THREE.MeshBasicMaterial({ color: new THREE.Color('lightblue') })</span></pre><p id="9f7d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">另外，我使用了<code class="fe nf ng nh ni b"><a class="ae ks" href="https://github.com/pmndrs/react-three-fiber/blob/master/markdown/api.md#useFrame" rel="noopener ugc nofollow" target="_blank">useFrame</a></code>来更新每一帧渲染的星形旋转和缩放。允许我们在渲染的每一帧上执行代码，比如运行特效、更新控件等等。</p><p id="a26a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我将创建主要的<code class="fe nf ng nh ni b">Box</code>组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="20c2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我使用<code class="fe nf ng nh ni b"><a class="ae ks" href="https://threejs.org/docs/#api/en/core/BufferGeometry" rel="noopener ugc nofollow" target="_blank">boxBufferGeometry</a></code>组件来绘制线和点的几何图形。</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="6517" class="mo lx in ni b gy ob oc l od oe">&lt;boxBufferGeometry args={[2, 2, 2]} attach="geometry" /&gt;</span></pre><p id="12f4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">它是一个很棒的Three.js组件，具有顶点位置、面索引、法线、颜色、uv和自定义属性。</p><pre class="kd ke kf kg gt nx ni ny nz aw oa bi"><span id="a785" class="mo lx in ni b gy ob oc l od oe">&lt;meshNormalMaterial attach="material" /&gt;</span></pre><p id="f086" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe nf ng nh ni b"><a class="ae ks" href="https://threejs.org/docs/#api/en/materials/MeshNormalMaterial" rel="noopener ugc nofollow" target="_blank">meshNormalMaterial</a></code>是一种将法向量映射到RGB颜色的材质。</p><p id="e0d9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后但同样重要的是，我将在我们的项目中实现<code class="fe nf ng nh ni b">App</code>组件:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="of og l"/></div></figure><p id="b5c0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面，我使用了<code class="fe nf ng nh ni b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame" rel="noopener ugc nofollow" target="_blank">requestAnimationFrame</a></code>来制作<code class="fe nf ng nh ni b">Box</code>组件的动画。此方法执行动画，并请求浏览器在下一次重画之前调用指定的函数来更新动画。</p><p id="be70" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">最后，我们用<code class="fe nf ng nh ni b">Canvas</code>在浏览器上显示我们的3D场景。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="8cc2" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">让我们演示一下我们的React Space应用程序</h1><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="oh og l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">react-space</figcaption></figure><p id="3a3c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想检查所有的代码，这里有到GitHub的链接。</p><h1 id="dd3d" class="lw lx in bd ly lz oi mb mc md oj mf mg jt ok ju mi jw ol jx mk jz om ka mm mn bi translated">结论</h1><p id="6305" class="pw-post-body-paragraph kt ku in kv b kw na jo ky kz nb jr lb lc nc le lf lg nd li lj lk ne lm ln lo ig bi translated">感谢阅读——我希望这篇文章对你有用。编码快乐！</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><p id="a18d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">资源:</strong></p><div class="on oo gp gr op oq"><a href="https://blog.logrocket.com/3d-rendering-in-the-browser-with-react-three-fiber/" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd io gy z fp ov fr fs ow fu fw im bi translated">使用react-three-fiber - LogRocket博客在浏览器中进行3D渲染</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">根据他们的官方文档页面:react-three-fiber是three.js在网络上的react渲染器，并且…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">blog.logrocket.com</p></div></div><div class="oz l"><div class="pa l pb pc pd oz pe km oq"/></div></div></a></div><div class="on oo gp gr op oq"><a href="https://www.smashingmagazine.com/2020/11/threejs-react-three-fiber/" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd io gy z fp ov fr fs ow fu fw im bi translated">使用react-three-fiber - Smashing杂志深入了解React和Three.js</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">react-three-fiber是一个功能强大的Three.js渲染器，可以帮助react及其本机渲染3D模型和动画</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">www.smashingmagazine.com</p></div></div><div class="oz l"><div class="pf l pb pc pd oz pe km oq"/></div></div></a></div><div class="on oo gp gr op oq"><a href="https://github.com/Gapur/react-space" rel="noopener  ugc nofollow" target="_blank"><div class="or ab fo"><div class="os ab ot cl cj ou"><h2 class="bd io gy z fp ov fr fs ow fu fw im bi translated">gapur/反应空间</h2><div class="ox l"><h3 class="bd b gy z fp ov fr fs ow fu fw dk translated">在React上构建强大的3D动画快速入门使用react-three-fiber今天我想谈谈3D…</h3></div><div class="oy l"><p class="bd b dl z fp ov fr fs ow fu fw dk translated">github.com</p></div></div></div></a></div><p id="d308" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="pg">更多内容看</em><a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="pg">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
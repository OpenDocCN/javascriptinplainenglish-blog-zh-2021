# åœ¨ Nuxt.js ä¸­æ˜¾ç¤ºä¸€ä¸ªåŠ è½½å¾®è°ƒå™¨

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/show-a-loading-spinner-in-nuxt-js-7a5ad0537ebf?source=collection_archive---------2----------------------->

å¥½çš„ï¼Œä½ åœ¨ä½ çš„ Nuxt åº”ç”¨ç¨‹åºä¸­åˆ›å»ºäº†ä¸€ä¸ªå¥‡å¦™çš„åŠ¨ç”»ï¼Œå®ƒåº”è¯¥åœ¨åŠ è½½åç«‹å³å¼€å§‹æ’­æ”¾å¹¶æ“ä½œä¸»é¡µçš„ä¸€äº›æ‰“å¼€å†…å®¹ã€‚ç„¶è€Œï¼Œä½ çš„é¡µé¢å†…å®¹ï¼Œåœ¨åŠ¨ç”»å¼€å§‹æ’­æ”¾ä¹‹å‰åº”è¯¥æ˜¯éšè—çš„ï¼Œç°åœ¨å·²ç»æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ç„¶åå®ƒä»¬å°±æ¶ˆå¤±äº†ï¼Œåªæ˜¯åœ¨ä½ ç¼–ç¨‹çš„æ—¶å€™æ‰é‡æ–°å‡ºç°ã€‚å¤©å“ªï¼ğŸ˜±å¤ªå¥‡æ€ªäº†ï¼å‘ç”Ÿä»€ä¹ˆäº‹äº†ï¼Ÿ

å—¯ï¼Œä½ å¯èƒ½åº”è¯¥æ˜¾ç¤ºä¸€ä¸ªå¾®è°ƒå±å¹•ï¼Œåªè¦ä¸»é¡µåŠ è½½ï¼Œå®ƒå°±ä¼šä¸€ç›´æŒç»­ï¼Œè¿™æ ·ä½ çš„ JavaScript å°±å¯ä»¥æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥å‘ˆç°ä½ çš„ç²¾å½©ä»‹ç»åœºæ™¯ã€‚è®©æˆ‘å‘Šè¯‰ä½ å¦‚ä½•åœ¨ä¸€ä¸ª Nuxt åº”ç”¨ä¸­åšåˆ°è¿™ä¸€ç‚¹ã€‚

# åˆ©ç”¨ Vue ç”Ÿå‘½å‘¨æœŸæŒ‚é’©

Vue ç”Ÿå‘½å‘¨æœŸæŒ‚é’©æ˜¯åœ¨ Vue å¯¹è±¡ç”Ÿå‘½å‘¨æœŸçš„æŸä¸ªé˜¶æ®µæ‰§è¡Œçš„ä¿ç•™æ–¹æ³•ã€‚ä»åˆå§‹åŒ–å¼€å§‹åˆ°è¢«é”€æ¯ï¼Œå¯¹è±¡ç»å†äº†ä¸åŒçš„ç”Ÿå‘½é˜¶æ®µã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªæŒ‡ç¤ºæŒ‚é’©é¡ºåºçš„å¸¸ç”¨å›¾è¡¨:

![](img/a09f15311841def8c09e7fceafcdd233.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒVue æœ‰å¤šè¾¾ 8 ä¸ªç”Ÿå‘½å‘¨æœŸæŒ‚é’©ï¼Œå³:

*   åˆ›å»ºå‰
*   åˆ›é€ 
*   å®‰è£…å‰
*   å®‰è£…å¥½çš„
*   æ›´æ–°å‰
*   æ›´æ–°
*   é”€æ¯å‰
*   ç ´å

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªæ¥ç®€å•åœ°è§£å†³æˆ‘ä»¬çš„é—®é¢˜ã€‚å¦‚æœä½ èƒ½çŒœå‡ºï¼Œä»–ä»¬ä¸­çš„å“ªä¸€ä¸ªèƒ½å¸®åŠ©æˆ‘ä»¬å®ç°ç›®æ ‡ï¼Ÿæ˜¯å•Šï¼Œä½ çŒœå¯¹äº†ï¼`beforeCreate()`ğŸ˜

> å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº Vue ç”Ÿå‘½å‘¨æœŸæŒ‚é’©çš„çŸ¥è¯†ï¼Œè¯·æŸ¥é˜…ğŸ‘‰ [vue æ–‡æ¡£](https://vuejs.org/v2/guide/instance.html#Instance-Lifecycle-Hooks)ã€‚

å®ç°é€»è¾‘å¾ˆç®€å•:

åˆ›å»ºä¸€ä¸ªç»„ä»¶ï¼Œå¹¶éšæ„å‘½åã€‚åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘å°†å®ƒå‘½åä¸º***load spinner . vue***ã€‚è¯¥ç»„ä»¶åº”è¯¥åŒ…å« div å…ƒç´ å’Œ css ä»£ç ï¼Œç”¨äºè®¾ç½®å¾®è°ƒå™¨çš„æ ·å¼ï¼Œå¦‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ‰€ç¤ºã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°å…¶ä»–æ ·å“[ã€‚](https://csshint.com/css-spinners/)

```
<template>
  <div class="splash-screen">
    <div class="spinner-wrapper">
      <div class="spinner"></div>
    </div>
  </div>
</template>

<style scoped>
.splash-screen {
   background: #f2f0ee;
    width: 100vw;
    height: 100vh;
  position: fixed;
  z-index: 50;    
}

.spinner-wrapper {
  position: absolute;
  left: 50%;
  top: 50%;

  transform: translate(-50%, -50%);
}
.spinner {
  width: 80px;
  height: 80px;
  margin: 100px auto;
  background-color: #e45447;

  border-radius: 100%;
  -webkit-animation: sk-scaleout 1s infinite ease-in-out;
  animation: sk-scaleout 1s infinite ease-in-out;
}

@-webkit-keyframes sk-scaleout {
  0% {
    -webkit-transform: scale(0);
  }
  100% {
    -webkit-transform: scale(1);
    opacity: 0;
  }
}

@keyframes sk-scaleout {
  0% {
    -webkit-transform: scale(0);
    transform: scale(0);
  }
  100% {
    -webkit-transform: scale(1);
    transform: scale(1);
    opacity: 0;
  }
}
</style>
```

æ‰“å¼€æ‚¨çš„ **/layouts/default.vue** æ–‡ä»¶ï¼Œå¹¶å°†ä¸‹é¢çš„ä»£ç ç‰‡æ®µç²˜è´´åˆ°`<script>`æ ‡è®°ä¸­ã€‚

```
<script>
export default {
  beforeCreate() {
    this.showHideSpinner = true;
  },
  mounted() {
    this.showHideSpinner = false;
  },
  data() {
    return {
      showHideSpinner: true
    };
  }
};
</script>
```

åœ¨`data()`æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªåä¸º`showHideSpinner`çš„å˜é‡ï¼Œå¹¶å°†å…¶å€¼è®¾ç½®ä¸º`true`ã€‚ç„¶åï¼Œåœ¨`beforeCreate()`æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å°†`this.showHideSpinner`è®¾ç½®ä¸ºçœŸã€‚è¿™æ„å‘³ç€å¾®è°ƒå™¨æœ€åˆå°†æ˜¯å¯è§çš„ï¼Œå¹¶ç»§ç»­æ˜¾ç¤ºï¼Œç›´åˆ°è°ƒç”¨`mounted()`æŒ‚é’©ï¼Œæ­¤æ—¶`this.showHideSpinner`çš„å€¼å˜ä¸º`false`ï¼Œå¾®è°ƒå™¨æ¶ˆå¤±ã€‚

ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½äº†è„šæœ¬ï¼Œè®©æˆ‘ä»¬æ’å…¥ç»„ä»¶å¹¶ä¼ å…¥`v-if="showHideSpinner"`ã€‚å°†ä»¥ä¸‹ä»£ç ç²˜è´´ä¸ºå®¹å™¨ div çš„ç¬¬ä¸€ä¸ªå­çº§ã€‚

**/å¸ƒå±€/é»˜è®¤. vue**

```
<template>
  <div>
    <LoadSpinner v-if="showHideSpinner" />

    //...

    <Nuxt />
  </div>
</template>
```

ç°åœ¨ä½ çŸ¥é“äº†ï¼äº«å—ä½ å‰©ä¸‹çš„ä¸€å¤©ã€‚âœŒ

# ç»“è®º

éœ€è¦æ³¨æ„çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œvue ç”Ÿå‘½å‘¨æœŸæŒ‚é’©æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ä»¥ä¸€ç§æ›´ç®€å•ã€æ›´å®¹æ˜“çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚é—ªå±(å¯ä»¥è¿™ä¹ˆè¯´)æ˜¯ä½ å¯ä»¥ç”¨ Vue ç”Ÿå‘½å‘¨æœŸé’©å­åšçš„è®¸å¤šä¸å¯æ€è®®çš„äº‹æƒ…ä¹‹ä¸€ã€‚
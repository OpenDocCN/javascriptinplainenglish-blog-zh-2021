<html>
<head>
<title>Create a Shopping Cart with Vue 3 and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Vue 3和JavaScript创建一个购物车</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-shopping-cart-with-vue-3-and-javascript-179fec6812b6?source=collection_archive---------15-----------------------#2021-02-21">https://javascript.plainenglish.io/create-a-shopping-cart-with-vue-3-and-javascript-179fec6812b6?source=collection_archive---------15-----------------------#2021-02-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d1eed5b2f61d0401ab4eed3348863434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*obtryWJAyknPe8rr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@pvsbond?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Peter Bond</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7aee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue 3是易于使用的Vue JavaScript框架的最新版本，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Vue 3和JavaScript创建一个购物车应用程序。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vue CLI创建Vue项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npm install -g @vue/cli</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与NPM或:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="80a4" class="mn lc iq mj b gy mo mp l mq mr">yarn global add @vue/cli</span></pre><p id="82da" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用纱线。</p><p id="a246" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="02d9" class="mn lc iq mj b gy mo mp l mq mr">vue create shopping-cart</span></pre><p id="1553" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并选择所有默认选项来创建项目。</p><p id="ef5e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还需要Vue路由器包，让我们导航到应用程序中的不同页面。</p><p id="a8f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="0f7e" class="mn lc iq mj b gy mo mp l mq mr">npm i vue-router@next</span></pre><h1 id="fac3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建购物车</h1><p id="0612" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">创建购物车的第一步是创建视图文件。</p><p id="d20c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe ms mt mu mj b">src</code>文件夹中创建<code class="fe ms mt mu mj b">views</code>文件夹。</p><p id="47a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在里面，我们添加了<code class="fe ms mt mu mj b">Cart.vue</code>和<code class="fe ms mt mu mj b">Store.vue</code>文件来创建我们可以浏览的商店页面。</p><p id="b952" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Cart.vue</code>有购物车页面。</p><p id="40fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在<code class="fe ms mt mu mj b">main.js</code>中，我们通过编写以下内容将Vue路由器添加到我们的应用程序中:</p><p id="314e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">main.js</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="db71" class="mn lc iq mj b gy mo mp l mq mr">import { createApp } from "vue";<br/>import App from "./App.vue";<br/>import Cart from "./views/Cart";<br/>import Store from "./views/Store";<br/>import { createRouter, createWebHashHistory } from "vue-router";</span><span id="514b" class="mn lc iq mj b gy mv mp l mq mr">const routes = [<br/>  { path: "/", component: Store },<br/>  { path: "/cart", component: Cart }<br/>];</span><span id="8b12" class="mn lc iq mj b gy mv mp l mq mr">const router = createRouter({<br/>  history: createWebHashHistory(),<br/>  routes<br/>});</span><span id="f2f8" class="mn lc iq mj b gy mv mp l mq mr">const app = createApp(App);<br/>app.use(router);<br/>app.mount("#app");</span></pre><p id="a753" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们导入之前创建的视图组件文件。</p><p id="0c93" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将它们添加到<code class="fe ms mt mu mj b">routes</code>数组中。</p><p id="38b3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们调用<code class="fe ms mt mu mj b">createRouter</code>来创建路由器对象。</p><p id="730d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加前面在参数对象中创建的<code class="fe ms mt mu mj b">routes</code>对象。</p><p id="545c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">createWebHashHistory</code>让Vue路由器在URL的第一段和其他段之间添加一个<code class="fe ms mt mu mj b">#</code>符号。</p><p id="8e7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe ms mt mu mj b">router</code>调用<code class="fe ms mt mu mj b">app.use</code>来添加路由器。</p><p id="ba9e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了创建一个简单的商店页面，我们进入<code class="fe ms mt mu mj b">Store.vue</code>并编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="8b20" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;h1&gt;Store&lt;/h1&gt;<br/>    &lt;div v-for="item of items" :key="item.id"&gt;<br/>      &lt;p&gt;{{ item.name }}&lt;/p&gt;<br/>      &lt;img :src="item.imageUrl" /&gt;<br/>      &lt;button @click="removeFromCart(item.id)" v-if="isInCart(item.id)"&gt;<br/>        remove from cart<br/>      &lt;/button&gt;<br/>      &lt;button @click="addToCart(item.id)" v-else&gt;add to cart&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    &lt;button @click="$router.push('/cart')"&gt;check out&lt;/button&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2447" class="mn lc iq mj b gy mv mp l mq mr">&lt;script&gt;<br/>const items = Object.freeze([<br/>  {<br/>    id: 1,<br/>    imageUrl: "apple.jpg",<br/>    name: "grape",<br/>  },<br/>  {<br/>    id: 2,<br/>    imageUrl: "orange.jpg",<br/>    name: "orange",<br/>  },<br/>  {<br/>    id: 3,<br/>    imageUrl: "<a class="ae kc" href="https://sites.google.com/site/knowyourfruit/_/rsrc/1284636557816/know-your-apples/Apple%2002.jpg?height=362&amp;width=400" rel="noopener ugc nofollow" target="_blank">g</a>rape.jpg",<br/>    name: "apple",<br/>  },<br/>]);</span><span id="86d4" class="mn lc iq mj b gy mv mp l mq mr">export default {<br/>  name: "Store",<br/>  data() {<br/>    return {<br/>      items,<br/>      cart: [],<br/>    };<br/>  },<br/>  methods: {<br/>    isInCart(itemId) {<br/>      if (!localStorage.getItem("cart")) {<br/>        localStorage.setItem("cart", JSON.stringify([]));<br/>      }<br/>      const cartItem = this.cart.find(({ id }) =&gt; id === itemId);<br/>      return Boolean(cartItem);<br/>    },<br/>    addToCart(itemId) {<br/>      const item = this.items.find(({ id }) =&gt; id === itemId);<br/>      if (!localStorage.getItem("cart")) {<br/>        localStorage.setItem("cart", JSON.stringify([]));<br/>      }<br/>      const cartItems = JSON.parse(localStorage.getItem("cart"));<br/>      cartItems.push(item);<br/>      localStorage.setItem("cart", JSON.stringify(cartItems));<br/>      this.cart = JSON.parse(localStorage.getItem("cart"));<br/>    },<br/>    removeFromCart(itemId) {<br/>      const cartItems = JSON.parse(localStorage.getItem("cart"));<br/>      const index = cartItems.findIndex(({ id }) =&gt; id === itemId);<br/>      cartItems.splice(index, 1);<br/>      localStorage.setItem("cart", JSON.stringify(cartItems));<br/>      this.cart = JSON.parse(localStorage.getItem("cart"));<br/>    },<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="a4d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe ms mt mu mj b">v-for</code>渲染商店物品。</p><p id="75cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果商品已经添加到购物车顶部，我们将显示“从购物车中移除”按钮。</p><p id="995d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则我们会显示“添加到购物车”按钮。</p><p id="8d3c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">检查是通过<code class="fe ms mt mu mj b">isInCart</code>方法完成的，该方法从<code class="fe ms mt mu mj b">this.cart</code>反应属性中获取购物车商品，并检查<code class="fe ms mt mu mj b">find</code>是否返回给定<code class="fe ms mt mu mj b">itemId</code>的任何东西。</p><p id="1694" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将条目添加到本地存储的<code class="fe ms mt mu mj b">cart</code>条目中，如果条目不存在，我们就创建一个数组。</p><p id="5fa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">之后，我们用本地存储器中的最新值更新<code class="fe ms mt mu mj b">this.cart</code>反应属性。</p><p id="30ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">removeFromCart</code>用<code class="fe ms mt mu mj b">findIndex</code>从<code class="fe ms mt mu mj b">itemId</code>本地存储的<code class="fe ms mt mu mj b">cart</code>项中查找索引。</p><p id="bb6d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">splice</code>通过<code class="fe ms mt mu mj b">index</code>移除项目。</p><p id="06f0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe ms mt mu mj b">setItem</code>用购物车中的最新商品更新购物车。</p><p id="7364" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用本地存储的最新值更新<code class="fe ms mt mu mj b">this.cart</code>。</p><p id="0ff8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">items</code>拥有商店的物品。</p><p id="ff80" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">结帐按钮用<code class="fe ms mt mu mj b">'/cart'</code>调用<code class="fe ms mt mu mj b">$router.push</code>进入购物车页面。</p><p id="f613" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了给购物车页面添加内容，我们在<code class="fe ms mt mu mj b">Cart.vue</code>中编写了以下内容:</p><p id="c4c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">Cart.vue</code></p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="5a42" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;h1&gt;Cart&lt;/h1&gt;<br/>    &lt;div v-for="(c, index) of cart" :key="c.id"&gt;<br/>      &lt;p&gt;{{ c.name }}&lt;/p&gt;<br/>      &lt;img :src="c.imageUrl" /&gt;<br/>      &lt;button @click="removeFromCart(index)"&gt;remove from cart&lt;/button&gt;<br/>    &lt;/div&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="ffd7" class="mn lc iq mj b gy mv mp l mq mr">&lt;script&gt;<br/>export default {<br/>  name: "Cart",<br/>  data() {<br/>    return {<br/>      cart: [],<br/>    };<br/>  },<br/>  methods: {<br/>    removeFromCart(itemId) {<br/>      const cartItems = JSON.parse(localStorage.getItem("cart"));<br/>      const index = cartItems.findIndex(({ id }) =&gt; id === itemId);<br/>      cartItems.splice(index, 1);<br/>      localStorage.setItem("cart", JSON.stringify(cartItems));<br/>      this.cart = JSON.parse(localStorage.getItem("cart"));<br/>    },<br/>    getCart() {<br/>      if (!localStorage.getItem("cart")) {<br/>        localStorage.setItem("cart", JSON.stringify([]));<br/>      }<br/>      this.cart = JSON.parse(localStorage.getItem("cart"));<br/>    },<br/>  },<br/>  beforeMount() {<br/>    this.getCart();<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="ba5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有与<code class="fe ms mt mu mj b">Store.vue</code>相同的<code class="fe ms mt mu mj b">remvoeFromCart</code>方法。</p><p id="8cac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe ms mt mu mj b">getCart</code>从本地存储中获取<code class="fe ms mt mu mj b">cart</code>项，然后将返回值设置为<code class="fe ms mt mu mj b">this.cart</code>反应属性的值。</p><p id="f861" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在模板中呈现带有<code class="fe ms mt mu mj b">v-for</code>的<code class="fe ms mt mu mj b">this.cart</code>条目。</p><p id="601b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有从购物车中移除按钮来移除带有<code class="fe ms mt mu mj b">removeFromCart</code>的商品。</p><p id="eafd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，在<code class="fe ms mt mu mj b">App.vue</code>中，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4d2d" class="mn lc iq mj b gy mo mp l mq mr">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;router-view&gt;&lt;/router-view&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2cb7" class="mn lc iq mj b gy mv mp l mq mr">&lt;script&gt;<br/>export default {<br/>  name: "App",<br/>};<br/>&lt;/script&gt;</span><span id="5bf6" class="mn lc iq mj b gy mv mp l mq mr">&lt;style&gt;<br/>img {<br/>  width: 200px;<br/>  height: 200px;<br/>}<br/>&lt;/style&gt;</span></pre><p id="2fc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加<code class="fe ms mt mu mj b">router-view</code>以便我们可以看到Vue路由器渲染的路线。</p><p id="82a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还使用<code class="fe ms mt mu mj b">style</code>标签将图像缩小到200像素乘以200像素。</p><h1 id="126f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cb22" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Vue 3和JavaScript轻松创建一个简单的购物车。</p><p id="297c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">查看更多内容请点击</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
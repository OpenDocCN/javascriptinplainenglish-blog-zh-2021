<html>
<head>
<title>7 Practical Tips to Write a Secure JavaScript Web Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写安全JavaScript Web应用程序的7个实用技巧</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/7-practical-tips-to-write-a-secure-javascript-web-application-4424fa1facec?source=collection_archive---------8-----------------------#2021-06-08">https://javascript.plainenglish.io/7-practical-tips-to-write-a-secure-javascript-web-application-4424fa1facec?source=collection_archive---------8-----------------------#2021-06-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="1003" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你想让自己领先于攻击者吗？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e61d04d0eb4828b6417e45845f2e707a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YtCNZHTUDsRDeAJR"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ikukevk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="aa77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与几乎所有编程语言一样，JavaScript并不缺乏安全漏洞。通过滥用JavaScript漏洞，人们可以操纵数据、修改和窃取数据、重定向浏览器会话等。</p><p id="4b28" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然JavaScript通常被认为是一个客户端应用程序，但是JavaScript安全性问题也会给服务器端带来挑战。了解常见的JavaScript安全漏洞是防范这些漏洞的最佳方法。一个好的防御是意识到威胁并实施适当的控制以最小化风险。</p><p id="d59c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将告诉你编写一个安全的JavaScript web应用程序的七个实践。我相信当你一个一个地阅读它们时，会对你有所帮助。</p><h1 id="a927" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">1.验证用户输入以限制SQL注入和XSS攻击</h1><p id="b601" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">顾名思义，当黑客能够在您的数据库上执行SQL语句时，就会发生SQL注入攻击。如果来自前端的输入没有被净化，这是可能的。换句话说，如果Node.js后端从用户提供的数据中提取参数，并将其直接合并到SQL语句中。</p><p id="a965" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有几种方法可以避免这种情况，但基本思想是不要盲目地从前端向数据库查询赋值。</p><p id="9cec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相反，您必须验证或转义用户提供的值。如何做取决于您正在使用的数据库以及您喜欢如何做。一些JavaScript数据库库自动执行转义。然而，也可以使用更通用的文库，如Sequelize或Knex。</p><h1 id="853e" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">2.实施强身份验证</h1><p id="539b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">第二个最常见的漏洞是被破解的、脆弱的或不完整的身份验证机制。这当然是因为许多开发人员认为认证是“我们拥有它，所以我们是安全的。”但在现实中，弱的或不一致的身份验证很容易规避。一种选择是使用预先存在的认证系统，如Auth或Okta。</p><p id="c1f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想使用原生JavaScript身份验证解决方案，有一些事情需要记住。创建密码时，避免使用Node.js中的内置加密库，而是使用Bcrypt或Scrypt。</p><p id="c418" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">限制失败的登录尝试，如果用户名或密码不正确，不通知用户。而是返回一般的“不正确的凭据”错误。此外，还需要适当的会话管理策略。</p><p id="d508" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，确保使用双因素身份验证。如果操作正确，它可以显著提高应用程序的安全性。您可以使用node-2fa或speakeasy之类的模块来实现这一点。<a class="mp mq ep" href="https://medium.com/u/b7934e106470?source=post_page-----4424fa1facec--------------------------------" rel="noopener" target="_blank"> Rishikesh Dhokare </a>分享了一份关于使用Node.js实现双因素认证的指南。请查看:</p><div class="mr ms gp gr mt mu"><a href="https://rishikesh-dhokare.medium.com/implementing-2-factor-authentication-2fa-a2a6a8dd48d8" rel="noopener follow" target="_blank"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd ir gy z fp mz fr fs na fu fw ip bi translated">实施双因素身份认证(2FA)</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">用Node.js和Authy实现2FA</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">rishikesh-dhokare.medium.com</p></div></div><div class="nd l"><div class="ne l nf ng nh nd ni kp mu"/></div></div></a></div><h1 id="22d0" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">3.避免暴露太多的错误</h1><p id="0871" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">这里有一些事情需要记住。</p><p id="423b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一步是确保用户不知道错误细节，例如通过向客户端返回完整的错误对象。虽然您可以存储不想公开的信息，比如路径、附加库，甚至是秘密，但是您必须对这些信息进行适当的加密、验证和隐藏。</p><p id="6b75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一件要注意的事情是用catch子句包装路由，因为如果请求触发了错误，Javascript将会崩溃。通过创建持久请求签名，我们可以防止攻击者试图使您的应用程序崩溃，并一次又一次地发送相同的恶意请求，从而使您的应用程序不断崩溃。</p><p id="821e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，对于您的JavaScript应用程序，您应该采取一些额外的预防措施。不要把你的JavaScript应用直接放到互联网上。利用一个前端组件，比如云防火墙、负载均衡器，或者使用你已经准备好的Nginx。这使得您可以在DoS攻击到达您的JavaScript应用程序之前就对其进行限制。</p><h1 id="77ef" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">4.运行自动漏洞扫描</h1><p id="39b0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">另一方面，JavaScript生态系统由许多可以安装的库和模块组成。在您的项目中包含大量这样的元素是非常常见的。这带来了安全问题，因为你不可能知道别人写的代码是安全的。您应该定期执行自动漏洞扫描来帮助解决这一问题。它们帮助您定位存在已知安全缺陷的依赖项。</p><h1 id="0f71" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">5.避免数据泄露</h1><p id="6b74" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">你不记得我们之前劝过你不要相信前端了吗？此外，您不应该信任来自前端的数据，也不应该信任您发送给它的内容。在将数据发送到前端之前，不必过滤特定对象的所有数据，可以将所有数据发送到前端，然后应用过滤器。然而，对于黑客来说，获取从后端传输的隐藏数据的挑战是非常低的。</p><p id="28e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">假设您想要显示已注册某个事件的用户列表。您运行一个SQL查询来获取该特定事件的所有用户，并将信息发送到前端，在前端对信息进行过滤，只显示名字和姓氏。然而，您不想显示的所有数据，如用户的出生日期、联系信息、电子邮件地址，都可以通过web developer console轻松访问。结果导致数据泄露。</p><p id="1035" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你将如何解决这个问题？不要发送除所需数据之外的任何内容。您只需要名字和姓氏，所以只从数据库中检索这些名字。</p><h1 id="0456" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">6.设置日志记录和监控</h1><p id="af2b" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">尽管日志记录和监控对安全性很重要，但您可能认为它们实际上并不相关。然而，这不是真的。</p><p id="ba79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">毫无疑问，总体目标是从一开始就创建安全的系统，但要真正实现这一目标，必须是一个持续的过程。要启用这些功能，您将需要日志记录和监控。有些人希望看到您的应用程序不可用，这样他们就可以修复导致这种情况发生的漏洞。但是，另一方面，一些黑客会选择长时间不被发现。</p><p id="efeb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有时，当出现问题时，监控日志和指标将帮助您发现是否有问题。如果您只使用基本的日志记录，您将无法收集足够的信息来了解看起来奇怪的请求是来自您自己的应用程序、第三方API还是来自黑客。</p><h1 id="e5d1" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">7.使用安全棉绒</h1><p id="9ea0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我们之前讨论了自动漏洞扫描，但是您可以在编写代码时更进一步，寻找常见的安全漏洞，而不是只检查代码何时编写。要扩张，怎么扩张？为了提高代码质量，应该使用linter插件，比如eslint-plugin-security。每当您使用可能使您的站点暴露于攻击的代码实践时，安全提示会提醒您。</p><p id="0180" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望你喜欢这篇文章！</p><p id="3435" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">加入我，了解更多关于编程的有用见解。T3】</p></div><div class="ab cl nk nl hu nm" role="separator"><span class="nn bw bk no np nq"/><span class="nn bw bk no np nq"/><span class="nn bw bk no np"/></div><div class="ij ik il im in"><h2 id="0bde" class="nr lt iq bd lu ns nt dn ly nu nv dp mc lf nw nx me lj ny nz mg ln oa ob mi oc bi translated">进一步阅读</h2><div class="mr ms gp gr mt mu"><a rel="noopener  ugc nofollow" target="_blank" href="/11-javascript-concepts-every-web-developer-should-know-to-take-their-skills-to-the-next-level-37ef6693111a"><div class="mv ab fo"><div class="mw ab mx cl cj my"><h2 class="bd ir gy z fp mz fr fs na fu fw ip bi translated">每个Web开发人员都应该知道的11个JavaScript概念，让他们的技能更上一层楼</h2><div class="nb l"><h3 class="bd b gy z fp mz fr fs na fu fw dk translated">不了解这些概念，就无法掌握JavaScript。</h3></div><div class="nc l"><p class="bd b dl z fp mz fr fs na fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nd l"><div class="od l nf ng nh nd ni kp mu"/></div></div></a></div><p id="f6ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nj">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nj">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>What are Mixins, and how do you use them in TypeScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是Mixins，如何在TypeScript中使用它们？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-are-mixins-and-how-do-you-use-them-in-typescript-94e529ecb417?source=collection_archive---------5-----------------------#2021-01-23">https://javascript.plainenglish.io/what-are-mixins-and-how-do-you-use-them-in-typescript-94e529ecb417?source=collection_archive---------5-----------------------#2021-01-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5a28" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">理解混音:从冰淇淋摊到打字稿</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/8a3d13685a7e05704b79cf1a2d96b7c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*16snOY_MfUZvZMLEK38bDA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image by <a class="ae ks" href="https://pixabay.com/users/mintchipdesigns-522107/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=504326" rel="noopener ugc nofollow" target="_blank">Anita S</a>. from <a class="ae ks" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=504326" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="3bda" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当史蒂夫·赫瑞尔开设他的第一家冰淇淋店时，他没有预先混合口味，而是让他的员工根据顾客的要求将新鲜制作的冰淇淋与糖果或其他糖果混合。</p><p id="dca3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那些糖果添加物被称为<strong class="kv io">混合食品</strong>。</p><p id="24f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">史蒂夫可能只是想击败竞争对手，他不知道他的<strong class="kv io"> mix-in </strong>会在多年后进入计算机编程语言，尽管不是字面上的——我们还没有用代码变出冰淇淋。我们，你们这些人对我隐瞒了什么吗？</p><p id="4ed4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当一家现已倒闭的计算机制造公司Symbolics Inc .在一种名为<strong class="kv io"> Flavors </strong>的早期面向对象编程语言中引入术语“Mixin”时，这个名称进入了计算机科学，这个名称的灵感来自马萨诸塞州萨默维尔的史蒂夫冰淇淋店。</p><p id="c3a9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我打赌我们都能猜到Symbolics公司的程序员在哪里度过他们的夜晚。</p><h1 id="7d2e" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">编程语言中的混合</h1><p id="d079" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">正如Steve Herell的Mixins是对main事物的添加，面向对象编程语言中的mix in也是对一个类的“添加”。混合允许一个类使用另一个类中定义的“功能”。</p><p id="14f6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你了解类继承，你可能会相信我们已经这样做了。让我们从官方的TypeScript文档中取这个例子:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="dec0" class="mr lq in mn b gy ms mt l mu mv">class Animal {<br/> move(distanceInMeters: number = 0) {<br/> console.log(`Animal moved ${distanceInMeters}m.`);<br/> }<br/>}</span><span id="bda9" class="mr lq in mn b gy mw mt l mu mv">class Dog extends Animal {<br/> bark() {<br/> console.log(“Woof! Woof!”);<br/> }<br/>}</span><span id="949d" class="mr lq in mn b gy mw mt l mu mv">const dog = new Dog();<br/>dog.bark();<br/>dog.move(10);<br/>dog.bark();</span></pre><p id="5411" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">尽管<code class="fe mx my mz mn b">Dog</code>类没有<code class="fe mx my mz mn b">move</code>方法，但是因为它<code class="fe mx my mz mn b">extends</code>了<code class="fe mx my mz mn b">Animal</code>类，也就是说，它继承了<code class="fe mx my mz mn b">Animal</code>类的属性和方法，我们可以安全地编写<code class="fe mx my mz mn b">dog.move(10)</code>。我们说<code class="fe mx my mz mn b">Dog</code>是派生类，而<code class="fe mx my mz mn b">Animal</code>是父类。</p><p id="2122" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">假设我们有另一个类，“凡人”，我们希望<code class="fe mx my mz mn b">Dog</code>类也有它的功能(狗也是凡人，对吗？).</p><p id="066c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可能会尝试这样做:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="054e" class="mr lq in mn b gy ms mt l mu mv"><br/>class Dog extends Animal, Mortal {<br/>…<br/>}</span></pre><p id="01e7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我们这样做，TypeScript会尖叫，TypeScript不支持多重继承。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi na"><img src="../Images/6f5532fa94a1b6dee0367496a119728e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kg8U7fj4l5GJ5oL4"/></div></div></figure><p id="a443" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是为什么我们需要混音。</p><p id="55f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Mixins允许我们在其他类中使用“基类”中声明的功能，而不必使基类成为那些类的父类。与其说我们从Mixin继承，我们通常说Mixin被“包含”(即混合)到一个类中。</p><p id="5c77" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Mixins不是TypeScript所独有的，它们也是其他编程语言中可用的一种软件开发风格，并且它们被“包含”到类中的方式(通常)在这些语言中是不同的。</p><h1 id="de7d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">如何在TypeScript中使用Mixins</h1><p id="b6c5" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">TypeScript中的Mixins实际上不是我们想要“混合”的类，而是接受一个类，然后将另一个类的功能“混合”到其中的工厂(函数)。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nb"><img src="../Images/920ccf5aaa580ef739a4d0023c6834ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*F--34Dtsk2S9CXqZ"/></div></div></figure><p id="42cf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Mixins可以作为创建“子类”的工厂在TypeScript中实现。代替<code class="fe mx my mz mn b">class Dog</code>扩展<code class="fe mx my mz mn b">class Animal</code>，我们编写一个函数(<strong class="kv io">mixin</strong>)，它接受<code class="fe mx my mz mn b">Dog</code>类作为输入，并返回一个添加了<code class="fe mx my mz mn b">Animal</code>功能的新类(即“混合的”)。因为缺少更好更好的名字，我把这个类叫做<code class="fe mx my mz mn b">Animalled</code>:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nc"><img src="../Images/338443ef23e69a50dd90a1712572b955.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNteio6Bb3eAb4dcx8NC4w.png"/></div></div></figure><p id="4f95" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面的代码片段实现了<code class="fe mx my mz mn b">Animalled</code> mixin，我们可以用它来给任何类添加‘Animal’功能，在第15行我们把它添加到dog类。</p><p id="4e48" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您仔细观察，您会注意到第2行中的类型错误，在那里我将<code class="fe mx my mz mn b">Base</code>声明为函数参数。因为我们扩展了<code class="fe mx my mz mn b">Base</code>参数，TypeScript抱怨我们应该给参数一个合适的类型，因为如果我们不指定类型，它默认为<code class="fe mx my mz mn b">any</code>。</p><p id="4c56" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以，我们需要给<code class="fe mx my mz mn b">Base</code>一个类型，表明它可以作为一个类使用，我们需要一个<em class="nd">构造函数类型</em>。</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="3753" class="mr lq in mn b gy ms mt l mu mv">type Constructor&lt;T = {}&gt; = new (…args: any[]) =&gt; T;</span><span id="d627" class="mr lq in mn b gy mw mt l mu mv">function Animalled&lt;TBase extends Constructor&gt;(Base: TBase) {<br/> return class extends Base {<br/>  move(distanceInMeters: number = 0) {<br/>    console.log(`Animal moved ${distanceInMeters}m.`);<br/>   }<br/> }<br/>}</span><span id="0be5" class="mr lq in mn b gy mw mt l mu mv">class Dog {<br/> bark() {<br/>   console.log(“Woof! Woof!”);<br/> }<br/>}<br/>const AnimalledDog = Animalled(Dog);</span><span id="9146" class="mr lq in mn b gy mw mt l mu mv">let dog = new AnimalledDog();<br/>dog.bark(); // “Woof! Woof!” <br/>dog.move(10); // “Animal moved 10m.”</span></pre><p id="a4f5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">类型<code class="fe mx my mz mn b">Constructor&lt;T&gt;</code>被称为<strong class="kv io">构造签名</strong>。它将类型描述为可用于构造泛型类型<code class="fe mx my mz mn b">T</code>的对象，T默认为{}。</p><p id="591f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mx my mz mn b">new (...args: any[])</code>告诉我们，这种类型的构造函数接受任意数量的任何类型的参数。注意，该类型的名称可以是任何名称，但<code class="fe mx my mz mn b">Constructor</code>是最合适的名称。</p><p id="94ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们现在可以创建另一个mixin来添加<code class="fe mx my mz mn b">Mortal</code>功能:</p><pre class="kd ke kf kg gt mm mn mo mp aw mq bi"><span id="0cf7" class="mr lq in mn b gy ms mt l mu mv"><br/>type Constructor&lt;T = {}&gt; = new (…args: any[]) =&gt; T;</span><span id="bba3" class="mr lq in mn b gy mw mt l mu mv">function Animalled&lt;TBase extends Constructor&gt;(Base: TBase) {<br/>  return class extends Base {<br/>   move(distanceInMeters: number = 0) {<br/>       console.log(`Animal moved ${distanceInMeters}m.`);<br/>   }<br/>  }<br/>}</span><span id="266e" class="mr lq in mn b gy mw mt l mu mv">function Mortalled&lt;TBase extends Constructor&gt;(Base: TBase) {<br/> return class extends Base {<br/>    confess() {<br/>     console.log(“I seek immortality!”);<br/>    }<br/>  }<br/>}</span><span id="b378" class="mr lq in mn b gy mw mt l mu mv">class Dog {<br/>  bark() {<br/>   console.log(“Woof! Woof!”);<br/>  }<br/>}<br/>const AnimalledDog = Animalled(Dog);<br/>const MortalledAndAnimalledDog = Mortalled(AnimalledDog);</span><span id="c0c7" class="mr lq in mn b gy mw mt l mu mv">let dog = new MortalledAndAnimalledDog();<br/>dog.bark(); // “Woof! Woof!” <br/>dog.move(10); // “Animal moved 10m.” <br/>dog.confess(); // “I seek immortality!”</span></pre><p id="06db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">太棒了。</p><p id="3e17" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以继续下去，通过混合更多的职业给这个职业更多的超能力。</p><h1 id="bfca" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">摘要</h1><p id="9076" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">我们已经知道:<em class="nd">mixin是一个函数，它接受一个构造函数，声明一个扩展这个构造函数的类，向这个新类添加成员，然后返回这个类本身。</em></p><p id="f016" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有很多方法可以使用mixins，这篇文章已经太长了，无法触及其中的一些。不过，我会在下面提供一些我觉得有用的文章的链接，请务必查看。</p><p id="31b0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">- <a class="ae ks" href="https://medium.com/javascript-in-plain-english/harnessing-the-power-of-mixins-in-angular-f2faa432add2" rel="noopener">利用Mixins在Angular中的能力</a></p><p id="58bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">-<a class="ae ks" href="https://www.bryntum.com/blog/the-mixin-pattern-in-typescript-all-you-need-to-know/" rel="noopener ugc nofollow" target="_blank">TypeScript中的mixin模式—您需要知道的一切</a></p><p id="70a1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">- <a class="ae ks" href="https://justinfagnani.com/2015/12/21/real-mixins-with-javascript-classes/" rel="noopener ugc nofollow" target="_blank">“真正的”混合JavaScript类</a></p><p id="00d3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">——<a class="ae ks" href="https://en.wikipedia.org/wiki/Mixin#:~:text=In%20object%2Doriented%20programming%20languages,class%20of%20those%20other%20classes." rel="noopener ugc nofollow" target="_blank">米欣——维基百科</a></p><p id="ad96" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">快乐编码。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><p id="67e9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nd">最初发布于</em><a class="ae ks" href="https://solathecoder.hashnode.dev/understanding-mixins-from-ice-cream-stands-to-typescript-ckk9t3b2100b4vas120xf24nw" rel="noopener ugc nofollow" target="_blank"><em class="nd">https://solathecoder . hashnode . dev</em></a><em class="nd">。</em></p></div></div>    
</body>
</html>
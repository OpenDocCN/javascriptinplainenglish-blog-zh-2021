<html>
<head>
<title>Docker Selenium Grid Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker Selenium网格设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/docker-selenium-grid-setup-7e66d60a926a?source=collection_archive---------10-----------------------#2021-07-15">https://javascript.plainenglish.io/docker-selenium-grid-setup-7e66d60a926a?source=collection_archive---------10-----------------------#2021-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/80e60a87decbe0d915408a9b1691b494.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HXRskxnmy_r5VKN1M0Esvg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk"><a class="ae jz" href="https://youtu.be/GxktKTtnSfk" rel="noopener ugc nofollow" target="_blank">https://youtu.be/GxktKTtnSfk</a></figcaption></figure><p id="da09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本教程中，我们将介绍如何使用Docker来设置Selenium Grid，以及为什么我们应该使用Selenium Grid。我们还将增加Docker中Selenium网格的最大实例数和最大会话数，以便并行运行测试。</p><h1 id="223f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">为什么我们需要硒栅？</h1><p id="481b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">所以在我们用Docker设置Selenium Grid之前，我们先来了解一下为什么我们甚至首先需要Selenium Grid？</p><ul class=""><li id="9d48" class="mb mc in kc b kd ke kh ki kl md kp me kt mf kx mg mh mi mj bi translated">多个浏览器/设备:网格让我们在多个浏览器/设备上运行测试变得更加容易</li><li id="c434" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated"><strong class="kc io">测试执行时间:</strong>您可以通过在网格中并行运行测试来减少总的测试执行时间</li><li id="e1fb" class="mb mc in kc b kd mk kh ml kl mm kp mn kt mo kx mg mh mi mj bi translated"><strong class="kc io">基础设施:</strong>在网格的帮助下，建立基础设施在不同操作系统的多种浏览器/设备上运行测试也是可能的</li></ul><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/a844363fe80e39c0e2240f63aa4acd74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oBGnOy5-QXeic1Z1"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium Grid</figcaption></figure></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><h1 id="d0d0" class="ky kz in bd la lb nb ld le lf nc lh li lj nd ll lm ln ne lp lq lr nf lt lu lv bi translated">用Docker设置Selenium网格</h1><p id="c922" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">我们需要运行以下步骤来使用Docker设置Selenium网格:</p><p id="9cb2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">建立一个网络(网格)在图像之间进行通信</strong></p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="d480" class="nl kz in nh b gy nm nn l no np">docker network create grid</span></pre><p id="f6c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">运行selenium/hub docker镜像，用于运行Selenium Hub </strong></p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="b265" class="nl kz in nh b gy nm nn l no np">docker run -d -p 4444:4444 --net grid --name selenium-hub selenium/hub:3.141.59–20210422</span></pre><p id="97d7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注意</strong>:网络名称(网格)应该与您在创建网络时提供的名称相同。</p><p id="2309" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">使用网格网络和selenium/hub主机运行Chrome和Firefox映像:</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="04c6" class="nl kz in nh b gy nm nn l no np">docker run -d --net grid -e HUB_HOST=selenium-hub -v /dev/shm:/dev/shm selenium/node-chrome-debug:3.141.59–20210422</span><span id="b797" class="nl kz in nh b gy nq nn l no np">docker run -d --net grid -e HUB_HOST=selenium-hub -v /dev/shm:/dev/shm selenium/node-firefox-debug:3.141.59–20210422</span></pre><p id="b0c2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注意:</strong>网络名称(网格)应该与您在创建网络时提供的名称相同，HUB_HOST名称(selenium-hub)应该与您在运行selenium/hub docker映像时提供的名称相同。</p><p id="fcaf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，前往端口4444，您应该看到Chrome和Firefox的网格设置:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/76dffd1bfcd0916f6eb5f03d6c00668e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HGDnnhIp2HYjUG5K"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium Grid with Chrome &amp; Firefox</figcaption></figure></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><h1 id="d2e8" class="ky kz in bd la lb nb ld le lf nc lh li lj nd ll lm ln ne lp lq lr nf lt lu lv bi translated">增加网格的最大实例数和最大会话数</h1><p id="fcab" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">到目前为止，我们只有Chrome和Firefox的一个实例，但是，如果你需要一起运行多个测试，你将需要更多的实例。在为Chrome和Firefox运行docker容器时，您可以通过添加参数轻松做到这一点。</p><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="98dd" class="nl kz in nh b gy nm nn l no np">docker run -d --net grid -e HUB_HOST=selenium-hub -e NODE_MAX_INSTANCES=3 -e NODE_MAX_SESSION=3  -v /dev/shm:/dev/shm selenium/node-chrome-debug:3.141.59–20210422</span></pre><p id="b879" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以传递NODE_MAX_INSTANCES和NODE_MAX_SESSION环境变量来添加浏览器的多个实例。</p><p id="5f08" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> NODE_MAX_INSTANCES: </strong>同一版本浏览器的实例数。</p><p id="fb70" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> NODE_MAX_SESSION: </strong>可以并行运行的浏览器数量(任何版本)。</p><p id="6df6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦你这样做了，你将会看到如下所示:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ns"><img src="../Images/f0f6e2f86e4d296d218bedcd12c2a2c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FR2uPcnCgrzRjN8NFWJUMA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Selenium Grid with max instances &amp; max sessions</figcaption></figure></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><p id="5235" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">观看下面的视频，了解如何使用Docker设置Selenium Grid:</strong></p><figure class="mq mr ms mt gt jo"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="cb96" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一篇教程中，我将向您展示如何使用Docker compose设置Selenium Grid。</p><p id="d732" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢阅读。</p><p id="8f82" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nv">更多内容请看</em><a class="ae jz" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nv">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
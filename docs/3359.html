<html>
<head>
<title>Building a CRUD App in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中构建CRUD应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-crud-app-in-react-js-96e884fe87f5?source=collection_archive---------9-----------------------#2021-07-08">https://javascript.plainenglish.io/building-a-crud-app-in-react-js-96e884fe87f5?source=collection_archive---------9-----------------------#2021-07-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4286984da1fb68b437c7a82fbeeb4695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mnzs7RCJE2cLnQOO"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AltumCode</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b3be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本教程中，我将带您完成使用React构建CRUD应用程序的过程。</p><p id="bc78" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将使用一个非常简单的应用程序，我将其命名为<em class="ky">hicking Social</em>，人们可以在这里发布远足的照片，以及远足的名称和距离。人们还可以给远足添加“赞”，最后，出于本教程的目的，我们还将实现一个删除按钮来演示CRUD中的D(删除)(创建、读取、更新、删除)。</p><p id="30e7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这篇博客假设读者了解JavaScript和React基础知识，包括获取数据、使用有状态变量、事件和钩子。我们将以完整的功能组件结构开始本教程。如果您希望熟悉并从第二次提交开始跟进，请参考<a class="ae jz" href="https://github.com/charcodes24/hiking-social" rel="noopener ugc nofollow" target="_blank">回购</a>。</p><h1 id="126a" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第一步:获取</h1><p id="24c8" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们的应用程序的组件结构非常简单:App是Header、NewHikeForm和HikesContainer的父类。HikesContainer是HikeItem的父级。由于NewHikeForm和HikesContainer是兄弟，并且需要访问我们最初获取的数据，因此在App中使用有状态变量来保存这些数据是最有意义的。</p><p id="69ac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了在打开我们的应用程序时获取和显示我们的数据，我们将使用React钩子，UseEffect。在第二个承诺中，我们将设置有状态变量来保存数据。一旦我们的有状态变量保存了数据，这是一个对象数组，我们将把它传递给需要访问这些数据的子组件。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div class="gh gi mc"><img src="../Images/7d16b652a19bf486174702c6fbd1d6fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*N8J-UlrpyAjct2vRZjNcYw.png"/></div></figure><h1 id="dd2c" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第二步:获取(POST)</h1><p id="0264" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">在我们的应用程序中添加一个徒步旅行的功能将会处理CRUD中的创建部分。为了完成这项任务，我们首先必须创建一个受控的表单，在其中我们可以跟踪我们想要发送到后端数据库的数据。通过将事件侦听器onChange添加到表单输入字段，并将引用传递给一个函数，该函数将有状态变量formData的值设置为等于您的输入，可以创建一个受控表单。</p><div class="md me mf mg gt ab cb"><figure class="mh jo mi mj mk ml mm paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><img src="../Images/1b7e518269df9bee316052e2b5ef7538.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/1*XPVmPDiV7w9BwerS6HShZQ.png"/></div></figure><figure class="mh jo mn mj mk ml mm paragraph-image"><img src="../Images/9c9f5c2c0daa70787b6f05e7ddbeb1ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:980/format:webp/1*0an4-EeSS2SE77jcCsttmQ.png"/></figure></div><p id="06ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦我们的受控表单成功地捕获了输入字段中的文本，我们需要创建一个函数，它将获取表单数据并将其作为一个新的hikes添加到hikes数组的末尾<strong class="kc io"> </strong>。因为这个函数需要访问我们的hikes数组，该数组保存在我们的父组件App中，所以我们将在App中编写这个函数，并将其作为一个道具传递给我们的NewHikeForm组件。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/07ddb95698a152c5cf0a32e484f80f39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CoX9olW9Hp9A-Ufn5KyMg.png"/></div></div></figure><p id="d48c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个函数将接受一个newHike参数，一旦在我们的NewHikeForm组件中调用它，它将被设置为等于我们的表单数据。然后，我们将使用spread操作符将hikes数组设置为等于“mostUpdatedHikes”数组，并在末尾添加newHike。我们现在准备张贴！</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/fec66e360f80cd3ce95f604d887d104d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMO4eLXBdVLl89042dMNWw.png"/></div></div></figure><p id="6f1c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们在NewHikeForm中提交表单时，我们的POST将发生，因此我们将在该组件中创建函数handleSubmit()，并在事件侦听器onSubmit中传递对该函数的引用，我们将把该函数添加到我们的<form>标记中。</form></p><p id="5939" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">handleSubmit函数内部是我们的fetch (POST)所在的地方。在我们的第二个承诺中，我们将把我们的数据传递给我们的addNewHike函数，作为NewHike参数。瞧啊。现在，在db.json中hikes数组的末尾有了一个新hike，并且在DOM中显示了一个新hike。您可以通过创建一个等于空form data的变量来重置表单数据，并在添加新远足后将其传递到setFormData中。您必须向输入字段添加值属性，并将这些属性设置为与输入字段对应的formData[key]。</p><h1 id="9f16" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第三步:获取(补丁)</h1><p id="7d51" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">我们现在将添加功能到一个喜欢按钮，这将允许我们添加喜欢远足和持久化这些变化到我们的后端。我们的获取请求将存在于我们的HikeItem组件中，因为我们将喜欢单个徒步旅行并需要访问他们的id。但是，我们必须在我们的应用程序组件中编写我们的addLikes函数，它将访问我们的徒步旅行数据，然后将其作为道具传递给我们的HikesContainer，最后传递给我们的HikeItem，在那里它将被执行。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/73939e8ff0bb27e06cf1ea01b643f4c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RFRBXPUZuPHPkvzspfoZ1w.png"/></div></div></figure><p id="896e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的updatedLikes函数中，我们将把updatedHike作为一个参数传递，这个参数就是我们的fetch返回给我们的数据。在这个函数中，我们将把updatedHike的id与mostUpdatedHikes数组中的每次远足进行比较。如果我们遇到匹配，我们将返回updatedHike，它包含对like计数的更新，否则我们将返回原始Hike。</p><p id="163e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在准备打补丁了！在我们的HikeItem组件中，我们将编写创建一个函数increaseLikes，它将作为对按钮上的事件处理程序onClick的引用被传递。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mr"><img src="../Images/424e2a8350482a075ec6dd1c1e431378.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gw60LzaTEIViAtP6FO970A.png"/></div></div></figure><p id="3998" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个组件中，我们可以访问hike的id，它将被插入到我们的fetch请求的URL中，这样我们就可以准确地知道hike喜欢更新哪个。我们的身体会反映出我们想更新的那部分徒步旅行。在这种情况下，喜欢。</p><p id="4cb3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们接收到的对fetch的响应数据将被传递给我们的updateLikes函数，我们将该函数作为一个属性传递下去。再来一次-瞧！我们现在可以在喜欢与远足对应的按钮时增加对远足的喜欢。</p><h1 id="7520" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">第四步:获取(删除)</h1><p id="f8ec" class="pw-post-body-paragraph ka kb in kc b kd lx kf kg kh ly kj kk kl lz kn ko kp ma kr ks kt mb kv kw kx ig bi translated">对于我们最终的CRUD可交付物，我们将向删除按钮添加功能，这将导致hike从DOM中删除，但也将更改保存到我们的后端数据库中。</p><p id="81b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个最后的函数还需要访问我们在App中的hikes数组，所以我们将再次在App中编写初始函数，并将该函数作为一个道具传递给HikeItem。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/deb7f9837d28b6b26e40092f53f35886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4crSAaDvYiHnqawbRUsvsQ.png"/></div></div></figure><p id="e5e7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的deleteHike函数中，我们可以在HikeItem组件中访问一个参数“id”。我们将在函数中声明一个新变量，并将它设置为hikes数组中id不等于我们作为参数传入的id的每一次hikes。一旦我们剔除了不希望包含在新数组中的远足，我们将在setHikes函数中传递新数组。</p><p id="fa3c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在准备删除！在我们的HikeItem组件中，我们将编写一个名为handleDeleteHike的函数，它将作为对添加到delete按钮的onClick事件处理程序的引用被传递。</p><figure class="md me mf mg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/2235f0f3bdc28f46f1d2e80bab0d57b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TiQjAbkqCNq-JoBB_LTHKQ.png"/></div></div></figure><p id="fc3d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就像我们的补丁获取一样，我们的删除获取也会将id插入到URL的末尾。没有响应或承诺要添加到提取中。相反，我们只是调用我们的deleteHike函数，并将id作为参数传入。</p><p id="c011" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就这样，我们在React.js中创建了一个完整的CRUD应用程序。</p><p id="c5db" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
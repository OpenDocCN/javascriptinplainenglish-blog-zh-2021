<html>
<head>
<title>Angular Observables: A Complete Beginner’s Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度可观测量:初学者完全指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-observables-for-complete-beginners-8dff19b37e97?source=collection_archive---------1-----------------------#2021-12-15">https://javascript.plainenglish.io/angular-observables-for-complete-beginners-8dff19b37e97?source=collection_archive---------1-----------------------#2021-12-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3d66dc3a4e90728371c19b7f40b5f4af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dvba9AwDvvKvsQX1J1hMMw.png"/></div></div></figure><p id="6952" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">大家好！通过这篇文章，我们将试图理解Angular最重要的话题之一，即<strong class="jx io">可观测量</strong>。</p><p id="9636" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了理解这篇文章，我们将使用多个例子。我的方法是尽量少用技术术语，这样你就可以理解可观察到的现象，而不会被其他术语分散注意力。</p><p id="7d2c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">此外，由于我们现在是朋友，我不会让你只是复制粘贴代码。我需要你和我一起编码，以便你可以正确理解这个概念。为此，我将把代码截图放在文本编辑器中，而不是放在文本编辑器中，这样可以迫使你实际编写代码，并从中学习一些东西。这将极大地帮助你，相信我。😊现在我们已经进行了初步的讨论，让我们来看看可以观察到的现象</p><h2 id="e9a5" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">什么是可观测的？</h2><blockquote class="lm ln lo"><p id="782c" class="jv jw lp jx b jy jz ka kb kc kd ke kf lq kh ki kj lr kl km kn ls kp kq kr ks ig bi translated">Observables为在应用程序的不同部分之间传递消息的<strong class="jx io">提供支持。它们经常在Angular中使用，是一种用于事件处理、异步编程和处理多个值的技术。</strong></p><p id="e3ef" class="jv jw lp jx b jy jz ka kb kc kd ke kf lq kh ki kj lr kl km kn ls kp kq kr ks ig bi translated">— <a class="ae lt" href="https://angular.io/guide/observables" rel="noopener ugc nofollow" target="_blank">棱角分明的文档</a></p></blockquote><h2 id="ffbc" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">简单的观察</h2><p id="aba0" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks ig bi translated">传递信息，嗯。那是什么意思？嗯，把可观察的事物想象成时事通讯，其中我们有一个发送者和一个接收者。为每个接收者(订户)创建一份时事通讯(订阅)。让我们借助一个简单的<strong class="jx io">例子</strong>来了解一下。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/90c8158a5c0748c8963079b032447786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*xneAHQnkxMwQPcqXJ0F48w.png"/></div></figure><p id="b36a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们来讨论一下这里发生了什么。</p><ol class=""><li id="a553" class="me mf in jx b jy jz kc kd kg mg kk mh ko mi ks mj mk ml mm bi translated">的<strong class="jx io">是一个<a class="ae lt" href="https://www.learnrxjs.io/" rel="noopener ugc nofollow" target="_blank">rxjs</a>T14】运算符</strong>，它发出一个<strong class="jx io">值流</strong>。将其视为新闻简报订阅提供商。值1、2、3、4、5可以被认为是时事通讯。</li><li id="0ae5" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">将<strong class="jx io"> observable$ </strong>视为简讯订户。注意，我们在这个变量的末尾使用了一个美元符号？在一个可观测的名字后面加上一个<strong class="jx io">美元符号</strong>是一个很好的做法，这样人们第一眼就可以认为它是可观测的。</li><li id="169c" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">为了执行我们已经创建的可观察值&amp;为了开始接收值，我们调用<strong class="jx io">。subscribe() </strong>方法，传递一个观察者。把它当作订阅时事通讯。</li></ol><p id="f9ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果我们去检查浏览器的控制台，我们会得到预期的输出:</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/88933500315db4e958429bd13af35d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*ZXV4MHAMHaqEU1QRz13Wrg.png"/></div></figure><p id="51b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很顺利，对吧？现在，让我们通过使用一个简单的<strong class="jx io"> HTTP </strong>请求来进一步挖掘。</p><h2 id="5a16" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">HTTP请求</h2><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/c45cc3e2ee83e1e42e68fc69f734f6ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JERokuf2W0Rv_jXe0sPz_A.png"/></div></div></figure><p id="faaf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">那么，让我们来看看这里发生了什么。如果您正在跟进，请确保在<strong class="jx io"> app.module.ts </strong>文件中添加<strong class="jx io"> HttpClientModule </strong>，这将使我们能够在组件文件中使用<strong class="jx io"> HttpClient </strong>。</p><p id="b6cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你仔细观察，你会注意到我们已经按照上一个例子的相同方式实现了，比如，我们有-</p><ol class=""><li id="d6ba" class="me mf in jx b jy jz kc kd kg mg kk mh ko mi ks mj mk ml mm bi translated">对公共API的HTTP请求。这个请求返回一个可观察的。(订阅提供商)</li><li id="f976" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">向<strong class="jx io">岗位$ </strong>提供此可观察值的参考。(订户)</li><li id="c7b3" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">使用<strong class="jx io">订阅这个可观察对象。subscribe() </strong>方法。(订阅)</li><li id="08b9" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">然后执行常规的javascript操作，比如映射数组。</li></ol><p id="e6f4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，在浏览器控制台中，您将看到预期的帖子列表。</p><p id="65a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然我们已经对订阅的整体概念有所了解，那么让我们看看我们还可以用<strong class="jx io">订阅</strong>做些什么。</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/538b38f75ae429ba0a014ccbd451a113.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*BTGL929wuSZ0jkb8N3bvrQ.png"/></div></figure><p id="9d44" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，你会注意到我们使用了处理程序从observable接收值。观察对象可以发送三种类型的通知:</p><ul class=""><li id="9d11" class="me mf in jx b jy jz kc kd kg mg kk mh ko mi ks mv mk ml mm bi translated"><strong class="jx io"> next(): </strong>这是每个<strong class="jx io">传递的</strong>值的处理程序。每当我们从observable收到通知(新数据)时，它就会被调用。</li><li id="ee2b" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mv mk ml mm bi translated">这是一个处理任何<strong class="jx io">错误</strong>的处理程序。</li><li id="0f07" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mv mk ml mm bi translated"><strong class="jx io"> complete(): </strong>这是<strong class="jx io">执行完成</strong>的处理程序。它在收到所有通知后被调用。</li></ul><p id="ca34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果我们检查浏览器控制台，我们将看到以下输出-</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/57328b6c9fbe98dbbaf3099add81b22c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1076/format:webp/1*xmwFh1kM27eepx_Sp23sAw.png"/></div></figure><p id="ceee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">似乎很合理，对吧？既然我们已经对<strong class="jx io"> HttpClient </strong>进行了一些操作，让我们与<strong class="jx io">模板</strong> <strong class="jx io">文件</strong> &amp;进行交互，看看我们可以使用什么策略来显示数据。</p><h2 id="2e4e" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">使用。subscribe()方法</h2><figure class="ma mb mc md gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/7a2a71b7eaa64fbd79a27c0c94827f30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tAJ1ubrvCzZFHLvBLMlROQ.png"/></div></div></figure><p id="f980" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们只是将整个结果放入一个变量<strong class="jx io"> posts </strong>中，我们可以在模板文件中使用它。现在，在模板文件中，我们可以像这样循环数据—</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/f0265e310e30433b987b987f2a0157a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:820/format:webp/1*c5CyCRKcBAdi2G3QGRAiNA.png"/></div></figure><p id="453b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用这种方法的好处是，我们可以在实际显示数据之前用我们想要的方式操作数据。然而，对于<strong class="jx io">缺点</strong>——</p><ol class=""><li id="2854" class="me mf in jx b jy jz kc kd kg mg kk mh ko mi ks mj mk ml mm bi translated">我们必须手动管理订阅<strong class="jx io"/>。</li><li id="72a6" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">增加了<strong class="jx io">组件</strong>侧<strong class="jx io">的复杂性</strong>，这进一步导致了<strong class="jx io">测试</strong>的复杂性。</li><li id="2685" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mj mk ml mm bi translated">如果我们不好好管理订阅，可能会导致<strong class="jx io">内存泄漏</strong>。</li></ol><h2 id="fb7b" class="kt ku in bd kv kw kx dn ky kz la dp lb kg lc ld le kk lf lg lh ko li lj lk ll bi translated">2.使用异步管道</h2><p id="674e" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks ig bi translated"><strong class="jx io">异步管道</strong>订阅一个可观察的&amp;返回它发出的<strong class="jx io">最新值</strong>。当发出一个新值时，异步管道标记要检查<strong class="jx io">变化</strong>的组件。当组件<strong class="jx io">被破坏</strong>时，异步管道<strong class="jx io">自动取消订阅</strong>以避免<strong class="jx io">内存泄漏</strong>。让我们来看看这个例子-</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/45990835f4f1067d1bf9b471cbc68073.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*yqTNObSYHdxQFy6HU42new.png"/></div></figure><p id="44c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，我们没有订阅组件本身的可观察性。我们将在模板文件中使用<strong class="jx io">异步管道</strong>,如下所示</p><figure class="ma mb mc md gt jo gh gi paragraph-image"><div class="gh gi lz"><img src="../Images/fb2943170365ba9d2773a11a1bdb5c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*B2h3Pxj0znOcNGyFihqgVw.png"/></div></figure><p id="aa15" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，<strong class="jx io"> | async </strong>就是这里所说的<strong class="jx io">异步管道</strong>。除了异步管道之外，还有其他几种管道，我们将在其他文章中讨论。使用异步管道有以下优点</p><ul class=""><li id="7ff7" class="me mf in jx b jy jz kc kd kg mg kk mh ko mi ks mv mk ml mm bi translated">负责<strong class="jx io">自动</strong>订阅&amp;退订可观测。</li><li id="33cc" class="me mf in jx b jy mn kc mo kg mp kk mq ko mr ks mv mk ml mm bi translated">异步管道的特性防止应用程序出现潜在的<strong class="jx io">内存泄漏</strong>。</li></ul><p id="e5dd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">总而言之，可以有把握地推断，与<strong class="jx io">相比，我们应该更多地使用<strong class="jx io">异步管道</strong>。subscribe() </strong>方法，由于其自动处理订阅的性质。</p><h1 id="9f62" class="na ku in bd kv nb nc nd ky ne nf ng lb nh ni nj le nk nl nm lh nn no np lk nq bi translated">结论</h1><p id="7e57" class="pw-post-body-paragraph jv jw in jx b jy lu ka kb kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks ig bi translated">我希望你们都喜欢这篇文章。我已经尽我所能让初学者学会它变得简单。请随时对任何改进建议发表评论。</p><p id="7461" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢这篇文章，请按下鼓掌按钮，跟随<a class="ae lt" href="https://medium.com/@mindbubble" rel="noopener">心灵泡泡</a>。</p><p id="9390" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="e8e7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢阅读这样的故事，并想支持我们，考虑<a class="ae lt" href="https://medium.com/@mindbubble/membership" rel="noopener">注册成为一个媒体成员</a>。每月5美元，你可以无限制地阅读媒体上的故事。如果你<a class="ae lt" href="https://medium.com/@mindbubble/membership" rel="noopener">使用我们的链接</a>注册，我们将获得一小笔佣金。</p></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="89ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lp">更多内容请看</em><a class="ae lt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lp">plain English . io</em></strong></a><em class="lp">。报名参加我们的</em> <a class="ae lt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lp">免费周报</em> </strong> </a> <em class="lp">。关注我们关于</em><a class="ae lt" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lp">Twitter</em></strong></a><em class="lp">和</em><a class="ae lt" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="lp">LinkedIn</em></strong></a><em class="lp">。查看我们的</em> <a class="ae lt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lp">社区不和谐</em> </strong> </a> <em class="lp">加入我们的</em> <a class="ae lt" href="https://inplainenglish.pallet.com/talent/welcome" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="lp">人才集体</em> </strong> </a> <em class="lp">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How Template Literals Work in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中模板文字的工作方式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/template-literals-in-javascript-cf536890694a?source=collection_archive---------24-----------------------#2021-04-19">https://javascript.plainenglish.io/template-literals-in-javascript-cf536890694a?source=collection_archive---------24-----------------------#2021-04-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d13ef1c6e0d6e6cff651c19f94857c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ij3MNh-L5Os3aByR"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@maxcodes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Maxwell Nelson</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="94b4" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是模板文字？</h2><p id="1e4b" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">JavaScript已经有了一种定义字符串的方法，使用单引号(')或双引号(" ")。那么为什么需要模板文字呢？</p><p id="ef15" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">嗯，模板文字允许我们更容易地动态操作字符串。与常规字符串不同，模板字符串是用反斜杠(``)定义的。除了语法差异之外，它还有一些特殊的功能，使其区别于常规字符串，例如多行字符串和字符串插值功能。它帮助我们以一种清晰的代码结构，易读，易维护的方式编写字符串。</p><p id="1ca3" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">常规字符串:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="0583" class="ka kb in mb b gy mf mg l mh mi">let string1 = “This is a regular string”</span></pre><p id="df02" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">模板文字:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="e8d3" class="ka kb in mb b gy mf mg l mh mi">let string2 = `This is a template literal`</span></pre><p id="c96b" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">要在模板字符串中写反斜线，请用反斜杠(\)对其进行转义，如下所示:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="d15b" class="ka kb in mb b gy mf mg l mh mi">console.log(` \` `) \\Output: “ ` ”<br/>console.log(`\${}`) \\Output: “ ${} ”</span></pre><h2 id="52ec" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">多行字符串</strong></h2><p id="2502" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">在常规字符串中，要添加新行，我们使用换行符(\n)。这在模板文字中被消除了。</p><p id="2723" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">例如:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="c901" class="ka kb in mb b gy mf mg l mh mi">console.log(“Adding multiple lines : \n”+ “This is line1 \n” + “This is line2”);</span></pre><p id="c651" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/86ca996bf90322f36845e3e8bd59f842.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tCaPFnHj8l0V0FxFj3sIPg.png"/></div></div></figure><p id="e6cf" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">使用模板文字，可以按如下方式完成:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="bb87" class="ka kb in mb b gy mf mg l mh mi">console.log(`Adding multiple lines<br/>This is line1<br/>This is line2`)</span></pre><p id="6481" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/ba978c78850937af4f33d9f368bef713.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/format:webp/1*dd37Pwpj1QAX67OX3TOfaw.png"/></div></figure><p id="37f8" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">这增加了代码的可读性。</p><h2 id="c313" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">表达式插值</strong></h2><p id="01ec" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">使用模板文字，我们可以在字符串中嵌入表达式。这些表达式被放入一个占位符中，该占位符由$符号表示，后跟花括号- ${}。然后在运行时计算这些表达式。占位符被表达式的值替换，然后连接成一个字符串。表达式的所有值都隐式转换为字符串。</p><p id="2728" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">语法:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="482e" class="ka kb in mb b gy mf mg l mh mi">`${expression}`</span></pre><p id="1e5e" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">这里的表达式可以是变量，可以是运算，甚至可以是函数！</p><p id="331f" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">例1: </strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="af9a" class="ka kb in mb b gy mf mg l mh mi">let greeting = “How are you?”<br/>console.log(`Hey there! ${greeting}`);</span></pre><p id="75d1" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/d06bb5d6dc270a0d79d61e8d7538e9d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-3iimBV5xNoQasO0-Gevkg.png"/></div></div></figure><p id="38db" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">例2: </strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="44fa" class="ka kb in mb b gy mf mg l mh mi">let n1 =5;<br/>let n2 = 6;<br/>console.log(`Sum of n1 and n2 is: ${n1+n2}`);</span></pre><p id="51ab" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/b4aa6e388a7435dae523f9978c495f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BigeIElGiy22ZT-ryUHmTg.png"/></div></div></figure><p id="b0fb" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">例3: </strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="022a" class="ka kb in mb b gy mf mg l mh mi">let n1 = 4;<br/>let n2 = 5;<br/>function avg(n1,n2){<br/>    return (n1 +n2)/2;<br/>}<br/>console.log(`Average of n1 and n2 is ${avg(n1,n2)} `);</span></pre><p id="5325" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/a16151a6d954fd80c3edbae6757ad672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n6QYJDKmAdUwfwmpsQf8yQ.png"/></div></div></figure><p id="c3f9" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">也可以通过嵌套几个模板文本来构建复杂的字符串文本。让我们以寻找3个数字中的最大值为例:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="4ca2" class="ka kb in mb b gy mf mg l mh mi">let n1 = 3;<br/>let n2 = 6;<br/>let n3 = 1;<br/>console.log(`Of the three : ${ (n1 &gt;= n2 &amp;&amp; n1 &gt;= n3) ? `${n1} is the greatest`: `${ n2&gt;n3 ? `${n2} is the greatest` : `${n3} is the greatest`}` }`);</span></pre><p id="5c86" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/2ef57bdb9045c6554526cd9c894ff95f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C5mQiTCGP4Yj27yZMy10EA.png"/></div></div></figure><p id="e3d2" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">然而，为了提高代码的可读性和可维护性，对上述代码更好的方法是:</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="f1da" class="ka kb in mb b gy mf mg l mh mi">let n1 = 3;<br/>let n2 = 6;<br/>let n3 = 1;<br/>const expr = (n1 &gt;= n2 &amp;&amp; n1 &gt;= n3)? `${n1} is the greatest`: n2&gt;n3 ? `${n2} is the greatest`:`${n3} is the greatest` ;<br/>console.log(`Of the three : ${expr}`);</span></pre><p id="8adf" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/a713d0fbb99d03083436fc2ad60d32aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fB8dmYRVfo2ncRxl2DruVw.png"/></div></div></figure><h2 id="c9e8" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated"><strong class="ak">标记的模板文字</strong></h2><p id="d107" class="pw-post-body-paragraph kw kx in ky b kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq ig bi translated">这是模板文字的一种更复杂的形式。它也被称为<strong class="ky io">标记模板</strong>。基本上，这里你用一个函数解析一个模板文字！任何以模板文字为前缀的表达式都称为标记。这里的标签是一个函数。使用它，我们可以解析模板字符串，并在返回被操作的字符串之前对其执行一些操作。使用带标签的模板，使用模板文本而不是常规方式调用函数，括号中包含函数参数。tag函数有两个参数，一个是标记化字符串的数组，另一个是表达式。</p><p id="99c0" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">语法:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="2a7d" class="ka kb in mb b gy mf mg l mh mi">Function tagFunction(strings, firstName, lastName){<br/>    …<br/>}<br/>tagFunction`Hello ${firstName} ${lastName}!`</span></pre><p id="c896" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated">标记函数的名称可以是您选择的任何名称。</p><p id="85a2" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><code class="fe mq mr ms mb b">Function tagFunction(strings, firstName, lastName</code> —该行与:</p><p id="2d3d" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><code class="fe mq mr ms mb b">Function tagFunction([‘hello’, ‘ ’, ‘!’], firstName, lastName)</code></p><p id="6ff8" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">例如:</strong></p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="1429" class="ka kb in mb b gy mf mg l mh mi">let n1 = 5;<br/>let n2 = 4;<br/>let n3 = 3;</span><span id="917d" class="ka kb in mb b gy mt mg l mh mi">function foo(strings, x, y, z){<br/>    str1 = strings[0]; //x:<br/>    str2 = strings[1]; //y:<br/>    str3 = strings[2]; //z:<br/>    if(x &gt; y &amp;&amp; x &gt; z){<br/>       return `${str1} is the greatest`<br/>    }<br/>    else if(y &gt; z) {<br/>       return `${str2} is the greatest`<br/>    }<br/>    else return `${str3} is the greatest`<br/>}<br/>let result = foo `x: ${n1} y: ${n2} z: ${n3}`<br/>console.log(result);</span></pre><p id="e849" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><strong class="ky io">输出:</strong></p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mu"><img src="../Images/80b8bd2a481629c893e7106b544d4846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ttQXVVQnbnI6GX_ZTxg0UQ.png"/></div></div></figure><h2 id="5e74" class="ka kb in bd kc kd ke dn kf kg kh dp ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">参考</h2><div class="mv mw gp gr mx my"><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd io gy z fp nd fr fs ne fu fw im bi translated">模板文字(模板字符串)</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">在ES2015规范的早期版本中，它们被称为“模板字符串”。模板文字用……括起来</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">developer.mozilla.org</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm jt my"/></div></div></a></div><p id="a112" class="pw-post-body-paragraph kw kx in ky b kz lr lb lc ld ls lf lg kj lt li lj kn lu ll lm kr lv lo lp lq ig bi translated"><em class="nn">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nn">plain English . io</em></a></p></div></div>    
</body>
</html>
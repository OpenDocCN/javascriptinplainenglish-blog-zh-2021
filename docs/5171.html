<html>
<head>
<title>6 JavaScript One-Liners to Transform Objects and Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">6个JavaScript一行程序来转换对象和数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/6-javascript-one-liners-to-transform-objects-and-arrays-ab3b47459b9b?source=collection_archive---------11-----------------------#2021-10-20">https://javascript.plainenglish.io/6-javascript-one-liners-to-transform-objects-and-arrays-ab3b47459b9b?source=collection_archive---------11-----------------------#2021-10-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a466" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">我经常用来呈现数据可视化的代码片段的编译列表。</h2></div><p id="c786" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于我作为数据分析师的工作性质，我的大量web应用程序项目不可避免地涉及到<strong class="kh ir">数据可视化用例</strong>。不出所料，许多呈现的前端组件包括<strong class="kh ir">图表和地图</strong>——例如<a class="ae lb" href="https://datavizcatalogue.com/methods/choropleth.html" rel="noopener ugc nofollow" target="_blank"> Choropleth地图</a>或交通路线，所有这些都需要数据对象和数组的前端操作。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/22905ad2012d8ac6bf6c3234f31a2382.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6p6Hfzgdjq8hviGNnUqMQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Illustration by Author | An example of chart and map visualisations in 1 of my school assignments a few years ago | Currently deployed at <a class="ae lb" href="http://ismafia.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">IS Mafia : : VA Project</a></figcaption></figure><p id="1ca5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，用简单的方法将JavaScript对象和数组转换成它们想要的最终状态节省了我在数据转换过程中的大量时间和精力。希望通过分享这些代码片段，其他人也能发现它们适用于他们的用例。</p><h2 id="509f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">1.深层复制对象</h2><p id="b388" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated"><code class="fe mq mr ms mt b"><strong class="kh ir">var copiedObj = JSON.parse(JSON.stringify(obj))</strong>;</code></p><p id="be32" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>在JavaScript对象中，复制一个对象变量会导致只复制对同一个对象的引用。因此，对其嵌入的密钥对值的任何更改都会导致对原始对象变量的更改。</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="cdd1" class="my lt iq mt b be mz na l nb nc">var obj = { a: 1, b: 2 };<br/>var copiedObj = obj;<br/>copiedObj.a = 2;<br/><br/>console.log(copiedObj); // {a: 2, b: 2}<br/>console.log(obj); // {a: 2, b: 2}</span></pre><p id="a66a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了防止对原始对象进行更改，考虑使用以下命令来深层复制一个对象变量<em class="nd">(注意，对新对象变量的更改不再改变原始对象中的元素)</em>:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="6773" class="my lt iq mt b be mz na l nb nc">var obj = { a: 1, b: 2 };<br/>var copiedObj = JSON.parse(JSON.stringify(obj));<br/>copiedObj.a = 2;<br/><br/>console.log(copiedObj); // { a: 2, b: 2 }<br/>console.log(obj); // { a: 1, b: 2 }</span></pre><h2 id="13e3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">2.将多个对象合并成一个</h2><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="6ad0" class="my lt iq mt b be mz na l nb nc">var mergedObj = { <br/>  ...obj1, <br/>  ...obj2 <br/>};</span></pre><p id="3d05" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>对于大多数web程序员来说，(<code class="fe mq mr ms mt b"><strong class="kh ir">...</strong></code> ) spread运算符可以说是ES6中引入的最有用的运算符之一。</p><p id="a78d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">单个物体如<code class="fe mq mr ms mt b">var <strong class="kh ir">obj1</strong> = { a: 1, b: 2 }</code>也可以表示为<code class="fe mq mr ms mt b">var obj = { <strong class="kh ir">...obj1</strong> }</code></p><p id="64da" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，如果有另一个对象<code class="fe mq mr ms mt b">var <strong class="kh ir">obj2</strong> = { c: 1, d: 2 }</code>需要与<code class="fe mq mr ms mt b"><strong class="kh ir">obj1</strong></code>合并，下面的代码将产生期望的结果:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="ebe5" class="my lt iq mt b be mz na l nb nc">var mergedObj = { <br/>  ...obj1, <br/>  ...obj2 <br/>};<br/>// { a: 1, b: 2, c: 1, d: 2 }</span></pre><h2 id="9a1b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">3.将多个数组合并成一个</h2><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="dcce" class="my lt iq mt b be mz na l nb nc">var mergedArr = arr1.concat( arr2, arr3 );</span></pre><p id="e9e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>当您希望合并多个数组时，<code class="fe mq mr ms mt b"><strong class="kh ir">concat</strong></code>将是一种方便的方法:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="025c" class="my lt iq mt b be mz na l nb nc">var arr1 = [1,2,3];<br/>var arr2 = [4,5];<br/>var arr3 = [6];<br/>var mergedArr = arr1.concat( arr2, arr3 ); // [1, 2, 3, 4, 5, 6]</span></pre><h2 id="1ed5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">替代方法:使用(<code class="fe mq mr ms mt b">…</code>)扩展操作符来连接数组</h2><p id="f948" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">类似于在<strong class="kh ir">点2 </strong>中如何使用(<code class="fe mq mr ms mt b"><strong class="kh ir">...</strong></code>)，这也可以应用于数组而不是对象:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="cac1" class="my lt iq mt b be mz na l nb nc">var arr1 = [1,2,3];<br/>var arr2 = [4,5];<br/>var arr3 = [6];<br/>var mergedArr = [ ...arr1, ...arr2, ...arr3 ]; // [1, 2, 3, 4, 5, 6]</span></pre><h2 id="ac3e" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">4.移除数组的第一个元素</h2><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="603b" class="my lt iq mt b be mz na l nb nc">arr.shift();</span></pre><p id="6ea2" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>与其遍历整个数组并将除了第<strong class="kh ir">个元素</strong>之外的所有元素转移到一个新初始化的数组(<code class="fe mq mr ms mt b">[]</code>)中，不如直接使用<code class="fe mq mr ms mt b"><strong class="kh ir">shift</strong></code>:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="077b" class="my lt iq mt b be mz na l nb nc">var arr = ["first", "second", "third", "forth"];<br/>arr.shift();<br/>// result of arr is: ["second", "third", "forth"]</span></pre><h2 id="1be9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">5.移除数组的最后一个元素</h2><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="920d" class="my lt iq mt b be mz na l nb nc">arr.pop();</span></pre><p id="8a5b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>类似于<strong class="kh ir">点4 </strong>，不需要遍历整个数组，将除<strong class="kh ir">最后一个元素</strong>之外的所有元素转移到一个新初始化的数组中(<code class="fe mq mr ms mt b">[]</code>，只需使用<code class="fe mq mr ms mt b"><strong class="kh ir">pop</strong></code>:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="a0be" class="my lt iq mt b be mz na l nb nc">var arr = ["first", "second", "third", "forth"];<br/>arr.pop();<br/>// result of arr is: ["first", "second", "third"]</span></pre><h2 id="2fca" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">6.移除对象键和值对</h2><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="b589" class="my lt iq mt b be mz na l nb nc">delete obj[keyValue];</span></pre><p id="1c23" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">解释:</strong>有时你想从一个对象中完全删除一个密钥对值，而不是遍历该对象并将其分配给另一个空对象(<code class="fe mq mr ms mt b">{}</code>)，只需使用<code class="fe mq mr ms mt b"><strong class="kh ir">delete</strong></code>关键字:</p><pre class="ld le lf lg gt mu mt mv bn mw mx bi"><span id="2e14" class="my lt iq mt b be mz na l nb nc">var obj = { id: 1, name: "ABC Primary School", category: "school" };<br/><br/>// assuming keyValue = "category":<br/>delete obj["category"] <br/>// obj now becomes { id: 1, name: "ABC Primary School" }</span></pre><p id="f287" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">这就是我列出的用于对象和数组转换的6个JavaScript一行程序的全部内容(希望这足够简单明了:P)。</strong></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h2 id="dd2d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">个人评论</h2><p id="3132" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">类似于我以前发表的一篇文章:</p><div class="nl nm gp gr nn no"><a rel="noopener  ugc nofollow" target="_blank" href="/6-useful-javascript-code-snippets-91424efd1c55"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">6个有用的JavaScript代码片段</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">这个列表可能很主观，但我还是分享了我自己的版本。示例和代码。</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc lm no"/></div></div></a></div><p id="5e37" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每个作者基于他/她的用例类型都有不同的建议列表，所以没有“绝对”或“正确”的列表。只需 <strong class="kh ir">应用最适合你日常项目的列表。🙃</strong></p></div><div class="ab cl ne nf hu ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ij ik il im in"><h2 id="00bf" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">非常感谢你坚持到这篇文章的结尾！❤希望你已经发现这很有用，如果你想要更多的数据分析&amp;网络应用相关的内容，请随时<a class="ae lb" href="https://medium.com/@geek-cc" rel="noopener">关注我。会非常感激😀</a></h2><div class="nl nm gp gr nn no"><a href="https://geek-cc.medium.com/membership" rel="noopener follow" target="_blank"><div class="np ab fo"><div class="nq ab nr cl cj ns"><h2 class="bd ir gy z fp nt fr fs nu fu fw ip bi translated">通过我的推荐链接加入灵媒——李思欣·崔</h2><div class="nv l"><h3 class="bd b gy z fp nt fr fs nu fu fw dk translated">获得李思欣·崔和其他作家在媒体上的所有帖子！😃您的会员费直接…</h3></div><div class="nw l"><p class="bd b dl z fp nt fr fs nu fu fw dk translated">geek-cc.medium.com</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc lm no"/></div></div></a></div><h1 id="14fe" class="oe lt iq bd lu of og oh lx oi oj ok ma jw ol jx md jz om ka mg kc on kd mj oo bi translated">(可选)最后但同样重要的是，请随意给我买杯咖啡 ☕(它真的会帮我度过朝九晚六的工作，哈哈)。</h1><p id="24bc" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated"><em class="nd">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nd">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
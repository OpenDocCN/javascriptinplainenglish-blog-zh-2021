<html>
<head>
<title>How to Scrape Web Applications in Node.js using Cheerio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Cheerio抓取Node.js中的Web应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-scrape-web-applications-in-node-js-using-cheerio-44dd5e331b3e?source=collection_archive---------14-----------------------#2021-07-05">https://javascript.plainenglish.io/how-to-scrape-web-applications-in-node-js-using-cheerio-44dd5e331b3e?source=collection_archive---------14-----------------------#2021-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7af1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">探索Node.js中网页抓取的可能性</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/30c24e67d44b45c998425db597ccbada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rPqmGuyB7VS-sRsNLcj7IA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/@fauxels?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">fauxels</a> from <a class="ae kv" href="https://www.pexels.com/photo/flatlay-display-of-electronics-next-to-eyeglases-3184454/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="fa4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">抓取web应用程序对我来说是最有趣的主题之一，也许对你也是如此。除了有趣之外，它还是数据科学中最重要的话题之一。</p><p id="72c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们中的许多人可能知道如何使用Python或一些在线工具来抓取web数据。然而，本文将演示我们如何使用Node.js从静态网站中抓取数据。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="bbdf" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">创建新的Node.js项目</h1><p id="224d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">首先，让我们创建一个新的Node.js项目。要创建新项目，请在工作目录中打开一个新的终端，并键入以下命令:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="b1e7" class="nb ma iq mx b gy nc nd l ne nf">mkdir my-scraper &amp;&amp; cd ./my-scraper</span></pre><p id="5f4c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将创建一个名为<code class="fe ng nh ni mx b">my-scraper</code>的新文件夹。要启动一个新的Node.js项目，请在终端的<code class="fe ng nh ni mx b">my-scraper</code>目录中键入以下命令。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="4ec0" class="nb ma iq mx b gy nc nd l ne nf">npm init -y</span></pre><p id="8633" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将在我们的项目目录中创建名为<code class="fe ng nh ni mx b">package.json</code>的文件。让我们通过键入以下命令来安装所有必需的依赖项以及<code class="fe ng nh ni mx b">express</code>:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="1b67" class="nb ma iq mx b gy nc nd l ne nf">npm install express</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="6fb8" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">设置基本代码</h1><p id="6593" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在让我们在项目目录的根文件夹中创建一个名为<code class="fe ng nh ni mx b">index.js</code>的文件。在<code class="fe ng nh ni mx b">index.js</code>文件中，让我们添加下面的基本代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="4758" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，如果我们在终端中输入以下命令，我们的服务器将启动:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="d164" class="nb ma iq mx b gy nc nd l ne nf">node .</span></pre><p id="8e0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过访问URL <code class="fe ng nh ni mx b"><a class="ae kv" href="http://localhost:8080." rel="noopener ugc nofollow" target="_blank">http://localhost:8080</a></code>，我们可以看到我们的服务器正在运行。我们可以看到一个类似如下的网页:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nl"><img src="../Images/81e1e735bc4be7cc7b5333d218e67d56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F5vmVqLP5rG144CKQfQhOg.png"/></div></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="417d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">安装Cheerio和Axios</h1><p id="4d3e" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated"><a class="ae kv" href="https://cheerio.js.org/" rel="noopener ugc nofollow" target="_blank"> Cheerio </a>是一个节点框架，可以用Node.js来抓取web数据，先安装一下。要安装Cheerio，您必须在终端中输入以下命令:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="cb16" class="nb ma iq mx b gy nc nd l ne nf">npm install cheerio</span></pre><p id="7693" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将在我们的项目中安装Cheerio。</p><p id="03e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们也安装<code class="fe ng nh ni mx b">axios</code>来获取HTML代码。</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="5fa4" class="nb ma iq mx b gy nc nd l ne nf">npm install axios</span></pre><h1 id="0116" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">我们开始刮吧</h1><p id="82f1" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">到目前为止，我们已经启动了Node.js项目并安装了所有需要的依赖项。现在，我们将开始从网站收集数据的旅程。</p><p id="dcf6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们获取抓取数据的HTML代码。我们将首先下载我们的目标网站的主页。如下所示更改<code class="fe ng nh ni mx b">index.js</code>代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="8392" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们从“<em class="nr">当前最重要的商品</em>”部分获取所有商品列表。点击<code class="fe ng nh ni mx b">CTRL+U</code>，观察HTML代码结构。或者你可以通过敲击键盘上的<code class="fe ng nh ni mx b">CTRL+SHIFT+I</code>来检查代码。</p><p id="082b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过观察HTML代码，我们可以看到HTML中的卡片位于以下步骤中:</p><pre class="kg kh ki kj gt mw mx my mz aw na bi"><span id="9f81" class="nb ma iq mx b gy nc nd l ne nf">div[class="wrapper"] &gt; div[class="container test-site"] &gt; div[class="row"] &gt;<!-- --> div[class="col-md-9"] &gt; div[class="row"] &gt; div[class="col-sm-4 col-lg-4 col-md-4"] &gt; div[class="thumbnail"]</span></pre><p id="5631" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通过观察卡片，我们可以看到每张卡片都有图片、标题、价格、描述、评分和评论总数。所以让我们先获取这些记录:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nj nk l"/></div></figure><p id="c736" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果如下:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/47cf24c2e8ffdf8c911b99bdea1ab11b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UDlX38bhanwKhSY6S6-X6w.png"/></div></div></figure><h1 id="6935" class="lz ma iq bd mb mc nm me mf mg nn mi mj jw no jx ml jz np ka mn kc nq kd mp mq bi translated">结论</h1><p id="17f9" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">现在，您已经对如何在Node.js中从web应用程序中抓取数据有了明确的理解。</p><p id="53ab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用Cheerio抓取网络数据适用于静态网站。然而，这种方法可能不适用于动态网站，因为在大多数框架中，网站在客户端呈现。</p><p id="31cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">同样，网络抓取违反某些网络应用程序的条款和条件。你应该检查你是否有权限从网站上抓取信息。</p><p id="5f62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">尽管有其局限性，我们可以从其他网站抓取必要的信息，并轻松地将其存储在我们的数据库中。虽然我们不能直接从动态网站获取数据，但有一个使用Cheerio获取数据的变通方法。也许我会在另一篇文章中讨论它。</p><p id="38c8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您感兴趣，这里有完整的项目资源库。</p><div class="nt nu gp gr nv nw"><a href="https://github.com/ludehsar/my-scraper" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">ludehsar/我的刮刀</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">中等教程项目。在GitHub上创建一个帐户，为ludehsar/my-scraper的开发做出贡献。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><p id="d0ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">祝您愉快！</p><p id="ff85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nr">更多内容看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nr">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Adding Graphics to a React App with D3 — Lab Color, Drag and Drop, and Zoom</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用D3向React应用程序添加图形— Lab Color、拖放和缩放</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-lab-color-drag-and-drop-and-zoom-c7d85493c52a?source=collection_archive---------11-----------------------#2021-02-07">https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-lab-color-drag-and-drop-and-zoom-c7d85493c52a?source=collection_archive---------11-----------------------#2021-02-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/05a44ea4c15ca81086dc1161683201da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hH-ZGTNotWh07NXL"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@karaeads?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kara Eads</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0c33" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3让我们可以轻松地向前端web应用添加图形。</p><p id="461d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue是一个流行的前端web框架。</p><p id="55a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。在本文中，我们将了解如何使用D3为Vue应用添加图形。</p><h1 id="a228" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">实验室颜色</h1><p id="1801" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">d3.lab</code>方法创建一个新的lab颜色。</p><p id="e3d1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要使用它，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2ca5" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="25cc" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const lab = d3.lab("blue");<br/>    console.log(lab);<br/>  }, []);</span><span id="4919" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="41ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们看到:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d105" class="mq lc iq mh b gy mr ms l mt mu">{l: 29.567572863553245, a: 68.29865326565671, b: -112.02942991288025, opacity: 1}</span></pre><p id="e2a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">记录在案。</p><h1 id="af95" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">过渡</h1><p id="a546" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在React应用程序中添加D3转场。</p><p id="e0a4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="28ac" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="ec9d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    d3.selectAll("body")<br/>      .transition()<br/>      .style("background-color", "yellow")<br/>      .transition()<br/>      .delay(5000)<br/>      .style("background-color", "green")<br/>      .delay(2000)<br/>      .remove();<br/>  }, []);</span><span id="f144" class="mq lc iq mh b gy mv ms l mt mu">  return &lt;div className="App"&gt;&lt;/div&gt;;<br/>}</span></pre><p id="133d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们选择了<code class="fe me mf mg mh b">body</code>元素。</p><p id="25e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">transition</code>方法来创建转换。</p><p id="e5bb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">style</code>方法将背景颜色过渡的样式设置为黄色。</p><p id="a340" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么我们有5秒钟的延迟。</p><p id="e37c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们设置背景颜色为绿色。</p><p id="e63e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">delay</code>来显示绿色背景2秒钟。</p><p id="037e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们调用<code class="fe me mf mg mh b">remove</code>来移除过渡。</p><h1 id="928d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">拖放</h1><p id="c476" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">使用D3，我们可以在React应用程序中添加拖放功能。</p><p id="a1b2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bfc3" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="5cb0" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    d3.select("g")<br/>      .datum({<br/>        x: 0,<br/>        y: 0<br/>      })<br/>      .call(<br/>        d3.drag().on("drag", function (d) {<br/>          d3.select(this).attr("transform", `translate(${d.x} , ${d.y})`);<br/>        })<br/>      );<br/>  }, []);</span><span id="b904" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;svg&gt;<br/>        &lt;g&gt;<br/>          &lt;rect x="40" y="10" width="50" height="50" fill="teal"&gt;&lt;/rect&gt;<br/>        &lt;/g&gt;<br/>      &lt;/svg&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="edf8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加一个矩形并启用拖放功能。</p><p id="b239" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到了<code class="fe me mf mg mh b">g</code>元素。</p><p id="7f96" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">call</code>方法来观察<code class="fe me mf mg mh b">g</code>元素上的拖动事件，以设置<code class="fe me mf mg mh b">translate</code> CSS属性来移动矩形的位置。</p><h1 id="ea99" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">变焦</h1><p id="739d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以给形状添加缩放功能。</p><p id="47aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用鼠标滚轮来放大和缩小SVG。</p><p id="72d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ab1c" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="bca9" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const svg = d3<br/>      .select("#zoom")<br/>      .append("svg")<br/>      .attr("width", 460)<br/>      .attr("height", 460)<br/>      .call(<br/>        d3.zoom().on("zoom", function (d) {<br/>          svg.attr("transform", d.transform);<br/>        })<br/>      )<br/>      .append("g");</span><span id="fa64" class="mq lc iq mh b gy mv ms l mt mu">    svg<br/>      .append("circle")<br/>      .attr("cx", 100)<br/>      .attr("cy", 100)<br/>      .attr("r", 40)<br/>      .style("fill", "#68b2a1");<br/>  }, []);</span><span id="aa32" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;div id="zoom"&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="32ee" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们获取ID为<code class="fe me mf mg mh b">zoom</code>的div，然后将<code class="fe me mf mg mh b">svg</code>添加到其中，并为<code class="fe me mf mg mh b">svg</code>设置<code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>。</p><p id="6c09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">call</code>方法让我们监听<code class="fe me mf mg mh b">zoom</code>事件并相应地应用转换。</p><p id="f4fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们添加<code class="fe me mf mg mh b">circle</code>，用<code class="fe me mf mg mh b">cx</code>和<code class="fe me mf mg mh b">cy</code>表示圆心的x和y坐标。</p><p id="e94b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">r</code>有半径，<code class="fe me mf mg mh b">fill</code>有圆的背景色。</p><p id="5112" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以使用鼠标滚轮来放大和缩小。</p><h1 id="f9bc" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="2a36" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以创建一个lab颜色，添加过渡，拖放，并用D3缩放到React应用程序中。</p><p id="1004" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p></div></div>    
</body>
</html>
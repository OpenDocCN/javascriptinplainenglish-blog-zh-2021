<html>
<head>
<title>Optimize JavaScript Loading with ‘defer’ and ‘async’ Attributes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“defer”和“async”属性优化JavaScript加载</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/optimize-javascript-loading-with-defer-and-async-attributes-9069514bf952?source=collection_archive---------8-----------------------#2021-08-15">https://javascript.plainenglish.io/optimize-javascript-loading-with-defer-and-async-attributes-9069514bf952?source=collection_archive---------8-----------------------#2021-08-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77c4eec2c755b04d6e1ac5c2638ab3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGxvSpf6ItZkzzbjYIK0hg.png"/></div></div></figure><p id="0962" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们都习惯于在HTML中使用script标签来加载外部JavaScript文件。传统上，在HTML加载后加载脚本的唯一解决方法是将脚本标签移向正文的末尾。但是自那以后，JavaScript已经走过了漫长的道路。ES2015的规范中添加了defer和async等属性，允许对JavaScript的加载方式进行更细粒度的控制。</p><p id="d51b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们看看什么是defer和async属性，以及它们如何帮助优化JavaScript加载。</p><h1 id="d916" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">为什么我们需要这些标签？</h1><p id="6731" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">如果一个脚本标签被放在一个HTML页面的头中，那么HTML的解析会被暂停，直到脚本被获取并执行。只有在脚本执行完成后，HTML解析才会恢复。这可能会导致糟糕的用户体验。延迟和异步都有助于避免这种情况。它们允许在解析HTML时并行下载脚本标签。</p><h1 id="8ff2" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">延迟和异步</h1><p id="68d8" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">这两个属性都是布尔属性，语法相似:</p><p id="5bc4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">值得注意的是，只有当脚本位于HTML的head部分时，标签才有用。如果脚本放在body标签中，它们就没有用了。</p><p id="88fe" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果两者都指定了，则异步优先。</p><h1 id="556f" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">异步ˌ非同步(asynchronous)</h1><p id="86a7" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">当浏览器遇到带有async属性的脚本标记时，它会并行下载脚本，同时继续解析HTML。脚本完全下载后，浏览器暂停HTML解析并执行脚本文件。这有助于改善页面的整体加载时间。</p><h1 id="061c" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">推迟</h1><p id="607a" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">defer标记类似于async标记，它允许并行下载JavaScript文件，而无需暂停HTML解析。它更进一步，在执行脚本之前等待HTML解析完成。</p><h1 id="21bb" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">我应该使用哪一个？</h1><p id="4f1f" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">下图有助于直观显示不同的流程:</p><figure class="lw lx ly lz gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3626fc4db484cdf76c9eaf5dd7068ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*A1GQlJI0Z_dn7Mg6.png"/></div></div></figure><p id="d3dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">大多数情况下，defer是首选选项，因为它最大程度地减少了页面加载时间。它在DOM准备好之前不会执行，并且遵循脚本顺序。因此，您也可以对脚本的执行进行更多的控制。</p><p id="d4ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Async听起来更性感，但它只在脚本不需要DOM或任何其他脚本时有用。</p><p id="d7e8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是关于脚本标签上的defer和async属性以及如何使用它们来优化页面加载时间所需要知道的全部内容。如果你有任何问题，欢迎在下面留言。</p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="c68a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mh">原载于2021年8月15日</em><a class="ae mi" href="https://www.wisdomgeek.com/development/web-development/javascript/optimizing-javascript-loading-with-defer-and-async-attributes/" rel="noopener ugc nofollow" target="_blank"><em class="mh">【https://www.wisdomgeek.com】</em></a><em class="mh">。</em></p><p id="13ae" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mh">更多内容请看</em><a class="ae mi" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mh">plain English . io</em></strong></a><em class="mh">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mh">免费周报</em> </strong> </a> <em class="mh">。在我们的</em> <a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mh">社区</em> </strong> </a> <em class="mh">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>
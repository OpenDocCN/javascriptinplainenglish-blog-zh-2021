<html>
<head>
<title>How to Check a Selected Image’s Width and Height with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript检查选中图片的宽度和高度？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-check-a-selected-images-width-and-height-with-javascript-342a88bf0bab?source=collection_archive---------6-----------------------#2021-08-26">https://javascript.plainenglish.io/how-to-check-a-selected-images-width-and-height-with-javascript-342a88bf0bab?source=collection_archive---------6-----------------------#2021-08-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/781ca100b565d08803b012d555be5fa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Kq2EHytz-7ec1eCe"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sakulich?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sergei Akulich</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9e5a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望检查用JavaScript输入的文件选择的选定图像的宽度和高度。</p><p id="0ebd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript检查选定图像的宽度和高度。</p><h1 id="0636" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用FileReader和Image构造函数</h1><p id="a6c8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">FileReader</code>构造函数创建一个对象来读取文件。</p><p id="a561" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">Image</code>构造函数创建一个以读取的文件为内容的图像。</p><p id="a553" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有以下文件输入:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5925" class="mq lc iq mh b gy mr ms l mt mu">&lt;input type='file'&gt;</span></pre><p id="3328" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以通过写入以下内容将文件读入图像:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f074" class="mq lc iq mh b gy mr ms l mt mu">const fileUpload = document.querySelector('input')<br/>const reader = new FileReader();<br/>fileUpload.addEventListener('change', () =&gt; {<br/>  reader.readAsDataURL(fileUpload.files[0]);<br/>  reader.onload = (e) =&gt; {<br/>    const image = new Image();<br/>    image.src = e.target.result;<br/>    image.onload = () =&gt; {<br/>      const {<br/>        height,<br/>        width<br/>      } = image;<br/>      if (height &gt; 100 || width &gt; 100) {<br/>        alert("Height and Width must not exceed 100px.");<br/>        return false;<br/>      }<br/>      alert("Uploaded image has valid Height and Width.");<br/>      return true;<br/>    };<br/>  };</span><span id="11ec" class="mq lc iq mh b gy mv ms l mt mu">})</span></pre><p id="b169" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">document.querySelector</code>选择文件输入。</p><p id="62dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建一个<code class="fe me mf mg mh b">FileReader</code>实例。</p><p id="02be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">addEventListener</code>向文件输入添加一个变更事件监听器。</p><p id="16c2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在事件监听器中，我们调用<code class="fe me mf mg mh b">reader.readAsDataURL</code>来读取文件。</p><p id="2b0e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">文件存储在<code class="fe me mf mg mh b">fileUpload.files</code>对象中。</p><p id="53d7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">索引0选择了第一个文件。</p><p id="5076" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">reader.onload</code>属性设置为创建<code class="fe me mf mg mh b">Image</code>实例的函数。</p><p id="bb9d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe me mf mg mh b">image.src</code>设置为<code class="fe me mf mg mh b">e.target.result</code>，将读取的文件设置为创建的<code class="fe me mf mg mh b">img</code>元素的内容。</p><p id="72ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe me mf mg mh b">image.onload</code>属性设置为获取图像的<code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>的函数。</p><p id="4a8e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">if</code>语句检查<code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>是否是我们想要的。</p><p id="d38b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，如果我们选择一个图像文件，我们应该看到根据图像大小弹出的警告框。</p><h1 id="6516" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b3d7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">FileReader</code>构造函数创建一个对象来读取文件。</p><p id="f1c8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以使用<code class="fe me mf mg mh b">Image</code>构造函数创建一个以读取的文件为内容的图像来检查所选图像文件的宽度和高度。</p><p id="5bc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mw">plain English . io</em></a></p></div></div>    
</body>
</html>
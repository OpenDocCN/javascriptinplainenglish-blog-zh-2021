<html>
<head>
<title>Working with the FlatList Component in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中使用FlatList组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/working-with-the-flatlist-component-in-react-native-c88fa2d3173c?source=collection_archive---------5-----------------------#2021-01-25">https://javascript.plainenglish.io/working-with-the-flatlist-component-in-react-native-c88fa2d3173c?source=collection_archive---------5-----------------------#2021-01-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e0ac" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React Native中使用平面列表的最低要求</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e1f7643a968a121a36b59fa10da8d7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtnmqZDRwqLaos9BYAGm-g.png"/></div></div></figure><p id="0e1c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> FlatList </strong>组件是<strong class="kt ir"> <em class="ln"> React Native </em> </strong>中的核心组件之一，当涉及到在FlatList中渲染大量数据时，你必须记住很少的事情&amp;为了学习如何使用该组件，我们将在演示中制作自己的<strong class="kt ir"> FlatList </strong>组件。</p><p id="fbc3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在平面列表组件&amp;中有很多<strong class="kt ir">道具，我们将着眼于最少的道具数量来制作漂亮的平面列表组件。</strong></p><p id="62b8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们需要注意三个方面:</p><ul class=""><li id="c3ad" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated"><strong class="kt ir">数据:</strong>简直就是一个普通的数组。</li><li id="ac0d" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir"> keyExtractor: </strong>为指定索引处的给定项目提取唯一的键。</li><li id="480e" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir"> renderItem: </strong>从数据中取出一个项目，并将其呈现到列表中。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mc"><img src="../Images/e8a6ef928340b068dadafe0e8b0d4eb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJ2aBj4BLyx0LbaRA45B_A.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="ac35" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">数据</h2><p id="07aa" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">在FlatList组件中，我们需要将数据传递给<strong class="kt ir">数据属性</strong> &amp;为了做到这一点，您可以简单地生成一个<strong class="kt ir"> const </strong>并析构您的数据。例如，我在包含FlatList组件的函数组件之外定义了一个临时的<strong class="kt ir">常量</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/262b55c0f79082b32120cf7dbc56b5ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PC4ZWAvhheS9v2J-rQj58w.png"/></div></div></figure><ul class=""><li id="c984" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">id属性将定义我们数据的索引，为了在平面列表组件中呈现任何内容，我们必须定义一个id属性，这样我们就可以安排在平面列表中呈现的项目的顺序。</li><li id="8b5b" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir"> name </strong>属性只是一个<strong class="kt ir">字符串值，我们稍后将在演示的<strong class="kt ir"> Text </strong>组件中使用它。</strong></li><li id="a3a7" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated"><strong class="kt ir"> image </strong>属性已经分配了<strong class="kt ir"> <em class="ln"> require </em> </strong>函数，该函数从我们的资产中传递<strong class="kt ir"> Image </strong>组件中的图像。</li></ul><h2 id="4173" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">密钥提取器</h2><p id="6e0a" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">在我们将数据数组传递给<strong class="kt ir"> FlatList </strong>组件之后，我们需要提供一个键值，它将负责确定我们的对象数组中的每个对象。例如，我有一个关键变量作为profile，使用这个变量，我们可以在数据数组中使用分配的id。</p><p id="b433" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">请注意，您可以将</em> <strong class="kt ir"> <em class="ln">键</em> </strong> <em class="ln">变量命名为任何您想要的名称，并且已经使用了</em><strong class="kt ir"><em class="ln">toString</em></strong><em class="ln">方法来避免任何错误。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/5638ead140bbe7e926528fe55e83b3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y1rrVKveD-JFzXrIdvZ8Ag.png"/></div></div></figure><h2 id="aa97" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">渲染项目</h2><p id="a663" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">当我们完成将键值和数据传递给我们的平面列表时，我们需要传递我们想要在平面列表中呈现的组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nj"><img src="../Images/6641a8ce0c91f8313e710e0ba44571ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hrsjg0BROo-4j-2MT43oDA.png"/></div></div></figure><ul class=""><li id="a371" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">使用<strong class="kt ir">项</strong>值，我们可以将对象数组中的所有数据传递给任何其他组件。</li><li id="e7c6" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">注意<strong class="kt ir"> Profile </strong>组件是外部的，我为这个演示用破坏的道具<strong class="kt ir">构建(图像&amp;名称)。</strong></li><li id="19a3" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">你可以命名的项目价值任何你喜欢的。</li></ul><p id="d105" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在将这3个道具传递给我们的FlatList组件之后，我们获得了以下结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f43bfa4e4a3e8f88a82d077c2223929b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cVrxl0hPNzO3XjyedPxeMw.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="52bb" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">实施拉取刷新</h2><p id="d877" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">拉刷新是渲染新项目的一个很棒的功能，要在FlatList中实现这个功能我们必须配置<strong class="kt ir">刷新</strong>&amp;T6【onRefresh】T7】道具。为了更好地理解，我们需要对代码做一些更改。</p><p id="6786" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用<strong class="kt ir"> useState </strong>挂钩，我们定义了以下常量变量，我们将使用它来添加拉取刷新特性。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nk"><img src="../Images/19363459e5f59a59685563a41ca18049.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOgFOHYQHyDVQ7Oorg67Zg.png"/></div></div></figure><ul class=""><li id="ee42" class="lo lp iq kt b ku kv kx ky la lq le lr li ls lm lt lu lv lw bi translated">在FlatList组件中，我们必须传递两个值，才能使拉动刷新工作，<strong class="kt ir">刷新</strong> prop是一个布尔值，使用useState挂钩将其设置为false。</li><li id="5f96" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">在<strong class="kt ir"> onRefresh </strong>中，我们将传递新对象，该对象将在我们拉下<strong class="kt ir"> FlatList </strong>后呈现。</li><li id="bc3d" class="lo lp iq kt b ku lx kx ly la lz le ma li mb lm lt lu lv lw bi translated">函数<strong class="kt ir"> newData </strong>负责更改FlatList中的对象值，因此现在我们下拉FlatList时，只有id为<strong class="kt ir">1</strong>的对象才会呈现。</li></ul><p id="6f82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因此，在我们的演示中，刷新FlatList时，仅呈现Josh的卡:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/aa7874fb527acedf083c6852ce78afa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lv4hmtlvRI6FeyqEhcxx1A.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="c8a8" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">ItemSeparatorComponent</h2><p id="3017" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">使用这个道具，你可以在每个FlatList项目下面添加一个分隔符&amp;为了实现这个，我们只需要传递一个自定义组件。</p><p id="69ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">例如:在我们的演示中，我们添加了一个具有内联样式的视图组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a13a576c00d946e85e3eb2772df966a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HFwO3kSxFvcxldVvhlOXsg.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h2 id="b48c" class="mk ml iq bd mm mn mo dn mp mq mr dp ms la mt mu mv le mw mx my li mz na nb nc bi translated">水平和数量列</h2><p id="6746" class="pw-post-body-paragraph kr ks iq kt b ku nd jr kw kx ne ju kz la nf lc ld le ng lg lh li nh lk ll lm ij bi translated">当我们必须在FlatList中水平和垂直呈现项目时，这两个支柱是非常必要的，两者都有自己的区别，并且可以很容易地实现。</p><p id="ff66" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">水平:</strong>如果设置为<strong class="kt ir"> true </strong>，则FlatList中的项目将以水平方式呈现，您也可以在该水平视图中滚动</p><p id="fe21" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> numColumns: </strong>此参数采用一个数字，该数字是FlatList用于以列呈现其项目的列数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/444d94efebeb0331f75c13e527bce7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sq09YiQBq_R-zCanwpCAoQ.png"/></div></div><figcaption class="nl nm gj gh gi nn no bd b be z dk"><strong class="bd np">numColumns &amp; horizontal</strong></figcaption></figure></div></div>    
</body>
</html>
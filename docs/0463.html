<html>
<head>
<title>Handle Internationalization in Your React App with Lingui</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Lingui处理React应用程序中的国际化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/handle-internationalization-to-your-react-app-with-lingui-2be4434a5a86?source=collection_archive---------16-----------------------#2021-01-27">https://javascript.plainenglish.io/handle-internationalization-to-your-react-app-with-lingui-2be4434a5a86?source=collection_archive---------16-----------------------#2021-01-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7e7c318c847eaae81584cf2090c8b324.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WRLwvAvgdCOmwv5g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Source: <a class="ae kc" href="https://evilmartians.com/" rel="noopener ugc nofollow" target="_blank">https://evilmartians.com</a></figcaption></figure><p id="6188" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">国际化和本地化<strong class="kf ir"> </strong>在软件开发中至关重要，可以扩展应用程序的范围。有时，甚至需要创建一个内置特定语言的应用程序。例如，大多数政府网站页面被翻译成他们自己国家的地方和国家语言。</p><p id="f576" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://torquemag.io/2018/06/why-millions-of-developers-use-javascript-for-web-application-development/" rel="noopener ugc nofollow" target="_blank">由于大多数网站都依赖于JavaScript </a>，难怪会有许多流行的JavaScript库来处理应用程序的国际化。一些最著名的图书馆是:</p><ul class=""><li id="63ee" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated"><a class="ae kc" href="https://github.com/lingui/js-lingui" rel="noopener ugc nofollow" target="_blank">临桂</a>。射流研究…</li><li id="4b1a" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://github.com/formatjs/formatjs" rel="noopener ugc nofollow" target="_blank">格式</a></li><li id="dbed" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://www.npmjs.com/package/i18next" rel="noopener ugc nofollow" target="_blank">i18下一个</a></li><li id="4068" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://www.npmjs.com/package/globalize" rel="noopener ugc nofollow" target="_blank">全球化</a></li><li id="9f43" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated"><a class="ae kc" href="https://www.npmjs.com/package/i18n" rel="noopener ugc nofollow" target="_blank"> i18n </a></li></ul><p id="9d81" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出于本文的目的，我将演示如何使用Lingui.js。这是一个强大的库，不仅处理本地JavaScript应用程序中的国际化(i18n)，还处理最著名的JavaScript框架之一<a class="ae kc" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>中的国际化。Lingui.js只有5kb，对于初学者来说非常容易上手。</p><h1 id="73b7" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">Lingui.js简介</h1><p id="845a" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">相对而言，Lingui.js是一个新的国际化库，但它提供了一些流行的竞争对手库中没有的功能，如<a class="ae kc" href="https://www.npmjs.com/package/react-intl" rel="noopener ugc nofollow" target="_blank"> react-intl </a>和<a class="ae kc" href="https://www.i18next.com/" rel="noopener ugc nofollow" target="_blank"> i18next </a>。例如，Lingui.js打包了<a class="ae kc" href="https://lingui.js.org/ref/macro.html" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">宏</strong> </a>，可以用来为组件生成消息语法。Lingui.js的一些其他突出特性是:</p><ul class=""><li id="ced5" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">针对性能进行了优化(大小仅为5KB)</li><li id="d705" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">易于与React和React本机应用程序集成</li><li id="0b84" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">它的社区活跃在Github和T2的频谱上</li><li id="6bab" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">Lingui.js是很好的<a class="ae kc" href="https://lingui.js.org/" rel="noopener ugc nofollow" target="_blank">文档</a>与<a class="ae kc" href="https://lingui.js.org/tutorials/react.html" rel="noopener ugc nofollow" target="_blank">分步教程</a>和<a class="ae kc" href="https://lingui.js.org/ref/core.html" rel="noopener ugc nofollow" target="_blank"> API参考</a></li><li id="c52c" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">它使用ICU MessageFormat，使得UI翻译可读</li><li id="2321" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">支持富文本，这是许多竞争对手的库中所没有的</li><li id="8bd4" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">Lingui.js有自己的CLI来简化翻译用户界面的整个过程</li></ul><p id="f83b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一般来说，Lingui.js可以集成到任何类型的静态应用程序中。如果你有一个像聊天系统或在线游戏这样的实时应用，那么Lingui.js可能是一个很好的选择，因为它被设计成对资源密集型应用是高效的。比如<a class="ae kc" href="https://github.com/CaliOpen/Caliopen" rel="noopener ugc nofollow" target="_blank"> Caliopen </a>(统一消息平台)就在积极使用Lingui.js。</p><h1 id="d39c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">设置项目</h1><p id="d0e7" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">在这一节中，我们将使用一个示例项目在React应用程序中集成Lingui.js。为了更简单，我们将使用<a class="ae kc" href="https://www.npmjs.com/package/create-react-app" rel="noopener ugc nofollow" target="_blank"> Create React App </a>包。</p><h1 id="0172" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">先决条件</h1><p id="5178" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">要跟随本教程，您必须已经在系统上安装了<a class="ae kc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>。它的最新版本打包了像<a class="ae kc" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>和<a class="ae kc" href="https://www.npmjs.com/package/npx" rel="noopener ugc nofollow" target="_blank"> npx </a>这样的工具，所以你不必单独安装它们。</p><h1 id="0511" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">入门指南</h1><p id="53f5" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我们的第一步是在本地机器上安装Create React应用程序包的最新版本。为此，请打开系统上所需文件夹内的控制台/终端。之后，执行以下命令:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b913" class="nb lq iq mx b gy nc nd l ne nf">npx create-react-app my-app</span></pre><p id="c929" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">安装所有的依赖项和设置一个基本的React应用程序需要一些时间，所以请耐心等待。安装完成后，运行以下命令:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="e6d2" class="nb lq iq mx b gy nc nd l ne nf">cd my-app</span></pre><p id="a572" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，您将进入项目文件夹，并准备安装Lingui.js。</p><p id="4d12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">实际上，Lingui.js的开发人员将整个库分成了不同的模块。目前，我们感兴趣的是<a class="ae kc" href="https://www.npmjs.com/package/@lingui/cli" rel="noopener ugc nofollow" target="_blank"> CLI </a>、<a class="ae kc" href="https://www.npmjs.com/package/@lingui/macro" rel="noopener ugc nofollow" target="_blank">宏</a>和<a class="ae kc" href="https://www.npmjs.com/package/@lingui/react" rel="noopener ugc nofollow" target="_blank">反应</a>。我们还需要<a class="ae kc" href="https://www.npmjs.com/package/@babel/core" rel="noopener ugc nofollow" target="_blank"> Babel编译器核心</a>和B <a class="ae kc" href="https://github.com/babel/babel-bridge" rel="noopener ugc nofollow" target="_blank"> abel-Bridge </a>来支持旧版本的Babel。</p><p id="e005" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">让我们在React项目中安装所有这些依赖项。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="3c9f" class="nb lq iq mx b gy nc nd l ne nf">npm i --save-dev @lingui/cli @lingui/macro @babel/core babel-core@bridge</span><span id="fecf" class="nb lq iq mx b gy ng nd l ne nf">npm i --save @lingui/react</span></pre><h1 id="8586" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">Lingui.js配置</h1><p id="6a08" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">是时候设置Lingui.js了，通知它消息文件的位置、使用的格式和默认的ui语言。为此，您必须创建一个名为。项目根目录下的linguirc。该文件的内容应该如下所示:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="637f" class="nb lq iq mx b gy nc nd l ne nf">{</span><span id="0a71" class="nb lq iq mx b gy ng nd l ne nf">  "localeDir": "src/locales/",</span><span id="ad0f" class="nb lq iq mx b gy ng nd l ne nf">  "srcPathDirs": ["src/"],</span><span id="67ba" class="nb lq iq mx b gy ng nd l ne nf">  "format": "minimal",</span><span id="1caa" class="nb lq iq mx b gy ng nd l ne nf">  "sourceLocale": "en"</span><span id="f5f1" class="nb lq iq mx b gy ng nd l ne nf">}</span></pre><p id="2560" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">src目录将保存消息的源文件，而Lingui.js将从这些文件中提取消息，并将它们写入特定于语言的文件夹中。每种语言(例如，英语、乌尔都语、中文等。，)将在src/locales/文件夹中有自己的子文件夹。</p><p id="21bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，为消息翻译选择正确的格式也很重要。一些可用的格式包括:</p><ul class=""><li id="d096" class="lb lc iq kf b kg kh kk kl ko ld ks le kw lf la lg lh li lj bi translated">lingui:每条消息都以预定义的格式返回，比如<a class="ae kc" href="https://lingui.js.org/ref/conf.html#lingui" rel="noopener ugc nofollow" target="_blank"> this </a></li><li id="92c7" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">minimal:每条消息都以简单的JSON格式返回，比如<a class="ae kc" href="https://lingui.js.org/ref/conf.html#lingui" rel="noopener ugc nofollow" target="_blank"> this </a></li><li id="368b" class="lb lc iq kf b kg lk kk ll ko lm ks ln kw lo la lg lh li lj bi translated">po:每个消息都作为文件返回</li></ul><p id="0214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lingui.js推荐po格式。一般来说，这是个人喜好和当前应用程序设置的问题。我们大多数人可能会发现最小格式(即JSON)比其他格式更容易阅读。因此，在本教程中，我们将使用最小格式。要了解每种格式的更多信息，请参考本节。</p><h1 id="bbfc" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">更新package.json</h1><p id="c188" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">此时，我们必须在package.json中添加一些脚本。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="fda4" class="nb lq iq mx b gy nc nd l ne nf">{</span><span id="fcf5" class="nb lq iq mx b gy ng nd l ne nf">  "scripts": {</span><span id="3166" class="nb lq iq mx b gy ng nd l ne nf">    "add-locale": "lingui add-locale",</span><span id="9638" class="nb lq iq mx b gy ng nd l ne nf">    "extract": "lingui extract",</span><span id="01a0" class="nb lq iq mx b gy ng nd l ne nf">    "compile": "lingui compile"</span><span id="8474" class="nb lq iq mx b gy ng nd l ne nf">  }</span><span id="fd92" class="nb lq iq mx b gy ng nd l ne nf">}</span></pre><p id="64b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用上面的命令，我们将能够在应用程序中生成新的语言环境，以及编译和提取当前的语言环境。</p><h1 id="2b8d" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">添加用户界面语言</h1><p id="5958" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">执行add-locale脚本将使我们能够为我们的用户界面创建不同的语言。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="8711" class="nb lq iq mx b gy nc nd l ne nf">npm run add-locale en zh ur</span></pre><p id="3b1e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，您可以在IANA官方网站上查看<a class="ae kc" href="https://www.iana.org/assignments/language-subtag-registry/language-subtag-registry" rel="noopener ugc nofollow" target="_blank">支持的语言代码</a>。</p><h1 id="937c" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">创建网页</h1><p id="bd5e" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">Create React应用已经有了一个基本的主页。您可以在/src/App.js下找到该文件。我们将这样修改该文件:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="8c51" class="nb lq iq mx b gy nc nd l ne nf">import React, { useState, useEffect } from 'react';</span><span id="32fe" class="nb lq iq mx b gy ng nd l ne nf">import { Trans } from '@lingui/macro';</span><span id="8fe8" class="nb lq iq mx b gy ng nd l ne nf">import LanguageSelector from './components/LanguageSelector';<br/></span><span id="415c" class="nb lq iq mx b gy ng nd l ne nf">function App({ language, onLanguageChange }) {</span><span id="8137" class="nb lq iq mx b gy ng nd l ne nf">  return (</span><span id="e2d9" class="nb lq iq mx b gy ng nd l ne nf">    &lt;div className="App"&gt;</span><span id="cd7d" class="nb lq iq mx b gy ng nd l ne nf">    &lt;LanguageSelector</span><span id="33e0" class="nb lq iq mx b gy ng nd l ne nf">    language={language}</span><span id="0067" class="nb lq iq mx b gy ng nd l ne nf">    onChangeLangage={onLanguageChange}</span><span id="b3ed" class="nb lq iq mx b gy ng nd l ne nf">  /&gt;</span><span id="50d5" class="nb lq iq mx b gy ng nd l ne nf">       &lt;header className="App-header"&gt;</span><span id="6afc" class="nb lq iq mx b gy ng nd l ne nf">        &lt;h1&gt;&lt;Trans&gt;Name of Countries&lt;/Trans&gt;&lt;/h1&gt;</span><span id="3ca6" class="nb lq iq mx b gy ng nd l ne nf">       &lt;/header&gt;</span><span id="d1f5" class="nb lq iq mx b gy ng nd l ne nf">       &lt;ul&gt;</span><span id="b116" class="nb lq iq mx b gy ng nd l ne nf">       &lt;li&gt;&lt;Trans&gt;United States&lt;/Trans&gt;&lt;/li&gt;</span><span id="73a5" class="nb lq iq mx b gy ng nd l ne nf">       &lt;li&gt;&lt;Trans&gt;Finland&lt;/Trans&gt;&lt;/li&gt;</span><span id="90ad" class="nb lq iq mx b gy ng nd l ne nf">      &lt;/ul&gt;</span><span id="55c1" class="nb lq iq mx b gy ng nd l ne nf">    &lt;/div&gt;</span><span id="66f4" class="nb lq iq mx b gy ng nd l ne nf">  );</span><span id="1ea7" class="nb lq iq mx b gy ng nd l ne nf">}</span><span id="aa3e" class="nb lq iq mx b gy ng nd l ne nf">export default App;</span></pre><p id="d9ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你注意到我们正在使用一个LanguageSelector组件吗？</p><p id="7f91" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这有助于我们动态地改变用户界面的语言。它使用了一个简单的HTML选择下拉菜单。这个组件看起来是这样的:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a7fd" class="nb lq iq mx b gy nc nd l ne nf">import React from 'react';</span><span id="bcd7" class="nb lq iq mx b gy ng nd l ne nf">function LanguageSelector({ language, onChangeLangage }) {</span><span id="8edd" class="nb lq iq mx b gy ng nd l ne nf">  function handleChange(event) {</span><span id="cb0d" class="nb lq iq mx b gy ng nd l ne nf">    event.preventDefault();</span><span id="c8e7" class="nb lq iq mx b gy ng nd l ne nf">    onChangeLangage(event.target.value);</span><span id="8bbb" class="nb lq iq mx b gy ng nd l ne nf">  }</span><span id="2e1c" class="nb lq iq mx b gy ng nd l ne nf">  return (</span><span id="7b16" class="nb lq iq mx b gy ng nd l ne nf">    &lt;div className="select"&gt;</span><span id="0d7e" class="nb lq iq mx b gy ng nd l ne nf">      &lt;select onChange={handleChange} value={language}&gt;</span><span id="8fc7" class="nb lq iq mx b gy ng nd l ne nf">        &lt;option value="en"&gt;English&lt;/option&gt;</span><span id="3d8e" class="nb lq iq mx b gy ng nd l ne nf">        &lt;option value="ur"&gt;Urdu&lt;/option&gt;</span><span id="2738" class="nb lq iq mx b gy ng nd l ne nf">        &lt;option value="zh"&gt;Chinese&lt;/option&gt;</span><span id="ad06" class="nb lq iq mx b gy ng nd l ne nf">      &lt;/select&gt;</span><span id="e212" class="nb lq iq mx b gy ng nd l ne nf">    &lt;/div&gt;</span><span id="f30c" class="nb lq iq mx b gy ng nd l ne nf">  );</span><span id="c918" class="nb lq iq mx b gy ng nd l ne nf">}</span><span id="4d47" class="nb lq iq mx b gy ng nd l ne nf">export default LanguageSelector;</span></pre><p id="7d2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，我们需要更新我们的主/src/index.js文件。该文件负责导入所选语言的翻译并呈现整个网页。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="cbdf" class="nb lq iq mx b gy nc nd l ne nf">import React, { useState } from 'react';</span><span id="69dc" class="nb lq iq mx b gy ng nd l ne nf">import ReactDOM from 'react-dom';</span><span id="dce9" class="nb lq iq mx b gy ng nd l ne nf">import { I18nProvider } from '@lingui/react';</span><span id="f27a" class="nb lq iq mx b gy ng nd l ne nf">import App from './App';<br/></span><span id="b9a1" class="nb lq iq mx b gy ng nd l ne nf">async function loadMessages(language) {</span><span id="1674" class="nb lq iq mx b gy ng nd l ne nf">return await     import(`@lingui/loader!./locales/${language}/messages.json`);</span><span id="d448" class="nb lq iq mx b gy ng nd l ne nf">}</span><span id="719d" class="nb lq iq mx b gy ng nd l ne nf">function LocalizedApp() {</span><span id="955d" class="nb lq iq mx b gy ng nd l ne nf">  const [catalogs, setCatalogs] = useState({})</span><span id="6440" class="nb lq iq mx b gy ng nd l ne nf">  const [language, setLanguage] = useState('en');</span><span id="44a2" class="nb lq iq mx b gy ng nd l ne nf">  async function handleLanguageChange(language) {</span><span id="6835" class="nb lq iq mx b gy ng nd l ne nf">    const newCatalog = await loadMessages(language);</span><span id="fa12" class="nb lq iq mx b gy ng nd l ne nf">    const newCatalogs = { ...catalogs, [language]: newCatalog };</span><span id="361e" class="nb lq iq mx b gy ng nd l ne nf">    setCatalogs(newCatalogs);</span><span id="49b1" class="nb lq iq mx b gy ng nd l ne nf">    setLanguage(language);</span><span id="0199" class="nb lq iq mx b gy ng nd l ne nf">  }</span><span id="7591" class="nb lq iq mx b gy ng nd l ne nf">  return (</span><span id="7880" class="nb lq iq mx b gy ng nd l ne nf">    &lt;I18nProvider language={language} catalogs={catalogs}&gt;</span><span id="82bc" class="nb lq iq mx b gy ng nd l ne nf">    &lt;App</span><span id="47db" class="nb lq iq mx b gy ng nd l ne nf">      language={language}</span><span id="443a" class="nb lq iq mx b gy ng nd l ne nf">      onLanguageChange={handleLanguageChange}</span><span id="9055" class="nb lq iq mx b gy ng nd l ne nf">    /&gt;</span><span id="f403" class="nb lq iq mx b gy ng nd l ne nf">    &lt;/I18nProvider&gt;</span><span id="ded4" class="nb lq iq mx b gy ng nd l ne nf">  );</span><span id="9171" class="nb lq iq mx b gy ng nd l ne nf">}</span><span id="711b" class="nb lq iq mx b gy ng nd l ne nf">ReactDOM.render(&lt;LocalizedApp /&gt;, document.getElementById('root'));</span></pre><h1 id="e861" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">从源代码中提取消息</h1><p id="fe11" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">既然我们已经在<Trans> … </Trans>宏中包装了一些文本，那么是时候从源代码中提取所有这些消息，然后在每个语言环境中创建键值对了。这个键将作为一个ID，其中的值是它在特定语言中的翻译。</p><p id="d2a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在英语中，键和值对保持不变。但是我们必须改变其他语言的值。默认情况下，它们的值将是空字符串，我们必须手动添加翻译。</p><p id="ecf4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">执行npm run extract命令，从源代码中提取消息。</p><h1 id="e23b" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">用户界面翻译</h1><p id="2d12" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我们创建了一个网页，显示两个国家的列表——芬兰和美国。现在，我们必须将用户界面翻译成所有支持的语言。</p><p id="089c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">以前，我们在项目中添加了英语、中文和乌尔都语地区。默认语言是英语，Lingui.js足够智能，可以自动填充英语翻译。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="3367" class="nb lq iq mx b gy nc nd l ne nf">{</span><span id="69d4" class="nb lq iq mx b gy ng nd l ne nf">"Finland": "Finland",</span><span id="3d03" class="nb lq iq mx b gy ng nd l ne nf">"Name of Countries": "Name of Countries",</span><span id="87f5" class="nb lq iq mx b gy ng nd l ne nf">"United States": "United States"</span><span id="448f" class="nb lq iq mx b gy ng nd l ne nf">}</span></pre><p id="0f4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，打开/src/locales/ur/messages.json并用下面的代码替换它的内容。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="575e" class="nb lq iq mx b gy nc nd l ne nf">{</span><span id="7a7f" class="nb lq iq mx b gy ng nd l ne nf">"Finland": "فن لینڈ",</span><span id="c4d0" class="nb lq iq mx b gy ng nd l ne nf">"Name of Countries": "ممالک کا نام",</span><span id="c02b" class="nb lq iq mx b gy ng nd l ne nf">"United States": "امریکہ"</span><span id="ffa1" class="nb lq iq mx b gy ng nd l ne nf">}</span></pre><p id="bfed" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">类似地，打开/src/locales/zh/messages.json，用下面的翻译更新它。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b1b7" class="nb lq iq mx b gy nc nd l ne nf">{</span><span id="d46c" class="nb lq iq mx b gy ng nd l ne nf">"Finland": "芬兰",</span><span id="f6c4" class="nb lq iq mx b gy ng nd l ne nf">"Name of Countries": "国家名称",</span><span id="4bc6" class="nb lq iq mx b gy ng nd l ne nf">"United States": "美国"</span><span id="0642" class="nb lq iq mx b gy ng nd l ne nf">}</span></pre><p id="d1fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此时，我们已经准备好编译这些翻译，以便在我们的应用程序中使用它们。为此，请执行编译命令npm run compile</p><h1 id="605e" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">运行项目</h1><p id="9a9e" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">要运行该应用程序，请运行命令npm start</p><h1 id="93a8" class="lp lq iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="5450" class="pw-post-body-paragraph kd ke iq kf b kg mn ki kj kk mo km kn ko mp kq kr ks mq ku kv kw mr ky kz la ij bi translated">我们一起学习了如何轻松地将Lingui.js与React应用程序集成，并为您的应用程序添加国际化功能。</p><p id="90f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Lingui.js最大的好处之一是它可以自动管理所有语言的翻译键值对。这将使用空字符串初始化消息，以防止运行时出错。之后，您只需为不同的键值添加特定的翻译，就可以用一种新的语言查看您的应用程序。</p><p id="7154" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">说白了。在这里注册我们的</em> </a><a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">免费周报</em> </a> <em class="nh">。</em></p></div></div>    
</body>
</html>
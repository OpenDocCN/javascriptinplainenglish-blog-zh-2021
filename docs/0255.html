<html>
<head>
<title>Build a Custom useFetch React Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个自定义的useFetch React挂钩</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-your-first-custom-hook-b44bf7e8892c?source=collection_archive---------13-----------------------#2021-01-14">https://javascript.plainenglish.io/creating-your-first-custom-hook-b44bf7e8892c?source=collection_archive---------13-----------------------#2021-01-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="eb02" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">学习用简单易行的步骤构建你的第一个定制钩子</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/dc952caad4a00375a69a61e79f4d839f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PBy_t4WJMfQwGMc6zupeqg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@flowforfrank?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae ks" href="https://unsplash.com/s/photos/javascript?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5747" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我们开始创建我们的第一个定制钩子之前，我们需要有一些关于什么是钩子以及我们为什么使用它们的基本知识。如果你对React中的钩子不熟悉，可以点击<a class="ae ks" href="https://pmehta18.medium.com/hooks-in-react-7ce87519a4ca" rel="noopener">这里</a>了解更多。🚀</p><h2 id="f03d" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">什么是自定义挂钩</h2><p id="1637" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">自定义挂钩是提供重用有状态逻辑的机制的函数，这样自定义挂钩中使用的所有状态和效果都保持完全隔离。我们也可以在一个自定义钩子中使用其他钩子。所有自定义钩子的名字应该以“use”开头，类似于其他钩子。</p><h2 id="16b4" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">为什么要使用定制挂钩</h2><ul class=""><li id="8293" class="mn mo in kv b kw mi kz mj lc mp lg mq lk mr lo ms mt mu mv bi translated">允许共享可重用逻辑</li><li id="dc7a" class="mn mo in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">不在组件之间共享数据</li><li id="36a1" class="mn mo in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">易于从组件中分离复杂的逻辑</li></ul><h2 id="3e14" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">如何构建自定义挂钩</h2><p id="4006" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated"><strong class="kv io"> <em class="nb">用例:</em> </strong> <em class="nb">我们已经构建了从API获取数据的应用程序。在这样做的时候，我们通常会显示一个加载指示器，这样用户就可以知道一些事情正在进行中，可能很快就会加载。如果我们在获取数据时收到任何错误，我们会显示错误提示消息。</em></p><p id="be3d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="nb">实现:</em> </strong> <em class="nb">我们将创建一个名为“useFetch”的自定义钩子，它将进行API调用，并管理加载和错误状态。只要我们想使用API调用获取数据，就可以重用这个钩子，而不需要在任何地方单独管理加载和错误状态。</em></p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">useFetch hook</figcaption></figure><p id="5f95" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码片段中，我们创建了一个名为“useFetch”的定制钩子，在这里我们将接收API端点。钩子将管理从API调用接收的加载、错误和响应的状态。它将管理对给定端点进行API调用的代码。最后，我们将简单地将这些状态值返回给调用函数。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nc nd l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">using the useFetch hook</figcaption></figure><p id="4058" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的代码片段中，我们将根据从钩子接收的值显示一个加载指示器和一个错误提示。在这个定制钩子的帮助下，我们不需要管理每个API调用的错误和加载状态，因为它是由钩子本身管理的，并且在钩子中保持完全隔离。</p></div><div class="ab cl ne nf hr ng" role="separator"><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj nk"/><span class="nh bw bk ni nj"/></div><div class="ig ih ii ij ik"><h2 id="4499" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">资源</h2><ul class=""><li id="a9b2" class="mn mo in kv b kw mi kz mj lc mp lg mq lk mr lo ms mt mu mv bi translated">你可以在这里找到完整的源代码。</li><li id="a55e" class="mn mo in kv b kw mw kz mx lc my lg mz lk na lo ms mt mu mv bi translated">现场演示:<a class="ae ks" href="https://lwj09.csb.app/" rel="noopener ugc nofollow" target="_blank">https://lwj09.csb.app/</a></li></ul><p id="95a7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请在评论区分享你最喜欢的定制挂钩！</p><p id="b70d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这就是你的第一个定制钩子，伙计们！编码快乐！👩‍💻</p></div></div>    
</body>
</html>
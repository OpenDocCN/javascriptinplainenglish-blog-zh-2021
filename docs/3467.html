<html>
<head>
<title>How to Calculate the Age Given the Birth Date in YYYY-MM-DD Format with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">给定YYYY-MM-DD格式的出生日期，如何用JavaScript计算年龄？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-calculate-the-age-given-the-birth-date-in-yyyy-mm-dd-format-with-javascript-78c256e770e2?source=collection_archive---------7-----------------------#2021-07-13">https://javascript.plainenglish.io/how-to-calculate-the-age-given-the-birth-date-in-yyyy-mm-dd-format-with-javascript-78c256e770e2?source=collection_archive---------7-----------------------#2021-07-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/2e6d13be81e5f11072e6a6e571eef853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Sm6ded3u7mXDXXTb"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@philinit?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Philippe Leone</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7241" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们希望根据JavaScript代码中的出生日期来计算年龄。</p><p id="d2d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript计算YYYY-MM-DD格式的出生日期的年龄。</p><h1 id="e28d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用本地日期方法</h1><p id="0b60" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用本地日期方法，根据YYYY-MM-DD格式的出生日期来计算一个人的年龄。</p><p id="e864" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="4df9" class="mn lc iq mj b gy mo mp l mq mr">const calculateAge = (birthday) =&gt; {<br/>  const ageDifMs = Date.now() - new Date(birthday).getTime();<br/>  const ageDate = new Date(ageDifMs);<br/>  return Math.abs(ageDate.getUTCFullYear() - 1970);<br/>}</span><span id="a0a9" class="mn lc iq mj b gy ms mp l mq mr">console.log(calculateAge('1960-01-21'))</span></pre><p id="4ce5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了带有<code class="fe mt mu mv mj b">birthday</code>参数的<code class="fe mt mu mv mj b">calculateAge</code>方法，该参数接受一个日期字符串，我们可以将该字符串转换为日期，并基于该日期计算年龄。</p><p id="b146" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在函数中，我们减去了<code class="fe mt mu mv mj b">Date.now</code>，它有当前日期时间的时间戳，以毫秒为单位。</p><p id="662c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建一个新的<code class="fe mt mu mv mj b">Date</code>实例，并调用<code class="fe mt mu mv mj b">getTime</code>来获取我们传递的<code class="fe mt mu mv mj b">birthday</code>的时间戳，以毫秒为单位。</p><p id="3a9c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们把结果赋给<code class="fe mt mu mv mj b">ageDifMs</code>。</p><p id="75f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们将<code class="fe mt mu mv mj b">ageDifMs</code>传递给<code class="fe mt mu mv mj b">Date</code>构造函数以获得<code class="fe mt mu mv mj b">ageDate</code>，这是从1970年1月1日午夜UTC创建的日期加上我们传递的timespan指定的timespan。</p><p id="54b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe mt mu mv mj b">getUTCFullYear</code>得到年份减去1970得到年龄。</p><p id="2a86" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后调用<code class="fe mt mu mv mj b">Math.abs</code>以确保它是正的，不管<code class="fe mt mu mv mj b">birthday</code>是否在1970年1月1日午夜UTC之前。</p><p id="1093" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">因此，控制台日志应该记录61。</p><h1 id="c3de" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用moment.js</h1><p id="a64b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了使计算日期差异更容易，我们可以使用moment.js库。</p><p id="03cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="ff09" class="mn lc iq mj b gy mo mp l mq mr">const calculateAge = (birthday) =&gt; {<br/>  const startDate = new Date();<br/>  const endDate = new Date(birthday);<br/>  return Math.abs(moment.duration(endDate - startDate).years());<br/>}</span><span id="d49d" class="mn lc iq mj b gy ms mp l mq mr">console.log(calculateAge('1960-01-21'))</span></pre><p id="9756" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">calculateAge</code>函数中，我们像以前一样采用<code class="fe mt mu mv mj b">birthday</code>参数。</p><p id="d0a0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">但是我们没有使用本地日期方法，而是使用<code class="fe mt mu mv mj b">moment.duration</code>方法来计算持续时间。</p><p id="c747" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">endDate — startDate</code>调用它来获取矩持续时间对象。</p><p id="b46a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">years</code>得到持续时间作为年数。</p><p id="d81e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">Math.abs</code>来确保返回的数字是正数。</p><p id="e779" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">那么控制台日志应该会给出和以前一样的结果。</p><h1 id="8fdf" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="eda2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过使用本地JavaScript日期方法或moment.js来计算给定日期字符串的年龄。</p><p id="fb95" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">说白了</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Cool JavaScript Operators You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该知道的酷JavaScript操作符</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/coolest-javascript-operators-you-wish-you-would-have-known-earlier-47a1185c58e2?source=collection_archive---------3-----------------------#2021-06-02">https://javascript.plainenglish.io/coolest-javascript-operators-you-wish-you-would-have-known-earlier-47a1185c58e2?source=collection_archive---------3-----------------------#2021-06-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8e205c8b8ad4be538ca8972a0007c772.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ETtzNAn021bj6csO"/></div></div></figure><p id="edf6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我用JavaScript写了很多代码，无论是在工作中还是在我的个人项目中。我经常遇到这样的情况，我不得不写许多样板代码来解决它们。例如，检查有效引用、空/未定义处理。但是最近我遇到了一些JavaScript操作者，他们让我的工作变得简单多了，在他们的帮助下，我可以写出更简洁的代码。</p><p id="10a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天我将分享这些操作符，我相信你也可以用它们来编写更好的代码。</p><h1 id="703d" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated"><strong class="ak">可选链接运算符(？。)</strong></h1><p id="f580" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">如果您已经使用JavaScript很长时间了，那么您可能会遇到这个恼人的错误<code class="fe lw lx ly lz b">Cannot read property '&lt;property-name&gt;' of undefined</code>。当您试图通过创建像<code class="fe lw lx ly lz b">a.b.c.....</code>这样的链来访问一个位于对象深处的属性，而忘记检查链中是否存在中间值时，通常会遇到这个问题。</p><p id="3d51" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们用一个恰当的例子来理解一下。</p><p id="5201" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">考虑一个<code class="fe lw lx ly lz b">user</code>对象，它可以拥有用户的不同属性，比如地址和联系信息。<code class="fe lw lx ly lz b">user</code>对象可以看起来像下面这样-</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">user object structure</figcaption></figure><p id="e4d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，<code class="fe lw lx ly lz b">currentAddress</code>属性对于一个用户来说可以是<code class="fe lw lx ly lz b">undefined</code>，如果该用户目前居住在<code class="fe lw lx ly lz b">permanentAddress</code>。</p><p id="596d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由于<code class="fe lw lx ly lz b">user</code>对象是柔性的；我们必须添加手动检查来访问<code class="fe lw lx ly lz b">currentAddress</code>中的<code class="fe lw lx ly lz b">contact</code>信息，以避免如下<code class="fe lw lx ly lz b">undefined</code>参考错误-</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Traditional method to check for reference errors</figcaption></figure><p id="4b66" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，访问一个对象内部的值需要很多代码。想象一下，如果某个属性位于对象内部很深的位置，您将不得不编写大量的样板代码。</p><h1 id="c8e1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">这就是可选的链接操作符(？。)前来救援。</h1><p id="2d76" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">根据<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining" rel="noopener ugc nofollow" target="_blank"> MDN (Mozilla开发者网络)文档</a>s:“<em class="ml"/><strong class="jx io"><em class="ml">可选链接运算符(？。)</em> </strong> <em class="ml">使您能够读取位于连接对象链深处的属性值，而不必检查链中的每个引用是否有效。”</em></p><p id="3ff5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单地说，如果您使用可选的链接(？。)运算符，JavaScript知道它首先必须检查链<code class="fe lw lx ly lz b">user.addresses.currentAddress</code>是否有效。如果发现有效，则返回属性值；否则返回<code class="fe lw lx ly lz b">undefined</code>。</p><p id="609e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">可选的链接运算符(？。)会短路。这意味着一旦JavaScript发现一个无效/不存在的值，它就停止计算链中的属性。例如:在<code class="fe lw lx ly lz b">user.addresses.currentAddress.contact</code>中，如果<code class="fe lw lx ly lz b">currentAddress</code>不存在，那么JavaScript将不会计算其后的<code class="fe lw lx ly lz b">contact</code>值，并将返回<code class="fe lw lx ly lz b">undefined</code>作为输出。这种行为可以防止JS在访问无效属性时抛出错误。</p><p id="8356" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，我们现在可以直接获得联系信息，而无需添加太多的样板代码。</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Accessing properties using optional chaining</figcaption></figure><p id="2f7c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不仅如此，您还可以将它用于以下用途:</p><ul class=""><li id="8bb9" class="mm mn in jx b jy jz kc kd kg mo kk mp ko mq ks mr ms mt mu bi translated">访问数组项，</li><li id="5440" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated">进行函数调用</li><li id="b8e1" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated">访问表达式</li></ul><pre class="ma mb mc md gt na lz nb nc aw nd bi"><span id="abfe" class="ne ku in lz b gy nf ng l nh ni">obj.val?.prop<br/>obj.val?.[expr]<br/>obj.arr?.[index]<br/>obj.func?.(args)</span></pre><p id="d57f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">真的不是很酷的运营商吗？让我们看看JavaScript中另一个很酷的操作符。</p></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><h1 id="b40a" class="kt ku in bd kv kw nq ky kz la nr lc ld le ns lg lh li nt lk ll lm nu lo lp lq bi translated">零化合并算子(？？)</h1><p id="0448" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">你是否厌倦了为处理<code class="fe lw lx ly lz b">null/undefined</code>支票而写条件语句？</p><p id="7963" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果有一个操作符来减少样板代码会怎么样？为了更好地理解它的用例，让我们举几个例子:</p><p id="7240" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">代码1:</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Traditional method of Null/Undefined handling</figcaption></figure><p id="3a13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">代码2:</p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Using Nullish Coalescing Operator</figcaption></figure><p id="65b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的例子中，两个代码做同样的事情。当值为<code class="fe lw lx ly lz b">null/undefined</code>时，它们返回一个默认值；否则看重自身。正如您将注意到的，使用代码2要干净得多，并且减少了许多样板文件。这就是无效合并运算符(？？)进入画面。</p><p id="73db" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">根据<a class="ae mk" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank"> MDN文档</a>::<em class="ml">null ish合并运算符(？？)是一个逻辑运算符，当其左侧操作数为</em> <code class="fe lw lx ly lz b"><em class="ml">null</em></code> <em class="ml">或</em> <code class="fe lw lx ly lz b"><em class="ml">undefined</em></code> <em class="ml">时，返回其右侧操作数，否则返回其左侧操作数。”</em></p><p id="7975" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你们中的一些人可能会在这里争辩说，我们本可以使用<strong class="jx io">逻辑OR运算符(||) </strong>来代替。因为<strong class="jx io">或(|| ) </strong>操作符返回第一个值，所以这在处理空检查时会非常有效，比如:</p><pre class="ma mb mc md gt na lz nb nc aw nd bi"><span id="06bd" class="ne ku in lz b gy nf ng l nh ni">/* Using OR operator instead */<br/>return (value || defaultValue);</span></pre><p id="ae24" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然而，在使用OR运算符时有一个<strong class="jx io"> catch </strong>。</p><p id="832f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果左侧值是<code class="fe lw lx ly lz b">falsy</code>，OR运算符返回右侧值，而不仅仅是<code class="fe lw lx ly lz b">null/undefined</code>。JavaScript中有六个值被认为是错误的。这些是:</p><ul class=""><li id="0e91" class="mm mn in jx b jy jz kc kd kg mo kk mp ko mq ks mr ms mt mu bi translated"><code class="fe lw lx ly lz b">undefined</code></li><li id="ab3c" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated"><code class="fe lw lx ly lz b">null</code></li><li id="1451" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated"><code class="fe lw lx ly lz b">""</code>(空字符串)</li><li id="4caf" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated"><code class="fe lw lx ly lz b">NaN</code></li><li id="4616" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi">0</li><li id="04b6" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated"><code class="fe lw lx ly lz b">false</code></li></ul><p id="124d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，如果您使用OR运算符，它将返回默认值，即使该值不仅仅是<code class="fe lw lx ly lz b">null/undefined</code>。这不是我们想要的。我们只想在我们的值为<code class="fe lw lx ly lz b">null</code>或<code class="fe lw lx ly lz b">undefined</code>时返回默认值。</p><p id="665d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当第一个操作数的计算结果为<code class="fe lw lx ly lz b">null</code>或<code class="fe lw lx ly lz b">undefined</code>(但没有其他错误值)时，nullish合并操作符只返回第二个操作数，从而避免了这个缺陷。</p><p id="9811" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="ml">提示:</em> </strong> <em class="ml">当某个属性不存在于对象深处时，可以同时使用可选的链接和无效合并操作符来返回默认值。例如:</em></p><figure class="ma mb mc md gt jo"><div class="bz fp l di"><div class="me mf l"/></div><figcaption class="mg mh gj gh gi mi mj bd b be z dk">Using Optional Chaining and Nullish Coalescing Operator Parallely</figcaption></figure><h1 id="1fbd" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">关键要点</h1><ul class=""><li id="13f0" class="mm mn in jx b jy lr kc ls kg nv kk nw ko nx ks mr ms mt mu bi translated">当你需要访问一个对象深处的属性时，你可以使用<strong class="jx io">可选的链接操作符(？。)</strong>避免因无效链导致的错误。</li><li id="b5fb" class="mm mn in jx b jy mv kc mw kg mx kk my ko mz ks mr ms mt mu bi translated">当您需要处理<code class="fe lw lx ly lz b">null/undefined</code>检查时，您可以使用<strong class="jx io"> Nullish合并运算符(？？)</strong>避免编写不必要的条件检查。</li></ul><h2 id="d228" class="ne ku in bd kv ny nz dn kz oa ob dp ld kg oc od lh kk oe of ll ko og oh lp oi bi translated">关于我</h2><p id="ca83" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我的职业是软件工程师。我喜欢研究前端技术，比如React、TypeScript。我是博客新手，喜欢与社区分享我的心得。我希望你会喜欢我的第一个博客。</p><p id="ef0b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢它的内容，请分享它来激励我写更多这样的东西。下一篇文章再见。</p></div><div class="ab cl nj nk hr nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ig ih ii ij ik"><p id="bd9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ml">最初发布于</em><a class="ae mk" href="https://codeslayer.hashnode.dev/coolest-javascript-operators" rel="noopener ugc nofollow" target="_blank"><em class="ml">https://code slayer . hash node . dev</em></a><em class="ml">。</em></p></div></div>    
</body>
</html>
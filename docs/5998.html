<html>
<head>
<title>How I Created My Own Stock Index Tracker with Time-Series Charts using Low-Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何用低代码创建了我自己的带有时间序列图表的股票指数跟踪器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-i-created-my-own-stock-index-tracker-with-time-series-charts-using-low-code-2e53cad5549f?source=collection_archive---------6-----------------------#2021-12-23">https://javascript.plainenglish.io/how-i-created-my-own-stock-index-tracker-with-time-series-charts-using-low-code-2e53cad5549f?source=collection_archive---------6-----------------------#2021-12-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="16eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一步一步的教程来建立任何仪表板或跟踪时间序列图表使用低代码！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/0f56b0b87fa3495a6e645c90894c8e9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hks5c7coEa_TvXSLKfu2A.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@nampoh?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Maxim Hopman</a> on <a class="ae ky" href="https://unsplash.com/s/photos/stock-market?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4e36" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最近开始投资，偶然发现一个产品叫Smallcase。它的工作方式是——专家为你创建一个多样化的股票和交易所交易基金的长期投资组合，并及时管理它。我真的很喜欢如何将股票添加到投资组合或篮子中以减少市场波动的想法。不幸的是，目前这个产品只对印度投资者开放，这促使我开发了一个应用程序，在那里我可以创建一个投资组合，并在此基础上创建一个自定义指数，具有比较道琼斯/ S和p等基准指数的功能。</p><p id="e544" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">从头开始构建这种应用程序会花费我很多时间；我将不得不选择一个前端框架，配置一个数据库，并在不同的可视化框架上工作，以构建时间序列图表。有了<a class="ae ky" href="https://www.appsmith.com/" rel="noopener ugc nofollow" target="_blank"> Appsmith </a>，我能够在短短几个小时内完成这个应用。如果你还不知道，Appsmith是一个开源的低代码框架，用于构建内部应用。在这篇博客中，我将带你浏览我创建这个应用程序的步骤。</p><p id="1b79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我更详细地分享一下这个应用的规格。</p><p id="f6d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用此应用程序，您可以执行以下操作:</p><ol class=""><li id="9724" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh le lf lg lh bi translated"><strong class="jm io">跟踪股票</strong>:设置过滤器，默认全天跟踪哪些股票，或者创建特定列表。</li><li id="818b" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">制作自己的篮子</strong>:将定制的股票投资组合制作成篮子。</li><li id="aa54" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">比较业绩的时序图</strong>:为这些投资组合创建一个定制指数，并使用时序图将它们与基准指数进行比较。</li><li id="3251" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh le lf lg lh bi translated"><strong class="jm io">通知</strong>:当市场有波动时发送通知和触发。</li></ol><p id="2fd3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这篇博客中，我还将致力于构建一些漂亮的时间序列图表，并构建我们可以与标准普尔500、道琼斯和纳斯达克相比的股票指数跟踪器。</p><p id="7916" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是该应用程序的一些截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/54557051869e465dad51a0008d88d42f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eUSGbXqnNUP6ueid"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of Custom Index Tracker on Appsmith</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/e1fe48e0352acfbce5a13c4980c49d0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vl_Vx7kdz8NJxHrg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of Custom Index Tracker on Appsmith — 2</figcaption></figure><p id="aaf8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们开始吧！</p><h1 id="5c42" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">我用什么来构建这个应用程序呢？</h1><blockquote class="mm mn mo"><p id="892e" class="jk jl mp jm b jn jo jp jq jr js jt ju mq jw jx jy mr ka kb kc ms ke kf kg kh ig bi translated">TLDR；我使用了Appsmith的<a class="ae ky" href="https://www.appsmith.com/" rel="noopener ugc nofollow" target="_blank"/>、<a class="ae ky" href="https://www.fusioncharts.com/charts/stock-charts" rel="noopener ugc nofollow" target="_blank"> Fusion Charts </a>、MarketStack的<a class="ae ky" href="https://marketstack.com/" rel="noopener ugc nofollow" target="_blank">API</a>、<a class="ae ky" href="https://www.alphavantage.co/documentation/" rel="noopener ugc nofollow" target="_blank"> Alphavantage </a>和Google Sheets作为后端来构建这个应用程序。</p></blockquote><p id="b69f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个应用程序主要使用Appsmith，这是一个开源的低代码工具，可以连接到任何数据库、API或GraphQL来构建管理面板、仪表板和内部工具。Appsmith还支持图表选项；它有一个内置的扩展，使用融合图表来创建数据可视化；这让我更容易构建自己的时间序列图表。为了实时获取所有股票数据和价格，我使用了MarketStack和Alphavantage的免费API。</p><p id="1078" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mp">(如果你按照这个教程来构建一个类似的应用程序，请记得生成你自己的API密匙！要了解更多关于生成自己的API密钥的信息，请阅读这篇博客)</em></p><p id="aebe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我用Google Sheets作为我的后台来查看股票列表，存储定制的股票投资组合和篮子。</p><h1 id="ec0a" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">创建篮子来分组和跟踪股票</h1><p id="1c72" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">创建投资组合的第一步，或者我喜欢称之为“篮子”，是建立一个用户界面。通过这种方式，一个表单可以包含我们的投资组合名称、创建时间和一个易于查看的徽标…以及一些虚荣心！😎</p><p id="dd5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我用Appsmith和Google Sheets创建这个用了不到5分钟；我是这样做的:</p><p id="d2f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注:我用过Appsmith的云版(社区版，免费)；您可以在使用Docker的本地版本或Appsmith的自托管版本上构建它。</p><ul class=""><li id="1dd7" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">在appsmith.com上注册一个新的免费帐户</li><li id="4192" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">点击数据源旁边的<code class="fe mz na nb nc b">+</code>图标，选择Google Sheets作为数据源。</li><li id="bda3" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">授权您的Google帐户，并在保存数据源后点击<code class="fe mz na nb nc b">NEW API</code>按钮创建一个新的查询。</li><li id="9a3d" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">将查询名称重命名为<code class="fe mz na nb nc b">assBasket</code>，因为我们需要在UI上访问查询名称。</li><li id="1054" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">我创建了一个新的google表单，包含以下几列:</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="a749" class="nh lp in nc b gy ni nj l nk nl">Basket Name<br/>Basket Image URL<br/>Basket Create On</span></pre><ul class=""><li id="f662" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">复制了google工作表的URL，并将其粘贴到电子表格URL属性下。</li><li id="1f4e" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">将查询类型设置为<code class="fe mz na nb nc b">Insert Sheet Row</code></li></ul><p id="6d7a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这样，我们的查询就准备好了。接下来，要在Appsmith上构建UI，只需从屏幕右侧的库中拖放小部件。Appsmith的画布响应速度非常快，你甚至可以在另外两个小部件之间拖动小部件，它会自动调整大小，为你节省宝贵的时间！我添加了一个容器小部件，这样我们的应用程序看起来就统一了；如果我们想让背景更加风格化，我们甚至可以选择添加颜色。然后，我放下了一个设置应用程序名称的文本小部件和一个按钮小部件。</p><p id="30db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/14ea55af1867a114f9c2f8580b7b9149.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Wvp1hro9C7szrMW-"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of Page 1 Custom Index Tracker</figcaption></figure><p id="0731" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">整洁，是吗？</p><p id="38c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，因为我们希望有一个表单来创建新的购物篮，所以我们应该让按钮打开一个模态。为此，请单击按钮小部件上的设置图标以查看属性窗格。</p><blockquote class="mm mn mo"><p id="cb69" class="jk jl mp jm b jn jo jp jq jr js jt ju mq jw jx jy mr ka kb kc ms ke kf kg kh ig bi translated">在属性窗格中，我们可以配置小部件的所有属性。你可以打开它，只需点击小部件，你会看到它停靠在右边栏，就像上面的截图所示。</p></blockquote><p id="e877" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们需要更新按钮的<code class="fe mz na nb nc b">onClick</code>属性，并将其设置为打开一个新的模态。您可以在那里创建它，或者将一个模态小部件拖放到画布上。两种选择都可行。你做你的。</p><p id="20ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要表单的三种类型的输入，所以我向这个模型添加了三个输入小部件。您可以按如下方式设置标签:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="4b98" class="nh lp in nc b gy ni nj l nk nl">Basket Name<br/>Basket Image URL<br/>Basket Create On</span></pre><p id="361e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是一台织布机的样子:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Screen Capture from Author</figcaption></figure><p id="13a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">到目前为止，事情看起来很好，为了能够根据创建时间跟踪投资组合的指数，我认为最好使用Appsmith上预装的库，因为手动跟踪是不可能的。我用moment.js做到了这一点。</p><p id="ffe3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以将<code class="fe mz na nb nc b">Basket Created On</code>的默认值设置为:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="1a4c" class="nh lp in nc b gy ni nj l nk nl">{{moment().format(“MM ddd, YYYY HH:mm:ss a”)}}</span></pre><p id="efc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这将在创建投资组合时节省时间。</p><p id="03ee" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Appmsith上，我们可以在平台的任何地方编写JS，使用小胡子<code class="fe mz na nb nc b">{{ }}</code>绑定来添加定制。还自带了<code class="fe mz na nb nc b">moment.js</code>库；因此，在创建这些投资组合时，调用该函数将节省时间。</p><p id="ae0c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我打开buttons属性窗格，设置<code class="fe mz na nb nc b">onClick</code>属性来运行一个查询，并选择<code class="fe mz na nb nc b">addBasket</code> query。</p><p id="a394" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有了这个，我的UI都设置好了；最后，我返回到<code class="fe mz na nb nc b">addBasket</code>查询，将Row对象设置为如下:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="7585" class="nh lp in nc b gy ni nj l nk nl">{<br/> "Basket Name":{{Input1.text}},<br/> "Basket Image URL": {{Input2.text}},<br/> "Basket Create On": {{Input3.text}}<br/>}</span></pre><p id="2c55" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意，我们将从输入小部件收集值，并通过<code class="fe mz na nb nc b">addBasket</code>查询将它们传递给Google Sheets。</p><p id="99e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，为了在这个页面上显示我们所有的购物篮，我们需要创建一个新的API。我从Google Sheets数据源创建了另一个名为<code class="fe mz na nb nc b">getBasket</code>的数据库。我将查询方法更新为<code class="fe mz na nb nc b">Fetch sheet row</code>列出excel表中的所有内容。下面是截图:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/0c9f26f836b824ae9e9c37a7f6738bed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ju7FBAz0YgMkuRQ1"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of getBasket query</figcaption></figure><p id="abb1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们必须将查询绑定到UI小部件。这部分可以这样做:</p><ul class=""><li id="87fd" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">打开<code class="fe mz na nb nc b">List1</code> widget的属性窗格，将项目设置为<code class="fe mz na nb nc b">{{getBasket.data}}</code></li><li id="4c8b" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">在列表小部件中，选择图像并将图像属性设置为<code class="fe mz na nb nc b">{{currentItem[“Basket Image URL”]}}</code></li><li id="7ed5" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">将文本小部件属性设置为<code class="fe mz na nb nc b">{{currentItem[“Basket Name”]}}</code>和<code class="fe mz na nb nc b">Basket Created On: {{currentItem[“Basket Create On”]}}</code></li></ul><p id="99fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是它现在的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/e2160506ab395de6c5c290c4538c40f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EF-oKgfLsrfkhFPq"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of getBasket query</figcaption></figure><p id="7a5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是我们到目前为止所能做到的:</p><ul class=""><li id="f571" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">增加了添加新的投资组合/篮子并在Appsmith上列出它们的功能。</li></ul><p id="0021" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们将在这些投资组合中加入股票。为此，最好创建一个新页面来搜索股票并将其添加到购物篮中。</p><p id="cb1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们创建一个新页面；可以选择左边栏的选项，命名为<code class="fe mz na nb nc b">‘Basket Page’</code>。这个想法是从<code class="fe mz na nb nc b">Page1</code>重定向到这个页面，并过滤篮子中的所有股票。</p><p id="8db1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是我们如何筛选股票呢？通常，我们会定期考虑一个<code class="fe mz na nb nc b">id</code>，并根据它进行过滤。类似地，在Appsmith上，当导航到购物篮页面时，我存储了购物篮页面的值，以便在购物篮页面上过滤和显示数据。</p><p id="b235" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我可以将下面提到的代码片段用在一个新的按钮部件上，这个按钮部件放在列表部件上。因此，当单击时，它应该保存列表中选中的项目，重定向到购物篮页面，并进行相应的过滤。</p><p id="d02d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们需要按钮的<code class="fe mz na nb nc b">onClick</code>属性来:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="ed38" class="nh lp in nc b gy ni nj l nk nl">{{<br/>(function () {<br/>    storeValue("selectedBasket", List1.selectedItem["Basket Name"]);<br/>    navigateTo("Basket Page") })() <br/>}}</span></pre><p id="14af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们需要使用来自Appsmith的storeValue将购物篮名称存储在一个名为<code class="fe mz na nb nc b">selectedBasket</code>的变量中，<code class="fe mz na nb nc b">List1.selectedItem</code>从所选择的列表项中复制数据。</p><p id="a272" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们需要使用<code class="fe mz na nb nc b"><strong class="jm io">navigateTo</strong></code> <strong class="jm io"> </strong>函数重定向到一个新的页面。</p><h1 id="8e4c" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">将股票加入篮子</h1><p id="d463" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">在我们将任何股票添加到我们的投资组合中之前，我们必须确保此页面根据从第一页选择的篮子过滤我的股票。因此，让我们添加一个容器和一个文本小部件来显示购物篮名称。</p><p id="847d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，该值来自全局存储，因此在文本小部件的属性窗格中的文本属性上，我们必须绑定来自Appsmith存储的值，这可以通过一行简单的代码来完成:</p><p id="dc0b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mz na nb nc b">{{appsmith.store.selectedBasket}}</code></p><p id="e97e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">好了，我们要添加的下一个很酷的功能是搜索功能。这样，我们可以轻松地搜索股票，并将其添加到篮子中；为此，我们需要添加另一个按钮和具有以下字段的模式:</p><ul class=""><li id="3db3" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">输入部件</li><li id="169c" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">一粒扣得很紧的纽扣</li><li id="1ee5" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">列出所有结果的表格小部件</li><li id="71b9" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">一个选择部件，将它们添加到我创建的购物篮列表中</li></ul><blockquote class="mm mn mo"><p id="0ffd" class="jk jl mp jm b jn jo jp jq jr js jt ju mq jw jx jy mr ka kb kc ms ke kf kg kh ig bi translated">表格小部件绝对值得高度赞扬。它允许我们添加过滤器和排序结果。我们可以根据股票的上市地点添加相关股票。例如，我可以简单地搜索纳斯达克，它过滤在那里上市的股票。如果您想知道使用表格小部件可以做的所有事情，您必须查看这个详细的博客。</p></blockquote><p id="3fb4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我告诉你我如何建造它之前，这里是它的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/92b4e7b2ac6bf3906ac305d2c22a84f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zm1Y_6UlZkjmDUsc"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Screenshot of Basket Page UI</figcaption></figure><p id="36e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">搜索特性与Stockdata的一个简单API一起工作，为了集成它，我遵循了以下步骤:</p><ul class=""><li id="45d4" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">点击数据源旁边的<code class="fe mz na nb nc b">+</code>图标</li><li id="47c2" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">选择<code class="fe mz na nb nc b">Create New API</code>，粘贴以下网址:</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="67b9" class="nh lp in nc b gy ni nj l nk nl">https://api.stockdata.org/v1/entity/search?search={{stockcode.text}}&amp;api_token=YOUR_API_HERE</span></pre><ul class=""><li id="ee04" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">将API查询重命名为<code class="fe mz na nb nc b">stockSearch</code></li></ul><p id="a0b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了让它工作，确保在这里添加来自Stockcode的API令牌。请注意，我在这里使用了<code class="fe mz na nb nc b">moustache</code>绑定。这将动态添加我在输入小部件中搜索的值。现在，让我们回到模态，更新小部件的名称。</p><p id="5952" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我将小部件的名称重命名为以下名称，以便于将数据推送到工作表中:</p><p id="7cde" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">输入部件:<code class="fe mz na nb nc b">stockcode</code></p><p id="c6cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">表格小工具:<code class="fe mz na nb nc b">stockSearchTable</code></p><p id="8da2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，搜索API从输入小部件获取值，在表格小部件上，我们可以为以下功能绑定来自API的结果:</p><ul class=""><li id="e339" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">设置buttons onClick属性以运行查询，并选择stockSearch query。</li><li id="3933" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">使用<code class="fe mz na nb nc b">{{ stockSearch.data }}</code>将<code class="fe mz na nb nc b">stockSearch</code>查询绑定到表格小部件</li></ul><p id="2487" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，我们要选择要将搜索到的股票添加到哪个篮子中；为此，我只是从<code class="fe mz na nb nc b">Page1</code>复制了我的API ( <code class="fe mz na nb nc b">getBaskets</code>，并用下面的代码将其绑定到所选的小部件上:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="86b2" class="nh lp in nc b gy ni nj l nk nl">{{<br/>getBaskets.data.map((row) =&gt; <br/>  {<br/>    return {<br/>      label: row["Basket Name"],<br/>       value: row["Basket Name"]<br/>    }<br/>  })<br/>}}</span></pre><p id="6717" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们需要将所有这些信息保存到一个Google Sheet上，所以让我们在同一个Google Sheet下创建一个新的电子表格，并从连接的数据源创建一个新的API。我将这个工作表命名为<code class="fe mz na nb nc b">Watchlisted Stocks</code>，并将查询命名为<code class="fe mz na nb nc b">addtoBasket</code>。</p><p id="0753" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这些是我在谷歌表单上的栏目:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="e951" class="nh lp in nc b gy ni nj l nk nl">symbol <br/>name<br/>type<br/>exchange<br/>exchange_long<br/>mic_code<br/>country<br/>watch_listed_on<br/>basket</span></pre><p id="7388" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在收集所有这些信息的查询中，我们必须将Row对象更新为以下内容:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="bdbe" class="nh lp in nc b gy ni nj l nk nl">{<br/>"symbol": "{{stockSearchTable.selectedRow.symbol}}",<br/>"name":"{{stockSearchTable.selectedRow.name}}",<br/>"type":"{{stockSearchTable.selectedRow.type}}",<br/>"exchange":"{{stockSearchTable.selectedRow.exchange}}",<br/>"exchange_long": "{{stockSearchTable.selectedRow.exchange_long}}",<br/>"mic_code": "{{stockSearchTable.selectedRow.mic_code}}",<br/>"country":"{{stockSearchTable.selectedRow.country}}",<br/>"watch_listed_on": {{moment().format('MMMM Do YYYY, h:mm:ss a')}} ,<br/>"basket": {{Select1.selectedOptionValue}}<br/>}</span></pre><p id="374c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有了这最后一步，我们的监视名单就准备好了。然而，为了在页面上显示它，我们必须添加一个新的表格小部件。等等，我还得把所有被监视的股票从谷歌列表里调出来。这非常简单，我从GSheets数据源创建一个新的查询，将方法设置为<code class="fe mz na nb nc b">Fetch Sheets Row</code>，复制我的GSheets URL，并将我的工作表名称更新为Watchlisted Stocks。</p><p id="eb87" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们必须将它绑定到新的table小部件上，但在这里，它应该只过滤添加到这个篮子或投资组合中的股票，我在绑定时使用了一个简单的转换，使用了以下代码片段:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="6193" class="nh lp in nc b gy ni nj l nk nl">{{ <br/>    getStocksfromBaskets.data.filter((item) =&gt; {<br/>       return item.basket == appsmith.store.selectedBasket<br/>    }) <br/>}}</span></pre><p id="21ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如您所见，我们现在根据重定向时保存的Appsmith store中的selectedBasket值过滤股票！</p><p id="fb2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们现在已经准备好了所有的投资组合和股票。<br/>现在是数据可视化的时候了！</p><h1 id="4d21" class="lo lp in bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">构建时间序列图表和跟踪索引</h1><p id="8b11" class="pw-post-body-paragraph jk jl in jm b jn mt jp jq jr mu jt ju jv mv jx jy jz mw kb kc kd mx kf kg kh ig bi translated">如前所述，Appsmith的图表小部件附带了Fusion Chart配置，这使得构建时间序列图表变得更加容易。我喜欢的另一件事是，我甚至可以为我在应用程序中观察到的股票创建蜡烛图。这些图表被交易者用来根据过去的模式确定可能的价格变动。</p><p id="43ac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，让我向您展示如何使用MarketStack API获取所有股票价格的详细信息:</p><ul class=""><li id="d8ed" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">在购物篮页面中，我创建了一个新的API (marketStackAPI)，URL如下:</li></ul><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="1223" class="nh lp in nc b gy ni nj l nk nl">http://api.marketstack.com/v1/eod?access_key=YOUR_API_KEY&amp;symbols={{appsmith.store.current}}&amp;date_from=2021-11-01&amp;date_to=2021-12-12</span></pre><p id="bb3f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意:我正在过滤从2020年11月1日到2021年12月12日的数据，您可以根据您的需求相应地更新此API。</p><p id="f70c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在API中，您可以看到，我添加了一个名为current的Appsmith存储变量；这是为了动态获取我们想要分析或添加到我们的追踪器中的符号或股票的股价。</p><p id="685e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们需要在JS对象下编写一个代码片段，存储我的投资组合中所有股票的所有数据。</p><p id="6325" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我用过的:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="8ed9" class="nh lp in nc b gy ni nj l nk nl">export default {<br/> <br/>getBasketGraph: () =&gt; {</span><span id="4a46" class="nh lp in nc b gy no nj l nk nl">let stocks = getStocksfromBaskets.data.filter((item) =&gt; <br/>item.basket == appsmith.store.selectedBasket)<br/>  <br/>  let stockcodes = stocks.map(item =&gt; item.symbol)<br/>  <br/>  let allStockData = [];<br/>  <br/>  stockcodes.map((item, index)=&gt; {<br/>    storeValue("current", item);<br/>     marketStackAPI.run(()=&gt; {<br/>     let tempData = marketStackAPI.data;<br/>     allStockData.push(tempData.data);<br/>    }, () =&gt; {}, { allStockData });<br/>  })<br/>  <br/>  storeValue("allStockData”, allStockData)<br/>  <br/>  return appsmith.store.allStockData;<br/> }<br/>}</span></pre><p id="1ed4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是这段代码的作用:</p><ul class=""><li id="2b00" class="kz la in jm b jn jo jr js jv lb jz lc kd ld kh my lf lg lh bi translated">将篮子中出现的所有符号存储在stockcodes变量中</li><li id="98fc" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">遍历stockcodes数组并将所有股票价格存储在一个新变量<code class="fe mz na nb nc b">allStockData</code>中</li><li id="4e34" class="kz la in jm b jn li jr lj jv lk jz ll kd lm kh my lf lg lh bi translated">执行函数时返回存储变量</li></ul><p id="f6a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了创建一个时间序列图表，我们需要将一个新的图表小部件拖放到画布上，在table小部件的下面。</p><p id="fa2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它看起来是这样的:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/ac29fdd57f6ed40b06069133c0c4bb7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*51lM8wcJ_xOD-hHE"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Chart Widget on Appsmith</figcaption></figure><p id="f37d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它带有一个默认配置，因此我们必须将类型更改为自定义图表，以便将数据配置到这个图表上。为了做到这一点，我们需要遵循特定的格式。以下是融合图表的基本配置:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="9416" class="nh lp in nc b gy ni nj l nk nl">{<br/>  "type": "",<br/>  "dataSource": {<br/>    "chart": { },<br/>    "data": [ ]<br/>  }<br/>}</span></pre><p id="68f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们需要传入三个参数，图表配置、数据和需要在x轴上显示的类别。下面是更新后的代码:</p><pre class="kj kk kl km gt nd nc ne nf aw ng bi"><span id="a38e" class="nh lp in nc b gy ni nj l nk nl">{<br/>    "type": "MultiAxisLine",<br/>    "dataSource": {<br/>        "chart": {<br/>            "xaxisname": "Date",<br/>            "vdivlinealpha": "",<br/>            "labeldisplay": "ROTATE",<br/>            "theme": "fusion"<br/>        },<br/>        "categories": [</span><span id="cea2" class="nh lp in nc b gy no nj l nk nl">{<br/>                "category": {<br/>                    {<br/>                        marketStackAPI.data.data.reverse().map((row, index) =&gt; {<br/>                            return {<br/>                                "label": moment(row.date).format("LL"),<br/>                            }<br/>                        })</span><span id="ed0f" class="nh lp in nc b gy no nj l nk nl">}<br/>                }<br/>            }<br/>        ],<br/>        "axis": [{<br/>                "title": "Price",<br/>                "dataset": [{<br/>                        "seriesname": "Apple",<br/>                        "data": {<br/>                            {<br/>                                marketStackAPI.data.data.map((row, index) =&gt; {<br/>                                    return {<br/>                                        "value": row.close,<br/>                                    }<br/>                                })</span><span id="6817" class="nh lp in nc b gy no nj l nk nl">}<br/>                        }<br/>                    },<br/>                }<br/>            ]<br/>        }<br/>    }</span></pre><p id="16b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，这是我们的图表在上述配置下的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/8525a05d5b12db67e5b9854f2886694e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kd-ozBtXC9XV_bQz"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Charts from Custom Index</figcaption></figure><p id="921a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，我还创建了一个列表，通过简单的数学运算告诉我们索引值:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/162f148742260e0415f67435a9e75b3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pGAd3-dHkcKlT-wR"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image by Author | Custom Index and Predictions with Simple Math</figcaption></figure><p id="e5c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">想象一下，有一个自己定制的app终端，可以在一个地方跟踪你所有的股票指数。如果你喜欢加密，你可以扩展这个应用程序，甚至有一个加密跟踪器。</p><p id="a4ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望你能成功地遵循这个教程，并建立自己的应用程序。如果你被困在某个地方，我很乐意帮助你:)</p><p id="4ede" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mp">更多内容尽在</em> <a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="mp">说白了. io </em> </strong> </a> <em class="mp">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="mp">免费周报</em> </strong> </a> <em class="mp">。在我们的</em> <a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="mp">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mp">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Next.js — How to Set Up i18next and Translation Management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js —如何设置i18next和翻译管理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/next-js-how-to-set-up-i18next-and-translation-management-26af2fd6829c?source=collection_archive---------5-----------------------#2021-07-02">https://javascript.plainenglish.io/next-js-how-to-set-up-i18next-and-translation-management-26af2fd6829c?source=collection_archive---------5-----------------------#2021-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/7131a7035f49f764e26014e3486318ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFw4FlaCJ6zv_kbcR5DqCg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Next.js: A walkthrough using i18next and Google Translate</figcaption></figure><p id="2ab8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本教程中，我们将学习如何使用<a class="ae kx" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next </a>来国际化Next.js应用程序。为了让事情变得更简单，我们将使用<a class="ae kx" href="https://i18nexus.com" rel="noopener ugc nofollow" target="_blank"> i18nexus </a>来自动翻译和管理我们的字符串。</p><p id="fbcd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">走吧！⚡️ </strong></p><h1 id="0172" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">入门指南</h1><p id="2bb4" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">让我们使用<a class="ae kx" href="https://nextjs.org/docs/api-reference/create-next-app" rel="noopener ugc nofollow" target="_blank"> create-next-app </a>引导一个简单的Next.js应用程序:</p><p id="6a0d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">npx create-next-app</code></p><p id="dd35" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在为我们的应用程序键入标题后，我们将<code class="fe mb mc md me b">cd</code>进入应用程序目录并安装<a class="ae kx" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next </a>:</p><p id="19f1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">npm install next-i18next --save</code></p><p id="f09f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">是时候国际化了！🌐</p><h1 id="8b48" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">配置</h1><p id="d58c" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">随着Next.js v10的发布，我们获得了一个处理国际化路由和区域检测的出色的内置解决方案。<code class="fe mb mc md me b">next-i18next</code>旨在与这种新的国际化支持协同工作。</p><p id="5b19" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要使用<code class="fe mb mc md me b">next-i18next</code>，我们需要在名为<code class="fe mb mc md me b">next-i18next.config.js</code>的应用程序的根目录下创建一个i18next配置文件。这将定义我们希望我们的应用程序使用的语言。让我们支持英语和瑞典语。</p><p id="4432" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们需要初始化我们的<code class="fe mb mc md me b">defaultLocale</code>(我们应用程序的默认语言)和<code class="fe mb mc md me b">locales</code>(我们希望我们的应用程序支持的语言列表):</p><p id="d336" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> next-i18next.config.js </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="7d75" class="mn kz in me b gy mo mp l mq mr">module.exports = {<br/>  i18n: {<br/>    defaultLocale: 'en',<br/>    locales: ['en', 'sv']<br/>  },<br/>  reloadOnPrerender: process.env.NODE_ENV === 'development'<br/>}</span></pre><p id="c141" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">还建议在开发中启用<code class="fe mb mc md me b">reloadOnPrerender</code>选项。启用此选项后，当我们更改翻译文件时，<code class="fe mb mc md me b">next-i18next</code>将重新加载我们的翻译。</p><p id="825e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们需要将<code class="fe mb mc md me b">i18n</code>属性添加到<code class="fe mb mc md me b">next.config.js</code>中，只需从i18next配置中导入<code class="fe mb mc md me b">i18n</code>对象:</p><p id="dfcd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> next.config.js </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="ca5d" class="mn kz in me b gy mo mp l mq mr">const { i18n } = require('./next-i18next.config');<br/><br/>module.exports = {<br/>  i18n,<br/>  reactStrictMode: true<br/>}</span></pre><p id="2b22" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">next-i18next</code>库使用Next需要的相同的<code class="fe mb mc md me b">i18n</code>配置结构。因此，不需要在两个地方管理相同的设置，我们只需按照<a class="ae kx" href="https://github.com/isaachinman/next-i18next" rel="noopener ugc nofollow" target="_blank"> next-i18next文档</a>中的建议，将<code class="fe mb mc md me b">next-i18next</code>配置导入到<code class="fe mb mc md me b">next.config.js</code>中。</p><p id="fd49" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">应用翻译</strong></p><p id="4e64" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">设置<code class="fe mb mc md me b">next-i18next</code>的最后一步是用<code class="fe mb mc md me b">appWithTranslation</code> HOC(高阶组件)包装我们的应用。这个组件将为我们所有的页面提供i18next上下文。我们的<code class="fe mb mc md me b">_app.js</code>文件应该是这样的:</p><p id="b7f3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> _app.js </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="8441" class="mn kz in me b gy mo mp l mq mr">import '../styles/globals.css';<br/>import { appWithTranslation } from 'next-i18next';<br/><br/>const MyApp = ({ Component, pageProps }) =&gt; &lt;Component {...pageProps} /&gt;<br/><br/>export default appWithTranslation(MyApp);</span></pre><p id="a81b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们准备好出发了！🚀</p><h1 id="8daf" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">i18nexus集成</h1><p id="d4de" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">如果你以前使用过i18next，但从未在i18nexus上使用过，那你就有得吃了。</p><p id="ee45" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">i18nexus通过将我们的应用程序文本存储在云中，使管理我们的翻译变得简单了一百万倍。它甚至可以将我们的字符串翻译成我们需要的多种语言。每当我们准备聘请专业翻译时，我们只需邀请他们参加我们的i18nexus项目，让他们编辑翻译！</p><p id="f833" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们开始吧！</p><p id="4ed2" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你还没有i18nexus账户，去<a class="ae kx" href="https://app.i18nexus.com/sign-up" rel="noopener ugc nofollow" target="_blank">i18nexus.com</a>注册一个免费账户。命名我们的项目后，我们将被定向到我们的语言仪表板:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/0b6437feefd20cd9c2ea0e5fe7413f3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K0orZ6tosGWb3GuEYvHZTQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">i18nexus project dashboard</figcaption></figure><p id="ee87" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第一个语言块是我们的基本语言，它应该与我们在<code class="fe mb mc md me b">next-i18next.config.js</code>中为<code class="fe mb mc md me b">defaultLocale</code>属性设置的语言相匹配。</p><p id="64c8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，我们将点击<strong class="kb io">添加语言</strong>来选择我们希望应用程序支持的语言环境。由于我们已经在<code class="fe mb mc md me b">next-i18next.config.js</code>的<code class="fe mb mc md me b">locales</code>列表中添加了<code class="fe mb mc md me b">sv</code>(瑞典语)，我们将选择瑞典语:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/5b4c8d758214ac60fd0cd09d25b98ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rELtPG31hB8drpUHG9286A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Adding Swedish as a supported language</figcaption></figure><p id="b4cd" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，让我们点击右上角的<strong class="kb io">打开项目</strong>进入字符串管理页面，我们将在这里添加字符串。</p><p id="7371" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">名称空间</strong></p><p id="cbe4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在页面的顶部，有一个标记为<strong class="kb io">名称空间</strong>的下拉列表，其中包含一个已经为我们创建的名称空间，名为“default”。</p><p id="1517" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">按照惯例，应用程序中的每个页面都有一个名称空间，出现在多个页面上的公共字符串也有一个名为“公共”的名称空间。</p><p id="1b9d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们将“default”名称空间重命名为“<strong class="kb io"> common </strong>”，然后创建一个名为“<strong class="kb io"> home </strong>”的名称空间，用于我们的主页:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/db935907ee9c7587df4a185464ff2303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lj2SPK8UkXThdwdv85rNdg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Managing namespaces</figcaption></figure><p id="fc47" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">重要提示:</strong>尽管我们不会在本演练中使用“common”命名空间，但这是必需的。我们稍后将讨论原因。🙂</p><p id="543c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要添加我们的第一个字符串，请点击<strong class="kb io">添加字符串</strong>。我将在我的“home”名称空间中添加一个字符串，表示“您好，欢迎使用我的应用程序！”：</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/7d963c84d27708f3a73e117170d8fc12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eWDEQy6F8LaHJai-JjU6YQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Adding a new string with key “welcome_msg”</figcaption></figure><p id="8e1f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">键</strong>是我们在代码中引用这个字符串的方式。</p><p id="c4a7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">值</strong>是将在我们的应用程序中呈现的文本。</p><p id="4e02" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">详细信息</strong>字段是可选的。这是为了在我们准备聘请专业翻译时，提供有关字符串上下文的任何额外信息。我们甚至可以在这里添加一张图片来提供更多的背景信息。</p><p id="444c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">添加字符串后，我们可以展开行来查看我们的自动Google翻译:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/d2116a20377207bf198458f59bb28bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lp_1QokOCJRGgrM1-dP3Og.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">New strings are automatically translated to all of our supported languages</figcaption></figure><h1 id="c47e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">连接我们的翻译</h1><p id="c2c6" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">我们将使用<a class="ae kx" href="https://www.npmjs.com/package/i18nexus-cli" rel="noopener ugc nofollow" target="_blank"> i18nexus CLI </a>在Next.js应用程序中导入i18nexus翻译:</p><p id="9818" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">npm install i18nexus-cli -g</code></p><p id="5735" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果我们转到i18nexus中的<strong class="kb io">导出</strong>选项卡，我们将能够找到我们的项目API密钥:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/028d4d8f60456d6bb25e2c3a74d012a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WgAJK52fQe7f8fHMAgWXSQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">i18nexus Export tab</figcaption></figure><p id="cf94" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们的应用程序目录中，我们所要做的就是用我们的API键运行<code class="fe mb mc md me b">i18nexus pull</code>,所有我们最新的翻译将被下载到我们的项目目录中！</p><p id="fcd0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">$ i18nexus pull --api-key &lt;YOUR_API_KEY&gt;</code></p><p id="2e00" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们所有的翻译都将在<code class="fe mb mc md me b">public/locales</code>进行，这也是<code class="fe mb mc md me b">next-i18next</code>所期待的。</p><p id="f645" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们还可以添加我们的API键作为一个名为<code class="fe mb mc md me b">I18NEXUS_API_KEY</code>的环境变量，这样我们就可以只使用<code class="fe mb mc md me b">i18nexus pull</code>而不用每次都输入API键。</p><p id="0910" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为此，我们只需在包含<code class="fe mb mc md me b">I18NEXUS_API_KEY=YOUR_API_KEY.</code>的应用程序的根目录下创建一个名为<code class="fe mb mc md me b">.env</code>的环境变量文件</p><p id="1044" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">奖励积分:</strong></p><p id="9835" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果我们想在每次启动开发服务器或构建应用程序时自动获取最新的翻译，我们只需更新<code class="fe mb mc md me b">package.json</code>中的脚本:</p><p id="06b1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> package.json </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="f7bf" class="mn kz in me b gy mo mp l mq mr">...<br/>"scripts": {<br/>   "dev": "i18nexus pull &amp;&amp; next dev",<br/>   "build": "i18nexus pull &amp;&amp; next build",<br/>   "start": "i18nexus pull &amp;&amp; next start"<br/> }<br/>...</span></pre><p id="428e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你这样做，你也应该安装<code class="fe mb mc md me b">i18nexus-cli</code>作为一个开发依赖:</p><p id="e309" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">npm install i18nexus-cli --save-dev</code></p><h1 id="4640" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">呈现我们的翻译</h1><p id="8978" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">现在我们的应用程序只是使用样板<code class="fe mb mc md me b">create-next-app</code>主页:</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/45fd08f7f465e38701a1fe64334701ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wr7KI80BrsWJD6BQ7T_SFg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Boilerplate create-next-app</figcaption></figure><p id="ae13" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">服务器侧转</strong></p><p id="550f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们的主页中，我们需要从<code class="fe mb mc md me b">next-i18next</code>导入一个名为<code class="fe mb mc md me b">serverSideTranslations</code>的函数。该功能需要在每个<strong class="kb io">页面级</strong>组件的<code class="fe mb mc md me b">getStaticProps</code>中运行。它为我们的页面提供翻译和配置选项作为道具。我们将把它添加到我们的<code class="fe mb mc md me b">pages/index.js</code>:</p><p id="0901" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> pages/index.js </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="f587" class="mn kz in me b gy mo mp l mq mr">import { serverSideTranslations } from 'next-i18next/serverSideTranslations';</span><span id="2345" class="mn kz in me b gy mt mp l mq mr">export async function getStaticProps({ locale }) {<br/>  return {<br/>    props: {<br/>      ...(await serverSideTranslations(locale, ['home'])),<br/>    }<br/>  } <br/>}</span><span id="6a2a" class="mn kz in me b gy mt mp l mq mr">...</span></pre><p id="b876" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mb mc md me b">severSideTranslations</code>函数接受一个地区作为第一个参数，接受这个页面所需的名称空间作为第二个参数。这确保了我们的应用程序只需要加载页面所需的名称空间。下一步从<code class="fe mb mc md me b">getStaticProps</code>传递<code class="fe mb mc md me b">locale</code>。</p><p id="692a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">使用翻译</strong></p><p id="9da1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，让我们从<code class="fe mb mc md me b">next-i18next</code>导入<code class="fe mb mc md me b">useTranslation</code>钩子。<code class="fe mb mc md me b">useTranslation</code>钩子包含一个名为<code class="fe mb mc md me b">t</code>的函数，它将一个键作为参数，并呈现正确的翻译。</p><p id="b90b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我将清除掉由<code class="fe mb mc md me b">create-next-app</code>生成的大部分样板文件，只在我的主页上呈现一行文本。这是我的整个主页，使用<code class="fe mb mc md me b">useTranslation</code>来呈现我的<code class="fe mb mc md me b">welcome_msg</code>字符串:</p><p id="4416" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io"> pages/index.js </strong></p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="b1e8" class="mn kz in me b gy mo mp l mq mr">import Head from "next/head";<br/>import styles from "../styles/Home.module.css";<br/>import { serverSideTranslations } from "next-i18next/serverSideTranslations";<br/>import { useTranslation } from "next-i18next";</span><span id="1e13" class="mn kz in me b gy mt mp l mq mr">export async function getStaticProps({ locale }) {<br/>  return {<br/>    props: {<br/>      ...(await serverSideTranslations(locale, ["home"]))<br/>    }<br/>  };<br/>}</span><span id="ed0f" class="mn kz in me b gy mt mp l mq mr">export default function Home() {<br/>  const { t } = useTranslation();</span><span id="afe7" class="mn kz in me b gy mt mp l mq mr">  return (<br/>    &lt;div className={styles.container}&gt;<br/>      &lt;Head&gt;<br/>        &lt;title&gt;Create Next App&lt;/title&gt;<br/>        &lt;link rel="icon" href="/favicon.ico" /&gt;<br/>      &lt;/Head&gt;</span><span id="f029" class="mn kz in me b gy mt mp l mq mr">      &lt;main className={styles.main}&gt;<br/>        &lt;h1 className={styles.title}&gt;{t("home:welcome_msg")}&lt;/h1&gt;<br/>      &lt;/main&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="6d7b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">注意，当我们使用<code class="fe mb mc md me b">useTranslation</code>时，我们需要用关键字指定名称空间，比如:<code class="fe mb mc md me b">home:welcome_msg</code>。</p><p id="a536" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们唯一不需要在<code class="fe mb mc md me b">useTranslation</code>中指定名称空间的时候是当我们引用的键在我们的<strong class="kb io">默认名称空间</strong>中的时候。默认情况下，i18next将我们的默认名称空间设置为“common”。如果您愿意，您可以通过<code class="fe mb mc md me b">next-i18next.config.js</code>中的<code class="fe mb mc md me b">defaultNS</code>配置选项更改您的默认名称空间。</p><p id="ce84" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们运行<code class="fe mb mc md me b">npm run dev</code>，检查一下！</p><p id="4eff" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><a class="ae kx" href="http://localhost:3000/de" rel="noopener ugc nofollow" target="_blank"><strong class="kb io">http://localhost:3000/</strong></a></p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/a8c54135bb1d251556e48436d5c23119.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVgKWZo2dZqL7o23Y3fH8g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Rendering English translation</figcaption></figure><p id="1d1c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们做到了！🎉</p><h1 id="3c1a" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用其他语言</h1><p id="4d78" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">现在，我们的应用程序正在使用<code class="fe mb mc md me b">en</code>，因为这是我们在<code class="fe mb mc md me b">next.config.js</code>中设置的<code class="fe mb mc md me b">defaultLocale</code>。</p><p id="4e24" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果您还记得，我们将瑞典语(<code class="fe mb mc md me b">sv</code>)添加到了我们的区域列表中。要查看我们的瑞典语应用，我们只需在URL末尾添加<code class="fe mb mc md me b">/sv</code>。如果用户的浏览器语言设置为瑞典语，Next会自动将他们重定向到<code class="fe mb mc md me b">/sv</code>路线。让我们看看我们的应用程序在瑞典语中是什么样子的:</p><p id="9300" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><a class="ae kx" href="http://localhost:3000/sv" rel="noopener ugc nofollow" target="_blank"><strong class="kb io">http://localhost:3000/SV</strong></a></p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/0c6b2666201c934979f6fb1e55d2feaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hllmyxHlwtXILYMC93teeA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Rendering Swedish translation</figcaption></figure><p id="06c1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">看来我们是国际化专家了！😎</p><p id="95d0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要了解更多关于国际化路由和转换到不同语言的信息，请快速阅读Next.js文档<a class="ae kx" href="https://nextjs.org/docs/advanced-features/i18n-routing" rel="noopener ugc nofollow" target="_blank">这里的</a>。</p><h1 id="c517" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">那都是乡亲们！</h1><p id="c126" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">现在，您已经有了一个完整的Next.js应用程序，它具有国际化路由、i18next集成和使用i18nexus的自动化翻译管理！</p><p id="9709" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mu">更多内容请看</em><a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mu">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
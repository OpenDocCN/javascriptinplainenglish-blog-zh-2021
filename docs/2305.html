<html>
<head>
<title>Route Guards in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应中的路线守卫</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/route-guards-in-react-5441b7d31334?source=collection_archive---------0-----------------------#2021-05-14">https://javascript.plainenglish.io/route-guards-in-react-5441b7d31334?source=collection_archive---------0-----------------------#2021-05-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="f619" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在React项目中像专家一样实现授权。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/84429764f101784c6694cf6beb6213f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zz4iMkbQmuoUdAUWA8Oyjg.png"/></div></div></figure><p id="ea54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">React是目前最流行的JavaScript框架。但是如果你在任何规模上或者为你的爱好项目使用过React，它没有很多内置的特性，这可能是一件好事也可能是一件坏事。</p><h2 id="c933" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">问题空间</h2><p id="a4e0" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">安全性是许多公司非常关心的问题。对于所有现实世界的项目，授权和认证都是强制性的。Route Guard帮助我们管理混合的授权层。</p><h2 id="b378" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">解决办法</h2><p id="c4a6" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">使用路线守卫是Angular中我最喜欢的功能之一，在这里你可以对你的路线进行更精细的控制，并且可以根据不同的条件使用不同的功能。</p><p id="94ef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要了解更多关于Angular中的路线守卫，可以访问这个<a class="ae ls" href="https://angular.io/guide/router" rel="noopener ugc nofollow" target="_blank">链接</a>。</p><p id="ad00" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">我们将尝试在React中实现同样的功能。</strong></p><h1 id="2486" class="lt kv in bd kw lu lv lw kz lx ly lz lc ma mb mc lf md me mf li mg mh mi ll mj bi translated">什么是路线守卫？</h1><p id="aa9f" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">Route Guard是一种对整个应用程序中可用的路线进行更多控制的机制。这些可以是简单的菜单权限，用于激活或停用路由。</p><p id="ee1a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么我们在应用程序中需要Route Guards是因为一个非常基本的需求——我们不希望所有用户对应用程序的所有资源拥有相同的特权。</p><p id="b27e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个例子是，你的应用程序用于管理资金转移，普通用户可以请求不同的金融服务，管理员可以批准。</p><p id="79ab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，为了隐藏和控制收到的所有请求的列表，我们必须将路由限制为只有admin用户，其他任何人都不能访问该路由。</p><p id="728b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">代码入门:</strong></p><p id="7191" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">我们将使用的工具:</strong></p><pre class="kj kk kl km gt mk ml mm mn aw mo bi"><span id="9c9e" class="ku kv in ml b gy mp mq l mr ms">"react-router-dom": "^5.2.0"</span></pre><h2 id="fc1a" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">基本应用程序</h2><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h2 id="39ef" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">RootGuard</h2><p id="7683" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">在这个守卫中，我们可以导入所有不同的守卫，并用它们特定的实现和用例包装儿童道具。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h2 id="cedc" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">AuthGuard</h2><p id="6158" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">这是处理每个路由的权限的安全措施，您可以从任何安全最佳实践中获取菜单权限，并以这样的方式存储它，即更改权限会使JSON无效，并从API带来，或者您可以加密并存储它，并使用中存在的密钥。env你可以解密这个令牌。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h2 id="feb0" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">各部分如何协同工作？</h2><p id="b916" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">就在我们应用程序内的路由器实现下面，我们添加了根保护，它接收所有作为孩子的应用程序的内部内容。</p><p id="3071" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在react中，子元素是一种特殊类型的道具，用于获取它所包裹的标签的所有内部元素。这允许我们执行某些操作，并且不管内部内容如何，我们的应用程序也有一些共同的样式。</p><p id="3c51" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Root Guard包含我们的第一个guard AuthGuard，它检查该应用程序的权限，并根据您的应用程序要求的任何逻辑，您可以控制应该激活哪个路由。</p><p id="fe58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们有使用效果监控我们的位置名称，位置名称只不过是当前激活的路线，每当它发生变化，警卫再次开火。</p><p id="39bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们当前的实现在请求的路由是列表时进行检查，如果用户没有权限，它会将他们重定向到主页。您也可以将他们重定向到另一个未经授权的位置，这取决于您认为如何对您的应用程序更好。</p><p id="5b4d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我可以访问除列表之外的所有页面，无论何时，我都可以尝试使用按钮或直接粘贴URL或一些我不知道的漏洞，它会将我重定向回来</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mv"><img src="../Images/a1add5778904fa1f62eae77431ae8ff3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9_OmloUtee_AXwFq_vsdjw.png"/></div></div></figure><h2 id="a896" class="ku kv in bd kw kx ky dn kz la lb dp lc jv ld le lf jz lg lh li kd lj lk ll lm bi translated">亲Tip</h2><p id="fca3" class="pw-post-body-paragraph jk jl in jm b jn ln jp jq jr lo jt ju jv lp jx jy jz lq kb kc kd lr kf kg kh ig bi translated">我建议让您的API也知道使用某种中间件登录的用户权限和授权，这样您就不会对系统资源进行不必要的更改。</p><p id="b14d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更多有趣的文章敬请关注。和平！</p><p id="dbaf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mw">更多内容尽在</em><a class="ae ls" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mw">plain English . io</em></a></p></div></div>    
</body>
</html>
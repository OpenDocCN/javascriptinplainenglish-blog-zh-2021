<html>
<head>
<title>Building a dynamic form from a JSON schema with Formik</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Formik从JSON模式构建动态表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-dynamic-form-from-a-json-schema-37f0e2543c3b?source=collection_archive---------3-----------------------#2021-10-23">https://javascript.plainenglish.io/building-a-dynamic-form-from-a-json-schema-37f0e2543c3b?source=collection_archive---------3-----------------------#2021-10-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="1d4e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">大约6个月前，<a class="ae ki" href="https://www.gatsbyjs.com/blog/gatsbyconf-product-announcements" rel="noopener ugc nofollow" target="_blank"> Gatsby v3发布了</a>，我已经超级兴奋地将这个博客升级到v3并开始使用<a class="ae ki" href="https://www.gatsbyjs.com/docs/reference/release-notes/v3.0/#incremental-builds-in-oss" rel="noopener ugc nofollow" target="_blank">增量版本</a>，但是【可悲的是】<a class="ae ki" href="https://pablo.gg/en/" rel="noopener ugc nofollow" target="_blank">我的个人博客</a>有太多的定制，所以升级到Gatsby v3并不是一件容易的事情。</p><p id="44e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">幸运的是，我的开源项目<a class="ae ki" href="https://github.com/blopa/Resume-Builder" rel="noopener ugc nofollow" target="_blank"> Resume Builder </a>没有太多定制，所以我能够通过简单地运行<code class="fe kj kk kl km b">ncu -u</code>(由<a class="ae ki" href="https://github.com/raineorshine/npm-check-updates" rel="noopener ugc nofollow" target="_blank"> npm-check-updates </a>发出的命令)将其升级到Gatsby v3。但是在升级到Gatsby v3之后，我有点忘乎所以，决定实现一些新功能，比如从2018年开始我就一直在积压的<a class="ae ki" href="https://github.com/blopa/Resume-Builder#cover-letter-editor" rel="noopener ugc nofollow" target="_blank">随函编辑器</a>。</p><h1 id="421b" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">什么是简历生成器？</h1><p id="4756" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">Resume Builder是一个免费的开源项目，允许任何人使用电子表格或JSON文件作为数据源，轻松地维护和创建任何类型的简历。由于这个项目，我被雇佣去国外生活，正如我已经在另一篇博客文章中解释的那样。</p><p id="5d5e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个项目最大的缺陷之一是，你必须已经有一个你的简历数据源，没有办法从头开始创建你自己的简历。</p><h1 id="c848" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">福米克</h1><p id="b05e" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">几天前，我看了贾里德·帕尔默的一个演讲，我确信我应该尝试一下Formik，我有一个完美的特性。</p><h1 id="805c" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">JSON模式</h1><p id="81d6" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">我需要表单是动态的，这样用户可以添加他们想要的工作经验，既然我已经在使用来自json-resume项目的<a class="ae ki" href="https://github.com/jsonresume/resume-schema/blob/81d9e75a3d7b599e202e7c3e31c55e634c7f1e39/schema.json" rel="noopener ugc nofollow" target="_blank"> JSON模式，为什么不用它来为我编程构建表单呢？</a></p><p id="1275" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在编码之前，我决定用我的UML知识来画一个如何工作的图表:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi lq"><img src="../Images/4e3f973a733924669e8e4b61d9eb0431.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vDv8JA3JUAA86Udb.png"/></div></div></figure><p id="5525" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于这篇博文，让我们使用json-resume项目中JSON模式的一个简单版本。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="mc md l"/></div></figure><h1 id="321e" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">遍历JSON</h1><p id="83f0" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">我使用的JSON模式中有3种不同的数据类型，<code class="fe kj kk kl km b">object</code>、<code class="fe kj kk kl km b">array</code>和<code class="fe kj kk kl km b">string</code>，所以遍历起来应该相当简单。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="dce2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于大多数情况，当JSON中没有重复的键，也不需要用户输入无限的数据时，这就足够了。</p><h1 id="6f15" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">使用唯一键</h1><p id="eede" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">现在事情开始变得有点复杂，为了确保每个字段都有唯一的键，我将在节点中累积键，例如对于对象<code class="fe kj kk kl km b">{ foo: { bar: '' } }</code>,<code class="fe kj kk kl km b">bar</code>节点的键将是<code class="fe kj kk kl km b">foo-bar</code>。我对此并不超级自豪，但我随时可以在以后重构它。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="mc md l"/></div></figure><h1 id="528b" class="kn ko in bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk bi translated">动态添加更多字段</h1><p id="7aef" class="pw-post-body-paragraph jk jl in jm b jn ll jp jq jr lm jt ju jv ln jx jy jz lo kb kc kd lp kf kg kh ig bi translated">为了动态添加字段，我决定创建一个局部变量，根据输入的惟一键来保存输入应该显示的次数。</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="746e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将这段代码包装到React组件中后，我可以这样使用它:</p><figure class="lr ls lt lu gt lv"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="8c0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这段混乱代码的结果如下所示:</p><figure class="lr ls lt lu gt lv gh gi paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="gh gi me"><img src="../Images/3a12e3bc4e0b56bb191ae8a55053f785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3FUudR5p-0gwCS0k.gif"/></div></div></figure><p id="9d4d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以在GitHub 上查看表单的<a class="ae ki" href="https://github.com/blopa/Resume-Builder/blob/4.0.7/src/components/DynamicForm.jsx#L48" rel="noopener ugc nofollow" target="_blank">实际代码，好消息是下次json-resume模式改变时，我不需要做任何事情。</a></p><p id="206e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<a class="ae ki" href="https://resume-builder.js.org/en/build" rel="noopener ugc nofollow" target="_blank">简历制作网站</a>上亲自尝试这份表格。</p></div><div class="ab cl mf mg hr mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ig ih ii ij ik"><p id="e520" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mm">原发布于</em><a class="ae ki" href="https://pablo.gg/en/blog/coding/building-a-dynamic-form-from-a-json-schema/" rel="noopener ugc nofollow" target="_blank"><em class="mm">https://pablo . gg</em></a><em class="mm">。</em></p><p id="3866" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mm">更多内容请看</em><a class="ae ki" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="mm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
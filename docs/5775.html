<html>
<head>
<title>4 Best Practices for Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Docker的4个最佳实践</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/4-best-practices-for-docker-cf52573dafb8?source=collection_archive---------12-----------------------#2021-12-07">https://javascript.plainenglish.io/4-best-practices-for-docker-cf52573dafb8?source=collection_archive---------12-----------------------#2021-12-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3b99" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用Docker在生产中更好地构建</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c9dd8d129356048fd1cca2e4d24ce702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y_0r6iKRhUBrGHY4mIaZNA.png"/></div></div></figure><h2 id="846a" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">1.使用官方Docker图像作为基础图像</h2><p id="b979" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">在处理一个新项目和设置一个新的Docker环境时，一定要确保使用一个正式的Docker映像作为基础映像。这使得你的Docker文件更加<strong class="lp ir"><em class="mg"/></strong><strong class="lp ir"><em class="mg">轻量级</em> </strong>相比使用一个基本的OS系统镜像并自己安装所有需要的包。</p><p id="9ae3" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><strong class="lp ir"> <em class="mg">例如:</em> </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mm"><img src="../Images/7447618495ccef3b70321d16561b6ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MS_Q-Kt09BYYrVsHN0uolQ.png"/></div></div></figure><h2 id="2445" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">2.不要使用随机的最新标签</h2><p id="8396" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">有时你可能会因为Docker中不同版本的包而陷入麻烦。<em class="mg">例如，</em>假设在之前的版本中，您使用的是<strong class="lp ir">节点版本16 </strong>，但是后来当您将Node安装为基础映像时，您将获得更高的版本(<strong class="lp ir">节点版本17 </strong>)。</p><p id="d87a" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated">要解决这个问题，建议在安装包时避免使用<em class="mg">随机最新标签</em>。</p><blockquote class="mn"><p id="ba83" class="mo mp iq bd mq mr ms mt mu mv mw mf dk translated">简单地说，总是试图固定Docker中的包或图像的版本。</p></blockquote><figure class="my mz na nb nc kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mx"><img src="../Images/e5cb303265830e835929dd0d84f2da85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IixHSbgWYhgH-FdUWzDXMg.png"/></div></div></figure><h2 id="3da8" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">3.使用小尺寸图像</h2><p id="0ba6" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">如果我们在<em class="mg"> Docker hub </em>上查看，不同的<strong class="lp ir">操作系统</strong>有多个版本的官方映像，因此开发者最终会使用基于成熟操作系统的官方映像。</p><ul class=""><li id="6f74" class="nd ne iq lp b lq mh lt mi la nf le ng li nh mf ni nj nk nl bi translated">如果图像基于成熟的操作系统，如<strong class="lp ir"> Ubuntu </strong>、<strong class="lp ir"> CentOS </strong>等，它们将加载许多您不需要的操作系统功能，这会导致图像更大。</li><li id="8a9f" class="nd ne iq lp b lq nm lt nn la no le np li nq mf ni nj nk nl bi translated">对于在生产级应用程序中工作的开发人员来说，大型映像可能会成为一个问题，因为该映像需要在<strong class="lp ir">存储库</strong>和<strong class="lp ir">部署服务器</strong> &amp;上有更多的空间，而且当您必须从存储库中<strong class="lp ir"> <em class="mg">拉</em> </strong>或<strong class="lp ir"> <em class="mg">推</em> </strong>映像时，会花费更多的时间。</li><li id="dc0a" class="nd ne iq lp b lq nm lt nn la no le np li nq mf ni nj nk nl bi translated">此外，这些图像具有更高的安全漏洞，这样您可能不得不在一开始就面临意想不到的安全问题。</li></ul><blockquote class="mn"><p id="29b1" class="mo mp iq bd mq mr nr ns nt nu nv mf dk translated">但是在基于小操作系统的映像中，它们只包含必要的工具(例如:Busybox)，所以建议使用基于更精简和更小的操作系统发行版的映像。</p></blockquote><figure class="my mz na nb nc kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nw"><img src="../Images/a17363142274adfb827e5a8ee77eaff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6PZlIsdGJvJSk14fKT_NiQ.png"/></div></div></figure><h2 id="e752" class="kr ks iq bd kt ku kv dn kw kx ky dp kz la lb lc ld le lf lg lh li lj lk ll lm bi translated">4.使用。dockerignore文件</h2><p id="2377" class="pw-post-body-paragraph ln lo iq lp b lq lr jr ls lt lu ju lv la lw lx ly le lz ma mb li mc md me mf ij bi translated">使用<strong class="lp ir">。dockignore </strong>文件与我们如何使用<strong class="lp ir">非常相似。Git ignore<em class="mg">Git</em>中的</strong>文件，因为有时候我们想在应用程序中排除一些文件和文件夹。在一个新的映像中使用Docker时，您不需要映像中的所有东西，例如自动生成的文件夹<strong class="lp ir">(目标&amp;构建)</strong> <strong class="lp ir">自述文件</strong>等。</p><ul class=""><li id="b3b7" class="nd ne iq lp b lq mh lt mi la nf le ng li nh mf ni nj nk nl bi translated">为了缩小图像尺寸，应该使用<strong class="lp ir"> <em class="mg">。要在<strong class="lp ir">根目录</strong>下创建的</em>文件</strong>列出所有你想忽略的文件和文件夹。</li></ul><p id="542c" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><strong class="lp ir"> <em class="mg">例如:</em> </strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nx"><img src="../Images/d7618ad57d5935a77417f2295fafd50d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lD55Ik3uan4e_m6aQbYHGA.png"/></div></div></figure></div><div class="ab cl ny nz hu oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="ij ik il im in"><div class="kg kh ki kj gt of"><a rel="noopener  ugc nofollow" target="_blank" href="/6-ui-ux-design-principles-for-self-taught-developers-c6326f6d9c0d"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">6自学成才的开发人员的UI/UX设计原则</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">提升你的自学程序员之旅。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oo l"><div class="op l oq or os oo ot kp of"/></div></div></a></div><div class="ou ov gp gr ow of"><a rel="noopener  ugc nofollow" target="_blank" href="/3-pro-git-features-for-pro-developers-1b8c649e3f4e"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">面向专业开发人员的3个专业Git特性</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">面向专业开发人员的高级Git特性。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oo l"><div class="ox l oq or os oo ot kp of"/></div></div></a></div><div class="ou ov gp gr ow of"><a rel="noopener  ugc nofollow" target="_blank" href="/object-freeze-vs-object-seal-in-javascript-4f66f7d24754"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd ir gy z fp ok fr fs ol fu fw ip bi translated">JavaScript中的Object.freeze()与Object.seal()</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">理解JavaScript中的不变性</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oo l"><div class="oy l oq or os oo ot kp of"/></div></div></a></div><p id="b7a5" class="pw-post-body-paragraph ln lo iq lp b lq mh jr ls lt mi ju lv la mj lx ly le mk ma mb li ml md me mf ij bi translated"><em class="mg">更多内容看</em> <a class="ae oz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mg">说白了。</em> </strong> <em class="mg">报名参加我们的</em> </a><a class="ae oz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lp ir"> <em class="mg">免费每周简讯这里</em> </strong> </a> <strong class="lp ir"> <em class="mg">。</em> </strong></p></div></div>    
</body>
</html>
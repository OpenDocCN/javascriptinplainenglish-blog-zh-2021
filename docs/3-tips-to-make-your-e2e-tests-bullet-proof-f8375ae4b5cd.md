# 让您的端到端测试防弹的 3 个技巧

> 原文：<https://javascript.plainenglish.io/3-tips-to-make-your-e2e-tests-bullet-proof-f8375ae4b5cd?source=collection_archive---------9----------------------->

当我开始做软件工程师时，端到端(e2e)测试是我有意忽略的一个主题。我认为这是一个很好的额外技能，锦上添花。因此，当我看到同事们沉浸在由一只看不见的手控制的 UI 的魔力中时，我优雅地回到了自己的工作中。

当我们第一次遇到一个讨厌的产品 bug 时，这种态度就轻率地改变了。紧急模式开启，需要尽快部署修复程序。现实打击了我之后，我决定为应用程序的核心功能编写 e2e 测试可能是个好主意。

![](img/43e1507b2ca3ec163140a9eb310f3c09.png)

我一生中从未写过 e2e 测试，犯了所有能想到的新手错误。为了让你的轨迹变得平滑，这里有我在这个过程中学到的 3 个技巧，让你的 e2e 测试防弹。

## 1.分离样式和测试

E2E 测试要求您选择 DOM 元素。测试的可靠性与这些选择器的稳定性相关。例如，如果一个按钮不能被选择，测试失败。因为 CSS 选择器，像类名和 id 一样，经常变化，所以用它们来测试选择器不是个好主意。相反，创建一个[数据属性](https://developer.mozilla.org/en-US/docs/Learn/HTML/Howto/Use_data_attributes)，专门用于选择 e2e 测试中的元素。

## 2.仅测试核心功能

测试应用程序的每个角落是很诱人的。但是编写和维护高质量的 e2e 测试需要很多时间。它们还延长了 CI/CD 管道。因此，问问自己应用程序的哪些功能是关键的，并相应地确定测试范围。

## 3.这不是大小的问题

E2e 测试旨在测试应用程序中的真实用户流。正因为如此，在一次大型测试中覆盖产品的大部分是合乎逻辑的。然而，更大的测试带来了几个问题。

1.  调试它们需要时间。如果一个大型测试的最后一步失败了，重新运行它们并找到确切的错误是很麻烦的。
2.  大型测试很难维护，因为文件往往很长，测试的目的也不明确。

因此，设计 e2e 测试时要有一个明确的目标，并根据产品的复杂性增加更多的测试。

希望你能从我的新手错误中吸取教训。祝测试好运！

*更多内容尽在*[***plain English . io***](http://plainenglish.io/)
<html>
<head>
<title>How to Build a Contact Form in React that Sends Emails using EmailJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中构建一个使用EmailJS发送电子邮件的联系人表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-contact-form-in-react-that-sends-emails-using-emailjs-70011d2563a3?source=collection_archive---------0-----------------------#2021-04-02">https://javascript.plainenglish.io/how-to-build-a-contact-form-in-react-that-sends-emails-using-emailjs-70011d2563a3?source=collection_archive---------0-----------------------#2021-04-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8246bf1ffc1e608490a94c3c421bea11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V_7abhd2hkch-lq0fLUsMw.png"/></div></div></figure><p id="a88e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">联系方式对任何业务都是必不可少的，因为它们为客户提供了一种方便的联系方式。在本教程中，我将向您展示如何使用名为<a class="ae kt" href="https://www.emailjs.com/" rel="noopener ugc nofollow" target="_blank"> EmailJS </a>的第三方服务添加从React中的表单发送电子邮件的功能。只要你每月不超过200封邮件，EmailJS服务就是免费的。</p><h1 id="65ad" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated"><strong class="ak">第一步。设置电子邮件</strong></h1><p id="d98e" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我们将从注册<a class="ae kt" href="https://dashboard.emailjs.com/sign-up" rel="noopener ugc nofollow" target="_blank">开始，创建一个免费账户</a>。</p><p id="3ceb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建帐户后，添加您选择的电子邮件服务。正如你在下图中看到的，我正在使用Gmail。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/d2e78cbaadd2f7679a133f1f940cfd91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N2KRpMUZjp9-Rrrx86dfEQ.png"/></div></div></figure><p id="7658" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，转到侧面菜单上的“电子邮件模板”选项卡，并单击“创建新模板”按钮。双花括号中的变量是基于表单输入的动态变量。因此，请确保在React应用程序中使用与<strong class="jx io"> emailjs.sendForm </strong>方法完全相同的名称。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/b07a1f457cd147ae22cbc0ee1611212c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2MTdTXkzX_XTvwiacKCYbA.png"/></div></div></figure><p id="c541" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请确保您正确设置了右侧的“To Email”字段，因为当有人发送消息时，该电子邮件将接收表单中的内容。点击保存。我们完成了设置。</p><h1 id="1e8f" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">第二步。反应</h1><p id="8a89" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">您可以在现有的React应用程序中包含此步骤，或者通过运行<code class="fe md me mf mg b">npx create-react-app app-name.</code>创建一个新的React应用程序。如果您是React新手，并且希望了解更多关于创建、运行和更新到新版本的信息，请前往<a class="ae kt" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">此存储库</a>了解更多信息。</p><p id="0c94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在应用程序的目录中，我们将安装一些集成emailjs、创建联系人表单以及在发送电子邮件后显示警告所必需的依赖项。</p><p id="7e69" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe md me mf mg b">npm i emailjs-com semantic-ui-react semantic-ui-css sweetalert2</code></p><p id="e681" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们需要在应用程序的入口文件中导入语义UI的缩小CSS文件，如下所示:</p><pre class="ly lz ma mb gt mh mg mi mj aw mk bi"><span id="6e02" class="ml kv in mg b gy mm mn l mo mp"><strong class="mg io"><em class="mq">#</em> <em class="mq">index.js</em></strong></span><span id="4844" class="ml kv in mg b gy mr mn l mo mp">import React from ‘react’;<br/>import ReactDOM from ‘react-dom’;<br/><strong class="mg io">import ‘semantic-ui-css/semantic.min.css’;</strong></span><span id="3019" class="ml kv in mg b gy mr mn l mo mp">import ‘./index.css’;<br/>import App from ‘./App’;</span><span id="1247" class="ml kv in mg b gy mr mn l mo mp">ReactDOM.render(<br/>  &lt;React.StrictMode&gt;<br/>    &lt;App /&gt;<br/>  &lt;/React.StrictMode&gt;,<br/>  document.getElementById(‘root’)<br/>);</span></pre><p id="2adb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将在app.js文件中包含联系人表单的逻辑。但是，您可以将该逻辑包含在不同的组件中。</p><h2 id="46c6" class="ml kv in bd kw ms mt dn la mu mv dp le kg mw mx li kk my mz lm ko na nb lq nc bi translated"><strong class="ak">第一步。建立联系表</strong></h2><p id="2c83" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">让我们从添加如下所示的表单开始:-</p><pre class="ly lz ma mb gt mh mg mi mj aw mk bi"><span id="98af" class="ml kv in mg b gy mm mn l mo mp"><strong class="mg io"># app.js</strong></span><span id="d15c" class="ml kv in mg b gy mr mn l mo mp">import React from ‘react’;<br/>import { Form, Input, TextArea, Button } from ‘semantic-ui-react’;</span><span id="442e" class="ml kv in mg b gy mr mn l mo mp">import ‘./App.css’;</span><span id="3b90" class="ml kv in mg b gy mr mn l mo mp">const App = () =&gt; {<br/>  <br/>  {/* --- handleOnSubmit method --- */}</span><span id="04b4" class="ml kv in mg b gy mr mn l mo mp">  return (<br/>    &lt;div className=”App”&gt;<br/>      &lt;Form onSubmit={handleOnSubmit}&gt;<br/>        &lt;Form.Field<br/>          id=’form-input-control-email’<br/>          control={Input}<br/>          label=’Email’<br/>          name=’user_email’<br/>          placeholder=’Email…’<br/>          required<br/>          icon=’mail’<br/>          iconPosition=’left’<br/>        /&gt;<br/>        &lt;Form.Field<br/>          id=’form-input-control-last-name’<br/>          control={Input}<br/>          label=’Name’<br/>          name=’user_name’<br/>          placeholder=’Name…’<br/>          required<br/>          icon=’user circle’<br/>          iconPosition=’left’<br/>        /&gt;<br/>        &lt;Form.Field<br/>          id=’form-textarea-control-opinion’<br/>          control={TextArea}<br/>          label=’Message’<br/>          name=’user_message’<br/>          placeholder=’Message…’<br/>          required<br/>        /&gt;<br/>        &lt;Button type=’submit’ color=’green’&gt;Submit&lt;/Button&gt;<br/>      &lt;/Form&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="6960" class="ml kv in mg b gy mr mn l mo mp">export default App;</span></pre><p id="1614" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们将向app.css文件添加一些样式，使表单看起来更漂亮。</p><pre class="ly lz ma mb gt mh mg mi mj aw mk bi"><span id="4015" class="ml kv in mg b gy mm mn l mo mp"><strong class="mg io"><em class="mq">#</em> <em class="mq">app.css</em></strong></span><span id="2efe" class="ml kv in mg b gy mr mn l mo mp">.App {<br/>  text-align: center;<br/>  max-width: 300px;<br/>  margin: 20px auto;<br/>}</span><span id="85d2" class="ml kv in mg b gy mr mn l mo mp">Form {<br/>  border: 1px solid lightgray;<br/>  border-radius: 10px;<br/>  padding: 20px;<br/>}</span></pre><p id="7056" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当你在命令行上运行<code class="fe md me mf mg b">npm start</code>来运行你的应用程序时，你应该会在浏览器上看到一个类似下面的表单。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/dd2d7f4eddd9b3773b9cdbf73d3e487f.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*PaZcoAjRvZC8BmZqidKrGg.png"/></div></figure><h2 id="e8fc" class="ml kv in bd kw ms mt dn la mu mv dp le kg mw mx li kk my mz lm ko na nb lq nc bi translated"><strong class="ak">第二步。包括处理表单提交逻辑。</strong></h2><p id="f8eb" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我们快完成了！</p><p id="a4c0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于这最后一步，我们需要返回emailjs.com以获取SERVICE_ID、TEMPLATE_ID和PUBLIC_KEY。</p><ul class=""><li id="8dfc" class="ne nf in jx b jy jz kc kd kg ng kk nh ko ni ks nj nk nl nm bi translated">您可以从“帐户”选项卡中获取您的公钥。</li><li id="49f1" class="ne nf in jx b jy nn kc no kg np kk nq ko nr ks nj nk nl nm bi translated">电子邮件服务选项卡中的服务ID。</li><li id="46b8" class="ne nf in jx b jy nn kc no kg np kk nq ko nr ks nj nk nl nm bi translated">电子邮件模板选项卡中的模板ID</li></ul><p id="1b64" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请记住用您自己帐户的id/key替换星号。您也可以添加一个. env文件来存储您的id/key，只是为了保持它们的私有性。</p><p id="1722" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在添加了其余的导入和handleOnSubmit函数后，我们的app.js应该类似于下面的代码。</p><pre class="ly lz ma mb gt mh mg mi mj aw mk bi"><span id="e4cb" class="ml kv in mg b gy mm mn l mo mp"><strong class="mg io"># app.js</strong></span><span id="0b6a" class="ml kv in mg b gy mr mn l mo mp">import React from ‘react’;<br/>import emailjs from ‘emailjs-com’;<br/>import { Form, Input, TextArea, Button } from ‘semantic-ui-react’;<br/>import Swal from ‘sweetalert2’;</span><span id="82ae" class="ml kv in mg b gy mr mn l mo mp">import ‘./App.css’;</span><span id="db34" class="ml kv in mg b gy mr mn l mo mp">const SERVICE_ID = "**************";<br/>const TEMPLATE_ID = "*******";<br/>const PUBLIC_KEY = "****************";</span><span id="7cd5" class="ml kv in mg b gy mr mn l mo mp">const App = () =&gt; {<br/>  const handleOnSubmit = (e) =&gt; {<br/>    e.preventDefault();<br/>    emailjs.sendForm(SERVICE_ID, TEMPLATE_ID, e.target, PUBLIC_KEY)<br/>      .then((result) =&gt; {<br/>        console.log(result.text);<br/>        Swal.fire({<br/>          icon: ‘success’,<br/>          title: ‘Message Sent Successfully’<br/>        })<br/>      }, (error) =&gt; {<br/>        console.log(error.text);<br/>        Swal.fire({<br/>          icon: ‘error’,<br/>          title: ‘Ooops, something went wrong’,<br/>          text: error.text,<br/>        })<br/>      });<br/>    e.target.reset()<br/>  };</span><span id="b047" class="ml kv in mg b gy mr mn l mo mp">return (<br/>    &lt;div className=”App”&gt;<br/>      &lt;Form onSubmit={handleOnSubmit}&gt;<br/>        &lt;Form.Field<br/>          id=’form-input-control-email’<br/>          control={Input}<br/>          label=’Email’<br/>          name=’user_email’<br/>          placeholder=’Email…’<br/>          required<br/>          icon=’mail’<br/>          iconPosition=’left’<br/>        /&gt;<br/>        &lt;Form.Field<br/>          id=’form-input-control-last-name’<br/>          control={Input}<br/>          label=’Name’<br/>          name=’user_name’<br/>          placeholder=’Name…’<br/>          required<br/>          icon=’user circle’<br/>          iconPosition=’left’<br/>        /&gt;<br/>        &lt;Form.Field<br/>          id=’form-textarea-control-opinion’<br/>          control={TextArea}<br/>          label=’Message’<br/>          name=’user_message’<br/>          placeholder=’Message…’<br/>          required<br/>        /&gt;<br/>        &lt;Button type=’submit’ color=’green’&gt;Submit&lt;/Button&gt;<br/>      &lt;/Form&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="bf00" class="ml kv in mg b gy mr mn l mo mp">export default App;</span></pre><p id="e30d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还记得我之前讲过的将在<code class="fe md me mf mg b">emailjs.sendForm</code>上使用的花括号中的变量吗？</p><p id="48d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe md me mf mg b">emailjs.sendForm(SERVICE_ID, TEMPLATE_ID, e.target, PUBLIC_KEY) </code>将用于访问我们的电子邮件服务。参数由3个id加上e.target组成，e . target对应于表单上的输入字段。请注意，表单中的name属性与花括号中的值相同。</p><p id="442b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">只要您完全按照这个设置，emailjs将使用表单中的正确输入设置您的定制模板，然后将完成的模板发送到为它设置的地址。</p><p id="678f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以现在当您通过表单发送消息时，您应该在单击submit后得到一个警告。如果成功，我们将收到类似下图的警告:-</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/296fa61934086fcc49c5acf93ac0e3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:970/format:webp/1*7ka5-Fyxgis4WzURY6uKPg.png"/></div></figure><p id="e211" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后在发送信息后几秒钟，你会在收件箱里收到一封电子邮件。</p><figure class="ly lz ma mb gt jo gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/e0f21896a726e156f3e70c40ffb8e5ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*yl8sMnMKjRNZ4FDYtVrWWQ.png"/></div></figure><h2 id="3f81" class="ml kv in bd kw ms mt dn la mu mv dp le kg mw mx li kk my mz lm ko na nb lq nc bi translated">结论</h2><p id="99c2" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">就是这样！现在，您的网站上有了一个功能齐全的联系表单，您的客户可以在访问您的网站时与您联系。</p><p id="3ab6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望这篇文章对你有所帮助。如果您有任何问题，请随时通过<a class="ae kt" href="https://www.linkedin.com/in/mupa-mmbetsa/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>或我的<a class="ae kt" href="https://mupa-dev.netlify.app/" rel="noopener ugc nofollow" target="_blank">作品集</a>联系我。感谢阅读！</p><p id="7037" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">更多内容请看</em><a class="ae kt" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mq">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
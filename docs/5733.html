<html>
<head>
<title>Endpoint Handlers 101</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç«¯ç‚¹å¤„ç†å™¨101</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/endpoint-handlers-101-c9aad2e62ebb?source=collection_archive---------14-----------------------#2021-12-03">https://javascript.plainenglish.io/endpoint-handlers-101-c9aad2e62ebb?source=collection_archive---------14-----------------------#2021-12-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="d25f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ğŸ‘‹å˜¿ï¼Œä¼™è®¡ä»¬ï¼</p><p id="0333" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä»Šå¤©ï¼Œæˆ‘ä»¬å°†è®¨è®ºç«¯ç‚¹å¤„ç†ç¨‹åºï¼</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/de1e51c2f964e8b9e98c950c4489b308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*gwKHS1XJesj83VegCwReqA.jpeg"/></div><figcaption class="kq kr gj gh gi ks kt bd b be z dk">Built using Draw.io by https://twitter.com/imabptweets</figcaption></figure><p id="0e20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œç«¯ç‚¹å¤„ç†ç¨‹åºæ˜¯ä¸€ç§å¯¹æ‰€æœ‰è¿›å…¥æœåŠ¡å™¨çš„è¯·æ±‚è¿›è¡Œè§‚å¯Ÿå’ŒéªŒè¯çš„å·¥å…·ã€‚å®ƒå¯¹ä»»ä½•ç«¯ç‚¹çš„æ¯ä¸ªä¼ å…¥è¯·æ±‚è¿è¡Œé‡è¦çš„å®‰å…¨éªŒè¯ã€‚</p><p id="fe17" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼ŒæœåŠ¡å™¨å°†å¤„ç†è¯·æ±‚ï¼Œå¦åˆ™ï¼Œå°†æ ¹æ®éªŒè¯ç»“æœå‘å®¢æˆ·ç«¯æŠ›å‡º400/403ç¦æ­¢é”™è¯¯ã€‚</p><p id="b40c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ku"> PS:ä»»ä½•ä»¥4XXå¼€å¤´çš„é”™è¯¯éƒ½ä¸å®¢æˆ·ç«¯æœ‰å…³ã€‚</em></p><h2 id="ae45" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated"><strong class="ak">æ„å»ºæ‚¨çš„ç«¯ç‚¹å¤„ç†ç¨‹åºç±»å‹è„šæœ¬ã€‚</strong></h2><p id="1210" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">è¿™æ˜¯æˆ‘æœ€å–œæ¬¢çš„éƒ¨åˆ†ã€‚æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å®ç°ç«¯ç‚¹å¤„ç†ç¨‹åºã€‚</p><p id="bfda" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç«¯ç‚¹ã€‚</p><pre class="kj kk kl km gt lt lu lv lw aw lx bi"><span id="cfc9" class="kv kw in lu b gy ly lz l ma mb">const getCatImages = async(req, res)=&gt;{<br/>    if(req.method!=='GET') return res.status(400).end();<br/>    return res.status(200).json({url: "s3.images.blah/cat1.jpg"})<br/>}</span><span id="0840" class="kv kw in lu b gy mc lz l ma mb">export default getCatImages</span></pre><p id="ae44" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç«¯ç‚¹ï¼Œå‡ ä¹å¯ä»¥å®Œæˆè·å–çŒ«å›¾åƒçš„å·¥ä½œã€‚</p><p id="ee65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨æˆ‘ä»¬æœ‰ä»¥ä¸‹é™åˆ¶ã€‚</p><p id="c720" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">1.åªæœ‰çˆ±çŒ«äººå£«æ‰åº”è¯¥å¾—åˆ°çŒ«çš„å›¾åƒã€‚<br/> 2ã€‚åªæœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ‰èƒ½è·å¾—å›¾åƒã€‚<br/> 3ã€‚ä»»ä½•è¢«ç¦æ­¢è·å–çŒ«å›¾åƒçš„ç”¨æˆ·éƒ½åº”è¯¥æ”¶åˆ°ç¦æ­¢è¯·æ±‚ã€‚</p><p id="21b3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨æˆ‘ä»¬å¯ä»¥æ„å»ºç«¯ç‚¹äº†ï¼ŒåŒ…æ‹¬è¿™äº›é™åˆ¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æœ‰100ä¸ªç«¯ç‚¹å‘¢ï¼Ÿå½“éœ€è¦æ›´æ–°é™åˆ¶æ—¶ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦æ›´æ–°æ‰€æœ‰è¿™100ä¸ªç«¯ç‚¹ã€‚</p><p id="112c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ¥ä¸‹æ¥æ˜¯ç«¯ç‚¹å¤„ç†ç¨‹åºçš„è§’è‰²ã€‚<br/>æ‰€ä»¥è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç«¯ç‚¹å¤„ç†å™¨ï¼Œå®ƒ<strong class="jm io">è¿”å›ä¸€ä¸ªâ€œå‡½æ•°è¿”å›æ‰¿è¯ºâ€</strong>ã€‚</p><pre class="kj kk kl km gt lt lu lv lw aw lx bi"><span id="5b70" class="kv kw in lu b gy ly lz l ma mb">const EndpointHandler = async(endpoint, validations)=&gt;{<br/>    return async(req,res) =&gt;{<br/>     <br/><strong class="lu io">     //Only Authenticated Users<br/></strong>     if(validations.onlyAuthenticated){<br/>     const response = await checkAuth(req)<br/>     if(response.status !== 200)<br/>     return res.status(403).json({message: 'Unauthenticated User"})<br/>    }</span><span id="84cf" class="kv kw in lu b gy mc lz l ma mb"><br/><strong class="lu io">     //Cat Lovers Only Allowed<br/></strong>     if(validations.onlyCatLovers)<br/>     {<br/>      const response = await CheckCatLovers(req.cookies)<br/>      if(response.status !== 200)<br/>      return res.status(403).json({message:"You are not a cat lover"})</span><span id="1f03" class="kv kw in lu b gy mc lz l ma mb">     }</span><span id="d288" class="kv kw in lu b gy mc lz l ma mb"><strong class="lu io">     // Banned Users Check<br/></strong>     if(validations.bannedUsersNotAllowed){<br/>         const response = await checkUserisBanned(req.cookies);<br/>         if(response.status !== 200)<br/>         return res.status(403).json({message:"You have been banned. Contact Group Admin"});<br/>}</span><span id="7b2a" class="kv kw in lu b gy mc lz l ma mb">    }<br/>}<br/>export default EndpointHandler</span></pre><p id="f974" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ‰€ä»¥ç°åœ¨ï¼Œæˆ‘ä»¬çš„ç«¯ç‚¹æ£€æŸ¥æ‰€éœ€çš„éªŒè¯ã€‚</p><p id="7444" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨æˆ‘ä»¬å¿…é¡»å°†è¿™ä¸ªç«¯ç‚¹å¤„ç†ç¨‹åºåŒ…è£…åˆ°æˆ‘ä»¬çš„ç«¯ç‚¹ã€‚</p><p id="db88" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è®©æˆ‘ä»¬å›åˆ°ç¬¬ä¸€æ®µä»£ç ã€‚</p><pre class="kj kk kl km gt lt lu lv lw aw lx bi"><span id="20cb" class="kv kw in lu b gy ly lz l ma mb">import EndpointHandler from './EndpointHandler';</span><span id="611f" class="kv kw in lu b gy mc lz l ma mb">const getCatImages = async(req, res)=&gt;{<br/>    if(req.method!=='GET') return res.status(400).end();<br/>    return res.status(200).json({url: "s3.images.blah/cat1.jpg"})<br/>}</span><span id="62c7" class="kv kw in lu b gy mc lz l ma mb">export default EndpointHandler(getCatImages,<br/>{<br/>onlyAuthenticated:true,<br/>onlyCatLovers:true,<br/>bannedUsersNotAllowed:true<br/>});</span></pre><p id="f975" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•æˆåŠŸåœ°å°†ç«¯ç‚¹å¤„ç†ç¨‹åºä¸ç«¯ç‚¹é›†æˆåœ¨ä¸€èµ·çš„ã€‚è¿™ç§æ–¹æ³•æœ‰åŠ©äºæˆ‘ä»¬ç¼–å†™æ›´å¥½ã€æ›´å®‰å…¨çš„ä»£ç ï¼Œåªéœ€ä¸€ä¸ªéªŒè¯æ–‡ä»¶æºã€‚</p><h2 id="4100" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated"><strong class="ak">å¥½å¤„</strong></h2><p id="2cc1" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">æ‚¨å¯ä»¥å°†æ›´å¤šçš„ç²¾åŠ›æ”¾åœ¨ç¼–å†™ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œå¹¶å°†å¤„ç†ç¨‹åºåŒ…è£…åœ¨å†…éƒ¨ï¼Œè€Œä¸ç”¨æ‹…å¿ƒç«¯ç‚¹çš„å®‰å…¨ã€‚</p><p id="1bb1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½ æœ‰ä¸€ä¸ªå¯ç»´æŠ¤çš„å’Œå®¹æ˜“è°ƒè¯•çš„ä»£ç åº“ã€‚</p><p id="0ca1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½ çŸ¥é“ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹åº”ç”¨çš„æœ€ä½³å®è·µ</p><h2 id="2a95" class="kv kw in bd kx ky kz dn la lb lc dp ld jv le lf lg jz lh li lj kd lk ll lm ln bi translated"><strong class="ak">ç¼ºç‚¹</strong></h2><p id="92f7" class="pw-post-body-paragraph jk jl in jm b jn lo jp jq jr lp jt ju jv lq jx jy jz lr kb kc kd ls kf kg kh ig bi translated">ä¸æ˜¯è¿™æ ·çš„ï¼Œä½†æ˜¯å®ƒæ›´é€‚åˆå…·æœ‰ä¸€è‡´ç«¯ç‚¹çš„æœåŠ¡ã€‚å…·æœ‰ä¸åŒæ“ä½œçš„ç³»ç»Ÿå¯èƒ½éœ€è¦ä¸åŒçš„ç«¯ç‚¹å¤„ç†ç¨‹åºã€‚</p><p id="9599" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">è¿™æ˜¯æ‰€æœ‰çš„ä¹¡äº²ã€‚</p><p id="2c32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ku">å¦‚æœä½ å­¦åˆ°äº†ä»€ä¹ˆï¼Œä¸€å®šè¦åœ¨æ¨ç‰¹ä¸Šåˆ†äº«:</em><a class="ae md" href="https://twitter.com/imabptweets" rel="noopener ugc nofollow" target="_blank"><em class="ku">https://twitter.com/imabptweets</em></a></p><p id="27df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘å¾ˆæƒ³è¯•è¯•ã€‚</p><p id="e912" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ku">æ›´å¤šå†…å®¹è¯·çœ‹</em> <a class="ae md" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ku">è¯´ç™½äº†å°±æ˜¯</em> </strong> </a> <strong class="jm io"> <em class="ku">ã€‚</em> </strong> <em class="ku">æŠ¥åå‚åŠ æˆ‘ä»¬çš„</em> <a class="ae md" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="ku">å…è´¹æ¯å‘¨ç®€è®¯è¿™é‡Œ</em> </strong> </a> <strong class="jm io"> <em class="ku">ã€‚</em> </strong></p></div></div>    
</body>
</html>
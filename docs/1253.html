<html>
<head>
<title>Angular’s Next-Generation Compilation and Rendering Pipeline</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular的下一代编译和渲染管道</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/do-you-know-about-the-next-generation-compilation-and-rendering-pipeline-of-angular-37fb979a5e13?source=collection_archive---------6-----------------------#2021-03-16">https://javascript.plainenglish.io/do-you-know-about-the-next-generation-compilation-and-rendering-pipeline-of-angular-37fb979a5e13?source=collection_archive---------6-----------------------#2021-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ad3e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">角常春藤和AOT汇编</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3fae40e49d1055065ca565619bdc757b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SRglTey7XVX8YtWtJdDb4Q.png"/></div></div></figure><p id="611b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">从Angular 9开始，IVY作为Angular的新默认渲染引擎发布。IVY编译器可以更快地编译Angular。Angular frontend框架用于构建基于组件的应用程序，如拼图。Angular组件是Typescript代码、HTML和CSS的混合(在所有3个文件+ 1个测试文件中)。</p><p id="b8b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">TypeScript是JavaScript的超集。因为浏览器只能阅读和理解Javascript、HTML和CSS。因此，从Typescript代码生成javascript代码的编译阶段是强制性的。</p><p id="9423" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">把Typescript代码转换成Javascript的东西叫做<strong class="kt ir"> <em class="ln"> Ivy。</em>T3】</strong></p><h1 id="6c7b" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">Angular 9之前发生了什么？</h1><p id="e540" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">旧版本的Angular使用了视图引擎。视图引擎产生的包大小相当大。有了Ivy，捆绑包大大减少了，这使得Angular克服了它的捆绑包问题。</p><h1 id="bbee" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">常春藤有什么好处？</h1><p id="717d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">主要有3大好处:</p><ul class=""><li id="6681" class="ml mm iq kt b ku kv kx ky la mn le mo li mp lm mq mr ms mt bi translated"><strong class="kt ir">大小:</strong>常春藤使得产生更小的束成为可能</li><li id="6055" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated"><strong class="kt ir">速度:</strong> Angular应用在较慢的网络中加载速度更快。</li><li id="6961" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">简单性: Ivy简单易用，易于调试。</li></ul><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/57f633a91853ef2d3be6cbbec5078ba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kAwVRfvJmRDDrs1zWdcXww.png"/></div></div></figure><h1 id="fec8" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">使这成为可能的关键点是什么？</h1><h2 id="f9cb" class="mz lp iq bd lq na nb dn lu nc nd dp ly la ne nf ma le ng nh mc li ni nj me nk bi translated">关键#1:树摇动</h2><p id="d5ec" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这个技术术语意味着在捆绑过程中删除未使用的代码。树抖动技术使用静态分析，并消除了未引用的代码。</p><p id="cd0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就解释了为什么尺寸变小了！</p><h2 id="96b6" class="mz lp iq bd lq na nb dn lu nc nd dp ly la ne nf ma le ng nh mc li ni nj me nk bi translated">关键#2: AOT汇编</h2><p id="920d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">这项技术将HTML代码和类型脚本编译成Javascript，在浏览器下载并执行代码之前完成。解释装载时间不同的原因。</p><p id="1aaa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">顺便说一句，你有没有想过在构建过程中，你的编译器是如何发现你的模板有问题的？甚至在浏览器上启动应用程序之前？嗯，这就解释了！</p><h2 id="a914" class="mz lp iq bd lq na nb dn lu nc nd dp ly la ne nf ma le ng nh mc li ni nj me nk bi translated">关键3:地点</h2><p id="fc3d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">应用速度的另一个关键点。局部性是用每个组件自己的局部变量和信息独立编译每个组件的过程，以便更快地重新构建。这在做局部改动的时候很有帮助。它不是愚蠢地编译整个项目文件，而是只编译发生变化的区域。</p><p id="9d7a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这大大提高了构建过程的速度。(特别感谢棱角团队！干得好！).</p><h1 id="187d" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">想看看这个变化有多大意义吗？</h1><p id="8f33" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">下面是由<strong class="kt ir"> Google </strong>提供的一个基础<strong class="kt ir"><em class="ln">Hello World app</em></strong>的结果。在新一代编译器Ivy之前，生成的包重36Kb，而在Ivy中，相同应用程序生成的包重2.7Kb</p><p id="0363" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这意味着尺寸减少了大约93% 。惊喜吧，哈哈！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/8ae8a2344125accfec8a280f4139bbd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:608/format:webp/1*vRcFszeJsKpFE9yuqLRQpg.png"/></div><figcaption class="nm nn gj gh gi no np bd b be z dk">Hello world app size before and after Ivy</figcaption></figure><h1 id="272b" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">现在来说代码吧！</h1><p id="ae45" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">如果您愿意，可以启用和禁用此功能。要启用它，您必须将其添加到您的配置<code class="fe nq nr ns nt b">tsconfig.app.json</code>文件中:</p><pre class="kg kh ki kj gt nu nt nv nw aw nx bi"><span id="7ece" class="mz lp iq nt b gy ny nz l oa ob">{<br/>  "compilerOptions": { ... },<br/>  "angularCompilerOptions": {<br/>   <strong class="nt ir"><em class="ln"> "enableIvy": true</em></strong><br/>  }<br/>}</span></pre><h2 id="15ab" class="mz lp iq bd lq na nb dn lu nc nd dp ly la ne nf ma le ng nh mc li ni nj me nk bi translated">AOT怎么样？</h2><p id="bf3d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">AOT汇编也是如此。该选项可以在项目配置构建选项(文件<code class="fe nq nr ns nt b">angular.json</code>)中激活:</p><pre class="kg kh ki kj gt nu nt nv nw aw nx bi"><span id="b1d2" class="mz lp iq nt b gy ny nz l oa ob">{<br/>  "projects": {<br/>    "my-project": {<br/>      "architect": {<br/>        "build": {<br/>          "options": {<br/>            ...<br/>            <strong class="nt ir"><em class="ln">"aot": true,</em></strong><br/>          }<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</span></pre></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><h1 id="7acb" class="lo lp iq bd lq lr oj lt lu lv ok lx ly jw ol jx ma jz om ka mc kc on kd me mf bi translated">这篇文章的摘录</h1><ul class=""><li id="8f12" class="ml mm iq kt b ku mg kx mh la oo le op li oq lm mq mr ms mt bi translated">生成的代码在运行时更容易阅读和调试</li><li id="0fff" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">重建时间更快</li><li id="1537" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">改进的有效载荷尺寸</li><li id="e0ed" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">改进的模板类型检查</li><li id="44d3" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">更早地检测模板错误</li><li id="bb68" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">AOT模式下编译器生成的代码文件大小大大减小了。</li><li id="31da" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">由于我们将HTML模板和组件编译成JavaScript，所以不会有任何注入攻击，因此安全性更好。</li><li id="e66c" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">AOT编译器是构建过程的一部分，它生成一个小型、快速、随时可运行的应用程序包，通常用于生产。</li><li id="5323" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">在浏览器下载和运行代码之前的构建阶段，AOT和艾维的编译过程将你的Angular HTML和TypeScript代码转换成高效的JavaScript代码。</li><li id="5283" class="ml mm iq kt b ku mu kx mv la mw le mx li my lm mq mr ms mt bi translated">顺便说一句，AOT代表提前的T2。</li></ul><p id="1034" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">亲爱的读者，谢谢你。❤</p></div><div class="ab cl oc od hu oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ij ik il im in"><p id="1fcb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ln">我希望你和你的家人无论在哪里都平安无事！坚持住。明天会更好！</em></p><p id="8558" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">让我们联系上</strong> <a class="ae or" href="https://medium.com/@famzil/" rel="noopener"> <strong class="kt ir">中</strong></a><strong class="kt ir"/><a class="ae or" href="https://www.linkedin.com/in/fatima-amzil-9031ba95/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">领英</strong></a><strong class="kt ir"/><a class="ae or" href="https://www.facebook.com/The-Front-End-World" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir">脸书</strong> </a> <strong class="kt ir">，或者</strong> <a class="ae or" href="https://twitter.com/FatimaAMZIL9" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir">推特</strong> </a> <strong class="kt ir">。</strong></p><p id="265b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir"> FAM </strong></p></div></div>    
</body>
</html>
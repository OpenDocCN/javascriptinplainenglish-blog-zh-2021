<html>
<head>
<title>How to Perform Dynamic Import with Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Next.js进行动态导入</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-perform-dynamic-import-with-next-js-f04dbd82683d?source=collection_archive---------5-----------------------#2021-04-20">https://javascript.plainenglish.io/how-to-perform-dynamic-import-with-next-js-f04dbd82683d?source=collection_archive---------5-----------------------#2021-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/af60091a3110adb50c43ce90d64a9461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iDlg1Zw9hQFdWsl-_ua8-g.png"/></div></div></figure><p id="c4a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常，不可能根据条件导入模块。每当加载一个页面时，该特定页面上所有导入的模块也会被加载。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="ef94" class="lc ld in ky b gy le lf l lg lh">const allowImport = true;<br/>if (allowImport) {<br/>  import DynamicComponent from "../components/hello";<br/>}</span><span id="854e" class="lc ld in ky b gy li lf l lg lh">export default function Home() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;DynamicComponent /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="c728" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码片段在编译时会产生一些错误。但是使用Next.js，在动态导入的帮助下，可以根据条件加载模块。我们必须导入模块“next/dynamic”来执行动态导入。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="a8b9" class="lc ld in ky b gy le lf l lg lh">import dynamic from 'next/dynamic'<br/>const allowImport = true;<br/>let DynamicComponent = null;<br/>if (allowImport) {<br/>  DynamicComponent = dynamic(() =&gt; import('../components/hello'))<br/>}</span><span id="c4d7" class="lc ld in ky b gy li lf l lg lh">export default function Home() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;DynamicComponent /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="9178" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">即使导入的模块不是默认的导出，我们也可以进行动态导入。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="6628" class="lc ld in ky b gy le lf l lg lh">import dynamic from 'next/dynamic'<br/><br/>const DynamicComponent = dynamic(() =&gt;<br/>  import('../components/hello').then((mod) =&gt; mod.Hello)<br/>)<br/><br/>function Home() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;DynamicComponent /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default Home</span></pre><p id="8061" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Next.js中，HTML在服务器端生成。因此，当一个特定的模块需要一个只能在浏览器中运行的库时，就会中断代码编译。使用动态导入，我们可以只在浏览器端加载特定的模块。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2f7e" class="lc ld in ky b gy le lf l lg lh">import dynamic from 'next/dynamic'<br/><br/>const DynamicComponentWithNoSSR = dynamic(<br/>  () =&gt; import('../components/hello'),<br/>  { ssr: false }<br/>)<br/><br/>function Home() {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;DynamicComponentWithNoSSR /&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}<br/><br/>export default Home</span></pre><h1 id="3849" class="lj ld in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="e2be" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">动态导入也被用来提高网站性能，因为我们可以在初始页面加载时停止加载所有文件。但是如果你不正确地使用这个特性，它也会影响网站的性能。</p></div></div>    
</body>
</html>
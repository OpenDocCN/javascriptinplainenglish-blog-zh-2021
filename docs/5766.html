<html>
<head>
<title>The 3 Ways to Handle Data Fetching Logic in React Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React项目中处理数据提取逻辑的3种方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/three-ways-to-handle-data-fetching-logic-in-react-projects-91b06eeefa70?source=collection_archive---------3-----------------------#2021-12-07">https://javascript.plainenglish.io/three-ways-to-handle-data-fetching-logic-in-react-projects-91b06eeefa70?source=collection_archive---------3-----------------------#2021-12-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9820" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">探索并找到React项目中处理数据获取逻辑的3种方法中的最佳方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/d03a56edb21672884e594277485ae554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*fF0KsEI9JpxoYvts6LvYlQ.png"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">The three ways to do it.</figcaption></figure><h1 id="7e36" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">最简单的方法</h1><p id="7bb0" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">除了浏览器支持的<a class="ae mc" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank">获取API </a>之外，不要使用任何库。</p><p id="2936" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">这里有一个例子:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">What is wrong with this?</figcaption></figure><p id="28e3" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">这可能是在一个基本的web应用程序中实现的方式，但是大多数时候我们都是用各种API调用来构建复杂的东西。上述方法虽然简单，但并不是在复杂的应用程序中处理数据获取逻辑的最佳方式。原因是它使你的组件看起来逻辑臃肿，你必须写很多非业务逻辑。您可以通过创建一个自定义挂钩并抽象出逻辑来改进这一点。或者更好的方法是使用外部库，它提供的不仅仅是获取数据，如下所示。</p></div><div class="ab cl mk ml hr mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ig ih ii ij ik"><h1 id="9f96" class="ko kp in bd kq kr mr kt ku kv ms kx ky jt mt ju la jw mu jx lc jz mv ka le lf bi translated">Redux方式</h1><p id="e43f" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">如果你的项目已经在<a class="ae mc" href="https://redux-toolkit.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank"> Redux工具包</a>的帮助下使用了<a class="ae mc" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank"> Redux </a>，那么你可以使用<a class="ae mc" href="https://redux-toolkit.js.org/rtk-query/overview" rel="noopener ugc nofollow" target="_blank"> RTK查询</a>来处理这个逻辑。它在内部使用fetch，所以你只需要设置端点和基本URL。</p><p id="2083" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">以下是您的设置方法:</p><pre class="kd ke kf kg gt mw mx my mz aw na bi"><span id="8a6b" class="nb kp in mx b gy nc nd l ne nf">npm install @reduxjs/toolkit react-redux</span></pre><p id="9eb5" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">然后在项目目录中创建一个包含API定义的服务文件夹:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/services/todo.js</figcaption></figure><p id="c8b5" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">您已经可以看到如何在一个地方设置所有端点。接下来，你要做的就是建立你的商店。记得像我一样导出自动生成的钩子，这是<a class="ae mc" href="https://redux-toolkit.js.org/rtk-query/usage/queries" rel="noopener ugc nofollow" target="_blank"> RTK查询</a>文档想要你做的。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/store.js</figcaption></figure><p id="fc46" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">中间件是可选的，但是提供了注释中提到的附加特性。剩下的就是把商店提供给你的app了。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/index.js</figcaption></figure><p id="fa93" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">最后，在组件中，调用如下所示的查询:</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/components/ReduxWay.js</figcaption></figure><p id="42d8" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">您可以看到您的组件现在看起来有多精简。</p></div><div class="ab cl mk ml hr mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ig ih ii ij ik"><h1 id="8bfd" class="ko kp in bd kq kr mr kt ku kv ms kx ky jt mt ju la jw mu jx lc jz mv ka le lf bi translated">React查询方式</h1><p id="02c4" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">做复杂事情的最简单方法。</p><p id="72ba" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">以下是您的设置方法:</p><pre class="kd ke kf kg gt mw mx my mz aw na bi"><span id="2f32" class="nb kp in mx b gy nc nd l ne nf">npm install react-query</span></pre><p id="3a1d" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">然后以与Redux相似的方式设置您的API。除了更少的样板代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/services/todoReactQuery.js</figcaption></figure><p id="778e" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">然后，向组件甚至整个应用程序提供查询客户端。在这里，我将它包装在组件本身上。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">src/app.js</figcaption></figure><p id="b0d6" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">最后，在组件中进行API调用。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mi mj l"/></div><figcaption class="kk kl gj gh gi km kn bd b be z dk">Again the code is as clean as the Redux one.</figcaption></figure><h1 id="68a0" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">那么，哪种方式是最好的呢？</h1><p id="e436" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">这完全取决于您的团队和项目需求，但是React Query是处理服务器和客户端之间所有通信的方法。虽然Redux也试图用RTK Query插件来做这件事，但React Query提供了更多的功能，因为它是为这个特定的用例设计的。如果您的项目已经使用Redux，使用RTK Query可能会更好，而不是向您的项目添加额外的包，尽管与React Query相比，社区对Redux这方面的支持仍然很低。</p><p id="1e27" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">阅读下面的比较，做出更好的决定。</p><ul class=""><li id="9a9a" class="ng nh in li b lj md lm me lp ni lt nj lx nk mb nl nm nn no bi translated">React Query与其他库的比较。</li><li id="64f1" class="ng nh in li b lj np lm nq lp nr lt ns lx nt mb nl nm nn no bi translated"><a class="ae mc" href="https://redux-toolkit.js.org/rtk-query/comparison" rel="noopener ugc nofollow" target="_blank"> RTK查询与其他库的比较。</a></li></ul><p id="69e5" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">您可以在我的GitHub上找到所有三个实现的完整代码。</p><div class="nu nv gp gr nw nx"><a href="https://github.com/yaralahruthik/DataFetchingLogicReact" rel="noopener  ugc nofollow" target="_blank"><div class="ny ab fo"><div class="nz ab oa cl cj ob"><h2 class="bd io gy z fp oc fr fs od fu fw im bi translated">GitHub-yaralahruthik/DataFetchingLogicReact</h2><div class="oe l"><h3 class="bd b gy z fp oc fr fs od fu fw dk translated">包括数据提取逻辑的三种实现。在中运行应用程序…</h3></div><div class="of l"><p class="bd b dl z fp oc fr fs od fu fw dk translated">github.com</p></div></div><div class="og l"><div class="oh l oi oj ok og ol ki nx"/></div></div></a></div><p id="aaba" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated">感谢您的阅读。</p><p id="8df5" class="pw-post-body-paragraph lg lh in li b lj md jo ll lm me jr lo lp mf lr ls lt mg lv lw lx mh lz ma mb ig bi translated"><em class="om">更多内容看</em> <a class="ae mc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="om">说白了. io </em> </a> <em class="om">。报名参加我们的</em> <a class="ae mc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="om">免费周报</em> </a> <em class="om">。在我们的</em> <a class="ae mc" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="om">社区</em> </a> <em class="om">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
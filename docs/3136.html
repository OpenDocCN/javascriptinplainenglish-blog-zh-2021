<html>
<head>
<title>Template Literals and a Practical Use of Tagged Templates in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">模板文字和标记模板在JavaScript中的实际应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/template-literals-and-a-practical-use-of-tagged-templates-58526d525d72?source=collection_archive---------9-----------------------#2021-06-25">https://javascript.plainenglish.io/template-literals-and-a-practical-use-of-tagged-templates-58526d525d72?source=collection_archive---------9-----------------------#2021-06-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="16d7" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">本文简要概述了JavaScript中的模板文字，最后，我们将看到如何使用带标记的模板来构建一个有效的翻译函数，当我们处理需要以多种语言呈现的静态文本时，这个函数非常有趣。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/f214ccf0c6c3f9c5404386d4e40d3b16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*htwxExLxjPrIGO3KoCYflg.png"/></div></div></figure><h1 id="01a2" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">什么是模板文字？</h1><p id="ea7f" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">它们是字符串文字，允许你做以下你不能用普通字符串做的事情。</p><ol class=""><li id="efcd" class="mc md in li b lj me lm mf lp mg lt mh lx mi mb mj mk ml mm bi translated">编写多行字符串文字。</li><li id="b16a" class="mc md in li b lj mn lm mo lp mp lt mq lx mr mb mj mk ml mm bi translated">在字符串中嵌入表达式，并让JavaScript运行时为您插入它们。Interpolate或Interpolation只是一个花哨的词，指的是用一堆占位符解析字符串并用它们的实际值替换占位符的过程。</li></ol><p id="302f" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">让我们用例子来看看这些。</p></div><div class="ab cl mv mw hr mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ig ih ii ij ik"><h1 id="d9c2" class="ko kp in bd kq kr nc kt ku kv nd kx ky jt ne ju la jw nf jx lc jz ng ka le lf bi translated">多行字符串</h1><p id="d970" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">通常，如果您想用JavaScript构建一个只有字符串的段落，您应该这样做。</p><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="5720" class="nm kp in ni b gy nn no l np nq">const paragraphSimple =<br/>  "This is a very long paragraph. \n " +<br/>  "It spans multiple lines.\n " +<br/>  "But it is written in the old way which is bit lame for 2021.";</span><span id="c491" class="nm kp in ni b gy nr no l np nq">console.log(paragraphSimple);</span></pre><p id="7334" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">但是使用模板文字，您可以做到这一点。</p><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="e509" class="nm kp in ni b gy nn no l np nq">const paragraphTemplate = `This is a very long paragraph.<br/>And it spans multiple lines.<br/>And it is written using template literals which is cool.`;</span><span id="8b77" class="nm kp in ni b gy nr no l np nq">console.log(paragraphTemplate);</span></pre><h1 id="1c9d" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">嵌入表达式</h1><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="0fd2" class="nm kp in ni b gy nn no l np nq">const twoPlustwo = `Two plus two is ${2 + 2}`;<br/>console.log(twoPlustwo); // "Two plus two is 4"</span></pre><p id="3485" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">在这种情况下，JavaScript运行时会将介于<code class="fe ns nt nu ni b">${</code>和<code class="fe ns nt nu ni b">}</code>之间的任何内容作为表达式进行计算，并用该表达式的结果替换它。</p><p id="8abf" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">当然，你也可以在表达式中使用变量。</p><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="0e27" class="nm kp in ni b gy nn no l np nq">const averageOf5Nums = (1 + 2 + 3 + 4 + 5) / 5;<br/>console.log(<br/>  `Average of first 5 positive natural numbers is ${averageOf5Nums}`<br/>);</span></pre><p id="5cf0" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">正如我们已经看到的。模板文字非常适合编写数据库查询，为API端点构建URL。应用程序是无止境的。</p><p id="1c9c" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">然而，模板文字还有另一个高级特性。它被称为标记模板。接下来我们将看到它的实际用法。</p><h1 id="b87f" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">标记模板</h1><p id="e82c" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">模板文字可以传递给一个叫做标签函数的东西。tag函数的主体就像任何其他函数一样，但它的特殊之处在于使用模板文本调用它的方式，以及JavaScript运行时如何将模板文本分解为不同的字符串部分，并将其作为参数传递给tag函数。我们举个简单的例子。</p><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="fa75" class="nm kp in ni b gy nn no l np nq">function myTag() {<br/>  console.log(arguments[0]);<br/>  console.log(arguments[1]);<br/>  console.log(arguments[2]);<br/>}</span><span id="a4a1" class="nm kp in ni b gy nr no l np nq">const name = "John";<br/>const planet = "Mars";<br/>myTag`Hello, ${name}. ${planet} welcomes you.`;</span></pre><p id="2e0d" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">这是打印的内容。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/8b98bfa801cfe76aaf3efe6b9f29452a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*yACPFRWXLEKAIjYfFiZLpQ.png"/></div></figure><p id="e5cc" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">这里我们只是使用一个模板文字来调用<code class="fe ns nt nu ni b">myTag</code>函数。但是运行时给了我们3个参数。</p><p id="9d36" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">第一个参数是文本静态部分的数组，按照它们出现的顺序排列。所有后续参数都是计算后的表达式，它们构成了计算后的模板文本。</p><p id="8ce3" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">这是一个强大的功能。让我们看一个我们可以使用它的实际用例。</p><h1 id="f6df" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">使用标记模板构建翻译字符串的函数</h1><p id="7c02" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">让我们假设我们必须构建一个应该支持法语和英语的应用程序。这里，我们在一个标签对象中维护所有的静态字符串及其翻译。在法语语言环境文件中，英语文本是键，法语文本是值。我们的语言环境文件可能如下所示。</p><pre class="kd ke kf kg gt nh ni nj nk aw nl bi"><span id="ba22" class="nm kp in ni b gy nn no l np nq">const labelsFr = {<br/>  "Hello {{0}}. How are you?": "Bonjour {{0}}. Comment vas-tu?"<br/>};</span></pre><p id="5994" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">有了标记模板，我们就可以在代码中处理英文文本，并在一个小的标记函数中拥有翻译文本的所有逻辑。让我们看看那个。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nw nx l"/></div></figure><p id="7ca9" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">如上所述，我们只是像平常一样使用模板文本构建动态字符串，并将其传递给tag函数。</p><p id="e897" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">然后，tag函数解析字符串的静态部分，构建将在labels对象中找到的标签键。最后，它用评估值替换占位符。</p><p id="e08f" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">上面示例中的当前语言只是一个全局变量。但是在现实世界和应用程序环境中，它是一个配置。</p><h1 id="2dce" class="ko kp in bd kq kr ks kt ku kv kw kx ky jt kz ju la jw lb jx lc jz ld ka le lf bi translated">包扎</h1><p id="d29c" class="pw-post-body-paragraph lg lh in li b lj lk jo ll lm ln jr lo lp lq lr ls lt lu lv lw lx ly lz ma mb ig bi translated">因此，我们已经讨论了模板字面量的常见和基本用法，以及带有标记函数的标记模板的高级用例。</p><p id="5c6d" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated">我写这篇文章是因为我已经使用模板文字很长时间了，但是从来没有编写标记函数的需要。我一直想知道为什么有人会写一本。但事实证明它们非常强大，超级有用。</p><p id="f9f4" class="pw-post-body-paragraph lg lh in li b lj me jo ll lm mf jr lo lp ms lr ls lt mt lv lw lx mu lz ma mb ig bi translated"><em class="ny">更多内容看</em><a class="ae nz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="li io"><em class="ny">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Getting Started with the JavaScript URL Object</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript URL对象入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-url-object-be2ea51c4a13?source=collection_archive---------7-----------------------#2021-08-02">https://javascript.plainenglish.io/javascript-url-object-be2ea51c4a13?source=collection_archive---------7-----------------------#2021-08-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="66af" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">停止编写容易出错的URL字符串，使用JavaScript对象在代码中操作URL。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/6c9c926e7bfabcede3b75af92d9dced4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RHHSjjEqmjq8PiDK.jpg"/></div></div></figure><p id="c2bc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你最近写过这行代码吗？</p><pre class="kg kh ki kj gt ln lo lp lq aw lr bi"><span id="4479" class="ls lt iq lo b gy lu lv l lw lx">const url = 'http://example.com/movies'; <br/>fetch(url)<br/>  .then(response =&gt; response.json())<br/>  .then(data =&gt; console.log(data));</span></pre><p id="3f0e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你在职业生涯的任何阶段都是一名专业的web开发人员，那么是的，你一直都在编写这样的API调用。对于上面这样一个简单的例子，URL是100%静态的，您可以使用一个简单的字符串来定义您的URL。但是这在现实生活中什么时候发生过呢😄？但是，当您需要对URL字符串进行更复杂的调整时，比如下面的例子，会发生什么呢？</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="04a4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的例子中，事情开始变得有点复杂，上面代码的手工性质将开始变得容易出错。<br/>在我写的代码中，空格没有在queryparam中编码，<br/>特殊字符也没有编码。如果有人传入一个包含空格的参数，或者更糟糕的是，一个特殊字符，那么这个方法就会中断。上面的代码会很脆。</p><h1 id="c02b" class="ma lt iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">URL对象</h1><p id="69b4" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">输入URL对象。像许多浏览器API一样，为了理解如何使用这个对象，您需要做一些前期的学习，但是使用它将对您的代码质量有长期的好处。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/1f262ab97379afa546204572d799fb69.png" data-original-src="https://miro.medium.com/v2/resize:fit:930/format:webp/1*p4cAC076P1UdANwyP-yrPw.png"/></div><figcaption class="mx my gj gh gi mz na bd b be z dk">example of the URL object prototype methods printed in console</figcaption></figure><p id="bd7c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以使用完全限定的URL字符串生成URL对象，如下所示:</p><p id="86d0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd lo b">let url = new URL(‘http://example.com/movies’);</code></p><p id="2c88" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后就可以使用许多不同的方法来帮助你以一种可靠的方式操作它。如果您需要使用URL来发出一个获取请求，您可以简单地像这样调用它<code class="fe nb nc nd lo b">fetch(url)</code>，它将在被访问时返回它的<code class="fe nb nc nd lo b">href</code>属性(在上面的例子中，它只是“<code class="fe nb nc nd lo b">http://example.com/movies</code>”。</p><p id="c0c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们用URL对象重写上面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="cb73" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">代码要简单得多，需要的人工工作也少得多。除了可读性和代码大小方面的明显改进，让我们看看使用URL对象的好处。</p><h2 id="5f67" class="ls lt iq bd mb ne nf dn mf ng nh dp mj la ni nj ml le nk nl mn li nm nn mp no bi translated">环境</h2><p id="b7a4" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在上面的例子中，参数的排列由对象为我们处理。我们不需要任何逻辑来重新排列URL的组成部分以进行匹配(添加“？”和' &amp; '字符串)。这不是很多工作，而是增加代码可靠性的另一种方法。</p><h2 id="6929" class="ls lt iq bd mb ne nf dn mf ng nh dp mj la ni nj ml le nk nl mn li nm nn mp no bi translated">编码</h2><p id="4846" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在对URL进行编码时，URL对象将根据<a class="ae np" href="https://tools.ietf.org/html/rfc3986" rel="noopener ugc nofollow" target="_blank"> RFC3986 </a>中的规则自动应用URL编码。这种编码应用于URL以及在它之后应用的任何queryparams。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ly lz l"/></div></figure><h2 id="94a6" class="ls lt iq bd mb ne nf dn mf ng nh dp mj la ni nj ml le nk nl mn li nm nn mp no bi translated">访问者</h2><p id="903a" class="pw-post-body-paragraph kr ks iq kt b ku mr jr kw kx ms ju kz la mt lc ld le mu lg lh li mv lk ll lm ij bi translated">在读取URL时，我们在前面的例子中没有这样做，这个对象也使事情变得更加清晰。考虑以下情况:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ly lz l"/></div></figure><p id="e4a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这段代码可以用URL对象的以下方法写成一行</p><p id="cdf1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nb nc nd lo b">WindowUrl.searchParams.get(“ director”); //</code></p><p id="a2a1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您在应用程序中使用<a class="ae np" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/hashchange_event" rel="noopener ugc nofollow" target="_blank">散列或散列路由</a>，不要害怕。该对象也有处理这种情况的方法，如果出于某种原因需要将浏览信息发送回服务器(特别是为了广告跟踪)，您可以使用<code class="fe nb nc nd lo b">toJSON()</code>方法将URL对象的全部内容作为JSON打印出来。</p><p id="7d1d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读，祝您编码愉快。</p><p id="f5ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">~ <a class="nq nr ep" href="https://medium.com/u/ee1620854db4?source=post_page-----be2ea51c4a13--------------------------------" rel="noopener" target="_blank">亚历克斯·济托-沃尔夫</a></p><p id="9ff5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">来源</strong>:</p><div class="ns nt gp gr nu nv"><a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">URL-Web API | MDN</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">该接口用于解析、构造、规范化和编码URL。它的工作原理是提供允许您…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">developer.mozilla.org</p></div></div><div class="oe l"><div class="of l og oh oi oe oj kp nv"/></div></div></a></div><p id="fbc8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ok">更多内容请看</em><a class="ae np" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ok">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
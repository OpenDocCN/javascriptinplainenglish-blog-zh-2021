<html>
<head>
<title>What’s New in Node.js v17?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js v17有什么新功能？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/whats-new-in-node-js-v17-caf174da0acf?source=collection_archive---------7-----------------------#2021-11-15">https://javascript.plainenglish.io/whats-new-in-node-js-v17-caf174da0acf?source=collection_archive---------7-----------------------#2021-11-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="28c7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Node.js 17的特性解释。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/11f2a48e74b064eb44cde48878935a0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vAotTfmHUGWPMIdS.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">Image source</a></figcaption></figure><p id="ff4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">流行的JavaScript运行时的最新主要版本(v17)刚刚在几周前发布。Node.js 17已成功添加为<strong class="ky ir">当前</strong>发布线，Node 16已作为长期支持(<strong class="ky ir"> LTS </strong>)。</p><p id="fde7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于是奇数版本，这个版本将<a class="ae kv" href="https://github.com/nodejs/release" rel="noopener ugc nofollow" target="_blank">而不是</a>推广到LTS。尽管是一个相对较小的更新，但这个版本对运行时进行了一些改进，包括更有前途的API、JavaScript引擎升级和OpenSSL 3.0支持。</p><p id="99c3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个博客中，你会发现这次发布的主要亮点！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f813" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">1.新的基于承诺的API</h1><p id="420c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在最近几个主要的Node.js版本中，为<code class="fe mw mx my mz b">dns</code>、<code class="fe mw mx my mz b">fs</code>、<code class="fe mw mx my mz b">stream</code>和<code class="fe mw mx my mz b">timers</code>模块添加了基于Promise的API。在Node.js 17中，这种混杂工作已经扩展到了<code class="fe mw mx my mz b">readline</code>模块，它主要用于接受来自命令行的输入。新的API可从<code class="fe mw mx my mz b">readline/promises</code>模块访问。</p><p id="2480" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">以前，我们习惯对<code class="fe mw mx my mz b">readline</code>模块使用回调函数。现在，当从<code class="fe mw mx my mz b">readline/promises</code>导入时，您将能够使用<code class="fe mw mx my mz b">async</code></p><p id="25ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">在节点v17之前:</em></p><pre class="kg kh ki kj gt nb mz nc nd aw ne bi"><span id="05af" class="nf ma iq mz b gy ng nh l ni nj">import readline from "readline";<br/>import process from "process";<br/><br/>const rl = readline.createInterface({<br/>  input: process.stdin,<br/>  output: process.stdout,<br/>});<br/><br/>rl.question(`What's your name?`, (name) =&gt; {<br/>  console.log(`Hey ${name}!`);<br/>  rl.close();</span></pre><p id="afe0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">在节点v17之后:</em></p><pre class="kg kh ki kj gt nb mz nc nd aw ne bi"><span id="7f81" class="nf ma iq mz b gy ng nh l ni nj">import readline from "readline/promises";<br/>import process from "process";<br/><br/>const rl = readline.createInterface({<br/>  input: process.stdin,<br/>  output: process.stdout,<br/>});<br/><br/>const name = await rl.question(`What's your name?`);<br/>console.log(`Hey ${name}!`);<br/>rl.close();</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="1549" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">2.Node.js版本将包含在堆栈跟踪中</h1><p id="baf6" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">当调试一个问题时，开发人员的一个常见问题是-<em class="na">node . js使用的是什么版本？Node.js 17通过在堆栈跟踪的末尾包含版本号，使得提供这些信息变得更加容易。</em></p><pre class="kg kh ki kj gt nb mz nc nd aw ne bi"><span id="993a" class="nf ma iq mz b gy ng nh l ni nj">file:///home/harsha/dev/demo/main.mjs:1<br/>throw new Error("Uncaught exception");<br/>      ^<br/><br/>Error: Uncaught exception<br/>    at file:///home/harsha/dev/demo/main.mjs:1:7<br/>    at ModuleJob.run (node:internal/modules/esm/module_job:185:25)<br/>    at async Promise.all (index 0)<br/>    at async ESMLoader.import (node:internal/modules/esm/loader:281:24)<br/>    at async loadESM (node:internal/process/esm_loader:88:5)<br/>    at async handleMainPromise (node:internal/modules/run_main:65:12)<br/><br/>Node.js v17.0.0</span></pre><p id="bcc0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在启动Node.js脚本时使用<code class="fe mw mx my mz b">--no-extra-info-on-fatal-exception</code>命令行标志，以便在程序的堆栈跟踪中省略这些信息。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5907" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">3.支持OpenSSL 3.0</h1><p id="a90b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Node.js 17将对OpenSSL 1.1.1的支持扩展到了<a class="ae kv" href="https://www.openssl.org/blog/blog/2021/09/07/OpenSSL3.Final/" rel="noopener ugc nofollow" target="_blank"> OpenSSL 3.0 </a>。</p><p id="4153" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">目标是让OpenSSL 3.0中的API与以前的OpenSSL版本中提供的API兼容。但是，由于一些限制以及允许的密钥大小和算法，可能会对生态系统产生一定的影响。</p><p id="b56f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当您的应用程序或其依赖项使用OpenSSL 3.0中不允许的算法或密钥大小时，这种影响会反映在Node.js 17中的错误消息<code class="fe mw mx my mz b">ERR_OSSL_EVP_UNSUPPORTED</code>中。</p><p id="6700" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用<code class="fe mw mx my mz b">--openssl-legacy-provider</code>命令行标志来启用OpenSSL 3.0遗留提供者，作为缓解这些限制的临时方法。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c7ae" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">4.V8 JavaScript引擎升级到v9.5</h1><p id="1947" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">截止Node.js 17，v8 JavaScript引擎已经更新到<a class="ae kv" href="https://v8.dev/blog/v8-release-95" rel="noopener ugc nofollow" target="_blank"> v9.5 </a>。</p><p id="2bb5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这将调整应用程序的性能，并增强开发过程的体验。</p><p id="4882" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此版本中的更改主要旨在扩展日期和日历以及时区输出的国际化:</p><ul class=""><li id="1087" class="nk nl iq ky b kz la lc ld lf nm lj nn ln no lr np nq nr ns bi translated"><code class="fe mw mx my mz b">Intl.DisplayNames</code> API支持的其他类型</li><li id="b57a" class="nk nl iq ky b kz nt lc nu lf nv lj nw ln nx lr np nq nr ns bi translated"><code class="fe mw mx my mz b">Intl.DateTimeFormat</code> API中扩展的<code class="fe mw mx my mz b">timeZoneName</code>选项</li></ul></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="80de" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">折旧和移除</h1><p id="e3dc" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">Node.js 17还附带了一些<a class="ae kv" href="https://nodejs.org/en/blog/release/v17.0.0/#deprecations-and-removals" rel="noopener ugc nofollow" target="_blank">弃用和移除</a>。通读一遍以了解更多信息。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="d11f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="89bf" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在这个主要版本之后，Node.js 16已经被提升到LTS。这个LTS版本包含核心包脚本，它是包管理器和Node.js应用程序项目之间的桥梁，应该在开发过程中使用。这将允许用户使用<code class="fe mw mx my mz b">npm</code>和<code class="fe mw mx my mz b">yarn</code>，而实际上不需要安装它们。这意味着一些功能将会得到长期支持。所以现在是采用Node.js 16版本的理想时机，因为即使Node.js 12也将在2022年退出服务。</p><p id="a743" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">嗯，真的应该升级到<a class="ae kv" href="https://nodejs.org/en/download/current/" rel="noopener ugc nofollow" target="_blank"> v17 </a>吗？虽然它不是LTS版本，但它有一些重要的更新，你不能忽视。因此，我将由您来决定是否升级。</p><p id="5191" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="a96d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">参考</h1><div class="ny nz gp gr oa ob"><a href="https://medium.com/the-node-js-collection/node-js-17-is-here-8dba1e14e382" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">Node.js 17来了！</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">这篇博客由贝瑟尼·格里戈斯撰写，Node.js技术指导委员会提供了额外的资料…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://nodejs.org/en/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">节点. js</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">Node.js是基于Chrome的V8 JavaScript引擎构建的JavaScript运行时。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">nodejs.org</p></div></div><div class="ok l"><div class="oq l om on oo ok op kp ob"/></div></div></a></div><p id="c05b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="na">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="na">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Resize an Input Box to Avoid Overflow in a Functional React Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何调整输入框的大小以避免函数反应形式的溢出</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/resize-an-input-box-to-avoid-overflow-in-a-functional-react-form-94d6610a6129?source=collection_archive---------2-----------------------#2021-06-11">https://javascript.plainenglish.io/resize-an-input-box-to-avoid-overflow-in-a-functional-react-form-94d6610a6129?source=collection_archive---------2-----------------------#2021-06-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c09d470da5106645eaf730746fe3b5b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VBSlKvfcxU7WSya_uDIgqw.png"/></div></div></figure><p id="b7ea" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上周，我写了一篇非常相似的文章<a class="ae kt" rel="noopener ugc nofollow" target="_blank" href="/resize-input-text-to-avoid-overflow-in-a-functional-react-form-178bb8d33708"/>关于如何调整文本大小以适应静态尺寸的输入框。本周，我们将研究调整输入框的大小以适应文本。很遗憾，两者都没有一个纯CSS解决方案，但是用一些JavaScript很容易实现。</p><p id="3d54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将创建一个简单的表单，接受一个输入，用户的位置，并改变输入框的大小，这样我们就不会有任何溢出。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ku"><img src="../Images/42fef82b571f38d3479c75e687987f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*0Ct9A0QS_leqMBtm0ASs5A.gif"/></div></div></figure><p id="2c85" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong>本文的开头与我之前关于如何调整文本大小以适应输入框的文章基本相同。如果您想跳过，点击<a class="ae kt" href="#8ac7" rel="noopener ugc nofollow">此处</a>。</p><p id="6788" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们开始吧！首先，我们需要创建一个功能性的React组件，该组件返回一个带有单个输入的表单。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi kz"><img src="../Images/0f8d0f6422c0ef74cacab45eee8b2fa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/0*lBTz_7PuEJe3QB2r.png"/></div></figure><p id="ccf1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于本例，我们只需确保表单提交时页面不会刷新。在<code class="fe la lb lc ld b">handleSubmit </code>功能中，我们只是通过增加<code class="fe la lb lc ld b">e.preventrDefault().</code>来防止默认提交行为</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi le"><img src="../Images/fccfb4de139a7d89aa044c50e3ea2d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/0*c2flz-sOURWOmIau.png"/></div></figure><p id="28da" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然已经排除了这种可能性，让我们努力使它成为一种受控的形式。为了改变输入字段的大小，我们首先需要知道每当输入值改变时，输入字段中有多少个字母。为此，我们使用一种受控形式。我们将从设置一个状态变量开始。因为我们使用的是功能性组件，所以我们将需要使用钩子来实现这一点。在这里我们将使用<code class="fe la lb lc ld b">useState</code>钩子。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/394319c2748629d4465af05b06cca573.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/0*HEjXxL4Z0oP8OSTM.png"/></div></figure><p id="f4df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们将设置输入。我们需要将我们的输入值设置为状态变量“location”，给输入一个ID，我们还需要一个<code class="fe la lb lc ld b">onChange</code>事件监听器，它会在输入改变时执行我们的<code class="fe la lb lc ld b">handleChange</code>功能。如果您愿意，您可以在选择输入时添加一个占位符和一个函数来清除该值，但是对于这个受控形式来说，唯一绝对必要的是值、ID和<code class="fe la lb lc ld b">onChange </code>事件侦听器。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/15d88f8c66d711427ef52656307f2522.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*_R_o6bEiZXLwD--OUTgR5g.png"/></div></figure><p id="5a27" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们通过构建我们的<code class="fe la lb lc ld b">handleChange </code>和<code class="fe la lb lc ld b">handleClearField </code>函数来为这个表单添加一些功能。我们从<code class="fe la lb lc ld b">handleChange.</code>开始</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/115bdd8a1bd93756918d0f9a45231b36.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/0*msvzoV1fM9GSdDqA.png"/></div></figure><p id="586d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，我们在这里所做的只是将状态变量“location”设置为事件目标的值。事件是对输入的改变，目标是输入本身。因为输入的值被设置为我们的状态变量“location ”,所以这允许我们控制表单。现在，我们将来自用户的输入信息保存到一个变量中，我们可以用它来确定输入字段的大小。</p><p id="459c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了清理场地，我们做了一些类似的事情。我们只是将状态变量“location”设置为一个空字符串。一旦输入的值为空，占位符就会显示出来。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/2581113b4b94ed203b9515826d04bbe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/0*YTfyERPnRd-Pf8xa.png"/></div></figure><p id="8ac7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们只需要调整输入字段的大小，以适应其中的文本。</p><p id="842a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了调整输入字段的大小，我们将创建一个函数，使用location变量中的字符数来确定适合所有文本所需的宽度。然后，我们将width dimension设置为输入元素的<code class="fe la lb lc ld b">width</code>属性。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lj"><img src="../Images/8abc945f86b9bcdbb1de940d8771c3e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*qLVtJGTUoBlCgR5AkscBJw.png"/></div></div></figure><p id="642f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们抓取位置按钮元素，并将其设置为变量<code class="fe la lb lc ld b">locationButton</code>。然后，如果我们的位置变量的值小于一个字符长，我们设置<code class="fe la lb lc ld b">locationButton</code>的宽度以适合占位符文本。否则，我们设置<code class="fe la lb lc ld b">locationButton</code>的宽度等于位置变量中的字符数加五。这给了我们一点填充，并确保所有的文本将适合没有溢出。我们使用<code class="fe la lb lc ld b">ch</code>度量单位来确定输入字段的宽度，因为一个<code class="fe la lb lc ld b">ch</code>大约等于一个字符的大小(基于“0”)。</p><p id="1239" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了让一切顺利进行，我们只需要再走一步。让我们导入<code class="fe la lb lc ld b">useEffect </code>钩子，当组件挂载时，以及每次位置变量改变时，用它来调整输入字段的大小。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/f6da373379ee0f44bfc3cbf8378ef574.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*BgeYfJ4oEAJA9WLslUxf-A.png"/></div></figure><p id="2906" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了这个<code class="fe la lb lc ld b">useEffect</code>钩子，我们的<code class="fe la lb lc ld b">adjustInputSize </code>函数在定位组件挂载时开始运行。通过包含我们的位置变量作为依赖项，它将运行<code class="fe la lb lc ld b">adjustInputSize</code>并在<code class="fe la lb lc ld b">location</code>的值改变时触发重新渲染。</p><figure class="kv kw kx ky gt jo gh gi paragraph-image"><div class="gh gi ll"><img src="../Images/dc13ba7604193ad9f8e4105c98322f27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*pD5qDm5DwvfPFGSG3nuQ7w.png"/></div></figure><p id="564b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！通过使用来自我们的控制表单的信息，我们能够创建一个根据其值的长度动态调整大小的输入字段。再也不用处理难看的溢出了！开心快乐编码！</p><p id="b2ee" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lm">更多内容请看</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lm">plain English . io</em></a></p></div></div>    
</body>
</html>
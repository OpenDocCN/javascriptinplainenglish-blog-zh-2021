<html>
<head>
<title>Electron Seamless Title Bar with Svelte and Tailwind</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带细长尾翼的电子无缝标题栏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/electron-seamless-titlebar-with-svelte-and-tailwind-bd4d53d81c67?source=collection_archive---------6-----------------------#2021-10-02">https://javascript.plainenglish.io/electron-seamless-titlebar-with-svelte-and-tailwind-bd4d53d81c67?source=collection_archive---------6-----------------------#2021-10-02</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><figure class="gm go jp jq jr js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj jo"><img src="../Images/62bf72a1531662b37b3ab4f8df01a941.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Be8FUzGRLws3CzlereRKqQ.jpeg"/></div></div><figcaption class="jz ka gk gi gj kb kc bd b be z dk">Photo Credit: <a class="ae kd" href="https://blog.stranianelli.com/electron-seamless-titlebar-with-svelte-and-tailwind-english/" rel="noopener ugc nofollow" target="_blank">Samuele</a></figcaption></figure><p id="7518" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">经过一些测试，我决定不使用默认情况下电子创建的窗口。我决定创建自己的标题栏，带有Windows风格的控制按钮。网上有很多教程指南。罗尼·杜塔的一个项目给了我灵感。</p><h1 id="e2aa" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">更新依赖关系</h1><p id="ce36" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">在开始这篇文章之前，有一点要注意。我不是从零开始，但我仍然使用我的<a class="ae kd" href="https://github.com/el3um4s/memento-svelte-electron-typescript" rel="noopener ugc nofollow" target="_blank">el3um 4s/memento-svelte-e-type script</a>模板。首先，像往常一样，我确保将所有依赖项更新到最新版本:</p><pre class="mf mg mh mi gu mj mk ml mm aw mn bi"><span id="659b" class="mo ld ir mk b gz mp mq l mr ms">npm run check-updates</span></pre><h1 id="db28" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">创建一个没有标题栏的窗口</h1><p id="c55a" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">首先，我通过将<code class="fe mt mu mv mk b">frame</code>属性设置为<code class="fe mt mu mv mk b">false</code>来创建一个没有标题栏的窗口:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><h1 id="8c08" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">添加基本样式</h1><p id="6044" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">出于美观的原因，我在<code class="fe mt mu mv mk b">tailwind.pcss</code>文件中添加了一些基本的样式:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="60a6" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">唯一的奇类是<code class="fe mt mu mv mk b">overflow-y-hidden</code>。它用于隐藏电子窗口的滚动条。我将使用一个自定义滚动条附加到页面的主要部分。</p><p id="bc6d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">当我(用<code class="fe mt mu mv mk b">npm run dev</code>启动应用程序时，我会看到这样一个窗口:</p><figure class="mf mg mh mi gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj my"><img src="../Images/20283ae2c10e9854ae73d37e5132b7aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qg6zWNfZpig-_M5m.jpg"/></div></div></figure><p id="d126" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">有什么问题？没有标题栏的窗口没有关闭按钮，不能移动。是时候添加自定义标题栏了。</p><h1 id="0fe6" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">添加自定义标题栏</h1><p id="0639" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">做一些测试，最好的方法似乎是创建一个组件<code class="fe mt mu mv mk b">src/frontend/Componentes/MainWithTitlebar.svelte</code>，在其中插入标题栏和页面的主要部分。</p><p id="2669" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我写了基本代码:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="a528" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后我将组件添加到<code class="fe mt mu mv mk b">App.svelte</code>:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="3b99" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">显然，这不会引起任何可见的变化。我需要给我的组件添加一些样式:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="5d76" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我使用Tailwind的<code class="fe mt mu mv mk b">h-8</code>类将页眉高度设置为32px，并相应地设置底层页面高度:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><figure class="mf mg mh mi gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj my"><img src="../Images/b213c4b1446e3c342ce7de7940c8bf2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*V7Lqh5b7yvjFCXu4.jpg"/></div></div></figure><p id="47cd" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">仅仅设置一个标题栏来移动窗口是不够的。幸运的是，电子让你很容易实现这种可能性。只需添加CSS样式<code class="fe mt mu mv mk b">-webkit-app-region: drag</code>:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><h1 id="3645" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">添加窗口控制按钮</h1><p id="8405" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">现在窗户可以移动了。但我也希望能够关闭，最小化和缩放它。我需要一些按钮:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="d2e0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">我将按钮区域设置为<code class="fe mt mu mv mk b">no-drag</code>是为了更容易点击按钮。说到按钮，在上面的代码中，我用了一些文字，但也许用图标更好。顺风让你轻松使用<a class="ae kd" href="https://heroicons.com/" rel="noopener ugc nofollow" target="_blank"> heroicons </a>图标。我利用它，创建了一些苗条的组件来显示图标。例如，这是<code class="fe mt mu mv mk b">IconClose.svelte</code>组件:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="2a2b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">创建图标后，我将它们插入标题栏:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><h1 id="9287" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">给窗口添加标题</h1><p id="c729" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">有几种方法可以给窗口添加标题。一个简单的方法是:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><figure class="mf mg mh mi gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj my"><img src="../Images/10a7cd2a51e275f72893665a74f1557f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wRAufIQs9tg4lKPd.jpg"/></div></div></figure><h1 id="a331" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">自定义滚动条</h1><p id="750b" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">默认情况下，电子显示Chrome滚动条。我可以用一些CSS代码改变它的风格:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="2d9d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这是结果:</p><figure class="mf mg mh mi gu js gi gj paragraph-image"><div role="button" tabindex="0" class="jt ju di jv bf jw"><div class="gi gj my"><img src="../Images/daf38ef6658ac3af76627fbed58549fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wn03tf_hiTCdF0vv.jpg"/></div></div></figure><h1 id="db56" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">启用按钮</h1><p id="6067" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">如果我点击按钮，什么也不会发生，因为我没有添加任何功能。我立即下定决心:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="004e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">显然，函数必须用代码填充。我能用什么？我需要使用特定的API。我创建了<code class="fe mt mu mv mk b">src/electron/IPC/windowControl.ts</code>文件:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="01f6" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">在<code class="fe mt mu mv mk b">src/electron/preload.ts</code>上注册新的API:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="ee58" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">最后，我允许主电子窗口使用API。我编辑了<code class="fe mt mu mv mk b">src/electron/index.ts</code>文件:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="bb54" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">这允许我返回到我正在处理的组件(<code class="fe mt mu mv mk b">MainWithTitlebar.svelte</code>)并添加缺少的功能:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="cf74" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在我可以使用各种按钮来最小化，最大化和关闭窗口。</p><h1 id="9bb3" class="lc ld ir bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">重置窗口大小</h1><p id="d20d" class="pw-post-body-paragraph ke kf ir kg b kh ma kj kk kl mb kn ko kp mc kr ks kt md kv kw kx me kz la lb ik bi translated">然而，有一个反常的行为。当我最大化窗口时，我想用另一个图标替换<code class="fe mt mu mv mk b">maximize</code>图标。也许当我点击时，我可以恢复原来的窗口大小。</p><p id="098d" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">为了实现这一点，我可以利用<code class="fe mt mu mv mk b"><a class="ae kd" href="https://svelte.dev/docs#svelte_window" rel="noopener ugc nofollow" target="_blank">&lt;svelte:window&gt;</a></code>元素。通过将它插入到我的细长组件中，我可以在不离开组件本身的情况下拦截一些与窗口相关的事件。</p><p id="6e16" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">为什么我要这么做？因为我还没有找到更简单的方法来判断窗口何时全屏。然后我不得不使用一个技巧:我检查窗口的大小。如果窗口至少和屏幕一样大，那么我假设它被最大化了。否则不行。</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="6f1e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">简单来说，<code class="fe mt mu mv mk b"><a class="ae kd" href="https://svelte.dev/docs#3_%24_marks_a_statement_as_reactive" rel="noopener ugc nofollow" target="_blank">$:</a></code> <a class="ae kd" href="https://svelte.dev/docs#3_%24_marks_a_statement_as_reactive" rel="noopener ugc nofollow" target="_blank">将一条语句标记为反应式</a>:这大大简化了必要的代码。</p><p id="8f4b" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">现在我只需添加函数:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="1ea7" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">然后:</p><figure class="mf mg mh mi gu js"><div class="bz fq l di"><div class="mw mx l"/></div></figure><p id="0d7e" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">仅此而已。</p><div class="mz na gq gs nb nc"><a href="https://github.com/el3um4s/memento-svelte-electron-typescript" rel="noopener  ugc nofollow" target="_blank"><div class="nd ab fp"><div class="ne ab nf cl cj ng"><h2 class="bd is gz z fq nh fs ft ni fv fx iq bi translated">GitHub-El 3um 4s/memento-svelte-electronic-typescript:使用Svelte创建桌面应用程序的模板…</h2><div class="nj l"><h3 class="bd b gz z fq nh fs ft ni fv fx dk translated">模板创建一个桌面应用程序与苗条，TailwindCSS，电子和打字稿(与电子更新…</h3></div><div class="nk l"><p class="bd b dl z fq nh fs ft ni fv fx dk translated">github.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq jx nc"/></div></div></a></div><p id="be37" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated">感谢阅读！敬请关注更多内容。</p></div><div class="ab cl nr ns hv nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ik il im in io"><p id="9ef0" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><strong class="kg is"> <em class="ny">不要错过我的下一篇文章—报名参加我的</em> </strong> <a class="ae kd" href="https://medium.com/subscribe/@el3um4s" rel="noopener"> <strong class="kg is"> <em class="ny">中邮箱列表</em> </strong> </a></p><div class="mz na gq gs nb nc"><a href="https://el3um4s.medium.com/membership" rel="noopener follow" target="_blank"><div class="nd ab fp"><div class="ne ab nf cl cj ng"><h2 class="bd is gz z fq nh fs ft ni fv fx iq bi translated">通过我的推荐链接加入Medium—Samuele</h2><div class="nj l"><h3 class="bd b gz z fq nh fs ft ni fv fx dk translated">阅读萨缪尔的每一个故事(以及媒体上成千上万的其他作家)。不是中等会员？在这里加入一块…</h3></div><div class="nk l"><p class="bd b dl z fq nh fs ft ni fv fx dk translated">el3um4s.medium.com</p></div></div><div class="nl l"><div class="nz l nn no np nl nq jx nc"/></div></div></a></div></div><div class="ab cl nr ns hv nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ik il im in io"><p id="0b54" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="ny">原载于2021年10月2日https://blog.stranianelli.com</em><a class="ae kd" href="https://blog.stranianelli.com/electron-seamless-titlebar-with-svelte-and-tailwind-english/" rel="noopener ugc nofollow" target="_blank"><em class="ny"/></a><em class="ny">。</em></p><p id="96c2" class="pw-post-body-paragraph ke kf ir kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb ik bi translated"><em class="ny">更多内容看</em> <a class="ae kd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="ny">说白了就是</em> </strong> </a> <strong class="kg is"> <em class="ny">。</em> </strong> <em class="ny">报名参加我们的</em> <a class="ae kd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kg is"> <em class="ny">免费每周简讯这里</em> </strong> </a> <strong class="kg is"> <em class="ny">。</em>T41】</strong></p></div></div>    
</body>
</html>
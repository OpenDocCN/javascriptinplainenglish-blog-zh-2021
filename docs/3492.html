<html>
<head>
<title>Create Dynamic Forms with the React Hook Form Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Hook表单库创建动态表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-dynamic-forms-with-react-hook-form-2021-a3bccae35163?source=collection_archive---------4-----------------------#2021-07-14">https://javascript.plainenglish.io/how-to-create-dynamic-forms-with-react-hook-form-2021-a3bccae35163?source=collection_archive---------4-----------------------#2021-07-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8591" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">React Hook表单教程:如何使用react-hook-form库构建动态表单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/06ad917f051643fb8b21696cd0527108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u1MtY4DBJu0_27XR"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina @ wocintechchat.com</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="62a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本教程中，我们将学习如何创建一个带有动态输入的表单，或者像有些人所说的那样，创建一个expando/扩展表单。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/730fd08c6ab3bd83279d024503b4c32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/1*U9b9xp2NCvS2Hagjn258ew.gif"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Dynamic input form example</figcaption></figure><p id="6bc3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以上是我们今天要构建的一个例子，在第一部分，我将纯粹关注功能性，这意味着我们不会使用任何样式。这是为了让我们在混合样式元素和混淆自己之前，能够真正理解它是如何工作的。在第二部分中，我们将向现有项目添加样式，并使其组件可重用。</p><p id="8942" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用以下库/包:</p><p id="ac1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一部分</strong></p><ul class=""><li id="9a2b" class="lh li in jm b jn jo jr js jv lj jz lk kd ll kh lm ln lo lp bi translated">react-v 17 . 0 . 2</li><li id="e24e" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated"><a class="ae ky" href="https://react-hook-form.com/get-started" rel="noopener ugc nofollow" target="_blank">反应钩形</a> — v7.11.0</li></ul><p id="9b05" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二部分</strong></p><ul class=""><li id="40b1" class="lh li in jm b jn jo jr js jv lj jz lk kd ll kh lm ln lo lp bi translated">@ material-ui/core-v 4 . 12 . 1</li><li id="e018" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">@ material-ui/icons-v 4 . 11 . 2</li></ul></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="65cc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一旦运行了react应用程序，我们将需要安装一些依赖项，您可以使用以下命令</p><pre class="kj kk kl km gt lv lw lx ly aw lz bi"><span id="f48b" class="ma mb in lw b gy mc md l me mf">## For react-hook-formm</span><span id="210a" class="ma mb in lw b gy mg md l me mf">npm install --save react-hook-form</span><span id="e049" class="ma mb in lw b gy mg md l me mf">&amp;&amp;</span><span id="7936" class="ma mb in lw b gy mg md l me mf">## (optional) material-ui</span><span id="954b" class="ma mb in lw b gy mg md l me mf">npm install --save @material-ui/core @material-ui/icons</span></pre><p id="4323" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用<a class="ae ky" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">NPM</strong></a><strong class="jm io"/>来安装软件包，但是当然，你可以使用任何你喜欢的软件包管理器，比如<a class="ae ky" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> yarn </strong> </a>。</p><p id="7419" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们开始吧！</p><ol class=""><li id="d5a9" class="lh li in jm b jn jo jr js jv lj jz lk kd ll kh mh ln lo lp bi translated">我们需要从react-hook-form-library中导入<code class="fe mi mj mk lw b">useform</code>、<code class="fe mi mj mk lw b">useFieldArray</code> &amp; <code class="fe mi mj mk lw b">Controller</code>。</li></ol><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="177f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是新导入的库的文件外观。在我继续之前，来自<a class="ae ky" href="https://react-hook-form.com/api" rel="noopener ugc nofollow" target="_blank"> react-hook-form </a>的文档有非常详细的例子和解释，所以如果你面临任何大问题，请查阅文档或在评论中联系我，我很乐意帮助你。</p><p id="bc2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.接下来，我们将使用新导入的挂钩，并使用一些析构来提取一些字段。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="9b28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们调用<code class="fe mi mj mk lw b">useFieldArray</code>时，注意我们是如何传递一个对象的，记下您提供的<code class="fe mi mj mk lw b">name</code>，并确保它是符合逻辑的，例如，我们今天构建的表单是一个图书列表，所以我为它提供了图书的名称。</p><p id="fb80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们还提供了<code class="fe mi mj mk lw b">control</code>，从ES6开始我们可以使用一个叫做对象属性速记的小技巧，在这里了解更多。</p><p id="1ae6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3.我们现在可以开始使用之前获得的<code class="fe mi mj mk lw b">fields</code>变量来显示我们的动态表单。基本上，<code class="fe mi mj mk lw b">fields</code>是一个包含我们给定的任何输入的数组，由于我们没有提供任何输入，<code class="fe mi mj mk lw b">fields</code>目前的长度为0。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="a74e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请确保您阅读了代码中的注释以完全理解，我也将在这里查看它们。</p><ul class=""><li id="8397" class="lh li in jm b jn jo jr js jv lj jz lk kd ll kh lm ln lo lp bi translated">我们使用JS map方法将每个字段呈现为一个<code class="fe mi mj mk lw b">item</code>，确保为每个项目添加一个唯一的键，这很重要。</li><li id="2aee" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">默认情况下，每个<code class="fe mi mj mk lw b">item</code>都是一个带有<code class="fe mi mj mk lw b">id</code>属性的对象，我们可以很方便地使用它，react-hook-form不支持平面数组。但是别担心，我们以后会处理的。</li><li id="cdba" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">对于名称属性，我们使用<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">模板文字</a>，确保用您的字段数组的名称替换<code class="fe mi mj mk lw b">books</code>，用存在于<code class="fe mi mj mk lw b">item</code>中的属性替换<code class="fe mi mj mk lw b">value</code>。这一点很快就会变得有意义。</li><li id="8a65" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">在render prop上，我们传递一个返回输入组件的函数，如果需要，我们可以传递带有样式的自定义输入。</li><li id="b274" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">我们需要从这个函数中获得由<code class="fe mi mj mk lw b">Controller</code>自动传递的<code class="fe mi mj mk lw b">field</code>参数，并使用<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax" rel="noopener ugc nofollow" target="_blank">扩展操作符</a>将这些属性传递给我们的输入。</li><li id="1cc6" class="lh li in jm b jn lq jr lr jv ls jz lt kd lu kh lm ln lo lp bi translated">append按钮使用了<code class="fe mi mj mk lw b">append</code>方法，这将在fields数组的末尾添加一个新的对象，但是，我们需要在这个对象中设置属性，正如我前面提到的，不支持平面数组，所以为了简单起见，我们在对象上只有一个value属性，前面提到的<code class="fe mi mj mk lw b">id</code>属性是自动添加进去的。</li></ul></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="adf8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">解释有点冗长，但是它们可以帮助你理解如何正确地使用它，这样你就可以创建你自己的动态表单。</p><p id="98af" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">就像动态表单已经开始工作一样，我们还有最后一件事要处理。</p><p id="c4f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们的数组是一个对象数组，</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/4785c5ef7d9b2c15ac75f0bad235454a.png" data-original-src="https://miro.medium.com/v2/resize:fit:758/format:webp/1*YRvND4sMCY383MajDCgBjg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Returned data</figcaption></figure><p id="f924" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是我们在console.log数据时得到的结果，记住这也是在一个表单中，所以不只是返回数组，而是返回整个表单数据。</p><p id="434b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们的数组存储在我们之前使用钩子时提供的名称(books)下。</p><p id="814b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果我们想把它作为数组而不是对象存储在数据库中，我们只需要创建一个简单的函数来处理它。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="ml mm l"/></div></figure><p id="fc5d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们创建了一个<code class="fe mi mj mk lw b">handleOnSubmit</code>函数来处理数组数据，就像我说的，整个表单数据被返回，所以我们需要从数据对象中析构它。接下来，我们简单地映射数据并只返回每个<code class="fe mi mj mk lw b">book</code>对象的值。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/891a755ab607cec40b941b82705f7082.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*FgG4qwjF8j7zslXHPySfRg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Returned data</figcaption></figure><p id="1735" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是使用react-hook-form创建动态输入表单所需要做的全部工作。</p><p id="0b80" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">希望你喜欢这篇教程以及冗长的解释，如果你有任何问题，请随时告诉我，我很乐意帮忙。请继续关注第2部分，学习如何使它成为一个可重用的组件，并添加样式使它变得更漂亮。👋</p><p id="d6b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">代码沙盒的链接在这里:<a class="ae ky" href="https://codesandbox.io/s/dynamic-form-use-field-array-db5sb?file=/src/App.js" rel="noopener ugc nofollow" target="_blank">https://code sandbox . io/s/dynamic-form-use-field-array-db5sb？file=/src/App.js </a></p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="a7a2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">查看一些以前的文章/教程！</p><div class="mp mq gp gr mr ms"><a href="https://jrpotatodev.medium.com/how-to-create-a-simple-web-server-using-node-js-2021-5c3e89833128" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">如何使用Node.js (2021)创建一个简单的web服务器</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">使用Node.js的简单web服务器(2021)</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">jrpotatodev.medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng ks ms"/></div></div></a></div><div class="mp mq gp gr mr ms"><a href="https://jrpotatodev.medium.com/how-to-use-import-aliases-in-react-with-craco-2021-aaa3b4893dd" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">如何在React with craco (2021)中使用导入别名</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">我们为什么需要这个？嗯，我们不一定要在React应用程序中使用导入别名。这只是为了让生活…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">jrpotatodev.medium.com</p></div></div><div class="nb l"><div class="nh l nd ne nf nb ng ks ms"/></div></div></a></div><div class="mp mq gp gr mr ms"><a href="https://jrpotatodev.medium.com/create-a-country-select-component-with-react-2021-a259bd0350d5" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">使用React (2021)创建国家选择组件</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">在本教程中，我们将学习如何为所有国家创建一个简单的选择/下拉列表，因为逐个输入非常…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">jrpotatodev.medium.com</p></div></div><div class="nb l"><div class="ni l nd ne nf nb ng ks ms"/></div></div></a></div><p id="e472" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nj">更多内容尽在</em><a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="nj">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>WebAssembly vs JavaScript: Can WASM Beat JavaScript in Benchmark?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络组装与JavaScript:WASM能在基准测试中击败JavaScript吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/webassembly-vs-javascript-can-wasm-beat-javascript-in-benchmark-cd7c30faaf7a?source=collection_archive---------2-----------------------#2021-07-14">https://javascript.plainenglish.io/webassembly-vs-javascript-can-wasm-beat-javascript-in-benchmark-cd7c30faaf7a?source=collection_archive---------2-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="099b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">许多人认为WASM速度极快，最终会淘汰JavaScript。但是，有几点需要考虑。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/13b43557f53811067a593d9f3ac3a5a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bBWgPtlhiJsuyFn86GWOeg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">WASM is an Assembly-like low-level language developed for the web.</figcaption></figure><p id="dcf8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">很有可能您至少听说过WebAssembly，因此您来到了这里。根据W3C的说法，除了HTML、CSS和JavaScript，网络汇编是允许代码在浏览器中运行的第四种网络语言。对于web开发来说，这是一个非常重大的事件，因为自1996年(CSS)以来，没有任何语言被添加到这个列表中。因此，在这一点上，提出了3个重要问题。</p><ul class=""><li id="2e2e" class="lr ls iq kx b ky kz lb lc le lt li lu lm lv lq lw lx ly lz bi translated">什么是网络组装，它是如何工作的？</li><li id="4587" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">它真的像它的介绍所说的那样照明很快吗？</li><li id="cecd" class="lr ls iq kx b ky ma lb mb le mc li md lm me lq lw lx ly lz bi translated">它会取代JavaScript吗？</li></ul><p id="dbf9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们从第一个问题开始。</p><h1 id="53b5" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">什么是网络组装？</h1><p id="b77e" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">WebAssembly是一种低级的编译语言，可以在所有主要的浏览器上运行。这是相当新的，所以它的影响在我们每天使用的网站上不是很明显。</p><p id="e012" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">网络组装最关心的是速度。如您所知，JavaScript是一种使用JIT(即时编译器)在浏览器上运行的解释语言。这种方法的主要缺点是，在运行时编译代码之前，计算机无法理解代码。这显著减慢了执行过程。</p><p id="3d53" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">此时，WebAssembly非常方便，因为与JavaScript不同，WebAssembly一直被编译成二进制代码，因此，它的运行速度非常快，是JavaScript无法比拟的。但是故事还没有结束。令人惊讶的是，出于速度的考虑，仍然有一些地方应该让你更喜欢JavaScript而不是WebAssembly。</p><p id="eee9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">WebAssembly带来的另一个创新是在web上提供诸如C、C++、Rust或TypeScript之类的语言。因为WebAssembly是非常低级的，所以很难编码。幸运的是，有编译器可以将我提到的语言编译成WebAssembly。所以，你可以在网上用你最喜欢的语言来开发网络应用程序。</p><p id="6d17" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一个用TypeScript编写的求和函数。因为我们将把这个函数编译成WebAssembly，所以类型定义应该是相应的(AssemblyScript)。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nc"><img src="../Images/de2bd68fa586c6d0496beed0c2df11dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAAxbxXOg9cFNcyv-i1ViQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">An AssemblyScript function to add two numbers.</figcaption></figure><p id="948a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">正如您所看到的，它很容易被人理解和阅读，因为TypeScript是一种高级语言。现在我们将把这个TypeScript函数转换成WebAssembly。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/6101d870d54cb2557a8b4d23bb299d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lsJtYhKJmEw3TbvfIRQufg.png"/></div></div></figure><p id="0026" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">对于大多数开发人员来说，这个WebAssembly代码看起来很复杂，尽管它的逻辑很简单，加了两个数字。这就是为什么我们不直接编写WebAssembly，而是使用其他语言的原因。</p><h1 id="016c" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">它真的像介绍中所说的那样照明快吗？</h1><p id="c2db" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">简单的答案是肯定的。与JavaScript相比，它速度非常快。因为，与JavaScript不同，当浏览器运行它时，不需要编译它，因为它是在构建时编译的。但是让我们在JavaScript和WebAssembly上做一个基准测试，看看有什么有趣的结果。</p><p id="c129" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">首先，我将在JavaScript和WebAssembly中创建一个sum函数。然后我会测试一下，看哪一个更快。为了测试它，我将使用<code class="fe ne nf ng nh b">Benchmark</code>库。</p><p id="f622" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我创建了一个基准测试套件来测试两个数的相加，如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nd"><img src="../Images/5d6f208ddf66291a7b1f7a23835f6cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JXzFQOFguR24M3R8nJVSHw.png"/></div></div></figure><p id="d868" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">结果非常有趣，出乎意料。因为不知何故JavaScript比我们钟爱的WebAssembly快了将近6倍。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ni"><img src="../Images/1c2416fe9d04990dd836ea731955c553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZwY5VyQNPI-0_5JeHxwC0g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">In sum test, JavaScript performed way better than WebAssembly.</figcaption></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="e56e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们创建另一个斐波那契函数，看看这是否依赖于我们使用的函数。作为参数，我将使用3。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nq"><img src="../Images/24cd2cda289197f205ad0d42b004d934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F3aRlY432CvFjWtZ6UvXQQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Fibonacci sequence until 3 using WASM and JS.</figcaption></figure><p id="cf29" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">结果和上一个案例一样。JavaScript又一次击败了WebAssembly。然而，在这次运行中，差异仅为1.5倍。我们使计算变得复杂，差异变小了。也许，我们把计算方式变得复杂了，以至于我们看不到不同的结果。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nr"><img src="../Images/09f18f80d8fb789f966a18b8a0d4a01e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q-p0tQETNpFpvqA3vUQPaQ.png"/></div></div></figure></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="8cd7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后，让我们用非常复杂的计算进行基准测试，看看结果是否相同。我不会创建一个更复杂的函数，而是会再次使用<code class="fe ne nf ng nh b">fibonacci</code>并让参数传递得更大。因为斐波纳契数列中的参数越大，计算时间就越长。所以，我选择参数为25。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/59fe33a84ac7ce69026b8443453c6695.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XqnHsV-xiFT1CeVOFiw1w.png"/></div></div></figure><p id="7088" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，我们终于看到了WebAssembly超过JavaScript的速度。当我们使计算变得更复杂时，它赢得了基准测试。但是为什么WebAssembly从一开始就没有赢得基准测试呢？嗯，这是因为在使用WebAssembly模块之前，应该先加载它们，但JavaScript不是这样。因此，当JavaScript开始执行时，WASM模块首先被加载，然后被执行。如果计算不复杂，那么JavaScript可以很好地处理它，但是如果复杂，那么加载WASM模块和利用它的速度会更快。</p><h1 id="bdb3" class="mf mg iq bd mh mi mj mk ml mm mn mo mp jw mq jx mr jz ms ka mt kc mu kd mv mw bi translated">它会取代JavaScript吗？</h1><p id="365c" class="pw-post-body-paragraph kv kw iq kx b ky mx jr la lb my ju ld le mz lg lh li na lk ll lm nb lo lp lq ij bi translated">取代JavaScript是一件巨大的事情，即使几十年也不可能完成，因为整个<em class="nt">万维网</em>都依赖于它。此外，它背后有一个庞大的社区在不断努力改进它。是的，与其他语言相比，JavaScript确实有一些缺点，如<code class="fe ne nf ng nh b">null</code>和<code class="fe ne nf ng nh b">==</code>，但这些不能成为取代所有技术的理由。</p><p id="49ca" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">因此，WebAssembly不会取代JavaScript，但这并不意味着WASM在未来将不复存在。相反，它的使用会越来越多。因为WASM为网络提供了大量计算的能力，如图像处理或游戏。使用WASM，人们可以构建一个运行良好的网页版Photoshop，或者创建一个可以在浏览器上以60 FPS甚至更高的速度玩的3D游戏。</p><p id="abd6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然而，JavaScript总是会把WASM粘在浏览器上，处理除繁重处理之外的任何事情。所以，你可以继续学习JavaScript，而不用担心它的未来。</p></div><div class="ab cl nj nk hu nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ij ik il im in"><p id="659c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果想尝试WebAssembly，可以使用<a class="ae nu" href="https://webassembly.studio/" rel="noopener ugc nofollow" target="_blank"> WebAssembly Studio </a>在线体验。如需进一步了解，您可以访问WebAssembly 的<a class="ae nu" href="https://webassembly.org/" rel="noopener ugc nofollow" target="_blank">官方网站。</a></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><a href="https://mailchi.mp/a45f8fb96cc9/subscribe"><div class="gh gi nv"><img src="../Images/9617ff4f7d33119c4d4e3d20c90708a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TtX3EIdGpUqGCOW6LtO42Q.png"/></div></a><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Subscribe to get your <strong class="bd nw">free <em class="nx">subscriber-exclusive</em></strong> story.</figcaption></figure><p id="3efa" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">谢谢你们的阅读。在这个故事中，我们从性能和概率方面比较了WASM和JS。如果你有什么问题，请留下评论，如果你喜欢，一定要鼓掌。下一个故事再见。</p><p id="df14" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir"> <em class="nt">延伸阅读</em> </strong></p><div class="ny nz gp gr oa ob"><a href="https://medium.com/fractions/real-life-experience-on-jetbrains-new-ide-fleet-5dde41b90a75" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">JetBrains的新IDE: Fleet上的真实体验</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">JetBrains试图通过Fleet保持与VS代码的竞争。它会成功还是会被遗忘在…</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op kp ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://medium.com/fractions/3-visual-studio-code-tips-to-boost-your-workflow-b107ec573d75" rel="noopener follow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">3个Visual Studio代码提示来改进您的工作流程</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">VS代码是一个万能的工具，只要你知道如何使用它。</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">medium.com</p></div></div><div class="ok l"><div class="oq l om on oo ok op kp ob"/></div></div></a></div><div class="ny nz gp gr oa ob"><a href="https://betterprogramming.pub/did-you-know-html-thinks-chuck-norris-is-a-color-9f67edf4c34" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab fo"><div class="od ab oe cl cj of"><h2 class="bd ir gy z fp og fr fs oh fu fw ip bi translated">你知道HTML认为查克·诺里斯是一种颜色吗？</h2><div class="oi l"><h3 class="bd b gy z fp og fr fs oh fu fw dk translated">很奇怪，不是吗？原因如下</h3></div><div class="oj l"><p class="bd b dl z fp og fr fs oh fu fw dk translated">better编程. pub</p></div></div><div class="ok l"><div class="or l om on oo ok op kp ob"/></div></div></a></div><p id="4a1a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nt">更多内容请看</em><a class="ae nu" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="nt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
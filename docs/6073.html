<html>
<head>
<title>Angular: How to Create Your Own Custom Reusable Dropdown with Text Wrapping Options</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular:如何创建带有文本换行选项的自定义可重用下拉列表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-creating-your-own-custom-reusable-dropdown-with-text-wrapping-options-18559f40c53e?source=collection_archive---------2-----------------------#2021-12-29">https://javascript.plainenglish.io/angular-creating-your-own-custom-reusable-dropdown-with-text-wrapping-options-18559f40c53e?source=collection_archive---------2-----------------------#2021-12-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a35a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">试图在<select>标签中将长文本选项包装成多行总是徒劳的。默认情况下，常规的<select>标签不提供文本换行选项。</select></select></p><p id="c7d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有像Select2这样的库可以通过稍微调整CSS来提供这种文本换行选项，但是安装一个新的模块来进行文本换行似乎是一种浪费。</p><p id="88f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我使用现有资源创建了一个自定义下拉列表:Bootstrap，它在整个应用程序中被广泛使用。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5c9f4bb26e1901cc435f584fdf149031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FSn73L14ekaCfV7T7KPWRA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Custom Dropdown</figcaption></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ky"><img src="../Images/c2c798efcd25f2b01587aa2efaf39691.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ts4bsyXdSmZuoT5zuWmkbQ.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Custom Dropdown</figcaption></figure><p id="c12b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为下拉菜单是可重用的，所以它可以跨应用程序使用不同的数据集。</p><p id="48d1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该自定义下拉列表以两种方式实现:</p><p id="06f2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第一种方式:</strong></p><p id="777f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们从<strong class="jm io"> CustomDropdownComponent模板开始。</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="57dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该模板包含一个模板驱动表单<strong class="jm io"> testForm。</strong>这个表单包含一个文本框的&lt;输入&gt;标签和一个&lt; ul &gt;标签来创建一个选项列表。</p><p id="fda8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们点击<input/>标签中的插入符号时，<strong class="jm io"> toggleDropdown() </strong>被调用，如果列表被隐藏，它将显示&lt; ul &gt;标签下的选项列表<strong class="jm io">或</strong>隐藏&lt; ul &gt;标签下的选项列表。</p><p id="6cdd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">标签<ul>的隐藏和显示由属性<strong class="jm io"> isDropDownOpen </strong>控制，该属性最初为假。</ul></p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="85bd" class="lg lh in lc b gy li lj l lk ll">&lt;ul class="list-group" <strong class="lc io">*ngIf="isDropDownOpen"</strong>&gt;</span><span id="a87e" class="lg lh in lc b gy lm lj l lk ll">&lt;li <strong class="lc io">[ngClass]="item.isActive ? 'activeOption' : ''"(click)="selectOption($event, index)"<br/>*ngFor="let item of options; let index = index"</strong><br/>class="item list-group-item"<br/>&gt;<br/>{{ item.value }}<br/>&lt;/li&gt;<br/>&lt;/ul&gt;</span></pre><p id="9336" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> toggleDropdown() </strong>在false和true之间切换<strong class="jm io"> isDropDownOpen </strong>的值，以分别隐藏和显示&lt; ul &gt;标签。</p><p id="593e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们点击一个特定的列表选项<li>时，<strong class="jm io"> selectOption() </strong>被调用，传递<strong class="jm io">事件细节</strong>和<strong class="jm io">选项索引</strong>作为参数。此方法的目的是将选定的选项设置为活动选项。我们将在课堂上看到这是如何实现的。</li></p><p id="fa32" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> CustomDropdownComponent类:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="9559" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个组件类接受来自父组件的<strong class="jm io"> @Input()选项</strong>，这个可重用组件将驻留在父组件中。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="4662" class="lg lh in lc b gy li lj l lk ll">@Input(‘options’) options: Options[];</span></pre><p id="ebac" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> options </strong>属性包含要在下拉菜单&lt; ul &gt;中显示的选项列表。要显示的选项列表可以根据场景而有所不同，但是为了保持<strong class="jm io">CustomDropdownComponent</strong>的可重用性，我们期望<strong class="jm io">选项属性</strong>是一个对象数组，并且每个对象都必须包含<strong class="jm io">属性值。</strong><strong class="jm io">属性值</strong>将包含显示在列表选项中的文本。</p><p id="21a1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Options是从options.ts文件中导出的一个界面</strong>。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="bd8c" class="lg lh in lc b gy li lj l lk ll">export interface Options {<br/>value: string;<br/>isActive?: boolean;<br/>}</span></pre><p id="3413" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> isActive </strong>是一个可选属性，因为它将被手动添加到<strong class="jm io">选项</strong>数组属性中，以区分活动的选中选项和未选中的选项。让我们看看如何！</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="ee46" class="lg lh in lc b gy li lj l lk ll"><strong class="lc io">ngOnInit() {</strong><br/>this.options.forEach((opt) =&gt; {<br/>opt.isActive = false;<br/>});<br/>this.options.splice(0, 0, { value: ‘’, isActive: true });<br/>}</span></pre><p id="f865" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在<strong class="jm io"> ngOnInit()生命周期挂钩</strong>中，我们遍历数组<strong class="jm io">选项</strong>，并为数组的每个对象添加一个附加属性<strong class="jm io"> isActive </strong>。<strong class="jm io"> isActive的初始值为假</strong>。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="c36d" class="lg lh in lc b gy li lj l lk ll">this.options.forEach((opt) =&gt; {<br/>opt.isActive = false;<br/>});</span></pre><p id="41e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们还在<strong class="jm io">选项</strong>属性数组的开头添加了一个空列表选项，并将其<strong class="jm io"> isActive属性设置为true </strong>。这意味着空列表选项将首先出现在下拉列表中，并且在默认情况下将被选中。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="0d55" class="lg lh in lc b gy li lj l lk ll">this.options.splice(0, 0, { value: ‘’, isActive: true });</span></pre><p id="84f4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们看看当我们点击列表选项<li>时会发生什么。如前所述，<strong class="jm io"> selectOption() </strong>被调用来传递事件细节和选项索引作为参数。</li></p><p id="6119" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们正在遍历<strong class="jm io">选项</strong>属性数组，并将列表选项的<strong class="jm io"> isActive </strong>属性设置为true，其选项索引与参数中传递的选项索引相匹配。其余列表选项的isActive属性将自动设置为false。</p><p id="56dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，我们还将<input/>标签的<strong class="jm io"> ngModel dropdown </strong>设置为包含在所选列表选项中的文本。这使得行为非常类似于常规的&lt;选择&gt;标签。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="60b2" class="lg lh in lc b gy li lj l lk ll"><strong class="lc io">selectOption(evt: any, optionIndex: number) {</strong><br/>this.options.forEach((opt: any, index: number) =&gt; {<br/>opt.isActive = optionIndex === index;<br/>});<br/>this.dropdown = evt.target.innerHTML;<br/>}</span></pre><p id="aeb8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">另外，请注意，选定的列表选项用蓝色背景来表示。<strong class="jm io"> isActive </strong>属性通过<strong class="jm io"> ngClass </strong>属性在&lt; li &gt;标签中控制CSS类<strong class="jm io"> activeOption </strong>的应用。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="8fdb" class="lg lh in lc b gy li lj l lk ll">&lt;li <strong class="lc io">[ngClass]="item.isActive ? 'activeOption' : ''"(click)="selectOption($event, index)"<br/>*ngFor="let item of options; let index = index"</strong><br/>class="item list-group-item"<br/>&gt;<br/>{{ item.value }}<br/>&lt;/li&gt;</span></pre><p id="c999" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该类应用蓝色背景色，并将列表选项中的文本颜色改为白色。</p><pre class="kj kk kl km gt lb lc ld le aw lf bi"><span id="d8f4" class="lg lh in lc b gy li lj l lk ll"><strong class="lc io">.activeOption</strong> {<br/>background-color: #0004ff;<br/>color: white;</span><span id="4bd7" class="lg lh in lc b gy lm lj l lk ll">}</span></pre><p id="e711" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们来看看这个可重用组件在<strong class="jm io"> AppComponent </strong>中的用法。</p><p id="1b20" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我在AppComponent中使用了这个可重用组件两次，给每个组件传递了两个不同的选项列表。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><p id="c650" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> AppComponent类:</strong></p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="kz la l"/></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ln"><img src="../Images/0e36527c9a2ce938bb6db2e25d5b2067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6tSZQXhQ037Wjmf8BUJp9A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">2 custom dropdowns in the AppComponent</figcaption></figure><p id="1ced" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个工作示例。</p><div class="lo lp gp gr lq lr"><a href="https://stackblitz.com/edit/angular-u5ag9w?file=src/app/app.component.html" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd io gy z fp lw fr fs lx fu fw im bi translated">角形(叉形)堆叠</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">编辑描述</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">stackblitz.com</p></div></div><div class="ma l"><div class="mb l mc md me ma mf ks lr"/></div></div></a></div><p id="d360" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">第二种方式:</strong></p><p id="e60f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个方法中，整个列表项选择逻辑已经从<strong class="jm io">CustomDropdownComponent</strong>移动到一个自定义指令<strong class="jm io"> ListDirective </strong>中。</p><p id="245a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是工作示例。</p><div class="lo lp gp gr lq lr"><a href="https://stackblitz.com/edit/angular-9qsep2?file=src/app/app.component.ts" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd io gy z fp lw fr fs lx fu fw im bi translated">角形(叉形)堆叠</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">编辑描述</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">stackblitz.com</p></div></div><div class="ma l"><div class="mg l mc md me ma mf ks lr"/></div></div></a></div><p id="675d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了更好地理解这个方法是如何工作的，我建议看看下面的故事，它给出了两个例子来解释当相同的自定义指令应用于一组列表元素时，如何以不同的方式操作每个列表元素，而不依赖于其他列表元素。</p><div class="lo lp gp gr lq lr"><a href="https://ramya-bala221190.medium.com/angular-how-the-same-custom-directive-applied-on-multiple-elements-can-be-used-to-manipulate-each-177856881f5c" rel="noopener follow" target="_blank"><div class="ls ab fo"><div class="lt ab lu cl cj lv"><h2 class="bd io gy z fp lw fr fs lx fu fw im bi translated">在不使用jQuery的情况下，对多个元素使用相同的角度指令来操作每个元素</h2><div class="ly l"><h3 class="bd b gy z fp lw fr fs lx fu fw dk translated">选择一个列表项，并使用角度…以不同的样式显示它，以区别于其他列表项</h3></div><div class="lz l"><p class="bd b dl z fp lw fr fs lx fu fw dk translated">ramya-bala221190.medium.com</p></div></div><div class="ma l"><div class="mh l mc md me ma mf ks lr"/></div></div></a></div><p id="cf48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mi">更多内容看</em> <a class="ae mj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mi">说白了. io </em> </a> <em class="mi">。报名参加我们的</em> <a class="ae mj" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mi">免费每周简讯</em> </a> <em class="mi">。在我们的</em> <a class="ae mj" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="mi">社区</em> </a> <em class="mi">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
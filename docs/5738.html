<html>
<head>
<title>Build a Mini Buymeacoffee dApp Using Solidity, Ethereum Smart Contract, React and TailwindCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Solidity、Ethereum Smart Contract、React和TailwindCSS构建一个迷你Buymeacoffee dApp</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-mini-buymeacoffee-dapp-using-solidity-ethereum-smart-contract-reactjs-tailwindcss-33df74345a04?source=collection_archive---------1-----------------------#2021-12-04">https://javascript.plainenglish.io/build-a-mini-buymeacoffee-dapp-using-solidity-ethereum-smart-contract-reactjs-tailwindcss-33df74345a04?source=collection_archive---------1-----------------------#2021-12-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/cad4ab13ac906471a6277e5d94f46673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FPsDn9-6zme75p7F"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@martinshreder?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Shreder</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9c17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">区块链通常是收入最高的编程行业之一，作为受薪员工，开发人员的平均年薪在15万美元至17.5万美元之间。听起来很有趣，对吧？</p><p id="734d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要了解更多关于开发者路线图和如何开始的信息，<a class="ae jz" href="https://blog.idrisolubisi.com/web-3-a-developer-roadmap-and-resources-to-get-started" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</p><p id="5d4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将使用Solidity、以太坊智能合约、React和TailwindCSS构建一个迷你Buymeacoffee dApp。这将是一个平台，互联网上的任何人都可以了解我们的一些情况，并给我们寄钱购买咖啡和一张便条，这些信息通过以太坊智能合同保存在区块链上。(智能合约本质上是保存在区块链上的代码，可以被读取和写入；我们稍后会更详细地讨论这个问题。)</p><p id="cd0f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将创建智能合同并部署它。我们还将建立一个网站，让人们连接他们的钱包，并参与我们的智能合同。</p><p id="dc1a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有一个链接指向<a class="ae jz" href="https://buymeacoffee.vercel.app/" rel="noopener ugc nofollow" target="_blank">现场演示</a>和GitHub库👉<a class="ae jz" href="https://github.com/Olanetsoft/buymeacoffee-fe" rel="noopener ugc nofollow" target="_blank">前端</a>和<a class="ae jz" href="https://github.com/Olanetsoft/buymeacoffee-be" rel="noopener ugc nofollow" target="_blank">后端/智能合约</a></p><h2 id="53cf" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">先决条件</h2><ul class=""><li id="a63a" class="lr ls in kc b kd lt kh lu kl lv kp lw kt lx kx ly lz ma mb bi translated">让我们确保我们的电脑上安装了节点/NPM。如果你没有，请点击<a class="ae jz" href="https://hardhat.org/tutorial/setting-up-the-environment.html" rel="noopener ugc nofollow" target="_blank">这里的</a>获取指南</li></ul><h2 id="f0bc" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">项目设置和安装</h2><p id="a4e5" class="pw-post-body-paragraph ka kb in kc b kd lt kf kg kh lu kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">接下来，让我们去终点站。我们需要进入我们希望使用的目录，然后运行以下命令:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="4a81" class="ky kz in mi b gy mr ms l mt mu">mkdir mini-buymeacoffee-be<br/>cd mini-buymeacoffee-be<br/>npm init -y<br/>npm install --save-dev hardhat</span></pre><p id="19ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们应该有一个安全帽。让我们通过运行下面的命令来启动一个示例项目:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="e00e" class="ky kz in mi b gy mr ms l mt mu">npx hardhat</span></pre><p id="588e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将选择创建一个示例项目。接受所有请求。样本项目需要安装安全帽-华夫饼干和安全帽-乙醚。这些是我们稍后会用到的一些其他东西:)。</p><p id="8df4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">以防万一它没有自动完成，我们将安装这些其他要求。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="d1f7" class="ky kz in mi b gy mr ms l mt mu">npm install --save-dev @nomiclabs/hardhat-waffle ethereum-waffle chai @nomiclabs/hardhat-ethers ethers</span></pre><p id="9832" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要确保一切正常，请运行:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="0307" class="ky kz in mi b gy mr ms l mt mu">npx hardhat test</span></pre><p id="6b1b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将在控制台中看到通过测试的结果。</p><p id="14b5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们可以从测试文件夹中删除<code class="fe mf mg mh mi b">sample-test.js</code>了。从脚本目录中删除<code class="fe mf mg mh mi b">sample-script.js</code>。之后，转到合同并删除<code class="fe mf mg mh mi b">Greeter.sol</code>。</p><blockquote class="mv mw mx"><p id="1b14" class="ka kb my kc b kd ke kf kg kh ki kj kk mz km kn ko na kq kr ks nb ku kv kw kx ig bi translated">文件夹本身不应被删除！</p></blockquote><p id="730c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，在contracts目录下，我们会创建一个名为CoffeePortal.sol的文件，在使用Hardhat的时候，文件布局真的很关键，一定要注意！我们将从每份合同的基本结构开始。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="5c00" class="ky kz in mi b gy mr ms l mt mu">// SPDX-License-Identifier: UNLICENSED<br/><br/>pragma solidity ^0.8.0;<br/><br/>import "hardhat/console.sol";<br/><br/>contract CoffeePortal {<br/><br/>    constructor() payable {<br/>        console.log("Yo! Smart Contract");<br/>    }<br/>}</span></pre><p id="71ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要构建和部署我们的智能合约，请导航到<code class="fe mf mg mh mi b">scripts</code>文件夹，创建一个名为<code class="fe mf mg mh mi b">run.js,</code>的新文件，并用以下代码片段更新它:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="f2da" class="ky kz in mi b gy mr ms l mt mu">const main = async () =&gt; {<br/><br/>// This will actually compile our contract and generate the necessary files we need to work with our contract under the artifacts directory.<br/>  const coffeeContractFactory = await hre.ethers.getContractFactory('CoffeePortal');<br/>  const coffeeContract = await coffeeContractFactory.deploy();<br/><br/>  await coffeeContract.deployed(); // We'll wait until our contract is officially deployed to our local blockchain! Our constructor runs when we actually deploy.<br/><br/> console.log("Coffee Contract deployed to:", coffeeContract.address);<br/>};<br/><br/>const runMain = async () =&gt; {<br/>  try {<br/>    await main();<br/>    process.exit(0);<br/>  } catch (error) {<br/>    console.log(error);<br/>    process.exit(1);<br/>  }<br/>};<br/><br/>runMain();</span></pre><p id="41a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们运行它！</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="d7e4" class="ky kz in mi b gy mr ms l mt mu">npx hardhat run scripts/run.js</span></pre><p id="1691" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您应该会看到类似于下面的内容:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/26d6e82f0423a0b2345d6329f10abf18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bRluEsJbE5BcUTMR.png"/></div></div></figure><p id="445f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有一个有效的智能合同，🥳让我们将它部署到网络上，让世界各地的每个人都可以使用。</p><p id="7a55" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe mf mg mh mi b">scripts</code>文件夹下，创建一个名为<code class="fe mf mg mh mi b">deploy.js</code>的文件。这是它的代码。看起来和run.js超级像。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="d0f6" class="ky kz in mi b gy mr ms l mt mu">const main = async () =&gt; {<br/>  const [deployer] = await hre.ethers.getSigners();<br/>  const accountBalance = await deployer.getBalance();<br/><br/>  console.log("Deploying contracts with account: ", deployer.address);<br/>  console.log("Account balance: ", accountBalance.toString());<br/><br/>  const Token = await hre.ethers.getContractFactory("CoffeePortal");<br/>  const portal = await Token.deploy();<br/>  await portal.deployed();<br/><br/>  console.log("CoffeePortal address: ", portal.address);<br/>};<br/><br/>const runMain = async () =&gt; {<br/>  try {<br/>    await main();<br/>    process.exit(0);<br/>  } catch (error) {<br/>    console.error(error);<br/>    process.exit(1);<br/>  }<br/>};<br/><br/>runMain();</span></pre><p id="19bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将使用本地主机网络在本地部署下面的命令进行测试:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="625a" class="ky kz in mi b gy mr ms l mt mu">npx hardhat run scripts/deploy.js --network localhost</span></pre><p id="83ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们应该有类似于下面的东西:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/f231960f815f4e8cb9877ccf7e786cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YsaqqQp_0IJShTru.png"/></div></div></figure><h2 id="72d2" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">构建CoffeeContract并将其部署到区块链</h2><p id="39cd" class="pw-post-body-paragraph ka kb in kc b kd lt kf kg kh lu kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">现在一切就绪，包括测试脚本和‘deploy . js’文件。使用以下代码片段，我们将更新智能合同、run.js和deploy.js文件:</p><p id="b05b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mf mg mh mi b">contracts/CoffeePortal.sol</code></p><p id="7c7e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">%[https://gist . github . com/Olanetsoft/a 9105 c 734228 f9e 15965 ef 8 a 36 ab 825 c]</p><p id="a013" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新<code class="fe mf mg mh mi b">scripts/run.js</code></p><p id="a20a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">%[https://gist . github . com/Olanetsoft/f8ea 2716 f 18 a 6 f 9 bb 7 E1 Fe 1 FB 62 b 13 Fe]</p><p id="d01c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更新<code class="fe mf mg mh mi b">scripts/deploy.js</code></p><p id="2a50" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">%[https://gist . github . com/Olanetsoft/5c 9d 3 e 8275 fcde 262 dfe 17 a 0508858 AE]</p><p id="e5ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在是时候进入正题了，部署到真正的区块链。</p><p id="b23c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们部署到区块链之前，我们需要注册一个炼金术账户。</p><p id="98be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">炼金术基本上允许我们广播我们的合同创建交易，以便矿工可以尽快拿起它。该交易一旦被开采，就作为合法交易被广播到区块链。在那之后，每个人的区块链的拷贝被更新。</p><p id="e1bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注册后，我们将创建一个如下所示的应用程序。记得将网络选择更改为Rinkeby，因为那是我们将要部署的地方。</p><p id="fb29" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们把它从mainnet换成Rinkeby是有原因的。因为是真金白银，不值得挥霍！我们将从“测试网”开始，它是“主网”的克隆，但是使用虚拟货币，所以我们可以尽可能多地进行实验。然而，重要的是要注意，测试网是由真正的矿工操作的，旨在模拟真实世界的条件。</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/085db6e5bfa21972242b6d661b63a657.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hZlevVFrwuO8DrGn.png"/></div></div></figure><p id="9e59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，我们将需要如下所示获取我们的密钥，并存储它们以备后用:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/4006863c4d05db2eba46cc67850bba6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8oZdVoElzQfX_KQ_.png"/></div></div></figure><p id="a486" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将需要一些假的ETH在我们的testnet帐户中，我们将不得不从网络中请求一些。这个假ETH只能在这个testnet上使用。林克比可以用水龙头得到一些假的ETH。</p><p id="8435" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">| Name | Link | Amount | Time | ^-^-^-^-^-^-^-^-^-^-^-^-^ | | my crypto |<a class="ae jz" href="https://app.mycrypto.com/faucet" rel="noopener ugc nofollow" target="_blank">https://app.mycrypto.com/faucet</a>| 0.01 | None | | build space |<a class="ae jz" href="https://buildspace-faucet.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://buildspace-faucet.vercel.app/</a>| 0.025 | 1d | | Ethily |<a class="ae jz" href="https://ethily.io/rinkeby-faucet/" rel="noopener ugc nofollow" target="_blank">https://ethily.io/rinkeby-faucet/</a>| 0.2 | 1w | |官方rinke by |<a class="ae jz" href="https://faucet.rinkeby.io/" rel="noopener ugc nofollow" target="_blank">https://faucet.rinkeby.io/</a>| 3/7.5/18.75 | 8h/1d</p><p id="12cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">表由<a class="ae jz" href="https://buildspace.so" rel="noopener ugc nofollow" target="_blank"> Buildspace </a></p><p id="9f37" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的hardhat.config.js文件需要更新。这可以在智能合约项目的根目录中找到。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="cdf4" class="ky kz in mi b gy mr ms l mt mu">require("@nomiclabs/hardhat-waffle");<br/>require("dotenv").config();<br/><br/>// This is a sample Hardhat task. To learn how to create your own go to<br/>// https://hardhat.org/guides/create-task.html<br/>task("accounts", "Prints the list of accounts", async (taskArgs, hre) =&gt; {<br/>  const accounts = await hre.ethers.getSigners();<br/><br/>  for (const account of accounts) {<br/>    console.log(account.address);<br/>  }<br/>});<br/><br/>// You need to export an object to set up your config<br/>// Go to https://hardhat.org/config/ to learn more<br/><br/>/**<br/> * @type import('hardhat/config').HardhatUserConfig<br/> */<br/>module.exports = {<br/>  solidity: "0.8.4",<br/>  networks: {<br/>    rinkeby: {<br/>      url: process.env.STAGING_ALCHEMY_KEY,<br/>      accounts: [process.env.PRIVATE_KEY],<br/>    },<br/>  },<br/>};</span></pre><p id="61fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们查看上面的代码片段，我们可以看到一些密钥是从<code class="fe mf mg mh mi b">.env</code>文件中读取的，以及在<code class="fe mf mg mh mi b">require("dotenv").config()</code>顶部的导入，这意味着我们需要安装dotenv包，并使用下面的命令创建一个<code class="fe mf mg mh mi b">.env</code>文件:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="53e6" class="ky kz in mi b gy mr ms l mt mu">npm install -D dotenv<br/><br/>touch .env</span></pre><p id="7e8d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在里面。env文件中，添加以下键:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="4963" class="ky kz in mi b gy mr ms l mt mu">STAGING_ALCHEMY_KEY= // Add the key we copied from the Alchemy dashboard here<br/>PRIVATE_KEY= // Add your account private key here</span></pre><p id="9e41" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要获得我们的帐户私钥很容易，请查看这个<a class="ae jz" href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key" rel="noopener ugc nofollow" target="_blank">帖子</a>。</p><p id="8740" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们可以运行命令，将我们的合同部署到一个真实的区块链网络</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="1002" class="ky kz in mi b gy mr ms l mt mu">npx hardhat run scripts/deploy.js --network rinkeby</span></pre><p id="3b31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的输出应该是这样的:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/b6aa355e0c88a1fe55d08f3fc7a28f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-7dcDkw1_spQsGhM.png"/></div></div></figure><p id="23d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">耶，🥳，我们刚刚完成了合同。</p><h2 id="b36b" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">设置前端反应客户端</h2><p id="e019" class="pw-post-body-paragraph ka kb in kc b kd lt kf kg kh lu kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">是时候建立并运行我们的网站了！我们的智能合约完成了，但是我们需要尽快弄清楚我们的前端如何与之交互！</p><p id="86a3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了创建一个新项目，我们使用<code class="fe mf mg mh mi b">npx create-next-app -e with-tailwindcss</code>命令在我们选择的目录中搭建一个新项目。</p><p id="85e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该命令创建一个设置了TailwindCSS的Next.js项目。TailwindCSS是一个实用优先的CSS框架，它包含了帮助我们设计网页风格的类。</p><p id="79ca" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要安装依赖项，我们使用以下命令:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="9749" class="ky kz in mi b gy mr ms l mt mu">cd &lt;project name&gt; <br/>npm install ethers react-toastify</span></pre><p id="3036" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦创建了应用程序并安装了依赖项，我们将看到一条消息，其中包含导航到我们的站点并在本地运行它的说明。我们用命令来做这件事。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="0478" class="ky kz in mi b gy mr ms l mt mu">npm run dev</span></pre><p id="18d3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Next.js将在<code class="fe mf mg mh mi b"><a class="ae jz" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>启动一个默认可访问的热重装开发环境</p><p id="40c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要将我们的钱包连接到区块链，以便我们的网站能够与之通信。在我们将钱包连接到我们的网站后，我们的网站将有权代表我们调用智能合同。记住，这和登录网站是一样的。</p><p id="93cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们所有的工作都将在index.js中完成，它可以在<code class="fe mf mg mh mi b">pages</code>下找到。</p><p id="b85f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">%[https://gist . github . com/Olanetsoft/6 c 8270 D4 e 174 E0 E3 a 43170 c51e 314 ef 3]</p><p id="f057" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要导入abi并更新上面代码示例中的contractAddress。让我们首先创建一个名为<code class="fe mf mg mh mi b">utils</code>的文件夹，然后使用下面的命令在<code class="fe mf mg mh mi b">utils</code>文件夹中创建一个名为<code class="fe mf mg mh mi b">CoffeePortal.json</code>的文件。</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="c4b4" class="ky kz in mi b gy mr ms l mt mu">mkdir utils<br/>touch CoffeePortal.json</span></pre><p id="b3d0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们需要我们的合同地址以及将在<code class="fe mf mg mh mi b">CoffeePortal.json</code>文件中更新的内容。得到它的最好方法是什么？</p><p id="2f43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们回到我们之前工作的智能合同项目，然后导航到<code class="fe mf mg mh mi b">artifacts/contracts/coffeePortal.json</code>并复制其中的全部内容，以及我们的合同地址，当我们将合同部署到区块链时，该地址显示在我们的终端中。</p><p id="2e1c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将使用我们复制的内容更新<code class="fe mf mg mh mi b">CoffeePortal.json</code>文件，并更新index.js，如下所示:</p><pre class="mj mk ml mm gt mn mi mo mp aw mq bi"><span id="e02c" class="ky kz in mi b gy mr ms l mt mu">// ...<br/><br/>import Head from "next/head";<br/><br/>// Import abi<br/>import abi from "../utils/CoffeePortal.json";<br/><br/>export default function Home() {<br/>  /**<br/>   * Create a variable here that holds the contract address after you deploy!<br/>   */<br/>  const contractAddress = "";  // Add contract address here<br/><br/>   // ...<br/>  return (<br/>    &lt;div className="flex flex-col items-center justify-center min-h-screen py-2"&gt;<br/>      [...]<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="a70e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">是时候测试我们的应用程序了，当我们访问<code class="fe mf mg mh mi b"><a class="ae jz" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>时，我们应该有类似下面的东西</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/1ab19d2868edd9b6a3bc403b641dd74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*g0PYMlzJFt5V3W2U.png"/></div></div></figure><p id="a5ba" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，单击“连接钱包”按钮应该会将我们重定向到元掩码UI，我们将在此授予站点访问权限，如下所示:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/d2933c2f4a2235dc9f0814219ab11a9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1ffyQpSGHANV5IJf.png"/></div></div></figure><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/48ed825d1080d63845c0e159dd7f0f46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eThS99cnpcC1Ek7-.png"/></div></div></figure><p id="53a7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么我们的用户界面应该类似于下图所示:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/67cd6d3860536d03f21cfaa741609434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Z_tu1q68tz9EZ_8c.png"/></div></div></figure><p id="a0b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们现在可以通过购买价值5美元的咖啡，并向店主提供我们的名字和任何首选信息来提供支持😊</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/cc6c581c22819d239371e3083ee12a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*b948n3RQ-XFjaWjZ.png"/></div></div></figure><p id="163d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/be22f08992ddcddbccd5950d4d7a8d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cN2oGD6GY2T5y9MU.png"/></div></div></figure><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/43c4771f7c48e83568969ffc5ebd2bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*p1gjvz7Bu-bP9R7_.png"/></div></div></figure><p id="1bd4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">已完成…</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/372d5f41fa3cb6b82f3ee2992c2a5546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YoAeUhcFqPwHq1OR.png"/></div></div></figure><p id="76c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另一个咖啡支架:</p><figure class="mj mk ml mm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/bfd62f955ada874556986e3099260896.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RCmwEfk68ggW0i1i.png"/></div></div></figure><p id="75c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们观察，一旦交易完成，页面实时更新；这是我们引入智能契约的事件的结果，当然，React毫不费力地更新了UI。</p><h2 id="6a93" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">结论</h2><p id="454f" class="pw-post-body-paragraph ka kb in kc b kd lt kf kg kh lu kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">在本文中，我们学习了如何使用Solidity、Ethereum智能契约、React和TailwindCSS构建一个迷你buymeacoffee dApp。</p><h2 id="4114" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">参考</h2><ul class=""><li id="d916" class="lr ls in kc b kd lt kh lu kl lv kp lw kt lx kx ly lz ma mb bi translated"><a class="ae jz" href="https://ethereum.org/en/developers/docs/" rel="noopener ugc nofollow" target="_blank">以太坊</a></li><li id="2ac9" class="lr ls in kc b kd ni kh nj kl nk kp nl kt nm kx ly lz ma mb bi translated"><a class="ae jz" href="https://dev.to/dabit3/the-complete-guide-to-full-stack-ethereum-development-3j13" rel="noopener ugc nofollow" target="_blank">全栈Dapp </a></li><li id="1f2d" class="lr ls in kc b kd ni kh nj kl nk kp nl kt nm kx ly lz ma mb bi translated"><a class="ae jz" href="https://unsplash.com/photos/jpsocjU9R7s" rel="noopener ugc nofollow" target="_blank">封面照片</a></li></ul><p id="ec01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我很乐意在<a class="ae jz" href="https://twitter.com/olanetsoft" rel="noopener ugc nofollow" target="_blank">Twitter</a>|<a class="ae jz" href="https://www.linkedin.com/in/olubisi-idris-ayinde-05727b17a/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>|<a class="ae jz" href="https://github.com/Olanetsoft" rel="noopener ugc nofollow" target="_blank">GitHub</a>|<a class="ae jz" href="https://idrisolubisi.com/" rel="noopener ugc nofollow" target="_blank">Portfolio</a>与你联系</p><p id="a4dc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我的下一篇博客文章中再见。保重！</p><p id="e596" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="my">更多内容请看</em><strong class="kc io"><em class="my"/></strong><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="my">说白了. io </em> </strong> </a> <strong class="kc io"> <em class="my">。</em> </strong> <em class="my">报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="my">免费每周简讯这里</em> </strong> </a> <strong class="kc io"> <em class="my">。</em> </strong></p></div></div>    
</body>
</html>
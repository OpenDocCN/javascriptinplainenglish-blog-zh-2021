<html>
<head>
<title>Component Interactions in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以角度表示的组件相互作用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/component-interactions-in-angular-b197aa656f48?source=collection_archive---------6-----------------------#2021-03-28">https://javascript.plainenglish.io/component-interactions-in-angular-b197aa656f48?source=collection_archive---------6-----------------------#2021-03-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/125d44f19707e2f8568ad0a58f4f06ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AhdtAOTB92OGRzW9"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jtylernix?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tyler Nix</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="49d0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">根据<a class="ae jz" href="https://angular.io/api/core/Component" rel="noopener ugc nofollow" target="_blank"> Angular </a>的官方文档，组件是一个Angular app最基本的UI积木。角度应用程序包含一个角度组件树。这些组件帮助我们轻松地理解和组织UI代码。</p><p id="e1ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我们将看到如何使这些组件相互交互。更准确地说，我们将学习在组件之间传递数据的各种用例。</p><h1 id="315c" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">初始设置</h1><p id="8f51" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">首先，我们将打开终端，用下面的命令— <code class="fe mb mc md me b">ng new exercise</code>初始化我们的angular应用程序。这将创建一个名为<code class="fe mb mc md me b">exercise</code>的文件夹。然后我们将导航到<code class="fe mb mc md me b">exercise</code>文件夹。</p><p id="8fc4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，Angular将生成一个<code class="fe mb mc md me b">app</code>组件，它将是父组件。然后，我们将使用CLI和以下命令生成两个组件。</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="88e6" class="mn kz in me b gy mo mp l mq mr">ng g c compOne</span></pre><p id="54c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">而且，</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="14de" class="mn kz in me b gy mo mp l mq mr">ng g c compTwo</span></pre><p id="b72d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">到目前为止，我们的<code class="fe mb mc md me b">app</code>目录将如下所示—</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/e6cb905c3dcf7f378d31eefa9835b79e.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/format:webp/1*Qi0PZvtoYHrYJoTcYoy37Q.png"/></div></figure></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><p id="d103" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，现在我们可以开始看看Angular中组件交互的各种用例。</p><h1 id="1894" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">将父组件数据传递给子组件</h1><p id="f85b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">因为，<code class="fe mb mc md me b">app</code>组件是<code class="fe mb mc md me b">comp-one</code>的父组件。因此，我们将从<code class="fe mb mc md me b">app</code>组件向<code class="fe mb mc md me b">comp-one</code>传递一个数据。</p><p id="6782" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，在<code class="fe mb mc md me b">app.component.ts</code>文件中，我们将编写以下代码。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="3aed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们声明了一个属性<code class="fe mb mc md me b">dataForCompOne</code>，它是<code class="fe mb mc md me b">app</code>组件的数据。</p><p id="8501" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe mb mc md me b">app.component.html</code>文件将包含以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="af42" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这里，借助Angular的属性绑定特性，我们将父数据，即<code class="fe mb mc md me b">dataForCompOne</code>传递给<code class="fe mb mc md me b">comp-one</code>组件。</p><p id="6d17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，为了接收这个父数据，我们将在<code class="fe mb mc md me b">comp-one.component.ts</code>文件中使用<code class="fe mb mc md me b">Input</code>装饰器。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ddb5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面代码的第10行从<code class="fe mb mc md me b">parentData</code>属性接收<code class="fe mb mc md me b">dataForCompOne</code>，并将其存储到<code class="fe mb mc md me b">dataFromApp</code>中。</p><p id="114d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在<code class="fe mb mc md me b">comp-one.component.html</code>文件中，我们将编写以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="c034" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，现在我们将在终端中运行<code class="fe mb mc md me b">ng serve -o</code>命令，这将打开浏览器显示以下内容</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/fd3baa2dce3ee001ffb43c4b907e8009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t9I7kmndep1-j9TQTprR5w.png"/></div></div></figure></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><h1 id="4cec" class="ky kz in bd la lb nd ld le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv bi translated">将子组件数据传递给父组件</h1><p id="7973" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">现在，我们来看看如何将数据从<code class="fe mb mc md me b">comp-two</code>传递到<code class="fe mb mc md me b">app</code>组件。</p><p id="315f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe mb mc md me b">comp-two.component.ts</code>文件中，我们将编写以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6857" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码中，我们在<code class="fe mb mc md me b">comp-two</code>组件中声明了一个字符串数据<code class="fe mb mc md me b">dataForApp</code>，当调用<code class="fe mb mc md me b">sendData()</code>方法时，它将在<code class="fe mb mc md me b">Output</code>装饰器的帮助下作为一个事件发出。</p><p id="021e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe mb mc md me b">comp-two.component.html</code>文件中，我们将编写以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="fc72" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以看到，只有当按钮被点击时，事件才会被发出。</p><p id="d4fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们必须在<code class="fe mb mc md me b">app.component.html</code>中捕捉这个事件。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="0dd8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当事件发出时，它将作为参数被捕获到<code class="fe mb mc md me b">receiveDataFromChild()</code>方法中，然后它将被存储在<code class="fe mb mc md me b">dataFromCompTwo</code>中，这是在<code class="fe mb mc md me b">ap.component.ts </code>文件中定义的。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="d412" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将再次运行<code class="fe mb mc md me b">ng serve -o</code>命令，它将在浏览器中显示以下内容。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/42c31ec33ead94d208df5f82a355f373.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_8GEVy1RH7i3wKvmBBm0aA.png"/></div></div></figure><p id="d182" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">单击该按钮后，将显示以下内容。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/b464f9ee5a5b01806d1c326c42f7e163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pQzmcV0JjLSWJ7Qff-2PrA.png"/></div></div></figure></div><div class="ab cl mt mu hr mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ig ih ii ij ik"><h1 id="0eed" class="ky kz in bd la lb nd ld le lf ne lh li lj nf ll lm ln ng lp lq lr nh lt lu lv bi translated">使用服务在组件之间传递数据</h1><p id="b2dd" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在这个例子中，我们将使用角度服务将数据从一个子组件传递到另一个子组件。</p><p id="6882" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，我们将使用下面的命令生成一个<code class="fe mb mc md me b">pass-data</code>服务。</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="5fb7" class="mn kz in me b gy mo mp l mq mr">ng g s pass-data</span></pre><p id="f6e6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们的<code class="fe mb mc md me b">app</code>目录将如下所示—</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/db21893b118541bd43fb971321950043.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*JGz5kI4nNUAMGrwpVh06EA.png"/></div></figure><p id="5bb9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe mb mc md me b">pass-data.service.ts</code>文件中，我们将编写以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6cfb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将把数据从<code class="fe mb mc md me b">comp-one</code>传递到<code class="fe mb mc md me b">comp-two</code>。</p><p id="dac4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，在<code class="fe mb mc md me b">comp-one.component.ts</code>文件中，我们将编写以下代码—</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="82eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码中，我们定义了一个属性<code class="fe mb mc md me b">dataForCompTwo</code>，它将是从<code class="fe mb mc md me b">comp-one</code>传递给<code class="fe mb mc md me b">comp-two</code>的数据，借助于<code class="fe mb mc md me b">PassDataService</code>中使用<code class="fe mb mc md me b">sendDataToCompTwo()</code>方法定义的事件。</p><p id="3853" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在<code class="fe mb mc md me b">comp-one.component.html</code>文件中，我们创建了一个按钮，点击它将执行<code class="fe mb mc md me b">sendDataToCompTwo()</code>方法。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="6e92" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">并且，在<code class="fe mb mc md me b">comp-two.component.ts</code>文件中，我们将订阅<code class="fe mb mc md me b">PassDataService</code>中定义的事件，并将事件数据存储到<code class="fe mb mc md me b">dataFromCompOne</code>中，如下面的代码所示</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="9b57" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了在浏览器中显示它，我们将在<code class="fe mb mc md me b">comp-two.component.html</code>文件中写入以下内容。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="1d91" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将运行<code class="fe mb mc md me b">ng serve -o</code>命令，它将在浏览器中显示以下内容。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/a1874646d9ff45e18cafb3715e9c85e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VA2jvyXPnOBnqO-F2--FZg.png"/></div></div></figure><p id="a71d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">单击该按钮后，将显示以下内容。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nl"><img src="../Images/b4a37298e5a959c26d29b9eb9f404631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZC_vaiobVR8ACx56VX8D3A.png"/></div></div></figure><p id="57b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nm">参考</em> </strong> <em class="nm">:棱角文档简介—</em><a class="ae jz" href="https://angular.io/docs" rel="noopener ugc nofollow" target="_blank"><em class="nm">https://angular.io/docs</em></a></p><p id="7f59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nm">更多内容请看</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
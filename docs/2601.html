<html>
<head>
<title>Physical Computing with JavaScript (6/8) — Showing Temperature on 7-Segment Display</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用JavaScript进行物理计算(6/8) —在7段显示屏上显示温度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/physical-computing-with-javascript-6-8-showing-temperature-on-7-segment-display-b670f11fa36e?source=collection_archive---------16-----------------------#2021-05-28">https://javascript.plainenglish.io/physical-computing-with-javascript-6-8-showing-temperature-on-7-segment-display-b670f11fa36e?source=collection_archive---------16-----------------------#2021-05-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4c135d499066c60fee5562cf52a63ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8ctBs8BuFZ7_UezUMFPyPA.png"/></div></div></figure><p id="b840" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，让我们在7段显示器上显示从DHT11传感器读取的温度值。</p><blockquote class="kt ku kv"><p id="2dda" class="jv jw kw jx b jy jz ka kb kc kd ke kf kx kh ki kj ky kl km kn kz kp kq kr ks ig bi translated"><a class="ae la" href="https://niklauslee.medium.com/physical-computing-with-javascript-table-of-contents-69c38fd74e61" rel="noopener">目录</a></p></blockquote><h1 id="3c37" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">成分</h1><ul class=""><li id="3820" class="lz ma in jx b jy mb kc mc kg md kk me ko mf ks mg mh mi mj bi translated">树莓派Pico — 1件。</li><li id="adb0" class="lz ma in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">试验板— 1个。</li><li id="0630" class="lz ma in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">数字温度和湿度传感器(DHT11) — 1个。</li><li id="bdfb" class="lz ma in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">4位7段显示器(共阴极型)— 1个。</li><li id="0b2b" class="lz ma in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">电阻器(330ω)—8个。</li><li id="13b3" class="lz ma in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">跳线(M-M型)</li></ul><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/5f4ba1773c498f8db6ea74279189d6eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WH_BNoLL7VjdtgPYHVUcVw.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">Components for showing temperature on 7-segment</figcaption></figure><h1 id="a7d5" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">7段显示器</h1><p id="8b43" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg my ki kj kk mz km kn ko na kq kr ks ig bi translated">7段显示器(以下简称FND-灵活数字显示器)是一种装置，其中排列了7个发光二极管(包括小数点时为8个)来表示数字。这种设备在我们周围很容易找到，比如电梯和座钟。</p><p id="7f14" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们看看FND，它代表一个1位数。每个LED有2个引脚(阳极、阴极)，因此如果有8个LED，则需要16个(=8x2)引脚。但是，如果你想一想，所有的阴极引脚将连接到<strong class="jx io"> GND </strong>，所以你可以把它们集成到一个引脚。因此，代表一个数字的FND只需要总共9 (8+1)个引脚。在下图中，1位FND在顶部和底部有5个引脚，总共有10个引脚。上下匹配销的数量，为了方便起见，提供两个<strong class="jx io"> GND </strong>销，上下各一个。以这种方式，阴极引脚被捆绑成一个的形式被称为共阴极型。相反的情况也是可能的。阳极引脚组合在一起的形式称为共阳极型。这将向<strong class="jx io"> VCC </strong>引脚和其他引脚上的输入<code class="fe nb nc nd ne b">LOW</code>提供电流，LED将打开。购买FND时，请务必在购买前检查这两种类型中的哪一种可用。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/60506589d23206f1d6ca1eed4977a33b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*fkjw6qhZ_6eUEFpTxeuTBA.png"/></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">Common-anode type and common-cathode type</figcaption></figure><p id="862d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有各种类型的FND可以表示多个数字，如1位、2位和4位，但在本课程中，我将使用4位FND。4位FND总共提供12个引脚，每个引脚如下图所示。在共阴极型的情况下，每个数位共有4个共阴极引脚，共有8个引脚共同连接每个段。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/dd90e042981f441173c97e622fe5dcf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7_W7puZD5Qw1GiNGeyV_ng.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">4-digit 7-segment display</figcaption></figure><h1 id="5702" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">电路</h1><p id="67cc" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg my ki kj kk mz km kn ko na kq kr ks ig bi translated">让我们组成如下图所示的电路。因为台词多，看起来有点复杂，但其实很简单。首先，以与上一教程相同的方式连接DHT11传感器。然后，用一个电阻(330ω)将7段显示器的每个段<strong class="jx io">‘a’</strong>到<strong class="jx io">‘DP’</strong>引脚依次连接到Pico的<strong class="jx io"> GPIO0 </strong>到<strong class="jx io"> GPIO7 </strong>引脚。依次连接<strong class="jx io"> COM1 </strong> ~ <strong class="jx io"> COM4 </strong>到<strong class="jx io">gpio 21</strong>~<strong class="jx io">gpio 18</strong>引脚。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/0843ddb9bf76aac016b770409a439d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s4XN3_K6SjdYTp3oF4DZnw.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">Circuit for DHT11 and 7-segment</figcaption></figure><h1 id="b948" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">手动试试FND</h1><p id="e018" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg my ki kj kk mz km kn ko na kq kr ks ig bi translated">电路配置好后，首先让我们测试一下FND是否工作正常。首先，在终端中逐行输入下面的代码，打开第一个数字中的段<strong class="jx io">‘a’</strong>的LED。</p><pre class="mq mr ms mt gt ni ne nj nk aw nl bi"><span id="a61e" class="nm lc in ne b gy nn no l np nq">&gt; pinMode(0, OUTPUT);<br/>&gt; pinMode(21, OUTPUT);<br/>&gt; digitalWrite(0, HIGH);<br/>&gt; digitalWrite(21, LOW);</span></pre><p id="a332" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第一个数字顶部的段<strong class="jx io">‘a’</strong>工作正常吗？那么现在让我们把数字“3”放在第一位。</p><pre class="mq mr ms mt gt ni ne nj nk aw nl bi"><span id="d749" class="nm lc in ne b gy nn no l np nq">&gt; const seg = [0, 1, 2, 3, 4, 5, 6, 7];<br/>&gt; pinMode(seg, OUTPUT);<br/>&gt; digitalWrite(seg, 0b11110010);</span></pre><p id="328a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通过将管脚编号作为数组传递给<code class="fe nb nc nd ne b">pinMode()</code>函数，您可以一次为多个管脚设置模式。在<code class="fe nb nc nd ne b">digitalWrite()</code>函数的情况下，传递引脚数组和数值会将数字的每个位设置到相应的引脚。在上面的代码中，以二进制传递<code class="fe nb nc nd ne b">0b11110010 </code>(十进制242)将引脚0、1、2、3、6设置为<code class="fe nb nc nd ne b">HIGH</code>，其余引脚设置为<code class="fe nb nc nd ne b">LOW</code>。当一次处理多个引脚时，像这样传递数组中的引脚非常方便。</p><p id="752e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，让我们显示所有4个数字中的数字“3”。</p><pre class="mq mr ms mt gt ni ne nj nk aw nl bi"><span id="e454" class="nm lc in ne b gy nn no l np nq">&gt; const dig = [21, 20, 19, 18];<br/>&gt; pinMode(dig, OUTPUT);<br/>&gt; digitalWrite(dig, 0b0000);</span></pre><p id="d993" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">每个数字中的数字“3”将被显示。现在让我们在这种状态下只显示第四位数字“0”。</p><pre class="mq mr ms mt gt ni ne nj nk aw nl bi"><span id="bc14" class="nm lc in ne b gy nn no l np nq">&gt; digitalWrite(seg, 0b11111100);</span></pre><p id="06c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">像这样输入代码将显示所有4位数字“0”。原因是所有数字的段都是相互连接的，并且作为单个pin出现。但是，如果引脚以这种方式连接，不同的数字就不能用四位数表示。例如，如果你把<strong class="jx io">‘b’</strong>和<strong class="jx io">‘c’</strong>段<code class="fe nb nc nd ne b">HIGH</code>放在一起代表数字1，那么每一个数字中只代表数字1。因此，一次只能显示1位数字，但4位数字应该以极快的速度旋转显示。然后，由于眼睛的后像，似乎所有的4个数字都显示出来了。下面就上传代码吧。那么数字1234将显示在4个数字的每一个中。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nr"><img src="../Images/50c204bae7602a49a2c7d7abacef36ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iCM_3VH2qAH89uG-jQPj5Q.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">Display 1234 on 4-digit 7-segment</figcaption></figure><p id="1880" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以像这样自己处理FND，但是有一个可以轻松使用的库。</p><div class="ns nt gp gr nu nv"><a href="https://github.com/niklauslee/7-segment" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd io gy z fp oa fr fs ob fu fw im bi translated">GitHub - niklauslee/7-segment:用于多位数7段显示的Kaluma库(又名。FND …</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">Kaluma库用于多位数7段显示(又名。FND -灵活的数字显示器)。这支持灵活的数量…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">github.com</p></div></div><div class="oe l"><div class="of l og oh oi oe oj jt nv"/></div></div></a></div><h1 id="0b47" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">显示温度</h1><p id="fdae" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg my ki kj kk mz km kn ko na kq kr ks ig bi translated">现在，让我们显示从FND的DHT11传感器读取的温度值。打开在前一教程中创建的<code class="fe nb nc nd ne b">dht11-test</code>项目，并添加<code class="fe nb nc nd ne b">7-segment</code>库。</p><pre class="mq mr ms mt gt ni ne nj nk aw nl bi"><span id="0101" class="nm lc in ne b gy nn no l np nq">$ npm install <a class="ae la" href="https://github.com/niklauslee/7-segment" rel="noopener ugc nofollow" target="_blank">https://github.com/niklauslee/7-segment</a> --save</span></pre><p id="49ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并上传下面的代码。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ok"><img src="../Images/f5744ea340e95a6a57041f9c67702979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E9aMnUzUbdQ4uzOf7HJfHQ.png"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">Showing temperature on 7-segment display</figcaption></figure><p id="64b2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它每5秒钟从DHT11读取一次温度，并显示到FND的小数点后1位。使用DHT11和FND库使得代码非常简单。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ol"><img src="../Images/08867e523154df0466c4adc9ec1298a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CkJ2u1Mr9bQzoIJSDcs7Bw.jpeg"/></div></div><figcaption class="mu mv gj gh gi mw mx bd b be z dk">FND showing temperature</figcaption></figure><p id="0b95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本教程中，从DHT11传感器读取的温度值显示在7段显示屏上。现在，如果你把它从电脑上断开，用Pico(比如USB线或者电池)供电，你的数字温度计就完成了。只要把外壳做得合适，放在家里用也不会差。在下一个教程中，让我们对它进行一点改进，使用有机发光二极管图形显示器更漂亮地显示温度和湿度。</p><div class="ns nt gp gr nu nv"><a href="https://niklauslee.medium.com/physical-computing-with-javascript-7-8-using-graphic-display-fc57580fc37" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd io gy z fp oa fr fs ob fu fw im bi translated">使用JavaScript的物理计算— (7/8)使用图形显示</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">在本教程中，我们将通过高速通信方法控制图形显示I2C(内部集成…</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">niklauslee.medium.com</p></div></div><div class="oe l"><div class="om l og oh oi oe oj jt nv"/></div></div></a></div><p id="2522" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kw">更多内容尽在</em><a class="ae la" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="kw">plain English . io</em></a></p></div></div>    
</body>
</html>
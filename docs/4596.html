<html>
<head>
<title>How to Detect that an HTML Element’s Dimension has Changed with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript检测出一个HTML元素的维度发生了变化？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-detect-that-an-html-elements-dimension-has-changed-with-javascript-53c86441469d?source=collection_archive---------19-----------------------#2021-09-13">https://javascript.plainenglish.io/how-to-detect-that-an-html-elements-dimension-has-changed-with-javascript-53c86441469d?source=collection_archive---------19-----------------------#2021-09-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/ba37396469c7ad45c814fa2c99e5d027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uSpLaODybllGBYbo"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@npi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Pavel Neznanov</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d93d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们想检测一个HTML元素的大小是否改变了。</p><p id="3e29" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我们将看看如何检测一个大小发生变化的HTML元素。</p><h1 id="b3f1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><code class="fe lz ma mb mc b">ResizeObserver</code></h1><p id="cf4b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">ResizeObserver API允许我们观察HTML元素大小的变化。</p><p id="865c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mc mn mo aw mp bi"><span id="ac11" class="mq lc iq mc b gy mr ms l mt mu">const div = document.querySelector('div')<br/>const sleep = ms =&gt; new Promise((resolve) =&gt; setTimeout(resolve, ms));</span><span id="a085" class="mq lc iq mc b gy mv ms l mt mu">(async () =&gt; {<br/>  for (let i = 0; i &lt; 10; i++) {<br/>    const p = document.createElement('p')<br/>    p.textContent = 'hello'<br/>    div.appendChild(p)<br/>    await sleep(1000)<br/>  }<br/>})();</span><span id="2425" class="mq lc iq mc b gy mv ms l mt mu">new ResizeObserver(e =&gt; {<br/>  const [{<br/>    borderBoxSize,<br/>    contentBoxSize,<br/>    contentRect,<br/>    devicePixelContentBoxSize: [devicePixelBoxSize]<br/>  }] = e;<br/>  console.log(borderBoxSize, contentBoxSize, contentRect, devicePixelBoxSize)<br/>}).observe(div);</span></pre><p id="0117" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个想要观察大小变化的div。</p><p id="0d88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个异步函数，它向div添加一个p元素，以每秒改变它的大小。</p><p id="f4a7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用带有回调的<code class="fe lz ma mb mc b">ResizeObserver</code>来观察大小变化。</p><p id="70ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe lz ma mb mc b">div</code>元素对象调用<code class="fe lz ma mb mc b">observe</code>来观察div的大小变化。</p><p id="b5b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe lz ma mb mc b">ResizeObserver</code>回调中，我们在参数中获取一个事件对象，该对象包含关于被监视元素的信息。</p><p id="3dcf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe lz ma mb mc b">e</code>对象中获得一些属性。</p><p id="ca73" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性让我们获得被观察元素的边框大小。</p><p id="4aa5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性让我们获得被观察元素的内容框大小。</p><p id="c04d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性让我们获得被观察元素的新大小。</p><p id="9a7b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性拥有新的内容框大小，以被观察元素的设备像素为单位。</p><p id="9829" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些属性都是对象。</p><p id="c724" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">borderBoxSize</code>、<code class="fe lz ma mb mc b">contentBoxSize</code>和<code class="fe lz ma mb mc b">contentRect</code>属性具有<code class="fe lz ma mb mc b">blockSize</code>和<code class="fe lz ma mb mc b">inlineSize</code>属性，其大小以像素为单位，取决于元素是块元素还是行内元素。</p><p id="ff70" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">contentRect</code>是具有<code class="fe lz ma mb mc b">left</code>、<code class="fe lz ma mb mc b">right</code>、<code class="fe lz ma mb mc b">top</code>和<code class="fe lz ma mb mc b">bottom</code>属性的矩形的坐标。</p><p id="b592" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">left</code>和<code class="fe lz ma mb mc b">top</code>有左上角的x和y坐标，以像素为单位。</p><p id="f7f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">right</code>和<code class="fe lz ma mb mc b">bottom</code>以像素为单位表示右下角的x和y坐标。</p><p id="b113" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lz ma mb mc b">x</code>和<code class="fe lz ma mb mc b">y</code>也有左上角的x和y坐标，以像素为单位。</p><h1 id="4d4c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="f0fd" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以使用ResizeObserver API来观察给定HTML元素的大小变化。</p><p id="9011" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
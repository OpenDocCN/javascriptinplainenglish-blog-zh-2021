<html>
<head>
<title>Everything You Need To Know About Cross-Origin Resource Sharing (CORS)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于跨来源资源共享你需要知道的一切(CORS)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/everything-you-need-to-know-about-cross-origin-resource-sharing-cors-ca4385f81076?source=collection_archive---------11-----------------------#2021-07-29">https://javascript.plainenglish.io/everything-you-need-to-know-about-cross-origin-resource-sharing-cors-ca4385f81076?source=collection_archive---------11-----------------------#2021-07-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6f42" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过例子了解CORS。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/5fc52d463bc1b2e054d5a6a2547a61e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y8kUAYus2vS2nUmM"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@emilep?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Emile Perron</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6129" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">跨源资源共享(CORS)允许我们在网络上共享资源。根据Wiki，跨源资源共享是一种机制，它允许从提供第一资源的域之外的另一个域请求网页上的受限资源。这可能令人沮丧，有时会阻碍对某些资源的访问。</p><p id="975d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更简单的解释是，它允许共享信息和资源，比如从localhot:3000到localhost:5000。所以，在其他时候，我们想要做的是，我们设置跨源资源共享(CORS)来允许来自特定URL的请求，就是这样。</p><p id="3ae7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了设置和配置跨源资源共享(cors)，我们将使用一个名为CORS的包，它允许我们设置请求的源。</p><h2 id="a85e" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">安装跨产地资源共享(CORS) </strong></h2><p id="0190" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">使用npm</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="cc49" class="ls lt iq mr b gy mv mw l mx my">npm install cors</span></pre><p id="07e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该命令将把cors安装到我们项目的依赖项中，并使它们在我们的应用程序中可用。</p><p id="16e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">出于本教程的考虑，我们将使用express.js框架来获得cors的核心功能。假设服务器被配置为只允许来自某个URL的请求，比如说<a class="ae kv" href="http://127.0.0.5500" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.5500 </a>，而我们想要从一个URL访问相同的信息，比如说<a class="ae kv" href="https://localhost:8080" rel="noopener ugc nofollow" target="_blank"> https://localhost:8080 </a>。</p><p id="1f32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以配置cors，并从它们服务的<a class="ae kv" href="http://127.0.0.5500" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.5500 </a>设置来源，并允许任何请求。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="ea3c" class="ls lt iq mr b gy mv mw l mx my">const express = require('express');<br/>const app = express()<br/>const cors = require('cors')<br/>const port = 5000<br/>app.use(cors({<br/>    origin: '<a class="ae kv" href="https://loclhost:8080'" rel="noopener ugc nofollow" target="_blank">https://loclhost:8080'</a><br/>}))</span><span id="8d20" class="ls lt iq mr b gy mz mw l mx my">app.get('/user', (req, res) =&gt; {<br/>    res.json({ user: 'John Philip', role: 'Software Developer', age: '21' });<br/>})</span><span id="97a9" class="ls lt iq mr b gy mz mw l mx my">app.listen(port, () =&gt; {<br/>    console.log(`App is running on port ${port}`);<br/>});</span></pre><p id="e3ec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的例子显示了我们如何设置cors只允许来自我们提供给它的源的请求。当我们想要设置cors来允许来自任何其他URL的请求而不阻止请求时，情况又会如何呢？</p><h2 id="eb0a" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">允许来自所有URL的请求</strong></h2><p id="b368" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以根据请求来自的URL设置cors不阻止任何请求。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="2eac" class="ls lt iq mr b gy mv mw l mx my">const express = require(‘express’);<br/>const app = express()<br/>const cors = require(‘cors’)<br/>const port = 5000<br/>app.use(cors({<br/> origin: ‘*’<br/>}))</span><span id="abb0" class="ls lt iq mr b gy mz mw l mx my">app.get(‘/user’, (req, res) =&gt; {<br/> res.json({ user: ‘John Philip’, role: ‘Software Developer’, age: ‘21’ });<br/>})</span><span id="ef40" class="ls lt iq mr b gy mz mw l mx my">app.listen(port, () =&gt; {<br/> console.log(`App is running on port ${port}`);<br/>});</span></pre><p id="18e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当你设置一个星形的原点时，你将允许cors接受来自任何URL的请求，并且不会阻止来自其他URL的访问。</p><p id="c0d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">cors的另一个非常重要的用例是，我们可以配置它来接受某些HTTP方法或动词，比如GET、PUT、DELETE和POST。默认情况下，cors被设置为允许所有可用的HTTP动词。</p><h2 id="42c7" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">配置跨源资源共享(CORS)到HTTP方法</strong></h2><p id="1a92" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">假设我们想配置cors只接受POST和GET方法。对于这种情况，我们将需要提供方法作为第二个参数，其中包含我们希望允许的一组方法。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="d7db" class="ls lt iq mr b gy mv mw l mx my">const express = require(‘express’);<br/>const app = express()<br/>const cors = require(‘cors’)<br/>const port = 5000<br/>app.use(cors({<br/> origin: ‘*’,<br/> methods: [‘GET’, ‘POST’]<br/>}))</span><span id="a842" class="ls lt iq mr b gy mz mw l mx my">app.PUT(‘/user’, (req, res) =&gt; {<br/> res.json({ user: ‘John Philip’, role: ‘Software Developer’, age: ‘21’ });<br/>})</span><span id="787e" class="ls lt iq mr b gy mz mw l mx my">app.listen(port, () =&gt; {<br/> console.log(`App is running on port ${port}`);<br/>});</span></pre><p id="c4ba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从上面的片段来看，我们只接受GET和POST请求。除了我们已经包括的方法之外，其他HTTP方法将被CORS阻止。</p><p id="ae9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们使用PUT发出请求的情况下，CORS将阻止这个请求，因为它没有配置为接受这样的请求。</p><h2 id="9882" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">设置跨源资源共享(CORS)以允许cookie</strong></h2><p id="79ed" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">跨源资源共享(CORS)默认情况下不允许cookies，并将始终阻止它们。要配置我们的应用程序允许cookie，我们需要设置跨源资源共享(CORS)来允许cookie。</p><pre class="kg kh ki kj gt mq mr ms mt aw mu bi"><span id="1a63" class="ls lt iq mr b gy mv mw l mx my">const express = require(‘express’);<br/>const app = express()<br/>const cors = require(‘cors’)<br/>const port = 5000<br/>app.use(cors({<br/> origin: ‘*’,<br/> credentials: true<br/>}))</span><span id="0492" class="ls lt iq mr b gy mz mw l mx my">app.get(‘/user’, (req, res) =&gt; {<br/> res.json({ user: ‘John Philip’, role: ‘Software Developer’, age: ‘21’ });<br/>})</span><span id="8a37" class="ls lt iq mr b gy mz mw l mx my">app.listen(port, () =&gt; {<br/> console.log(`App is running on port ${port}`);<br/>});</span></pre><p id="962e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要允许cookies，我们需要提供凭证的另一个参数，并将其设置为true。</p><h2 id="c90f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">最后的想法</strong></h2><p id="790b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">跨源资源共享(CORS)对于学习和获得其潜在用途非常重要。</p><p id="4fbe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您通读这篇文章，希望对您有所帮助。如果你认为其他人可能会从这篇文章中受益，为什么不与他人分享呢？</p><h2 id="fc32" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak">延伸阅读:</strong></h2><div class="na nb gp gr nc nd"><a rel="noopener  ugc nofollow" target="_blank" href="/5-programming-languages-you-can-bet-on-to-land-you-a-job-c1e212d6e302"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">5种编程语言可以让你找到工作</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">利用这些语言获得你的第一份工作。</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nm l"><div class="nn l no np nq nm nr kp nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a rel="noopener  ugc nofollow" target="_blank" href="/open-advice-for-developers-applying-for-their-first-job-e94e804db613"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd ir gy z fp ni fr fs nj fu fw ip bi translated">对申请第一份工作的开发人员的公开建议</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">开发人员申请第一份工作的注意事项。</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nm l"><div class="ns l no np nq nm nr kp nd"/></div></div></a></div><p id="dbdd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nt">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
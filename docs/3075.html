<html>
<head>
<title>How to Make a Web-based Flappy Bird Clone with p5.js | Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用p5.js制作一个基于网络的Flappy Bird克隆体|第1部分</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-a-web-based-flappy-bird-clone-with-p5-js-part-1-2913fde25c8a?source=collection_archive---------12-----------------------#2021-06-22">https://javascript.plainenglish.io/how-to-make-a-web-based-flappy-bird-clone-with-p5-js-part-1-2913fde25c8a?source=collection_archive---------12-----------------------#2021-06-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="487f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你有没有想过制作一个可以在网络上玩的flappy bird克隆体？好吧，如果你说是，那么这是给你的教程。如果你说不，那么也许你会有兴趣学习更多关于p5.js的知识，我将在本教程中详细介绍。</p><p id="a035" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">像这样制作微小的克隆项目是提高编程技能的绝佳方式，甚至可能给你的简历增加令人印象深刻的内容。最棒的是，这只需要2-3天——一个完美的周末项目。所以放松一下，让我们开始吧。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="kn ko l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">What we’ll be making</figcaption></figure><h2 id="7e3a" class="kt ku in bd kv kw kx dn ky kz la dp lb jv lc ld le jz lf lg lh kd li lj lk ll bi translated"><strong class="ak"> WTF是p5.js？</strong></h2><p id="3a2a" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated">要回答这个问题，我先来回答我为什么决定做一个网页版的flappy bird。简单的答案是，它设置起来非常快，完成后也很容易分享——现在每个人都可以使用浏览器。如果你了解web浏览器，你就会知道任何繁重的图形渲染都应该在HTML canvas元素内部完成。这就是p5.js的用武之地，因为它是一个库，提供了一个使用画布的简单接口。你可以用它做很多很酷的事情。当然，出于我们的目的，我们将使用它来呈现我们的游戏内容。</p><figure class="ki kj kk kl gt km"><div class="bz fp l di"><div class="lr ko l"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">A cool demo made with p5.js by <a class="ae ls" href="https://github.com/hanax/p5js-demos" rel="noopener ugc nofollow" target="_blank">hanax</a></figcaption></figure><p id="1fd8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该库的工作原理是保持一个内部计时器，告诉自己以固定的时间间隔呈现内容帧。如果您将一系列帧串连在一起，其中对象在帧上的位置会一点一点地变化，您会获得运动的错觉，就像“动画书”漫画的工作原理一样。</p><p id="bbc8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么p5怎么知道在框架上渲染什么呢？开箱即用，p5为您提供了一个渲染函数(它称之为draw ),该函数每隔一段时间运行一次。为了用p5创建一个游戏，我们只需要弄清楚如何使对象出现在帧上，添加一些逻辑来更新每个对象在渲染的每个帧中的位置，最后应用一些游戏逻辑。很简单，你有比赛！</p><h2 id="ff5d" class="kt ku in bd kv kw kx dn ky kz la dp lb jv lc ld le jz lf lg lh kd li lj lk ll bi translated">等等，都是物理？</h2><figure class="ki kj kk kl gt km gh gi paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="gh gi lt"><img src="../Images/a8d3d17727e9cc67e7eb53451e349425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GZRj1PnNLJdBPmPE.jpg"/></div></div></figure><p id="3122" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不幸的是，p5没有配备物理引擎，所以我们必须让物体移动。别担心，如果你在高中学过任何物理，这应该不会太难(如果你没有，那也没关系，因为我会给你方程；).</p><p id="e835" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你对运动学有所了解，你应该知道物体会随着时间在空间中运动。由于p5通过以恒定的间隔渲染帧来“保持时间”，我们只需在update函数中添加位置更新代码。</p><h2 id="47f1" class="kt ku in bd kv kw kx dn ky kz la dp lb jv lc ld le jz lf lg lh kd li lj lk ll bi translated">那么，如何在屏幕上显示对象呢？</h2><p id="1216" class="pw-post-body-paragraph jk jl in jm b jn lm jp jq jr ln jt ju jv lo jx jy jz lp kb kc kd lq kf kg kh ig bi translated">在我们开始编写代码之前，您需要一些资产。转到my <a class="ae ls" href="https://github.com/JL978/flappy_bird_clone/tree/starter" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>，将项目克隆到您的本地机器上，并签出到starter分支(我假设您知道如何使用git)。要在本地运行项目，我建议使用VSCode live服务器，它将提供热重新加载功能。或者，如果你喜欢过边缘生活，你可以在任何浏览器中打开index.html文件。</p><p id="27be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在您已经有了资产，让我们设置画布并在浏览器上显示它。在index.html文件中，您将看到托管的minified p5.js脚本首先包含在内，这样我们就可以在我们的项目中使用它，我们的入口点将位于底部加载的index.js文件中。现在，如前所述，我们需要告诉p5将内容渲染到画布上，但在此之前，我们需要告诉它加载资产。</p><p id="f16d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意，对于下面的块，loadImage、createCanvas和background都是p5提供的函数。</p><pre class="ki kj kk kl gt ma mb mc md aw me bi"><span id="2b01" class="kt ku in mb b gy mf mg l mh mi">// index.js<br/>function preload() {<br/>    BG_IMG = loadImage(“assets/bg.png”);BG_IMG = loadImage("assets/bg.png");<br/>    BIRD_IMG = [<br/>       loadImage("assets/bird1.png"),<br/>       loadImage("assets/bird2.png"),<br/>       loadImage("assets/bird3.png"),<br/>    ];<br/>    BASE_IMG = loadImage("assets/base.png");<br/>    PIPE_UP_IMG = loadImage("assets/pipeUp.png");<br/>    PIPE_DOWN_IMG = loadImage("assets/pipeDown.png");<br/>}</span></pre><p id="4d64" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">preload函数让p5知道在画布设置好之前要做什么。您希望预加载所有资产，这可能需要一些时间来加载。</p><p id="5580" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们需要初始化画布，这将在setup函数中完成。p5确保在预加载后执行设置功能。</p><pre class="ki kj kk kl gt ma mb mc md aw me bi"><span id="e80b" class="kt ku in mb b gy mf mg l mh mi">// index.js</span><span id="8bc4" class="kt ku in mb b gy mj mg l mh mi">// global variables go at the top <br/>const WIN_WIDTH = 400;<br/>const WIN_HEIGHT = WIN_WIDTH * 1.62;</span><span id="e7c1" class="kt ku in mb b gy mj mg l mh mi">function preload() {<br/>    ...<br/>}</span><span id="4d21" class="kt ku in mb b gy mj mg l mh mi">function setup() {<br/>    createCanvas(WIN_WIDTH, WIN_HEIGHT);<br/>}</span></pre><p id="2b14" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，如前所述，我们需要告诉p5渲染什么。在p5中，渲染函数被称为“draw ”,我们将把显示背景函数放入其中。</p><pre class="ki kj kk kl gt ma mb mc md aw me bi"><span id="8181" class="kt ku in mb b gy mf mg l mh mi">// index.js</span><span id="f52d" class="kt ku in mb b gy mj mg l mh mi">function preload() {<br/>    ...<br/>}</span><span id="0783" class="kt ku in mb b gy mj mg l mh mi">function setup() {<br/>    ...<br/>}</span><span id="829e" class="kt ku in mb b gy mj mg l mh mi">function draw() {<br/>    background(BG_IMG);<br/>}</span></pre><figure class="ki kj kk kl gt km gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/05d232e10b7d7d4b3ca2536f0e746709.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*YGSOeH6mCwMZIWxXyYP7uQ.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Your browser should now be looking like this</figcaption></figure><p id="8450" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">恭喜你，你已经用p5.js渲染了你的第一个对象。</p><p id="20d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，让我们的每个游戏对象成为对象是一个好主意，因为我们可以封装它们自己的更新逻辑，并在它们自己的对象类中呈现，这将使我们的代码更加整洁。但是对本文来说已经足够了，我们将在这个系列的<a class="ae ls" rel="noopener ugc nofollow" target="_blank" href="/making-a-web-based-flappy-bird-clone-with-p5-js-part-2-c554254881b1">第2部分</a>中继续。</p><p id="b283" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ml">更多内容尽在</em><a class="ae ls" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ml">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
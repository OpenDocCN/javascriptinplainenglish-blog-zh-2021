<html>
<head>
<title>What is Hoisting and Execution Context in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的提升和执行上下文是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-hoisting-and-execution-context-in-javascript-4910459d66b0?source=collection_archive---------23-----------------------#2021-05-07">https://javascript.plainenglish.io/what-is-hoisting-and-execution-context-in-javascript-4910459d66b0?source=collection_archive---------23-----------------------#2021-05-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/64e8eec3f2fb8f2652d14031cbb8deb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zVFNssa9c6OZ315k0VCXdQ.jpeg"/></div></div></figure><p id="58cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">提升是对与“创建”和“执行”阶段相关的执行上下文的概念性理解。然而，提升可能会令人困惑，因为不像名字所暗示的那样，提升不会将代码移动到任何地方。对提升的通常理解是变量和函数被转移到你的代码的顶部，但事实并非如此。代码的物理位置将保持在您在文本编辑器中编写它的位置。为了让事情更容易理解，让我简要回顾一下JavaScript运行时环境。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="e92a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">JavaScript运行时简介。</h1><p id="fb2b" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">我想从简单开始。我将跳过许多信息，直接进入重点。所以首先，当你写一个JavaScript程序时，比如这样。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div><figcaption class="mj mk gj gh gi ml mm bd b be z dk">simple function expression or arrow function</figcaption></figure><p id="a7d8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该程序将经历五个基本步骤，这五个步骤对于开发人员来说都是非常重要的。</p><ol class=""><li id="7c0f" class="mn mo in jx b jy jz kc kd kg mp kk mq ko mr ks ms mt mu mv bi translated"><strong class="jx io">全局执行上下文</strong> —这被称为<code class="fe mw mx my mz b">main()</code>，运行任何代码都需要它</li><li id="f62e" class="mn mo in jx b jy na kc nb kg nc kk nd ko ne ks ms mt mu mv bi translated"><strong class="jx io">上下文堆栈</strong> —你可以把它想象成一个队列或一系列任务。</li><li id="b766" class="mn mo in jx b jy na kc nb kg nc kk nd ko ne ks ms mt mu mv bi translated">当另一个“任务”被放置在上下文堆栈上并保存在上述代码体中时，执行上下文将被运行。</li><li id="3799" class="mn mo in jx b jy na kc nb kg nc kk nd ko ne ks ms mt mu mv bi translated"><strong class="jx io">创建阶段</strong> —这是您的代码被读取并准备执行的阶段。</li><li id="2ef6" class="mn mo in jx b jy na kc nb kg nc kk nd ko ne ks ms mt mu mv bi translated"><strong class="jx io">执行阶段</strong> —最后，我们来到执行阶段。一旦以上的一切都完成了，开始执行我们的代码。</li></ol><p id="b700" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面更多的是JS运行时环境及其与执行上下文的关系的可视化表示。下面的代码实际上都不能或不会在浏览器中运行。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="a6e2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们已经对JavaScript运行时环境以及与执行上下文的关系有了一个大致的了解，我们可以深入一点，演示一些实际的提升。</p><p id="d1dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请记住，只提升“声明”，不提升“初始化器”另外请记住。<code class="fe mw mx my mz b">const</code>、<code class="fe mw mx my mz b">let</code>直到“创建阶段”之后才会初始化，但是<code class="fe mw mx my mz b">var</code>和<code class="fe mw mx my mz b">function</code>会初始化。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="d073" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然我们已经对执行上下文和JavaScript运行时有了基本的了解，让我们来看看更复杂的代码。</p><p id="bd16" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我将为我们的方法创建一些静态数据。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="3494" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们可以写一些代码，并评估它。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="5ec0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我想指出的是，我们上面的代码片段是糟糕的代码，你绝不应该这样写代码，你可能知道，这不是好代码。上面的代码片段仅仅是为了演示。</p><p id="ceb6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">定义完数据后，我们在函数体中定义的第一件事是这样的。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="6791" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我们之前讨论的，有两个主要阶段，“创建”和“执行”在创建阶段，为所有提升的关键字(如<code class="fe mw mx my mz b">function</code>和<code class="fe mw mx my mz b">var</code>)创建一个执行上下文。这就是为什么我们的<code class="fe mw mx my mz b">bigFunc</code>函数甚至可以在所有其他代码之上运行，也是为什么<code class="fe mw mx my mz b">realisingSoon</code>变量可以在设置值之后声明。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="9f1f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这被称为类似于函数表达式的箭头函数，行为相同，不被提升。虽然每个函数体，是的，甚至是箭头函数，都有闭包，但是它们有自己的执行上下文，所以我们不能在声明之前调用它。</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="f47c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面你会注意到我们在声明之前调用了我们的<code class="fe mw mx my mz b">orderByPrice</code>函数，因为它也被提升了。这意味着我们声明并初始化了它，以便在执行过程中在执行上下文中的任何点调用它。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="3823" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated">关于执行上下文的更多信息。</h1><p id="8da0" class="pw-post-body-paragraph jv jw in jx b jy ly ka kb kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks ig bi translated">每当我们声明一个新函数时，无论是用<code class="fe mw mx my mz b">function</code>关键字还是函数表达式，我们都会得到一个新的执行上下文或新的作用域。但是我们可以通过简单地利用<code class="fe mw mx my mz b">let</code>关键字在执行上下文之外声明一个变量来解决这个问题，如下所示:</p><figure class="md me mf mg gt jo"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="a52d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我希望这有助于澄清您对执行上下文和提升的理解。如果你有什么要补充的或者想要更多的信息，请留下评论，我会尽力回答任何问题或者根据反馈进行更新。</p><p id="8d49" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nf">更多内容请看</em><a class="ae ng" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nf">plain English . io</em></a></p></div></div>    
</body>
</html>
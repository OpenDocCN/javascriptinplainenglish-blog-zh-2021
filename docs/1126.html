<html>
<head>
<title>Angular Performance Optimization Using trackBy Function</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用跟踪函数优化角度性能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-performance-optimization-using-trackby-function-bd2cad4acee?source=collection_archive---------9-----------------------#2021-03-09">https://javascript.plainenglish.io/angular-performance-optimization-using-trackby-function-bd2cad4acee?source=collection_archive---------9-----------------------#2021-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0eda" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">ngFor的问题以及如何解决</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/77213718cd155e653701d8562075fb93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GEg_IK1M7aQ3C3c4rOp55A.png"/></div></div></figure><p id="d316" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我们将看到一个优化技术在<strong class="kt ir">角度</strong>。我们要关注的部分是一个数据数组。我们总是使用<strong class="kt ir"> ngFor </strong>来迭代Angular中的数据数组。ngFor循环遍历数组，并将单个数据显示为输出。</p><p id="2bef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们不担心ngFor如何工作？。为什么？因为大多数时候，我们只使用阵列中较少的数据。如果我们使用ngFor迭代数据，数组中的一些数据不会在Angular中产生<strong class="kt ir">性能</strong> <strong class="kt ir">问题</strong>。但是如果你使用更多的数据，比如1k或者更多的行，那么你肯定会感觉到输出的缓慢。</p><p id="c9aa" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们将了解ngFor是如何工作的？。然后我们将学习如何使用<strong class="kt ir"> trackBy </strong>功能解决速度慢(性能问题)的问题。</p><p id="87eb" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">ngFor如何工作？:</strong></p><p id="1479" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">假设我们有以下数据。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="5a2b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">呈现数组值的HTML代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="6593" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当我们使用ngFor迭代数据时，每次，整个<li>标签将被<strong class="kt ir">删除</strong>，并且它将<strong class="kt ir">再次重新创建</strong>Li&gt;。当我们添加新数据时，每次都会动态创建DOM。这是渲染输出的问题。ngFor删除所有的&lt; li &gt;并重新创建&lt; li &gt;标签，而不是给新数据添加一个新的&lt; li &gt;标签。这是一个耗时的过程。这导致了角度的性能问题。</li></p><p id="6d4d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如前所述，我们从未注意到Angular使用ngFor的性能问题。为什么因为我们总是用<strong class="kt ir">少用</strong> <strong class="kt ir">数据只用</strong>。因此，如果数组中有更多的数据，那么实现trackBy来避免这个问题是更明智的。</p><p id="5e63" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">无跟踪功能:</strong></p><p id="ca65" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将模拟每次如何重新创建<li>标签。将以下代码放入您的ts文件中。</li></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="2d94" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">将下面的代码放到你的HTML文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="5ea2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在点击<strong class="kt ir">添加产品</strong>按钮，新产品将被添加到列表中并显示出来。现在，如果你在<strong class="kt ir">检查元素模式</strong>中查看代码，你可以看到&lt;李&gt;标签是如何重新创建的，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lp"><img src="../Images/bacafbcbe01750a263f756e51b886408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fjzD9qryhbgugjlkWpgzjg.png"/></div></div><figcaption class="lq lr gj gh gi ls lt bd b be z dk">inspect element mode for without trackby</figcaption></figure><p id="3cd2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以每当添加新数据时，它会删除所有的<li>标签并重新创建</li><li>标签。</li></p><p id="3b5c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">带跟踪功能:</strong></p><p id="3628" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了避免这个问题，我们可以在ts文件中创建一个如下所示的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="fd3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在HTML文件中使用trackBy将函数添加到NGF。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ln lo l"/></div></figure><p id="30b1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在如果你点击添加产品按钮，它<strong class="kt ir">不会重新创建</strong>所有的&lt;李&gt;标签。相反，它只会在最后添加一个&lt; li &gt;标签。这怎么可能？。原因是trackBy函数使用索引值跟踪新记录。</p><p id="278c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在检查元素模式下渲染输出:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi lu"><img src="../Images/13aa073e85f9811aa4129af04376d804.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Ihiek9I9aMJxQCFUiHmGQ.png"/></div></div></figure><h2 id="8d3b" class="lv lw iq bd lx ly lz dn ma mb mc dp md la me mf mg le mh mi mj li mk ml mm mn bi translated"><strong class="ak">结论</strong></h2><p id="1abe" class="pw-post-body-paragraph kr ks iq kt b ku mo jr kw kx mp ju kz la mq lc ld le mr lg lh li ms lk ll lm ij bi translated">在本教程中，我们学习了，Angular中的<strong class="kt ir"> ngFor </strong>有什么问题，以及如何使用<strong class="kt ir"> trackBy </strong>函数解决这个问题。如果数据较少或数据较多，请始终使用trackBy函数。这是Angular开发人员推荐的方法。</p><p id="b817" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">希望这篇文章有所帮助。感谢您花时间阅读它！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Resize Input Text to Avoid Overflow in a Functional React Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">调整输入文本的大小以避免函数式反应表单中的溢出</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/resize-input-text-to-avoid-overflow-in-a-functional-react-form-178bb8d33708?source=collection_archive---------6-----------------------#2021-06-06">https://javascript.plainenglish.io/resize-input-text-to-avoid-overflow-in-a-functional-react-form-178bb8d33708?source=collection_archive---------6-----------------------#2021-06-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/4a2a9c8cea20c73067673b983bf94951.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*633tXm4Rt3nrsOoQipVpGw.png"/></div></div></figure><p id="c1c3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我能想到几个例子，在这些例子中，能够改变字体大小以适应输入字段的尺寸会很方便。事实上，令我非常惊讶的是，这并不是CSS中已经包含的东西。哦，好吧，用一点JavaScript和一些React钩子的使用，这应该不是一个太大的问题。</p><p id="769f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在本文中，我们将创建一个简单的表单，接受一个输入，即用户的位置，并更改字体大小，这样我们就不会有溢出。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/c951b88a17132900005d25303ea073a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NCi9RANLOXIvPEnJkX0b3g.gif"/></div></div></figure><p id="cbef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们开始吧！首先，我们需要创建一个功能性的React组件，它返回一个只有一个输入的表单。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ky"><img src="../Images/2f788c93d6d186291684d495a54c402f.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*XP0s0oZFgLcZkk5AXTBXRQ.png"/></div></figure><p id="f1c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于本例，我们只需确保表单提交时页面不会刷新。在<code class="fe kz la lb lc b">handleSubmit </code>函数中，我们将通过添加<code class="fe kz la lb lc b">e.preventrDefault().</code>来防止提交的默认行为</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/600a9dc7e3f17e44f85c987d177f0e79.png" data-original-src="https://miro.medium.com/v2/resize:fit:542/format:webp/1*BMmcvtw82sjOggYArGnDWA.png"/></div></figure><p id="ae4e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">既然已经解决了这个问题，让我们把它变成一个可控制的表单。为了改变文本的大小，我们首先需要知道每当输入字段的值改变时，输入字段中有多少个字母。为此，我们使用一个受控的表单。我们将从设置一个状态变量开始。因为我们使用的是功能组件，所以我们需要使用钩子来完成这个任务。这里我们将使用<code class="fe kz la lb lc b">useState</code>钩子。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi le"><img src="../Images/d34588d891ca5eeb9ee0312819150961.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*CqTK8uVGwAYqNPrciCA7FA.png"/></div></figure><p id="d251" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们将设置输入。我们需要将输入的值设置为状态变量“location ”,给输入一个ID，我们还需要一个<code class="fe kz la lb lc b">onChange</code>事件监听器，它将在输入改变时执行我们的<code class="fe kz la lb lc b">handleChange</code>函数。如果您愿意，您可以添加一个占位符和一个函数来在输入被选中时清除值，但是对于这个受控表单来说，唯一绝对必要的是值、ID和<code class="fe kz la lb lc b">onChange </code>事件监听器。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/493a1b5eb17e2fc9e9aa07ef10969243.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*7xTEhwdAzL6UdNXkCff-Rw.png"/></div></figure><p id="f498" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们通过构建我们的<code class="fe kz la lb lc b">handleChange </code>和<code class="fe kz la lb lc b">handleClearField </code>函数来给这个表单添加一些功能。我们从<code class="fe kz la lb lc b">handleChange.</code>开始</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/0e0b6ea1ae6701c66f8370106c55182f.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*tSD1vil21q2kQpHLYnQmLQ.png"/></div></figure><p id="f9cd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，我们在这里所做的只是将状态变量“location”设置为事件目标的值。事件是对输入的改变，目标是输入本身。因为输入的值被设置为我们的状态变量“location ”,所以这允许我们控制表单。现在，我们将来自用户的输入信息保存到一个变量中，我们可以使用这个变量来确定输入文本的大小。</p><p id="13a9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了清理场地，我们做了一些类似的事情。我们只是将状态变量“location”设置为一个空字符串。一旦输入的值为空，占位符就会显示出来。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lh"><img src="../Images/d029264310346cbbd264c03db8a886dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*58JaZsKx9iyUvH0VPCtYqA.png"/></div></figure><p id="af58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们只需要调整字体大小来适应输入字段。</p><p id="daa5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">免责声明:</strong>这需要一点数学知识，根据输入字段的大小、使用的字体等，数学知识可能会有所不同，但这应该会给你一个很好的起点。</p><p id="92af" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了调整字体大小，我们将创建一个函数，使用位置变量中的字符数来确定字体的大小。然后，我们将字体大小设置为输入元素的<code class="fe kz la lb lc b">fontSize</code>属性。为了给我们的应用程序确定合适的字体大小，我们需要首先做出一些设计决定。</p><p id="77d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我决定让字体大小不仅根据字符的数量来改变，还根据窗口的宽度来改变。所以，我选择使用视口宽度或“vw”测量单位。最适合我的应用程序的基本大小似乎是1.9vw。因此，以1.9为起点，我想在输入字段中添加每个新字符时减小字体的大小。</p><p id="3f5a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">记住所有这些，我们需要创建一个变量来存储字体大小，如下所示。⬇️</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi li"><img src="../Images/af2b19fe8b415bf4ba1c1a3d7f1c93fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*wi7VGYVHqyCuLLzg0OgjcQ.png"/></div></figure><p id="cf09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们用基本字体大小(1.9)减去<code class="fe kz la lb lc b">location.length</code>(位置变量中的字符数)乘以0.05……同样，您的特定应用程序的数学可能会有所不同。然后，我们通过ID选择输入元素，并将“fontSize”属性设置为变量<code class="fe kz la lb lc b">fontSize</code>+‘VW’。</p><p id="da0a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了让一切顺利进行，我们只需要再走一步。让我们导入<code class="fe kz la lb lc b">useEffect </code>钩子，当组件挂载时，以及每次我们的位置变量改变时，用它来调整输入字体的大小。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div class="gh gi lj"><img src="../Images/acf018625a367ef1429f46d7359beaf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/format:webp/1*7st8A_135eQ3RRXLvhypzg.png"/></div></figure><p id="c1dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了这个<code class="fe kz la lb lc b">useEffect</code>钩子，我们的<code class="fe kz la lb lc b">adjustFontSize </code>函数在定位组件挂载时开始运行。通过包含我们的位置变量作为依赖项，它将运行<code class="fe kz la lb lc b">adjustFontSize</code>并在<code class="fe kz la lb lc b">location</code>的值改变时触发重新渲染。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lk"><img src="../Images/47523d96cb8bf57a984018c4ba1267cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-J901Axd8XeKWZv4rcXI9A.png"/></div></div></figure><p id="cbde" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！通过使用来自控件表单的信息，我们能够创建一个具有动态字体大小的输入字段。再也不用处理难看的溢出了！开心快乐编码！</p><p id="6875" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ll">更多内容请看</em><a class="ae lm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ll">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>React &amp; Vue in the same app using Astro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Astro在同一个应用程序中做出反应</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-vue-in-the-same-app-using-astro-ae5d80a1bb86?source=collection_archive---------9-----------------------#2021-09-17">https://javascript.plainenglish.io/react-vue-in-the-same-app-using-astro-ae5d80a1bb86?source=collection_archive---------9-----------------------#2021-09-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="9984" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">是的，有可能，有</em><a class="ae km" href="https://astro.build/" rel="noopener ugc nofollow" target="_blank"><em class="kl">Astro</em></a><em class="kl">和飞船🚀代码更少。</em></p><figure class="ko kp kq kr gt ks gh gi paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="gh gi kn"><img src="../Images/bb30ac359900ce6769522bbc8cec526b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jbxDT9jEaKRDnr8xZKl3ww.jpeg"/></div></div><figcaption class="kz la gj gh gi lb lc bd b be z dk">Photo by <a class="ae km" href="https://unsplash.com/@freedomstudios?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Graham Holtshausen</a> on <a class="ae km" href="https://unsplash.com/s/photos/galaxy?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e4b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae km" href="https://astro.build/" rel="noopener ugc nofollow" target="_blank"> Astro </a>是市场上一款新的JavaScript bundler。它遵循自带框架(BYOF)策略，按需加载组件。Astro还在测试版(v0.19)。他们计划在今年晚些时候发布1.0.0版。保持警惕👀出去。</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="d358" class="li lj iq le b gy lk ll l lm ln"># create a new project  </span><span id="deb4" class="li lj iq le b gy lo ll l lm ln">mkdir js-is-one <br/>cd js-is-one  </span><span id="02b3" class="li lj iq le b gy lo ll l lm ln"># no other config is required, only this command is enough 🔥 <br/>npm init astro -- --template framework-multiple  </span><span id="21c1" class="li lj iq le b gy lo ll l lm ln"># then install the dependencies <br/>npm i  </span><span id="dce4" class="li lj iq le b gy lo ll l lm ln"># start the dev server <br/>npm run dev</span></pre><p id="61fc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该命令将加载使用多个框架开发应用程序所需的所有配置— <code class="fe lp lq lr le b">npm init astro --template framework-multiple</code></p><p id="a1f6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">推荐最佳太空开发体验</p><ol class=""><li id="aba3" class="ls lt iq jp b jq jr ju jv jy lu kc lv kg lw kk lx ly lz ma bi translated">使用VSCode文本编辑器</li><li id="05ae" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated">使用他们官方的Astro <a class="ae km" href="https://marketplace.visualstudio.com/items?itemName=astro-build.astro-vscode" rel="noopener ugc nofollow" target="_blank"> VSCode扩展</a></li></ol><h1 id="59eb" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">文件夹结构</h1><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="d2a3" class="li lj iq le b gy lk ll l lm ln">├── src/ <br/>│   ├── components/ <br/>│       └── ReactHW.jsx <br/>│       └── VueHW.vue <br/>│   └── pages/ <br/>│       └── index.astro <br/>├── public/ <br/>├── astro.config.mjs <br/>└── package.json</span></pre><h1 id="0701" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated"><code class="fe lp lq lr le b">astro.config.mjs</code></h1><p id="3089" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">我们使用的模板<code class="fe lp lq lr le b">framework-multiple</code>默认加载所有的框架【反应，Vue，Preact，Svelte，Solid &amp; Astro也是如此】，Astro框架有一个配置文件<code class="fe lp lq lr le b">astro.config.mjs</code>，所有的框架都可以在这里配置。我将删除其他框架，如Preact，Svelte和固体，只保留反应&amp; Vue</p><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="f90b" class="li lj iq le b gy lk ll l lm ln">export default {<br/>  renderers: [<br/>    "@astrojs/renderer-react",<br/>    "@astrojs/renderer-vue"<br/>  ],<br/>};</span></pre><h1 id="9b45" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">索引. astro</h1><pre class="ko kp kq kr gt ld le lf lg aw lh bi"><span id="8665" class="li lj iq le b gy lk ll l lm ln">---<br/>// Component Imports<br/>import * as react from '../components/ReactHW.jsx';<br/>import VuewHW from '../components/VueHW.vue';</span><span id="92ff" class="li lj iq le b gy lo ll l lm ln">&lt;html lang="en"&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8" /&gt;<br/>    &lt;meta name="viewport" content="width=device-width" /&gt;</span><span id="e36a" class="li lj iq le b gy lo ll l lm ln">        &lt;link rel="icon" type="image/x-icon" href="/favicon.ico" /&gt;</span><span id="82ee" class="li lj iq le b gy lo ll l lm ln">    &lt;style&gt;<br/>        :global(:root) {<br/>            font-family: system-ui;<br/>            padding: 2em 0;<br/>        }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>      &lt;main&gt;<br/>        &lt;react.HW client:visible&gt;<br/>            &lt;h1&gt;Hello React!&lt;/h1&gt;<br/>        &lt;/react.HW&gt;</span><span id="8475" class="li lj iq le b gy lo ll l lm ln">        &lt;VuewHW client:visible&gt;<br/>            &lt;h1&gt;Hello Vue!&lt;/h1&gt;<br/>        &lt;/VuewHW&gt;<br/>      &lt;/main&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4005" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以React和Vue共存于同一个文件中。</p><p id="4227" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我需要探索的是:</p><ol class=""><li id="d593" class="ls lt iq jp b jq jr ju jv jy lu kc lv kg lw kk lx ly lz ma bi translated">使用相同的CSS-in-JS组件</li><li id="4a8b" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated">对React和Vue使用相同的棉绒</li><li id="dedd" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated">为两个框架使用相同的插件，如<code class="fe lp lq lr le b">lodash</code></li></ol><h1 id="3885" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">Astro是关于部分水合的</h1><p id="e579" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">默认情况下，Astro用零客户端JavaScript生成每个网站。使用任何前端UI组件(React、Svelte、Vue等。)Astro会在构建时自动将其呈现为HTML，并剥离所有JavaScript。</p><p id="69d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">部分水合意味着——在某些情况下，我们需要客户端JS来评估——像自动完成搜索栏、添加到购物车按钮等等。只对需要JavaScript的单个组件进行水合，而将站点的其余部分保持为静态HTML的行为称为部分水合。</p><p id="986d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们可以控制组件的部分水合作用，并决定如何渲染组件——部分或全部。以下是一些例子👇</p><h1 id="6567" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated"><code class="fe lp lq lr le b">&lt;Component client:load /&gt;</code></h1><p id="29b3" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">这使得页面加载的组件更加水乳交融。</p><h1 id="055e" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated"><code class="fe lp lq lr le b">&lt;Component client:idle /&gt;</code></h1><p id="4847" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">一旦主线程空闲，这就使组件水合</p><h1 id="a3b1" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated"><code class="fe lp lq lr le b">&lt;Component client:visible /&gt;</code></h1><p id="7ed1" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">元素一进入视口，这就融合了组件(使用<a class="ae km" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" rel="noopener ugc nofollow" target="_blank"> IntersectionObserver </a>)。</p><h1 id="ea77" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated"><code class="fe lp lq lr le b">&lt;Component client:only /&gt;</code></h1><p id="1f14" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">这在页面加载时使组件水合，类似于<code class="fe lp lq lr le b">client:load</code>。</p><h1 id="8efe" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">开发模式</h1><p id="526a" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">命令<code class="fe lp lq lr le b">npm run dev</code>将在浏览器中加载应用<code class="fe lp lq lr le b"><a class="ae km" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code></p><h1 id="6c86" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">使用Astro的其他框架</h1><p id="b752" class="pw-post-body-paragraph jn jo iq jp b jq nd js jt ju ne jw jx jy nf ka kb kc ng ke kf kg nh ki kj kk ij bi translated">对于一个带有您选择的框架的普通项目，我列出了下面的命令👇</p><ol class=""><li id="cc48" class="ls lt iq jp b jq jr ju jv jy lu kc lv kg lw kk lx ly lz ma bi translated">反应——<code class="fe lp lq lr le b">npm init astro -- --template framework-react</code></li><li id="5824" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated">Vue — <code class="fe lp lq lr le b">npm init astro -- --template framework-vue</code></li><li id="1bf5" class="ls lt iq jp b jq mb ju mc jy md kc me kg mf kk lx ly lz ma bi translated">苗条— <code class="fe lp lq lr le b">npm init astro -- --template framework-svelte</code></li></ol><h1 id="f662" class="mg lj iq bd mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc bi translated">Codesandbox演示</h1><figure class="ko kp kq kr gt ks"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="8139" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">更多内容请看</em><a class="ae km" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kl">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
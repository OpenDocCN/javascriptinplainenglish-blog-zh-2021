<html>
<head>
<title>Create a Chrome Extension to Inject Script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个Chrome扩展来注入脚本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-chrome-extension-to-inject-script-8579717b2c17?source=collection_archive---------2-----------------------#2021-12-19">https://javascript.plainenglish.io/create-a-chrome-extension-to-inject-script-8579717b2c17?source=collection_archive---------2-----------------------#2021-12-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="75f8" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">创建chrome扩展以将任何脚本注入客户端应用程序的指南。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/13e3b127560bd421742e276fcff104c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*csfYKV6Hvccl_sC4"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@sarabakhshi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Sara Bakhshi</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3ed1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">今天，我将尝试一些不同于我原来领域的东西，即创建一个chrome扩展，将任何脚本注入到客户端应用程序中。</p><h2 id="91e7" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">你熟悉Chrome扩展吗？</h2><p id="cedf" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">不存在你不知道什么是Chrome扩展的世界。所以让我们避开这个粗糙的问题来代替<strong class="kv io"> <em class="mn">你想知道如何创建一个吗？</em>T11】</strong></p><p id="6aea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们首先创建一个chrome扩展，无论你何时访问任何网站，它都可以简单地登录。</p><h1 id="9319" class="mo lq in bd lr mp mq mr lu ms mt mu lx jt mv ju ma jw mw jx md jz mx ka mg my bi translated">我们开始吧</h1><p id="cf94" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">首先，我们需要创建一个文件夹，假设<code class="fe mz na nb nc b">launcher</code>进入这个文件夹并创建一个名为<code class="fe mz na nb nc b">manifest.json</code>的文件，你可以给这个文件夹起任何名字。</p><p id="55b4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个文件是我们chrome扩展的入口点，当我们上传它时，将使用manifest.json开始:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nd"><img src="../Images/4b5d6e08a7b537172007e2d03c3a0a86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xAJw7vIe3aeNBbHSd4itCw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">manifest.json</figcaption></figure><p id="7f79" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，总结一下，<code class="fe mz na nb nc b">content_script</code>是一个我将<code class="fe mz na nb nc b">matches</code>设置为所有网站并在网页加载时加载<code class="fe mz na nb nc b">test.js</code>的参数。</p><p id="c54a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们创建一个文件名<code class="fe mz na nb nc b">test.js</code>并将一些内容放在那里:</p><pre class="kd ke kf kg gt ne nc nf ng aw nh bi"><span id="09ee" class="lp lq in nc b gy ni nj l nk nl"><br/>loadFile();</span><span id="7ca8" class="lp lq in nc b gy nm nj l nk nl">function loadFile() {</span><span id="86e5" class="lp lq in nc b gy nm nj l nk nl">  console.log('page has been loaded!');</span><span id="3d75" class="lp lq in nc b gy nm nj l nk nl">}</span></pre><h2 id="a32a" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">发布解包版本</h2><p id="8d6f" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">我们去<code class="fe mz na nb nc b">chrome://extensions</code>发布版本吧。</p><ol class=""><li id="0969" class="nn no in kv b kw kx kz la lc np lg nq lk nr lo ns nt nu nv bi translated">检查开发人员选项</li><li id="445a" class="nn no in kv b kw nw kz nx lc ny lg nz lk oa lo ns nt nu nv bi translated">点击加载解压缩版本，并选择当前文件夹</li></ol><p id="c614" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，如果你去任何网页，你会看到我们的日志会出现:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ob"><img src="../Images/87d43e5984f599e63528ed09e931ab24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*MD1Xv1ifuqxvy9qVK5v7Qg.png"/></div></figure><h2 id="a971" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">添加脚本标签</h2><p id="8b43" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">继续使用我们创建的test.js文件添加脚本标记，步骤将非常简单:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/0fe25f7c3aec3091f0a3e685ec949a22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pfzNHejV0a5v-QkiuZte6g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">test.js</figcaption></figure><p id="4bb6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这里，我们创建了一个画布容器来显示我们的chart.js库，然后注入脚本，一旦加载了脚本，我们将再注入一个包含加载图表所需数据的脚本，因此让我们移动并在<code class="fe mz na nb nc b">js/dom/chart.js</code>下再创建一个文件来管理属性文件结构:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oc"><img src="../Images/60a4912202dd6867102fb5cb22388427.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UL2od7j1FoaPplxjxNWi3g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">js/dom/chart.js</figcaption></figure><p id="79f9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，让我们转到“extension”选项卡，单击“refresh”来刷新我们的扩展。</p><p id="48c9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，如果刷新任何打开的页面，您可能会看到某种错误，可以通过在清单文件中添加额外的一行来修复，如下所示:</p><pre class="kd ke kf kg gt ne nc nf ng aw nh bi"><span id="ce0d" class="lp lq in nc b gy ni nj l nk nl">"web_accessible_resources": ["js/**/*"],</span></pre><p id="fb8e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，你完成了。</p><p id="eb03" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你进入同一个页面，你会在页面底部看到一个图表。</p><h2 id="4ec7" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated">结论</h2><p id="3b75" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">您可以通过添加扩展和特性来做大量的事情。你可以在这里找到完整的源代码。</p><p id="40dd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你喜欢我的内容，请点击这里订阅我的substack账户<a class="ae ks" href="https://piyushdubey.substack.com/?r=omfzc&amp;utm_campaign=pub&amp;utm_medium=web" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="d2f4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读。</p><p id="c58f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mn">更多内容看</em> <a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mn">说白了。在这里注册我们的</em> </a><a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mn">免费周报</em> </a> <em class="mn">。</em></p></div></div>    
</body>
</html>
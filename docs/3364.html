<html>
<head>
<title>Up and Running with React Redux in 2021</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在2021年启动并运行React Redux</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-redux-e16978557b46?source=collection_archive---------14-----------------------#2021-07-08">https://javascript.plainenglish.io/react-redux-e16978557b46?source=collection_archive---------14-----------------------#2021-07-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3c8d" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">2021年Redux入门指南</h2></div><p id="8697" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Redux是JavaScript应用程序的一个可预测的<strong class="ke io">状态容器</strong>。</p><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/1dd6e4648a0dc63d3a01222d092cce3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bp9Q7jczQkZP2981NAA_EA.png"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk"><strong class="bd lo">react-redux</strong></figcaption></figure><p id="7564" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> Redux </strong>是一个管理&amp;更新<strong class="ke io">应用状态</strong>的模式和库，使用名为<strong class="ke io">动作</strong>的事件。</p><p id="fe82" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它充当需要在整个应用程序中使用的状态的集中存储。</p><p id="5f17" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">状态只能以<strong class="ke io">可预测的</strong>方式更新。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="ce77" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">必需的冗余包</h2><ul class=""><li id="936a" class="mp mq in ke b kf mr ki ms kl mt kp mu kt mv kx mw mx my mz bi translated">redux — npm安装redux</li><li id="edc0" class="mp mq in ke b kf na ki nb kl nc kp nd kt ne kx mw mx my mz bi translated">react-redux — npm安装react-redux</li></ul></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="67db" class="nf lx in bd ly ng nh ni mb nj nk nl me jt nm ju mh jw nn jx mk jz no ka mn np bi translated">冗余术语</h1><h2 id="6b69" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">1.行动</h2><p id="1d08" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated">动作是一个普通的JavaScript对象，有一个<code class="fe nt nu nv nw b">type</code>字段。</p><p id="758b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nx">你可以把一个动作想象成一个描述应用程序中发生的事情的事件。</em></p><p id="8d69" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个动作对象可以有其他字段，这些字段包含关于发生了什么的附加信息。按照惯例，我们将这些信息放在一个名为<code class="fe nt nu nv nw b">payload</code>的字段中</p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="6a14" class="lw lx in nw b gy oc od l oe of">return {<br/>    <strong class="nw io">type</strong>: "INCREMENT",<br/>    payload: intNumber<br/>   }</span></pre></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="dbcf" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">2.还原剂</h2><p id="b990" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated">reducer是一个函数，它接收当前的<code class="fe nt nu nv nw b">state</code>和一个<code class="fe nt nu nv nw b">action</code>对象，决定如何在必要时更新状态，并返回新的状态:<code class="fe nt nu nv nw b">(state, action) =&gt; newState</code>。</p><p id="1799" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nx">您可以将reducer看作一个事件监听器，它根据接收到的动作(事件)类型来处理事件。</em></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="7252" class="lw lx in nw b gy oc od l oe of">const initialStage = 0;</span><span id="6666" class="lw lx in nw b gy og od l oe of">const plusMinusReducer = ( <strong class="nw io">state </strong>= initialStage, <strong class="nw io">action </strong>) =&gt; {<br/> switch( action.type ) {<br/>  case "INCREMENT": return state + 1;<br/>  case "DECREMENT": return state - 1;<br/>  default: return state;<br/> }<br/>}</span><span id="b45d" class="lw lx in nw b gy og od l oe of">export default plusMinusReducer;</span></pre><p id="cd52" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Reducers可以使用内部的任何逻辑来决定新的状态应该是什么:<code class="fe nt nu nv nw b">if/else</code>、<code class="fe nt nu nv nw b">switch</code>、循环等等。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="30cb" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">3.商店</h2><p id="ab73" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated">Redux store汇集了构成你的app的<strong class="ke io">状态</strong>、<strong class="ke io">动作</strong>和<strong class="ke io">还原器</strong>。</p><p id="b2f4" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">每个Redux商店都有一个<strong class="ke io">单根</strong>减速器功能。</p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="ae41" class="lw lx in nw b gy oc od l oe of">import { <strong class="nw io">createStore </strong>} from "redux";<br/>import <strong class="nw io">rootReducer</strong> from "./reducers/index";</span><span id="26c3" class="lw lx in nw b gy og od l oe of">const store = <strong class="nw io">createStore</strong>( rootReducer );</span><span id="645b" class="lw lx in nw b gy og od l oe of">export default store;</span></pre><p id="65b1" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io">注意:</strong>在Redux应用程序中，您将只有一个<strong class="ke io">单店</strong></p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="898f" class="nf lx in bd ly ng nh ni mb nj nk nl me jt nm ju mh jw nn jx mk jz no ka mn np bi translated">重复示例</h1><p id="0189" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated">动作创建<br/><strong class="ke io">src/actions/index . js</strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="3501" class="lw lx in nw b gy oc od l oe of">export const incrementNumber = () =&gt; {<br/> return {<br/> type: “INCREMENT”,<br/> payload: intNumber<br/> }<br/>}</span><span id="7990" class="lw lx in nw b gy og od l oe of">export const decrementNumber = () =&gt; {<br/> return {<br/> type: “DECREMENT”<br/> }<br/>}</span></pre><p id="fffc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">减速器创建<br/><strong class="ke io">src/reducers/plus MINUS . js</strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="315d" class="lw lx in nw b gy oc od l oe of">const initialStage = 0;</span><span id="f0bf" class="lw lx in nw b gy og od l oe of">const plusMinusReducer = ( state = initialStage, action ) =&gt; {<br/> switch( action.type ) {<br/> case "INCREMENT": return state + 1;<br/> case "DECREMENT": return state - 1;<br/> default: return state;<br/> }<br/>}</span><span id="a6ac" class="lw lx in nw b gy og od l oe of">export default plusMinusReducer;</span></pre><p id="18ee" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> src/reducers/index.js </strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="e221" class="lw lx in nw b gy oc od l oe of">import plusMinusReducer from "./plusminus";<br/>import { combineReducers } from "redux";</span><span id="b054" class="lw lx in nw b gy og od l oe of">const rootReducer = combineReducers({<br/> plusMinusReducer<br/>});</span><span id="92bc" class="lw lx in nw b gy og od l oe of">export default rootReducer;</span></pre><h2 id="e260" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">商店创建</h2><p id="7b97" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated"><strong class="ke io"> store.js </strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="0c19" class="lw lx in nw b gy oc od l oe of">import { createStore } from "redux";<br/>import rootReducer from "./reducers/index";</span><span id="b181" class="lw lx in nw b gy og od l oe of">const store = createStore( rootReducer );</span><span id="ec2b" class="lw lx in nw b gy og od l oe of">export default store;</span></pre><h2 id="04bd" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">应用商店提供商</h2><p id="7107" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated"><strong class="ke io"> index.js </strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="5ca8" class="lw lx in nw b gy oc od l oe of">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import reportWebVitals from './reportWebVitals';<br/><strong class="nw io">import store from "./store";</strong><br/><strong class="nw io">import { Provider } from "react-redux";</strong></span><span id="3431" class="lw lx in nw b gy og od l oe of">store.subscribe(() =&gt; console.log( store.getState() ) );</span><span id="87de" class="lw lx in nw b gy og od l oe of">ReactDOM.render(<br/> &lt;React.StrictMode&gt;<br/> <strong class="nw io">&lt;Provider store={store}&gt;</strong><br/> &lt;App /&gt;<br/> <strong class="nw io">&lt;/Provider&gt;</strong><br/> &lt;/React.StrictMode&gt;,<br/> document.getElementById('root')<br/>);</span><span id="d282" class="lw lx in nw b gy og od l oe of">reportWebVitals();</span></pre><h2 id="dca8" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">从视图调用操作</h2><p id="91b4" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated"><strong class="ke io"> App.js </strong></p><pre class="kz la lb lc gt ny nw nz oa aw ob bi"><span id="312a" class="lw lx in nw b gy oc od l oe of">import './App.css';<br/><strong class="nw io">import { useSelector, useDispatch } from "react-redux";</strong><br/><strong class="nw io">import { incrementNumber, decrementNumber } from "./actions/index";</strong></span><span id="b9a5" class="lw lx in nw b gy og od l oe of">function App() {</span><span id="47d5" class="lw lx in nw b gy og od l oe of"><strong class="nw io">const myState = useSelector( (state) =&gt; state.plusMinusReducer );<br/> const dispatch = useDispatch();</strong></span><span id="8d7b" class="lw lx in nw b gy og od l oe of">return (<br/> &lt;&gt;<br/> &lt;div className="container"&gt;<br/> &lt;h1&gt;Increment/Decrement Counter&lt;/h1&gt;<br/> &lt;h4&gt;Using React and Redux&lt;/h4&gt;</span><span id="2879" class="lw lx in nw b gy og od l oe of">&lt;div className="quantity"&gt;<br/> &lt;a className="quantity__minus" title="Decrement" o<strong class="nw io">nClick={(event) =&gt; dispatch(decrementNumber()) }</strong>&gt;&lt;span&gt;-&lt;/span&gt;&lt;/a&gt;<br/> &lt;input type="text" name="quantity" className="quantity__input" value={<strong class="nw io">myState</strong>}/&gt;<br/> &lt;a className="quantity__plus" title="Increment" <strong class="nw io">onClick={(event) =&gt; dispatch(incrementNumber()) }</strong>&gt;&lt;span&gt;+&lt;/span&gt;&lt;/a&gt;<br/> &lt;/div&gt;<br/> &lt;/div&gt;<br/> &lt;/&gt;<br/> );<br/>}</span><span id="b0a7" class="lw lx in nw b gy og od l oe of">export default App;</span></pre></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h2 id="1e06" class="lw lx in bd ly lz ma dn mb mc md dp me kl mf mg mh kp mi mj mk kt ml mm mn mo bi translated">结论</h2><p id="5695" class="pw-post-body-paragraph kc kd in ke b kf mr jo kh ki ms jr kk kl nq kn ko kp nr kr ks kt ns kv kw kx ig bi translated">这是2021年React Redux应用的基本样板。当然，随着时间的推移，还会有更多的复杂性，但这应该会让您对React和Redux的设置有所了解。</p><p id="7888" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">更多详情请参考<a class="ae oh" href="https://redux.js.org/introduction/getting-started" rel="noopener ugc nofollow" target="_blank">冗余文档</a>。</p><p id="177b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nx">更多内容看</em><a class="ae oh" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ke io"><em class="nx">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>JavaScript Callbacks Explained via Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过例子解释JavaScript回调</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/callbacks-in-js-explained-via-examples-9839eedad662?source=collection_archive---------10-----------------------#2021-08-14">https://javascript.plainenglish.io/callbacks-in-js-explained-via-examples-9839eedad662?source=collection_archive---------10-----------------------#2021-08-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="189c" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph">软件工程</h2><div class=""/><div class=""><h2 id="406b" class="pw-subtitle-paragraph jt iw in bd b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk dk translated">编写优雅的函数，将一个函数注入另一个函数，并通过使用回调来实现递归行为</h2></div><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/82055fb0f747f97f1dd39108eaac7798.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ROhjU6v6KLM5df4SdByhMw.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@eduardoequis?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Eduardo Sánchez</a> on <a class="ae lb" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="4fdf" class="lc ld in bd le lf lg lh li lj lk ll lm kc ln kd lo kf lp kg lq ki lr kj ls lt bi translated">👁‍🗨在调用函数时使用回调来公开中间结果</h1><p id="eb91" class="pw-post-body-paragraph lu lv in lw b lx ly jx lz ma mb ka mc md me mf mg mh mi mj mk ml mm mn mo mp ig bi translated">你有没有想过<code class="fe mr ms mt mu b">.forEach</code>循环中的<code class="fe mr ms mt mu b">element</code>或<code class="fe mr ms mt mu b">(value, key)</code>等<em class="mq">神奇的</em>参数是从哪里来的？</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/b3788810eb6df703b46ee26520009114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_MEFYTZTx48wTfwAhsfhQ.png"/></div></div></figure><p id="6e07" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">当你读到这一节的末尾时，你就会明白了。</p><p id="12a0" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">假设您有一个名为<code class="fe mr ms mt mu b">halfAlgebra</code>的函数。它接受一个数字作为它的第一个参数，将它分成两半，然后允许你在另一个函数中使用结果，你可以提供这个函数作为<code class="fe mr ms mt mu b">halfAlgrebra</code>的第二个参数。</p><p id="66e6" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">下面是编写这样一个函数的方法:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/04e2a17c2e67123a1ec2795f2f0ab095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OT1vQv2dY14vcp3WlNyvOg.png"/></div></div></figure><p id="7d23" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">以上，最后执行<code class="fe mr ms mt mu b">anotherFunction( half )</code>。这使得变量<code class="fe mr ms mt mu b">half</code>可以被任何回调函数访问，这些回调函数可以作为<code class="fe mr ms mt mu b">halfAlgebra</code>函数的第二个参数输入。方法如下:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/2515192cbdf3f52e372ba9621a40a041.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OhHhMdpFMRfTsWrjjufuZw.png"/></div></div></figure><p id="5b02" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">这里，提供<code class="fe mr ms mt mu b">addOne</code>作为回调参数会导致该函数被隐式执行，并使用<code class="fe mr ms mt mu b">half</code>作为其参数。因此，它被有效地执行为<code class="fe mr ms mt mu b">addOne( half )</code>。</p><p id="a961" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">也可以直接输入函数作为回调参数(即匿名函数)。匿名回调函数也可以访问<code class="fe mr ms mt mu b">half</code>变量:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/ed95961221ab3b0f8ae7c821ba54612e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_r-8hbVNRlUkQL7rAS4YA.png"/></div></div></figure><p id="f7a1" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">顺便说一下，您不必调用变量<code class="fe mr ms mt mu b">half</code>。您可以随意引用它(重要的是参数位置，而不是名称):</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/672dd76ce15fee568ad16bbe8154f38d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0LJFIlSRKXDb1nyDLZj3Q.png"/></div></div></figure><p id="cc8b" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">所以，当你在JavaScript中看到回调变量时，比如在<code class="fe mr ms mt mu b">.forEach</code>方法的<code class="fe mr ms mt mu b">element</code>或<code class="fe mr ms mt mu b">(value, key)</code>中，现在你知道它们是如何产生的了。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/2b4c0d7c775dadd6ece9694321b3efe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dfUmLQDzxXcC0fu5a2zzUg.png"/></div></div></figure><h1 id="ec0b" class="lc ld in bd le lf lg lh li lj lk ll lm kc ln kd lo kf lp kg lq ki lr kj ls lt bi translated">🔗使用回调使一个函数作为另一个函数的一部分运行</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nb"><img src="../Images/a92c1279aa1fec080613c9a1d97871ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMr8z2WAKtO1E5wW3lUMQQ.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@pcjw412?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Craig Washington</a> on <a class="ae lb" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="66f2" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">假设您有一个可以将两个单词缝合在一起的函数:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/9462eaabc8b1f76b1d2f595114200079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3XvrIioSAY9b7_vvFj-rpQ.png"/></div></div></figure><p id="9ed4" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">假设您想在单词连接在一起后进一步修改这个函数的输出，但是您不确定如何修改。你要确保这种修改是可能的，但留下具体的开放性。</p><p id="d826" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">您可以通过添加一个回调参数来实现这一点，该参数指的是在<code class="fe mr ms mt mu b">stitch</code>结束运行之前运行的回调函数:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/53d7c083eb700d2ac5236bd0b6f477ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FS7mzjPKg4Yxz6tUe1sGHQ.png"/></div></div></figure><p id="b924" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">这里，回调参数有一个默认的匿名函数。默认的回调函数确保在调用该函数时，如果没有输入回调参数，<code class="fe mr ms mt mu b">stitch</code>正常运行。</p><p id="5e7d" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">想象一下，你有另一个让一切听起来都很兴奋的功能:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/a77677ad9bd941ea96305dbe4bfe5da1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMafrr5lsdAD3QsmEVE-1A.png"/></div></div></figure><p id="2142" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">您现在可以添加<code class="fe mr ms mt mu b">excited</code>函数作为<code class="fe mr ms mt mu b"><strong class="lw ix">stitch</strong></code>函数的回调参数，修改它的输出:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/16b7ab332da32ef6041b9d0d0f83b1e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9TFas0L4syH1WIIN-6wtw.png"/></div></div></figure><p id="be81" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">你可以把<code class="fe mr ms mt mu b">excited</code>这个看作是<em class="mq">的插件</em>到<code class="fe mr ms mt mu b">stitch</code>。</p><p id="9faa" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">您还可以添加一个匿名函数作为回调参数，以便随时对输出进行自定义修改:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/a8957f9f2504d7b44d560876f227893b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9T4qmOUes-Qg2I0c5isHJg.png"/></div></div></figure><h1 id="9553" class="lc ld in bd le lf lg lh li lj lk ll lm kc ln kd lo kf lp kg lq ki lr kj ls lt bi translated">📚在方法中使用回调</h1><p id="8174" class="pw-post-body-paragraph lu lv in lw b lx ly jx lz ma mb ka mc md me mf mg mh mi mj mk ml mm mn mo mp ig bi translated">当然，也可以在方法中使用回调。下面是一个例子:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mv"><img src="../Images/412491d52ac6b8ce31c118ca5bbfa4e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PkCPqaFOyFXHAIoI5mlNyQ.png"/></div></div></figure><h1 id="cf6b" class="lc ld in bd le lf lg lh li lj lk ll lm kc ln kd lo kf lp kg lq ki lr kj ls lt bi translated">最后</h1><p id="f402" class="pw-post-body-paragraph lu lv in lw b lx ly jx lz ma mb ka mc md me mf mg mh mi mj mk ml mm mn mo mp ig bi translated">您可以使用回调从函数中获取中间结果，并在函数调用的下一部分中使用这些结果。</p><p id="ce1f" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">也可以使用回调将一个函数注入到另一个函数中。</p><p id="9d2d" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated">我希望你喜欢阅读！</p><p id="272d" class="pw-post-body-paragraph lu lv in lw b lx mw jx lz ma mx ka mc md my mf mg mh mz mj mk ml na mn mo mp ig bi translated"><em class="mq">更多内容看</em> <a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lw ix"> <em class="mq">说白了就是io </em> </strong> </a> <em class="mq">。报名参加我们的</em> <a class="ae lb" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lw ix"> <em class="mq">免费周报</em> </strong> </a> <em class="mq">。在我们的</em> <a class="ae lb" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lw ix"> <em class="mq">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mq">。</em></p></div></div>    
</body>
</html>
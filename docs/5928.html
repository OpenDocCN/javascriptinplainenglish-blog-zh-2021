<html>
<head>
<title>Location Strategies in Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度定位策略</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/location-strategies-in-angular-5c3443d462d3?source=collection_archive---------4-----------------------#2021-12-20">https://javascript.plainenglish.io/location-strategies-in-angular-5c3443d462d3?source=collection_archive---------4-----------------------#2021-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/aa51073bc028a12e4ef827171d1d8375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnhrVFSPAJZ2adjR6WtEMg.jpeg"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@kaleidico?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kaleidico</a> on <a class="ae jd" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="e4dc" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">实例介绍角度应用中的定位策略</h2></div><p id="9e61" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在了解Angular中的定位策略之前，我们先来熟悉一下Angular中的路由。让我们快速看一下Angular中的路由。</p><h1 id="f32e" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">角度路由</h1><p id="f08c" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">路由是Angular用来管理Angular应用程序中的“路线”和“路径”的一种机制。这有助于在不同视图之间导航。单页应用程序不应该将URL发送到服务器并重新加载页面，每次用户请求新页面时，它只刷新页面的一部分并更新数据。Angular通过两种方式实现这一点。这些被称为定位策略。位置策略定义了应该如何解析URL/请求。它也决定了你的URL应该是什么样子。</p><p id="703d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">angular框架有一个“路由器模块”，帮助设计、开发和实现路线和导航链接。每当路径匹配时，Angular路由器导航到新组件，并呈现其模板，并在浏览器中本地更新视图的历史和URL。在应用程序中实施路由之前，了解将要使用的路由策略非常重要。</p><h1 id="37c9" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">有哪些不同的路由策略？</h1><p id="b9bc" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">路由策略定义了应用程序URL的行为，即路由路径在地址栏中的外观。为此Angular提供了两种路由策略，也称为定位策略。</p><p id="992b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它们是:</p><p id="dd3e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">1.路径位置策略</p><p id="7fc0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">2.HashLocationStrategy</p><p id="aab5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">路径定位策略</strong>:</p><ul class=""><li id="9e9a" class="mo mp jg kx b ky kz lb lc le mq li mr lm ms lq mt mu mv mw bi translated">这是Angular应用程序的默认路由策略。</li><li id="27be" class="mo mp jg kx b ky mx lb my le mz li na lm nb lq mt mu mv mw bi translated">这是默认的HTML推送状态URL行为。</li><li id="1f2d" class="mo mp jg kx b ky mx lb my le mz li na lm nb lq mt mu mv mw bi translated">让我们举一些应用程序URL段的例子</li><li id="8e9b" class="mo mp jg kx b ky mx lb my le mz li na lm nb lq mt mu mv mw bi translated">http://myapp.com/users</li><li id="d559" class="mo mp jg kx b ky mx lb my le mz li na lm nb lq mt mu mv mw bi translated">http://myapp.com/users/1</li><li id="0228" class="mo mp jg kx b ky mx lb my le mz li na lm nb lq mt mu mv mw bi translated">http://myapp.com/users/1/posts</li></ul><p id="df7c" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">优点:</strong></p><p id="c48e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">产生一个像http://example.com/foo一样清晰的网址</p><p id="0ba2" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">支持服务器端呈现</p><p id="3f2f" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">缺点</strong>:</p><p id="c628" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">旧版浏览器不支持</p><p id="1abd" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这需要服务器支持</p><p id="eb69" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh"> HashLocationStrategy </strong>:</p><p id="50ce" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它类似于PathLocationStrategy，只是散列包含在URL段中。</p><p id="8d53" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">示例:</p><p id="ed75" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">http://myapp.com/#/users</p><p id="1040" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">http://myapp.com/#/users/1</p><p id="0854" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">http://myapp.com/#/users/1/posts</p><p id="4425" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">优点:</strong></p><p id="8044" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●所有浏览器都支持</p><p id="282e" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx jh">缺点:</strong></p><p id="40fc" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●生成一个类似<a class="ae jd" href="http://example.com/#foo" rel="noopener ugc nofollow" target="_blank">http://example.com/#foo</a>的网址</p><p id="5e4a" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">●不支持服务器端渲染</p><p id="ea51" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">服务器端渲染是一种在服务器上渲染关键页面的技术，可以在应用程序首次加载时极大地提高响应速度。</p><p id="fb45" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这两种策略的工作原理是一样的，只是后面一种策略中包含了#。那么你可能想知道为什么需要两种策略？在深入调查之前。让我们看看在我们的应用程序中实现策略的步骤。</p><figure class="nd ne nf ng gt is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi nc"><img src="../Images/d5ce8bec885c08c95f69d55c3a8b4ee4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*roOTNpxhc37AA046siVCeg.png"/></div></div></figure><h1 id="94bf" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated">为什么我们需要两种不同的定位策略？</h1><p id="c469" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">这是一个需要理解的重要问题！因为Angular是一个SPA(单页应用程序)，这意味着它只有一个index.html文件，该文件将根据路线为应用程序呈现视图。</p><p id="e372" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有几个提供商来托管应用程序，如AWS、GCP、Azure等云提供商。，以及其他web应用程序托管服务提供商。</p><p id="eca7" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">例如，如果在我们的应用程序中有一个像/dashboard/users这样的路由，那么一些web主机会把它当作一个文件夹而不是一个路由，但实际上，它是应用程序中的一个路由，并导致呈现问题。举个例子，</p><p id="43d3" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">当你键入网址<a class="ae jd" href="http://www.myapp.com/userList" rel="noopener ugc nofollow" target="_blank">http://www.myapp.com/userList</a>并点击刷新按钮。</p><p id="eaff" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">浏览器会将请求发送到web服务器。由于页面用户列表不存在，它将返回404(未找到页面)错误。</p><p id="1733" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果我们能够将所有请求重定向到index.html，这个问题就可以解决。然后使用HashLocationStrategy，包含#并且路由看起来像/#/dashboard/users，这将确保只有一个文件index.html，从而区分路由。那么，什么时候需要用什么呢？</p><p id="7819" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">使用PathLocationStrategy，您可以利用服务器端呈现，这将使我们的应用程序加载更快，方法是在将页面交付给客户端之前，先在服务器中呈现页面。</p><p id="2ce4" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">仅当您必须支持旧版本的浏览器时，才使用哈希定位策略。</p><p id="3367" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">Angular中的定位策略不影响应用程序，但路线中包含的#除外。可能会有一些部署问题，正如我们上面与一些主机提供商讨论的那样。</p><h1 id="2fad" class="lr ls jg bd lt lu lv lw lx ly lz ma mb km mc kn md kp me kq mf ks mg kt mh mi bi translated"><strong class="ak">结论</strong></h1><p id="fa56" class="pw-post-body-paragraph kv kw jg kx b ky mj kh la lb mk kk ld le ml lg lh li mm lk ll lm mn lo lp lq ij bi translated">HashLocationStrategy使用散列样式路由，而PathlocationStrategy使用HTML 5路由。</p><p id="85e0" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">大多数时候开发者更喜欢使用PathLocation策略，因为这是默认策略，它会使URL看起来干净、容易记忆、SEO友好，并且可添加书签。快乐学习！</p><p id="c108" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nh">更多内容看</em> <a class="ae jd" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">说白了。在这里注册我们的</em> </a><a class="ae jd" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">免费周报</em> </a> <em class="nh">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Build a Simple Web Calculator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何建立一个简单的网络计算器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-simple-web-calculator-fa0ba9c2808c?source=collection_archive---------8-----------------------#2021-10-18">https://javascript.plainenglish.io/how-to-build-a-simple-web-calculator-fa0ba9c2808c?source=collection_archive---------8-----------------------#2021-10-18</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="5d8f" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph">教程</h2><div class=""/><div class=""><h2 id="d97e" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">使用TypeScript和自定义元素</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/8716c7f72479d601cdd21ade4c079ac2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9XCo_k_ijGWIQ0vLrg2sjA.jpeg"/></div></div></figure><p id="d993" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">当您还在学习JavaScript/TypeScript时，构建一个计算器是一个很好的项目。在本教程中，您将了解计算器背后的HTML、CSS和TypeScript。该项目将在没有JavaScript框架的情况下构建，并将使用TypeScript starter项目进行构建工具的基本设置。</p><p id="c69b" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><em class="lx">如果你想更多地了解这个starter项目是如何产生的，你可以在我关于如何制作自己的TypeScript starter项目的帖子中阅读更多内容。</em></p><div class="ly lz gq gs ma mb"><a rel="noopener  ugc nofollow" target="_blank" href="/a-beginners-guide-to-creating-a-typescript-starter-project-6129deeeb973"><div class="mc ab fp"><div class="md ab me cl cj mf"><h2 class="bd jb gz z fq mg fs ft mh fv fx ja bi translated">创建TypeScript初学者项目的初学者指南</h2><div class="mi l"><h3 class="bd b gz z fq mg fs ft mh fv fx dk translated">创建新项目将变得快速、简单、轻松</h3></div><div class="mj l"><p class="bd b dl z fq mg fs ft mh fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp kz mb"/></div></div></a></div><h2 id="3976" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">该项目</h2><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj ni"><img src="../Images/6d6081f96c36f2316dea89d2f637a7ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_6Yhuhiw1g38sBT5SWYZ3w.jpeg"/></div></div></figure><p id="f90a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">你可以在<a class="ae nj" href="https://ws-simple-web-calculator.netlify.app/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>上看到这个计算器的最终版本。</p><h2 id="f1f8" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">加价</h2><p id="3870" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">标记非常简单。根元素将是一个名为<em class="lx"> &lt; ws-calculator &gt; </em>的<strong class="ld jb">定制元素</strong>。在这里面，将有一个显示部分和一个按钮部分。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><h2 id="d224" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">造型</h2><p id="f56c" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">样式很简单，但是按钮使用CSS网格。这允许您将“=”按钮精确地放置在两行上。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><h2 id="57fc" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">逻辑</h2><p id="94d6" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">计算器将是一个名为<code class="fe nr ns nt nu b">ws-calculator</code>的自定义元素。这意味着您需要从扩展HTMLElement类的类开始。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="daad" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">如果您正在跟进TypeScript starter项目，这应该放在<code class="fe nr ns nt nu b">app.ts</code>中。</p><p id="7f0a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">该类需要跟踪几件事情:</p><ul class=""><li id="65ce" class="nv nw ir ld b le lf lh li lk nx lo ny ls nz lw oa ob oc od bi translated">该显示元件</li><li id="784d" class="nv nw ir ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated">按钮元素</li><li id="4497" class="nv nw ir ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated">要计算的当前查询</li></ul><p id="337d" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">让我们创建几个属性来保存这些数据。此外，让我们为查询属性创建一个getter和setter。这允许您在查询更改时执行额外的逻辑。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="0655" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">现在这个类可以处理数据了，您需要为按钮点击设置事件侦听器。定制元素有两个自动调用的函数，这两个函数在这个项目中很有用:</p><ul class=""><li id="f829" class="nv nw ir ld b le lf lh li lk nx lo ny ls nz lw oa ob oc od bi translated">connectedCallback —每次将自定义元素追加到文档连接的元素中时，都会调用此函数。</li><li id="51c3" class="nv nw ir ld b le oe lh of lk og lo oh ls oi lw oa ob oc od bi translated">disconnectedCallback —每当自定义元素与文档的DOM断开连接时，都会调用此函数。</li></ul><p id="61f3" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">事件侦听器应该在connectedCallback上绑定，在disconnectedCallback上解除绑定。这将防止在移动或重新添加计算器时事件被双重绑定。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><h2 id="7e95" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">处理按钮点击</h2><p id="ee96" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">当你点击任何一个按钮，都会触发<code class="fe nr ns nt nu b">handleButtonClick</code>方法。我们要确定按钮的价值，还要确定用户价值。例如，符号*用于执行乘法，但在显示器上，您希望显示“x”字符。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="1bbd" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">大多数按钮应该在显示屏上添加一个字符。但是，有三个按钮具有不同的功能:</p><ol class=""><li id="2bdc" class="nv nw ir ld b le lf lh li lk nx lo ny ls nz lw oj ob oc od bi translated">AC按钮应该会清除显示。</li><li id="b545" class="nv nw ir ld b le oe lh of lk og lo oh ls oi lw oj ob oc od bi translated">CE按钮应该从显示中删除最后一个字符。</li><li id="92b9" class="nv nw ir ld b le oe lh of lk og lo oh ls oi lw oj ob oc od bi translated">=按钮应该执行计算。</li></ol><p id="720a" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">让我们实现一个简单的switch语句来处理这些不同的输入。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="c928" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><code class="fe nr ns nt nu b">performCalculation</code>还不存在，我们暂时把它作为一个空函数添加进来。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><h2 id="7eae" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">更新显示</h2><p id="d93e" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">当点击按钮时,<code class="fe nr ns nt nu b">query</code>属性会被更新，但是它们在屏幕上还不会被更新。让我们创建一个方法来更新显示，并从<code class="fe nr ns nt nu b">query</code> setter方法中调用该方法。</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="9557" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">你现在应该有一个几乎正常工作的计算器，可以更新显示，可以清除显示，可以删除最后一个字符。是时候实现最后一个函数来执行计算了。</p><h2 id="b54e" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">执行计算</h2><p id="bb37" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">有许多方法可以根据我们的查询执行计算。我们可以解析运算符之间的值，并执行逻辑来计算结果。出于本教程的目的，将使用<code class="fe nr ns nt nu b">eval()</code>方法。</p><p id="1172" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><code class="fe nr ns nt nu b">eval()</code>方法是一个全局函数属性，它接受一个字符串作为参数。如果所讨论的字符串代表一个表达式，则计算该表达式并返回结果。</p><p id="e885" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">不建议<strong class="ld jb">在生产环境中使用eval，因为如果第三方可以更改字符串，它会带来安全风险。但是对于这个简单的教程，使用起来还是很安全的。</strong></p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="np nq l"/></div></figure><p id="515e" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">在这种方法中，乘除字符被JavaScript理解的字符替换，查询通过eval方法运行，答案被格式化为四舍五入到小数点后两位的字符串。最后，用格式化的答案更新查询，因此您可以链接更多的计算或者对结果感到满意。</p><p id="d034" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">这标志着教程的结束。您已经使用TypeScript和定制元素规范构建了一个功能完整的计算器。</p><h2 id="962a" class="mq mr ir bd ms mt mu dn mv mw mx dp my lk mz na nb lo nc nd ne ls nf ng nh ix bi translated">结论</h2><p id="41b1" class="pw-post-body-paragraph lb lc ir ld b le nk kb lg lh nl ke lj lk nm lm ln lo nn lq lr ls no lu lv lw ik bi translated">我希望你能从这个简单的教程中学到一些东西。如果您有任何想法、问题、反馈或改进，请在评论中告诉我。</p><p id="dc53" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">如果你想看的话,<a class="ae nj" href="https://github.com/WesleySmits/simple-web-calculator" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>包含了这个项目的全部代码。</p><p id="2a73" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated">如果你想支持我，你可以<a class="ae nj" href="https://twitter.com/iamwesleysmits" rel="noopener ugc nofollow" target="_blank">在Twitter上关注我</a>，<a class="ae nj" href="https://ko-fi.com/wesleysmits" rel="noopener ugc nofollow" target="_blank">给我买一个Ko-fi </a>或者<a class="ae nj" href="https://medium.com/@WesleySmits/membership" rel="noopener">通过我的链接</a>(附属)订阅Medium。</p><p id="b572" class="pw-post-body-paragraph lb lc ir ld b le lf kb lg lh li ke lj lk ll lm ln lo lp lq lr ls lt lu lv lw ik bi translated"><em class="lx">更多内容看</em><a class="ae nj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ld jb"><em class="lx">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
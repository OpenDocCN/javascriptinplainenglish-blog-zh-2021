<html>
<head>
<title>Let’s add a Shopping Cart Feature in Vue.js for Our Ecommerce App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们为我们的电子商务应用程序在Vue.js中添加一个购物车功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-add-a-shopping-cart-feature-in-vue-js-for-our-ecommerce-app-ae0cc65374ff?source=collection_archive---------7-----------------------#2021-03-09">https://javascript.plainenglish.io/lets-add-a-shopping-cart-feature-in-vue-js-for-our-ecommerce-app-ae0cc65374ff?source=collection_archive---------7-----------------------#2021-03-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c9f5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本教程中，我们将学习如何在我们的演示电子商务应用程序中显示、更新和删除购物车商品</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/30609818592c7943a526fff5913bc057.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iWmEQgN7XfhGFXL5ogG5jQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">shopping cart</figcaption></figure><h1 id="30e6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">介绍</h1><p id="7af8" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们正在从头开始构建一个电子商务应用程序，前端使用Vue.js，后端使用Java和Springboot。你可以在这里查看这个系列的第一个前端教程</p><div class="me mf gp gr mg mh"><a href="https://medium.com/javarevisited/a-complete-guide-on-how-to-develop-an-e-commerce-platform-f0bde77dac68" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">如何开发电子商务平台的完整指南</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">我们将使用Vue.js和Spring框架从头开始构建一个电子商务平台</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv kv mh"/></div></div></a></div><p id="f4b2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们正在构建一个购物车组件，用于显示和更新用户添加到购物车中的商品。</p><p id="73cb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用Vue.js为购物车制作一个漂亮的UI。</p><h1 id="1875" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">我们将实施的演示</h1><p id="fa00" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated"><a class="ae mw" href="http://remotedevs.org:8000/" rel="noopener ugc nofollow" target="_blank">这里可以玩电商app</a></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6436" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在<a class="ae mw" href="https://github.com/webtutsplus/ecommerce-vuejs" rel="noopener ugc nofollow" target="_blank"> Github </a>找到完整的代码。</p><h1 id="0e8f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">后端</h1><p id="4ad4" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">之前，我们已经使用Java和Springboot构建了购物车的后端。你可以在这里找到它</p><div class="me mf gp gr mg mh"><a href="https://medium.com/javarevisited/lets-develop-shopping-cart-for-ecommerce-app-8e57a9ab4868" rel="noopener follow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd ir gy z fp mm fr fs mn fu fw ip bi translated">让我们为电子商务应用程序开发购物车</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">每个电子商务网站都有购物车功能，今天我们将学习如何使用Java和</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">medium.com</p></div></div><div class="mq l"><div class="mz l ms mt mu mq mv kv mh"/></div></div></a></div></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="1efd" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">先决条件</h1><ol class=""><li id="2d2d" class="nm nn iq jp b jq lz ju ma jy no kc np kg nq kk nr ns nt nu bi translated">关于Vuejs的知识</li><li id="a9aa" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><a class="ae mw" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a> <strong class="jp ir"> — </strong>开源(推荐)</li><li id="a484" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated">一个好的浏览器<strong class="jp ir"> — </strong> (Chrome —推荐)</li></ol></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="8e3a" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">API描述摘要</h1><p id="497f" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">在开始编码前端部分之前，我们必须讨论一下我们将用于前端的API。你可以在这里找到后端代码<a class="ae mw" href="https://github.com/webtutsplus/ecommerce-backend" rel="noopener ugc nofollow" target="_blank"/></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi oa"><img src="../Images/745857dd2f804ac1457c66ce492729db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*RqLUUo8TgqxGavh95qTNqg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">backend API</figcaption></figure><h2 id="7ffb" class="ob lc iq bd ld oc od dn lh oe of dp ll jy og oh lp kc oi oj lt kg ok ol lx om bi translated">添加到购物车(发布) :</h2><p id="3f28" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">在这个方法中，我们必须发送产品的id和数量，以便给定的产品可以添加到相应的用户购物车中。因此，POST请求的主体应该如下所示，</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi on"><img src="../Images/18406e265196846b97a41bad69cfd86b.png" data-original-src="https://miro.medium.com/v2/resize:fit:402/format:webp/1*vTmDTZ4fgPY85gGnKJrCXQ.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Post Body if product id is 3 and quantity is 2</figcaption></figure><h2 id="e508" class="ob lc iq bd ld oc od dn lh oe of dp ll jy og oh lp kc oi oj lt kg ok ol lx om bi translated"><strong class="ak">获取所有购物车物品(GET) : </strong></h2><p id="e28c" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">现在，为了获取特定用户购物车中的所有商品，我们需要一个get请求。作为回报，我们将获得购物车中所有的<code class="fe oo op oq or b">product</code>细节、<code class="fe oo op oq or b">quantity</code>和商品的总价格。<code class="fe oo op oq or b">cartItems</code>是购物车中所有<code class="fe oo op oq or b">products</code>的数组，<code class="fe oo op oq or b">totalCost</code>代表购物车中所有商品的总成本。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi os"><img src="../Images/512e7efb15fb55456bd78d9805cb8e4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Edip5kAfAiJ7Kyd48fKVUw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">The response body in JSON format</figcaption></figure><h2 id="a18e" class="ob lc iq bd ld oc od dn lh oe of dp ll jy og oh lp kc oi oj lt kg ok ol lx om bi translated">更新项目(上传) :</h2><p id="97a7" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">为了更新购物车中的特定产品，我们需要<code class="fe oo op oq or b">cart_item_id</code>、<code class="fe oo op oq or b">quantity</code>和<code class="fe oo op oq or b">user_token</code>。</p><h2 id="14d9" class="ob lc iq bd ld oc od dn lh oe of dp ll jy og oh lp kc oi oj lt kg ok ol lx om bi translated">从购物车中删除商品(删除) :</h2><p id="3f34" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">要从购物车中删除特定的产品，我们需要<code class="fe oo op oq or b">cart_item_id</code>。我们可以通过id删除该项目。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="3485" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">本教程的流程</h1><blockquote class="ot ou ov"><p id="9e0f" class="jn jo ow jp b jq jr js jt ju jv jw jx ox jz ka kb oy kd ke kf oz kh ki kj kk ij bi translated"><em class="iq"> 1。添加到购物车</em></p><p id="7a7c" class="jn jo ow jp b jq jr js jt ju jv jw jx ox jz ka kb oy kd ke kf oz kh ki kj kk ij bi translated"><em class="iq"> 2。显示购物车商品</em></p><p id="07a5" class="jn jo ow jp b jq jr js jt ju jv jw jx ox jz ka kb oy kd ke kf oz kh ki kj kk ij bi translated"><em class="iq"> 3。更新购物车中的商品</em></p><p id="d51a" class="jn jo ow jp b jq jr js jt ju jv jw jx ox jz ka kb oy kd ke kf oz kh ki kj kk ij bi translated"><em class="iq"> 4。删除购物车中的商品</em></p></blockquote></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="8caa" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">文件夹结构</h1><p id="1d94" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">继续在我们的Vue项目的views文件夹中创建一个名为Cart的文件夹，然后在Cart文件夹中创建一个vue.js文件<code class="fe oo op oq or b">Cart</code>。</p><p id="dec2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">文件夹结构应该如下所示</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/dfd0537fbf719a4894e3ae035dd08c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:594/format:webp/1*nluxKKZQXaSciV7zjFbsXg.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Folder Structure</figcaption></figure><p id="54e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个(<code class="fe oo op oq or b">Cart.vue</code>)组件中，我们将显示用户添加到购物车中的商品。</p><p id="9be0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，用户还可以更新购物车中的商品数量或删除购物车中的商品。此外，我们将在页面底部显示购物车价格，每次用户修改购物车时，价格都会更新。</p><p id="d8ac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">用户还可以单击某个特定项目来查看其详细信息。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="64c8" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">现在让我们开始编码</h1><p id="d231" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们将创建一个<code class="fe oo op oq or b">Cart.vue</code>文件，它像任何Vue.js文件一样有三个组成部分</p><p id="a32f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">1.<template>标签(用于编写HTML标签)</template></p><p id="e86f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2.一个<script>标签(用于编码逻辑/功能)&lt;/root&gt;</script></p><p id="f6a0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">3.一个<style>标签(用于向页面添加CSS)。&lt;/root&gt;</style></p><p id="a2ad" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在脚本标签中，我们需要导出Cart组件，通过导入它可以在一些组件中呈现该组件。</p><h1 id="efde" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">1.加入购物车</h1><p id="7bb6" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们将使用我们在上面的<strong class="jp ir"> API </strong>描述中看到的<strong class="jp ir"> API </strong> :/cart/add。</p><p id="f687" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们有一个<code class="fe oo op oq or b">showdetails</code>组件，显示用户希望查看或添加到购物车的产品的详细信息。</p><p id="05a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，在这个组件中，我们有一个按钮addToCart，它调用我们后端API的post方法(AddtoCart ),该方法将有一个产品id和该产品数量的post主体。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pb"><img src="../Images/8cfbe69c4388fc55122d5227201e32b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jXcyeqVkOVnSTjYbuxbWug.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">adding a product to the cart</figcaption></figure><h1 id="1e97" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated"><strong class="ak"> 2。显示购物车商品</strong></h1><p id="29a1" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">我们将使用我们在上面的<strong class="jp ir"> API </strong>描述中看到的<strong class="jp ir">API:</strong><a class="ae mw" href="http://localhost:8080/api/swagger-ui.html#/operations/cart-controller/getCartItemsUsingGET" rel="noopener ugc nofollow" target="_blank">/cart/</a>getcartitem。</p><p id="6acf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为此，我们需要将数据变量与HTML属性绑定在一起</p><ul class=""><li id="999b" class="nm nn iq jp b jq jr ju jv jy pc kc pd kg pe kk pf ns nt nu bi translated"><strong class="jp ir"> carts </strong>:用于存储将从API调用中获取的响应数据。</li><li id="75fa" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk pf ns nt nu bi translated"><strong class="jp ir">令牌</strong>:检查用户是否登录的用户令牌。</li><li id="f6f9" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk pf ns nt nu bi translated"><strong class="jp ir"> len </strong>:存储购物车中物品的长度</li><li id="0421" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk pf ns nt nu bi translated"><strong class="jp ir">总成本</strong>:存储购物车中商品的总成本，</li><li id="d7d5" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk pf ns nt nu bi translated"><strong class="jp ir"> cartItem </strong>:一个对象数组，其中每个对象包含以下数据字段:</li></ul><ol class=""><li id="93ff" class="nm nn iq jp b jq jr ju jv jy pc kc pd kg pe kk nr ns nt nu bi translated"><strong class="jp ir"> imgUrl </strong>:产品的形象</li><li id="273d" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir"> pName </strong>:产品名称，</li><li id="7293" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir">p描述</strong>:产品描述，</li><li id="5deb" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir">PP price</strong>:产品价格，</li><li id="c5b4" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir"> pQuantity </strong>:产品数量，</li><li id="7fe5" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir"> id </strong>:物品id，</li><li id="58d5" class="nm nn iq jp b jq nv ju nw jy nx kc ny kg nz kk nr ns nt nu bi translated"><strong class="jp ir">用户标识</strong>:用户的标识</li></ol><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="pg my l"/></div></figure><p id="3856" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从应用程序。vue文件我们将属性传递给路由器视图组件，在这种情况下，Cart组件接收属性，因此我们存储从属性接收的baseURL。</p><p id="4002" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，只要用户被导航到/cart，即cart组件被装载/呈现，我们就从本地存储设置令牌值。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ph"><img src="../Images/e05b19c92fb7f57ae2b6fcc323b7e76e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NaV9qj788fCEPzjWQmWoTQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">displaying the cart items</figcaption></figure><p id="a84f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ow"> listCartItems()函数</em> </strong>:将用于获取并显示购物车中的物品。</p><p id="c53a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们想要获取项目，所以将使用Axios 的get方法，并将用户的令牌作为参数传递给它。因此，我们的<strong class="jp ir">后端API </strong>，用提供的令牌找到用户，然后根据用户ID返回他/她的购物车中的一组商品，状态代码为<code class="fe oo op oq or b">success</code>。但是，如果所提供的令牌无效，即用户没有登录，那么它将返回一个声明令牌无效的响应。</p><p id="e12d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果我们发出的<strong class="jp ir"> API </strong>调用的响应状态是<code class="fe oo op oq or b">success</code>，那么我们将把响应数据存储在我们之前创建的<strong class="jp ir">购物车</strong>数据变量中。响应包含一个名为cartItems的数组，该数组包含cartId、productId、userId和一个包含产品详细信息的product数组。然后“<code class="fe oo op oq or b">carts</code>”数组的长度将给出购物车中的商品数量，我们将把这些商品存储在变量“<code class="fe oo op oq or b">len</code>”中。</p><p id="4fb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们使用for循环遍历购物车商品，并将每个商品的详细信息存储在“cartItem”数组中。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="pg my l"/></div></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="d461" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated"><strong class="ak">显示产品的详细信息</strong></h1><p id="e272" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">每当用户单击购物车中的一个项目时，用户将被导航到showDetails组件，该组件将显示该项目的详细信息。</p><p id="a2be" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="ow"> showDetails()函数</em> </strong>:将接收一个参数，即产品的id，该参数将在路由器实例($router)的push方法中作为参数传递，然后用户将被导航到showDetails组件，该组件将根据接收到的id显示产品的详细信息。因此，当我们单击图片或项目名称时，它会显示该项目的详细信息，如下所示:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pi"><img src="../Images/cca7131174c12d94114b0009d872d470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CD2NZVlf_ns_f7hwx98AFQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">displaying details of a particular item</figcaption></figure><p id="3ecf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要担心我们没有添加HTML部分，您可能想知道它是如何显示的。我在最后附上的HTML部分是为了给出我们正在构建的可视化内容，敬请关注！</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="2121" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">3.更新购物车商品</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pj"><img src="../Images/28008601ffc116b14fae0819973664ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*W0Rm1CBylgIRPtn0c9KqbA.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">updating an item (here Towels product)</figcaption></figure><p id="35c3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用我们在上面的<strong class="jp ir"> API </strong>描述中看到的<strong class="jp ir">API:/cart/update/{ cartItemId }</strong>。</p><p id="34ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="ow">【update item()</em></strong><em class="ow">:</em>该函数将接收cartItem中产品的索引和新的数量</p><p id="ac41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，我们将通过循环查找cartItems数组中的itemId，然后打破循环，将找到的项的索引存储在变量“I”中。</p><p id="db70" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后用从参数中收到的新数量更新产品的数量。此外，我们将userId和productId存储在变量中，因为我们需要将响应主体传递给后端API调用。在这个后端API中，也将首先进行用户身份验证，然后将找到具有所提供的itemId的项目，并因此更新其数量。</p><p id="febb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们正在更新一个实体，所以我们使用Axios的put方法，并将itemId和token作为参数传递，将itemId、userId、productId、quantity作为响应体传递。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="pg my l"/></div></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="ad71" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">4.从购物车中删除商品</h1><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pk"><img src="../Images/2a816662b9d9153ff238bcd779f9c769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*yKXt4ynkfHkl5Gq08wew8g.gif"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">deleting an item from the cart</figcaption></figure><p id="7c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用我们在上面的<strong class="jp ir"> API </strong>描述中看到的<strong class="jp ir">API:/cart/delete/{ cartItemId }</strong>。</p><p id="c3c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> deleteItem(): </strong>这个函数将接收一个itemId</p><p id="1b8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们调用Axios的delete方法，该方法将调用相应URL映射的后端<strong class="jp ir"> API </strong>,并将itemId和token作为参数提供给它。因此，这个后端API将首先找到提供了令牌的用户，如果找到了用户，那么将从数据库中删除提供了itemId的购物车商品。删除后，API发送响应状态200，产品从购物车中删除，我们刷新页面。</p></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><p id="e5b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">现在，还有一点需要注意，当该组件将被渲染/安装时，购物车商品应被显示。因此，我们在“mounted”方法中调用listCartItems()方法。</strong></p><pre class="km kn ko kp gt pl or pm pn aw po bi"><span id="c8e4" class="ob lc iq or b gy pp pq l pr ps">mounted() {<br/>   this.token = localStorage.getItem("token");<br/>   this.listCartItems();<br/>}</span></pre><h1 id="c738" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">我们特性的HTML部分:</h1><p id="c530" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">现在让我们开始处理HTML部分。所以在模板标签中，我们需要添加HTML属性。现在，当且仅当用户将商品添加到购物车中时，我们才显示这些商品。所以一般来说，无论什么时候进行条件渲染，我们都使用Vuejs的v-if指令。只有当指令的表达式返回真值时，才会呈现该块。</p><p id="46e0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们将从API获得的响应数据存储在“carts”变量中时，它用于确定是否显示项目，即如果“carts”值不为空，那么将显示带有v-if指令的div块。</p><p id="352d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，由于购物车中可能有多个商品，我们需要遍历“cartItem”数组，然后显示它们。为此，我们使用v-for指令，该指令需要传递一个键(必需的)来惟一地标识一个项目。记住我们存储在“len”变量中的购物车商品的长度，它在这里循环使用。</p><p id="4f14" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在v-bind指令的帮助下，我们为每个产品显示它的图像，单击它时，我们调用showDetails()方法。</p><p id="24a3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在使用vuejs的双向数据绑定概念，我们显示了该项目的名称、描述、价格、数量和总价。</p><p id="dfa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，我们需要为删除和更新方法添加按钮。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi pt"><img src="../Images/9b5403396ea3d45e580396f8db4bbe8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oFJIbfQYTwQVAnZ8jS8M3g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Update button and delete button and displaying the total cost of the cart</figcaption></figure><p id="e609" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当单击删除按钮时，将调用deleteItem，我们前面已经看到了它的实现。</p><p id="09ea" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于数量可以更新，我们创建了一个接受数量的表单，然后使用更新按钮提交。我们用使用指令v-model创建的“pQuantity”变量绑定输入属性。</p><p id="8aba" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将调用updateItem()函数，该函数将传递需要更新的产品的索引(回想一下，在实现该方法时，我们接受了一个参数来查找购物车中的产品)和数量。</p><p id="0d5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我们显示存储在“total cost”变量中的购物车的总成本。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="pg my l"/></div></figure></div><div class="ab cl na nb hu nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ij ik il im in"><h1 id="1846" class="lb lc iq bd ld le nh lg lh li ni lk ll lm nj lo lp lq nk ls lt lu nl lw lx ly bi translated">恭喜你！</h1><p id="6a9d" class="pw-post-body-paragraph jn jo iq jp b jq lz js jt ju ma jw jx jy mb ka kb kc mc ke kf kg md ki kj kk ij bi translated">您现在已经成功展示并更新了添加到购物车中的产品。</p><p id="65b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以在此<a class="ae mw" href="https://github.com/webtutsplus/ecommerce-vuejs/blob/master/src/views/Cart/Cart.vue" rel="noopener ugc nofollow" target="_blank"> GitHub Repo </a>中找到完整的代码</p></div></div>    
</body>
</html>
<html>
<head>
<title>SOAP vs. REST vs. GraphQL: Difference Between Web API Services</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SOAP vs . REST vs . graph QL:Web API服务之间的区别</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/soap-vs-rest-vs-graphql-difference-between-web-api-services-461eee5d1ad7?source=collection_archive---------6-----------------------#2021-05-17">https://javascript.plainenglish.io/soap-vs-rest-vs-graphql-difference-between-web-api-services-461eee5d1ad7?source=collection_archive---------6-----------------------#2021-05-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ab5d780c1f6f004b322482110f5c740b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e7HG9X8oh1zh_45H2c9nOg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Source: Google</figcaption></figure><p id="3b0e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">API是一组编程代码/指令，能够在一个软件和另一个软件之间进行数据传输。</p><h1 id="e89d" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">API是如何工作的？</h1><p id="3f1f" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">众所周知，数据通常存储在服务器上。要检索这些数据，我们应该知道API如何与数据库对话(这就是API所做的),以获得我们想要的特定数据。它通过接收我们的请求并返回特定服务或客户端所需的数据来提供帮助。</p><p id="af44" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">例如:假设您在浏览器中键入一个URL来访问一个网页，您实际上是在向服务器发送一个请求，请求显示该网站所需的所有数据。也就是说，你在网址中输入youtube.com，点击一个特定的视频，然后你向服务器发送一个访问视频的请求，并开始播放它的内容。</p><p id="b7c4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在很清楚什么是API了，所以在接下来的讨论中，我们将讨论不同类型的Web API。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ma"><img src="../Images/b53c356755945e389bdf3d320f1404c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bSTqHlr61wmAwXipSUDLOQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Source: Google</figcaption></figure><h2 id="058f" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">什么是肥皂？</h2><p id="f142" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">SOAP是简单对象访问协议的缩写。SOAP是一种在REST之前就存在的协议。SOAP出现的主要原因是为了确保内置于不同平台或编程语言的程序能够以一种简单的方式交换数据。</p><h2 id="945f" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">使用SOAP的好处:</h2><p id="edb3" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">SOAP的标准HTTP协议使得跨防火墙操作更加容易，而无需修改SOAP协议本身。但是因为它使用了复杂的XML格式，所以速度很慢。</p><h2 id="1ded" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">肥皂的风险:</h2><ul class=""><li id="f92d" class="mr ms in kb b kc lv kg lw kk mt ko mu ks mv kw mw mx my mz bi translated">SOAP只允许XML格式在网络上传输数据。</li><li id="a3d3" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">SOAP需要更多的带宽。</li><li id="6063" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">最后但并非最不重要的是，从客户端传输到服务器的消息大小很大。</li></ul></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><h2 id="ba32" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">什么是休息？</h2><p id="8d36" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">与SOAP是一种协议不同，REST是一种API设计架构。它代表代表性的状态转移。SOAP和REST的关键区别在于，SOAP使用服务接口来公开功能，而REST使用统一服务定位器来访问组件。</p><h2 id="dbe1" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">使用REST的好处:</h2><ul class=""><li id="5a4c" class="mr ms in kb b kc lv kg lw kk mt ko mu ks mv kw mw mx my mz bi translated">REST允许更多的格式，而SOAP只支持XML。</li><li id="64dc" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">休息是无状态的。</li><li id="46f4" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">因为SOAP消息的大小更大，所以它们需要更大的带宽，这与REST的情况相反。</li></ul><p id="1055" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">注:</strong></p><p id="2b02" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">有状态VS无状态</strong></p><p id="7864" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在讨论Web服务API时，需要了解有状态和无状态，其中SOAP是有状态的，而REST是无状态的。</p><p id="1c50" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">假设您想要访问一个网站，并且您的数据托管在服务器上，因此要访问您的数据，您需要向服务器发送包含您的电子邮件和密码的请求，这样，如果您的凭据有效，服务器就会对您进行身份验证，并将名为会话变量的特定变量设置为true。</p><p id="6457" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这表明用户已经过身份验证，能够访问他们的资源，就像访问他们的配置文件一样，但是现在让这个例子在一个真实的情况下进行，在这个情况下有多个服务器，假设有2个，我们知道一个服务器创建了一个会话变量来对他们端的用户进行身份验证，但是在某些情况下，由于负载平衡，请求被发送到另一个服务器，而给定用户的会话变量没有被设置，这表明未经身份验证，这不是一个很好的方法。</p><p id="5dec" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，为了处理这种情况，一种新的无状态方法应运而生，在这种方法中，服务器使用用户的电子邮件/用户名和密码对用户进行身份验证后，它会为用户分配一个令牌。</p><p id="5295" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，每当用户发送访问资源的请求时，它需要在报头中发送令牌，以便服务器可以识别用户，在这种情况下，身份验证不依赖于服务器，因此不存在上述情况。</p><h2 id="f8d8" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">休息时的风险:</h2><ul class=""><li id="0ed3" class="mr ms in kb b kc lv kg lw kk mt ko mu ks mv kw mw mx my mz bi translated">REST不会像SOAP一样强加任何种类的安全。这就是REST非常适合公共可用URL的主要原因。</li><li id="c66e" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">当我们谈到客户端和服务器之间的机密数据传输时，REST是最糟糕的机制。</li><li id="8078" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated">REST是无状态的例如，如果您有一个购买站点，它有一个购物车机制，那么在购买发生之前，它需要知道购物车中的商品数量。不幸的是，维护这种状态的负担落在了客户端，这使得客户端应用程序变得更加沉重和难以维护。</li></ul><h2 id="ffc5" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">肥皂和REST的区别:</h2><p id="d53d" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">SOAP不能使用REST，因为SOAP是一种协议，其中REST是一种架构模式，而REST可以利用SOAP作为web服务的底层协议，因为最终REST只是一种架构模式。</p><p id="c247" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">SOAP的使用需要更多的带宽。由于SOAP消息体里面包含了很多信息，所以通常使用SOAP传输的数据量一般都很多。而REST在向服务器发送请求时不需要太多带宽。REST消息主要由JSON消息组成。</p></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><h2 id="958d" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">GraphQL是什么？</h2><p id="5d88" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">和REST一样，GraphQL也是API的一种架构设计模式。REST和GraphQL的主要区别之一是GraphQL不处理专用资源。</p><p id="f3c5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">相反，一切都被认为是一个图形，因此是相连的。</p><p id="e000" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这意味着您可以根据自己的确切需求来更改请求/查询。</p><p id="0047" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们举个例子来理解GraphQL的概念，假设我们要创建一个写博客的网站，那么在这个网站中用户想要创建一个帖子，查看帖子，还想要删除帖子。</p><p id="d05f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里我不是解释如何在GraphQL中创建API，而是试图帮助您理解API的结构:</p><p id="74f8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从上面的图片中我们看到，在本地主机上的项目服务器之后，它显示了一个名为GraphQL Playground的GraphQL终端，在左侧我们看到了查询，即我们需要像getALLPost一样访问哪个路由，获取特定的帖子，或者甚至想要删除帖子。</p><p id="1a99" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可以在屏幕中间看到“play”按钮，单击它可以运行您可以使用的特定API，在右侧，您可以看到输出。</p><figure class="mb mc md me gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nm"><img src="../Images/5b41b48a74f4e19c97d2b727b238564f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DC70xSWthHgEeaB6vO9MQ.png"/></div></div></figure><figure class="mb mc md me gt jo gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/88f4aa2daf4c3cb0c3784ed0d32e4364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/format:webp/1*ICzs3R9O50utZ0KrICoo5g.png"/></div></figure><p id="c27c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">注:</strong></p><p id="cdf3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您会注意到所有的API都在一个端点上工作，我们只需要通过在查询中传递API来指定我们想要运行哪个API，我们还可以在输出中决定我们需要哪个特定的字段。</p><h2 id="2580" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">使用GraphQL的好处:</h2><p id="aaf3" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">从上面的讨论中，很明显GraphQL比REST有一些优势，如下所示</p><ul class=""><li id="07d1" class="mr ms in kb b kc kd kg kh kk no ko np ks nq kw mw mx my mz bi translated">通过单个API调用获取数据:GraphQL和REST的最大区别在于，后者以单个端点为中心，因此要收集所有需要的数据，开发人员必须组合多个端点。尽管GraphQL关注的是任务本身，但在这种情况下，开发人员只需调用一次API就可以请求所需的数据。</li><li id="3205" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated"><strong class="kb io">不存在取多取少的问题。</strong>众所周知，REST响应要么包含过量的数据，要么包含的数据不足，这就产生了额外请求的必要性。GraphQL通过在单个请求中获取精确的数据来解决这个效率问题。</li></ul><h2 id="5e80" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">GraphQL的风险:</h2><ul class=""><li id="e634" class="mr ms in kb b kc lv kg lw kk mt ko mu ks mv kw mw mx my mz bi translated"><strong class="kb io">对小型应用程序来说是大材小用。虽然GraphQL是多种微服务的正确解决方案，但如果是简单的应用程序，您最好选择REST架构。REST也是连接资源驱动的应用程序的一种有价值的方法，这些应用程序不需要GraphQL提供的灵活查询。</strong></li><li id="6884" class="mr ms in kb b kc na kg nb kk nc ko nd ks ne kw mw mx my mz bi translated"><strong class="kb io">复杂查询的性能问题</strong></li></ul><h1 id="5761" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">结论:</h1><p id="ac00" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">REST和GraphQL都是创建API的架构设计。REST方法总是局限于处理单一资源。如果您需要来自2个不同资源的数据，您需要从服务器进行多次往返。</p><p id="e466" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">而GraphQL方法更灵活，克服了REST的缺点。</p><p id="2ec5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在GraphQL查询语言的帮助下，您可以准确地描述您的响应，就像我们在上面的GraphQL图片中看到的那样。</p><p id="549e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以最后我们得出结论，创建web服务API所需的方法类型取决于项目的需求。</p><h2 id="8df2" class="mf ky in bd kz mg mh dn ld mi mj dp lh kk mk ml ll ko mm mn lp ks mo mp lt mq bi translated">进一步阅读</h2><div class="nr ns gp gr nt nu"><a href="https://plainenglish.io/blog/how-to-build-a-graphql-ecommerce-app-from-scratch" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd io gy z fp nz fr fs oa fu fw im bi translated">如何从头开始构建一个GraphQL电子商务应用程序</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">这就是你要建造的东西！埃森哲的一项调查(19个国家的20，000多名消费者)发现，47%的人…</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">简明英语. io</p></div></div><div class="od l"><div class="oe l of og oh od oi jt nu"/></div></div></a></div></div><div class="ab cl nf ng hr nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ig ih ii ij ik"><p id="5c3c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="oj">更多内容请看</em><a class="ae ok" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="oj">plain English . io</em></strong></a><em class="oj">。报名参加我们的</em> <a class="ae ok" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="oj">免费周报</em> </strong> </a> <em class="oj">。关注我们关于</em><a class="ae ok" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="oj">Twitter</em></strong></a><a class="ae ok" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="oj">LinkedIn</em></strong></a><em class="oj"/><a class="ae ok" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="oj">YouTube</em></strong></a><em class="oj"/><a class="ae ok" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="oj">不和</em> </strong> </a> <em class="oj">。对增长黑客感兴趣？检查</em> <a class="ae ok" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="oj">电路</em> </strong> </a> <em class="oj">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Multi-project setup for Angular and Ionic applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度和离子应用的多项目设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/multi-projects-setup-for-angular-and-ionic-applications-70bc1d918758?source=collection_archive---------8-----------------------#2021-01-08">https://javascript.plainenglish.io/multi-projects-setup-for-angular-and-ionic-applications-70bc1d918758?source=collection_archive---------8-----------------------#2021-01-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/85c447e27278c33746e3ce8eb4f72979.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCaacO1mm3_0sQpO4W0HwA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Image by Author</figcaption></figure><h1 id="931c" class="jz ka in bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">简介</strong></h1><p id="b379" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">您是否曾想过如何创建一个Angular workspace，其中包含尽可能多的Angular和Ionic应用程序，这些应用程序使用通用的<code class="fe lv lw lx ly b">angular.json</code>、<code class="fe lv lw lx ly b">package.json</code>、<code class="fe lv lw lx ly b">tsconfig.json</code>和<code class="fe lv lw lx ly b">node_modules</code>文件和文件夹？</p><h2 id="bf7b" class="lz ka in bd kb ma mb dn kf mc md dp kj li me mf kn lm mg mh kr lq mi mj kv mk bi translated"><strong class="ak">好处</strong></h2><p id="a0ea" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">首先，让我们来看看使用这种方式来构建你的下一个基于角度和离子的项目会有什么好处:</p><ul class=""><li id="2e66" class="ml mm in kz b la mn le mo li mp lm mq lq mr lu ms mt mu mv bi translated">所有项目的单一存储库。</li><li id="aad9" class="ml mm in kz b la mw le mx li my lm mz lq na lu ms mt mu mv bi translated">在相关应用程序之间共享库的更简单的方法。</li><li id="187a" class="ml mm in kz b la mw le mx li my lm mz lq na lu ms mt mu mv bi translated">更容易重构项目。</li><li id="67a7" class="ml mm in kz b la mw le mx li my lm mz lq na lu ms mt mu mv bi translated">由于只有一个<code class="fe lv lw lx ly b">node_modules</code>，安装更容易。不需要一遍又一遍地安装相同的软件包。</li></ul><h2 id="726d" class="lz ka in bd kb ma mb dn kf mc md dp kj li me mf kn lm mg mh kr lq mi mj kv mk bi translated">文件夹结构</h2><p id="138d" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">为了重用<code class="fe lv lw lx ly b">angular.json</code>、<code class="fe lv lw lx ly b">package.json</code>、<code class="fe lv lw lx ly b">tsconfig.json</code>和<code class="fe lv lw lx ly b">node_modules</code>文件和文件夹，我们的文件夹结构应该是这样的:</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="5bc4" class="lz ka in ly b gy nj nk l nl nm">📁 node_modules<br/>📂 projects<br/>  - 📂 angular-app1<br/>  - 📂 angular-app2<br/>  - 📂 angular-app3<br/><br/>  - 📂 ionic-app1<br/>  - 📂 ionic-app2<br/>  <br/>  - 📂 library1<br/>  - 📂 library2<br/>📂 www<br/>📂 resources<br/>📂 platforms<br/>📄 angular.json<br/>📄 config.xml<br/>📄 ionic.config.json<br/>📄 package.json<br/>📄 tsconfig.json<br/>📄 tslint.json</span></pre><h1 id="bdcd" class="jz ka in bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">实施</strong></h1><p id="4770" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">首先，我们需要创建一个空的角度工作空间。<br/>包含选项— createApplication=false以避免在工作区文件夹中从头创建应用程序非常重要。</p><p id="f06a" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io">第一步。</strong>让我们创建角度工作空间</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="d2ee" class="lz ka in ly b gy nj nk l nl nm">ng new angular-multi-projects --createApplication=false</span></pre><p id="4ae8" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io">第二步。</strong>让我们创建第一个角度应用程序</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="6768" class="lz ka in ly b gy nj nk l nl nm">ng generate application angular-app1</span></pre><p id="f2df" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io"> <em class="nq">注意</em> </strong>:你可以使用上面提供的相同命令创建其他角度应用。所有的应用程序都将在<code class="fe lv lw lx ly b">projects folder</code>下创建，它们也将被添加到<code class="fe lv lw lx ly b">angular.json</code>文件中，这个文件可以在根文件夹中找到。</p><p id="5074" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io">第三步。创建Ionic应用程序</strong></p><h2 id="67de" class="lz ka in bd kb ma mb dn kf mc md dp kj li me mf kn lm mg mh kr lq mi mj kv mk bi translated"><strong class="ak">走错了路</strong></h2><p id="b92c" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">为了创建Ionic应用程序，我们不会使用<code class="fe lv lw lx ly b">ionic start ionic-app1</code>命令。该命令将创建一个新项目，包含新角度项目的所有默认文件(<code class="fe lv lw lx ly b">angular.json</code>、<code class="fe lv lw lx ly b">package.json</code>等)。)在工作区文件夹(我们在步骤1中创建的根文件夹)中。<br/>另外，如果你想保持上面的结构，把当前的工作目录改变到项目文件夹(<code class="fe lv lw lx ly b">cd projects</code>)并在那里使用(<code class="fe lv lw lx ly b">ionic start ionic-app1</code>)创建Ionic应用程序并不是一个好主意。这将创建我上面提到的Ionic应用程序，但是在这种情况下，它们将在项目文件夹下创建。</p><h2 id="e1bb" class="lz ka in bd kb ma mb dn kf mc md dp kj li me mf kn lm mg mh kr lq mi mj kv mk bi translated">正确的方式</h2><p id="82f3" class="pw-post-body-paragraph kx ky in kz b la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu ig bi translated">如果我们想让Ionic应用程序与简单的Angular应用程序和谐共存，我们需要在基本的Angular应用程序上使用Ionic。<br/>也就是说，Ionic应用程序将使用我们用于创建基本角度应用程序的相同命令来创建。</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="a8a4" class="lz ka in ly b gy nj nk l nl nm">ng generate application ionic-app1</span></pre><p id="d8eb" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated">现在我们有两个选择:</p><p id="cddc" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io">选项1 </strong>:使用命令为角度应用添加离子。</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="a64b" class="lz ka in ly b gy nj nk l nl nm">ng add @ionic/angular</span></pre><p id="3805" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated">小心，这种方法可能不会像你一开始期望的那样起作用。</p><ul class=""><li id="0060" class="ml mm in kz b la mn le mo li mp lm mq lq mr lu ms mt mu mv bi translated">它会自动在你的app的<code class="fe lv lw lx ly b">src folder</code>里面创建<code class="fe lv lw lx ly b">theme folder</code> <code class="fe lv lw lx ly b">variables.scss</code>。</li></ul><p id="8653" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated">现在这取决于你创建的所有东西的顺序，尽管<code class="fe lv lw lx ly b">ng add</code>应该添加到<code class="fe lv lw lx ly b">angular.json</code>里面的<code class="fe lv lw lx ly b">defaultProject</code>，我已经意识到实际上不会是这样的。所以最好检查以下情况:</p><ol class=""><li id="eb34" class="ml mm in kz b la mn le mo li mp lm mq lq mr lu nr mt mu mv bi translated">如果在这一步只创建了一个角度应用程序，那么一切都创建正确。</li><li id="5a3e" class="ml mm in kz b la mw le mx li my lm mz lq na lu nr mt mu mv bi translated">如果在运行<code class="fe lv lw lx ly b">ng add @ionic/angular</code>之前已经创建了多个角度应用程序，该命令可能会将离子样式、离子图标和/或构建任务附加到另一个角度应用程序。如果是这种情况，您必须按照下面提到的例子手动将所有内容移动到<code class="fe lv lw lx ly b">angular.json</code>中的正确应用程序。</li></ol><p id="9fd9" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io">选项2 </strong>:手动将离子安装至角度应用</p><p id="9015" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated">首先，您必须安装或检查您是否已经安装了以下软件包:</p><pre class="nb nc nd ne gt nf ly ng nh aw ni bi"><span id="49a3" class="lz ka in ly b gy nj nk l nl nm">npm install @ionic/angular</span><span id="9bb0" class="lz ka in ly b gy ns nk l nl nm">npm install @ionic/angular-toolkit</span></pre><p id="ab7d" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated">您必须使用Ionic的链接(在下面的参考资料部分提供),并从每个链接中复制高亮显示的代码<code class="fe lv lw lx ly b">angular.json</code>,以将您想要的应用程序转换为Ionic应用程序。在<code class="fe lv lw lx ly b">styles</code>下添加样式，在<code class="fe lv lw lx ly b">assets</code>下添加ionicons，并在<code class="fe lv lw lx ly b">angular.json</code>中的<code class="fe lv lw lx ly b">e2e</code>之后立即构建任务。确保将<code class="fe lv lw lx ly b">${projectName}</code>替换为构建任务的角度应用的实际项目名称。<br/>您还必须自己在项目下创建带有<code class="fe lv lw lx ly b">variables.scss</code>的<code class="fe lv lw lx ly b">theme folder</code>和<code class="fe lv lw lx ly b">global.scss</code>。</p><p id="daef" class="pw-post-body-paragraph kx ky in kz b la mn lc ld le mo lg lh li nn lk ll lm no lo lp lq np ls lt lu ig bi translated"><strong class="kz io"> <em class="nq">注意</em> </strong>:无论你从上面的选项中选择什么，对于每一个Ionic App，在<code class="fe lv lw lx ly b">angular.json</code>中你都应该有一个类似上面呈现的结构。</p></div></div>    
</body>
</html>
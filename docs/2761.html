<html>
<head>
<title>Advanced Type Composition with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¸¦æ‰“å­—ç¨¿çš„é«˜çº§æ’ç‰ˆ</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/advanced-type-composition-with-typescript-c1f980c4239e?source=collection_archive---------5-----------------------#2021-06-06">https://javascript.plainenglish.io/advanced-type-composition-with-typescript-c1f980c4239e?source=collection_archive---------5-----------------------#2021-06-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7e16" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½¿ç”¨æ³›å‹æ‰©å±•TypeScriptç±»å‹å¾ˆå®¹æ˜“ï¼Œè¿™æ˜¯éå¸¸åŠ¨æ€çš„ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸å¯é‡ç”¨çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬ç»å¸¸ä»¥ä»£ç é‡å¤è€Œå‘Šç»ˆã€‚è®©æˆ‘ä»¬æ¢ç´¢å¦‚ä½•ç”¨TypeScriptåŠ¨æ€æ‰©å±•ç±»å‹æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/63a252732751deb92bc58679bf556164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlHNeRpB-Y9AeHSx2TB_eA.jpeg"/></div></div></figure><p id="b3b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬å…ˆå®šä¹‰ä¸€äº›å®ä½“åŠå…¶å…³ç³»ã€‚</p><p id="1717" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æˆ‘ä»¬æœ‰ä¸€ä¸ªä»¤ç‰Œå®ä½“ï¼Œå®ƒæœ‰ä¸€ä¸ªè¦çº¦å®ä½“æ•°ç»„ï¼Œè¦çº¦å®ä½“æœ‰ä¸€ä¸ªå‡ºä»·å®ä½“æ•°ç»„ã€‚</p><p id="6d86" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">æ‰€ä»¥è®©æˆ‘ä»¬ä¸ºå®ƒä»¬åˆ›å»ºç±»å‹:</p><p id="df25" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">// <em class="ku"> Token.ts </em></p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="68a9" class="la lb in kw b gy lc ld l le lf"><em class="ku">import </em>{ TokenStatus } <em class="ku">from </em>'../enums/TokenStatus';<br/><br/><em class="ku">export type Token </em>= {<br/>  id: <em class="ku">string</em>;<br/>  name: <em class="ku">string</em>;<br/>  amount: <em class="ku">string</em>;<br/>  metadata: <em class="ku">Record</em>&lt;<em class="ku">string</em>, <em class="ku">string</em>&gt;;<br/>  status: TokenStatus;<br/>  created_at: <em class="ku">string</em>;<br/>};</span></pre><p id="2184" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">// <em class="ku"> Offer.ts </em></p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="d372" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type Offer </em>= {<br/>  id: <em class="ku">string</em>;<br/>  is_active: <em class="ku">boolean</em>;<br/>  ends_at: <em class="ku">string</em>;<br/>  created_at: <em class="ku">string</em>;<br/>  is_auction: <em class="ku">boolean</em>;<br/>};</span></pre><p id="4ade" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">// <em class="ku">æŠ•æ ‡æ–‡ä»¶</em></p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="2d51" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type Bid </em>= {<br/>  id: <em class="ku">string</em>;<br/>  bided_on: <em class="ku">string</em>;<br/>  amount: number;<br/>  refunded: <em class="ku">boolean</em>;<br/>  bid_is_highest: <em class="ku">boolean</em>;<br/>};</span></pre><p id="1898" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å°†å®ƒä»¬åˆ†å¼€çš„åŸå› æ˜¯ä¸ºäº†ä¿æŒä»£ç çš„æ•´æ´ï¼Œä½†ä¹Ÿæ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä»¤ç‰Œï¼Œä¾‹å¦‚ï¼Œè¯¥ç±»å‹ä¸åŒ…å«offersï¼Œä¸€èˆ¬æ¥è¯´ï¼Œä½œä¸ºå¤æ‚ç±»å‹çš„offersä¸åº”è¯¥æ˜¯ä»¤ç‰Œå®ä½“çš„åŸºæœ¬ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚</p><h1 id="8ac2" class="lg lb in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">ä»åŸºæœ¬ç±»å‹ä¸­çœç•¥å±æ€§</strong></h1><p id="8a30" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³åœ¨ä»£ç ä¸­åˆ›å»ºä¸€ä¸ªCreateTokenPayloadç±»å‹ï¼Œæˆ‘ä»¬çŸ¥é“è¯¥ç±»å‹æ²¡æœ‰ä»¤ç‰Œç±»å‹çš„<em class="ku"> id </em>å’Œ<em class="ku"> created_at </em>å±æ€§ã€‚æ‰€ä»¥å§‘ä¸”å°†<strong class="jm io"> <em class="ku">çœç•¥</em> </strong> <em class="ku"> </em>å®ƒä»¬<em class="ku">ã€‚</em></p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="afbe" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type </em>CreateTokenPayload<em class="ku"> </em>= Omit&lt;Token, 'id'|'created_at'&gt;</span></pre><p id="c573" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å°±æ˜¯è¿™æ ·ã€‚ğŸš€</p><h1 id="8775" class="lg lb in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ä»åŸºæœ¬ç±»å‹ä¸­é€‰å–å±æ€§</h1><p id="0e6b" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">ç°åœ¨ï¼Œå¦‚æœåˆ›å»ºä»¤ç‰Œè°ƒç”¨çš„å“åº”åªæœ‰<em class="ku"> id </em>å’Œ<em class="ku">çŠ¶æ€</em>å­—æ®µï¼Œé‚£ä¹Ÿå¾ˆå®¹æ˜“ï¼Œè®©æˆ‘ä»¬åªéœ€<strong class="jm io">é€‰æ‹©</strong>å­—æ®µã€‚</p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="7632" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type </em>CreateTokenResponse<em class="ku"> </em>= Omit&lt;Token, 'id'|'status'&gt;</span></pre><p id="b330" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å°±æ˜¯è¿™æ ·ã€‚ğŸš€</p><p id="02a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä½†è¿™ä¸æ˜¯è¿™ç¯‡æ–‡ç« è¦è®²çš„ğŸ¤·â€â™‚ï¸ï¼Œè¿™åªæ˜¯ä¸ºäº†è§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬è¦åˆ†å¼€è£…ç®±ã€‚æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ°ä½œæ–‡ã€‚</p><p id="8531" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ä¸ºäº†å‘ä»¤ç‰Œç±»å‹æ·»åŠ â€œä¼˜æƒ â€,æˆ‘ä»¬éœ€è¦æ‰©å±•ä»¤ç‰Œç±»å‹ã€‚</p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="7d9e" class="la lb in kw b gy lc ld l le lf">export type TokenWithOffers = Token &amp; { offers: Offer[] }</span></pre><p id="ce19" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç®€å•ï¼Œä½†æ˜¯â€¦æˆ‘ä»¬è¿˜éœ€è¦æŠ¥ä»·ç±»å‹ä¸­çš„â€œå‡ºä»·â€ã€‚</p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="a38b" class="la lb in kw b gy lc ld l le lf">export type OfferWithBids = Offer &amp; { bids: Bid[] }<br/>export type TokenWithOffers = Token &amp; { offers: OfferWithBids[] }</span></pre><p id="868a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç®€å•ï¼Œä½†æ˜¯â€¦æœ‰äº†è¿™ä¸‰ç§ç±»å‹çš„äº‹ä»¶ï¼Œä½ å¯ä»¥æ³¨æ„åˆ°æˆ‘ä»¬é€»è¾‘ä¸­çš„é‡å¤ï¼Œå®ƒæ¯•ç«Ÿä¸æ˜¯é‚£ä¹ˆåŠ¨æ€çš„ã€‚</p><h1 id="83f9" class="lg lb in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">ç”¨è¾“å…¥ç±»å‹ç»„åˆutil â€” <em class="mi"/></h1><p id="c5f8" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">ç›®æ ‡æ˜¯ä½¿æ¥å—<strong class="jm io">ç±»å‹çš„<strong class="jm io"> utilç±»å‹</strong>æ‰©å±•ï¼Œå±æ€§å</strong>ä¿å­˜æ·»åŠ çš„ç±»å‹ï¼Œç»„åˆ<strong class="jm io">ç±»å‹ã€‚</strong></p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="569a" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type With</em>&lt;BaseType, ObjectKey <em class="ku">extends string</em>, ComposedType&gt; = BaseType &amp; { [k <em class="ku">in </em>ObjectKey]: ComposedType };</span></pre><p id="8442" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç®€å•åˆå¥½ã€‚ğŸ˜Œ</p><p id="b958" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">ç°åœ¨è®©æˆ‘ä»¬æ¥æ¢ç´¢å¦‚ä½•æ”¹å–„æˆ‘ä»¬çš„<code class="fe mj mk ml kw b">TokenWithOffers</code>ç±»å‹ã€‚</p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="c6ca" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type TokenWithOffers </em>=<br/>  <em class="ku">With</em>&lt;<em class="ku">Token</em>, 'offers', <em class="ku">With</em>&lt;<em class="ku">Offer</em>, 'bids', <em class="ku">Bid</em>&gt;[]&gt;[]; // ğŸ˜³ </span></pre><p id="d9d4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å®ƒçš„ä¼Ÿå¤§ä¹‹å¤„åœ¨äºå®ƒå¯ä»¥ç”¨äºå¤šç§ç”¨ä¾‹ã€‚å‡è®¾æˆ‘ä»¬æƒ³åœ¨ä½¿ç”¨<code class="fe mj mk ml kw b">TokenWithOffers</code>ç±»å‹æ—¶åªç»™<code class="fe mj mk ml kw b">Token</code>ç±»å‹æ·»åŠ ä¸€ä¸ªåä¸º<code class="fe mj mk ml kw b">isActive</code>çš„é“å…·ã€‚</p><pre class="kj kk kl km gt kv kw kx ky aw kz bi"><span id="b713" class="la lb in kw b gy lc ld l le lf"><em class="ku">export type TokenWithOffers </em>=<br/>  <em class="ku">With</em>&lt;<br/>    With&lt;<em class="ku">Token, 'isActive', boolean&gt;</em>,<br/>    'offers', <br/>    <em class="ku">With</em>&lt;<em class="ku">Offer</em>, 'bids', <em class="ku">Bid</em>&gt;[]<br/>  &gt;[]; // ğŸ¤© </span></pre><p id="f787" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">å› æ­¤ï¼Œæ­£å¦‚ä½ æ‰€æ³¨æ„åˆ°çš„ï¼Œæˆ‘ä»¬ä½¿æˆ‘ä»¬çš„ä»£ç å¯ä¼¸ç¼©ï¼Œå¹¶å‡†å¤‡åœ¨æœªæ¥æ‰©å±•ã€‚ğŸ‘</p><p id="7612" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ku">å¿«ä¹ç¼–ç ï¼</em></p><p id="b6a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ku">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae mm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ku">plain English . io</em></a></p></div></div>    
</body>
</html>
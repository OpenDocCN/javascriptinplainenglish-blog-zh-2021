# 如何提出一个好的拉动式请求

> 原文：<https://javascript.plainenglish.io/how-to-make-pull-requests-that-are-easy-to-review-37d52d3fed6b?source=collection_archive---------11----------------------->

## 简单的代码审查对成功的项目至关重要

![](img/b8bc5b2e346d5746735d290455037cfd.png)

当你刚开始的时候，要求人们**审查代码**你的**拉请求**可能会很可怕。你不想麻烦任何人，但是你的工作必须被审查！作为一名开发人员，成长的一部分是更多地肯定自己，并把你的工作放在那里，但是你可以采取一些步骤来使你的代码易于审查。一旦你开始在*负责*项目，拥有易于审查的代码可以让你避免错过最后期限。

# 自己留下 PR 线评论

如果你没有从这篇文章中得到其他的东西，看看这个:[行注释](https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/commenting-on-a-pull-request#adding-line-comments-to-a-pull-request)是告诉人们你在想什么的一种非常好的方式*而*不必陷入“这个注释是必要的吗？”辩论。你可以在 PR 上留下过于机械的评论，这样可以加快审查的速度，而不会让代码库中的东西变得杂乱无章。像这样:

```
We had to switch all these h1s to h2s due to accessibility. Given that forms are only used inline and not as pop up modals anymore, best practice states that titles should be a sub heading. The style is still h3 anyway, so when QAing there should be no change. 
```

实际添加到代码中会是一个糟糕的注释。它太长了，可以通过阅读足够多的代码来解决，并在标签上谈论 QA。但是作为一个 PR 线评论，这**太棒了**。它回答了你的审查员可能有的一个问题，并解释了在测试过程中它应该导致什么样的行为。您应该在以下情况下添加这些注释:

1.  这个逻辑可能需要一秒钟来完成，所以提示会有所帮助
2.  它需要评审者可能不具备的最佳实践知识
3.  它从没有出现在审查中的其他未更改的文件中获取信息(例如，告诉审查一个拉入的函数返回的对象的形状，这样他们就不必读取其他文件)

所有这些评论都是为了加快速度，减少评论者的问题数量。

# 将您的 PRs 限制在 100 行*或更少

这个技巧更像是“好了，我们都知道了，现在*实际上*在做这件事。”有一个笑话说，如果你给程序员 10 行代码，他们会发现 10 个问题，但如果你给他们 1000 行代码，他们会说，“看起来不错！”这很有趣，因为这是绝对真实的。如果你开始进入几百行，甚至几千行的领域，没有人能够不花几天时间去理解它。通过将它保持在 100 行的范围内，有一个很好的机会，评审者可以将你的工作与之前的代码隔离开来，并找到要给出的评论。但是保持你的 PRs 小的真正诀窍是从票开始。

**这个总数不包括测试、快照或生成的文件*

# 任何不相关的都放在新票里

这有点关键，因为在这里添加几行不相关的内容，这可能是范围蔓延影响您工作的最常见方式。当你看到事情的时候，重构它们是很有诱惑力的，但是当涉及到回顾的时候，这会引起混乱。这个函数需要重构才能让你的新票据工作吗，或者它只是你在文件中碰巧修复的东西？请记住，它不会总是很清楚你的审查。相反，如果你注意到任何与你当前工作单不相关的事情，你应该把它归类到一个新的工作单中，并把它扔进待办事项中。这使您的所有票证紧密集中，更容易处理。如果你的原始工作单包含的工作比你想象的要多，那就把它分成多个工作单或多个项目经理。底线是:保持你的大块工作*小*。

# 像用户故事一样编写测试

测试之所以能轻而易举地通过那一行限制，是因为它们应该对评审者有**帮助**。如果他们看到类似“当按钮被点击时呈现一个新的模态”，“当模态第一次出现时禁用‘下一步’按钮”，以及“直到所有的字段都有有效的条目时才允许提交”这样的测试，那么就很清楚你的代码*应该*做什么了。除了给出更多的解释，大量的测试会减轻你的评论者的压力。它们不再是产品和你的代码之间唯一的东西，有一堆新的测试程序性地从你的特性中去掉了猜测。这种责任的分散会让你的公关压力更小，因此人们更有可能去接手。

# 准确解释如何测试和 QA 它

如果有特殊的方法来设置环境，或者某些输入需要输入，**告诉人们**！基本上，如果在你工作的时候，你必须采取一些步骤来设置事情，你必须为你的评审和 QA 团队写下来。类似于:

*“为了测试新的验证，启动开发环境，并填写表格的最后一部分。然后，尝试添加一个错误的电话号码、电子邮件或姓名。“提交”按钮应该保持灰色，每个错误的输入都应该有一个红色的圆圈。具体来说就是添加数字和字符比如！、$、^添加到“名称”字段。那些现在应该失败了。”*

# 验收标准是必须的

如果你的团队默认在你的票上没有“接受标准”，我强烈建议把它加进去。这将为你的评审者提供具体的例子，告诉他们在运行你的代码时应该注意什么。理想情况下，这些情况也将被纳入测试。此外，如果你在前端做任何事情，添加之前和之后的截图会有所帮助。尤其是如果用户可以看到几种不同的结果。

# 假设没人知道你在做什么

奇怪的提示，但和我在一起。无论何时你买票，总会有一些发现。但是，没有理由假设你未来的评论家也有这些启示。有时，人们被要求回顾他们不太熟悉的项目的工作。如果你有一些顿悟，让你完成了工作，留下一个 sparknotes 版本作为行注释。

我知道在我做的一个项目中，有两个索引不断出现。但是，事实证明，只有第一个是一个索引，第二个实际上是一个被调用了几个更深的函数的操作码。我添加了一些命名变量来消除索引假设，但是我还添加了一个 PR 注释，提到了 op 代码使用的确切函数，以及该函数返回的内容。

# 倾听批评

这可能是最重要的一条，因为不管你的东西有多好，如果你是个混蛋，没有人会愿意去评论它。有不同意见是可以的，但是在获得反馈时要保持专业和礼貌。你永远不会想成为那种不能接受建设性批评的人。当有人指出一个问题或疑问时，假设他们是对的，并从那里着手。不要立即拒绝或忽视他们。如果你是对的，用例子、参考资料和业务需求来证明。如果结果证明你错了，那也没关系！评审的目的是让团队拿出最好的代码，而不仅仅是使用*你的*代码。

记住，任何让你学到东西的复习都是好的复习。

大家编码快乐，

迈克
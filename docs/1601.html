<html>
<head>
<title>How to Create Time Sliders in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中创建时间滑块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-time-sliders-in-react-native-9e6abc27563d?source=collection_archive---------2-----------------------#2021-04-06">https://javascript.plainenglish.io/how-to-create-time-sliders-in-react-native-9e6abc27563d?source=collection_archive---------2-----------------------#2021-04-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8056c6bea9761a502485a9743e067cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TJfUL44jY4LRG6-9441liQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">time-sliders</figcaption></figure><p id="8b2c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从我最近的代码阅读中，我学会了如何创建自定义的时间滑块。所有的荣誉都归于我的同事。我只是分享我的学习！让我们先看看我们想做什么。我们希望将滑块转换为时间滑块，用户可以选择单个时间或时间范围。</p><p id="8b96" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">单时间滑块:</strong></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/fb9e0aa71e049a30859950e42713a669.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*IUdh1WczT9iHnxi3ubh4rA.gif"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">single time slider</figcaption></figure><p id="1108" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，让我们为此设置组件。有了这个代码片段，我们就可以完成滑块的初始化了。对于我们的滑块组件，我使用的是<a class="ae lc" href="https://github.com/ptomasroos/react-native-multi-slider" rel="noopener ugc nofollow" target="_blank">react-native-multi-slide</a>r包。有了这个包，你得到了一个单一的滑块和范围滑块，所以它是相当好的。</p><pre class="ky kz la lb gt ld le lf lg aw lh bi"><span id="7d4f" class="li lj in le b gy lk ll l lm ln">const TIME = {  min: 0,  max: 24 }<br/>const SliderPad = 12;<br/><br/>// our time slider component<br/>const SingleSlider = ({}) =&gt; {<br/>  const { min, max } = TIME;<br/>  const [width, setWidth] = useState(280);<br/>  const [selected, setSelected] = useState(null);<br/><br/>  if (!selected) {<br/>    setSelected([min]); // we are only selected min, since it is single slider<br/>  }<br/><br/>  // Callbacks<br/>  const onLayout = (event) =&gt; {<br/>    setWidth(event.nativeEvent.layout.width - SliderPad * 2);<br/>  };<br/>  const onValuesChangeFinish = (values) =&gt; {<br/>    setSelected(values);<br/>  };<br/><br/>  return (<br/>    &lt;View onLayout={onLayout} style={styles.wrapper}&gt;<br/>        &lt;MultiSlider<br/>          min={min}<br/>          max={max}<br/>          allowOverlap<br/>          values={selected}<br/>          sliderLength={width}<br/>          onValuesChangeFinish={onValuesChangeFinish}<br/>          enableLabel={true}<br/>          trackStyle={{<br/>            height: 10,<br/>            borderRadius: 8,<br/>          }}<br/>          markerOffsetY={3}<br/>          selectedStyle={{<br/>            backgroundColor: "#895CDF",<br/>          }}<br/>          unselectedStyle={{<br/>            backgroundColor: "#EEF3F7",<br/>          }}<br/>        /&gt;<br/>    &lt;/View&gt;<br/>  );<br/>}</span></pre><p id="5cbe" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">范围时间滑块:</strong></p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi kx"><img src="../Images/1b48131edfbbe3f188063601efbf8b80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*wXXQCh5oXrZjWjYb31my9Q.gif"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">range slider</figcaption></figure><p id="8ca9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">范围滑块也是一样的，只是我们将值设置为最大和最小。</p><pre class="ky kz la lb gt ld le lf lg aw lh bi"><span id="f298" class="li lj in le b gy lk ll l lm ln">if (!selected) {<br/>    setSelected([min, max]); <br/>  }</span></pre><p id="cb23" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这样我们的初始设置就完成了。我们得到滑块，但滑块的工作方式和普通滑块一样，数值从0到24。现在我们该把它转换成时间滑块了。</p><p id="253d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了让我们拥有自定义标签，我们需要在我们的slider中传递道具<strong class="kb io"><em class="lo">custom label</em></strong><em class="lo"/>。我们将制作一个自定义标签组件，它将进行时间转换，并返回时间标签。</p><p id="68e1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe lp lq lr le b">customLabel={SliderCustomLabel(textTransformerTimes)}</code></p><p id="7626" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们看看最有趣的部分。</p><pre class="ky kz la lb gt ld le lf lg aw lh bi"><span id="f550" class="li lj in le b gy lk ll l lm ln">const width = 50;<br/><br/><em class="lo">function</em> LabelBase(props)<br/>{<br/>    const { position, value } = props;<br/><br/>    return (<br/>        &lt;View<br/>            style={[<br/>                styles.sliderLabel, // this one is position absolute<br/>                {<br/>                    left: position - width / 2,<br/>                },<br/>            ]}&gt;<br/>            &lt;Text style={styles.sliderLabelText}&gt;{value}&lt;/Text&gt;<br/>        &lt;/View&gt;<br/>    );<br/>}<br/><br/>export default <em class="lo">function</em> SliderCustomLabel(textTransformer: (value: number) =&gt; string)<br/>{<br/>    return <em class="lo">function</em> (props)<br/>    {<br/>       // these props are coming from the package<br/>        const {<br/>            oneMarkerValue,<br/>            twoMarkerValue,<br/>            oneMarkerLeftPosition,<br/>            twoMarkerLeftPosition,<br/>        } = props;<br/><br/>        return (<br/>            &lt;View&gt;<br/>                &lt;LabelBase<br/>                    position={oneMarkerLeftPosition}<br/>                    value={textTransformer(oneMarkerValue)}<br/>                /&gt;<br/>                {twoMarkerValue ? <br/>                    &lt;LabelBase<br/>                        position={twoMarkerLeftPosition}<br/>                        value={textTransformer(twoMarkerValue)}<br/>                    /&gt; : null<br/>                }<br/>            &lt;/View&gt;<br/>        );<br/>    };<br/>}<br/><br/>const styles = StyleSheet.create({<br/>    sliderLabel: {<br/>        position: 'absolute',<br/>        justifyContent: 'center',<br/>        top: 30,<br/>        width: width,<br/>        height: width,<br/>    },<br/>    sliderLabelText: {<br/>        textAlign: 'center',<br/>        lineHeight: width,<br/>        flex: 1,<br/>    },<br/>});</span></pre><p id="ba35" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">对这里发生的事情做一点解释。</p><ul class=""><li id="5ef8" class="ls lt in kb b kc kd kg kh kk lu ko lv ks lw kw lx ly lz ma bi translated"><strong class="kb io"> SliderCustomLabel </strong>是一个采用<strong class="kb io"> textTransformer </strong>函数并返回自定义标签组件的函数。</li><li id="eb27" class="ls lt in kb b kc mb kg mc kk md ko me ks mf kw lx ly lz ma bi translated"><strong class="kb io"> TextTransformer </strong>是一个将滑块值从0到24转换成时间值的函数。</li><li id="a08f" class="ls lt in kb b kc mb kg mc kk md ko me ks mf kw lx ly lz ma bi translated"><strong class="kb io"> LabelBase </strong>是我们从中返回文本的组件。它还处理我们文本的位置。</li></ul><pre class="ky kz la lb gt ld le lf lg aw lh bi"><span id="a9ee" class="li lj in le b gy lk ll l lm ln">const textTransformerTimes = (value) =&gt; {<br/>  return value === 0 ? "12am" : (value &lt; 13 ? value : value - 12) +    (value &lt; 12 ? "am" : "pm");<br/>};</span></pre><p id="dd05" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你想看它的实际效果，可以看看T21的小吃。</p><p id="2a76" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">感谢您的阅读。我希望您发现这很有用！</p><p id="5c3c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="lo">更多内容请看</em><a class="ae lc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="lo">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
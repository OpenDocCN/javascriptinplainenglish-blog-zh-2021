<html>
<head>
<title>How JavaScript works</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript如何工作</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-javascript-works-210c467a5cda?source=collection_archive---------5-----------------------#2021-03-22">https://javascript.plainenglish.io/how-javascript-works-210c467a5cda?source=collection_archive---------5-----------------------#2021-03-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="f482" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">了解我，了解JavaScript——哈哈！</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/20bceed6d5608be363e55488850489ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oa1fNM46T13Dqz0c"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@chne_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tachina Lee</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7e8e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们都听过爱因斯坦的老习语:“如果你不能简单地解释它，你就不能很好地理解它。”。我已经使用JavaScript几年了，当被问及什么是JavaScript以及它是如何工作的时候？我的回答会是……嗯……混乱，坦白说是垃圾。</p><p id="76b2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">嗯，这是一种电脑编程语言，嗯，它允许你建立网站和应用程序。嗯，它在浏览器中工作，单线程，嗯，同步和异步，嗯，更多的行话…就这样了！</p><p id="4643" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你和我在同一条船上，这篇文章是给你的。或者至少我希望如此。因为我发现，完美的答案是，<strong class="kv io">一个JavaScript程序和我们一样工作</strong>。</p><p id="1750" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想知道更多，试试我，继续读下去。我希望这篇文章能给你提供一个有用的比喻来更好地理解JavaScript是如何工作的。</p><p id="4893" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">顺便说一下——这篇文章充满了ABBA歌曲的参考，我只能提前道歉。</p><h1 id="0cbd" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">最要紧的东西</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/9d49189fe93bdf9f6129722229a322f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*spIONMCOIasebrjv"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@brucemars?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">bruce mars</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="27a8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当你早上醒来时，你如何决定该做什么？你有一个现成的清单吗？或者你对周围的世界有什么反应？答案可能是两者兼而有之。</p><p id="22f6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">早上，我们的首要任务是对醒来的反应。清洁牙齿、洗澡和吃早餐都是我们在醒来时就已经设定好要做的事情。</p><p id="c27b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这样，我们所做的大部分事情就是对‘T2’事件做出反应。JavaScript程序也是如此。当x发生时，我们做y。事件触发动作。</p><p id="dd23" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所有的JavaScript代码都是由一个事件触发的，尽管这并不总是显式的。当任务没有分配给事件时，它们会在JavaScript文件首次加载时运行。这相当于我们早上醒来，做好准备一天所需的任务。</p><p id="0899" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对事件的反应通常被称为<strong class="kv io">异步</strong>编程或非阻塞。毕竟，知道我们明天早上会刷牙并不妨碍我们现在做点什么。</p><p id="7b5c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么，当事件发生时，JavaScript是如何完成这些任务的呢？</p><h1 id="c8a6" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">我知道，我知道，我知道，我知道，我知道</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mi"><img src="../Images/4caffcceaf1ce8277ae10837fdf7816c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6N9MaWtp3Nrssc3g"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@edenconstantin0?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Eden Constantino</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a32f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">有传言说，男人不能一心多用。尽管这可能是令人愤慨和诽谤性的，但像男人一样，JavaScript程序一次只能做一件事。这样一来，人们就可以说是一心一意……而JavaScript据说是<strong class="kv io">单线程</strong>。</p><p id="6062" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">与我们大多数人不同的是，JavaScript程序在焦点上是坚定不移的。在这项任务完成之前，它不会进入新的领域。在这种方式下，JavaScript被称为<strong class="kv io">同步</strong>和阻塞。</p><p id="b87f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用之前的唤醒任务，我们不能在吃早餐的同时清洁牙齿。所以一项任务需要在另一项之前完成。</p><p id="5531" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在JavaScript程序中，任务运行的顺序由<strong class="kv io">任务队列</strong>管理。这个队列就像你的待办事项列表。像任何有序队列一样，第一个进来的任务是第一个出去的任务。因此，第一个任务将运行，然后下一个，以此类推。</p><p id="c244" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">每个单独任务的执行由<strong class="kv io">调用栈</strong>管理。就像一堆文件一样，调用堆栈是先进后出的。为什么使用堆栈而不是队列？因为任务通常包含需要完成才能完成第一个任务的子任务。</p><p id="1f71" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要清洁牙齿，你需要把牙膏放在牙刷上，刷牙，然后吐出牙膏。只有实现了这些子任务，你才能完成刷牙这个第一任务。</p><p id="6483" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦调用堆栈上的所有任务都已完成并且堆栈为空，任务队列就能够传递到下一个任务。</p><p id="c947" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当你一次只能做一件事时，任务的大小和时间决定了你能做什么。JavaScript程序也是如此。</p><p id="2896" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">(注意:从技术上来说，一个JavaScript程序可以使用Web Workers同时处理多个任务。这就相当于用一个助手来帮你。)</p><h1 id="38d3" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">继续前进</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mj"><img src="../Images/4fc334a328579907a9a289ec80bb3be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4BPrl2x2Q_Dt0NVa"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@oceanng?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ocean Ng</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d8e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">随着分针滴答作响，我们完成了更多的工作。现在想象一下，分针绕着时钟越来越快，直到它变得模糊不清。您可以想象管理JavaScript的超级快时钟，称为<strong class="kv io">事件循环</strong>。</p><p id="b82e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个时钟很特别，不仅仅是因为它超级快，还因为每当任务执行时它都会暂停。在大多数情况下，我们不会注意到任何冻结行为，因为JavaScript代码运行得非常快。如果我们这样做了，这是一个好迹象，表明我们有一个性能问题要解决。如果你的电脑完全死机，这意味着一个任务永远在运行，陷入了一个永无止境的循环。</p><p id="34c6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一旦任务完成，这个特殊的时钟将重新启动，并评估任何新发生的事件。如果这些事件有关联的任务，它们将被添加到您的任务队列中。如此循环往复。因此得名事件循环。</p><p id="4e71" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当然，拥有一个单一的任务队列是有问题的。一些事件触发比其他事件更紧急的任务。幸运的是JavaScript可以做到这一点。</p><h1 id="74ed" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">请你…优先考虑</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mk"><img src="../Images/8e5b01e9364387a30af6173f1df35d5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7Hx7RTcSon_g2_hN"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@andrewwwpetrov?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andrew Petrov</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4da4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的优先事项往往与我们对自己和他人的承诺联系在一起。通常情况下，它们都与截止日期相关联！当我们想强调我们对某件事的承诺是优先时，我们承诺。</p><p id="c9ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">承诺也存在于JavaScript中，反映了我们所做的承诺。我承诺做y，如果y发生了做x，如果y没有实现做z。</p><p id="c87d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当您在JavaScript程序中做出承诺时，该承诺的实现或失败会增加一个优先任务。这个优先级任务被称为<strong class="kv io">微任务</strong>，并且有自己的任务队列。该队列使任务能够在标准任务队列中的下一个任务之前进行队列跳转和运行。就像我们的优先任务一样，只要我们有优先任务要做，我们就不能转移到其他任务上。每当现有的调用堆栈为空时，微任务就会运行。</p><p id="dede" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你还在这里，你可能会问“这一切到底是怎么可能的？”就像我们一样，大脑让这一切成为可能。</p><h1 id="22e2" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">了解我，了解你</h1><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mh"><img src="../Images/9b6adeca50e6700647cc60cc2dccdcc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5gXcoa3ulfmym6-E"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@averey?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robina Weermeijer</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d134" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们是谁，我们的记忆，我们的逻辑和我们的信仰都存在于我们的大脑中。我们的大脑通过解释来自神经元的电子/化学脉冲来理解我们周围的世界，神经元从我们的感官接收信息。</p><p id="328a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在JavaScript程序中，JavaScript实现了与这些神经元相同的功能。来回传递信息。JavaScript只是JavaScript大脑使用的一种语言。</p><p id="46e7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">“T2”浏览器“T3”(如chrome、firefox)或包含“T6”JavaScript引擎“T7”(node . js)的“T4”服务器“T5”就是大脑。浏览器中的JavaScript引擎通过一个称为编译的过程来解释JavaScript。<strong class="kv io">编译</strong>允许浏览器/服务器理解JavaScript并采取行动。该动作可以是将数据和动作分配给存储器或者执行任务。</p><p id="2f30" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">就像我们有与外界互动的模式，比如口语。浏览器和服务器能够使用API与外部世界进行交互。API只是一种共享语言，各方可以通过它进行交互。因此，浏览器能够与你的计算机或世界另一端的数据库进行交互，以建立网站。</p><p id="6e78" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">浏览器(或服务器)使JavaScript程序成为可能。调用栈、todo队列、事件循环、变量和回调都由这个JavaScript大脑管理。javascript程序员只是简单地为大脑构建消息和模式来解释和采取行动。</p><h1 id="967f" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结果</h1><p id="0212" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">所以总结一下:</p><ul class=""><li id="240d" class="mq mr in kv b kw kx kz la lc ms lg mt lk mu lo mv mw mx my bi translated">像我们一样，大多数任务来自对事件的反应。在JavaScript中，对事件的反应是异步和非阻塞的。</li><li id="0f8c" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">和我们一样，一个JavaScript程序使用“待办事项”列表来管理任务，一个是标准的“待办事项”列表(任务队列)，一个是优先级任务队列(微任务)。当某些事件发生时，任务被添加到这些队列中。</li><li id="1c82" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">像我们(或男人)一样，JavaScript程序一次专注于一件事(单线程)，尽管它可以使用助手(web workers)来执行并发任务。</li><li id="809b" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">不像我们，JavaScript程序是坚定不移的，它不会放弃一项任务直到完成。通过这种方式，JavaScript是同步和阻塞的。当调用堆栈为空时，任务完成。</li><li id="4bf5" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">像我们一样，时钟控制着一个JavaScript程序可以完成多少任务。JavaScript时钟，即事件循环，不同于我们的时钟，因为它在每次执行任务时都会冻结。任务完成后，事件循环将检查发生了什么事件，并相应地将任务添加到任务队列中。</li><li id="40fd" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">像我们一样，JavaScript程序使用一种语言向大脑传递数据，从大脑传递数据，并在大脑内部传递数据。虽然我们有神经元，但是JavaScript程序使用JavaScript。</li><li id="dadd" class="mq mr in kv b kw mz kz na lc nb lg nc lk nd lo mv mw mx my bi translated">像我们一样，大脑使这一切成为可能。它解释信息，管理内存，并使用多种共享语言中的一种与我们的环境进行交流。在JavaScript程序中，这个大脑是一个包含JavaScript引擎的浏览器(或服务器)。</li></ul><h1 id="7a57" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">继续继续</h1><p id="793e" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">为了巩固你的知识，菲利普·罗伯特(<a class="ae ks" href="https://www.youtube.com/watch?v=8aGhZQkoFbQ" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=8aGhZQkoFbQ</a>)和杰克·阿奇博尔德(<a class="ae ks" href="https://www.youtube.com/watch?v=cCOL7MC4Pl0" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=cCOL7MC4Pl0</a>)的以下视频将是无价的。因此，与其在你的任务队列中增加一项任务，不如做出承诺，然后尽快抽出时间去关注它们。</p><p id="309f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你惊呼“SOS ”,因为JavaScript的工作方式与我们完全不同。你完全正确。</p><p id="17a8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如我们的工作方式更加复杂一样，JavaScript也是如此。尽管如此，我希望这个简化的模型能够帮助您记住并解释JavaScript是如何工作的。</p><p id="755a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">“这么久！”</p><h2 id="6453" class="ne lq in bd lr nf ng dn lv nh ni dp lz lc nj nk mb lg nl nm md lk nn no mf np bi translated"><strong class="ak">感谢</strong></h2><p id="f9e6" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">写这篇文章是为了帮助我更好地理解JavaScript是如何工作的，在我个人的探索中，我发现了许多非常有价值的资料。所以，我要感谢菲利普·罗伯茨的YouTube视频，杰克·阿奇博尔德的YouTube解释，凯尔·辛普森的《你不知道的JavaScript》系列，迪米特里·格拉兹科夫的娱乐博客和无数其他来源。</p></div></div>    
</body>
</html>
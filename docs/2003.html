<html>
<head>
<title>Functional JavaScript: Writing a Simple Command-line Game (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">函数式JavaScript:编写简单的命令行游戏(第2部分)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/functional-javascript-writing-a-simple-command-line-game-part-2-79a6a51a4b24?source=collection_archive---------13-----------------------#2021-04-26">https://javascript.plainenglish.io/functional-javascript-writing-a-simple-command-line-game-part-2-79a6a51a4b24?source=collection_archive---------13-----------------------#2021-04-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/dc21cbeb1ee5d95b692f3608fae9b908.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*G3m0a4U1jGOCy5-0"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="kb kc kd ke gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ka"><img src="../Images/e174ababf06b4a4a3bd54b2715e13183.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RfbS2raMtoI7L4xC9HJ7qg.png"/></div></div></figure><p id="1a5d" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">在第一节中，我们定义了一个“人”对象；我们在这个物体中嵌入了武器的概念，这有点欺骗。我们也回避了武器是否是物品的问题。在这一部分，我们将使用对象合成来派生物品和武器。</p><p id="da28" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">首先，我们用经典的面向对象语言定义一个项目对象；这将是基类。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="f297" class="li lj in le b gy lk ll l lm ln">const item = function( n ) {<br/>    const _name = n;<br/>    function name() {<br/>        return _name;<br/>    }<br/>    return { name, isItem : true };<br/>}</span></pre><p id="9714" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">这个小对象保存了事物的名称，还将isItem标志设置为true。然后我们可以用武器组合物品:</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="7a73" class="li lj in le b gy lk ll l lm ln">const weapon = function( n, s ) {<br/>    const _item = item( n );<br/>    const _strength = s;<br/><br/>    function strength() {<br/>        return _strength;<br/>    }<br/>    return { ..._item, strength, isWeapon : true }<br/>}</span></pre><p id="0b3c" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">慢慢地走过去，</p><p id="5075" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">在第一行，我们有一个item对象的实例。初始化“base”对象是通过将名称传递给其构造函数来执行的。然后，我们为武器声明一个常量变量“强度”和一个返回强度的辅助函数。该函数的倒数第二行用新方法组成该物品，并设置一个标志来表明这是一件武器。我们可以这样使用它。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="a2ce" class="li lj in le b gy lk ll l lm ln">const <strong class="le io"><em class="lo">myItem </em></strong>= item( "MyItem");<br/><strong class="le io"><em class="lo">console</em></strong>.log( "Item " + <strong class="le io"><em class="lo">myItem</em></strong>.name() )</span></pre><p id="2f9d" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">和</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="ba33" class="li lj in le b gy lk ll l lm ln">const <strong class="le io"><em class="lo">myWeapon </em></strong>= weapon( "MyWeapon", 100 );<br/><br/>if( <strong class="le io"><em class="lo">myWeapon</em></strong>.isWeapon ) {<br/>    <strong class="le io"><em class="lo">console</em></strong>.log("Weapon " + <strong class="le io"><em class="lo">myWeapon</em></strong>.name())<br/>}</span></pre><p id="d4d9" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我们可以通过添加额外的物品来扩展这一点，例如可以容纳物品的袋子。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="12d1" class="li lj in le b gy lk ll l lm ln">const bag = function( n, capacity ) {<br/>    const _item = item( n );<br/>    const _size = capacity;<br/>    const _items = {};<br/>    function stash( item ) {<br/>        if ( size() &gt;=  _size ) {<br/>            <strong class="le io"><em class="lo">console</em></strong>.log( "Your bag is full, you have to drop an item first");<br/>        }<br/>        if ( item.isItem ) {<br/>            _items[item.name()] = item;<br/>            <strong class="le io"><em class="lo">console</em></strong>.log( "you stashed the " + item.name() + " in " + _item.name())<br/>        } else {<br/>            <strong class="le io"><em class="lo">console</em></strong>.error( "A bag can only be filled with items not " + typeof item + "'s");<br/>        }<br/><br/>    }<br/>    function drop( itemName ) {<br/>        let item = _items[itemName]<br/>        if (item == null ) {<br/>            <strong class="le io"><em class="lo">console</em></strong>.error( "You can't drop an item you don't have!")<br/>        }<br/>        delete _items[itemName];<br/>        return item;<br/>    }<br/>    function items( ) {<br/>        return <strong class="le io"><em class="lo">Object</em></strong>.keys( _items );<br/>    }<br/>    function size() {<br/>        return <strong class="le io"><em class="lo">Object</em></strong>.keys( _items ).length<br/>    }<br/>    return { ..._item, stash, drop, items, size, isBag : true }<br/>}</span></pre><p id="d94c" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">好吧，这里还有很多事情要做。包也是一种物品。我们可以把一个袋子放在一个袋子里(我可以看到地平线上的“袋子”。)我们也可以把其他物品藏在包里，包括我们的武器。这个包的容量是固定的，所以我们只能装一定数量的东西。我们已经定义了删除和列出我们包中所有物品的方法。</p><p id="bd54" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">用这个怎么样？假设我们还有“我的武器”和“我的物品”我们可以创建一个包的实例，并将它们放入其中。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="bcc7" class="li lj in le b gy lk ll l lm ln">const <strong class="le io"><em class="lo">myBag </em></strong>= bag( "MyBag", 5);<br/><strong class="le io"><em class="lo">myBag</em></strong>.stash( <strong class="le io"><em class="lo">myItem </em></strong>);<br/><strong class="le io"><em class="lo">myBag</em></strong>.stash( <strong class="le io"><em class="lo">myWeapon </em></strong>);<br/><br/><br/><strong class="le io"><em class="lo">myBag</em></strong>.drop( "something")<br/><strong class="le io"><em class="lo">console</em></strong>.log( "Bag has " + <strong class="le io"><em class="lo">myBag</em></strong>.size() + " items")<br/><strong class="le io"><em class="lo">myBag</em></strong>.drop( "MyItem" );<br/><strong class="le io"><em class="lo">console</em></strong>.log( "Bag has " + <strong class="le io"><em class="lo">myBag</em></strong>.size() + " items")<br/><strong class="le io"><em class="lo">console</em></strong>.log( <strong class="le io"><em class="lo">myBag</em></strong>.items() )</span></pre><p id="628c" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我们可以列出包里的物品。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="7241" class="li lj in le b gy lk ll l lm ln"><strong class="le io"><em class="lo">console</em></strong>.log( <strong class="le io"><em class="lo">myBag</em></strong>.items() )</span></pre><p id="547a" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我们可以尝试添加一个不是项目的项目。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="5d73" class="li lj in le b gy lk ll l lm ln"><strong class="le io"><em class="lo">myBag</em></strong>.stash( “hello”);<br/>// Prints : A bag can only be filled with items not string’s</span></pre><p id="1c74" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我们也可以从包里丢一件东西。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="0915" class="li lj in le b gy lk ll l lm ln"><strong class="le io"><em class="lo">myBag</em></strong>.drop( “MyItem” );</span></pre><p id="7651" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">我可以查看我包里有多少东西。</p><pre class="kb kc kd ke gt ld le lf lg aw lh bi"><span id="be9e" class="li lj in le b gy lk ll l lm ln"><strong class="le io"><em class="lo">console</em></strong>.log( “Bag has “ + <strong class="le io"><em class="lo">myBag</em></strong>.size() + “ items”)</span></pre><p id="bf49" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated">下一次，我们将修改我们的人携带一个单一的项目，一个袋子，拖着所有的宝藏，他们可能会发现。我们还需要一个功能，只列出我们包里的武器，你能添加吗？</p><div class="lp lq gp gr lr ls"><a rel="noopener  ugc nofollow" target="_blank" href="/functional-javascript-writing-a-simple-command-line-game-335ab9fcc005"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">函数式JavaScript:编写简单的命令行游戏(第1部分)</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">使用JavaScript和功能对象模型，我们为Node.js创建了一个简单命令行游戏的第一部分。</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mb l"><div class="mc l md me mf mb mg jt ls"/></div></div></a></div><div class="lp lq gp gr lr ls"><a rel="noopener  ugc nofollow" target="_blank" href="/functional-javascript-classes-without-the-class-keyword-6e2de50a3698"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">函数式JavaScript:没有“class”关键字的类</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">了解如何在不使用class关键字的情况下使用函数式JavaScript来定义类。根据…中使用的样式</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mb l"><div class="mh l md me mf mb mg jt ls"/></div></div></a></div><p id="5b31" class="pw-post-body-paragraph kf kg in kh b ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ig bi translated"><em class="lo">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lo">plain English . io</em></a></p></div></div>    
</body>
</html>
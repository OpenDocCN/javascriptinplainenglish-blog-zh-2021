<html>
<head>
<title>Add Validations to React Hook Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">添加验证以反应挂钩形式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-validations-to-react-hook-form-647da6bcc650?source=collection_archive---------15-----------------------#2021-07-14">https://javascript.plainenglish.io/adding-validations-to-react-hook-form-647da6bcc650?source=collection_archive---------15-----------------------#2021-07-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="dd8b" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何添加验证以反应钩子形式</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/92e81a1ea582f02260ff261df02b3909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B8AFCsMmL3S_lVJ_"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@estherrj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Esther Jiao</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="be1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">大家好，最近我经常使用React Hook Form来管理我的表单状态。虽然它非常有用，但我听到的一个问题是— <em class="ls">“我如何在那里验证东西？”</em></p><p id="cb12" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇博文中，我将通过使用Yup向您展示如何向使用React Hook Form创建的表单添加验证。</p><h1 id="4972" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">验证我们的表单</h1><p id="b44b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">这里我们有一个非常简单的表单，其中一个不受控制的输入组件被一个控制器包装起来，并通过名称prop分配给<code class="fe mq mr ms mt b">username</code>值。由于defaultValues被传递给了<code class="fe mq mr ms mt b">useForm</code>钩子，这个表单应该显示<code class="fe mq mr ms mt b">danieljcafonso</code>作为输入的预填充值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="792a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要安装<code class="fe mq mr ms mt b">@hookforms/resolvers</code>来集成外部验证库，比如yup、zod、joi、superstruct、vest等等。</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="bade" class="na lu iq mt b gy nb nc l nd ne">npm install @hookforms/resolvers</span></pre><p id="f506" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们安装我们的验证库，在这种情况下，我将使用Yup。</p><pre class="kg kh ki kj gt mw mt mx my aw mz bi"><span id="d216" class="na lu iq mt b gy nb nc l nd ne">npm install yup</span></pre><p id="852b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们已经安装了Yup，我们可以使用它来创建我们的模式。在这个场景中，我们将创建一个对象，其中包含一个作为必需字符串的用户名。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="715c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们有了模式之后，我们需要将它传递给React Hook Form <code class="fe mq mr ms mt b">useForm</code> hook。为此，我们将它包装成yupResolver函数作为解析器进行传递。此外，我们可以定义我们的验证模式。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="f1e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是这些变化的最终结果。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="2102" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">验证字段数组</h1><p id="ae4b" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">当处理可能有多个值的字段时，字段数组非常有用。虽然这非常有用，但我过去一直在努力验证这一点。</p><p id="1831" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们从向defaultValues添加一个用户数组开始</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="529a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在我们的组件中，让我们使用<code class="fe mq mr ms mt b">useFieldArray</code>来提取表单当前值的用户数组的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="74e5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，让我们使用这些字段向DOM添加一个新的输入来表示值。确保该名称包含相关用户的位置，以便正确绑定这些值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="c94b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，更改我们的模式以添加用户字段，并将其表示为一个对象数组，其中每个对象都有一个firstName和lastName必需的字符串。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="ab43" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，一切都应该正常工作，这里是我们的代码的完整版本。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="df96" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">包扎</h1><p id="1ba7" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">如你所见，向React Hook Form添加验证非常简单，在我看来，大部分挑战来自于处理你选择使用的验证库。这里有一个到codesandbox 的<a class="ae kv" href="https://codesandbox.io/s/summer-butterfly-yhn6r" rel="noopener ugc nofollow" target="_blank">链接，你可以在这里试用这段代码。</a></p><p id="aa61" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇博文对你有用。</p><p id="fe2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">敬请关注，下次再见！</p></div><div class="ab cl nf ng hu nh" role="separator"><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk nl"/><span class="ni bw bk nj nk"/></div><div class="ij ik il im in"><p id="9e78" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">最初发表于</em><a class="ae kv" href="https://www.danieljcafonso.com/add_validations_to_rhf" rel="noopener ugc nofollow" target="_blank"><em class="ls">【https://www.danieljcafonso.com】</em></a><em class="ls">。</em></p><p id="813c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to create a Rotation Animation in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中创建旋转动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-a-rotation-animation-in-react-native-45c3f2973d62?source=collection_archive---------1-----------------------#2021-03-17">https://javascript.plainenglish.io/creating-a-rotation-animation-in-react-native-45c3f2973d62?source=collection_archive---------1-----------------------#2021-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="694c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用挂钩</h2></div><blockquote class="kf kg kh"><p id="0e0e" class="ki kj kk kl b km kn jr ko kp kq ju kr ks kt ku kv kw kx ky kz la lb lc ld le ij bi translated">这篇文章最初发表在我的博客@ <a class="ae lf" href="https://isaks.io/blog/2021-03-17/creating-a-rotation-animation-in-react-native/" rel="noopener ugc nofollow" target="_blank"> isaks.io </a></p></blockquote><p id="9553" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">在本教程中，我将向您展示如何创建一个按钮，当它被按下时旋转720度。我们将使用<a class="ae lf" href="https://reactnative.dev/docs/animated" rel="noopener ugc nofollow" target="_blank"> React本地动画</a>动画系统来创建旋转动画。</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lj"><img src="../Images/106bee7ae4fb75ee3685e6536f6daad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xqwcBVSwQQCMvCdQ"/></div></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@filmprint?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kinson Leung</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="0904" class="lz ma iq bd mb mc md dn me mf mg dp mh lg mi mj mk lh ml mm mn li mo mp mq mr bi translated">创建组件</h2><p id="7a13" class="pw-post-body-paragraph ki kj iq kl b km ms jr ko kp mt ju kr lg mu ku kv lh mv ky kz li mw lc ld le ij bi translated">首先，我们创建功能组件<code class="fe mx my mz na b">ButtonWithSpin</code>，它有一个<code class="fe mx my mz na b">TouchableOpacity</code>组件，里面有一些文本。</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="e337" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">注意，文本是使用<code class="fe mx my mz na b">Animated.Text</code>组件创建的。这是因为将要旋转的文本必须是<em class="kk">可动画化的</em>。如果您正在旋转其他东西，那么您也可以使用这些组件中的任何一个:</p><ul class=""><li id="1120" class="nd ne iq kl b km kn kp kq lg nf lh ng li nh le ni nj nk nl bi translated"><strong class="kl ir">动画。图片</strong></li><li id="4566" class="nd ne iq kl b km nm kp nn lg no lh np li nq le ni nj nk nl bi translated"><strong class="kl ir">动画。滚动视图</strong></li><li id="bd67" class="nd ne iq kl b km nm kp nn lg no lh np li nq le ni nj nk nl bi translated"><strong class="kl ir">动画。查看</strong></li><li id="0a21" class="nd ne iq kl b km nm kp nn lg no lh np li nq le ni nj nk nl bi translated"><strong class="kl ir">动画。正文</strong></li><li id="72f3" class="nd ne iq kl b km nm kp nn lg no lh np li nq le ni nj nk nl bi translated"><strong class="kl ir">动画。平面列表</strong></li><li id="d301" class="nd ne iq kl b km nm kp nn lg no lh np li nq le ni nj nk nl bi translated"><strong class="kl ir">动画。章节列表</strong></li></ul><p id="1eb1" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">我们还使用<code class="fe mx my mz na b">useState</code>钩子来存储我们的<code class="fe mx my mz na b">rotateAnimation</code>值。这是动画库中的一个<em class="kk">动画值</em>。我们使用<code class="fe mx my mz na b">new Animated.Value(0)</code>来初始化该值。</p><h2 id="951b" class="lz ma iq bd mb mc md dn me mf mg dp mh lg mi mj mk lh ml mm mn li mo mp mq mr bi translated">handleAnimation函数</h2><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="4f7f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated"><code class="fe mx my mz na b">Animated.timing()</code>使用<a class="ae lf" href="https://reactnative.dev/docs/easing" rel="noopener ugc nofollow" target="_blank">缓动功能</a>使一个值随时间变化。默认情况下，它使用<code class="fe mx my mz na b">easeInOut</code>曲线，这是我们正在做的完美。我们传递我们的<code class="fe mx my mz na b">rotateAnimation</code>值和一个配置值，其中我们将持续时间设置为800毫秒。动画是通过调用<code class="fe mx my mz na b">start()</code>开始的，我们包含了一个回调函数来重置动画。</p><h2 id="07af" class="lz ma iq bd mb mc md dn me mf mg dp mh lg mi mj mk lh ml mm mn li mo mp mq mr bi translated">插入</h2><p id="e3fc" class="pw-post-body-paragraph ki kj iq kl b km ms jr ko kp mt ju kr lg mu ku kv lh mv ky kz li mw lc ld le ij bi translated"><code class="fe mx my mz na b">interpolate()</code>方法将输入范围映射到输出范围。将0–1范围转换为0–100范围的基本映射是:</p><pre class="lk ll lm ln gt nr na ns nt aw nu bi"><span id="f988" class="lz ma iq na b gy nv nw l nx ny">value.interpolate({<br/>  inputRange: [0, 1],<br/>  outputRange: [0, 100]<br/>});</span></pre><p id="8c4d" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">您也可以使用<code class="fe mx my mz na b">interpolate()</code>方法来映射字符串。由于我们希望将文本从0度旋转到720度，我们的代码将如下所示:</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="6e6f" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">我们还创建了<code class="fe mx my mz na b">animatedStyle</code>对象，它包含了一个数组<code class="fe mx my mz na b">transform</code>和我们刚刚创建的旋转值<code class="fe mx my mz na b">interpolateRotating</code>。</p><h2 id="6715" class="lz ma iq bd mb mc md dn me mf mg dp mh lg mi mj mk lh ml mm mn li mo mp mq mr bi translated">把所有东西放在一起</h2><p id="dac1" class="pw-post-body-paragraph ki kj iq kl b km ms jr ko kp mt ju kr lg mu ku kv lh mv ky kz li mw lc ld le ij bi translated">将<code class="fe mx my mz na b">animtedStyle</code>对象添加到<code class="fe mx my mz na b">Animated.Text</code>组件，将<code class="fe mx my mz na b">width</code>添加到<code class="fe mx my mz na b">TouchableOpacity</code>组件，我们就完成了！</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="ec52" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">这是最终产品的样子:</p><figure class="lk ll lm ln gt lo gh gi paragraph-image"><div class="gh gi nz"><img src="../Images/284c151a0042a300771f59261b62cc40.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*4l1ihOBk8tD6-AHodVWNVw.gif"/></div><figcaption class="lv lw gj gh gi lx ly bd b be z dk">Button spinning after click</figcaption></figure><p id="1a6b" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">代码是:</p><figure class="lk ll lm ln gt lo"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="ba66" class="pw-post-body-paragraph ki kj iq kl b km kn jr ko kp kq ju kr lg kt ku kv lh kx ky kz li lb lc ld le ij bi translated">现在我们有了。我希望你已经发现这是有用的。这是我在Medium上的第一篇帖子，因此非常感谢任何反馈！</p></div></div>    
</body>
</html>
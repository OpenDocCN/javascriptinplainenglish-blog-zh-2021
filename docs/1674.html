<html>
<head>
<title>How to Implement SendGrid using Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Node.js实现发送网格</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/sendgrid-implementation-using-node-js-bfe8a62bab7b?source=collection_archive---------4-----------------------#2021-04-10">https://javascript.plainenglish.io/sendgrid-implementation-using-node-js-bfe8a62bab7b?source=collection_archive---------4-----------------------#2021-04-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/445e54506e7c7b16dc6ef868fba15336.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*1Y8-GGBidYMGIwGdQEC5WA.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Sendgrid v3 send email using node.js</figcaption></figure><p id="a942" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Sendgrid是IT行业最流行的电子邮件服务之一，用于营销和交易电子邮件。您只需通过SendGrid发送欢迎电子邮件、密码重置电子邮件、通信更新等，甚至是新产品功能更新。因此，在今天的帖子中，我将向您展示如何在SendGrid上创建一个免费帐户&amp;将它与您的Node.js代码集成，以自动化这个过程。让我们开始吧。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><ol class=""><li id="194d" class="la lb in jx b jy jz kc kd kg lc kk ld ko le ks lf lg lh li bi translated">前往<a class="ae lj" href="https://sendgrid.com/" rel="noopener ugc nofollow" target="_blank">https://sendgrid.com/</a>注册一个免费账户。</li></ol><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lk"><img src="../Images/0a331fd903e03f93ff5dc38282dca46f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7DJVwO5WWhkvDlKhT7WT9g.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">SendGrid dashboard</figcaption></figure><p id="1c57" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.转到“设置”-&gt;“API密钥”以生成将由节点代码用来发送电子邮件的API密钥(将API密钥存储在安全的地方)。</p><p id="9d63" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.现在转到电子邮件应用编程接口-&gt;动态模板，创建发送电子邮件的模板。然后创建版本。您可以创建多个版本，并选择任何要激活的版本。您可以根据自己的喜好选择发送网格模板或创建自定义模板。</p><p id="ba4c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以根据自己的要求发送静态电子邮件或个性化电子邮件。为了个性化电子邮件，SendGrid使用了手柄。您可以在这里阅读关于车把<a class="ae lj" href="https://sendgrid.com/docs/for-developers/sending-email/using-handlebars/" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lt"><img src="../Images/9a9c87cc1031c0bc1e77dcc37ab0af52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kc-EbhPmZmS3DC5GgZ0-1Q.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">SendGrid dynamic template</figcaption></figure><p id="573a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如上图所示，您可以在{{variableName}}中用变量名通过{{}}传递动态数据。例如:{ {名字}}。</p><p id="6ddc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您可以通过以JSON格式将测试数据放在测试数据选项卡上来测试您的电子邮件。例如:{"firstName": "Shraddha"}。</p><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lu"><img src="../Images/daa476a02d51ab7fbc968352b36d3b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c1PEAh_hGhcF4dIv174DIg.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">testing of SendGrid template</figcaption></figure></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><p id="e238" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们跳到节点。</p><p id="71c4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">1.使用npm安装Axios。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="cd46" class="ma mb in lw b gy mc md l me mf">npm install --save axios</span></pre><p id="00a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">2.在您的节点项目中创建一个电子邮件助手文件。在电子邮件帮助器文件中，粘贴您的发送网格应用编程接口密钥&amp;发送网格应用编程接口的端点。我创建了一个“EmailType”对象来存储多个动态模板id。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="81c1" class="ma mb in lw b gy mc md l me mf">const axios = require('axios')</span><span id="9ea8" class="ma mb in lw b gy mg md l me mf">const sendgridApiKey = 'SG..................................'<br/>const emailSendUrl = 'https://api.sendgrid.com/v3/mail/send'</span><span id="dbf3" class="ma mb in lw b gy mg md l me mf">const EmailType = {<br/> WELCOME_EMAIL: 'd-026a2f461bdd480098be08a2cb949eea',<br/> CHANGE_PASSWORD: 'd-026a2f4hsyw20098be08a2cb949eea',<br/> OTP: 'd-026a2f461bdd480098be08bxhsyeyyy',<br/>}</span></pre><p id="85c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在要发送数据，您可以创建一个函数，将其导出并在另一个文件中使用，以发送电子邮件数据。模板Id、个性化&amp;来自信息是发送到SendGrid的强制数据。您可以根据需要发送附件、密件抄送、抄送、回复等多种字段。下面是包含所有必要数据的电子邮件助手。</p><pre class="ll lm ln lo gt lv lw lx ly aw lz bi"><span id="da41" class="ma mb in lw b gy mc md l me mf">module.exports.sendTemplateEmail = (fromEmail, toEmail, replyTo, fromName, template, substitutions, attachment) =&gt; {<br/>if (!EmailType[template]) {<br/>  return Promise.reject(new Error('Template not defined'))<br/>}<br/>const email = {<br/> from: {<br/>  email: fromEmail,<br/>  name: fromName,<br/> },<br/>template_id: EmailType[template],<br/>personalizations: [{<br/>  to: [{<br/>   email: toEmail,<br/>  }],<br/>  dynamic_template_data: substitutions,<br/> }],<br/>}<br/>if (attachment) {<br/> email.attachments = attachment<br/>}<br/>if (replyTo) {<br/> email.reply_to = {<br/>  email: replyTo,<br/>  name: 'Reply',<br/> }<br/>}</span><span id="24e1" class="ma mb in lw b gy mg md l me mf">return axios({<br/>  method: 'post',<br/>  url: emailSendUrl,<br/>  headers: {<br/>   Authorization: `Bearer ${sendgridApiKey}`,<br/>  },<br/>  data: email,<br/>})</span><span id="1ed3" class="ma mb in lw b gy mg md l me mf">}</span></pre><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi mh"><img src="../Images/bc1c89b3e803bfaca35f9780e7b34861.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iiT3LCD5r51Iv1DiJY0XgQ.png"/></div></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Sample email-helper.js file to send data</figcaption></figure><p id="5bf0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">3.现在，为了调用sendTemplateEmail函数，让我们创建一个index.js文件。导入电子邮件帮助器文件。让我们创建欢迎API，然后将数据和必要的数据一起发送给sendTemplateEmail函数。给你。在成功注册后，用户将收到带有个性化名称和验证链接的欢迎电子邮件。</p><figure class="ll lm ln lo gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/652d4cc07a646be2028d5580f5e0f508.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*5gPb_6DZ_BoWIh0ppao_nA.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Index.js file to send data</figcaption></figure><p id="ebb4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要查看代码是否有效，请通过与邮递员一起发送示例数据来调用API。</p><p id="57fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就这样。希望您认为本文有所帮助。谢谢你。</p><p id="c993" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mj">更内容于</em> <a class="ae lj" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mj">通俗易懂</em></a></p></div></div>    
</body>
</html>
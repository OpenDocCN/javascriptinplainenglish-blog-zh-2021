<html>
<head>
<title>How to Build a Pareto Chart in JavaScript HTML5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript HTML5中构建帕累托图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-pareto-chart-in-javascript-html5-3639e98e40e8?source=collection_archive---------9-----------------------#2021-02-16">https://javascript.plainenglish.io/how-to-create-a-pareto-chart-in-javascript-html5-3639e98e40e8?source=collection_archive---------9-----------------------#2021-02-16</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/77f12e6b7170ec2f00cdcc6bda8a16e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DY5OtKyU_l0tggWNXwewVQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Pareto chart to be built</figcaption></figure><p id="6945" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">用JavaScript为HTML5应用和网站创建一个帕累托图根本不是一个复杂或忙乱的开发过程。获得本教程的实践经验，你会发现<a class="ae kx" href="https://www.anychart.com/blog/2018/11/20/data-visualization-definition-history-examples/" rel="noopener ugc nofollow" target="_blank">数据可视化</a>以这样一种形式令人愉快和兴奋！</p><p id="1e71" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在我们开始之前，让我们记住<a class="ae kx" href="https://www.anychart.com/chartopedia/chart-type/pareto-chart/" rel="noopener ugc nofollow" target="_blank">帕累托图</a>的样子以及它们的目的是什么，只是为了确保我们在同一页上。帕累托图，也称排列图，是竖线(<a class="ae kx" href="https://www.anychart.com/chartopedia/chart-type/column-chart/" rel="noopener ugc nofollow" target="_blank">列</a>)和线形图<a class="ae kx" href="https://www.anychart.com/chartopedia/chart-type/line-chart/" rel="noopener ugc nofollow" target="_blank">)的组合。列用于描述值，从左到右按降序显示。帕累托图中的线条以百分比显示累计总数。这种可视化有助于数据科学家和分析师快速识别一组因素中最重要的因素，即那些以最大值为特征的因素，因此对所有表示的因素的总和做出最大贡献。</a></p><p id="fcac" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在这篇JS Pareto图表教程中，我们将可视化2019年美国主要死亡原因的统计数据，并根据官方数据找出当年夺走最多美国人生命的原因。</p><p id="ea5c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们转到JavaScript图表，更准确地说，是使用JS构建一个交互式的Pareto图表！</p><h1 id="712b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">构建一个基本的JS帕累托图</h1><p id="abb4" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">JavaScript图表中可视化数据的常见顺序基于以下四个步骤。要创建JS帕累托图，您也应该遵循以下步骤:</p><ul class=""><li id="debe" class="mb mc in kb b kc kd kg kh kk md ko me ks mf kw mg mh mi mj bi translated">首先，生成一个包含显示图表的容器的HTML。</li><li id="ce6d" class="mb mc in kb b kc mk kg ml kk mm ko mn ks mo kw mg mh mi mj bi translated">第二，引用所有你要用的JS脚本。</li><li id="4895" class="mb mc in kb b kc mk kg ml kk mm ko mn ks mo kw mg mh mi mj bi translated">第三，加载需要绘制图表的数据。</li><li id="597d" class="mb mc in kb b kc mk kg ml kk mm ko mn ks mo kw mg mh mi mj bi translated">第四，编写可视化图表所需的JavaScript代码。</li></ul><p id="21fe" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们通过每一个步骤来制作一个交互式的帕累托图，并了解整个过程，这是非常简单的。</p><h1 id="305a" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第一步。创建HTML页面</h1><p id="0bb1" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">下面的代码设置了一个HTML页面，其中包含一个保存我们的Pareto图的容器。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="214a" class="my kz in mu b gy mz na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Pareto Chart Example&lt;/title&gt;<br/>    &lt;style&gt;<br/>      html, body, #container1 {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container1"&gt;&lt;/div&gt;<br/><strong class="mu io"><em class="nd">      // The Pareto chart code will be put here.</em></strong><br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="39a9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">上面开发的HTML页面由两个主要部分组成:<code class="fe ne nf ng mu b">&lt;head&gt;</code>和<code class="fe ne nf ng mu b">&lt;body&gt;</code>。<code class="fe ne nf ng mu b">&lt;head&gt;</code>部分包括两个子部分:<code class="fe ne nf ng mu b">&lt;title&gt;</code>和<code class="fe ne nf ng mu b">&lt;style&gt;</code>。此处页面的标题设置为“排列图示例”<code class="fe ne nf ng mu b">&lt;style&gt;</code>元素用于将一个简单的样式表应用于HTML文档、<code class="fe ne nf ng mu b">&lt;body&gt;</code>部分和id为“container1”的<code class="fe ne nf ng mu b">&lt;div&gt;</code>容器(这是我们放置Pareto图的地方)。</p><h1 id="8bfe" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第二步。连接脚本</h1><p id="344a" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">然后，在<code class="fe ne nf ng mu b">&lt;head&gt;</code>部分，我们应该将构建帕累托图时使用的所有脚本联系起来。</p><p id="202f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有许多<a class="ae kx" href="https://en.wikipedia.org/wiki/Comparison_of_JavaScript_charting_libraries" rel="noopener ugc nofollow" target="_blank"> JavaScript图表库</a>你可以<a class="ae kx" href="https://www.anychart.com/blog/2017/03/05/how-to-choose-the-right-javascript-charting-component-10-factors-you-have-to-consider/" rel="noopener ugc nofollow" target="_blank">选择</a>来为你的网站或应用程序创建一个交互式的帕累托图。在本教程中，我将使用<a class="ae kx" href="https://www.anychart.com" rel="noopener ugc nofollow" target="_blank"> AnyChart </a>。这是一个非常灵活的跨平台数据可视化的JavaScript库，丰富了大量的图表演示以及大量非常详细的文档和API参考，即使对于web开发和编程的初学者来说也很容易处理。</p><p id="db57" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">AnyChart拥有一个<a class="ae kx" href="https://docs.anychart.com/Quick_Start/Modules" rel="noopener ugc nofollow" target="_blank">模块化</a>系统，它允许你最小化需要在你的页面上运行的JavaScript的数量，因为你不需要加载超过你实际需要的。要开发一个pareto图表，您只需要两个模块:包含所有JS图表库基础知识的“核心”模块和包含Pareto图表类型的“Pareto”模块。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="7c0d" class="my kz in mu b gy mz na l nb nc">&lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>&lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-pareto.min.js"&gt;&lt;/script&gt;</span></pre><p id="0f3f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们将这些模块添加到<code class="fe ne nf ng mu b">&lt;head&gt;</code>部分，如下所示。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="ff8c" class="my kz in mu b gy mz na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Pareto Chart Example&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-pareto.min.js"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      html, body, #container1 {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="container1"&gt;&lt;/div&gt;<br/>    &lt;script&gt;<br/><strong class="mu io"><em class="nd">      // The Pareto chart code will be put here.<br/></em></strong>    &lt;/script&gt;    <br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="9393" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第三步。加载想要可视化的数据</h1><p id="c5bb" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">为了这个JavaScript帕累托图教程，我决定采用<a class="ae kx" href="https://www.cdc.gov/nchs/data/databriefs/db395-tables-508.pdf#page=4" rel="noopener ugc nofollow" target="_blank"> CDC的统计数据</a>，揭示2019年美国十大死亡原因。已知总共报告了2854838名居民死亡。前十位死因占全部死亡的73.4%。帕累托图将按降序显示十大死亡原因以及每一种原因对死亡总数的贡献。</p><p id="624a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以，我们先来看看数据集。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/195ed35dfcbc7722036a5b4b432ec452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FWJ-KtleytYIQuehNScIdA.png"/></div></div></figure><p id="2070" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用AnyChart的JS Pareto图表模块，您可以简单地以JavaScript对象的形式设置和提供数据集(如下所示)。该库将处理构建帕累托图所需的其余事情，例如对因子频率进行排序，将最高频率因子设置在左侧，最低频率因子设置在右侧，自动计算累积百分比，等等。</p><p id="bc64" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">为了用我们的数据生成一个JavaScript对象，我们需要两个名为“x”和“value”的数据字段，如下所示:</p><ul class=""><li id="598c" class="mb mc in kb b kc kd kg kh kk md ko me ks mf kw mg mh mi mj bi translated">“x”是需要在帕累托图中显示的因素的名称(在我们的例子中，是死亡原因的名称)，以及</li><li id="2d3f" class="mb mc in kb b kc mk kg ml kk mm ko mn ks mo kw mg mh mi mj bi translated">“值”是相应因素的频率(在我们的例子中，是该原因导致的死亡人数)。</li></ul><p id="a7da" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是我们的数据:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="934c" class="my kz in mu b gy mz na l nb nc">var data = [<br/>  {x: 'Heart disease', value: 659041},<br/>  {x: 'Alzheimer disease', value: 150005},<br/>  {x: 'Cancer', value: 599601},<br/>  {x: 'Accidents', value: 173040},<br/>  {x: 'Kidney disease', value: 51567},<br/>  {x: 'Suicide', value: 47511},<br/>  {x: 'CLRD', value: 156979},<br/>  {x: 'Stroke', value: 121499},<br/>  {x: 'Diabetes', value: 87647},<br/>  {x: 'Influenza and pneumonia', value: 49783}<br/>];</span></pre><h1 id="a6e4" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">第四步。编写JS帕累托图代码</h1><p id="d3ca" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">到目前为止，我们已经获得了使用JavaScript生成交互式Pareto图的所有基础知识。所以，让我们整理一下达到目标所需的所有东西。</p><p id="1899" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所有的JavaScript代码都应该放在<code class="fe ne nf ng mu b">&lt;script&gt;</code>标签中。此外，如下面的代码片段所示，我们在<code class="fe ne nf ng mu b">onDocumentReady</code>函数中编写了与Pareto图相关的JS代码行。这个函数一直等到HTML页面完全加载。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="062b" class="my kz in mu b gy mz na l nb nc">&lt;script&gt;<br/>  anychart.onDocumentReady(function() {<br/><strong class="mu io"><em class="nd">    // The entire code of the Pareto chart will be here.</em></strong><br/>  });<br/>&lt;/script&gt;</span></pre><p id="d198" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，在<code class="fe ne nf ng mu b">onDocumentReady</code>函数中，像步骤3中解释的那样加载数据。</p><p id="5cc1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">一旦创建了数据对象，就将其提供给Pareto图。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="580e" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// create a pareto chart</em></strong><br/>var chart = anychart.pareto();<br/><strong class="mu io"><em class="nd">// feed the data into the chart</em></strong><br/>chart.data(data);</span></pre><p id="9f94" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后，设置主Pareto图标题，并添加两个Y轴标题，如下所示，以使其清晰可见:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a287" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// set the chart title</em></strong><br/>chart.title('Number of Deaths for 10 Leading Causes of Death in U.S. in 2019');<br/><strong class="mu io"><em class="nd">// set the measure y axis title</em></strong><br/>chart.yAxis(0).title('Number of deaths');<br/><strong class="mu io"><em class="nd">// set the cumulative percentage y axis title</em></strong><br/>chart.yAxis(1).title('Cumulative percentage');</span></pre><p id="475b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后一个动作是将生成的Pareto图提供给id为“container1”的部门，并提供根据给定配置绘制图形的命令:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="253a" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// set the chart container id</em></strong><br/>chart.container('container1');<br/><strong class="mu io"><em class="nd">// draw the chart</em></strong><br/>chart.draw();</span></pre><p id="19a6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">哇！这是我们用JavaScript创建的帕累托图最终的样子。它是互动的，有反应的！</p><blockquote class="ni nj nk"><p id="accf" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见</strong> <a class="ae kx" href="https://playground.anychart.com/iithlO5T/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">上的这张基本帕累托图。)</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/bafa92eec6a5c0abb44a5f0b369d377f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gNrDq_WLUYWBrTPeT21m6w.png"/></div></div></figure><p id="a0d4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">交互式JS/HTML5帕累托图的完整代码如下:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="eda8" class="my kz in mu b gy mz na l nb nc">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;Pareto Chart Example&lt;/title&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-core.min.js"&gt;&lt;/script&gt;<br/>    &lt;script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-pareto.min.js"&gt;&lt;/script&gt;<br/>    &lt;style&gt;<br/>      html, body, #container1 {<br/>        width: 100%;<br/>        height: 100%;<br/>        margin: 0;<br/>        padding: 0;<br/>      }<br/>    &lt;/style&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;script&gt;</span><span id="1b2d" class="my kz in mu b gy np na l nb nc">anychart.onDocumentReady(function () {</span><span id="07a8" class="my kz in mu b gy np na l nb nc"><strong class="mu io"><em class="nd">  // set data<br/></em></strong>  var data = [<br/>    {x: 'Heart disease', value: 659041},<br/>    {x: 'Alzheimer disease', value: 150005},<br/>    {x: 'Cancer', value: 599601},<br/>    {x: 'Accidents', value: 173040},<br/>    {x: 'Kidney disease', value: 51567},<br/>    {x: 'Suicide', value: 47511},<br/>    {x: 'CLRD', value: 156979},<br/>    {x: 'Stroke', value: 121499},<br/>    {x: 'Diabetes', value: 87647},<br/>    {x: 'Influenza and pneumonia', value: 49783}<br/>  ];</span><span id="0561" class="my kz in mu b gy np na l nb nc"><strong class="mu io"><em class="nd">  // create a pareto chart</em></strong><br/>  var chart = anychart.pareto();<br/><strong class="mu io"><em class="nd">  // feed the data into the chart<br/></em></strong>  chart.data(data);</span><span id="a559" class="my kz in mu b gy np na l nb nc"><strong class="mu io"><em class="nd">  // set the chart title<br/></em></strong>  chart.title('Number of Deaths for 10 Leading Causes of Death in U.S. in 2019');<br/><strong class="mu io"><em class="nd">  // set the measure y axis title<br/></em></strong>  chart.yAxis(0).title('Number of deaths');<br/><strong class="mu io"><em class="nd">  // set the cumulative percentage y axis title<br/></em></strong>  chart.yAxis(1).title('Cumulative percentage');</span><span id="cc24" class="my kz in mu b gy np na l nb nc"><strong class="mu io"><em class="nd">  // set the chart container id<br/></em></strong>  chart.container('container1');<br/><strong class="mu io"><em class="nd">  // draw the chart<br/></em></strong>  chart.draw();</span><span id="dcb4" class="my kz in mu b gy np na l nb nc">});<br/>    &lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h1 id="9ccc" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">定制JavaScript帕累托图</h1><p id="ffc9" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">你需要把图表做得更方便，更漂亮，可读性更好，还是用额外的细节来包装它？在AnyChart JS API的帮助下，您有很多选择可以做到这一点。您还可以对帕累托图进行许多可视化设计和功能更改。(更多详情请参考<a class="ae kx" href="https://docs.anychart.com/Basic_Charts/Pareto_Chart" rel="noopener ugc nofollow" target="_blank">排列图文档</a>。)</p><p id="8c7b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">要获得更多灵感，你可以看看AnyChart的图库，里面有<a class="ae kx" href="https://www.anychart.com/products/anychart/gallery/Pareto_Charts/" rel="noopener ugc nofollow" target="_blank">帕累托图示例。</a></p><p id="b0f4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，让我们对基于JS的Pareto图进行一些改进，使它看起来更棒——那就跟我来吧！</p><h1 id="714f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">使用调色板更改帕累托图颜色</h1><p id="1579" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">是否要根据您的偏好更改帕累托图的默认浅蓝色？如果是这样，有一个非常方便的方法——<a class="ae kx" href="https://docs.anychart.com/Appearance_Settings/Palettes" rel="noopener ugc nofollow" target="_blank">调色板</a>进行自动上色！</p><p id="5bc0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">AnyChart JS图表库中有许多预定义的调色板，使用它们非常简单。让我们举个例子，一个叫地球的:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="f1f7" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// use one of the pre-built palettes for coloring<br/></em></strong>chart.palette(anychart.palettes.earth);</span></pre><p id="7cbf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是新着色的帕累托图。</p><blockquote class="ni nj nk"><p id="f260" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见上</strong> <a class="ae kx" href="https://playground.anychart.com/osIT4aKF/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">。</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/bbddc19e209f703d44d7fe9291cd9c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1TH8yurr6jgA5t-4WqPGgw.png"/></div></div></figure><p id="5531" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">大地色调的颜色舒缓自然，所以我喜欢。做出自己的选择吧，伙计们。如果您愿意，也可以从头开始创建自定义调色板。</p><h1 id="11a0" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">排列图的列和行序列的格式</h1><p id="214f" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">帕累托图由柱形图和折线图组成，它们是独立的系列，有自己的<a class="ae kx" href="https://docs.anychart.com/Basic_Charts/Pareto_Chart#appearance" rel="noopener ugc nofollow" target="_blank">视觉设置。</a>让我们对数据可视化的外观进行一些设计更改。</p><p id="939f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以使用不同的内置方法来改变数据点的外观。基本上有三种状态:正常、悬停和选中。<code class="fe ne nf ng mu b">normal()</code>方法用于在正常状态下设置点的外观，即当点上没有执行任何操作时。<code class="fe ne nf ng mu b">hovered()</code>方法设计用于确定悬停状态下的外观，即当我们悬停在某个点上时。最后，<code class="fe ne nf ng mu b">selected()</code>方法控制点被点击(选中)时的外观。</p><p id="d025" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这三种方法可以与<code class="fe ne nf ng mu b">fill()</code>、<code class="fe ne nf ng mu b">hatchFill()</code>和<code class="fe ne nf ng mu b">stroke()</code>方法结合使用。<code class="fe ne nf ng mu b">fill()</code>方法用于用给定的颜色填充点。<code class="fe ne nf ng mu b">hatchFill()</code>的方法是用条纹图案填充点。最后，<code class="fe ne nf ng mu b">stroke()</code>是改变点轮廓的外观。</p><p id="bdb4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们首先对Pareto列系列进行全部更改:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="3d67" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// configure the visual settings of the first (column) series</em></strong><br/>chart.getSeries(0).normal().fill("#c98411", 0.3);<br/>chart.getSeries(0).hovered().fill("#c98411", 0.1);<br/>chart.getSeries(0).selected().fill("#c98411", 0.5);<br/>chart.getSeries(0).normal().hatchFill("forward-diagonal", "#c98411", 1, 15);<br/>chart.getSeries(0).hovered().hatchFill("forward-diagonal", "#c98411", 1, 15);<br/>chart.getSeries(0).selected().hatchFill("forward-diagonal", "#c98411", 1, 15);<br/>chart.getSeries(0).normal().stroke("#c98411");<br/>chart.getSeries(0).hovered().stroke("#c98411", 2);<br/>chart.getSeries(0).selected().stroke("#c98411", 4);</span></pre><p id="8e7e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，让我们定制系列产品:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="a7ec" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// configure the visual settings of the second (line) series<br/></em></strong>chart.getSeries(1).normal().stroke("#991e00", 4, "4 4", "round");</span></pre><p id="e9b4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">以上代码更改了正常状态下的线条系列的轮廓。</p><p id="e936" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">具有这些新变化的交互式Pareto图如下所示。可视化现在看起来不是更有趣了吗？</p><blockquote class="ni nj nk"><p id="63b9" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见上</strong> <a class="ae kx" href="https://playground.anychart.com/mSLdM3g7/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">。</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/e292370384f7531b569815c34203cc7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HrTTX9Vl_44euA5Qk_Xdlg.png"/></div></div></figure><h1 id="48ad" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">配置帕累托图工具提示</h1><p id="b299" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">你知道工具提示的目的是什么吗？当您将鼠标悬停在图表可视化上的某个点上时，它们会显示出来，以提供有关相应点的更多信息。</p><p id="8ace" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们用帕累托图的工具提示做更多的工作。默认情况下，它显示系列、行(累积百分比)和列(绝对数字)的值。让我们让它看起来更整洁，也包括相对百分比。</p><p id="3326" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">首先，我们访问列序列，并命令工具提示在实际值之前显示文本“Value:”。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="dbd6" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// configure the pareto column series tooltip format<br/></em></strong>var column = chart.getSeriesAt(0);<br/>column.tooltip().format('Value: {%Value}');</span></pre><p id="8462" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">其次，我们访问行序列，在累积百分比前添加文本“累积频率:”并以同样的方式设置相对频率值的显示。' \n '字符用于换行。</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="019b" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// configure the pareto line series tooltip format</em></strong><br/>var line = chart.getSeriesAt(1);<br/>line<br/>  .tooltip()<br/>  .format('Cumulative Frequency: {%CF}% \n Relative Frequency: {%RF}%');</span></pre><p id="33cf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">看看我们的JavaScript Pareto图在工具提示如此改进后是什么样子。</p><blockquote class="ni nj nk"><p id="a35b" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见上</strong> <a class="ae kx" href="https://playground.anychart.com/JNVGvmq0/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">。</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/b23d62d374818aea3613a90fe4a1e578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zk1MH2DVr9bpV-p-ovKl6w.png"/></div></div></figure><h1 id="eb60" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">设置帕累托图标签</h1><p id="81dd" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">将每个因素(在我们的案例中为死亡原因)的累积百分比显示在线序列的顶部，靠近每个数据点，这可能有助于使帕累托图一目了然，提供更多信息。看那个:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="3631" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// set the pareto line series labels</em></strong><br/>var line = chart.getSeriesAt(1);<br/>line.labels().enabled(true).anchor('right-bottom').format('{%CF}%');</span></pre><p id="b307" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我会很快解释的。</p><p id="5227" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">帕累托图的线条系列可以使用我们之前讨论过的<code class="fe ne nf ng mu b">chart.getSeriesAt(1)</code>来获得。一旦我们得到了它，我们就可以启用线条系列对象的标签。为此，需要设置<code class="fe ne nf ng mu b">labels().enabled()</code>方法，将“true”作为其参数。</p><p id="5414" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe ne nf ng mu b">anchor()</code>功能用于设置标签想要显示的位置。</p><p id="73af" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，我们使用<code class="fe ne nf ng mu b">format()</code>方法来配置标签显示格式。</p><p id="c4ce" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是新的交互式JS帕累托图，现在带有百分比信息标签。</p><blockquote class="ni nj nk"><p id="22b5" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见上</strong> <a class="ae kx" href="https://playground.anychart.com/qjgBK7Ii" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">。</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/f4cb226ef97f8d3911dc0842cad10091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAL7xVyDRmt9NHNkMg0QMw.png"/></div></div></figure><h1 id="bfa8" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">启用帕累托图十字线</h1><p id="e0d2" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">十字光标是跟随鼠标指针的相互垂直的水平线和垂直线。它们使查看任何数据点中的精确值变得容易。让我们为我们的帕累托图启用这些:</p><pre class="mp mq mr ms gt mt mu mv mw aw mx bi"><span id="fcf8" class="my kz in mu b gy mz na l nb nc"><strong class="mu io"><em class="nd">// add and configure the crosshair</em></strong><br/>chart.crosshair().enabled(true).xLabel(false);</span></pre><p id="ac6e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">您可以看到<code class="fe ne nf ng mu b">xLabel</code>方法的参数被设置为‘false’因此，X轴上不会显示十字准线标签。</p><p id="1149" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">下面是使用十字线时的帕累托图。</p><blockquote class="ni nj nk"><p id="4656" class="jz ka nd kb b kc kd ke kf kg kh ki kj nl kl km kn nm kp kq kr nn kt ku kv kw ig bi translated"><strong class="kb io">见上</strong> <a class="ae kx" href="https://playground.anychart.com/KGqzUmFh/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> AnyChart游乐场</strong> </a> <strong class="kb io">。</strong></p></blockquote><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi no"><img src="../Images/bb1d3aab96f0f44cdf023cd9e44187dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LFk308pXB3D4x1drvYOP4Q.png"/></div></div></figure><p id="eb9a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">这是本教程的最终交互式JavaScript帕累托图。看起来很棒，不是吗？</strong></p><p id="eea0" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们看看在这个帕累托图上我们能读到什么。例如，该图表非常清楚地表明，2019年美国人的绝大多数死亡是由于心脏病和癌症——这两种主要死亡原因占前十名的60%以上。</p><p id="b216" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">意外伤害导致173，040人死亡，成为第三大死因。</p><p id="ed96" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">自杀案例显示在图表的最右边，这意味着在所有十个主要原因中，自杀案例所占的比例最小；尽管如此，这同时也是可怕的，并且肯定应该由美国当局和非政府组织在未来几年解决。</p><h1 id="1dc9" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="65b3" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">如何在JS的帮助下创建一个交互式的帕累托图？很简单，对吧？实际上，我们只需要创建一个基本的HTML页面，引用必要的JavaScript脚本，加载一个数据集，并根据文档中的明确说明编写一些代码，这完全取决于我们希望从这样的数据可视化中获得什么。AnyChart API基本上处理了所有的事情，并使它变得非常整洁。</p><p id="ce86" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">接下来，您可以随意探索更多的帕累托图，并使用这些很酷的可视化工具继续学习。万事如意！</p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="4130" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们AnyChart很高兴感谢Dilhani Withanage编写了这篇精彩的JS Pareto图表教程。</p><p id="a8bf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">【https://www.anychart.com】原载于2021年2月16日<a class="ae kx" href="https://www.anychart.com/blog/2021/02/16/pareto-chart-javascript/" rel="noopener ugc nofollow" target="_blank"><em class="nd"/></a><em class="nd">。</em></p></div></div>    
</body>
</html>
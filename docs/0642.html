<html>
<head>
<title>Use this pattern to make your JavaScript functions more extensible</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用这种模式使您的JavaScript函数更具可扩展性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/use-this-pattern-to-make-your-javascript-functions-more-extensible-5c93ee47dc33?source=collection_archive---------7-----------------------#2021-02-09">https://javascript.plainenglish.io/use-this-pattern-to-make-your-javascript-functions-more-extensible-5c93ee47dc33?source=collection_archive---------7-----------------------#2021-02-09</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/424345287f028064b1b2d35c5bd01253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kHbbMYw6V2na4u9Z"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@florianklauer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Klauer</a> on <a class="ae jd" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="b9a8" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">使用ES6对象析构使你的代码更容易理解</h2></div><p id="bd17" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我最近发现自己处于这样一种情况，我必须向代码库中多个地方使用的函数添加一个额外的参数。由于参数的顺序，当我需要调用函数时，在末尾添加另一个参数将意味着传递不必要的值，但是在中间添加参数将意味着破坏我已经在调用它的实例。我处于进退两难的境地。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="6f02" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们来看一个例子:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="effb" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一个发布一些数据的简单函数，可以选择覆盖基本URL来访问不同的API。大多数情况下，您会在没有<code class="fe me mf mg mh b">baseUrl</code>参数的情况下调用它，因为您会碰到应用程序的API:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="60d5" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是在某些情况下，您会与第三方API集成并发送不同的值:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="6870" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设有一个需求，要求添加一些定制的头，例如一个承载令牌来验证请求。您可以在函数末尾添加另一个参数:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="2635" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是这并不理想，因为这意味着您每次都必须通过<code class="fe me mf mg mh b">baseUrl</code>,即使您很少需要覆盖它。所以另一个选择是在<code class="fe me mf mg mh b">baseUrl</code>前添加新的参数:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="2c35" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是接下来——你猜对了——所有实际需要覆盖<code class="fe me mf mg mh b">baseUrl</code>的实例都需要重构。</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><h1 id="c080" class="mi mj jg bd mk ml mm mn mo mp mq mr ms km mt kn mu kp mv kq mw ks mx kt my mz bi translated">完全回避这个问题</h1><p id="53f9" class="pw-post-body-paragraph kv kw jg kx b ky na kh la lb nb kk ld le nc lg lh li nd lk ll lm ne lo lp lq ij bi translated">和往常一样，最好的解决方案是通过向函数传递一个对象来避免这个问题。使用ES6对象析构，我们可以很容易地只将我们想要的参数传递给函数，额外的好处是能够准确地看到您传递的参数。</p><p id="7222" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">让我们以上面的例子为例，对其进行重构:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="b75d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们所做的只是析构参数——我们仍然可以像以前一样分配默认值。</p><p id="9b94" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在，当您调用该函数时，您可以只传递您需要的内容:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mc md l"/></div></figure><p id="364d" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们没有通过<code class="fe me mf mg mh b">baseUrl</code>,但是函数仍然像预期的那样工作。看看代码有多清晰——您现在可以确切地看到传递了什么，而不必参考函数中参数的顺序来确定什么是什么！</p></div><div class="ab cl lr ls hu lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ij ik il im in"><p id="c98b" class="pw-post-body-paragraph kv kw jg kx b ky kz kh la lb lc kk ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">遵循这种模式意味着您可以省去一些麻烦，也意味着您的代码更清晰、更容易理解。希望你会发现它很有用，如果你有任何问题，请在下面留言！</p></div></div>    
</body>
</html>
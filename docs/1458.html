<html>
<head>
<title>How Angular Applications Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Angular应用程序如何启动</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-angular-applications-boot-dubois-s%C3%A9bastien-d3eacbdc41b4?source=collection_archive---------9-----------------------#2021-03-28">https://javascript.plainenglish.io/how-angular-applications-boot-dubois-s%C3%A9bastien-d3eacbdc41b4?source=collection_archive---------9-----------------------#2021-03-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="662d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">你有没有想过角度应用是如何开始的？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/37f9e3f8b944d331fb0f7bcf7ed15af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcLA_zHT9B0-IQa8kTJIIQ.png"/></div></div></figure><p id="d4f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本文中，我将概述如何引导Angular应用程序。请注意，这是一篇针对初学者的文章，而不是深入探讨。</p><h1 id="415a" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">高级流程</h1><p id="df7b" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">要启动Angular应用程序，必须在Web浏览器中完成多项工作:</p><ul class=""><li id="3a3f" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated">必须加载入口点的HTML</li><li id="3c12" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">必须加载应用程序的不同JavaScript包</li><li id="85fd" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">必须执行应用程序的主包</li><li id="45b8" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">主包必须加载Angular并触发根Angular应用模块的引导</li><li id="659a" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">Angular必须引导根Angular应用程序模块，并呈现应用程序</li></ul><p id="e817" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们更详细地看一下这些步骤。</p><h1 id="899d" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">HTML入口点</h1><p id="2532" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">首先，Web浏览器下载并评估<code class="fe my mz na nb b">index.html</code>文件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="b854" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">至少，HTML文件的主体必须包含<em class="ne">根组件</em>(即它的<em class="ne">入口点</em>组件)；在这种情况下<code class="fe my mz na nb b">&lt;app-root&gt;&lt;/app-root&gt;</code>。一旦Angular应用程序被加载和执行，Angular就会识别它，并使用插值/渲染模板更新DOM。</p><p id="f614" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那其实就是故事的“结局”。让我们倒回去一点。</p><h1 id="e648" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">JS捆绑包加载</h1><p id="8c10" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果你在一个全新的Angular应用程序的源代码中打开<code class="fe my mz na nb b">index.html</code>文件，你不会找到上面看到的任何脚本。为什么？因为它们是由<em class="ne">构建过程</em>添加的。当您使用<a class="ae nf" href="https://cli.angular.io" rel="noopener ugc nofollow" target="_blank"> Angular CLI </a>时，它首先读取<code class="fe my mz na nb b">angular.json</code>文件(或<code class="fe my mz na nb b">angular-cli.json</code>)来了解项目的配置。然后，在此基础上，它构建整个应用程序。</p><p id="58ca" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在幕后，Angular CLI使用模块捆绑器<a class="ae nf" href="https://webpack.js.org" rel="noopener ugc nofollow" target="_blank"> Webpack </a>。除此之外，Webpack(在许多插件的帮助下)将项目代码和资产转换成JavaScript包。这些包包含应用程序的所有代码，以及第三方的代码(例如Angular和您可能使用的其他库)。</p><p id="2681" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当使用<code class="fe my mz na nb b">ng build --prod</code>构建Angular应用程序时，在<code class="fe my mz na nb b">dist/&lt;application_name&gt;</code>下会生成一些文件:</p><pre class="kg kh ki kj gt ng nb nh ni aw nj bi"><span id="cb34" class="nk lo iq nb b gy nl nm l nn no">├── 3rdpartylicenses.txt<br/>├── favicon.ico<br/>├── index.html<br/>├── main.1feaffbe857aaf7ee0db.js<br/>├── polyfills.a4021de53358bb0fec14.js<br/>├── runtime.e227d1a0e31cbccbf8ec.js<br/>└── styles.09e2c710755c8867a460.css</span></pre><p id="a9c1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们已经讨论过了<code class="fe my mz na nb b">index.html</code>文件。让我们来看看JavaScript文件:</p><ul class=""><li id="a16c" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated"><code class="fe my mz na nb b">main.js</code>:您的应用程序代码和您导入的所有内容</li><li id="40a9" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><code class="fe my mz na nb b">vendor.js</code>:您的应用程序所依赖的第三方代码</li><li id="3650" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><code class="fe my mz na nb b">polyfills.js</code>:允许在旧环境中使用新功能的聚合插件(例如，在过时的网络浏览器上使用Angular)</li><li id="3fc0" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><code class="fe my mz na nb b">runtime.js</code>:Webpack在运行时用来加载代码的实用程序代码</li></ul><p id="6dd1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这些JavaScript包由Webpack生成，并作为<code class="fe my mz na nb b">&lt;script&gt;</code>标签添加到<code class="fe my mz na nb b">index.html</code>文件中，正如我们之前看到的。</p><p id="42fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请注意，如果您使用诸如<a class="ae nf" href="https://angular.io/guide/lazy-loading-ngmodules" rel="noopener ugc nofollow" target="_blank">延迟加载角模块</a>之类的特性，您可能会有额外的捆绑包。</p><p id="0443" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">由于这些脚本标签是<code class="fe my mz na nb b">index.html</code>文件的一部分，网络浏览器也会加载这些。但是装载这些并不足以让事情发生。必须执行代码才能启动应用程序。让我们看看下一个。</p><h1 id="18cb" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">主入口点执行</h1><p id="47d1" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated"><code class="fe my mz na nb b">main</code>捆绑包是这里值得关注的一个。正如我在上一节中提到的，它包含了我们的Angular应用程序的代码。</p><p id="dad7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这个捆绑包实际上包含了我们的整个应用程序代码。但是它的哪一部分应该被执行呢？这是在<code class="fe my mz na nb b">angular.json</code>文件中配置的:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d29f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">上面代码片段中的<code class="fe my mz na nb b">main</code>属性(第19行)决定了运行时一旦加载了主JavaScript捆绑包，就应该加载并执行该模块。</p><p id="85ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如上图所示，默认为<code class="fe my mz na nb b">main.ts</code>模块。由于这种配置，Angular CLI将确保相应的模块由Webpack加载，并在包加载后尽快执行。</p><p id="6620" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，您知道<code class="fe my mz na nb b">main.ts</code>文件是Angle应用程序的入口点，以及<em class="ne">为什么加载</em>并执行&amp;了。现在让我们看看它是干什么的！</p><h1 id="f400" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">角度应用引导</h1><p id="847c" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">如果您没有更改任何内容，那么<code class="fe my mz na nb b">main.ts</code>文件应该如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="3abc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这里有很多需要注意的事情。</p><p id="ef02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，有一些重要的声明。一旦编译器将代码转换成JavaScript代码，这些就会保留。在运行时，这些导入将由Webpack处理。一旦导入被<em class="ne">执行</em>，其余的代码将被执行。</p><p id="6912" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">第二，如果项目已经建成投产，那么将启用<a class="ae nf" href="https://angular.io/api/core/enableProdMode" rel="noopener ugc nofollow" target="_blank">生产模式的</a>。这对性能非常重要。</p><p id="e1ba" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">最后，也是最重要的，将执行以下行:</p><pre class="kg kh ki kj gt ng nb nh ni aw nj bi"><span id="e85e" class="nk lo iq nb b gy nl nm l nn no">platformBrowserDynamic().bootstrapModule(AppModule);</span></pre><p id="926f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这是一个单独的行，但是它做了很多。<code class="fe my mz na nb b">platformBrowserDynamic</code>是一个能够在网络浏览器环境中加载Angular的模块。它加载框架的必要元素并配置需要的内容。鉴于Angular可以在其他环境中运行(例如移动、服务器端等)，请注意还有其他方式来加载Angular。</p><p id="9cc8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以，第一部分，<code class="fe my mz na nb b">platformBrowserDynamic()</code>负载角。一旦完成，第二部分<code class="fe my mz na nb b">bootstrapModule(...)</code>指示Angular引导给定的模块。默认情况下，所有角度应用至少包括<em class="ne">和</em>和<code class="fe my mz na nb b">AppModule</code>。</p><p id="f3fd" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">此时，Angular接管、加载组件、服务、指令、管道以及您的<code class="fe my mz na nb b">AppModule</code>可能导入、引用、声明的任何其他东西。最后，它将寻找与<code class="fe my mz na nb b">app-root</code> <em class="ne">选择器</em>匹配的组件。通常，该组件是<code class="fe my mz na nb b">AppComponent</code>:</p><p id="09a2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦Angular找到了组件，它将为您呈现它，并更新包含呈现内容页面的DOM。</p><p id="cfc2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你很好奇，想知道更多，那么看看下面的文章:</p><ul class=""><li id="6dd2" class="mk ml iq kt b ku kv kx ky la mm le mn li mo lm mp mq mr ms bi translated"><a class="ae nf" href="https://angular.io/guide/bootstrapping#launching-your-app-with-a-root-module" rel="noopener ugc nofollow" target="_blank">https://angular . io/guide/bootstrapping # launching-your-app-with-a-root-module</a></li><li id="8691" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated"><a class="ae nf" href="https://stackoverflow.com/questions/48942691/how-angular-builds-and-runs" rel="noopener ugc nofollow" target="_blank">https://stack overflow . com/questions/48942691/how-angular-build-and-runs</a></li><li id="1212" class="mk ml iq kt b ku mt kx mu la mv le mw li mx lm mp mq mr ms bi translated">https://medium . com/angular-in-depth/angular-platforms-in-depth-part-2-application-bootstrap-process-8be 461 b 4667 e</li></ul><h1 id="53c7" class="ln lo iq bd lp lq lr ls lt lu lv lw lx jw ly jx lz jz ma ka mb kc mc kd md me bi translated">结论</h1><p id="34a5" class="pw-post-body-paragraph kr ks iq kt b ku mf jr kw kx mg ju kz la mh lc ld le mi lg lh li mj lk ll lm ij bi translated">在本文中，我简要解释了如何引导Angular应用程序。这不是整个故事(我已经把所有血淋淋的细节都省略了)，但是它应该可以帮助你更清楚地理解这个过程的重要步骤。</p><p id="350f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">今天到此为止！</p><p id="e309" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">PS:如果你想了解大量关于产品/软件/Web开发的其他很酷的事情，那么<a class="ae nf" href="https://dev-concepts.dev" rel="noopener ugc nofollow" target="_blank">看看开发概念系列</a>，<a class="ae nf" href="https://mailchi.mp/fb661753d54a/developassion-newsletter" rel="noopener ugc nofollow" target="_blank">订阅我的时事通讯</a>，还有<a class="ae nf" href="https://twitter.com/dSebastien" rel="noopener ugc nofollow" target="_blank">来Twitter上打个招呼吧！</a></p></div><div class="ab cl np nq hu nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ij ik il im in"><p id="7320" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="ne">原载于2021年3月28日</em><a class="ae nf" href="https://dsebastien.net/blog/2021-03-28-angular-application-bootstrap" rel="noopener ugc nofollow" target="_blank"><em class="ne">https://dsebastien.net</em></a><em class="ne">。</em></p></div></div>    
</body>
</html>
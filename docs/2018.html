<html>
<head>
<title>Nobody Covers this Real-World Installation Process of Adding Test Cases to React Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">没有人讨论过添加测试用例来反应组件的真实安装过程</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nobody-covers-this-real-world-installation-process-of-adding-test-cases-to-react-components-1fda2c2bd738?source=collection_archive---------11-----------------------#2021-04-27">https://javascript.plainenglish.io/nobody-covers-this-real-world-installation-process-of-adding-test-cases-to-react-components-1fda2c2bd738?source=collection_archive---------11-----------------------#2021-04-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="ba0a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用已经安装的第三方库(如Redux)为React组件编写测试用例。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/3debfa5947c186db3b420539b4edeafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*B1Y2FUOpS3wFzHZl"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="08cf" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">在后台</h1><p id="d6a4" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我最近得到了一个新工作机会的测试任务。编码任务通常与拖放功能有关，需要添加一些基本的测试用例。我通常面临的问题是安装React测试库。安装之后，我在运行测试用例时遇到了一个问题，我的存储库中已经安装了Next.js和Redux。</p><p id="fd3b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，我用react-testing-library阅读并研究了一下Redux在Next.js中的安装过程。最后，我在这里阐明了安装Jest和React测试库的过程，这些测试库带有预先安装的库，比如Next.js中的Redux。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="28b6" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">入门指南</h1><p id="ac81" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">测试React组件最常用的npm包和测试库是<code class="fe mr ms mt mu b"><a class="ae lb" href="https://testing-library.com/docs/react-testing-library/setup" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir">@testing-library/react</strong></a></code> <a class="ae lb" href="https://testing-library.com/docs/react-testing-library/setup" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir">。</strong> </a></p><p id="da5d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个库依赖Jest来运行测试用例，但是我们确实需要更多的这个party插件和包来让它在Next.js中工作。</p><pre class="km kn ko kp gt mv mu mw mx aw my bi"><span id="2107" class="mz ld iq mu b gy na nb l nc nd">yarn add @testing-library/dom @testing-library/jest-dom <br/>    @testing-library/react babel-jest jest jest-dom <br/>    identity-obj-proxy</span></pre><p id="3b7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">运行测试用例需要这些包。</p><ul class=""><li id="611f" class="ne nf iq jp b jq jr ju jv jy ng kc nh kg ni kk nj nk nl nm bi translated">Jest——主要帮助运行捕获所有test.js文件的测试用例</li><li id="676e" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated"><strong class="jp ir">巴别塔</strong>——需要传输我们的代码</li><li id="bb7b" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated"><strong class="jp ir">@ testing-library/react</strong>—这是帮助编写测试用例的库</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><p id="5c54" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下一步是安装jest的设置来捕获所有的test.js前缀文件，并运行所需的测试用例。</p><p id="4394" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">根控制器内部创建两个文件，分别命名为<code class="fe mr ms mt mu b"><strong class="jp ir">jest.config.js</strong></code> <strong class="jp ir"> &amp; </strong> <code class="fe mr ms mt mu b"><strong class="jp ir">jest.setup.js</strong></code></p><p id="7b17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在<strong class="jp ir"> Jest </strong>配置文件中，通过添加以下代码来添加配置Jest设置的配置。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="8b35" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在jest设置文件中，我们将导入测试库，它将帮助我们编写测试用例。在我们的例子中，我们使用@testing-library/react，因此我们将导入它。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="eae6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦Jest的设置完成，我们只需要在根目录下的<code class="fe mr ms mt mu b"><strong class="jp ir">.babelrc</strong></code>文件中为下一个JS添加babel预置。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="bdaa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">据此，你的笑话和巴别塔设置准备就绪。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="88b4" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">使用React测试库</h1><p id="7b5d" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们可以在测试目录中添加第一个示例测试，并运行我们的第一个测试。但这里的主要问题是我们已经包装的第三方，如Redux或Material UI以及更多的提供者。</p><p id="d529" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这些提供者是应用程序根的包装器。为了测试任何UI组件，我们还需要在将该组件传递到测试库之前用这个包装器包装该组件。</p><p id="df52" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们目前只使用redux作为第三方提供者，所以我们将只使用Redux提供者包装每个测试组件。</p><p id="1242" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在根目录下的test文件夹中，我们添加了<code class="fe mr ms mt mu b"><strong class="jp ir">test-utils.jsx</strong></code>文件。我们通过用redux provider包装每个呈现方法来创建一个用于测试库的定制呈现方法。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ns nt l"/></div></figure><p id="2ce0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">上面的代码基本上包装了通过与我们的第三方提供者一起测试库而提供的呈现方法，以创建我们的定制呈现方法。</p><p id="362d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们不得不使用这个定制的render方法，而不是测试库来测试任何react组件。我们将传递给这个render方法的每个react组件都将包装在我们的Redux提供程序中。</p><p id="7c17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，不要忘记通过任何其他提供者自定义渲染，否则你的测试用例将失败，这是必要的，以提供每个需要的道具给我们的包装提供者在我们的情况下，我们已经通过存储和后端道具给我们的提供者。</p><p id="6063" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因此，可以使用您的带有Redux和其他第三方的Next.js中的React测试库。</p></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="aa86" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">总结方法</h1><ul class=""><li id="aa51" class="ne nf iq jp b jq ma ju mb jy nu kc nv kg nw kk nj nk nl nm bi translated">安装所有需要的包，如Jest，testing-library和Babel插件</li><li id="4bbf" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated">通过添加设置文件来初始化Next.js存储库中的Jest。</li><li id="d470" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated">在Next.js中添加babel来传输代码。</li><li id="1464" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated">通过包装第三方提供者，为测试库创建自定义呈现方法。</li><li id="3b68" class="ne nf iq jp b jq nn ju no jy np kc nq kg nr kk nj nk nl nm bi translated">导出并使用自定义呈现方法来测试React组件。</li></ul></div><div class="ab cl mf mg hu mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ij ik il im in"><h1 id="91e2" class="lc ld iq bd le lf mm lh li lj mn ll lm ln mo lp lq lr mp lt lu lv mq lx ly lz bi translated">结论</h1><p id="41a0" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我们已经在Next.js中介绍了如何将React测试库与第三方库一起使用。这篇文章应该会有更多的读者，因为这种用例大多发生在专业经验中。</p><p id="45aa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">作为前端开发人员，您也必须为React组件编写测试用例。如果您已经在使用Redux和Material UI以及其他第三方库，那么这篇文章一定会帮到您。</p><p id="53d3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">代码:</p><div class="nx ny gp gr nz oa"><a href="https://github.com/shreyvijayvargiya/iHateReadingLogs/tree/main/TechLogs/InstallingReduxWithTestingLibrary" rel="noopener  ugc nofollow" target="_blank"><div class="ob ab fo"><div class="oc ab od cl cj oe"><h2 class="bd ir gy z fp of fr fs og fu fw ip bi translated">shreyvijayvargiya/iHateReadingLogs</h2><div class="oh l"><h3 class="bd b gy z fp of fr fs og fu fw dk translated">本报告给出了为已经安装的第三方React组件编写测试用例的基本理解…</h3></div><div class="oi l"><p class="bd b dl z fp of fr fs og fu fw dk translated">github.com</p></div></div><div class="oj l"><div class="ok l ol om on oj oo kv oa"/></div></div></a></div><p id="0b02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下次见。祝大家愉快！</p><p id="a865" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="op">更多内容尽在plainenglish.io </em> </a></p></div></div>    
</body>
</html>
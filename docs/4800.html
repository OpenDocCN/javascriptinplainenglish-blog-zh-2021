<html>
<head>
<title>Adding Skeleton Loading Animation With CSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CSS添加骨骼加载动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-skeleton-loading-animation-with-css-e6833f6e1d0a?source=collection_archive---------0-----------------------#2021-09-25">https://javascript.plainenglish.io/adding-skeleton-loading-animation-with-css-e6833f6e1d0a?source=collection_archive---------0-----------------------#2021-09-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="eb0d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">骨骼加载动画这个术语可能看起来很新，但你几乎在每个流行的平台上都见过(例如脸书、Youtube、LinkedIn等)。</p><p id="e7c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当网站内容由于网络速度较慢而需要时间加载时，我们通常会看到一个表示内容正在加载的加载图标/gif。<br/>表示内容仍在加载的旧方式:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ki"><img src="../Images/bba3bc558f2f9c98472e9fd4a26129c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/0*pyRw1qikTI1eqGm9.gif"/></div></figure><p id="079d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的加载图标会让用户知道内容正在被加载。但是，这不是一个很好的用户体验。</p><p id="d16e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们怎样才能让它变得更好？</p><p id="fe1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">介绍骨骼装载屏幕:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kq"><img src="../Images/e447024caa2263de4bca71a4af9db60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*gLEa0jOJRKBh5BZU7KVaiQ.gif"/></div></figure><p id="7af9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">骨架加载动画<strong class="jm io"> </strong>是仍在加载的信息的动画占位符。它模仿了整个视图的结构和外观。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi kr"><img src="../Images/5fcdfcdd2540eb301eb186ebeb8ddaa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*jXQHAaNrf_1leRuzFZHaBQ.gif"/></div></div></figure><p id="512f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是<strong class="jm io">“骨骼载入画面！”。</strong>它表示将要加载的ui的结构。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi kw"><img src="../Images/7330241f8638a77d4f6a77011ca67d90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*ULMQxUEWT9oi1ktOHkGFVg.gif"/></div></figure><h1 id="caf3" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">让我们学习如何在我们的应用程序中实现这一点</h1><p id="82ba" class="pw-post-body-paragraph jk jl in jm b jn lv jp jq jr lw jt ju jv lx jx jy jz ly kb kc kd lz kf kg kh ig bi translated">完整源代码:<a class="ae ma" href="https://github.com/ankitsaxena21/Skeleton-Loading-Animation-With-CSS" rel="noopener ugc nofollow" target="_blank"> Github Repo </a></p><p id="5618" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是一个简单的代码，它从<a class="ae ma" href="https://fakestoreapi.com/" rel="noopener ugc nofollow" target="_blank"> fake store api </a>获取数据，并在DOM上填充数据。</p><pre class="kj kk kl km gt mb mc md me aw mf bi"><span id="a752" class="mg ky in mc b gy mh mi l mj mk">&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;<br/>&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;<br/>  &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;<br/>  &lt;title&gt;Document&lt;/title&gt;<br/>  &lt;link rel="stylesheet" href="styles.css"&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;div class="grid"&gt;&lt;/div&gt;<br/>  <br/>  &lt;template id="card-template"&gt;<br/>    &lt;div class="card"&gt;<br/>      &lt;div class="header"&gt;<br/>        &lt;img class="header-img" data-img /&gt;<br/>        &lt;div class="title" data-title&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>      &lt;div data-body&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/template&gt;<br/>&lt;/body&gt;<br/>&lt;script&gt;<br/>  const grid = document.querySelector('.grid')<br/>  const cardTemplate = document.getElementById('card-template')</span><span id="5ada" class="mg ky in mc b gy ml mi l mj mk">fetch("<a class="ae ma" href="https://fakestoreapi.com/products/category/electronics" rel="noopener ugc nofollow" target="_blank">https://fakestoreapi.com/products/category/electronics</a>")<br/>    .then(res =&gt; res.json())<br/>    .then(posts =&gt; {<br/>      grid.innerHTML = ''<br/>      posts.forEach(post =&gt; {<br/>        const div = cardTemplate.content.cloneNode(true)<br/>        div.querySelector('[data-img]').src = post.image<br/>        div.querySelector('[data-title]').textContent="$"+post.price<br/>        div.querySelector('[data-body]').textContent = post.title<br/>        grid.append(div)<br/>      })<br/>  })<br/>&lt;/script&gt;<br/>&lt;/html&gt;</span></pre><p id="44e5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们的应用程序的加载看起来像这样。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/665ce8854da0ab947485c628be9df1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*4UEtclCme4cMYKLhnGt1Fg.gif"/></div></figure><p id="e807" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们添加骨骼加载动画。</p><p id="6d1d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">用下面给出的代码替换body标记中的内容。我们在之前的代码中增加了一些div和类。</p><pre class="kj kk kl km gt mb mc md me aw mf bi"><span id="170d" class="mg ky in mc b gy mh mi l mj mk">&lt;div class="grid"&gt;&lt;/div&gt;<br/>  <br/>  &lt;template id="card-template"&gt;<br/>    &lt;div class="card"&gt;<br/>      &lt;div class="header"&gt;<br/>        &lt;img class="header-img skeleton" data-img                                                                                            src="<a class="ae ma" href="https://source.unsplash.com/100x100/?nature" rel="noopener ugc nofollow" target="_blank">https://source.unsplash.com/100x100/?e</a>lectronics" /&gt;<br/>        &lt;div class="title" data-title&gt;<br/>          &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>          &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>      &lt;div data-body&gt;<br/>        &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>        &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>        &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>        &lt;div class="skeleton skeleton-text"&gt;&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  &lt;/template&gt;</span></pre><p id="75f6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">的。骷髅和。框架文本类用于显示要加载的内容的占位符元素。</p><p id="fe6d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在让我们添加所需的CSS。</p><pre class="kj kk kl km gt mb mc md me aw mf bi"><span id="6d6a" class="mg ky in mc b gy mh mi l mj mk">.skeleton {<br/>  opacity: .7;<br/>  animation: skeleton-loading 1s linear infinite alternate;<br/>}</span><span id="3a44" class="mg ky in mc b gy ml mi l mj mk">.skeleton-text {<br/>  width: 100%;<br/>  height: .5rem;<br/>  margin-bottom: .25rem;<br/>  border-radius: .125rem;<br/>}</span><span id="fe7e" class="mg ky in mc b gy ml mi l mj mk">.skeleton-text:last-child {<br/>  margin-bottom: 0;<br/>  width: 80%;<br/>}</span><span id="31cc" class="mg ky in mc b gy ml mi l mj mk"><a class="ae ma" href="http://twitter.com/keyframes" rel="noopener ugc nofollow" target="_blank">@keyframes</a> skeleton-loading {<br/>  0% {<br/>    background-color: hsl(200, 20%, 70%);<br/>  }</span><span id="5e8d" class="mg ky in mc b gy ml mi l mj mk">100% {<br/>    background-color: hsl(200, 20%, 95%);<br/>  }<br/>}</span></pre><p id="8b79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">。skeleton类有一个自定义动画，名为“skeleton-loading ”,用于改变背景颜色，持续时间为1秒，循环计数为无穷大(保持重复)。</p><p id="99f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在要显示一些占位符框架卡片和文本，并用实际获取的内容替换它们，在发出获取请求之前添加一个for循环(如下所示)。它将从我们的模板中克隆所有数据，并将其放入网格中。</p><pre class="kj kk kl km gt mb mc md me aw mf bi"><span id="d17e" class="mg ky in mc b gy mh mi l mj mk">//inside the script tag<br/>const grid = document.querySelector('.grid')<br/>const cardTemplate = document.getElementById('card-template')<br/>for (let i = 0; i &lt; 6; i++) {<br/>  grid.append(cardTemplate.content.cloneNode(true))<br/>}</span><span id="6aa5" class="mg ky in mc b gy ml mi l mj mk">fetch("<a class="ae ma" href="https://fakestoreapi.com/products/category/electronics" rel="noopener ugc nofollow" target="_blank">https://fakestoreapi.com/products/category/electronics</a>")<br/>    .then(res =&gt; res.json())<br/>    .then(posts =&gt; {<br/>      grid.innerHTML = ''<br/>      posts.forEach(post =&gt; {<br/>        const div = cardTemplate.content.cloneNode(true)<br/>        div.querySelector('[data-img]').src = post.image<br/>        div.querySelector('[data-title]').textContent = "$" + post.price<br/>        div.querySelector('[data-body]').textContent = post.title<br/>        grid.append(div)<br/>      })<br/>  })</span></pre><p id="e4e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，通过这些改变，我们已经成功地将骨骼加载动画添加到我们的应用程序中。(在chrome dev tools的“网络”标签中选择“慢速3G ”,查看在网络较慢的情况下页面如何加载)</p><p id="e67a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">最终结果:</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mm"><img src="../Images/71cd9b9522842033044de9ad65e87f6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*bVxhtq2XQ7nw2vNb4AhiYg.gif"/></div></figure><p id="4888" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">源代码:<a class="ae ma" href="https://github.com/ankitsaxena21/Skeleton-Loading-Animation-With-CSS" rel="noopener ugc nofollow" target="_blank"> Github Repo </a></p><p id="b748" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是你如何用CSS实现骨骼加载动画。我希望你们中的一些人会发现这对我很有用。</p></div></div>    
</body>
</html>
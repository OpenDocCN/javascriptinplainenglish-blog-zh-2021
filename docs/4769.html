<html>
<head>
<title>Performing Asynchronous Operations in JavaScript’s Array.map() Method</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript的Array.map()方法中执行异步操作</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/using-asynchronous-operations-with-javascripts-array-map-method-1971e8093228?source=collection_archive---------5-----------------------#2021-09-23">https://javascript.plainenglish.io/using-asynchronous-operations-with-javascripts-array-map-method-1971e8093228?source=collection_archive---------5-----------------------#2021-09-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="fa48" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">JavaScript技巧</h2><div class=""/><div class=""><h2 id="556b" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">这是关于信守承诺。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/eb686e8a887df2a4ba9d409cef66d809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4mmxLbOe2vaqUXh3"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@mmayyer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">marcos mayer</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="b8f3" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">的。数组的map()方法</h1><blockquote class="lx"><p id="8883" class="ly lz iq bd ma mb mc md me mf mg mh dk translated"><code class="fe mi mj mk ml b"><strong class="ak">map()</strong></code>方法<strong class="ak">创建一个新的数组</strong>,用调用数组中每个元素的函数的结果填充。</p></blockquote><p id="723f" class="pw-post-body-paragraph mm mn iq mo b mp mq ka mr ms mt kd mu mv mw mx my mz na nb nc nd ne nf ng mh ij bi translated">的。map()方法遍历数组中的每一项，并执行函数、回调函数或箭头函数指定的任何操作。函数的结果可以返回到新的数组中，或者只在。map()方法。</p><p id="f710" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">一个常见的代码片段，其中回调函数可能看起来像这样，</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="3df3" class="nq lg iq ml b gy nr ns l nt nu">const array1 = [1, 4, 9, 16]<br/>// pass a function to map<br/>const map1 = array1.map(x =&gt; x * 2)</span></pre><p id="1354" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">在这个代码片段中，数组map1包含2、8、18和32。</p><h1 id="3782" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">问题是</h1><p id="6170" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated"><strong class="mo ja">如果我们传递的函数(回调或箭头)想要执行异步操作</strong>，比如数据库查询或任何其他异步操作，该怎么办？</p><blockquote class="lx"><p id="2283" class="ly lz iq bd ma mb mc md me mf mg mh dk translated">我们如何处理这些？他们回报承诺。</p></blockquote><h1 id="ffa0" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf oa kg lr ki ob kj lt kl oc km lv lw bi translated">我们将做什么</h1><p id="c930" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">我们将要求id为2，4，6，8和10的用户的名字从一个假的<a class="ae le" href="https://jsonplaceholder.typicode.com/" rel="noopener ugc nofollow" target="_blank"> API，https://jsonplaceholder.typicode.com/</a>。</p><p id="aea9" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">你可以在浏览器的地址栏中看到所有的用户。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="1792" class="nq lg iq ml b gy nr ns l nt nu"><a class="ae le" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users</a></span></pre><p id="7a8e" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">对于本教程，请求的id将在一个数组中。我们将使用Array.map()方法遍历该数组，并获取与该数组中的用户id相对应的每个用户的<strong class="mo ja"> id </strong>和<strong class="mo ja">名称</strong>。<strong class="mo ja">这将要求我们在。map()方法。</strong><strong class="mo ja">await</strong>关键字用于等待异步操作的结果。</p><p id="dc2d" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">我们将分三部分构建解决方案。</p><ul class=""><li id="61d9" class="od oe iq mo b mp nh ms ni mv of mz og nd oh mh oi oj ok ol bi translated">第1部分是确保。map()方法有效</li><li id="40fe" class="od oe iq mo b mp om ms on mv oo mz op nd oq mh oi oj ok ol bi translated">第2部分是确保我们能够成功运行异步操作</li><li id="c8f2" class="od oe iq mo b mp om ms on mv oo mz op nd oq mh oi oj ok ol bi translated">第3部分是将两者结合起来解决我们的问题</li></ul><p id="51cb" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">尽管我们将从API获取数据，但这只是异步操作的一个例子。您当然可以将它应用到其他需要异步操作的情况中。</em></p></div><div class="ab cl os ot hu ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="ij ik il im in"><h1 id="7a2e" class="lf lg iq bd lh li oz lk ll lm pa lo lp kf pb kg lr ki pc kj lt kl pd km lv lw bi translated">我们开始吧</h1><p id="7072" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">对于本教程，我将使用<a class="ae le" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>。您当然可以使用任何您想要的代码编辑器。您还需要安装<a class="ae le" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a>。</p><h2 id="515a" class="nq lg iq bd lh pe pf dn ll pg ph dp lp mv pi pj lr mz pk pl lt nd pm pn lv iw bi translated">初始设置</h2><ol class=""><li id="e732" class="od oe iq mo b mp nv ms nw mv po mz pp nd pq mh pr oj ok ol bi translated">创建一个放置应用程序的目录。</li><li id="8da5" class="od oe iq mo b mp om ms on mv oo mz op nd oq mh pr oj ok ol bi translated">启动VS代码，打开刚刚创建的文件夹。</li><li id="ce12" class="od oe iq mo b mp om ms on mv oo mz op nd oq mh pr oj ok ol bi translated">打开一个终端窗口，输入以下代码启动一个节点项目。这将初始化一个新的节点项目(create package.json等)。)并接受所有默认值。</li></ol><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="090f" class="nq lg iq ml b gy nr ns l nt nu">npm init -y</span></pre><p id="8c79" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">我喜欢使用 <a class="ae le" href="https://axios-http.com/docs/intro" rel="noopener ugc nofollow" target="_blank"> <em class="or"> axios </em> </a> <em class="or">来查询数据，所以我们将安装它。但是，如果您愿意，可以随意使用</em> <a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API" rel="noopener ugc nofollow" target="_blank"> <em class="or">获取API </em> </a> <em class="or">或其他东西。</em></p><p id="381f" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">4.在终端窗口中，键入以下内容。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="9aab" class="nq lg iq ml b gy nr ns l nt nu">npm install axios</span></pre><p id="926f" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">你的<strong class="mo ja"> package.json </strong>应该是这样的。注意它期望<strong class="mo ja"> index.js </strong>作为默认的主文件。所以我们会创造一个。这是我们的代码将驻留的地方。</p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi ps"><img src="../Images/eb2698874babc1c132331f715cec48e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*nPAFmCt6dRB0ieLsTw6d9Q.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Initial Setup. Package.json with axios. index.js for our code.</figcaption></figure><p id="9d58" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">5.从<strong class="mo ja">文件</strong>菜单使用<strong class="mo ja">新建文件</strong>创建一个名为<strong class="mo ja"> index.js. </strong>的新文件</p><h1 id="d944" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">解决问题</h1><p id="a5ec" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">对于我们的问题，我们只需要id为2、4、6、8和10的用户的<strong class="mo ja"> name </strong>属性。</p><h2 id="5804" class="nq lg iq bd lh pe pf dn ll pg ph dp lp mv pi pj lr mz pk pl lt nd pm pn lv iw bi translated">步骤1—让Array.map()工作</h2><p id="33f6" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">1.在<strong class="mo ja"> index.js </strong>中，我们先用<strong class="mo ja"> require </strong>导入axios，并创建一个数组来存储所需用户的id。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="57be" class="nq lg iq ml b gy nr ns l nt nu">const axios = require('axios')</span><span id="04a6" class="nq lg iq ml b gy pt ns l nt nu">const usersRequested = [2,4,6,8,10]</span></pre><p id="71b9" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">2.为了确保我们可以循环并从数组中获取每个用户id，让我们在现有代码后添加以下代码。我们将使用一个箭头函数，并使用<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" rel="noopener ugc nofollow" target="_blank">模板文本向控制台输出一些信息。</a></p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="390f" class="nq lg iq ml b gy nr ns l nt nu">usersRequested.map(userId =&gt;{<br/>    console.log(`This is user ${userId}`)<br/>})</span></pre><p id="3372" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">参数userId可以是任何值，取数组中的每个值。</em></p><p id="41b6" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">3.在终端中键入以下内容运行代码，并进行验证。map()管用。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="64a0" class="nq lg iq ml b gy nr ns l nt nu">node index</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div class="gh gi pu"><img src="../Images/c3b328358cce12f87c4858fe57594541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*vtqIWf66WiNljjGd6dQ2yA.jpeg"/></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Result of our basic use of .map()</figcaption></figure><h2 id="fdc7" class="nq lg iq bd lh pe pf dn ll pg ph dp lp mv pi pj lr mz pk pl lt nd pm pn lv iw bi translated">步骤2—异步操作</h2><p id="0bfb" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">为了运行异步操作，或者更具体地说，为了让<strong class="mo ja">等待</strong>异步操作的结果，我们需要将我们的代码包装在一个<strong class="mo ja">异步</strong>函数中。因此，如果我们在异步函数中没有这样的代码，这样的代码就会失败。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="9107" class="nq lg iq ml b gy nr ns l nt nu">const userNamesRes =  await axios.get(`https://jsonplaceholder.typicode.com/users`)</span></pre><p id="32ab" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">需要在异步函数中。否则我们会得到这个错误。</em></p><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pv"><img src="../Images/ec4468b9b88dc26462cbcb5acf06658a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wywg2fViqKe102cF3Y8eSA.jpeg"/></div></div></figure><p id="f37c" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">我们要做的是创建一个异步函数getUsers()，并将我们的查询放入其中。<em class="or">注意。map()方法将被暂时注释掉，因此我们可以只关注异步查询。</em></p><ol class=""><li id="86c0" class="od oe iq mo b mp nh ms ni mv of mz og nd oh mh pr oj ok ol bi translated">像这样修改<strong class="mo ja"> index.js </strong>中的代码。请注意注释。</li></ol><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="b0c4" class="nq lg iq ml b gy nr ns l nt nu">const axios = require('axios')</span><span id="1003" class="nq lg iq ml b gy pt ns l nt nu">const usersRequested=[2,4,6,8,10]</span><span id="b677" class="nq lg iq ml b gy pt ns l nt nu">// usersRequested.map(userId =&gt;{<br/>//     console.log(`This is user ${userId}`)<br/>// })</span><span id="94c1" class="nq lg iq ml b gy pt ns l nt nu">// Async function to return all users<strong class="ml ja"><br/>const getUsers = async () =&gt;{<br/>    const userNamesRes =  await axios.get(`</strong><a class="ae le" href="https://jsonplaceholder.typicode.com/users`" rel="noopener ugc nofollow" target="_blank"><strong class="ml ja">https://jsonplaceholder.typicode.com/users`</strong></a><strong class="ml ja">)<br/>    // Destructure data out of the response.<br/>    // Could use const users = userNamesRes.data<br/>    const {data} = userNamesRes<br/>    console.log(data)<br/>}</strong></span><span id="0f38" class="nq lg iq ml b gy pt ns l nt nu"><strong class="ml ja">getUsers()</strong></span></pre><p id="8a11" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">2.在终端窗口中运行这段代码，</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="9c74" class="nq lg iq ml b gy nr ns l nt nu">node index</span></pre><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi pw"><img src="../Images/aded765a790b859e9f7d674dc1e07236.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RomIhA7F0gptXUy4ir9kMw.jpeg"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Asynchronous query</figcaption></figure><p id="d7d2" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">你会注意到我在查询调用中使用了</em> <strong class="mo ja"> <em class="or">反斜杠</em> </strong> <em class="or">而不是单引号。这个以后会派上用场的。</em></p><p id="15f1" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">此外，这是获得所有10个用户，而不仅仅是一个我们想要的。我们需要遍历数组。</p><h2 id="bd79" class="nq lg iq bd lh pe pf dn ll pg ph dp lp mv pi pj lr mz pk pl lt nd pm pn lv iw bi translated">第三步——把所有的东西放在一起</h2><p id="f177" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">所以现在将我们的查询放在。map()方法，并将它放在异步函数中。</p><p id="681c" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">事实证明，仅此一项是行不通的。为什么？因为。map()方法使用了一个函数(在我们的例子中是Arrow函数)，<strong class="mo ja"> <em class="or">，这个函数也需要异步。</em>T3】</strong></p><p id="48cc" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">此外，</p><blockquote class="lx"><p id="b550" class="ly lz iq bd ma mb mc md me mf mg mh dk translated">异步调用的结果是一个<a class="ae le" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">承诺</a>。的。map()方法返回一个新的数组，所以我们需要创建一个数组来存储每个查询返回的承诺，然后使用promise.all()来全部解析。</p></blockquote></div><div class="ab cl os ot hu ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="ij ik il im in"><p id="1357" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><strong class="mo ja">注意</strong>:如果你很好奇，请不要评论下面的<strong class="mo ja">console . log(promises array)</strong>。你会看到一系列悬而未决的承诺。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="ef27" class="nq lg iq ml b gy nr ns l nt nu">[<br/>  Promise { &lt;pending&gt; },<br/>  Promise { &lt;pending&gt; },<br/>  Promise { &lt;pending&gt; },<br/>  Promise { &lt;pending&gt; },<br/>  Promise { &lt;pending&gt; }<br/>]</span></pre></div><div class="ab cl os ot hu ou" role="separator"><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox oy"/><span class="ov bw bk ow ox"/></div><div class="ij ik il im in"><ol class=""><li id="444e" class="od oe iq mo b mp nh ms ni mv of mz og nd oh mh pr oj ok ol bi translated">修改<strong class="mo ja"> index.js </strong>中的代码如下。</li></ol><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="fcdb" class="nq lg iq ml b gy nr ns l nt nu">const axios = require('axios')</span><span id="2855" class="nq lg iq ml b gy pt ns l nt nu">const usersRequested=[2,4,6,8,10]</span><span id="a675" class="nq lg iq ml b gy pt ns l nt nu">// Async function to return all users<br/>const getUsers = <strong class="ml ja">async </strong>() =&gt;{</span><span id="5b71" class="nq lg iq ml b gy pt ns l nt nu">// Return an array of Promises<br/>    const <strong class="ml ja">promisesArray </strong>= usersRequested.<strong class="ml ja">map</strong>( <strong class="ml ja">async </strong>userId =&gt;{<br/>        const userNamesRes =  <strong class="ml ja">await </strong>axios.get(`<a class="ae le" href="https://jsonplaceholder.typicode.com/users/${userId}`" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users/${userId}`</a>)<br/>        <br/>        return userNamesRes<br/>})</span><span id="4e8f" class="nq lg iq ml b gy pt ns l nt nu"><strong class="ml ja">//   console.log(promisesArray)</strong></span><span id="68d8" class="nq lg iq ml b gy pt ns l nt nu"><strong class="ml ja">// Resolve the Promises</strong><br/>    const userInfo = <strong class="ml ja">await </strong>Promise.all(promisesArray)<br/>        <br/>    userInfo.map(promiseRecord=&gt;{<br/>        console.log(`ID - ${promiseRecord.data.id}, Name - ${promiseRecord.data.name}`)<br/>    })</span><span id="633a" class="nq lg iq ml b gy pt ns l nt nu">}</span><span id="d8a2" class="nq lg iq ml b gy pt ns l nt nu">getUsers()</span></pre><p id="eef9" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">2.在终端窗口中运行这段代码，</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="97ce" class="nq lg iq ml b gy nr ns l nt nu">node index</span></pre><p id="33c7" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">有用！漂亮！</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="1008" class="nq lg iq ml b gy nr ns l nt nu">ID - 2, Name - Ervin Howell<br/>ID - 4, Name - Patricia Lebsack<br/>ID - 6, Name - Mrs. Dennis Schulist<br/>ID - 8, Name - Nicholas Runolfsdottir V<br/>ID - 10, Name - Clementina DuBuque</span></pre><h1 id="1a9f" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">唯一剩下的东西</h1><p id="f160" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">唯一剩下的事情就是放入<strong class="mo ja">错误处理</strong>。我在最终代码中添加了一个简单的<strong class="mo ja"> try/catch </strong>。</p><pre class="kp kq kr ks gt nm ml nn no aw np bi"><span id="4b99" class="nq lg iq ml b gy nr ns l nt nu">const axios = require('axios')</span><span id="a92a" class="nq lg iq ml b gy pt ns l nt nu">const usersRequested=[2,4,6,8,10]</span><span id="ed78" class="nq lg iq ml b gy pt ns l nt nu">// Async function to return all users<br/>const getUsers = async () =&gt;{<br/><strong class="ml ja">try{</strong><br/>    // Return an array of Promises<br/>    const promisesArray = usersRequested.map( async userId =&gt;{<br/>        const userNamesRes =  await axios.get(`<a class="ae le" href="https://jsonplaceholder.typicode.com/users/${userId}`" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users/${userId}`</a>)<br/>        <br/>        return userNamesRes<br/>})</span><span id="04b6" class="nq lg iq ml b gy pt ns l nt nu"><strong class="ml ja">    //   console.log(promisesArray)</strong><br/>    // Resolve the Promises<br/>    const userInfo = await Promise.all(promisesArray)<br/>        <br/>    userInfo.map(promiseRecord=&gt;{<br/>        console.log(`ID - ${promiseRecord.data.id}, Name - ${promiseRecord.data.name}`)<br/>    })</span><span id="6021" class="nq lg iq ml b gy pt ns l nt nu"><strong class="ml ja">}catch(err){<br/>    console.log(err.message)<br/>}</strong><br/>}</span><span id="6367" class="nq lg iq ml b gy pt ns l nt nu">getUsers()</span></pre><h1 id="8e72" class="lf lg iq bd lh li lj lk ll lm ln lo lp kf lq kg lr ki ls kj lt kl lu km lv lw bi translated">结论</h1><p id="30c6" class="pw-post-body-paragraph mm mn iq mo b mp nv ka mr ms nw kd mu mv nx mx my mz ny nb nc nd nz nf ng mh ij bi translated">要点是您可以<strong class="mo ja">等待</strong>在。数组的map()方法。请记住，您的回调函数或箭头函数需要是异步的；记住，一个新的承诺数组被返回，这些需要被解决。</p><p id="59c7" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated">我鼓励您修改代码，并尝试其他循环。</p><p id="3aaa" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">代码也可以在</em><a class="ae le" href="https://github.com/Gravity-Well/array-map-async-ops.git" rel="noopener ugc nofollow" target="_blank"><em class="or">GitHub</em></a><em class="or">上找到。</em></p><p id="d138" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><strong class="mo ja">感谢您的阅读和编码！</strong></p><p id="fe20" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">想看就看，加入Medium帮我继续写</em></p><div class="px py gp gr pz qa"><a href="https://bobtomlin-70659.medium.com/membership" rel="noopener follow" target="_blank"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd ja gy z fp qf fr fs qg fu fw iz bi translated">通过我的推荐链接加入灵媒——重力井(罗伯·汤姆林)</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">作为一个媒体会员，你的会员费的一部分会给你阅读的作家，你可以完全接触到每一个故事…</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">bobtomlin-70659.medium.com</p></div></div><div class="qj l"><div class="qk l ql qm qn qj qo ky qa"/></div></div></a></div><p id="fbc5" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><strong class="mo ja"> <em class="or">你也可以享受:</em> </strong></p><div class="px py gp gr pz qa"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-get-a-list-of-unique-values-from-a-javascript-array-of-objects-2e38f6cfd14"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd ja gy z fp qf fr fs qg fu fw iz bi translated">如何从JavaScript对象数组中获取唯一值</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">使用带有Spread运算符和JavaScript数组方法的JavaScript集。map()和。排序()</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qj l"><div class="qp l ql qm qn qj qo ky qa"/></div></div></a></div><div class="px py gp gr pz qa"><a rel="noopener  ugc nofollow" target="_blank" href="/javascript-multi-dimensional-arrays-7186e8edd03"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd ja gy z fp qf fr fs qg fu fw iz bi translated">JavaScript多维数组</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">真相大白了</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qj l"><div class="qq l ql qm qn qj qo ky qa"/></div></div></a></div><div class="px py gp gr pz qa"><a rel="noopener  ugc nofollow" target="_blank" href="/using-javascript-sets-37752330682d"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd ja gy z fp qf fr fs qg fu fw iz bi translated">使用JavaScript集</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">一些有趣的用法、观察和陷阱</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qj l"><div class="qr l ql qm qn qj qo ky qa"/></div></div></a></div><div class="px py gp gr pz qa"><a rel="noopener  ugc nofollow" target="_blank" href="/back-ticks-are-not-single-quotes-eef4e014115c"><div class="qb ab fo"><div class="qc ab qd cl cj qe"><h2 class="bd ja gy z fp qf fr fs qg fu fw iz bi translated">反引号与单引号</h2><div class="qh l"><h3 class="bd b gy z fp qf fr fs qg fu fw dk translated">在JavaScript中使用重音符创建模板文字的演示</h3></div><div class="qi l"><p class="bd b dl z fp qf fr fs qg fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="qj l"><div class="qs l ql qm qn qj qo ky qa"/></div></div></a></div><p id="6fbd" class="pw-post-body-paragraph mm mn iq mo b mp nh ka mr ms ni kd mu mv nj mx my mz nk nb nc nd nl nf ng mh ij bi translated"><em class="or">更多内容请看</em><a class="ae le" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="mo ja"><em class="or">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
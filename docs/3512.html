<html>
<head>
<title>Stop Wrapping Angular Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止包装角形组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stop-wrapping-angular-components-7d397c23a84c?source=collection_archive---------1-----------------------#2021-07-15">https://javascript.plainenglish.io/stop-wrapping-angular-components-7d397c23a84c?source=collection_archive---------1-----------------------#2021-07-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/166fa5ee5226fc4c38d8d66d8aff1922.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xcaDl7eY_Dyz1xTioB7B5w.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Image by<a class="ae jz" href="https://pixabay.com/users/jackmac34-483877/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=970943" rel="noopener ugc nofollow" target="_blank"> jacqueline macou</a> from <a class="ae jz" href="https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=970943" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="0934" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">“我会反复使用这个配置相同的三十件组件，所以我应该包装它。”</em></p><p id="7c01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">乍一看似乎是个好主意，但这是不必要的，需要大量的工作。</p><p id="7832" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么我们能做什么来代替包装呢？</p><p id="a4f9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">简单的答案是分层注入指令。</strong></p><p id="129e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在PrimeNG上做例子(因为它是开源的、流行的和免费的)，但是下面的例子可以应用于通过组件和指令开发的每个angular组件集。</p><p id="f0ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设您有一个employee集合，您想将它绑定到一个选择输入中，并且您在多个组件/页面中使用这个输入。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="ee3a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想在多个页面上使用员工下拉菜单，你有一些选择。</p><ol class=""><li id="9b93" class="lf lg in kc b kd ke kh ki kl lh kp li kt lj kx lk ll lm ln bi translated"><strong class="kc io">为每个有雇员下拉菜单的组件编写相同的代码。</strong></li></ol><p id="ce7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您将它用于两到三个页面，这不是一个大问题，但是在更多页面上使用它会导致将来可能遇到的简单逻辑需求的高成本。</p><p id="e1f6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 2。编写一个服务，为选择列表获取&amp; maps雇员。</strong></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="ed2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可能是一个很好的解决方案，现在我们可以在一个文件中更改get data逻辑，这一更改可以应用于所有员工下拉列表。但是我们仍然需要为每次使用设置p-dropdown的配置。</p><pre class="kz la lb lc gt lo lp lq lr aw ls bi"><span id="710a" class="lt lu in lp b gy lv lw l lx ly">&lt;p-dropdown<br/>  [options]="employees"<br/>  placeholder="Choose an employee"<br/>  [showClear]="true"<br/>  [filter]="true"<br/> &gt;&lt;/p-dropdown&gt;</span></pre><p id="0f9e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您编写测试，那么您必须创建EmployeeService的模拟/间谍，并为每种用法编写测试。</p><p id="c9e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 3。用自定义组件包装组件(请不要这样做)</strong></p><p id="927a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这看起来像是完美的解决方案，但是需要做很多工作。您需要为其他开发人员创建文档，您应该支持您正在包装的组件的所有输入和输出。同样，如果你包装一个表单组件(就像例子一样)，你必须实现<strong class="kc io">ControlValueAccessor</strong>接口。</p><p id="277b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 4。创建一个操作组件属性的指令</strong></p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="c5b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过这种方式，您可以多次使用employee dropdown，无需重新编写相同的代码/参数，您可以更改默认配置值，并且如果您更新了PrimeNG库，您无需做任何事情即可支持<p-dropdown>的新输入/输出。</p-dropdown></p><p id="f3e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Generate Haptic Feedback in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中生成触觉反馈</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-generate-haptic-feedback-in-react-native-d040fa3fa9c4?source=collection_archive---------13-----------------------#2021-02-10">https://javascript.plainenglish.io/how-to-generate-haptic-feedback-in-react-native-d040fa3fa9c4?source=collection_archive---------13-----------------------#2021-02-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="99a9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">感知性能在移动应用中至关重要。我们需要让我们的应用程序快速、简洁，否则，用户不会使用它们。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/77568fb65c434beaab559c886aeaaa41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_8vlN7eGjH4nS_uJ.png"/></div></div></figure><p id="4ab7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">添加动画和触觉反馈等功能使移动应用程序感觉更具性能。在本文中，我们将讨论React Native中的触觉反馈——它是什么，以及我们如何在移动应用中实现它。</p><p id="9b07" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">触觉触摸反馈是在游戏、游戏机或智能手机上应用触摸时产生的工程反馈。你知道当你最喜欢的视频游戏中的角色死去或者球击中了国际足联的横梁时的震动。</p><p id="bd8f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">看看大型应用程序，如脸书、Instagram或Twitter，注意当你采取重要行动如喜欢或关注时，触觉反馈在你手中的感觉有多好。</p><p id="aac4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们即将在本React原生教程中探索的触觉反馈库由<a class="ae lk" href="https://expo.io/" rel="noopener ugc nofollow" target="_blank"> Expo </a>提供，名为<strong class="kq io"> <em class="ll"> expo-haptics </em> </strong>。在探索了这个库之后，我们将继续构建一个小的应用程序来应用我们所学的东西。</p><h1 id="166c" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">装置</h1><p id="21a0" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">创建一个新的世博项目</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="1e2e" class="mo ln in mk b gy mp mq l mr ms">expo init haptic_feedback_example</span></pre><p id="2f4b" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">安装<strong class="kq io"><em class="ll"/></strong></p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="e117" class="mo ln in mk b gy mp mq l mr ms">expo install expo-haptics</span></pre><p id="3a4a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">现在让我们来探索这些方法及其最可能的用例，这种依赖关系提供了三种方法:</p><p id="348f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">a . haptics . selection async()</strong>:这个函数没有参数。该功能被触发后，该呼叫会产生约1秒钟的振动。该功能可以在动画完成时应用。动画可以由用户启动，也可以通过编程启动。</p><p id="b45f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">b . haptics . notification async(type):</strong>该函数采用一个参数<em class="ll"> type </em>，可以是下列之一:</p><ul class=""><li id="9c8e" class="mt mu in kq b kr ks ku kv kx mv lb mw lf mx lj my mz na nb bi translated"><em class="ll">触觉学。通知反馈类型.成功</em></li><li id="2ec1" class="mt mu in kq b kr nc ku nd kx ne lb nf lf ng lj my mz na nb bi translated"><em class="ll">触觉学。NotificationFeedbackType . Warning</em></li><li id="7da9" class="mt mu in kq b kr nc ku nd kx ne lb nf lf ng lj my mz na nb bi translated"><em class="ll">触觉学。错误</em></li></ul><p id="2d88" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该功能可以在验证后给出反馈时使用。Snapchat的普通用户在扫描Snapchat二维码后，对手机上的这种振动很熟悉。</p><p id="a835" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><strong class="kq io">c . haptics . impact async(style):</strong>该函数也只接受一个参数，该参数通常是三个值之一，具体取决于所需反馈的强度:</p><ul class=""><li id="36cb" class="mt mu in kq b kr ks ku kv kx mv lb mw lf mx lj my mz na nb bi translated"><em class="ll">触觉学。ImpactFeedbackStyle.Light </em></li><li id="f111" class="mt mu in kq b kr nc ku nd kx ne lb nf lf ng lj my mz na nb bi translated"><em class="ll">触觉学。ImpactFeedbackStyle.Medium </em></li><li id="f802" class="mt mu in kq b kr nc ku nd kx ne lb nf lf ng lj my mz na nb bi translated"><em class="ll">触觉学。ImpactFeedbackStyle.Heavy </em></li></ul><p id="081f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">该功能在调用时产生比<em class="ll">选择同步</em>更快的反馈，并可用于在用户按下按钮时提供即时触觉反馈。蛋糕上的配料是你可以调节振动的强度。</p><h1 id="1e7e" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">React Native中触觉反馈</h1><h2 id="7e57" class="mo ln in bd lo nh ni dn ls nj nk dp lw kx nl nm ly lb nn no ma lf np nq mc nr bi translated"><strong class="ak">例1 </strong></h2><p id="c039" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">我们已经创建了React本地项目，所以让我们构建一个简单的项目，测试<em class="ll"> impactAsync </em>方法，并探索不同的触觉反馈风格:</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="35ca" class="mo ln in mk b gy mp mq l mr ms">/**<br/> * Sample React Native App<br/> * https://github.com/facebook/react-native<br/> *<br/> * @format<br/> * @flow strict-local<br/> */<br/><br/>import React from 'react';<br/>import {StyleSheet, TouchableOpacity, View, Text} from 'react-native';<br/>import * as Haptics from 'expo-haptics';<br/><br/>const HapticFeedbackExample = () =&gt; {<br/>  function impactAsync(style) {<br/>    switch (style) {<br/>      case 'light':<br/>        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);<br/>        break;<br/>      case 'medium':<br/>        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Medium);<br/>        break;<br/>      default:<br/>        Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Heavy);<br/>        break;<br/>    }<br/>  }<br/><br/>  return (<br/>    &lt;View&gt;<br/>      &lt;TouchableOpacity onPress={() =&gt; impactAsync('light')}&gt;<br/>        &lt;Text style={styles.light}&gt;Light&lt;/Text&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>      &lt;TouchableOpacity onPress={() =&gt; impactAsync('medium')}&gt;<br/>        &lt;Text style={styles.medium}&gt;Medium&lt;/Text&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>      &lt;TouchableOpacity onPress={() =&gt; impactAsync('heavy')}&gt;<br/>        &lt;Text style={styles.heavy}&gt;Heavy&lt;/Text&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>    &lt;/View&gt;<br/>  );<br/>};<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    alignItems: 'center',<br/>    justifyContent: 'center',<br/>  },<br/>  light: {<br/>    color: '#ffffff',<br/>    fontSize: 20,<br/>    width: 300,<br/>    height: 100,<br/>    backgroundColor: 'green',<br/>    marginVertical: 10,<br/>  },<br/>  medium: {<br/>    color: '#ffffff',<br/>    fontSize: 20,<br/>    width: 300,<br/>    height: 100,<br/>    backgroundColor: 'orange',<br/>    marginVertical: 10,<br/>  },<br/>  heavy: {<br/>    color: '#ffffff',<br/>    fontSize: 20,<br/>    width: 300,<br/>    height: 100,<br/>    backgroundColor: 'red',<br/>    marginVertical: 10,<br/>  },<br/>});</span></pre><p id="17eb" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们在上面的React原生代码库中做什么？</p><p id="98fe" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们创建三个按钮来代表<em class="ll"> impactAsync </em>的三种风格。这张简单的屏幕截图显示了不同的按钮及其不同的风格和强度:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/9fedb86547f622bbe9649420f935839c.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*FqV8vUNLN6VXApjy.jpg"/></div></figure><p id="0fe7" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">运行项目并开始交替点击三个按钮。仔细观察，你会注意到强度的细微差别，从轻到中到重。</p><h2 id="fa05" class="mo ln in bd lo nh ni dn ls nj nk dp lw kx nl nm ly lb nn no ma lf np nq mc nr bi translated"><strong class="ak">例二</strong></h2><p id="2e5f" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">让我们构建一个小型QR扫描仪来验证一个解析的QR码是否是一个有效的URL。</p><p id="09b3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为此，我们必须添加由世博会提供的<em class="ll">世博会条形码扫描仪</em>。</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="a12f" class="mo ln in mk b gy mp mq l mr ms">expo install expo-barcode-scanner</span></pre><p id="d3fc" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">让我们编写代码来扫描随机条形码，并验证它是否是有效的URL:</p><pre class="kd ke kf kg gt mj mk ml mm aw mn bi"><span id="6882" class="mo ln in mk b gy mp mq l mr ms">import React, {useState, useEffect} from 'react';<br/>import {Text, View, StyleSheet, Button, Alert} from 'react-native';<br/>import {BarCodeScanner} from 'expo-barcode-scanner';<br/>import * as Haptics from 'expo-haptics';<br/><br/>export default function App() {<br/>  const [isPermitted, setPermitted] = useState(null);<br/>  const [scanned, setScanned] = useState(false);<br/><br/>  useEffect(() =&gt; {<br/>    (async () =&gt; {<br/>      const {status} = await BarCodeScanner.requestPermissionsAsync();<br/>      setPermitted(status === 'granted');<br/>    })();<br/>  }, []);<br/><br/>  const handleBarCodeScanned = ({type, data}) =&gt; {<br/>    setScanned(true);<br/>    is_url(data);<br/>  };<br/><br/>  function is_url(str) {<br/>    const regexp = /^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;<br/>    hapticNotify(regexp.test(str));<br/>  }<br/><br/>  const hapticNotify = (success) =&gt; {<br/>    switch (success) {<br/>      case true:<br/>        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Success);<br/>        Alert.alert('Success', 'This is a URL');<br/>        break;<br/>      default:<br/>        Haptics.notificationAsync(Haptics.NotificationFeedbackType.Error);<br/>        Alert.alert('Error', 'This is not a URL!!');<br/>        break;<br/>    }<br/>  };<br/><br/>  if (isPermitted === null) {<br/>    return &lt;Text&gt;Requesting for camera permission&lt;/Text&gt;;<br/>  }<br/>  if (isPermitted === false) {<br/>    return &lt;Text&gt;No access to camera&lt;/Text&gt;;<br/>  }<br/><br/>  return (<br/>    &lt;View style={styles.container}&gt;<br/>      &lt;BarCodeScanner<br/>        onBarCodeScanned={scanned ? undefined : handleBarCodeScanned}<br/>        style={StyleSheet.absoluteFillObject}<br/>      /&gt;<br/>      {scanned &amp;&amp; (<br/>        &lt;Button title={'Tap to Scan Again'} onPress={() =&gt; setScanned(false)} /&gt;<br/>      )}<br/>    &lt;/View&gt;<br/>  );<br/>}<br/><br/>const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>  },<br/>});</span></pre><p id="2fae" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们在上面的代码库中做什么？</p><p id="585f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在扫描条形码之前，我们必须先获得许可，然后验证扫描结果，以确认它是否是一个URL:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/4fc678aa517a26bfdd6d40299259655d.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/0*9a2aw5QnSPxp86Iw.jpg"/></div></figure><p id="300d" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我们基于扫描的条形码URL是否有效来应用不同的触觉反馈风格。您会注意到扫描有效的URL条形码和无效的URL条形码之间的触觉反馈的差异。</p><h1 id="99b3" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">关于React Native中触觉反馈的结论</h1><p id="4fc6" class="pw-post-body-paragraph ko kp in kq b kr me jo kt ku mf jr kw kx mg kz la lb mh ld le lf mi lh li lj ig bi translated">我们已经浏览了<strong class="kq io"> <em class="ll"> expo-haptics </em> </strong>库及其可能的用例。我们通过构建几个小应用程序来应用这些用例，并获得这些交互行为的实际感受，进而应用我们所学的知识。</p><p id="7e2c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">在React本地应用中添加触觉反馈非常简单，因为有一些库可以让这项任务变得简单。然而，为了提供高质量的移动应用程序，您需要仔细选择何时触发这些触觉反馈交互。滥用这些振动会激怒你的用户，也会很快耗尽他们的手机电池，所以要明智地选择。</p><p id="1914" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">关于移动性能的更多想法，请查看我们关于如何<a class="ae lk" href="https://www.instamobile.io/mobile-design/perceived-performance-mobile-apps/" rel="noopener ugc nofollow" target="_blank">提升移动应用性能的文章</a>。</p></div><div class="ab cl nt nu hr nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ig ih ii ij ik"><p id="bad4" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="ll">原载于2021年2月10日</em><a class="ae lk" href="https://www.instamobile.io/react-native-tutorials/haptic-feedback-react-native/" rel="noopener ugc nofollow" target="_blank"><em class="ll">https://www . insta mobile . io</em></a><em class="ll">。</em></p></div></div>    
</body>
</html>
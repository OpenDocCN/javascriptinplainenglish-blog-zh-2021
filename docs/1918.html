<html>
<head>
<title>Website Security — A Comprehensive Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网站安全—综合指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/website-security-a-comprehensive-guide-3888684afac6?source=collection_archive---------3-----------------------#2021-04-22">https://javascript.plainenglish.io/website-security-a-comprehensive-guide-3888684afac6?source=collection_archive---------3-----------------------#2021-04-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="14de" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">网站威胁-跨站点脚本(XSS)、跨站点请求伪造(CSRF)和SQL注入</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/2ef94a11a1cbf8292bea4603e83962d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*Lw5CSqIT1nWaDM6GJlSw4Q.png"/></div></figure><p id="78f2" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">Web安全是一个经常被前端开发人员忽略的话题。当我们评估网站的质量时，我们通常会查看性能、搜索引擎优化友好性和可访问性等指标，而网站抵御恶意攻击的能力通常会被忽略。</p><p id="ffaf" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">尽管敏感的用户数据存储在服务器端，并且后端开发人员必须采取重要措施来保护服务器，但最终，保护数据安全的责任由后端和前端共同承担。虽然敏感数据可能被安全地锁定在后端仓库中，但前端掌握着前门的钥匙，窃取它们通常是获得访问权限的最简单方法。网站安全<em class="lg">更正式的定义是:</em></p><blockquote class="lh"><p id="4f36" class="li lj in bd lk ll lm ln lo lp lq lf dk translated">"保护网站免受未经授权的访问、使用、修改、破坏或中断的行为/实践."</p></blockquote><h1 id="4af9" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">网站漏洞和威胁</h1><p id="b4c9" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">本节仅列出几个最常见的网站威胁—跨站点脚本(XSS)、跨站点请求伪造(CSRF)和SQL注入。此外，还有它们是如何工作的，以及它们是如何缓解的。</p><h1 id="b059" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mo ju md jw mp jx mf jz mq ka mh mi bi translated">跨站点脚本(XSS)</h1><p id="fc60" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">跨站脚本(XSS)是web应用中的一个漏洞，<strong class="km io">允许第三方代表web应用</strong>在用户的浏览器中执行脚本。跨站点脚本是当今网络上最普遍的漏洞之一。针对用户的XSS攻击可导致各种后果，如帐户受损、帐户删除、权限提升、恶意软件感染等。</p><p id="b436" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在最初的日子里，它被称为CSS，并不完全是今天的样子。最初，人们发现恶意网站可以利用JavaScript从其他网站的响应中读取数据，方法是将这些数据嵌入到iframe中，运行脚本并修改页面内容。当时它被称为CSS(跨站点脚本)。当Netscape引入相同来源策略时，定义发生了变化，并且跨站点脚本被限制启用跨来源响应读取。很快就有人建议将这个漏洞称为XSS，以避免与级联样式表(CSS)混淆。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/c49453fa9fb7c2fb5995382aa62b9027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*qmApIhdf2rzEG3dZhtctOw.png"/></div></div></figure><h2 id="3108" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">XSS攻击是如何运作的？</h2><ul class=""><li id="1d19" class="ni nj in km b kn mj kq mk kt nk kx nl lb nm lf nn no np nq bi translated">当攻击者将他们自己的代码注入网页时，通常是通过利用网站软件上的漏洞来实现的，然后他们可以注入自己的脚本，由受害者的浏览器执行。</li><li id="4dcf" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">由于JavaScript在受害者的浏览器页面上运行，<strong class="km io">关于认证用户的敏感细节可以从会话</strong>中被窃取，这实质上允许一个不良行为者瞄准网站管理员并完全危及网站。</li><li id="e63a" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">跨站点脚本攻击的另一个常见用途是当漏洞出现在网站最公开的页面上时。在这种情况下，攻击者可以通过<strong class="km io">添加他们自己的广告、网络钓鱼提示或其他恶意内容来注入他们的代码，以网站的访问者为目标。</strong></li><li id="7840" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">另一种导致XSSed的可能性是，在将用户提供的输入插入到响应中之前，网站没有正确处理这些输入。在这种情况下，可以给出一个精心制作的输入，当嵌入到响应中时，该输入充当JS代码块并由浏览器执行。</li></ul><h2 id="8742" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">跨站点脚本攻击的类型</h2><p id="596f" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">既然我们已经介绍了基础知识，让我们再深入一点。根据他们的目标，坏演员可以以多种不同的方式使用跨站点脚本。让我们看看一些最常见的攻击类型。</p><h2 id="b7c4" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">①XSS的反映</h2><ul class=""><li id="4715" class="ni nj in km b kn mj kq mk kt nk kx nl lb nm lf nn no np nq bi translated">当有效负载存储在从浏览器发送到服务器的数据中时，会发生反射式跨站点脚本攻击。如果每次执行都必须提供输入，这种XSS称为反射。<strong class="km io">这些攻击大多通过直接向受害者发送有效载荷来实施</strong>。受害者用包含有效负载的请求请求页面，有效负载作为脚本嵌入到响应中</li><li id="411b" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">反射XSS攻击的例子包括攻击者在从网站的搜索或联系表单发送的数据中存储恶意脚本。一个典型的例子是<strong class="km io">搜索表单</strong>，访问者将他们的搜索查询发送到服务器，只有他们能看到结果。</li><li id="4c0c" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">反射XSS有时也被称为<strong class="km io">非持久性</strong>或<strong class="km io">二型XSS </strong>。</li></ul><p id="f7a6" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">下面是一个反映XSS漏洞的简单示例:</p><p id="dbad" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe nw nx ny nz b">https://insecure-website.com/status?message=All+is+well<br/>&lt;p&gt;Status: All is well.&lt;/p&gt;</code></p><p id="6c0a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">该应用程序不执行任何其他数据处理，因此攻击者可以很容易地构建这样的攻击:</p><p id="a414" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe nw nx ny nz b">https://insecure-website.com/status?message=&lt;script&gt;/*+Bad+stuff+here...+*/&lt;/script&gt;</code></p><p id="adec" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe nw nx ny nz b">&lt;p&gt;Status: &lt;script&gt;/* Bad stuff here... */&lt;/script&gt;&lt;/p&gt;</code></p><p id="a280" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">如果用户访问攻击者构建的URL，那么攻击者的脚本将在用户的浏览器中，在用户与应用程序的会话上下文中执行。此时，脚本可以执行任何操作，并检索用户有权访问的任何数据。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oa"><img src="../Images/543b3e1dc06641f9ef59f17721d6162c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K8ZoFFbgcrEoQroIyg2oxA.png"/></div></div></figure><h2 id="81e7" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">2)存储的XSS</h2><ul class=""><li id="308d" class="ni nj in km b kn mj kq mk kt nk kx nl lb nm lf nn no np nq bi translated">当<strong class="km io">攻击者将他们的有效负载存储在一个受损的服务器</strong>上，导致网站向其他访问者发送恶意代码时，就会发生存储跨站点脚本攻击。</li><li id="fbaf" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">由于这种方法只需要攻击者的一个初始操作，之后会危及许多访问者的安全，因此这是最危险也是最常用的跨站点脚本类型。</li><li id="22f6" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">存储跨站点脚本攻击的示例包括配置文件字段，如您的用户名或电子邮件，它们保存在服务器上并显示在您的帐户页面上。</li><li id="a8ac" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">储存的XSS有时也被称为<strong class="km io">持续型</strong>或<strong class="km io">I型XSS。</strong></li></ul><p id="1a4c" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">下面是一个存储XSS漏洞的简单示例。留言板应用程序允许用户提交消息，并显示给其他用户:</p><p id="66ed" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe nw nx ny nz b">&lt;p&gt;Hello, this is my message!&lt;/p&gt;</code></p><p id="d8cc" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">该应用程序不执行任何其他数据处理，因此攻击者可以很容易地发送攻击其他用户的消息:</p><p id="498d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><code class="fe nw nx ny nz b">&lt;p&gt;&lt;script&gt;/* Bad stuff here... */&lt;/script&gt;&lt;/p&gt;</code></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi ob"><img src="../Images/7b920cee231ffd2953ca7611d7055459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5f7xNAvmOyl5G3Z1uL2OBA.png"/></div></div></figure><h2 id="ebbf" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">3)基于DOM的XSS </h2><ul class=""><li id="6936" class="ni nj in km b kn mj kq mk kt nk kx nl lb nm lf nn no np nq bi translated">当服务器本身不容易受到XSS攻击，而是页面上的JavaScript容易受到攻击时，基于DOM的跨站脚本攻击就会发生。</li><li id="3861" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">由于JavaScript用于增加页面的交互性，URL中的参数可用于在页面加载后修改页面。通过在DOM没有净化来自用户的值时修改DOM，攻击者可以向页面添加恶意代码。</li><li id="4b56" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">基于DOM的跨站点脚本攻击的一个例子是，当网站将语言选择从默认语言更改为URL中提供的语言时。</li></ul><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi oc"><img src="../Images/68544150ea25f7a2084048ac1c72b901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dd_vgKyfEh4raGjHMdURgw.png"/></div></div></figure><h2 id="fd11" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">如何防止XSS袭击？</h2><p id="6f06" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">在某些情况下，防止跨站点脚本编写是微不足道的，但根据应用程序的复杂性和它处理用户可控制数据的方式，这可能要困难得多。</p><p id="f774" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">一般来说，有效预防XSS漏洞可能涉及以下措施的组合:</p><ul class=""><li id="34bb" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf nn no np nq bi translated"><strong class="km io">到达时过滤输入- </strong>在接收用户输入时，尽可能严格地根据预期的或有效的输入进行过滤。</li><li id="84a7" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io"> Allowlist值- </strong>将用户输入限制到特定的Allowlist。这种做法确保了只有已知的安全值被发送到服务器。限制用户输入只有在您知道将接收什么数据(如下拉菜单的内容)时才有效，对于自定义用户内容来说并不实用。</li><li id="7bbe" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io">在输入中避免和限制HTML-</strong>虽然HTML可能是丰富内容所必需的，但它应该仅限于可信用户。如果您允许对输入进行样式化和格式化，那么您应该考虑使用其他方法来生成内容，比如Markdown。<br/>最后，如果您确实使用HTML，请确保使用强大的杀毒软件(如<a class="ae og" href="https://github.com/cure53/DOMPurify" rel="noopener ugc nofollow" target="_blank"> <strong class="km io"> DOMPurify </strong> </a>)来清除所有不安全的代码。</li><li id="2df6" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io">对输出数据进行编码- </strong>在HTTP响应中输出用户可控制的数据时，对输出进行编码，以防止它被解释为活动内容。根据输出上下文，这可能需要应用HTML、URL、JavaScript和CSS编码的组合。</li><li id="e6b0" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io">使用适当的响应头- </strong>为了防止HTTP响应中不包含任何HTML或JavaScript的XSS，您可以使用<code class="fe nw nx ny nz b">Content-Type</code>和<code class="fe nw nx ny nz b">X-Content-Type-Options</code>头来确保浏览器按照您想要的方式解释响应。</li><li id="1542" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io">在cookie上使用HTTPOnly标志</strong> -会话cookie是一种允许网站在请求之间识别用户的机制，攻击者经常通过渗透他们的cookie来窃取管理会话。一旦cookie被盗，攻击者就可以在没有凭据或授权访问的情况下登录他们的帐户。<br/>使用HttpOnly cookies来防止JavaScript读取cookie的内容，使攻击者更难窃取会话。<br/> <em class="lg">注意:</em>这种方法只是防止攻击者读取cookie。攻击者仍然可以作为管理员用户使用活动的浏览器会话发送请求。这种方法也只有在依赖cookies作为主要识别机制时才有用。</li><li id="b77c" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated"><strong class="km io">内容安全策略。</strong>作为最后一道防线，您可以使用内容安全策略(CSP)来降低仍然发生的任何XSS漏洞的严重性。<code class="fe nw nx ny nz b">&lt;meta&gt;</code>元素可用于配置策略，例如:</li></ul><pre class="kd ke kf kg gt oh nz oi oj aw ok bi"><span id="352b" class="mw ls in nz b gy ol om l on oo">&lt;meta http-equiv="Content-Security-Policy"<br/>      content="default-src 'self'; <br/>      img-src https://*; child-src 'none';"&gt;</span></pre></div><div class="ab cl op oq hr or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ig ih ii ij ik"><h1 id="3923" class="lr ls in bd lt lu ow lw lx ly ox ma mb jt oy ju md jw oz jx mf jz pa ka mh mi bi translated">跨站点请求伪造(CSRF)</h1><p id="6561" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">跨站点请求伪造(CSRF)是一种攻击，它迫使经过身份验证的用户向他们当前正在进行身份验证的Web应用程序提交请求。<strong class="km io"> CSRF攻击利用了Web应用程序对经过身份验证的用户的信任。(相反，跨站点脚本(XSS)攻击利用了用户对特定Web应用程序的信任)</strong>。如果Web应用程序不能区分单个用户生成的请求和未经用户同意而由用户生成的请求，那么CSRF攻击就利用了Web应用程序中的漏洞。</p><p id="7f18" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">攻击者实施CSRF攻击的目的是迫使用户提交状态更改请求。例子包括:</p><ul class=""><li id="c44b" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf nn no np nq bi translated">提交或删除记录。</li><li id="b3cd" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">提交交易。</li><li id="12a5" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">购买产品。</li><li id="bc95" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">更改密码。</li><li id="abf4" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">传递信息。</li></ul><p id="665d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">攻击者经常利用社交工程平台发起CSRF攻击。这会诱使受害者单击包含恶意创建的、对特定Web应用程序的未授权请求的URL。然后，用户的浏览器将这个恶意创建的请求发送到目标Web应用程序。该请求还包括与特定网站相关的任何凭证(例如，用户会话cookies)。如果用户正在与目标Web应用程序进行活动会话，应用程序会将这个新请求视为用户提交的授权请求。因此，攻击者成功利用了Web应用程序的CSRF漏洞。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/f6ddbb79f5f3080266ccd3fcabe7168d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*pL2oCZXcIZWCJrAM8WY99Q.png"/></div></figure><h2 id="b1c0" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">CSRF攻击是如何运作的？</h2><ul class=""><li id="7fea" class="ni nj in km b kn mj kq mk kt nk kx nl lb nm lf nn no np nq bi translated">CSRF攻击的目标是无法区分有效请求和攻击者控制的伪造请求的Web应用程序。攻击者可以通过多种方式尝试利用CSRF漏洞。</li><li id="5d82" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">举个例子，假设鲍勃在samplebank.com有一个网上银行账户。他定期访问该网站，与他的朋友Alice进行交易。鲍勃不知道samplebank.com容易受到CSRF的攻击。与此同时，攻击者试图利用这个漏洞从Bob的帐户中转移5000美元。要成功发起攻击:</li></ul><ol class=""><li id="e4d0" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf pb no np nq bi translated">攻击者必须构建一个漏洞利用URL。</li><li id="a942" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf pb no np nq bi translated">攻击者还必须诱骗Bob点击漏洞利用URL。</li><li id="6ad0" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf pb no np nq bi translated">鲍勃需要与samplebank.com进行一次积极的对话。</li></ol><p id="dcfb" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">假设使用GET方法构建在线银行应用程序来提交转账请求。因此，Bob向Alice(账号为213367)转账500美元的请求可能如下所示:</p><p id="3732" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="lg">获取</em><a class="ae og" href="https://samplebank.com/onlinebanking/transfer?amount=500&amp;accountNumber=213367" rel="noopener ugc nofollow" target="_blank"><em class="lg">https://samplebank.com/onlinebanking/transfer?amount=500&amp;账号=213367 </em> </a> <em class="lg"> HTTP/1.1 </em></p><p id="7fe9" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">与成功发起CSRF攻击的第一个要求一致，攻击者必须创建一个恶意的URL来向帐户425654转账5000美元:</p><p id="fb5b" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><a class="ae og" href="https://samplebank.com/onlinebanking/transfer?amount=5000&amp;accountNumber=425654" rel="noopener ugc nofollow" target="_blank">https://samplebank.com/onlinebanking/transfer?amount=5000&amp;账号=425654 </a></p><p id="8532" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">利用各种社会工程攻击方法，攻击者可以诱骗Bob加载恶意URL。这可以通过多种方式实现。例如，在表单中包含恶意的HTML图像元素，在用户登录应用程序时经常访问的页面上放置恶意的URL，或者通过电子邮件发送恶意的URL。</p><p id="2384" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">以下是伪装URL的一个示例:</p><p id="20b1" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="lg">&lt;img src = "https://samplebank.com/onlinebanking/transfer？金额=5000 &amp;账号= 425654 " width = " 0 " height = " 0 "&gt;</em></p><p id="e4d1" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">考虑这样一种情况:攻击者在发给Bob的特制电子邮件中包含一个图像标记。收到后，Bob的浏览器应用程序会自动打开该URL，无需人工干预。结果，在未经Bob允许的情况下，一个恶意请求被发送到在线银行应用程序。如果鲍勃与samplebank.com有一个活动会话，应用程序会将其视为来自鲍勃的授权金额转账请求。然后，它会将金额转移到攻击者指定的账户。</p><h2 id="87e6" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">如何防止CSRF袭击？</h2><p id="e67f" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">从用户的角度来看，最佳实践包括注销web应用程序、不允许浏览器记住密码、自动下载图像、保护用户名和密码等。</p><p id="f0d8" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">对于网络应用和网站来说，这是防止CSRF黑客攻击的两种流行方式:</p><ol class=""><li id="2b7c" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf pb no np nq bi translated"><strong class="km io">反CSRF令牌- </strong>防止CSRF漏洞最常见的方法是基于令牌的缓解，称为<em class="lg">反CSRF </em>或<em class="lg">同步器</em>令牌。它是一个加密的安全令牌，作为隐藏字段添加到表单中。然后，反CSRF令牌被包含在任何需要cookie的经过身份验证的状态更改请求中。只有令牌通过验证，web应用程序才会接受请求。由于令牌位于隐藏字段中，并且在每次提供页面时随机生成，因此它可以保护web应用程序免受CSRF攻击。</li><li id="6c52" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf pb no np nq bi translated">CSRF攻击之所以奏效，是因为他们利用了这样一个事实:当网站A向网站B发出请求时，属于网站A的cookie会被附加到请求中。为了防止这种情况，Google Chrome团队引入了同站点cookies的概念。Set-Cookie标头中添加了一个新属性，以标记来自同一来源的Cookie。因此，只接受来自与cookie相关的源的请求，而不是跨域的请求。</li></ol></div><div class="ab cl op oq hr or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ig ih ii ij ik"><h1 id="4d28" class="lr ls in bd lt lu ow lw lx ly ox ma mb jt oy ju md jw oz jx mf jz pa ka mh mi bi translated">SQL注入</h1><p id="bcb3" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">SQL注入，也称为SQLI，是一种常见的攻击媒介，它使用<strong class="km io">恶意SQL代码进行后端数据库操作，以访问不打算显示的信息</strong><strong class="km io"/>。这些信息可能包括任意数量的项目，包括敏感的公司数据、用户列表或私人客户详细信息。</p><p id="9127" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">SQL注入对企业的影响是深远的。成功的攻击可能导致未经授权查看用户列表、删除整个表，在某些情况下，攻击者还会获得数据库的管理权限，所有这些都会对企业造成极大的损害。在计算SQLi的潜在成本时，如果电话号码、地址和信用卡信息等个人信息被盗，考虑客户信任的损失是很重要的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ms mt di mu bf mv"><div class="gh gi mr"><img src="../Images/316237d95bb9acf3b7926dd8e00f11f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*mTKfq-BXgewrnF8A57TTNw.png"/></div></div></figure><h2 id="7967" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">SQL注入是如何工作的？</h2><p id="2c39" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">要进行SQL注入攻击，攻击者必须首先在网页或web应用程序中找到易受攻击的用户输入。具有SQL注入漏洞的网页或web应用程序直接在SQL查询中使用这种用户输入。攻击者可以创建输入内容。此类内容通常被称为恶意负载，是攻击的关键部分。攻击者发送这些内容后，就会在数据库中执行恶意的SQL命令。</p><p id="9be6" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">SQL是一种查询语言，旨在管理存储在关系数据库中的数据。您可以使用它来访问、修改和删除数据。许多web应用程序和网站将所有数据存储在SQL数据库中。在某些情况下，您还可以使用SQL命令来运行操作系统命令。因此，成功的SQL注入攻击会造成非常严重的后果。</p><ul class=""><li id="1fd7" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf nn no np nq bi translated">攻击者可以使用SQL注入来查找数据库中其他用户的凭据。然后他们可以模拟这些用户。被模拟的用户可以是具有所有数据库特权的数据库管理员。</li><li id="1cfb" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">SQL允许您从数据库中选择和输出数据。SQL注入漏洞可能允许攻击者完全访问数据库服务器中的所有数据。</li><li id="b007" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">SQL还允许您更改数据库中的数据并添加新数据。例如，在一个金融应用程序中，攻击者可以使用SQL注入来更改余额、取消交易或将资金转移到他们的帐户。</li><li id="6e7d" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">您可以使用SQL从数据库中删除记录，甚至删除表。即使管理员备份了数据库，删除数据也会影响应用程序的可用性，直到数据库恢复。此外，备份可能不会覆盖最新的数据。</li><li id="6e03" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">在某些数据库服务器中，您可以使用数据库服务器访问操作系统。这可能是有意的，也可能是偶然的。在这种情况下，攻击者可以使用SQL注入作为初始媒介，然后攻击防火墙后面的内部网络。</li></ul><p id="ce2d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">SQL注入攻击有几种类型:<strong class="km io">带内SQLi ( </strong>使用数据库错误或联合命令)、<strong class="km io">盲SQLi </strong>和<strong class="km io">带外SQLi </strong>。</p><p id="b1f1" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">假设您的应用程序有一个如下所示的SQL命令，其中uname和pwd是用户的POST输入。</p><pre class="kd ke kf kg gt oh nz oi oj aw ok bi"><span id="62e5" class="mw ls in nz b gy ol om l on oo">SELECT * FROM users WHERE user_name = ’” + uname + “’ AND password=’” + pwd + “’”</span></pre><p id="4e9e" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">攻击者输入密码为“密码”或1 = 1；翻桌</p><p id="bd7d" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">因为“1=1”总是成立的，所以当查询运行时，整个用户表都将被删除。</p><h2 id="21e5" class="mw ls in bd lt mx my dn lx mz na dp mb kt nb nc md kx nd ne mf lb nf ng mh nh bi translated">如何预防SQL注入？</h2><p id="b0ac" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">以下是一些基本的编码卫生实践，以保护您的组织的网站免受SQL注入攻击:</p><ul class=""><li id="ed0d" class="ni nj in km b kn ko kq kr kt od kx oe lb of lf nn no np nq bi translated">将您的查询参数化，而不是直接将用户输入嵌入其中。</li><li id="b48b" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">对SQL中有特殊含义的字符进行转义。</li><li id="a061" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">模式-检查您的参数。</li><li id="c0d1" class="ni nj in km b kn nr kq ns kt nt kx nu lb nv lf nn no np nq bi translated">使用数据库权限限制对敏感表的访问</li></ul><p id="6916" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><strong class="km io">网络应用防火墙(WAF) </strong>通常用于过滤SQLI以及其他在线威胁。为了做到这一点，WAF通常依赖于一个庞大的、不断更新的、精心制作的签名列表，该列表允许它像外科手术一样清除恶意的SQL查询。通常，这种列表包含针对特定攻击媒介的签名，并定期进行修补，以引入针对新发现漏洞的阻止规则。</p></div><div class="ab cl op oq hr or" role="separator"><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou ov"/><span class="os bw bk ot ou"/></div><div class="ig ih ii ij ik"><h1 id="d1e9" class="lr ls in bd lt lu ow lw lx ly ox ma mb jt oy ju md jw oz jx mf jz pa ka mh mi bi translated">结论</h1><p id="3460" class="pw-post-body-paragraph kk kl in km b kn mj jo kp kq mk jr ks kt ml kv kw kx mm kz la lb mn ld le lf ig bi translated">网站安全需要成为你的首要任务之一。保持警惕并实施正确的系统将有助于你、你的网站和你的企业在避免不良行为时取得成功。但是，您可以通过采取上面概述的安全措施，让他们很难做到这一点。</p><p id="7931" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">最终，如果网络犯罪分子很难入侵一个网站，他们就会转移到其他没有实施我们谈到的网站安全策略的网站。</p><p id="8115" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">希望这能让你对网站安全感到更放心。感谢您的阅读:)</p><p id="455b" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="lg">更多内容尽在</em><a class="ae og" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="km io"><em class="lg">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
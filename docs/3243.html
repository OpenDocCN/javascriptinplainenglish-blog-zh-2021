<html>
<head>
<title>What is WebAssembly and Why Does it Matter?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是WebAssembly，为什么它很重要？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-is-webassembly-and-why-does-it-matter-2c1e5b5da60a?source=collection_archive---------7-----------------------#2021-07-02">https://javascript.plainenglish.io/what-is-webassembly-and-why-does-it-matter-2c1e5b5da60a?source=collection_archive---------7-----------------------#2021-07-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ae2019fd47d498181a64edcaa0971728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qB1af8tjQltzWKluZumtLw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">WebAssembly logo by <a class="ae jz" href="https://github.com/carlosbaraza/web-assembly-logo" rel="noopener ugc nofollow" target="_blank">Carlos Baraza</a></figcaption></figure><p id="e4ad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在过去的几年里，在web和其他领域有很多关于WebAssembly的讨论。如果你以前没有听说过，它是一种类似汇编语言的语言。它几乎可以在任何地方运行，包括web、移动、桌面和服务器。很多语言都支持编译到WebAssembly，比如C/C++ (Emscripten)、Rust、Go (TinyGo)。其他的有解释器/JIT编译器，可以编译成WebAssembly，像Python (Pyodide)和C#。在web上和本机代码中使用它有很多好处，这将在后面讨论。首先，让我们回顾一下WebAssembly和其他类似东西的历史。</p><h1 id="5812" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">沙盒web运行时的历史</h1><p id="70ea" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在网络发展之初，Java非常流行，并且发展迅速。为了帮助人们在网络上使用Java和其他语言，浏览器引入了Java小程序。Java小程序允许人们在网上使用Java和其他语言编写脚本。因为不可信的网站可以运行代码，所以它是沙箱化的，这意味着它是隔离的和安全的。然而，它需要一个浏览器之外的外部插件，并且对于小应用程序来说很笨重，所以另一种为网络构建的语言JavaScript应运而生。</p><p id="013b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">随着Java和Java小程序开始衰落，JavaScript开始流行起来。最终，因为它没有很好地集成到web中，并且有许多缺陷，Java小程序被从大多数浏览器中删除。JavaScript成为web上唯一的语言，虽然它运行良好，但它从未对其他语言的编码提供很大的支持，并且它的性能也不是最理想的。</p><p id="44ea" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2013年，一个新的JavaScript子集诞生了，它被设计成可以快速运行，并且可以在多种语言中使用。它被称为ASM . js。ASM . js是为web实现低级汇编的一个很好的实验，但是还可以做一些改进。</p><p id="2209" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了修复asm.js的一些问题，比如更快的解析，2017年发布了WebAssembly。它很快获得了流行和浏览器的支持。目前，它受Chrome、Edge、Firefox、Safari等支持。</p><h1 id="a09c" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">WebAssembly到底是什么？</h1><p id="95cc" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">WebAssembly类似于Assembly，只是它是跨平台的、隔离的，并且可以在浏览器中运行。许多人将其与JVM字节码相比较，JVM字节码是Java、Scala和Kotlin等语言使用的跨平台字节码。</p><p id="1352" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，也有一些不同之处。首先，WebAssembly被设计成完全沙盒化和隔离的，不像JVM。JVM可以沙箱化，Java小程序已经展示了这一点，但是因为JVM在设计时没有考虑到这一点，所以要困难得多。另一方面，WebAssembly从一开始就是为此而设计的，所有主要的WebAssembly编译器/运行时都是沙箱化的。</p><p id="cd95" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此外，WebAssembly内置于web中，比JVM更轻量级。你甚至可以使用像<a class="ae jz" href="https://wasmer.io/" rel="noopener ugc nofollow" target="_blank"> Wasmer </a>这样的编译器提前将你的代码编译成一个非常小的可执行文件。</p><p id="8455" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，WebAssembly内置于web中，而不需要在web中使用插件。</p><h1 id="6995" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">WebAssembly的功能</h1><h2 id="c7d3" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">支持多种语言</h2><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/1dab07341cb58e43c0e23b5d374e6120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lj1IhVJXsd6LqQBa"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@freedomstudios?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Graham Holtshausen</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="da09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">WebAssembly与本机汇编或JVM一样，可以与许多不同的语言一起工作。有些语言，比如Rust和Go，天生支持编译成目标正确的WebAssembly。其他的，像C/C++，TypeScript和Swift，可以用另一个编译器编译成WebAssembly。最后，有些语言不能直接编译成WebAssembly，但是它们的运行时可以编译成WebAssembly，比如Python和C#。只需做一点工作，您就可以将更多的语言编译成WebAssembly，因为许多编译器使用LLVM，可以使用Emscripten将LLVM编译成WebAssembly。</p><h2 id="99bc" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">沙盒和安全</h2><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ms"><img src="../Images/d3ef638f17fb8c3782e43b203ddc72a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ESrFq1kDm3mEdn_y"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@markuswinkler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Winkler</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9d01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">默认情况下，WebAssembly是完全沙箱化和隔离的，确保WebAssembly代码不能访问运行时不希望它访问的内容，即使您不使用容器或虚拟机。根据您使用的运行时，您可以测量WebAssembly脚本占用多少RAM和CPU，并允许它访问有限的文件系统。这种沙盒结合提前将WebAssembly编译成本机代码，使得快速运行低开销的沙盒代码成为可能。</p><h2 id="de8f" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">跨平台</h2><figure class="mo mp mq mr gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mt"><img src="../Images/066c5a48e24e1c2e19362b48e34a02af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2CFDSARaVRkgmuUv"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AltumCode</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="64b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因为WebAssembly被设计成web的一部分，所以它是跨平台的，可以在所有现代浏览器上运行。它还可以编译到许多不同的平台上。WebAssembly可以在桌面、移动和web上完全运行，无需太多工作。它甚至可以在具有特定运行时的平台上实现接近本机的性能。</p><h1 id="b8b6" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">如何使用WebAssembly</h1><h2 id="ec90" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">在浏览器中运行WebAssembly</h2><p id="e8f4" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">大多数浏览器都支持WebAssembly。你只需要<code class="fe mu mv mw mx b">import()</code>或<code class="fe mu mv mw mx b">fetch()</code>模块，然后运行<code class="fe mu mv mw mx b">WebAssembly.instantiate(bytes, importObject)</code>。</p><figure class="mo mp mq mr gt jo"><div class="bz fp l di"><div class="my mz l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Example usage of WebAssembly from MDN</figcaption></figure><p id="7617" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">关于如何在浏览器中使用WebAssembly和JavaScript的更多信息，这里有一个很好的MDN页面<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/WebAssembly/Using_the_JavaScript_API" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="b26b" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">本机运行WebAssembly</h2><p id="c610" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">这有点复杂，但仍然不是很难。有许多不同的低开销WebAssembly解释器和编译器。最受欢迎的两个是<a class="ae jz" href="https://wasmtime.dev/" rel="noopener ugc nofollow" target="_blank"> Wasmtime </a>和<a class="ae jz" href="https://wasmer.io/" rel="noopener ugc nofollow" target="_blank"> Wasmer </a>。Wasmer比Wasmtime有一些优势，比如支持LLVM后端以更快地执行代码，支持更多的语言。</p><p id="ba9f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然而，Wasmtime得到了字节码联盟的支持，字节码联盟是一群像Google和Mozilla这样的公司，它们是WebAssembly的领导者。这完全取决于你需要什么，而且像Lucet这样的选择更多，所以在决定之前，你要对主题进行自己的研究。我推荐的一点是，如果你需要使用WebAssembly编译器API，你可以使用Rust来构建本地使用WebAssembly的应用程序。许多流行的WebAssembly工具都内置了Rust，所以使用相同的语言是最容易的。</p><h1 id="2415" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="21d2" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">WebAssembly是一种非常有前途的语言，它将继续发展和改进。希望你对WebAssembly有所了解，感谢阅读。</p><h1 id="0482" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">WebAssembly资源</h1><h2 id="5e65" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">语言编译器</h2><p id="e7ca" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Rust — <a class="ae jz" href="https://github.com/rustwasm/wasm-bindgen" rel="noopener ugc nofollow" target="_blank"> Wasm Bindgen </a></p><p id="8744" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Go — <a class="ae jz" href="https://golang.org/cmd/go/#hdr-Environment_variables" rel="noopener ugc nofollow" target="_blank"> Wasm GOARCH </a></p><p id="9a0a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">C/C++ — <a class="ae jz" href="https://emscripten.org/" rel="noopener ugc nofollow" target="_blank"> Emcscripten </a></p><p id="4fdb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">斯威夫特— <a class="ae jz" href="https://swiftwasm.org/" rel="noopener ugc nofollow" target="_blank">斯威夫特WASM </a></p><p id="5769" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">C#-<a class="ae jz" href="https://dotnet.microsoft.com/apps/aspnet/web-apps/blazor" rel="noopener ugc nofollow" target="_blank">Blazor</a>用于web应用程序，或者<a class="ae jz" href="https://github.com/dotnet/runtimelab/tree/feature/NativeAOT" rel="noopener ugc nofollow" target="_blank">native aut</a>用于提前实验性地编译c#到多个目标，包括WASM</p><p id="29e6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Python — <a class="ae jz" href="https://pyodide.org/en/stable/" rel="noopener ugc nofollow" target="_blank"> Pyodide </a></p><p id="a5fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">TypeScript—<a class="ae jz" href="https://www.assemblyscript.org/" rel="noopener ugc nofollow" target="_blank">AssemblyScript</a>(注意:与TypeScript语法相同，但assembly script使用的类型略有不同)</p><p id="5756" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Java或其他JVM语言— <a class="ae jz" href="https://github.com/i-net-software/JWebAssembly" rel="noopener ugc nofollow" target="_blank"> JWebAssembly </a>或<a class="ae jz" href="https://github.com/konsoletyper/teavm" rel="noopener ugc nofollow" target="_blank"> TeaVM </a></p><p id="3bf1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">哈斯克尔——阿斯特留斯</p><h2 id="3dc2" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">本机编译器的web程序集</h2><p id="e45b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated"><a class="ae jz" href="https://wasmtime.dev/" rel="noopener ugc nofollow" target="_blank"> Wasmtime </a></p><p id="81f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">瓦斯默</p><p id="d496" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/bytecodealliance/lucet" rel="noopener ugc nofollow" target="_blank">朗讯</a></p><p id="9bb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/WebAssembly/wabt/blob/main/wasm2c/README.md" rel="noopener ugc nofollow" target="_blank"> Wasm2C </a></p><p id="0789" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/bytecodealliance/wasm-micro-runtime" rel="noopener ugc nofollow" target="_blank"> Wasm微运行时</a></p><p id="8272" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">(更多精彩尽在<a class="ae jz" href="https://github.com/appcypher/awesome-wasm-runtimes" rel="noopener ugc nofollow" target="_blank">牛逼的WASM运行时</a></p><h2 id="dca0" class="mb kz in bd la mc md dn le me mf dp li kl mg mh lm kp mi mj lq kt mk ml lu mm bi translated">其他的</h2><p id="466a" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/bytecodealliance/wizer" rel="noopener ugc nofollow" target="_blank">向导</a> —预初始化WASM模块</p><p id="49b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/WebAssembly/binaryen" rel="noopener ugc nofollow" target="_blank">binary en</a>——一组用于WASM的工具，其中一些已经提到过了</p><p id="7fb6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/kanaka/awesome-wasm" rel="noopener ugc nofollow" target="_blank">牛逼的WASM </a></p><p id="20b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/vshymanskyy/awesome-wasm-tools" rel="noopener ugc nofollow" target="_blank">牛逼的WASM工具</a></p><p id="0b37" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/appcypher/awesome-wasm-langs" rel="noopener ugc nofollow" target="_blank">牛逼的WASM郎</a></p><p id="0366" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/appcypher/awesome-wasm-runtimes" rel="noopener ugc nofollow" target="_blank">超棒的WASM运行时间</a></p><p id="5ea1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="na">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="na">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
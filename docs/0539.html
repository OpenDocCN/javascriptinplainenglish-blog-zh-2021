<html>
<head>
<title>Adding Graphics to a React App with D3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用D3向React应用程序添加图形</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-f7eb83392fa8?source=collection_archive---------16-----------------------#2021-02-01">https://javascript.plainenglish.io/adding-graphics-to-a-react-app-with-d3-f7eb83392fa8?source=collection_archive---------16-----------------------#2021-02-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8dfc15994d5292da1ac7d242b31ab5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XHsUdaWO8Pe79fum"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@randytarampi?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Randy Tarampi</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="48ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3让我们可以轻松地向前端web应用添加图形。</p><p id="461d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vue是一个流行的前端web框架。</p><p id="55a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们合作得很好。在本文中，我们将了解如何使用D3为Vue应用添加图形。</p><h1 id="764d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">入门指南</h1><p id="29a6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们通过运行<code class="fe me mf mg mh b">npm i d3</code>来安装D3。</p><p id="1bfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以在我们的Vue应用程序中使用它。</p><h1 id="c921" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">数据连接</h1><p id="4e26" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">现在我们安装了D3，我们可以在我们的应用程序中使用它。</p><p id="1666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">D3让我们可以轻松地将一组条目呈现到一个列表中。</p><p id="1fd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="11a6" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="cff7" class="mq lc iq mh b gy mv ms l mt mu">const arr = [10, 20, 30, 25, 15];</span><span id="365c" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    d3.select("#list")<br/>      .selectAll("li")<br/>      .data(arr)<br/>      .text((d) =&gt; d);<br/>  }, []);</span><span id="ab69" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;ul id="list"&gt;<br/>        {arr.map(() =&gt; (<br/>          &lt;li&gt;&lt;/li&gt;<br/>        ))}<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="3611" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将D3代码放入<code class="fe me mf mg mh b">useEffect</code>回调中以获取列表，然后选择所有的<code class="fe me mf mg mh b">li</code>元素。</p><p id="c6d5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将数字放入<code class="fe me mf mg mh b">li</code>元素中。</p><h1 id="71a7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">挽救（saving的简写）</h1><p id="2bb0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用D3将SVG添加到我们的组件中。</p><p id="e8e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="35f8" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="77b5" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const width = 300;<br/>    const height = 300;<br/>    const svg = d3<br/>      .select("#svgcontainer")<br/>      .append("svg")<br/>      .attr("width", width)<br/>      .attr("height", height);<br/>    svg<br/>      .append("line")<br/>      .attr("x1", 100)<br/>      .attr("y1", 100)<br/>      .attr("x2", 200)<br/>      .attr("y2", 200)<br/>      .style("stroke", "rgb(255,0,0)")<br/>      .style("stroke-width", 2);<br/>  }, []);</span><span id="a739" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;div id="svgcontainer"&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="c906" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">添加一行。</p><p id="b861" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0c46" class="mq lc iq mh b gy mr ms l mt mu">const svg = d3<br/>  .select("#svgcontainer")<br/>  .append("svg")<br/>  .attr("width", width)<br/>  .attr("height", height);</span></pre><p id="98ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将<code class="fe me mf mg mh b">svg</code>添加到ID为<code class="fe me mf mg mh b">svgcontainer</code>的div中。</p><p id="1845" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">attr</code>方法设置<code class="fe me mf mg mh b">svg</code>的<code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>。</p><p id="22fc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过书写添加该行:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5a74" class="mq lc iq mh b gy mr ms l mt mu">svg<br/>  .append("line")<br/>  .attr("x1", 100)<br/>  .attr("y1", 100)<br/>  .attr("x2", 200)<br/>  .attr("y2", 200)<br/>  .style("stroke", "rgb(255,0,0)")<br/>  .style("stroke-width", 2);</span></pre><p id="6bf1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">'line'</code>调用<code class="fe me mf mg mh b">append</code>来添加行。</p><p id="7919" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们添加<code class="fe me mf mg mh b">x1</code>和<code class="fe me mf mg mh b">y1</code>属性来添加线条起点的坐标。</p><p id="dd43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe me mf mg mh b">x2</code>和<code class="fe me mf mg mh b">y2</code>属性来添加线条末端的坐标。</p><p id="ca46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们设置线条的笔画颜色。</p><p id="51df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们设置笔画宽度来设置线条粗细。</p><h1 id="6278" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">矩形</h1><p id="cbaa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">append</code>方法添加一个矩形，用<code class="fe me mf mg mh b">'rect'</code>作为参数。</p><p id="302b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="d191" class="mq lc iq mh b gy mr ms l mt mu">import React, { useEffect } from "react";<br/>import * as d3 from "d3";</span><span id="ceaa" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  useEffect(() =&gt; {<br/>    const width = 300;<br/>    const height = 300;<br/>    const svg = d3<br/>      .select("#svgcontainer")<br/>      .append("svg")<br/>      .attr("width", width)<br/>      .attr("height", height);<br/>    svg<br/>      .append("rect")<br/>      .attr("x", 20)<br/>      .attr("y", 20)<br/>      .attr("width", 200)<br/>      .attr("height", 100)<br/>      .attr("fill", "green");<br/>  }, []);</span><span id="fa44" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;div id="svgcontainer"&gt;&lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="3ef4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加<code class="fe me mf mg mh b">svg</code>的方式与前面的例子相同。</p><p id="92ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">append</code>方法添加矩形。</p><p id="ee90" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>属性是圆圈左上角的x和y坐标。</p><p id="3c5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">width</code>和<code class="fe me mf mg mh b">height</code>属性是矩形的宽度和高度。</p><p id="15ba" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">fill</code>是矩形的背景色。</p><h1 id="c312" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="5ab9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用D3给React应用程序添加基本形状。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Animation in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/animation-in-javascript-d97f84be482b?source=collection_archive---------15-----------------------#2021-10-08">https://javascript.plainenglish.io/animation-in-javascript-d97f84be482b?source=collection_archive---------15-----------------------#2021-10-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/ec7857f959fdef0d600e7532765ad35e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BtYfp56QK1Kuh-Cg.PNG"/></div></div></figure><h1 id="c356" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="ea61" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">创建动画有三种方法。</p><ol class=""><li id="e466" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq ly lz ma mb bi translated">通过使用正确命名的CSS动画。</li><li id="b453" class="lr ls in kv b kw mc la md le me li mf lm mg lq ly lz ma mb bi translated">通过使用CSS过渡。</li><li id="ebf0" class="lr ls in kv b kw mc la md le me li mf lm mg lq ly lz ma mb bi translated">通过在<a class="ae mh" href="https://www.technologiesinindustry4.com/2021/08/javascript-yui-test-framework.html" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>中写代码。</li></ol><p id="3121" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated">在这篇文章中，我们将看看如何用JavaScript做一些基本的动画。</p><h1 id="3e94" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">描述</h1><ul class=""><li id="abb5" class="lr ls in kv b kw kx la lb le ml li mm lm mn lq mo lz ma mb bi translated">动画非常简单和容易。</li><li id="7298" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">每秒钟多次绘制不同的场景。</li><li id="7410" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">在绘制船只和小行星时，我们需要它们的位置、大小、形状等基本数据。</li><li id="0bcc" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">这些数据将用于翻译和旋转上下文，结果所有内容看起来都在正确的位置。</li><li id="b458" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们每一帧都更新数据，并随着数据的变化一遍又一遍地重绘场景，以制作场景动画。</li></ul><h1 id="e059" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">使用<a class="ae mh" href="https://www.technologiesinindustry4.com/2021/08/javascript-yui-test-framework.html" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>制作动画的重要性</h1><ul class=""><li id="fa16" class="lr ls in kv b kw kx la lb le ml li mm lm mn lq mo lz ma mb bi translated">当我们在CSS中使用过渡或动画制作动画时，我们的浏览器为我们做了大量实际的动画制作工作。</li><li id="d6dc" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们实际上所做的只是定义过渡和动画的开始状态和结束状态。</li><li id="617f" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">如果我们的动画有关键帧，我们也定义一些中间状态。</li><li id="c31b" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们在动画生命的某些点定义了随机属性值。</li><li id="659e" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">这是对这些点之间的值的感叹，这对于动画的工作非常重要。</li><li id="ef59" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们的浏览器为我们做的正是这种爆发。</li><li id="fbfa" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们需要对我们的关键帧非常精确，在许多时间点上，我们希望我们的属性有一个确定的值。</li><li id="d463" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">这种精确性使得制作大量真实场景的动画变得非常困难。</li><li id="cc34" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">使用<a class="ae mh" href="https://www.technologiesinindustry4.com/2021/08/javascript-yui-test-framework.html" rel="noopener ugc nofollow" target="_blank"> JavaScript，</a>大门向我们敞开，我们可以创建任何类型的动画，而不用担心技术可行性，因为我们可以更好地控制我们动画的所有特性。</li><li id="36ef" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">例如，不使用JavaScript来创建类似下雪的效果将会非常困难。</li></ul><h1 id="ca85" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">处理动画</h1><ul class=""><li id="16be" class="lr ls in kv b kw kx la lb le ml li mm lm mn lq mo lz ma mb bi translated">通过直接使用canvas方法和调用自定义函数将图形绘制到画布上。</li><li id="e2e2" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">只有当脚本在正常情况下完成执行时，我们才意识到这些结果看起来就像在画布上一样。</li><li id="3286" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">例如，它不太可能从循环的内部制作动画。</li><li id="ca72" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">这意味着我们需要一个方法来执行我们的绘图功能超过一段时间。有两种方法可以控制这样的动画。</li></ul><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/433d08c70c4191bce2689918bba92719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/0*wGm5yhYCUI92SHag.jpg"/></div></figure><h2 id="35c7" class="mu jw in bd jx mv mw dn kb mx my dp kf le mz na kj li nb nc kn lm nd ne kr nf bi translated">预设更新</h2><p id="8bd4" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">为了在一段时间内调用一个特定的函数，我们使用以下函数:</p><ul class=""><li id="d837" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq mo lz ma mb bi translated">setInterval()，</li><li id="cff2" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">setTimeout()和</li><li id="88ce" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">requestAnimationFrame()</li></ul><p id="edf1" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated"><strong class="kv io"> setInterval () </strong></p><p id="6ddf" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated">每延迟毫秒开始频繁执行function所述的功能。</p><p id="732e" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated"><strong class="kv io"> setTimeout() </strong></p><p id="66a4" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated">以延迟毫秒为单位执行function指定的功能。</p><p id="a081" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated"><strong class="kv io"> requestAnimationFrame(回调)</strong></p><ul class=""><li id="162c" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq mo lz ma mb bi translated">向浏览器传达我们希望执行动画的信息。</li><li id="99ee" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">请求浏览器<a class="ae mh" href="https://www.technologiesinindustry4.com/" rel="noopener ugc nofollow" target="_blank">在下一次重画之前调用一个明确的函数来更新动画</a>。</li></ul><h1 id="6a3f" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">移动的圆圈</h1><ul class=""><li id="e597" class="lr ls in kv b kw kx la lb le ml li mm lm mn lq mo lz ma mb bi translated">让我们从一个非常简单的场景开始，作为一个移动的圆圈。</li><li id="8d44" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">这个圆在我们将要移动的画布上有一个x和y坐标位置。</li><li id="f0d7" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">以正常方式创建一个新文件夹。</li><li id="5133" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">复制drawing.js库和样式表。</li><li id="b612" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">用下面的代码创建一个新的文件exercise6.html。</li></ul><pre class="mq mr ms mt gt ng nh ni nj aw nk bi"><span id="011b" class="mu jw in nh b gy nl nm l nn no"><em class="np">&lt;!doctype html&gt;</em></span><span id="27f0" class="mu jw in nh b gy nq nm l nn no">&lt;html&gt;</span><span id="8c17" class="mu jw in nh b gy nq nm l nn no">&lt;head&gt;</span><span id="e9bb" class="mu jw in nh b gy nq nm l nn no">&lt;title&gt;Animation&lt;/title&gt;</span><span id="c97b" class="mu jw in nh b gy nq nm l nn no">&lt;link rel="stylesheet" href="styles.css"&gt;</span><span id="18d3" class="mu jw in nh b gy nq nm l nn no">&lt;script src="drawing.js"&gt;&lt;/script&gt;</span><span id="502d" class="mu jw in nh b gy nq nm l nn no">&lt;/head&gt;</span><span id="1b40" class="mu jw in nh b gy nq nm l nn no">&lt;body&gt;</span><span id="c611" class="mu jw in nh b gy nq nm l nn no">&lt;h1&gt;Animation&lt;/h1&gt;</span><span id="712d" class="mu jw in nh b gy nq nm l nn no">&lt;canvas id="asteroids" width="300" height="300"&gt;&lt;/canvas&gt;</span><span id="02a9" class="mu jw in nh b gy nq nm l nn no">&lt;script&gt;</span><span id="e0f4" class="mu jw in nh b gy nq nm l nn no">var context = document.getElementById("asteroids").</span><span id="8426" class="mu jw in nh b gy nq nm l nn no">getContext("2d");</span><span id="5f24" class="mu jw in nh b gy nq nm l nn no">context.strokeStyle = "white";</span><span id="dc09" class="mu jw in nh b gy nq nm l nn no">context.lineWidth = 1.5;</span><span id="fbea" class="mu jw in nh b gy nq nm l nn no">var x = 0, y = context.canvas.height / 2;</span><span id="699b" class="mu jw in nh b gy nq nm l nn no">function frame() {</span><span id="557e" class="mu jw in nh b gy nq nm l nn no">context.clearRect(0, 0, context.canvas.width, context.</span><span id="289c" class="mu jw in nh b gy nq nm l nn no">canvas.height);</span><span id="5035" class="mu jw in nh b gy nq nm l nn no">draw(context);</span><span id="f629" class="mu jw in nh b gy nq nm l nn no">update();</span><span id="1749" class="mu jw in nh b gy nq nm l nn no">}</span><span id="3611" class="mu jw in nh b gy nq nm l nn no">function update() {</span><span id="b56d" class="mu jw in nh b gy nq nm l nn no">x += 1;</span><span id="ca30" class="mu jw in nh b gy nq nm l nn no">}</span><span id="7774" class="mu jw in nh b gy nq nm l nn no">function draw(ctx) {</span><span id="2fef" class="mu jw in nh b gy nq nm l nn no">draw_grid(ctx);</span><span id="1ccc" class="mu jw in nh b gy nq nm l nn no">ctx.beginPath();</span><span id="fa8e" class="mu jw in nh b gy nq nm l nn no">ctx.arc(x, y, 40, 0, 2 * Math.PI);</span><span id="127b" class="mu jw in nh b gy nq nm l nn no">ctx.fill();</span><span id="31c8" class="mu jw in nh b gy nq nm l nn no">ctx.stroke();</span><span id="16dd" class="mu jw in nh b gy nq nm l nn no">}</span><span id="cdc9" class="mu jw in nh b gy nq nm l nn no">setInterval(frame, 1000.0/60.0); // 60 fps</span><span id="a2fc" class="mu jw in nh b gy nq nm l nn no">&lt;/script&gt;</span><span id="53cb" class="mu jw in nh b gy nq nm l nn no">&lt;/body&gt;</span><span id="045f" class="mu jw in nh b gy nq nm l nn no">&lt;/html&gt;</span></pre><ul class=""><li id="1252" class="lr ls in kv b kw lt la lu le lv li lw lm lx lq mo lz ma mb bi translated">代码通常是熟悉的，但是，有一些新的东西需要注意。</li><li id="1e81" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">Main，我们把x和y坐标作为全局变量。</li><li id="62c8" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">我们同样将代码更新为一系列函数，如frame、update和draw。</li><li id="92ba" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">框架函数准备了三个独立的东西。</li><li id="412b" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">它使用context.clearRect方法释放画布。</li><li id="9f13" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">以前它调用draw函数在x，y位置画一个圆。</li><li id="4496" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">它调用update函数，将x坐标向右移动一个像素。</li><li id="33a6" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">最后一个新东西是对setInterval <a class="ae mh" href="https://www.technologiesinindustry4.com/" rel="noopener ugc nofollow" target="_blank">的调用，它调度frame函数每秒被调用60次。</a></li><li id="a730" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">结果是每次调用框架函数。</li><li id="d4e6" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">它清除画布，绘制一个网格，在当前位置绘制一个圆，并将该位置向右移动。</li><li id="6bc0" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">对setInterval的调用传入要调用的函数frame</li><li id="5574" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">呼叫之间的时间间隔(以毫秒计)为1000.0 / 60.0。</li><li id="7de8" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">因此，每隔六十分之一秒调用一次frame函数。</li><li id="eb8c" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">圆圈以每秒60像素的速度向右移动。</li><li id="0a76" class="lr ls in kv b kw mc la md le me li mf lm mg lq mo lz ma mb bi translated">它不是扩展可见的，一旦圆移动到画布的末端，x的值继续增加。</li></ul><p id="22d1" class="pw-post-body-paragraph kt ku in kv b kw lt ky kz la lu lc ld le mi lg lh li mj lk ll lm mk lo lp lq ig bi translated">更多详情请访问:<a class="ae mh" href="https://www.technologiesinindustry4.com/2021/10/animation-in-javascript.html" rel="noopener ugc nofollow" target="_blank">https://www . technologiesinindustry 4 . com/2021/10/animation-in-JavaScript . html</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Create a Custom Video Controller Using ReactPlayer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ReactPlayer创建自定义视频控制器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-custom-video-controller-using-react-player-7a3d7ed8850a?source=collection_archive---------1-----------------------#2021-04-11">https://javascript.plainenglish.io/create-custom-video-controller-using-react-player-7a3d7ed8850a?source=collection_archive---------1-----------------------#2021-04-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/b557eeaac6c1533198a35cc5a3465309.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*ZnpsY_GkUGdWPsJ-pETTOQ.gif"/></div></div></figure><p id="b4e0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我当时在做一个项目，项目的要求是实现一个可以播放YouTube视频的视频播放器。我想你们都知道YouTube视频可以通过使用iframe来播放，但通过使用它，处理控件会更加困难。所以我们决定使用一个名为“<strong class="jx io"> <em class="kt"> react-player </em> </strong>”的播放器库。</p><div class="ku kv gp gr kw kx"><a href="https://www.npmjs.com/package/react-player" rel="noopener  ugc nofollow" target="_blank"><div class="ky ab fo"><div class="kz ab la cl cj lb"><h2 class="bd io gy z fp lc fr fs ld fu fw im bi translated">反应型玩家</h2><div class="le l"><h3 class="bd b gy z fp lc fr fs ld fu fw dk translated">一个React组件，用于播放各种URL，包括文件路径、YouTube、脸书、Twitch、SoundCloud…</h3></div><div class="lf l"><p class="bd b dl z fp lc fr fs ld fu fw dk translated">www.npmjs.com</p></div></div><div class="lg l"><div class="lh l li lj lk lg ll jt kx"/></div></div></a></div><p id="3b70" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是在使用这个库的时候，我们发现他们没有音量控制功能。所以我们决定通过使用玩家预先定义的方法为他们创建一个自定义的控制面板。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/483e0753a184f9595f3fbab5412b1216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YlkrWMQjdnYafHa1eMeH2g.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Player component (states screenshot)</figcaption></figure><p id="b44e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我的组件状态。</p><ol class=""><li id="0edf" class="lv lw in jx b jy jz kc kd kg lx kk ly ko lz ks ma mb mc md bi translated"><strong class="jx io"> <em class="kt"> isPlay: </em> </strong>处理视频是正在播放还是处于暂停状态。</li><li id="1b08" class="lv lw in jx b jy me kc mf kg mg kk mh ko mi ks ma mb mc md bi translated"><strong class="jx io"> <em class="kt"> currentSeek: </em> </strong>用于显示实时视频渲染Seek，比如视频在哪个时间点播放。</li><li id="2d51" class="lv lw in jx b jy me kc mf kg mg kk mh ko mi ks ma mb mc md bi translated"><strong class="jx io"> <em class="kt">音量条:</em> </strong>用于向用户显示音量状态，像进度条形式的0到1。</li><li id="841f" class="lv lw in jx b jy me kc mf kg mg kk mh ko mi ks ma mb mc md bi translated"><strong class="jx io"> <em class="kt">音量:</em> </strong>设置播放器当前的视频音量。</li><li id="6281" class="lv lw in jx b jy me kc mf kg mg kk mh ko mi ks ma mb mc md bi translated"><strong class="jx io"><em class="kt">totalDurationOfVideo:</em></strong>获取视频的总时间。</li><li id="7bd2" class="lv lw in jx b jy me kc mf kg mg kk mh ko mi ks ma mb mc md bi translated"><strong class="jx io"> <em class="kt">静音:</em> </strong>处理视频是否静音。</li></ol><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/79bab2e6f861202ac12ba995dc12385b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QkPTV8-uv5G3L-QWg8V05A.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Custom functions (Screen Shot)</figcaption></figure><p id="f1ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="kt">handleVolumeChange</em></strong>:该功能将处理视频的音量，并在用户从音量范围栏改变音量时进行设置。它将从范围栏中获取当前值，并将其设置为视频的音量(I <strong class="jx io">已将音量栏的值设置为最小值0和最大值100，<em class="kt">音量</em>用于设置视频的音量，因为视频可以有0到1的音量范围。这就是为什么我把这个值除以100，使其浮动，而“<em class="kt"> volumeBar </em>”代表输入范围，这样它就可以在UI中显示用户当前的音量状态。</strong>)</p><p id="745a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="kt">手柄暂停</em> </strong>:该功能将暂停视频。</p><p id="69a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="kt"> handlePlay </em> </strong>:该功能将播放视频；此外，视频第一次播放时，它将获得视频的总时长，并将其设置在一个状态变量中。</p><p id="72e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"/></p><p id="b3a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="kt">handleSeekChnage</em></strong>:当用户试图向前或向后移动视频时，将调用该函数。它将获取用户想要播放视频的当前视频时间，并将其设置为currentSeek状态，以将视频移动到用户所需的时间。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/af26d0e60c928d98b02b1553b68bd885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B96AjPSQriBvNXmlIfQyFw.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Video Player</figcaption></figure><p id="a13a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦你安装了<strong class="jx io"> <em class="kt"> React-Player </em> </strong>包，这里有一些我正在使用的道具:</p><blockquote class="mj mk ml"><p id="985f" class="jv jw kt jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated"><strong class="jx io">【URL】</strong>为视频链接，<strong class="jx io"><em class="in">width/height</em></strong>t为播放器离职，<strong class="jx io"> <em class="in">视频的音量</em> </strong>，<strong class="jx io"> <em class="in">静音</em> </strong>，为视频静音状态，<strong class="jx io"> <em class="in"> ref </em> </strong>，<strong class="jx io"> <em class="in"> onProgress </em> </strong>获取视频实时搜索的方法。<strong class="jx io"> <em class="in">播放</em> </strong>设置视频播放/暂停状态。</p></blockquote><p id="5553" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于自定义控制面板，我们正在发送一些道具。</p><blockquote class="mj mk ml"><p id="2cd1" class="jv jw kt jx b jy jz ka kb kc kd ke kf mm kh ki kj mn kl km kn mo kp kq kr ks ig bi translated"><strong class="jx io"> <em class="in"> currentSeek </em> </strong>为实时视频寻道更新UI，<strong class="jx io"> <em class="in"> Playing </em> </strong>为显示使用中的视频正在播放或暂停UI。<strong class="jx io"> <em class="in">音量</em> </strong>更新音量条UI、<strong class="jx io"> <em class="in">手柄播放</em> </strong>播放视频、<strong class="jx io"> <em class="in">手柄暂停</em> </strong>暂停视频等等。</p></blockquote><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/5af78a72eee5263833c45183819a9e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcjWLXxJL4PLsS-EUgAf2Q.png"/></div></div><figcaption class="lr ls gj gh gi lt lu bd b be z dk">Custom Control panel (screen shoot)</figcaption></figure><p id="2f71" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在控制面板中有3个部分。1.对于<strong class="jx io"> <em class="kt">播放/暂停</em> </strong> UI图标。2.<strong class="jx io"> <em class="kt">音量</em> </strong>图标和音量进度条。3.视频实时<strong class="jx io"> <em class="kt">求</em> </strong>求进度条</p><p id="98c6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="kt">道具.播放</em> </strong>会处理视频是播放还是暂停；它将分别显示图标。</p><p id="addf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> <em class="kt"> props.volume </em> </strong>是在音量图标处于高/中或静音状态时，在UI中显示视频音量状态。并在进度条上显示。</p><p id="a181" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="kt">props . current Seek</em></strong>是处理实时视频seek。</p><p id="8538" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"><em class="kt">on input</em></strong>卷和寻道栏的方法将执行各自的功能。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/b524c529a10bf1642ca9f9913535496c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9jAJwFaN543l7K1rF-7F5w.png"/></div></div></figure><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lm"><img src="../Images/5af78a72eee5263833c45183819a9e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wcjWLXxJL4PLsS-EUgAf2Q.png"/></div></div></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="5a9f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我也有一个YouTube频道，我在上面报道了一些关于React/node . js/MongoDB/React Native/Flutter的话题。去看看。</p><h1 id="2e49" class="mw mx in bd my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt bi translated">编程技术编码器</h1><p id="b3ef" class="pw-post-body-paragraph jv jw in jx b jy nu ka kb kc nv ke kf kg nw ki kj kk nx km kn ko ny kq kr ks ig bi translated">回购链接:<a class="ae nz" href="https://github.com/zainbinfurqan/custom-video-player-contorl-panel/tree/main" rel="noopener ugc nofollow" target="_blank">https://github . com/zainbinfurqan/custom-video-player-control-panel/tree/main</a></p><p id="06a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">更多内容看</em> <a class="ae nz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="kt">说白了. io </em> </a> <em class="kt">。报名参加我们的</em> <a class="ae nz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="kt">免费每周简讯</em> </a> <em class="kt">。在我们的</em> <a class="ae nz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="kt">社区</em> </a> <em class="kt">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Stop Using Redux Use This Instead</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">停止使用Redux，改用这个</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/stop-using-redux-and-easy-peasy-consider-react-context-instead-8b653f909d00?source=collection_archive---------6-----------------------#2021-07-07">https://javascript.plainenglish.io/stop-using-redux-and-easy-peasy-consider-react-context-instead-8b653f909d00?source=collection_archive---------6-----------------------#2021-07-07</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e9e1" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在你的应用中使用React上下文来减少样板代码</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/559853cd406f42cef236c27d91b233a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2qX2scod1_8rC-MVSWVK6Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: Pexels</figcaption></figure><p id="b8a7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">之前我写了<a class="ae lr" href="https://betterprogramming.pub/stop-using-redux-consider-easy-peasy-if-you-want-3214c41bcce5" rel="noopener ugc nofollow" target="_blank">停止使用Redux——如果你想要</a>,那就简单了，它像病毒一样传播开来，我的一些读者发表了评论，要求我将它与React上下文进行比较。</p><p id="a854" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这就是了。</p><p id="2bb6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">嗯，我是一个创建网站的全栈式web开发人员。有时候，我得到的项目可以在一周内完成，有些则需要几个月。</p><p id="8049" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是因为客户有一些基本的需求，比如一些人喜欢Redux、Easy Peasy或Context，而另一些人说你可以自由使用任何状态管理工具。</p><p id="2bd6" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，我必须学习和实现特定的状态管理工具。</p><p id="b7ae" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">所以今天，我将用一个简单的例子来比较Context、Redux和Easy Peasy。</p><p id="d780" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们开始吧。</p><h2 id="8a7b" class="ls lt iq bd lu lv lw dn lx ly lz dp ma le mb mc md li me mf mg lm mh mi mj mk bi translated">为什么我们要使用React Context、Redux和Easy Peasy？</h2><p id="8d66" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">其实问题是“道具钻”。简单来说，当我们想要在不同的组件中使用特定的道具时，我们必须在众多的组件中手动传递道具，以便在特定的组件中使用。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/5bfe423a8f172d34cc392882e1079845.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*M-iJHH6PKbRl9O4jpnWzlg.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source: Author</figcaption></figure><p id="94df" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">假设我们想要组件2、5和7中的特定道具。为此，我们必须通过不同的组成部分。</p><p id="379e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">有点烦人。因此，我们使用了React Context、Redux和Easy Peasy。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="034e" class="my lt iq bd lu mz na nb lx nc nd ne ma jw nf jx md jz ng ka mg kc nh kd mj ni bi translated">使用Redux</h1><p id="2651" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">Redux是一个状态管理工具(容器)，我们在其中创建一个store，定义一个action和reducer，调用dispatch函数。</p><p id="ef12" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是什么是<em class="nj">储存</em>、<em class="nj">动作</em>、<em class="nj">减速</em>、<em class="nj">调度</em>？</p><p id="5d90" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个<em class="nj">存储库</em>仅仅是一个保存所有状态的状态容器。</p><p id="c852" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">一个<em class="nj">动作</em>顾名思义，会做一些事情。简单来说，就是说要做什么。</p><p id="8a6a" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nj">减速器</em>知道怎么做动作。</p><p id="5c78" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后，<em class="nj"> dispatch </em>是一个分派动作的函数。</p><p id="cfa1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就这样，再简单不过了。</p><p id="61d7" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在让我们举一个简单的例子。这里的示例将数字增加1。</p><p id="716c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">为此，您需要创建一个React应用程序。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="8ad0" class="ls lt iq nl b gy np nq l nr ns">npx create-react-app myapp</span></pre><p id="4d2f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这将创建一个名为<code class="fe nt nu nv nl b">myapp</code>的React应用程序。你可以根据自己的选择来命名任何东西。</p><p id="8f42" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在安装使用Redux所需的依赖项。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="de79" class="ls lt iq nl b gy np nq l nr ns">npm install redux react-redux</span></pre><p id="356c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它将安装两个依赖项，Redux和<a class="ae lr" href="https://react-redux.js.org/" rel="noopener ugc nofollow" target="_blank"> React-Redux </a>。Redux是状态管理工具，React Redux会将你的React app与Redux绑定。</p><p id="580b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe nt nu nv nl b">src</code>文件夹中，你可以看到<code class="fe nt nu nv nl b">index.js</code>文件。这里我们将创建商店，所以复制并粘贴下面的代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="59cf" class="ls lt iq nl b gy np nq l nr ns">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import { createStore } from "redux";<br/>import { Provider } from "react-redux";</span><span id="98da" class="ls lt iq nl b gy nw nq l nr ns">// Storelet store = createStore();</span><span id="50bd" class="ls lt iq nl b gy nw nq l nr ns">ReactDOM.render(<br/>&lt;Provider store={store}&gt;<br/>&lt;App /&gt;<br/>&lt;/Provider&gt;,document.getElementById("root"));</span></pre><p id="b0c8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们导入了<code class="fe nt nu nv nl b">createStore</code>，会创建一个商店。并且<code class="fe nt nu nv nl b">Provider</code>将为我们提供商店。</p><p id="5f78" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">商店会带一个减压器。我们将在后面定义它。</p><p id="f8d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">简单来说，我们创建了一个商店。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="e2da" class="ls lt iq nl b gy np nq l nr ns">let store = createStore();</span></pre><p id="35d9" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">然后我们将它应用到我们的应用程序组件中。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="8bc1" class="ls lt iq nl b gy np nq l nr ns">&lt;Provider store={store}&gt;<br/>&lt;App /&gt;<br/>&lt;/Provider&gt;</span></pre></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="b0a0" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在在你的<code class="fe nt nu nv nl b">src</code>文件夹中创建两个文件夹。一个是<code class="fe nt nu nv nl b">actions</code>，另一个是<code class="fe nt nu nv nl b">reducers</code>。</p><p id="51f4" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><code class="fe nt nu nv nl b">actions</code>文件夹将包含一个动作文件，而<code class="fe nt nu nv nl b">reducers</code>文件夹将包含一个减速器文件。</p><p id="e4da" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe nt nu nv nl b">actions</code>文件夹中创建一个文件<code class="fe nt nu nv nl b">index.js</code>。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="d254" class="ls lt iq nl b gy np nq l nr ns">export const increment = () =&gt; {<br/>return {<br/> type: "INCREMENT",<br/>};<br/>};</span></pre><p id="3378" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这是一个告诉减速器增加的功能。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="e908" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在在<code class="fe nt nu nv nl b">reducers</code>文件夹中，创建一个文件<code class="fe nt nu nv nl b">add.js</code>。</p><p id="da20" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里将产生增加状态的逻辑。我们也将状态定义为等于0。</p><p id="2283" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">简单地说，我们已经定义了一个将状态增加1的情况。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="c9dd" class="ls lt iq nl b gy np nq l nr ns">const add = (state = 0, action) =&gt; {</span><span id="1089" class="ls lt iq nl b gy nw nq l nr ns">switch (action.type) {<br/>case "INCREMENT": return state + 1;<br/>default: return state;<br/>}};</span><span id="28c8" class="ls lt iq nl b gy nw nq l nr ns">export default add;</span></pre><p id="3eab" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe nt nu nv nl b">reducers</code>文件夹中创建一个<code class="fe nt nu nv nl b">index.js</code>文件，并粘贴以下代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="27f8" class="ls lt iq nl b gy np nq l nr ns">import add from "./add";<br/>import { combineReducers } from "redux";</span><span id="e41f" class="ls lt iq nl b gy nw nq l nr ns">const everyReducers = combineReducers({<br/>add: add<br/>});</span><span id="7787" class="ls lt iq nl b gy nw nq l nr ns">export default everyReducers;</span></pre><p id="fdd8" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里，我们已经导入了我们的add reducer。</p><p id="9c92" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">但是为什么是这个文件？将每个减速器组合起来，放在一个文件中。</p><p id="d54f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">简单来说，你需要在全局存储内部传递reducer。但是如果你有不止一个减速器呢？那你可以这样做。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="a71b" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">将减速器交给商店</strong></p><p id="47e2" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">既然定义了动作和还原器，那就传给店家吧。</p><p id="e81f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在您的<code class="fe nt nu nv nl b">src</code>文件夹中，您可以看到<code class="fe nt nu nv nl b">index.js</code>文件(不要进入您的actions文件夹)。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="f997" class="ls lt iq nl b gy np nq l nr ns">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import { createStore } from "redux";<br/>import everyReducers from "./reducers/index";<br/>import { Provider } from "react-redux";</span><span id="90ba" class="ls lt iq nl b gy nw nq l nr ns">// Storelet store = createStore(everyReducers);</span><span id="b940" class="ls lt iq nl b gy nw nq l nr ns">ReactDOM.render(<br/>&lt;Provider store={store}&gt;<br/>&lt;App /&gt;<br/>&lt;/Provider&gt;,document.getElementById("root"));</span></pre><p id="8657" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们已经从<code class="fe nt nu nv nl b">reducers</code>文件夹中导入了<code class="fe nt nu nv nl b">everyReducers</code>并将其传递给了商店。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="d2f5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">在我们的应用程序中显示</strong></p><p id="7918" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">到目前为止，我们已经完成了创建商店的逻辑，但是还没有显示它。</p><p id="7596" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在您的<code class="fe nt nu nv nl b">src</code>文件夹中，您可以看到<code class="fe nt nu nv nl b">App.js</code>文件。打开它，粘贴下面的代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="3b2f" class="ls lt iq nl b gy np nq l nr ns">import React from "react";<br/>import { useSelector, useDispatch } from "react-redux";<br/>import { increment } from "./actions/index";<br/>import "./App.css";</span><span id="b3ab" class="ls lt iq nl b gy nw nq l nr ns">function App() {<br/>const add = useSelector((state) =&gt; state.add);<br/>const dispatch = useDispatch();</span><span id="87c9" class="ls lt iq nl b gy nw nq l nr ns">return (<br/>&lt;div className="App"&gt;<br/>&lt;h1&gt; Increment the count {add} &lt;/h1&gt;<br/>&lt;button onClick={() =&gt; dispatch(increment())}&gt;+&lt;/button&gt;&lt;/div&gt;<br/>);<br/>}</span></pre><p id="d371" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们导入了<code class="fe nt nu nv nl b">useSelector</code>和<code class="fe nt nu nv nl b">useDispatch</code>，<code class="fe nt nu nv nl b">useSelector</code>来使用我们想要使用的减速器，<code class="fe nt nu nv nl b">useDispatch</code>来调度动作。</p><p id="842d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">仅此而已。我们已经实施了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Src: Giphy</figcaption></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="d4ed" class="my lt iq bd lu mz na nb lx nc nd ne ma jw nf jx md jz ng ka mg kc nh kd mj ni bi translated">使用简单的豌豆</h1><p id="c52c" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">现在让我们用Redux的替代方案Easy Peasy实现相同的功能。</p><p id="956f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">如果你已经清楚地阅读了上面的Redux概念，你将在几分钟内学会简单。为此，你不需要行动和减速器文件夹。</p><p id="0f38" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我正在创建一个新的文件夹以方便使用。您还可以在您的首选目录中创建新的React应用程序。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="a60b" class="ls lt iq nl b gy np nq l nr ns">npx create-react-app learneasypeasy</span></pre><p id="daa3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在里面，安装简单的软件包。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="178c" class="ls lt iq nl b gy np nq l nr ns">npm install easy-peasy</span></pre></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="2a2d" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">创建存储文件夹</strong></p><p id="d485" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在您的<code class="fe nt nu nv nl b">src</code>文件夹中创建一个存储文件夹。在其中，创建一个<code class="fe nt nu nv nl b">add.js</code>文件。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="bf74" class="ls lt iq nl b gy np nq l nr ns">import { createStore, action } from "easy-peasy";</span><span id="2524" class="ls lt iq nl b gy nw nq l nr ns">const store = createStore({<br/>increment: {<br/>counter: 0,<br/>add: action((state) =&gt; {<br/>state.counter = state.counter + 1;<br/>}),<br/>},<br/>});</span><span id="1cce" class="ls lt iq nl b gy nw nq l nr ns">export default store;</span></pre><p id="b55e" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里我们在一个文件中定义了所有的东西，一个带有状态和动作的存储。</p><p id="97c3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们已经将计数器初始化为0，一个名为<code class="fe nt nu nv nl b">add</code>的动作将递增计数器。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="7506" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">将商店打包至你的应用</strong></p><p id="9112" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在是时候用你的应用来包装商店了。</p><p id="f61c" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在<code class="fe nt nu nv nl b">src</code>文件夹中，转到<code class="fe nt nu nv nl b">index.js</code>文件并粘贴下面的代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="7e60" class="ls lt iq nl b gy np nq l nr ns">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import { StoreProvider } from "easy-peasy";<br/>import store from "./store/add";</span><span id="430d" class="ls lt iq nl b gy nw nq l nr ns">ReactDOM.render(<br/>&lt;StoreProvider store={store}&gt;<br/>&lt;App /&gt;<br/>&lt;/StoreProvider&gt;,document.getElementById("root")<br/>);</span></pre></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="0318" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><strong class="kx ir">在你的应用中显示</strong></p><p id="3efe" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我们已经创建了商店，应用了动作，甚至用商店包装了我们的应用。</p><p id="1716" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">现在是展示的时候了。</p><p id="bd24" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">访问<code class="fe nt nu nv nl b">src</code>文件夹内的<code class="fe nt nu nv nl b">App.js</code>，粘贴以下代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="1834" class="ls lt iq nl b gy np nq l nr ns">import React from "react";<br/>import { useStoreState, useStoreActions } from "easy-peasy";<br/>import "./App.css";</span><span id="c417" class="ls lt iq nl b gy nw nq l nr ns">function App() {<br/>const increment = useStoreState((state) =&gt; state.increment.counter);</span><span id="3fa5" class="ls lt iq nl b gy nw nq l nr ns">const add = useStoreActions((actions) =&gt; actions.increment.add);</span><span id="230a" class="ls lt iq nl b gy nw nq l nr ns">return (<br/>&lt;div className="App"&gt;<br/>&lt;h1&gt; Increment the count {increment} &lt;/h1&gt;<br/>&lt;button onClick={add}&gt;+&lt;/button&gt;<br/>&lt;/div&gt;<br/>);}</span><span id="c846" class="ls lt iq nl b gy nw nq l nr ns">export default App;</span></pre><p id="984f" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要使用状态，必须导入<code class="fe nt nu nv nl b">useStoreState</code>，要使用动作，必须导入<code class="fe nt nu nv nl b">useStoreActions</code>。</p><p id="cd99" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">要了解更多信息，您可以访问npm 上的<a class="ae lr" href="https://www.npmjs.com/package/easy-peasy" rel="noopener ugc nofollow" target="_blank"> Easy Peasy。</a></p><p id="81ba" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">输出将保持不变。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nx ny l"/></div></figure></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="d23e" class="my lt iq bd lu mz na nb lx nc nd ne ma jw nf jx md jz ng ka mg kc nh kd mj ni bi translated">使用反应上下文</h1><p id="0edb" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">在这里，我也将创建一个新文件夹。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="1b49" class="ls lt iq nl b gy np nq l nr ns">npx create-react-app learncontext</span></pre><p id="adf3" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">它将比上面所有的状态管理工具更简单。</p><p id="a8f1" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">在src文件夹中创建一个<code class="fe nt nu nv nl b">Context.js</code>文件。并定义上下文初始化。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="6585" class="ls lt iq nl b gy np nq l nr ns">import React, { useState, createContext } from "react";</span><span id="975c" class="ls lt iq nl b gy nw nq l nr ns">export const IncrementContext = createContext();</span><span id="f32b" class="ls lt iq nl b gy nw nq l nr ns">export const IncrementProvider = ({children}) =&gt; {<br/>const [increment, setIncrement] = useState(0);</span><span id="5d5a" class="ls lt iq nl b gy nw nq l nr ns">return (<br/>&lt;IncrementContext.Provider value={{ increment, setIncrement }}&gt;<br/>{children}<br/>&lt;/IncrementContext.Provider&gt;</span><span id="6e2d" class="ls lt iq nl b gy nw nq l nr ns">);};</span></pre><p id="a831" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">这里，increment和setIncrement将传递给每个孩子。</p><p id="8c78" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">最后在你的App.js里面粘贴下面的代码。</p><pre class="kg kh ki kj gt nk nl nm nn aw no bi"><span id="329f" class="ls lt iq nl b gy np nq l nr ns">import { IncrementProvider, IncrementContext } from "./Context";<br/>import { useContext } from "react";<br/>import "./App.css"</span><span id="cbb0" class="ls lt iq nl b gy nw nq l nr ns">const Child = () =&gt; {<br/>const { increment, setIncrement } = useContext(IncrementContext);</span><span id="4f16" class="ls lt iq nl b gy nw nq l nr ns">return (<br/>&lt;div className="App"&gt;<br/>&lt;h1&gt;{increment}&lt;/h1&gt;<br/>&lt;button onClick={() =&gt; setIncrement(increment+1)}&gt;+&lt;/button&gt;<br/>&lt;/div&gt;<br/>);};</span><span id="0278" class="ls lt iq nl b gy nw nq l nr ns">export default function App() {<br/>return (<br/>&lt;div className="App"&gt;<br/>&lt;IncrementProvider&gt;<br/>&lt;Child /&gt;<br/>&lt;/IncrementProvider&gt;<br/>&lt;/div&gt;</span><span id="307b" class="ls lt iq nl b gy nw nq l nr ns">);}</span></pre><p id="7047" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就这样，我们实现了使用React上下文的增量功能。</p><p id="7f76" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">您还可以为操作创建一个文件夹，为使用React上下文创建一个reducer，但我发现这更简单。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="2137" class="my lt iq bd lu mz na nb lx nc nd ne ma jw nf jx md jz ng ka mg kc nh kd mj ni bi translated">让我们结束吧</h1><p id="700e" class="pw-post-body-paragraph kv kw iq kx b ky ml jr la lb mm ju ld le mn lg lh li mo lk ll lm mp lo lp lq ij bi translated">嗯，我不反对任何状态管理工具，选择一个适合你的是你的愿望。</p><p id="a3bb" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">我刚刚比较了三种状态管理工具，让您对它们的工作原理有一个大致的了解。</p><p id="4d54" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">就这样——谢谢。</p><div class="nz oa gp gr ob oc"><a rel="noopener  ugc nofollow" target="_blank" href="/11-web-development-tools-i-use-every-day-because-they-make-my-life-easier-54ede59743c2"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">我每天都在使用的11个Web开发工具，因为它们让我的生活变得更加轻松</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">他们也一定会为你做同样的事情。</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ol l"><div class="om l on oo op ol oq kp oc"/></div></div></a></div><div class="nz oa gp gr ob oc"><a rel="noopener  ugc nofollow" target="_blank" href="/8-life-lessons-a-programmer-with-30-years-of-experience-taught-me-2a9fb090a398"><div class="od ab fo"><div class="oe ab of cl cj og"><h2 class="bd ir gy z fp oh fr fs oi fu fw ip bi translated">一个有30多年经验的程序员教给我的8条人生经验</h2><div class="oj l"><h3 class="bd b gy z fp oh fr fs oi fu fw dk translated">就连千禧一代也在放弃六位数的技术工作。</h3></div><div class="ok l"><p class="bd b dl z fp oh fr fs oi fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ol l"><div class="or l on oo op ol oq kp oc"/></div></div></a></div></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><h1 id="732c" class="my lt iq bd lu mz na nb lx nc nd ne ma jw nf jx md jz ng ka mg kc nh kd mj ni bi translated">常见问题:</h1><ol class=""><li id="c45b" class="os ot iq kx b ky ml lb mm le ou li ov lm ow lq ox oy oz pa bi translated">能不能用Redux-Toolkit之类的其他库？</li></ol><p id="f165" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated">= &gt;是的，我的朋友，概念是相似的，所以你可以自由使用它。</p></div><div class="ab cl mr ms hu mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ij ik il im in"><p id="b8a5" class="pw-post-body-paragraph kv kw iq kx b ky kz jr la lb lc ju ld le lf lg lh li lj lk ll lm ln lo lp lq ij bi translated"><em class="nj">更多内容请看</em><a class="ae lr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kx ir"><em class="nj">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
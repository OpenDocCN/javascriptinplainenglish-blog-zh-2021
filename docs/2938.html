<html>
<head>
<title>How to Create Marker and Marker Cluster with Leaflet Map</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用传单地图创建标记和标记簇</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-marker-and-marker-cluster-with-leaflet-map-95e92216c391?source=collection_archive---------2-----------------------#2021-06-15">https://javascript.plainenglish.io/how-to-create-marker-and-marker-cluster-with-leaflet-map-95e92216c391?source=collection_archive---------2-----------------------#2021-06-15</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="c539" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">在活页地图架构中创建标记和图层，然后对标记进行聚类的方法。</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/e0485c39b296af5b305b3c8c924f8259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*asKLAFb998Dercg9"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@martinsanchez?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Martin Sanchez</a> on <a class="ae kw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cd60" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我为你准备了一篇关于打字传单地图的文章。考虑到我们将在地图上显示的数据太多，这种过量会使我们的眼睛和地图的性能疲劳。</p><p id="85d4" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为了防止这种过度，我们使用<strong class="kz is"> <em class="lt">集群</em> </strong>结构。因此，map在引导和运行时的性能得到了提高。</p><p id="6e85" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">首先，我们将必要的模块添加到我们的<strong class="kz is"> <em class="lt"> package.json </em> </strong>文件中。然后我们将导入这些模块。</p><p id="f140" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">"dependencies": {</code></p><p id="7c7d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">"leaflet":"^1.7.1",</code></p><p id="2e57" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">"leaflet.markercluster":"^1.5.0" }</code></p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ly lz l"/></div></figure><p id="f7dd" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">之后，如果我们没有服务或JSON文件来使用我们的数据，我们准备自己的JSON文件。我准备了一个JSON文件，里面有在土耳其找到的51个省的坐标。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ma lz l"/></div></figure><p id="91b7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们在HTML文件中用id定义了地图。</p><p id="2151" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">&lt;div id="map"&gt;&lt;/div&gt;</code></p><p id="9060" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们开始建立我们的地图。首先，我们将为地图选择一个图层。用“OSM图层、传单OSM图层、Openstreetmap图层”等词搜索会遇到很多种地图。你可以选择你喜欢的或者使用它。</p><div class="mb mc gq gs md me"><a href="https://leafletjs.com/" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">传单-用于交互式地图的开源JavaScript库</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">传单是一个现代的、轻量级的开源JavaScript库，用于移动友好的交互式地图。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">leafletjs.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms kq me"/></div></div></a></div><div class="mb mc gq gs md me"><a href="https://leafletjs.com/examples/wms/wms.html" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">使用WMS和TMS服务-传单-用于交互式地图的JavaScript库</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">←教程WMS，是web地图服务的缩写，是一种通过专业GIS软件(和…</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">leafletjs.com</p></div></div><div class="mn l"><div class="mt l mp mq mr mn ms kq me"/></div></div></a></div><div class="mb mc gq gs md me"><a href="https://astuntechnology.github.io/osgis-ol3-leaflet/leaflet/00-OSM-MAP.html" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">实用OpenLayers 3 &amp;传单</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">编辑fleet . js，使其如下所示:var map = new L.Map('map '，{ layers: [ new L.TileLayer(…</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">astuntechnology.github.io</p></div></div></div></a></div><p id="a5cc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我给你加了几个链接。我正在考虑一找到它就更新这个区域。</p><p id="d57d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">使用我们导入的<code class="fe lu lv lw lx b">L</code>来创建图层，<code class="fe lu lv lw lx b">L.tileLayer()</code>用这个方法添加我们的地图链接。您可以编写各种功能。我想让地图以最大18倍放大。如果你愿意，你可以给出最小值。现在，如果我们希望在开始坐标处看到地图，我们将它添加为中心。为此，我们使用<code class="fe lu lv lw lx b">L.latLng()</code>。你可能认为我们在设定纬度和经度。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ly lz l"/></div></figure><p id="faa3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="lt">我在这个例子中没有使用它，但是您可以通过使用</em> <code class="fe lu lv lw lx b"><em class="lt">setLatLng(), getLatLng()()</em></code> <em class="lt">方法在项目的任何部分给出纬度和经度来更新您的地图。</em></p><p id="bb41" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们创建了图层和地图中心。但是我们还没有地图。现在让我们创建它。我们将再次使用它们。<code class="fe lu lv lw lx b">L.map()</code>我们在其中定义一个<code class="fe lu lv lw lx b">id</code>。这个<code class="fe lu lv lw lx b">id</code>将是我们添加到HTML页面的<code class="fe lu lv lw lx b">id</code>。您仍然可以随意编辑属性。添加我为地图开口定义的中心点、开口缩放值和我们创建的图层。</p></div><div class="ab cl mu mv hv mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ik il im in io"><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ly lz l"/></div></figure><p id="79a7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们将使用标记来创建<code class="fe lu lv lw lx b">L.icon()</code>。对于<code class="fe lu lv lw lx b">iconUrl</code>，如果您的系统上有自己的图标，您可以键入位置。传单默认图标位于<code class="fe lu lv lw lx b">dist.</code></p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ly lz l"/></div></figure><p id="abaa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">const markerCluster = new MarkerClusterGroup();</code></p><p id="aa50" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">使用它，我们创建一个标记集群。这样，标记就会聚集在一起。在一个循环中，我从我创建的JSON文件中调用纬度、经度和城市。</p><p id="83e8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">让我们用<code class="fe lu lv lw lx b">L.marker</code>创建一个标记。我们添加坐标和图标。我们将标记<code class="fe lu lv lw lx b">addLayer()</code>添加到我们创建的<code class="fe lu lv lw lx b">markerCluster</code>中。除了循环之外，我们将<code class="fe lu lv lw lx b">addLayer</code>和<code class="fe lu lv lw lx b">markerCluster</code>添加到我们创建的<code class="fe lu lv lw lx b">_map</code>中。</p><p id="4580" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">在这些操作之后，它将我们创建的标记添加到具有我们已有的聚类结构的地图中。</p></div><div class="ab cl mu mv hv mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ik il im in io"><p id="5923" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在是有趣的部分。<code class="fe lu lv lw lx b">_mar</code>我们想增加很多功能。<code class="fe lu lv lw lx b">zoomend</code>、<code class="fe lu lv lw lx b">click</code>、<code class="fe lu lv lw lx b">mouseout,</code>、<code class="fe lu lv lw lx b">popupopen</code>等等。最后，我们将向标记添加一个弹出窗口。</p><p id="56bc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><code class="fe lu lv lw lx b">_mar.bindPopup(city);</code></p><p id="3047" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们只是用它来添加弹出窗口。</p><p id="db25" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">用<code class="fe lu lv lw lx b">_map.getZoom()</code>我们可以看到地图的缩放值。同时我们可以用<code class="fe lu lv lw lx b">_mapSetZoom()</code>给地图设置缩放值。</p><p id="75dc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们地图的最终版本如下。您可以通过Stackblitz更详细地检查它。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="ma lz l"/></div></figure></div><div class="ab cl mu mv hv mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ik il im in io"><div class="kh ki kj kk gu me"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-use-angular-component-styles-with-special-selectors-dc877514372c"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">如何将角度组件样式与特殊选择器一起使用</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">在具有独立样式文件的组件的基础上，将样式添加到您的Angular应用程序有助于您创建一个更…</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="nb l mp mq mr mn ms kq me"/></div></div></a></div><div class="mb mc gq gs md me"><a rel="noopener  ugc nofollow" target="_blank" href="/create-a-card-design-with-the-free-vue-js-template-now-ui-kit-5676a738e518"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">使用免费的Vue.js模板创建卡片设计</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">使用免费主题可能是开发设计和学习的最佳方式之一。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="nc l mp mq mr mn ms kq me"/></div></div></a></div><div class="mb mc gq gs md me"><a rel="noopener  ugc nofollow" target="_blank" href="/chart-and-calendar-design-in-flip-card-using-angular-nebular-db0ffd434d5b"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">使用角状星云在翻转卡中设计图表和日历</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">在活动卡片上创建一个快速、友好的图表和日历。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="mn l"><div class="nd l mp mq mr mn ms kq me"/></div></div></a></div><div class="mb mc gq gs md me"><a href="https://bestte.medium.com/flutter-home-page-design-with-clippath-3d89e9a1f9c5" rel="noopener follow" target="_blank"><div class="mf ab fp"><div class="mg ab mh cl cj mi"><h2 class="bd is gz z fq mj fs ft mk fv fx iq bi translated">用ClipPath设计飘动主页</h2><div class="ml l"><h3 class="bd b gz z fq mj fs ft mk fv fx dk translated">创建一个项目，一步一步设计。</h3></div><div class="mm l"><p class="bd b dl z fq mj fs ft mk fv fx dk translated">bestte.medium.com</p></div></div><div class="mn l"><div class="ne l mp mq mr mn ms kq me"/></div></div></a></div><p id="37a5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="lt">更多内容尽在</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lt">plain English . io</em></a></p></div></div>    
</body>
</html>
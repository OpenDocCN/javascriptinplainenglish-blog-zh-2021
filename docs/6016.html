<html>
<head>
<title>Seamless Search using React Hook</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React Hook进行无缝搜索</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/seamless-search-using-react-hook-539550664a9d?source=collection_archive---------5-----------------------#2021-12-24">https://javascript.plainenglish.io/seamless-search-using-react-hook-539550664a9d?source=collection_archive---------5-----------------------#2021-12-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3d7bd7669483e1d6de79d7aa5411c2f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ziVZX4pZZkLgiXCL"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@xps?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">XPS</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b8c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如今，你几乎看不到一个应用程序(移动/web)不会创建一个部分，让用户可以从一个大的项目集合中搜索一个项目。在大多数情况下，我看到开发人员试图在他们的应用程序中实现这一点，但最终只得到一个值，而不是所有包含搜索的项目。一个典型的例子是使用<a class="ae jz" href="https://medium.com/nerd-for-tech/seamless-search-with-vanilla-javascript-e447c440ef59" rel="noopener"> <strong class="kc io"> <em class="ky">香草JavaScript </em> </strong> </a> <strong class="kc io"> <em class="ky">实现的。</em>T9】</strong></p><p id="71aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在本文中，我将使用<strong class="kc io"> React Hook实现同样的行为。</strong>我将使用Visual Studio代码作为我的代码编辑器。</p><p id="f457" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky">先决条件</em> </strong></p><ul class=""><li id="b957" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">安装Node.js和npm</li><li id="f160" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">JavaScript知识</li><li id="4867" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">React的基础</li></ul><p id="d826" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">沿着<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Learn/Tools_and_testing/Client-side_JavaScript_frameworks/React_getting_started" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">链接</em></strong></a><strong class="kc io"><em class="ky"/></strong>创建一个react项目，命名为<strong class="kc io"> seamless_search_react </strong></p><p id="89b8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入src文件夹，在终端中创建一些文件夹和文件，如下所示:</p><pre class="ln lo lp lq gt lr ls lt lu aw lv bi"><span id="facd" class="lw lx in ls b gy ly lz l ma mb">cd src</span><span id="9b7b" class="lw lx in ls b gy mc lz l ma mb">mkdir Component Util View context reducer</span><span id="bd46" class="lw lx in ls b gy mc lz l ma mb">cd Component</span><span id="9a4b" class="lw lx in ls b gy mc lz l ma mb">touch CustomUser.js SearchBar.js Users.js</span><span id="af7a" class="lw lx in ls b gy mc lz l ma mb">cd View </span><span id="5cef" class="lw lx in ls b gy mc lz l ma mb">touch Home.js</span><span id="a622" class="lw lx in ls b gy mc lz l ma mb">cd Util </span><span id="e62d" class="lw lx in ls b gy mc lz l ma mb">touch userCollection.js </span><span id="22b5" class="lw lx in ls b gy mc lz l ma mb">cd context </span><span id="6e18" class="lw lx in ls b gy mc lz l ma mb">touch SearchContext.js</span><span id="579a" class="lw lx in ls b gy mc lz l ma mb">cd reducer</span><span id="9a73" class="lw lx in ls b gy mc lz l ma mb">touch actionjs reducer.js</span></pre><p id="38be" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在userCollection.js中，让我们使用下面的<a class="ae jz" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">链接</em> </strong> </a>来获取将用于本文的虚拟用户数据。复制并粘贴到上面提到的文件中。</p><p id="ff6c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">今后，我将使用react <strong class="kc io"> useContext </strong>和<strong class="kc io"> useReducer </strong>进行状态管理。在SearchContext组件中，让我们创建一个上下文，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/f644e506e63aac4374858d6cc951008b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f28UrlJ3w6dvXMEJgyBjnQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">create a context</figcaption></figure><p id="9589" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，我将新的上下文分配给SearchContext变量，并将其导出以供其他组件使用。我将它的默认值设置为一个数组——它也接受一个对象。在数组内部，它保存两个属性，一个是空对象，一个是函数。</p><p id="912c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们创建一个provider函数来处理状态和reducer，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi me"><img src="../Images/0dcd29e2fa19cc8660e91368d31a9b1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZTWFp9OG-1Lwuj2fQZGt3A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">provider function</figcaption></figure><p id="22f3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以把这个功能比作一个为孩子提供食物的母亲。它使状态和功能对它包装的所有嵌套组件可用。</p><p id="1dc2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我使用了<strong class="kc io"> useReducer </strong>钩子函数作为我的<strong class="kc io"> <em class="ky">状态</em> </strong>，就像useState钩子一样。它需要多达三个参数，但在本文中将只使用两个。第一个是:</p><ul class=""><li id="ddb4" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">减压器功能，以及</li><li id="5ff3" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">状态</li></ul><p id="6f28" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">reducer函数是从之前创建的reducer文件中导入的，而状态是在reducer函数之后初始化的。目前，我只有一个保存查询属性(字符串)的对象。</p><p id="f262" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我返回SearchContext的provider属性，并将状态和调度函数传递给它的值props以供其他孩子访问。</p><p id="994e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入reducer文件，并在其中添加以下内容:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mf"><img src="../Images/2dfad005d8c42e79d4c983b40ff72349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*guo0pLrFlBd0I0jCAk2JKQ.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">reducer function</figcaption></figure><p id="60aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，如果您还记得的话，我将reducer函数传递给了useReducer钩子函数；它向reducer函数传递两个参数:</p><ul class=""><li id="97aa" class="kz la in kc b kd ke kh ki kl lb kp lc kt ld kx le lf lg lh bi translated">状态和，</li><li id="df87" class="kz la in kc b kd li kh lj kl lk kp ll kt lm kx le lf lg lh bi translated">行为</li></ul><p id="69cf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">状态</strong>是减速器的当前数据，<strong class="kc io">动作</strong>是保存有<strong class="kc io">类型</strong>和<strong class="kc io">有效载荷</strong>属性<strong class="kc io">的调度函数。</strong><strong class="kc io"><em class="ky">类型</em> </strong>被传递给交换机以监视需要更新的状态，并且<strong class="kc io"> <em class="ky">有效载荷</em> </strong>保存将更新状态的数据。</p><p id="ec39" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">变量<strong class="kc io"> t </strong>有一个导入，它将保存所有的<strong class="kc io"> <em class="ky">动作</em> </strong>类型。</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mg"><img src="../Images/9fc05a1681f29c20c76070c2715602cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:842/format:webp/1*JbBOk_F1hK9tW_X3BOQJEw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">importing action type as t</figcaption></figure><p id="c1b1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入我之前创建的操作文件，并在其中添加以下内容:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mh"><img src="../Images/658f6820af304339dac927a0e2740fc0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*tpxdrec1WnW8O4dpQyQTvA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">action types</figcaption></figure><p id="f6c2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我已经为无缝搜索设置好了状态管理，我将把上面定义的提供者组件导入到app组件中，并将父组件(Home)嵌套到其中，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/23b3f72357217e30d2309fe9f9038874.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*xA929ATAtkUD06Y5PVs7aw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">context provider</figcaption></figure><p id="766e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，我用上下文提供者函数包装了Home组件，以使我的所有上下文状态对包装的组件可用。</p><p id="e8fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我现在可以从包装的组件中的任何地方访问全局状态。</p><p id="2ca0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入用户组件，导入usercollection数据，并将其呈现在页面上，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mj"><img src="../Images/3b14e7af685e41952bf92e19f99db8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8jEbINq40g7WJIdbWejyQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">render users</figcaption></figure><p id="6878" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">用户是从我之前创建的util文件中导入的，我检查了usercollection是否不是空数组，因此，我遍历了它并析构了我想要呈现给浏览器的属性；这些属性作为道具传递给customUser。</p><p id="0256" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入customUser组件，将单个用户数据呈现到一个元素中，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/31ae6ada22b3f641fce0f7e3019bbcfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*CGBwiPCuSUTw-RPD3ZEAcg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">custom user</figcaption></figure><p id="37a8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">下面就用下面的<a class="ae jz" href="https://res.cloudinary.com/hobbyluv07/video/upload/v1640245996/React_App_-_Google_Chrome_2021-12-23_09-47-43_a36vsv.mp4" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">demo</em></strong></a><strong class="kc io"><em class="ky">来看看目前为止的进展吧。</em> </strong></p><p id="2d11" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如您在上面的演示中看到的，用户数据已经成功地呈现在浏览器中。</p><p id="70c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入SearchBar组件，创建一个表单字段来处理搜索查询，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ml"><img src="../Images/2f670e03a7f917870c639d3c90674313.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vFRbagh3e31X6p0YWD0TJw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">search bar component</figcaption></figure><p id="4c87" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，表单元素中呈现了一个输入字段，handleQuery函数——稍后将添加，是一个onChange函数，当输入字段发生变化时，它会更新状态。让我们定义handleQuery函数，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mm"><img src="../Images/82a612238352199396969932b799856a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o8Sw3eReMsepKQJifBmvmQ.png"/></div></div></figure><p id="510a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，我使用了useContext钩子来访问上下文，并析构了状态和一个设置状态的函数。在handleQuery函数中，我阻止了表单的默认行为——返回void，并依次将当前输入值设置为全局状态。</p><p id="6c9e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我已经创建了SearchBar组件，让我们进入util文件并添加一个函数，该函数将处理我搜索的项目的过滤，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/c2874c5a0ba2505db0db272495f6af1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fCUYFfMdfNiH-TeOF5Fwdw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">search middleware</figcaption></figure><p id="01fb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，我遍历了用户并返回了与搜索值(小写)匹配的用户名(小写)。</p><p id="e8ac" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们进入用户组件，并对其稍作调整，如下所示:</p><figure class="ln lo lp lq gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/359a03b837a7e4f1d518d8598f687a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qAPCE7C37yBB6PeTkKvyA.png"/></div></div></figure><p id="2639" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码片段中，请记住filtersearch函数是从util文件中导出的，我没有直接遍历usercollection数据，而是遍历filterSearch函数的返回数据。userCollections和<strong class="kc io"> <em class="ky">查询</em> </strong>作为参数传递给filterSearch函数，以便进行充分的检查。</p><p id="f498" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们都实现了这些，让我们看看我们在下面的<a class="ae jz" href="https://res.cloudinary.com/hobbyluv07/video/upload/v1640253402/seamless_video_fqkgbu.mp4" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">Demo</em></strong></a><strong class="kc io"><em class="ky">中构建了什么。</em> </strong>源代码可用<a class="ae jz" href="https://github.com/chibuike07/seamless_search_reactjs" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="ky">此处</em> </strong> </a> <strong class="kc io">。</strong></p><p id="0a78" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们已经到了本文的结尾，我希望您能够在react应用程序中集成一个无缝的搜索过程。</p><p id="3e55" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果这篇文章对你有帮助，别忘了点击拍手图标，分享这篇文章，关注我的<a class="ae jz" href="https://princewillchime43.medium.com/" rel="noopener"> <strong class="kc io"> <em class="ky">中的</em> </strong> </a>和<a class="ae jz" href="https://www.linkedin.com/in/chime-princewill-3a2b1b192/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="ky">Linkedin</em></strong></a>以查看更多我的文章。</p><p id="57b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请放弃任何建议。如果你有一个基于JavaScript/React生态系统的主题，请随时联系我，我很乐意就此进行写作。谢了。</p><p id="c53c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ky">说白了。报名参加我们的</em> </a><a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ky">免费每周简讯</em> </a> <em class="ky">。在我们的</em> <a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="ky">社区</em> </a> <em class="ky">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>File Minification and Concatenation with Grunt for Node.js Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js应用程序的文件缩小和连接</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/file-minification-and-concatenation-with-grunt-js-for-node-applications-e6b55e460244?source=collection_archive---------7-----------------------#2021-12-28">https://javascript.plainenglish.io/file-minification-and-concatenation-with-grunt-js-for-node-applications-e6b55e460244?source=collection_archive---------7-----------------------#2021-12-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/16cac240a9ac0c2c1ae4dcc48a208553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BE6DI_cuO0W07NHfyKsT5A.png"/></div></div></figure><p id="72c5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在构建web应用程序时，性能是一个非常重要的话题。在软件开发领域，理想的情况是，您的web应用程序在生产环境中性能良好并经过优化。在应用程序包含大量JavaScript和CSS文件的情况下，由于文件大小不同，这可能会影响应用程序的加载时间。因此，您的应用程序在低性能方面会滞后。</p><p id="6d79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">建议您将尽可能少的文件发送到生产环境，以帮助实现高性能和快速加载。</p><p id="07a0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，如果你不知道什么是咕噜声，你就没什么好担心的了。在我们开始使用它之前，我会告诉你它是什么。除此之外，在这篇文章中，我将教你如何:</p><ul class=""><li id="69b9" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">安装Grunt</li><li id="0973" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">用Grunt缩小JavaScript文件</li><li id="16b6" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">用Grunt连接文件</li></ul><h1 id="d20f" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">先决条件</h1><p id="354e" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">要充分利用本文，您需要具备以下条件:</p><ul class=""><li id="6e58" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">Node.js的基础知识</li><li id="1899" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">文本编辑器(例如，VSCode)</li><li id="3847" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">终端应用程序(例如，命令提示符)</li></ul><p id="d119" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae kt" href="https://gruntjs.com/" rel="noopener ugc nofollow" target="_blank"> Grunt </a>是Node.js的任务运行器。当然，你可能想知道任务运行器是做什么的。坚持住！我一会儿就告诉你。</p><p id="e416" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">任务执行者为我们执行重复性的任务。这些任务可以是:</p><ul class=""><li id="d0ac" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">并非所有需要供应商前缀的浏览器都支持为CSS样式添加CSS规则前缀。</li><li id="f7aa" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">由于浏览器无法理解SASS文件，所以将SASS文件编译为CSS文件。</li><li id="290e" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">通过压缩JS和CSS文件来减小它们的大小，使它们在服务器请求时能够更快地加载。</li><li id="99b4" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">最后，将不同的JavaScript文件连接成一个JavaScript文件，将CSS文件连接成一个CSS文件等等。</li></ul><p id="3dd7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Grunt 提供了很多很多的插件来执行这些任务。每个任务都有不同的插件，取决于哪个适合你。你所要做的就是安装一个特定的插件来完成这个任务。这些插件可能还需要你有额外的库才能工作。grunt的目标是简单地使您的开发工作流程顺畅。</p><p id="7e1d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">出于本文的目的，我们将使用Grunt缩小JS文件，并使用Grunt连接文件，因为其他任务不是本文的目的。</p><p id="8583" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建一个名为<code class="fe ml mm mn mo b">grunt-project</code>的工作项目目录(文件夹的名称完全由您决定)，并用您的文本编辑器打开它。</p><h1 id="d98a" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">装置</h1><p id="558c" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">我假设您的计算机上已经安装了Node.js。现在，在我们安装grunt之前，我们将不得不创建一个<code class="fe ml mm mn mo b">package.json</code>文件来跟踪我们的grunt版本和我们将用来运行我们的任务的所有其他插件。运行以下命令创建一个。</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="bcaa" class="mx lj in mo b gy my mz l na nb">npm init -y</span></pre><p id="780a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">全局安装Grunt】</strong></p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="7598" class="mx lj in mo b gy my mz l na nb">npm install grunt-cli -g</span></pre><p id="c5a8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">本地安装Grunt】</strong></p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="8cdd" class="mx lj in mo b gy my mz l na nb">npm install grunt --save-dev</span></pre><p id="cee9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在您的项目目录中，创建一个<code class="fe ml mm mn mo b">GruntFile.js</code>文件。这个文件将包含我们任务的所有配置，并且这个文件将告诉插件在哪里可以找到某些文件。在我们的例子中，JavaScript和CSS文件。然后，加载插件，注册任务。</p><h1 id="e61e" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">缩小JavaScript文件</h1><p id="d3c9" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">假设您有一个包含大量代码的JavaScript文件，当上传到服务器时，当客户端请求它时，可能需要更长的时间来加载。缩小它可以减小文件大小，并使它在服务器请求时加载得更快。这是格朗特能处理的事。它丑化了它。</p><p id="ff63" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">grunt用来缩小文件的插件叫做<code class="fe ml mm mn mo b">contrib-uglify</code>。这是我们将用来缩小javascript文件的插件。运行下面的代码来安装它。</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="e316" class="mx lj in mo b gy my mz l na nb">npm install grunt-contrib-uglify --save-dev                         </span></pre><p id="9389" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完成后，将这段代码粘贴到您的<code class="fe ml mm mn mo b">GruntFile.js</code>文件中。</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="34fb" class="mx lj in mo b gy my mz l na nb">module.exports = function(grunt) </span><span id="0d96" class="mx lj in mo b gy nc mz l na nb">//configuration</span><span id="670c" class="mx lj in mo b gy nc mz l na nb">grunt.initConfig({</span><span id="4dea" class="mx lj in mo b gy nc mz l na nb">      uglify: {</span><span id="aae7" class="mx lj in mo b gy nc mz l na nb">          build: {</span><span id="29d5" class="mx lj in mo b gy nc mz l na nb">              files: [{</span><span id="036b" class="mx lj in mo b gy nc mz l na nb">                  src: 'script/script.js',</span><span id="d957" class="mx lj in mo b gy nc mz l na nb">                  dest: 'build/script.js'</span><span id="9690" class="mx lj in mo b gy nc mz l na nb">              }]</span><span id="453a" class="mx lj in mo b gy nc mz l na nb">           }</span><span id="7a4a" class="mx lj in mo b gy nc mz l na nb">         }</span><span id="a753" class="mx lj in mo b gy nc mz l na nb">    });</span><span id="9ed6" class="mx lj in mo b gy nc mz l na nb">   //Load plugins</span><span id="3692" class="mx lj in mo b gy nc mz l na nb">    grunt.loadNpmTasks('grunt-contrib-uglify');</span><span id="c619" class="mx lj in mo b gy nc mz l na nb">   //Register Tasks</span><span id="48ea" class="mx lj in mo b gy nc mz l na nb">}</span></pre><p id="bff5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码只是告诉丑陋的插件在哪里找到它应该缩小的文件，为它提供一个目的地，告诉插件在哪里存储缩小的文件。在我们的例子中，它将创建一个构建文件夹，并将缩小的javascript文件存储在那里。之后，我们加载插件。要运行此任务，请运行以下命令:</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="1718" class="mx lj in mo b gy my mz l na nb">grunt uglify </span></pre><p id="0d9c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">成功完成后，您应该会在构建文件夹中看到缩小的javascript文件。</p><h1 id="84c9" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">串联文件</h1><p id="274a" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">对于有多个javascript和CSS文件的情况，将它们连接起来是一个很好的做法。grunt用来连接文件的插件叫做<code class="fe ml mm mn mo b">contrib-concat</code>。有一吨他们，但这一个特别的工程只是罚款，它是官方维护。运行下面的代码来安装这个插件:</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="3470" class="mx lj in mo b gy my mz l na nb">npm install grunt-contrib-concat --save-dev</span></pre><p id="2768" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您的<code class="fe ml mm mn mo b">GruntFile.js</code>文件将包含以下代码:</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="be0c" class="mx lj in mo b gy my mz l na nb">module.exports = function(grunt) {</span><span id="627e" class="mx lj in mo b gy nc mz l na nb">//configuration</span><span id="ba11" class="mx lj in mo b gy nc mz l na nb">  grunt.initConfig({</span><span id="d694" class="mx lj in mo b gy nc mz l na nb">         concat: {</span><span id="f568" class="mx lj in mo b gy nc mz l na nb">                js: {</span><span id="6986" class="mx lj in mo b gy nc mz l na nb">                  src: ['script/*.js'],</span><span id="6598" class="mx lj in mo b gy nc mz l na nb">                  dest: 'build/scripts.js'</span><span id="708a" class="mx lj in mo b gy nc mz l na nb">                },</span><span id="2c55" class="mx lj in mo b gy nc mz l na nb">               css: {</span><span id="d6d0" class="mx lj in mo b gy nc mz l na nb">                 src: ['styles/*.css'],</span><span id="ddc3" class="mx lj in mo b gy nc mz l na nb">                 dest: 'build/styles.css'</span><span id="9c29" class="mx lj in mo b gy nc mz l na nb">               }</span><span id="54da" class="mx lj in mo b gy nc mz l na nb">    }</span><span id="e52c" class="mx lj in mo b gy nc mz l na nb">});</span><span id="499f" class="mx lj in mo b gy nc mz l na nb">//Load plugins</span><span id="08ce" class="mx lj in mo b gy nc mz l na nb">grunt.loadNpmTasks('grunt-contrib-concat');</span><span id="5928" class="mx lj in mo b gy nc mz l na nb">//Register Tasks</span><span id="0b1c" class="mx lj in mo b gy nc mz l na nb">}</span></pre><p id="c461" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">上面的代码连接了两个不同的文件，一个是js文件，另一个是CSS文件。配置只是告诉插件分别进入脚本和样式文件夹，并连接任何。js或者。css文件，并将它们存储在不同的目的地。要运行此任务，请运行以下命令:</p><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="cd2c" class="mx lj in mo b gy my mz l na nb">grunt concat</span></pre><p id="5bc8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">成功完成后，您应该在build文件夹中看到一个脚本文件和一个样式文件。</p><h1 id="fb2f" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">结论</h1><p id="e726" class="pw-post-body-paragraph jv jw in jx b jy mg ka kb kc mh ke kf kg mi ki kj kk mj km kn ko mk kq kr ks ig bi translated">我希望我已经能够让初学者了解什么是咕噜声。语法非常简单。您也可以使用grunt来运行单元测试。grunt库有非常受欢迎的文档，你可以用Grunt做更多的事情。在grunt网站上搜索SASS关键字，尝试创建一个将SASS文件编译为CSS文件的任务，然后您将看到可用插件的列表。现在，在安装之前，查看你想使用的每个插件的详细信息是非常重要的。一旦你点击一个特定的插件，它会把你带到npm网站，在那里你会找到安装它的代码。有些插件要求你的电脑上有其他的库，所以在你选择之前要阅读手册。</p><p id="773a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢您的阅读和快乐编码！</p><p id="888a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">更多内容看</em> <a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nd">说白了。报名参加我们的</em> </a><a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nd">免费每周简讯</em> </a> <em class="nd">。在我们的</em> <a class="ae kt" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="nd">社区</em> </a> <em class="nd">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Run Express and React Concurrently</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何同时运行Express和React</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-handle-cors-in-express-how-to-run-express-server-and-react-client-concurrently-a76d551a8553?source=collection_archive---------4-----------------------#2021-01-26">https://javascript.plainenglish.io/how-to-handle-cors-in-express-how-to-run-express-server-and-react-client-concurrently-a76d551a8553?source=collection_archive---------4-----------------------#2021-01-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="a19c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">以及如何在Express和Node.js服务器中处理CORS</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b377935b32e3e388234d6e55b74762ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jHD9tvFiyE4AsFGZ"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina @ wocintechchat.com</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ad32" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将演示:</p><ol class=""><li id="7608" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">如何处理Express和Node.js服务器中的CORS问题</li><li id="e2b3" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">如何用一个npm命令同时运行服务器和客户端？</li></ol><h2 id="7a18" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">服务器端</h2><p id="374b" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">首先，我们将学习Visual Studio代码，我们将从后端开始</p><p id="882d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在终端，我们运行“npm init -y”来创建package.json. <br/>我们将安装我们的依赖项，包括express和concurrently。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="26f7" class="mg mh iq nf b gy nj nk l nl nm">npm i express concurrently</span></pre><p id="94a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并发允许我们同时运行后端Express服务器和react服务器，我们只需在package.json中添加一些脚本</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="d0ad" class="mg mh iq nf b gy nj nk l nl nm">"scripts": {</span><span id="ac48" class="mg mh iq nf b gy nn nk l nl nm">"test": "echo \"Error: no test specified\" &amp;&amp; exit 1",</span><span id="0641" class="mg mh iq nf b gy nn nk l nl nm">"client": "npm start --prefix client",</span><span id="79c1" class="mg mh iq nf b gy nn nk l nl nm">"dev": "concurrently \"nodemon server\" \"npm run client\""</span><span id="7dd7" class="mg mh iq nf b gy nn nk l nl nm">},</span></pre><p id="1c6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将添加"--前缀client "，这将进入客户端文件夹和<br/>，然后运行和npm启动。</p><p id="f7dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们创建server.js，引入express并初始化它。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="2a67" class="mg mh iq nf b gy nj nk l nl nm">const express = require('express');</span><span id="3768" class="mg mh iq nf b gy nn nk l nl nm">const app = express();</span></pre><p id="2299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，监听端口5000</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="8581" class="mg mh iq nf b gy nj nk l nl nm">app.listen(5000,()=&gt;console.log('server started'))</span></pre><p id="4d9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建一个用于返回json对象的端点。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="ef00" class="mg mh iq nf b gy nj nk l nl nm">app.get('/greeting',(req,res)=&gt;{</span><span id="4d00" class="mg mh iq nf b gy nn nk l nl nm">res.json({greeting:'Hello'})</span><span id="44c4" class="mg mh iq nf b gy nn nk l nl nm">})</span></pre><h2 id="d6a6" class="mg mh iq bd mi mj mk dn ml mm mn dp mo lf mp mq mr lj ms mt mu ln mv mw mx my bi translated">客户端</h2><p id="f0ac" class="pw-post-body-paragraph kw kx iq ky b kz mz jr lb lc na ju le lf nb lh li lj nc ll lm ln nd lp lq lr ij bi translated">我们将继续讨论反应部分，我们将使用</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="8224" class="mg mh iq nf b gy nj nk l nl nm">npx create-react-app client</span></pre><p id="5cc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它将在一个名为client的文件夹中生成react应用程序，我们将删除一些不必要的文件</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ad65ea6b9dc4adf3ce6d349fb85a98e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/format:webp/1*O1GXj7r65SttLsByzT9yCQ.png"/></div></figure><p id="dad9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还删除了App.js中不必要的代码</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="7e07" class="mg mh iq nf b gy nj nk l nl nm">function App() {</span><span id="4833" class="mg mh iq nf b gy nn nk l nl nm">fetch('http://localhost:5000/greeting')</span><span id="d01c" class="mg mh iq nf b gy nn nk l nl nm">.then(response =&gt; response.json())</span><span id="aec0" class="mg mh iq nf b gy nn nk l nl nm">.then(data =&gt; console.log(data));</span><span id="0d0d" class="mg mh iq nf b gy nn nk l nl nm">return (</span><span id="bef3" class="mg mh iq nf b gy nn nk l nl nm">&lt;div className="App"&gt;</span><span id="2c6e" class="mg mh iq nf b gy nn nk l nl nm">app</span><span id="60e8" class="mg mh iq nf b gy nn nk l nl nm">&lt;/div&gt;</span><span id="88cb" class="mg mh iq nf b gy nn nk l nl nm">);</span><span id="f6df" class="mg mh iq nf b gy nn nk l nl nm">}</span></pre><p id="5ac8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们去App.js，用JavaScript fetch api取“http://localhost:5000/greeting”。</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="7f7b" class="mg mh iq nf b gy nj nk l nl nm">fetch('http://localhost:5000/greeting')</span><span id="b018" class="mg mh iq nf b gy nn nk l nl nm">.then(response =&gt; response.json())</span><span id="9cfa" class="mg mh iq nf b gy nn nk l nl nm">.then(data =&gt; console.log(data));</span></pre><p id="47cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以运行“npm run dev”来同时运行服务器和客户机。</p><p id="0329" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在chrome开发者工具的控制台，我们会看到一条cors错误消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi np"><img src="../Images/e8cafa7d9e495e6b375cab5987cfa553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*soLLNBsgZxFzhbTG3JIYew.png"/></div></div></figure><p id="090a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们需要导入另一个包“cors”，回到根文件夹并运行“npm i cors”</p><p id="fd88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">CORS是一个节点。js包，用于提供一个连接/快速中间件，该中间件可用于支持具有各种选项的CORS。</p><p id="f62e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">转到server.js，导入cors并启用所有cors</p><pre class="kg kh ki kj gt ne nf ng nh aw ni bi"><span id="9c3e" class="mg mh iq nf b gy nj nk l nl nm">const express = require('express');</span><span id="e88b" class="mg mh iq nf b gy nn nk l nl nm"><strong class="nf ir">const cors = require('cors');</strong></span><span id="c16a" class="mg mh iq nf b gy nn nk l nl nm">const app = express();</span><span id="2821" class="mg mh iq nf b gy nn nk l nl nm"><strong class="nf ir">app.use(cors())</strong>;</span></pre><p id="9ffa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们可以看到从服务器返回的JSON数据。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/c970cc4edbd49a3663621ce0d5146b63.png" data-original-src="https://miro.medium.com/v2/resize:fit:660/format:webp/1*gHVCsmsjA8E300F8gfFE_g.png"/></div></figure><p id="4d2c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">本教程的视频版本:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nr ns l"/></div></figure><div class="nt nu gp gr nv nw"><a href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">ckmobile</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">无论你是在后台还是前台工作，JavaScript现在都非常重要。NodeJS、Angular、VueJS或React all…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.youtube.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><p id="cbea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">源代码:</p><div class="nt nu gp gr nv nw"><a href="https://github.com/cyrus8050/yt-react-express-concurrent-cors" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">Cyrus 8050/yt-react-express-concurrent-CORS</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">在GitHub上创建一个帐户，为Cyrus 8050/yt-react-express-concurrent-CORS开发做出贡献。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">github.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Increase Velocity with Angular Schematics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过角度示意图增加速度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/increase-velocity-with-angular-schematics-cc276a7849ac?source=collection_archive---------5-----------------------#2021-01-01">https://javascript.plainenglish.io/increase-velocity-with-angular-schematics-cc276a7849ac?source=collection_archive---------5-----------------------#2021-01-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a8b5" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">自动创建可重用的类型脚本包</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/345ed29b231144580178847f4312778a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ecFTZgxceDunbp7yi16qtw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@d_mccullough?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Daniel McCullough</a> on <a class="ae ks" href="https://unsplash.com/s/photos/blueprints?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fc97" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我最近非常专注于构建自动化工具，为我们的开发团队提供生产力提升。在评估了众多自动化平台之后，包括<a class="ae ks" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank"> nx </a>和<a class="ae ks" href="https://yeoman.io/learning/" rel="noopener ugc nofollow" target="_blank"> yeoman </a>，我们选择了<a class="ae ks" href="https://angular.io/guide/schematics" rel="noopener ugc nofollow" target="_blank"> Angular Schematics </a>作为我们的平台。本文将探索一个简单的示意图，用于生成支持同构JavaScript(可以在客户机和服务器上运行)的最佳实践TypeScript包。我们还将强调自动化工具在良好系统设计中的重要性。</p><blockquote class="lp lq lr"><p id="3e95" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">为什么是角度示意图？</p></blockquote><p id="3d27" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">Angular Schematics提供了其他生成器所没有的可组合性。它内置的实用程序支持函数概念，包括函数处理和组合。Schematics还融合了JSON和TypeScript，以提供更快的代码重用。我可以用现有的图表或现有的生成器功能来组成新的图表。它还通过使用TypeScript来鼓励类型安全。Angular Schematics与角度应用程序没有任何依赖关系。例如，我们有React组件的原理图生成器。</p><blockquote class="lp lq lr"><p id="0dcc" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">最佳实践包的定义是什么？</p></blockquote><p id="05ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">可重用组件包是高效产品团队的支柱。因此，我们的基础设施团队必须获得正确的包架构。对我们来说，最佳实践必须包括以下内容:</p><ol class=""><li id="1658" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">支持所有主要模块系统</li><li id="1e04" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">静态代码分析</li><li id="989a" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">测试自动化</li><li id="5c31" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">证明文件</li><li id="1227" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">Github协作工具</li></ol><p id="2fe7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的角度示意图使用<a class="ae ks" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> WebPack </a>来生成一个可由所有目标模块加载器(CommonJS、AMD、es和script标签)使用的UMD模块。<a class="ae ks" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>、<a class="ae ks" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>和<a class="ae ks" href="https://prettier.io/" rel="noopener ugc nofollow" target="_blank">漂亮器</a>提供良好的静态代码分析。Karma 和Jasmine 提供了测试自动化。Typedoc 用于生成每个构建的文档。并且<a class="ae ks" href="https://www.npmjs.com/package/husky" rel="noopener ugc nofollow" target="_blank"> Huskey </a>运行预提交检查，而<code class="fe mk ml mm mn b">.github</code>文件夹包括<a class="ae ks" href="https://docs.github.com/en/free-pro-team@latest/github/creating-cloning-and-archiving-repositories/about-code-owners" rel="noopener ugc nofollow" target="_blank">代码所有者文件</a>和<a class="ae ks" href="https://docs.github.com/en/free-pro-team@latest/github/building-a-strong-community/creating-a-pull-request-template-for-your-repository" rel="noopener ugc nofollow" target="_blank"> PR模板</a>以确保稳固的Github协作。看看下面的演示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mo mp l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Demo of Angular Schematic for TypeScript packages</figcaption></figure><p id="013b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你不熟悉角度原理图，请阅读本文。你不必理解所有的角度示意图概念。您必须了解自动化在减少人为错误和促进最佳实践方面的力量。我们示意图的要点如下。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mq mp l"/></div></figure><p id="cb17" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们示意图的入口点是<code class="fe mk ml mm mn b">collection.json</code>。它定义了我们的原理图工厂函数和模式文件。<code class="fe mk ml mm mn b">schema.json</code>文件定义了可以作为参数传递或通过命令提示符输入的参数。我们在<code class="fe mk ml mm mn b">index.ts</code>中定义的<code class="fe mk ml mm mn b">create</code>函数通过加载带有插值选项的模板文件来执行所有繁重的工作，插值选项是通过参数或提示收集的。</p><p id="acda" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的原理图使用了包含在上述存储库的<code class="fe mk ml mm mn b">files</code>目录中的模板文件。这些模板接受我们的原理图的插值参数。更重要的是，它们包括所有必需的开发依赖项、脚本和样板文件:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/d39936c7ea9d50eb4d66c3abb887d0fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lvSXEmEKwjK2upYOdfiGFA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Screenshot of our template files</figcaption></figure><p id="59a4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">要在本地执行我们的示意图，请运行以下命令:</p><pre class="kd ke kf kg gt ms mn mt mu aw mv bi"><span id="dbf7" class="mw mx in mn b gy my mz l na nb">schematics ./src/collection.json:create --dry-run false</span></pre><p id="66ba" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在运行我们的原理图并按照提示操作之后，我们得到了一个股票类型脚本包，其中包含了我们所有的最佳实践优点(请务必查看<a class="ae ks" href="https://www.youtube.com/watch?v=HgZhRI7mkik" rel="noopener ugc nofollow" target="_blank">演示</a>)。<strong class="kv io">这个原理图</strong>的源代码是在GitHub 上可以获得的<a class="ae ks" href="https://github.com/doriansmiley/typescript-starter" rel="noopener ugc nofollow" target="_blank">，所以你可以测试和修改。</a></p><p id="a4de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们回顾一下这个生成的包包括的功能:</p><ol class=""><li id="f789" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">用于客户端和服务器应用程序的UMD模块</li><li id="2cb8" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">类型安全</li><li id="3d44" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">使用ESlint和pretty进行预提交检查</li><li id="f74f" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">带有测试样板的测试转轮</li><li id="39c0" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">构建、测试和发布脚本</li><li id="eabe" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">使用<a class="ae ks" href="https://www.npmjs.com/package/typedoc" rel="noopener ugc nofollow" target="_blank"> Typedoc </a>生成的文档。</li><li id="7c64" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">Github协作工具，包括代码所有者和拉请求模板。</li><li id="1614" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">构建和测试包的说明</li><li id="bcff" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">变更日志</li><li id="0144" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">适当忽略文件</li></ol><p id="b9af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">更重要的是，这里有我们没有得到的:</strong></p><ol class=""><li id="aba9" class="lw lx in kv b kw kx kz la lc ly lg lz lk ma lo mb mc md me bi translated">与复制样板文件相关的人为错误</li><li id="3436" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">不一致的包装设计</li><li id="215c" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">与不兼容模块相关的延迟</li><li id="07b9" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">用可预防的失败堵塞我们的构建系统的提交</li><li id="6cb9" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">未记录的代码</li><li id="3b36" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">缺少PR信息</li><li id="30f8" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">缺少必需的审核</li><li id="d8a8" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">缺少测试自动化</li><li id="1bcd" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">未记录的变更</li><li id="911b" class="lw lx in kv b kw mf kz mg lc mh lg mi lk mj lo mb mc md me bi translated">不应跟踪的跟踪文件</li></ol><p id="26a7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">像这样简单的生成器可以在一天或更短的时间内编写完成。更复杂的生成器可能需要一个开发人员花费两周或者更少的时间。一旦这些低代码解决方案在生产团队手中，节省的时间是这个数字的许多倍(在近期内可能是几个数量级)。<strong class="kv io">对构建自动化工具的承诺就是对与代码生成器一致的设计模式的承诺</strong>。受益于此的系统往往属于架构良好的类别。如果你没有预算时间来构建低代码解决方案，你可能会浪费时间和金钱。了解<a class="ae ks" href="https://angular.io/guide/schematics" rel="noopener ugc nofollow" target="_blank">角度示意图</a>并发现您可以实现哪些自动化。</p></div></div>    
</body>
</html>
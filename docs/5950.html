<html>
<head>
<title>How to Use RxJS debounceTime with Angular</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将RxJS去抖时间与Angular配合使用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-rxjs-debouncetime-with-angular-15270c7d720f?source=collection_archive---------4-----------------------#2021-12-21">https://javascript.plainenglish.io/how-to-use-rxjs-debouncetime-with-angular-15270c7d720f?source=collection_archive---------4-----------------------#2021-12-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/36ce71b69ed9dc00c656f4f948fb17ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x3l55V89muzuP3oOOSxKuw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by Tudor Baciu</figcaption></figure><p id="5a9e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">RxJS是目前前端开发中非常热门的话题。它是一个强大的库，打开了反应式编程的大门。RxJS库使用observables来处理异步数据调用、回调、事件等。如果您曾经使用过RxJS，您很可能听说过observables、observer、subscribe等术语。在进入主题之前，让我们快速了解一下这些概念。</p><h2 id="d8f6" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">可观察量</h2><p id="b73a" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">我们可以把一个可观测值看作是一段时间内发生的数据流。数据可以同步或异步返回。</p><h2 id="b46c" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">观察者</h2><p id="ec65" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">观察器的作用是在观察器返回一些数据、错误或报告完成时执行一些功能。</p><h2 id="f8a4" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">签署</h2><p id="e9c1" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">观察者需要监听可观察对象，以检测可观察对象返回的数据、错误或完整性。这是通过使用subscribe方法的<strong class="kb io">订阅</strong>完成的。</p><p id="ada6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们可以用程序化的方式展示。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="77c9" class="kx ky in ma b gy me mf l mg mh">Observable.subscribe(<br/>    data =&gt; {<br/>    },<br/>    error =&gt; {<br/>    },<br/>    complete =&gt; {<br/>    }<br/>);</span></pre><p id="3bc9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我们正在通过subscribe方法监听可观测数据的变化。subscribe方法中的一切都是观察者。如果从可观测的<strong class="kb io"> <em class="mi">数据中得到某个值= &gt; {} </em> </strong>函数将被调用。如果返回一个错误<strong class="kb io"> <em class="mi"> error = &gt; {} </em> </strong>将被调用。</p><p id="fade" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">理论说够了！让我们进入我们的主题。</p><h2 id="aab4" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">什么是去抖时间？</h2><p id="5320" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">去抖时间是RxJS的一个运算符。RxJS库中有很多操作符可用。如果有人问你，为什么RxJS如此强大，那是因为RxJS操作符。这些将为我们的应用程序提供一些有趣的功能。无论如何，由于RxJS中有许多操作员，你应该在选择合适的操作员方面进行一些练习。</p><p id="120a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">那么，在哪些用例中我们可以使用去抖时间呢？我举个简单的例子。</p><p id="1139" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mi"> Imaging您的应用程序包含搜索功能，每当用户键入要搜索的内容时，它就会从后端获取数据。那么，您打算在什么时候向后端发送请求呢？基本上，我们可以做两件事。</em></p><ol class=""><li id="139b" class="mj mk in kb b kc kd kg kh kk ml ko mm ks mn kw mo mp mq mr bi translated"><em class="mi">每次击键都向后端发送一个HTTP请求。</em></li><li id="c2f8" class="mj mk in kb b kc ms kg mt kk mu ko mv ks mw kw mo mp mq mr bi translated"><em class="mi">键入要搜索的内容，并要求用户按Enter或单击应用程序中的按钮。</em></li></ol><p id="d23c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第一种方法似乎不太好，因为它发送了大量的后端调用，这会降低应用程序的性能。</p><p id="53c6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">第二种方法没有问题，但是用户在输入内容后必须做一些额外的工作。</p><p id="e373" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果我们可以在用户输入后自动进行后端调用，会怎么样？这可能吗？</p><p id="100b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">是的，当然。这时去抖时间操作员来帮我们了。</p><h2 id="f3e8" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">去抖时间是如何工作的？</h2><p id="c24a" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">我们可以定义去抖时间的延迟，如下图所示。延迟应以毫秒为单位。</p><pre class="lv lw lx ly gt lz ma mb mc aw md bi"><span id="32d6" class="kx ky in ma b gy me mf l mg mh">debounceTime(500)</span></pre><p id="ba66" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，如果半秒钟内没有发生任何事情，它将发出值<strong class="kb io">。换句话说，它在用户完成输入半秒钟后返回值。</strong></p><h2 id="1f64" class="kx ky in bd kz la lb dn lc ld le dp lf kk lg lh li ko lj lk ll ks lm ln lo lp bi translated">角度变化时的去抖时间</h2><p id="ee99" class="pw-post-body-paragraph jz ka in kb b kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw ig bi translated">让我们看看如何用Angular实现去抖时间。请记住，这不仅仅是有角度的。RxJS操作符可以在任何JavaScript框架或库中使用。概念是相似的，只是语法不同。</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="ed85" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这就是它的工作原理。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/3bd14d4160d0149ec36339ce61bc29ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*L34Scovay7W5RXuoruNFVg.gif"/></div></div></figure><p id="a82f" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果使用角度反应形式，可以执行以下操作。</p><figure class="lv lw lx ly gt jo"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="3195" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是输出。</p><figure class="lv lw lx ly gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/6956e6371cb475ca2002a04d82c6efc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*AIKkBn62bczfZFqYgwUHww.gif"/></div></div></figure><p id="44a4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果需要，可以使用<em class="mi"> onInit </em>生命周期钩子代替<em class="mi">afterconetenit。</em>取消订阅可观察的组件销毁是一个很好的做法。</p><p id="8691" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">回到我们的搜索示例，用户需要做的唯一事情就是，键入内容并等待结果。它将在我们在去抖时间中定义的时间之后发送请求到后端。这就是RxJS的妙处。所以，只要有可能，总是喜欢在你的应用程序中使用RxJS，这会让你的应用程序更智能。</p><p id="b896" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">编码快乐！</p><p id="98cb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">参考文献</strong></p><div class="na nb gp gr nc nd"><a href="https://www.learnrxjs.io/learn-rxjs/operators/filtering/debouncetime" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">去抖时间</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">丢弃输出间隔时间小于指定时间的发出值</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.learnrxjs.io</p></div></div><div class="nm l"><div class="nn l no np nq nm nr jt nd"/></div></div></a></div><div class="na nb gp gr nc nd"><a href="https://www.learnrxjs.io/learn-rxjs/concepts/rxjs-primer" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">RxJS底漆</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">单播。如果你更喜欢一个会议谈话场景-一个可观察的，许多观察者-你会采取不同的…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.learnrxjs.io</p></div></div><div class="nm l"><div class="ns l no np nq nm nr jt nd"/></div></div></a></div><p id="363c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mi">更多内容请看</em><strong class="kb io"><em class="mi"/></strong><a class="ae nt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kb io"><em class="mi">说白了. io </em> </strong> </a> <strong class="kb io"> <em class="mi">。</em> </strong> <em class="mi">报名参加我们的</em> <a class="ae nt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb io"> <em class="mi">免费每周简讯这里</em> </strong> </a> <strong class="kb io"> <em class="mi">。</em> </strong></p></div></div>    
</body>
</html>
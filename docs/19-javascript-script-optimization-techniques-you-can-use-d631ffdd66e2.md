# 您可以使用的 19 种 JavaScript 脚本优化技术

> 原文：<https://javascript.plainenglish.io/19-javascript-script-optimization-techniques-you-can-use-d631ffdd66e2?source=collection_archive---------8----------------------->

## 提高网站渲染速度。

![](img/be596fc66b6484eef6a7a198d560e726.png)

Photo by [Claudio Schwarz](https://unsplash.com/@purzlbaum?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

很少遇到不使用 JavaScript 的网站。在本文中，我将从网站渲染速度和性能本身的角度讨论优化 JavaScript 的技术。

## **1。将 JavaScript 脚本提取到单独的文件中**

将脚本分成单独的。js 文件有很多优点。一个文件中的单个脚本更改会导致更改自动传递到该文件所在的所有页面。减小发送到浏览器的 HTML 代码的大小。

## **2。异步**

async 属性告诉浏览器，该脚本不影响 DOM 或 CSSOM，并且只能在加载和呈现整个页面后进行处理。async 属性仅适用于放置在单独文件中的脚本——这就是将脚本提取到单独文件中如此重要的原因。

这种脚本既不影响 DOM 也不影响 CSSOM，并且可以使用 async 属性轻松地分成单独的文件(或单个文件),例如分析工具的脚本。要找到的脚本，无论是在页眉还是页脚，都可以粘贴到外部文件中，链接应该放在页面上。

## **3。拦截 JavaScript**

阻塞 JavaScript 是在构建 CSSOM 树之前必须执行的脚本。JS 脚本会阻止呈现，无论是作为带有 src 属性的标记还是作为内联脚本。

## **4。HTML 脚本—内联**

内联脚本在性能方面更好，因为它不发送额外的 HTTP 请求——您不必等待它。但是，该脚本也会阻止呈现，并且不能使用 async 属性。

## **5。延期**

defer 属性的工作方式完全类似于在主体结束标记之前添加的锁定脚本。它之所以有效，是因为即使带有 src 属性的

## **6。异步编程**

记住上面的信息，将 async 添加到所有脚本中，然后“安排”它们的执行顺序，以便不破坏依赖性，这是一个巨大的诱惑。可能吗？是的，但是接下来我们进入了所谓的异步编程。

## **7。如何协调异步和延迟相关的脚本？**

将依赖脚本的执行延迟到异步加载的库被加载就足够了。最简单的技术之一是使用 setTimeout()方法；然而，它可能不可靠。操作的原理打破了异步编程的学术原理，它说:“你不应该对给定进程的时间做任何假设。”

## **8。Require.js 库**

Require.js 库将优化必要库的加载，也用于大型应用程序中。它只能加载给定时刻需要的文件，并保持依赖关系。这是一个我们加载 jQuery 和 Bootstrap 的例子。

## **9。优化 JavaScript 文件**

静态文本资源通常都是这样——因为 JavaScript 脚本文件通常都是这样——我们也可以使用已经学过的技术来压缩和缓存它们。

## **10。JavaScript 脚本的缩小**

任何文本资源都可以通过删除多余的字符来最小化，比如空格、制表符、换行符，甚至是整个注释块。JavaScript 代码甚至比 HTML 或 CSS 代码更容易被最小化。由于许多语法缩短技术，我们在这方面有更多的可能性。函数和变量的名称可以转换成单字母的等价物，这不会改变编程功能的含义。阅读更多关于最小化文本资源和自动化这一过程的技术。

## 11。浏览器缓存(缓存控制、过期、电子标签)

下载后。包含 JavaScript 代码的 js 文件可以保存在浏览器的缓存中——通常在本地磁盘上。下一次子页面访问该文件时，它将不必再次下载该文件并执行代价高昂的 HTTP 和下载请求。

服务器可能会发送一个 Cache-Control 或 Expires 头，告诉浏览器复制文件并在指定的时间段内使用未更改的版本。

## **12。快速服务器和 CDN**

最好将静态文件放在单独的子域中，并与 CDN 网络集成。这是因为不同的服务器在提供静态文件(即 TTFB)时具有不同的“响应时间”,以及不同的带宽和互联网连接质量。尽管这些都是几十或几百千字节的小文件，但是当从一个快速且正确优化的服务器加载脚本时，您可以感觉到不同。

## **13。压缩**

JavaScript 文件是文本，正如我们所知，文本可以使用标准的数据压缩算法进行压缩。使用 Brotli、GZP 或 deflate 等模块在服务器端执行的压缩对用户来说是不可见的，可让您节省高达 80%的传输量。Google 开发的 Brotli 模块或传统的 deflate 或 GZIP 模块应该在任何提供 JavaScript 文件和其他文本资源(CSS、XML)的服务器上默认安装和启用。

## **14。移除未使用的 JavaScript 代码**

有时候页面上附加的 JavaScript 脚本没有任何功能。这些可能是在另一个子页面上使用过的库，或者是在后续更新中撤销的功能。

## **15。优化 JavaScript 代码性能**

程序的源代码可以在性能方面进行优化，即处理器必须执行的计算次数。这些操作不仅可以加快页面加载速度，还可以节省客户端设备的能源。

## 16。记忆化

记忆化是一种通用的代码优化技术，它记录了一个昂贵的函数或对给定参数的响应。

## **17。对外部服务请求的缓存**

我们可以将 JSON 或 XML 文件的内容存储在一个临时变量中，如果我们重复地引用它，并且我们知道它不会被频繁地改变。

## **18。节流**

我在编写惰性加载机制时介绍了节流技术。它在于降低触发触发器的强度。通过带有条件语句和 setTimeout 的简单构造，您可以让事件监听器忽略一些事件，并且功能仍然有效。

## 19。使用局部变量而非全局变量

使用局部变量更有效，因为我们缩小了命名空间。所有的全局变量都是 window 对象的一部分，在 window 对象中搜索变量可能需要相对较长的时间。

# **总结**

利用 JavaScript 优化页面是值得的，因为以不同方式实现的相同功能可能会显著降低页面速度，或者对其加载时间没有影响。此外，我们有各种各样的可能性，因为 JavaScript 优化可以在编写脚本时完成，当将它们附加到页面和部署本身时。

*更多内容请看*[***plain English . io***](http://plainenglish.io/)
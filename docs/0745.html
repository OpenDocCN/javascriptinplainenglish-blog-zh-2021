<html>
<head>
<title>Animate with the react-spring Library — useSprings and useTrail Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用react-spring库制作动画——使用弹簧和使用轨迹挂钩</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/animate-with-the-react-spring-library-usesprings-and-usetrail-hooks-b39f03a5d467?source=collection_archive---------6-----------------------#2021-02-15">https://javascript.plainenglish.io/animate-with-the-react-spring-library-usesprings-and-usetrail-hooks-b39f03a5d467?source=collection_archive---------6-----------------------#2021-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d0eaf1a951582f05e35b13af35b17540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A-AdtQaTe9jGgEeE"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@arjabedbd?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Anisur Rahman</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="54b4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了react-spring库，我们可以轻松地在react应用程序中渲染动画。</p><p id="dec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何开始使用react-spring。</p><h1 id="86ff" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用弹簧</h1><p id="0553" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">挂钩让我们可以创建多个弹簧，每个弹簧都有自己的配置。</p><p id="8045" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="5373" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { animated, useSprings } from "react-spring";</span><span id="717c" class="mq lc iq mh b gy mv ms l mt mu">const items = [<br/>  { text: "foo", opacity: 0.3, id: 1 },<br/>  { text: "bar", opacity: 0.6, id: 2 },<br/>  { text: "baz", opacity: 0.9, id: 3 }<br/>];</span><span id="d367" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const springs = useSprings(<br/>    items.length,<br/>    items.map((item) =&gt; ({ opacity: item.opacity, from: { opacity: 0 } }))<br/>  );</span><span id="4713" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      {springs.map((props, i) =&gt; (<br/>        &lt;animated.div style={props} key={i}&gt;<br/>          {items[i].text}<br/>        &lt;/animated.div&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="bd61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用<code class="fe me mf mg mh b">useSprings</code>钩子为每个项目创建动画样式。</p><p id="6157" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是要创建的样式对象的数量。</p><p id="74ad" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是我们想要应用的样式的数组。</p><p id="3dbf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后在JSX中，我们通过将<code class="fe me mf mg mh b">props</code>传递给<code class="fe me mf mg mh b">style</code>道具来应用样式。</p><p id="3e32" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们也可以用<code class="fe me mf mg mh b">set</code>和<code class="fe me mf mg mh b">stop</code>功能控制我们的动画。</p><p id="13dd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="2580" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { animated, useSprings } from "react-spring";</span><span id="ceed" class="mq lc iq mh b gy mv ms l mt mu">const items = [<br/>  { text: "foo", opacity: 0.3, id: 1 },<br/>  { text: "bar", opacity: 0.6, id: 2 },<br/>  { text: "baz", opacity: 0.9, id: 3 }<br/>];</span><span id="8368" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [springs, set, stop] = useSprings(items.length, (index) =&gt; ({<br/>    opacity: items[index].opacity,<br/>    from: { opacity: 0 }<br/>  }));</span><span id="c795" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      &lt;button onClick={() =&gt; set((index) =&gt; ({ opacity: 1 }))}&gt;start&lt;/button&gt;<br/>      &lt;button onClick={() =&gt; stop()}&gt;stop&lt;/button&gt;<br/>      {springs.map((props, i) =&gt; (<br/>        &lt;animated.div style={props} key={i}&gt;<br/>          {items[i].text}<br/>        &lt;/animated.div&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="b2e8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有相同的<code class="fe me mf mg mh b">items</code>数组。</p><p id="5a31" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用带有函数的<code class="fe me mf mg mh b">useSpring</code>钩子作为第二个参数，而不是一个样式数组。</p><p id="9fef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用一个函数作为第二个参数调用它，除了<code class="fe me mf mg mh b">springs</code>之外，还会给我们<code class="fe me mf mg mh b">set</code>和<code class="fe me mf mg mh b">stop</code>函数，</p><p id="b172" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">set</code>函数让我们以给定的风格运行动画。</p><p id="df21" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">stop</code>功能让我们停止动画。</p><p id="808c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们以同样的方式显示动画div。</p><h1 id="f5fb" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用踪迹</h1><p id="edfd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">useTrail</code>让我们用一个配置创建多个弹簧。</p><p id="496c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="23b4" class="mq lc iq mh b gy mr ms l mt mu">import React from "react";<br/>import { animated, useTrail } from "react-spring";</span><span id="dd42" class="mq lc iq mh b gy mv ms l mt mu">const items = [<br/>  { text: "foo", id: 1 },<br/>  { text: "bar", id: 2 },<br/>  { text: "baz", id: 3 }<br/>];</span><span id="6825" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const trail = useTrail(items.length, { opacity: 1, from: { opacity: 0 } });</span><span id="3176" class="mq lc iq mh b gy mv ms l mt mu">  return (<br/>    &lt;&gt;<br/>      {trail.map((props, i) =&gt; (<br/>        &lt;animated.div style={props} key={i}&gt;<br/>          {items[i].text}<br/>        &lt;/animated.div&gt;<br/>      ))}<br/>    &lt;/&gt;<br/>  );<br/>}</span></pre><p id="a854" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第一个参数是要创建的动画样式对象的数量。</p><p id="b71f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数是要创建的动画样式。</p><p id="c32b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以像使用<code class="fe me mf mg mh b">useSprings</code>钩子一样应用它们。</p><h1 id="9c5d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="fdfa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">useSprings</code>和<code class="fe me mf mg mh b">useTrail</code>钩子为一组组件创建动画。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Preventing The Next NPM Virus Outbreak</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">防止下一次NPM病毒爆发</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/preventing-the-next-npm-virus-outbreak-7403e0d672cc?source=collection_archive---------11-----------------------#2021-02-12">https://javascript.plainenglish.io/preventing-the-next-npm-virus-outbreak-7403e0d672cc?source=collection_archive---------11-----------------------#2021-02-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/619ad6f781283b99169b413c90db261d.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*QlhwNHwI3g3Jihl80lRQJQ.gif"/></div></figure><p id="e585" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如今，做<code class="fe kp kq kr ks b">npm install</code>似乎成了开发者的第二天性。但是你知道吗，如果没有适当的关注和审计npm包，下次我们不知不觉地做<code class="fe kp kq kr ks b">npm i</code>时，你也可能安装恶意脚本。</p><h1 id="a536" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">NPM病毒是免费的吗？</h1><p id="762f" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">我们知道国家预防机制包是由第三方行为者维护的。这可以是一个开发者，一个开发团队或者一个超级大的公司。</p><p id="3142" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">NPM本身是非常可靠的。但是NPM能保证你安装的任何软件包都没有病毒吗？可惜没有。</p><p id="3c52" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">所以这些天来，经常听到<a class="ae lw" href="https://youtu.be/24tQRwIRP_w?t=935" rel="noopener ugc nofollow" target="_blank">一些开发者</a>预见到有一天一次成功的病毒攻击会通过NPM数百万台机器传播开来。</p><p id="635c" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">抱歉，如果我是第一个告诉你的人:<strong class="jt io">NPM</strong>🤦🏼‍♂️.</p><p id="c105" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我不会深入所有的技术细节，如何利用可能在NPM。只需知道npm已经<a class="ae lw" href="https://blog.npmjs.org/post/141702881055/package-install-scripts-vulnerability" rel="noopener ugc nofollow" target="_blank">公开</a>披露，一个明显“正常”的NPM包(或其依赖项)有可能在你的机器中执行恶意代码并造成严重破坏。</p><p id="5484" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于<em class="lx">来说，任何</em>包都可能被破坏。你可能已经安装了ESLint吧？你猜怎么着？它的一个依赖项(不久前)遭到破坏，并在用户机器上安装了恶意代码。ESLint团队和NPM迅速采取行动解决问题，他们的事故报告可以在这里看到<a class="ae lw" href="https://status.npmjs.org/incidents/dn7c1fgrr7ng" rel="noopener ugc nofollow" target="_blank"/>。但这并不是最后一次发生病毒事件。现在，NPM安全小组正在发布此类事件的每周报告。</p><h1 id="0b90" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">防止暴露于未来的NPM病毒爆发</h1><p id="210e" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">漏洞可被定义为利用代码中的漏洞导致意外或恶意行为发生的脚本。一个漏洞可能是ESLint事件的罪魁祸首。我们可以采取一些措施来保护我们的代码，以避免感染任何未来的恶意脚本事件。</p><h1 id="5fd1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">NPM安全建议:</h1><h2 id="31cf" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 1。安装新的NPM软件包之前请三思</strong></h2><p id="c8ca" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">你确定你真的需要它吗？保养的好吗？你能自己编码吗？在添加新的依赖关系之前，问自己以下问题。保护你自己的最好方法就是简单地减少<em class="lx">和</em>套餐。如果你是团队的一员，你也可以<strong class="jt io">在安装一个新的软件包之前咨询你的团队</strong>。即使你只是在尝试。你可能不想成为那些使用看似无害的包，然后被报道含有漏洞的人之一，就像最近的<a class="ae lw" href="https://www.zdnet.com/article/malicious-npm-packages-caught-installing-remote-access-trojans/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">报道</strong> </a>中发生的那样。</p><h2 id="2259" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 2。手动使用</strong><code class="fe kp kq kr ks b"><strong class="ak">npm audit</strong></code><strong class="ak"/></h2><p id="3182" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">该命令由NPM发布，以应对其脆弱性。实际上每次你做<code class="fe kp kq kr ks b">npm install</code>，npm审计也会自动运行。<code class="fe kp kq kr ks b">npm audit</code>命令将扫描你的包的漏洞。你甚至可以通过<code class="fe kp kq kr ks b">npm audit fix</code>自动修复漏洞。该命令的有效性取决于它如何更新到最新的威胁和报告，但它必须是您的编码库的一部分。您应该手动运行此命令，根据需要进行检查和修复。你可以在<a class="ae lw" href="https://docs.npmjs.com/cli/v6/commands/npm-audit" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">文档</strong> </a>上了解更多。这里还有一个<a class="ae lw" href="https://youtu.be/rXV6-eXB26s" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">的好视频</strong> </a>涵盖了运行这个命令时的常见情况。</p><h2 id="3329" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 3。Github警报</strong></h2><p id="d9c5" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">如果你使用Github，那么只需通过它的依赖bot alerts来利用Github，这是免费的。如果你忽略了这些警告，不要。在<a class="ae lw" href="https://docs.github.com/en/github/managing-security-vulnerabilities/about-alerts-for-vulnerable-dependencies" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> Github文档</strong> </a>上了解更多信息。</p><h2 id="8506" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 4。使用第三方软件</strong></h2><p id="2599" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">如果你是大团队的一员，这很有用。有很多开发安全的工具可以扫描你的依赖关系来寻找漏洞。部分选项有<a class="ae lw" href="https://snyk.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io"> Snyk </strong> </a>和<a class="ae lw" href="https://www.whitesourcesoftware.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">白源</strong> </a>。</p><h2 id="4506" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 5。支付开源维护者</strong></h2><p id="63f5" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">你没听错。许多NPM软件包都是开源的。维护者最终必须支付他们的账单，支持他们不仅可以在经济上帮助他们，还可以让他们承担道德责任。</p><h2 id="d8b6" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 6。向NPM报告可疑包裹</strong></h2><p id="9e39" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">就像你在机场听到的一样。对于support@npmjs.com来说，如果你看到任何可疑的事情，就报告给<a class="ae lw" href="mailto:support@npmjs.com" rel="noopener ugc nofollow" target="_blank"> <strong class="jt io">。</strong></a></p><h2 id="6173" class="ly ku in bd kv lz ma dn kz mb mc dp ld kc md me lh kg mf mg ll kk mh mi lp mj bi translated"><strong class="ak"> 7。禁用NPM脚本</strong></h2><p id="e057" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">您可以通过选择不使用脚本来阻止恶意脚本。这对某些人来说可能是一个障碍，因为它也禁用了package.json上的定制脚本。可能会出现软件包安装不正确以及npm run或npm test breaking等常见命令的意外后果。一些人通过使用shell别名如<code class="fe kp kq kr ks b">nrun = npm run --ignore-scripts=false</code>或<code class="fe kp kq kr ks b">ntest = npm test --ignore-scripts=false</code>来允许一些特定的脚本工作。我不能保证你还会遇到什么问题。尝试这种策略，风险自担。</p><h1 id="2b5c" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论</h1><p id="3827" class="pw-post-body-paragraph jr js in jt b ju lr jw jx jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko ig bi translated">那么下一个将影响数百万台电脑的末日NPM病毒何时到来？谁知道呢。因此，虽然我们可能无法阻止下一次爆发，但作为开发人员，我们需要保护自己。</p><p id="a0b6" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们总是渴望开始编码，并希望尽快设置好。但是下一次你准备安装npm的时候，问问你自己:<em class="lx">在安装</em>之前，我应该执行什么安全检查吗？我们总有办法审计我们的NPM套餐。</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/5d2b4e11628bfe456cce13ba7098f462.png" data-original-src="https://miro.medium.com/v2/resize:fit:562/format:webp/1*n-mFOpm8g8dT7t_wMzdtbg.jpeg"/></div></figure><p id="b092" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">通过应用这些NPM安全建议，我们的代码变得更加安全，我们可以大大降低下次爆发时被感染的风险。</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="9e90" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><em class="lx">原载于2021年2月11日https://fbohz.com</em><a class="ae lw" href="https://fbohz.com/next_npm_virus_outbreak" rel="noopener ugc nofollow" target="_blank"><em class="lx"/></a><em class="lx">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Make a RPG Game using JavaScript (Part 1)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript制作一个RPG游戏(第一部分)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-an-rpg-game-using-javascript-89b19cd49577?source=collection_archive---------5-----------------------#2021-10-13">https://javascript.plainenglish.io/how-to-make-an-rpg-game-using-javascript-89b19cd49577?source=collection_archive---------5-----------------------#2021-10-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8eb7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第1部分:用JavaScript的基础知识从头开始构建一个RPG游戏</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a22437940cccde27de5af6853305cc73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S35ZQBpXpjl9UcK74ID-Rw.png"/></div></div></figure><h1 id="85d5" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">介绍</h1><p id="adcc" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">最近，我参加了世界上最大的游戏开发竞赛之一——Ludum dare 49。你可以在这里找到我的投稿-<a class="ae mf" href="https://ldjam.com/events/ludum-dare/49/unstable-dome" rel="noopener ugc nofollow" target="_blank">https://ldjam.com/events/ludum-dare/49/unstable-dome</a>。</p><p id="29de" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">compo比赛持续48小时，在这段时间里，你必须从头开始构建一个游戏，制作图形、音乐等，一切都靠你自己。作为这个领域的业余爱好者，我决定用JavaScript作为我的游戏编码语言，我使用的游戏引擎是<a class="ae mf" href="https://kaboomjs.com/" rel="noopener ugc nofollow" target="_blank"> Kaboom.js </a>。</p><p id="01ec" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">通过这篇博文，我想分享我的经验以及如何用JavaScript的基础知识从头开始构建游戏的基础知识。</p><p id="8acf" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">对于那些喜欢通过观看视频学习的人，你可以直接参考我为此创建的视频播放列表:-</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ml mm l"/></div></figure><h1 id="6651" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">我们要报道什么？</h1><h2 id="1b53" class="mn ks iq bd kt mo mp dn kx mq mr dp lb ls ms mt ld lw mu mv lf ma mw mx lh my bi translated">第一部分</h2><ol class=""><li id="a422" class="mz na iq ll b lm ln lp lq ls nb lw nc ma nd me ne nf ng nh bi translated">如何设置我们的开发环境并安装所有需要的依赖项。</li><li id="4672" class="mz na iq ll b lm ni lp nj ls nk lw nl ma nm me ne nf ng nh bi translated">导入游戏引擎并在屏幕上渲染图形。</li></ol><h2 id="e854" class="mn ks iq bd kt mo mp dn kx mq mr dp lb ls ms mt ld lw mu mv lf ma mw mx lh my bi translated">第二部分</h2><ol class=""><li id="89ed" class="mz na iq ll b lm ln lp lq ls nb lw nc ma nd me ne nf ng nh bi translated">绘制一个2d字符数组作为地图，它将被映射到我们游戏中需要的精灵。</li><li id="f798" class="mz na iq ll b lm ni lp nj ls nk lw nl ma nm me ne nf ng nh bi translated">玩家运动和碰撞检测。</li></ol><h2 id="f804" class="mn ks iq bd kt mo mp dn kx mq mr dp lb ls ms mt ld lw mu mv lf ma mw mx lh my bi translated">第三部分</h2><p id="cf09" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">将您的游戏部署到云上，这样世界上的其他人也可以访问它。</p><h1 id="47c9" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">设置开发环境</h1><ol class=""><li id="1488" class="mz na iq ll b lm ln lp lq ls nb lw nc ma nd me ne nf ng nh bi translated">创建一个文件夹，你可以给它取任何名字。</li><li id="a3a5" class="mz na iq ll b lm ni lp nj ls nk lw nl ma nm me ne nf ng nh bi translated">然后在终端运行命令:- <code class="fe nn no np nq b">npm init</code>，在设置的不同部分按回车键即可。</li><li id="28dc" class="mz na iq ll b lm ni lp nj ls nk lw nl ma nm me ne nf ng nh bi translated">现在安装下面三个与<code class="fe nn no np nq b">parcel</code>相关的依赖项。你可以把Parcel看作是一个框架，它允许我们构建web应用程序。Parcel内置了一个开发服务器，它会在您进行更改时自动重新构建您的应用程序。Parcel接受任何类型的文件作为入口点，但是HTML文件是一个很好的起点。Parcel将根据您的所有依赖项构建您的应用程序。</li></ol><pre class="kg kh ki kj gt nr nq ns nt aw nu bi"><span id="d392" class="mn ks iq nq b gy nv nw l nx ny">npm i parcel-bundler<br/>npm i parcel-plugin-clean-easy<br/>npm i parcel-plugin-static-files-copy</span></pre><p id="19d8" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">4.完成上述步骤后，所有必需的依赖项都已安装。</p><p id="d978" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">5.创建一个名为<code class="fe nn no np nq b">index.html</code>的文件，这将是我们程序的入口。在此之后，将下列行添加到<code class="fe nn no np nq b">package.json</code>。</p><pre class="kg kh ki kj gt nr nq ns nt aw nu bi"><span id="f493" class="mn ks iq nq b gy nv nw l nx ny">"scripts": {<br/>    "start": "parcel src/index.html",<br/>    "build": "parcel build src/index.html",<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },</span></pre><p id="6824" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">6.现在，让我们给我们的<code class="fe nn no np nq b">index.html</code>文件添加一些代码。我们将使用&lt;脚本&gt;来导入我们的<code class="fe nn no np nq b">Kaboom.js</code>游戏引擎。下面是我们的<code class="fe nn no np nq b">index.html</code>文件的样子。</p><pre class="kg kh ki kj gt nr nq ns nt aw nu bi"><span id="1314" class="mn ks iq nq b gy nv nw l nx ny">&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;<br/>    &lt;link rel="stylesheet" href="<a class="ae mf" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css" rel="noopener ugc nofollow" target="_blank">https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css</a>"&gt;<br/>    &lt;link rel="stylesheet" href="game.css"&gt;<br/>    &lt;title&gt;Unstable Dome&lt;/title&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;section class="section"&gt;<br/>      &lt;div class="columns is-mobile"&gt;<br/>        &lt;div class="column is-8 is-offset-2"&gt;<br/>          &lt;h1 class="title is-4 has-text-centered"&gt;Unstable Dome&lt;/h1&gt;<br/>          &lt;div class="canvas-holder"&gt;<br/>            &lt;canvas id="game"&gt;&lt;/canvas&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/section&gt;<br/>    &lt;script src="<a class="ae mf" href="https://kaboomjs.com/lib/0.5.0/kaboom.js" rel="noopener ugc nofollow" target="_blank">https://kaboomjs.com/lib/0.5.0/kaboom.js</a>"&gt;&lt;/script&gt;<br/>    &lt;script src="./main.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="8919" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">7.现在让我们回到我们的终端并运行<code class="fe nn no np nq b">npm run start</code>。我们将看到我们的服务器正在启动，现在如果转到我们的浏览器，我们将看到一个带有黑框的空白屏幕。这一步完成了开发环境的设置。</p><h1 id="1e4a" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">导入图像资产</h1><p id="5d44" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">你可以从这里下载本博客使用的游戏资源:-<a class="ae mf" href="https://github.com/Kavit900/ludum-dare-49/tree/main/public" rel="noopener ugc nofollow" target="_blank">https://github.com/Kavit900/ludum-dare-49/tree/main/public</a></p><p id="af8e" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">注意:- </strong>将这些图像资产添加到<code class="fe nn no np nq b">public</code>文件夹中。</p><p id="b3ec" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在此之后，将以下几行添加到<code class="fe nn no np nq b">package.json</code>文件中。这将有助于找到图像文件，并将它们作为精灵加载到我们的主游戏逻辑中。</p><pre class="kg kh ki kj gt nr nq ns nt aw nu bi"><span id="6588" class="mn ks iq nq b gy nv nw l nx ny">"staticFiles": {<br/>    "staticPath": "public",<br/>    "watcherGlob": "**"<br/>  }</span></pre><h1 id="8446" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">游戏引擎理论</h1><p id="d3b3" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在<code class="fe nn no np nq b">Kaboom.js</code>游戏引擎中，每一个不同的状态都被称为一个<code class="fe nn no np nq b">scene</code>。为了更好地理解什么是<code class="fe nn no np nq b">scenes</code>以及它们是如何使用的，请看下图</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/877d36885b62149b785a8760ebf6cf92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aphjM8PfghYkr5pvVSvwZg.png"/></div></div></figure><p id="dbc6" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在我们的游戏中，我们将会有<code class="fe nn no np nq b">three</code>场景。</p><p id="a7fc" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">介绍场景:- </strong>我们将展示玩我们游戏的说明。</p><p id="b7db" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">游戏场景:- 我们将显示地图，以及玩家和其他关卡的详细信息。</p><p id="532a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><strong class="ll ir">结束场景:- </strong>这是获胜状态，当玩家退出门后，我们就结束了游戏。</p><p id="0105" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">注意:- 这个游戏只有1级，这就是为什么我们只有一个场景的地图。如果你想用不同的设置来移动关卡，你可以创建一个单独的场景或者在<code class="fe nn no np nq b">Game scene</code>中处理一切。</p><h1 id="dccd" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">游戏逻辑</h1><p id="7314" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在这一部分，我们将加载我们的图像到游戏中，并在初始加载时显示它们。</p><ol class=""><li id="f4e1" class="mz na iq ll b lm mg lp mh ls oa lw ob ma oc me ne nf ng nh bi translated">创建一个名为<code class="fe nn no np nq b">main.js</code>的文件</li><li id="0db8" class="mz na iq ll b lm ni lp nj ls nk lw nl ma nm me ne nf ng nh bi translated">向其中添加以下代码</li></ol><pre class="kg kh ki kj gt nr nq ns nt aw nu bi"><span id="4a19" class="mn ks iq nq b gy nv nw l nx ny">kaboom({<br/>  global: true,<br/>  scale: 3,<br/>  clearColor: [0, 0, 0, 1],<br/>  canvas: document.getElementById('game'),<br/>  width: 180,<br/>  height: 180<br/>});</span><span id="aad3" class="mn ks iq nq b gy od nw l nx ny">loadSprite('player', 'hero.png');<br/>loadSprite('wall', 'wall2.png');<br/>loadSprite('opendoor', 'opendoor.png');<br/>loadSprite('finaldoor', 'finaldoor.png');<br/>loadSprite('item', 'item.png');</span><span id="4369" class="mn ks iq nq b gy od nw l nx ny">window.onload = function() {</span><span id="8874" class="mn ks iq nq b gy od nw l nx ny">scene('main', () =&gt; {</span><span id="9818" class="mn ks iq nq b gy od nw l nx ny">// Display a message telling the player on how to start a new game<br/>    add([<br/>      text('Press space to begin!', 6),<br/>      pos(width()/2, height()/2),<br/>      origin('center')<br/>    ]);</span><span id="15a7" class="mn ks iq nq b gy od nw l nx ny">// Display player image<br/>    add([<br/>      sprite('player'),<br/>      'player'<br/>    ]);</span><span id="51a6" class="mn ks iq nq b gy od nw l nx ny">});</span><span id="e805" class="mn ks iq nq b gy od nw l nx ny">start('main')<br/>}</span></pre><p id="a09c" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在上面的代码中，我们用宽度和高度为<code class="fe nn no np nq b">180x180</code>初始化<code class="fe nn no np nq b">kaboom</code>引擎，并将其分配给我们在<code class="fe nn no np nq b">index.html</code>文件中创建的<code class="fe nn no np nq b">canvas</code> DOM元素。</p><p id="3768" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">之后，我们创建我们的<code class="fe nn no np nq b">main</code>场景，这是我们游戏的开始场景，在里面，我们提供一个文本和玩家精灵。</p><p id="69dc" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">在运行游戏时，你应该在屏幕上看到一段文字和玩家图像。</p><p id="0804" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated">第一部分到此结束，我的参赛作品可以在这里找到:-<a class="ae mf" href="https://ldjam.com/events/ludum-dare/49/unstable-dome" rel="noopener ugc nofollow" target="_blank">https://ldjam.com/events/ludum-dare/49/unstable-dome</a></p><p id="450a" class="pw-post-body-paragraph lj lk iq ll b lm mg jr lo lp mh ju lr ls mi lu lv lw mj ly lz ma mk mc md me ij bi translated"><em class="oe">更多内容看</em><a class="ae mf" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ll ir"><em class="oe">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
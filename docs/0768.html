<html>
<head>
<title>How To Organize Large Scale React Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何组织大型React应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-organize-large-scale-react-applications-aff84fba07cf?source=collection_archive---------3-----------------------#2021-02-17">https://javascript.plainenglish.io/how-to-organize-large-scale-react-applications-aff84fba07cf?source=collection_archive---------3-----------------------#2021-02-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="2a64" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">结构化文件和分解组件</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/015d947c8d627f2ec0277c5f7100ac57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NMYjAUk2SJfKxlIeoxBD4g.png"/></div></div></figure><h1 id="0b4f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">文件夹结构</h1><p id="871a" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在React应用程序中没有这样精确的方法来组织文件，但是大多数React开发人员都推荐以下方法，因为在React应用程序中正确地组织文件可以在缩放时方便地管理它们。</p><p id="cc29" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><em class="mk">所有代码都保存在</em> <strong class="ll ir"> src: </strong>将文件保存在<strong class="ll ir"> src </strong>文件夹中被推荐为现代应用程序中组织文件的最佳方式之一，因为当应用程序随着时间的推移而增长时，它可以轻松地浏览大量文件。在这个文件夹中，我们简单地添加了最终包含在您的最终包中的所有文件，不多也不少。这种方法非常有用，因为您可以告诉<strong class="ll ir"> <em class="mk"> babel </em> </strong>只查看一个目录，并确保它不会处理您的项目目录之外的任何不需要处理的代码，例如<strong class="ll ir"> <em class="mk"> webpack文件、配置文件</em> </strong>，它们位于一个适当命名的文件夹中。</p><p id="9cdb" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">此外，当您使用应用程序时，导入文件变得很容易，因为当您将所有文件存储在<strong class="ll ir"> src </strong>文件夹中时，它就成为了顶级目录。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/cfb6b31e2fac8641eedc005a6f345feb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WNtWCwsI_KllD1wOwogZKg.png"/></div></div></figure></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="2a9c" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">反应组分</h1><p id="7a29" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在设置了<strong class="ll ir"> src </strong>文件夹后，我们必须存储React组件，您一定听说过将所有组件存储在src文件夹内的单独子目录中，例如<strong class="ll ir"> (src/components) </strong>，如果您正在构建不需要长期维护的小型React应用程序，这种方法很好，但是如果我们在需要长期维护的大型React应用程序中应用相同的方法，当您将大量组件打包在一个目录中时，这种方法会变得难以应付。</p><p id="69b8" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">我们应该将每个React组件存储在一个文件夹中，而不是将所有组件紧密地存储在一个文件夹中，该文件夹的名称是它们在应用程序中的功能。<strong class="ll ir"> <em class="mk">以</em> </strong>为例，我们有一个名为<strong class="ll ir"> Profile </strong>的文件夹，其中包含了与应用程序中<strong class="ll ir"> <em class="mk"> Profile page </em> </strong>相关的所有组件，还有一个名为<strong class="ll ir"> Cart </strong>的文件夹，其中包含了应用程序中与Cart相关的所有组件。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/0c9d697909a14c2e592229681cbcc886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hdDUGVDu4BPMy1SukMvuQ.png"/></div></div><figcaption class="mz na gj gh gi nb nc bd b be z dk"><strong class="bd nd">Importing React Components</strong></figcaption></figure><h1 id="d912" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">在大写字母上使用JSX扩展</h1><p id="8a4c" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我见过有人用大写字母命名他们的组件，当您需要修复应用程序中的错误或在应用程序部署后进行一些更改时，您会发现很难读懂组件的名称。不要像<strong class="ll ir"> UserProfile.js </strong>或<strong class="ll ir"> User.js那样命名你的文件，</strong>坚持用破折号作为分隔符的小写命名约定。</p><p id="83b7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">例如，我们可以将组件命名为<strong class="ll ir"> user-profile.jsx. </strong></p><p id="48d7" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">使用这种方法还有两个好处，因为现在您可以通过使用。<strong class="ll ir"> <em class="mk"> jsx </em> </strong>约定，如果需要，你甚至可以对这些文件应用特定的<strong class="ll ir"> <em class="mk"> webpack插件</em> </strong>。</p><p id="b938" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">请注意，您不必坚持特定的命名约定，可以随意命名您的组件，但是要确保您只使用一个命名约定并坚持使用它，否则，您将会在您的项目中结束命名约定的组合，这使得很难阅读和导航到特定的组件，否则，随着您的应用程序的增长，它将成为一个噩梦。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="f68d" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">避免较大的渲染方法</h1><p id="8148" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">你必须确保你没有在你的<strong class="ll ir"> React </strong>组件的渲染方法中添加太多东西，</p><p id="186b" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir"> <em class="mk">例如</em> </strong>:假设我们有一个<strong class="ll ir">配置文件</strong>组件来渲染用户的配置文件，如果我们用几个<strong class="ll ir">道具</strong>在我们的渲染方法中添加所有的小组件，那么渲染需要来自设备的太多能量，并且很可能在几个设备上执行缓慢。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="51b7" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">到处使用道具类型</h1><p id="65cf" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在<strong class="ll ir"> React </strong>中，您可以使用<a class="ae ne" href="https://www.npmjs.com/package/prop-types" rel="noopener ugc nofollow" target="_blank"> <strong class="ll ir"> prop-types </strong> </a>包，它允许您记录您在组件中定义的属性的名称和类型。使用prop-types，您可以通过声明预期的prop的名称和类型来增强信心，并且您将知道哪个prop正在与每个组件一起工作。</p><p id="59d5" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果你在想为什么我们需要记录我们的道具，例如<strong class="ll ir"><em class="mk">:</em></strong>假设你的React应用程序需要在8个月后修复，你最终会不知道哪些<strong class="ll ir">道具</strong>与它们的动作相关联。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="a2dd" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">独立的JavaScript模块</h1><p id="a754" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">在构建大规模React应用程序时，您会发现自己编写了大量与React无关的代码，因此当您发现自己处于这种情况时，您可以简单地将该逻辑从组件中移除。你可以创建一个文件夹作为lib或者充满非React组件的服务。</p><p id="9d30" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><em class="mk">将这些逻辑排除在组件之外有很大的好处，因为</em>你可以在不干扰React组件的情况下单独测试这些代码。</p></div><div class="ab cl mm mn hu mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ij ik il im in"><h1 id="2376" class="kr ks iq bd kt ku mt kw kx ky mu la lb jw mv jx ld jz mw ka lf kc mx kd lh li bi translated">使用Jest进行测试</h1><p id="4f61" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">由<strong class="ll ir">脸书</strong>推出的<strong class="ll ir"> Jest </strong>框架已经成为测试<strong class="ll ir"> React </strong>应用的最佳选择之一。它真的很快，擅长处理大量的测试，<strong class="ll ir"> <em class="mk">在手表模式下运行，并提供快速反馈</em> </strong>和一些方便的功能来测试React应用程序。</p><p id="9884" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated">如果您没有选择Jest作为您的测试伙伴，那么您将会在测试React应用程序时解决很多问题。</p><p id="1ccf" class="pw-post-body-paragraph lj lk iq ll b lm mf jr lo lp mg ju lr ls mh lu lv lw mi ly lz ma mj mc md me ij bi translated"><strong class="ll ir">例如:</strong>假设您有一个名为tests的单独文件夹，其中包含所有的测试文件，如果我们有<strong class="ll ir"> src/app/menu.jsx </strong>作为组件，那么在<strong class="ll ir"> <em class="mk"> tests </em> </strong>文件夹中，它将是<strong class="ll ir"> tests/app/menu.test.jsx，</strong>当应用程序变得更大时，这种方法的问题就越来越严重，找到正确的文件变得更加困难，如果您在【T20</p><h1 id="ef5f" class="kr ks iq bd kt ku kv kw kx ky kz la lb jw lc jx ld jz le ka lf kc lg kd lh li bi translated">结论</h1><p id="a818" class="pw-post-body-paragraph lj lk iq ll b lm ln jr lo lp lq ju lr ls lt lu lv lw lx ly lz ma mb mc md me ij bi translated">我们做到了！我希望你已经发现这是有用的。我错过了什么吗？如果有，一定要在评论里讨论。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Create Vue 3 Apps with the Composition API — Refs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Composition API创建Vue 3应用程序—参考文献</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-vue-3-apps-with-the-composition-api-refs-e9e9bde115f3?source=collection_archive---------18-----------------------#2021-04-14">https://javascript.plainenglish.io/create-vue-3-apps-with-the-composition-api-refs-e9e9bde115f3?source=collection_archive---------18-----------------------#2021-04-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5d6d0c8a86cce606605006c018622ae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dFhkZZCW4wAMALU-"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@westoneichner?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Weston Eichner</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="348c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它让我们可以轻松提取逻辑，而不必担心代码中<code class="fe lb lc ld le b">this</code>的值。</p><p id="77ff" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它与TypeScript一起工作也更好，因为<code class="fe lb lc ld le b">this</code>的值不再需要被键入。</p><p id="46b8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用Composition API创建Vue 3应用程序。</p><h1 id="90a5" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">使用带v-for的ref</h1><p id="b2df" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以为使用<code class="fe lb lc ld le b">v-for</code>渲染的项目分配参考。</p><p id="d57e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="13f6" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div<br/>    v-for="(item, i) in list"<br/>    :ref="<br/>      (el) =&gt; {<br/>        divs[i] = el;<br/>      }<br/>    "<br/>    :key="i"<br/>  &gt;<br/>    {{ item }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9f47" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { ref, reactive, onBeforeUpdate } from "vue";</span><span id="090e" class="mq lg iq le b gy mv ms l mt mu">export default {<br/>  setup() {<br/>    const list = reactive([1, 2, 3]);<br/>    const divs = ref([]);</span><span id="e8a3" class="mq lg iq le b gy mv ms l mt mu">    onBeforeUpdate(() =&gt; {<br/>      divs.value = [];<br/>    });</span><span id="6a90" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      list,<br/>      divs,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="1086" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过<code class="fe lb lc ld le b">ref</code>功能创建<code class="fe lb lc ld le b">divs</code>反应性。</p><p id="16c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，当我们用<code class="fe lb lc ld le b">v-for</code>渲染项目时，我们将<code class="fe lb lc ld le b">el</code> HTML元素对象指定为<code class="fe lb lc ld le b">divs</code>数组的一个条目。</p><h1 id="3c85" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">反应性实用程序</h1><p id="1d6b" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">Vue 3组合应用编程接口附带了一些实用功能来完成各种具有反应特性的事情。</p><h2 id="7e4a" class="mq lg iq bd lh mw mx dn ll my mz dp lp ko na nb lt ks nc nd lx kw ne nf mb ng bi translated">未精炼的</h2><p id="74ad" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">unref</code>函数允许我们返回ref的值，或者我们传递给<code class="fe lb lc ld le b">ref</code>函数的参数，这取决于变量是否是ref。</p><p id="851c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="1fc5" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;button @click="increment"&gt;increment&lt;/button&gt;<br/>    {{ count }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d6fd" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { ref, unref, watch } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const count = ref(0);<br/>    const increment = () =&gt; {<br/>      count.value++;<br/>    };<br/>    watch(count, () =&gt; {<br/>      console.log(unref(count));<br/>    });</span><span id="8ce7" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      count,<br/>      increment,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="91ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创造了<code class="fe lb lc ld le b">count</code>反应性。</p><p id="9d5d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe lb lc ld le b">watch</code>回调中，我们调用<code class="fe lb lc ld le b">unref(count)</code>得到<code class="fe lb lc ld le b">count</code>反应性的实际值。</p><p id="c8f4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它不是引用，它会返回我们传入的变量的值。</p><h2 id="4c35" class="mq lg iq bd lh mw mx dn ll my mz dp lp ko na nb lt ks nc nd lx kw ne nf mb ng bi translated"><code class="fe lb lc ld le b">toRef</code></h2><p id="cc59" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated"><code class="fe lb lc ld le b">toRef</code>功能允许我们为反应源对象上的属性创建一个引用。</p><p id="d4cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c6fc" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;button <a class="ae kc" href="http://twitter.com/click" rel="noopener ugc nofollow" target="_blank">@click</a>="increment"&gt;increment&lt;/button&gt;<br/>    {{ count }}<br/>    {{ state.count }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="4dba" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { reactive, toRef } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      count: 1,<br/>    });</span><span id="b763" class="mq lg iq le b gy mv ms l mt mu">    const count = toRef(state, "count");<br/>    const increment = () =&gt; {<br/>      state.count++;<br/>    };</span><span id="bef7" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>      count,<br/>      increment,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="8d06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们调用<code class="fe lb lc ld le b">toRef</code>从<code class="fe lb lc ld le b">state.count</code>属性创建引用。</p><p id="ff4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在我们可以将它包含在返回的对象中，然后在模板中引用它。</p><p id="55fe" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果我们想把它传递给合成函数，这是很有用的。</p><p id="0137" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm le mn mo aw mp bi"><span id="c6ba" class="mq lg iq le b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;button @click="increment"&gt;increment&lt;/button&gt;<br/>    {{ count }}<br/>    {{ state.count }}<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="2a00" class="mq lg iq le b gy mv ms l mt mu">&lt;script&gt;<br/>import { reactive, toRef, watch } from "vue";<br/>export default {<br/>  name: "App",<br/>  setup() {<br/>    const state = reactive({<br/>      count: 1,<br/>    });</span><span id="fc80" class="mq lg iq le b gy mv ms l mt mu">    const count = toRef(state, "count");<br/>    const increment = () =&gt; {<br/>      state.count++;<br/>    };</span><span id="c887" class="mq lg iq le b gy mv ms l mt mu">    watch(count, (count) =&gt; console.log(count));</span><span id="5bdc" class="mq lg iq le b gy mv ms l mt mu">    return {<br/>      state,<br/>      count,<br/>      increment,<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="2bc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将<code class="fe lb lc ld le b">count</code>传递给<code class="fe lb lc ld le b">watch</code>，这样我们就可以观察它的价值。</p><h1 id="6e26" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="cd32" class="pw-post-body-paragraph kd ke iq kf b kg md ki kj kk me km kn ko mf kq kr ks mg ku kv kw mh ky kz la ij bi translated">我们可以给HTML元素分配引用，让我们可以在组件中访问它们。</p><p id="428a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用Vue 3的合成API附带的各种函数来操纵refs。</p><p id="dfc3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nh">多内容见于</em> <a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="nh">中</em></strong></a></p></div></div>    
</body>
</html>
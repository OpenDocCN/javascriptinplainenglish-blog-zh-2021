<html>
<head>
<title>How to Set Up Google OAuth in React with React-Google-Login</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中设置Google OAuth</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-google-oauth-in-react-with-react-google-login-9c6538389fde?source=collection_archive---------1-----------------------#2021-05-10">https://javascript.plainenglish.io/how-to-set-up-google-oauth-in-react-with-react-google-login-9c6538389fde?source=collection_archive---------1-----------------------#2021-05-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c666" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React中创建一个Google OAuth登录组件。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/3f07ef8252cdc18832a12bb478914c34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jlMnuAxb-nxNeQp6"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@mitchel3uo?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mitchell Luo</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="846c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">OAuth是用户授予网站和应用程序访问其信息而无需创建新密码的常用方式。大多数大公司使用OAuth与第三方网站和应用程序共享信息。Google是使用OAuth协议进行认证和授权的大公司之一。</p><p id="05f1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">理解在React应用程序中实现OAuth的流程可能很棘手。幸运的是，有一个名为react-google-login的第三方包，我们可以用它来使事情变得简单一些。</p><p id="d126" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解如何在React应用程序中访问Google APIs OAuth。在本文结束时，您应该了解如何做到以下几点:</p><ul class=""><li id="861e" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">使用react-google-login在React中创建一个登录按钮</li><li id="09cb" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">从Google API控制台获取凭据</li><li id="2541" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">从Google授权服务器获取一个访问令牌</li></ul></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="dc5d" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">使用react-google-login在React中创建一个登录按钮</h1><p id="a2d5" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">对于这个例子，我将使用create-react-app创建一个基本的React应用程序。然后我们将清理<code class="fe nk nl nm nn b">App.js</code>文件来呈现一个空白屏幕。</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="d1a6" class="ns mo iq nn b gy nt nu l nv nw">npx create-react-app YOUR-PROJECT-NAME</span></pre><p id="7b77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用<a class="ae kv" href="https://www.npmjs.com/package/react-google-login" rel="noopener ugc nofollow" target="_blank"> react-google-login </a>包来创建一个按钮组件，并连接到google授权服务器。</p><p id="318c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第一步是将软件包安装到您的项目中。</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="e47a" class="ns mo iq nn b gy nt nu l nv nw">npm install react-google-login</span></pre><p id="3c9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，导入<code class="fe nk nl nm nn b">GoogleLogin</code>组件，并在您的应用程序中呈现它。<code class="fe nk nl nm nn b">GoogleLogin</code>组件将采用以下道具:</p><ul class=""><li id="a801" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">clientId——来自Google API控制台的客户端Id(我们将在下一节中获取)</li><li id="f716" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">buttonText —显示在按钮上的文本</li><li id="cf28" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">onSuccess —成功时运行的回调函数</li><li id="17f2" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">onFailure —失败时运行的回调函数</li><li id="db3c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">cookiesPolicy —为其创建登录cookie的域</li></ul><p id="e8d0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于<code class="fe nk nl nm nn b">onSuccess</code>和<code class="fe nk nl nm nn b">onFailure</code>道具，我们将创建一个回调函数，简单地将响应打印到控制台。</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="1fe8" class="ns mo iq nn b gy nt nu l nv nw">const responseGoogle = <em class="nx">response</em> =&gt; {<br/>  console.log(response);<br/>};</span></pre><p id="ad05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe nk nl nm nn b">GoogleLogin</code>组件将如下所示:</p><pre class="kg kh ki kj gt no nn np nq aw nr bi"><span id="8a88" class="ns mo iq nn b gy nt nu l nv nw">&lt;GoogleLogin<br/>  clientId=""<br/>  buttonText="Login with Google"<br/>  onSuccess={responseGoogle}<br/>  onFailure={responseGoogle}<br/>  cookiePolicy="single_host_origin"<br/>/&gt;</span></pre><p id="6941" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该按钮将被禁用，因为我们还没有添加客户端ID。它看起来会像这样。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ny"><img src="../Images/2b6553169eecb6ae781f914d5c1253e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*_r7CPFa06SG7gaELztjVXw.png"/></div></figure><h1 id="59bb" class="mn mo iq bd mp mq nz ms mt mu oa mw mx jw ob jx mz jz oc ka nb kc od kd nd ne bi translated">从Google API控制台获取凭据</h1><p id="71f7" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">下一步将是从<a class="ae kv" href="https://console.developers.google.com/" rel="noopener ugc nofollow" target="_blank"> Google API控制台</a>获取凭证。</p><p id="a4ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">访问网站，并创建一个新项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/19dead3bf9677de6387ad78bebc4c41f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uFXaTfnNlpH1W-BGW5D9PA.png"/></div></div></figure><p id="2440" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">创建项目后，选择您的项目并访问<strong class="ky ir"> OAuth同意屏幕</strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi of"><img src="../Images/751f2856610b10a0aaa950eb316a908b.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*2VpyhuK764rchKrNRAwxHA.png"/></div></figure><p id="d46c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这里，您需要配置和注册您的应用程序。采取以下步骤:</p><p id="d5e1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">1.选择用户类型=外部</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/fb972ae24b1984af46efd2d9abf0152a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DjMYyqW3vrghjXjOsQzWkw.png"/></div></div></figure><p id="a9ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2.填写应用信息和开发者联系信息中的必填字段</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/f7fa5e38280689420e2740bea19f9534.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OwgEXUyYc3ujTTbua0nyQg.png"/></div></div></figure><p id="a38d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">3.添加范围或测试用户(可选)</p><p id="2d57" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">完成后，请访问<strong class="ky ir">凭证</strong>选项卡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a986519ccfcfd589c858dcd3f3083c7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*AN4LL8kvVlMhe3t5z0a04Q.png"/></div></figure><p id="7389" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从这里，点击<strong class="ky ir">创建凭证</strong>按钮并选择<strong class="ky ir"> OAuth客户端ID </strong>。选择Web应用程序的应用程序类型，并为OAuth客户端命名。最后，添加一个授权的JavaScript源。</p><p id="fe30" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">授权的JavaScript源用于标识应用程序可以向OAuth 2.0服务器发送请求的域。在我们的例子中，我们将它设置为<a class="ae kv" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"><em class="nx">http://localhost:3000</em></a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oh"><img src="../Images/183400774525c36c86ef980313f92b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2fGt29pDi2JRrt3qmyw7Jg.png"/></div></div></figure><p id="d96d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，点击<strong class="ky ir"> Create </strong>，等待OAuth客户端被创建。将出现以下模式。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oi"><img src="../Images/f247e752f549feea8d869168c65ee068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RSsLIMZD28uva6hR_wnYxg.png"/></div></div></figure><p id="29c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">复制此客户端ID。我们将在下一步中需要它。</p><h1 id="7555" class="mn mo iq bd mp mq nz ms mt mu oa mw mx jw ob jx mz jz oc ka nb kc od kd nd ne bi translated">从Google授权服务器获取一个访问令牌</h1><p id="38d5" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">现在我们已经有了客户端ID，返回到您的文本编辑器，将它作为道具添加到<code class="fe nk nl nm nn b">GoogleLogin</code>组件中。</p><p id="bb7c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在您的应用程序中，登录按钮现在应该显示为可点击的。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/be797ebe350f47646283dc2bc611293a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*f5xLXkJMq8sMk79B6O8WCA.png"/></div></figure><p id="23e0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们点击按钮，它将打开谷歌模式的登录。选择您要用来登录的电子邮件。</p><p id="daf0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">登录后，将调用<code class="fe nk nl nm nn b">onSuccess</code>回调函数，您将在控制台中看到一个带有响应信息的对象。该响应将包括一个访问令牌、一个包含您的个人信息的配置文件对象以及其他详细信息。</p><p id="084a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">恭喜你！你现在通过谷歌认证了。</p></div><div class="ab cl mg mh hu mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ij ik il im in"><h1 id="13c3" class="mn mo iq bd mp mq mr ms mt mu mv mw mx jw my jx mz jz na ka nb kc nc kd nd ne bi translated">结论</h1><p id="0f26" class="pw-post-body-paragraph kw kx iq ky b kz nf jr lb lc ng ju le lf nh lh li lj ni ll lm ln nj lp lq lr ij bi translated">感谢阅读！使用OAuth是在您的网站或应用程序中验证用户身份的好方法。它为用户省去创建和记忆新密码的麻烦。</p><p id="684e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对您在React应用程序中设置Google OAuth有所帮助。</p><p id="3fcd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想学习如何在React中建立一个注册页面，请查看下面的文章。</p><div class="ok ol gp gr om on"><a href="https://levelup.gitconnected.com/create-a-signup-page-with-react-and-material-ui-9b203d18cf3f" rel="noopener  ugc nofollow" target="_blank"><div class="oo ab fo"><div class="op ab oq cl cj or"><h2 class="bd ir gy z fp os fr fs ot fu fw ip bi translated">用React和Material-UI创建一个注册页面</h2><div class="ou l"><h3 class="bd b gy z fp os fr fs ot fu fw dk translated">了解如何为您的下一个网站创建一个对话框和表单</h3></div><div class="ov l"><p class="bd b dl z fp os fr fs ot fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="ow l"><div class="ox l oy oz pa ow pb kp on"/></div></div></a></div><p id="6333" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nx">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nx">plain English . io</em></a></p></div></div>    
</body>
</html>
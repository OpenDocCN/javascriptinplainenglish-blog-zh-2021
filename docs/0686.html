<html>
<head>
<title>Build a Full Stack GraphQL Application with React + Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React + Express构建全栈GraphQL应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-full-stack-graphql-application-with-react-express-6a3d00b05629?source=collection_archive---------3-----------------------#2021-02-12">https://javascript.plainenglish.io/build-a-full-stack-graphql-application-with-react-express-6a3d00b05629?source=collection_archive---------3-----------------------#2021-02-12</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="4411" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">用反应和表达</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/32ff94cc640f084b99839716ab639a27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qg-wVeH2Nh8UGA9o8kURVg.png"/></div></div></figure><p id="c989" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">GraphQL是<strong class="ku is"> REST的替代产品。</strong>很明显是新的。比传统的REST API有一些好处。今天我们将看到如何构建一个简单的全栈GraphQL应用程序。</p><h2 id="ba3a" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">先决条件</h2><p id="6206" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">要继续学习，您必须对普通HTTP服务器的工作原理有一个基本的了解，并对ReactJS有一些了解。你不需要成为这两方面的专家。</p><h1 id="2271" class="mm lp ir bd lq mn mo mp lt mq mr ms lw jx mt jy lz ka mu kb mc kd mv ke mf mw bi translated">构建后端</h1><p id="90fb" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">首先，我们创建一个非常基本的<code class="fe mx my mz na b">express</code>应用程序。你可以在这里看到<a class="ae nb" href="https://www.sitepoint.com/create-new-express-js-apps-with-express-generator/" rel="noopener ugc nofollow" target="_blank">如何创建一个样板express应用程序。</a></p><h2 id="438a" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第一步。安装依赖项</h2><p id="dfba" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">然后在项目的根目录中，我们需要为graphql安装这些附加的依赖项。</p><pre class="kh ki kj kk gu nc na nd ne aw nf bi"><span id="a447" class="lo lp ir na b gz ng nh l ni nj">yarn add express-graphql graphql</span></pre><h2 id="1df8" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第二步。创建模式</h2><p id="62ed" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">在项目内部创建一个名为<code class="fe mx my mz na b">schema.js</code>的文件，并为我们的书创建一个模式。GraphQL需要了解底层的数据结构。</p><p id="fb18" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">例如，您的应用程序中必须有某种后端(如MongoDB或Postgres ),为此，您必须有某种数据结构来与数据库对话。但是这个模式是不同的。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="e1f1" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第三步。创建查询</h2><p id="b6ab" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">所以现在我们准备创建我们的查询。查询意味着访问数据。我们创建了两个查询，<code class="fe mx my mz na b">book</code>和<code class="fe mx my mz na b">books</code>。</p><p id="47c7" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><code class="fe mx my mz na b">book</code>查询接受的参数是我们想要的书的<code class="fe mx my mz na b">id</code>。</p><p id="0eb9" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">并且<code class="fe mx my mz na b">books</code>从数据库中返回所有的书籍。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="638d" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第四步。创造突变</h2><p id="0f28" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">突变意味着改变数据。每当我们需要创建或更新数据时，我们必须创建突变。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="f5e3" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第五步。使用它们</h2><p id="c8d8" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">现在我们只导出我们的<code class="fe mx my mz na b">schema</code>、<code class="fe mx my mz na b">query</code>和<code class="fe mx my mz na b">mutation</code>:</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="11d9" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">在<code class="fe mx my mz na b">app.js</code>中，我们可以让我们的express服务器知道graphql模式，如下所示。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="6486" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">测试我们的第一个API</h2><p id="4ead" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">GraphQL为我们提供了一个很棒的工具，叫做<code class="fe mx my mz na b">GraphiQL</code>。这让我们可以非常容易地测试graphQL API。它更像Rest API中的<code class="fe mx my mz na b">Swagger</code></p><p id="bd42" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">进入<a class="ae nb" href="http://localhost:4000/graphql" rel="noopener ugc nofollow" target="_blank">http://localhost:4000/graph QL</a>可以看到<code class="fe mx my mz na b">GraphiQL</code>界面。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj nm"><img src="../Images/ae80224e2112e0a8fb1b66411a0ac2a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lIvspNcIEwnpbgEfGLf8iA.png"/></div></div><figcaption class="nn no gk gi gj np nq bd b be z dk">GraphiQL interface</figcaption></figure><h1 id="546e" class="mm lp ir bd lq mn mo mp lt mq mr ms lw jx mt jy lz ka mu kb mc kd mv ke mf mw bi translated">构建前端</h1><p id="aec2" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">我希望你知道如何使用<code class="fe mx my mz na b">create-react-app</code>构建一个基本的react应用程序。创建样板应用程序后，我们现在开始将GraphQL API集成到我们的应用程序中。</p><p id="1687" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">我们需要使用一个名为<a class="ae nb" href="https://www.apollographql.com/docs/" rel="noopener ugc nofollow" target="_blank"> Apollo </a>的特殊查询库，它有非常棒的文档。我强烈建议你去看看！</p><h2 id="5c45" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第一步。安装依赖项</h2><p id="f8af" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">首先，安装以下依赖项。</p><pre class="kh ki kj kk gu nc na nd ne aw nf bi"><span id="d83f" class="lo lp ir na b gz ng nh l ni nj">yarn add @apollo/client graphql</span></pre><h2 id="d0eb" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第二步。创建客户端</h2><p id="3647" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">我们需要创建一个客户端来与我们的GraphQL服务器对话。那个客户端叫做<code class="fe mx my mz na b">ApolloClient</code>。在我们的<code class="fe mx my mz na b">index.js</code>文件中创建我们的第一个客户端。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="d9b9" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第三步。用提供商包装</h2><p id="0b85" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">我们的整个应用程序都需要这个客户端，所以我们用<code class="fe mx my mz na b">ApolloProvider</code>包装我们的<code class="fe mx my mz na b">App</code>组件，并提供我们刚刚创建的客户端。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="09af" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第四步。定义查询</h2><p id="98ef" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">GraphQL有特定的查询语言。我们需要用它来访问我们的数据。我们创建一个<code class="fe mx my mz na b">BookList</code>组件来访问图书列表</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><h2 id="b466" class="lo lp ir bd lq lr ls dn lt lu lv dp lw lb lx ly lz lf ma mb mc lj md me mf mg bi translated">第五步。变化</h2><p id="e98a" class="pw-post-body-paragraph ks kt ir ku b kv mh js kx ky mi jv la lb mj ld le lf mk lh li lj ml ll lm ln ik bi translated">现在我们创建另一个组件，向数据库添加一本新书。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nk nl l"/></div></figure><p id="55ca" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">原来如此。现在我们有了一个前端和后端都可以工作的应用程序</p><p id="d2b1" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">你可以从下面的报告中查看整个应用程序的源代码</p><div class="nr ns gq gs nt nu"><a href="https://github.com/Mohammad-Faisal/graphql-express-react" rel="noopener  ugc nofollow" target="_blank"><div class="nv ab fp"><div class="nw ab nx cl cj ny"><h2 class="bd is gz z fq nz fs ft oa fv fx iq bi translated">Mohammad-fais al/graph QL-express-react</h2><div class="ob l"><h3 class="bd b gz z fq nz fs ft oa fv fx dk translated">在GitHub上创建一个帐户，为Mohammad-fais al/graph QL-express-react开发做出贡献。</h3></div><div class="oc l"><p class="bd b dl z fq nz fs ft oa fv fx dk translated">github.com</p></div></div><div class="od l"><div class="oe l of og oh od oi kq nu"/></div></div></a></div><p id="a1cc" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated">今天到此为止。编码快乐！:D</p><p id="69c2" class="pw-post-body-paragraph ks kt ir ku b kv kw js kx ky kz jv la lb lc ld le lf lg lh li lj lk ll lm ln ik bi translated"><strong class="ku is">通过</strong><a class="ae nb" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="ku is">LinkedIn</strong></a><strong class="ku is">或我的</strong> <a class="ae nb" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"> <strong class="ku is">个人网站</strong> </a> <strong class="ku is">与我取得联系。</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Use JavaScript Accessors for Simplicity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何简单地使用JavaScript访问器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-javascript-accessors-for-simplicity-62d9564c1f15?source=collection_archive---------12-----------------------#2021-10-17">https://javascript.plainenglish.io/how-to-use-javascript-accessors-for-simplicity-62d9564c1f15?source=collection_archive---------12-----------------------#2021-10-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8598fa5c25002fa0c17af4f04d6ad287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RkLsuLvXP5F_TlhM.png"/></div></div></figure><p id="5191" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">访问器允许在访问变量时运行逻辑。在涉及复杂逻辑的情况下，可以使用访问器来简化代码。为了便于说明，让我们考虑在iOS设备上的移动网页中布局UI所需的逻辑。</p><p id="c4e6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">通常，网页在Safari中运行，它有一个地址栏。在这种情况下，<code class="fe kt ku kv kw b">window.innerWidth</code>和<code class="fe kt ku kv kw b">window.innerHeight</code>提供了网页上可用空间的尺寸。但是，可以在主屏幕的页面上安装一个书签。使用此快捷方式启动Safari时，网页的行为类似于应用程序。地址栏是隐藏的，整个屏幕是可用的空间。在这种模式下，<code class="fe kt ku kv kw b">window.outerWidth</code>和<code class="fe kt ku kv kw b">window.outerHeight</code>提供了网页上可用空间的尺寸。通过使用访问器，我们可以在进行计算时简化逻辑，这样，除了访问器确定是使用<code class="fe kt ku kv kw b">inner</code>还是<code class="fe kt ku kv kw b">outer</code>属性之外，可以执行相同的计算。</p><p id="fa23" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要检测浏览器的模式。这是通过检查<code class="fe kt ku kv kw b">navigator.standalone</code>属性来完成的。为了更好地衡量，我们还将通过检查<code class="fe kt ku kv kw b">navigator.userAgent</code>来检查Safari是否被使用。如果网页已经从主屏幕启动，以下测试返回<code class="fe kt ku kv kw b">true</code>:</p><p id="3f89" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe kt ku kv kw b">/Safari/.test(navigator.userAgent) &amp;&amp; navigator.standalone</code></p><p id="04b9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果不使用访问器，我们将需要使用复杂的逻辑来执行计算。我们可以定义函数来简化表达式，但是，如果有很多代码已经使用了需要修改的<code class="fe kt ku kv kw b">inner</code>和<code class="fe kt ku kv kw b">outer</code>，那么很多代码将需要修改。如果逻辑足够复杂，用函数调用替换代码很容易出错。例如，来自React应用程序的这段代码检测设备是否被旋转过:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="4c8e" class="lf lg in kw b gy lh li l lj lk">handleResize() {<br/>  if (window.innerWidth != this.state.DisplayWidth &amp;&amp; <br/>      window.innerHeight != this.state.DisplayHeight) {<br/>    this.setState({<br/>      DisplayHeight: window.innerHeight,<br/>      DisplayWidth: window.innerWidth<br/>    });<br/>  }<br/>}</span></pre><p id="945f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们定义一个函数来修改这个逻辑并使用它:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="1581" class="lf lg in kw b gy lh li l lj lk">launchedFromHomeScreen() {<br/>  return /Safari/.test(navigator.userAgent) &amp;&amp; navigator.standalone<br/>}<br/><br/>handleResize() {<br/>  if (this.launchedFromHomeScreen() {<br/>    if (window.outerWidth != this.state.DisplayWidth &amp;&amp; <br/>        window.outerHeight != this.state.DisplayHeight) {<br/>      this.setState({<br/>        DisplayHeight: window.outerHeight,<br/>        DisplayWidth: window.outerWidth<br/>      });<br/>    }<br/>  } else {<br/>    if (window.innerWidth != this.state.DisplayWidth &amp;&amp; <br/>        window.innerHeight != this.state.DisplayHeight) {<br/>      this.setState({<br/>        DisplayHeight: window.innerHeight,<br/>        DisplayWidth: window.innerWidth<br/>      });<br/>    }<br/>  }<br/>}</span></pre><p id="462d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如您所见，代码量翻了一番。此外，任何逻辑更改都需要进行两次。</p><p id="00c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<code class="fe kt ku kv kw b">dim</code>对象上使用<code class="fe kt ku kv kw b">defineProperty</code>创建访问器...</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="2396" class="lf lg in kw b gy lh li l lj lk">const dim = {};<br/><br/>Object.defineProperty(dim, "launchedFromHomeScreen", {<br/>  get() {<br/>    return /Safari/.test(navigator.userAgent) &amp;&amp; navigator.standalone;<br/>  },<br/>});<br/><br/>Object.defineProperty(dim, "width", {<br/>  get() {<br/>    return dim.launchedFromHomeScreen<br/>      ? window.outerWidth<br/>      : window.innerWidth;<br/>  },<br/>});<br/><br/>Object.defineProperty(dim, "height", {<br/>  get() {<br/>    return dim.launchedFromHomeScreen<br/>      ? window.outerHeight<br/>      : window.innerHeight;<br/>  },<br/>});</span></pre><p id="6645" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，将<code class="fe kt ku kv kw b">window.innerHeight</code>改为<code class="fe kt ku kv kw b">dim.height</code>是一个保持原始逻辑的简单解决方案。</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="35c0" class="lf lg in kw b gy lh li l lj lk">handleResize() {<br/>  if (dim.width != this.state.DisplayWidth &amp;&amp; <br/>      dim.height != this.state.DisplayHeight) {<br/>    this.setState({<br/>      DisplayHeight: dim.height,<br/>      DisplayWidth: dim.width<br/>    });<br/>  }<br/>}</span></pre></div><div class="ab cl ll lm hr ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ig ih ii ij ik"><p id="d8a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ls">原载于2021年10月17日</em><a class="ae lt" href="https://focusedforsuccess.com/using-javascript-accessors/" rel="noopener ugc nofollow" target="_blank"><em class="ls">【https://focusedforsuccess.com】</em></a><em class="ls">。</em></p><p id="0389" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ls">更多内容请看</em><a class="ae lt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Load Script Efficiently Using ‘async’ and ‘defer’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“异步”和“延迟”有效加载脚本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/load-script-efficiently-using-async-and-defer-f05dfe46dfc5?source=collection_archive---------6-----------------------#2021-12-31">https://javascript.plainenglish.io/load-script-efficiently-using-async-and-defer-f05dfe46dfc5?source=collection_archive---------6-----------------------#2021-12-31</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7544" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在现代网站中，一些脚本通常比HTML“更重”:它们的下载和执行时间更长。</p><p id="02a4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在HTML页面上加载脚本时，我们需要小心不要损害页面的加载性能。</p><p id="01ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">脚本通常以这种方式加载到页面中:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/9b09f66fc4aa6c5e528425ec22d13b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2y-gv9gdXTt8mpveFjSh-g.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">script in ‘head’ tag</figcaption></figure><p id="a755" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">web浏览器开始解析HTML，当它遇到<code class="fe ky kz la lb b">&lt;script&gt;….&lt;/script&gt;</code>标记时会暂停，HTML的解析被阻止，现在它必须下载并执行脚本，只有这样它才能解析页面的其余部分。</p><p id="6139" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这很糟糕，因为如果脚本的加载时间比预期的长一点，访问者可能会看到一个空白页，这不是一个好的用户体验</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lc"><img src="../Images/0e2086385bb75f647754a1f661fc410e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4GxdnSpd-9CEEyJPoDsMEQ.png"/></div></div></figure></div><div class="ab cl ld le hr lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ig ih ii ij ik"><p id="4d65" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一个非常常见的解决方案是将脚本放在页面底部，就在关闭</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lk"><img src="../Images/8156c98f79dbdf5bc37a8c9fc3207776.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YCUUFob8_OY_TUHrwoBs0Q.png"/></div></div></figure><p id="2449" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于那些不支持我们最近的两个HTML5特性的老浏览器来说，这是你能做的最好的事情:<strong class="jm io"> async </strong>和<strong class="jm io"> defer。</strong></p></div><div class="ab cl ld le hr lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="ig ih ii ij ik"><h1 id="26fe" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated"><strong class="ak">如何使用‘async’属性？</strong></h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/110647d4c28fe7e359ca5f4072a7bf1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/0*woT3sdTeL1toAoKF.png"/></div></figure><p id="4e02" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<code class="fe ky kz la lb b">async</code>属性，脚本被异步获取，当它准备好时，HTML解析被暂停以执行脚本。一旦脚本执行完毕，HTML解析就会继续。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/28cf238b01ef8bd90145ec1a830053dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*622VhU9UgCrwIFFzZWL4lg.png"/></div></figure><h1 id="a4fe" class="ll lm in bd ln lo ml lq lr ls mm lu lv lw mn ly lz ma mo mc md me mp mg mh mi bi translated">如何使用“延期”属性？</h1><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/134035f62aefd8496b8f31f4af1a292a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/0*xcCZJJyn9GXfj3i8.png"/></div></figure><p id="2046" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<code class="fe ky kz la lb b">defer</code>属性，脚本被异步获取，但只在HTML解析完成后执行。</p><p id="f515" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">简单来说，下载的脚本只有在浏览器完成HTML解析后才会执行。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mr"><img src="../Images/0e42d624b54505c61ea1f7a1c3c32053.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/format:webp/1*H4fO57Qj6ycb3lbr-MupWA.png"/></div></figure><h1 id="78a5" class="ll lm in bd ln lo ml lq lr ls mm lu lv lw mn ly lz ma mo mc md me mp mg mh mi bi translated"><strong class="ak">总结:</strong></h1><p id="dcdc" class="pw-post-body-paragraph jk jl in jm b jn ms jp jq jr mt jt ju jv mu jx jy jz mv kb kc kd mw kf kg kh ig bi translated"><code class="fe ky kz la lb b">async</code>和<code class="fe ky kz la lb b">defer</code>都不会阻止页面渲染，但是<code class="fe ky kz la lb b">async</code>会阻止页面的解析，而<code class="fe ky kz la lb b">defer</code>不会。</p><p id="7576" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它们之间还有以下本质区别:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/44ed102a2eedced906a03b5c492d92fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*MuR6kxzF-4DEoiupKRqSRA.png"/></div></figure><p id="c87a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们知道了如何使用这些属性，我们可以把我们的脚本标签放在<strong class="jm io"> head </strong>标签中，这将允许您的脚本被尽快下载，而不会阻塞您的页面呈现。如果您不使用这些关键字，请确保将其放在&lt; /body &gt;标签的结束之前。这将确保HTML解析器不会被脚本阻塞。</p><pre class="kj kk kl km gt my lb mz na aw nb bi"><span id="8d42" class="nc lm in lb b gy nd ne l nf ng">Note:- async and defer only works for external scripts</span></pre><p id="f4a6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="nh">更多内容请看</em><a class="ae ni" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="nh">plain English . io</em></strong></a><em class="nh">。报名参加我们的</em> <a class="ae ni" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="nh">免费周报</em> </strong> </a> <em class="nh">。在我们的</em> <a class="ae ni" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="nh">社区</em> </strong> </a> <em class="nh">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Building a Mobile App Backend using Node.js and MongoDB.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Node.js和MongoDB构建移动应用后端。</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-mobile-app-backend-using-node-js-and-mongodb-64ea6b5c7571?source=collection_archive---------1-----------------------#2021-05-04">https://javascript.plainenglish.io/building-a-mobile-app-backend-using-node-js-and-mongodb-64ea6b5c7571?source=collection_archive---------1-----------------------#2021-05-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3c7e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何使用Node.js和MongoDB为移动应用程序构建后端的演练。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/b331f9c46440a5e215da9743de1fc67c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*GS9FW4FTxX8lxPfB"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@abillion?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">abillion</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="48ad" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">为什么要在应用程序中使用Node.js？</h1><p id="88ea" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">还有其他各种各样的选择来作为你的应用程序的后端框架。最受欢迎的是<strong class="ln io"> Firebase </strong>。这是一个由谷歌提供的平台，可以用来构建一个小型到中级的应用程序。然而，当您构建一个复杂的应用程序时，它开始变得有问题，因为在Firebase实时数据库中执行复杂的查询变得越来越困难。此外，一旦您的应用程序开始获得一些吸引力，价格就会飙升。</p><p id="7c8e" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><strong class="ln io">另一方面，Node.js </strong>提供了更多的自由和简单的可扩展性。您可以很容易地使用Node.js进行设置和运行。此外，Node.js由于其异步特性，在开发数据密集型应用程序时是一个更好的选择。</p><h1 id="51f4" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">本教程中使用的技术和库。</h1><ol class=""><li id="a209" class="mm mn in ln b lo lp lr ls lu mo ly mp mc mq mg mr ms mt mu bi translated"><strong class="ln io"> Express: </strong>该库将帮助我们构建API。这些API用于接收来自前端(Android Studio)的请求并发回响应。</li><li id="ba19" class="mm mn in ln b lo mv lr mw lu mx ly my mc mz mg mr ms mt mu bi translated"><strong class="ln io"> MongoDB Compass: </strong>本地MongoDB数据库桌面应用程序。</li><li id="4536" class="mm mn in ln b lo mv lr mw lu mx ly my mc mz mg mr ms mt mu bi translated"><strong class="ln io">猫鼬:</strong>一个帮助我们构建收藏模式的ODM库。</li><li id="3f79" class="mm mn in ln b lo mv lr mw lu mx ly my mc mz mg mr ms mt mu bi translated"><strong class="ln io">邮差:</strong>帮助我们测试API的工具。</li></ol><h1 id="d4b3" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">我们开始吧:</h1><p id="1365" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们将首先创建一个REST API，它将接受来自Android Studio的请求，并发回一个响应。在Android Studio中，您可以使用凌空或改装库向我们的后端发送请求，并获得回复。接下来，我们将构建MongoDB数据库，并对其执行读/写操作。</p><h2 id="4566" class="na ku in bd kv nb nc dn kz nd ne dp ld lu nf ng lf ly nh ni lh mc nj nk lj nl bi translated">第1步:初始化您的项目</h2><p id="39bf" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">您可以使用自己选择的任何文本编辑器。我正在使用Visual Studio代码。创建一个新项目，启动终端，并编写以下命令。</p><pre class="kd ke kf kg gt nm nn no np aw nq bi"><span id="eb0d" class="na ku in nn b gy nr ns l nt nu">npm init</span></pre><p id="4672" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">现在你将被要求填写一些关于这个项目的数据。完成后，将创建<strong class="ln io"> package.json </strong>文件。接下来，我们将安装所需的库。</p><pre class="kd ke kf kg gt nm nn no np aw nq bi"><span id="e4b5" class="na ku in nn b gy nr ns l nt nu">npm install express mongoose</span></pre><p id="5b39" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">现在，您的package.json文件应该如下所示。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="886e" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">请注意，我们更改了脚本块。Index.js将是我们构建API的主文件。所以“node index.js”将在我们运行项目时运行index.js文件。</p><h2 id="f9e7" class="na ku in bd kv nb nc dn kz nd ne dp ld lu nf ng lf ly nh ni lh mc nj nk lj nl bi translated">第2步:创建REST API:</h2><p id="5181" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">在这一步，我们将构建一个返回字符串的基本REST API。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="94e5" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">首先，我们导入express库并初始化它。然后我们用端点<em class="nx"> /home创建一个应用编程接口。</em>所以当一个get请求被发送到这个端点时，我们将返回字符串“主屏幕”。最后，在最后一行，我们制作了a <em class="nx"> pp </em>来监听端口3000的请求。</p><p id="cde7" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">现在让我们用邮递员测试这个应用编程接口。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ny"><img src="../Images/4621a52d378432bfb2dc573df90543af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJ5syADl6D_K6QYZffFi5Q.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Screenshot by Author.</figcaption></figure><p id="fee3" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">在向我们的<em class="nx"> /home </em>端点发送get请求时，我们成功地获得了“主屏幕”字符串作为响应。</p><h2 id="fc7c" class="na ku in bd kv nb nc dn kz nd ne dp ld lu nf ng lf ly nh ni lh mc nj nk lj nl bi translated">第三步:<strong class="ak">配置MongoDB </strong>数据库:</h2><p id="60a3" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">启动您的MongoDB Compass并创建一个新的数据库。我们将使用Mongoose，它是MongoDB和Node.js的对象数据建模(ODM)库。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="ea0f" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们导入mongoose库，然后与名为<em class="nx">后端的本地数据库建立连接。</em>你可以用你的数据库名替换<em class="nx">后端</em>。在运行服务器时，如果连接成功，我们应该“连接到数据库”。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/871bd1b687d5f90a5c4e569d85ee2219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGBnD809V4fQsj-KrYMLhQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Screenshot by Author.</figcaption></figure><p id="bd12" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">正如我们所看到的，当我们运行index.js文件时，我们得到“连接到数据库”作为输出。因此，我们已经成功地连接到我们的数据库。</p><h2 id="fbba" class="na ku in bd kv nb nc dn kz nd ne dp ld lu nf ng lf ly nh ni lh mc nj nk lj nl bi translated">步骤4:对数据库执行操作。</h2><p id="8f91" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">为了执行这些操作，我们需要创建API，这些API将接收来自接口的请求，访问/发送数据库中的数据，并发回响应。</p><p id="de1c" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">最初，我们需要将一些数据放入数据库。我们将使用Mongoose定义这个数据的模式。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="8ab7" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们将有一个名为users的集合(表),它将存储用户的姓名、电子邮件和性别。现在让我们构建一个将数据放入这个集合的API和另一个读取集合中所有数据的API。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="9142" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们正在导入我们在上面第4行创建的用户模式。在下一行中，我们添加了<em class="nx"> app.use(express.json()) </em>以便它能够识别包含我们的用户数据的json对象，我们将随请求一起发送这些数据。然后，我们创建两个新的API，如端点<em class="nx"> /read </em>和<em class="nx"> /post所讨论的。</em></p><p id="a067" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">当点击<em class="nx"> /read </em>端点时，它将读取集合中的所有用户数据。</p><p id="e483" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">点击时的<em class="nx"> /post </em>端点将读取主体中的JSON数据，并将其保存在我们的集合中。</p><p id="5381" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">现在让我们测试这两个API。首先，我们将向<em class="nx"> /post </em>发送一个post请求以及用户数据，如下所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi oa"><img src="../Images/5d9d0c9c12875505e95ac5482b3c6230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JjfxpRvSlSZfhHR03BSkVw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Screenshot by Author.</figcaption></figure><p id="55b2" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">我们收到一条成功消息，这意味着我们的数据成功地存储在我们的集合中。为了确认这一点，我们可以向<em class="nx"> /read </em>发送一个get请求来检查我们是否检索到了存储的数据。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi ob"><img src="../Images/d81f1b775f6cfd32cdc7fcbac4456d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zK0gjQ3dtu2Is2Ixe2fTGQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Screenshot by Author.</figcaption></figure><p id="9fbe" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated">如上所述，我们取回了数据，这证实了我们的数据已被存储。</p><h1 id="268e" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">结论:</h1><p id="07cd" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">我们最终创建了一个运行在端口3000上的后端服务器。我们构建了我们的MongoDB数据库，它将存储用户的数据和两个API，它们将添加/读取存储的数据。在未来，有必要将我们的服务器和数据库托管在云上，这样就可以随时访问。</p></div><div class="ab cl oc od hr oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ig ih ii ij ik"><p id="5cdf" class="pw-post-body-paragraph ll lm in ln b lo mh jo lq lr mi jr lt lu mj lw lx ly mk ma mb mc ml me mf mg ig bi translated"><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nx">更多内容尽在plainenglish.io </em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How To Create Your Own Node.js Docker Repository</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何创建自己的Node.js Docker存储库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/node-js-docker-5b76778830c3?source=collection_archive---------16-----------------------#2021-01-13">https://javascript.plainenglish.io/node-js-docker-5b76778830c3?source=collection_archive---------16-----------------------#2021-01-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5e91c479330f81322ad24d95f466b133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oSKfdHleImDOWGiTZX9bTQ.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Source: the author</figcaption></figure><p id="a246" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">让我们马上开始吧。要在Docker Hub中创建您自己的存储库，您首先需要创建一个帐户——您可以在这里轻松完成<a class="ae la" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="26e7" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">然后你就可以用你的账号登陆终端了。当然，Docker必须安装在本地。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="c4ec" class="lk ll iq lg b gy lm ln l lo lp">docker login -p "&lt;password&gt;" -u "&lt;username&gt;"</span></pre><p id="a9e4" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">现在，我们可以开始创建一个本地Node.js映像，然后将其作为repo发布到Docker Hub。</p><ol class=""><li id="97dd" class="lq lr iq ke b kf kg kj kk kn ls kr lt kv lu kz lv lw lx ly bi translated">创建新的项目目录。</li><li id="2825" class="lq lr iq ke b kf lz kj ma kn mb kr mc kv md kz lv lw lx ly bi translated">进入目录并运行<code class="fe me mf mg lg b">npm init -y</code>和<code class="fe me mf mg lg b">npm install express</code></li><li id="efdf" class="lq lr iq ke b kf lz kj ma kn mb kr mc kv md kz lv lw lx ly bi translated">然后，我们创建两个文件:<code class="fe me mf mg lg b">app.js</code>和s <code class="fe me mf mg lg b">Dockerfile</code>。</li></ol><p id="6008" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在app.js中，我们创建了一个简单的express服务器:</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="8dc9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">我们按如下方式填写Dockerfile文件:</p><figure class="lb lc ld le gt jr"><div class="bz fp l di"><div class="mh mi l"/></div></figure><p id="5602" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">之后，我们可以建立我们的形象:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="3da7" class="lk ll iq lg b gy lm ln l lo lp">docker build . -t node-jsipe</span></pre><p id="9dd9" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为了测试一切是否正常，我们可以在本地运行它:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="e6e5" class="lk ll iq lg b gy lm ln l lo lp">docker run -d -p 8080:8080 node-jsipe</span></pre><p id="500a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如果您在浏览器中打开localhost:8080，您应该会看到应用程序的输出。一切正常——我们现在可以创建Docker Hub存储库了。</p><p id="9be5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，我们首先需要在Docker Hub中创建一个空的repo。<br/>还是那句话，我就叫它“node-jsipe”。<br/>您可以在这里创建回购:<a class="ae la" href="https://hub.docker.com/repositories" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/repositories</a>。</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mj"><img src="../Images/5f0469965dcbd0cb248c606fd6625c4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYVRjnbrmYM7ss0_Zayinw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Source: <a class="ae la" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">hub.docker.com</a></figcaption></figure><p id="519a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">您只需要填写名称和描述—我们将公开回购。现在你有一个空的回购——让我们用生命来填充它。</p><p id="fcc5" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">为此，我们将刚刚构建的本地映像链接到回购。这可以通过以下命令完成:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="f544" class="lk ll iq lg b gy lm ln l lo lp">docker tag node-jsipe &lt;username&gt;/&lt;repo-name&gt;</span></pre><p id="274a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">因为我在本地创建的映像名为“node-jsipe”，所以我在那里指定它。<br/>您仍然需要将用户名和回购名称替换为您自己的名称，您可以在您的回购下找到这两个信息:</p><figure class="lb lc ld le gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mk"><img src="../Images/7ad5d1d5913d0fdfc6767e2cfd54f5a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zng-xBsMTEt8LirW5LncRw.png"/></div></div></figure><p id="5e3b" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">就我而言，我给它贴上了<code class="fe me mf mg lg b">docker tag node-jsipe louispetrik/node-jsipe</code>的标签。现在两者联系起来了，我们只需要推动。</p><p id="e223" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">推就更轻松了:<code class="fe me mf mg lg b">docker push &lt;username&gt;/&lt;repo-name&gt;</code>。<br/>同样，我的情况:<code class="fe me mf mg lg b">docker push louispetrik/node-jsipe</code>。</p><h1 id="8318" class="ml ll iq bd mm mn mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh bi translated">使用图像</h1><p id="dd83" class="pw-post-body-paragraph kc kd iq ke b kf ni kh ki kj nj kl km kn nk kp kq kr nl kt ku kv nm kx ky kz ij bi translated">您的存储库现在是公开可用的——这意味着您只需一个命令就可以在其他系统上安装它。</p><p id="d26f" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">用<code class="fe me mf mg lg b">docker pull &lt;username&gt;/&lt;repo-name&gt;</code>安装就行了。<br/>映像现已安装在本地，可按如下方式运行:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="09a5" class="lk ll iq lg b gy lm ln l lo lp">docker run -d -p 8080:8080 louispetrik/node-jsipe</span></pre><p id="6c25" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">当然，随着时间的推移，你会改变自己的形象。保存更改后，您重新构建映像并再次推送，但随后您意识到没有应用任何更改。正确-您必须首先分配一个新标签。</p><p id="30ae" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">这是怎么回事:</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="30a4" class="lk ll iq lg b gy lm ln l lo lp">docker tag node-jsipe &lt;username&gt;/&lt;repo-name&gt;:&lt;tag&gt;</span></pre><p id="5c6a" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">如何命名标签由您决定。之后，你必须上传更改。这同样适用于push——只是这一次我们必须定义我们想要推送的标签。</p><pre class="lb lc ld le gt lf lg lh li aw lj bi"><span id="20e0" class="lk ll iq lg b gy lm ln l lo lp">docker push &lt;username&gt;/&lt;repo-name&gt;:&lt;tag&gt;</span></pre><p id="a684" class="pw-post-body-paragraph kc kd iq ke b kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz ij bi translated">在hub中，您应该看到多个标签，即版本，存在于您的repo中。您可以使用<code class="fe me mf mg lg b">docker pull</code>再次安装并运行它们。</p></div></div>    
</body>
</html>
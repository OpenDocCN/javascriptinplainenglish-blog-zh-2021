<html>
<head>
<title>Here is How to Apply useReducer + useContext Hooks Together</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">下面是如何一起应用useReducer + useContext挂钩</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/here-is-how-to-apply-usereducer-usecontext-hooks-together-f8f7b51f7bcc?source=collection_archive---------8-----------------------#2021-12-20">https://javascript.plainenglish.io/here-is-how-to-apply-usereducer-usecontext-hooks-together-f8f7b51f7bcc?source=collection_archive---------8-----------------------#2021-12-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c430" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用代码示例和代码沙箱</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b37596d404455de3d59c3a30b4eb33b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ak3veOS8NQexeGA-SI0PFQ.png"/></div></div></figure><p id="04ed" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在组件之间传递道具和共享状态是每个react应用的主干。但是使用道具传递几级深的道具并不是一个好的做法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ln"><img src="../Images/5bfc2b5f89455b6a96f23db1423de7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cA8Ved2TR_bOpciUpYOLNg.png"/></div></div></figure><p id="0bb7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">通过上面的图片，你可以看到我们是否需要通过props从app.js向组件F传递一个值，我们需要通过C - &gt; E -&gt;来传递它。但是C，E组件可能不使用prop值，但是必须维护props，因为它被子组件使用。</p><blockquote class="lo lp lq"><p id="8330" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">如果你愿意支持我成为一名作家，考虑注册<a class="ae lv" href="https://freelancingcult.medium.com/membership" rel="noopener">成为</a>的媒体成员。这样我就可以花更多的时间来分享知识。每月只需5美元，你就可以无限制地使用Medium。</p></blockquote><p id="dc2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">解决上述行为的一种方法是将<code class="fe lw lx ly lz b">useContext</code>与useReducer一起使用。</p><div class="ma mb gp gr mc md"><a href="https://levelup.gitconnected.com/learn-react-usestate-hook-a09ccf955537" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ir gy z fp mi fr fs mj fu fw ip bi translated">学习反应使用状态挂钩</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">有例子和练习</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mm l"><div class="mn l mo mp mq mm mr kp md"/></div></div></a></div><div class="ma mb gp gr mc md"><a rel="noopener  ugc nofollow" target="_blank" href="/react-useeffect-hook-tutorial-for-beginners-30626402b739"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ir gy z fp mi fr fs mj fu fw ip bi translated">React useEffect Hook初学者教程</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">React useEffect初学者教程，提供真实示例和日常使用模式。</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mm l"><div class="ms l mo mp mq mm mr kp md"/></div></div></a></div><p id="19ad" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">1-在app.js <br/>中使用<code class="fe lw lx ly lz b">useReducer</code>创建一个计数器2-然后我们可以在必要的组件中使用上下文来提供和使用计数器函数</p><p id="64da" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">工作沙箱</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="4773" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">想象一个简单的购物车场景。您可能已经看到，购物车中的商品编号显示在每个页面上。</p><p id="2c99" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以从主页、相关产品页面或任何相关组件中添加项目，并增加项目数量。</p><p id="0cab" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了实现这一点，我们应该能够共享单个状态值和一个公共函数，以便在每个组件之间添加项目。</p><blockquote class="lo lp lq"><p id="d841" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">如果你愿意支持我成为一名作家，请考虑注册<a class="ae lv" href="https://freelancingcult.medium.com/membership" rel="noopener">成为一名灵媒</a>。这样我就可以花更多的时间来分享知识。每月只需5美元，你就可以无限制地使用Medium。</p></blockquote><p id="76e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是一个简单的概念证明，展示了如何共享和操作不同组件内部的状态，这些组件位于其他子组件的内部。我们要用<code class="fe lw lx ly lz b">useReducer</code>钩配合<code class="fe lw lx ly lz b">useContext</code>钩</p><div class="ma mb gp gr mc md"><a href="https://levelup.gitconnected.com/i-started-learning-the-usereducer-hook-4b0b86be5b49" rel="noopener  ugc nofollow" target="_blank"><div class="me ab fo"><div class="mf ab mg cl cj mh"><h2 class="bd ir gy z fp mi fr fs mj fu fw ip bi translated">我开始学习useReducer钩子</h2><div class="mk l"><h3 class="bd b gy z fp mi fr fs mj fu fw dk translated">以下是我所学到的和我的代码操场-第1部分</h3></div><div class="ml l"><p class="bd b dl z fp mi fr fs mj fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="mm l"><div class="mv l mo mp mq mm mr kp md"/></div></div></a></div><p id="3702" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们从App.js文件开始</p><p id="9ca5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像往常一样，我们将在app.js中定义我们的reducer函数，这将是一个简单的计数器reducer。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mu l"/></div></figure><p id="81d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们从react进口<code class="fe lw lx ly lz b">useReducer</code></p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="a730" class="nb nc iq lz b gy nd ne l nf ng">import React, { useReducer } from "react";</span></pre><p id="74f2" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们使用<code class="fe lw lx ly lz b">useReducer</code>与减速器功能，我们创造了早期</p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="d874" class="nb nc iq lz b gy nd ne l nf ng">const [count, dispatch] = useReducer(reducer, initialState);</span></pre><p id="b9f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">关于初始化<code class="fe lw lx ly lz b">useReducer</code>的更多细节，你可以看看我之前的博文</p><p id="4ff0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们要做的是，我们必须将count变量和dispatch函数传递给react应用程序中的所有子组件。</p><p id="24b5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为此，我们使用react上下文挂钩</p><p id="d444" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们创建一个上下文挂钩，如下所示</p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="3720" class="nb nc iq lz b gy nd ne l nf ng">export const CountContext = React.createContext();</span></pre><p id="f837" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，我们可以使用上下文提供者包装我们的组件，并将计数和分派函数传递给所有组件</p><p id="c117" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">参见下面的完整代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mu l"/></div></figure><p id="d937" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你可以看到我们已经使用<code class="fe lw lx ly lz b">CountContext.Provider</code>传递了<code class="fe lw lx ly lz b">count</code>和<code class="fe lw lx ly lz b">dispatch</code>函数</p><h2 id="eb1d" class="nb nc iq bd nh ni nj dn nk nl nm dp nn la no np nq le nr ns nt li nu nv nw nx bi translated">在不同的组件中使用传递的值</h2><p id="54ca" class="pw-post-body-paragraph kr ks iq kt b ku ny jr kw kx nz ju kz la oa lc ld le ob lg lh li oc lk ll lm ij bi translated">我们可以使用<code class="fe lw lx ly lz b">useContext</code>钩子在其他组件和子组件中使用传递的值。</p><p id="de5b" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们看看如何使用<code class="fe lw lx ly lz b">useContext</code>钩子在其他组件中获得<code class="fe lw lx ly lz b">count</code>和<code class="fe lw lx ly lz b">dispatch</code>函数。</p><p id="31e4" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">下面是我们如何使用app.js中定义的<code class="fe lw lx ly lz b">CountContext</code></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mu l"/></div></figure><p id="56d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">首先，我们从react导入了使用上下文</p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="d577" class="nb nc iq lz b gy nd ne l nf ng">import React, { useContext } from "react";</span></pre><p id="884c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后从app.js导入<code class="fe lw lx ly lz b">CountContext</code></p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="d104" class="nb nc iq lz b gy nd ne l nf ng">import { CountContext } from "../App";</span></pre><p id="10c0" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后将导入的<code class="fe lw lx ly lz b">CountContext</code>传递到<code class="fe lw lx ly lz b">useContext</code>钩子中并创建<code class="fe lw lx ly lz b">countContext</code>常量</p><pre class="kg kh ki kj gt mx lz my mz aw na bi"><span id="4ba6" class="nb nc iq lz b gy nd ne l nf ng">const countContext = useContext(CountContext);</span></pre><p id="d314" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后我们可以使用countContext常量来使用<code class="fe lw lx ly lz b">count</code>和<code class="fe lw lx ly lz b">dispatch</code>函数，如下所示。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mw mu l"/></div></figure><blockquote class="lo lp lq"><p id="a5ba" class="kr ks lr kt b ku kv jr kw kx ky ju kz ls lb lc ld lt lf lg lh lu lj lk ll lm ij bi translated">我希望你喜欢读这篇文章。如果你愿意支持我作为一个作家和我花在分享知识上的时间，考虑注册<a class="ae lv" href="https://freelancingcult.medium.com/membership" rel="noopener">成为一个媒体成员</a>。每月只需5美元，你就可以无限制地使用Medium。</p></blockquote><p id="b546" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="lr">更多内容请看</em> <a class="ae lv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="lr">说白了就是</em> </strong> </a> <em class="lr">。报名参加我们的</em> <a class="ae lv" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kt ir"> <em class="lr">免费每周简讯这里</em> </strong> </a> <em class="lr">。</em></p></div></div>    
</body>
</html>
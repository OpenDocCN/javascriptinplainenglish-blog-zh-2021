<html>
<head>
<title>What Are Callback Functions In JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中有哪些回调函数？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/callback-functions-in-javascript-b90684dbae6d?source=collection_archive---------3-----------------------#2021-01-17">https://javascript.plainenglish.io/callback-functions-in-javascript-b90684dbae6d?source=collection_archive---------3-----------------------#2021-01-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/156de131cd9033cdcf8fcc9a36c92d3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0qLKSkNOyN7-6hG5jZPVew.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">(posted in jscurious.com)</figcaption></figure><p id="5681" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">回调是作为参数传递给另一个函数的函数，稍后可以在该函数内部调用。</p><h1 id="ff7c" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">同步回调</h1><p id="4f40" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">同步意味着代码语句以连续的方式一个接一个地执行。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="11a9" class="mj ky in mf b gy mk ml l mm mn">function print(number, result) {<br/>    console.log(`${number} is ${result}`);<br/>}</span><span id="ac4c" class="mj ky in mf b gy mo ml l mm mn">function checkEvenOrOdd(number, callback) {<br/>  const result =  (number % 2 === 0) ? 'Even' : 'Odd';<br/>  callback(number, result);<br/>}</span><span id="f3c4" class="mj ky in mf b gy mo ml l mm mn">checkEvenOrOdd(56, print);<br/>// 56 is Even</span></pre><p id="1e46" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里回调是立即执行的，它不等待任何异步操作完成。这就是为什么它是一个同步回调。</p><h1 id="9541" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">异步回调</h1><p id="ffd6" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">如果回调是在异步操作完成后执行的，那么它就是异步回调。</p><p id="ddc9" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们看一个例子，我们将接受一个订单并打印它。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="9028" class="mj ky in mf b gy mk ml l mm mn">function takeOrder() {<br/>    setTimeout(() =&gt; {<br/>       return (Math.random() * 10) &lt;= 5 ? 'Coffee' : 'Tea';<br/>    }, 1000);<br/>}</span><span id="25c3" class="mj ky in mf b gy mo ml l mm mn">let order = takeOrder();<br/>console.log('Order is for: ' + order);<br/>// Order is for: undefined</span></pre><p id="b1c6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在这里的<code class="fe mp mq mr mf b">takeOrder</code>函数中，<code class="fe mp mq mr mf b">setTimeout</code>将在1秒后运行，此时<code class="fe mp mq mr mf b">console.log</code>语句已经执行，因此订单的打印值为<code class="fe mp mq mr mf b">undefined</code>。</p><p id="3aac" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，如果我们能够在数据从<code class="fe mp mq mr mf b">takeOrder</code>返回后将消息记录到控制台，我们就可以解决这个问题了。这可以通过向<code class="fe mp mq mr mf b">takeOrder</code>传递一个回调函数来完成，该函数将在<code class="fe mp mq mr mf b">takeOrder</code>函数内部被调用。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="5c8e" class="mj ky in mf b gy mk ml l mm mn">function takeOrder(callback) {<br/>    setTimeout(() =&gt; {<br/>        const order = (Math.random() * 10) &lt;= 5 ? 'Coffee' : 'Tea';<br/>        callback(order);<br/>    }, 1000);<br/>}</span><span id="d3e1" class="mj ky in mf b gy mo ml l mm mn">takeOrder((order) =&gt; {<br/>    console.log('Order is for: ' + order);<br/>});</span><span id="0444" class="mj ky in mf b gy mo ml l mm mn">// Order is for: Tea</span></pre><p id="9603" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里，1秒钟后，回调函数将被调用，控制台语句将以正确的顺序值执行。</p><blockquote class="ms mt mu"><p id="f33d" class="jz ka mv kb b kc kd ke kf kg kh ki kj mw kl km kn mx kp kq kr my kt ku kv kw ig bi translated"><em class="in">注:</em> <code class="fe mp mq mr mf b"><em class="in">takeOrder</em></code> <em class="in">功能的输出可能因您的情况而异，因为我们使用</em> <code class="fe mp mq mr mf b"><em class="in">Math.random()</em></code> <em class="in">来决定订单值。</em></p></blockquote><h1 id="600e" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">用回调处理错误</h1><p id="3238" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">我们可以为成功和失败的场景传递不同的回调。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="aef1" class="mj ky in mf b gy mk ml l mm mn">function takeOrder(success, failure) {<br/>    setTimeout(() =&gt; {<br/>        const random = (Math.random() * 10);<br/>        if(random &lt; 8) {<br/>            const order = random &lt; 4 ? 'Coffee' : 'Tea';<br/>            success(order);<br/>        } else {<br/>            failure('Order Not Available');<br/>        }<br/>        <br/>    }, 1000);<br/>}</span><span id="10b5" class="mj ky in mf b gy mo ml l mm mn">takeOrder(<br/>    (order) =&gt; {<br/>        console.log('Order is for: ' + order);<br/>    },<br/>    (error) =&gt; {<br/>        console.log(error);<br/>    }<br/>);</span></pre><h1 id="b782" class="kx ky in bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">嵌套回调</h1><p id="9b90" class="pw-post-body-paragraph jz ka in kb b kc lv ke kf kg lw ki kj kk lx km kn ko ly kq kr ks lz ku kv kw ig bi translated">我们一个一个来看订单流程。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="1b00" class="mj ky in mf b gy mk ml l mm mn">function takeOrder(callback) {<br/>    setTimeout(() =&gt; {<br/>        const order = (Math.random() * 10) &lt;= 5 ? 'Coffee' : 'Tea';<br/>        callback(order);<br/>    }, 1000);<br/>}</span><span id="9dfc" class="mj ky in mf b gy mo ml l mm mn">function makeOrder(order, callback) {<br/>    setTimeout(() =&gt; {<br/>        callback(order + ' is prepared');<br/>    }, 1000);<br/>}</span><span id="b83b" class="mj ky in mf b gy mo ml l mm mn">function serveOrder(order, callback) {<br/>    setTimeout(() =&gt; {<br/>        callback(order + ' is served');<br/>    }, 1000);<br/>}</span><span id="d663" class="mj ky in mf b gy mo ml l mm mn">takeOrder((order) =&gt; {<br/>    console.log('Order is for: ' + order);<br/>    makeOrder(order, (orderStatus) =&gt; {<br/>        console.log(orderStatus);<br/>        serveOrder(order, (orderStatus) =&gt; {<br/>            console.log(orderStatus);<br/>        })<br/>    })<br/>});</span></pre><p id="d0c3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">输出</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="9e08" class="mj ky in mf b gy mk ml l mm mn">Order is for: Coffee<br/>Coffee is prepared<br/>Coffee is served</span></pre><p id="37bf" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里，当来自<code class="fe mp mq mr mf b">takeOrder</code>的响应到来时，调用<code class="fe mp mq mr mf b">makeOrder</code>。类似地，当来自<code class="fe mp mq mr mf b">makeOrder</code>的响应到来时，调用<code class="fe mp mq mr mf b">serveOrder</code>。在这里，我们将回调函数嵌套在另一个回调函数中，以便按顺序执行函数。</p><p id="9901" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果回调的嵌套增加了，那么它被称为<strong class="kb io">回调地狱，</strong>在这里很难管理回调，并且它降低了代码的可读性。看看回调地狱的一个例子。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="b67d" class="mj ky in mf b gy mk ml l mm mn">takeOrder((order) =&gt; {<br/>    makeOrder(order, () =&gt; {<br/>        serveOrder(order, () =&gt; {<br/>            provideBill(order, () =&gt; {<br/>                takeBill(order, () =&gt; {<br/>                    // some more callbacks<br/>                })<br/>            })<br/>        })<br/>    })<br/>});</span></pre><p id="28e4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这个回调地狱可以通过使用<a class="ae mz" href="https://jscurious.com/a-brief-guide-to-promises-in-javascript/" rel="noopener ugc nofollow" target="_blank">承诺</a>和<a class="ae mz" href="https://jscurious.com/understanding-async-and-await-in-javascript/" rel="noopener ugc nofollow" target="_blank">异步/等待</a>来修复。</p><p id="1202" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">JavaScript中有一些内置方法接受回调作为参数。</p><pre class="ma mb mc md gt me mf mg mh aw mi bi"><span id="0f56" class="mj ky in mf b gy mk ml l mm mn">// Array.map()<br/>array.map((element) =&gt; {<br/>    // your code here<br/>});</span><span id="d69a" class="mj ky in mf b gy mo ml l mm mn">// setTimeout<br/>setTimeout(() =&gt; {<br/>    // your code here<br/>}, timeout);</span></pre><p id="6e8c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们看看其他一些接受回调的方法。</p><p id="0d63" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><code class="fe mp mq mr mf b">Array.filter()</code>、<code class="fe mp mq mr mf b">Array.reduce()</code>、<code class="fe mp mq mr mf b">Array.find()</code>、<code class="fe mp mq mr mf b">Array.sort()</code>、<code class="fe mp mq mr mf b">Array.forEach()</code>、<code class="fe mp mq mr mf b">setInterval()</code>、<code class="fe mp mq mr mf b">addEventListener()</code>、<code class="fe mp mq mr mf b">Promise.then()</code>、<code class="fe mp mq mr mf b">Promise.catch()</code>等。</p></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><h2 id="6f0e" class="mj ky in bd kz nh ni dn ld nj nk dp lh kk nl nm ll ko nn no lp ks np nq lt nr bi translated">你可能也喜欢</h2><ul class=""><li id="74a0" class="ns nt in kb b kc lv kg lw kk nu ko nv ks nw kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/a-brief-guide-to-promises-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中承诺的简要指南</a></li><li id="9783" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/understanding-async-and-await-in-javascript/" rel="noopener ugc nofollow" target="_blank">理解JavaScript中的异步和等待</a></li><li id="b231" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/javascript-fetch-api-to-make-http-requests/" rel="noopener ugc nofollow" target="_blank"> JavaScript获取API以发出HTTP请求</a></li><li id="d05e" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/20-javascript-shorthand-techniques-that-will-save-your-time/" rel="noopener ugc nofollow" target="_blank"> 20种节省你时间的JavaScript速记技巧</a></li><li id="5fca" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/the-notification-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">使用JavaScript中的通知API发送推送通知</a></li><li id="941d" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/play-audio-with-htmlaudioelement-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">用JavaScript中的HTMLAudioElement API播放音频</a></li><li id="0c80" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/map-in-javascript-and-how-it-is-better-than-object/" rel="noopener ugc nofollow" target="_blank">JavaScript中的地图，当它是比对象更好的选择时</a></li><li id="bd65" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/javascript-set-object-to-store-unique-values/" rel="noopener ugc nofollow" target="_blank"> JavaScript设置对象存储唯一值</a></li><li id="6773" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/generator-functions-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的生成器函数</a></li><li id="d9af" class="ns nt in kb b kc ob kg oc kk od ko oe ks of kw nx ny nz oa bi translated"><a class="ae mz" href="https://jscurious.com/the-vibration-api-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中的震动API</a></li></ul></div><div class="ab cl na nb hr nc" role="separator"><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf ng"/><span class="nd bw bk ne nf"/></div><div class="ig ih ii ij ik"><p id="7563" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mv">感谢您抽出时间</em> ☺️ <br/>如需更多网络开发博客，请访问<a class="ae mz" href="http://jscurious.com/" rel="noopener ugc nofollow" target="_blank">jscurious.com</a></p></div></div>    
</body>
</html>
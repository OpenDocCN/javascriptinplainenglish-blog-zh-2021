<html>
<head>
<title>How to Make your React Components Type-Safe with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用TypeScript使React组件类型安全</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-make-your-react-components-type-safe-with-typescript-63d648d361ef?source=collection_archive---------5-----------------------#2021-03-26">https://javascript.plainenglish.io/how-to-make-your-react-components-type-safe-with-typescript-63d648d361ef?source=collection_archive---------5-----------------------#2021-03-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2daf" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">您将了解到在React中创建类型安全的组件有多简单，以及这会对React代码的编写带来多大的改进</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/6ba099c80f3cfee64bbe2754634518a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*IiEajxjzoOthw_477rdnPA.png"/></div></figure><p id="9f51" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">出于各种原因，我喜欢用TypeScript编写所有的React代码，但其中一个重要原因是，我能够使我的组件开箱即用，这反过来又使它们不容易出错。当涉及到编辑器(如VS Code)中的代码完成时，这也是一个巨大的好处。如果你习惯于用普通的JavaScript编写你的React代码，那么我将要展示给你的就相当于使用prop-type。</p></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><h1 id="788c" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">让我们开始编码吧</h1><p id="78c5" class="pw-post-body-paragraph kk kl in km b kn mf jo kp kq mg jr ks kt mh kv kw kx mi kz la lb mj ld le lf ig bi translated">在本教程中，我不打算编写完整的React项目代码，但是如果您想尝试下面的代码片段，那么您可以在您的终端中运行以下命令(如果您在Windows上，可以使用命令提示符或powershell)。</p><pre class="kd ke kf kg gt mk ml mm mn aw mo bi"><span id="85d9" class="mp lo in ml b gy mq mr l ms mt">npx create-react-app typescript-demo-app --template typescript</span></pre><p id="d9af" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这将创建一个使用TypeScript的starter react应用程序。在它完成创建您的项目后，您可以继续在您选择的代码编辑器中打开它。</p><p id="aa9e" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">下面的代码片段将在几个不同的场景中给出组件类型。</p><h2 id="cfdb" class="mp lo in bd lp mv mw dn lt mx my dp lx kt mz na lz kx nb nc mb lb nd ne md nf bi translated">场景1:一个需要所有道具的简单组件</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="f4a9" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">你会注意到我给了<strong class="km io">场景1 </strong>组件一种<em class="mu">反应。FC </em>它只是告诉TypeScript这实际上是一个React功能组件。这很重要，因为TypeScript需要知道这一点，这样它才能推断出我们的arrow函数中的第一个参数是props。在上面的例子中，我正在执行对象析构，但是你也可以调用第一个参数props，然后在React代码中编写props.disabled和props.color。</p><h2 id="7bf3" class="mp lo in bd lp mv mw dn lt mx my dp lx kt mz na lz kx nb nc mb lb nd ne md nf bi translated">场景2:一个简单的组件，需要孩子和所有道具</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="28c0" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">你会注意到，在这个场景中，它与第一个场景非常相似。唯一的不同是，我们现在也析构子元素，并把它放在按钮中。我们之所以能够做到这一点，而不必在我们的Props类型中包含子对象，是因为我们告诉TypeScript需要一个React.FC类型。这意味着作为第一个参数中的对象的一部分，子对象将被包含在内。</p><h2 id="6192" class="mp lo in bd lp mv mw dn lt mx my dp lx kt mz na lz kx nb nc mb lb nd ne md nf bi translated"><strong class="ak">场景3:具有作为类型</strong>一部分的功能的组件</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="3dc5" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在这个场景中，我们向道具类型添加了一个新的属性。这个属性只是一个返回void的函数(换句话说，它不返回任何东西)。如果你想测试这个，我认为它实际上很有趣。请尝试向handleClick函数添加参数或尝试返回一个字符串。您会注意到，这种情况一发生，TypeScript就对代码不再满意了。下面我举个例子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ni"><img src="../Images/5b730126910d06a81131f33e64822801.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*LIaKI0fVSQe9fsnx33REGw.gif"/></div></figure><h2 id="c35e" class="mp lo in bd lp mv mw dn lt mx my dp lx kt mz na lz kx nb nc mb lb nd ne md nf bi translated">场景4:具有可选属性的组件</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="e375" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">对于这一个，它是超级容易的。要使一个类型的属性可选，我们只需在<code class="fe nj nk nl ml b"><strong class="km io">:</strong></code> <strong class="km io"> </strong>前添加一个<code class="fe nj nk nl ml b"><strong class="km io">?</strong></code>，告诉TypeScript该属性是可选的。当然，如果我们没有为属性传递任何东西，我们将不得不考虑它可能是未定义的。幸运的是，这也很容易解决。您将在上面代码片段的第8行看到，我只是通过将该属性设置为false来赋予它一个默认值。现在，如果我们不为disabled传递一个值，它将自动假定该值为false。</p></div><div class="ab cl lg lh hr li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ig ih ii ij ik"><h1 id="1d1c" class="ln lo in bd lp lq lr ls lt lu lv lw lx jt ly ju lz jw ma jx mb jz mc ka md me bi translated">结论</h1><p id="a748" class="pw-post-body-paragraph kk kl in km b kn mf jo kp kq mg jr ks kt mh kv kw kx mi kz la lb mj ld le lf ig bi translated">我希望您发现这个在TypeScript中创建类型安全的React组件的小步骤很有帮助。我知道为所有组件创建这些类型可能需要一点前期工作，但这肯定是值得的。您将在代码编辑器中获得更好的自动完成选项，并对组件的正确使用感到安心。</p></div></div>    
</body>
</html>
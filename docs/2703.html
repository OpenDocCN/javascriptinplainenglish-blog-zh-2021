<html>
<head>
<title>How to Design a Google Calculator with React Redux Hooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React Redux钩子设计一个谷歌计算器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/designing-google-calculator-with-react-redux-hooks-cfbf4b516dcb?source=collection_archive---------14-----------------------#2021-06-03">https://javascript.plainenglish.io/designing-google-calculator-with-react-redux-hooks-cfbf4b516dcb?source=collection_archive---------14-----------------------#2021-06-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="7004" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">适合初学者的React Redux</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/fa0228a0470e3a00e60cd666cab7e93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DcBMXTSL2OI2lGlu"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@claytonrobbins?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clayton Robbins</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d1dd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">2020年，在我看了Redux的创造者Dan Abramov的视频教程和Reinald Reynoso的教程后，Redux完全有了意义。有几十个Redux教程和文章，但缺少的是从初学者的角度来看有所帮助的教程类型。初学者应该理解Redux是一个基本的库，但是使用它需要一定程度的项目开发知识。</p><p id="e0e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不要认为使用Redux需要某种复杂的应用程序。需要保存一些状态的最简单的应用程序就足够了。在构建应用程序之后，我学习了JavaScript/React/Redux，众所周知，大多数web应用程序都需要一种方法来保存页面和视图之间的状态。考虑一下页面之间的一致性，您必须传递一些信息，一些信息在一个页面上，一些信息跨多个页面显示。</p><p id="65b4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">该信息可以作为路径和请求参数传递。它们可以作为模型属性嵌入到像Spring这样的框架中。然而，在JavaScript框架中，一些基本工具是<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" rel="noopener ugc nofollow" target="_blank"> localstorage </a>和<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage" rel="noopener ugc nofollow" target="_blank"> sessionstorage </a>，它们都存在于窗口对象中。Redux是React等JavaScript框架中的一个很好的状态管理库。</p><h1 id="b52f" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">这个概念</h1><p id="a7a7" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">Redux“是一个可预测的前端框架状态管理库”。在React很流行。还有其他像Mobx，Flux。但是Redux的简单和轻薄使它成为React中的首选库。关于Redux，他们常说的一句话是— <em class="mf">“找到正确的用例”</em>。所以你需要一个保存状态的应用程序。</p><h1 id="6d76" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">用例</h1><p id="0019" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">我试图设计你在谷歌上输入“计算器”或“谷歌计算器”时找到的计算器。<a class="ae lb" href="https://simplegooglecalculator.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">下图是我开发的，点这里看。</a></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mg"><img src="../Images/a12f0fdf6200d30dc901af436277fe50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KCKWJnHUVS0SE9dAtzfQhw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Simple Google Calculator LookAlike</figcaption></figure><h2 id="f4c2" class="mh ld iq bd le mi mj dn li mk ml dp lm jy mm mn lq kc mo mp lu kg mq mr ly ms bi translated">它是如何工作的</h2><p id="5171" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">该计算器有“Ans”按钮来检索当前答案，它将答案保存在内存中，并在上部显示器上方显示操作数。可以用Ans回忆一下上一个答案，用。当你做计算时，你用结果或数学表达式代替答案。如果您按AC(全部清除)，您将清除所有内容，包括保存的答案。开始时，一旦您单击一个数字(操作数)或运算符，答案将更新为0。如果您进行计算，上显示屏会显示表达式，下显示屏会显示答案。</p><h2 id="09c1" class="mh ld iq bd le mi mj dn li mk ml dp lm jy mm mn lq kc mo mp lu kg mq mr ly ms bi translated">军事演习</h2><p id="b0a4" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">这就是Redux的用武之地。开始时，只要我们单击一个可点击的操作数/运算符，答案就会更新为0。当我们完成一个计算并单击“等于”时，我们更新答案并显示表达式。如果我们点击Ans按钮。我们将检索答案并在表达式中使用。如果我们单击一个新的操作数或运算符，我们将开始新的计算，但我们之前的答案仍会保存。因此，跟踪这种状态我认为可以用Redux来完成，我不认为这可能是最合适的用例，但这就是我所做的。因此，我们有三种状态——相等、操作和清除。</p><p id="140d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">要使用redux，我们必须安装它。你应该用npm create-react-app MY-APP创建你的应用，然后再用npm或yarn安装CRA (create-react-app)。并获得React绑定。</p><pre class="km kn ko kp gt mt mu mv mw aw mx bi"><span id="6a31" class="mh ld iq mu b gy my mz l na nb"><em class="mf">npm install redux</em> </span><span id="012f" class="mh ld iq mu b gy nc mz l na nb"><em class="mf">npm install react-redux</em></span></pre><p id="2268" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的动作和reducers是使用Redux的主要构件。这些都是函数。正常功能。只是建议使用纯函数。纯函数返回可预测的结果，并且没有可观察到的副作用。一个纯粹的函数不应该有导致我们的状态不可预测的副作用，比如访问数据库、运行计算，这些都不会带来相同的结果。然而，Redux Thunk解决了异步行为的问题。更多内容见最后的阅读清单。还有，见丹阿布拉莫夫的egghead视频教程的第三个视频。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/828841b7139766b31c2521d252b6c477.png" data-original-src="https://miro.medium.com/v2/resize:fit:796/format:webp/1*uR0ucwxt96g7fNXpJXUSAw.png"/></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Pure/Impure Functions</figcaption></figure><h1 id="8f03" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">采取行动，减少紧张</h1><p id="a3b0" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">因此，您的操作是将普通对象发送到Redux存储以供管理状态访问的函数。其中一个对象成员应该是可枚举类型。如存储、操作、清除。以下是计算器中使用的操作对象。每个动作描述了我们是否在做一个运算，用等于操作数或清除显示得到表达式的结果。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="d1ca" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Reducers是提供给Redux store的函数，Redux store根据发送的操作使用switch语句返回所需状态或默认状态。这是这个计算器的减速器。我们的动作被导入到减速器中。我们插入initialstate(取决于应用程序的逻辑)并创建存储。createstore方法也可以输入initialState。它需要第三个参数，可以是像Redux Thunk这样的中间件。如果您有多个reducer要跟踪，我们可以组合reducer并将其传递给createstore方法。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="5d83" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们转到需要redux的组件，并将存储的提供者提供给我们的组件。对于这个用例，计算器组件位于App.js中。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ne nf l"/></div></figure><p id="405a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在来看看计算器组件。下面找相关部分截图。它使用功能组件和挂钩。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ng"><img src="../Images/2948b2978c0382049499cd18374b7947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gVx4ODSUR1h8FED3fOGREA.png"/></div></div></figure><p id="e398" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于功能组件，我们需要useDispatch和useSelector挂钩。useDispatch将发送动作，这些动作将状态对象传递给我们的存储。选择器用于访问存储的状态。下面是我使用它们的地方。我用这个函数来添加操作数和运算符，我需要跟踪状态。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nh"><img src="../Images/8832b601c539ee65c9924c5478065109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TCzSPPSi1k3VdvJc4g1b4w.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">useDispatch Example</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ni"><img src="../Images/1fafbbc0c5dfc2d3b0666dca98fa786e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HtSeBQcBBHQR6eVIfHkv7Q.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Second Use Dispatch</figcaption></figure><p id="5b2b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当计算完成时，将发送对计算表达式的回答。使用交流电时，也会清理显示区域。</p><p id="9b1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">所以基本上，我们能够管理我们需要的三种状态。直觉告诉我这可以用普通的钩子来完成。为了学习，我必须编造一个用例。</p><p id="6df2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在下面找到我评估useSelector值的地方。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/3a4a6522b706f196750ac1d83d721ef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eZyrz2hVQFL1ePD31xkGmw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">useSelector Example</figcaption></figure><p id="2d64" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">useSelector返回状态对象。所以不要搞错了，在它周围打个[]。就像其他返回数组的钩子一样。像普通对象一样访问它。关于预载状态。在Redux文档中，他们讨论了preloadedState，其中应该给createStore方法一个preloadedState来设置初始状态。否则它将是未定义的。createStore有三个参数，reducer、preloadedState和enhancer。PreloadedState状态应为普通对象。例如，不要传入“initialState”而不是initialState()(除非您在某处声明了该函数，并且只是传递一个引用)，这是您返回普通对象的操作之一。然后，如果您没有给它一个preloadedState，useSelector将返回一个未定义的DefaultRootState。</p><p id="4c80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">即使在React中，Redux也可能不是状态管理中的银弹。Kent C Odds做了一个很好的使用上下文API的教程。React useContext钩子派上了用场，但是它们都有不同的设计模式。</p><p id="8f1a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管如此。这就是Redux所做的，它管理应用程序状态。这只是基本的。观看丹·阿布拉莫夫的视频了解更多信息。</p><p id="4214" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">来自专家:</p><ol class=""><li id="8d73" class="nk nl iq jp b jq jr ju jv jy nm kc nn kg no kk np nq nr ns bi translated">丹·阿布拉莫夫的视频，纯功能见视频3，其余为基本和<a class="ae lb" href="https://egghead.io/courses/building-react-applications-with-idiomatic-redux" rel="noopener ugc nofollow" target="_blank">高级还原</a>。</li><li id="a607" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated"><a class="ae lb" href="https://levelup.gitconnected.com/react-redux-hooks-useselector-and-usedispatch-f7d8c7f75cdd" rel="noopener ugc nofollow" target="_blank">雷纳多·雷诺索的</a>教程，是两本有意义的教程之一。</li><li id="88d0" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated"><a class="ae lb" href="https://www.taniarascia.com/redux-react-guide/" rel="noopener ugc nofollow" target="_blank"> Tania Rascia </a>是全面的指南，它包括中间件使用Redux thunk进行异步行为。</li><li id="864b" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">Kent C Odds(另一位React专家)建议我们“仅在道具钻探确实成为问题时使用上下文”。</li><li id="d368" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">埃比尼泽·唐认为我们都应该<a class="ae lb" href="https://blog.logrocket.com/use-hooks-and-context-not-react-and-redux/" rel="noopener ugc nofollow" target="_blank">“使用钩子+上下文，而不是React + Redux”。</a></li><li id="da53" class="nk nl iq jp b jq nt ju nu jy nv kc nw kg nx kk np nq nr ns bi translated">要用自定义钩子替换Redux，请参见J <a class="ae lb" href="https://medium.com/javascript-in-plain-english/replacing-redux-with-custom-react-hooks-for-state-management-5d04592fd6d7" rel="noopener"> olanta的</a>教程。</li></ol><p id="8062" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">与此同时，<a class="ae lb" href="https://simplegooglecalculator.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">计算器</a>正在研发中。这是回购的<a class="ae lb" href="https://github.com/tksilicon/simplegooglecalculator" rel="noopener ugc nofollow" target="_blank">路径</a>。</p><p id="d28b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mf">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mf">plain English . io</em></a></p></div></div>    
</body>
</html>
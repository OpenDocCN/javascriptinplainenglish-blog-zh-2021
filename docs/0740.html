<html>
<head>
<title>How to Add a Custom Google Map With React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何添加带有反应的自定义谷歌地图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-a-custom-google-map-with-react-faf009e4d2b5?source=collection_archive---------1-----------------------#2021-02-15">https://javascript.plainenglish.io/how-to-add-a-custom-google-map-with-react-faf009e4d2b5?source=collection_archive---------1-----------------------#2021-02-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="be3c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用create-react-app、react-google-maps-api和时髦的地图</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2ce8e32c5343dc318d7e89f4cd34efe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*S4eQKXGg_MkoyRAt"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@tabeadamm?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tabea Damm</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e78c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">地图是许多应用程序和网站的重要组成部分。谷歌地图无疑是目前最受欢迎的地图应用。我相信你熟悉标准的谷歌地图配色方案，如下图所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/0bcc89038a5bcc8612b6bfe3d607f45c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n664XobEZyhnEDWqt0sTkQ.png"/></div></div></figure><p id="a703" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我将教您如何将谷歌地图集成到您的反应应用程序中。我们也将使用时髦的地图添加一个自定义的配色方案到我们的地图。让我们从简单到时髦！</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ls"><img src="../Images/7d8a779e17975f02ee116b9495417306.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKhm2JDpbGGCYBoX1La7bg.png"/></div></div></figure><p id="2411" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们开始之前，您需要在谷歌云平台控制台中创建您自己的API密钥。如果您需要生成API密钥的帮助，请查看下面的视频。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lt lu l"/></div></figure><p id="2b9d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，您需要一个计费账户，但根据他们的<a class="ae kv" href="https://cloud.google.com/maps-platform/pricing" rel="noopener ugc nofollow" target="_blank">网站</a>、<em class="lv">“谷歌地图平台”提供地图、路线和地点每月200美元的免费积分(见</em>、<a class="ae kv" href="https://developers.google.com/maps/billing-credits?_ga=2.85320218.2020879006.1611550665-659157027.1592904480" rel="noopener ugc nofollow" target="_blank">、<em class="lv">计费账户积分</em>、</a>、<em class="lv">)。有了每月200美元的贷款，绝大多数客户发现他们的用例是完全免费的。除非您的每月用水量超过200美元，否则不会向您收费。”</em></p></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="3432" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">入门指南</h1><p id="ed97" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">一旦你有了API键，使用create-react-app生成一个新的React应用程序，并在你的文本编辑器中打开它。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="36d3" class="nf me iq nb b gy ng nh l ni nj">npx create-react-app YOUR-APP-NAME</span></pre><p id="f0b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在根文件夹中，创建一个<code class="fe nk nl nm nb b">.env.local</code>文件，并将您的应用编程接口密钥存储在那里。请记住，您的API密钥仍将嵌入到构建中并在客户端公开。请小心点。</p><p id="8aae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使用<code class="fe nk nl nm nb b">.env.local</code>文件中的API键，我们将变量命名如下。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="926c" class="nf me iq nb b gy ng nh l ni nj">REACT_APP_GOOGLE_MAPS_API_KEY="YOUR-API-KEY"</span></pre><h1 id="0080" class="md me iq bd mf mg nn mi mj mk no mm mn jw np jx mp jz nq ka mr kc nr kd mt mu bi translated">反应-谷歌-地图/应用编程接口</h1><p id="ca85" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">有一些不同的包，我们可以用来整合谷歌地图与反应；<code class="fe nk nl nm nb b">google-map-react</code> <code class="fe nk nl nm nb b">google-maps-react</code>和<code class="fe nk nl nm nb b">react-google-maps</code>是npm上下载最多的几个。在我们的示例中，我们将使用<code class="fe nk nl nm nb b">@react-google-maps/api</code>。这个<a class="ae kv" href="https://www.npmjs.com/package/@react-google-maps/api" rel="noopener ugc nofollow" target="_blank">包</a>是对react-google-maps库的重写。</p><div class="ns nt gp gr nu nv"><a href="https://react-google-maps-api-docs.netlify.app/" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">反应谷歌地图应用编程接口风格指南</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">编辑描述</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">reactor-Google-maps-API-docs . netlify . app</p></div></div></div></a></div><p id="7fac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，在您的项目中安装软件包。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="50cb" class="nf me iq nb b gy ng nh l ni nj">npm i @react-google-maps/api</span></pre><p id="c8f8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将使用库中的<code class="fe nk nl nm nb b">GoogleMap</code>组件和<code class="fe nk nl nm nb b">useLoadScript</code>钩子，所以将它们导入到<code class="fe nk nl nm nb b">App.js</code>文件中。</p><p id="9cfd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">调用应用程序组件顶部的<code class="fe nk nl nm nb b">useLoadScript</code>钩子，并将谷歌地图API键作为一个对象传递。要使用存储在<code class="fe nk nl nm nb b">.env.local</code>文件中的API密钥，请使用<code class="fe nk nl nm nb b">process.env.REACT_APP_GOOGLE_MAPS_API_KEY</code>。</p><p id="edc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个钩子会给我们返回一个<code class="fe nk nl nm nb b">isLoaded</code>和<code class="fe nk nl nm nb b">loadError</code>变量。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="984c" class="nf me iq nb b gy ng nh l ni nj">const { isLoaded, loadError } = useLoadScript({<br/>  googleMapsApiKey: process.env.REACT_APP_GOOGLE_MAPS_API_KEY<br/>});</span></pre><p id="f84e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用这两个变量，我们将进行检查，以确保地图已正确加载。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="32c2" class="nf me iq nb b gy ng nh l ni nj">if (loadError) return 'Error loading maps';<br/>if (!isLoaded) return 'Loading maps';</span></pre><p id="70dc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果地图加载正确，我们将使用一些道具返回<code class="fe nk nl nm nb b">GoogleMap</code>组件。首先，<code class="fe nk nl nm nb b">mapContainerStyle</code>设置地图容器的高度和宽度。您需要设置此属性，否则地图将不会显示。其次，我们将添加一个<code class="fe nk nl nm nb b">center</code>属性，传递一个具有<code class="fe nk nl nm nb b">lat</code>和<code class="fe nk nl nm nb b">lng</code>(纬度和经度)属性的对象。这将是最初的地图中心。我们将这些值设置为应用程序组件之外的变量。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="b9d5" class="nf me iq nb b gy ng nh l ni nj">const containerStyle = {<br/>  width: '100vw',<br/>  height: '100vh'<br/>};</span><span id="9842" class="nf me iq nb b gy oe nh l ni nj">const center = {<br/>  lat: 35.6804,<br/>  lng: 139.769<br/>};</span></pre><p id="d102" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三，我们将添加一个<code class="fe nk nl nm nb b">zoom</code>属性，用于设置缩放级别。在我们的示例中，我们将它设置为10。<code class="fe nk nl nm nb b">GoogleMap</code>组件将如下所示。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="198d" class="nf me iq nb b gy ng nh l ni nj">&lt;GoogleMap<br/>  mapContainerStyle={containerStyle}<br/>  center={center}<br/>  zoom={10}<br/>&gt;&lt;/GoogleMap&gt;</span></pre><p id="4556" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此时，您应该会在应用程序中看到一个基本的谷歌地图。</p><h1 id="5556" class="md me iq bd mf mg nn mi mj mk no mm mn jw np jx mp jz nq ka mr kc nr kd mt mu bi translated">添加时髦的地图配色方案</h1><p id="1a47" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">现在是有趣的部分！使用时髦的地图，我们可以为地图添加自定义配色方案。</p><p id="9823" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">时髦地图是谷歌地图不同风格的储存库。他们有数百种不同的配色方案供您选择，实施起来很容易。</p><p id="ab42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，访问他们的网站，找到你想要使用的配色方案。</p><div class="ns nt gp gr nu nv"><a href="https://snazzymaps.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">时髦的地图——谷歌地图的免费样式</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">时髦地图是针对网页设计师和开发者的谷歌地图不同配色方案的储存库。</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">snazzymaps.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nv"/></div></div></a></div><p id="ec38" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">找到所需的配色方案后，找到JavaScript Style Array并复制代码。在您的项目中，创建一个<code class="fe nk nl nm nb b">mapStyles.js</code>文件并添加样式作为导出。</p><p id="2b7b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想使用我的例子中的冰蓝色主题，你的<code class="fe nk nl nm nb b">mapsStyles.js</code>文件会是这样的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol lu l"/></div></figure><p id="fcba" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，将<code class="fe nk nl nm nb b">mapStyles</code>导入到<code class="fe nk nl nm nb b">App.js</code>文件中，并将其作为一个值添加到谷歌地图组件的选项属性中。</p><pre class="kg kh ki kj gt na nb nc nd aw ne bi"><span id="f578" class="nf me iq nb b gy ng nh l ni nj">const options = {<br/>  styles: mapStyles<br/>};</span></pre><p id="4315" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最终的<code class="fe nk nl nm nb b">App.js</code>文件应该是这样的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ol lu l"/></div></figure></div><div class="ab cl lw lx hu ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ij ik il im in"><h1 id="ac7a" class="md me iq bd mf mg mh mi mj mk ml mm mn jw mo jx mp jz mq ka mr kc ms kd mt mu bi translated">包扎</h1><p id="0bc7" class="pw-post-body-paragraph kw kx iq ky b kz mv jr lb lc mw ju le lf mx lh li lj my ll lm ln mz lp lq lr ij bi translated">谢谢你的阅读！你现在应该有一个谷歌地图显示在你的应用程序与你选择的颜色主题。享受配色方案，找到最适合您应用的方案。您也可以使用他们网站上的创建风格工具轻松创建您自己的时髦地图主题。</p><p id="34ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想让这个应用程序更上一层楼，您可以实现地理位置API来获取用户当前的纬度和经度坐标，并将其显示在地图上。查看下面的文章，了解如何做到这一点。</p><div class="ns nt gp gr nu nv"><a href="https://medium.com/javascript-in-plain-english/how-to-use-the-geolocation-api-in-your-react-app-54e87c9c6c94" rel="noopener follow" target="_blank"><div class="nw ab fo"><div class="nx ab ny cl cj nz"><h2 class="bd ir gy z fp oa fr fs ob fu fw ip bi translated">如何在React应用中使用地理定位API</h2><div class="oc l"><h3 class="bd b gy z fp oa fr fs ob fu fw dk translated">获取用户的坐标，并在下一个React应用中使用它们</h3></div><div class="od l"><p class="bd b dl z fp oa fr fs ob fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="om l oh oi oj of ok kp nv"/></div></div></a></div></div></div>    
</body>
</html>
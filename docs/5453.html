<html>
<head>
<title>Create WhatsApp clone with Next.js Part 14: Determine style of message bubble</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Next.js创建WhatsApp克隆第14部分:确定消息气泡的样式</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-whatsapp-clone-with-next-js-part-14-determine-style-of-message-bubble-96b1c39b9d65?source=collection_archive---------14-----------------------#2021-11-10">https://javascript.plainenglish.io/create-whatsapp-clone-with-next-js-part-14-determine-style-of-message-bubble-96b1c39b9d65?source=collection_archive---------14-----------------------#2021-11-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="3b0c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">基于我的消息或朋友的消息的气泡样式</h2></div><p id="5afc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在真实的WhatsApp中，我们可以看到接收者和发送者有不同的风格</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi lb"><img src="../Images/4cd4bdf9a65bcdddf60942268954d024.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*AE6mKPZh0EvYuxoYMhpp8A.png"/></div><figcaption class="lj lk gj gh gi ll lm bd b be z dk">example from real WhatsApp</figcaption></figure><p id="90fc" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以看到我的消息气泡是浅绿色的，消息尾部在右侧。对于消息，颜色为白色，消息尾部位于左侧。</p><p id="344a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们重点关注</p><ul class=""><li id="7ec1" class="ln lo iq kh b ki kj kl km ko lp ks lq kw lr la ls lt lu lv bi translated">确定消息是来自我自己还是来自朋友</li><li id="d832" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">添加消息尾部</li><li id="27bc" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">根据消息类型更改消息气泡的颜色。</li><li id="65ab" class="ln lo iq kh b ki lw kl lx ko ly ks lz kw ma la ls lt lu lv bi translated">添加时间戳</li></ul><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="mb mc l"/></div></figure><p id="d78c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae md" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww/join" rel="noopener ugc nofollow" target="_blank">源代码</a></p><h2 id="4ab8" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">消息颜色</h2><p id="6bae" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">我们添加<mymessage>组件和<frdmessage>组件。这两个组件都是基于<messagebubble>创建的。稍后，我们将根据消息是由我本人还是由朋友发送来呈现这些内容。</messagebubble></frdmessage></mymessage></p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="6098" class="me mf iq nd b gy nh ni l nj nk">const MyMessage = styled(MessageBubble)`</span><span id="c5c8" class="me mf iq nd b gy nl ni l nj nk">margin-left:auto;</span><span id="e0dc" class="me mf iq nd b gy nl ni l nj nk">background-color:#dcf8c6;</span><span id="e791" class="me mf iq nd b gy nl ni l nj nk">border-radius: 8px 0px 8px 8px;</span><span id="e2d6" class="me mf iq nd b gy nl ni l nj nk">`</span><span id="eb5b" class="me mf iq nd b gy nl ni l nj nk">const FrdMessage = styled(MessageBubble)`</span><span id="7f49" class="me mf iq nd b gy nl ni l nj nk">background-color: white;</span><span id="57c2" class="me mf iq nd b gy nl ni l nj nk">text-align: left;</span><span id="9c25" class="me mf iq nd b gy nl ni l nj nk">border-radius: 0px 8px 8px 8px;</span><span id="f79e" class="me mf iq nd b gy nl ni l nj nk">`;</span></pre><h2 id="9316" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">消息尾部</h2><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/9a99f11f287b876a8686e3d37c342dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:658/format:webp/1*606DS37wFrxReNoK8K-PIA.png"/></div></figure><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="c092" class="me mf iq nd b gy nh ni l nj nk">const MessageTail = styled.span`</span><span id="ce56" class="me mf iq nd b gy nl ni l nj nk">margin-top: -4px;</span><span id="a5df" class="me mf iq nd b gy nl ni l nj nk">;</span><span id="4a29" class="me mf iq nd b gy nl ni l nj nk">`</span></pre><h2 id="1b9d" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">我的消息或朋友的消息</h2><p id="1c46" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">由于我们还没有任何后端，我们让登录邮箱是“ckmobile@gmail.com”</p><p id="ba4a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后检查消息的所有者(用户电子邮件)是否等于loginMail。如果是，那么这是我的消息并返回<mymessage>，否则这是朋友的消息并返回<frdmessage>。</frdmessage></mymessage></p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="e584" class="me mf iq nd b gy nh ni l nj nk">import styled from 'styled-components';</span><span id="c491" class="me mf iq nd b gy nl ni l nj nk">const Message = ({ user, message }) =&gt; {</span><span id="a830" class="me mf iq nd b gy nl ni l nj nk">const loginMail = "ckmobile@gmail.com"</span><span id="6305" class="me mf iq nd b gy nl ni l nj nk">const MessageType = user === loginMail ? MyMessage : FrdMessage;</span><span id="ffe9" class="me mf iq nd b gy nl ni l nj nk">return (</span><span id="4b8d" class="me mf iq nd b gy nl ni l nj nk">&lt;Container&gt;</span><span id="235c" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">{(user !== loginMail) &amp;&amp; &lt;MessageTail &gt;</strong></span><span id="ae55" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;img src="/message-tail-frd.svg" /&gt;</strong></span><span id="8f2c" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/MessageTail&gt;}</strong></span><span id="c5be" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;MessageType&gt;</strong></span><span id="f57a" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">{message}</strong></span><span id="bb2e" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/MessageType&gt;</strong></span><span id="5bfd" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">{(user == loginMail) &amp;&amp; &lt;MessageTail &gt;</strong></span><span id="1554" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;img src="/message-tail-my.svg" /&gt;</strong></span><span id="7445" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">&lt;/MessageTail&gt;}</strong></span><span id="ab11" class="me mf iq nd b gy nl ni l nj nk">&lt;/Container&gt;</span><span id="c782" class="me mf iq nd b gy nl ni l nj nk">)</span><span id="1a12" class="me mf iq nd b gy nl ni l nj nk">}</span><span id="0fae" class="me mf iq nd b gy nl ni l nj nk">export default Message</span></pre><p id="ef57" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们将所有这些组合起来，如果不是我的消息，则返回指向左侧的消息尾(message-tail-frd.svg)，否则呈现指向右侧的消息尾(message-tail-my.svg)</p><p id="d810" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><messagetype>将决定消息的颜色。</messagetype></p><h2 id="535a" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">时间戳</h2><p id="6764" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">创建一个样式组件<timestamp>，灰色文本颜色，9px小字体。添加填充并将文本向右对齐。</timestamp></p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="32d7" class="me mf iq nd b gy nh ni l nj nk">const Timestamp = styled.span`</span><span id="fb17" class="me mf iq nd b gy nl ni l nj nk">color: gray;</span><span id="2181" class="me mf iq nd b gy nl ni l nj nk">padding: 10px;</span><span id="fec6" class="me mf iq nd b gy nl ni l nj nk">font-size: 9px;</span><span id="a12b" class="me mf iq nd b gy nl ni l nj nk">position: absolute;</span><span id="c3a8" class="me mf iq nd b gy nl ni l nj nk">bottom: 0;</span><span id="86a3" class="me mf iq nd b gy nl ni l nj nk">text-align: right;</span><span id="b1c2" class="me mf iq nd b gy nl ni l nj nk">right: 0;</span><span id="3745" class="me mf iq nd b gy nl ni l nj nk">`;</span></pre><p id="3e24" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在{消息}后添加<timestamp/></p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="4e5f" class="me mf iq nd b gy nh ni l nj nk">&lt;MessageType&gt;</span><span id="845e" class="me mf iq nd b gy nl ni l nj nk">{message}</span><span id="d576" class="me mf iq nd b gy nl ni l nj nk">&lt;Timestamp&gt;{ moment(timestamp).format('LT')}&lt;/Timestamp&gt;</span><span id="91ca" class="me mf iq nd b gy nl ni l nj nk">&lt;/MessageType&gt;</span></pre><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="no np di nq bf nr"><div class="gh gi nn"><img src="../Images/7deb324110715d16f8cf671d1e6321fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9pqoMB1p4wL26VuWhp9ZMw.png"/></div></div></figure><h2 id="e19a" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">快速修复用户界面</h2><p id="e771" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">在Layout.js中，将高度设置为90vh</p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="d91a" class="me mf iq nd b gy nh ni l nj nk">const Container = styled.div`</span><span id="fd68" class="me mf iq nd b gy nl ni l nj nk">display: flex;</span><span id="34aa" class="me mf iq nd b gy nl ni l nj nk">min-width:75vw;</span><span id="aa23" class="me mf iq nd b gy nl ni l nj nk">margin:auto;</span><span id="c01a" class="me mf iq nd b gy nl ni l nj nk">margin-top:30px;</span><span id="a8b2" class="me mf iq nd b gy nl ni l nj nk">margin-bottom: 20px;</span><span id="ca15" class="me mf iq nd b gy nl ni l nj nk">box-shadow: 0 0 1rem 0.05rem rgba(0, 0, 0, 0.2);</span><span id="87f8" class="me mf iq nd b gy nl ni l nj nk">height: 90vh;</span><span id="d940" class="me mf iq nd b gy nl ni l nj nk">@media  (max-width: 1000px) {</span><span id="d5b3" class="me mf iq nd b gy nl ni l nj nk">min-width:100vw;</span><span id="fcba" class="me mf iq nd b gy nl ni l nj nk">height:100vh;</span><span id="ac4a" class="me mf iq nd b gy nl ni l nj nk">margin:0;</span><span id="15ce" class="me mf iq nd b gy nl ni l nj nk">}</span><span id="4c60" class="me mf iq nd b gy nl ni l nj nk">`</span></pre><p id="c88e" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在[id]。js，改为max-height而不是height，并添加滚动条以防止消息溢出。</p><pre class="lc ld le lf gt nc nd ne nf aw ng bi"><span id="ae14" class="me mf iq nd b gy nh ni l nj nk">const ChatContainer = styled.div`</span><span id="08db" class="me mf iq nd b gy nl ni l nj nk">flex:1;</span><span id="08fa" class="me mf iq nd b gy nl ni l nj nk">overflow: scroll;</span><span id="2ac9" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">max-height: 100vh;</strong></span><span id="ffdf" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">::-webkit-scrollbar {</strong></span><span id="5370" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">display: none;</strong></span><span id="49bd" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">}</strong></span><span id="b5db" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">-ms-overflow-style: none; /* IE and Edge */</strong></span><span id="53c2" class="me mf iq nd b gy nl ni l nj nk"><strong class="nd ir">scrollbar-width: none; /* Firefox */</strong></span><span id="d72c" class="me mf iq nd b gy nl ni l nj nk">`</span></pre><h2 id="eb6c" class="me mf iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">关注我们:<a class="ae md" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad课程</a>，<a class="ae md" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae md" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae md" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae md" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae md" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae md" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a></h2></div><div class="ab cl ns nt hu nu" role="separator"><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx ny"/><span class="nv bw bk nw nx"/></div><div class="ij ik il im in"><p id="5b76" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nz">更多内容请看</em><a class="ae md" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
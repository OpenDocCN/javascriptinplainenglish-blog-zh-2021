<html>
<head>
<title>How to Measure JavaScript Execution Time</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何测量JavaScript执行时间</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-measure-javascript-execution-time-b3cabc5650bd?source=collection_archive---------14-----------------------#2021-07-01">https://javascript.plainenglish.io/how-to-measure-javascript-execution-time-b3cabc5650bd?source=collection_archive---------14-----------------------#2021-07-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/94149c979b978963102d68ed99954fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*AW9NFN2A4C0scwG5.jpg"/></div></div></figure><p id="de7d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当谈到应用程序的性能时，测量性能变得很重要。对于任何要优化的东西，都必须先测量，优化，再测量才能获得收益。因此，测量JavaScript执行时间就成了这些步骤之一。</p><p id="bf57" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现代浏览器和Node.js平台提供了各种API来测量代码执行时间。</p><p id="4f8f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这篇文章中，我们将讨论几种测量JavaScript执行时间的方法。</p><h1 id="0528" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1.日期对象</h1><p id="246b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">跟踪执行时间最简单的方法是使用date对象。使用返回自Unix epoch以来经过的总毫秒数的<code class="fe lw lx ly lz b">Date.now()</code>,我们可以存储要测量的函数执行前后的值，然后获得两者的差值。</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="a2ff" class="mi ku in lz b gy mj mk l ml mm">const start = Date.now();<br/> <br/>await functionToBeMeasured();</span><span id="32ab" class="mi ku in lz b gy mn mk l ml mm">const end = Date.now();<br/>console.log(`Execution time: ${end - start} ms`);</span></pre><h1 id="e8c0" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2.控制台时间</h1><p id="657b" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">另一个简单的解决方案是使用控制台定时器。方法用一个标签启动一个定时器。随后使用相同的标签调用<code class="fe lw lx ly lz b">console.timeEnd()</code>方法将输出自该方法启动以来经过的时间。</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="f99c" class="mi ku in lz b gy mj mk l ml mm">console.time('Execution Time');<br/> <br/>await functionToBeMeasured();</span><span id="d1a6" class="mi ku in lz b gy mn mk l ml mm">console.timeEnd('Execution Time');</span></pre><h1 id="88bf" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3.性能计时器</h1><p id="a2c5" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">控制台定时器不提供高精度。如果我们想要1毫秒增量的精度，我们可以使用像<code class="fe lw lx ly lz b">performance.now()</code>这样的高分辨率计时器。它还避免了一些与系统时钟的同步问题。</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="4951" class="mi ku in lz b gy mj mk l ml mm">const start = performance.now();<br/> <br/>await functionToBeMeasured();</span><span id="1b13" class="mi ku in lz b gy mn mk l ml mm">const end = performance.now();<br/>console.log(`Execution time: ${end - start} ms`);</span></pre><p id="676d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注:</strong>如果以节点为单位测量，<code class="fe lw lx ly lz b">process.hrtime.bigint()</code>返回以纳秒为单位的精度。</p><p id="9baf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这涵盖了测量JavaScript执行时间的方法。如果我们想开始测量多个函数的JavaScript执行时间，我们可以利用Performance API和<a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Web/API/PerformanceObserver" rel="noopener ugc nofollow" target="_blank"> Performance Observer </a>。它们提供标记来跟踪多个条目并独立地测量它们。</p><h1 id="1cd1" class="kt ku in bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">在单元测试中测量JavaScript执行时间</h1><p id="0d06" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">为了确保函数的执行足够快，它可以成为我们单元测试的一部分。很多框架(Jest，Jasmine等。)允许设置测试执行的超时时间。如果方法需要更长的时间来执行，那么超时特性可以用来使测试失败。</p><p id="5716" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了茉莉:</p><pre class="ma mb mc md gt me lz mf mg aw mh bi"><span id="34a1" class="mi ku in lz b gy mj mk l ml mm">describe('testing time duration', () =&gt; {<br/>  it('does not take longer than 5 seconds', async () =&gt; {<br/>    await functionToBeMeasured();<br/>  }, 5000);<br/>});</span></pre></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><p id="7964" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mw">原载于2021年7月1日https://www.wisdomgeek.com</em><a class="ae mo" href="https://www.wisdomgeek.com/development/web-development/javascript/measuring-javascript-execution-time/" rel="noopener ugc nofollow" target="_blank"><em class="mw"/></a><em class="mw">。</em></p><p id="8242" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mw">更多内容看</em> <a class="ae mo" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mw">说白了. io </em> </strong> </a> <strong class="jx io"> <em class="mw">。</em> </strong> <em class="mw">报名参加我们的</em> <a class="ae mo" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mw">免费每周简讯点击这里</em> </strong> </a> <strong class="jx io"> <em class="mw">。</em> </strong></p></div></div>    
</body>
</html>
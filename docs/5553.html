<html>
<head>
<title>How to Create a useForm Hook with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用React创建一个useForm钩子</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-a-useform-hook-with-react-bd183a54890e?source=collection_archive---------4-----------------------#2021-11-18">https://javascript.plainenglish.io/how-to-create-a-useform-hook-with-react-bd183a54890e?source=collection_archive---------4-----------------------#2021-11-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="45e7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">彻底简化表单处理</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9f4b27f8756ebbdb425f57ead0138948.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1e7pUdD8bsIi0Y0ruX1-uA.png"/></div></div></figure><p id="f4a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">作为一名前端开发人员，您知道使用表单可能有点令人头疼。在这篇文章中，我们将介绍如何创建一个钩子来简化应用程序中的表单处理。</p><p id="b808" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用<a class="ae ln" href="https://reactjs.org/docs/forms.html" rel="noopener ugc nofollow" target="_blank">控制的组件</a>来管理表单状态，所以请随意复习一下。</p><h1 id="78bd" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">目标</h1><p id="a109" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们的目标是抽象出创建表单的重复部分。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/256f3e9705e9c2b96788da345261f52d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DpVb2AcNgt9iAoz2YqL_Zw.png"/></div></div></figure><p id="d8e9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">钩子允许我们快速创建一个新的表单组件，方法是接受一个配置数组并免费提供给我们以下内容:</p><ul class=""><li id="1ce7" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">数据—包含用户输入数据的对象。</li><li id="39ec" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">输入—预先设置事件处理的输入字段。</li></ul><p id="badc" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想玩一个表单的例子，你可以<a class="ae ln" href="https://codesandbox.io/s/useform-example-ozoh6?file=/src/App.js" rel="noopener ugc nofollow" target="_blank">查看实时沙盒。</a></p><h1 id="5aa6" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">目录</h1><p id="7566" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们马上就要开始了，所以如果你在任何地方迷路了，我会列出一个路线图来帮助你。</p><ul class=""><li id="56e9" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">创建配置阵列</li><li id="e781" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">创建新的输入组件</li><li id="a088" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">构建使用表单挂钩</li><li id="4366" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">使用形式(全钩)</li><li id="aac1" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">用钩子做一个样板</li><li id="5aef" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">需要改进的地方</li></ul><h1 id="ac77" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">创建配置阵列</h1><p id="7dc7" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">要使用钩子，唯一需要的参数是配置数组——但是我们要配置什么呢？</p><p id="ab2e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">表单只是由输入组成。因此，我们需要传递为每个输入字段设置属性所需的信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="0759" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">钩子应该给我们4个输入:</p><ul class=""><li id="4979" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">名称—文本字段</li><li id="ca7a" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">级别—选择菜单</li><li id="7625" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">纸张编号—选择菜单</li><li id="13cb" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">日期—日期选择器</li></ul><h1 id="9821" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">创建新的输入组件</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/75d80bd42b564f10ea4de5934e421d17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQkm1KrYmhTIrgsiv3WQbA.png"/></div></div></figure><p id="3340" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">原生的<a class="ae ln" href="https://www.w3schools.com/html/html_form_input_types.asp" rel="noopener ugc nofollow" target="_blank"> html输入标签</a>允许我们选择不同的输入类型，比如:文本、数字、日期、时间等等。然而，如果你需要一个下拉菜单，你需要一个<a class="ae ln" href="https://www.w3schools.com/tags/tag_select.asp" rel="noopener ugc nofollow" target="_blank">选择标签</a>。</p><p id="8e1d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们制作新的<code class="fe nc nd ne nf b">Input</code>组件，它可以根据给定的props类型呈现输入或选择。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="329f" class="ng lp iq bd lq nh ni dn lu nj nk dp ly la nl nm ma le nn no mc li np nq me nr bi translated">选择并输入字段组件</h2><p id="f505" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">新的Input组件应该呈现HTML input元素，并且已经有了事件处理和其他属性。为此，我们将读入属性作为道具，并将它们放在Select和InputField组件的输入元素上。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="e3b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><code class="fe nc nd ne nf b">Select</code>组件非常相似，但是它将接受一个下拉菜单选项数组，并创建一个选项元素列表。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="1901" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">构建使用表单挂钩</h1><h2 id="ebb5" class="ng lp iq bd lq nh ni dn lu nj nk dp ly la nl nm ma le nn no mc li np nq me nr bi translated">初始化数据</h2><p id="e380" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我们需要做的第一件事是使用useState钩子初始化我们的数据对象。</p><ul class=""><li id="9095" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated">创建空对象initialData</li><li id="7af9" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated">遍历配置数组中的每个输入，并根据输入名将空字符串分配给一个新的键</li></ul><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="ca9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">初始数据对象应该是这样的:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ml"><img src="../Images/2b63e5fa0ee66ac18210b5a691bc2376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_I-s0rjWydIbRYD2uBhAPw.png"/></div></div></figure><h2 id="1c0b" class="ng lp iq bd lq nh ni dn lu nj nk dp ly la nl nm ma le nn no mc li np nq me nr bi translated">更新密钥更改的数据</h2><p id="176c" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">该功能将传递给每个<code class="fe nc nd ne nf b">Input</code>。它根据输入名称更新存储在数据中的值。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h2 id="2ccb" class="ng lp iq bd lq nh ni dn lu nj nk dp ly la nl nm ma le nn no mc li np nq me nr bi translated">创建输入</h2><p id="36fd" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在我们映射config数组中的输入配置，并将它们与handleChange函数和值一起应用到<code class="fe nc nd ne nf b">Input</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="4e02" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">使用形式</h1><p id="bfae" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">完整的情况如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><h1 id="cc0c" class="lo lp iq bd lq lr ls lt lu lv lw lx ly jw lz jx ma jz mb ka mc kc md kd me mf bi translated">用钩子做一个样板</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ns"><img src="../Images/e9efde8be8d47aa23893815737e45f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F06ihNrQevohFCUX6_t1Ng.png"/></div></div></figure><p id="721d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用钩子非常简单，你需要做的就是插入你的配置数组。</p><p id="87f3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后，您可以在表单元素中放置输入。最后，您可以通过使用数据对象将信息发送到任何您想要的地方——我将在提交时简单地将它记录到控制台。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="na nb l"/></div></figure><p id="b054" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">您可以根据需要更改handleSubmit。还有很大的改进空间，比如添加表单验证等等——但我希望这足以让您入门:)</p></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="5ace" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">嗨，感谢阅读！我是一名前端开发人员，在加拿大攻读GATech的计算机科学硕士学位。</p><p id="da72" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">请随时在LinkedIn #ONO上与我联系</p><div class="oa ob gp gr oc od"><a href="https://www.linkedin.com/in/jovanmedfordwebdev/" rel="noopener  ugc nofollow" target="_blank"><div class="oe ab fo"><div class="of ab og cl cj oh"><h2 class="bd ir gy z fp oi fr fs oj fu fw ip bi translated">约万·梅德福德—佐治亚理工学院—加拿大| LinkedIn</h2><div class="ok l"><h3 class="bd b gy z fp oi fr fs oj fu fw dk translated">我喜欢设计和制造漂亮的产品，用起来是一种享受。作为一名设计师，我可以为现代和…</h3></div><div class="ol l"><p class="bd b dl z fp oi fr fs oj fu fw dk translated">www.linkedin.com</p></div></div><div class="om l"><div class="on l oo op oq om or kp od"/></div></div></a></div></div><div class="ab cl nt nu hu nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="ij ik il im in"><p id="3eef" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">资源</p><ul class=""><li id="4cac" class="mm mn iq kt b ku kv kx ky la mo le mp li mq lm mr ms mt mu bi translated"><a class="ae ln" href="https://academind.com/tutorials/reactjs-a-custom-useform-hook" rel="noopener ugc nofollow" target="_blank">https://academind . com/tutorials/react js-a-custom-use form-hook</a></li><li id="2ded" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated"><a class="ae ln" href="https://dev.to/sevenzark/why-you-should-be-writing-react-custom-hooks-5egl#:~:text=Custom%20hooks%20are%20a%20handy,a%20super%2Dpowered%20helper%20function" rel="noopener ugc nofollow" target="_blank">https://dev . to/seven zark/why-you-should-writing-react-Custom-hooks-5egl #:~:text = Custom % 20 hooks % 20 are % 20a % 20 handy，a % 20 super % 2d powered % 20 helper % 20 function</a>。</li><li id="2639" class="mm mn iq kt b ku mv kx mw la mx le my li mz lm mr ms mt mu bi translated"><a class="ae ln" href="https://reactjs.org/docs/forms.html" rel="noopener ugc nofollow" target="_blank">https://reactjs.org/docs/forms.html</a></li></ul><p id="bc12" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="os">更多内容请看</em><a class="ae ln" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="os">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
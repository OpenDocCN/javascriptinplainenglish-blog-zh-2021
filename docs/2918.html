<html>
<head>
<title>Advanced TypeScript: A Generic Function to Merge Object Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é«˜çº§ç±»å‹è„šæœ¬:åˆå¹¶å¯¹è±¡æ•°ç»„çš„é€šç”¨å‡½æ•°</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/advanced-typescript-a-generic-function-to-merge-object-arrays-cb0bd9a5c382?source=collection_archive---------9-----------------------#2021-06-14">https://javascript.plainenglish.io/advanced-typescript-a-generic-function-to-merge-object-arrays-cb0bd9a5c382?source=collection_archive---------9-----------------------#2021-06-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="a408" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">SaaSäº§å“æ¡£æ¡ˆä¸­çš„å¦ä¸€ä¸ªå¼ºå¤§çš„é€šç”¨åŠŸèƒ½ã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7f07c28a360a8237c93e97ac65f550d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eSPjWyGGYkOpse4gOrq2cw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The mergeArrays function weâ€™ll be building.</figcaption></figure><p id="57be" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><a class="ae lo" href="https://chrisfrew.in/blog/advanced-typescript-generic-array-merging/" rel="noopener ugc nofollow" target="_blank"> <em class="lp">è¿™ç¯‡æ–‡ç« åæ˜ åœ¨æˆ‘çš„åšå®¢chrisfrew.in </em> </a></p><h1 id="5368" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">TypeScriptæ³›å‹ç–¯ç‹‚ï¼</h1><p id="d3ce" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">æˆ‘å°±æ˜¯æ— æ³•åœæ­¢ç¼–å†™è¿™äº›é€šç”¨å‡½æ•°ï¼è¿™æ˜¯ç»§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« <a class="ae lo" href="https://dev.to/blog/advanced-typescript-a-generic-function-to-update-and-manipulate-object-arrays/" rel="noopener ugc nofollow" target="_blank">ä¹‹åçš„åˆä¸€ä¸ªå¼ºå¤§çš„é€šç”¨å‡½æ•°ï¼Œæ„å»ºä¸€ä¸ªé€šç”¨å‡½æ•°æ¥æ ¹æ®ç‰¹å®šçš„æµ‹è¯•å€¼</a>æ›´æ–°ç‰¹å®šé”®å¤„çš„æ•°ç»„ã€‚å½“æˆ‘è¯•å›¾ä¸º<a class="ae lo" href="https://reduxplate.com/" rel="noopener ugc nofollow" target="_blank"> ReduxPlate </a>ç»´æŠ¤å°½å¯èƒ½å¹²å‡€çš„ä»£ç åº“æ—¶ï¼Œæˆ‘ç»§ç»­ä¸ºè¿™äº›æ˜“äºä½¿ç”¨ä½†åŠŸèƒ½å¼ºå¤§çš„é€šç”¨å‡½æ•°å¯»æ‰¾æ–°çš„ç”¨ä¾‹ã€‚</p><h1 id="9132" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">åŠ¨æœº</h1><p id="7e53" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">é€šå¸¸ï¼Œåœ¨è¿›è¡ŒçŠ¶æ€ä¿®æ”¹æ—¶ï¼Œæ‚¨å¸Œæœ›å°†ä»APIæˆ–å…¶ä»–æ¥æºè·å¾—çš„ä¸€äº›å±æ€§åˆå¹¶æˆ–æ·»åŠ åˆ°å¯¹è±¡ä¸­ã€‚æ‚¨<strong class="ku io">å¯ä»¥</strong>ä¸ºæ‚¨æƒ³è¦æ›´æ–°çš„é”®æ˜¾å¼ç¼–å†™é”®/å€¼åˆ†é…â€¦æˆ–è€…æ‚¨å¯ä»¥åˆ©ç”¨JavaScriptçš„å†…ç½®<code class="fe mn mo mp mq b">Object.assign</code>å‡½æ•°å’ŒTypeScriptçš„é€šç”¨åŠŸèƒ½ï¼Œåªä¸ºæ‚¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­éœ€è¦çš„æ‰€æœ‰åˆå¹¶æ“ä½œç¼–å†™ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°ï¼ğŸ˜„</p><p id="634f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä¾‹å¦‚ï¼Œåœ¨ReduxPlateä¸­ï¼Œæˆ‘æœ‰ä¸¤ç§ç±»å‹ï¼Œ<code class="fe mn mo mp mq b">IFile</code>å’Œ<code class="fe mn mo mp mq b">IEditorSettings</code>:</p><p id="39d8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><code class="fe mn mo mp mq b">IFile</code>:</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="a5d1" class="mv lr in mq b gy mw mx l my mz">export default interface IFile {<br/>    fileLabel: string<br/>    code: string<br/>}</span></pre><p id="e357" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><code class="fe mn mo mp mq b">IEditorSettings</code>:</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="6965" class="mv lr in mq b gy mw mx l my mz">export default interface IEditorSettings extends IFile {<br/>  isActive: boolean<br/>}</span></pre><p id="7a04" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><code class="fe mn mo mp mq b">IEditorSettings</code>æ‰©å±•äº†<code class="fe mn mo mp mq b">IFile</code>ï¼Œå¹¶ä¸”åªæœ‰ä¸€ä¸ªé¢å¤–çš„å±æ€§:<code class="fe mn mo mp mq b">isActive</code>ã€‚å½“è®¿é—®è€…ç‚¹å‡»â€œç”Ÿæˆï¼â€æŒ‰é’®æ—¶ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„å“åº”è¿”å›ç±»å‹ä¸º<code class="fe mn mo mp mq b">IFile</code>è€Œä¸æ˜¯<code class="fe mn mo mp mq b">IEditorSettings</code>çš„å¯¹è±¡æ•°ç»„ï¼Œå› ä¸ºæœåŠ¡å™¨ä¸å…³å¿ƒ<code class="fe mn mo mp mq b">isActive</code>å±æ€§ã€‚<code class="fe mn mo mp mq b">isActive</code>ä»…æ¶‰åŠç”¨äºæ˜¾ç¤ºç›®çš„çš„å‰ç«¯ã€‚ç„¶åæˆ‘å°†<code class="fe mn mo mp mq b">IFile</code>æ•°ç»„åˆå¹¶åˆ°ç°æœ‰çš„<code class="fe mn mo mp mq b">IEditorSettings</code>æ•°ç»„ä¸­ï¼Œåœ¨ä¸ä¿®æ”¹<code class="fe mn mo mp mq b">isActive</code>ç°æœ‰å€¼çš„æƒ…å†µä¸‹æ›´æ–°ä»£ç ã€‚è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘æ˜¯å¦‚ä½•ç¼–å†™è¿™ä¸ªåŠŸèƒ½çš„ç¬¬ä¸€æ¬¡è¿­ä»£ã€‚</p><h1 id="611e" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">å¤©çœŸçš„å®æ–½</h1><p id="b558" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ä¸€ä¸ªåˆå§‹çš„å®ç°å¯ä»¥è¶³å¤Ÿå¿«åœ°ç»„è£…èµ·æ¥ã€‚<code class="fe mn mo mp mq b">fileLabel</code>ä½œä¸ºä¸€ä¸ªé”®ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸Šé¢æ¯”è¾ƒæˆ‘ä»¬çš„å¯¹è±¡ã€‚ç„¶åï¼Œæˆ‘ç”¨åŒ¹é…æ–‡ä»¶è¿”å›çš„<code class="fe mn mo mp mq b">match.code</code>å€¼æ›¿æ¢<code class="fe mn mo mp mq b">editorSetting.code</code>çš„å€¼(å¦‚æœæ‰¾åˆ°åŒ¹é…çš„è¯):</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="59dc" class="mv lr in mq b gy mw mx l my mz">const editorSettings = useState(...) // existing object array of IEditorSettings, stateful<br/>const files = &lt;&lt;API fetch code here&gt;&gt; // array of IFile returned by API<br/>...<br/>editorSettings.map(editorSetting =&gt; {<br/>  const match = files.find(<br/>    file =&gt; file.fileLabel === editorSetting.fileLabel<br/>  )<br/>  if (match) {<br/>    editorSetting.code = match.code<br/>  }<br/>  return editorSetting<br/>})</span></pre><p id="3035" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¦‚æœåé¢æœ‰æ›´å¤šå±æ€§å†…ç½®åˆ°<code class="fe mn mo mp mq b">IFile</code>é‡Œæ€ä¹ˆåŠï¼Ÿä¹Ÿè®¸æ˜¯æ¯ä¸ªæ–‡ä»¶ä¸Šçš„ä¸€ç³»åˆ—å¯¼å…¥æˆ–è­¦å‘Šï¼Ÿè¿™äº›ä¹Ÿæ˜¯æˆ‘ä»¬æƒ³è¦åˆå¹¶åˆ°ç°æœ‰çŠ¶æ€ä¸­çš„å±æ€§ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥å°†è¿™äº›å±æ€§æ·»åŠ åˆ°<code class="fe mn mo mp mq b">IFile</code>ä¸­ï¼Œè€Œä¸å¿…æ‰‹åŠ¨ç¼–è¾‘ä¸Šé¢çš„<code class="fe mn mo mp mq b">if</code>å—ä¸­çš„ä»£ç ï¼Œé‚£å°±æœ€å¥½äº†ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé€šç”¨çš„utilå‡½æ•°æ¥ä¸º<em class="lp">ä»»ä½•</em>ä¸¤ä¸ªç›¸å…³ç±»å‹çš„å¯¹è±¡æ•°ç»„å®Œæˆåˆå¹¶ä»»åŠ¡ã€‚</p><h1 id="2c5c" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">é€šç”¨ç±»å‹</h1><p id="bde3" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">è®©æˆ‘ä»¬å‡è®¾æœ‰ä¸€äº›ç±»å‹ä¸º<code class="fe mn mo mp mq b">T</code>çš„å¯¹è±¡ï¼Œå’Œä¸€äº›æ›´å¤æ‚çš„å¯¹è±¡ç±»å‹<code class="fe mn mo mp mq b">U</code>ï¼Œå…¶ä¸­<code class="fe mn mo mp mq b">U extends T</code>ã€‚æˆ‘ä»¬å¸Œæœ›å°†ç±»å‹ä¸º<code class="fe mn mo mp mq b">T</code>çš„å¯¹è±¡æ•°ç»„åˆå¹¶åˆ°ç±»å‹ä¸º<code class="fe mn mo mp mq b">U</code>çš„æ›´å¤æ‚çš„å¯¹è±¡æ•°ç»„ä¸­ï¼Œå¹¶è¿”å›ç±»å‹ä¸º<code class="fe mn mo mp mq b">U</code>çš„æ–°æ•°ç»„ã€‚æˆ‘ä»¬ä¸å¿…å‡è®¾è¿™äº›æ•°ç»„æ˜¯æœ‰ç»„ç»‡çš„ï¼Œæˆ–è€…é•¿åº¦ç›¸åŒã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿åœ¨æŸç§ç±»å‹çš„<code class="fe mn mo mp mq b">matchKey</code>ä¸Šåˆå¹¶é€‚å½“çš„å¯¹è±¡ï¼Œè¿™å¿…é¡»æ˜¯<code class="fe mn mo mp mq b">keyof T</code>ï¼Œå› ä¸º<code class="fe mn mo mp mq b">U</code>ä¸­çš„ä¸€äº›é”®å¯èƒ½åœ¨<code class="fe mn mo mp mq b">T</code>ä¸­ä¸å­˜åœ¨ã€‚å®šä¹‰äº†<code class="fe mn mo mp mq b">matchKey</code>ä¹‹åï¼Œæˆ‘ä»¬åº”è¯¥åªéœ€è¦å¦å¤–ä¸¤ä¸ªæ•°ç»„ï¼Œç°æœ‰æ•°ç»„å’Œä¼ å…¥æ•°ç»„ï¼Œæ¥å®šä¹‰è¿™ä¸ªå‡½æ•°çš„ç­¾å:</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="154d" class="mv lr in mq b gy mw mx l my mz">export const mergeArrays = &lt;T, U extends T&gt;(params: {<br/>  mergeArray: Array&lt;T&gt;<br/>  existingArray: Array&lt;U&gt;<br/>  matchKey: keyof T<br/>}): Array&lt;U&gt;</span></pre><p id="2bc8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">è¿™é‡Œæˆ‘åƒåœ¨<a class="ae lo" href="https://dev.to/snippets/#updateArray" rel="noopener ugc nofollow" target="_blank"> updateArray </a>å‡½æ•°ä¸­ä¸€æ ·åˆ©ç”¨äº†<code class="fe mn mo mp mq b">params</code>æ¨¡å¼ï¼Œå› ä¸ºå®ƒä½¿å¾—è°ƒç”¨ä»£ç æ›´å®¹æ˜“é˜…è¯»ã€‚</p><h1 id="ac25" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">å±¥è¡Œ</h1><p id="0f3c" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">æˆ‘ä»¬å¯ä»¥ä»<code class="fe mn mo mp mq b">params</code>å¯¹è±¡ä¸­æå–æ‰€æœ‰çš„å‚æ•°ã€‚ç„¶åï¼Œæˆ‘ä»¬éå†ç°æœ‰çš„æ•°ç»„ï¼Œè¯•å›¾åœ¨<code class="fe mn mo mp mq b">matchKey</code>ä¸Šæ‰¾åˆ°ä¸€ä¸ªåŒ¹é…ã€‚å¦‚æœè¿™æ ·åšï¼Œæˆ‘ä»¬å°†æŠŠåŒ¹é…å¯¹è±¡ä¸­çš„æ‰€æœ‰å€¼èµ‹ç»™ç°æœ‰å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰ï¼Œæˆ‘ä»¬åªéœ€é€šè¿‡è¿”å›æ¥ä¿ç•™ç°æœ‰çš„é¡¹ç›®:</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="540b" class="mv lr in mq b gy mw mx l my mz">const { mergeArray, existingArray, matchKey } = params<br/>return existingArray.map(existingItem =&gt; {<br/>  const match = mergeArray.find(<br/>    mergeItem =&gt; mergeItem[matchKey] === existingItem[matchKey]<br/>  )<br/>  if (match) {<br/>    return Object.assign(existingItem, match)<br/>  }<br/>  return existingItem<br/>})</span></pre><h1 id="e66f" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">å†³èµ›æˆç»©</h1><p id="6c0c" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ç»“åˆå‡½æ•°ç­¾åå’Œä¸»ä½“ï¼Œæˆ‘å‘æ‚¨å±•ç¤º<code class="fe mn mo mp mq b">mergeArrays</code>å®ç”¨å‡½æ•°:</p><pre class="kd ke kf kg gt mr mq ms mt aw mu bi"><span id="0c25" class="mv lr in mq b gy mw mx l my mz">export const mergeArrays = &lt;T, U extends T&gt;(params: {<br/>  mergeArray: Array&lt;T&gt;<br/>  existingArray: Array&lt;U&gt;<br/>  matchKey: keyof T<br/>}): Array&lt;U&gt; =&gt; {<br/>  const { mergeArray, existingArray, matchKey } = params<br/>  return existingArray.map(existingItem =&gt; {<br/>    const match = mergeArray.find(<br/>      mergeItem =&gt; mergeItem[matchKey] === existingItem[matchKey]<br/>    )<br/>    if (match) {<br/>      return Object.assign(existingItem, match)<br/>    }<br/>    return existingItem<br/>  })<br/>}</span></pre><h1 id="e2c8" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">è°¢è°¢ï¼</h1><p id="3db1" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ä¸€å¦‚æ—¢å¾€ï¼Œæ„Ÿè°¢é˜…è¯»ï¼Œæ•¬è¯·å…³æ³¨ğŸ“»â€”å°†ä¼šæœ‰æ›´å¤šè¿™äº›å¼ºå¤§çš„é€šç”¨å‡½æ•°å‡ºç°ï¼ç»“åˆæˆ‘çš„<a class="ae lo" href="https://dev.to/blog/react-typescript-generic-search-sort-and-filters/" rel="noopener ugc nofollow" target="_blank">é€šç”¨æœç´¢ã€æ’åºå’Œè¿‡æ»¤åŠŸèƒ½</a>â€”â€”ä»¥åŠæˆ‘è—åœ¨å…¶ä»–é¡¹ç›®ä»£ç ä¸­çš„ä¸€äº›å…¶ä»–ç§˜å¯†å¥½ä¸œè¥¿â€”â€”æˆ‘æƒ³æˆ‘ä¼šå‡ºç‰ˆæŸç§â€œé«˜çº§ç±»å‹è„šæœ¬é£Ÿè°±â€ğŸ“˜é‚£åŒ…æ‹¬ä»–ä»¬æ‰€æœ‰äººï¼</p><p id="4b48" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¹²æ¯ï¼ğŸ»</p><p id="2a21" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å…‹è‰ä¸</p><p id="e7c4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lp">æ›´å¤šå†…å®¹å°½åœ¨</em><a class="ae lo" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T5ã€‘plain English . ioT7ã€‘</a></p></div></div>    
</body>
</html>
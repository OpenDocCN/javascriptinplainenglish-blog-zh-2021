<html>
<head>
<title>Log In with Google in a React Native Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React本地应用程序中使用Google登录</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/log-in-with-google-in-react-native-application-3aaa519f5df8?source=collection_archive---------6-----------------------#2021-08-11">https://javascript.plainenglish.io/log-in-with-google-in-react-native-application-3aaa519f5df8?source=collection_archive---------6-----------------------#2021-08-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="fd1d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何在React Native中使用Firebase Auth登录Google</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9d6befd0006fa2e4de5079346c08536f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y6CmkVPnHFeivrqtZkH1wg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@rmrdnl?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Daniel Romero</a> on <a class="ae kv" href="https://unsplash.com/s/photos/google?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇文章中，我将带你通过5个简单的步骤在你的React本地应用程序中添加Google Auth。我们将在应用程序中使用Firebase Auth，并在其中启用<strong class="ky ir"> Google Sign In </strong>选项。</p><h1 id="77b3" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">先决条件</h1><p id="7b07" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">我假设您已经添加了React本地项目设置和Firebase <strong class="ky ir"> app </strong>模块。如果您没有添加Firebase应用程序模块，您可以按照这里的入门指南进行设置。</p><div class="mp mq gp gr mr ms"><a href="https://rnfirebase.io/" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">反应天然燃料|反应天然燃料</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">欢迎反应原生火焰基！要开始，您必须首先设置一个Firebase项目并安装“app”模块…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">rnfirebase.io</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng kp ms"/></div></div></a></div><h1 id="6eb4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">步骤1:安装NPM软件包</h1><p id="4378" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">首先，我们需要安装<a class="ae kv" href="https://rnfirebase.io/auth/usage" rel="noopener ugc nofollow" target="_blank"> Firebase Auth </a>包和<a class="ae kv" href="https://github.com/react-native-google-signin/google-signin#project-setup-and-initialization" rel="noopener ugc nofollow" target="_blank"> Google Sign In </a>包。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="4540" class="nm lt iq ni b gy nn no l np nq">yarn add @react-native-firebase/auth<br/>yarn add @react-native-google-signin/google-signin</span></pre><p id="e1c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，如果您也在为iOS开发，请进行pod安装。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="9718" class="nm lt iq ni b gy nn no l np nq">cd ios/ &amp;&amp; pod install</span></pre><h2 id="cf78" class="nm lt iq bd lu nr ns dn ly nt nu dp mc lf nv nw me lj nx ny mg ln nz oa mi ob bi translated">步骤2:在Firebase项目中启用Google登录</h2><p id="e206" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">接下来，转到Firebase控制台，在Authentication &gt; Sign-in method下启用Google Login。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oc"><img src="../Images/354d417a578ade53645d765ef74a2c88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0FeRpc0d_zqY_avQ3Fj5-g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Enable Google sign-in</figcaption></figure><p id="a618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">单击“启用”后，记下Web客户端ID。我们将在应用程序中稍后使用此ID。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi od"><img src="../Images/156674d7330e244c624a053bffcdbe60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DJoon4O_G2PoQdi497jOWg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Note the Web Client ID</figcaption></figure><h2 id="22f6" class="nm lt iq bd lu nr ns dn ly nt nu dp mc lf nv nw me lj nx ny mg ln nz oa mi ob bi translated">步骤3:创建登录页面</h2><p id="73e1" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">接下来，我们将继续在React本地页面上添加一个登录按钮。让我们首先为登录页面创建一个框架<code class="fe oe of og ni b">React.Component</code>。该页面只有一个登录按钮及其click事件处理程序。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="3379" class="nm lt iq bd lu nr ns dn ly nt nu dp mc lf nv nw me lj nx ny mg ln nz oa mi ob bi translated">步骤4:配置Google登录</h2><p id="a564" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">接下来，让我们在<code class="fe oe of og ni b">componentDidMount</code>中配置<code class="fe oe of og ni b">GoogleSignIn</code>实例。这个方法只需要在应用程序中初始化一次。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="6fe3" class="nm lt iq bd lu nr ns dn ly nt nu dp mc lf nv nw me lj nx ny mg ln nz oa mi ob bi translated">步骤5:实现登录点击方法</h2><p id="8da0" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">最后，让我们实现Login Clicked方法。在这个方法中，我们调用<code class="fe oe of og ni b">signIn</code>方法，该方法触发返回authToken的应用内基于web浏览器的认证流。然后，我们使用这个令牌生成凭证，最后使用凭证获取用户信息。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oh oi l"/></div></figure><h2 id="143f" class="nm lt iq bd lu nr ns dn ly nt nu dp mc lf nv nw me lj nx ny mg ln nz oa mi ob bi translated">额外收获:在Redux状态下保持用户信息</h2><p id="7a22" class="pw-post-body-paragraph kw kx iq ky b kz mk jr lb lc ml ju le lf mm lh li lj mn ll lm ln mo lp lq lr ij bi translated">注意，我们已经在React组件中设置了dispatcher。所以我们可以简单地调用setUser方法将用户设置为Redux状态。当然，假设您已经在应用程序中设置了Redux。</p><pre class="kg kh ki kj gt nh ni nj nk aw nl bi"><span id="bfcb" class="nm lt iq ni b gy nn no l np nq">this.props.setUser(user)</span></pre><p id="b75b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另外，您可以将一个<code class="fe oe of og ni b">onAuthStateChanged</code>事件监听器附加到<code class="fe oe of og ni b">auth()</code>实例上。有关更多详细信息，请参考文档。</p><div class="mp mq gp gr mr ms"><a href="https://rnfirebase.io/auth/usage" rel="noopener  ugc nofollow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd ir gy z fp mx fr fs my fu fw ip bi translated">身份验证| React本机Firebase</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">身份验证的安装和入门。本模块要求@react-native-firebase/app模块…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">rnfirebase.io</p></div></div><div class="nb l"><div class="oj l nd ne nf nb ng kp ms"/></div></div></a></div><p id="f317" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。当你运行应用程序时，你应该让谷歌登录在你的应用程序中工作。如果你觉得这篇文章有用，请留下掌声。</p><p id="9099" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">考虑成为中级会员<a class="ae kv" href="https://utkarshabakshi.medium.com/membership" rel="noopener">继续阅读我所有的优质文章以及1000多个其他故事。</a></p></div><div class="ab cl ok ol hu om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="ij ik il im in"><p id="9391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这个<a class="ae kv" href="https://utkarshabakshi.medium.com/list/react-native-development-0d5f690f6585" rel="noopener">列表</a>中找到我关于React原生开发的其他文章。</p><p id="433c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="or">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="or">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Add a Modal to a React App with Styled React Modal and react-overlays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用样式化的React Modal和react-overlays向React应用程序添加模态</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-a-modal-to-a-react-app-with-styled-react-modal-and-react-overlays-ed9ec3fc2f00?source=collection_archive---------17-----------------------#2021-02-25">https://javascript.plainenglish.io/add-a-modal-to-a-react-app-with-styled-react-modal-and-react-overlays-ed9ec3fc2f00?source=collection_archive---------17-----------------------#2021-02-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/a471d0bc486af092b0c92fee23a00d63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-FOVuBTDb408F9co"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sephkeil?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joseph Keil</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="81a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">模态是我们必须经常添加到React应用程序中的东西。</p><p id="8945" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了使这项任务更容易，我们可以使用现有的组件库来添加它们。</p><p id="070c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何使用样式化的React Modal和react-overlays库将一个模型添加到React应用程序中。</p><h1 id="6469" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">风格反应模式</h1><p id="6eb9" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">风格化的React模态库让我们可以轻松地将模态添加到React应用程序中。</p><p id="051e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="2a2c" class="mn lc iq mj b gy mo mp l mq mr">npm i styled-react-modal</span></pre><p id="937d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="835d" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";<br/>import Modal, { ModalProvider } from "styled-react-modal";<br/>import { ThemeProvider } from "styled-components";</span><span id="2ef2" class="mn lc iq mj b gy ms mp l mq mr">const StyledModal = Modal.styled`<br/>  width: 20rem;<br/>  height: 20rem;<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;<br/>  background-color: white;<br/>`;</span><span id="e972" class="mn lc iq mj b gy ms mp l mq mr">function FancyModalButton() {<br/>  const [isOpen, setIsOpen] = useState(false);</span><span id="605b" class="mn lc iq mj b gy ms mp l mq mr">  function toggleModal(e) {<br/>    setIsOpen(!isOpen);<br/>  }</span><span id="c18b" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;button onClick={toggleModal}&gt;Click me&lt;/button&gt;<br/>      &lt;StyledModal<br/>        isOpen={isOpen}<br/>        onBackgroundClick={toggleModal}<br/>        onEscapeKeydown={toggleModal}<br/>      &gt;<br/>        &lt;span&gt;I am a modal!&lt;/span&gt;<br/>        &lt;button onClick={toggleModal}&gt;Close me&lt;/button&gt;<br/>      &lt;/StyledModal&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span><span id="08b7" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;ThemeProvider theme={{}}&gt;<br/>      &lt;ModalProvider&gt;<br/>        &lt;FancyModalButton /&gt;<br/>      &lt;/ModalProvider&gt;<br/>    &lt;/ThemeProvider&gt;<br/>  );<br/>}</span></pre><p id="1f66" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们添加了<code class="fe mt mu mv mj b">FancyModalButton</code>组件来添加模态触发器。</p><p id="741c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在组件内部，我们在组件内部添加了<code class="fe mt mu mv mj b">StyledModal</code>。</p><p id="7f6f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它是从<code class="fe mt mu mv mj b">Modal.style</code>标签创建的。</p><p id="d01f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">isOpen</code>道具控制<code class="fe mt mu mv mj b">StyledModal</code>是打开还是关闭。</p><p id="b711" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当背景被点击时，道具让我们运行代码。</p><p id="a198" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe mt mu mv mj b">onEscapeKeydown</code>让我们在按下Esc键时运行代码。</p><p id="cd5f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们只是切换<code class="fe mt mu mv mj b">isOpen</code>状态来打开或关闭模态，因为我们将它作为<code class="fe mt mu mv mj b">isOpen</code>属性的值传递。</p><p id="6b28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过在<code class="fe mt mu mv mj b">ThemeProvider</code>和<code class="fe mt mu mv mj b">ModalProvider</code>中传递样式化的模态来使用它。</p><h1 id="684f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">反应-覆盖</h1><p id="8b5b" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用react-overlays库向react应用程序添加一个模型。</p><p id="73e5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="47cf" class="mn lc iq mj b gy mo mp l mq mr">npm install react-overlays</span></pre><p id="0783" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">与NPM或:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="552c" class="mn lc iq mj b gy mo mp l mq mr">yarn add react-overlays</span></pre><p id="e322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用纱线。</p><p id="d009" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以通过写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="6ecd" class="mn lc iq mj b gy mo mp l mq mr">import React, { useState } from "react";<br/>import styled from "styled-components";<br/>import Modal from "react-overlays/Modal";</span><span id="59f1" class="mn lc iq mj b gy ms mp l mq mr">const Backdrop = styled.div`<br/>  position: fixed;<br/>  z-index: 1040;<br/>  top: 0;<br/>  bottom: 0;<br/>  left: 0;<br/>  right: 0;<br/>  background-color: #000;<br/>  opacity: 0.5;<br/>`;</span><span id="7fe6" class="mn lc iq mj b gy ms mp l mq mr">const AModal = styled(Modal)`<br/>  position: fixed;<br/>  width: 400px;<br/>  z-index: 1040;<br/>  top: 20px;<br/>  left: 30px;<br/>  border: 1px solid #e5e5e5;<br/>  background-color: white;<br/>  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);<br/>  padding: 20px;<br/>`;</span><span id="76a4" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [show, setShow] = useState(false);</span><span id="6135" class="mn lc iq mj b gy ms mp l mq mr">  const renderBackdrop = (props) =&gt; &lt;Backdrop {...props} /&gt;;</span><span id="8b33" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div className="modal-example"&gt;<br/>      &lt;button<br/>        type="button"<br/>        className="btn btn-primary mb-4"<br/>        onClick={() =&gt; setShow(true)}<br/>      &gt;<br/>        Open Modal<br/>      &lt;/button&gt;</span><span id="1237" class="mn lc iq mj b gy ms mp l mq mr">      &lt;AModal<br/>        show={show}<br/>        onHide={() =&gt; setShow(false)}<br/>        renderBackdrop={renderBackdrop}<br/>      &gt;<br/>        &lt;div&gt;<br/>          &lt;h4 id="modal-label"&gt;Text in a modal&lt;/h4&gt;<br/>          &lt;p&gt;Lorem ipsum&lt;/p&gt;<br/>        &lt;/div&gt;<br/>      &lt;/AModal&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="75b5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们创建了<code class="fe mt mu mv mj b">Backdrop</code>组件，这是一个应用了一些样式的div。</p><p id="e139" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们创建<code class="fe mt mu mv mj b">AModal</code>组件，它是一个有固定位置的模态。</p><p id="96f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还设置了背景颜色和阴影来添加一些效果来显示模态。</p><p id="5c7f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">App</code>中，我们有一个按钮，通过用<code class="fe mt mu mv mj b">true</code>调用<code class="fe mt mu mv mj b">setShow</code>来打开模态。</p><p id="2069" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe mt mu mv mj b">show</code>是<code class="fe mt mu mv mj b">true</code>，我们有<code class="fe mt mu mv mj b">AModal</code>组件显示模态。</p><p id="6b8a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们传入<code class="fe mt mu mv mj b">Backdrop</code>组件作为<code class="fe mt mu mv mj b">renderBackdrop</code>的值来渲染背景。</p><p id="9728" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">onHide</code>是我们隐藏情态时的称呼。</p><h1 id="cd4f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="e7c5" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过样式化的React Modal和react-overlays库轻松地将Modal添加到React应用程序中。</p><p id="50cf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">详见</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
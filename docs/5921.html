<html>
<head>
<title>How to Import Client Text Files in Vue.js/Vuetify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Vue.js/Vuetify导入客户端文本文件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/importing-client-text-files-in-vue-vuetify-a9ef0a76c821?source=collection_archive---------7-----------------------#2021-12-19">https://javascript.plainenglish.io/importing-client-text-files-in-vue-vuetify-a9ef0a76c821?source=collection_archive---------7-----------------------#2021-12-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/c4a2b3a517c25b87bc886437d66079c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sIl5o-1P-x7vn1PEgaUFWw.jpeg"/></div></div></figure><p id="6448" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我在做一个Vue.js/Vuetify网站项目。该项目为用户提供了从文件导入JSON数据的能力。根据我在90年代的“老派”经验，我对这种情况的默认反应是让服务器参与进来，但我决定研究更新的可能性。</p><p id="e74a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我很快找到了<a class="ae kt" href="https://www.delftstack.com/howto/javascript/read-text-file-in-javascript/" rel="noopener ugc nofollow" target="_blank">这个</a> HTML/JS方法，但是我不确定它会如何使用Vue，所以我做了一些实验。因为我也在使用Vuetify，所以我使用了带有<code class="fe ku kv kw kx b">@change</code>属性的<code class="fe ku kv kw kx b">&lt;v-file-input&gt;</code>,并将其路由到一个方法。结果，它接收用户在本地机器上指定的文件的文件对象。</p><p id="30cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这意味着我可以使用<code class="fe ku kv kw kx b">.text()</code>方法来读取文件的内容。使用Vuetify，这也意味着，我可以使用“隐藏输入”属性，只得到一个打开文件浏览器对话框的可点击图标。我还使用了“prepend-icon”属性来更改默认的回形针图标。</p><p id="ec58" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了使它看起来合适，我做了一些调整，但是我最终得到了一个标准的图标按钮，当点击它时，会打开一个文件浏览器对话框。一旦他们选择了一个文件，它就会被导入到工具中，并且可以被查看/修改。</p><p id="5349" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">“上传”按钮的单页组件(带有工具提示)如下所示:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="b800" class="lg lh in kx b gy li lj l lk ll">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;v-tooltip bottom&gt;<br/>      &lt;template #activator="{ on }"&gt;<br/>        &lt;v-btn icon&gt;<br/>          &lt;v-file-input class="pl-3"<br/>            clearable <br/>            @change="loadFile"<br/>            hide-input<br/>            prepend-icon="mdi-database-arrow-up-outline"<br/>            v-on="on"<br/>          &gt;&lt;/v-file-input&gt;<br/>        &lt;/v-btn&gt;<br/>      &lt;/template&gt;<br/>      &lt;span&gt;Upload / Import Data&lt;/span&gt;<br/>    &lt;/v-tooltip&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="46bb" class="lg lh in kx b gy lm lj l lk ll">&lt;script&gt;<br/>import { mapActions } from "vuex";<br/>export default {<br/>  props: ["value"],<br/>  computed: {<br/>    visible: {<br/>      get() {<br/>        return this.value;<br/>      },<br/>      set() {<br/>        this.$emit("close");<br/>      }<br/>    }]<br/>  },<br/>  methods: {<br/>    ...mapActions(["import"]),<br/>    loadFile(file) {<br/>      if (!file) return;<br/>      file.text()<br/>        .then(JSON.parse)<br/>        .then(this.import);<br/>    }<br/>  }<br/>  };<br/>&lt;/script&gt;</span></pre><p id="5ec2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我的Vuex存储中的“import”功能实际上将JSON数据集成到应用程序中。</p><p id="7e8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我喜欢这种方法，因为它不需要向/从服务器发送/接收数据，这意味着对用户来说非常快。</p><h2 id="6f63" class="lg lh in bd lo lp lq dn lr ls lt dp lu kg lv lw lx kk ly lz ma ko mb mc md me bi translated">只有Vue一个人</h2><p id="3fe6" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">单独使用Vue，您可以获得相同的功能，但它需要多几行代码(至少在我第一次使用时是这样的):</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="89ad" class="lg lh in kx b gy li lj l lk ll">&lt;input type="file" @change="showFile" /&gt;</span></pre><p id="f98f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在方法中:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="a3fe" class="lg lh in kx b gy li lj l lk ll">showFile(e){<br/>  e.target.files[0]<br/>    .text()<br/>    .then(JSON.parse)<br/>    .then(this.import);<br/>}</span></pre><p id="8694" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">也有可能创建它，这样只有一个按钮是可见的，触发文件浏览器对话框，但它会更复杂，这就是为什么我喜欢使用Vuetify(或类似的)。</p><p id="f623" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="ln">更多内容看</em> <a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ln">说白了就是io </em> </strong> </a> <strong class="jx io"> <em class="ln">。</em> </strong> <em class="ln">报名参加我们的</em> <a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="ln">免费每周简讯点击这里</em> </strong> </a> <strong class="jx io"> <em class="ln">。</em> </strong></p></div></div>    
</body>
</html>
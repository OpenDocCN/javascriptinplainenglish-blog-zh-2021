<html>
<head>
<title>How to Run â€˜npm run buildâ€™ on a Low Spec Server?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•åœ¨ä½è§„æ ¼æœåŠ¡å™¨ä¸Šè¿è¡Œâ€œnpmè¿è¡Œæ„å»ºâ€?</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/how-to-execute-nuxt-npm-run-build-on-low-spec-server-ef7442b5c03d?source=collection_archive---------2-----------------------#2021-04-12">https://javascript.plainenglish.io/how-to-execute-nuxt-npm-run-build-on-low-spec-server-ef7442b5c03d?source=collection_archive---------2-----------------------#2021-04-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b2138a0b474833dbdb885d4c30f90566.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJ6nc3GMusPRg6eA3kNGDA.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@flowforfrank?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae kc" href="https://unsplash.com/s/photos/javascript-node?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7466" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æˆ‘ç›¸ä¿¡åœ¨NPMçš„ä¸–ç•Œé‡Œï¼Œä½ ä¼šé‡åˆ°éš¾ä»¥è§£å†³çš„é—®é¢˜ã€‚å°è¯•åœ¨æ‚¨çš„æœåŠ¡å™¨æˆ–æœ¬åœ°ç¯å¢ƒä¸­æ‰§è¡Œ<code class="fe lb lc ld le b">npm run build</code>æ—¶ï¼Œæ‚¨æ˜¯å¦æ„Ÿåˆ°å¤´æ™•ï¼Ÿä¾‹å¦‚ï¼Œå¾—åˆ°ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯ã€‚</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="b3e3" class="ln lo iq le b gy lp lq l lr ls">Killed<br/>npm ERR! code ELIFECYCLE<br/>npm ERR! errno 137<br/>npm ERR! project-nuxt@1.0.0 build: `nuxt build`<br/>npm ERR! <strong class="le ir">Exit status 137</strong><br/>npm ERR! <br/>npm ERR! Failed at the project-nuxt@1.0.0 build script.<br/>npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><span id="dcff" class="ln lo iq le b gy lt lq l lr ls">npm ERR! A complete log of this run can be found in:<br/>npm ERR!     /home/administrator/.npm/_logs/2021-04-11T08_48_48_675Z-debug.log</span></pre><p id="8d69" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ˜¯ï¼Œä½ å¹¶ä¸å­¤å•ã€‚é”™è¯¯æ¶ˆæ¯â€œ<strong class="kf ir">é€€å‡ºçŠ¶æ€137 </strong>â€æŒ‡çš„æ˜¯NPMæ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜åœ¨ä½ çš„åœŸè±†æœåŠ¡å™¨ä¸Šç¼–è¯‘ä½ çš„ä»£ç çš„æƒ…å†µã€‚<code class="fe lb lc ld le b">npm run build</code>æ‰€åšçš„æ˜¯è¿è¡Œpackage.jsonä¸­çš„è„šæœ¬â€œbuild â€,å®ƒé€šå¸¸æ˜¯ç¼–è¯‘æˆ–æ„å»ºæˆ–è¿è¡Œåº”ç”¨ç¨‹åºçš„è„šæœ¬ã€‚æ‰€ä»¥åŸºæœ¬ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªåƒå…¬ç¾Šçš„å®¶åº­ğŸ˜…ã€‚</p><p id="cfe8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æ ¹æ®æˆ‘çš„ç»éªŒåˆ†äº«è§£å†³æ–¹æ¡ˆã€‚</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="4f23" class="mb lo iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">è§£å†³æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h1><p id="f1b3" class="pw-post-body-paragraph kd ke iq kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">æœ‰ä¸€ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé‚£å°±æ˜¯é™åˆ¶æ„å»ºpackage.jsonæ‰€éœ€çš„æœ€å¤§å†…å­˜ã€‚</p><p id="d1ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å»<code class="fe lb lc ld le b">package.json</code>çœ‹å‰§æœ¬</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="32b7" class="ln lo iq le b gy lp lq l lr ls">....<br/>"scripts": {<br/>    "dev": "nuxt",<br/>    <strong class="le ir">"build": "nuxt build",</strong><br/>    "start": "nuxt start",<br/>    "generate": "nuxt generate"<br/>},<br/>....</span></pre><p id="6b50" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨æ‰€éœ€è¦çš„åªæ˜¯åœ¨æ„å»ºé˜¶æ®µæŒ‡å®šé™åˆ¶å†…å­˜ã€‚ä¸ºäº†é¿å…é”™è¯¯137ï¼Œä½¿ç”¨å‚æ•°<code class="fe lb lc ld le b">â€”-max-old-space-size</code>å¢åŠ å†…å­˜é™åˆ¶é‡ã€‚è¿™å°†æœ‰åŠ©äºé¿å…å†…å­˜é™åˆ¶é—®é¢˜ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œ</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="d67e" class="ln lo iq le b gy lp lq l lr ls">node --max-old-space-size=800 <!-- -->node_modules/nuxt/bin/nuxt.js build<br/>node --max-old-space-size=1000 <!-- -->node_modules/nuxt/bin/nuxt.js build<br/>node --max-old-space-size=<strong class="le ir">VALUE</strong> <!-- -->node_modules/nuxt/bin/nuxt.js build<br/>....<br/>....</span></pre><p id="34e0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">æ‚¨å¯ä»¥é€‰æ‹©ä»»ä½•æƒ³è¦çš„å€¼(ä»¥MBä¸ºå•ä½)å¹¶æ›¿æ¢å®ƒã€‚å¤åˆ¶å¹¶å°†å…¶æ”¾å…¥package . JSONâ€œbuildâ€è„šæœ¬ä¸­ã€‚</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="96d6" class="ln lo iq le b gy lp lq l lr ls">....<br/>"scripts": {<br/>    "dev": "nuxt",<br/>    <strong class="le ir">"build": "PASTE HERE",</strong><br/>    "start": "nuxt start",<br/>    "generate": "nuxt generate"<br/>},<br/>....</span></pre><p id="3c59" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">åœ¨é‚£ä¹‹åï¼Œå°±åˆæ‹¯æ•‘äº†<code class="fe lb lc ld le b">npm run build</code>ğŸ»ã€‚</p><p id="4cd1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">ä¸€åˆ‡éƒ½ä¼šé¡ºåˆ©çš„ã€‚ä½†æ˜¯æ‚¨ä¼šæ³¨æ„åˆ°è„šæœ¬è¿è¡Œç¼“æ…¢ï¼Œå› ä¸ºæ‚¨ä¸ºNPMç¼–è¯‘ä»£ç åˆ†é…äº†è¾ƒä½çš„å†…å­˜é™åˆ¶ã€‚</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><h1 id="a807" class="mb lo iq bd mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx bi translated">å¦‚æœä¸èµ·ä½œç”¨å‘¢ï¼Ÿ</h1><p id="9778" class="pw-post-body-paragraph kd ke iq kf b kg my ki kj kk mz km kn ko na kq kr ks nb ku kv kw nc ky kz la ij bi translated">å¦‚æœä¸Šè¿°è§£å†³æ–¹æ¡ˆå¯¹æ‚¨ä¸èµ·ä½œç”¨ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„äº¤æ¢å†…å­˜ã€‚å¦‚æœæ²¡æœ‰ï¼Œæ‚¨éœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤åˆ›å»ºä¸€ä¸ªäº¤æ¢æ–‡ä»¶:</p><ol class=""><li id="273a" class="nd ne iq kf b kg kh kk kl ko nf ks ng kw nh la ni nj nk nl bi translated">é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ç³»ç»Ÿäº¤æ¢ä¿¡æ¯</li></ol><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="74aa" class="ln lo iq le b gy lp lq l lr ls"># sudo swapon --show<br/><strong class="le ir">NAME      TYPE  SIZE USED PRIO</strong><br/> <br/># free -h<br/>              total    used    free   shared  buff/cache   available<br/>Mem:          1987     555     991      36         440        1279<br/><strong class="le ir">Swap:          0        0        0</strong></span></pre><p id="d98a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¦‚æœæ‚¨æ²¡æœ‰å¾—åˆ°ä»»ä½•è¾“å‡ºï¼Œè¿™æ„å‘³ç€æ‚¨çš„ç³»ç»Ÿå½“å‰æ²¡æœ‰å¯ç”¨çš„äº¤æ¢ç©ºé—´ã€‚å¦‚æœä½ å·²ç»æœ‰äº†ï¼Œå¯èƒ½ä¼šæœ‰ä¸€äº›å…¶ä»–çš„é—®é¢˜ï¼Œå¾ˆå¯èƒ½æ˜¯ä½ çš„ä»£ç çš„é—®é¢˜ã€‚</p><p id="34ac" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">2.åœ¨åˆ›å»ºäº¤æ¢å†…å­˜ä¹‹å‰ï¼Œæ‚¨åº”è¯¥æ£€æŸ¥å½“å‰çš„ç£ç›˜ä½¿ç”¨æƒ…å†µ</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="6a3c" class="ln lo iq le b gy lp lq l lr ls"># dh -f<br/>...<br/>/dev/vda1        49G  6.0G   43G  13% /<br/>...</span></pre><p id="1e11" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">3.æ‰€ä»¥ï¼Œæ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œæœ‰è¶³å¤Ÿçš„ç©ºé—´å¯ç”¨ã€‚ç»§ç»­åˆ›å»ºäº¤æ¢æ–‡ä»¶</p><pre class="lf lg lh li gt lj le lk ll aw lm bi"><span id="8afb" class="ln lo iq le b gy lp lq l lr ls"># sudo fallocate -l 1G /swapfile<br/># sudo chmod 600 /swapfile# sudo mkswap /swapfile<br/># sudo swapon /swapfile<br/># sudo swapon --show<br/># free -h</span></pre><p id="ed7a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">è‡³æ­¤ï¼Œæ‚¨çš„äº¤æ¢æ–‡ä»¶å°±åˆ›å»ºå¥½äº†ã€‚å°è¯•é‡æ–°è¿è¡Œâ€œnpmè¿è¡Œæ„å»ºâ€ã€‚ç°åœ¨åº”è¯¥å¯ä»¥æ­£å¸¸å·¥ä½œäº†ã€‚ğŸ˜</p></div><div class="ab cl lu lv hu lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ij ik il im in"><p id="f4a6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">å¤ªå¥½äº†ï¼ç°åœ¨ä½ å¯ä»¥é¢å¸¦å¾®ç¬‘æ„‰å¿«åœ°è·‘ä½ çš„NPMäº†ã€‚å¸Œæœ›è¿™ä¸ªè§£å†³æ–¹æ¡ˆèƒ½å¤Ÿå¸®åŠ©æ‚¨å‡è½»ä¸JavaScriptç›¸å…³çš„å‹åŠ›ã€‚æ„Ÿè°¢é˜…è¯»ã€‚ç¼–ç å¿«ä¹ï¼Œå·¥ä½œå¿«ä¹ï¼</p><h1 id="5aaa" class="mb lo iq bd mc md nm mf mg mh nn mj mk ml no mn mo mp np mr ms mt nq mv mw mx bi translated">å‚è€ƒ</h1><div class="nr ns gp gr nt nu"><a href="https://medium.com/@vuongtran/how-to-solve-process-out-of-memory-in-node-js-5f0de8f8464c" rel="noopener follow" target="_blank"><div class="nv ab fo"><div class="nw ab nx cl cj ny"><h2 class="bd ir gy z fp nz fr fs oa fu fw ip bi translated">å¦‚ä½•è§£å†³Node.jsä¸­è¿›ç¨‹å†…å­˜ä¸è¶³çš„é—®é¢˜</h2><div class="ob l"><h3 class="bd b gy z fp nz fr fs oa fu fw dk translated">æˆ‘å°†åœ¨Node.jsä¸­å±•ç¤ºå¦‚ä½•è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜ã€‚</h3></div><div class="oc l"><p class="bd b dl z fp nz fr fs oa fu fw dk translated">medium.com</p></div></div><div class="od l"><div class="oe l of og oh od oi jw nu"/></div></div></a></div><p id="3264" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="oj">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="oj">plain English . io</em></a></p></div></div>    
</body>
</html>
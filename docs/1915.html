<html>
<head>
<title>How to Communicate between Components in Vue.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Vue.js中组件之间如何通信</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/communication-between-components-in-vue-js-d79124917cd0?source=collection_archive---------0-----------------------#2021-04-22">https://javascript.plainenglish.io/communication-between-components-in-vue-js-d79124917cd0?source=collection_archive---------0-----------------------#2021-04-22</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="c49a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这篇文章中，我们将学习如何在Vue.js中的组件之间进行通信。以下是方法。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/2ff774deba34203f4c3a3262cc8ed6b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CTgWakr5NkQkxMu9"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@florianolv?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Florian Olivo</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7e1b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每个框架都有自己独特的架构，但它们有一个共同点。整个页面被分成小的组件，每个组件都有自己的功能和UI。有时，我们需要一种方法在这些组件之间进行通信。</p><p id="4138" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一般我们用<strong class="jp ir"><em class="lc">【Vuex】</em></strong><em class="lc">(状态管理工具)</em>来存储数据，跨组件使用。但是有时，我们需要一种方法将数据从一个组件发送到另一个组件，而不使用Vuex存储。在本文中，我们将学习实现这一目标的可能方法。</p><p id="fe80" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有五种方法可以将数据从一个组件发送到另一个组件:</p><p id="da43" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 1。使用道具(亲子沟通)</strong></p><p id="5c03" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 2。使用事件(孩子对父母的交流)</strong></p><p id="3894" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 3。使用事件总线(任何组件之间的通信)</strong></p><p id="d421" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 4。使用提供/注射(父母对子女的交流)</strong></p><p id="23cd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> 5。利用这个。$refs(亲子沟通)</strong></p><p id="1aa8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们逐一研究一下，看看它们是如何工作的。</p><h1 id="e716" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">1)使用道具(父母与孩子的交流)</h1><p id="638f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">可以使用<em class="lc"> props </em>从父子组件发送数据。在下面的例子中，我们通过道具<code class="fe mg mh mi mj b">message</code>将数据从<code class="fe mg mh mi mj b">parent.vue</code>发送到<code class="fe mg mh mi mj b">child.vue</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/7d80c987a8843023634601e13cd1df47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vkMroMXITfeTT4-Sj4xhIw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Child Component (Child. vue)</strong></figcaption></figure><p id="2894" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们已经创建了一个打印消息的组件。我们已经在props中定义了一个名为<code class="fe mg mh mi mj b">message</code>的变量，并在模板中进行渲染。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/6d1f2471e4790edde0e4c7833b4bbbdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Yruesi8xx3n3ia-rASyng.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Parent component (Parent. vue)</strong></figcaption></figure><p id="f01b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当我们将子组件嵌套在父组件中时，我们使用指令<code class="fe mg mh mi mj b">v-bind</code>绑定想要发送的数据，并使用props发送数据。</p><p id="7c1d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">每当父对象更改属性时，新值都会发送给子对象并重新渲染。</p><h1 id="ee1c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">2)使用事件(从孩子到父母的通信)</h1><p id="5c9f" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这类似于props，但是我们将数据从子节点发送到父节点，而不是使用v-bind，我们使用指令<code class="fe mg mh mi mj b">v-on</code>进行捕获。</p><p id="9fb8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们在包含消息的子组件中定义了一个变量。我们通过从子组件触发一个事件，将相同的内容发送给父组件。</p><p id="7833" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mg mh mi mj b">this.$emit(’name-of-the-event’, args1, args2, args3,...)</code>是引发事件的一种方式。这是使用指令<code class="fe mg mh mi mj b">v-on</code>在父组件上捕获的。请注意，应该使用捕获时发送的相同事件名称，并且可以检索参数。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/0fc2e10464cd991325793183d97816ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HLNvfMV9rDlRfKvCZbfOUw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Child Component(Child.vue)</strong></figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mm"><img src="../Images/1824873df016ab8f3488f897b72b9e39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3UbkRaQ48uF5F27euSZawQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Parent Component (Parent. vue)</strong></figcaption></figure><p id="9029" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">只要子组件中的消息发生变化，新值就会发送到父组件并重新呈现。</p><h1 id="3d17" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">3)使用事件总线(任意两个组件之间的通信)</h1><p id="8cd8" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">事件总线用于任何两个组件<em class="lc">(组件不需要有父子关系)</em>之间的通信。当需要手动监听组件实例上的事件时，可以使用这种方法。</p><p id="d074" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您可以使用<code class="fe mg mh mi mj b">this.$root.$emit(’name-of-emitter’, args1, args2, ...)</code>从一个组件发送数据，并在另一个组件中使用与此相同的名称<code class="fe mg mh mi mj b">this.$root.$on(’name-of-emitter’, args1, args2, ...)</code>捕获数据。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/bd6366d42de13f75ca662630defbe5f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrGTB5Iqoc4kvXuqrd6ShQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">component-one. vue</strong></figcaption></figure><p id="9c8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，我们使用<code class="fe mg mh mi mj b">mounted() {}</code>来捕获<em class="lc">组件2中的事件。vue。</em></p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/38725da26c39f564f75e2ca1c1ead063.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Di37udfhpWNgT5F8L_o4UA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">component-two. vue</strong></figcaption></figure><h1 id="cbc1" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">4)使用提供/注入(亲子沟通)</h1><p id="71f5" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这用在有<strong class="jp ir"> <em class="lc">深度嵌套组件</em> </strong>的结构中，并且只需要来自深度嵌套子组件中父组件的内容。</p><p id="c7de" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这种情况下，您仍然需要将道具传递到整个组件链，这可能很烦人。对于这种情况，我们可以使用<code class="fe mg mh mi mj b">provide</code>和<code class="fe mg mh mi mj b">inject</code>对。</p><p id="30b7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然我们这里的例子非常简单，但是我们仍然从父母向孩子发送消息，因此它是有效的。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/78f8089c1dcb2f0fb835258c808662cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GcGIjGnAigB29rEB4GQ9g.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Parent Component</strong></figcaption></figure><p id="11e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们使用父组件作为提供者，发送数据并将其注入到同名的子组件中。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/598c35f6e224b899c7f2b731a4cbfd44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RmHAwR9g-Tx2Y7xB0dv3Rg.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Child Component</strong></figcaption></figure><p id="5ee4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">无论组件层次结构有多深，父组件都可以作为其所有子组件的依赖提供者。</p><h1 id="c86e" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">5)用这个。$refs(亲子沟通)</h1><p id="63f2" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这种方法是进行通信的最不可取的方式，但它是可用的选项之一。</p><p id="e150" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">尽管有其他方法，有时您可能仍然需要直接访问子组件。为了实现这一点，您可以使用<code class="fe mg mh mi mj b">ref</code>属性为子组件分配一个引用ID。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/0ed4719a5c528d2679d6a85189fe5759.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V1KCRVj4sfbjmf3Cd8aJfA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Parent Component</strong></figcaption></figure><p id="5036" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里我们将子组件引用为'<strong class="jp ir"> <em class="lc">子组件</em> </strong>'(引用ID)，然后使用<code class="fe mg mh mi mj b">this.$refs.child</code>捕获它。我们可以通过这种方式访问与子组件相关的任何内容。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mk"><img src="../Images/3f3bc6e49e6827c821b64fe11cfaa751.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ll5GqlQ51uZ2xonYqffTgQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><strong class="bd ml">Child Component</strong></figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi mn"><img src="../Images/8c03324f10e878c4f8206f4d47e2a851.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pnRPnsSSv895CmErpaTBCw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">We are consoling the referred component. We get access to everything the component is associated with, which we can use.</figcaption></figure><h1 id="7b53" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">结论:</h1><p id="1cba" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">这就是总结。如果你知道Vue.js中组件之间的其他通信方式，请在下面评论，谢谢。</p><p id="594b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lc">更多内容请看</em><a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lc">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Understand Basic Routes in Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何理解Express中的基本路线</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/understanding-basic-routes-in-express-js-9fa30d1a5188?source=collection_archive---------8-----------------------#2021-12-19">https://javascript.plainenglish.io/understanding-basic-routes-in-express-js-9fa30d1a5188?source=collection_archive---------8-----------------------#2021-12-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2c99" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">更好的路由总是让你的用户更容易访问你的web应用。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/76b38f1417211a958231ffa0d9073425.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdXNjkwq9R5hyZuzWGDF_Q.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@jstrippa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">James Harrison</a> on <a class="ae ks" href="https://unsplash.com/@jstrippa?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5229" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在过去的几年里，Node.js在开发人员中变得越来越流行。尤其是当你擅长JavaScript的时候，因为有了<strong class="kv io"> Node.js </strong>，你就不用再学习任何其他特定的语言进行后端开发了。虽然有内置软件包，但它也支持第三方软件包。</p><p id="360f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> Express </strong>是一个旨在轻松创建节点网站的框架。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="db38" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">设置Express</h1><p id="1773" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">您可以通过运行下面的命令来安装Express。完成后，检查您的<strong class="kv io"> package.json </strong>文件，确保它是否成功完成。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="6ea2" class="my lx in mu b gy mz na l nb nc">$ npm install express</span></pre><p id="9202" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好了，现在您的节点应用程序中有了一个<strong class="kv io"> Express </strong>框架。让我们将<strong class="kv io"> Express </strong>导入到我们的应用程序中，并为本教程创建一个简单的节点服务器。在Node中，您可以通过下面的命令导入Express。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="e2a9" class="my lx in mu b gy mz na l nb nc">const express = require('express');</span></pre><p id="3ce6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然后需要通过调用导入的Express函数来设置Express app。为此，请使用下面的命令。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="3efe" class="my lx in mu b gy mz na l nb nc">const app = express();</span></pre><p id="60c0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，你需要为你的网站设计网页，你的网站可以是静态网站，也可以是动态网站。为了理解Express中的基本路由，我在本教程中使用了一个静态节点网站，向用户显示信息。</p><p id="4a60" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们在应用程序中创建一个名为docs的文件夹来存储我们的web页面。</p><p id="50b5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里，我将为这个应用程序选择像<code class="fe nd ne nf mu b">index.html</code>、<code class="fe nd ne nf mu b">about.html</code>、<code class="fe nd ne nf mu b">contact.html</code>这样的基本页面。</p><p id="b16c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可以在docs文件夹中创建这些HTML页面，并为您的web页面添加一些内容和相关样式。</p><p id="2b5f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们为我们的应用程序定义端口并调用<strong class="kv io"> listen </strong>方法。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="2653" class="my lx in mu b gy mz na l nb nc">// defining the port</span><span id="08fb" class="my lx in mu b gy ng na l nb nc">const port = 3000;<br/></span><span id="8da2" class="my lx in mu b gy ng na l nb nc">// invoke listen method</span><span id="020a" class="my lx in mu b gy ng na l nb nc">app.listen(port, () =&gt; {<br/>   console.log(`app listening for requests on port ${port}`);<br/>});</span></pre></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="e2ff" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">添加基本路线</h1><p id="ed2b" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">第一条路线应该是到我们的主页，它是在<strong class="kv io"> docs文件夹</strong>中的<code class="fe nd ne nf mu b">index.html</code>。让我们先创建它。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="312e" class="my lx in mu b gy mz na l nb nc">app.get('/', (req, res) =&gt; {<br/>   res.sendFile('./docs/index.html', { root: __dirname });<br/>});<br/></span><span id="99e5" class="my lx in mu b gy ng na l nb nc">// inside this function you don't need to set either header or status code, but make sure to specify the root directory.</span></pre><p id="59da" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好的，然后我们可以为剩下的网页添加其他路线。我们可以这样做。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="ea47" class="my lx in mu b gy mz na l nb nc">// about.html</span><span id="ff8d" class="my lx in mu b gy ng na l nb nc">app.get('/about', (req, res) =&gt; {<br/>  res.sendFile('./docs/about.html', { root: __dirname });<br/>});</span><span id="818d" class="my lx in mu b gy ng na l nb nc">// contact.html</span><span id="d6dc" class="my lx in mu b gy ng na l nb nc">app.get('/contact', (req, res) =&gt; {<br/>  res.sendFile('./docs/contact.html', { root: __dirname );<br/>});</span></pre><p id="bfff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好了，现在我们差不多完成了，打开你的浏览器，然后去<strong class="kv io"> localhost:3000 </strong>看看你的index.html页面是否加载了。这是你的<code class="fe nd ne nf mu b">‘/’</code>路线，同样，也检查<code class="fe nd ne nf mu b">localhost:3000/about</code>和<code class="fe nd ne nf mu b">localhost:3000/contact</code>网址。</p><p id="6484" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您的路由工作正常，您将能够在浏览器中看到响应。</p></div><div class="ab cl lp lq hr lr" role="separator"><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu lv"/><span class="ls bw bk lt lu"/></div><div class="ig ih ii ij ik"><h1 id="4bcb" class="lw lx in bd ly lz ma mb mc md me mf mg jt mh ju mi jw mj jx mk jz ml ka mm mn bi translated">添加重定向&amp; 404页面</h1><p id="3cd1" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated">如果用户在URL的末尾输入<code class="fe nd ne nf mu b">/about-us</code>而不是<code class="fe nd ne nf mu b">/about</code>，希望看到你网站上的“关于”页面，会发生什么？他/她会得到特定的页面吗？当然不是。那我们怎么把这样的案例引导到相关页面呢？</p><p id="7070" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来<strong class="kv io">将</strong>重定向到图片中，并且当你的用户点击了一个没有目的地的错误URL时，你需要添加一个<strong class="kv io"> 404错误页面</strong>来表明用户访问了一个错误的目的地，而这个目的地在你的网站中是不可用的。</p><p id="c332" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">是时候给我们的网站添加<strong class="kv io">重定向</strong>和一个<strong class="kv io"> 404页面</strong>了。</p><pre class="kd ke kf kg gt mt mu mv mw aw mx bi"><span id="f4f9" class="my lx in mu b gy mz na l nb nc">// user trying to reach /about-us page</span><span id="9a25" class="my lx in mu b gy ng na l nb nc">app.get('/about-us', (req, res) =&gt; {<br/>  res.redirect('/about');<br/>});<br/></span><span id="29d1" class="my lx in mu b gy ng na l nb nc">// when a user hit the localhost:3000/about-us, this will automatically redirect the user to the *localhost:3000/about* page.</span><span id="87ef" class="my lx in mu b gy ng na l nb nc">// 404 page - here, you need to create another HTML file called 404.html inside the docs folder and add some content like the 404 error page to indicate the user, the destination tried to reach is unavailable.</span><span id="ad38" class="my lx in mu b gy ng na l nb nc"> <br/>app.use((req, res) =&gt; {<br/>  res.status(404).sendFile('./docs/404.html', { root: __dirname });<br/>});</span></pre><p id="bd90" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io"> <em class="nh">注意:</em> </strong> <em class="nh">确保将404页面</em> <code class="fe nd ne nf mu b"><em class="nh">(app.use() function)</em></code> <em class="nh">添加到代码的底部，因为它会响应服务器收到的每个请求，包括</em><strong class="kv io"><em class="nh">GET</em></strong><em class="nh">和</em><strong class="kv io"><em class="nh">POST</em></strong><em class="nh">。如果你把它贴在通常路线上面的某个地方，你将不会在它下面得到任何回应。</em></p><p id="e702" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们通过访问<code class="fe nd ne nf mu b">localhost:3000/about-us</code>和一个在你的网站上不存在的目的地比如<code class="fe nd ne nf mu b">localhost:3000/store</code>来试试上面的重定向和404页面</p><p id="fcee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在第一种情况下，如果您被重定向到<strong class="kv io">/关于</strong>页面而没有引起任何错误，那么您已经正确地进行了重定向。此外，当你试图到达你的网站上不存在的某个地方时，你在浏览器中得到404错误页面作为响应，那么你已经做了所有正确的事情。</p><p id="4a9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你需要完整的代码，可以在下面找到。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h1 id="3cb4" class="lw lx in bd ly lz nk mb mc md nl mf mg jt nm ju mi jw nn jx mk jz no ka mm mn bi translated">结论</h1><p id="12a9" class="pw-post-body-paragraph kt ku in kv b kw mo jo ky kz mp jr lb lc mq le lf lg mr li lj lk ms lm ln lo ig bi translated"><strong class="kv io">恭喜你！</strong>您已经向使用Express框架构建的节点网站添加了基本路由。</p><p id="951b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读！</p><p id="b54a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nh">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nh">plain English . io</em></a><em class="nh">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="nh">免费每周简讯</em> </a> <em class="nh">。在我们的</em> <a class="ae ks" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <em class="nh">社区</em> </a> <em class="nh">获得独家写作机会和建议。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create a 5-star Rating System in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建五星评级系统</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-5-star-rating-system-4fa81b71cac9?source=collection_archive---------2-----------------------#2021-04-24">https://javascript.plainenglish.io/react-5-star-rating-system-4fa81b71cac9?source=collection_archive---------2-----------------------#2021-04-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2468" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为用户评论建立一个评级系统。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d29b595165b81ab7ea28447eedb462b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eouxE-U69vIIW-zEwdJZQA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">photo credit: <a class="ae ky" href="http://www.pngall.com/5-star-rating-png" rel="noopener ugc nofollow" target="_blank">pngall.com</a></figcaption></figure><h2 id="3134" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">说来容易做起来难</h2><p id="95a0" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">科技产品公司真的很看重用户体验。了解可以做出哪些改进来取悦消费者的最佳方式是收集反馈。星级系统是一个美丽的东西，因为它为用户提供了一个简单快捷的方式来传达他们对我们的网站、应用程序或产品的整体体验有多满意。</p><p id="2982" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然这些可以在电子商务网站上看到，审查应用程序，等等，但不要让你的熟悉程度欺骗你认为它很容易创建和使用。负责实现可靠评级系统的开发人员面临着一些挑战。</p><p id="3218" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">也就是说，这是加深您对React中的条件呈现和状态的理解的一个很好的实践。在这个过程中，我们可以学到很多宝贵的经验。</p><h2 id="d34b" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">分解它</h2><p id="c103" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">第一步是真正了解我们需要什么来达到我们的最终目标。以下是我们获得最终结果所需的交付件:</p><p id="2dca" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">1.渲染5颗星。<br/> 2。当用户悬停在星星上时，填充该星星。<br/> 3。当一颗星星被填满时，确保它之前的所有星星也被填满。<br/> 4。如果点击一个填充的星星，它会变成空的。</p><p id="2e1c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">获得这些可交付成果的伪代码可能如下所示:</p><ol class=""><li id="4e89" class="lx ly in jm b jn jo jr js jv lz jz ma kd mb kh mc md me mf bi translated">应用程序呈现一个带有星级属性的分级系统组件。</li><li id="599b" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">分级系统为用户返回一个标题和说明，以及一个名为Stars的组件，该组件接收star count属性。</li><li id="5ee8" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">Stars将当前评级保持为该州的一个数字。</li><li id="fb94" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">Stars从其star count属性渲染正确的星星数。</li><li id="1dc6" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">每颗星都需要一个属性来反映它的位置，这样我们就知道通过比较它的位置和当前的等级来呈现一颗填充的或空的星。</li><li id="5f79" class="lx ly in jm b jn mg jr mh jv mi jz mj kd mk kh mc md me mf bi translated">最后，为了更改评级，我们需要添加一些当用户悬停或点击星星时触发的功能。</li></ol><h2 id="35ac" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">出发点</h2><p id="46f1" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">当面临挑战时，我喜欢做的第一件事是先从最简单的部分开始，然后在浏览器上显示一些东西。因此，让我们首先创建所需的组件，并检查它们是否呈现在页面上。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="36bb" class="kz la in mm b gy mq mr l ms mt">import React, {Component} from 'react';<br/>import EmptyStar from './assets/empty-star.svg';<br/>import FilledStar from './assets/filled-star.svg';<br/>import './styles.css';</span><span id="b5bf" class="kz la in mm b gy mu mr l ms mt"><br/>class Stars extends Component {<br/>render(){<br/>  return(<br/>    [...Array(this.props.starCount).keys()].map((index) =&gt; {<br/>     return (&lt;img src={EmptyStar} alt={"empty star"} /&gt;)<br/>     })<br/>    )<br/>  }<br/>}</span><span id="ef8f" class="kz la in mm b gy mu mr l ms mt">const RatingSystem = (props) =&gt;  {<br/> return (<br/>   &lt;div&gt;<br/>     &lt;h1&gt;5 star rating system&lt;/h1&gt;<br/>     &lt;h2&gt;Select a rating:&lt;/h2&gt;<br/>   &lt;div className='rating'&gt;<br/>     &lt;Stars starCount={props.starCount}/&gt;<br/>   &lt;/div&gt;<br/>   &lt;/div&gt; <br/> );<br/>}</span><span id="cd93" class="kz la in mm b gy mu mr l ms mt">export default function App() {<br/>return (<br/>  &lt;div className="App"&gt;<br/>    &lt;RatingSystem starCount={5} /&gt;<br/>  &lt;/div&gt;<br/>)<br/>};</span></pre><p id="e00a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们已经完成了第一个可交付成果。我们有应用程序渲染一个评级系统，返回一个星级组件。在Stars组件中，我们创建了一个长度等于star count属性的数组，并将一个空星星的图像映射到每个元素。目前我们只有空星，没有办法更新。</p><p id="55dc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">有条件地渲染一颗空的或填充的星星的一种方法是在星星的状态中存储一个数值等级，并添加到我们的映射方法中，以便在星星在线的位置小于或等于数值等级时渲染一颗填充的星星。让我们添加一些修改…</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="a72d" class="kz la in mm b gy mq mr l ms mt">class Stars extends Component {<br/> constructor(props) {<br/>   super(props);<br/>   this.state = {currRating : 0}<br/> }</span><span id="ec8a" class="kz la in mm b gy mu mr l ms mt">render(){<br/>  return(<br/>  [...Array(this.props.starCount).keys()].map((index) =&gt; {<br/>  return (<br/>   &lt;img<br/>   data-value={index + 1}<br/>   className="star"<br/>   src={index + 1 &lt;= this.state.currRating ? <br/>       FilledStar : EmptyStar}<br/>   alt={index + 1 &lt;= this.state.currRating ? <br/>       "filled star" : "empty star"} /&gt;)<br/>   })<br/>  )<br/> }<br/>}</span></pre><p id="b54e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">将当前等级初始化为零，我们开始时只有空星。将数据集值分配给恒星的索引加1将定义恒星在线的位置。我们可以通过确定星星的位置是大于、小于还是等于当前评级来有条件地分配图像源和替代文本。如果我们将当前评级指定为2，我们的map方法将返回前2个元素作为填充星，其余的为空。</p><p id="b592" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们快到了！到目前为止，这看起来很棒，但我们需要为我们的用户的行动创造一种方式来更新当前的评级。让我们加入一些事件。</p><pre class="kj kk kl km gt ml mm mn mo aw mp bi"><span id="4a6d" class="kz la in mm b gy mq mr l ms mt">class Stars extends Component {<br/> constructor(props) {<br/>   super(props);<br/>   this.state = {currRating : 0}<br/>   this.onHover = this.onHover.bind(this)<br/>   this.onClick = this.onClick.bind(this) <br/> }</span><span id="689d" class="kz la in mm b gy mu mr l ms mt">onHover(e) {<br/> if (e.target.className === 'star') {<br/>  this.setRating(e.target.dataset.value)<br/> }<br/>}</span><span id="f8be" class="kz la in mm b gy mu mr l ms mt">onClick(e) {<br/> if (e.target.dataset.value === this.state.currRating){<br/>  this.setRating(e.target.dataset.value - 1)<br/> }<br/>}</span><span id="e575" class="kz la in mm b gy mu mr l ms mt">setRating(value) {<br/>  this.setState({currRating : value})<br/>}</span><span id="f470" class="kz la in mm b gy mu mr l ms mt">render(){<br/>  return(<br/>  [...Array(this.props.starCount).keys()].map((index) =&gt; {<br/>  return (<br/>   &lt;img <br/>   onMouseOver={this.onHover}<br/>   onClick={this.onClick}<br/>   data-value={index + 1}<br/>   className="star"   <br/>   src={index + 1 &lt;= this.state.currRating ? <br/>       FilledStar : EmptyStar}<br/>   alt={index + 1 &lt;= this.state.currRating ? <br/>       "filled star" : "empty star"} /&gt;)<br/>   })<br/>  )<br/> }<br/>}</span></pre><p id="eb46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">呜哇！我们的功能需求现在通过向每个被呈现的星形图标添加onMouseOver和onClick动作来满足。请注意，状态已经更新为将“this”绑定到这些操作调用的函数。别忘了这一步！</p><p id="6332" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当用户将鼠标悬停在一颗星星上时，onHover方法检查目标是否是一颗星星，然后将其位置传递给setRating方法，在该方法中，它成为当前评级的新赋值。如果当前评级高于星星的位置，单击星星会将评级降低一级。</p><h2 id="8244" class="kz la in bd lb lc ld dn le lf lg dp lh jv li lj lk jz ll lm ln kd lo lp lq lr bi translated">复习和进一步练习</h2><p id="1b55" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">有几种不同的方法来实现这个特性。您可以尝试使用像useState这样的React挂钩，仅使用功能性组件来获得相同的结果。您也可以使用一个空的星形图像，并利用CSS类有条件地用颜色填充星形。一些评级系统也让用户选择提交部分填充的星。</p><p id="2668" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇教程对你有所帮助，并能激发你尝试自己的想法。请随意使用我下面的代码！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><a class="ae ky" href="https://codesandbox.io/embed/5-star-react-k4n0q?autoresize=1&amp;fontsize=14&amp;hidenavigation=1&amp;theme=dark" rel="noopener ugc nofollow" target="_blank">codesandbox.io</a></figcaption></figure><p id="f82f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mx">更多内容尽在</em><a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mx">plain English . io</em></a></p></div></div>    
</body>
</html>
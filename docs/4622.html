<html>
<head>
<title>How to Get Started with D3.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">D3.js如何入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-get-started-with-d3js-f37a77f7c843?source=collection_archive---------22-----------------------#2021-09-14">https://javascript.plainenglish.io/how-to-get-started-with-d3js-f37a77f7c843?source=collection_archive---------22-----------------------#2021-09-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6f9a9a02749bb6484c2a0c09cdadff3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGyjF-6gOVMpXWExHBCKCA.png"/></div></div></figure><p id="9862" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">D3代表<em class="kt">数据驱动文档</em>是一组JavaScript库，利用web标准创建数据的可视化表示。它由许多单独的库组成，不仅用于可视化，还用于数据处理、获取、事件处理、动画等等。</p><p id="6828" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">D3.js不难学，不需要很深的JavaScript知识，但是因为你可以用它做很多事情，所以你需要一些耐心和练习。</p><p id="6417" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面的小教程将帮助你对它的工作方式有一个基本的了解，并且更有信心使用它。您可以从创建一个空白的HTML文件开始，然后在执行这些步骤时粘贴代码。</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><ol class=""><li id="dca0" class="lb lc in jx b jy jz kc kd kg ld kk le ko lf ks lg lh li lj bi translated"><strong class="jx io">了解SVG </strong></li></ol><p id="d170" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">SVG以XML格式定义了基于矢量的图形。它基本上是用“HTML like”标签和属性来绘制图形。D3Js将动态生成SVG，并使用属性操纵它们。</p><p id="4062" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">SVG图形是可调整大小和缩放的，没有质量损失，因为没有像素，只有位置、长度和命令</p><p id="d3be" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">。svg文件可以用图像编辑器和文本编辑器打开，允许查看它们的“代码”。</p><p id="adc7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建自己的SVG只需要几分钟，这是一个很好的起点。</p><div class="lk ll gp gr lm ln"><a href="https://www.w3schools.com/graphics/svg_reference.asp" rel="noopener  ugc nofollow" target="_blank"><div class="lo ab fo"><div class="lp ab lq cl cj lr"><h2 class="bd io gy z fp ls fr fs lt fu fw im bi translated">SVG参考</h2><div class="lu l"><p class="bd b dl z fp ls fr fs lt fu fw dk translated">www.w3schools.com</p></div></div><div class="lv l"><div class="lw l lx ly lz lv ma jt ln"/></div></div></a></div></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="8ea0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2。基本语法</strong></p><p id="9651" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们从用于选择、创建和修改节点的DOM操作命令开始。在我们开始使用它们之前，我们首先需要加载D3库，将脚本文件的链接放在网页的head部分:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="3ae8" class="mk ml in mg b gy mm mn l mo mp">&lt;script src="https://d3js.org/d3.v7.min.js"&gt;&lt;/script&gt;</span></pre><p id="bd40" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">语法非常简单:</p><ul class=""><li id="80e7" class="lb lc in jx b jy jz kc kd kg ld kk le ko lf ks mq lh li lj bi translated"><a class="ae mr" href="https://github.com/d3/d3-selection" rel="noopener ugc nofollow" target="_blank"> <em class="kt">选择</em> </a> <em class="kt"> : </em>我们的起点，这里是单据体</li><li id="a5f7" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated"><em class="kt"> Append: </em>添加一个子元素，这里的主体添加了一个SVG文档，然后在这个SVG里面添加一个圆圈。</li><li id="c2cf" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated"><em class="kt">属性:</em>设置或修改先前选择或创建的元素的属性</li></ul><p id="48d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们将以下脚本放在网页的正文部分:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="9699" class="mk ml in mg b gy mm mn l mo mp">&lt;script&gt;</span><span id="475c" class="mk ml in mg b gy mx mn l mo mp">  d3.select("body")</span><span id="1fed" class="mk ml in mg b gy mx mn l mo mp">    .append("svg")</span><span id="ec9e" class="mk ml in mg b gy mx mn l mo mp">      .attr("width", 960)</span><span id="6856" class="mk ml in mg b gy mx mn l mo mp">      .attr("height", 500)</span><span id="946d" class="mk ml in mg b gy mx mn l mo mp">    .append("circle")</span><span id="cf81" class="mk ml in mg b gy mx mn l mo mp">      .attr("r", 50)</span><span id="4327" class="mk ml in mg b gy mx mn l mo mp">      .attr("cx", 350)</span><span id="0e9f" class="mk ml in mg b gy mx mn l mo mp">      .attr("cy", 150)</span><span id="da90" class="mk ml in mg b gy mx mn l mo mp">&lt;/script&gt;</span></pre><p id="c4f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您使用web浏览器打开HTML文件，它应该显示一个黑色磁盘，如果没有，请检查库的链接是否存在，以及脚本是否位于正确的部分。</p><p id="4208" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们添加另一个不同半径的圆。首先，我们需要为每个圆圈创建一个单独的容器:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="631d" class="mk ml in mg b gy mm mn l mo mp">&lt;div id="data1"&gt;&lt;/div&gt;<br/>&lt;div id="data2"&gt;&lt;/div&gt;</span></pre><p id="e3ff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要复制代码，用d3.select("#data1 ")和d3.select("#data2 ")替换d3.select("body ")。属性“r”的值也应该不同，以便我们获得两个不同大小的磁盘。</p><p id="cacd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这一点上，我们可以说我们已经创建了一个数据可视化，它只是不是很有用，因为这里的数据仅限于两个值。</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="a900" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 3。数据连接</strong></p><p id="976f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在大型数据集的情况下，我们不能为每个值创建一个容器。</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="6951" class="mk ml in mg b gy mm mn l mo mp">let hdata = [34,19,63,12,46,14,87,11]</span></pre><p id="1742" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><a class="ae mr" href="https://observablehq.com/@d3/selection-join" rel="noopener ugc nofollow" target="_blank">加入</a>将允许我们在同一个容器中，用同一段代码为数据中的每个值创建一个图形元素。</p><p id="b8fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们为<em class="kt"> hdata </em>数组创建一个“类似直方图”的可视化效果。首先，我们在主体部分添加一个新的div，id为<em class="kt"> histo </em>。然后，我们将下面的代码放在我们之前使用的另外两个脚本之后:</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="5f13" class="mk ml in mg b gy mm mn l mo mp">d3.select("#histo")</span><span id="fba7" class="mk ml in mg b gy mx mn l mo mp">.append("svg")</span><span id="95dd" class="mk ml in mg b gy mx mn l mo mp">    .attr("width", 760)</span><span id="abfb" class="mk ml in mg b gy mx mn l mo mp">    .attr("height", 500)</span><span id="1f5d" class="mk ml in mg b gy mx mn l mo mp">.append("g")</span><span id="6fd1" class="mk ml in mg b gy mx mn l mo mp">    .attr("fill", "#6D3A7E")</span><span id="73e7" class="mk ml in mg b gy mx mn l mo mp">    .attr("transform", "translate(200, 0)")</span><span id="8520" class="mk ml in mg b gy mx mn l mo mp">.selectAll("rect")</span><span id="87fc" class="mk ml in mg b gy mx mn l mo mp">.data(hdata)</span><span id="f4fe" class="mk ml in mg b gy mx mn l mo mp">.join("rect")</span><span id="72b3" class="mk ml in mg b gy mx mn l mo mp">    .attr("x", (d,i) =&gt; i * 40)</span><span id="956c" class="mk ml in mg b gy mx mn l mo mp">    .attr("width", 20)</span><span id="2c4c" class="mk ml in mg b gy mx mn l mo mp">    .attr("y", 1)</span><span id="f9c5" class="mk ml in mg b gy mx mn l mo mp">    .attr("height", d =&gt; d);</span></pre><p id="96fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这段代码是做什么的？</p><ul class=""><li id="9475" class="lb lc in jx b jy jz kc kd kg ld kk le ko lf ks mq lh li lj bi translated">选择id为“histo”的目标容器</li><li id="3c37" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated">创建一个SVG，然后创建一个分组“g ”,并在200的右边为它包含的所有元素分配一个颜色和一个翻译。</li><li id="ba68" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated">选择All "rect ":在创建元素之前选择元素</li><li id="66bf" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated"><em class="kt">数据(hdata) </em>:分配数据</li><li id="0cb0" class="lb lc in jx b jy ms kc mt kg mu kk mv ko mw ks mq lh li lj bi translated"><em class="kt">join</em>:join语句后的命令将应用于每个创建的“rect”元素:</li></ul><p id="5365" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">&gt;“x”值(水平位置)是数组索引* 40</p><p id="0708" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">&gt;“高度”是数组中的当前值</p><p id="c700" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">&gt;每个矩形的“宽度”是20</p><p id="5fc3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">&gt;所有矩形的“y”(垂直位置)都相同。</p></div><div class="ab cl ku kv hr kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ig ih ii ij ik"><p id="0125" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 4。挑选例子并开始破解</strong></p><p id="d086" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你很可能不需要从头开始编写所有的代码，一旦你掌握了基础知识，你就可以从例子中借鉴，做一些修改，看看效果如何。感谢您的阅读！</p><p id="92c9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">更多内容请看</em><a class="ae mr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
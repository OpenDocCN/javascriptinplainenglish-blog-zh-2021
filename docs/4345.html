<html>
<head>
<title>This Empty NPM Package Has Over 700,000 Downloads</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这个空的NPM包有超过70万的下载量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/this-empty-npm-package-has-over-700-000-downloads-7718b48bf997?source=collection_archive---------0-----------------------#2021-08-30">https://javascript.plainenglish.io/this-empty-npm-package-has-over-700-000-downloads-7718b48bf997?source=collection_archive---------0-----------------------#2021-08-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e515" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">原因如下。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/454507eaa06bc2fbd1f23168d2bc52b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PmmT9CQw0ONSPapq"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@kadh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kira auf der Heide</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e379" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我告诉你这个不起眼的软件包，它在过去的一年里产生了超过70万次的下载。</p><p id="60c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个包的名字是<code class="fe ls lt lu lv b">-</code>，它实际上什么也不做。它包含通常的空样板。然而，人们仍然为他们的项目下载它。我无法理解，所以我做了点调查。</p><p id="8336" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这个故事中，我将分享我的发现。</p><h1 id="a309" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">为什么有人下载它？</h1><p id="5bf5" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">令人难以置信的是，人们真的在下载这个包。下载量每月都在上升。下图说明了自软件包在npm上发布以来的下载次数。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mt"><img src="../Images/eb4e66728792d258eaff97ac16ff055a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O4iBgSG62IShKzkUYWexCg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Number of downloads per month (source: <a class="ae kv" href="https://npm-stat.com/charts.html?package=-&amp;from=2020-01-25&amp;to=2021-08-25" rel="noopener ugc nofollow" target="_blank">npm-stat</a>)</figcaption></figure><p id="3566" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是如果你对此感到惊讶，等我告诉你更疯狂的部分。它被用作60多个npm包的依赖项。我感觉会有一些读者质疑这种说法。</p><p id="2c37" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我直接从npm上截图了。但是如果你还觉得我只是个Photoshop高手，你可以<a class="ae kv" href="https://www.npmjs.com/package/-" rel="noopener ugc nofollow" target="_blank">自己去</a>看看。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mu"><img src="../Images/d19c77b025a1c553eec7f5ed00acba02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XF6v7j1yj7TPrYPZspqe5g.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Number of dependents (source: <a class="ae kv" href="https://www.npmjs.com/package/-" rel="noopener ugc nofollow" target="_blank">npm</a>)</figcaption></figure><p id="2529" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">起初，我认为这就是为什么它有这么多下载。我打赌你也在考虑这个问题。但这与事实相差甚远。事实上，所有这些软件包都只有少量下载。</p><p id="1277" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">虽然他们可能会产生一些额外的下载量，但这还远远不是最终的数字。那么这些下载都是从哪里来的呢？这是谜题的最后一块，我一会儿就给你揭晓。</p><p id="276d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我告诉你，你也把它下载到你的项目里了。它在你不知情的情况下发生了。也许它现在正静静地坐在你的<code class="fe ls lt lu lv b">package.json</code>里。你对此一无所知。也许你是那70万人中的一员。</p><p id="ff2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但它怎么会在那里？</p><p id="08a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们都知道，为了安装npm包，我们需要运行以下命令之一。或者事实上，它的许多变体。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="a656" class="mz lx iq lv b gy na nb l nc nd">npm i package</span><span id="679d" class="mz lx iq lv b gy ne nb l nc nd"># or</span><span id="a3e3" class="mz lx iq lv b gy ne nb l nc nd">npm install --save package</span><span id="818b" class="mz lx iq lv b gy ne nb l nc nd"># or </span><span id="670d" class="mz lx iq lv b gy ne nb l nc nd">npm i -g package</span></pre><p id="2635" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为你和我都是人，我们容易犯错。有时你按空格键太早，有时你忘了一个字母。或者如果你像我一样，有时你最终会写出完全不同的东西。重点是，打错字非常容易。注意<code class="fe ls lt lu lv b">-</code>和<code class="fe ls lt lu lv b">g</code>之间的空间。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="d16e" class="mz lx iq lv b gy na nb l nc nd">npm i - g package</span></pre><p id="b4cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是如何将<code class="fe ls lt lu lv b">-</code>安装到你的项目中的一个例子。</p><p id="6434" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我很好奇想在我的系统上尝试一下。除了错误之外，我看不出这会导致什么别的结果。但是你可以想象当命令成功完成时我有多惊讶。我的项目增加了3个新成员。他们的名字分别是<code class="fe ls lt lu lv b">-</code> <code class="fe ls lt lu lv b">g</code>和<code class="fe ls lt lu lv b">package</code>。</p><p id="71d3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可能已经猜到了。下载量高是用户打字错误的结果。在npm命令中犯了一个愚蠢的错误。你可能会得到你不想要的包裹。就像我和我的三个朋友一样。不用说，我们的友谊没有持续多久。</p><p id="2f7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在你知道所有下载背后的原因了。让我们进一步检查一下这个包裹。它真的什么都不做吗？作者对此有什么看法？</p><h1 id="8ed9" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">包裹里面是什么？</h1><p id="059d" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">我花时间亲自查看了这个包的源代码。但是很快，我遇到了一个小问题。你见过没有Github库的npm包吗？今天，我找到了第一个。直到今天，我都不知道这是可能的。</p><p id="786a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不管怎样，经过几分钟的侦探工作。我追踪到了作者和他的Github档案。幸运的是，这个库是公开的。考虑到它的内容，这很有意义。</p><p id="74cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我找到了正确的存储库，并最终能够检查它。我立刻意识到，这个包裹就像男人的乳头一样有用。除了配置文件。在<code class="fe ls lt lu lv b">src</code>目录中只有一个<code class="fe ls lt lu lv b">index.ts</code>文件。它包含以下代码。</p><pre class="kg kh ki kj gt mv lv mw mx aw my bi"><span id="7329" class="mz lx iq lv b gy na nb l nc nd">export default null;</span></pre><p id="defc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我知道这不算多。但正如我的同事常说的，“你做得越少，你打破的就越少。”</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/d1046d189e303df536b91aad6b45c04c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*iTnk_ASzXCFzdBvPmO2z5A.gif"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">GIF by <a class="ae kv" href="https://giphy.com/gifs/culture--think-hmm-d3mlE7uhX8KFgEmY" rel="noopener ugc nofollow" target="_blank">Giphy</a></figcaption></figure><p id="17c6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不禁想知道为什么要创建这个包。事实上，它为什么会被出版？然后这个想法闪过我的脑海。这位作者是某种狡猾的骗子。努力在npm的世界里出名。</p><p id="9858" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但我们不能只凭我的猜测。我们必须进一步调查。</p><h1 id="e940" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">作者是谁？</h1><p id="fddf" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">正如我已经提到的，我找到了作者。我打赌你在想包裹后面的神秘人是谁。他的名字是Dmitry Parzhitsky，从他的知识库来看，他喜欢打字稿。</p><p id="3d3d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如德米特里在<a class="ae kv" href="https://www.bleepingcomputer.com/" rel="noopener ugc nofollow" target="_blank">哔哔声电脑</a>的采访中明确表示的，他无意以任何方式对任何人造成任何伤害。这个方案背后的想法很简单。测试是否有可能向npm注册表发布一个名为<code class="fe ls lt lu lv b">-</code>的包。</p><p id="d4a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很明显是这样。</p><p id="4a1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">Dmitry还澄清说，虽然该软件包目前没有任何作用，但他计划通过在人们试图意外安装它时抛出错误信息来扩展它。虽然这听起来毫无意义，但它最终可以为您节省1kb的包大小。</p><p id="c4a4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">既然我们发现了作者是谁。以及<code class="fe ls lt lu lv b">-</code>背后的动机是什么。很明显，这个包裹没有造成任何伤害，将来也不会。但是<code class="fe ls lt lu lv b">-</code>并不是唯一的解决方案。其他人呢？还有有没有什么安全性要考虑？</p><h1 id="822c" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">为什么会有危险？</h1><p id="8415" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">可以说，现在<code class="fe ls lt lu lv b">-</code>中没有任何东西让它变得恶意。然而，我们应该小心像<code class="fe ls lt lu lv b">-</code>这样的包不要意外地溜进我们的构建中。</p><p id="c622" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有其他单字母包裹的例子。举几个例子:<a class="ae kv" href="https://www.npmjs.com/package/i" rel="noopener ugc nofollow" target="_blank"> i </a>、<a class="ae kv" href="https://www.npmjs.com/package/g" rel="noopener ugc nofollow" target="_blank"> g </a>、<a class="ae kv" href="https://www.npmjs.com/package/install" rel="noopener ugc nofollow" target="_blank">安装</a>或<a class="ae kv" href="https://www.npmjs.com/package/s" rel="noopener ugc nofollow" target="_blank"> s </a>。都不危险，但还是有潜在风险。如果有不纯意图的人误用这个命名怎么办？你很容易因为一个愚蠢的打字错误而导致不必要的依赖。</p><p id="b3ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个问题是，在安装软件包时，npm会显示一条摘要成功消息。它不会向您显示安装了哪些软件包。它只显示最终的数字。谢谢你认为，结束一个不必要的依赖可能更容易。</p><h1 id="056a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">总结想法</h1><p id="9a8a" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">正如我们今天所学的，在终端中键入npm命令时，我们应该注意。尤其是使用标志的时候。不时检查和审计你的<code class="fe ls lt lu lv b">package.json</code>也不会伤害你。</p><p id="382b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不知道你，但当我第一次听说这件事时，我立即查看了我的<code class="fe ls lt lu lv b">package.json</code>档案。问题是，你会吗？</p><div class="ng nh gp gr ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/i-left-my-job-because-of-typescript-3df0cb38bdbf"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">因为打字稿，我离职了</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">所以你可以从我的错误中吸取教训</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a rel="noopener  ugc nofollow" target="_blank" href="/dear-developer-this-is-how-you-center-a-div-e526e7cfcc9d"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">亲爱的开发者:这就是你如何将一个Div居中</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">让我们一起终结迷因</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kp nj"/></div></div></a></div><p id="bc82" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nz">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="nz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
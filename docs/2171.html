<html>
<head>
<title>Create a Complete Satellite Tracker from Scratch in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript从头开始创建一个完整的卫星跟踪器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-satellite-tracker-completely-in-javascript-9bc1ca61f6aa?source=collection_archive---------8-----------------------#2021-05-07">https://javascript.plainenglish.io/create-a-satellite-tracker-completely-in-javascript-9bc1ca61f6aa?source=collection_archive---------8-----------------------#2021-05-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/3566750c6858699a2c81083a6bfd18a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QlzNP0jaa5iQ28d5X599lg.jpeg"/></div></div></figure><div class=""/><p id="1c50" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">本教程将带你了解如何创建一个web应用程序，实时可视化任何卫星的位置，如国际空间站。</p><p id="699e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将从头开始，使用真正的火箭科学家会使用的相同技术！</p><ol class=""><li id="97dd" class="kt ku iy jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">我们将看看从哪里获得政府发布的关于单个卫星的数据，称为<strong class="jx iz">双线元素集</strong>，或TLE的。</li><li id="88a2" class="kt ku iy jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">我们将使用<a class="ae lh" href="https://github.com/shashwatak/satellite-js" rel="noopener ugc nofollow" target="_blank">卫星-js </a>来预测卫星的轨道(这是火箭科学的一部分)。</li><li id="9612" class="kt ku iy jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">我们将使用<a class="ae lh" href="https://github.com/CesiumGS/cesium#readme" rel="noopener ugc nofollow" target="_blank"> CesiumJS </a>来可视化结果，但是您可以使用任何可以接收经度、纬度和高度的库/引擎。</li></ol><p id="e9cd" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是最终结果的预览。</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="509c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是国际空间站的路径，速度加快了40倍。要<strong class="jx iz">实时查看其当前位置</strong>，点击时钟轮左上角的时钟图标。</p><p id="cb7c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里有一个<a class="ae lh" href="https://satellite-viewer.glitch.me/" rel="noopener ugc nofollow" target="_blank">到应用</a>的直接链接。以及毛刺上的<a class="ae lh" href="https://glitch.com/edit/#!/satellite-viewer" rel="noopener ugc nofollow" target="_blank">源代码。</a></p><h1 id="19f0" class="lo lp iy bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">1-获取卫星的双线元素集</h1><p id="a0d2" class="pw-post-body-paragraph jv jw iy jx b jy mm ka kb kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks ig bi translated">双线元素集(TLE)是一种描述绕地球运行的物体运动的数据格式。它是由北美防空司令部(NORAD)创建的。你可以<a class="ae lh" href="https://celestrak.com/columns/v04n03/" rel="noopener ugc nofollow" target="_blank">在这里阅读更多关于它和它的历史。</a></p><p id="288e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">给定轨道的描述，我们可以预测它在任何时刻的位置(这是下面的第二步)。</p><p id="ab0f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">这意味着大多数“实时”卫星追踪器并不像在地图上追踪送货车那样实时</strong>。那些跟踪太空中物体的人将经常获得最新的TLE(定期更新),并使用它来预测物体现在的位置，而不是依赖于不断接收位置更新。</p><p id="3feb" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们在哪里得到TLE的？没有一个全球性的官方登记册。无论是谁拥有卫星并对其进行监控，都有责任为全球空间社区的利益更新和发布TLE(除非它是一颗间谍卫星)。</p><p id="86aa" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们可以在<a class="ae lh" href="https://www.space-track.org" rel="noopener ugc nofollow" target="_blank">太空跟踪</a>上找到这些TLE，这是一个由美国太空司令部运行的注册表。</p><p id="9e53" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另一个来源是T.S. Kelso博士维护的CeleStrak清单。</p><p id="c2c1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将使用CeleStrak，因为它不需要登录。要找到国际空间站的TLE，点击<a class="ae lh" href="https://celestrak.com/NORAD/elements/stations.txt" rel="noopener ugc nofollow" target="_blank">空间站</a>链接。</p><p id="5fb7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">第一个是国际空间站的TLE:</p><pre class="li lj lk ll gt mr ms mt mu aw mv bi"><span id="5839" class="mw lp iy ms b gy mx my l mz na">ISS (ZARYA)             <br/>1 25544U 98067A   21122.75616700  .00027980  00000-0  51432-3 0  9994<br/>2 25544  51.6442 207.4449 0002769 310.1189 193.6568 15.48993527281553</span></pre><p id="3068" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这些数字的含义在T.S. Kelso博士的一栏的表1中列出。其中大部分是卫星的标识符和元数据，比如卫星发射的时间。</p><p id="6fa9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可以找到气象卫星、GPS卫星甚至SpaceX的Starlink星座的TLE格式。</p><h1 id="da91" class="lo lp iy bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">2 —预测卫星轨道</h1><p id="3b98" class="pw-post-body-paragraph jv jw iy jx b jy mm ka kb kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks ig bi translated">既然你已经知道如何获得你感兴趣的物体的TLE，下一步就是把它转换成一个时间位置。</p><p id="7d99" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为此，我们将使用<a class="ae lh" href="https://github.com/shashwatak/satellite-js" rel="noopener ugc nofollow" target="_blank"> satellite-js </a>。</p><p id="fd5c" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">包括来自CDN的库:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="37b4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后把TLE传给它，一次:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="d04b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们有了卫星当前的位置，<code class="fe nb nc nd ms b">new Date()</code>。</p><p id="5abf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个位置是模拟卫星运动的特定模型的结果。这个模型叫做SGP4/SDP4。所有TLE都采用这种特定模型。</p><p id="acfd" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你想知道这个模型的准确性，简短的回答是，<a class="ae lh" href="https://celestrak.com/columns/v04n05/#FAQ06" rel="noopener ugc nofollow" target="_blank">这取决于</a>。</p><blockquote class="ne nf ng"><p id="0518" class="jv jw nh jx b jy jz ka kb kc kd ke kf ni kh ki kj nj kl km kn nk kp kq kr ks ig bi translated"><em class="iy">双线元素集的精度取决于许多因素。这些因素包括使用的特定传感器和收集的数据量，以及轨道类型和空间环境条件。不幸的是，由于这些因素因每个元素集而异，所以准确性也不同。虽然NORAD已经试验了将预测质量结合到元素集中的方法，但是这些方法中没有一个被证明是成功的。</em></p></blockquote><h1 id="01ca" class="lo lp iy bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">3 —可视化结果</h1><p id="6699" class="pw-post-body-paragraph jv jw iy jx b jy mm ka kb kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks ig bi translated">现在，我们有办法在任何给定时间获取任何卫星的位置。我们可以穿越到未来的时间来制作它的路径动画，这将在下一步中进行。</p><p id="3e41" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，让我们看看如何使用CesiumJS可视化空间中的单个点。</p><p id="7793" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们从CDN加载库:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="f747" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并创建一个容器元素:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="3230" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们初始化查看器。这里我们传递一些额外的选项来禁用需要访问令牌的功能:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="7211" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们将卫星位置想象成空间中的一个红点:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="6aba" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">关于Glitch 参见simple.html<a class="ae lh" href="https://glitch.com/edit/#!/satellite-viewer?path=simple.html" rel="noopener ugc nofollow" target="_blank">该步骤的完整源代码。</a></p><h1 id="8419" class="lo lp iy bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">4-动画显示路径</h1><p id="453f" class="pw-post-body-paragraph jv jw iy jx b jy mm ka kb kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks ig bi translated">为了动画化路径，我们只需要在未来采样更多的位置。CesiumJS有一种内置的方法可以在这些样本之间进行插值。</p><p id="5f16" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个设置有点冗长。<a class="ae lh" href="https://glitch.com/edit/#!/satellite-viewer?path=index.html%3A6%3A82" rel="noopener ugc nofollow" target="_blank">你可以在Glitch </a>上看到完整代码。重要的概念描述如下。</p><p id="7b5f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们创建一个<code class="fe nb nc nd ms b">SampledPositionProperty</code>。这是一个随时间推移保存位置样本并将在它们之间进行插值的对象:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="7a66" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们遍历所有想要获取的样本，对于每个样本，我们构造一个时间对象(在CesiumJS中称为<code class="fe nb nc nd ms b">JulianDate</code>)和一个位置，并将其作为样本添加:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="c05b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们将这个<code class="fe nb nc nd ms b">positionsOverTime</code>对象传递给我们。</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="8076" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该点将随着底部时间轴的移动而移动。要将摄像机连接到移动点，我们需要:</p><figure class="li lj lk ll gt ip"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h1 id="6111" class="lo lp iy bd lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml bi translated">结论</h1><p id="87ef" class="pw-post-body-paragraph jv jw iy jx b jy mm ka kb kc mn ke kf kg mo ki kj kk mp km kn ko mq kq kr ks ig bi translated">我希望你喜欢学习一点关于建造卫星追踪器的知识。这个主题还有很多我们没有触及的内容，比如TLE中的参数到底是什么意思？它们多久更新一次？它们是如何更新的？</p><p id="1e2e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我不知道，但我发现知道这种数据以什么格式发布以及在哪里获得它真的很有力量，而且非常令人惊讶的是，我们可以用JavaScript直接在浏览器中完成所有这些工作！</p><p id="7e65" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们可以这样做了，这里有几个有趣的想法可以探索:</p><p id="b47b" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">可视化多个卫星</strong>，就像整个Starlink星座。灵感来自<a class="ae lh" href="https://celestrak.com/cesium/orbit-viz.php?tle=/pub/TLE/catalog.txt&amp;satcat=/pub/satcat.txt&amp;referenceFrame=1" rel="noopener ugc nofollow" target="_blank"> Celestrak的查看器</a>，它显示了目录中的每颗卫星。也许想象一下Starlink卫星的数量是如何随着时间的推移而增长的？</p><p id="357d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx iz">或者模拟从街面看上去的样子</strong>。也许添加建筑物/高程数据来找到城市中看卫星的最佳位置？</p><p id="4094" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Glitch源代码的<a class="ae lh" href="https://glitch.com/edit/#!/satellite-viewer?path=street-level.html%3A1%3A0" rel="noopener ugc nofollow" target="_blank">street-level.html</a>中有一个这样的原型。演示:<a class="ae lh" href="https://satellite-viewer.glitch.me/street-level.html" rel="noopener ugc nofollow" target="_blank">https://satellite-viewer.glitch.me/street-level.html</a>。</p><figure class="li lj lk ll gt ip gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/1070224eeaec33f0a30ae3105b41fc2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Hn4rzImReFMIlObMbLwjoQ.gif"/></div></figure><p id="9fd5" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">另见<a class="ae lh" href="https://james.darpinian.com/satellites/" rel="noopener ugc nofollow" target="_blank">詹姆斯·达皮尼安的“今晚看卫星”</a>应用，该应用结合了CesiumJS和谷歌街景。</p><p id="4dc1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用合适比例的3D模型而不是点也可能很有趣，并且可以真实地感受到卫星在太空中相互之间有多近。</p></div><div class="ab cl nm nn hr no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ig ih ii ij ik"><p id="a2c3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">感谢阅读！如果你觉得这很有帮助，请在Twitter @Omar4ur 上关注我，查看我的更多作品。否则，你也可以在这里找到我<a class="ae lh" href="https://omarshehata.me/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="0e14" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nh">更多内容尽在</em><a class="ae lh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nh">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Store API Credentials</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何存储应用编程接口凭据</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-store-b2b-api-credentials-c207b4991160?source=collection_archive---------5-----------------------#2021-05-01">https://javascript.plainenglish.io/how-to-store-b2b-api-credentials-c207b4991160?source=collection_archive---------5-----------------------#2021-05-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3634" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在保守秘密的同时保持内心平静？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9b3aae17ef62bf4af6936fea6a85810a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SMODSuOjogD9HFyT006Y_A.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@contradirony?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Samantha Lam</a> on <a class="ae ks" href="https://unsplash.com/s/photos/keys?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2456" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">信息技术历史上充斥着保守秘密的失败，比如在一个阴暗的网站上出售数百万的用户名和密码。存储凭据比看起来要困难得多。</p><p id="0c8d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我最近不得不解决这个任务的一个变体。在将运输服务集成到电子商务网站时，我偶然发现了一个简单的问题:如何在商店数据库中存储运输服务的API凭据？</p><p id="fd7e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">挑战在于我们不能像对待用户密码那样使用散列法(这篇<a class="ae ks" href="https://nakedsecurity.sophos.com/2013/11/20/serious-security-how-to-store-your-users-passwords-safely/" rel="noopener ugc nofollow" target="_blank">优秀的文章</a>详细解释了为什么散列法是用户密码唯一安全的选择)。我们需要凭据来访问API，因此我们需要在从商店检索时显示它们——如下图所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lp"><img src="../Images/90797befc0637ebfc86c9aaab047bcbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2UeyHhGhGYtvMICzTFEFVg.png"/></div></div></figure><h1 id="2e3a" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated"><strong class="ak">一液</strong></h1><p id="5d3c" class="pw-post-body-paragraph kt ku in kv b kw mi jo ky kz mj jr lb lc mk le lf lg ml li lj lk mm lm ln lo ig bi translated">想到加密。今天，AES-256位加密被认为是最先进的，因为尝试所有的密钥直到你得到正确的密钥可能需要大量的资源和很长的时间。然而，加密本身也有风险。在最简单的情况下，一个没有大脑的用户选择“T7”密码作为密码，突然潜在的黑客可能会有一个更简单的任务，因为他们只需要尝试直到<em class="mn">密码</em>被发现。</p><p id="f60a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">规避这个问题的一个方法是在加密凭证之前<strong class="kv io">混淆</strong>凭证<strong class="kv io">。这可以非常容易和快速地完成。</strong></p><p id="bd81" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这个想法很简单:让我们将凭证字符分散在一个更大的字符串中——就像在一盘盐中撒一些胡椒一样。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="c093" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在<code class="fe mq mr ms mt b">saltCredentials</code>的第n个字节之间连续插入输入<code class="fe mq mr ms mt b">crds</code>中的每个字符，并注意使后者足够长以容纳全部输入。对于反向提取，我们还需要保持原始长度和步长的增加。在加密之前，我们将该信息存储在生成的有效载荷的前两个字节中。</p><p id="24af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">相反的过程同样简单。我们首先解密，然后从有效载荷的前两个字节中提取元信息。然后循环提取盐中的原始胡椒。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="9f65" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是防黑客的吗？不。如果黑客打算把资源花在破解您的方案上，他们会处理的。这会让事情更难吗？很可能，尤其是因为他们无法分辨哪个解密密钥是正确的。最后一步是隐藏软件，这很容易通过用<code class="fe mq mr ms mt b">php</code>包装器封装来完成。</p><p id="e73f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">顺便说一句:还有许多其他方法来混淆文本。上面的是一个极端的简化，我们在这里展示它只是为了启发你想出自己的解决方案。开心莫名其妙！</p><p id="6559" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">完整代码在<a class="ae ks" href="https://gist.github.com/zapalote/7deff5056e16e9e373b380db8c3d0f68" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上。欢迎评论和改进。</p><p id="5668" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢您的阅读。我希望这很有趣。</p><p id="646e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mn">更多内容尽在</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T5】plain English . ioT7】</a></p></div></div>    
</body>
</html>
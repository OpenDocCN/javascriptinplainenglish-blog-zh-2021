<html>
<head>
<title>Create a Currency Converter with React and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和JavaScript创建一个货币转换器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-currency-converter-with-react-and-javascript-939535c28fb0?source=collection_archive---------18-----------------------#2021-05-18">https://javascript.plainenglish.io/create-a-currency-converter-with-react-and-javascript-939535c28fb0?source=collection_archive---------18-----------------------#2021-05-18</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/6e87916df86a9c1a68056096c47ba408.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NKC-rPySYjrLsf1Y"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@macauphotoagency?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Macau Photo Agency</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7fa2" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个易于使用的JavaScript框架，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何使用React和JavaScript创建货币转换器。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Create React App创建React项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app currency-converter</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起创建我们的React项目。</p><h1 id="33e3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建货币转换器</h1><p id="e01d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建货币转换器，我们编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="23de" class="mn lc iq mj b gy mo mp l mq mr">import React, { useMemo, useState } from "react";</span><span id="8aa8" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [value, setValue] = useState(0);<br/>  const [fromCurrency, setFromCurrency] = useState("");<br/>  const [toCurrency, setToCurrency] = useState("");<br/>  const [currencies] = useState(["EUR", "USD", "CAD"]);<br/>  const [result, setResult] = useState(0);</span><span id="bc18" class="mn lc iq mj b gy ms mp l mq mr">  const fromCurrencies = useMemo(() =&gt; {<br/>    return currencies.filter((c) =&gt; c !== toCurrency);<br/>  }, [currencies, toCurrency]);</span><span id="504f" class="mn lc iq mj b gy ms mp l mq mr">  const toCurrencies = useMemo(() =&gt; {<br/>    return currencies.filter((c) =&gt; c !== fromCurrency);<br/>  }, [currencies, fromCurrency]);</span><span id="d7d8" class="mn lc iq mj b gy ms mp l mq mr">  const convert = async (e) =&gt; {<br/>    e.preventDefault();<br/>    const formValid = +value &gt;= 0 &amp;&amp; fromCurrency &amp;&amp; toCurrency;<br/>    if (!formValid) {<br/>      return;<br/>    }<br/>    const res = await fetch(<br/>      `https://api.exchangeratesapi.io/latest?base=${fromCurrency}`<br/>    );<br/>    const { rates } = await res.json();<br/>    setResult(+value * rates[toCurrency]);<br/>  };</span><span id="ec27" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div&gt;<br/>      &lt;form onSubmit={convert}&gt;<br/>        &lt;div&gt;<br/>          &lt;label&gt;value&lt;/label&gt;<br/>          &lt;input value={value} onChange={(e) =&gt; setValue(e.target.value)} /&gt;<br/>        &lt;/div&gt;<br/>        &lt;div&gt;<br/>          &lt;label&gt;from currency&lt;/label&gt;<br/>          &lt;select<br/>            value={fromCurrency}<br/>            onChange={(e) =&gt; setFromCurrency(e.target.value)}<br/>          &gt;<br/>            {fromCurrencies.map((c) =&gt; (<br/>              &lt;option key={c}&gt;{c}&lt;/option&gt;<br/>            ))}<br/>          &lt;/select&gt;<br/>        &lt;/div&gt;<br/>        &lt;div&gt;<br/>          &lt;label&gt;to currency&lt;/label&gt;<br/>          &lt;select<br/>            value={toCurrency}<br/>            onChange={(e) =&gt; setToCurrency(e.target.value)}<br/>          &gt;<br/>            {toCurrencies.map((c) =&gt; (<br/>              &lt;option key={c}&gt;{c}&lt;/option&gt;<br/>            ))}<br/>          &lt;/select&gt;<br/>        &lt;/div&gt;<br/>        &lt;button type="submit"&gt;convert&lt;/button&gt;<br/>      &lt;/form&gt;<br/>      &lt;div&gt;<br/>        {value} {fromCurrency} is {result.toFixed(2)} {toCurrency}<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="e77e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个<code class="fe mt mu mv mj b">value</code>状态，存储要转换的货币值。</p><p id="8f0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">fromCurrency</code>有可兑换的货币。</p><p id="69b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">toCurrency</code>有可兑换的货币，</p><p id="7970" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">currencies</code>有货币选择。</p><p id="0441" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">result</code>有转换的结果。</p><p id="cae9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">fromCurrencies</code>有我们可以选择转换的选项。</p><p id="c9bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们使用带有回调的<code class="fe mt mu mv mj b">useMemo</code>钩子返回我们可以选择的所有货币。</p><p id="8801" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们从返回的数组中排除了<code class="fe mt mu mv mj b">toCurrency</code>值。</p><p id="9a40" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">第二个参数具有要监视的值，以便第一个回调再次运行来更新返回值。</p><p id="c484" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们用同样的方法来定义<code class="fe mt mu mv mj b">toCurrencies</code>，但是我们排除了<code class="fe mt mu mv mj b">fromCurrency</code>值。</p><p id="f628" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们定义执行货币转换的<code class="fe mt mu mv mj b">convert</code>函数。</p><p id="cbde" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在它内部，我们调用<code class="fe mt mu mv mj b">e.preventDefault()</code>让我们进行客户端表单提交。</p><p id="a5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们检查<code class="fe mt mu mv mj b">value</code>是否大于0，并且<code class="fe mt mu mv mj b">fromCurrency</code>和<code class="fe mt mu mv mj b">toCurrency</code>是否被设置。</p><p id="8a9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果所有条件都满足，我们就从汇率API中获取汇率。</p><p id="4dc5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">setResult</code>来计算转换后的货币值。</p><p id="c26c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们添加表单让我们输入值。</p><p id="bc9f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">它将<code class="fe mt mu mv mj b">onSubmit</code>属性设置为<code class="fe mt mu mv mj b">convert</code>函数，当我们单击类型为<code class="fe mt mu mv mj b">submit</code>的按钮时，该函数就会运行。</p><p id="0071" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">其中有一个输入用于设置<code class="fe mt mu mv mj b">value</code>。</p><p id="236f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">e.target.value</code>有输入值。</p><p id="5d19" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">每当我们改变输入的值时,<code class="fe mt mu mv mj b">onChange</code>就会运行。</p><p id="35c1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">同样，我们有选择下拉框，让我们分别选择要转换的货币。</p><p id="2015" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">value</code>和<code class="fe mt mu mv mj b">onChange</code>属性设置它们的值。</p><p id="527b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在select元素中呈现<code class="fe mt mu mv mj b">fromCurrencies</code>和<code class="fe mt mu mv mj b">toCurrencies</code>来呈现选择。</p><p id="a82a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在表单下方，我们向用户显示结果。</p><p id="9daa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">toFixed</code>方法返回带有我们传入的小数位数的数字的字符串形式。</p><h1 id="e32f" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="d772" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用React和JavaScript创建一个货币转换器。</p><p id="9a4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容尽在</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Webcam Functionality Using JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用JavaScript添加网络摄像头功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-webcam-functionality-using-javascript-4797e3f2e616?source=collection_archive---------6-----------------------#2021-04-03">https://javascript.plainenglish.io/how-to-add-webcam-functionality-using-javascript-4797e3f2e616?source=collection_archive---------6-----------------------#2021-04-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="edde" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">让我们使用JavaScript将网络摄像头集成到网页中。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/b166bd17920c1c659f3394141b5d9294.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2k8MlYm9JXYWIFmr"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@cwmonty?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Montgomery</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2d0c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如今，许多网站都集成了实时网络摄像头，用于个人资料图片上传、验证、在线通话或流媒体等用途。所以这是一个很好的功能，可以放在你的网站或网络应用上。</p><p id="e561" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将学习如何使用普通JavaScript将网络摄像头集成到网页中。所以让我们开始吧。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="4c91" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">HTML结构</h1><p id="acc7" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了使用JavaScript访问网页中的用户摄像头，我们首先需要使用HTML标签<code class="fe mw mx my mz b">&lt;video&gt;</code>。这是我们将显示网络摄像头输出的地方。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="3d71" class="ne ma iq mz b gy nf ng l nh ni"><strong class="mz ir">&lt;video autoplay&gt;&lt;/video&gt;</strong></span></pre><p id="017e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，让我们创建一个简单的HTML结构，其中包含标签<code class="fe mw mx my mz b">&lt;video&gt;</code>和两个按钮(开始和停止)，这将允许我们停止和启动网络摄像头。</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="05a7" class="ne ma iq mz b gy nf ng l nh ni">&lt;body&gt;<br/>  &lt;div class="container"&gt;<br/>    <strong class="mz ir">&lt;video autoplay&gt;&lt;/video&gt;</strong><br/>    <br/>    &lt;div class="buttons"&gt;<br/>      &lt;button <strong class="mz ir">onclick="startWebCam()"</strong>&gt;Start&lt;/button&gt;<br/>      &lt;button <strong class="mz ir">onclick="StopWebCam()"</strong>&gt;Stop&lt;/button&gt;<br/>    &lt;/div&gt;</span><span id="3b02" class="ne ma iq mz b gy nj ng l nh ni">&lt;/div&gt;<br/>&lt;/body&gt;</span></pre><p id="bbd1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，这是一个简单的HTML结构。现在我们需要在JavaScript中创建两个函数<code class="fe mw mx my mz b">startWebCam</code>和<code class="fe mw mx my mz b">stopWebCam</code>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2328" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">JavaScript部分</h1><p id="5e3d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了访问网络摄像头，我们将使用<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator" rel="noopener ugc nofollow" target="_blank"> navigator </a> web API。</p><p id="2ef3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这个API有很多功能，比如访问网络摄像头、音频、设备屏幕、设备内存等等。</p><p id="fc2d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们需要选择视频元素:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="8daa" class="ne ma iq mz b gy nf ng l nh ni">const video = document.querySelector('video');</span></pre><p id="65fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们创建函数<code class="fe mw mx my mz b">startWebCam</code>来访问和显示视频标签中的摄像头输出。</p><p id="68e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是代码示例:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="332c" class="ne ma iq mz b gy nf ng l nh ni">const startWebCam = () =&gt;{<br/><br/>if (<strong class="mz ir">navigator.mediaDevices.getUserMedia</strong>) {     <strong class="mz ir">navigator.mediaDevices.getUserMedia</strong>({ <strong class="mz ir">video: true</strong> })<br/>  .<strong class="mz ir">then</strong>(stream =&gt; video.srcObject = stream)<br/>  .<strong class="mz ir">catch</strong>(error =&gt; console.log(error));<br/> }<br/>}<br/>startWebCam();</span></pre><p id="8649" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如你在上面看到的，我们使用了<code class="fe mw mx my mz b">navigator.mediaDevices.getUserMedia</code>来获得用户访问带有视频轨道选项的网络摄像头的许可。这就是为什么我们通过<code class="fe mw mx my mz b">{video: true}</code>来告诉我们想要访问网络摄像头，而不是音频。</p><p id="8441" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">方法<code class="fe mw mx my mz b">getUserMedia()</code>返回一个承诺，当用户允许访问网络摄像头时解决，当用户拒绝权限时拒绝。这就是为什么我们使用<code class="fe mw mx my mz b">.then</code>和<code class="fe mw mx my mz b">.catch</code>来处理承诺。</p><p id="7218" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在让我们创建一个函数<code class="fe mw mx my mz b">stopWebCam()</code>,当点击<em class="nk">停止</em>按钮时，停止视频轨道并关闭网络摄像头。</p><p id="08fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是代码示例:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="0657" class="ne ma iq mz b gy nf ng l nh ni">// Stop the webcam.<br/>const StopWebCam = ()=&gt;{<br/>  let stream = video.srcObject;<br/>  let tracks = stream.getTracks();<br/>  <strong class="mz ir">tracks.forEach(track =&gt; track.stop());</strong><br/>  video.srcObject = null;<br/>}</span></pre><p id="5293" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样，这就是我们如何将网络摄像头集成到网页中。现在我们只需要添加一些CSS。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="8701" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">基本CSS</h1><p id="aeeb" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">让我们添加一个简单的样式表来设置HTML元素的样式。看看下面的CSS:</p><pre class="kg kh ki kj gt na mz nb nc aw nd bi"><span id="dff2" class="ne ma iq mz b gy nf ng l nh ni">*{<br/>    margin: 0;<br/>    padding: 0;<br/>    box-sizing: border-box;<br/>}<br/>body{<br/>    height: 100vh;<br/>    display: flex;<br/>    flex-direction: column;<br/>    align-items: center;<br/>    margin-top: 25px;<br/>}<br/>video{<br/>    max-width: 600px;<br/>    height: auto;<br/>    border: 5px solid black;<br/>}<br/>.buttons{<br/>    display: flex;<br/>    justify-content: center;<br/>}<br/>button{<br/>    padding: 12px 25px;<br/>    margin: 0 10px;<br/>    cursor: pointer;<br/>    font-size: 16.5px;<br/>    font-weight: bold;<br/>    background: cyan;<br/>    outline: none;<br/>    border: 1px solid black;<br/>}</span></pre><p id="2cab" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您有网络摄像头，您可以在下面的代码栏中查看该项目:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nl nm l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Codepen by author.</figcaption></figure><p id="35a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果网络摄像头功能不工作，只需点击<em class="nk"> </em>上方的<em class="nk">在Codepen上编辑</em>即可在Codepen上查看项目。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="aad6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="bf9f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">如您所见，这只是一个使用香草JavaScript将网络摄像头集成到网页中的简单示例。如果你感兴趣，你可以了解更多。</p><p id="6bf3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢你阅读这篇文章。我希望你发现它有用。</p><p id="7bc6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">更多读数</strong></p><div class="nn no gp gr np nq"><a rel="noopener  ugc nofollow" target="_blank" href="/6-useful-pure-css-tips-that-you-should-know-647ccaff201e"><div class="nr ab fo"><div class="ns ab nt cl cj nu"><h2 class="bd ir gy z fp nv fr fs nw fu fw ip bi translated">6个您应该知道的有用的纯CSS技巧</h2><div class="nx l"><h3 class="bd b gy z fp nv fr fs nw fu fw dk translated">非常有用的CSS技巧，你可能不知道</h3></div><div class="ny l"><p class="bd b dl z fp nv fr fs nw fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nz l"><div class="oa l ob oc od nz oe kp nq"/></div></div></a></div><p id="84cd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nk">更内容于</em> <a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="nk">通俗地说就是</em> </strong> </a></p></div></div>    
</body>
</html>
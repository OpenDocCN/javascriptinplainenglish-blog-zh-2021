<html>
<head>
<title>3 Client-Side Data Storage Techniques in JavaScript That You Should Know</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您应该知道的3种JavaScript客户端数据存储技术</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-client-side-data-storage-techniques-in-javascript-that-you-should-know-46f96dd7876c?source=collection_archive---------9-----------------------#2021-07-30">https://javascript.plainenglish.io/3-client-side-data-storage-techniques-in-javascript-that-you-should-know-46f96dd7876c?source=collection_archive---------9-----------------------#2021-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7acd" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">JavaScript中的Cookies、本地存储和会话存储</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/08a2c2ac3f733d040852dedb9c7e2c0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mpjyjef_i26m_SaZ"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@starvingartistfoodphotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina Branco</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="177d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">网站在浏览器上存储用户和基于会话的信息有不同的方式。该数据通常包含偏好、游戏分数、定制等。</p><p id="686b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将看到网站在浏览器上存储信息的三种方式。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f22f" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">饼干</h1><p id="6e5c" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">cookie是存储在客户端用户机器上的一小段信息，特定于您访问的每个不同站点的用户。这些信息在客户端和服务器端都可以访问。</p><blockquote class="mw"><p id="8ee6" class="mx my iq bd mz na nb nc nd ne nf lr dk translated">存储在cookies中的信息通常由服务器设置，并随每个后续请求一起发送。</p></blockquote><p id="7929" class="pw-post-body-paragraph kw kx iq ky b kz ng jr lb lc nh ju le lf ni lh li lj nj ll lm ln nk lp lq lr ij bi translated">这些信息也可以根据需要在客户端设置。当你在浏览器上访问任何网站时，你可以看到服务器使用<strong class="ky ir"> set-cookie </strong>响应头为你设置了cookie。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/e336b6ca453d43f5073bc547acc0774d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*tH3CZ4rj5mMRL9CjjdeoAw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Response header for the user request (Screenshot by author)</figcaption></figure><p id="932e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于所有连续的请求，使用<strong class="ky ir"> cookie </strong>请求头发送相同的信息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/1f9c5129ddbd16c8534e289c85b605f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XIgnFR-G7ang2O_aZPAkQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Request header for the user request (Screenshot by author)</figcaption></figure><p id="7ce4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">存储cookies的主要原因是为了交付为特定用户定制的页面。由于服务器可以访问cookies，因此该信息用于授权用户对服务器的连续请求。它们还用于维护与用户相关的信息，如他们的偏好、定制(主题)、购物车、游戏分数等。所有这些信息都会在特定用户下次访问网站时保留下来。</p><p id="0b58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为每个站点的每个用户存储的所有这些信息被用来为最终用户提供更好的用户体验。</p><h2 id="8188" class="nn ma iq bd mb no np dn mf nq nr dp mj lf ns nt ml lj nu nv mn ln nw nx mp ny bi translated">cookie的结构和属性</h2><p id="ca76" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">cookie是由键值对形式的信息组成的字符串。一个cookie中可以存储的数据容量是4kB。</p><p id="a78b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">与特定cookie相关联的每个属性都被添加到以分号分隔的字符串中。您可以与cookie关联的一些属性是该cookie的到期日期，并且您可以使cookie在您的网站上的特定路径下可用。</p><p id="7733" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在客户端设置一个cookie，如下所示。</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="94f5" class="nn ma iq oa b gy oe of l og oh">document.cookie = “username=Nehal; expires=Thu, 29 Aug 2021 12:00:00 UTC; path=/”;</span></pre><p id="47a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以使用document.cookie属性读取所有可用的cookie。</p><p id="4abb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您也可以通过为同一个键分配不同的值来更改cookie，使其与设置时相同。</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="6839" class="nn ma iq oa b gy oe of l og oh">document.cookie = “username=Nehal Khan; expires=Thu, 29 Aug 2021 12:00:00 UTC; path=/”;</span></pre><p id="cd7f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以通过将过期时间设置为过去的某个时间来删除特定的cookie。</p><pre class="kg kh ki kj gt nz oa ob oc aw od bi"><span id="30c2" class="nn ma iq oa b gy oe of l og oh">document.cookie = “username=Nehal Khan; expires=Thu, 29 Aug 2020 12:00:00 UTC; path=/”;</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="5a99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当HTML 5问世时，它带来了两种在客户端存储用户特定信息的新方法。它们是本地存储和会话存储。在那之前，只有cookies被用来在客户端存储任何需要的信息。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="fa5e" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">局部存储器</h1><p id="e059" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">保存在本地存储器中的数据将可用于该特定网站的所有后续浏览器会话。</p><p id="6400" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">存储在本地存储器中的数据是特定于协议的。这意味着为通过HTTP访问的站点(例如，<a class="ae kv" href="http://mysite.com" rel="noopener ugc nofollow" target="_blank">http://samplesite.com</a>)存储的数据与为通过HTTPS协议访问的同一站点(例如，<a class="ae kv" href="https://mysite.com" rel="noopener ugc nofollow" target="_blank">https://samplesite.com</a>)存储的数据存储在不同的本地存储实例中。</p><p id="7583" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">存储在本地存储中的数据没有到期时间，除非它被页面中的任何脚本清除，或者用户愿意清除它。</p><blockquote class="mw"><p id="75ea" class="mx my iq bd mz na nb nc nd ne nf lr dk translated">一旦用户关闭该标签，在私人/匿名窗口中打开的任何站点的存储在本地存储器中的数据就会被清除。</p></blockquote><h2 id="a535" class="nn ma iq bd mb no oi dn mf nq oj dp mj lf ok nt ml lj ol nv mn ln om nx mp ny bi translated">本地存储的结构和属性</h2><p id="f7b2" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">使用UTF-16格式将数据存储为字符串格式的键值对。如果任何一个键是数字，它们就被转换成字符串。</p><p id="cfdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以向localStorage添加一些新数据，如下所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi on"><img src="../Images/d54ccde57e66c35d3fe78256f7e87010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/1*GPRyl_-Uyc1j0_WgIFg1EA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="31c5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以在localStorage中看到新添加的数据，如图所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oo"><img src="../Images/c7841aba3c05234ab46acafc9788fb71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OB5kNQgJp6wJUtIboDVy1Q.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="d74d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以将添加的项目删除到localStorage，如下所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi op"><img src="../Images/e4d898eeb70174af9d815273972061fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*Veh7RptroJUOxRaElaIFrQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="fb8a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以清除本地存储中存储的所有数据，如下所示</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oq"><img src="../Images/b55bdf2302e2a39dfa1e68e90d52f04f.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*mJQI-b9jQLUH3k8qHogO-Q.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="c859" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">会话存储</h1><p id="92ad" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">与localStorage不同，保存在会话存储中的数据仅可用于页面的该会话。</p><p id="f8a1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">存储在会话存储器中的数据也是特定于协议的。这意味着为通过HTTP访问的站点(例如，【http://samplesite.com】)存储的数据与为通过HTTPS协议访问的同一站点(例如，<a class="ae kv" href="https://mysite.com" rel="noopener ugc nofollow" target="_blank">【https://samplesite.com】</a>)存储的数据存储在不同的会话存储实例中。</p><p id="1af5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">标签或浏览器窗口一关闭，存储在会话存储器中的数据就会被清除。当页面被加载到浏览器的选项卡中时，会为其创建一个唯一的会话。它仅对该选项卡有效。</p><p id="98b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">会话存储在特定网站的页面重新加载和恢复后仍然存在。</p><blockquote class="mw"><p id="47bd" class="mx my iq bd mz na nb nc nd ne nf lr dk translated">在浏览器中创建复制选项卡时，原始选项卡的会话存储中的数据也会复制到复制的选项卡中。</p></blockquote><h2 id="59b7" class="nn ma iq bd mb no oi dn mf nq oj dp mj lf ok nt ml lj ol nv mn ln om nx mp ny bi translated">会话存储的结构和属性</h2><p id="5417" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">使用UTF-16格式将数据存储为字符串格式的键值对。如果任何一个键是数字，它们就被转换成字符串。</p><p id="1e48" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您可以向sessionStorage添加一些新数据，如图所示</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi or"><img src="../Images/b3be9ca1e2516dde73ed2cec12455bdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*VSb2itzmMOeXR-4ZbdSi2Q.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="0ea4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您可以在sessionStorage中看到添加的数据，如图</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi os"><img src="../Images/b7668a409eda98e7cb8b059027325b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rUKSx4TZ9q7QW2Yke5W4vw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="c1b5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您可以删除添加到sessionStorage的项目，如图</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ot"><img src="../Images/a5e1010ce41db0873ad3b8a5966c818f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*Yd3iNW7UtvO3vBn5vU97hw.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure><p id="4cff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">您可以清除存储在sessionStorage中的所有数据，如图</strong></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ou"><img src="../Images/4b1b5b671c79a5c5a99263df93ec1e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*BEqF08TY3mYH0OHUB0coVQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image by author</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="ad7c" class="nn ma iq bd mb no np dn mf nq nr dp mj lf ns nt ml lj nu nv mn ln nw nx mp ny bi translated">本地存储和会话存储之间的差异</h2><p id="de0d" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">主要区别在于，存储在localStorage中的数据不会过期，但是存储在sessionStorage中的数据会在会话结束时过期。</p><p id="e626" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是您仍然可以使用<code class="fe ov ow ox oa b">localStorage.clear()</code>从脚本中删除本地存储中的数据，或者从浏览器的开发工具中手动删除。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="aec6" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="696f" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这是用户或基于会话的信息在客户端存储在浏览器中的3种不同方式，您所访问的网站可以将它们用于不同的目的。</p><p id="4041" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是这三种方式的区别的简要总结。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/c39391b235bccbbcc5bd769d378bda77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2iUVBRPmjmQpoF2VhsXuIg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Differences between the three types (Image by author)</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="46b3" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">资源</h1><ul class=""><li id="e792" class="oz pa iq ky b kz mr lc ms lf pb lj pc ln pd lr pe pf pg ph bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Document/cookie" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a>中的Cookie</li><li id="0e75" class="oz pa iq ky b kz pi lc pj lf pk lj pl ln pm lr pe pf pg ph bi translated">本地存储在<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a></li><li id="7d70" class="oz pa iq ky b kz pi lc pj lf pk lj pl ln pm lr pe pf pg ph bi translated"><a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage" rel="noopener ugc nofollow" target="_blank"> MDN网络文档</a>中的会话存储</li></ul><p id="a1d6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢️reading和快乐学习！</p><p id="23d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="pn">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="pn">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
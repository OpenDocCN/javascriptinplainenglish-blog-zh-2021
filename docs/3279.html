<html>
<head>
<title>Building a Simple Node.js App using Mongoose/MongoDB and Express, Verified using Postman and Robo3T</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用mongose/MongoDB和Express构建一个简单的Node.js应用程序，使用Postman和Robo3T进行验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-simple-node-js-app-using-mongoose-mongodb-and-express-verified-using-postman-and-robo3t-f68967c2e144?source=collection_archive---------12-----------------------#2021-07-04">https://javascript.plainenglish.io/a-simple-node-js-app-using-mongoose-mongodb-and-express-verified-using-postman-and-robo3t-f68967c2e144?source=collection_archive---------12-----------------------#2021-07-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/dc5d038f316d362e35e236927832c1a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mzrmHIjrnsUCZR2S"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@ikukevk?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kevin Ku</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="00c2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了继续我过去几周在Node.js上的博客，我汇集了几个流行的服务和库，它们代表了Node生态系统的一个更大的部分。我把我以前的一些相关博客与提到的特定图书馆的更多信息链接起来。</p><p id="0e51" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">例如，我创建了一个简单的应用程序来记录宠物和它们的日常护理。这周，我只添加了动物的名字和种类。你可以把这些人看作“用户”</p><p id="f4bd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的第一步是用Mongoose创建一个宠物模型，它为我的MongoDB数据库提供了一个结构。然后，我启动了一个带有“/pets”端点的Express服务器，用于向这个数据库添加新的宠物。接下来，我使用Postman发出这些POST请求。最后，我使用Robo 3T来验证我的数据库已经成功地更新了新宠物。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/8c8f85b58da3248f927725b2fda835c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OAWcOstbFBt1AZz0o54scw.png"/></div></div></figure><p id="57ec" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">根据他们的<a class="ae jz" href="https://mongoosejs.com/" rel="noopener ugc nofollow" target="_blank">文件</a>，</p><blockquote class="ld le lf"><p id="dcec" class="ka kb lg kc b kd ke kf kg kh ki kj kk lh km kn ko li kq kr ks lj ku kv kw kx ig bi translated">Mongoose提供了一个直接的、基于模式的解决方案来建模您的应用程序数据。它包括内置的类型转换、验证、查询构建、业务逻辑挂钩等等。</p></blockquote><p id="273e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了开始使用Mongoose，我将它安装为一个NPM包，然后在这个文件中需要它。上面概述的是我希望每个宠物条目如何在MongoDB服务器上结束的规范。</p><p id="3bb2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我指出了name和animal的值的类型——它们是字符串。我明确指出这些是必须的。这意味着如果缺少一个，我将抛出一个错误和一个400状态，尽管这是在Express中完成的。</p><p id="44af" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我还包括了NPM包<a class="ae jz" href="https://www.npmjs.com/package/validator" rel="noopener ugc nofollow" target="_blank">验证器</a>。它有大量的能力来验证电子邮件，密码，邮政编码和十六进制代码，以及许多其他潜在的验证项目。它还有助于“净化”，这意味着它确保所有输入都符合某种审美，例如，所有内容都是小写的，或者——如上所示——所有多余的空白都从输入中删除，以消除混乱。最后，我导出了宠物模型，所以它可以在应用程序的其他地方使用。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ky"><img src="../Images/5fc909b2415699a27f8abf9627b2d7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_8ZtIKgSjEyUjenSMyOh-A.png"/></div></div></figure><p id="6a01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我创建了我的宠物模型之后，我创建了一个index.js文件，从这个文件中我运行应用程序本身。我必须首先要求Express，以及我刚刚创建的模型。“app”变量将express激活为一个函数,“port”指定了应用程序运行的端口——在本例中是端口3000。我还需要连接到MongoDB服务器的文件。我在这里写了更多关于这个过程<a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/using-node-with-mongodb-a-beginner-crud-exercise-83af468adb3c">。</a></p><p id="3d16" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我告诉应用程序接收JSON输入，并从建立的特定端口接收信息。我添加了一个console.log，让我知道我成功地连接到了哪个端口。</p><p id="7c7d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我建立了我的RESTful服务，设置了一个“/pets”端点。在这个函数的主体里面，我说了帖子请求的主体将会是一个新的宠物，按照我的规格在我的猫鼬宠物模型中制作。然后，我用回调函数保存模型，以发送回成功保存的宠物或一些错误处理，发送回400状态代码和错误的细节。</p><p id="590a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了测试所有这些工作是否正常，我去了邮递员那里。我以前在<a class="ae jz" href="https://foreman-alexander.medium.com/using-postman-for-api-testing-acd9de86a07b" rel="noopener">这里</a>写过。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lk"><img src="../Images/7d6418dfd8789537b4ac5901a2f8f54b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7eipFnJqdUJ_j3uTGabEqQ.png"/></div></div></figure><p id="b1d6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">您可以在上面看到，我向端口3000上的“/pets”端点发出了POST请求。请求的主体包括所需的名称和动物类型，因此您可以看到它返回一个成功的200状态，以及保存到数据库的对象。</p><p id="8fbf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后一步，我使用Robo 3T来验证我是否成功地将这个新宠物保存到了我的MongoDB服务器上。</p><figure class="kz la lb lc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ll"><img src="../Images/17f968bee46db23c2d7210a9b5f6bbb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ubPlGuoEflVBVAgwTuu-Gg.png"/></div></div></figure><p id="936b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如您所见，ObjectId、name和animal都与Postman中发回的对象相匹配。</p><p id="32d5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所有这些都代表了创建一个更大、更复杂的应用程序的开始。但是您可以看到如何开始构建带有一些验证和对象建模的RESTful API，然后如何测试这些信息。</p><p id="09c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lg">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lg">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Introducing a URL-Friendly Unique Identifier — NanoID</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入URL友好的唯一标识符— NanoID</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introducing-a-url-friendly-unique-identifier-nanoid-fbf4d2162322?source=collection_archive---------3-----------------------#2021-10-12">https://javascript.plainenglish.io/introducing-a-url-friendly-unique-identifier-nanoid-fbf4d2162322?source=collection_archive---------3-----------------------#2021-10-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/5ef46f3e56a117c856fe522aaf20d038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lfvd2z5QkGQSM5eq2gSd-A.png"/></div></div></figure><h1 id="7a75" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍</h1><p id="d577" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在每个软件系统中，我们需要唯一的id来区分几个对象。</p><p id="a956" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">最近，我写了一篇关于大规模分布式环境的<a class="ae lw" href="https://medium.com/nerd-for-tech/unique-id-generation-in-distributed-systems-6f7aaa39c9af" rel="noopener">惟一Id生成的文章。在那篇文章中，我们稍微提到了UUIDs。</a></p><p id="4d63" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">在这篇博文中，我将分享一个uuid的替代方案，它可以帮助您满足uuid的需求，并克服它们的一些缺点。</p><h1 id="1f82" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">介绍Nano ID</h1><p id="9457" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">它是一个小巧、安全、URL友好、唯一的字符串ID生成器。</p><ul class=""><li id="6e57" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated"><strong class="kv io">与UUID </strong>相比，Nano ID的尺寸较小。这种尺寸的减小影响很大。利用NanoID更容易传输信息和存储空间。在大规模系统中，这些数字可以产生很大的影响。</li><li id="1fd4" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><strong class="kv io"> NanoID使用一种加密性很强的API，与Math相比，它要安全得多</strong>。随机()哪些是<a class="ae lw" href="https://franklinta.com/2014/08/31/predicting-the-next-math-random-in-java/" rel="noopener ugc nofollow" target="_blank">不安全的</a>。这些API模块使用不可预测的硬件生成的随机标识符。</li><li id="61b1" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><strong class="kv io"> NanoID在ID生成器的整个应用</strong>中使用了自己的“统一公式”,而不是使用任意的<code class="fe ml mm mn mo b">% alphabet</code>,这是编写ID生成器时经常犯的错误(在某些情况下，分布不均匀)。</li><li id="d407" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><strong class="kv io"> NanoID使用更大的字母表</strong>产生简短但唯一的标识符。</li><li id="71fd" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><strong class="kv io"> NanoID允许设计师使用个性化的字母</strong>。这是Nano ID的另一个附加功能。您可以更改id的文字或维度，如下所示(将个性化字母指定为' 1234567890 abcdef '&amp;Id的维度指定为10):</li></ul><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="ec2c" class="mx jw in mo b gy my mz l na nb">import { alphabet } from 'nanoid'; <br/>const nanoid = alphabet ('1234567890ABCDEF', 10); <br/>model.id = nanoid();</span></pre><ul class=""><li id="a43c" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated"><strong class="kv io"> NanoID不太依赖任何种类的第三方依赖关系</strong>，这意味着，它最终变得更加稳定，这有助于随着时间的推移最大化软件包范围，并使其更不容易受到依赖关系带来的问题的影响。</li><li id="fddd" class="lx ly in kv b kw mg la mh le mi li mj lm mk lq mc md me mf bi translated"><strong class="kv io"> NanoID有多种编程语言</strong>，包括— C#，C++，Dart &amp; Flutter，Go，Java，PHP，Python，Ruby，Rust，Swift等。</li></ul><h1 id="0a72" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated"><a class="ae lw" href="https://github.com/ai/nanoid#benchmark" rel="noopener ugc nofollow" target="_blank">基准</a></h1><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/64119ea94885375c232b4c82e13a8411.png" data-original-src="https://miro.medium.com/v2/resize:fit:928/0*TQF-XxYrA6TLJgtu"/></div></figure><h1 id="9f52" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">示例用法</h1><p id="5fb9" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">生成纳米机器人或UUID非常简单。在JavaScript中，你有NPM包可以帮助你生成它们。你可以从这里得到NanoId = &gt;【github.com/ai/nanoid T21】</p><ul class=""><li id="dfd2" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">主模块使用URL友好符号(A-Za-z0–9 _-)，并返回一个21个字符的ID:</li></ul><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="6c07" class="mx jw in mo b gy my mz l na nb">import { nanoid } from "nanoid";<br/>model.id = nanoid() // X2JaSYP7_Q2leGI9b-MyA</span></pre><ul class=""><li id="db87" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">您还可以指定所需的字符数:</li></ul><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="5526" class="mx jw in mo b gy my mz l na nb">nanoid(9); // "wMeKBp6th"</span></pre><ul class=""><li id="8176" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated">如果您有如上所述的特定需求，您也可以将用于生成哈希的字母表更改为您自己的字母表:</li></ul><pre class="mp mq mr ms gt mt mo mu mv aw mw bi"><span id="4f13" class="mx jw in mo b gy my mz l na nb">const alphabet = '0123456789ABCDEF';<br/>generate(alphabet, 9); // F65BF3050</span></pre><h1 id="5f22" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">碰撞危险</h1><p id="624c" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">即使它使用默认字母表每秒可以生成超过220万个唯一id，仍然有可能生成相同的多个id。</p><p id="1bae" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">但是这种情况发生的几率有多大呢？</p><p id="5d7a" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">你可以根据给定的参数很容易地计算出:这里的<a class="ae lw" href="https://zelark.github.io/nano-id-cc/" rel="noopener ugc nofollow" target="_blank"/>和这里的<a class="ae lw" href="https://alex7kom.github.io/nano-nanoid-cc/" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="d089" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">你会注意到这个<strong class="kv io">概率非常小。</strong></p><h1 id="dc4e" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">一些缺点</h1><ul class=""><li id="f82d" class="lx ly in kv b kw kx la lb le nd li ne lm nf lq mc md me mf bi translated">在某些情况下，非人类可读可能是不利因素之一</li></ul><p id="d16e" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">想象一下，客户打电话来并被要求提供标识符，必须拼写完整的NanoID不是一种愉快的体验。与UUID相比，NanoID更短，可读性更强，但在终端客户需要使用它的情况下仍然无法使用。</p><ul class=""><li id="929a" class="lx ly in kv b kw lr la ls le lz li ma lm mb lq mc md me mf bi translated"><strong class="kv io">它不能在任何SQL数据库表中用作主键</strong></li></ul><p id="4783" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">如果使用NanoID作为表的主键，如果使用相同的列作为聚集索引，就会出现问题。这是因为<strong class="kv io">纳米机器人不是连续的。</strong></p><p id="f78f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">这是因为NanoID(甚至UUID)的性质是随机的，聚集索引按键对记录进行物理排序，因此对于每次插入，如果表上有索引，数据库必须确保新条目也是通过这些索引找到的，并保持索引顺序和树平衡。</p><p id="c7fd" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">为此，SQL必须对磁盘上的记录重新排序，并因此从该索引中删除聚集。但是当你有像时间这样的序列时——在插入一条新记录后，聚类几乎是免费且容易的。</p><h1 id="69e4" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">几句至理名言</h1><p id="2371" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">软件世界中的任何方法都是主观的。权衡利弊并选择适合您的方法取决于您的需求。没有一个设计是具体到可以永远持续下去的，所以考虑到约束条件，我们选择了一个特定的设计，并且根据它对我们的作用，我们也可以进一步发展它。</p><p id="ad5f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">👋感谢阅读，快乐学习！</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><p id="f5f2" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="nn">原发布于</em><a class="ae lw" href="https://apoorvtyagi.tech/nanoid-url-friendly-unique-id" rel="noopener ugc nofollow" target="_blank"><em class="nn">https://apoorvtyagi . tech</em></a><em class="nn">。</em></p><p id="f5e0" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="nn">更多内容请看</em><a class="ae lw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="nn">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How To Handle Routing with Express</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Express处理路由</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-handle-routing-with-express-dd6b8bbc3bf1?source=collection_archive---------19-----------------------#2021-05-28">https://javascript.plainenglish.io/how-to-handle-routing-with-express-dd6b8bbc3bf1?source=collection_archive---------19-----------------------#2021-05-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="ccee" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何在Express中执行PUT请求并举例说明？</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/44e1695605b33850ba777dbfa9905125.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*moUusGuNZxE_JRj5"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@altumcode?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AltumCode</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6260" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我们之前的教程中，我们确定了如何使用本地JavaScript和joi验证包在express中执行验证。</p><h2 id="825a" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">之前的教程</strong></h2><div class="mi mj gp gr mk ml"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-handle-routing-with-express-1c2f64e3407b"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd io gy z fp mq fr fs mr fu fw im bi translated">如何使用Express处理路由</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">通过示例了解如何在express中执行输入验证。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz km ml"/></div></div></a></div><p id="e683" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想用Express查看输入验证的教程，请查看下面的链接。</p><p id="47bd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本教程中，我们将了解如何执行其他HTTP方法，如PUT和DELETE。</p><p id="6ffc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从上面的列表中我们可以看到，这些HTTP动词有各种各样的用例。</p><p id="c5ce" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上传-编辑数据</p><p id="1674" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">执行PUT方法</p><p id="01af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">PUT HTTP动词或方法用于我们想要编辑已经存储或保存在应用程序后端的数据的情况。</p><p id="bd34" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">该方法将接受使用id来引用应该编辑的数据。类似地，如果找到了具有相同id的数据，我们将执行编辑，否则如果没有找到具有给定引用的数据，它将向用户返回一条消息，确认没有找到具有给定引用的数据。</p><p id="d200" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">让我们看一个例子</strong></p><p id="5402" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">首先，让我们制作一个包含朋友名字的数组，如下所示</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="492f" class="lp lq in nb b gy nf ng l nh ni">const friends = [</span><span id="6a35" class="lp lq in nb b gy nj ng l nh ni">{ id: 1, name: ‘John’ },</span><span id="85a6" class="lp lq in nb b gy nj ng l nh ni">{ id: 2, name: ‘Philip’ },</span><span id="5a9b" class="lp lq in nb b gy nj ng l nh ni">{ id: 3, name: ‘William’ },</span><span id="1cad" class="lp lq in nb b gy nj ng l nh ni">{ id: 4, name: ‘Gallagher’ }</span><span id="76c7" class="lp lq in nb b gy nj ng l nh ni">]</span></pre><p id="4371" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以向API端点写一个GET请求，并发回我们朋友的数组。</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="ab60" class="lp lq in nb b gy nf ng l nh ni"><br/>router.get(‘/friends’, (req, res, next) =&gt; {</span><span id="81ac" class="lp lq in nb b gy nj ng l nh ni">res.status(200).send(friends)</span><span id="db34" class="lp lq in nb b gy nj ng l nh ni">});</span></pre><p id="143d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当我们去找我们的邮差和<a class="ae ks" href="http://localhost:5000/friends" rel="noopener ugc nofollow" target="_blank">T5的localhost http://localhost:5000/friends</a><strong class="kv io"/>并执行一个get请求时，我们朋友的数组会被发回给我们。</p><p id="7ce6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们可以配置put并尝试编辑我们一个朋友的名字。</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="928d" class="lp lq in nb b gy nf ng l nh ni"><em class="nk">// configuring put request</em></span><span id="a1c1" class="lp lq in nb b gy nj ng l nh ni">router.put(‘/friends/:id’, (req, res, next) =&gt; {</span><span id="84c9" class="lp lq in nb b gy nj ng l nh ni"><em class="nk">// find the friend with the given ID</em></span><span id="570d" class="lp lq in nb b gy nj ng l nh ni">const friend = friends.find(c =&gt; c.id === parseInt(req.params.id))</span><span id="ea0b" class="lp lq in nb b gy nj ng l nh ni"><em class="nk">if</em> (!friend) {</span><span id="8a1d" class="lp lq in nb b gy nj ng l nh ni"><em class="nk">// if not send back the message</em></span><span id="fe04" class="lp lq in nb b gy nj ng l nh ni">res.status(400).send(‘Friend with the given ID was not found’);</span><span id="d1dc" class="lp lq in nb b gy nj ng l nh ni">} <em class="nk">else</em> {</span><span id="851f" class="lp lq in nb b gy nj ng l nh ni"><em class="nk">// if found update the name</em></span><span id="1f8a" class="lp lq in nb b gy nj ng l nh ni">friend.name = req.body.name;</span><span id="f5d2" class="lp lq in nb b gy nj ng l nh ni">res.send(friend)</span><span id="1dc9" class="lp lq in nb b gy nj ng l nh ni">}</span><span id="74a6" class="lp lq in nb b gy nj ng l nh ni">});</span></pre><p id="2574" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们可以在postman中测试端点</p><p id="e6e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您不熟悉postman，请打开Postman应用程序并按照步骤操作。</p><ul class=""><li id="c1da" class="nl nm in kv b kw kx kz la lc nn lg no lk np lo nq nr ns nt bi translated">创建新请求</li><li id="7794" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">将方法更改为PUT(默认情况下，它是GET)</li><li id="40b9" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">在URL栏上，输入您用express配置的路线；在我们的例子中，它是'/朋友'</li><li id="2621" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">所以，在网址栏上，你应该有:<a class="ae ks" href="http://localhost:5000/friends/1" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">http://localhost:5000/friends/1</strong></a></li><li id="4977" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">单击body选项卡，将其更改为raw(默认情况下，它是表单数据或无)</li><li id="5cc5" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">因此，将格式改为application/JSON(默认情况下，它是文本格式)</li></ul><p id="75a6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们已经配置了Postman，现在可以测试我们的post API端点了</p><p id="4dd4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用PUT测试此端点。</p><p id="f93e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在邮递员正文中输入以下数据，然后单击发送</p><pre class="kd ke kf kg gt na nb nc nd aw ne bi"><span id="66c5" class="lp lq in nb b gy nf ng l nh ni">{</span><span id="dbf3" class="lp lq in nb b gy nj ng l nh ni">“name”:”Liam”</span><span id="5dcc" class="lp lq in nb b gy nj ng l nh ni">}</span></pre><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/0cd31f86c60ced5720e1d0ea1931a221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CI6TiYffetqVlbyHo_B3UQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example PUT request</figcaption></figure><p id="1d7f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">注意从API发回的数据。</p><p id="940b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们可以对/friends端点执行get请求，以检查数据是否已经更改。</p><p id="adf6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您不熟悉postman，请打开Postman应用程序并按照步骤操作。</p><ul class=""><li id="b62e" class="nl nm in kv b kw kx kz la lc nn lg no lk np lo nq nr ns nt bi translated">创建新请求</li><li id="2a7a" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">将方法更改为PUT(默认情况下，它是GET)</li><li id="7ffa" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">在URL栏上，输入您用express配置的路线；在我们的例子中，它是'/user '</li><li id="872c" class="nl nm in kv b kw nu kz nv lc nw lg nx lk ny lo nq nr ns nt bi translated">所以，在网址栏上，你应该有:<a class="ae ks" href="http://localhost:5000/friends/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">http://localhost:5000/friends/</strong></a></li></ul><p id="d9e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在我们已经配置了Postman，现在可以测试我们的post API端点了</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nz"><img src="../Images/1da645fe45b1b4e039e3431c4662c7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iIXxjJ0HIsH8OtWI9GhNgw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Example showing change on the friends array</figcaption></figure><p id="b78e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">请注意，我们的名字变了</p><h2 id="bb8e" class="lp lq in bd lr ls lt dn lu lv lw dp lx lc ly lz ma lg mb mc md lk me mf mg mh bi translated"><strong class="ak">结论</strong></h2><p id="ef6e" class="pw-post-body-paragraph kt ku in kv b kw oa jo ky kz ob jr lb lc oc le lf lg od li lj lk oe lm ln lo ig bi translated">感谢您阅读本文到目前为止；如果你觉得这篇文章有趣，请在评论区告诉我并分享。</p><p id="5aee" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你也可以评论你感兴趣并推荐的作品集博客网站。</p><p id="7471" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">更多阅读:</strong></p><div class="mi mj gp gr mk ml"><a rel="noopener  ugc nofollow" target="_blank" href="/5-blog-portfolios-to-inspire-your-next-website-1a4129324262"><div class="mm ab fo"><div class="mn ab mo cl cj mp"><h2 class="bd io gy z fp mq fr fs mr fu fw im bi translated">启发你下一个网站的5个博客组合</h2><div class="ms l"><h3 class="bd b gy z fp mq fr fs mr fu fw dk translated">你正在努力建立你的网站组合吗？使用这些网站来激发你的下一个网站组合。</h3></div><div class="mt l"><p class="bd b dl z fp mq fr fs mr fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="mu l"><div class="of l mw mx my mu mz km ml"/></div></div></a></div><p id="309b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="nk">更多内容请看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nk">plain English . io</em></a></p></div></div>    
</body>
</html>
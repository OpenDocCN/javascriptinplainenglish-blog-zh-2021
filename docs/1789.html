<html>
<head>
<title>How to Implement Instagram Photo Filters in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中实现Instagram照片滤镜</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-instagram-photo-filters-in-react-native-e3681fa634ee?source=collection_archive---------15-----------------------#2021-04-15">https://javascript.plainenglish.io/how-to-instagram-photo-filters-in-react-native-e3681fa634ee?source=collection_archive---------15-----------------------#2021-04-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/736dae9a88f9ba697ad5f815e38527aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1svr6eOcTXT_MRfs.png"/></div></div></figure><p id="d249" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Instagram在过去几年中一直在疯狂增长，推动这一增长的关键功能之一是著名的照片过滤器。Instagram允许用户对照片应用各种滤镜，让照片看起来更好看，从而创造了一款令人惊叹的产品。如今，任何现代照片应用程序都必须支持照片过滤器。因此，我们将了解如何在React Native中实现Instagram照片滤镜。</p><p id="e6c2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在今天的文章中，我们将讨论如何实现Instagram照片过滤器。我们将使用<a class="ae kt" href="https://github.com/iyegoroff/react-native-image-filter-kit" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">react-native-image-filter-kit</strong></a>包<strong class="jx io">。</strong>在Instamobile，我们使用这个库将照片滤镜功能无缝构建到我们的<a class="ae kt" href="https://www.instamobile.io/app-templates/instagram-clone-app/" rel="noopener ugc nofollow" target="_blank"> Instagram克隆</a>中。</p><h2 id="16d4" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">在React Native中实现Instagram照片滤镜</h2><p id="645b" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">首先，让我们将前面提到的包安装到React本地项目中，运行:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="e1a6" class="ku kv in lx b gy mb mc l md me">npm install -s react-native-image-filter-kit</span></pre><p id="af45" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里有一个简单的React Native项目，它将Instagram照片滤镜应用于代码库中包含的一个图像(图像名称为“parrot.png”，因此请确保您将它包含在您的项目文件夹中，以便它可以加载到应用程序中)。在<strong class="jx io"> App.js </strong>文件中，只需放置以下代码片段:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="5659" class="ku kv in lx b gy mb mc l md me">import React from 'react';<br/>import {Image, SafeAreaView} from 'react-native';<br/>import {Emboss} from 'react-native-image-filter-kit';<br/><br/>const App = () =&gt; (<br/>  &lt;&gt;<br/>    &lt;SafeAreaView /&gt;<br/>    &lt;Image<br/>      style={styles.image}<br/>      source={require('./parrot.png')}<br/>      resizeMode={'contain'}<br/>    /&gt;<br/>    &lt;Emboss<br/>      image={<br/>        &lt;Image<br/>          style={styles.image}<br/>          source={require('./parrot.png')}<br/>          resizeMode={'contain'}<br/>        /&gt;<br/>      }<br/>    /&gt;<br/>  &lt;/&gt;<br/>);<br/><br/>const styles = {<br/>  image: {<br/>    width: 320,<br/>    height: 320,<br/>    marginVertical: 10,<br/>    alignSelf: 'center',<br/>  },<br/>};</span></pre><p id="53ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">由<code class="fe mf mg mh lx b">react-native-filter-kit</code>提供的<code class="fe mf mg mh lx b">Emboss</code>组件以一个<code class="fe mf mg mh lx b">Image</code>组件作为道具，并应用过滤器，如下图所示:</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/effbc465bef95f142ee9255bb40db052.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/format:webp/0*FZJbq-ypwHmbFyOx.png"/></div></figure><p id="4522" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">库<code class="fe mf mg mh lx b">react-native-image-filter-kit</code>提供了大量其他过滤器组件，因此我们将找到一种方法来实现一个更全面的过滤器，就像Instagram应用程序本身一样。</p><p id="cb4d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要定义一个过滤器组件数组，我们要渲染并从中进行选择:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="be56" class="ku kv in lx b gy mb mc l md me">import {<br/>  AdenCompat,<br/>  _1977Compat,<br/>  BrannanCompat,<br/>  BrooklynCompat,<br/>  ClarendonCompat,<br/>  EarlybirdCompat,<br/>  GinghamCompat,<br/>  HudsonCompat,<br/>  InkwellCompat,<br/>  KelvinCompat,<br/>  LarkCompat,<br/>  LofiCompat,<br/>  MavenCompat,<br/>  MayfairCompat,<br/>  MoonCompat,<br/>  NashvilleCompat,<br/>  PerpetuaCompat,<br/>  ReyesCompat,<br/>  RiseCompat,<br/>  SlumberCompat,<br/>  StinsonCompat,<br/>  ToasterCompat,<br/>  ValenciaCompat,<br/>  WaldenCompat,<br/>  WillowCompat,<br/>  Xpro2Compat,<br/>} from 'react-native-image-filter-kit'; <br/><br/>const FILTERS = [<br/>  {<br/>    title: 'Normal',<br/>    filterComponent: AdenCompat,<br/>  },<br/>  {<br/>    title: 'Maven',<br/>    filterComponent: MavenCompat,<br/>  },<br/>  {<br/>    title: 'Mayfair',<br/>    filterComponent: MayfairCompat,<br/>  },<br/>  {<br/>    title: 'Moon',<br/>    filterComponent: MoonCompat,<br/>  },<br/>  {<br/>    title: 'Nashville',<br/>    filterComponent: NashvilleCompat,<br/>  },<br/>  {<br/>    title: 'Perpetua',<br/>    filterComponent: PerpetuaCompat,<br/>  },<br/>  {<br/>    title: 'Reyes',<br/>    filterComponent: ReyesCompat,<br/>  },<br/>  {<br/>    title: 'Rise',<br/>    filterComponent: RiseCompat,<br/>  },<br/>  {<br/>    title: 'Slumber',<br/>    filterComponent: SlumberCompat,<br/>  },<br/>  {<br/>    title: 'Stinson',<br/>    filterComponent: StinsonCompat,<br/>  },<br/>  {<br/>    title: 'Brooklyn',<br/>    filterComponent: BrooklynCompat,<br/>  },<br/>  {<br/>    title: 'Earlybird',<br/>    filterComponent: EarlybirdCompat,<br/>  },<br/>  {<br/>    title: 'Clarendon',<br/>    filterComponent: ClarendonCompat,<br/>  },<br/>  {<br/>    title: 'Gingham',<br/>    filterComponent: GinghamCompat,<br/>  },<br/>  {<br/>    title: 'Hudson',<br/>    filterComponent: HudsonCompat,<br/>  },<br/>  {<br/>    title: 'Inkwell',<br/>    filterComponent: InkwellCompat,<br/>  },<br/>  {<br/>    title: 'Kelvin',<br/>    filterComponent: KelvinCompat,<br/>  },<br/>  {<br/>    title: 'Lark',<br/>    filterComponent: LarkCompat,<br/>  },<br/>  {<br/>    title: 'Lofi',<br/>    filterComponent: LofiCompat,<br/>  },<br/>  {<br/>    title: 'Toaster',<br/>    filterComponent: ToasterCompat,<br/>  },<br/>  {<br/>    title: 'Valencia',<br/>    filterComponent: ValenciaCompat,<br/>  },<br/>  {<br/>    title: 'Walden',<br/>    filterComponent: WaldenCompat,<br/>  },<br/>  {<br/>    title: 'Willow',<br/>    filterComponent: WillowCompat,<br/>  },<br/>  {<br/>    title: 'Xpro2',<br/>    filterComponent: Xpro2Compat,<br/>  },<br/>  {<br/>    title: 'Aden',<br/>    filterComponent: AdenCompat,<br/>  },<br/>  {<br/>    title: '_1977',<br/>    filterComponent: _1977Compat,<br/>  },<br/>  {<br/>    title: 'Brannan',<br/>    filterComponent: BrannanCompat,<br/>  },<br/>];</span></pre><p id="f3cf" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们必须在底部呈现过滤器的水平列表，并在选择过滤器时动态地将过滤器图像更改为中心图像。您的<strong class="jx io"> App.js </strong>文件将变成:</p><pre class="ls lt lu lv gt lw lx ly lz aw ma bi"><span id="2f56" class="ku kv in lx b gy mb mc l md me">import React, {useRef, useState} from 'react';<br/>import {<br/>  FlatList,<br/>  Image,<br/>  SafeAreaView,<br/>  StyleSheet,<br/>  Text,<br/>  TouchableOpacity,<br/>} from 'react-native';<br/><br/>const App = () =&gt; {<br/>  const extractedUri = useRef('https://www.hyundai.com/content/hyundai/ww/data/news/data/2021/0000016609/image/newsroom-0112-photo-1-2021elantranline-1120x745.jpg');<br/>  const [selectedFilterIndex, setIndex] = useState(0);<br/><br/>  const onExtractImage = ({nativeEvent}) =&gt; {<br/>    extractedUri.current = nativeEvent.uri;<br/>  };<br/><br/>  const onSelectFilter = selectedIndex =&gt; {<br/>    setIndex(selectedIndex);<br/>  };<br/><br/>  const renderFilterComponent = ({item, index}) =&gt; {<br/>    const FilterComponent = item.filterComponent;<br/>    const image = (<br/>      &lt;Image<br/>        style={styles.filterSelector}<br/>        source={require('./car.jpg')}<br/>        resizeMode={'contain'}<br/>      /&gt;<br/>    );<br/><br/>    return (<br/>      &lt;TouchableOpacity onPress={() =&gt; onSelectFilter(index)}&gt;<br/>        &lt;Text style={styles.filterTitle}&gt;{item.title}&lt;/Text&gt;<br/>        &lt;FilterComponent image={image} /&gt;<br/>      &lt;/TouchableOpacity&gt;<br/>    );<br/>  };<br/><br/>  const SelectedFilterComponent = FILTERS[selectedFilterIndex].filterComponent;<br/><br/>  return (<br/>    &lt;&gt;<br/>      &lt;SafeAreaView /&gt;<br/>      {selectedFilterIndex === 0 ? (<br/>        &lt;Image<br/>          style={styles.image}<br/>          source={require('./car.jpg')}<br/>          resizeMode={'contain'}<br/>        /&gt;<br/>      ) : (<br/>        &lt;SelectedFilterComponent<br/>          onExtractImage={onExtractImage}<br/>          extractImageEnabled={true}<br/>          image={<br/>            &lt;Image<br/>              style={styles.image}<br/>              source={require('./car.jpg')}<br/>              resizeMode={'contain'}<br/>            /&gt;<br/>          }<br/>        /&gt;<br/>      )}<br/><br/>      &lt;FlatList<br/>        data={FILTERS}<br/>        keyExtractor={item =&gt; item.title}<br/>        horizontal={true}<br/>        renderItem={renderFilterComponent}<br/>      /&gt;<br/>    &lt;/&gt;<br/>  );<br/>};<br/><br/>const styles = StyleSheet.create({<br/>  image: {<br/>    width: 520,<br/>    height: 520,<br/>    marginVertical: 10,<br/>    alignSelf: 'center',<br/>  },<br/>  filterSelector: {<br/>    width: 100,<br/>    height: 100,<br/>    margin: 5,<br/>  },<br/>  filterTitle: {<br/>    fontSize: 12,<br/>    textAlign: 'center',<br/>  },<br/>});</span></pre><p id="789e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这个源代码将生成一个简单的React Native应用程序，它支持选择各种Instagram照片过滤器，就像真正的Instagram照片编辑器一样:</p><figure class="ls lt lu lv gt jo gh gi paragraph-image"><div class="gh gi mi"><img src="../Images/b48656421a1152d0ff38f6392a528dc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:310/0*w1om6AkSt7hdG8au.gif"/></div></figure><p id="c028" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">选择后，在变量<code class="fe mf mg mh lx b">extractedUri</code> ref上选择过滤器后，处理程序方法<code class="fe mf mg mh lx b">onExtractImage</code>保存提取图像的URL，您可以将过滤器保存在您的服务器上。</p><h2 id="f9a6" class="ku kv in bd kw kx ky dn kz la lb dp lc kg ld le lf kk lg lh li ko lj lk ll lm bi translated">结论</h2><p id="2e22" class="pw-post-body-paragraph jv jw in jx b jy ln ka kb kc lo ke kf kg lp ki kj kk lq km kn ko lr kq kr ks ig bi translated">既然我们已经学会了如何实现Instagram过滤器，您应该看看我们的<a class="ae kt" href="https://www.instamobile.io/app-templates/instagram-clone-app/" rel="noopener ugc nofollow" target="_blank"> Instagram克隆模板</a>，这是一个功能齐全的代码库，支持大多数Instagram功能，如照片过滤器、短暂的故事和帖子订阅。</p></div><div class="ab cl mj mk hr ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ig ih ii ij ik"><p id="1ad9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">原载于2021年4月15日</em><a class="ae kt" href="https://www.instamobile.io/react-native-tutorials/instagram-photo-filters-react-native/" rel="noopener ugc nofollow" target="_blank"><em class="mq">https://www . insta mobile . io</em></a><em class="mq">。</em></p><p id="2ec0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">更多内容请看</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mq">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>A Beginner’s Guide to JavaScript Callbacks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript回调初学者指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/beginners-guide-to-javascript-callbacks-d8195be73dc5?source=collection_archive---------13-----------------------#2021-07-01">https://javascript.plainenglish.io/beginners-guide-to-javascript-callbacks-d8195be73dc5?source=collection_archive---------13-----------------------#2021-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e00d" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过真实的项目代码样本学习回调的A-Z。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/41aacd0f84ae3a230ab2671068ffb23f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rcjPooLyfYwvDqcc"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ffstop?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fotis Fotopoulos</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a995" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回调函数是全栈开发中经常使用的概念。我想分享我接近这种技术的方法。到本文结束时，您将了解JavaScript回调函数的基础，何时使用它们，以及使用回调的现有应用程序。</p><p id="575e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你有任何问题或者你觉得我错过了什么，请告诉我。我非常愿意帮助大家，并与大家分享知识:)。</p><p id="5b83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">相信我，JavaScript回调并没有理解起来那么复杂。回调函数是将函数作为参数传递给另一个函数的一种方式。</p><p id="df94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回调函数可以帮助<strong class="ky ir">代码重用</strong>并生成具有<strong class="ky ir">较少错误</strong>的代码。大多数JavaScript库使用回调。如果你知道这个概念，你就很容易理解。</p><p id="d51c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我想大多数人都写过或者至少读过或者修改过一个函数。想象一个将两个数相加的函数。我们可以将这两个数字作为参数传递给那个函数。所以在JavaScript中，你也可以传递另一个函数作为参数。所以我们用函数作为参数。</p><h1 id="af60" class="lt lu iq bd lv lw lx ly lz ma mb mc md jw me jx mf jz mg ka mh kc mi kd mj mk bi translated">在JavaScript中如何将函数作为参数传递？</h1><p id="798a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在JavaScript中，函数被视为一级对象。因此，它们拥有数字和字符串等其他对象的所有属性。因此它们可以像字符串和数字一样作为参数传递给函数。</p><p id="513d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">令人困惑的是，有不同的方法将函数作为参数传递。做同一件事的不同方法。我们可以将整个函数实现<strong class="ky ir">匿名</strong>作为参数传递，或者只传递该函数的<strong class="ky ir">名称</strong>，该函数的<strong class="ky ir">引用</strong>，等等。</p><p id="6cdc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以让我们来看看这项技术的不同用法，这样你在将来就不会感到困惑。</p><h2 id="8dbb" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">使用命名函数作为回调</h2><p id="aa09" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们知道可以将函数作为参数发送。我们可以单独定义传递函数，并将该函数的名称作为参数发送。</p><p id="1b53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">看看这段代码:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="df15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，函数<code class="fe ne nf ng nh b">testfunction()</code>需要一个参数来执行。我们发送一个名为<code class="fe ne nf ng nh b">myFunction()</code>的函数作为参数。在<code class="fe ne nf ng nh b">testFunction</code>内部执行<code class="fe ne nf ng nh b">myFunction()</code>功能。</p><p id="0f3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们还可以为回调函数传递参数。所以回调函数和常规函数没有区别。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="f89f" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">匿名函数作为回调</h2><p id="8f85" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以不命名直接发送函数，见下面的例子。同样，参数名是从<code class="fe ne nf ng nh b">doitWithWorld()</code>函数内部设置的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="f66d" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">函数可以接受不止一次回调</h2><p id="c069" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">在下面的代码中，您可以看到多个函数被作为回调函数发送。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="d122" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">函数循环中的回调</h2><p id="f7d0" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">回调在函数式编程中用来用函数调用代替循环。</p><h2 id="4317" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">forEach()函数</h2><p id="2fba" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">JavaScript函数式编程引入了<code class="fe ne nf ng nh b">forEach()</code>来处理循环，而不是for循环。看看这个例子。</p><p id="eb72" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，一个函数被传递给了<code class="fe ne nf ng nh b">forEach()</code>函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="6c26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看JavaScript内部forEach函数的实现。</p><p id="2b65" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能有点混乱。下面是当我们传递被映射为<code class="fe ne nf ng nh b">callback</code>的printItem时函数中发生的事情。</p><p id="79b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">可以看到回调有3个参数，第一个是<strong class="ky ir">当前项</strong>，第二个是c <strong class="ky ir">当前项索引</strong>，第三个是<strong class="ky ir">整个数组</strong>。</p><p id="c307" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的<code class="fe ne nf ng nh b">foreach.js </code>文件中，<code class="fe ne nf ng nh b">printItem()</code>函数只使用当前项目。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="7098" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这也是回调的另一个用例。</p><h2 id="480c" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">MongoDB中的回调</h2><p id="a1d6" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我想到了从MongoDB的流行文档中添加一些代码示例。你会意识到用回调的知识理解这段代码是多么容易。</p><p id="2bb1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是使用MongoDB Node.js驱动程序从MongoDB中查找文档的示例代码。在这里，一旦find操作完成，回调方法就会执行并轻松处理响应和错误。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="abaf" class="mq lu iq bd lv mr ms dn lz mt mu dp md lf mv mw mf lj mx my mh ln mz na mj nb bi translated">最后一个示例passport JavaScript和身份验证</h2><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="ea80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在上面的代码中，第2行声明了一个方法comparePassword。它有两个参数，第一个是密码，然后是一个名为cb的回调函数。在第25行，用户模型使用方法<code class="fe ne nf ng nh b">comparepassword()</code>并传递参数一个密码和完成回调。这个done函数是从一个叫做passport的包中返回的。</p><p id="a974" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以看到在实际项目中使用回调时事情是如何变得复杂的。但是基本都是一样的。</p><p id="0618" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ne nf ng nh b">done</code>函数作为回调传递给<code class="fe ne nf ng nh b">comparePassword </code>方法。它在<code class="fe ne nf ng nh b">comparePassword</code>中没有被称为<code class="fe ne nf ng nh b">done</code>，而是被称为<code class="fe ne nf ng nh b">cb</code>，并且在另一个在<code class="fe ne nf ng nh b">bcrypt.compare</code>方法中返回的回调函数中使用。Bcrypt是另一个用于加密密码的包。</p><p id="be15" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它只是在不同的层次传递和使用函数，但基本原理是相同的。有时，不同函数内部的名称更改看起来很复杂。</p><p id="aad1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请分享你的想法和你想补充的任何遗漏的知识和方法。不要忘记提问，澄清任何可能不清楚的地方。</p><p id="0bdb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ls">更多内容看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
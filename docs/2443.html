<html>
<head>
<title>Express with TypeScript (and ES Modules — Compilation, Build)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Express with TypeScript(和ES模块—编译、构建)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/express-with-typescript-and-es-modules-compilation-build-44f175150073?source=collection_archive---------2-----------------------#2021-05-20">https://javascript.plainenglish.io/express-with-typescript-and-es-modules-compilation-build-44f175150073?source=collection_archive---------2-----------------------#2021-05-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/d9b99545286e365d6d8fe6171b1fc65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jnuiws9u0XvNyzgheYeH7w.png"/></div></div></figure><p id="4640" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">Express是Node.js后端开发中最流行的库之一。今天，我们将介绍如何为Express framework添加TypeScript支持。</p><p id="b78c" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你不熟悉Express，想看快速教程，可以看看我的另一个故事《快速入门》。</p><div class="kw kx gp gr ky kz"><a rel="noopener  ugc nofollow" target="_blank" href="/express-js-getting-started-basic-routing-938d8b629fe2"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">快速入门和基本路线</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">什么是Express.js？Express.js &amp; installation入门，并学习如何使用实现基本路由…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="li l"><div class="lj l lk ll lm li ln jw kz"/></div></div></a></div><p id="fcb5" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">要求</strong></p><ul class=""><li id="3bf5" class="lo lp iq ka b kb kc kf kg kj lq kn lr kr ls kv lt lu lv lw bi translated">Node.js需要安装在您的系统上。</li></ul><h2 id="385e" class="lx ly iq bd lz ma mb dn mc md me dp mf kj mg mh mi kn mj mk ml kr mm mn mo mp bi translated">初始化</h2><p id="2ca1" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">让我们创建一个空文件夹并初始化我们的<strong class="ka ir"> package.json </strong>文件</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="25eb" class="lx ly iq na b gy ne nf l ng nh">mkdir ExpressApp &amp;&amp; cd ExpressApp</span></pre><p id="e978" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在我们的应用程序文件夹初始化之后，我们需要初始化npm</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="ce25" class="lx ly iq na b gy ne nf l ng nh">npm init -y</span></pre><p id="1416" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装Express</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="f79c" class="lx ly iq na b gy ne nf l ng nh">yarn add express</span></pre><p id="94bf" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">安装TypeScript和所需类型</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="bdd4" class="lx ly iq na b gy ne nf l ng nh">yarn add -D <!-- -->typescript ts-node @types/node @types/express</span></pre><p id="76c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在添加了所有必需的包之后，现在我们可以初始化我们的TypeScript配置文件了</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="feac" class="lx ly iq na b gy ne nf l ng nh">yarn tsc --init</span></pre><p id="30ba" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">成功初始化您的typescript配置后，它将为您创建<strong class="ka ir"> tsconfig.json </strong>文件。</p><p id="e63b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了能够在Node.js中使用es模块并构建应用程序，需要进行一些更改</p><p id="eb33" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我已经添加了带有解释的配置文件。</p><figure class="mv mw mx my gt jr"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="5c69" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">如果你想了解更多关于tsconfig文件的信息，你可以看看这里的<a class="ae nk" href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="ba41" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">到目前为止，我们已经初始化了所有需要的东西！现在我们可以继续前进，用TypeScript创建我们的Express应用程序了！</p><h2 id="19fe" class="lx ly iq bd lz ma mb dn mc md me dp mf kj mg mh mi kn mj mk ml kr mm mn mo mp bi translated">快速开发</h2><p id="bda9" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">在安装了所有必需的包并设置了TypeScript配置之后，就该用TypeScript创建Express应用程序了。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="d13f" class="lx ly iq na b gy ne nf l ng nh">touch src/app.ts</span></pre><p id="09ea" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> src/app.ts </strong></p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="b339" class="lx ly iq na b gy ne nf l ng nh"><em class="nl">import express</em>, { <em class="nl">Application </em>, <em class="nl">Request</em>, <em class="nl">Response</em>} <em class="nl">from </em>'express';<br/><br/><em class="nl">const </em>app: <em class="nl">Application </em>= <em class="nl">express</em>()<br/><br/><em class="nl">const </em>port: <em class="nl">number </em>= 8000<br/><br/>app.get('/', (req: <em class="nl">Request</em>, res: <em class="nl">Response</em>) =&gt; {<br/>  res.send('Hello world!')<br/>})<br/><br/>app.listen(port, <em class="nl">function </em>() {<br/>  console.log(`App is listening on port ${port} !`)<br/>})</span></pre><p id="2bc0" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">有了ES模块和TypeScript的支持，我们就可以启动我们的服务器了！</p><p id="762f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在<code class="fe nm nn no na b">package.json</code>中添加一个新脚本作为</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="21b7" class="lx ly iq na b gy ne nf l ng nh">"dev": "ts-node ./src/app.ts"</span></pre><p id="212b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以使用以下命令运行该脚本</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="6bbd" class="lx ly iq na b gy ne nf l ng nh">yarn dev</span><span id="a9ca" class="lx ly iq na b gy np nf l ng nh">or </span><span id="efaf" class="lx ly iq na b gy np nf l ng nh">npm run dev</span></pre><p id="731e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">之后，你可以看看<a class="ae nk" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000/ </a>，你会在你的浏览器上看到<strong class="ka ir"> Hello World </strong>！</p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><h2 id="649e" class="lx ly iq bd lz ma mb dn mc md me dp mf kj mg mh mi kn mj mk ml kr mm mn mo mp bi translated">生产构建和编译</h2><p id="c7c3" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">还有一些其他有用的主题，如编译和创建生产版本。在您成功构建您的应用程序之后，它就可以在生产中使用了！编译您的typescript代码会将其转换为常规的普通JavaScript代码。</p><p id="3f3f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了能够将您的代码编译成JavaScript，您可以使用下面的脚本</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="ba7b" class="lx ly iq na b gy ne nf l ng nh">"build": "tsc --project ."</span></pre><p id="3e94" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将把您的代码构建到我们在tsconfig.json文件中指定的<code class="fe nm nn no na b">dist</code>文件夹中。您可以签出该文件，它将类似于这个app.js文件。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="0bcc" class="lx ly iq na b gy ne nf l ng nh"><em class="nl">import </em>express <em class="nl">from </em>'express';<br/><em class="nl">const </em>app = <em class="nl">express</em>();<br/><em class="nl">const </em>port = 8000;<br/>app.get('/', (req, res) =&gt; {<br/>    res.send('Hello world!');<br/>});<br/>app.listen(port, <em class="nl">function </em>() {<br/>    console.log(`App is listening on port ${port} !`);<br/>});</span></pre><p id="31c6" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您现在可以开始在生产中使用这些代码了！</p><p id="6e75" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">为了能够始终进行干净的构建，您可以使用下面的命令</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="f2fb" class="lx ly iq na b gy ne nf l ng nh">"build": "rm -rf ./dist &amp;&amp; tsc --project ."</span></pre><p id="6c47" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这将删除已经在另一个构建中创建的<code class="fe nm nn no na b">dist</code>文件夹，并创建一个新的构建。</p><p id="bb54" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">完成这些步骤后，在本地主机上运行生产构建代码非常容易。</p><p id="555b" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我们应该将另一个脚本添加到package.json文件中，以便能够在localhost中运行生产构建。</p><pre class="mv mw mx my gt mz na nb nc aw nd bi"><span id="6d3c" class="lx ly iq na b gy ne nf l ng nh">"start:prod": "yarn build &amp;&amp; node ./dist/app.js"</span></pre><p id="0e92" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该命令将创建一个新的生产构建，并开始从dist文件夹运行它。</p><p id="6b0f" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">这就是使用TypeScript设置Express应用程序并在节点应用程序中使用ES模块所需的全部内容！</p><p id="5146" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">您可以从这里找到Express和TypeScript的样板文件:</p><div class="kw kx gp gr ky kz"><a href="https://github.com/hadnazzar/Express-typescript-esmodule" rel="noopener  ugc nofollow" target="_blank"><div class="la ab fo"><div class="lb ab lc cl cj ld"><h2 class="bd ir gy z fp le fr fs lf fu fw ip bi translated">hadnazzar/Express-type script-es module</h2><div class="lg l"><h3 class="bd b gy z fp le fr fs lf fu fw dk translated">将Express与Typescript和ES模块一起使用。通过以下方式为hadnazzar/Express-typescript-es module开发做出贡献…</h3></div><div class="lh l"><p class="bd b dl z fp le fr fs lf fu fw dk translated">github.com</p></div></div><div class="li l"><div class="nx l lk ll lm li ln jw kz"/></div></div></a></div><p id="1218" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nl">如果你觉得这篇文章很有帮助，你</em> <a class="ae nk" href="https://medium.com/@melihyumak" rel="noopener"> <strong class="ka ir"> <em class="nl">可以通过使用我的推荐链接注册一个</em> <a class="ae nk" href="https://melihyumak.medium.com/membership" rel="noopener"> <strong class="ka ir"> <em class="nl">中级会员来访问类似的</em> </strong> </a> <em class="nl">。</em> </strong> </a></p><p id="bedb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir"> <em class="nl">跟我上</em> </strong> <a class="ae nk" href="https://twitter.com/hadnazzar" rel="noopener ugc nofollow" target="_blank"> <strong class="ka ir">推特</strong> </a></p><figure class="mv mw mx my gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/e09adde9fd734db2f987c8df72839da8.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/0*NxeTL1qQlC1dv9-b.png"/></div></div><figcaption class="nz oa gj gh gi ob oc bd b be z dk">Subscribe for more on <a class="ae nk" href="https://www.youtube.com/c/TechnologyandSoftware?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">Youtube</a></figcaption></figure><h1 id="8d23" class="od ly iq bd lz oe of og mc oh oi oj mf ok ol om mi on oo op ml oq or os mo ot bi translated">编码快乐！</h1><p id="7bec" class="pw-post-body-paragraph jy jz iq ka b kb mq kd ke kf mr kh ki kj ms kl km kn mt kp kq kr mu kt ku kv ij bi translated">梅利赫</p><p id="08fb" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nl">更多内容请看</em><a class="ae nk" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nl">plain English . io</em></a></p></div></div>    
</body>
</html>
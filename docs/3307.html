<html>
<head>
<title>How to Add MDX to your Gatsby Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将MDX添加到您的盖茨比博客中</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-mdx-to-your-gatsby-blog-75f982e41d26?source=collection_archive---------24-----------------------#2021-07-05">https://javascript.plainenglish.io/how-to-add-mdx-to-your-gatsby-blog-75f982e41d26?source=collection_archive---------24-----------------------#2021-07-05</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="1deb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在你的盖茨比博客中了解如何使用MDX而不是Markdown</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/ebfd756098792df0be62fd01a9622dd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*P1huJm2nzE_hLkun.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo Illustration by David Fekke</figcaption></figure><p id="ca04" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">原发布于</em><a class="ae lc" href="https://fek.io/blog/adding-mdx-to-your-gatsby-blog/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://fek . io</em></a><em class="lb">。</em></p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="c145" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae lc" href="https://github.com/mdx-js/mdx" rel="noopener ugc nofollow" target="_blank"> MDX </a>是<a class="ae lc" href="https://www.markdownguide.org/" rel="noopener ugc nofollow" target="_blank"> Markdown </a>语法和<a class="ae lc" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a> JSX语法的混合体。在Markdown中写文章的作者可以在文章中使用React组件。</p><p id="3ee4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">目前Markdown允许作者在文章中添加HTML标签。React的一个优点是，它使我们能够创建HTML元素组合的组件，然后在React应用程序中重用这些元素。MDX允许我们在降价帖子中使用这些相同的组件。</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="cf09" class="lk ll iq lg b gy lm ln l lo lp">import { Link } from 'gatsby'<br/><br/>import Layout from '../components/layout'<br/>import Image from '../components/image'<br/>import SEO from '../components/seo'<br/><br/>&lt;SEO title="Home" keywords={['gatsby', 'application', 'react']} /&gt;<br/><br/># Hi people<br/><br/>Welcome to your new Gatsby site.<br/><br/>Now go build something great.<br/><br/>&lt;div style={{ maxWidth: '300px', marginBottom: '1.45rem' }}&gt;<br/>  &lt;Image /&gt;<br/>&lt;/div&gt;<br/>&lt;Link to="/page-2/"&gt;Go to page 2&lt;/Link&gt;</span></pre><h1 id="7abf" class="lq ll iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">向您的博客添加MDX</h1><p id="87f8" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">目前我在我的博客上使用常规降价。我决定我想看看将MDX添加到我的博客会涉及到什么。在我当前的Gatsby站点实现中，我使用了<code class="fe ms mt mu lg b">gatsby-transformer-remark</code>插件将markdown转换成Gatsby数据，这些数据可以用来呈现我的博客文章。</p><p id="ac08" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Gatsby提供了一个很好的教程，介绍如何使用starter site获取一个现有的Gatsby博客，并将其转换为使用MDX而不是markdown。</p><div class="mv mw gp gr mx my"><a href="https://www.gatsbyjs.com/blog/2019-11-21-how-to-convert-an-existing-gatsby-blog-to-use-mdx/" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">如何将现有的Gatsby博客转换为使用MDX</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">mdx是一种文件格式，允许您通过. MDX文件将JSX添加到Markdown文件中！它由…创建并维护</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">www.gatsbyjs.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm kv my"/></div></div></a></div><p id="0cf0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个帖子是2019年的，有些行号不符合，但它仍然可以作为一个转换你的博客使用MDX的基础。</p><p id="563d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">w将使用<code class="fe ms mt mu lg b">Gatsby Starter Blog</code>作为我们转换的基础。您可以使用下面的Gatsby命令安装它；</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="afc1" class="lk ll iq lg b gy lm ln l lo lp">&gt; gatsby new gatsby-blog <a class="ae lc" href="https://github.com/gatsbyjs/gatsby-starter-blog" rel="noopener ugc nofollow" target="_blank">https://github.com/gatsbyjs/gatsby-starter-blog</a></span></pre><p id="ad8f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在修改代码之前，您需要将mdx插件添加到gatsby站点。下面是添加MDX插件的NPM命令。</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="5c70" class="lk ll iq lg b gy lm ln l lo lp">&gt; npm install --save gatsby-plugin-mdx gatsby-plugin-feed-mdx @mdx-js/mdx @mdx-js/react</span></pre><p id="9ffe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您的<code class="fe ms mt mu lg b">gatsby-config.json</code>文件中，我们将用<code class="fe ms mt mu lg b">gatsby-plugin-mdx</code>配置设置替换<code class="fe ms mt mu lg b">gatsby-transformer-remark</code>配置。在选项下，您需要为<code class="fe ms mt mu lg b">extensions</code>添加属性，并将<code class="fe ms mt mu lg b">plugins</code>属性的名称改为<code class="fe ms mt mu lg b">gatsbyRemarkPlugins</code>。最终的配置应该如下例所示。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><p id="18e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后用<code class="fe ms mt mu lg b">gatsby-plugin-feed-mdx</code>替换配置中的<code class="fe ms mt mu lg b">gatsby-plugin-feed</code>插件。完成配置更改后，您可以移除旧的NPM模块。</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="f2bc" class="lk ll iq lg b gy lm ln l lo lp">&gt; npm uninstall --save gatsby-transformer-remark gatsby-plugin-feed</span></pre><h1 id="6bf9" class="lq ll iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">更改节点API</h1><p id="c4f2" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">我们需要对<code class="fe ms mt mu lg b">gatsby-node.js</code>文件做一些修改。我们需要将所有提到<code class="fe ms mt mu lg b">allMarkdownRemark</code>的地方替换为<code class="fe ms mt mu lg b">allMdx</code>。我们还需要将所有使用<code class="fe ms mt mu lg b">MarkdownRemark</code>的引用类型改为使用<code class="fe ms mt mu lg b">Mdx</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><h1 id="8ac4" class="lq ll iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">将任何页面引用更改为Markdown</h1><p id="0767" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">既然我们已经将节点API更改为使用Mdx，那么我们可以专注于将仍然引用<code class="fe ms mt mu lg b">MarkdownRemark</code>的任何页面或模板更改为使用<code class="fe ms mt mu lg b">Mdx</code>。在<code class="fe ms mt mu lg b">index.js</code>页面中，我们用Mdx替换了所有的降价参考。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><p id="4417" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以对<code class="fe ms mt mu lg b">src/templates/blog-post.js</code>模板进行这些更改，但是这次引用将分别是<code class="fe ms mt mu lg b">markdownRemark</code>和<code class="fe ms mt mu lg b">mdx</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><p id="a4f1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将<code class="fe ms mt mu lg b">markdownRemark</code>改为<code class="fe ms mt mu lg b">mdx</code>后，在GraphQL查询中用<code class="fe ms mt mu lg b">body</code>替换<code class="fe ms mt mu lg b">html</code>。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><p id="ba8d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们添加一篇MDX博客文章。我们将把这个文件命名为<code class="fe ms mt mu lg b">example.mdx</code>,并把它和我们的其他帖子放在<code class="fe ms mt mu lg b">blog</code>目录中。</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="e5ff" class="lk ll iq lg b gy lm ln l lo lp"><strong class="lg ir">// example.mdx<br/>---</strong><br/>title: MDX Example<br/>date: "2021-07-03T22:12:03.284Z"<br/><strong class="lg ir">description: "MDX Example"<br/>---</strong><br/><br/><strong class="lg ir"># My first MDX post</strong><br/><br/>This is a post showing MDX in action.<br/><br/>MDX lets you write JSX embedded inside markdown, perfect for technical blogs.</span></pre><p id="c6ee" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在让我们创建一个组件来添加Youtube视频到我们的MDX文章。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn le l"/></div></figure><p id="1208" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们可以将这个组件添加到我们的MDX帖子中。</p><pre class="km kn ko kp gt lf lg lh li aw lj bi"><span id="f974" class="lk ll iq lg b gy lm ln l lo lp"><strong class="lg ir">// example.mdx<br/>---</strong><br/>title: MDX Example<br/>date: "2021-07-03T22:12:03.284Z"<br/><strong class="lg ir">description: "MDX Example"<br/>---</strong><br/>import Youtube from "../../../src/components/yt.js"<br/><br/><strong class="lg ir"># My first MDX post</strong><br/><br/>This is a post showing MDX in action.<br/><br/>&lt;Youtube yid="jYVM6KOWYBs" /&gt;<br/><br/><strong class="lg ir">## MDX</strong><br/><br/>MDX lets you write JSX embedded inside markdown, perfect for technical blogs.</span></pre><h1 id="3bde" class="lq ll iq bd lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm bi translated">结论</h1><p id="e702" class="pw-post-body-paragraph jn jo iq jp b jq mn js jt ju mo jw jx jy mp ka kb kc mq ke kf kg mr ki kj kk ij bi translated">通过对我们的Gatsby博客进行一些简单的修改，我们现在可以对我们的博客文章使用基于MDX的React组件。现在，我们可以开始使用自己的组件，混合在我们简化的基于降价的标记中。现在，我们只需要一个React元素就可以为我们的帖子添加视频和音频。</p></div><div class="ab cl no np hu nq" role="separator"><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt nu"/><span class="nr bw bk ns nt"/></div><div class="ij ik il im in"><p id="21e2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">更多内容看</em> <a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> <em class="lb">说白了</em></strong></a></p></div></div>    
</body>
</html>
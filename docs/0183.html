<html>
<head>
<title>21 Useful JavaScript Snippets For Everyday Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">21个对日常开发有用的JavaScript代码片段</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/21-useful-javascript-snippets-for-everyday-development-9e66e33bfb86?source=collection_archive---------4-----------------------#2021-01-11">https://javascript.plainenglish.io/21-useful-javascript-snippets-for-everyday-development-9e66e33bfb86?source=collection_archive---------4-----------------------#2021-01-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c62f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有用且省时的小JavaScript代码片段</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/632bd60a7c275fb91fc9ebd646614385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mDEUSW9t86arTzhT"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@e_clement?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Evelyn Clement</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9865" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面是一些有用的JavaScript代码片段，任何前端/web开发人员都可以添加到他们的应用程序中，并在日常开发中使用。</p><p id="cd0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">许多代码片段都是一行程序，易于理解，可以添加到任何web开发前端项目中。</p><p id="0090" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于JavaScript一直在变化，所以创建可重用的方法很重要，这样如果有什么变化，你只需要在一个地方改变它。希望下面的列表中至少有一个可以帮助你创建一些你自己的可重用方法！</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="7ee4" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">1.以数字形式获取输入值</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ab51" class="lz ma iq mt b gy mx my l mz na">const checkMyValueType = (event) =&gt; {<br/>  console.log(typeof event.target.value) // string<br/>  console.log(typeof event.target.<strong class="mt ir">valueAsNumber</strong>) // number<br/>}</span><span id="52a7" class="lz ma iq mt b gy nb my l mz na">&lt;input type="number" onkeyup="checkMyValueType(event)" /&gt;</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="b5a8" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">2.将输入复制到剪贴板</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="5780" class="lz ma iq mt b gy mx my l mz na">function copyToClipboard(inputID){<br/>navigator.clipboard.writeText(document.querySelector(inputID).value);<br/>}</span></pre><p id="274c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="nc">注意:并非每个浏览器都支持导航器(一定要检查IE) </em> </strong></p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="1d7e" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">3.检查选项卡浏览器选项卡是否在视图中</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ac9f" class="lz ma iq mt b gy mx my l mz na">const isBrowserTabInView = () =&gt; document.hidden;</span><span id="0a80" class="lz ma iq mt b gy nb my l mz na">isBrowserTabInView(); // returns true or false depending if tab is in view / focus</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="62be" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">4.将布尔值更改为相反的值</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="d7e4" class="lz ma iq mt b gy mx my l mz na">let myBool = false;</span><span id="1f99" class="lz ma iq mt b gy nb my l mz na">myBool = !myBool;<br/>console.log(myBool); // true</span><span id="d084" class="lz ma iq mt b gy nb my l mz na">myBool = !myBool;<br/>console.log(myBool); // false</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="d200" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">5.检查给定的数字是否是偶数</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="bbd9" class="lz ma iq mt b gy mx my l mz na">const isEven = num =&gt; num % 2 === 0;</span><span id="83a4" class="lz ma iq mt b gy nb my l mz na">console.log(isEven(2)) // true<br/>console.log(isEven(3)) // false</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="6882" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">6.检查日期是否是工作日</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="d4b4" class="lz ma iq mt b gy mx my l mz na">const isWeekday = d =&gt; d.getDay() % 6 !== 0;</span><span id="b2f5" class="lz ma iq mt b gy nb my l mz na">console.log(isWeekday(new Date(2021, 0, 11))); // true (Monday)<br/>console.log(isWeekday(new Date(2021, 0, 10))); // false (Sunday)</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="6558" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">7.向日期添加天数</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e213" class="lz ma iq mt b gy mx my l mz na">const addDaysToDate = (date, n) =&gt; {<br/>  date.setDate(date.getDate() + n);<br/>  return date.toISOString().split('T')[0];<br/>};</span><span id="f280" class="lz ma iq mt b gy nb my l mz na">addDaysToDate('2021-0-10', 10); // "2021-01-20"<br/>addDaysToDate('2021-0-10', -10); // '2020-12-31'</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="a1ea" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">8.从日期中获取时间</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="c8dc" class="lz ma iq mt b gy mx my l mz na">const timeFromDate = date =&gt; date.toTimeString().slice(0, 8);</span><span id="5600" class="lz ma iq mt b gy nb my l mz na">console.log(timeFromDate(new Date(2021, 0, 10, 17, 30, 0))); <br/>// "17:30:00"<br/>console.log(timeFromDate(new Date(2021, 0, 10, 5, 56, 44)));<br/>// "05:56:44"</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="6c76" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">9.计算两个日期之间的周数</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="102e" class="lz ma iq mt b gy mx my l mz na">const countWeekDaysBetween = (startDate, endDate) =&gt;<br/>  Array<br/>    .from({ length: (endDate - startDate) / (1000 * 3600 * 24) })<br/>    .reduce(count =&gt; {<br/>      if (startDate.getDay() % 6 !== 0) {<br/>        count++;<br/>      }<br/>     startDate = new Date(startDate.setDate(startDate.getDate() + 1));<br/>      return count;<br/>    }, 0);</span><span id="db24" class="lz ma iq mt b gy nb my l mz na">countWeekDaysBetween(new Date(2021, 0, 10), new Date(2021, 0, 20)); // 7<br/>countWeekDaysBetween(new Date(2021, 1, 10), new Date(2021, 2, 18)); // 26</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="0700" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">10.检查本地存储是否已启用</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="97ec" class="lz ma iq mt b gy mx my l mz na">const isLocalStorageEnabled = () =&gt; {<br/>  try {<br/>    const key = `__storage__test`;<br/>    window.localStorage.setItem(key, null);<br/>    window.localStorage.removeItem(key);<br/>    return true;<br/>  } catch (e) {<br/>    return false;<br/>  }<br/>};</span><span id="f2c1" class="lz ma iq mt b gy nb my l mz na">isLocalStorageEnabled(); <em class="nc">// true, if localStorage is accessible</em></span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="468f" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">11.检查某事花了多长时间</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="1d18" class="lz ma iq mt b gy mx my l mz na">var startTime = performance.now();<br/>anyMethodOrCode();<br/>const endTime = performance.now();</span><span id="6189" class="lz ma iq mt b gy nb my l mz na">console.log(endTime - startTime + " milliseconds."); // (Time in milliseconds)</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="508e" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">12.捕捉右键点击</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="99a5" class="lz ma iq mt b gy mx my l mz na">window.oncontextmenu = () =&gt; {<br/>  console.log('right click');<br/>}</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="d939" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">13.仅触发一次事件侦听器</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="e1b9" class="lz ma iq mt b gy mx my l mz na">const myButton = document.getElementById("myBtn");</span><span id="3b15" class="lz ma iq mt b gy nb my l mz na">const myClickFunction = () =&gt; {<br/>  console.log('this click will only get called once')<br/>}</span><span id="408f" class="lz ma iq mt b gy nb my l mz na">myButton.addEventListener('click', myClickHandler, {<br/>  once: true,<br/>});</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="ce80" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">14.滚动到页面顶部</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="0dc2" class="lz ma iq mt b gy mx my l mz na">const scrollToTopOfDocument = () =&gt; {<br/>  const c = document.documentElement.scrollTop || document.body.scrollTop;<br/>  if (c &gt; 0) {<br/>    window.requestAnimationFrame(scrollToTop);<br/>    window.scrollTo(0, c - c / 8);<br/>  }<br/>};</span><span id="769a" class="lz ma iq mt b gy nb my l mz na">scrollToTopOfDocument();</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="ebe7" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">15.检查字符串是否大写</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="ca2d" class="lz ma iq mt b gy mx my l mz na">const isUpperCase = str =&gt; str === str.toUpperCase();</span><span id="cfae" class="lz ma iq mt b gy nb my l mz na">console.log(isUpperCase("string")); // false<br/>console.log(isUpperCase("STRING")); // true<br/>console.log(isUpperCase("5TR1NG")); // true</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="4184" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">16.检查给定元素是否在焦点上</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="a4ae" class="lz ma iq mt b gy mx my l mz na">const elementIsInFocus = el =&gt; (el === document.activeElement);</span><span id="88a9" class="lz ma iq mt b gy nb my l mz na">elementIsInFocus(anyElement)// returns true if in focus, false if not in focus</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="882f" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">17.查找数组之间的差异</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="2fa1" class="lz ma iq mt b gy mx my l mz na">const differenceInArrays = (array1, array2) =&gt;  {  <br/>    const set = new Set(array2);  <br/>    return array1.filter(x =&gt; !set.has(x));<br/>}; </span><span id="fdbf" class="lz ma iq mt b gy nb my l mz na">differenceInArrays(["apple", "orange", "banana"], ["apple", "orange", "mango"]); // ["banana"]</span><span id="4c2b" class="lz ma iq mt b gy nb my l mz na">differenceInArrays([10, 12, 5], [66, 10, 6]); // [12, 5]</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="a69c" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">18.从元素中移除事件侦听器</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="6c78" class="lz ma iq mt b gy mx my l mz na">const removeEventOffElement = (el, evt, fn, opts = false) =&gt; el.removeEventListener(evt, fn, opts);</span><span id="8fc4" class="lz ma iq mt b gy nb my l mz na">const testFunction = () =&gt; console.log('My function has been called');<br/>document.body.addEventListener('click', testFunction);</span><span id="28b5" class="lz ma iq mt b gy nb my l mz na">// Call remove method<br/>removeEventOffElement(document.body, 'click', fn); </span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="82eb" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">19.以十六进制格式生成随机颜色</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="426b" class="lz ma iq mt b gy mx my l mz na">const generateRandomColour = () =&gt;   "#" + Math.floor(Math.random()*16777215).toString(16);</span><span id="7942" class="lz ma iq mt b gy nb my l mz na">//EXAMPLE<br/>document.getElementsByTagName("body")[0].style.color = generateRandomColour();</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="9cd2" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">20.查找第一个定义的非空参数</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="5595" class="lz ma iq mt b gy mx my l mz na">const getFirstValidValue = (...values) =&gt; values.find(v =&gt; ![undefined, null].includes(v));</span><span id="642f" class="lz ma iq mt b gy nb my l mz na">console.log(getFirstValidValue(null, undefined, 'Hey', null); // 'Hey'</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h2 id="e285" class="lz ma iq bd mb mc md dn me mf mg dp mh lf mi mj mk lj ml mm mn ln mo mp mq mr bi translated">21.侦听指定元素之外的点击</h2><pre class="kg kh ki kj gt ms mt mu mv aw mw bi"><span id="6399" class="lz ma iq mt b gy mx my l mz na">const onClickOutsideElement = (element, callback) =&gt; {<br/>  document.addEventListener('click', e =&gt; {<br/>    if (!element.contains(e.target)) callback();<br/>  });<br/>};</span><span id="1ad9" class="lz ma iq mt b gy nb my l mz na">onClickOutside('#some-element', () =&gt; console.log('Hey you missed'));<br/>// Will log "Hey you missed" everytime a click that was not "some-element" was clicked</span></pre></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="9624" class="nd ma iq bd mb ne nf ng me nh ni nj mh jw nk jx mk jz nl ka mn kc nm kd mq nn bi translated">结论</h1><p id="639a" class="pw-post-body-paragraph kw kx iq ky b kz no jr lb lc np ju le lf nq lh li lj nr ll lm ln ns lp lq lr ij bi translated">有时使用JavaScript，开发人员会发现自己一遍又一遍地创建相同的东西，希望上面的一些片段可以在您的应用程序中重用。</p><p id="5890" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">跟上新的JavaScript特性和浏览器API非常重要。许多开发人员有时会创建过于复杂的方法，因为他们不知道从浏览器/ JavaScript中可以免费获得什么。</p><p id="b5ff" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">希望你喜欢阅读！</p></div></div>    
</body>
</html>
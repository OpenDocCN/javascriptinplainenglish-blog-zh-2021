<html>
<head>
<title>A guide to Flow in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React Native中的流程指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/a-guide-to-flow-in-react-native-48497ef78e99?source=collection_archive---------6-----------------------#2021-01-30">https://javascript.plainenglish.io/a-guide-to-flow-in-react-native-48497ef78e99?source=collection_archive---------6-----------------------#2021-01-30</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5c15" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><em class="kc">流默认自带React Native，但是怎么用呢？</em></h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/4d61f71eb41131f5fffacbdeb2fc3d08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BMCG3cu21W5MbODBbhI-sA.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@austindistel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Austin Distel</a> on <a class="ae kt" href="https://unsplash.com/s/photos/app-development?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="a5fb" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">介绍</h1><p id="ad16" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><a class="ae kt" href="http://flow.org/" rel="noopener ugc nofollow" target="_blank"> Flow </a>是一个框架，和<a class="ae kt" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>一样，提升了JavaScript中的静态类型。和TypeScript一样，React Native也没有任何问题。所以我在想，为什么他们要推广两种静态类型呢？</p><p id="65d7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">与TypeScript相比，Flow似乎没有那么大的承诺，因为它使用常规的<code class="fe mn mo mp mq b">.js</code>文件而不是<code class="fe mn mo mp mq b">.ts</code>。</p><h1 id="e5b9" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">我们开始吧</h1><p id="d71f" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">我们首先通过在我们的终端中运行<code class="fe mn mo mp mq b">npx react-native init flow</code>来初始化一个新的<a class="ae kt" href="https://reactnative.dev/" rel="noopener ugc nofollow" target="_blank"> React Native </a>项目(没有Expo ),其中‘flow’是项目的名称。这可以是您想要的任何有效名称。</p><p id="c797" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">尝试在您的设备或模拟器上运行裸机应用程序。我将使用一个实际的Android设备，并使用<code class="fe mn mo mp mq b">npx react-native run-android</code>运行它。确保您在正确的目录中。</p><p id="cc31" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">运行裸应用程序后，我们将继续设置流程。我们已经有了一个<code class="fe mn mo mp mq b">.flowconfig</code>文件，但是我们缺少依赖关系。</p><p id="ee81" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">运行<code class="fe mn mo mp mq b">npm i --save-dev flow-bin</code>将Flow安装为一个开发依赖项。</p><p id="4dc0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">打开您的<code class="fe mn mo mp mq b">App.js</code>，您已经可以看到第一个流语法。您的IDE可能会为此向您提供错误。我用的是WebStorm，因为它内置了对心流的支持，而且对学生是免费的。</p><h1 id="4d21" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">流程基础</h1><p id="2591" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">开始使用Flow的第一件事是在文档的顶部添加<code class="fe mn mo mp mq b">// @flow</code>。这将让Flow知道文档使用Flow进行静态类型化。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="e629" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">我们在文档的顶部声明了Flow，并且在App函数体中定义了一个变量<code class="fe mn mo mp mq b">num</code>，我们在<code class="fe mn mo mp mq b">Text</code>组件中使用这个变量。</p><p id="1785" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如您所料，流使用的语法与TypeScript非常相似。您在变量名定义后添加一个冒号<code class="fe mn mo mp mq b">:</code>，并将变量设置为一个数字。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/d11257e7322e225dfedc29ddca7c6ed2.png" data-original-src="https://miro.medium.com/v2/resize:fit:756/format:webp/1*udUfokCORSNALm2XSDFcUA.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Error showcase</figcaption></figure><p id="115c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">然而，如果我们用一个字符串值声明我们的<code class="fe mn mo mp mq b">num</code>变量，我们将得到一条红线。如果你有任何使用TypeScript的经验，这并不新鲜。但是让我们更深入地了解一下。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="be4c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您可以将参数设置为特定的类型，并且您可能会了解这对于提高可读性和减少开发过程中的错误是多么有用。</p><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/151d9bdd14978708f4e1f511ad6aed09.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*5zDn2V9s1zqYatWB_HPmQQ.png"/></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Error showcase</figcaption></figure><p id="7665" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">因为如果我们插入一个无效的参数，我们会得到一个错误。这可以减少头痛，因为你可能永远不会再得到类型不匹配。</p><h1 id="eaf8" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">类型</h1><p id="0ec5" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">像TypeScript一样，您可以声明类型。这些对象很可能是人物类型、书籍类型或更复杂的类型。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="05f7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这里我们定义一个<code class="fe mn mo mp mq b">person</code>类型，根据<code class="fe mn mo mp mq b">name</code>和<code class="fe mn mo mp mq b">age</code>的有效类型声明一个人<code class="fe mn mo mp mq b">marques</code>。我们还可以向<code class="fe mn mo mp mq b">person</code>声明子对象类型。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="68c8" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在我们在<code class="fe mn mo mp mq b">person</code>类型中有了一个子对象<code class="fe mn mo mp mq b">children</code>。</p><p id="1817" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您可能想在React或React Native中做的事情是给<code class="fe mn mo mp mq b">props</code>参数赋予类型。这完全符合你的期望。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="mr ms l"/></div></figure><h2 id="d162" class="mv kv in bd kw mw mx dn la my mz dp le lv na nb lg lz nc nd li md ne nf lk ng bi translated">可选类型</h2><p id="4cf3" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">有时你会希望有可选的类型。如果使用“400k”和“22m”这样的格式，并不是每个数字都是数字类型。您可以使用<code class="fe mn mo mp mq b">?</code>符号来定义它们，如下所示:</p><pre class="ke kf kg kh gt nh mq ni nj aw nk bi"><span id="5da4" class="mv kv in mq b gy nl nm l nn no">type Props = {<br/>  foo: number,<br/>  bar?: string<br/>};</span></pre><p id="278a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如你所见，这很容易做到，就像在其他编程语言中一样。</p><h1 id="d1eb" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">下一步是什么？</h1><p id="2deb" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">这些是心流的绝对基础。在使用它一段时间后，我可能不得不说我不会很快使用Flow。目前缺少IDE支持。举例来说，我无法让它在VSC工作而不出现错误，说明我只能使用<code class="fe mn mo mp mq b">.ts</code>文件中的类型。</p><p id="9286" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但尽管如此，我对这个项目的发展方向很感兴趣，我相信支持会继续增长，因为它仍在积极开发中。</p><p id="8931" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如果您想了解更多信息，我将向您推荐Flow网站上的官方文档。即使对我来说，还有很多东西要学。</p><p id="7e15" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">那么，你会使用心流吗？或者你会坚持打字稿吗？</p></div><div class="ab cl np nq hr nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ig ih ii ij ik"><p id="2bcf" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">祝你愉快。</p></div></div>    
</body>
</html>
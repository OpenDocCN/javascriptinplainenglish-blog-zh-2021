<html>
<head>
<title>Handle Push Notifications in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中处理推送通知</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/handle-push-notifications-in-react-eba1dce496db?source=collection_archive---------9-----------------------#2021-03-21">https://javascript.plainenglish.io/handle-push-notifications-in-react-eba1dce496db?source=collection_archive---------9-----------------------#2021-03-21</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="e772" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">使用Firebase的5个步骤</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/a3c9f0aeb4efa8b54c1b66d2346436d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhJgMpMtvE61yrbznSqtTQ.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://unsplash.com/@maxkuk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Max Kukurudziak</a> on <a class="ae kw" href="/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ec36" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">通知是良好用户体验的重要组成部分。通过正确使用通知，您可以让您的用户随时了解您的产品和优惠。</p><p id="a78e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天，我们将了解如何在ReactJS web应用程序中接收通知。我假设您已经有了一个基本的react应用程序。我们将使用<strong class="kz is"> firebase </strong>作为通知部分。</p><h1 id="0a52" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">第一步。安装Firebase</h1><p id="718b" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">您应该安装所需的依赖项</p><pre class="kh ki kj kk gu mq mr ms mt aw mu bi"><span id="b560" class="mv lu ir mr b gz mw mx l my mz">yarn add firebase</span></pre><p id="66d8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在转到您的firebase<code class="fe na nb nc mr b">console</code>-&gt;-<code class="fe na nb nc mr b">create a project</code>-&gt;获取您的firebase项目配置详细信息。你可以从<a class="ae kw" href="https://firebase.google.com/docs/web/setup#config-object" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多</p></div><div class="ab cl nd ne hv nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ik il im in io"><h1 id="fecd" class="lt lu ir bd lv lw nk ly lz ma nl mc md jx nm jy mf ka nn kb mh kd no ke mj mk bi translated">第二步。将服务人员添加到项目</h1><p id="a8e4" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">为了接收通知，我们需要在我们的应用程序中有一个服务工作者。</p><p id="cae8" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">一个<code class="fe na nb nc mr b"><em class="np">service worker</em></code>是你的浏览器在后台运行的脚本，独立于网页，为不需要网页或用户交互的功能打开了大门。</p><p id="5c99" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因为我们希望在没有任何用户交互的情况下接收通知，所以我们需要一个服务人员。去创造一个。。。</p><ul class=""><li id="eeb7" class="nq nr ir kz b la lb ld le lg ns lk nt lo nu ls nv nw nx ny bi translated">进入你的公共文件夹(里面有index.html文件的文件夹)</li><li id="a0a1" class="nq nr ir kz b la nz ld oa lg ob lk oc lo od ls nv nw nx ny bi translated">创建一个名为<code class="fe na nb nc mr b"><strong class="kz is">firebase-messaging-sw.js</strong></code>的新文件</li><li id="9478" class="nq nr ir kz b la nz ld oa lg ob lk oc lo od ls nv nw nx ny bi translated">添加以下代码，并用您的配置值替换config对象的值</li></ul><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">firebase-messaging-sw.js</figcaption></figure></div><div class="ab cl nd ne hv nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ik il im in io"><h1 id="ba95" class="lt lu ir bd lv lw nk ly lz ma nl mc md jx nm jy mf ka nn kb mh kd no ke mj mk bi translated">第三步。注册服务人员</h1><p id="d96d" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">在呈现应用程序之前，在App.js(或任何其他组件/钩子)中添加以下代码。它将注册服务人员来处理后台通知。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="6f04" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">运行应用程序后，您可以从浏览器进入您的开发工具，在应用程序&gt;服务人员下查看服务人员是否已激活。</p><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj og"><img src="../Images/39f3b6f98396de0c854ea9e1fe439b4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eJSTuClRvI5EdJD5Me1h6Q.png"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Browsers dev tools</figcaption></figure></div><div class="ab cl nd ne hv nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ik il im in io"><h1 id="fa9c" class="lt lu ir bd lv lw nk ly lz ma nl mc md jx nm jy mf ka nn kb mh kd no ke mj mk bi translated">第四步。添加实用功能</h1><p id="9fd3" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">现在我们已经准备好在浏览器中接收通知了。但是我们需要更多的东西。</p><ul class=""><li id="99e5" class="nq nr ir kz b la lb ld le lg ns lk nt lo nu ls nv nw nx ny bi translated">用户是否希望查看通知的许可</li><li id="374c" class="nq nr ir kz b la nz ld oa lg ob lk oc lo od ls nv nw nx ny bi translated">标识我们设备的设备令牌(我们必须将其保存在某个地方)</li></ul><p id="8b3e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，在App.js文件中添加以下代码来获取用户权限和设备令牌</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">User Permission</figcaption></figure><p id="fb10" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是如果你想保持代码的整洁，你可以创建一个定制的钩子，包含通知所需的所有逻辑，名为<code class="fe na nb nc mr b">useFirebaseNotification.js </code>，就像这样。。。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div></figure><p id="9841" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这个钩子将注册您的服务人员，请求许可并为您获取设备令牌。</p><p id="901c" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">从你的App.js调用这个钩子</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">App.js</figcaption></figure><p id="afb3" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">干净多了吧。</p></div><div class="ab cl nd ne hv nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ik il im in io"><h1 id="cfc9" class="lt lu ir bd lv lw nk ly lz ma nl mc md jx nm jy mf ka nn kb mh kd no ke mj mk bi translated">第五步。从后端发送通知</h1><p id="b8e4" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">我们已经为在前端接收通知做好了准备。无论我们的应用程序是否在前台，我们都会收到通知。</p><p id="1940" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">如果您有一个后端应用程序表单，可以在其中处理通知，那么您可以从前面获取设备令牌并发送通知。</p><p id="c9c1" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">或者您也可以从firebase控制台发送通知。</p><p id="50d5" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">从您的后端(也应该连接到firebase，但不在本教程的范围内)您可以使用以下代码发送通知。来自NodeJS</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="oe of l"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Index.js</figcaption></figure><p id="3ed7" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">希望您能在浏览器中看到通知。您现在可以在收到通知后做各种定制工作。</p><p id="f1fa" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">今天就到这里。我希望你已经发现这很有用。祝你有愉快的一天！</p></div><div class="ab cl nd ne hv nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ik il im in io"><div class="kh ki kj kk gu oh"><a rel="noopener  ugc nofollow" target="_blank" href="/20-essential-parts-of-any-large-scale-react-app-ee4bd35436a0"><div class="oi ab fp"><div class="oj ab ok cl cj ol"><h2 class="bd is gz z fq om fs ft on fv fx iq bi translated">任何大规模反应应用的20个关键部分</h2><div class="oo l"><h3 class="bd b gz z fq om fs ft on fv fx dk translated">如果您正在编写企业级代码，您需要知道这一点</h3></div><div class="op l"><p class="bd b dl z fq om fs ft on fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="oq l"><div class="or l os ot ou oq ov kq oh"/></div></div></a></div><div class="ow ox gq gs oy oh"><a href="https://betterprogramming.pub/the-7-traits-of-a-rock-star-react-developer-747fbb001c05" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab fp"><div class="oj ab ok cl cj ol"><h2 class="bd is gz z fq om fs ft on fv fx iq bi translated">摇滚明星反应型开发者的7个特征</h2><div class="oo l"><h3 class="bd b gz z fq om fs ft on fv fx dk translated">有所不同的习惯</h3></div><div class="op l"><p class="bd b dl z fq om fs ft on fv fx dk translated">betterprogramming.pub</p></div></div><div class="oq l"><div class="oz l os ot ou oq ov kq oh"/></div></div></a></div></div></div>    
</body>
</html>
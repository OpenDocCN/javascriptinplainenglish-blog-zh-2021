<html>
<head>
<title>JavaScript Array forEach() method to loop through an Array</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript Array forEach()方法循环遍历数组</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-array-foreach-method-to-loop-through-an-array-f3af3610846f?source=collection_archive---------8-----------------------#2021-01-02">https://javascript.plainenglish.io/javascript-array-foreach-method-to-loop-through-an-array-f3af3610846f?source=collection_archive---------8-----------------------#2021-01-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/497da15bc494cfd6d4b10b8e37edd7d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*obDgPImEWv7CWzz-VnsuTQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">(Posted in jscurious.com)</figcaption></figure><p id="e675" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">当我们有一个数据数组时，我们经常需要遍历所有的数组元素，并使用数组元素执行一些操作。我们可以使用<code class="fe kx ky kz la b">for</code>循环来做到这一点，但是JavaScript array <code class="fe kx ky kz la b">forEach()</code>方法是新的方法。</p><h1 id="cf92" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">forEach()方法如何工作</h1><p id="c5b2" class="pw-post-body-paragraph jz ka in kb b kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw ig bi translated">JavaScript array <code class="fe kx ky kz la b">forEach()</code>方法遍历数组元素，并为每个元素执行一个函数。语法是:</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="9cca" class="mm lc in la b gy mn mo l mp mq">array.forEach(callback, thisArg);</span></pre><p id="3da5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">callback是一个为每个数组元素执行的函数，thisArg是一个在callback中用作<code class="fe kx ky kz la b">this</code>的值。</p><p id="db0e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">示例:</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="bdf8" class="mm lc in la b gy mn mo l mp mq">let foods = ['bread', 'rice', 'meat', 'pizza'];</span><span id="f7bd" class="mm lc in la b gy mr mo l mp mq">foods.forEach(function(food) {<br/>    console.log(food);<br/>});</span></pre><p id="4621" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">输出</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="1d8e" class="mm lc in la b gy mn mo l mp mq">bread<br/>rice<br/>meat<br/>pizza</span></pre><p id="7911" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">回调函数接受3个参数。</p><ul class=""><li id="1cc4" class="ms mt in kb b kc kd kg kh kk mu ko mv ks mw kw mx my mz na bi translated">正在为其调用函数的当前元素(必需)</li><li id="ecff" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">原始数组中元素的索引(可选)</li><li id="e553" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated">原始数组(可选)</li></ul><p id="6c88" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们看一个使用所有3个参数的例子。在这个例子中，我们将使用<code class="fe kx ky kz la b">forEach()</code>删除数组中的重复项。</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="58ef" class="mm lc in la b gy mn mo l mp mq">let arr1 = [20, 30, 15, 30, 40, 15];</span><span id="f5ff" class="mm lc in la b gy mr mo l mp mq">let unique = [];</span><span id="f252" class="mm lc in la b gy mr mo l mp mq">arr1.forEach((item, index, array) =&gt; {<br/>    if(index === array.indexOf(item)) {<br/>        unique.push(item);<br/>    }<br/>});</span><span id="195f" class="mm lc in la b gy mr mo l mp mq">console.log(unique);  // [20, 30, 15, 40]</span></pre><p id="1ecb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在回调函数中，我们使用<code class="fe kx ky kz la b">indexOf()</code>方法将当前项的索引与原始数组中该项的索引进行匹配。</p><p id="da66" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">方法返回数组中第一个匹配元素的索引。这意味着如果同一个元素在数组中出现不止一次，那么<code class="fe kx ky kz la b">indexOf()</code>将返回数组中从左数第一个元素的索引。</p><p id="2cea" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">因此，如果当前元素的索引和由<code class="fe kx ky kz la b">indexOf()</code>返回的索引不匹配，那么该元素在数组中存在多次。只有唯一的元素会被推送到唯一数组。</p><h1 id="debe" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">值为空的数组</h1><p id="7c37" class="pw-post-body-paragraph jz ka in kb b kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw ig bi translated"><code class="fe kx ky kz la b">forEach()</code>方法不会为空值调用回调函数。</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="b0c0" class="mm lc in la b gy mn mo l mp mq">let arr = [20, 30];</span><span id="56cd" class="mm lc in la b gy mr mo l mp mq">arr[5] = 50;</span><span id="10b7" class="mm lc in la b gy mr mo l mp mq">console.log(arr); // [20, 30, empty × 3, 50]</span><span id="9724" class="mm lc in la b gy mr mo l mp mq">arr.forEach(function(item) {<br/>    console.log(item);<br/>});</span></pre><p id="6ff6" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">输出</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="e112" class="mm lc in la b gy mn mo l mp mq">20<br/>30<br/>50</span></pre><p id="367e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里没有为所有3个空值调用回调函数。</p><h1 id="fec5" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">终止/跳过forEach循环</h1><p id="cab3" class="pw-post-body-paragraph jz ka in kb b kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw ig bi translated">与<code class="fe kx ky kz la b">for</code>循环不同，我们不能在<code class="fe kx ky kz la b">forEach()</code>方法中使用<code class="fe kx ky kz la b">break</code>或<code class="fe kx ky kz la b">continue</code>。要终止<code class="fe kx ky kz la b">forEach()</code>,我们需要通过它内部的一个异常。类似地，我们需要使用<code class="fe kx ky kz la b">return</code>语句来跳过当前迭代，而不是<code class="fe kx ky kz la b">continue</code>关键字。</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="3b07" class="mm lc in la b gy mn mo l mp mq">let arr1 = [20, -45, 30, 15, 30, 40, 15];</span><span id="f7ba" class="mm lc in la b gy mr mo l mp mq">arr1.forEach((item, index) =&gt; {<br/>    if(item &lt; 0) {<br/>        return;<br/>    }</span><span id="94ff" class="mm lc in la b gy mr mo l mp mq">    if(index == 3) {<br/>        throw new Error('Terminating forEach');<br/>    }</span><span id="a8c8" class="mm lc in la b gy mr mo l mp mq">   console.log(item); <br/>});</span></pre><p id="3569" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">输出</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="6ade" class="mm lc in la b gy mn mo l mp mq">20<br/>30<br/>Uncaught Error: Terminating forEach</span></pre><blockquote class="ng nh ni"><p id="8374" class="jz ka nj kb b kc kd ke kf kg kh ki kj nk kl km kn nl kp kq kr nm kt ku kv kw ig bi translated">如果需要在循环中使用<code class="fe kx ky kz la b">break</code>或<code class="fe kx ky kz la b">continue</code>，那么在这种情况下使用<code class="fe kx ky kz la b">for</code>循环(<code class="fe kx ky kz la b">for</code>、<code class="fe kx ky kz la b">for…of</code>)。</p></blockquote><h1 id="c36c" class="lb lc in bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用thisArg的示例</h1><p id="4cb7" class="pw-post-body-paragraph jz ka in kb b kc lz ke kf kg ma ki kj kk mb km kn ko mc kq kr ks md ku kv kw ig bi translated">在这个例子中，我们将从一个数组中过滤偶数和奇数，并将其设置为各自的对象属性。</p><pre class="me mf mg mh gt mi la mj mk aw ml bi"><span id="c6db" class="mm lc in la b gy mn mo l mp mq">function filterNumbers() {<br/>    this.even = [];<br/>    this.odd = [];<br/>}</span><span id="f52e" class="mm lc in la b gy mr mo l mp mq">let numbers = [20, 83, 15, 58, 49, 62];</span><span id="6b4b" class="mm lc in la b gy mr mo l mp mq">const obj = new filterNumbers();</span><span id="9519" class="mm lc in la b gy mr mo l mp mq">numbers.forEach(function(item) {<br/>    if(item % 2 === 0) this.even.push(item);<br/>    else this.odd.push(item);<br/>}, obj)</span><span id="72e5" class="mm lc in la b gy mr mo l mp mq">console.log(obj.even); // [20, 58, 62]</span><span id="86bb" class="mm lc in la b gy mr mo l mp mq">console.log(obj.odd); // [83, 15, 49]</span></pre><p id="a312" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这里,<code class="fe kx ky kz la b">filterNumbers</code>的实例被传递给<code class="fe kx ky kz la b">forEach</code>,用作回调中的<code class="fe kx ky kz la b">this</code>。</p></div><div class="ab cl nn no hr np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ig ih ii ij ik"><h1 id="0c27" class="lb lc in bd ld le nu lg lh li nv lk ll lm nw lo lp lq nx ls lt lu ny lw lx ly bi translated">有关系的</h1><ul class=""><li id="5240" class="ms mt in kb b kc lz kg ma kk nz ko oa ks ob kw mx my mz na bi translated"><a class="ae oc" href="https://jscurious.com/different-ways-to-iterate-through-objects-and-arrays-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中遍历对象和数组的不同方式</a></li><li id="fa12" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated"><a class="ae oc" href="https://jscurious.com/map-and-filter-methods-of-array-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中数组的map()和filter()方法</a></li><li id="30c1" class="ms mt in kb b kc nb kg nc kk nd ko ne ks nf kw mx my mz na bi translated"><a class="ae oc" href="https://jscurious.com/how-to-find-elements-in-array-in-javascript/" rel="noopener ugc nofollow" target="_blank">JavaScript中查找数组元素的6种方法</a></li></ul></div><div class="ab cl nn no hr np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ig ih ii ij ik"><p id="cdd3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="nj">感谢您的宝贵时间</em> ☺️ <br/>更多网络开发博客，请访问<a class="ae oc" href="http://jscurious.com/" rel="noopener ugc nofollow" target="_blank">jscurious.com</a></p></div></div>    
</body>
</html>
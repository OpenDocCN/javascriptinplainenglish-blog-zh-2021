<html>
<head>
<title>React 18 Automatic Batching Feature</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 18自动配料功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/whats-coming-in-react-18-automatic-batching-in-react-18-faf89a2b1aa2?source=collection_archive---------11-----------------------#2021-07-01">https://javascript.plainenglish.io/whats-coming-in-react-18-automatic-batching-in-react-18-faf89a2b1aa2?source=collection_archive---------11-----------------------#2021-07-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="664f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">不要错过React 18提供的自动配料功能</h2></div><p id="fd44" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir"> React 18出了</strong>！它带来了一些新的功能来应对。</p><p id="f4b4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将讨论React 18带来的<strong class="kh ir">自动批处理功能</strong>。欢迎来到<a class="ae lb" href="https://medium.com/technofunnel" rel="noopener"> Technofunnel </a>，让我们深入了解自动配料和相关概念的细节。此次更新为React 带来了大量<strong class="kh ir">性能提升。</strong></p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/f9b7b36e9a7a755bdd4d41db3717cf8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*64Lx2jVyMI0X-4PwxSrqCw.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">React 18 is out. Try new features of React 18</figcaption></figure><h2 id="7fb5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated">理解批处理的概念</h2><p id="5287" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated"><strong class="kh ir">批处理是将多个状态更新合并到一个渲染中的概念</strong>。如果可以将多个状态更新批处理到单个更新中，并且重新渲染一次，将会提高React的性能。让我们寻找下面的代码来理解这个概念。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div></figure><p id="0cd4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的代码中，有一个按钮点击事件被触发。在点击按钮内部，我们更新了两次状态。我们在两个独立的“setState”函数中更新“userName”和“userAge”的值。以便提高应用程序的性能。React 17提供了批处理特性，因此来自“setState”的更改可以合并在一起，并且组件将只呈现一次，并将同时对“userName”和“userAge”进行更改。</p><h2 id="6ff9" class="ls lt iq bd lu lv lw dn lx ly lz dp ma ko mb mc md ks me mf mg kw mh mi mj mk bi translated"><strong class="ak">自动配料在反应中的优势</strong></h2><p id="ce6e" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">在React中使用批处理的优点是:</p><ul class=""><li id="62d5" class="ms mt iq kh b ki kj kl km ko mu ks mv kw mw la mx my mz na bi translated">通过避免不必要的重新渲染来提高性能</li><li id="bc11" class="ms mt iq kh b ki nb kl nc ko nd ks ne kw nf la mx my mz na bi translated">状态变化被合并成一个，并呈现有效的差异。</li><li id="a5d6" class="ms mt iq kh b ki nb kl nc ko nd ks ne kw nf la mx my mz na bi translated">当只有几个变量被更新并且几个变量保持不变直到下一个渲染周期时，可以避免不一致的状态，这可能导致错误。</li></ul><p id="db67" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在上面的场景中，如果没有批处理，可能会出现这样的场景:在初始呈现期间，名称被更新，然后组件将重新呈现以显示更新的年龄。</p><h1 id="7b6f" class="ng lt iq bd lu nh ni nj lx nk nl nm ma jw nn jx md jz no ka mg kc np kd mj nq bi translated">React 18的更新</h1><p id="070b" class="pw-post-body-paragraph kf kg iq kh b ki ml jr kk kl mm ju kn ko mn kq kr ks mo ku kv kw mp ky kz la ij bi translated">批处理有多种好处。在React 17之前，批处理只在浏览器事件中可用，如“点击”、“鼠标悬停”、“onchange”等。它在其他事件中不可用，如“Axios订阅”、“获取”、“设置超时”、“设置间隔”、“用户定义的事件”。</p><p id="e28c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">现在在React 18中，</strong>所有更新的内容都将被自动批量处理，不管这些事件来自哪里。这意味着在承诺、超时、间隔、自定义事件中完成的更新也将被批处理。这将进一步提高性能。</p><p id="5393" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了达到同样的效果，我们需要使用“<strong class="kh ir"> ReactDOM.createRoot </strong>”而不是“ReactDOM.render”。下面是一个相同的例子。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="mq mr l"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk"><a class="ae lb" href="https://gist.github.com/Mayankgupta688/4755d495b6753cb2cc38c507f471853b" rel="noopener ugc nofollow" target="_blank">https://gist.github.com/Mayankgupta688/4755d495b6753cb2cc38c507f471853b</a></figcaption></figure><p id="36b5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">所以继续前进，开始使用React 18吧！</strong></p><p id="79a4" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nr">多内容于</em> <a class="ae lb" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="nr">浅显易懂</em> </strong> </a></p></div></div>    
</body>
</html>
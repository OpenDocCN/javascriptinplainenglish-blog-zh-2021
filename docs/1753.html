<html>
<head>
<title>How to Keep ‘createdAt’ and ‘updatedAt’ Valid After Cloning Nuxt Projects</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在克隆Nuxt项目后保持“createdAt”和“updatedAt”有效</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning-f80fc7e9633b?source=collection_archive---------22-----------------------#2021-04-13">https://javascript.plainenglish.io/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning-f80fc7e9633b?source=collection_archive---------22-----------------------#2021-04-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/613e5363a0505a4434ba454e6d1c2142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GiGLP8caCjm_38YzSp5LWQ.png"/></div></div></figure><p id="4b3f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我最近试用了一个用于nuxt项目的基于Git的CMS<a class="ae kt" href="https://github.com/nuxt/content" rel="noopener ugc nofollow" target="_blank">@ Nuxt/content</a>。而且我真的很喜欢！它允许我编写markdown文件，并在我现有的项目中托管它们。</p><p id="3955" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在将项目部署到我的服务器时，我注意到的一件事是,<code class="fe ku kv kw kx b">createdAt</code>和<code class="fe ku kv kw kx b">updatedAt</code>字段总是被重置，并不反映实际日期。原因是Git不保存文件元数据。这意味着<code class="fe ku kv kw kx b">@nuxt/content</code>所依赖的时间戳毫无用处。</p><h2 id="500e" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">快去救援！</h2><p id="e8a7" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">解决这个问题的一种方法是不使用文件stats，而是使用Git历史记录。特别感谢安德鲁·克罗伊泽最初的想法。我们检查每个文件的历史，并将最早的提交日期作为<code class="fe ku kv kw kx b">createdAt</code>，最晚的作为<code class="fe ku kv kw kx b">updatedAt</code>。</p><p id="52ed" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对此的要求是，Git安装在构建系统上，并且历史记录实际上是签出的。如果在CI上进行浅层克隆，将会出现问题，在这种情况下，必须相应地配置克隆。</p><h2 id="85d4" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">使用nuxt-content-git模块使事情变得简单</h2><p id="1a15" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">我创建了Nuxt模块<a class="ae kt" href="https://github.com/dword-design/nuxt-content-git" rel="noopener ugc nofollow" target="_blank"> nuxt-content-git </a>来使设置即插即用。你可能不希望在每个项目中重新发明轮子。</p><p id="1a08" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">安装带有<code class="fe ku kv kw kx b">npm install nuxt-content-git</code>的模块，并将其添加到您的<code class="fe ku kv kw kx b">nuxt.config.js</code>中，如下所示:</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="ma mb l"/></div></figure><p id="7a0f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，在 <code class="fe ku kv kw kx b">@nuxt/content</code>之前添加<strong class="jx io">很重要，这样<code class="fe ku kv kw kx b">@nuxt/content</code>就知道我们的助手模块安装的钩子。</strong></p><h2 id="b25d" class="ky kz in bd la lb lc dn ld le lf dp lg kg lh li lj kk lk ll lm ko ln lo lp lq bi translated">结论</h2><p id="1f8e" class="pw-post-body-paragraph jv jw in jx b jy lr ka kb kc ls ke kf kg lt ki kj kk lu km kn ko lv kq kr ks ig bi translated">基本上就是这样！其余的在幕后工作。您的日期应该是最新的。</p><p id="0b6b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果你喜欢这个模块，请告诉我，并在GitHub 留下一颗<a class="ae kt" href="https://github.com/dword-design/nuxt-content-git" rel="noopener ugc nofollow" target="_blank">星。</a></p><p id="2fef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">如果你喜欢我正在做的事情，请关注我的</strong> <a class="ae kt" href="https://twitter.com/seblandwehr" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> Twitter </strong> </a> <strong class="jx io">或查看我的</strong> <a class="ae kt" href="https://sebastianlandwehr.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">网站</strong> </a> <strong class="jx io">。也可以考虑在</strong> <a class="ae kt" href="https://www.buymeacoffee.com/dword" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io">给我买杯咖啡</strong></a><strong class="jx io"/><a class="ae kt" href="https://www.paypal.com/paypalme/SebastianLandwehr" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">PayPal</strong></a><strong class="jx io">或者</strong><a class="ae kt" href="https://www.patreon.com/dworddesign" rel="noopener ugc nofollow" target="_blank"><strong class="jx io">Patreon</strong></a><strong class="jx io">进行捐赠。非常感谢！</strong></p><p id="16ca" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mc">原载于</em><a class="ae kt" href="https://sebastianlandwehr.com/blog/nuxt-content-how-to-keep-createdat-and-updatedat-valid-after-cloning" rel="noopener ugc nofollow" target="_blank"><em class="mc">sebastianlandwehr.com</em></a></p><p id="029a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mc">更多内容请看</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mc">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Make Form Handling Easy in React Apps with Formik</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Formik简化React应用程序中的表单处理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/make-form-handling-easy-in-react-apps-with-formik-5aa43afc1cbf?source=collection_archive---------14-----------------------#2021-04-01">https://javascript.plainenglish.io/make-form-handling-easy-in-react-apps-with-formik-5aa43afc1cbf?source=collection_archive---------14-----------------------#2021-04-01</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/7567d6b1b6687899e80f54e8977ac320.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4I4-947pbzgypop1"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@tuannguyenminh?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tuân Nguyễn Minh</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9ba6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Formik是一个使React应用程序中的表单处理变得简单的库。</p><p id="6bcb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用Formik处理表单输入。</p><h1 id="a3a3" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">装置</h1><p id="767e" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过运行以下命令来安装Formik:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="3faf" class="mn lc iq mj b gy mo mp l mq mr">npm install formik --save</span></pre><p id="df0c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="d9b0" class="mn lc iq mj b gy mo mp l mq mr">yarn add formik</span></pre><h1 id="4d99" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">基本用法</h1><p id="9ad3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以通过书写来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bcd8" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { Formik } from "formik";</span><span id="5cb9" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Formik<br/>        initialValues={{ email: "", password: "" }}<br/>        validate={(values) =&gt; {<br/>          const errors = {};<br/>          if (!values.email) {<br/>            errors.email = "Required";<br/>          } else if (<br/>            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(values.email)<br/>          ) {<br/>            errors.email = "Invalid email address";<br/>          }<br/>          return errors;<br/>        }}<br/>        onSubmit={(values, { setSubmitting }) =&gt; {<br/>          setTimeout(() =&gt; {<br/>            alert(JSON.stringify(values, null, 2));<br/>            setSubmitting(false);<br/>          }, 400);<br/>        }}<br/>      &gt;<br/>        {({<br/>          values,<br/>          errors,<br/>          touched,<br/>          handleChange,<br/>          handleBlur,<br/>          handleSubmit,<br/>          isSubmitting<br/>        }) =&gt; (<br/>          &lt;form onSubmit={handleSubmit}&gt;<br/>            &lt;input<br/>              type="email"<br/>              name="email"<br/>              onChange={handleChange}<br/>              onBlur={handleBlur}<br/>              value={values.email}<br/>            /&gt;<br/>            {errors.email &amp;&amp; touched.email &amp;&amp; errors.email}<br/>            &lt;input<br/>              type="password"<br/>              name="password"<br/>              onChange={handleChange}<br/>              onBlur={handleBlur}<br/>              value={values.password}<br/>            /&gt;<br/>            {errors.password &amp;&amp; touched.password &amp;&amp; errors.password}<br/>            &lt;button type="submit" disabled={isSubmitting}&gt;<br/>              Submit<br/>            &lt;/button&gt;<br/>          &lt;/form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="24fd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">initialValues</code>有初始值。</p><p id="b570" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">validate</code>是一个让我们验证输入的表单值的函数。</p><p id="60f6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">values</code>拥有我们输入的价值观。</p><p id="16a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用字段的错误来设置<code class="fe mt mu mv mj b">errors</code>对象。</p><p id="cace" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">onSubmit</code>有一个函数，在<code class="fe mt mu mv mj b">values</code>对象中有输入的值。</p><p id="035f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">setSubmitting</code>是一个可以设置表单提交状态的功能。</p><p id="0c12" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe mt mu mv mj b">form</code>元素中，我们将<code class="fe mt mu mv mj b">onSubmit</code>表单设置为来自渲染道具参数的<code class="fe mt mu mv mj b">handleSubmit</code>函数，以运行<code class="fe mt mu mv mj b">onSubmit</code>如果它是值的话。</p><p id="c95b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">values.email</code>和<code class="fe mt mu mv mj b">values.password</code>具有每个字段的表单值。</p><p id="bb28" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">handleChange</code>让我们将输入的值合并到<code class="fe mt mu mv mj b">values</code>对象的不同位置。</p><p id="fcf0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">onBlur</code>有<code class="fe mt mu mv mj b">handleBlur</code>方法处理模糊事件。</p><p id="a8d3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">touched</code>具有每个表单域的已触摸状态。</p><p id="fdd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">isSubmitting</code>有表单的提交状态。</p><p id="6f2f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe mt mu mv mj b">Form</code>、<code class="fe mt mu mv mj b">Field</code>和<code class="fe mt mu mv mj b">ErrorMessage</code>组件来简化代码。</p><p id="c38f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以将上面的代码简化为:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="017a" class="mn lc iq mj b gy mo mp l mq mr">import React from "react";<br/>import { ErrorMessage, Field, Form, Formik } from "formik";</span><span id="79e9" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;Formik<br/>        initialValues={{ email: "", password: "" }}<br/>        validate={(values) =&gt; {<br/>          const errors = {};<br/>          if (!values.email) {<br/>            errors.email = "Required";<br/>          } else if (<br/>            !/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(values.email)<br/>          ) {<br/>            errors.email = "Invalid email address";<br/>          }<br/>          return errors;<br/>        }}<br/>        onSubmit={(values, { setSubmitting }) =&gt; {<br/>          setTimeout(() =&gt; {<br/>            alert(JSON.stringify(values, null, 2));<br/>            setSubmitting(false);<br/>          }, 400);<br/>        }}<br/>      &gt;<br/>        {({ isSubmitting }) =&gt; (<br/>          &lt;Form&gt;<br/>            &lt;Field type="email" name="email" /&gt;<br/>            &lt;ErrorMessage name="email" component="div" /&gt;<br/>            &lt;Field type="password" name="password" /&gt;<br/>            &lt;ErrorMessage name="password" component="div" /&gt;<br/>            &lt;button type="submit" disabled={isSubmitting}&gt;<br/>              Submit<br/>            &lt;/button&gt;<br/>          &lt;/Form&gt;<br/>        )}<br/>      &lt;/Formik&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="2333" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这些组件替换了表单输入元素和错误文本。</p><p id="0844" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">只要<code class="fe mt mu mv mj b">name</code>值在<code class="fe mt mu mv mj b">Field</code>和<code class="fe mt mu mv mj b">ErrorMessage</code>之间匹配，我们就会看到显示相同的值。</p><h1 id="956c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="b7fa" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Formik轻松处理React中的表单。</p><p id="bedd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果有，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获取更多类似内容！</strong></p><p id="c6be" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
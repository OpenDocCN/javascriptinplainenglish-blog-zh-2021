<html>
<head>
<title>Deploy to Heroku with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用GitHub操作部署到Heroku</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/deploy-to-heroku-with-github-actions-a890044a620f?source=collection_archive---------6-----------------------#2021-03-13">https://javascript.plainenglish.io/deploy-to-heroku-with-github-actions-a890044a620f?source=collection_archive---------6-----------------------#2021-03-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/c3d616aa1190106a599ee163700b3088.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/format:webp/1*DsXEDWd87nrR1bPsLej5lA.png"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk"><a class="ae jv" href="https://b.remarkabl.org/heroku" rel="noopener ugc nofollow" target="_blank">Heroku</a></figcaption></figure><p id="1cab" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">这篇文章讲述了如何使用<a class="ae jv" href="https://b.remarkabl.org/github-actions" rel="noopener ugc nofollow" target="_blank"> GitHub Actions </a>工作流部署到<a class="ae jv" href="https://b.remarkabl.org/heroku" rel="noopener ugc nofollow" target="_blank"> Heroku </a>。</p><h1 id="4497" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">先决条件</h1><h2 id="feed" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">赫罗库</h2><p id="13e9" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated">创建一个Heroku应用程序，并保存与您的帐户关联的应用程序名称和电子邮件。然后进入<a class="ae jv" href="https://dashboard.heroku.com/account" rel="noopener ugc nofollow" target="_blank">账户设置</a>复制你的<code class="fe mj mk ml mm b">API Key</code>。</p><h2 id="fd0c" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">开源代码库</h2><p id="5774" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated">进入你的GitHub库的<code class="fe mj mk ml mm b">Settings</code> &gt; <code class="fe mj mk ml mm b">Secrets</code>，设置<a class="ae jv" href="https://docs.github.com/en/actions/reference/encrypted-secrets" rel="noopener ugc nofollow" target="_blank">秘密</a>:</p><ul class=""><li id="6fe9" class="mn mo in jy b jz ka kd ke kh mp kl mq kp mr kt ms mt mu mv bi translated"><code class="fe mj mk ml mm b">HEROKU_API_KEY</code></li><li id="2fde" class="mn mo in jy b jz mw kd mx kh my kl mz kp na kt ms mt mu mv bi translated"><code class="fe mj mk ml mm b">HEROKU_APP_NAME</code></li><li id="0c53" class="mn mo in jy b jz mw kd mx kh my kl mz kp na kt ms mt mu mv bi translated"><code class="fe mj mk ml mm b">HEROKU_EMAIL</code></li></ul><h2 id="7b19" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">GitHub操作</h2><p id="3407" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated">使用<a class="ae jv" href="https://github.com/marketplace/actions/deploy-to-heroku" rel="noopener ugc nofollow" target="_blank">部署到Heroku </a>操作部署的工作流:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="2c05" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">动作推至<code class="fe mj mk ml mm b"><a class="ae jv" href="https://devcenter.heroku.com/articles/git-branches" rel="noopener ugc nofollow" target="_blank">main</a></code> <a class="ae jv" href="https://devcenter.heroku.com/articles/git-branches" rel="noopener ugc nofollow" target="_blank">分支</a>。</p><p id="33b6" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">查看附加的<a class="ae jv" href="https://github.com/marketplace/actions/deploy-to-heroku#options" rel="noopener ugc nofollow" target="_blank">选项</a>。</p><h2 id="2bfb" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">自定义工作流程</h2><p id="f264" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated">使用自定义作业部署的工作流:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="9426" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">下面解释了这两种工作流之间的区别。</p><h2 id="d6ea" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">检验</h2><p id="df6d" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated"><a class="ae jv" href="https://github.com/marketplace/actions/checkout" rel="noopener ugc nofollow" target="_blank"> Checkout </a>动作必须<a class="ae jv" href="https://github.com/marketplace/actions/checkout#fetch-all-history-for-all-tags-and-branches" rel="noopener ugc nofollow" target="_blank">获取整个Git历史记录</a>，否则构建将失败，并出现错误:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="b2ed" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">Heroku登录</h2><p id="b536" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated"><code class="fe mj mk ml mm b"><a class="ae jv" href="https://devcenter.heroku.com/articles/authentication#api-token-storage" rel="noopener ugc nofollow" target="_blank">~/.netrc</a></code>包含Heroku登录凭证:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><h2 id="7a75" class="ls kv in bd kw lt lu dn la lv lw dp le kh lx ly li kl lz ma lm kp mb mc lq md bi translated">使用Git部署</h2><p id="22b2" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated">然后设置<a class="ae jv" href="https://devcenter.heroku.com/articles/git#for-an-existing-heroku-app" rel="noopener ugc nofollow" target="_blank"> Git遥控器</a>并按下<a class="ae jv" href="https://devcenter.heroku.com/articles/git#deploying-code" rel="noopener ugc nofollow" target="_blank">按钮</a>:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="4979" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">我们在这里推进到<code class="fe mj mk ml mm b">master</code>分支，但是我们也可以推进到<code class="fe mj mk ml mm b">main</code>。</p><h1 id="e089" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">例子</h1><p id="736b" class="pw-post-body-paragraph jw jx in jy b jz me kb kc kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt ig bi translated"><a class="ae jv" href="https://github.com/remarkablemark/github-actions-heroku-deploy" rel="noopener ugc nofollow" target="_blank">库</a>包含代码示例。</p><p id="8acd" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated">成功的部署看起来是这样的:</p><figure class="nb nc nd ne gt jo"><div class="bz fp l di"><div class="nf ng l"/></div></figure></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="b608" class="pw-post-body-paragraph jw jx in jy b jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ig bi translated"><em class="no">本文原载于《remarkablemark.org》2021年3月12日。</em></p></div></div>    
</body>
</html>
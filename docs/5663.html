<html>
<head>
<title>How to Convert a String to a Date Object in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在JavaScript中将字符串转换成日期对象？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-convert-a-string-to-a-date-object-in-javascript-58effc92440a?source=collection_archive---------4-----------------------#2021-11-27">https://javascript.plainenglish.io/how-to-convert-a-string-to-a-date-object-in-javascript-58effc92440a?source=collection_archive---------4-----------------------#2021-11-27</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/23a9ab0c42f5d0425f2cb4f27b40fe4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*e7aWvgGE63OAvXGj"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@sadmax?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Amber Kipp</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="afe5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们有一个日期字符串，我们想在JavaScript中将其转换成日期对象。</p><p id="c946" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在JavaScript中将日期字符串转换为日期对象。</p><h1 id="120b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">提取日期字符串的各个部分，并将它们传递给日期构造函数</h1><p id="4a45" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从日期字符串创建JavaScript日期对象的一种方法是从日期字符串中提取日期部分，并将它们全部传递给<code class="fe me mf mg mh b">Date</code>构造函数。</p><p id="16d8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="3d6e" class="mq lc iq mh b gy mr ms l mt mu">const [year, month, day] = '2020-04-03'.split('-');<br/>const date = new Date(year, month - 1, day);<br/>console.log(date.toDateString());</span></pre><p id="7d4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">'-'</code>调用日期字符串上的<code class="fe me mf mg mh b">split</code>来用破折号分割日期字符串。</p><p id="f919" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从分离的字符串数组中析构<code class="fe me mf mg mh b">year</code>、<code class="fe me mf mg mh b">month</code>和<code class="fe me mf mg mh b">day</code>。</p><p id="480e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们将所有这些传递给<code class="fe me mf mg mh b">Date</code>构造函数。</p><p id="4774" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们必须从<code class="fe me mf mg mh b">month</code>中减去1，因为<code class="fe me mf mg mh b">Date</code>构造函数接受的月份值是从0到11，其中0代表1月，11代表12月。</p><p id="265d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们从<code class="fe me mf mg mh b">toDateString</code>方法中得到<code class="fe me mf mg mh b">‘Fri Apr 03 2020’</code>。</p><p id="feab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以将一个日期放入一个ISO日期字符串中，并将其传递给<code class="fe me mf mg mh b">Date</code>构造函数。</p><p id="0d3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="501a" class="mq lc iq mh b gy mr ms l mt mu">const st = "26.04.2020";<br/>const pattern = /(\d{2})\.(\d{2})\.(\d{4})/;<br/>const date = new Date(st.replace(pattern, '$3-$2-$1'));<br/>console.log(date)</span></pre><p id="fccf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe me mf mg mh b">pattern</code> regex对象获取日期字符串的各个部分。</p><p id="52cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe me mf mg mh b">st</code>串上的<code class="fe me mf mg mh b">replace</code>并移动带有<code class="fe me mf mg mh b">$</code>占位符的部件。</p><p id="68c0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">\d</code>提取数字。</p><p id="0a4a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">花括号中的数字是要提取的位数。</p><p id="ab43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">$1</code>是第一个提取的部分，即<code class="fe me mf mg mh b">'26'</code></p><p id="5522" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">$2</code>是第二个提取部分，即<code class="fe me mf mg mh b">'04'</code></p><p id="db2e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">而<code class="fe me mf mg mh b">$3</code>是第三个提取的部分，也就是<code class="fe me mf mg mh b">'2020'</code>。</p><p id="aeec" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">构造函数将创建一个UTC日期。</p><p id="e4ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">所以我们得到字符串形式的<code class="fe me mf mg mh b">date</code>是<code class="fe me mf mg mh b">'Sat Apr 25 2020 17:00:00 GMT-0700 (Pacific Daylight Time)’</code>。</p><h1 id="203b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">moment.js</h1><p id="8ef8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将一个日期字符串传入moment.js' <code class="fe me mf mg mh b">moment</code>函数，将其转换成我们可以操作的对象。</p><p id="3178" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6636" class="mq lc iq mh b gy mr ms l mt mu">const momentDate = moment("12-25-2020", "MM-DD-YYYY");</span></pre><p id="06c4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">使用第二个参数中指定的日期字符串格式创建一个时刻日期对象。</p><p id="ddfc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">isValid</code>方法来检查有效日期:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8369" class="mq lc iq mh b gy mr ms l mt mu">const isValid = moment("abc").isValid()<br/>console.log(isValid)</span></pre><p id="a25e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">isValid</code>应该是<code class="fe me mf mg mh b">false</code>，因为<code class="fe me mf mg mh b">'abc'</code>不是一个有效的日期。</p><p id="31a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以用<code class="fe me mf mg mh b">toDate</code>将一个时刻日期对象转换成一个本地JavaScript <code class="fe me mf mg mh b">Date</code>实例:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a179" class="mq lc iq mh b gy mr ms l mt mu">const date = moment("12-25-2020", "MM-DD-YYYY").toDate();<br/>console.log(date)</span></pre><h1 id="aa55" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="cbb6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要将日期字符串转换成JavaScript日期对象，我们可以自己提取日期字符串的各个部分，并将其放入<code class="fe me mf mg mh b">Date</code>构造函数中。</p><p id="6acc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">或者我们可以使用像moment.js这样的第三方库来帮助我们简化这项工作。</p><p id="12c5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mv">更多内容看</em> <a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">说白了就是io </em> </strong> </a> <em class="mv">。报名参加我们的</em> <a class="ae kc" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mv">免费每周简讯点击这里</em> </strong> </a> <em class="mv">。</em></p></div></div>    
</body>
</html>
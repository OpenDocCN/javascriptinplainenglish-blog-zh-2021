<html>
<head>
<title>How to set up Lerna with Yarn workspaces</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Yarn工作空间设置Lerna</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-lerna-with-yarn-workspaces-63ac0a505234?source=collection_archive---------4-----------------------#2021-09-18">https://javascript.plainenglish.io/how-to-set-up-lerna-with-yarn-workspaces-63ac0a505234?source=collection_archive---------4-----------------------#2021-09-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/59ed763f0f5fc80091ceb43f9c4fa2ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UA4atnH09uw_dEJVzqhwAw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Lerna and Yarn</figcaption></figure><p id="88b3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这篇文章讲述了如何使用<a class="ae kx" href="https://classic.yarnpkg.com/en/docs/workspaces/" rel="noopener ugc nofollow" target="_blank">纱线工作空间</a>来设置<a class="ae kx" href="https://lerna.js.org/" rel="noopener ugc nofollow" target="_blank"> Lerna </a> monorepo。</p><h1 id="b126" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">莱尔纳</h1><p id="e354" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">用<code class="fe mb mc md me b"><a class="ae kx" href="https://github.com/lerna/lerna/tree/main/libs/commands/init#readme" rel="noopener ugc nofollow" target="_blank">lerna init</a></code>创建一个新的Lerna monorepo:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="d66b" class="mn kz in me b gy mo mp l mq mr">$ npx lerna init</span></pre><p id="6903" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">初始化的Lerna文件应该如下所示:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="fb1c" class="mn kz in me b gy mo mp l mq mr">$ tree<br/>.<br/>├── lerna.json<br/>├── package.json<br/>└── packages</span><span id="7373" class="mn kz in me b gy ms mp l mq mr">1 directory, 2 files</span></pre><p id="8bb1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><em class="mt">可选</em>:启用<code class="fe mb mc md me b">lerna.json</code>中的<a class="ae kx" href="https://github.com/lerna/lerna#independent-mode" rel="noopener ugc nofollow" target="_blank">独立版本模式</a>:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><h1 id="d25f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">故事</h1><p id="c556" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">在<code class="fe mb mc md me b"><a class="ae kx" href="https://classic.yarnpkg.com/en/docs/workspaces/#toc-how-to-use-it" rel="noopener ugc nofollow" target="_blank">package.json</a></code>启用纱线工作空间:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="6bb1" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">然后在<code class="fe mb mc md me b"><a class="ae kx" href="https://github.com/lerna/lerna#lernajson" rel="noopener ugc nofollow" target="_blank">lerna.json</a></code>上加上<code class="fe mb mc md me b">npmClient</code>和<code class="fe mb mc md me b">useWorkspaces</code>:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mu mv l"/></div></figure><p id="9b07" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在当您运行<code class="fe mb mc md me b">yarn install</code>时，Lerna<a class="ae kx" href="https://github.com/lerna/lerna/tree/main/libs/commands/bootstrap#readme" rel="noopener ugc nofollow" target="_blank">bootstrap</a>和<a class="ae kx" href="https://github.com/lerna/lerna/blob/main/doc/hoist.md#readme" rel="noopener ugc nofollow" target="_blank">将</a>节点模块提升到项目根目录:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="5f34" class="mn kz in me b gy mo mp l mq mr">$ yarn</span></pre><p id="882a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这意味着跨包共享的<code class="fe mb mc md me b">devDependencies</code>可以保存到项目根<code class="fe mb mc md me b">package.json</code>:</p><pre class="mf mg mh mi gt mj me mk ml aw mm bi"><span id="93d7" class="mn kz in me b gy mo mp l mq mr">$ yarn add --dev eslint -W</span></pre><h1 id="d528" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">资源</h1><p id="92b3" class="pw-post-body-paragraph jz ka in kb b kc lw ke kf kg lx ki kj kk ly km kn ko lz kq kr ks ma ku kv kw ig bi translated">查看范例库<a class="ae kx" href="https://github.com/remarkablemark/lerna-template" rel="noopener ugc nofollow" target="_blank"> lerna-template </a>。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><p id="d37d" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><a class="ae kx" href="https://b.remarkabl.org/3Cpop8J" rel="noopener ugc nofollow" target="_blank"> <em class="mt">本文原载于《remarkablemark.org》2021年9月18日。</em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Create a PDF in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React中创建PDF</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/creating-pdf-report-just-using-react-379a5cc49244?source=collection_archive---------7-----------------------#2021-06-28">https://javascript.plainenglish.io/creating-pdf-report-just-using-react-379a5cc49244?source=collection_archive---------7-----------------------#2021-06-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/490d9881ac5c44dd46009b4ce5f13bca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tMi678d2J3gm-uEM"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@soundtrap?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Soundtrap</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b578" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你有多少次不得不为客户、为你自己或者仅仅是为了跟踪你的前端展示的东西而创建一份报告？</p><p id="f960" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这当然是一个乏味的操作，特别是当我们必须显示的数据已经在我们亲爱的前端，我们不想通过后端创建一个特别的服务。</p><p id="4457" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，在本文中，我们将在React中创建一个基本的前端，并在没有任何后端服务帮助的情况下生成一个pdf报告。</p><p id="9887" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你准备好了吗？一步一步跟着我，在文章的最后让我知道你的想法。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="1a28" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">准备我们的环境</strong></h2><p id="64e5" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">要在React中创建新的单页面应用程序，有三个基本点是必需的:</p><ul class=""><li id="d4d0" class="md me in kc b kd ke kh ki kl mf kp mg kt mh kx mi mj mk ml bi translated"><em class="mm">JavaScript基础知识；</em></li><li id="dc05" class="md me in kc b kd mn kh mo kl mp kp mq kt mr kx mi mj mk ml bi translated"><em class="mm">节点版本</em>≥<em class="mm">10.16；</em></li><li id="aa55" class="md me in kc b kd mn kh mo kl mp kp mq kt mr kx mi mj mk ml bi translated">版本<em class="mm"> npm </em> ≥ 5.6。</li></ul><p id="a275" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时，我们可以按照以下步骤创建我们的“pdf-frontend-generator”项目:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="8856" class="lf lg in mx b gy nb nc l nd ne">npx create-react-app pdf-frontend-generator<br/>cd pdf-frontend-generator<br/>npm start</span></pre><p id="3eff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这可能需要几秒钟☕</p><h2 id="dc82" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">你好字</strong></h2><p id="2e43" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">在<code class="fe nf ng nh mx b">localhost:3000</code>上启动它之后，我们所要做的就是清除starter项目中为我们编写的所有代码。</p><p id="de32" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，我们删除了<code class="fe nf ng nh mx b">App.css</code>文件的所有内容，并确保在<code class="fe nf ng nh mx b">App.js</code>中，我们的功能如下:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="0e23" class="lf lg in mx b gy nb nc l nd ne">function App() {<br/>   return (<br/>     &lt;div <em class="mm">className</em>="App"&gt;&lt;/div&gt;<br/>   );<br/>}</span></pre><h2 id="2803" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">我们的目标</strong></h2><p id="f6e0" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">让我们想象一下，在一个电影库中，必须跟踪客户可以获得的电影。<br/>因此，我们需要一个表格，包括电影代码，标题，年份，可用性，可能还有海报，还有一个按钮，允许我们从简单但超级酷的前端生成和下载报告。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="f147" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated">让我们开始吧🚀</h2><p id="a42d" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">首先，让我们创建我们的第一个“主页”，我们将在其中插入表格和按钮。</p><p id="ec9c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">创建以下文件:<code class="fe nf ng nh mx b">src/pages/homepage.jsx</code>。</p><p id="ea01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mm">记住“jsx”扩展名不是强制性的，但是它可以帮助我们区分模板文件和纯javascript文件。</em></p><p id="3840" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的<code class="fe nf ng nh mx b">homepage.jsx</code>起初会是这个样子:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="1cd1" class="lf lg in mx b gy nb nc l nd ne">import React, { useEffect, useState } from "react";</span><span id="0c98" class="lf lg in mx b gy ni nc l nd ne">const MoviesHomepage = () =&gt; {<br/>   const [movies, setMovies] = useState([]);<br/>   <br/>   useEffect(() =&gt; {<br/>      const getAllMovies = <em class="mm">async</em> () =&gt; {<br/>         try {<br/>            <em class="mm">// Fetching movies in some way<br/>         </em>} catch (err) {<br/>            console.log(`Error fetching movies: ${err}`);<br/>         }<br/>      };<br/>      getAllMovies();<br/>   }, []);</span><span id="ad3a" class="lf lg in mx b gy ni nc l nd ne">   return (<br/>      &lt;div&gt;<br/>         {<em class="mm">/* TABLE HERE */</em>}<br/>         &lt;div <em class="mm">className</em>="row"&gt;<br/>            &lt;button <em class="mm">className</em>="btn"&gt;<br/>               DOWNLOAD PDF MOVIES<br/>            &lt;/button&gt;<br/>         &lt;/div&gt;<br/>      &lt;/div&gt;<br/>   );<br/>};</span><span id="c2b4" class="lf lg in mx b gy ni nc l nd ne">export default MoviesHomepage;</span></pre><p id="40aa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了让这个页面变得生动，我们需要将它导入到<code class="fe nf ng nh mx b">App.js</code></p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="b89c" class="lf lg in mx b gy nb nc l nd ne">import MoviesHomepage from './pages/homepage';</span><span id="2f82" class="lf lg in mx b gy ni nc l nd ne">function App() {<br/>   return (<br/>     &lt;div <em class="mm">className</em>="App"&gt;<br/>        &lt;MoviesHomepage /&gt;<br/>     &lt;/div&gt;<br/>   );<br/>}</span></pre><p id="8a71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时，返回到<code class="fe nf ng nh mx b">localhost:3000</code>，我们将不会看到太多，因为我们缺少了这一页的基本部分:表格！</p><blockquote class="nj nk nl"><p id="b54e" class="ka kb mm kc b kd ke kf kg kh ki kj kk nm km kn ko nn kq kr ks no ku kv kw kx ig bi translated"><strong class="kc io">什么是钩子？</strong>钩子是一个特殊的特性，它允许你“钩住”React功能。例如，useState是一个钩子，它允许您将React状态添加到函数组件中。</p><p id="d2a4" class="ka kb mm kc b kd ke kf kg kh ki kj kk nm km kn ko nn kq kr ks no ku kv kw kx ig bi translated"><strong class="kc io"/><code class="fe nf ng nh mx b"><a class="ae jz" href="https://it.reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"><strong class="kc io">useEffect</strong></a></code><strong class="kc io">是做什么的？</strong>通过使用这个钩子，你告诉React你的组件需要在渲染后做一些事情。React将记住您传递的函数(我们称之为“效果”)，并在执行DOM更新后调用它。在这种情况下，我们设置了文档标题，但是我们也可以执行数据获取或者调用其他一些命令式API。</p></blockquote><h2 id="5f42" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">如何引人入胜的电影？</strong></h2><p id="e145" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">很明显，对于我们的测试，我们不会使用世界上所有的电影图表，而只是蝙蝠侠的一些章节🦇</p><p id="a876" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了做到这一点，一个网站来帮助我们，提供了对这些电影的虚假回应，其链接如下:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="3eed" class="lf lg in mx b gy nb nc l nd ne"><em class="mm">https://fake-movie-database-api.herokuapp.com/api?s=batman</em></span></pre><p id="6161" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，为了确保我们的响应也包含关于电影状态的信息，并且海报图像已经转换为base64格式，我们将创建一个<code class="fe nf ng nh mx b">src/mock/film.mock.js</code>，您可以从<a class="ae jz" href="https://github.com/CoxxD/pdf-frontend-generator/blob/main/src/mock/film.mock.js" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io">复制并粘贴其数据到这里的</strong> </a>。</p><p id="b50e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们已经有了数据，我们只需要将它保存在try的主体中</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="7531" class="lf lg in mx b gy nb nc l nd ne">setMovies(MOVIES_MOCK.Search);</span></pre><p id="eed2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在顶部为<em class="mm"> MOVIES_MOCK </em>常量添加导入。</p><p id="e398" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">注意:如果你想从本地以外的任何其他来源恢复数据，你必须安装<code class="fe nf ng nh mx b"><em class="mm">axios</em></code>依赖项</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="e73e" class="lf lg in mx b gy nb nc l nd ne">npm i axios</span></pre><p id="7d77" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在<em class="mm">的正文中加上试</em>:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="5198" class="lf lg in mx b gy nb nc l nd ne"><em class="mm">const response = await axios.get("https://fake-movie-database-api.herokuapp.com/api?s=batman");</em></span><span id="8b45" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">setMovies(response.data.Search);</em></span></pre><h2 id="3d2a" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">没有桌子，我们哪儿也去不了</strong></h2><p id="70ee" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">是时候显示这些数据了，为此我们为我们的表创建一个新的特设组件:<code class="fe nf ng nh mx b">src/components/table-movies.jsx</code>。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="0af5" class="lf lg in mx b gy nb nc l nd ne">import React from "react";</span><span id="9ed7" class="lf lg in mx b gy ni nc l nd ne">const TableMovies = ({ <em class="mm">data</em> }) =&gt; {</span><span id="7eed" class="lf lg in mx b gy ni nc l nd ne">   return (<br/>      &lt;div <em class="mm">className</em>="container"&gt;<br/>         {data.length === 0 ? ("There are no movies") : (<br/>         &lt;table <em class="mm">className</em>="table" <em class="mm">id</em>="testTable"&gt;<br/>            &lt;thead&gt;<br/>               &lt;tr&gt;<br/>                  &lt;th <em class="mm">scope</em>="col"&gt;Poster&lt;/th&gt;<br/>                  &lt;th <em class="mm">scope</em>="col"&gt;ID&lt;/th&gt;<br/>                  &lt;th <em class="mm">scope</em>="col"&gt;Title&lt;/th&gt;<br/>                  &lt;th <em class="mm">scope</em>="col"&gt;Year&lt;/th&gt;<br/>                  &lt;th <em class="mm">scope</em>="col"&gt;Available&lt;/th&gt;<br/>               &lt;/tr&gt;<br/>            &lt;/thead&gt;<br/>            &lt;tbody&gt;<br/>               {data.map(<em class="mm">el</em> =&gt; (<br/>                  &lt;tr <em class="mm">key</em>={el.imdbID}&gt;<br/>                     &lt;td&gt;{<em class="mm">/* LATER */</em>}&lt;/td&gt;<br/>                     &lt;td&gt;{el.imdbID}&lt;/td&gt;<br/>                     &lt;td&gt;{el.Title}&lt;/td&gt;<br/>                     &lt;td&gt;{el.Year}&lt;/td&gt;<br/>                     &lt;td&gt;{el.Available ? 'Yes' : 'No'}&lt;/td&gt;<br/>                  &lt;/tr&gt;<br/>               ))}<br/>            &lt;/tbody&gt;<br/>        &lt;/table&gt;)}<br/>     &lt;/div&gt;<br/>   );<br/>};</span><span id="400f" class="lf lg in mx b gy ni nc l nd ne">export default TableMovies;</span></pre><p id="4558" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这个功能组件中，我们期望"<em class="mm">数据</em>"作为"<em class="mm">道具</em>"的属性，电影将在其中呈现。</p><p id="8cef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果没有电影，屏幕上将显示一条消息:“<em class="mm">没有电影</em>”。</p><p id="d08b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">PS。我们会尽快处理海报。</p><p id="c792" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时我们要做的是将新组件导入到我们的<code class="fe nf ng nh mx b">homepage.jsx</code>中，传递电影作为输入。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a914" class="lf lg in mx b gy nb nc l nd ne">import TableMovies from "../components/table-movies";</span><span id="9ec2" class="lf lg in mx b gy ni nc l nd ne">.<br/>.<br/>.<br/>.</span><span id="2510" class="lf lg in mx b gy ni nc l nd ne">return (<br/>   &lt;div&gt;<br/>      &lt;TableMovies <em class="mm">data</em>={movies} /&gt;<br/>      &lt;div <em class="mm">className</em>="row"&gt;<br/>         &lt;button <em class="mm">className</em>="btn"&gt;DOWNLOAD PDF MOVIES&lt;/button&gt;<br/>      &lt;/div&gt;<br/>   &lt;/div&gt;<br/>);</span></pre><h2 id="3837" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">失踪的海报</strong></h2><p id="0916" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">为了使用base64并保持代码整洁，我们创建了一个新组件<code class="fe nf ng nh mx b">src/components/image-base64.jsx</code>，它将图像源作为输入。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="5efd" class="lf lg in mx b gy nb nc l nd ne">const Image64 = ({ <em class="mm">data</em> }) =&gt; &lt;img <em class="mm">style</em>={{width: "50px", height: '80px'}} <em class="mm">src</em>={`data:image/jpeg;base64,${data}`} /&gt;</span><span id="62f3" class="lf lg in mx b gy ni nc l nd ne">export default Image64;</span></pre><p id="8731" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以让我们回到我们的桌子，替换注释<code class="fe nf ng nh mx b">{/* LATER */}</code></p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="f01b" class="lf lg in mx b gy nb nc l nd ne">{el.Poster ? &lt;Image64 <em class="mm">data</em>={el.Poster} /&gt; : null}</span></pre><h2 id="2733" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">让我们生成报告</strong></h2><p id="14f0" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">我们已经到了本教程的重点:生成pdf报告的时刻。</p><p id="7d4a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为此，您需要添加两个依赖项</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="d72a" class="lf lg in mx b gy nb nc l nd ne">npm i jspdf jspdf-autotable</span></pre><p id="ec05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要查阅报告生成库的文档，请参见页面<a class="ae jz" href="https://github.com/mrrio/jspdf" rel="noopener ugc nofollow" target="_blank"> jsPDF </a>。</p><p id="d8de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我们只需要按照文档中的指导方针创建<code class="fe nf ng nh mx b">src/services/report-generator.js</code>文件。</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="d287" class="lf lg in mx b gy nb nc l nd ne">import jsPDF from "jspdf";<br/>import "jspdf-autotable";</span><span id="492a" class="lf lg in mx b gy ni nc l nd ne">const generatePDF = (<em class="mm">tableRows</em>, <em class="mm">columns</em>, <em class="mm">isLandscape</em>) =&gt; {<br/>   const doc = new jsPDF({<br/>      orientation: isLandscape ? "landscape" : 'portrait'<br/>   });<br/>   <em class="mm"><br/>   </em>doc.autoTable({<br/>      head: columns,<br/>      body: tableRows,<br/>      startY: 20, <em class="mm">// startY is basically margin-top<br/>      </em>headStyles: {<br/>         fillColor: [241, 196, 15],<br/>         fontSize: 12,<br/>         halign: 'center'<br/>      },<br/>      columnStyles: {<br/>         0: { cellWidth: 30, cellHeight: 20, halign: 'center' },<br/>         1: { cellWidth: 40, halign: 'center' },<br/>         2: {cellWidth:'auto',halign:'center',fontStyle:'bold'},<br/>         3: { cellWidth: 20, halign: 'center' },<br/>         4: { cellWidth: 30, halign: 'center' }<br/>      },<br/>      styles: {<br/>         valign: 'middle'<br/>      },<br/>      <br/>      <em class="mm">/* Use for customizing texts or styles of specific cells after they have been formatted by this plugin. This hook is called just before the column width and other features are computed.*/<br/>      <br/>      </em>didParseCell: function (<em class="mm">data</em>) {<br/>          if(data.section === 'body') {<br/>             data.row.height = 20;<br/>          }<br/>          if (data.column.dataKey === 'poster') {<br/>             data.cell.text = '' <em class="mm">// Use an icon in didDrawCell instead<br/>          </em>}<br/>      },</span><span id="14c0" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">/* Use for changing styles with jspdf functions or customize the positioning of cells or cell text just before they are drawn to the page.*/<br/>      </em>willDrawCell: function (<em class="mm">data</em>) {<br/>         if (data.row.section === 'body' &amp;&amp; data.column.dataKey === 'available') {<br/>            if (data.cell.raw === 'KO') {<br/>               doc.setTextColor(231, 76, 60) <em class="mm">// Red<br/>            </em>}<br/>         }<br/>      },</span><span id="1aef" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">/* Use for adding content to the cells after they are drawn. This could be images or links. You can also use this to draw other custom jspdf content to cells with doc.text or doc.rect for example.*/<br/>     <br/>     </em>didDrawCell: function (<em class="mm">data</em>) {<br/>        if (data.row.section === 'body' &amp;&amp; data.column.dataKey === 'poster' &amp;&amp; data.cell.raw) {<br/>           doc.addImage(<br/>              data.cell.raw,<br/>              'PNG',<br/>              data.cell.x + 5,<br/>              data.cell.y + 2,<br/>              13,<br/>              16<br/>           )<br/>        }<br/>     }<br/>   });</span><span id="081f" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">   // we define the name of our PDF file.<br/>   </em>doc.save(`movies.pdf`);<br/>};</span><span id="f230" class="lf lg in mx b gy ni nc l nd ne">export default generatePDF;</span></pre><p id="ead8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">显然，通过遵循您在<a class="ae jz" href="https://github.com/simonbengtsson/jsPDF-AutoTable/blob/master/examples/examples.js" rel="noopener ugc nofollow" target="_blank">链接</a>中找到的文档或非常有用的示例，您可以进行比我在报告中使用的更多的定制。</p><p id="af1c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">正如您在代码片段中看到的，有许多定制，通过<code class="fe nf ng nh mx b">columnStyles</code>属性，我们已经能够为每一列指定样式。</p><p id="e457" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个库让我们感兴趣的是，在报告生成过程中可以动态修改报告内容的钩子。一个具体的例子是当条件<code class="fe nf ng nh mx b">data.column.dataKey === ‘poster'</code>满足时，添加海报作为图像而不是文本。</p><p id="f9e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时，剩下的就是返回主页，导入<code class="fe nf ng nh mx b">generatePDF</code>功能，为我们的pdf创建栏，并修改按钮，如下所示:</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="db81" class="lf lg in mx b gy nb nc l nd ne">import generatePDF from "../services/report-generator";</span><span id="bc75" class="lf lg in mx b gy ni nc l nd ne">const MoviesHomepage = () =&gt; {<br/>   const [movies, setMovies] = useState([]);<br/>   <br/>   const columnsPDF = [{ poster: 'Poster', id: 'ID', title: 'Title', year: 'Year', available: 'Available' }]</span><span id="ea1d" class="lf lg in mx b gy ni nc l nd ne">.<br/>.<br/>.<br/>.</span><span id="97b7" class="lf lg in mx b gy ni nc l nd ne">&lt;button<br/>   <em class="mm">className</em>="btn"<br/>   <em class="mm">onClick</em>={() =&gt; generatePDF(movies.map(<em class="mm">m</em> =&gt; ({<br/>      poster: m.Poster,<br/>      id: m.imdbID,<br/>      title: m.Title,<br/>      year: m.Year,<br/>      available: m.Available ? 'OK' : 'KO'<br/>   })), columnsPDF, true)}<br/>&gt;<br/>DOWNLOAD PDF MOVIES<br/>&lt;/button&gt;</span></pre><h2 id="7e69" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">报告输出</strong></h2><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi np"><img src="../Images/ddf64b021ec6eef25d7e0e9cc01754a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9p7IT3-xUMUfVJa7NewI9Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">PDF Report</figcaption></figure><h2 id="265c" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">应用程序样式</strong></h2><p id="eada" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">为了不使我们的应用程序成为风格的孤儿，让我们对代码做一些快速的修改:</p><p id="5ae9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nf ng nh mx b">App.js</code></p><p id="d94b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们给组件添加标题</p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="6b57" class="lf lg in mx b gy nb nc l nd ne">function App() {<br/>   return (<br/>     &lt;div <em class="mm">className</em>="App"&gt;<br/>        &lt;div <em class="mm">className</em>='header'&gt;<br/>           &lt;span&gt;MOVIES REGISTRY&lt;/span&gt;<br/>        &lt;/div&gt;<br/>        &lt;MoviesHomepage /&gt;<br/>     &lt;/div&gt;<br/>   );<br/>}</span></pre><p id="9d1e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nf ng nh mx b">App.css</code></p><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="c6de" class="lf lg in mx b gy nb nc l nd ne"><em class="mm">.header</em> {<br/>  padding: 15px;<br/>  text-align: center;<br/>  background: #f1c40f;<br/>  font-weight: bold;<br/>}</span><span id="95b8" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">.table</em> {<br/>  width: 90%;<br/>  margin: auto;<br/>  margin-top: 20px;<br/>}</span><span id="13d7" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">.table</em> thead tr {<br/>  height: 40px;<br/>  background: #fff6d2;<br/>}</span><span id="6ac5" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">.table</em> tbody tr td {<br/>  text-align: center;<br/>}</span><span id="f177" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">.btn</em> {<br/>  margin-top: 20px;<br/>  margin-left: 20px;<br/>  background: #f1c410;<br/>  padding: 10px;<br/>  border: 0;<br/>  border-radius: 5px;<br/>  font-weight: bold;<br/>}</span><span id="4320" class="lf lg in mx b gy ni nc l nd ne"><em class="mm">.btn:hover</em> {<br/>  background: #ffea94;<br/>  cursor: pointer;<br/>}</span></pre><h2 id="bfc8" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">最终输出</strong></h2><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nq"><img src="../Images/5c4b9be831485ed6012551a1a0650234.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*930LGTv_OO1TZHuItC7BIQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">React App</figcaption></figure><h2 id="27b2" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">关于它的想法</strong></h2><p id="fb4a" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">使用一个从前端开始生成报告的库无疑是我们的一把额外的箭，这使我们能够更快地使用一个额外的工具。像所有事情一样，显然你必须在一开始就问自己你要实现的目标的复杂性，然后评估最好的工具。</p><p id="6ce0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然而，在本教程结束时，如果用例是线性的，并且没有太复杂的数据，那么JSPDF解决方案不会被先验地抛弃，相反，它非常方便和令人满意。</p><h2 id="8d91" class="lf lg in bd lh li lj dn lk ll lm dp ln kl lo lp lq kp lr ls lt kt lu lv lw lx bi translated"><strong class="ak">源代码</strong></h2><p id="d073" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl ma kn ko kp mb kr ks kt mc kv kw kx ig bi translated">如果你想回顾代码，请随时关注我的<a class="ae jz" href="https://github.com/CoxxD/pdf-frontend-generator" rel="noopener ugc nofollow" target="_blank"> Github账户</a>上该项目的最新版本。</p><p id="8ced" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">非常感谢你的阅读！</p><p id="560a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mm">更多内容请看</em><a class="ae jz" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
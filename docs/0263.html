<html>
<head>
<title>HTML Drag and Drop API Explained With Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用例子解释HTML拖放API</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/html-drag-and-drop-api-explained-with-examples-35cda91bce56?source=collection_archive---------0-----------------------#2021-01-15">https://javascript.plainenglish.io/html-drag-and-drop-api-explained-with-examples-35cda91bce56?source=collection_archive---------0-----------------------#2021-01-15</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="6600" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过实例学习如何拖放。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/0453d160f248248c41ab2788b14a0f8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G3vx0sAOkiwoVCDRM3aw_g.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Image created with ❤️️ By <a class="ae kv" href="https://mehdiouss315.medium.com/" rel="noopener">author</a>.</figcaption></figure><h1 id="6429" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">介绍</h1><p id="81cf" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">HTML拖放API依赖于文档对象模型来获取关于正在拖放的内容的信息。因此，它允许我们在网页上拖放任何元素，几乎所有主流浏览器都支持它。使用JavaScript事件处理程序，我们可以将任何元素转换成可拖动的项目或可以放下元素的项目。</p><p id="f910" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在本文中，我们将了解如何使用这个HTML拖放API。让我们开始吧。</p><h1 id="6595" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">Codepen示例</h1><p id="06b5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在我们开始解释这个API之前，您可以看一下下面的Codepen示例:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mp mq l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Drag and Drop example.</figcaption></figure><p id="aba1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">这是通过使用HTML拖放API来完成的。这可能看起来很复杂，但我们将经历制作这个例子的所有不同部分。让我们开始吧。</p><h1 id="c14a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">让我们从HTML开始</h1><p id="e4d9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在HTML结构中，我们将创建三个div:一个可拖动的div和两个放置可拖动div的div。</p><p id="3595" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">可拖动的div必须将属性<code class="fe mr ms mt mu b">draggable</code>设置为<code class="fe mr ms mt mu b">true</code>。然后，我们将添加一些HTML拖放事件属性，以便在JavaScript中处理它们。</p><p id="6cd1" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">以下是HTML示例:</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="0066" class="mz kx iq mu b gy na nb l nc nd">&lt;body&gt;</span><span id="f160" class="mz kx iq mu b gy ne nb l nc nd">&lt;p&gt;Drag and Drop the violet rectangle in other rectangles.&lt;/p&gt;</span><span id="e76f" class="mz kx iq mu b gy ne nb l nc nd">&lt;div id="dropHere" <strong class="mu ir">ondrop</strong>="drop(event)" <strong class="mu ir">ondragover</strong>="allowDrop(event)"&gt;&lt;/div&gt;</span><span id="5df3" class="mz kx iq mu b gy ne nb l nc nd">&lt;br&gt;</span><span id="c9bd" class="mz kx iq mu b gy ne nb l nc nd">&lt;div id="div" <strong class="mu ir">draggable</strong>="true" <strong class="mu ir">ondragstart</strong>="drag(event)"&gt;&lt;/div&gt;</span><span id="fcb4" class="mz kx iq mu b gy ne nb l nc nd">&lt;br&gt;</span><span id="676d" class="mz kx iq mu b gy ne nb l nc nd">&lt;div id="dropHere" <strong class="mu ir">ondrop</strong>="drop(event)" <strong class="mu ir">ondragover</strong>="allowDrop(event)"&gt;&lt;/div&gt;</span><span id="3ea2" class="mz kx iq mu b gy ne nb l nc nd">&lt;/body&gt;</span></pre><p id="55a8" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">现在让我们在CSS中设置div的样式。</p><h1 id="b158" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">样式表</h1><p id="8ffb" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">所以现在，我们将使用CSS样式化我们的元素。您可以阅读下面的代码来查看我们的样式表。</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="f6e1" class="mz kx iq mu b gy na nb l nc nd"><strong class="mu ir">*</strong>{<br/> margin: 0;<br/> padding: 0;<br/> box-sizing: border-box;<br/> font-family: sans-serif;<br/>}<br/><strong class="mu ir">body</strong>{<br/> display: flex;<br/> align-items: center;<br/> justify-content: center;<br/> flex-direction: column;<br/> height: 100Vh;<br/>}<br/><strong class="mu ir">p</strong>{<br/> margin: 10px;<br/>}<br/><strong class="mu ir">#dropHere</strong>{<br/> width: 300px;<br/> height: 80px;<br/> border: 1px solid black;<br/> display: flex;<br/> align-items: center;<br/> justify-content: center;<br/>}<br/><strong class="mu ir">#div</strong>{<br/> background: blueviolet;<br/> width: 280px;<br/> height: 70px;<br/> cursor: grabbing;<br/> cursor: -webkit-grabbing;<br/> cursor: -moz-grabbing;<br/>}</span></pre><p id="2f57" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="nf">输出:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/29ec3e9cb948ae8f1d863a88fb769aaa.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*Ptcm_nz4C3hiOOwdBy3oWA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Output of HTML &amp; CSS.</figcaption></figure><h1 id="9646" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">JavaScript部分</h1><p id="1bf3" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">使用JavaScript，我们将通过创建函数来处理我们在上面的HTML中添加的拖放事件属性。</p><p id="0c21" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">以下是JavaScript示例:</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="79a1" class="mz kx iq mu b gy na nb l nc nd">function <strong class="mu ir">allowDrop</strong>(ev) {<br/>  ev.preventDefault();<br/>}</span><span id="dcde" class="mz kx iq mu b gy ne nb l nc nd">function <strong class="mu ir">drag</strong>(ev) {<br/>  <strong class="mu ir">ev.dataTransfer.setData</strong>("text", ev.target.id);<br/>}</span><span id="8c22" class="mz kx iq mu b gy ne nb l nc nd">function <strong class="mu ir">drop</strong>(ev) {<br/>  ev.preventDefault();<br/>  var data = <strong class="mu ir">ev.dataTransfer.getData</strong>("text");<br/>  ev.target.appendChild(document.getElementById(data));<br/>}</span></pre><p id="de89" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">在这之后，您将能够在另外两个矩形div之间拖放紫色div。现在让我详细解释一下这一切:</p><ol class=""><li id="2ec7" class="nh ni iq lq b lr mk lu ml lx nj mb nk mf nl mj nm nn no np bi translated">在HTML中，我们必须为violet div指定一个属性<code class="fe mr ms mt mu b">draggable</code>设置为<code class="fe mr ms mt mu b">true</code>，以使它成为一个可拖动的元素。</li><li id="10a5" class="nh ni iq lq b lr nq lu nr lx ns mb nt mf nu mj nm nn no np bi translated">draggable元素中的属性<code class="fe mr ms mt mu b">ondragstart</code>调用函数drag(event ),该函数指定要拖动的数据。<code class="fe mr ms mt mu b">dataTransfer.setData()</code>方法设置被拖动数据的数据类型和值。</li></ol><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="4a63" class="mz kx iq mu b gy na nb l nc nd">function drag(ev) {<br/>  ev.dataTransfer.setData("text", ev.target.id);<br/>}</span></pre><p id="1494" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">3.对于我们放置紫色矩形的另外两个div，事件<code class="fe mr ms mt mu b">ondragover </code>指定可以将拖动的数据放在哪里。因为默认情况下，不能将元素拖放到其他元素中。为了允许删除，我们在函数<code class="fe mr ms mt mu b">allowDrop</code>中调用方法<code class="fe mr ms mt mu b">event.preventDefault()</code>。</p><p id="04df" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">4.现在我们只需要做空投。当拖放数据时，会发生drop事件。这是通过调用函数drop(event)的属性<code class="fe mr ms mt mu b">ondrop</code>完成的:</p><pre class="kg kh ki kj gt mv mu mw mx aw my bi"><span id="69bc" class="mz kx iq mu b gy na nb l nc nd">function drop(ev) {<br/>  ev.preventDefault();<br/>  var data = ev.dataTransfer.getData("text");<br/>  ev.target.appendChild(document.getElementById(data));<br/>}</span></pre><ul class=""><li id="ccb9" class="nh ni iq lq b lr mk lu ml lx nj mb nk mf nl mj nv nn no np bi translated">这里我们调用<code class="fe mr ms mt mu b">preventDefault</code>来防止浏览器默认处理数据(默认是打开一个链接放在drop上)。</li><li id="46ff" class="nh ni iq lq b lr nq lu nr lx ns mb nt mf nu mj nv nn no np bi translated">我们用方法<code class="fe mr ms mt mu b">dataTransfer.getData</code>得到拖动的数据。该方法将返回在方法<code class="fe mr ms mt mu b">setData()</code>中被设置为相同类型的任何数据。</li><li id="32ed" class="nh ni iq lq b lr nq lu nr lx ns mb nt mf nu mj nv nn no np bi translated">被拖动的数据是被拖动元素的id(“div”)。</li><li id="0307" class="nh ni iq lq b lr nq lu nr lx ns mb nt mf nu mj nv nn no np bi translated">最后，我们将拖动的元素添加到drop元素中。</li></ul><h1 id="4e9d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">结论</h1><p id="d81c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">拖放API是每个web开发人员必须知道的事情。除了拖放之外，它还提供了多个其他选项来定制您的操作。我鼓励你从其他资源中了解更多。</p><p id="547a" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated">感谢您阅读本文，希望您觉得有用。</p><h1 id="f78f" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">更多阅读</h1><p id="cfb4" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><em class="nf">如果你对JavaScript和web开发相关的更有用的内容感兴趣，还可以</em> <a class="ae kv" href="https://exciting-musician-9042.ck.page/60477323b8" rel="noopener ugc nofollow" target="_blank"> <em class="nf">订阅</em> </a> <em class="nf">我们的简讯。</em></p><p id="a524" class="pw-post-body-paragraph lo lp iq lq b lr mk jr lt lu ml ju lw lx mm lz ma mb mn md me mf mo mh mi mj ij bi translated"><em class="nf">下面是另一篇有用的文章，请点击链接查看:</em></p><div class="nw nx gp gr ny nz"><a href="https://medium.com/javascript-in-plain-english/the-reduce-method-in-javascript-explained-with-examples-6232b85e47f6" rel="noopener follow" target="_blank"><div class="oa ab fo"><div class="ob ab oc cl cj od"><h2 class="bd ir gy z fp oe fr fs of fu fw ip bi translated">举例说明JavaScript中的Reduce方法</h2><div class="og l"><h3 class="bd b gy z fp oe fr fs of fu fw dk translated">通过示例了解JavaScript中的reduce方法。</h3></div><div class="oh l"><p class="bd b dl z fp oe fr fs of fu fw dk translated">medium.com</p></div></div><div class="oi l"><div class="oj l ok ol om oi on kp nz"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>What are Pure and Impure Functions in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的纯函数和不纯函数是什么？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/what-are-pure-functions-in-javascript-easy-topic-with-complex-questions-in-interview-aa4da06a4236?source=collection_archive---------5-----------------------#2021-05-20">https://javascript.plainenglish.io/what-are-pure-functions-in-javascript-easy-topic-with-complex-questions-in-interview-aa4da06a4236?source=collection_archive---------5-----------------------#2021-05-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8b141de0d63117c57cc47e791df90dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bxZ-tNXTAG3JeLih"/></div></div></figure><p id="dd96" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你们中的大多数人可能知道什么是纯函数，事实上最初我并没有打算写一篇关于这个主题的文章，因为它非常直接。但在一次采访中，有人问我纯函数的多种变体，我无法回答。所以我想写一个详细的解释来帮助观众。</p><figure class="kt ku kv kw gt jo"><div class="bz fp l di"><div class="kx ky l"/></div></figure><h2 id="b930" class="kz la in bd lb lc ld dn le lf lg dp lh kg li lj lk kk ll lm ln ko lo lp lq lr bi translated"><strong class="ak">什么是纯函数？</strong></h2><p id="7f30" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">简而言之，这些函数的输出严格依赖于传递的输入，并且没有副作用。例如:考虑下面的例子来计算正方形的面积。</p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="6cb4" class="kz la in ly b gy mc md l me mf">function areaOfSquare(length, breadth){<br/>    return length * breadth;<br/>}<br/>areaOfSquare(2,4); // output will be 8</span></pre><p id="1acb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无论你将相同的值传递给<strong class="jx io"> areaOfSquare </strong>函数多少次，输出都保持不变。<strong class="jx io">所以，我们可以断定纯函数是确定性的。</strong></p><p id="225b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你知道什么是不纯函数了，记住下面是它的定义。</p><h2 id="5e74" class="kz la in bd lb lc ld dn le lf lg dp lh kg li lj lk kk ll lm ln ko lo lp lq lr bi translated"><strong class="ak">什么是不纯函数？</strong></h2><p id="9583" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">简而言之，不纯函数是那些输出不仅仅依赖于输入数据的函数。让我们考虑下面一个简单的例子。</p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="f1e7" class="kz la in ly b gy mc md l me mf">function generateNumber(input){</span><span id="b290" class="kz la in ly b gy mg md l me mf">return input + Math.random();</span><span id="c4da" class="kz la in ly b gy mg md l me mf">}<br/>generateNumber(10)</span></pre><p id="ec5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在上面的<strong class="jx io"> generateNumber() </strong>函数中，返回值不依赖于输入，任何时候你调用相同编号的函数，输出都会不同。因此，我们可以断定<strong class="jx io">不纯函数是不确定的。</strong></p><p id="dd20" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在大多数面试中，面试官会知道你知道上述话题，所以他们会问一些小问题。</p><h2 id="b416" class="kz la in bd lb lc ld dn le lf lg dp lh kg li lj lk kk ll lm ln ko lo lp lq lr bi translated"><strong class="ak">问题1:拥有纯函数的优势是什么？</strong></h2><ol class=""><li id="d37b" class="mh mi in jx b jy ls kc lt kg mj kk mk ko ml ks mm mn mo mp bi translated"><strong class="jx io">我们可以避免副作用:</strong>由于纯函数不修改任何全局状态或变量，所以纯函数内部不会有任何副作用。副作用越小，代码结构越好。</li><li id="4ef5" class="mh mi in jx b jy mq kc mr kg ms kk mt ko mu ks mm mn mo mp bi translated"><strong class="jx io">记忆化:</strong>对于相同的输入，纯函数将总是返回相同的输出。因此，函数可以存储结果并在调用时返回，而不是一直计算输出。</li><li id="99ae" class="mh mi in jx b jy mq kc mr kg ms kk mt ko mu ks mm mn mo mp bi translated"><strong class="jx io">更容易测试和调试:</strong>因为输出是确定的，所以你总是可以预测输出并编写测试用例来测试功能。甚至调试代码也变得很容易，因为你不需要担心函数的行为会随着时间的推移而改变，它总是一样的。</li></ol><h2 id="5ba7" class="kz la in bd lb lc ld dn le lf lg dp lh kg li lj lk kk ll lm ln ko lo lp lq lr bi translated"><strong class="ak">问题二:console.log是纯函数吗？</strong></h2><p id="a737" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">现在你知道了纯函数的定义和例子，你能猜出console.log(' ')是不是纯函数吗？</p><p id="c35b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里我们有两个方面:</p><p id="70b8" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 1。console.log(' ')是一个函数，它的返回值总是未定义的</strong>，I <strong class="jx io">表示</strong></p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="ffa9" class="kz la in ly b gy mc md l me mf"> let x = console.log('hello'); // This line will print hello<br/> console.log(x); // output will be undefined </span></pre><p id="a111" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">因此，console.log函数总是返回undefined，因此它是一个纯函数。</p><p id="cbb7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io"> 2。如果你在一个纯函数里面有console.log，那么这个函数还是纯函数吗？</strong></p><p id="3022" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不，如果你在一个纯函数中使用console.log，它会产生一些副作用，比如在函数范围之外向console打印值。所以，技术上低于功能是不纯的。</p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="b135" class="kz la in ly b gy mc md l me mf">function areaOfSquare(length, breadth){<br/>    console.log("Area is", length * breadth);<br/>    return length * breadth;<br/>}<br/>areaOfSquare(2,4); // output will be 8</span></pre><p id="b264" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">避免，在完成测试后在函数内部使用日志，这会使函数变得不纯。</p><h2 id="9201" class="kz la in bd lb lc ld dn le lf lg dp lh kg li lj lk kk ll lm ln ko lo lp lq lr bi translated"><strong class="ak">问题3:像滤波、映射这样的数组方法是纯函数吗？</strong></h2><p id="85a6" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">与上面的问题相比，这很容易，通过概念思考并猜测答案。为了给出上下文，过滤器和映射方法将迭代数组并返回新数组作为输出。</p><p id="3468" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">过滤器示例:</p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="8800" class="kz la in ly b gy mc md l me mf">const words = ['spray', 'destruction'];<br/>const result = words.filter(word =&gt; word.length &gt; 6);<br/>console.log(result); // Output will be ['destruction']</span></pre><p id="79b0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">地图示例:</p><pre class="kt ku kv kw gt lx ly lz ma aw mb bi"><span id="1c9c" class="kz la in ly b gy mc md l me mf">const array1 = [1, 4];<br/>// pass a function to map<br/>const map1 = array1.map(x =&gt; x * 2);<br/>console.log(map1);</span></pre><h1 id="924f" class="mv la in bd lb mw mx my le mz na nb lh nc nd ne lk nf ng nh ln ni nj nk lq nl bi translated">结论</h1><p id="9719" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">如果您已经清楚地理解了这个概念，您的答案将是<strong class="jx io">是</strong>。map和filter方法都是纯的，无论您传递同一个数组和执行同一个任务多少次，输出都是相同的。</p><p id="c0f5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在面试中，你可能会被问到更棘手的问题，在这种情况下，你会想，如果你把一个输入传递给一个函数，你是否总是得到相同的输出？然后检查是否有副作用？如果否，则该函数是纯的，否则不是。</p><p id="ac78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">快乐阅读，在我的下一篇文章中找到你。</p><p id="e818" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">同一作者更多文章:</strong></p><ol class=""><li id="e977" class="mh mi in jx b jy jz kc kd kg nm kk nn ko no ks mm mn mo mp bi translated"><a class="ae np" href="https://mevasanth.medium.com/how-everything-is-object-in-javascript-a4164d7e6a2d" rel="noopener">在JavaScript中，一切都是对象吗？</a></li><li id="d2a7" class="mh mi in jx b jy mq kc mr kg ms kk mt ko mu ks mm mn mo mp bi translated"><a class="ae np" href="https://mevasanth.medium.com/hoisting-in-javascript-hot-topic-for-interview-43b463a6a77?source=follow_footer---------0----------------------------" rel="noopener">JavaScript中的提升:访谈热点</a></li><li id="4133" class="mh mi in jx b jy mq kc mr kg ms kk mt ko mu ks mm mn mo mp bi translated"><a class="ae np" href="https://mevasanth.medium.com/memoization-in-javascript-hot-topic-for-interview-815475544ab0" rel="noopener">JavaScript记忆——面试热点</a></li></ol><p id="e92b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nq">多内容于</em> <a class="ae np" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="nq">中</em></strong></a></p></div></div>    
</body>
</html>
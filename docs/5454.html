<html>
<head>
<title>Things I Wish I Knew Earlier About JavaScript Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关于JavaScript模块，我希望早点知道的事情</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/things-i-wish-i-knew-earlier-about-javascript-modules-73eb2933b54a?source=collection_archive---------15-----------------------#2021-11-10">https://javascript.plainenglish.io/things-i-wish-i-knew-earlier-about-javascript-modules-73eb2933b54a?source=collection_archive---------15-----------------------#2021-11-10</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/80afaf66e117e5ec69a6a6b7bf12fa40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VAv9zRlAt2lH9Q-i.png"/></div></div></figure><p id="81da" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我不得不承认，我花了一段时间来理解JavaScript模块。这至少部分是因为有两种不同的流行模块系统，<a class="ae kw" href="http://www.commonjs.org/" rel="noopener ugc nofollow" target="_blank"> CommonJS </a>和<a class="ae kw" href="https://en.wikipedia.org/wiki/ECMAScript" rel="noopener ugc nofollow" target="_blank"> ECMAScript 2015 </a>(通常简称为ES2015)。</p><p id="6428" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">ECMAScript 2015标准比CommonJS新。就我个人而言，我觉得它更简单，我会尽可能优先使用它。然而,<a class="ae kw" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>上相当多的模块仍然使用旧的风格。</p><p id="50e9" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个重要注意事项—浏览器仅支持ES2015，不支持CommonJS。</p><h1 id="ff0e" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">CommonJS</h1><p id="0a48" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">CommonJS由Mozilla团队的一名成员于2009年发起，试图统一JavaScript功能。<a class="ae kw" href="http://www.commonjs.org/" rel="noopener ugc nofollow" target="_blank"> CommonJS </a>涵盖的不仅仅是模块——查看网站。</p><h2 id="a246" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">出口</h2><p id="cfec" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在CommonJS模块中，符号是在一个对象中导出的(可以理解命名为<code class="fe mm mn mo mp b">exports</code>)。对象的每个特性都是一个导出的符号。</p><p id="0a72" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">通常的对象分配规则适用。这意味着您可以很容易地导出一个与文件内部名称不同的符号。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="beb6" class="ma ky iq mp b gy my mz l na nb">function sayHello(name) {<br/>  console.log("Hello", name);<br/>}</span><span id="5341" class="ma ky iq mp b gy nc mz l na nb">module.exports = {<br/>  sayHello,<br/>  anotherSayHello: sayHello<br/>};</span></pre><h2 id="3a89" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">需要</h2><p id="346a" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">然后，您可以<code class="fe mm mn mo mp b">require</code>整个模块或该模块中的一些符号。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="44e8" class="ma ky iq mp b gy my mz l na nb">const testModule = require("./module_name");<br/>const { sayHello } = require("./module_name");</span><span id="46f7" class="ma ky iq mp b gy nc mz l na nb">testModule.sayHello("world");<br/>sayHello("second world");</span></pre><p id="6515" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><strong class="ka ir">注意</strong>:从CJS风格的模块中导入命名符号只在Node 14中引入，并不完美——它依赖于Node中的一些试探法。</p><h1 id="6f7c" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">ES2015</h1><h2 id="4dfd" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">出口</h2><p id="da5b" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">ES2015中导出更容易；一个项目(函数、常量、变量等)可以简单地通过添加<code class="fe mm mn mo mp b">export</code>关键字导出。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="c55f" class="ma ky iq mp b gy my mz l na nb">export function sayHello(name) { console.log("Hello", name); } export const myName = "Rumpelstiltskin";</span></pre><p id="d50e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，您可以在文件末尾一次性导出项目。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="908f" class="ma ky iq mp b gy my mz l na nb">export { sayHello, myName };</span></pre><h2 id="0033" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">导入</h2><p id="4ab5" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">像许多其他语言一样——Java、Python——然后导入想要使用的模块部分。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="11bf" class="ma ky iq mp b gy my mz l na nb">import { sayHello } from "./moduleName";<br/>sayHello("world");</span></pre><p id="ffcc" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">或者，如果您想让它们保持命名空间:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="7846" class="ma ky iq mp b gy my mz l na nb">import * as moduleStuff from "./moduleName";</span><span id="7e9b" class="ma ky iq mp b gy nc mz l na nb">moduleStuff.sayHello(moduleStuff.myName);</span></pre><h1 id="6c54" class="kx ky iq bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu bi translated">默认导出</h1><p id="ad9f" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">在上面的大多数例子中，我们从模块中导入了一个特别命名的符号:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="43a6" class="ma ky iq mp b gy my mz l na nb">import { sayHello } from "./module_name";</span></pre><p id="c797" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一个模块也可以有一个默认的导出，如果你没有指定你想从模块中导入什么，你就会得到这个默认的导出。</p><h2 id="b51a" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">CommonJS</h2><p id="7dc8" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">CJS模块实际上只导出一个单项——从这个意义上说，它们只有一个默认的导出。这就是为什么我们想要导出的项目需要是对象的属性。</p><h2 id="b4e8" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">ES2015</h2><p id="f63d" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">有了这个系统，你就有了更多的灵活性。可以导出多个内容，并且您可以标记您想要的默认内容。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="039c" class="ma ky iq mp b gy my mz l na nb">export default const theAnswer = 42;</span></pre><h2 id="7d19" class="ma ky iq bd kz mb mc dn ld md me dp lh kj mf mg ll kn mh mi lp kr mj mk lt ml bi translated">用户小心</h2><p id="c427" class="pw-post-body-paragraph jy jz iq ka b kb lv kd ke kf lw kh ki kj lx kl km kn ly kp kq kr lz kt ku kv ij bi translated">这并不总是一件好事；您永远无法完全确定您要导入的是什么，它可能会以与原始文件完全不同(并且容易让人误解)的名称导入。</p><p id="9bcd" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">例如，以普通模块<code class="fe mm mn mo mp b">basicMaths</code>为例:</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="12bb" class="ma ky iq mp b gy my mz l na nb">export default sum(x, y) {<br/>  return x + y;<br/>}</span></pre><p id="6693" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">该默认导出可以作为任何内容导入。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="890e" class="ma ky iq mp b gy my mz l na nb">// This will not do what you expect.<br/>import divide from "./basicMaths";</span><span id="b552" class="ma ky iq mp b gy nc mz l na nb">divide(2, 4);</span></pre><p id="e467" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">命名出口的好处是你进口的正是你想要的，没有惊喜。</p><pre class="mq mr ms mt gt mu mp mv mw aw mx bi"><span id="2a2d" class="ma ky iq mp b gy my mz l na nb">import { divide } from "./basicMaths";</span><span id="9b75" class="ma ky iq mp b gy nc mz l na nb">// divide is empty, so this crashes (or doesn't build, depending on<br/>// how good your tools are). Either way it's better than using the<br/>// wrong function.<!-- --> <br/>divide(2, 4);</span></pre></div><div class="ab cl nd ne hu nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ij ik il im in"><p id="f429" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nk">原载于2021年11月10日【https://www.solarwinter.net】<a class="ae kw" href="https://www.solarwinter.net/things-i-wish-i-knew-about-javascript-part-2/" rel="noopener ugc nofollow" target="_blank"><em class="nk"/></a><em class="nk">。</em></em></p><p id="5177" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><em class="nk">更多内容请看</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ka ir"><em class="nk">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Generate API Driven Forms in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中生成API驱动的表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/generating-api-driven-form-in-reactjs-d07ed54ca3f2?source=collection_archive---------2-----------------------#2021-03-26">https://javascript.plainenglish.io/generating-api-driven-form-in-reactjs-d07ed54ca3f2?source=collection_archive---------2-----------------------#2021-03-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1481" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">React中填充表单的动态方法</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/4c67eb6a6a8a26b00e661994625488ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I92yif_ULj6pW4WgE4IJWA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Cover Image</figcaption></figure><h1 id="018f" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">介绍</h1><p id="a9cd" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">我最近参与了一个项目，该项目要求SuperAdmin用户检查客户在入职过程中出现的注册错误。受影响的字段由内部系统标记，并作为JSON有效载荷返回给前端应用程序。我们有超过100个表单输入字段可能会受到影响。</p><p id="aa9c" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">考虑到这一点，我从一开始就知道在ReactJs中静态生成表单的典型方法不足以解决这个问题。</p><p id="c36f" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">在本文中，我将向您展示从JSON有效负载动态生成表单输入的方法。</p><p id="079e" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">可以在这里  <strong class="lm io">查看Vue.js版本<a class="ae ml" href="https://malomz.medium.com/generate-api-driven-forms-in-vue-a2a9cb263bd2" rel="noopener"> <strong class="lm io">。</strong></a></strong></p><h1 id="459d" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated"><strong class="ak">React中的表单处理</strong></h1><p id="afa1" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">在开始之前，我们必须了解react中当前是如何处理表单的。react中有两种处理表单的方式。</p><ol class=""><li id="aa35" class="mm mn in lm b ln mg lq mh lt mo lx mp mb mq mf mr ms mt mu bi translated"><strong class="lm io">受控组件:</strong>这种方法涉及父组件，它通过管理状态并根据用户输入更新状态来控制表单元素。这种方法是ReactJs团队推荐的方法。</li></ol><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Controlled Component</figcaption></figure><p id="1c32" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">2.<strong class="lm io">非受控组件:</strong>这种方法包括表单元素在内部存储自己的状态，表单数据由DOM本身处理。它使用<a class="ae ml" href="https://reactjs.org/docs/refs-and-the-dom.html" rel="noopener ugc nofollow" target="_blank"><strong class="lm io">ref</strong></a><strong class="lm io"/>从DOM中获取表单值。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Uncontrolled Component</figcaption></figure><h1 id="d9da" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">动态生成表单</h1><p id="3536" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">现在我们完全理解了ReactJs是如何处理表单的。我们现在可以修改我们的<strong class="lm io">受控组件</strong>来从JSON响应中动态生成表单输入元素。</p><p id="08a0" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated"><strong class="lm io">步骤1 <br/> </strong>创建一个<code class="fe mx my mz na b">data.json</code>来模拟我们从一个端点得到的响应。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">JSON response mock data</figcaption></figure><p id="aa13" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">记住JSON文件的结构，我们可以编辑我们的受控组件，如下所示</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mv mw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Dynamic Form</figcaption></figure><p id="b765" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">让我们解释一下这段代码。我们遵循以下步骤:</p><ul class=""><li id="ace6" class="mm mn in lm b ln mg lq mh lt mo lx mp mb mq mf nb ms mt mu bi translated">导入的<strong class="lm io">使用Effect </strong>钩子和mock JSON作为<strong class="lm io">响应</strong>。</li><li id="1d87" class="mm mn in lm b ln nc lq nd lt ne lx nf mb ng mf nb ms mt mu bi translated">将应用程序状态修改为空对象。</li><li id="3d3c" class="mm mn in lm b ln nc lq nd lt ne lx nf mb ng mf nb ms mt mu bi translated">基于来自JSON有效负载的响应，我们通过将<strong class="lm io">字段名</strong>和<strong class="lm io">值</strong>映射为<strong class="lm io"> <em class="nh">键值对</em> </strong>来动态填充状态空对象。这样，如果端点带有初始值，它将被填充到输入字段中。</li><li id="2948" class="mm mn in lm b ln nc lq nd lt ne lx nf mb ng mf nb ms mt mu bi translated">修改了<strong class="lm io"> handleChange </strong>函数，以获取一个额外的参数(字段)并将其用作相应输入值的键。</li><li id="7efa" class="mm mn in lm b ln nc lq nd lt ne lx nf mb ng mf nb ms mt mu bi translated">通过表单元素映射显示<strong class="lm io">表单标签</strong>、<strong class="lm io">输入类型</strong>、<strong class="lm io"> onChange </strong>回调，以及相应的值。</li></ul><p id="921a" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">有了这些，我们可以测试我们的表单并相应地提交它。</p><p id="651e" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">您可以在这个沙箱上查看完整的代码</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ni mw l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Dynamic Form</figcaption></figure><h1 id="4d46" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated"><strong class="ak">结论</strong></h1><p id="0934" class="pw-post-body-paragraph lk ll in lm b ln lo jo lp lq lr jr ls lt lu lv lw lx ly lz ma mb mc md me mf ig bi translated">这种方法帮助我们动态地生成表单，而不会用外部库来膨胀我们的应用程序。</p><p id="435d" class="pw-post-body-paragraph lk ll in lm b ln mg jo lp lq mh jr ls lt mi lv lw lx mj lz ma mb mk md me mf ig bi translated">它也是可扩展的(以适应其他表单元素)、可维护的和更干净的方法。</p><h1 id="e06f" class="ks kt in bd ku kv kw kx ky kz la lb lc jt ld ju le jw lf jx lg jz lh ka li lj bi translated">参考</h1><div class="nj nk gp gr nl nm"><a href="https://reactjs.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">反应-一个用于构建用户界面的JavaScript库</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">反应使创建交互式用户界面变得毫无痛苦。为应用程序中的每个状态设计简单的视图，并做出反应…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">reactjs.org</p></div></div><div class="nv l"><div class="nw l nx ny nz nv oa km nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://reactjs.org/docs/uncontrolled-components.html" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">不受控制的组件-反应</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">在大多数情况下，我们建议使用受控组件来实现表单。在受控组件中，表单数据是…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">reactjs.org</p></div></div><div class="nv l"><div class="ob l nx ny nz nv oa km nm"/></div></div></a></div><div class="nj nk gp gr nl nm"><a href="https://reactjs.org/docs/forms.html#controlled-components" rel="noopener  ugc nofollow" target="_blank"><div class="nn ab fo"><div class="no ab np cl cj nq"><h2 class="bd io gy z fp nr fr fs ns fu fw im bi translated">形式-反应</h2><div class="nt l"><h3 class="bd b gy z fp nr fr fs ns fu fw dk translated">HTML表单元素的工作方式与React中的其他DOM元素略有不同，因为表单元素自然会保留…</h3></div><div class="nu l"><p class="bd b dl z fp nr fr fs ns fu fw dk translated">reactjs.org</p></div></div><div class="nv l"><div class="oc l nx ny nz nv oa km nm"/></div></div></a></div></div></div>    
</body>
</html>
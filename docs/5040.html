<html>
<head>
<title>How to Convert Traditional For Loops to JavaScript Array Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何将传统的For循环转换成JavaScript数组方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-convert-traditional-for-loops-to-javascript-array-methods-89e4cb9e6250?source=collection_archive---------13-----------------------#2021-10-12">https://javascript.plainenglish.io/how-to-convert-traditional-for-loops-to-javascript-array-methods-89e4cb9e6250?source=collection_archive---------13-----------------------#2021-10-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="2d1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过例子解释一些JavaScript数组方法</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/352b647870d6a14d9f3d099aa7ccbf12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YIZfobJqxLFc051A"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@claybanks?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clay Banks</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="be42" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我想通过解决日常的用例来解释它们，而不是仅仅浏览一些顶级的JavaScript数组方法定义。每个用例都将从需求开始。每个用例之后都有一个初始代码块，这是一种不利用数组方法来解决它的方法。第二个代码块将是使用更现代的数组方法来解决它的方法。</p><h2 id="61be" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例1:</h2><p id="50ae" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">需求:</strong>我需要我列出的水果的价格。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="e03c" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Banana', price: .25}];<br/>const prices = [];<br/>for (let i = 0; i &lt; fruits.length; i++) {<br/>  prices.push(fruits[i].price);<br/>}<br/>console.log(prices); // [.5, .25]</span></pre><p id="c418" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" rel="noopener ugc nofollow" target="_blank">映射</a>方法。<code class="fe mj mk ml mb b">map</code>方法的目的是在对每个元素执行操作的同时，从给定的数组创建一个新的数组。一个常见的用例是修改数组中的值并返回一个新值；然而，在这个例子中，我们只需要数组中每个值的一个属性。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="b910" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Banana', price: .25}]<br/>const prices = fruits.map(fruit =&gt; fruit.price); <br/>console.log(prices) // [.5, .25]</span></pre><h2 id="3b6c" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例2:</h2><p id="027b" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">需求:</strong>我想知道我现有的水果有多少是. 50以下的。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="7d3d" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Banana', price: .25}];<br/>const fruitUnderFifty = [];<br/>for (let i = 0; i &lt; fruits.length; i++) {<br/>  if (fruits[i].price &lt; .5) {<br/>    fruitUnderFifty.push(fruits[i]);<br/>  }<br/>}<br/>console.log(fruitUnderFifty); // [{type: 'Banana', price: .25}]</span></pre><p id="57b8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" rel="noopener ugc nofollow" target="_blank">过滤器</a>方法。<code class="fe mj mk ml mb b">filter</code>方法旨在为数组中的每个值应用一个谓词。当返回值为<code class="fe mj mk ml mb b">true</code>时，元素将被添加到正在创建的数组中。判断是否应该使用filter方法的一个简单方法是，在传统的for循环中是否有一个<code class="fe mj mk ml mb b">if</code>条件来决定是否应该向数组中添加内容。如果你这样做了，你就有机会利用<code class="fe mj mk ml mb b">.filter</code>方法</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="085d" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Banana', price: .25}];<br/>const fruitUnderFifty = fruits.filter(fruit =&gt; fruit.price &lt; .5);<br/>console.log(fruitUnderFifty); // [{type: 'Banana', price: .25}]</span></pre><h2 id="b27b" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例3:</h2><p id="b160" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">需求:</strong>我需要知道是否每种水果都有现货。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="4a68" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5, inStock: true}, {type: 'Banana', price: .25, inStock: true}];<br/>let areAllFruitsInStock = true;<br/>for (let i = 0; i &lt; fruits.length; i++) {<br/>  if (!fruits[i].inStock) {<br/>    areAllFruitsInStock = false;<br/>    break;<br/>  }<br/>}<br/>console.log(areAllFruitsInStock); // true</span></pre><p id="1586" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用每一种方法。<code class="fe mj mk ml mb b">every</code>方法返回一个布尔值，并测试数组中的每个元素，看它是否通过。如果只有一个元素没有通过测试，那么返回值为false。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="5e70" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5, inStock: true}, {type: 'Banana', price: .25, inStock: true}];<br/>const areAllFruitsInStock = fruits.every(fruit =&gt; fruit.inStock);<br/>console.log(areAllFruitsInStock); // true</span></pre><h2 id="38a8" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例4:</h2><p id="efc1" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated"><strong class="jp ir">需求:</strong>我需要知道我的库存里有没有猕猴桃。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="548c" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Kiwi', price: .33}];<br/>let hasKiwi = false;<br/>for (let i = 0; i &lt; fruits.length; i++) {<br/>  if (fruits[i].type === 'Kiwi') {<br/>    hasKiwi = true;<br/>  }<br/>}<br/>console.log(hasKiwi); // true</span></pre><p id="a2e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some" rel="noopener ugc nofollow" target="_blank">点</a>的方法。在整个迭代过程中，只要满足<strong class="jp ir">一次</strong>条件，就会返回<code class="fe mj mk ml mb b">true</code>。还有一个有用的方法叫做<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes" rel="noopener ugc nofollow" target="_blank"> includes </a>，但是它不用于这些类型的用例，因为我们想要检查一个对象上的特定字段。如果你想在这个场景中使用<code class="fe mj mk ml mb b">.includes</code>，你可以选择<code class="fe mj mk ml mb b">.map</code>，然后选择<code class="fe mj mk ml mb b">.includes</code>。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="bf67" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Apple', price: .5}, {type: 'Kiwi', price: .33}];<br/>const hasKiwi = fruits.some(fruit =&gt; fruit.type === 'Kiwi');<br/>console.log(hasKiwi); // true</span></pre><h2 id="b208" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例5:</h2><p id="cba1" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">需求:我需要汇总我当天水果的总销售额。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="e93f" class="lc ld iq mb b gy mf mg l mh mi">const sales = [.5, .25, .5, .5, .25];<br/>let sum = 0;<br/>for (let i = 0; i &lt; sales.length; i++) {<br/>  sum += sales[i];<br/>}<br/>console.log(sum); // 2</span></pre><p id="fead" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" rel="noopener ugc nofollow" target="_blank">减少</a>的方法。这是<code class="fe mj mk ml mb b">reduce</code>的榜样，理由很充分。当你想从数组中取值并进一步减少它们时，那么<code class="fe mj mk ml mb b">reduce</code>是一个很好的方法。</p><p id="31f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mj mk ml mb b">reduce</code>方法通常是最难理解的。我建议在创建函数时使用命名良好的参数。下面，我们就用<code class="fe mj mk ml mb b">sum</code>和<code class="fe mj mk ml mb b">sale</code>。你会经常看到<code class="fe mj mk ml mb b">previousValue</code>和<code class="fe mj mk ml mb b">currentValue</code>。虽然这些是描述性的，但它们通常不足以描述您的用例。因此，通过给它们起更有意义的名字，这将有助于你更好地维护你的代码，同时也使新来者更容易理解。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="2ee2" class="lc ld iq mb b gy mf mg l mh mi">const sales = [.5, .25, .5, .5, .25];<br/>const totalSalesForTheDay = sales.reduce((sum, sale) =&gt; sum + sale);<br/>console.log(totalSalesForTheDay) // 2</span></pre><h2 id="ac52" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">用例6:</h2><p id="2ee5" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">需求:我需要找到我的百香果。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="ea0d" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Passion Fruit', price: .75}, {type: 'Banana', price: .25}];<br/>let passionFruit;<br/>for (let i = 0; i &lt; fruits.length; i++) {<br/>  if (fruits[i].type === 'Passion Fruit') {<br/>    passionFruit = fruits[i];<br/>  }<br/>}<br/>console.log(passionFruit); // {type: 'Passion Fruit', price: .75}</span></pre><p id="601a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">利用<a class="ae lb" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find" rel="noopener ugc nofollow" target="_blank">寻找</a>的方法。<code class="fe mj mk ml mb b">find</code>方法将返回您请求的值。在这种情况下，它将返回百香果对象。</p><pre class="km kn ko kp gt ma mb mc md aw me bi"><span id="618d" class="lc ld iq mb b gy mf mg l mh mi">const fruits = [{type: 'Passion Fruit', price: .75}, {type: 'Banana', price: .25}];<br/>const passionFruit = fruits.find(fruit =&gt; fruit.type === 'Passion Fruit');<br/>console.log(passionFruit); // {type: 'Passion Fruit', price: .75}</span></pre><h2 id="6148" class="lc ld iq bd le lf lg dn lh li lj dp lk jy ll lm ln kc lo lp lq kg lr ls lt lu bi translated">结论</h2><p id="bff1" class="pw-post-body-paragraph jn jo iq jp b jq lv js jt ju lw jw jx jy lx ka kb kc ly ke kf kg lz ki kj kk ij bi translated">这些是一些最常用的JavaScript数组方法。它们有助于用更少的代码行解决常见的问题，并降低仅仅为了迭代一个数组而犯小错误的风险。通过使用数组方法，您还减少了对<code class="fe mj mk ml mb b">let</code>的使用，这也有利于可读性和可维护性。事实上，如果您在使用数组时看到过<code class="fe mj mk ml mb b">let</code>，这通常是可以使用数组方法的迹象。</p></div></div>    
</body>
</html>
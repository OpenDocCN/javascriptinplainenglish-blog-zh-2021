# 第三关:实用 RxJS 指南终身学习 RxJS！

> 原文：<https://javascript.plainenglish.io/practical-rxjs-guide-to-learn-rxjs-for-life-88f2ee508d5c?source=collection_archive---------6----------------------->

## 第 3 级:深入理解 RxJS 模式(高级)

![](img/d944f3f55482ac97fcab1ed759a1b32c.png)

By FAM (All rights reserved)

嗨，欢迎。如果你已经到了 RxJS 难题的第三部分，这意味着你是一个真正的开发人员，在编码之前渴望知识和对事物的深刻理解，并且是一个坚持不懈的人。尊重！

正如 RxJS 系列的第 2 部分所讨论的。本文将涵盖 RxJS 的更多高级功能。这需要你目前为止在 0 级、1 级和 2 级中收集的知识。所以，如果你还没有获得这些知识，我不建议你从这篇文章开始，除非你知道你在做什么。

好了，回到我们的 RxJS 之旅，下面是这篇文章将要谈论的内容:

*   **组播观察值&主题**
*   **冷** ⛄ **对热**🔥**可观测量**
*   **组播运营商**

你的思想准备好了吗？如果是，让我们回到 RxJS 盒子里面！

# **1。多播观察值&主题**

到目前为止，我们了解到可观测性本质上是单播的。你可能注意到了，这和这个标题是矛盾的，不是吗？

不，不，这不是错误。您可以将单播可观察对象转换为多播可观察对象。但是，在此之前，我们需要先了解一下`Subject`，你听说过这个词吗？

以下是主题的特征:

*   只不过是一个可观察的(耳语:这个家伙也有一个 subscribe()方法)
*   也是一个观察者(WTF，是的，你可以这么说…我也是这么说的，但总有一个原因让我们以后会知道)
*   可以产生和接受价值，因为他同时是一个可观察的人和观察者。
*   他可以有一个观察者的列表(不像可观察的物体)
*   他有一种状态(就像 React 应用程序一样)。他可以维护已经订阅他的观察者的列表。
*   可以同时将价值推送给多个观察者(与可观察不同，一次只能推送给一个观察者。如果另一个观察者订阅了相同的可观察值，它将被第二次执行。还记得第 1 部分中演示超时的例子吗？)
*   因此，他是一个多播(不像可观察的)

让我们跳到这些家伙(观察者、可观察对象和主体)的大图

![](img/d70afe6a8b6c948912a711bceaae71d1.png)

By FAM (All rights reserved)

正如您在主题中看到的，我们刚刚将可观察的单播性质转换为多播(数据由两个观察者同时接收，一次执行)。

使用一些代码立即行动:

# **2。寒冷的** ⛄ **对炎热的**🔥**可观测量**

先从冷的说起(他已经冷了，可怜的家伙！开玩笑:p)。以下是感冒可观察到的特征:

*   价值(数据)产生于可观察的内部。数据是 ***声明的*** ， ***创建的，*** 和 ***产生的*** 在定义可观察的代码里面。
*   每次执行一个观察器(每次调用`subscribe()`时，一个新的数据生产者在该观察器内创建)。
*   Unicat(每次执行一个观察者)，冷可观察值推送到一个 ***单个*** 观察者。
*   一个例子是 RxJS APIs，比如在可观察对象内部产生整数的`interval()`。另一个例子`ajax()` API，数据来自 ajax 调用。因此，数据是在可观测的内部产生的。那些可观的(interval 和 ajax)冷！

现在，让我们看看什么定义了热可观测性(完全相反):

*   价值是在可观察之外产生的。它包装了存在于可观察之外的价值。因此，不管有没有观察者，它都能产生价值。
*   共享价值生产者，因为它在可观察的范围之外。
*   因此，多播允许在每次执行时有多个观察器同时接收产生的值)
*   一个例子是包装了 *DOM 事件*的可观察对象(这些事件(例如鼠标事件)一直在返回光标的位置(值、数据)，不管可观察对象是否需要它们)。事件存在于可观测之外，因此可以被同时共享和多播给许多观察者。这同样适用于*网络插座*。

现在，您可能想知道…如果您需要从一个冷可观察对象(例如 ajax 数据)多播值，该怎么办？

> 需要魔法的地方。它具有将冷单播可观察转变为多播热可观察所需的所有特性。

下面是一个将冷可观测值转换为热可观测值的示例:

*   冷观察病例:

*   通过将主体置于中间，将冷的可观察物转换为热的可观察物(参见，如在视觉示例中所解释的)

*   视觉上会发生什么？

![](img/6d48660ce21d5a9a5d5db3fd7a38e132.png)

By FAM (All rights reserved)

正如你所看到的，将冷的可观测数据转换成热的是相当容易的。但是，仍然有一些代码要做。令人欣慰的是，RxJS 的理念是防止您做重复的事情，只关注功能和逻辑，为我们提供可以为我们完成工作的操作员！是不是很牛逼？

# **3。多播运营商**

多播运营商是你的神奇工具，可以将任何冷的可观察对象变成热的多播可观察对象。它为您管理我们在示例中看到的所有细节(在可观察对象和观察者之间添加主题……)。

## 常见多播运营商的示例:

*   [connect()](https://rxjs.dev/api/operators/connect) (取代将在 v8 中删除的 [multicast()](https://rxjs.dev/api/operators/multicast) 运算符)

要使用`connect`，您需要提供一个`selector`函数，该函数将为您提供一个尚未连接的多播观察。当你订阅了`connect`的结果后，就会调用`selector`函数。在`selector`函数返回后，它返回的可观测值将被订阅。那么多播将被连接到源。

*   [refCount()](https://rxjs.dev/api/operators/refCount) (在最新 RxJS 版本中替换为 ***share*** )

当您有不止一个观察者订阅它时，这个将自动触发源可观察对象的执行。

*   [发布()](https://rxjs.dev/api/operators/publish)

就像`multicast`，它实际上是一个包装器，不需要传递主题作为输入。它会在屏幕后面自动创建它。

*   [share()](https://rxjs.dev/api/operators/share)

像`refCount()`一样，当观察者的数量>为 0 时，它自动执行可观察。当订阅的观察者计数下降到 0 时，它也从源可观察对象中取消订阅。

这些是一些常见的多播操作符，列表很长，你可以依靠 [RxJS](https://rxjs.dev/) 文档来查看其他现有的 API。

这篇文章太长了，无法继续介绍 RxJS 的下一个高级元素:

*   **可观察的执行**
*   **控制和调度可观测量的执行**
*   测试可观察性和订阅(单元测试，构建单元测试…等等)。)

但是不用担心！会在下一集播出😉

> 每当有新的热门文章发布时，第一个得到通知！

如果你有兴趣成为付费会员，你可以使用我的推荐链接。下次见

[](https://famzil.medium.com/subscribe) [## 让我们在生活中接触并一起行动吧！

### 让我们在生活中接触并一起行动吧！通过注册，您将创建一个中型帐户，如果您还没有…

famzil.medium.com](https://famzil.medium.com/subscribe) 

亲爱的读者，感谢你在我生命中的存在。

**让我们在** [**上取得联系**](https://medium.com/@famzil/)**[**Linkedin**](https://www.linkedin.com/in/fatima-amzil-9031ba95/)**[**脸书**](https://www.facebook.com/The-Front-End-World)**[**insta gram**](https://www.instagram.com/the_frontend_world/)**[**Youtube**](https://www.youtube.com/channel/UCaxr-f9r6P1u7Y7SKFHi12g)**或**[](https://twitter.com/FatimaAMZIL9)********

******参见我的关于网络要素和一般文化的电子书。******

*******更多内容请看*[***plain English . io***](http://plainenglish.io/)******
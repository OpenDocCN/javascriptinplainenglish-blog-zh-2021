<html>
<head>
<title>When Functions in Angular Cause Performance Problems</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">当Angular中的函数导致性能问题时</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/when-functions-in-angular-will-cause-performance-problem-be898002a537?source=collection_archive---------5-----------------------#2021-03-16">https://javascript.plainenglish.io/when-functions-in-angular-will-cause-performance-problem-be898002a537?source=collection_archive---------5-----------------------#2021-03-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="376f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">了解函数何时导致问题，以及如何使用Angular中的管道来解决问题。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/c7a6c62152232301ab334c2695a3b3d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*siAPyne9HFcL_jVu_hi3Yw.png"/></div></div></figure><p id="f587" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><a class="ae ln" rel="noopener ugc nofollow" target="_blank" href="/angular-performance-optimization-using-trackby-function-bd2cad4acee">在上一篇文章</a>中，我们已经看到了Angular中使用<strong class="kt ir"> ngFor </strong>的性能问题，以及如何使用<strong class="kt ir"> trackBy </strong>函数解决这个问题。在本教程中，我们将看到使用函数<strong class="kt ir"> Angular </strong>的另一个性能问题。这是一个很简单的问题。但是我们很多人都没有注意到这一点。我初学Angular的时候还没有发现这个问题。</p><h2 id="7938" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated"><strong class="ak">什么时候函数会导致性能问题？</strong></h2><p id="c951" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">我们总是创建函数来简化我们的工作。函数本身不会在Angular中产生性能问题。但是如果我们使用HTML部分中的函数，那么有时会导致性能问题。让我们看看下面的代码，以便更好地理解。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="980f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在上面的代码中，<strong class="kt ir"> getRank </strong>()是一个函数。getRank()函数不会单独产生性能问题。但是如果我们像上面一样在HTML内部使用它，那么它将会引起一个问题。</p><p id="417d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为了更好地理解它，我将展示性能问题的演示。请在您的<strong class="kt ir"> ts </strong>文件中使用以下代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="4dcf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在你的<strong class="kt ir"> HTML </strong>文件中使用下面的代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="a8d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">保存后，使用serve命令预览应用程序。</p><ol class=""><li id="25ef" class="mo mp iq kt b ku kv kx ky la mq le mr li ms lm mt mu mv mw bi translated">您可以在控制台上看到名为的<strong class="kt ir">输出被打印了10次。实际上，我们只有5排。但是叫了10遍。这是角状脏支票的一个问题。如果你有更多的行，就会产生问题。不是叫5次，而是叫10次。</strong></li><li id="5068" class="mo mp iq kt b ku mx kx my la mz le na li nb lm mt mu mv mw bi translated">如果您点击<strong class="kt ir">添加产品</strong>按钮，那么名为文本的等级将在您的控制台上打印10次。表数据与按钮单击事件无关。如果你看一下<strong class="kt ir"> addProduct() </strong>函数，没有任何代码。然而，<strong class="kt ir"> getRank </strong>()函数被调用了10次，即使我们没有调用或使用它。这是由于Angular的脏更改检测造成的。</li></ol><p id="5bf5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以如果我们在HTML中使用一个函数，那么这个函数会在每个活动中被调用，即使我们没有调用这个函数。这将产生性能问题。要解决这个问题，只需在HTML中使用管道的概念，而不是使用函数。</p><p id="8c02" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">使用管道:</strong></p><p id="fe9c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用下面的命令创建一个管道。</p><pre class="kg kh ki kj gt nc nd ne nf aw ng bi"><span id="591d" class="lo lp iq nd b gy nh ni l nj nk">ng g pipe rank</span></pre><p id="f4e7" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如下所示修改等级管道代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="b646" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后用rank管道代替getRank()函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mm mn l"/></div></figure><p id="0939" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，调用的等级将只打印5次。如果我按下按钮，那么肮脏的检查不会发生在Angular。使用管道解决了这个问题。</p><h2 id="d51b" class="lo lp iq bd lq lr ls dn lt lu lv dp lw la lx ly lz le ma mb mc li md me mf mg bi translated"><strong class="ak">结论</strong></h2><p id="a29d" class="pw-post-body-paragraph kr ks iq kt b ku mh jr kw kx mi ju kz la mj lc ld le mk lg lh li ml lk ll lm ij bi translated">在本教程中，我们已经看到了一个函数如何在Angular中引起性能问题，以及如何用管道来解决它。当我们学习新技术时，我们必须更加注意解决这类问题。所有的新技术都会有这类问题。我们不可能一开始就解决所有问题。然而，一旦我们对它有了一个稳定的理解，那么我们必须优化代码以更好的方式工作。</p><p id="3699" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读。我希望你觉得这很有用。</p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Modularize Code in Vanilla JavaScript using ‘import’ and ‘export’</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用“导入”和“导出”将普通JavaScript中的代码模块化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-modularize-code-with-vanilla-javascript-use-import-export-ce41c5481957?source=collection_archive---------0-----------------------#2021-11-18">https://javascript.plainenglish.io/how-to-modularize-code-with-vanilla-javascript-use-import-export-ce41c5481957?source=collection_archive---------0-----------------------#2021-11-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/29fe36352439f6378e77afe17acc7a55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ee3Io_2WdSYppEpbx1990A.png"/></div></div></figure><p id="18bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">简介</strong></p><p id="12dc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这篇博客中，我们将讲述如何使用关键字<code class="fe kt ku kv kw b">import</code>和<code class="fe kt ku kv kw b">export</code>来将一个普通的JavaScript项目模块化。最好的部分是我们将只使用纯HTML、CSS和JavaScript。没有<code class="fe kt ku kv kw b">node</code>或<code class="fe kt ku kv kw b">npm</code>，只是普通的老式JavaScript。</p><p id="c568" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，创建一个新的项目文件夹，文件结构如下:</p><pre class="kx ky kz la gt lb kw lc ld aw le bi"><span id="f31d" class="lf lg in kw b gy lh li l lj lk">my-project-name /─┐<br/> js/─┐<br/>     ┊ classes.js<br/>     ┊ selectors.js<br/>     ┊ main.js<br/> index.html<br/> style.css</span></pre><p id="c405" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">也许这一切中最好的部分就是它真的很容易做到。简单地把一个脚本放到你的HTML文档的<code class="fe kt ku kv kw b">&lt;head&gt;&lt;/head&gt;</code>中。</p><p id="6612" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意:<strong class="jx io">如果你只是想知道<em class="ll">如何做的答案，</em>复制并粘贴下面的代码片段。</strong></p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="6aad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了这个设置，我们现在可以在文件中使用<code class="fe kt ku kv kw b">import</code>和<code class="fe kt ku kv kw b">export</code>。</p><h1 id="7a85" class="lo lg in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">盒子创建者——编码。</h1><p id="ac93" class="pw-post-body-paragraph jv jw in jx b jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks ig bi translated">为了演示如何使用<code class="fe kt ku kv kw b">import</code>和<code class="fe kt ku kv kw b">export</code>，我们将创建一个盒子生成器，没什么特别的，只是一些简单的样式和一些基本代码。</p><p id="2ec3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，继续为您的<code class="fe kt ku kv kw b">style.css </code>文件设置一个样式表。您可以通过将以下内容添加到文档的<code class="fe kt ku kv kw b">&lt;head&gt;&lt;/head&gt;</code>中来实现。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="5376" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我添加一些基本的风格。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="293e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后将添加一些输入到我们的HTML文档以及一个按钮来创建所说的框。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><h1 id="2bc9" class="lo lg in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">现在来看看JavaScript</h1><p id="27d6" class="pw-post-body-paragraph jv jw in jx b jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks ig bi translated">现在我们有了一些样式，我们可以开始添加JavaScript了。在<code class="fe kt ku kv kw b">selectors.js</code>文件中，我们将放入以下内容。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="e86e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意我们是如何使用<code class="fe kt ku kv kw b">export</code>的。如果你不熟悉Webpack，关键字<code class="fe kt ku kv kw b">export</code>允许我们在文件上使用<code class="fe kt ku kv kw b">import</code>，然后是用户函数和变量等。重要的是要记住，如果你在一个值不是函数的变量上使用<code class="fe kt ku kv kw b">export</code>，这个变量将只有一个自身的实例。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="8e99" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我喜欢让我的代码尽可能的有条理，看起来也漂亮，所以我决定最好是把所有的选择器都放在一个文件里。当普通JavaScript中的项目变得更加广泛时，您将不得不在同一个元素上多次使用<code class="fe kt ku kv kw b">querySelector </code>,所以最好有一种只编写一次代码的方法。</p><p id="8009" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在在我们的<code class="fe kt ku kv kw b">classes.js</code>文件中，让我们为<code class="fe kt ku kv kw b">Box</code>创建一个定制的JavaScript对象，首先需要为所有的盒子和来自<code class="fe kt ku kv kw b">selectors.js</code>的<code class="fe kt ku kv kw b">createBox </code>函数<code class="fe kt ku kv kw b">import</code>创建一个数组。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="87ac" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">注意:</strong>因为我们没有使用Webpack，所以我们没有清除文件路径的简单方法。这意味着我们必须非常具体地说明我们使用的文件扩展名以及文件所在的目录。如果我们试着这样<code class="fe kt ku kv kw b">import</code>一个文件:</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="8ce0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们会被抛出一个错误。所以要确保你所有的导入看起来都是这样的，<code class="fe kt ku kv kw b">'./myfileLocation.whateeverExt'</code>如果你这样做了，你就准备好了。</p><p id="2cde" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">接下来，我们想要创建一个<code class="fe kt ku kv kw b">class</code>、<code class="fe kt ku kv kw b">Box</code>，它将接受一个<code class="fe kt ku kv kw b">name</code>、<code class="fe kt ku kv kw b">color</code>、<code class="fe kt ku kv kw b">height</code>和<code class="fe kt ku kv kw b">width.</code></p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="0f22" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这将允许我们拥有同一个对象的多个实例。请记住，我使用的是<code class="fe kt ku kv kw b">Math.random() </code>内置对象方法，因为在0和1之间有无限可能的数字，所以我们两次获得相同数字的可能性几乎为零。然而，这并不是生成<code class="fe kt ku kv kw b">ID</code>的好方法，如果您真的要将它存储在DB中，那么使用<code class="fe kt ku kv kw b">cuid NPM</code>包会更好。然而，我只是将它用于演示目的。</p><p id="3acc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要有一种方法将所有输入值添加到<code class="fe kt ku kv kw b">Box</code>类中。所以在<code class="fe kt ku kv kw b">main.js</code>文件中，让我们为此创建一个函数，并为我们的按钮添加一个<code class="fe kt ku kv kw b">eventListener</code>。</p><p id="5319" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">将<code class="fe kt ku kv kw b">classes.js</code>中的<code class="fe kt ku kv kw b">Box</code>和<code class="fe kt ku kv kw b"> import </code>中的<code class="fe kt ku kv kw b">class</code>以及所有的输入选择器、储盒元件，以及<code class="fe kt ku kv kw b">selectors.js</code>中的按钮。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="2032" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在将创建一个向DOM添加一个框的函数。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="db09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">并添加一个事件侦听器，该事件侦听器将在按钮被单击时使用该函数。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="e0b1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您会注意到，如果我们尝试并测试我们的代码，什么都不会工作，这是因为我们必须向我们的Box类添加一个实例方法。回到我们的<code class="fe kt ku kv kw b">classes.js</code>文件中，让我们将下面的代码添加到Box类中。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="f9fc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，回到main.js内部，我们可以使用我们的实例方法来初始化这个盒子。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="c385" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，为了结束代码，我们需要创建一个函数，将我们创建的每个框附加到DOM中。</p><figure class="kx ky kz la gt jo"><div class="bz fp l di"><div class="lm ln l"/></div></figure><p id="1684" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请记住，<code class="fe kt ku kv kw b">initBox</code>方法将<code class="fe kt ku kv kw b">div</code>元素推入box数组，我们从<code class="fe kt ku kv kw b">clasess.js.</code>导入<code class="fe kt ku kv kw b">boxes </code>数组</p><p id="a7b4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当该说的都说了，该做的都做了，我们应该能够成功地创建一个盒子，并给它一个名称、颜色、高度和宽度。</p><p id="1339" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">决赛成绩</p><figure class="kx ky kz la gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/7a9646d2b3812f9cc70e6df47477f0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*As82Sp859bRwCaBeVe7M4Q.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">Box Creator For Modular Vanilla JavaScript</figcaption></figure><h1 id="4803" class="lo lg in bd lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk bi translated">结论</h1><p id="8e47" class="pw-post-body-paragraph jv jw in jx b jy ml ka kb kc mm ke kf kg mn ki kj kk mo km kn ko mp kq kr ks ig bi translated">希望本教程在某种程度上对你有所帮助。这是有益的，特别是如果你被要求为未来的雇主创建一个普通的JavaScript项目，以证明你在不使用Webpack或Node的情况下模块化代码的技能。如果你对本教程有任何问题，或者有任何建议的编辑，我鼓励你留下评论，或者如果你有什么想让我进一步解释的细节。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Type Checking in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的类型检查</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/type-checking-in-react-f004d41b2ab6?source=collection_archive---------19-----------------------#2021-03-22">https://javascript.plainenglish.io/type-checking-in-react-f004d41b2ab6?source=collection_archive---------19-----------------------#2021-03-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b19e" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第1部分:用属性类型验证组件属性</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ad4f5fbdce792b934f323cb49be1f84b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dWfpUGUPFg2104tmPfm01Q.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@shimikumi32" rel="noopener ugc nofollow" target="_blank">Kumiko SHIMIZU</a> from: <a class="ae ks" href="https://unsplash.com/photos/SjcrpttvjiE" rel="noopener ugc nofollow" target="_blank">Unsplash</a>.</figcaption></figure><p id="35e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">JavaScript因其语法中没有类型符号而备受欺凌，如果你刚从C、Go或Pascal这样的编程语言中走出来，你会立即注意到这一点。因此，你会听到开发人员称JavaScript为弱类型语言。</p><p id="8ddb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">类型符号在编程语言的分类中有着强大的作用，每种语言都规定了它的类型规则应该是怎样的，是强还是弱。因此，我们称这种语言为弱类型或强类型语言，这是一个很长的故事，你可以在下面的链接中找到。</p><div class="lp lq gp gr lr ls"><a href="https://thevaluable.dev/type-system-explained/" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab fo"><div class="lu ab lv cl cj lw"><h2 class="bd io gy z fp lx fr fs ly fu fw im bi translated">举例说明类型系统</h2><div class="lz l"><h3 class="bd b gy z fp lx fr fs ly fu fw dk translated">"我的语言更好，因为它有一个强大的类型系统！"您的同事开发人员Dave尖叫道，他试图推动…</h3></div><div class="ma l"><p class="bd b dl z fp lx fr fs ly fu fw dk translated">the value . dev</p></div></div><div class="mb l"><div class="mc l md me mf mb mg km ls"/></div></div></a></div><p id="1a17" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如前所述，JavaScript是弱类型的，这一点从其声明变量的方式中可以明显看出，为了解决JavaScript中没有强类型系统的问题，微软创建了TypeScript，这是JavaScript的一个类型化版本。</p><p id="48ff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，我们可以选择从头开始使用TypeScript构建我们的项目，或者我们可以选择将TypeScript添加到现有的项目中，如果项目是使用JavaScript库构建的，这将采取一些进一步的步骤，例如，React。</p><p id="7448" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于像React这样的库，我们可以通过使用另一个解决方案而不是TypeScript来克服添加类型标记的这些步骤，这不是一个实用的解决方案，但它将在开发过程中帮助您，这将增强您的开发体验。</p><p id="65fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因为React eco-system完全是关于组件的，所以类型验证将与我们赋予组件属性的值相关，为此，我们将使用prop-types包。</p><p id="61e7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">那么我们还在等什么呢？让我们启动react应用程序。</p><blockquote class="mh mi mj"><p id="203a" class="kt ku mk kv b kw kx jo ky kz la jr lb ml ld le lf mm lh li lj mn ll lm ln lo ig bi translated"><strong class="kv io">注</strong>:</p><p id="c4db" class="kt ku mk kv b kw kx jo ky kz la jr lb ml ld le lf mm lh li lj mn ll lm ln lo ig bi translated"><em class="in">我不会从头开始告诉你如何安装/使用react，如果你不熟悉React，这篇文章可能对你没用。</em></p><p id="8dea" class="kt ku mk kv b kw kx jo ky kz la jr lb ml ld le lf mm lh li lj mn ll lm ln lo ig bi translated"><em class="in">在本文中，我们的React项目是使用</em> create-react-app <strong class="kv io"> </strong>工具创建的。</p></blockquote></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="5b03" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">作为React开发人员或刚刚开始React之旅的人，您应该已经知道如何安装一个包，以及如何在项目中使用它。让我们从安装<a class="ae ks" href="https://www.npmjs.com/package/prop-types" rel="noopener ugc nofollow" target="_blank">道具类型</a>包开始..</p><p id="bfec" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">启动React项目后，打开机器中的命令行界面或VsCode中的终端，然后移动到React项目的根目录，并键入下面的命令，命令可能会改变，这取决于您使用的包管理器，在本例中，我使用的是npm。</p><p id="b55c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mv mw mx my b">npm install --save prop-types.</code></p><p id="ae43" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">完成安装需要一段时间，然后在编辑器中打开React项目，进入。/src "目录，像往常一样，我们将依赖于两个文件，app.js和index.js。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/5c2977d5aad7a1338fd5b87f9e9538d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6BcS3zwGvpQdgIUBFZBRjA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Index.js and app.js files</figcaption></figure><p id="46ef" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">“src”目录中的其他文件无关紧要，我们不打算构建任何awe UI，我们的重点将只是传递给组件属性的内容，此外，剖析我们的属性具有什么类型的值，这很像处理HTML表单中的字段验证。</p><h1 id="5571" class="na nb in bd nc nd ne nf ng nh ni nj nk jt nl ju nm jw nn jx no jz np ka nq nr bi translated"><strong class="ak">建筑构件</strong></h1><p id="a58c" class="pw-post-body-paragraph kt ku in kv b kw ns jo ky kz nt jr lb lc nu le lf lg nv li lj lk nw lm ln lo ig bi translated">现在我们将构建一个接受六个属性的简单组件，这些属性的类型将使用prop-types包中的属性类型验证器进行验证。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">App.js</figcaption></figure><p id="0c29" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面的例子展示了一个接受六个属性的功能组件，每个属性都有一个指定的类型，我们的组件将用一个基本的HTML标记来呈现每个属性。您一定注意到了，我们在代码的第二行导入了prop-types包。</p><p id="1c9b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面这六个属性代表了JavaScript中最基本的类型。在我们代码的最后九行中，您将看到指定组件属性是否应该接受字符串、数字或布尔数据类型所必需的验证器。</p><h1 id="6fb7" class="na nb in bd nc nd ne nf ng nh ni nj nk jt nl ju nm jw nn jx no jz np ka nq nr bi translated">使用道具类型</h1><p id="e672" class="pw-post-body-paragraph kt ku in kv b kw ns jo ky kz nt jr lb lc nu le lf lg nv li lj lk nw lm ln lo ig bi translated">乍一看，使用prop-types包似乎很奇怪和令人困惑，因此，要理解这个过程，你必须记住两件事:</p><ul class=""><li id="0008" class="nz oa in kv b kw kx kz la lc ob lg oc lk od lo oe of og oh bi translated">我们有一个<strong class="kv io"> </strong> <code class="fe mv mw mx my b">propTypes</code>属性，它是一个静态的类属性，本质上它是一个指定我们的组件属性应该接受哪种类型的值的对象。</li><li id="9b3e" class="nz oa in kv b kw oi kz oj lc ok lg ol lk om lo oe of og oh bi translated">我们有来自prop-types包的<code class="fe mv mw mx my b">PropTypes</code>对象，这个对象中的每个属性充当一个特定类型的验证器。</li></ul></div><div class="ab cl mo mp hr mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ig ih ii ij ik"><p id="11db" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在index.js文件中，我们将通过向组件提供六个不同类型的参数(属性)来测试我们的组件。</p><p id="26e1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">向函数传递多个参数的最佳方法是将它们封装为一个对象中的属性，因此我们将使用两个对象，一个具有有效属性，另一个具有无效属性，然后我们将它们传递给我们的组件。下面是<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/index.js"> index.js </a>文件的样子。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nx ny l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Index.js</figcaption></figure><p id="c3af" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们看看这里发生了什么，我们像往常一样从react-dom导入了render方法，然后我们导入了App组件，接下来我们创建了一个名为renderComp的函数，它接受一个将被传递给App组件的参数，然后render方法将处理一切。</p><p id="f213" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里的目标是使用不同的参数多次调用renderComp，每个参数将作为属性传递给应用程序组件，我们前面谈到的两个对象将重新组合这些参数。</p><p id="e372" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">仔细查看validProps和inValidProps对象的属性，您会发现每个属性名称都代表JavaScript中的一个原始值，第一个对象保存正确的值，第二个保存不正确的值，呈现输出将如下所示。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/32f0d721e9a0bacb195feadf0011b9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aA7Bqrxf6pm-mC6Qb6X9lA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The render out put for the first object.</figcaption></figure><p id="e15d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">然而，5秒钟后，React将向您显示一个错误，您将在控制台输出中看到类似这样的内容:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mz"><img src="../Images/278dbaf3939681218d5e3b53058fd8b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TnPlCI0u_EjUXrx06zB76g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">The result of passing invalid properties the compoent.</figcaption></figure><p id="af4a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在index.js文件的最后一行中，我使用了<em class="mk"> </em> <code class="fe mv mw mx my b">setTimeout</code> <strong class="kv io"> </strong>方法，该方法将在5秒钟后运行renderComp函数，但这次是使用invalidProps对象，这将导致一个错误，因为该对象中的属性为每种类型保存了错误的值。</p><p id="547f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于最后一个错误，您将看到React是如何抱怨传递给func属性的无效函数的。</p><h1 id="7006" class="na nb in bd nc nd ne nf ng nh ni nj nk jt nl ju nm jw nn jx no jz np ka nq nr bi translated">最后</h1><p id="e42f" class="pw-post-body-paragraph kt ku in kv b kw ns jo ky kz nt jr lb lc nu le lf lg nv li lj lk nw lm ln lo ig bi translated">prop-type包是验证组件属性的最直接的方法之一。这种方法的缺点是它不能在生产模式下运行，但是在开发模式下它可以正常工作。</p><p id="424a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">发现已经传递了哪种类型的值并不重要，因为发现值被准确地传递到哪里并不重要，在调试期间，发现错误发生的位置将对您非常有用，所以在将项目交付生产之前，请尝试修复每个错误。</p><h1 id="d0e4" class="na nb in bd nc nd ne nf ng nh ni nj nk jt nl ju nm jw nn jx no jz np ka nq nr bi translated">下一步是什么？</h1><p id="9bb8" class="pw-post-body-paragraph kt ku in kv b kw ns jo ky kz nt jr lb lc nu le lf lg nv li lj lk nw lm ln lo ig bi translated">在下一篇关于React with<a class="ae ks" href="https://www.npmjs.com/package/prop-types" rel="noopener ugc nofollow" target="_blank">prop-types</a>包中的类型检查的文章中，您将学习如何处理任何属性值，以及指定该属性是必需的还是可选的。</p></div></div>    
</body>
</html>
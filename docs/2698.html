<html>
<head>
<title>Angular Notification Service with Subject and Observable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有主题和可观察对象的角度通知服务</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/notification-service-using-subject-observable-angular-3cefbde48860?source=collection_archive---------9-----------------------#2021-06-03">https://javascript.plainenglish.io/notification-service-using-subject-observable-angular-3cefbde48860?source=collection_archive---------9-----------------------#2021-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9dab6ec2b9058414d67cd75bcdeebace.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*33HFemXQ6NpyMnD6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@clarktibbs?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clark Tibbs</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4ed4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通知服务是每个应用程序中最常见的服务之一。它允许用户接收与他们相关的实时信息。</p><blockquote class="ky kz la"><p id="9711" class="ka kb lb kc b kd ke kf kg kh ki kj kk lc km kn ko ld kq kr ks le ku kv kw kx ig bi translated">我将演示一个使用RXJS主题和可观察对象的通知服务的实现。</p></blockquote><p id="c2f5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是首先，<strong class="kc io">我们为什么需要主语？为什么是可观察的？我们应该如何得到通知？</strong></p><p id="8e43" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">先举个简单的例子。</p><p id="1ce1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设你已经注册了某个杂志。所以，你希望得到所有出版的杂志，但是这个机制是如何运作的呢？</p><p id="85e3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先，当我们刚刚注册那本杂志时，我们订阅或提供了详细信息，如我们获取杂志的地址或我们的电子邮件地址，以防它是杂志办公室或网站的数字地址。</p><p id="d051" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，该杂志的公司有一份阅读该杂志并希望得到每一份新杂志的人的名单。</p><p id="2c46" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当一本新杂志出版时，公司会通知每一个注册用户，并发送一本刚出版的新杂志。</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><p id="fc7a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">那么，<strong class="kc io">我在这个例子中试图说明什么呢？</strong></p><p id="5e27" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">杂志公司是<strong class="kc io">科目。</strong>它控制杂志的内容，就像示例中一样，它保存出版的杂志。</p><p id="6f47" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">公司还允许我们观察新的变化，它允许我们注册变化，得到通知——这是可观察的<strong class="kc io"/>。</p><p id="4a42" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，每个注册获得一份拷贝的人，实际上是——<strong class="kc io">订阅</strong>。</p><p id="c5df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，让我们看一些代码并检查一下:</p><figure class="lm ln lo lp gt jo"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="b9ee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">哦，这是怎么回事？</p><p id="46f4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经创建了一个服务，其中包含一个主题。<br/>主题就像公司的杂志，它为新的东西获取价值并持有它。<br/>我们不想在外面暴露这个主题，除了这个服务，其他任何服务或者系统的任何部分都不应该接触这个主题。<br/>我们通过获取返回可观察字符串的方法‘notification $’来公开监视或注册变更的能力。</p><p id="3d67" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">好的，我明白了，但是我如何使用它呢？</p><p id="3bb1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对于每个需要更新通知的服务、组件或系统的任何部分，只需注入服务并调用“setNewNotification”方法。<br/>这个方法负责更新我们的Subject，然后通知任何观察者某些东西被改变了，以及改变本身。</p><figure class="lm ln lo lp gt jo"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="a30e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的代码中，我们订阅了通知，在插图中，它是为杂志公司注册的人。</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><h1 id="0487" class="ls lt in bd lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp bi translated">总之:</h1><p id="ab7b" class="pw-post-body-paragraph ka kb in kc b kd mq kf kg kh mr kj kk kl ms kn ko kp mt kr ks kt mu kv kw kx ig bi translated">我们已经创建了一个简单的通知服务，服务于或者可以服务于系统中的许多地方，我们所要做的就是订阅更改(不要忘记取消订阅😜).</p><p id="3d6d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们使用以下内容构建了通知服务:</p><p id="51fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> Subject </strong> - &gt;持有值，流本身。保持它的私有性非常重要，因为我们不希望任何人处理流本身。</p><p id="972d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">可观察</strong> - &gt;允许注册获取一些更新。订阅者从服务外部获得通知的入口点。</p></div><div class="ab cl lf lg hr lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ig ih ii ij ik"><p id="36fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望你喜欢读这篇文章！可以随意留下一些评论。</p><p id="3523" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lb">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lb">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
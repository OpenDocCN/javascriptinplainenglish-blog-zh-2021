<html>
<head>
<title>3 reasons why your website’s JavaScript might not run like you expect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你的网站的JavaScript不能像你期望的那样运行的3个原因</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/3-reasons-why-your-websites-javascript-might-not-run-like-you-expect-b9fe66f75e7e?source=collection_archive---------7-----------------------#2021-08-31">https://javascript.plainenglish.io/3-reasons-why-your-websites-javascript-might-not-run-like-you-expect-b9fe66f75e7e?source=collection_archive---------7-----------------------#2021-08-31</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/76eefadb720ee3fda0876c6e7aa2e128.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TZCWfdsfcBIxMGtFphzzVg.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@andrewtneel?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Andrew Neel</a> on <a class="ae kc" href="https://unsplash.com/s/photos/website-error?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1d09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我最近在帮助一个正在学习建立网站的人，并且正在寻找一些有用的资源与他们分享，这时我看到了凯瑟琳·霍奇的这篇文章:</p><div class="ld le gp gr lf lg"><a href="https://medium.com/@blondiebytes/how-to-create-interactive-websites-with-javascript-627a6d998fed" rel="noopener follow" target="_blank"><div class="lh ab fo"><div class="li ab lj cl cj lk"><h2 class="bd ir gy z fp ll fr fs lm fu fw ip bi translated">如何用JavaScript创建交互式网站</h2><div class="ln l"><h3 class="bd b gy z fp ll fr fs lm fu fw dk translated">了解如何使用JS使静态网站具有交互性</h3></div><div class="lo l"><p class="bd b dl z fp ll fr fs lm fu fw dk translated">medium.com</p></div></div><div class="lp l"><div class="lq l lr ls lt lp lu jw lg"/></div></div></a></div><p id="0c89" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在建议他们检查一下之后，他们说他们发现这非常有帮助，因为他们真的很喜欢Kathryn通过在页面上添加JavaScript来说话的方式。</p><p id="0c88" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">他们真的很喜欢如何使用JavaScript来增加交互性，当我们交谈时，我提到他们不应该总是依赖它，因为有时它并不总是可用的。</p><p id="5330" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这引发了一场关于当JavaScript由于网络问题或者甚至当用户主动禁用JavaScript时会发生什么的长时间讨论，这也启发我写了这篇文章，列出了JavaScript可能无法在用户浏览器中运行的三个原因。</p><h1 id="6e43" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">为什么您的JavaScript不能在用户浏览器中运行？</h1><p id="bdd4" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">首先，让我们更详细地了解一下为什么您编写的JavaScript可能无法被您的用户浏览器执行。</p><p id="94e4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然JavaScript可能无法执行的原因有很多，但大多数原因可以归为三个不同的类别:</p><h2 id="603e" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">用户在其浏览器中禁用了JavaScript。</h2><p id="c0ab" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在这个场景中，用户(或者他们的IT部门)已经做出了禁用JavaScript的明智决定。最常见的原因是对安全性的担忧，尤其是在旧式浏览器中，JavaScript的沙箱也没有实现。</p><p id="d41c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，这是用户做出的选择，如果你在reddit 上看到<a class="ae kc" href="https://www.reddit.com/r/webdev/comments/c0bbhr/should_we_continue_developing_for_users_without/" rel="noopener ugc nofollow" target="_blank">这个帖子，你是否应该支持这些用户可能是一个有争议的话题。不支持这些用户的最常见的理由是，他们已经选择禁用开发人员需要依赖的核心平台功能。</a></p><p id="62b9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">虽然我个人认为在一定程度上支持这些用户是有意义的，但这不会是我选择支持没有JavaScript的用户的主要原因。</p><h2 id="3a32" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">用户浏览器在呈现您的页面时失去连接，JavaScript无法下载</h2><p id="0d62" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在第二个场景中，想象一下你的用户在火车上，他们的互联网连接很糟糕，他们设法下载了你的网站的HTML和CSS，但是他们没有下载你的JavaScript。</p><p id="6697" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">作为一名用户，这种情况已经发生过很多次了，在我下班回家的路上，我的火车开进了隧道。如果页面完全依赖JavaScript运行，我通常会发现在这种情况下，网站会变得完全不可用。如果页面本质上是信息性的，并且不依赖于JavaScript，我至少可以在等待我的连接再次可用时阅读内容，这样网站就不会在这种情况下完全崩溃。</p><h2 id="961b" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">JavaScript中的异常导致JavaScript无法执行。</h2><p id="efbc" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在最后一个场景中，用户的浏览器已经下载了包括JavaScript在内的所有资源，但是一个异常导致JavaScript停止执行。</p><p id="e7cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">用户可能会遇到JavaScript异常的原因有很多，其中包括:</p><ul class=""><li id="03e1" class="nk nl iq kf b kg kh kk kl ko nm ks nn kw no la np nq nr ns bi translated">网站JavaScript正在使用其浏览器不支持的JavaScript API</li><li id="5617" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">第三方依赖项(如Google Analytics)没有加载，主JavaScript在引用它时出错</li><li id="348e" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">开发人员将应用程序的不完整版本部署到生产环境中(我们都经历过，不要担心)</li><li id="d104" class="nk nl iq kf b kg nt kk nu ko nv ks nw kw nx la np nq nr ns bi translated">应用程序逻辑中的边缘情况可能会导致意外错误</li></ul><p id="bbe5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这种情况下，除了用手指交叉刷新页面之外，用户没有办法自己解决问题。它们可能是开发人员发现问题并解决问题的突发奇想。</p><h1 id="a563" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">如果没有JavaScript，你能做些什么来支持用户呢？</h1><p id="73ee" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">现在我们了解了哪些情况会导致您的JavaScript无法在您的用户浏览器中执行，让我们看看在这些情况下您可以做些什么。</p><h2 id="8f14" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">与JavaScript实现相比，更喜欢使用浏览器实现特性</h2><p id="a66b" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">在没有JavaScript的情况下，处理好站点的第一种方法是依赖浏览器的功能实现，然后逐步增强以添加额外的功能。</p><p id="c6a3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一个很好的例子就是表单验证，因为HTML5在2014年完成，我们有一种方法可以直接在用户浏览器中进行表单验证。完整的文档可以在MDN上找到(<a class="ae kc" href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation" rel="noopener ugc nofollow" target="_blank">https://developer . Mozilla . org/en-US/docs/Learn/Forms/Form _ validation</a>)</p><figure class="nz oa ob oc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ny"><img src="../Images/698edfac4b61d067702d038b916d93ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jz5bFXq_j9zxVf-FgiBebg.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Example of a required field with HTML5 validation</figcaption></figure><p id="9754" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在您对没有JavaScript的工作方式感到满意之后，您可以用JavaScript增加内置的验证功能，使其更符合您和您的团队的需求。这意味着，只要您的表单请求也能被您的服务器处理，即使JavaScript不可用，表单也能很好地工作。</p><h2 id="4c0a" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">在浏览器中禁用JavaScript的情况下进行测试</h2><figure class="nz oa ob oc gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi od"><img src="../Images/3f535b89573abb7873fd62c7447f9555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9O1MED25GefJQxhcOoRa8w@2x.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Google Chrome screenshot of the disable JavaScript dialog.</figcaption></figure><p id="6e2c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">支持没有JavaScript的用户的另一种方法是自己测试你的网站，这样你就可以看到在这种情况下什么是行不通的。</p><p id="d331" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">出于测试目的，大多数主流浏览器都支持禁用开发工具中的JavaScript。以Chrome为例(如上图),你可以在Devtools的settings标签中找到设置。</p><p id="896e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦您禁用了JavaScript，您可以重新加载页面，它将加载没有JavaScript。然后你应该像平常一样测试你的网站，检查你的链接是否还能正常工作，用户是否还能提交你的表单等等。</p><h2 id="54af" class="my lw iq bd lx mz na dn mb nb nc dp mf ko nd ne mj ks nf ng mn kw nh ni mr nj bi translated">当某些东西可能不工作时告诉用户</h2><p id="85f1" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">最坏的情况是你的网站上有一些功能是不可能提供后备的，在这种情况下，最好的选择是让他们知道哪里出了问题，以及他们如何自己解决问题。</p><p id="829a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于那些禁用了JavaScript的人来说，这相当简单，因为您可以使用<code class="fe oe of og oh b">&lt;noscript&gt;</code>标签来显示消息。</p><p id="604f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">对于那些启用了JavaScript的用户来说，这个问题通常会更难解决，检测他们的was问题也会更难。您可以尝试的一个技巧是在HTML文档中内嵌一点JavaScript，它会显示一条消息，提示加载应用程序时出错。告诉用户如何尝试自己解决问题(通常是刷新或清除cookies本地存储)，或者如何寻求支持帮助。</p><h1 id="04d8" class="lv lw iq bd lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms bi translated">概括起来</h1><p id="5e71" class="pw-post-body-paragraph kd ke iq kf b kg mt ki kj kk mu km kn ko mv kq kr ks mw ku kv kw mx ky kz la ij bi translated">正如我们所看到的，在很多情况下，用户可能会体验到没有JavaScript的站点。在这种情况下，你应该至少提供一个基本的体验，让你的用户仍然能够使用你的网站。</p><p id="01eb" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有些情况下，没有JavaScript就无法提供任何体验，比如桌面替代应用，如Google Docs或GitHub CodeSpaces。在这些情况下，重要的是向用户提供清楚的消息，告诉他们如果出错会发生什么，如果可能的话，使用像service worker这样的技术来允许后续的页面加载已经有可用的JavaScript。</p><p id="f83f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="oi">更多内容尽在</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="oi">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
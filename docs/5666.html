<html>
<head>
<title>Here’s a Quick Way to Save User Data Without Cookies (using JavaScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">这里有一个不用Cookies保存用户数据的快速方法(使用JavaScript)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/heres-a-quick-way-to-save-user-data-without-cookies-43da04327f3?source=collection_archive---------1-----------------------#2021-11-28">https://javascript.plainenglish.io/heres-a-quick-way-to-save-user-data-without-cookies-43da04327f3?source=collection_archive---------1-----------------------#2021-11-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="7218" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">学会用几行简单的JavaScript保存用户数据！</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/d0375f41ed14e8e966cec095fee39411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BkjUXNzaLRd09P1-"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://www.instagram.com/szvinsta/" rel="noopener ugc nofollow" target="_blank">Szabo Viktor</a></figcaption></figure><p id="9e95" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你有一个网站，你可能会很快意识到你想收集网站访问者的数据。他们是如何使用你的网站的？他们在使用什么功能？他们有什么偏好？或者甚至像用户的名字是什么这样的基本问题？</p><p id="8185" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">通过收集这些数据，您可以个性化用户的体验，根据他们的需求定制网站，并使整体体验变得非常棒，令人难忘。此外，您还可以更好地确定在您的站点上可以展示哪些类型的功能或内容是您的用户真正想要的。</p><p id="0220" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，想象你构建了一个有二十个不同关卡的网页游戏。如果你的网页存储了用户已经完成的级别，那不是很好吗？因此，如果用户再次访问，他们将不必重新开始？</p><p id="dac8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">或者，如果你使用GitHub、脸书或Twitter等平台，用户可以选择亮模式或暗模式。如果网页能记住你的个性化选择，那就太好了，这样你就不必每次访问网站时都调整它们。</p><p id="d5a9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">幸运的是，开发人员有一些工具可以做到这一点:cookies、localStorage和sessionStorage。今天，我们将讨论本地存储和会话存储。</p><h1 id="c3eb" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">什么是localStorage和sessionStorage？</h1><p id="edc1" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">localStorage和sessionStorage是Web存储API提供的非常简单的工具。这个API允许web应用程序在用户的浏览器中存储数据，而无需使用服务器或cookies。</p><p id="00c0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用localStorage，web应用程序可以在开发人员定义的一段延长的时间内存储高达10mb的数据。因此，如果用户关闭浏览器窗口或标签，重新启动计算机，或关闭计算机，收集的数据将继续存在。只有到了到期日期、浏览器缓存被清除或者web应用程序本身清除了数据，这些数据才会被删除。</p><p id="e1f0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">相比之下，sessionStorage最多可以存储5兆字节的数据，并且只要选项卡打开，数据就会存在。因此，如果您关闭标签，即使窗口仍然存在，您也会丢失数据。</p><h1 id="e84e" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">你需要知道的重要细节</h1><p id="3404" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">在进入实际实现之前，强调这一点很重要:</p><blockquote class="mc"><p id="6035" class="md me in bd mf mg mh mi mj mk ml kh dk translated">这个API允许web应用程序在用户的浏览器中存储数据，而无需使用服务器或cookies</p></blockquote><p id="312f" class="pw-post-body-paragraph jk jl in jm b jn mm jp jq jr mn jt ju jv mo jx jy jz mp kb kc kd mq kf kg kh ig bi translated">localStorage和sessionStorage关心您正在使用的浏览器。他们正在你的浏览器中保存数据。因此，如果你用不同的浏览器访问同一个网站，比如Google Chrome和Mozilla Firefox，这个网站将不会访问相同的本地存储对象。对吗？换句话说，例如Firefox无法访问谷歌Chrome浏览器收集的数据。</p><p id="1a1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">此外，在讨论浏览器时，重要的是要注意localStorage和sessionStorage并不与每个浏览器的每个版本兼容。在<a class="ae ky" href="https://www.w3schools.com/html/html5_webstorage.asp" rel="noopener ugc nofollow" target="_blank"> W3Schools </a>上检查兼容性。</p><p id="a63c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，了解收集的数据在属于特定领域的所有网页之间共享也是必要的。例如，即使数据是在主页上收集的，属于该域的所有网页都可以访问该数据。</p><h1 id="28d8" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">履行</h1><p id="51bc" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">实现非常简单。不需要导入或链接任何东西。只需创建一个JavaScript文件就可以开始了。</p><p id="a6a8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以存储数据的方式是使用键值对。键本质上是定义数据的可读名称，值就是数据。例如，关键字可以是“姓名”、“年龄”和“操作系统”。并且这些值分别可以是“凯尔”、“21”和“视窗”。当然，您可以创建任何想要的键和值。只要确保你收集的数据是有意义的，并且是有目的的。</p><h2 id="11fb" class="mr la in bd lb ms mt dn lf mu mv dp lj jv mw mx ln jz my mz lr kd na nb lv nc bi translated">创建条目</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/b10afa7da65076e26e777d31526011b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fAsdcJ5JgJlUTfMkgFfU5Q.png"/></div></div></figure><p id="7cd4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">上面的示例代码提供了三种不同的方法来创建数据条目——所有这些都用键值对来表示。在这个示例代码中，我们创建了一个名为“name”的键，并赋予它值“Kyle”。</p><p id="653f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在前两种方法中，我们使用函数setItem()来创建数据条目。在创建数据条目的第一种方法中，我们将变量传递给函数。在第二个方法中，我们传递字符串文字。两者的工作方式完全相同。</p><p id="4411" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第三种方法中，我们没有使用setItem()函数。这是它的一般格式:</p><pre class="kj kk kl km gt ne nf ng nh aw ni bi"><span id="8aea" class="mr la in nf b gy nj nk l nl nm">localStorage.keyName = keyValue;</span></pre><p id="207f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第三种方法中，我们使用点符号。记住，localStorage是一个JavaScript对象，这就是为什么它是可能的。更多关于物体的信息，请查看<a class="ae ky" href="https://www.freecodecamp.org/learn/javascript-algorithms-and-data-structures/basic-javascript/build-javascript-objects" rel="noopener ugc nofollow" target="_blank"> FreeCodeCamp </a>。</p><p id="dea8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">同样，这三种不同的方法将以键值对的格式创建数据条目。然而，以上三种方法不仅仅可以创建数据条目。他们还可以更新数据条目。</p><p id="1365" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">事情是这样的:当你创建一个数据条目时，你需要一个键。例如，让我们假设您的键是“name”。如果该键已经存在并且有一个值，它将简单地覆盖以前的值。如果键不存在，它将简单地创建一个新的键-值对。</p><p id="c6c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，在继续阅读数据条目之前，我们必须快速强调键和值是字符串这一事实。它们不能是整数、浮点数、布尔值或任何类似的东西。它们必须是字符串。</p><h2 id="c07f" class="mr la in bd lb ms mt dn lf mu mv dp lj jv mw mx ln jz my mz lr kd na nb lv nc bi translated">读取条目</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/9983906d5af118dccd1b74c5a2b14fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6p28DTVDLbjbTdm9Jd3KQ.png"/></div></div></figure><p id="0557" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上一节中，我们讨论了setItem()函数。现在，我们有了getItem函数。这个函数接受一个参数，这个参数是键，它返回键的值。</p><p id="7c81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的例子中，我们想要获得“name”键的值，并将该值存储在变量名中。上面的示例代码展示了两种不同的方法。</p><h2 id="30e7" class="mr la in bd lb ms mt dn lf mu mv dp lj jv mw mx ln jz my mz lr kd na nb lv nc bi translated">删除条目</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/833e5a793f2e161b2e44db0938a0404d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JxXSIY2fB7jEYAhRkDDcg.png"/></div></div></figure><p id="f2fc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，我们介绍removeItem()函数。removeItem函数接受一个参数—也就是键。如果该项存在，它将被删除。</p><p id="7d5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在第二行代码中，我们引入了另一种方法。我们使用删除操作符来删除“name”。同样，这是允许的，因为localStorage是一个对象，“name”是一个属性，delete操作符专门用于从对象中删除属性。在MDN Web文档上阅读关于<a class="ae ky" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/delete" rel="noopener ugc nofollow" target="_blank">删除操作符</a>的更多信息。</p><p id="dab3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您想删除所有数据条目，您可以使用:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nd"><img src="../Images/6a0c0ab372cbb3b0bf8c180257a720cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SUeqIUeJ2wbu0rhIdx8uTw.png"/></div></div></figure><h2 id="c494" class="mr la in bd lb ms mt dn lf mu mv dp lj jv mw mx ln jz my mz lr kd na nb lv nc bi translated">会话存储</h2><p id="6534" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">在本教程中，可以看到所有的例子都使用了localStorage。如果您想使用sessionStorage，只需换出localStorage。</p><h1 id="5535" class="kz la in bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw bi translated">谷歌开发工具</h1><p id="f416" class="pw-post-body-paragraph jk jl in jm b jn lx jp jq jr ly jt ju jv lz jx jy jz ma kb kc kd mb kf kg kh ig bi translated">既然您已经知道如何在localStorage和sessionStorage中保存数据，您可能希望看到JavaScript代码实际工作的可见确认。我们可以使用谷歌开发工具做到这一点。</p><p id="a24e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">首先，右键点击检查</strong>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nn"><img src="../Images/ad29bdde6974aa5cabad13428c4c48c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*ibPq49LBBz2vqHPHPH8Yeg.png"/></div></figure><p id="f705" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">在顶部面板中找到应用程序选项卡。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/4bf5bb0e8b7262c38d4f4f343fafdb7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkHa7ikgeT0Q3t0vYv6nKA.png"/></div></div></figure><p id="37fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">在左侧面板的“存储”部分，您应该会看到“本地存储”和“会话存储”。</strong>点击您使用的任何一个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi no"><img src="../Images/e0d76770956bed41000e3be7fc41ceed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9KG4Be7tx99Wu7eTd-Ufg.png"/></div></div></figure><p id="1bd7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您应该会看到保存的数据以键值对的形式组织起来。</p><p id="e695" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="np">更多内容请看</em><strong class="jm io"><em class="np"/></strong><a class="ae ky" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="np">说白了. io </em> </strong> </a> <em class="np">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="np">免费周报在这里</em> </strong> </a> <em class="np">。</em></p></div></div>    
</body>
</html>
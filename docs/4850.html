<html>
<head>
<title>TypeScript Tip: Convert an Array of Strings into a String Literal Union Type</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript提示:将字符串数组转换为字符串联合类型</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-tip-convert-an-array-of-strings-into-a-string-literal-union-type-ee46c2c6e337?source=collection_archive---------6-----------------------#2021-09-29">https://javascript.plainenglish.io/typescript-tip-convert-an-array-of-strings-into-a-string-literal-union-type-ee46c2c6e337?source=collection_archive---------6-----------------------#2021-09-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="e803" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用“const”断言和索引访问类型</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/ca750aa12f08fcfdadf7dd8726b1553e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ntBr35EriQw4FuEo"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@mayank_dimri?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">MAYANK D</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e6c4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">前几天编写代码时，我遇到了一个打字难题。我想把一个字符串数组转换成一个字符串联合类型。</p><p id="6a23" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">换句话说，我想拍这个:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="5a4d" class="lx ly iq lt b gy lz ma l mb mc">const languages = ["English", "Japanese", "Spanish"];</span></pre><p id="bb4d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">把它变成这样:</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="eef3" class="lx ly iq lt b gy lz ma l mb mc">type Language = "English" | "Japanese" | "Spanish";</span></pre><p id="869a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当然，我可以直接硬编码一个新的类型，但是我知道必须有一个更好的方法来实现这一点。</p><p id="7c49" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">经过几分钟的谷歌搜索，我找到了答案，并取得了我想要的结果。然而，我并不真正理解它是如何或为什么工作的。我后来回到这个问题，并对这个解决方案做了一些调查。</p><p id="b515" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解如何将字符串数组转换为字符串联合类型。</p></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="04dd" class="mk ly iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">TL；灾难恢复解决方案</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/ed193c1e231956c118f98e0c7d0b6ac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z1rS5OOPB4DOtmBN_7ZzCQ.png"/></div></div></figure><p id="a692" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这可能一开始看起来很混乱，所以让我们一行一行地分解它。</p><h2 id="b829" class="lx ly iq bd ml nc nd dn mp ne nf dp mt lf ng nh mv lj ni nj mx ln nk nl mz nm bi translated">“常量”断言</h2><p id="eec5" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">在TypeScript 3.4中，他们引入了<code class="fe ns nt nu lt b">const</code>断言。当断言一个类型时，它与任何其他类型名称一样使用。</p><p id="b752" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当使用<code class="fe ns nt nu lt b">const</code>断言时，您告诉TypeScript以下内容:</p><ul class=""><li id="52d7" class="nv nw iq ky b kz la lc ld lf nx lj ny ln nz lr oa ob oc od bi translated">该表达式中的任何文字类型都不应被加宽</li><li id="165e" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">对象文字得到<code class="fe ns nt nu lt b">readonly</code>属性</li><li id="be54" class="nv nw iq ky b kz oe lc of lf og lj oh ln oi lr oa ob oc od bi translated">数组文字获取<code class="fe ns nt nu lt b">readonly</code>属性</li></ul><p id="fe53" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的例子中，我们采用了一个字符串数组，并添加了<code class="fe ns nt nu lt b">const</code>断言。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="5a60" class="lx ly iq lt b gy lz ma l mb mc">const languages = ["English", "Japanese", "Spanish"] as const;</span></pre><p id="c246" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，数组将具有<code class="fe ns nt nu lt b">readonly</code>属性，我们不能修改它。例如，如果我试图向数组中添加一个新元素或者重新分配任何元素，我们将会得到一个错误。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oj"><img src="../Images/993db08a1353c18e34f1dbe920ef4c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5UN96qUz9JlbfxZ0wPpyA.png"/></div></div></figure><p id="d9ac" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为这个数组有<code class="fe ns nt nu lt b">readonly</code>属性，TypeScript知道它不会改变。这将导致编译器推断值的最窄类型。因此，不是每个元素都有一个类型<code class="fe ns nt nu lt b">string</code>，类型将缩小到元素的值。</p><p id="6f74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，第一个元素的类型将是<code class="fe ns nt nu lt b">"English"</code>，第二个元素的类型将是<code class="fe ns nt nu lt b">"Japanese"</code>，第三个元素的类型将是<code class="fe ns nt nu lt b">"Spanish"</code>。</p><h2 id="913b" class="lx ly iq bd ml nc nd dn mp ne nf dp mt lf ng nh mv lj ni nj mx ln nk nl mz nm bi translated">索引访问类型</h2><p id="caf2" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">接下来，我们将使用<code class="fe ns nt nu lt b">typeof</code>类型操作符和索引访问类型将数组转换为字符串联合类型。</p><p id="5a44" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">索引访问类型可用于查找另一种类型的特定属性。您可以使用<code class="fe ns nt nu lt b">number</code>来获取数组元素的类型。将此与<code class="fe ns nt nu lt b">typeof</code>操作符结合使用，可以捕获数组文字上的元素类型。</p><pre class="kg kh ki kj gt ls lt lu lv aw lw bi"><span id="ce96" class="lx ly iq lt b gy lz ma l mb mc">type Language = typeof languages[number];</span></pre><p id="a50c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因为数组中的每个元素都有一个数字索引签名，所以您可以获得数组中每个元素的类型。因为我们将数组断言为<code class="fe ns nt nu lt b">const</code>，所以数组中每个元素的类型都等于字符串文字而不是<code class="fe ns nt nu lt b">string</code>的类型。</p><p id="2c56" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，我们现在可以看到，<code class="fe ns nt nu lt b">Language</code>型等于<code class="fe ns nt nu lt b">"English" | "Japanese" | "Spanish"</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/2b983c1e67338cfbe801b9e2c8c88ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SoOaYAQzQq4SW24wH0JD_Q.png"/></div></div></figure><p id="b807" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们在第一步中没有将数组断言为<code class="fe ns nt nu lt b">const</code>，我们可以看到<code class="fe ns nt nu lt b">Language</code>类型现在等于<code class="fe ns nt nu lt b">string</code>，因为每个元素都有一个类型<code class="fe ns nt nu lt b">string</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ol"><img src="../Images/36d1f388c403575bad5b077eb71c07dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u9rjbGfqSjwE91U_nleBMQ.png"/></div></div></figure></div><div class="ab cl md me hu mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ij ik il im in"><h1 id="87fc" class="mk ly iq bd ml mm mn mo mp mq mr ms mt jw mu jx mv jz mw ka mx kc my kd mz na bi translated">结论</h1><p id="c0b3" class="pw-post-body-paragraph kw kx iq ky b kz nn jr lb lc no ju le lf np lh li lj nq ll lm ln nr lp lq lr ij bi translated">感谢阅读！我希望本文对您在TypeScript中将字符串数组转换为字符串联合类型有所帮助。</p><p id="b2ca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我对TypeScript了解得越多，就越对您能做的事情感到惊讶。敬请关注即将发布的更多文章！</p><p id="d8f4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您想继续学习TypeScript，请查看下面的文章。</p><div class="om on gp gr oo op"><a rel="noopener  ugc nofollow" target="_blank" href="/typescript-narrowing-using-type-guards-268e4c6edc0"><div class="oq ab fo"><div class="or ab os cl cj ot"><h2 class="bd ir gy z fp ou fr fs ov fu fw ip bi translated">使用类型保护缩小类型脚本</h2><div class="ow l"><h3 class="bd b gy z fp ou fr fs ov fu fw dk translated">帮助TypeScript通过收缩获得正确的类型</h3></div><div class="ox l"><p class="bd b dl z fp ou fr fs ov fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="oy l"><div class="oz l pa pb pc oy pd kp op"/></div></div></a></div><p id="2d03" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="pe">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="pe">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How To Slow Down A For-Loop in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何降低JavaScript中For循环的速度</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-slow-down-for-loop-9d1caaeeeeed?source=collection_archive---------2-----------------------#2021-01-24">https://javascript.plainenglish.io/javascript-slow-down-for-loop-9d1caaeeeeed?source=collection_archive---------2-----------------------#2021-01-24</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><h2 id="5668" class="io ip iq bd b dl ir is it iu iv iw dk ix translated" aria-label="kicker paragraph">JavaScript快速</h2><div class=""/><div class=""><h2 id="b3c1" class="pw-subtitle-paragraph jw iz iq bd b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dk translated">是的，由于一个简单的技巧，这是可能的。</h2></div><figure class="kp kq kr ks gt kt gh gi paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="gh gi ko"><img src="../Images/c68a13a3e1fc80969b1adc40f69fba8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kcAWzuiAUolF3Zkr"/></div></div><figcaption class="la lb gj gh gi lc ld bd b be z dk">Photo by <a class="ae le" href="https://unsplash.com/@she_sees?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Charlotte Coneybeer</a> on <a class="ae le" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0c43" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">For循环是必不可少的。他们帮助我们编程序列。但是它们有一个问题for循环尽可能快地运行。如果我们遍历一个数组，这当然是可取的。</p><p id="d449" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是，如果我们这样做，例如，在循环中请求，这可能会导致问题。如果每个循环的执行时间间隔是固定的，比如每秒一次，那就好了。</p><p id="f247" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我将向您展示如何做到这一点——下面是如何为一个for循环计时。</p><h1 id="ffe0" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">首先——它是如何不起作用的</h1><p id="5d5f" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">如果你正在寻找直接解决问题的方法，请随意跳过这一部分。如果你想学习一些关于JS的知识，那就呆一会儿。<br/>我想解释为什么普通的解决方案不起作用。</p><p id="d536" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢setTimeout，d我们可以指定某个代码应该只在x-time之后执行。这听起来像是解决我们问题的方法。只需将超时时间放入for循环中，循环就不会那么快了:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="5334" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当我们运行带有<em class="na"> setTimeout </em>的代码时，会发生以下情况:<br/>1秒内什么也没发生；然后所有的日志会在一瞬间出现。这并不是我们所希望的。</p><p id="af33" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">之所以这样，是思维上的一个小错误。似乎超时并不适用于每个元素——是的，它适用。</p><p id="b639" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">但是我们忘记了JavaScript是如何执行代码的。该循环立即创建所有超时，而不是按顺序创建。当然，这非常快——所以所有超时都有几乎相同的<strong class="lh ja">开始时间</strong>。时间一到，日志就被创建了——一次完成。</p><p id="efba" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">当我们最低限度地重写代码时，我们会看到同样的效果。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="299e" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">根据这个想法，这在其他一些编程语言中也是可行的。<br/>循环开始创建超时。只有当它被执行时，它才会继续——至少在其他编程语言中是这样。然而，在JavaScript中，超时被创建，代码继续立即执行。<br/>所以JavaScript创建了两个并行运行的流。</p><h1 id="ca73" class="mb mc iq bd md me mf mg mh mi mj mk ml kf mm kg mn ki mo kj mp kl mq km mr ms bi translated">如何适当降低for循环的速度</h1><p id="566b" class="pw-post-body-paragraph lf lg iq lh b li mt ka lk ll mu kd ln lo mv lq lr ls mw lu lv lw mx ly lz ma ij bi translated">因此，有了<em class="na"> setTimeout，</em>它就不能正常工作了。救助是一个简单的承诺。</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="6f72" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">我们通过函数调用Promise。它以毫秒为单位获取<em class="na"> setTimeout </em>应该接收的时间。超时之后，超时所做的只是执行resolve函数。这意味着承诺实现了——它可以继续。我们可以简化上面显示的代码:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="4fc2" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">诺言准备好了。现在我们可以将它添加到for循环中:</p><figure class="kp kq kr ks gt kt"><div class="bz fp l di"><div class="my mz l"/></div></figure><p id="f8f7" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">日志每秒执行一次。所以要输出循环的所有数字，我们需要100秒。所以我们成功地减缓了for循环。</p><p id="4778" class="pw-post-body-paragraph lf lg iq lh b li lj ka lk ll lm kd ln lo lp lq lr ls lt lu lv lw lx ly lz ma ij bi translated">感谢您的阅读！</p><h2 id="5076" class="nb mc iq bd md nc nd dn mh ne nf dp ml lo ng nh mn ls ni nj mp lw nk nl mr iw bi translated"><a class="ae le" href="http://eepurl.com/hacY0v" rel="noopener ugc nofollow" target="_blank">加入我的时事通讯，了解最新消息</a></h2></div></div>    
</body>
</html>
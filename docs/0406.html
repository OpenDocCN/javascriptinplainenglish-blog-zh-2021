<html>
<head>
<title>Create a Website Drag and Drop Image Uploader</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建一个网站拖放图像上传</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/drag-and-drop-image-to-webpage-82ed8bb59f01?source=collection_archive---------8-----------------------#2021-01-24">https://javascript.plainenglish.io/drag-and-drop-image-to-webpage-82ed8bb59f01?source=collection_archive---------8-----------------------#2021-01-24</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><h1 id="9e4c" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">概观</h1><p id="2e40" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">创建一个dropzone元素(我使用了一个<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/HTML/Element/main" rel="noopener ugc nofollow" target="_blank">&lt;main&gt;</a></code>元素，但是您可以创建一个不同的元素):</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="bec2" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">给dropzone一个虚线<a class="ae lk" href="https://developer.mozilla.org/docs/Web/CSS/border" rel="noopener ugc nofollow" target="_blank">边框样式</a>:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="0b50" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">当触发<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/Document/dragenter_event" rel="noopener ugc nofollow" target="_blank">dragenter</a></code>事件时突出显示dropzone(图像被拖动到dropzone上):</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><blockquote class="lx ly lz"><p id="1369" class="ki kj ma kk b kl ls kn ko kp lt kr ks mb lu kv kw mc lv kz la md lw ld le lf ig bi translated"><code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/Event/preventDefault" rel="noopener ugc nofollow" target="_blank">event.preventDefault()</a></code>是必要的，否则图像将从您的本地文件浏览器打开。</p></blockquote><p id="2f71" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">当触发<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/Document/dragleave_event" rel="noopener ugc nofollow" target="_blank">dragleave</a></code>事件时，移除dropzone高亮显示(图像不再被拖动到dropzone上):</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="9438" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">有必要在<code class="fe lg lh li lj b">drop</code>发生之前处理好<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/Document/dragover_event" rel="noopener ugc nofollow" target="_blank">dragover</a></code>事件:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="89c0" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">现在处理<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/Document/drop_event" rel="noopener ugc nofollow" target="_blank">drop</a></code>事件(当图像在dropzone中释放时):</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="lq lr l"/></div></figure><p id="4e4e" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">下面是正在发生的事情的分类:</p><ol class=""><li id="eae9" class="me mf in kk b kl ls kp lt kt mg kx mh lb mi lf mj mk ml mm bi translated">调用<code class="fe lg lh li lj b">event.preventDefault()</code>以确保文件没有在本地文件浏览器中打开(<em class="ma">行4 </em>)。</li><li id="69b3" class="me mf in kk b kl mn kp mo kt mp kx mq lb mr lf mj mk ml mm bi translated">dropzone高亮显示被移除(<em class="ma">第5行</em>)。</li><li id="a52a" class="me mf in kk b kl mn kp mo kt mp kx mq lb mr lf mj mk ml mm bi translated">图像从<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/DataTransfer/files" rel="noopener ugc nofollow" target="_blank">event.dataTransfer.files</a></code> ( <em class="ma">行7 </em>)中检索。</li><li id="11c4" class="me mf in kk b kl mn kp mo kt mp kx mq lb mr lf mj mk ml mm bi translated">使用<code class="fe lg lh li lj b"><a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/FileReader" rel="noopener ugc nofollow" target="_blank">FileReader</a></code> ( <em class="ma">第8–9行</em>)将图像读取为数据URL。</li><li id="9a0a" class="me mf in kk b kl mn kp mo kt mp kx mq lb mr lf mj mk ml mm bi translated">当图像被加载时，<a class="ae lk" href="https://developer.mozilla.org/docs/Web/API/ParentNode/append" rel="noopener ugc nofollow" target="_blank">会将</a>附加到dropzone中(<em class="ma">第11–15行</em>)。</li></ol><h2 id="cedd" class="ms jl in bd jm mt mu dn jq mv mw dp ju kt mx my jy kx mz na kc lb nb nc kg nd bi translated">注意</h2><p id="3be8" class="pw-post-body-paragraph ki kj in kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">拖放操作不需要<code class="fe lg lh li lj b">dragenter</code>和<code class="fe lg lh li lj b">dragleave</code>事件。它们只是为了改善用户体验。</p><h1 id="ebeb" class="jk jl in bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">链接</h1><ul class=""><li id="c769" class="me mf in kk b kl km kp kq kt ne kx nf lb ng lf nh mk ml mm bi translated"><a class="ae lk" href="https://repl.it/@remarkablemark/HTML-drag-and-drop-image" rel="noopener ugc nofollow" target="_blank"> Repl.it </a></li><li id="ada2" class="me mf in kk b kl mn kp mo kt mp kx mq lb mr lf nh mk ml mm bi translated"><a class="ae lk" href="https://youtu.be/UsaXP2f0zYQ?list=PLVgOtoUBG2mdLpj6qT5DXfg5_pGPTDrJZ" rel="noopener ugc nofollow" target="_blank"> YouTube视频</a></li></ul></div><div class="ab cl ni nj hr nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="ig ih ii ij ik"><p id="bef0" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated">在我的<a class="ae lk" href="https://youtu.be/UsaXP2f0zYQ?list=PLVgOtoUBG2mdLpj6qT5DXfg5_pGPTDrJZ" rel="noopener ugc nofollow" target="_blank">2021–01–23 live stream</a>中，我讲述了如何将图像拖放到网页上:</p><figure class="ll lm ln lo gt lp"><div class="bz fp l di"><div class="np lr l"/></div></figure><p id="8794" class="pw-post-body-paragraph ki kj in kk b kl ls kn ko kp lt kr ks kt lu kv kw kx lv kz la lb lw ld le lf ig bi translated"><a class="ae lk" href="https://b.remarkabl.org/3o9R3TP" rel="noopener ugc nofollow" target="_blank"> <em class="ma">本文原载于2021年1月23日《remarkablemark.org》。</em>T11】</a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Avoid the Fear of Refactoring with Absolute Imports in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免对React中绝对导入的重构的恐惧</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/avoid-the-fear-of-refactoring-with-absolute-imports-in-react-804bce61dc31?source=collection_archive---------1-----------------------#2021-04-16">https://javascript.plainenglish.io/avoid-the-fear-of-refactoring-with-absolute-imports-in-react-804bce61dc31?source=collection_archive---------1-----------------------#2021-04-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ac2c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在React中使用绝对路径别名使导入易于重构</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f2e33981b176685c29f4ff0c2b1c4262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Q2wvO7fbG0irIBon5tAvg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@goran_ivos?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Goran Ivos</a> on <a class="ae kv" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="848f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我在<a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>开始开发时，我注意到重构是多么容易变成痛苦的经历。根据我的专业知识，<strong class="ky ir">这可以打破你的大部分进口</strong>。</p><p id="3181" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你曾经害怕重构，那么这篇教程就是为你准备的。不要惊慌，因为有解决办法！</p><p id="7ff5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本教程中，我将向您展示如何通过使用别名使您的<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactjs.org/docs/code-splitting.html" rel="noopener ugc nofollow" target="_blank">import</a></code> <a class="ae kv" href="https://reactjs.org/docs/code-splitting.html" rel="noopener ugc nofollow" target="_blank">语句</a>更容易重构，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Before</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">After</figcaption></figure><p id="59f0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">正如您所看到的，建议的解决方案使您的进口看起来更干净，不是吗？多么大的副作用啊！</p><p id="c402" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们看看如何在<a class="ae kv" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>中导入带有绝对路径别名的模块、<a class="ae kv" href="https://codeburst.io/avoiding-code-duplication-by-adding-an-api-requests-definition-layer-in-javascript-6e5d7b409896" rel="noopener" target="_blank"> API定义</a>、实用程序、组件或资产，并做出反应。</p><div class="ly lz gp gr ma mb"><a href="https://codeburst.io/avoiding-code-duplication-by-adding-an-api-requests-definition-layer-in-javascript-6e5d7b409896" rel="noopener follow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd ir gy z fp mg fr fs mh fu fw ip bi translated">通过在JavaScript中添加API层来避免代码重复</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">使用基于Promise的HTTP客户端构建API层</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">codeburst.io</p></div></div><div class="mk l"><div class="ml l mm mn mo mk mp kp mb"/></div></div></a></div><h1 id="48d9" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">相对进口与绝对进口</h1><p id="cce3" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">默认情况下，<em class="nn">相对路径</em>是React中支持的导入文件的方式。它们被称为<em class="nn">相对</em>，因为它们使用相对于当前文件的路径。</p><p id="2d7d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于小型项目，它们是一个很好的解决方案。另一方面，当涉及到大型项目时，处理<em class="nn">相对进口</em>可能会变成一场噩梦。事实上，在一个层次很深的目录结构中，您可能会得到如下所示的相对导入:</p><pre class="kg kh ki kj gt no lv np nq aw nr bi"><span id="5d2c" class="ns mr iq lv b gy nt nu l nv nw">import UserCard from '../../../components/UserCard';</span></pre><p id="bd9b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">不仅这看起来不太好，而且相关进口还受到以下问题的影响:</p><ul class=""><li id="0d7e" class="nx ny iq ky b kz la lc ld lf nz lj oa ln ob lr oc od oe of bi translated">它们使得你的代码库很难重构</li><li id="1ddb" class="nx ny iq ky b kz og lc oh lf oi lj oj ln ok lr oc od oe of bi translated">它们无法扩展到您的项目规模</li><li id="a43b" class="nx ny iq ky b kz og lc oh lf oi lj oj ln ok lr oc od oe of bi translated">他们从你的代码库中创建一个npm模块</li></ul><p id="76bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是你应该谨慎使用它们的原因。理想情况下，只有当您拥有可以被视为同一个更大模块的一部分的密切相关的文件时。在任何其他情况下，<strong class="ky ir"> <em class="nn">绝对进口</em>应该代表你首选的方法</strong>。它们被称为<em class="nn">绝对</em>，因为它们允许你从绝对路径导入文件，与当前文件无关。多亏了他们，你可以把前面的例子变成这样:</p><pre class="kg kh ki kj gt no lv np nq aw nr bi"><span id="ae31" class="ns mr iq lv b gy nt nu l nv nw">import UserCard from '@components/UserCard';</span></pre><p id="5997" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">更好，对吗？我们来看看如何达到这样的结果。</p><h1 id="f2af" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">在webpack中定义绝对路径别名</h1><p id="4a40" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">首先，你需要将<code class="fe ls lt lu lv b"><a class="ae kv" href="https://www.npmjs.com/package/react-app-rewired" rel="noopener ugc nofollow" target="_blank">react-app-rewired</a></code>和<code class="fe ls lt lu lv b"><a class="ae kv" href="https://www.npmjs.com/package/react-app-rewire-alias" rel="noopener ugc nofollow" target="_blank">react-app-rewire-alias</a></code>添加到你的项目的依赖项中。您可以使用以下命令安装这两者:</p><pre class="kg kh ki kj gt no lv np nq aw nr bi"><span id="53b4" class="ns mr iq lv b gy nt nu l nv nw">npm install react-app-rewired react-app-rewire-alias --save</span></pre><p id="1708" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使绝对导入生效，您必须更改您的<a class="ae kv" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank"> webpack配置</a>。如果你用<code class="fe ls lt lu lv b"><a class="ae kv" href="https://reactjs.org/docs/create-a-new-react-app.html" rel="noopener ugc nofollow" target="_blank">create-react-app</a>,</code>创建了你的应用，你可能会被迫<a class="ae kv" href="https://create-react-app.dev/docs/available-scripts/#npm-run-eject" rel="noopener ugc nofollow" target="_blank">退出你的项目</a>——如果没有严格的要求，这应该避免。</p><p id="bffb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是<code class="fe ls lt lu lv b">react-app-rewired</code>发挥作用的地方！</p><p id="153a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">请注意，如果你的项目已经使用了<code class="fe ls lt lu lv b">react-app-rewired</code>，你可以跳过下面两个步骤。</p><p id="abf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有了它，您可以轻松地调整<code class="fe ls lt lu lv b">create-react-app</code> webpack配置。为了让一切正常工作，您需要遵循以下两个步骤:</p><ol class=""><li id="620c" class="nx ny iq ky b kz la lc ld lf nz lj oa ln ob lr ol od oe of bi translated">在根目录下创建一个有效的<code class="fe ls lt lu lv b">config-overrides.js</code>文件</li><li id="6f73" class="nx ny iq ky b kz og lc oh lf oi lj oj ln ok lr ol od oe of bi translated">在您的<em class="nn"> package.json </em>文件的<code class="fe ls lt lu lv b">scripts</code>部分中，将现有的引用从<code class="fe ls lt lu lv b">react-scripts</code>更改为<code class="fe ls lt lu lv b">react-app-rewired</code></li></ol><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Before</figcaption></figure><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">After</figcaption></figure><p id="84ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您刚刚重新连接了React应用程序，现在可以声明您的第一个绝对路径别名了。将以下几行添加到您的<em class="nn"> config-overrides.js </em>文件中:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="bc3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，你需要从<code class="fe ls lt lu lv b">react-app-rewire-alias</code>导入<code class="fe ls lt lu lv b">alias</code>。然后，您可以通过传递带有键值对的对象来调用它。键代表您的别名，值代表相应的路径。</p><p id="e0e3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">瞧啊！现在，您可以使用上面定义的三个别名来导入位于这些文件夹中的文件，如下所示:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="7af6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此外，<code class="fe ls lt lu lv b">react-app-rewired</code>还能让你实现其他不可思议的目标。例如，<a class="ae kv" href="https://betterprogramming.pub/how-to-correctly-build-a-multi-environment-react-app-6ba4878e98ba" rel="noopener ugc nofollow" target="_blank">为每个环境保留一个专用的构建文件夹</a>。</p><div class="ly lz gp gr ma mb"><a href="https://betterprogramming.pub/how-to-correctly-build-a-multi-environment-react-app-6ba4878e98ba" rel="noopener  ugc nofollow" target="_blank"><div class="mc ab fo"><div class="md ab me cl cj mf"><h2 class="bd ir gy z fp mg fr fs mh fu fw ip bi translated">如何正确构建多环境React App</h2><div class="mi l"><h3 class="bd b gy z fp mg fr fs mh fu fw dk translated">为每个环境保留一个专用的构建文件夹</h3></div><div class="mj l"><p class="bd b dl z fp mg fr fs mh fu fw dk translated">better编程. pub</p></div></div><div class="mk l"><div class="om l mm mn mo mk mp kp mb"/></div></div></a></div><h1 id="9593" class="mq mr iq bd ms mt mu mv mw mx my mz na jw nb jx nc jz nd ka ne kc nf kd ng nh bi translated">好处:设置您的IDE来处理绝对路径</h1><p id="8478" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">为了让你的IDE能够理解绝对路径，你需要做一些额外的操作。</p><h2 id="1860" class="ns mr iq bd ms on oo dn mw op oq dp na lf or os nc lj ot ou ne ln ov ow ng ox bi translated">智能理念</h2><p id="4a77" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">在根文件夹中创建一个<code class="fe ls lt lu lv b">webpack.config.alias.js</code>文件，定义如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c178" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，<em class="nn">文件&gt;设置… &gt;语言&amp;框架&gt; JavaScript &gt; Webpack </em>。手动选择<em class="nn">选项并选择上面定义的文件。</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/14d761726f15efb593dc5a8c7b3e0c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xfrAUjvlrlXsx43yoDSKsw.png"/></div></div></figure><h2 id="11fa" class="ns mr iq bd ms on oo dn mw op oq dp na lf or os nc lj ot ou ne ln ov ow ng ox bi translated">Visual Studio代码</h2><p id="7d88" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">创建一个<code class="fe ls lt lu lv b">jsconfig.js</code>,并在其中添加以下几行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="lw lx l"/></div></figure></div><div class="ab cl oz pa hu pb" role="separator"><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe pf"/><span class="pc bw bk pd pe"/></div><div class="ij ik il im in"><h1 id="b8ef" class="mq mr iq bd ms mt pg mv mw mx ph mz na jw pi jx nc jz pj ka ne kc pk kd ng nh bi translated">结论</h1><p id="8aab" class="pw-post-body-paragraph kw kx iq ky b kz ni jr lb lc nj ju le lf nk lh li lj nl ll lm ln nm lp lq lr ij bi translated">这里我们看了如何在React中使用绝对路径别名。它们是避免重构恐惧的好方法，因为与相对导入相比，它们不会导致中断导入。这就是为什么你应该总是使用它们，这可以很容易地实现，如本文所示。</p><p id="fd83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望这篇文章对你有所帮助。如果有任何问题、意见或建议，请随时联系我。</p><p id="978b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="nn">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="nn">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>An Introduction to Web NFC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">网络NFC简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/an-introduction-to-web-nfc-86bbf83098ba?source=collection_archive---------8-----------------------#2021-08-07">https://javascript.plainenglish.io/an-introduction-to-web-nfc-86bbf83098ba?source=collection_archive---------8-----------------------#2021-08-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="bf54" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">什么是Web NFC？这是一种短程无线技术，允许10厘米范围内的设备进行通信。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/62c5b06e40ee9a15a25a3b87669c26b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kRCg9FV1LLUkU3eD.png"/></div></div></figure><p id="cdbd" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">NFC或近场通信是一种短程无线技术，允许距离小于10厘米的设备进行通信。它在与NFC标签交互时最有用。随着谷歌宣布在Android的Chrome中支持网络NFC，网络NFC最近才成为现实。</p><p id="fcd3" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">可以使用称为NFC数据交换格式(NDEF)的跨不同标签工作的轻量级格式来交换消息。</p><p id="3b64" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">web NFC的常见用例是在任何可以使用标签来提供信息的地方，例如博物馆、美术馆、会议和音乐会，以便在用户触摸NFC卡时显示附加信息。它也可以在活动中用于扫描徽章。另一个用例是零售店的游戏化体验，打开网页参与其中。</p><p id="3620" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">我可以想象，在未来的某个时候，支付可能会被嵌入其中，但第一版完全避免了NFC的所有安全属性。除了读取器/写入器(NDEF)之外，其他NFC模式尚未在Web NFC中实现。这些模式是点对点、卡仿真和无线充电。</p><h1 id="b2bb" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">入门指南</h1><p id="45f1" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">你需要NFC标签才能开始。目前还没有Chrome开发工具支持模拟NFC。可以从亚马逊获得NFC标签<a class="ae mh" href="https://amzn.to/3CrJPms" rel="noopener ugc nofollow" target="_blank">贴纸</a>。你还需要一个支持NFC的Android设备。下一个很简单:Chrome v86+。</p><h1 id="b5fe" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">写入标签</h1><p id="5888" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">现在您已经有了所需的硬件，写入标签就很容易了:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="caa3" class="mn ll in mj b gy mo mp l mq mr">// can add logic to feature detect first<br/>// if ('NDEFReader' in window) {}<br/>document.getElementById("write-to-nfc-tag").addEventListener("click", async () =&gt; {<br/> try {<br/>     const ndefReader = new NDEFReader();<br/>     await ndefReader.write("Hello Web NFC!");<br/>   } catch (error) {<br/>     console.log(error);<br/>   }<br/> });</span></pre><p id="00b2" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">NDEF消息不一定必须是字符串。它可以由多个NDEFRecords组成，可以是文本、URL或更复杂的类型。让我们写一个标签的URL:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="28e5" class="mn ll in mj b gy mo mp l mq mr">document.getElementById("write-to-nfc-tag").addEventListener("click", async () =&gt; {<br/> try {<br/>     const ndefReader = new NDEFReader();<br/>     await ndef.write({<br/>      records: [{ recordType: "url", data: "<a class="ae mh" href="https://www.wisdomgeek.com" rel="noopener ugc nofollow" target="_blank">https://www.wisdomgeek.com</a>" }]<br/>    });<br/>   } catch (error) {<br/>     console.log(error);<br/>   }<br/> });</span></pre><h1 id="6ea7" class="lk ll in bd lm ln lo lp lq lr ls lt lu jt lv ju lw jw lx jx ly jz lz ka ma mb bi translated">阅读标签</h1><p id="a40a" class="pw-post-body-paragraph ko kp in kq b kr mc jo kt ku md jr kw kx me kz la lb mf ld le lf mg lh li lj ig bi translated">在读取时，您必须区分标签可以包含的不同类型的记录。在此之前，可以使用以下方法进行阅读:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="e1be" class="mn ll in mj b gy mo mp l mq mr">try {<br/>    const ndef = new NDEFReader();<br/>    await ndef.scan();<br/>    ndef.addEventListener("reading", ({ message, serialNumber }) =&gt; {<br/>        console.log(message.records);<br/>    });<br/>} catch (error) {<br/>    console.log(`Error! Scan failed to start: ${error}.`);<br/>}</span></pre><p id="b10f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">只有当用户允许网站与NFC设备交互并在手机上启用NFC时，承诺才会兑现。</p><p id="d9ac" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">为了添加读取不同类型消息的逻辑，我们可以运行一个循环，并在其中设置一个开关:</p><pre class="kd ke kf kg gt mi mj mk ml aw mm bi"><span id="35bf" class="mn ll in mj b gy mo mp l mq mr">const decoder = new TextDecoder();<br/>for (const record of message.records) {<br/>  switch (record.recordType) {<br/>    case "text":<br/>      console.log(`Text: ${decoder.decode(record.data)} (${record.lang})`);<br/>      break;<br/>    case "url":<br/>      console.log(`URL: ${decoder.decode(record.data)}`);<br/>      break;<br/>    case "mime":<br/>      if (record.mediaType === "application/json") {<br/>        console.log(`JSON: ${JSON.parse(decoder.decode(record.data))}`);<br/>      } else {<br/>        console.log(`Media not handled`);<br/>      }<br/>      break;<br/>    default:<br/>      console.log(`Record not handled`);<br/>  }<br/>}</span></pre><p id="056f" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated">这就是使用网络NFC读写标签的方法。它的使用非常简单，未来应该会激发出围绕NFC标签的创造性项目。该API将来可能会扩展，其他有趣的项目也将开始成为现实。如果你有任何关于使用网络NFC的问题或想法，欢迎在下面留言！</p></div><div class="ab cl ms mt hr mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ig ih ii ij ik"><p id="803c" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mz">原载于2021年8月7日</em><a class="ae mh" href="https://www.wisdomgeek.com/development/web-development/web-nfc-is-a-thing-now/" rel="noopener ugc nofollow" target="_blank"><em class="mz">【https://www.wisdomgeek.com】</em></a><em class="mz">。</em></p><p id="143a" class="pw-post-body-paragraph ko kp in kq b kr ks jo kt ku kv jr kw kx ky kz la lb lc ld le lf lg lh li lj ig bi translated"><em class="mz">更多内容请看</em><a class="ae mh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mz">plain English . io</em></strong></a><em class="mz">。报名参加我们的</em><strong class="kq io"><em class="mz"/></strong><a class="ae mh" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kq io"><em class="mz">免费周报</em> </strong> </a> <em class="mz">。在我们的</em> <a class="ae mh" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="kq io"> <em class="mz">社区获得独家访问写作机会和建议</em> </strong> </a> <em class="mz">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Add Medium Posts to Your Site in 15 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在15分钟内给你的网站添加中型文章</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-medium-posts-to-your-site-in-15-minutes-7880e75d16e0?source=collection_archive---------10-----------------------#2021-11-17">https://javascript.plainenglish.io/how-to-add-medium-posts-to-your-site-in-15-minutes-7880e75d16e0?source=collection_archive---------10-----------------------#2021-11-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/81be3a86de63f5da54ad43be24fafb5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*dMTHIAFuvlOFBdNbWX946Q.gif"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Final blog page</figcaption></figure><p id="3c5e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最近，我用React制作了自己的<a class="ae kt" href="https://www.alexanderdarby.com" rel="noopener ugc nofollow" target="_blank">网站</a>。在这个过程中，我读了不少关于如何将文章从媒体添加到你的网站的博客部分的文章。虽然有很多非常好的东西，但我没有找到多少容易理解并能产生带有单元测试的模块化代码的东西。</p><p id="41e4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所以这就是我在这里要尝试和做的事情——把这篇文章想象成满足您所有媒体提要嵌入需求的一站式商店。如果你像我一样懒，只是想得到一些代码，请直接跳到包含本文所有代码的<a class="ae kt" href="https://www.github.com/osintalex/mysite" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>。</p><p id="0b61" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我认为将中型帖子放入React站点的最简单方法应该包括四个代码模块。这可能看起来很多，但请记住，它们非常小，只是有助于轻松分离程序逻辑。它们是:</p><ol class=""><li id="989e" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">从媒体API检索数据后呈现博客的主要React组件。</li><li id="31b8" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">一个将这些数据解析成您需要的部分的函数。</li><li id="64f1" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">如果您是桌面用户，可以使用React组件来创建博客文章。</li><li id="95a2" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">一个React组件，用于在移动设备上创建博客文章。</li></ol><p id="6888" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">当然，如果您不想针对移动和桌面进行优化，您可以只使用一个组件，而不是最后两个。但是如果你真的想优化，那么我认为两个组件是一个有用的方法，因为你可能想在每个博客条目中包含很多不同的东西，比如链接、标签、图片、描述和链接。</p><p id="da6a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了简单起见，让我们反向工作，从3号和4号组件开始。</p><h2 id="ffb8" class="li lj in bd lk ll lm dn ln lo lp dp lq kg lr ls lt kk lu lv lw ko lx ly lz ma bi translated">桌面视图</h2><p id="1840" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">下面是该组件的代码:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="bba7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它使用Ant Design来制作包含博客文章的HTML，作为道具，它接受一个包含我想要显示的相关项目的解析数据数组——文章标题、链接、日期、标签和描述。</p><h2 id="2961" class="li lj in bd lk ll lm dn ln lo lp dp lq kg lr ls lt kk lu lv lw ko lx ly lz ma bi translated">移动视图</h2><p id="92a5" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">现在这基本上是完全相同的组件，但用于移动设备。我使用了Ant Design mobile库中的一些组件，以使最终输出在移动设备上更具响应性:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="da2d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在已经解决了这个问题，让我们继续往回走，完成解析媒体数据的函数。</p><h2 id="4db6" class="li lj in bd lk ll lm dn ln lo lp dp lq kg lr ls lt kk lu lv lw ko lx ly lz ma bi translated">中等馈送分析器</h2><p id="b4ca" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">我们在Medium API上调用的端点返回一个JSON对象，该对象包含一个带有名为<code class="fe mm mn mo mp b">items</code>的键的项目。这个键的值是包含我们想要的东西的所有博客文章的数组——链接、描述、标题等等。</p><p id="f824" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在对medium API的fetch调用中，我已经只返回了响应中items键的值(如果这是一个令人困惑的句子，请向下滚动查看主博客组件函数的代码)。所以现在我只需要从数组中获取相关数据。</p><p id="02c7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下面是我解析所有这些的函数:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="7d4f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们来看看主要的反应元件。</p><h2 id="e345" class="li lj in bd lk ll lm dn ln lo lp dp lq kg lr ls lt kk lu lv lw ko lx ly lz ma bi translated">主要反应组分</h2><p id="6e95" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">我们的主要博客组件需要完成以下工作:</p><ol class=""><li id="50ff" class="ku kv in jx b jy jz kc kd kg kw kk kx ko ky ks kz la lb lc bi translated">从媒体API获取数据</li><li id="03a1" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">显示一个正在加载的图标</li><li id="3568" class="ku kv in jx b jy ld kc le kg lf kk lg ko lh ks kz la lb lc bi translated">完成后，呈现页面的桌面或移动版本</li></ol><p id="d97c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了实现第2点，我们需要使用一个<code class="fe mm mn mo mp b">useEffect</code>钩子和<code class="fe mm mn mo mp b">useState</code>来管理何时显示加载图标。您可以在下面的代码中看到这一点:</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="2d95" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你可能也注意到了，我在这里使用了一个名为react device detect的库。这非常有用！它可以让你看到用户是否在移动，然后你可以相应地调整他们得到的视图。</p><h2 id="3b03" class="li lj in bd lk ll lm dn ln lo lp dp lq kg lr ls lt kk lu lv lw ko lx ly lz ma bi translated">测试</h2><p id="9bd7" class="pw-post-body-paragraph jv jw in jx b jy mb ka kb kc mc ke kf kg md ki kj kk me km kn ko mf kq kr ks ig bi translated">现在一切都准备好了，是时候为我们的模块编写单元测试了！我把它保持得相当简单，因为它只是针对我的个人网站，而不是针对客户的任何更复杂的东西，但是如果你需要的话，你绝对可以把这种方法修改得更彻底。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="3c00" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，我只是检查所有的组件在检索所有的博客文章后，是否呈现了应该在<code class="fe mm mn mo mp b">h3</code>标题中的文章文本。我使用异步测试函数和React测试库中的<code class="fe mm mn mo mp b">waitFor</code>,因为我需要等待主要的React组件调用API并加载所有的博客文章。</p><p id="68b3" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还对我的解析器函数编写了另一个非常简单的测试，以检查它是否可以解析数据，同时还编写了其他单元测试，检查移动和桌面博客文章在传递虚拟道具数据时是否加载了正确的内容。</p><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><figure class="mg mh mi mj gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="72a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，在这个过程的这一点上，我确实考虑过将主React组件中的<code class="fe mm mn mo mp b">fetchData</code>函数移到它自己的模块中并进行测试，但是我认为测试fetch是多余的，因为它是一个JavaScript内置函数。</p><p id="ce7b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mq">更多内容请看</em><a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mq">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
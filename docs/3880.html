<html>
<head>
<title>How to Add Validation to Your Inputs Using React Hook Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用React Hook表单向输入添加验证</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-add-validation-to-your-inputs-using-react-hook-form-425ee6de4114?source=collection_archive---------4-----------------------#2021-08-04">https://javascript.plainenglish.io/how-to-add-validation-to-your-inputs-using-react-hook-form-425ee6de4114?source=collection_archive---------4-----------------------#2021-08-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="91ad" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过在客户端验证输入，创造更好的用户体验</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d6ff6b40d9251056d73771a7ae4a0dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g6gJ1DRnQ92A7GSG"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@usmanyousaf?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Usman Yousaf</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2d79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">处理表单时，验证发送的输入数据很重要。例如，如果我们需要用户的电子邮件地址，我们希望确保他们发送的数据是有效的电子邮件。</p><p id="016e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以在服务器端和客户端验证这些数据。建议同时进行两种验证。在这个<a class="ae kv" href="https://stackoverflow.com/questions/162159/javascript-client-side-vs-server-side-validation" rel="noopener ugc nofollow" target="_blank">堆栈溢出问题</a>中，你可以阅读更多关于差异和为什么它们都很重要的内容。</p><p id="17b0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解如何使用React Hook表单库和Material-UI组件在客户端添加表单验证。</p><p id="1a88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你是React Hook Form的新手，可以看看下面的文章。</p><div class="ls lt gp gr lu lv"><a href="https://blog.devgenius.io/the-easiest-way-to-deal-with-forms-in-react-ad6bc1250829" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">React中处理表单的最简单方法</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">使用React钩子形式来提高应用程序的性能</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">blog.devgenius.io</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="cf31" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">建立</h1><p id="5312" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">对于这个例子，我们将在<code class="fe no np nq nr b">create-react-app</code>中工作。我已经安装了<a class="ae kv" href="https://www.npmjs.com/package/@material-ui/core" rel="noopener ugc nofollow" target="_blank"> Material-UI </a>核心包，还有<a class="ae kv" href="https://www.npmjs.com/package/react-hook-form" rel="noopener ugc nofollow" target="_blank"> React钩子形式</a>。</p><p id="95b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从一个没有验证的基本表单开始我们的项目。这个表单是使用Material-UI TextField和Button组件以及React Hook表单构建的。你可以在这里获得这个表单<a class="ae kv" href="https://gist.github.com/chadmuro/5d03b52ebaea4e3c1b841ed9ec613837" rel="noopener ugc nofollow" target="_blank">的代码。</a></p><p id="b056" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于如何让Material-UI与React Hook Form一起工作，请查看下面的文章。</p><div class="ls lt gp gr lu lv"><a href="https://levelup.gitconnected.com/using-react-hook-form-with-material-ui-components-ba42ace9507a" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">将React挂钩形式与材质UI组件一起使用</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">使用Material-UI时处理表单数据的更好方法</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="me l"><div class="ns l mg mh mi me mj kp lv"/></div></div></a></div><p id="8b1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们开始我们的项目，我们的表单将看起来像这样。有两个输入的基本表单:一个输入电子邮件，一个输入密码。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/3953fadd6005204eb08445be68714bc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*P4P7ut_tmuKkTjeP8pEkIQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/chadmuro/5d03b52ebaea4e3c1b841ed9ec613837" rel="noopener ugc nofollow" target="_blank">Link for GitHub Gist</a></figcaption></figure><h1 id="682d" class="mr ms iq bd mt mu nu mw mx my nv na nb jw nw jx nd jz nx ka nf kc ny kd nh ni bi translated">默认验证</h1><p id="96d1" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我们还没有在表单中添加任何验证。但是，您可能会注意到，如果我们尝试提交当前的表单，仍然会进行验证以检查电子邮件输入。这是因为我们在第一个输入中添加了<code class="fe no np nq nr b">type=’email’</code>。这将添加一个默认的验证检查。在Chrome中，错误信息如下所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/a4afa4548fe6d350d82f2c0b198f34e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l9579oHB-JShWLx8ZJx4tw.png"/></div></div></figure><p id="b8d2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们希望将整个表单中的错误消息标准化。因此，要删除这个默认的错误消息，需要在表单中添加<code class="fe no np nq nr b">noValidate</code>属性。</p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="04a0" class="oe ms iq nr b gy of og l oh oi">&lt;form className={classes.root} onSubmit={handleSubmit(onSubmit)} <strong class="nr ir">noValidate</strong>&gt;</span></pre><h1 id="4fe1" class="mr ms iq bd mt mu nu mw mx my nv na nb jw nw jx nd jz nx ka nf kc ny kd nh ni bi translated">添加验证</h1><p id="32ba" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我们现在可以添加我们自己的客户端验证检查和错误消息。</p><p id="7a10" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React钩子形式使得各种验证检查变得容易。要查看我们可以添加的验证规则的完整列表，请查看它们的文档<a class="ae kv" href="https://react-hook-form.com/api/useform/register" rel="noopener ugc nofollow" target="_blank">这里</a>。</p><p id="ffe2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用Material-UI组件向输入添加验证规则，请将一个对象传递给<code class="fe no np nq nr b">Controller</code>组件的<code class="fe no np nq nr b">rules</code>属性。</p><p id="afad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看我常用的4个验证规则。一旦您理解了如何使用这些规则，您也可以轻松地实现其他规则。</p><h2 id="5ebc" class="oe ms iq bd mt oj ok dn mx ol om dp nb lf on oo nd lj op oq nf ln or os nh ot bi translated">需要</h2><p id="1c3e" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">顾名思义，必需的验证规则将指示输入必须有一个值才能提交表单。要添加所需的验证检查，请添加<code class="fe no np nq nr b">required</code>键。您可以通过将字符串作为值传递来分配错误信息。</p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="95f8" class="oe ms iq nr b gy of og l oh oi">rules={{<br/>  <strong class="nr ir">required: 'Email required',</strong><br/>}}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ou"><img src="../Images/1bcbc3f9fa1a97c17b03e2533c96dbc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BAVTqySMU3YCqW1xptUbOg.png"/></div></div></figure><h2 id="f359" class="oe ms iq bd mt oj ok dn mx ol om dp nb lf on oo nd lj op oq nf ln or os nh ot bi translated">最小长度</h2><p id="274a" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">另一个常见的验证是最小长度检查。要添加最小长度验证检查，添加<code class="fe no np nq nr b">minLength</code>键。它接受一个对象，其中值键是表示长度的数字，消息键是表示错误消息的字符串。</p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="4205" class="oe ms iq nr b gy of og l oh oi">rules={{<br/>  <strong class="nr ir">minLength: {<br/>    value: 8,<br/>    message: 'Password should be as least 8 characters',<br/>  },</strong><br/>}}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ov"><img src="../Images/719a8773941bc038034799377993d0c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gB-PQ3GsJAndw33Lct9XiQ.png"/></div></div></figure><p id="17d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最大长度检查也很容易实现。只需将<code class="fe no np nq nr b">minLength</code>改为<code class="fe no np nq nr b">maxLength</code>。</p><h2 id="8eab" class="oe ms iq bd mt oj ok dn mx ol om dp nb lf on oo nd lj op oq nf ln or os nh ot bi translated">模式</h2><p id="806b" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">该验证将检查正则表达式模式。如果模式不匹配，表单将不会被提交，并且会出现一条错误消息。要添加该验证，请添加<code class="fe no np nq nr b">pattern</code>键。它接受一个对象，该对象将值键作为正则表达式，将消息键作为表示错误消息的字符串。</p><p id="6a2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我不太了解正则表达式，但是快速的谷歌搜索可以帮助你找到你需要的模式。下面是我用过的两种模式。</p><p id="fc9e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">检查输入是否是有效的电子邮件:</strong></p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="402a" class="oe ms iq nr b gy of og l oh oi">rules={{<br/>  <strong class="nr ir">pattern: {<br/>    value: /^(([^&lt;&gt;()\[\]\\.,;:\s@"]+(\.[^&lt;&gt;()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,<br/>    message: 'Must use a valid email',<br/>  },</strong><br/>}}</span></pre><p id="8779" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">检查输入是否包含至少一个字母和一个数值:</strong></p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="13b4" class="oe ms iq nr b gy of og l oh oi">rules={{<br/>  <strong class="nr ir">pattern: {<br/>    value: /^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/,<br/>    message: 'Password should contain at least 1 alphabet and 1 numeric value',<br/>  },</strong><br/>}}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/64c73bc03c2de89db9399ba3f4438884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CLEfR_FZ7R7-ks7Jsi8RzA.png"/></div></div></figure><h2 id="59e1" class="oe ms iq bd mt oj ok dn mx ol om dp nb lf on oo nd lj op oq nf ln or os nh ot bi translated">使生效</h2><p id="718f" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我们将看到的最后一个验证用于检查其他任何东西。例如，我们可以检查用户名是否已经被占用。或者对于这个例子，检查可能太不安全的无效密码，比如<em class="ox">‘password 123’</em>。要添加该验证检查，请添加<code class="fe no np nq nr b">validate</code>键。这接受一个函数。</p><p id="dc42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">若要添加错误消息，请使用逻辑or运算符。因此，如果函数的结果为false，将设置错误消息。</p><pre class="kg kh ki kj gt oa nr ob oc aw od bi"><span id="2d96" class="oe ms iq nr b gy of og l oh oi">rules={{<br/>  <strong class="nr ir">validate: {<br/>    equals: <em class="ox">password</em> =&gt;<br/>      <em class="ox">password</em> !== 'password123' || 'Choose a more secure password',<br/>  },</strong><br/>}}</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oy"><img src="../Images/c6f8034b111bd5d0413573fad1eab6d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XuKolVy1eqiixqXNfbch1g.png"/></div></div></figure><p id="e544" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们返回表单并尝试提交，我们现在可以看到我们的验证检查正在运行。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/18baf440c7b01a62c7306dc7e8d33284.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*pX8LDlWL8K5SrrESYCE3XQ.gif"/></div></figure></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="8f5d" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">结论</h1><p id="c20a" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">您可以在下面查看表单验证的完整源代码。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pa pb l"/></div></figure><p id="0b16" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！我希望这篇文章对您使用React Hook表单向表单添加验证有所帮助。向表单添加客户端验证可以极大地帮助改善用户体验。我们可以在发送请求之前在客户端验证错误，而不是提交一个表单，然后从服务器得到一个错误。</p><p id="60d4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你想了解更多关于如何使用Material-UI的知识，可以看看下面的文章。</p><div class="ls lt gp gr lu lv"><a rel="noopener  ugc nofollow" target="_blank" href="/the-easiest-way-to-style-your-material-ui-components-the-makestyles-function-a66ab7b9fe01"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">样式化你的材质UI组件的最简单的方法:makeStyles函数</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如何在Material-UI中使用makeStyles函数</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="me l"><div class="pc l mg mh mi me mj kp lv"/></div></div></a></div><p id="de83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ox">更多内容看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ox">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
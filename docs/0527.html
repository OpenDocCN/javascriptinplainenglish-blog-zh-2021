<html>
<head>
<title>How To Use the FlatList Component in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在React Native中使用FlatList组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-the-flatlist-component-in-react-native-78c88972b99c?source=collection_archive---------4-----------------------#2021-02-01">https://javascript.plainenglish.io/how-to-use-the-flatlist-component-in-react-native-78c88972b99c?source=collection_archive---------4-----------------------#2021-02-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="11ac" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><em class="kc">给大家的懒人加载列表！</em></h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/e3a1423d4fff80871da910ba3d12d0ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k08v8gaxtzhtoVKQGkS6MA.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@alexacea?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Alexandru Acea</a> on <a class="ae kt" href="https://unsplash.com/s/photos/coding?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="0b22" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">介绍</h1><p id="5767" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">每个应用程序都需要列表。你的待办事项应用，你的股票应用，你的笔记应用，你的邮件应用，等等等等…</p><p id="9fb3" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是想象一下，如果当你打开应用程序时，邮件应用程序需要加载你所有的2352封未读邮件，这将需要很长时间，这取决于你手机的规格。这就是为什么我们使用叫做<em class="mn">延迟加载</em>的东西。</p><p id="2d5a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">简而言之，惰性加载是一种通过简单地加载需要显示的内容来加载长列表的方式。像Android RecyclerView这样的列表更进一步改善了性能和加载时间。React Native中的FlatList组件就是我们使用的lazy loader。</p><p id="56f4" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">我记得当我第一次使用这个组件时，我有点害怕，因为这和填充一个ScrollView不一样。但是在我学会使用它之后，我再也没有返回ScrollView查看未知长度的列表。</p><h1 id="e92a" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">设置</h1><p id="181f" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">我将使用一个空白的世博会项目作为我的开始。因为本文将尽可能地把重点放在FlatList组件上，所以我不会试图偏离太多，添加只会让它更难理解的废话。</p><p id="eabd" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你可以按照这里的说明<a class="ae kt" href="https://reactnative.dev/docs/environment-setup" rel="noopener ugc nofollow" target="_blank">或者我写的另一篇文章中的说明</a>来做，这篇文章的重点是让Expo应用程序为开发做好准备。</p><div class="mo mp gp gr mq mr"><a href="https://mbvissers.medium.com/building-your-first-react-native-app-fe4f6a1785c1" rel="noopener follow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd io gy z fp mw fr fs mx fu fw im bi translated">构建您的第一个React原生应用</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">本土发展衰落的原因。</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">mbvissers.medium.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf kn mr"/></div></div></a></div><p id="5371" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在您准备好并拥有一个空的<code class="fe ng nh ni nj b">App.js</code>文件之后，我们可以继续添加一些样本数据来迭代。</p><h1 id="3782" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">数据</h1><p id="17c6" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><code class="fe ng nh ni nj b">FlatList</code>使用的一个属性是<code class="fe ng nh ni nj b">data</code>。这是我们首先要创建的，一些要迭代的数据。这可以是从数字数组到充满JSON对象的数组。我将使用一个相当简单的字符串数组。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="5e9c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这是目前为止基本的<code class="fe ng nh ni nj b">App.js</code>。我们在一些视图中有一些文本，我们在<code class="fe ng nh ni nj b">state</code>之外定义了一个数组。</p><p id="7257" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">我们现在可以开始创建列表了，但是让我们先检查一下如果没有<code class="fe ng nh ni nj b">FlatList</code>我们会怎么做。<em class="mn">请注意，这并不是好的做法</em>，但是您可能会觉得很有趣。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="d814" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">同样，如果您事先不知道数据的长度，这不是一个好的做法。但是我们定义了一个<code class="fe ng nh ni nj b">ScrollView</code>，在这个函数中，我们使用<code class="fe ng nh ni nj b">map</code>循环遍历数据数组，并返回每个<code class="fe ng nh ni nj b">Text</code>以及一个从<code class="fe ng nh ni nj b">index</code>中获得的密钥。</p><p id="e8f6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">我们的FlatList看起来非常相似，因为我们将使用类似于<code class="fe ng nh ni nj b">map</code>的东西来呈现FlatList的<code class="fe ng nh ni nj b">renderItem</code>属性中的每个内部组件。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="46e3" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">然而，我们还没有定义一个键。虽然我们可以将<code class="fe ng nh ni nj b">key</code>道具添加到我们渲染的<code class="fe ng nh ni nj b">Text</code>组件中，但是平面列表中还有另一个名为<code class="fe ng nh ni nj b">keyExtractor</code>的属性，它会自动设置关键点。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="491f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这是最后的<code class="fe ng nh ni nj b">FlatList</code>组件，包含了我们现在需要的所有东西。一个漂亮的平面列表，以比我们的滚动视图更有效的方式显示所有项目。</p><p id="421e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是下一步是什么呢？</p><p id="794a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><code class="fe ng nh ni nj b">FlatList</code>组件还有一些可能有用的属性，比如<code class="fe ng nh ni nj b">ListHeaderComponent</code>，您可以在其中定义一个标题，它将像项目一样滚动。因为我们当前的代码不会这样做。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nk nl l"/></div></figure><p id="05d3" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这是我在每一个带<code class="fe ng nh ni nj b">FlatList</code>的项目中使用的所有东西。在<a class="ae kt" href="https://reactnative.dev/docs/flatlist" rel="noopener ugc nofollow" target="_blank">官方文件</a>中有更多值得探索的地方。您已经准备好创建自己的邮件或待办事项应用程序。</p><h1 id="cf84" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated">结论</h1><p id="8f6b" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">React Native附带的<code class="fe ng nh ni nj b">FlatList</code>组件是一种呈现大型数据集或数组的资源友好方式。使用<code class="fe ng nh ni nj b">listHeaderComponent</code>你可以添加一个和数据列表一起滚动的标题，这样你就可以让它尽可能的像一个常规的<code class="fe ng nh ni nj b">ScrollView</code>一样。</p><p id="b0d0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">祝您的应用程序开发之旅好运，非常感谢您的阅读。祝你愉快。</p></div></div>    
</body>
</html>
<html>
<head>
<title>Increase FE Development Speed and Experience by Running a Webpack Dev Server on Your AEM pages</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过在AEM页面上运行Webpack开发服务器来提高FE开发速度和体验</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/increase-fe-development-speed-and-experience-by-running-a-webpack-dev-server-on-your-aem-pages-403101776041?source=collection_archive---------9-----------------------#2021-03-06">https://javascript.plainenglish.io/increase-fe-development-speed-and-experience-by-running-a-webpack-dev-server-on-your-aem-pages-403101776041?source=collection_archive---------9-----------------------#2021-03-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="717b" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">使用本指南，使FE成为将代码无缝迁移到AEM实例的过程的一部分。</h2></div><h2 id="5dcc" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">没有开发服务器</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi ky"><img src="../Images/65b1e59c8e7b9013393eb95d0a65941e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rETX5fuEGsqU5LA8wL4fMw.jpeg"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">serving FE assets to local AEM page without a dev server</figcaption></figure><p id="0b45" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated">如果没有开发服务器，让您的资产出现在AEM页面上的唯一选择是创建一个<strong class="lq io">生产版本</strong>。从这些资产中，创建客户端库，然后将它们同步到您的AEM实例。这个过程可能需要很长时间，因为生产构建正在尝试优化资产。要在AEM页面上看到您的增量更改，这并不理想。</p><h2 id="c717" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">使用开发服务器</h2><figure class="kz la lb lc gt ld gh gi paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="gh gi mh"><img src="../Images/3c4bfd49321a8b63666fdbfe79ef81b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zAEbuBivoJg-2nUqnJAixg.jpeg"/></div></div><figcaption class="lk ll gj gh gi lm ln bd b be z dk">Serving FE assets to local AEM page with a dev server</figcaption></figure><p id="3743" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated">当使用Webpack开发服务器时，我们可以<a class="ae mi" href="https://webpack.js.org/configuration/dev-server/#devserverproxy" rel="noopener ugc nofollow" target="_blank">代理</a>某些路径。我们要做的是将所有页面请求代理到AEM实例。在通过dev服务器提供这些页面之前，我们将注入由Webpack创建的资产。</p><p id="5cb0" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated">由于Webpack不必创建生产版本，而只需编译内存中的资产，因此这个过程要快得多！</p><h1 id="cd08" class="mj kd in bd ke mk ml mm kh mn mo mp kk jt mq ju ko jw mr jx ks jz ms ka kw mt bi translated">如何在CRA系统中实现这一点</h1><h2 id="387f" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">设置代理</h2><p id="9cdc" class="pw-post-body-paragraph lo lp in lq b lr mu jo lt lu mv jr lw kl mw ly lz kp mx mb mc kt my me mf mg ig bi translated">Create React App允许你<a class="ae mi" href="https://create-react-app.dev/docs/proxying-api-requests-in-development/#configuring-the-proxy-manually" rel="noopener ugc nofollow" target="_blank">设置代理</a>而不用接触Webpack配置。为此，在src根目录下创建一个文件<code class="fe mz na nb nc b">setupProxy.js</code>。在这里，我们将代理<code class="fe mz na nb nc b">/content</code>下的所有路径到AEM实例。如果您知道Webpack没有提供其他资产，您也可以允许代理这些资产。</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="0504" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated">这个代理设置将通过您的开发服务器暴露所有AEM内容，但将阻止所有客户端库(除了白名单中的那些)被下载。您希望将资产直接注入页面，而不是下载客户端库。</p><h2 id="885c" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">注入资产</h2><p id="5ec4" class="pw-post-body-paragraph lo lp in lq b lr mu jo lt lu mv jr lw kl mw ly lz kp mx mb mc kt my me mf mg ig bi translated">为了注入这些资产，我们需要稍微改变一下Webpack的配置。为此，我们将使用<a class="ae mi" href="https://www.npmjs.com/package/@craco/craco" rel="noopener ugc nofollow" target="_blank"> craco </a>。在项目的根目录下创建一个<code class="fe mz na nb nc b">craco.config.js</code>，并创建一个使用craco的运行脚本。</p><figure class="kz la lb lc gt ld"><div class="bz fp l di"><div class="nd ne l"/></div></figure><p id="c1d2" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated"><a class="ae mi" href="https://webpack.js.org/configuration/dev-server/#devserverbefore" rel="noopener ugc nofollow" target="_blank"> before </a>选项提供了在服务器内部所有其他中间件之前执行定制中间件的能力。这里我们将添加中间件来将脚本注入页面。为此，我使用了<a class="ae mi" href="https://github.com/rustybox/webpack-dev-server-inject-scripts" rel="noopener ugc nofollow" target="_blank">web pack-dev-server-inject-scripts</a>。</p><p id="5060" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated">记住从CRA配置中执行最初的<code class="fe mz na nb nc b">before</code>方法，不要破坏任何东西。</p><h2 id="e5d7" class="kc kd in bd ke kf kg dn kh ki kj dp kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">快乐开发意味着快乐项目</h2><p id="9dd0" class="pw-post-body-paragraph lo lp in lq b lr mu jo lt lu mv jr lw kl mw ly lz kp mx mb mc kt my me mf mg ig bi translated">有了这个设置，我们让开发人员可以处理AEM创作的内容和快速重新加载的开发服务器，而不必每次都进行构建，从而减轻了他们的负担。这让您感觉好像是在使用一个没有AEM的普通应用程序。</p><h1 id="bb85" class="mj kd in bd ke mk ml mm kh mn mo mp kk jt mq ju ko jw mr jx ks jz ms ka kw mt bi translated">其他技术？</h1><p id="35dc" class="pw-post-body-paragraph lo lp in lq b lr mu jo lt lu mv jr lw kl mw ly lz kp mx mb mc kt my me mf mg ig bi translated">在此强调了AEM — CRA用例，这也可以应用于您拥有的任何其他设置。关键是将本地CMS内容页面与Webpack开发流程相集成。</p><p id="49a3" class="pw-post-body-paragraph lo lp in lq b lr ls jo lt lu lv jr lw kl lx ly lz kp ma mb mc kt md me mf mg ig bi translated"><em class="nf">更多内容请看</em><a class="ae mi" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="lq io"><em class="nf">plain English . io</em></strong></a><em class="nf">。报名参加我们的</em> <a class="ae mi" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nf">免费周报</em> </strong> </a> <em class="nf">。在我们的</em> <a class="ae mi" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"> <strong class="lq io"> <em class="nf">社区</em> </strong> </a> <em class="nf">获得独家获得写作机会和建议。</em></p></div></div>    
</body>
</html>
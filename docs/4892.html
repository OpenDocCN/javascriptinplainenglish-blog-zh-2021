<html>
<head>
<title>Learn Web Scraping with Node.js and ScrapingAnt in 5 Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Node.js和ScrapingAnt在5分钟内学会网页抓取</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/web-scraping-with-nodejs-and-javascript-10e6b4268be1?source=collection_archive---------2-----------------------#2021-10-02">https://javascript.plainenglish.io/web-scraping-with-nodejs-and-javascript-10e6b4268be1?source=collection_archive---------2-----------------------#2021-10-02</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><h2 id="e3f3" class="ip iq ir bd b dl is it iu iv iw ix dk iy translated" aria-label="kicker paragraph"><a class="ae ep" href="https://rakiabensassi.medium.com/list/software-engineering-7a179a23ebfd" rel="noopener">网页抓取</a></h2><div class=""/><div class=""><h2 id="88d2" class="pw-subtitle-paragraph jx ja ir bd b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dk translated">如何使用JavaScript收集数据并自动化您的任务</h2></div><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj kp"><img src="../Images/e8f3051dae4c63b643e802bd66c18584.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGWTxMSZOMUufquTNHAx3Q.jpeg"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">Photo by <a class="ae lf" href="https://www.pexels.com/@cottonbro?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">cottonbro</a> from <a class="ae lf" href="https://www.pexels.com/photo/man-people-woman-laptop-6803522/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="4cfb" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">JavaScript是一种流行且广泛使用的语言，我们可以利用它的运行时Node.js作为工具来抓取web、收集数据、自动化我们的生活或发展业务。</p><p id="db8b" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">在今天的帖子中，我将分解如何使用JavaScript有效地收集公共数据，作为一个案例研究，我将执行提取该平台上顶级作家(或博客)列表及其追随者数量的场景。这种做法有很多好处，比如选择影响者营销作为数字营销策略。</p><blockquote class="mc md me"><p id="ea1c" class="lg lh mf li b lj lk kb ll lm ln ke lo mg lq lr ls mh lu lv lw mi ly lz ma mb ik bi translated">“数据抓取或网页抓取是从网站或应用程序(人类可读的输出)中提取信息并将其保存在电子表格或本地文件中的一种形式。这种技术并不违法，但其目的和应用方式可能违法。”<br/> — <a class="ae lf" href="https://betterprogramming.pub/data-scraping-tools-7cb76eeab89e" rel="noopener ugc nofollow" target="_blank">什么是数据抓取？</a></p></blockquote><p id="e03f" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">读完这篇文章后，你将对如何创建和运行Node.js项目(如果你还没有的话)以及如何使用库来抓取web有一个功能性的了解。</p><p id="2028" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">所以，事不宜迟，我们开始吧。</p></div><div class="ab cl mj mk hv ml" role="separator"><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo mp"/><span class="mm bw bk mn mo"/></div><div class="ik il im in io"><h1 id="3e68" class="mq mr ir bd ms mt mu mv mw mx my mz na kg nb kh nc kj nd kk ne km nf kn ng nh bi translated">为什么要刮擦？</h1><p id="c819" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">作为一个网页抓取者，你正在执行具有挑战性的任务。例如，您需要确保您的请求不会被目标站点阻止。</p><p id="0c48" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">但是好消息是你不需要自己做这些。市场上有一些工具可以提供必要的基础设施和技术来实现你的努力。通过使用网页抓取工具，您将受益于以下功能:</p><ul class=""><li id="87ee" class="nn no ir li b lj lk lm ln lp np lt nq lx nr mb ns nt nu nv bi translated">绕过验证码</li><li id="47a6" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated">自动IP轮换，防止IP被封锁。</li><li id="3cf6" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated">JavaScript渲染</li><li id="599d" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated">将提取的数据导出到JSON、文本文件、HTML、CSV等。</li></ul><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div class="gi gj ob"><img src="../Images/78f325d4911434ba72945d4a2fe696bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*_LqVE-0j4bAPzr2z.png"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk"><a class="ae lf" href="https://scrapingant.com/?ref=rakiabensassi" rel="noopener ugc nofollow" target="_blank">ScrapingAnt</a></figcaption></figure><p id="08c6" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated"><a class="ae lf" href="https://scrapingant.com/?ref=rakiabensassi" rel="noopener ugc nofollow" target="_blank"> ScrapingAnt </a>是一种刮削工具，具有以下优点:</p><ul class=""><li id="7561" class="nn no ir li b lj lk lm ln lp np lt nq lx nr mb ns nt nu nv bi translated">一个web抓取API，运行数百个Chrome浏览器集群，以执行Web抓取任务。</li><li id="4b4a" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated">代理多样性和轮换。</li><li id="3354" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated">支持Python，JavaScript和<strong class="li jb">任何可以进行API调用的编程语言</strong>。</li><li id="acf1" class="nn no ir li b lj nw lm nx lp ny lt nz lx oa mb ns nt nu nv bi translated"><strong class="li jb">10.000 API积分的免费计划</strong>，包括:JavaScript渲染、自定义cookies、输出预处理、基本电子邮件支持和文档。</li></ul><p id="352d" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">空谈不值钱。让我们创建一些代码，看看如何用一个简单的脚本实现我们的目标。如果你喜欢看，这里有一个视频:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="oc od l"/></div></figure><h1 id="be5c" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">步骤1:创建Node.js项目</h1><p id="fde3" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">要创建一个包含<code class="fe oj ok ol om b">package.json</code>文件的新<a class="ae lf" href="https://levelup.gitconnected.com/7-nodejs-vulnerabilities-149094e441c2" rel="noopener ugc nofollow" target="_blank"> Node.js </a>项目，您需要创建一个新文件夹，转到该文件夹，然后运行<code class="fe oj ok ol om b">npm init</code>并根据需要给出一些细节，如下面的截图所示:</p><pre class="kq kr ks kt gu on om oo op aw oq bi"><span id="86d6" class="or mr ir om b gz os ot l ou ov">mkdir web-scrapping</span><span id="683f" class="or mr ir om b gz ow ot l ou ov">cd web-scrapping</span><span id="9316" class="or mr ir om b gz ow ot l ou ov">npm init</span></pre><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj ox"><img src="../Images/e361425419eb49ec1583b23c09cb63b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVZ4po2gKMPEtPrOhkQSDQ.png"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">The output of running the “npm init” command to create a new Node.js project (image by author)</figcaption></figure><h1 id="f4eb" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">步骤2:安装并调用所需的库</h1><p id="7ba1" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">然后安装我们的应用程序所需的两个依赖项:</p><pre class="kq kr ks kt gu on om oo op aw oq bi"><span id="0c7c" class="or mr ir om b gz os ot l ou ov">npm install @scrapingant/scrapingant-client<br/>npm install cheerio</span></pre><h2 id="12e0" class="or mr ir bd ms oy oz dn mw pa pb dp na lp pc pd nc lt pe pf ne lx pg ph ng ix bi translated">报废客户</h2><p id="112a" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">我们不使用HTTP客户端来查询目标网站或web应用程序，而是使用<code class="fe oj ok ol om b">scrapingant-client</code>库，因为它已经在其实现中利用了HTTP客户端，正如您在<code class="fe oj ok ol om b">ScrapingAntClient</code>类中看到的:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="pi od l"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">The <a class="ae lf" href="https://scrapingant.com/?ref=rakiabensassi" rel="noopener ugc nofollow" target="_blank">ScrapingAnt</a> client class</figcaption></figure><h2 id="24eb" class="or mr ir bd ms oy oz dn mw pa pb dp na lp pc pd nc lt pe pf ne lx pg ph ng ix bi translated">再见</h2><p id="266c" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">在向我们的目标网页发送请求并收到响应之后，我们需要解析DOM以便提取我们想要的数据。</p><p id="328b" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated"><code class="fe oj ok ol om b">cheerio</code>是一个高效的轻量级库，它公开了一个API来解析和操作DOM。它允许您在服务器端使用丰富而强大的jQuery API:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="pi od l"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">Example of using cheerio to parse the DOM</figcaption></figure><h2 id="a187" class="or mr ir bd ms oy oz dn mw pa pb dp na lp pc pd nc lt pe pf ne lx pg ph ng ix bi translated">@类型/节点</h2><p id="fbe6" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">安装<code class="fe oj ok ol om b">@types/node</code>以便能够使用<code class="fe oj ok ol om b">require()</code>方法导入依赖项:</p><pre class="kq kr ks kt gu on om oo op aw oq bi"><span id="65c9" class="or mr ir om b gz os ot l ou ov">npm<!-- --> install --save-dev @types/node</span></pre><p id="76e5" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">转到您的项目入口点——它是项目根文件夹下的<code class="fe oj ok ol om b">index.js</code>文件，如果您没有给它起不同的名字的话(在我的项目中，我把它命名为<code class="fe oj ok ol om b">scraper.js</code>)——并调用其中所需的库:</p><pre class="kq kr ks kt gu on om oo op aw oq bi"><span id="47bb" class="or mr ir om b gz os ot l ou ov">const client  = require('@scrapingant/scrapingant-client');<br/>const cheerio = require('cheerio');</span></pre><h1 id="cd87" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">第三步:选择你需要刮的目标</h1><p id="5091" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">我选择了这个网页<code class="fe oj ok ol om b">https://medium.com/tag/<strong class="li jb">${tag}</strong></code>,并想收集顶级作家的名单以及他们的追随者数量。</p><p id="be3e" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">在将参数<code class="fe oj ok ol om b"><strong class="li jb">${tag}</strong></code>替换为适当的标签名称后，例如<em class="mf"> leadership </em>、<em class="mf"> startup </em>、<em class="mf"> technology </em>、<em class="mf">creative</em>等等，我们将得到正确的列表，如下图所示，右侧显示了标签“<em class="mf"> tech </em>的顶级作者列表:</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj pj"><img src="../Images/a5e0c91a4a72c30080b9dc935adce55d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5frAEZls881g8PYv6Zo9Q.png"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">Medium Top Writers web page (image by author)</figcaption></figure><h1 id="f191" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">步骤4:设置URL并检查响应</h1><p id="fea0" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">在我的Node JS项目的根文件夹下，我有一个包含以下代码的脚本<code class="fe oj ok ol om b">scraper.js</code>——在亲自尝试之前，您只需要将您的<a class="ae lf" href="https://scrapingant.com/?ref=rakiabensassi" rel="noopener ugc nofollow" target="_blank"> ScrapingAnt </a> API键设置为常量<code class="fe oj ok ol om b">SCRAPINT_ANT_KEY</code>的值:</p><figure class="kq kr ks kt gu ku"><div class="bz fq l di"><div class="pi od l"/></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">Node.JS Web scraper with <a class="ae lf" href="https://scrapingant.com/?ref=rakiabensassi" rel="noopener ugc nofollow" target="_blank">ScrapingAnt</a> for Medium Top Writers</figcaption></figure><h1 id="a97f" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">第五步:运行它</h1><p id="6f2a" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">现在，您所要做的就是启动您的终端，并在命令提示符下调用node脚本:</p><pre class="kq kr ks kt gu on om oo op aw oq bi"><span id="4859" class="or mr ir om b gz os ot l ou ov">node scraper.js</span></pre><p id="50c3" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">根据您在脚本中设置的标签数量，以及每个标签的顶级作者列表的长度，您会注意到返回结果需要一些时间。请耐心等待，然后您将在控制台上获得类似以下摘录的JSON数据:</p><figure class="kq kr ks kt gu ku gi gj paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gi gj pk"><img src="../Images/974b63c52ffc9756937ac2058251d90e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u4aGVPWTaeKBjdSEVzptIw.png"/></div></div><figcaption class="lb lc gk gi gj ld le bd b be z dk">An extract of the JSON list of Top Writers (image by author)</figcaption></figure><p id="54fc" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated">感谢阅读！希望你能对一些商业想法或如何自动化一些令人生畏的任务获得一些见解或灵感。</p><h1 id="0959" class="mq mr ir bd ms mt oe mv mw mx of mz na kg og kh nc kj oh kk ne km oi kn ng nh bi translated">想要更多吗？</h1><p id="dad6" class="pw-post-body-paragraph lg lh ir li b lj ni kb ll lm nj ke lo lp nk lr ls lt nl lv lw lx nm lz ma mb ik bi translated">我为一群聪明、好奇的🧠人写关于工程、技术和领导力的文章💡。<a class="ae lf" href="https://rakiabensassi.substack.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="li jb">加入我的免费电子邮件简讯</strong> </a>或者在这里注册Medium <a class="ae lf" href="https://rakiabensassi.medium.com/membership" rel="noopener">如果你还没有做的话🤗</a></p><div class="pl pm gq gs pn po"><a href="https://entrepreneurshandbook.co/how-to-make-it-big-in-data-industry-44893d7381fe" rel="noopener follow" target="_blank"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd jb gz z fq pt fs ft pu fv fx ja bi translated">危机时刻奥列格和安德鲁如何在数据行业大展拳脚</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">每片乌云都有一线光明。只要有点创造力，你就可以将危机转化为机遇。</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">entrepreneurshandbook.co</p></div></div><div class="px l"><div class="py l pz qa qb px qc kz po"/></div></div></a></div><div class="pl pm gq gs pn po"><a href="https://levelup.gitconnected.com/how-to-become-a-legitimate-system-architect-3ccf686e9712" rel="noopener  ugc nofollow" target="_blank"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd jb gz z fq pt fs ft pu fv fx ja bi translated">如何从一个代码猴子变成一个合法的系统架构师</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">如何进入软件工程师的下一阶段的6个技巧</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="px l"><div class="qd l pz qa qb px qc kz po"/></div></div></a></div><h2 id="2738" class="or mr ir bd ms oy oz dn mw pa pb dp na lp pc pd nc lt pe pf ne lx pg ph ng ix bi translated">进一步阅读</h2><div class="pl pm gq gs pn po"><a rel="noopener  ugc nofollow" target="_blank" href="/automate-web-scraping-with-an-easy-to-use-browser-extension-cb6073f1e61d"><div class="pp ab fp"><div class="pq ab pr cl cj ps"><h2 class="bd jb gz z fq pt fs ft pu fv fx ja bi translated">使用易于使用的浏览器扩展自动抓取网页</h2><div class="pv l"><h3 class="bd b gz z fq pt fs ft pu fv fx dk translated">如何使用Listly，一个初学者友好的无代码工具，轻松实现web抓取过程的自动化。</h3></div><div class="pw l"><p class="bd b dl z fq pt fs ft pu fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="px l"><div class="qe l pz qa qb px qc kz po"/></div></div></a></div><p id="3a58" class="pw-post-body-paragraph lg lh ir li b lj lk kb ll lm ln ke lo lp lq lr ls lt lu lv lw lx ly lz ma mb ik bi translated"><em class="mf">更多内容看</em> <a class="ae lf" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li jb"> <em class="mf">说白了就是io </em> </strong> </a> <em class="mf">。报名参加我们的</em> <a class="ae lf" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="li jb"> <em class="mf">免费周报</em> </strong> </a> <em class="mf">。关注我们关于</em> <a class="ae lf" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="li jb"> <em class="mf">推特</em> </strong> </a>，<a class="ae lf" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"> <strong class="li jb"> <em class="mf">领英</em> </strong> </a> <em class="mf">，</em><a class="ae lf" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="li jb"><em class="mf">YouTube</em></strong></a><em class="mf"/><a class="ae lf" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="li jb"><em class="mf">不和</em> </strong> </a> <em class="mf">。</em></p></div></div>    
</body>
</html>
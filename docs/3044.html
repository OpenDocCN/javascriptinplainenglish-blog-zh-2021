<html>
<head>
<title>All about Performance Optimization in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的性能优化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/all-you-need-to-know-about-performance-optimization-in-reactjs-89150db61556?source=collection_archive---------14-----------------------#2021-06-20">https://javascript.plainenglish.io/all-you-need-to-know-about-performance-optimization-in-reactjs-89150db61556?source=collection_archive---------14-----------------------#2021-06-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/54fcae7506d1250e0077752e440228d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bx8YaOyxxpwSbCcbvIBgVQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Picture: <a class="ae jz" href="https://railsware.com/blog/why-use-react/" rel="noopener ugc nofollow" target="_blank">Railsware</a></figcaption></figure><p id="cdf8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">性能优化是一个流程，它使您的服务器尽可能高效，以便更快地提供web内容。</p><p id="c3d2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">总的来说，React以其令人难以置信的速度而闻名，性能是它的一大优势。React用于此目的的特性有虚拟DOM、服务器端呈现、捆绑支持和树抖动。因此，我们将看看如何使您的React应用程序高效的几种方法。</p><h2 id="f3d9" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated"><a class="ae jz" href="https://reactjs.org/docs/optimizing-performance.html" rel="noopener ugc nofollow" target="_blank">优化技术:</a></h2><p id="6475" class="pw-post-body-paragraph ka kb in kc b kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated"><strong class="kc io"> 1。使用生产版本</strong></p><p id="88fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果有任何性能问题，您应该使用缩小的产品版本。虽然，React默认给出了在开发中有用的警告，但是为了确保构建过程使用<a class="ae jz" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" rel="noopener ugc nofollow" target="_blank"> React开发工具</a>。</p><p id="72dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 2。用于分析组件的DevTools profilier】</strong></p><p id="8b1d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe lw lx ly lz b">react-dom</code> 16.5+和<code class="fe lw lx ly lz b">react-native</code> 0.57+通过React DevTools Profiler在开发模式下提供了增强的分析功能。</p><p id="76c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 3。长长的虚拟化列表</strong></p><p id="2efc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您的应用程序呈现很长的数据列表(数百或数千行)，一种称为“窗口”的技术在任何给定时间只呈现一小部分行。它可以极大地减少重新渲染组件以及创建DOM节点的时间。<a class="ae jz" href="https://react-window.now.sh/" rel="noopener ugc nofollow" target="_blank"> react-window </a>和<a class="ae jz" href="https://bvaughn.github.io/react-virtualized/" rel="noopener ugc nofollow" target="_blank"> react-virtualized </a>是著名的窗口库。</p><p id="a934" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 4。避免对帐</strong></p><p id="62dd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">调和是在react中更新DOM的过程。React构建并维护呈现的UI的内部表示。它包括从组件返回的React元素。这种表示让React避免创建DOM节点和访问不必要的现有节点，因为这可能比JavaScript对象上的操作要慢。</p><p id="b508" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 5。使用shouldComponentUpdate </strong></p><p id="9efe" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">即使React只更新更改的DOM节点，重新渲染仍然需要一些时间。在许多情况下，这不是问题，但如果速度明显下降，您可以通过覆盖生命周期函数<code class="fe lw lx ly lz b">shouldComponentUpdate</code>来加快速度，这是在重新渲染过程开始之前触发的。这个函数的默认实现返回<code class="fe lw lx ly lz b">true</code>，让React执行更新。如果你知道在某些情况下你的组件不需要更新，你可以从<code class="fe lw lx ly lz b">shouldComponentUpdate</code>返回<code class="fe lw lx ly lz b">false</code>，跳过整个渲染过程，包括调用这个组件上的<code class="fe lw lx ly lz b">render()</code>和下面的。</p><p id="8e7f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> 6。无数据突变</strong></p><p id="24f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">避免这个问题的最简单的方法是避免改变您用作道具或状态的值。ES6支持数组的<a class="ae jz" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_operator" rel="noopener ugc nofollow" target="_blank">扩展语法</a>，这可以使这变得更容易。</p><p id="a1d1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当您处理深度嵌套的对象时，以一种不可变的方式更新它们会让人感觉很复杂。如果你遇到这个问题，请查看<a class="ae jz" href="https://github.com/mweststrate/immer" rel="noopener ugc nofollow" target="_blank"> Immer </a>或<a class="ae jz" href="https://github.com/kolodny/immutability-helper" rel="noopener ugc nofollow" target="_blank">immutanbility-helper</a>。这些库让您可以编写可读性很高的代码，而不会失去不变性的好处。</p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="2980" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在思考优化的同时，下一个问题浮现在脑海里，<strong class="kc io">我们应该什么时候进行优化？</strong>所以，项目一开始就不用担心。因为如果你担心太多，你会浪费时间和资源，因为事情可能会变得复杂。当您注意到系统性能滞后时，您可以这样做。</p><p id="660e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">“我们应该忘记小的效率，比如说97%的时候:过早的优化是万恶之源”</strong></p><p id="8af0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">- <em class="mh">唐纳德·克努特</em></p></div><div class="ab cl ma mb hr mc" role="separator"><span class="md bw bk me mf mg"/><span class="md bw bk me mf mg"/><span class="md bw bk me mf"/></div><div class="ig ih ii ij ik"><p id="0701" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">优化不应该与编码最佳实践相混淆。始终建议遵循编码约定，这有助于更好地执行react应用程序。以下是其中的一些:</p><blockquote class="mi mj mk"><p id="48fd" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">在高阶函数上使用钩子。</p><p id="f3bd" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">析构属性并定义它们的类型(如果尚未定义)。</p><p id="7cf3" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">使用无状态函数来避免重新渲染。</p><p id="6c37" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">有条件地呈现。</p><p id="cd86" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">使用<a class="ae jz" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>(对于javascript)或<a class="ae jz" href="https://www.npmjs.com/package/tslint" rel="noopener ugc nofollow" target="_blank"> TSLint </a>(对于类型脚本)</p><p id="765b" class="ka kb mh kc b kd ke kf kg kh ki kj kk ml km kn ko mm kq kr ks mn ku kv kw kx ig bi translated">React开发者工具(<a class="ae jz" href="https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en" rel="noopener ugc nofollow" target="_blank"> chrome扩展</a>)用于调试。</p></blockquote><p id="5da9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一集，你可以了解更多关于过早优化的知识。</p><div class="mo mp gp gr mq mr"><a href="https://saba-saif.medium.com/examples-of-premature-optimization-ecff9eac67b7" rel="noopener follow" target="_blank"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd io gy z fp mw fr fs mx fu fw im bi translated">过早优化的例子</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">在上一集，我们已经了解了如何、何时以及为什么进行优化。在这篇文章中，你将…</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">saba-saif.medium.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf jt mr"/></div></div></a></div><h2 id="240c" class="ky kz in bd la lb lc dn ld le lf dp lg kl lh li lj kp lk ll lm kt ln lo lp lq bi translated">进一步阅读</h2><div class="mo mp gp gr mq mr"><a rel="noopener  ugc nofollow" target="_blank" href="/5-tools-practices-to-help-you-develop-faster-in-react-b884c1b20fc2"><div class="ms ab fo"><div class="mt ab mu cl cj mv"><h2 class="bd io gy z fp mw fr fs mx fu fw im bi translated">帮助您在React中更快开发的5种工具和实践</h2><div class="my l"><h3 class="bd b gy z fp mw fr fs mx fu fw dk translated">React工具、技巧和最佳实践将帮助您更快地构建应用</h3></div><div class="mz l"><p class="bd b dl z fp mw fr fs mx fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="na l"><div class="ng l nc nd ne na nf jt mr"/></div></div></a></div><p id="435d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mh">更多内容看</em> <a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mh">说白了。报名参加我们的</em> <a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mh">免费周报</em> </strong> </a> <em class="mh">。关注我们关于</em> <a class="ae jz" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="mh">推特</em></strong></a><a class="ae jz" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mh">LinkedIn</em></strong></a><em class="mh"/><a class="ae jz" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mh">YouTube</em></strong></a><em class="mh"/><a class="ae jz" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mh">不和</em> </strong> </a> <em class="mh">。</em></strong></a></p></div></div>    
</body>
</html>
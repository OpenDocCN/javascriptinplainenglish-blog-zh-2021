<html>
<head>
<title>State Management Using React Hooks in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中使用React挂钩进行状态管理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/state-management-using-react-hooks-in-react-native-5f12895d29a8?source=collection_archive---------9-----------------------#2021-02-04">https://javascript.plainenglish.io/state-management-using-react-hooks-in-react-native-5f12895d29a8?source=collection_archive---------9-----------------------#2021-02-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="9774" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">有了React钩子，我们可以使用state、componentDidMount、componentDidUpdate和其他React特性，而无需使用类组件。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a38da4a59ccedd0d2724a74c3a4a2f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T7BcRxv4BUIcAxSh"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@evangelineshaw?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Evangeline Shaw</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ab3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我们谈一点React挂钩，然后我们将在React Native中实现它们。</p><p id="a1db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">2018年，索菲·阿尔珀特和丹·阿布拉莫夫推出了Hooks。你可以在这里看。强烈建议看。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ls lt l"/></div></figure><h2 id="c5ff" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lf md me mf lj mg mh mi ln mj mk ml mm bi translated"><strong class="ak">什么是React钩子？</strong></h2><p id="4ac1" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">根据reactjs.org<a class="ae kv" href="https://reactjs.org/docs/hooks-overview.html#:~:text=Hooks%20are%20functions%20that%20let,you%20use%20React%20without%20classes.&amp;text=You%20can%20also%20create%20your,stateful%20behavior%20between%20different%20components." rel="noopener ugc nofollow" target="_blank">的说法，钩子是让你从功能组件中“挂钩”反应状态和生命周期特性的功能。钩子在类内部不起作用——它们让你在没有类的情况下使用React。</a></p><p id="5255" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">简单来说，React钩子让我们不用类组件就可以使用State、componentDidMount、componentDidUpdate和其他React特性。</p><h2 id="3550" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lf md me mf lj mg mh mi ln mj mk ml mm bi translated"><strong class="ak">为什么有必要？</strong></h2><p id="cb47" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">在引入钩子之前，我们只能在类组件中使用状态。</p><p id="8a14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们不能使用功能组件进行状态管理。</p><h2 id="87a9" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lf md me mf lj mg mh mi ln mj mk ml mm bi translated"><strong class="ak">有什么优势吗？</strong></h2><p id="cec5" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">是的，它使代码更短，可读性更好。更重要的是，我们可以在功能组件内部使用它。我将在这篇文章的后面进行比较。</p><h1 id="0e74" class="ms lv iq bd lw mt mu mv lz mw mx my mc jw mz jx mf jz na ka mi kc nb kd ml nc bi translated">理解和练习React挂钩</h1><p id="03eb" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">让我们用React.js文档提供的一个例子<a class="ae kv" href="https://reactjs.org/docs/hooks-state.html" rel="noopener ugc nofollow" target="_blank">来练习钩子。</a></p><p id="160b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，从类组件开始。</p><p id="8b94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">我们使用类组件来使用状态。</strong></p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="883e" class="lu lv iq ne b gy ni nj l nk nl">class Example extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      count: 0<br/>    };<br/>  }<br/><br/>  render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;p&gt;You clicked {this.state.count} times&lt;/p&gt;<br/>        &lt;button onClick={() =&gt; this.setState({ count: this.state.count + 1 })}&gt;<br/>          Click me<br/>        &lt;/button&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="d324" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里，我们使用了带有构造函数的类组件来存储状态值。</p><p id="7aae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在render函数中，我们放置了一个匿名函数来改变状态。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="bdf7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在比较使用钩子的功能组件中的同一个例子。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="6fe3" class="lu lv iq ne b gy ni nj l nk nl">import React, { useState } from 'react';<br/><br/>function Example() {<br/>  // Declare a new state variable, which we'll call "count" <br/> const [count, setCount] = useState(0);<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;p&gt;You clicked {count} times&lt;/p&gt;<br/>      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;<br/>        Click me<br/>      &lt;/button&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="5581" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本例中，我们从React导入了useState，因为我们将在功能组件中使用状态。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="8866" class="lu lv iq ne b gy ni nj l nk nl">import React, { useState } from 'react';</span></pre><p id="208a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在函数组件内部，我们传递两个变量名作为count和setCount。</p><p id="b56e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以根据自己的喜好来命名。</p><p id="2d68" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们在useState中指定一个初始值为0。简单来说，计数为0。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="d17d" class="lu lv iq ne b gy ni nj l nk nl">[count, setCount] = useState(0);</span></pre><p id="985e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在在<p>标签中，我们将显示输出。当我们点击按钮时，计数增加1。</p></p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="462e" class="lu lv iq ne b gy ni nj l nk nl">      &lt;p&gt;You clicked {count} times&lt;/p&gt;<br/>      &lt;button onClick={() =&gt; setCount(count + 1)}&gt;<br/>        Click me<br/>      &lt;/button&gt;</span></pre><p id="0105" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我相信你对React钩子有所了解。如果没有，那么你肯定可以再读一遍。</p><h1 id="667f" class="ms lv iq bd lw mt mu mv lz mw mx my mc jw mz jx mf jz na ka mi kc nb kd ml nc bi translated">在React Native中实现状态管理</h1><p id="08ce" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">现在我们将使用钩子在React Native中实现state。</p><p id="0dfe" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，您需要<a class="ae kv" href="https://medium.com/javascript-in-plain-english/getting-started-with-react-native-for-beginners-958d39fee16a" rel="noopener">来设置您的React Native </a>环境。</p><div class="nt nu gp gr nv nw"><a href="https://medium.com/javascript-in-plain-english/getting-started-with-react-native-for-beginners-958d39fee16a" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">面向初学者的React Native入门</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">学习所有你想知道的关于React Native的知识。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><p id="98df" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">想玩吗？我挑战你用Expo创建一个React本地项目。</p><p id="42fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">您可以随意命名该文件夹。我将把它命名为usingstate。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/37f24dbda4d81dbbe4d38b3e1fb3aac4.png" data-original-src="https://miro.medium.com/v2/resize:fit:520/format:webp/1*FM8ARCwNutDtgTmE_AwF0Q.png"/></div></figure><p id="db4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不能成功，遵循上述指南。</p><p id="e76e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">App.js是我们必须更改代码并运行的主要文件。</p><p id="a7d1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">因此，单击App.js文件，并将完整的代码粘贴到其中。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="64bb" class="lu lv iq ne b gy ni nj l nk nl">import React, {useState} from ‘react’;<br/>import { StyleSheet, Text, View, Button } from ‘react-native’;</span><span id="d015" class="lu lv iq ne b gy om nj l nk nl">export default function App() {</span><span id="708f" class="lu lv iq ne b gy om nj l nk nl">const [name, updateName] = useState(‘Nitin’);</span><span id="764f" class="lu lv iq ne b gy om nj l nk nl">const buttonHandler = () =&gt; {<br/>   updateName(‘John’);<br/>}</span><span id="510a" class="lu lv iq ne b gy om nj l nk nl">return (<br/>&lt;View style={styles.container}&gt;<br/>  &lt;Text&gt; My name is {name}.&lt;/Text&gt;<br/>  &lt;View style = {styles.buttonContainer}&gt;<br/>     &lt;Button title=’change state’ onPress={buttonHandler}/&gt;<br/>  &lt;/View&gt;<br/>&lt;/View&gt;<br/>);<br/>}</span><span id="85ac" class="lu lv iq ne b gy om nj l nk nl">const styles = StyleSheet.create({<br/>container: {<br/>  flex: 1,<br/>  backgroundColor: ‘#fff’,<br/>  alignItems: ‘center’,<br/>  justifyContent: ‘center’,<br/>},<br/>buttonContainer: {<br/>  padding: 20<br/>}<br/>});</span></pre><p id="d49f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你明白了，就拍拍自己的背。否则，我在这里向你解释。我已经用一个简单的程序向大家解释过了。</p><p id="be75" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，我已经从React和React Native导入了组件。</p><p id="a562" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们导入了React，因为React Native在React上工作。类似地，useState用于使用钩子。</p><p id="7869" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">用于应用样式的样式表。文本、视图和按钮组件分别用于添加文本、div和按钮。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="1c1b" class="lu lv iq ne b gy ni nj l nk nl">import React, {useState} from ‘react’;<br/>import { StyleSheet, Text, View, Button } from ‘react-native’;</span></pre><p id="8df5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">之后，我们使用了React钩子的概念。最初，名字等于Nitin。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="a60d" class="lu lv iq ne b gy ni nj l nk nl">const [name, updateName] = useState(‘Nitin’);</span></pre><p id="9e02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在功能组件中，我们使用了视图、文本和按钮组件。</p><p id="3a14" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们使用视图组件时，我们已经对它应用了样式。</p><p id="af0d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们单击按钮组件时，文本组件将改变它的名称。</p><p id="8c94" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，在Button组件中，我们添加了调用buttonHandler的onPress函数。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="dfc3" class="lu lv iq ne b gy ni nj l nk nl">return (<br/>&lt;View style={styles.container}&gt;<br/>  &lt;Text&gt; My name is {name}.&lt;/Text&gt;<br/>  &lt;View style = {styles.buttonContainer}&gt;<br/>     &lt;Button title=’change state’ onPress={buttonHandler}/&gt;<br/>  &lt;/View&gt;<br/>&lt;/View&gt;<br/>);</span></pre><h2 id="4995" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lf md me mf lj mg mh mi ln mj mk ml mm bi translated">【buttonHandler是做什么的？</h2><p id="3d4a" class="pw-post-body-paragraph kw kx iq ky b kz mn jr lb lc mo ju le lf mp lh li lj mq ll lm ln mr lp lq lr ij bi translated">buttonHandler将更新名称。</p><p id="9ab5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它看起来有些不同，对吧。因为它是一个箭头函数。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="e382" class="lu lv iq ne b gy ni nj l nk nl">const buttonHandler = () =&gt; {<br/>   updateName(‘John’);<br/>}</span></pre><p id="c54c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们向容器和buttonContainer添加了一些样式。</p><pre class="kg kh ki kj gt nd ne nf ng aw nh bi"><span id="88a1" class="lu lv iq ne b gy ni nj l nk nl">const styles = StyleSheet.create({<br/>container: {<br/>  flex: 1,<br/>  backgroundColor: ‘#fff’,<br/>  alignItems: ‘center’,<br/>  justifyContent: ‘center’,<br/>},<br/>buttonContainer: {<br/>  padding: 20<br/>}<br/>});</span></pre><p id="6657" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">使用<code class="fe on oo op ne b">expo start</code>或<code class="fe on oo op ne b">npm start</code>运行。</p><p id="0f70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后单击手机或模拟器上的按钮。你将会看到变化。</p><p id="eb3a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望你喜欢这篇文章，并从中学到一些东西。这就是我的意图！</p><p id="19e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir"> <em class="oq">如果你喜欢我的工作，想要支持，可以</em> </strong> <a class="ae kv" href="https://www.buymeacoffee.com/nitinfab" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="oq">请我喝杯咖啡！</em> </strong> </a></p><p id="434c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">谢谢你。</p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><h2 id="468c" class="lu lv iq bd lw lx ly dn lz ma mb dp mc lf md me mf lj mg mh mi ln mj mk ml mm bi translated">进一步阅读</h2><div class="nt nu gp gr nv nw"><a href="https://medium.com/javascript-in-plain-english/getting-started-with-react-native-for-beginners-958d39fee16a" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">面向初学者的React Native入门</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">学习所有你想知道的关于React Native的知识。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://medium.com/javascript-in-plain-english/80-free-resources-for-web-designers-and-web-developers-in-2021-f400be2875ea" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">2021年为网页设计师和网页开发者提供80+免费资源。</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">成为网页开发者的完整指南。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="or l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://medium.com/javascript-in-plain-english/a-beginners-guide-to-react-router-34b4e86fded3" rel="noopener follow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">React路由器初学者指南</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">使用react-router-dom轻松导航到不同的屏幕。</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">medium.com</p></div></div><div class="of l"><div class="os l oh oi oj of ok kp nw"/></div></div></a></div></div></div>    
</body>
</html>
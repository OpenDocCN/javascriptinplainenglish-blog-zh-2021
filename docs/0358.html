<html>
<head>
<title>Factory Functions in JavaScript Explained With Examples</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用例子解释JavaScript中的工厂函数</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/factory-functions-in-javascript-explained-with-examples-8b93e98de117?source=collection_archive---------4-----------------------#2021-01-21">https://javascript.plainenglish.io/factory-functions-in-javascript-explained-with-examples-8b93e98de117?source=collection_archive---------4-----------------------#2021-01-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="95f7" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">通过示例了解JavaScript中的工厂函数。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/f47280107b58bc431a8097fe53ff5539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxOMG5TRLUNZ0K-3nrCBGg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://www.pexels.com/fr-fr/@cottonbro" rel="noopener ugc nofollow" target="_blank">Cottonbro</a> on <a class="ae kv" href="https://www.pexels.com/" rel="noopener ugc nofollow" target="_blank">Pexels</a>.</figcaption></figure><p id="bfec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">工厂函数在JavaScript中一直很有吸引力，因为它们提供了在不使用<code class="fe ls lt lu lv b">new</code>关键字或类的情况下轻松生成对象实例的能力。</p><p id="2f1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将通过一些实例来学习JavaScript中的工厂函数。让我们开始吧。</p><h1 id="8d73" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">什么是工厂功能？</h1><p id="a01c" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">工厂函数只是一个返回新对象的<em class="mt">函数</em>。</p><p id="8d20" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">工厂函数不需要使用<code class="fe ls lt lu lv b">new</code>关键字，但是仍然可以用来初始化对象，就像构造函数一样。</p><p id="7454" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们来看看一些实际的例子:</p><p id="9ed6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">首先，让我们创建一个对象<code class="fe ls lt lu lv b">user1</code>，它给出了一个用户的信息:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3a4b" class="my lx iq lv b gy mz na l nb nc">let user1 = {<br/>    name: 'Mehdi',<br/>    age: 19,<br/>    getInfo() {<br/>        return <strong class="lv ir">this.name</strong> + ' is ' + <strong class="lv ir">this.age</strong> + ' years old.';<br/>    }<br/>};</span><span id="e47b" class="my lx iq lv b gy nd na l nb nc">console.log(<strong class="lv ir">user1.getInfo()</strong>);<br/>//Mehdi is 19 years old.</span></pre><p id="c07f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，对象<code class="fe ls lt lu lv b">user1</code>有两个属性:姓名和年龄。用一个方法<code class="fe ls lt lu lv b">getInfo()</code>以字符串的形式返回这些属性。</p><p id="19c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">比方说，您需要为另一个用户创建另一个对象<code class="fe ls lt lu lv b">user2</code>。您需要重新开始并复制代码，如下所示:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="d64d" class="my lx iq lv b gy mz na l nb nc">let user2 = {<br/>    name: 'John',<br/>    age: 29,<br/>    getInfo() {<br/>        return <strong class="lv ir">this.name</strong> + ' is ' + <strong class="lv ir">this.age</strong> + ' years old.';<br/>    }<br/>};</span><span id="1385" class="my lx iq lv b gy nd na l nb nc">console.log(<strong class="lv ir">user2.getInfo()</strong>);<br/>//John is 29 years old.</span></pre><p id="e8d5" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你必须为另外100个用户做同样的事情呢？需要再创建100个对象吗？</p><p id="d104" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了避免再次复制相同的代码，我们将需要使用JavaScript工厂函数<strong class="ky ir">来为我们创建对象，而不需要使用<code class="fe ls lt lu lv b">new</code>关键字或深入复杂的类。</strong></p><p id="f9a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的例子显示了一个创建用户对象的工厂函数<code class="fe ls lt lu lv b">createUser</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7f79" class="my lx iq lv b gy mz na l nb nc">function <strong class="lv ir">createUser(name, age)</strong> {<br/>    return {<br/>        name: name,<br/>        age: age,<br/>        getInfo() {<br/>            return <strong class="lv ir">name</strong> + ' is ' + <strong class="lv ir">age</strong> + ' years old.';<br/>        }<br/>    }<br/>}</span></pre><p id="bfa3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，函数<code class="fe ls lt lu lv b">createUser</code>返回一个对象，这就是为什么我们称它为工厂函数。现在我们可以使用它来创建用户的对象。</p><p id="568d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">下面的代码使用<code class="fe ls lt lu lv b">createUser()</code>工厂函数创建三个对象<code class="fe ls lt lu lv b">Mehdi</code>、<code class="fe ls lt lu lv b">John</code>和<code class="fe ls lt lu lv b">Anna</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="fd3b" class="my lx iq lv b gy mz na l nb nc">let mehdi = createUser('Mehdi', 19);<br/>let john = createUser('John', 29);<br/>let anna = createUser('Anna', 25);</span><span id="d46c" class="my lx iq lv b gy nd na l nb nc">console.log(<strong class="lv ir">mehdi.getInfo()</strong>); //Mehdi is 19 years old.<br/>console.log(<strong class="lv ir">john.getInfo()</strong>); //John is 29 years old.<br/>console.log(<strong class="lv ir">anna.getInfo()</strong>); //Anna is 25 years old.</span></pre><p id="099a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如您所见，使用工厂函数，您可以创建任意数量的<code class="fe ls lt lu lv b">user</code>对象，而无需重复代码。</p><p id="ecec" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果你不喜欢ES5，下面是使用ES6语法的相同代码:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="c476" class="my lx iq lv b gy mz na l nb nc">const createUser = (<strong class="lv ir">name, age</strong>) =&gt;{<br/>    return {<br/>        <strong class="lv ir">name</strong>,<br/>        <strong class="lv ir">age</strong>,<br/>        getInfo() {<br/>            return `${<strong class="lv ir">name</strong>} is ${<strong class="lv ir">age</strong>} years old.`;<br/>        }<br/>    }<br/>}<br/>let mehdi = createUser('Mehdi', 19);<br/>let john = createUser('John', 29);<br/>let anna = createUser('Anna', 25);</span><span id="3f69" class="my lx iq lv b gy nd na l nb nc">console.log(mehdi.getInfo());<br/>console.log(john.getInfo());<br/>console.log(anna.getInfo());</span></pre><p id="8c08" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mt">输出:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/ba59419f4e345866e8e3aa089f994b6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*L1w8vRbDZzGmBkdy4xc3kA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The output from the console.</figcaption></figure><h1 id="6cd8" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">内存空间问题</h1><p id="0396" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">上面例子的唯一问题是，当你创建一个用户对象并把它存储在一个变量中时，这个对象需要一个内存空间，如果我们有数千个对象，它会影响代码的性能。</p><p id="d7c0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然而，所有对象都有相同的方法<code class="fe ls lt lu lv b">getInfo()</code>。所以我们可以将这个方法从工厂函数中移除，并将其存储在另一个单独的变量中，以避免重复使用。我们只会在需要的时候使用它。</p><p id="5d6d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将该方法从工厂函数中移除:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="35bf" class="my lx iq lv b gy mz na l nb nc">function <strong class="lv ir">createUser(name, age)</strong> {<br/>    return {<br/>        name: name,<br/>        age: age,<br/>    }<br/>}</span></pre><p id="ad1a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们将它存储在一个单独的变量中:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="7f5d" class="my lx iq lv b gy mz na l nb nc">const separated = {   <br/>  getInfo() {   <br/>      return `${this.name} is ${this.age} years old.`;<br/> } <br/>}</span></pre><p id="81e2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在用户对象上调用<code class="fe ls lt lu lv b">getInfo()</code>方法之前，您可以将对象<code class="fe ls lt lu lv b">seperated</code>的方法分配给用户对象，如下所示:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="4955" class="my lx iq lv b gy mz na l nb nc">let john = createUser('John', 29);<br/>let anna = createUser('Anna', 25);</span><span id="36c8" class="my lx iq lv b gy nd na l nb nc"><strong class="lv ir">john.getInfo = separated.getInfo;<br/>anna.getInfo = separated.getInfo;</strong></span><span id="73e3" class="my lx iq lv b gy nd na l nb nc">console.log(john.getInfo());<br/>console.log(anna.getInfo());</span></pre><p id="e16b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mt">输出:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e63cd8ca57cb676ac9b30f15a523b6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*bdh_BEjCtQM5_9PjgAGHEA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The output from the console.</figcaption></figure><p id="dd91" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这没问题，但是如果我们有很多对象，这又会变得更加困难和低效。这就是为什么你需要使用<code class="fe ls lt lu lv b">Object.create()</code>。</p><h1 id="8954" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">方法“Object.create()”</h1><p id="e28c" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">方法<code class="fe ls lt lu lv b">Object.create()</code>使用现有对象作为新对象的原型来创建新对象。</p><p id="fa0f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以如下使用<code class="fe ls lt lu lv b">Object.create()</code>:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="3f4f" class="my lx iq lv b gy mz na l nb nc">const separated = {   <br/>  getInfo() {   <br/>      return `${this.name} is ${this.age} years old.`;<br/> } <br/>}</span><span id="2689" class="my lx iq lv b gy nd na l nb nc">function createUser(name, age) {<br/>     <strong class="lv ir">let person = Object.create(separated);</strong><br/>     person.name = name;<br/>     person.age = age;<br/>     return person;<br/> }</span></pre><p id="7af2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您可以创建<code class="fe ls lt lu lv b">person</code>对象并调用<code class="fe ls lt lu lv b">separated</code>对象的方法:</p><pre class="kg kh ki kj gt mu lv mv mw aw mx bi"><span id="b1c8" class="my lx iq lv b gy mz na l nb nc">let john = createUser('John', 29);<br/>let anna = createUser('Jane', 25);</span><span id="c4dd" class="my lx iq lv b gy nd na l nb nc"><strong class="lv ir">console.log(john.getInfo());<br/>console.log(anna.getInfo());</strong></span></pre><p id="62ad" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mt">输出:</em></p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/e63cd8ca57cb676ac9b30f15a523b6a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:634/format:webp/1*bdh_BEjCtQM5_9PjgAGHEA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">The output from the console.</figcaption></figure><h1 id="485b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="9c64" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">正如您所看到的，使用工厂函数可能是一种很好的技术，它允许您在不使用<code class="fe ls lt lu lv b">new</code>关键字或类的情况下生成对象实例。但是当你有很多对象时，事情就变得更难了。这就是为什么我会推荐使用构造函数或者类。</p><p id="3a1b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢您阅读本文，希望您觉得有用。</p><h1 id="daae" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">更多阅读</h1><p id="5106" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated"><em class="mt">如果你对JavaScript和web开发相关的更有用的内容感兴趣，也可以</em> <a class="ae kv" href="https://mehdiouss.ck.page/" rel="noopener ugc nofollow" target="_blank"> <em class="mt">订阅</em> </a> <em class="mt">我的快讯。</em></p><p id="48d8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这里有另一篇有用的文章，请点击下面的链接:</p><div class="ng nh gp gr ni nj"><a href="https://medium.com/javascript-in-plain-english/5-powerful-ides-that-nobody-is-talking-about-c20ed0ae83ee" rel="noopener follow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">没有人谈论的5个强大的IDEs</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">一些你可能需要使用的有用的文本编辑器。</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div></div></div>    
</body>
</html>
<html>
<head>
<title>Create a Hi-Low Card Game with React and JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React和JavaScript创建一个高低牌游戏</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-hi-low-card-game-with-react-and-javascript-ed91755e3c05?source=collection_archive---------13-----------------------#2021-05-13">https://javascript.plainenglish.io/create-a-hi-low-card-game-with-react-and-javascript-ed91755e3c05?source=collection_archive---------13-----------------------#2021-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/5bb3b7976e0b6e6a169ed8eaf093beb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qvToRjG_LdKoYvJR"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@micheile?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Micheile Henderson</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6620" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">React是一个易于使用的JavaScript框架，让我们可以创建前端应用程序。</p><p id="497b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用React和JavaScript创建一个高低牌游戏。</p><h1 id="bcb5" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建项目</h1><p id="a1b8" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以用Create React App创建React项目。</p><p id="5322" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">要安装它，我们运行:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="011e" class="mn lc iq mj b gy mo mp l mq mr">npx create-react-app hi-low-card-game</span></pre><p id="5666" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和NPM一起创建我们的React项目。</p><h1 id="c534" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">创建高低牌游戏</h1><p id="e01d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了创建高低牌游戏，我们编写:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="38c6" class="mn lc iq mj b gy mo mp l mq mr">import React, { useEffect, useState } from "react";</span><span id="2d8e" class="mn lc iq mj b gy ms mp l mq mr">const suits = ["diamonds", "clubs", "hearts", "spades"];<br/>const values = ["ace", 2, 3, 4, 5, 6, 7, 8, 9, 10];<br/>const initCards = [];<br/>for (const s of suits) {<br/>  for (const v of values) {<br/>    initCards.push(`${s}_${v}`);<br/>  }<br/>}</span><span id="0373" class="mn lc iq mj b gy ms mp l mq mr">export default function App() {<br/>  const [score, setScore] = useState(0);<br/>  const [cards, setCards] = useState(<br/>    [...initCards].sort(() =&gt; Math.random() - 0.5)<br/>  );<br/>  const [drawnCards, setDrawnCards] = useState([]);<br/>  const [guess, setGuess] = useState("lower");</span><span id="64df" class="mn lc iq mj b gy ms mp l mq mr">  const draw = (e) =&gt; {<br/>    e.preventDefault();<br/>    setCards((cards) =&gt; cards.slice(0, cards.length - 1));<br/>    setDrawnCards((drawnCards) =&gt; [...drawnCards, cards[cards.length - 1]]);<br/>  };</span><span id="ab49" class="mn lc iq mj b gy ms mp l mq mr">  useEffect(() =&gt; {<br/>    const indexLastCard = initCards.indexOf(drawnCards[drawnCards.length - 2]);<br/>    const indexDrawnCard = initCards.indexOf(drawnCards[drawnCards.length - 1]);</span><span id="ea3c" class="mn lc iq mj b gy ms mp l mq mr">    if (<br/>      (indexLastCard &lt; indexDrawnCard &amp;&amp; guess === "higher") ||<br/>      (indexLastCard &gt; indexDrawnCard &amp;&amp; guess === "lower")<br/>    ) {<br/>      setScore((score) =&gt; score + 1);<br/>    }<br/>  }, [drawnCards, guess, cards]);</span><span id="cdb0" class="mn lc iq mj b gy ms mp l mq mr">  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;form onSubmit={draw}&gt;<br/>        &lt;select value={guess} onChange={(e) =&gt; setGuess(e.target.value)}&gt;<br/>          &lt;option&gt;lower&lt;/option&gt;<br/>          &lt;option&gt;higher&lt;/option&gt;<br/>        &lt;/select&gt;<br/>        &lt;button type="submit"&gt;guess&lt;/button&gt;<br/>      &lt;/form&gt;<br/>      &lt;p&gt;score: {score}&lt;/p&gt;<br/>      &lt;p&gt;last drawn card&lt;/p&gt;<br/>      {drawnCards[drawnCards.length - 2] &amp;&amp; (<br/>        &lt;img<br/>          alt="last drawn card"<br/>          src={`https://tekeye.uk/playing_cards/images/svg_playing_cards/fronts/${<br/>            drawnCards[drawnCards.length - 2]<br/>          }.svg`}<br/>        /&gt;<br/>      )}</span><span id="9e6c" class="mn lc iq mj b gy ms mp l mq mr">      &lt;p&gt;currently drawrn card&lt;/p&gt;<br/>      {drawnCards[drawnCards.length - 1] &amp;&amp; (<br/>        &lt;img<br/>          alt="currently drawn card"<br/>          src={`https://tekeye.uk/playing_cards/images/svg_playing_cards/fronts/${<br/>            drawnCards[drawnCards.length - 1]<br/>          }.svg`}<br/>        /&gt;<br/>      )}<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="ec65" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe mt mu mv mj b">suits</code>和<code class="fe mt mu mv mj b">values</code>数组，它们用于创建包含所有卡片值的<code class="fe mt mu mv mj b">initCards</code>数组。</p><p id="9097" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们定义<code class="fe mt mu mv mj b">score</code>、<code class="fe mt mu mv mj b">cards</code>、<code class="fe mt mu mv mj b">drawnCartds</code>和<code class="fe mt mu mv mj b">guess</code>状态。</p><p id="0490" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">score</code>有玩家的分数。</p><p id="0edc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">cards</code>有还没抽的牌。</p><p id="2f60" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">drawnCards</code>有抽到的牌。</p><p id="f3e1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">guess</code>有猜测值。</p><p id="415c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们定义了<code class="fe mt mu mv mj b">draw</code>函数。</p><p id="010c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在它内部，我们调用<code class="fe mt mu mv mj b">e.preventDefault()</code>让我们进行客户端提交。</p><p id="c91a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">setCards</code>来抽牌，通过调用<code class="fe mt mu mv mj b">slice</code>从<code class="fe mt mu mv mj b">cards</code>中去掉最后一个条目。</p><p id="611f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们通过传入一个回调函数来更新<code class="fe mt mu mv mj b">drawnCards</code>状态，该回调函数返回一个数组，该数组包含现有的<code class="fe mt mu mv mj b">drawnCards</code>条目和来自<code class="fe mt mu mv mj b">cards</code>的最后一张卡片。</p><p id="c020" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们使用<code class="fe mt mu mv mj b">useEffect</code>钩子获取存储在<code class="fe mt mu mv mj b">indexLastCard</code>中的最后一张抽牌的索引。</p><p id="7b46" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且我们还有当前抽卡的索引存储在<code class="fe mt mu mv mj b">indexDrawnCard</code>中。</p><p id="17b1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们看<code class="fe mt mu mv mj b">guess</code>值是否与上次抽的牌和当前抽的牌的大小比较匹配。</p><p id="98f8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们可以通过它们的索引进行比较，因为<code class="fe mt mu mv mj b">initCards</code>按照从小到大的顺序排列卡片。</p><p id="dfe9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果条件是<code class="fe mt mu mv mj b">true</code>，那么我们调用<code class="fe mt mu mv mj b">setScore</code>将分数递增1。</p><p id="9a58" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们用select下拉菜单定义表单，让我们选择lower或high。</p><p id="e118" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们用<code class="fe mt mu mv mj b">value</code>获取选定的值，并用<code class="fe mt mu mv mj b">onChange</code>回调来设置该值。</p><p id="f919" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">onSubmit</code>被设置为<code class="fe mt mu mv mj b">submit</code>，所以当我们点击guess时我们运行它。</p><p id="5ba8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在那下面，我们显示<code class="fe mt mu mv mj b">score</code>。</p><p id="345f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们通过获取<code class="fe mt mu mv mj b">drawnCards</code>的索引来显示最后抽的牌和当前抽的牌。</p><h1 id="c0e1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="fe51" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">因此，我们可以用React和JavaScript创建一个高低牌游戏。我希望这篇文章对你有用，感谢你的阅读。</p><p id="bad8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mw">plain English . io</em></a></p></div></div>    
</body>
</html>
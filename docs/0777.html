<html>
<head>
<title>Framer Motion — Shared Layout Animations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成帧器动作—共享布局动画</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/framer-motion-shared-layout-animations-4d83e10a4690?source=collection_archive---------12-----------------------#2021-02-17">https://javascript.plainenglish.io/framer-motion-shared-layout-animations-4d83e10a4690?source=collection_archive---------12-----------------------#2021-02-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/46407ee22a707c93cc31e115e7a01b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*llPllaKE4k14ahKr"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jplenio?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Johannes Plenio</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6c09" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有了Framer Motion库，我们可以轻松地在我们的React应用程序中呈现动画。</p><p id="dec8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何开始使用Framer Motion。</p><h1 id="225d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">共享布局动画</h1><p id="cf26" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用<code class="fe me mf mg mh b">AnimateSharedLayout</code>组件创建共享布局动画。</p><p id="2983" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="2628" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="950d" class="mq lc iq mh b gy mr ms l mt mu">import React, { useState } from "react";<br/>import { AnimatePresence, AnimateSharedLayout, motion } from "framer-motion";<br/>import "./styles.css";</span><span id="417c" class="mq lc iq mh b gy mv ms l mt mu">function Item({ text }) {<br/>  const [isOpen, setIsOpen] = useState(false);</span><span id="0b46" class="mq lc iq mh b gy mv ms l mt mu">const toggleOpen = () =&gt; setIsOpen(!isOpen);</span><span id="cb4a" class="mq lc iq mh b gy mv ms l mt mu">return (<br/>    &lt;motion.li layout onClick={toggleOpen} initial={{ borderRadius: 10 }}&gt;<br/>      &lt;motion.div layout&gt;{text}&lt;/motion.div&gt;<br/>      &lt;AnimatePresence&gt;{isOpen &amp;&amp; &lt;Content /&gt;}&lt;/AnimatePresence&gt;<br/>    &lt;/motion.li&gt;<br/>  );<br/>}</span><span id="0bcb" class="mq lc iq mh b gy mv ms l mt mu">function Content() {<br/>  return (<br/>    &lt;motion.div<br/>      layout<br/>      initial={{ opacity: 0 }}<br/>      animate={{ opacity: 1 }}<br/>      exit={{ opacity: 0 }}<br/>    &gt;<br/>      &lt;div className="row" /&gt;<br/>      &lt;div className="row" /&gt;<br/>      &lt;div className="row" /&gt;<br/>    &lt;/motion.div&gt;<br/>  );<br/>}</span><span id="5f5e" class="mq lc iq mh b gy mv ms l mt mu">const items = [<br/>  { text: "foo", id: 1 },<br/>  { text: "bar", id: 2 },<br/>  { text: "baz", id: 3 }<br/>];</span><span id="ef4d" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  return (<br/>    &lt;AnimateSharedLayout&gt;<br/>      &lt;motion.ul layout&gt;<br/>        {items.map(({ text, id }) =&gt; (<br/>          &lt;Item text={text} key={id} /&gt;<br/>        ))}<br/>      &lt;/motion.ul&gt;<br/>    &lt;/AnimateSharedLayout&gt;<br/>  );<br/>}</span></pre><p id="3bf7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">styles.css</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="23bc" class="mq lc iq mh b gy mr ms l mt mu">html,<br/>body {<br/>  min-height: 100vh;<br/>  padding: 0;<br/>  margin: 0;<br/>}</span><span id="c464" class="mq lc iq mh b gy mv ms l mt mu">* {<br/>  box-sizing: border-box;<br/>}</span><span id="c04b" class="mq lc iq mh b gy mv ms l mt mu">body {<br/>  background-repeat: no-repeat;<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>}</span><span id="8d7b" class="mq lc iq mh b gy mv ms l mt mu">.App {<br/>  font-family: sans-serif;<br/>  text-align: center;<br/>}</span><span id="d1df" class="mq lc iq mh b gy mv ms l mt mu">ul,<br/>li {<br/>  list-style: none;<br/>  margin: 0;<br/>  padding: 0;<br/>}</span><span id="2b05" class="mq lc iq mh b gy mv ms l mt mu">ul {<br/>  width: 300px;<br/>  display: flex;<br/>  flex-direction: column;<br/>  background: white;<br/>  padding: 20px;<br/>  border-radius: 25px;<br/>}</span><span id="de76" class="mq lc iq mh b gy mv ms l mt mu">li {<br/>  background-color: rgba(214, 214, 214, 0.5);<br/>  border-radius: 10px;<br/>  padding: 20px;<br/>  margin-bottom: 20px;<br/>  overflow: hidden;<br/>  cursor: pointer;<br/>}</span><span id="97a3" class="mq lc iq mh b gy mv ms l mt mu">li:last-child {<br/>  margin-bottom: 0px;<br/>}</span><span id="22a6" class="mq lc iq mh b gy mv ms l mt mu">.avatar {<br/>  width: 40px;<br/>  height: 40px;<br/>  background-color: #666;<br/>  border-radius: 20px;<br/>}</span><span id="5147" class="mq lc iq mh b gy mv ms l mt mu">.row {<br/>  width: 100%;<br/>  height: 8px;<br/>  background-color: #999;<br/>  border-radius: 10px;<br/>  margin-top: 12px;<br/>}</span></pre><p id="9431" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">Item</code>组件，可以切换div的内容。</p><p id="d937" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是通过<code class="fe me mf mg mh b">AnimatPresence</code>组件完成的，如果是<code class="fe me mf mg mh b">true</code>，该组件将显示<code class="fe me mf mg mh b">Content</code>组件的内容。</p><p id="f1ef" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">row</code>类创建了我们想要展示的小节。</p><p id="9523" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">App</code>中，我们将<code class="fe me mf mg mh b">AnimateSharedLayout</code>组件包裹在<code class="fe me mf mg mh b">ul</code>周围，让我们为每个<code class="fe me mf mg mh b">li</code>显示相同的动画。</p><p id="7a72" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">动画在一组不共享状态的组件之间同步。</p><p id="06f3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以在添加或移除不同组件时，使用通用<code class="fe me mf mg mh b">layoutId</code>在它们之间执行动画。</p><p id="2609" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当带有<code class="fe me mf mg mh b">1ayoutId</code>道具的组件从树的某个部分移除并添加到其他部分时，新组件将自动从旧组件的位置设置动画。</p><p id="08bd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><p id="140f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">App.js</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8a5f" class="mq lc iq mh b gy mr ms l mt mu">import React, { useState } from "react";<br/>import { AnimateSharedLayout, motion } from "framer-motion";<br/>import "./styles.css";</span><span id="00c4" class="mq lc iq mh b gy mv ms l mt mu">export default function App() {<br/>  const [selected, setSelected] = useState(colors[0]);</span><span id="5026" class="mq lc iq mh b gy mv ms l mt mu">return (<br/>    &lt;AnimateSharedLayout&gt;<br/>      &lt;ul&gt;<br/>        {colors.map((color) =&gt; (<br/>          &lt;Item<br/>            key={color}<br/>            color={color}<br/>            isSelected={selected === color}<br/>            onClick={() =&gt; setSelected(color)}<br/>          /&gt;<br/>        ))}<br/>      &lt;/ul&gt;<br/>    &lt;/AnimateSharedLayout&gt;<br/>  );<br/>}</span><span id="7eac" class="mq lc iq mh b gy mv ms l mt mu">function Item({ color, isSelected, onClick }) {<br/>  return (<br/>    &lt;li className="item" onClick={onClick} style={{ backgroundColor: color }}&gt;<br/>      {isSelected &amp;&amp; (<br/>        &lt;motion.div<br/>          layoutId="outline"<br/>          className="outline"<br/>          initial={false}<br/>          animate={{ borderColor: color }}<br/>          transition={spring}<br/>        /&gt;<br/>      )}<br/>    &lt;/li&gt;<br/>  );<br/>}</span><span id="14c4" class="mq lc iq mh b gy mv ms l mt mu">const colors = ["red", "green", "blue", "yellow"];</span><span id="52fb" class="mq lc iq mh b gy mv ms l mt mu">const spring = {<br/>  type: "spring",<br/>  stiffness: 500,<br/>  damping: 30<br/>};</span></pre><p id="1e43" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">styles.css</code></p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ef18" class="mq lc iq mh b gy mr ms l mt mu">html,<br/>body {<br/>  min-height: 100vh;<br/>  padding: 0;<br/>  margin: 0;<br/>}</span><span id="e34d" class="mq lc iq mh b gy mv ms l mt mu">* {<br/>  box-sizing: border-box;<br/>}</span><span id="39c3" class="mq lc iq mh b gy mv ms l mt mu">body {<br/>  background-repeat: no-repeat;<br/>  display: flex;<br/>  justify-content: center;<br/>  align-items: center;<br/>}</span><span id="457f" class="mq lc iq mh b gy mv ms l mt mu">.App {<br/>  font-family: sans-serif;<br/>  text-align: center;<br/>}</span><span id="e88d" class="mq lc iq mh b gy mv ms l mt mu">ul {<br/>  list-style: none;<br/>  margin: 0;<br/>  padding: 0;<br/>  display: flex;<br/>  flex-direction: column;<br/>  flex-wrap: nowrap;<br/>  width: 280px;<br/>  height: 380px;<br/>}</span><span id="2f75" class="mq lc iq mh b gy mv ms l mt mu">.item {<br/>  width: 100px;<br/>  height: 50px;<br/>  margin: 20px;<br/>  position: relative;<br/>  cursor: pointer;<br/>  flex-shrink: 0;<br/>}</span><span id="05db" class="mq lc iq mh b gy mv ms l mt mu">.outline {<br/>  position: absolute;<br/>  top: -20px;<br/>  left: -20px;<br/>  right: -20px;<br/>  bottom: -20px;<br/>  border: 10px solid white;<br/>}</span></pre><p id="6ea3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们在<code class="fe me mf mg mh b">li</code>周围添加了一个框，通过切换<code class="fe me mf mg mh b">Item</code>组件中的<code class="fe me mf mg mh b">isSelected</code>状态来点击该框。</p><p id="867c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">styles.css</code>中，我们有<code class="fe me mf mg mh b">outline</code>类来定义轮廓。</p><p id="4b06" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是在我们切换<code class="fe me mf mg mh b">li</code>时切换的。</p><p id="134d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">App</code>组件中，选择我们使用<code class="fe me mf mg mh b">setSelected</code>功能点击的项目。</p><h1 id="de60" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="6039" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以添加共享布局动画，以执行跨一组不共享状态的组件同步的动画。</p><p id="c7cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们还可以在添加或移除不同组件时使用通用<code class="fe me mf mg mh b">layoutId</code>在它们之间执行动画。</p><p id="7a4c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">喜欢这篇文章吗？如果是这样的话，通过<a class="ae kc" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw?sub_confirmation=true" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir">订阅我们的YouTube频道</strong> </a> <strong class="kf ir">获得更多类似内容吧！</strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>D3.js Tutorial: Build Your First Bar Chart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">D3.js教程:构建您的第一个条形图</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/d3-js-tutorial-build-your-first-bar-chart-40088198320f?source=collection_archive---------9-----------------------#2021-06-19">https://javascript.plainenglish.io/d3-js-tutorial-build-your-first-bar-chart-40088198320f?source=collection_archive---------9-----------------------#2021-06-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/74a4dc6a3aa1c7176e95d838ea886997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjgcUcywjk2cdV0qK3TjAQ.png"/></div></div></figure><p id="cf41" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">D3.js是一个JavaScript库，使您能够在web浏览器中创建<strong class="jx io">动态数据可视化。它专门以可理解和交互的方式可视化大型数据集。D3.js库因其核心特性(如DOM操作、动态属性和动画)而脱颖而出，成为前端开发人员的最佳数据可视化工具之一<strong class="jx io">。</strong></strong></p><p id="d497" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">今天，我们将向您展示如何使用D3.js构建您的第一个条形图。让我们开始吧！</p><p id="f266" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><strong class="jx io">我们将介绍</strong>:</p><ul class=""><li id="c763" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">项目概述</li><li id="7288" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">初始设置</li><li id="f5ee" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">创建数据集</li><li id="c4e4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">设置尺寸和边距</li><li id="30d4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">追加SVG元素</li><li id="432b" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">收集和格式化数据</li><li id="a3b4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">添加条形</li><li id="0130" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">后续步骤</li></ul><h1 id="29da" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">项目概述</h1><p id="25fb" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">今天，我们将使用D3.js构建一个条形图。这是一个伟大的项目，因为它允许您以一种实用的方式<strong class="jx io">练习您的D3.js数据可视化技能</strong>。</p><p id="1ab0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">条形图是比较不同组之间数据的一种有用且有效的方法。它们<strong class="jx io">提高可读性</strong>，让你轻松识别数据中的模式或趋势。</p><p id="8a86" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">D3.js非常适合数据可视化，原因有很多，比如:</p><ul class=""><li id="3468" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated"><strong class="jx io">视觉效果</strong>:支持HTML、CSS和SVG，因此不需要新工具</li><li id="570b" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">动画</strong>:允许你制作和修改页面元素的动画</li><li id="dcc7" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">所有主流浏览器都支持</strong>:在网络上工作，使视觉效果易于分享和发布</li><li id="84f2" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated"><strong class="jx io">灵活</strong>:与现有的web技术配合良好，可以操作DOM的任何部分</li><li id="e43f" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">可伸缩的:适用于大型数据集</li></ul><h1 id="1afd" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">初始设置</h1><p id="c377" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">在创建条形图之前，我们需要做三件事:</p><ol class=""><li id="0e29" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks mk kz la lb bi translated">设置文档的页眉和正文</li><li id="0a10" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks mk kz la lb bi translated">设置CSS</li><li id="43eb" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks mk kz la lb bi translated">加载d3.js库</li></ol><p id="6e4a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">它们都可以用下面的代码来完成:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="79ef" class="mu li in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;meta charset="utf-8"&gt;<br/>&lt;style&gt; /* set the CSS */<br/><br/>.bar { fill: steelblue; }<br/><br/>&lt;/style&gt;<br/>&lt;body&gt;<br/><br/>&lt;!-- load the d3.js library --&gt;     <br/>&lt;script src="https://d3js.org/d3.v6.min.js"&gt;&lt;/script&gt;<br/>&lt;script&gt;</span></pre><p id="209c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在代码的<code class="fe mz na nb mq b">&lt;style&gt;</code>部分，我们设置了条形颜色的样式。将样式放在代码的开头是可选的，但是尽早这样做很方便。</p><h1 id="4ed4" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">创建数据集</h1><p id="1198" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">在开始制作条形图之前，我们需要数据。对于本教程，我们将使用一些来自名为<code class="fe mz na nb mq b">amounts.csv</code>的虚构外部CSV文件的样本数据。</p><p id="aa31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">该文件由一列名称和金额组成:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="e4aa" class="mu li in mq b gy mv mw l mx my">name,amounts<br/>Foo, 33<br/>Rishab, 12<br/>Alexis, 41<br/>Tom, 16<br/>Courtney, 59<br/>Christina, 38<br/>Jack, 21<br/>Mickey, 25<br/>Paul, 30</span></pre><p id="992f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们将使用这些数据制作一个存储金额值的垂直条形图。</p><h1 id="2ca7" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">设置尺寸和边距</h1><p id="5732" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">让我们设置将要用于图表和页边距的区域的大小。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="6246" class="mu li in mq b gy mv mw l mx my">// Set graph margins and dimensions<br/>var margin = {top: 20, right: 20, bottom: 30, left: 40},<br/>    width = 960 - margin.left - margin.right,<br/>    height = 500 - margin.top - margin.bottom;</span></pre><p id="b719" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们将确定x和y域的范围:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="7521" class="mu li in mq b gy mv mw l mx my">// Set ranges<br/>var x = d3.scaleBand()<br/>          .range([0, width])<br/>          .padding(0.1);<br/>var y = d3.scaleLinear()<br/>          .range([height, 0]);</span></pre><h1 id="f35c" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">追加SVG元素</h1><p id="1f52" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">下面的代码选择网页上的<code class="fe mz na nb mq b">body</code>,并将一个SVG对象附加到它上面。SVG对象的大小由我们设置的<code class="fe mz na nb mq b">width</code>、<code class="fe mz na nb mq b">height</code>和<code class="fe mz na nb mq b">margin</code>决定:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="ff75" class="mu li in mq b gy mv mw l mx my">var svg = d3.select("body").append("svg")<br/>    .attr("width", width + margin.left + margin.right)<br/>    .attr("height", height + margin.top + margin.bottom)<br/>  .append("g")<br/>    .attr("transform", <br/>          "translate(" + margin.left + "," + margin.top + ")")</span></pre><h1 id="d3de" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">收集和格式化数据</h1><p id="c208" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">是时候将我们的数据加载到脚本体中了。我们将加载我们的CSV文件，然后遍历它以确保所有数据都被正确识别:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="fac6" class="mu li in mq b gy mv mw l mx my">// Get data<br/>d3.csv("amounts.csv").then(function(data) {<br/><br/>  // Format<br/>  data.forEach(function(d) {<br/>    d.amounts = +d.amounts;<br/>  });</span></pre><h1 id="9b18" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">缩放域</h1><p id="7daf" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">在我们添加条形之前，让我们研究一下x和y数据，以确保它缩放到我们设置的域:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="0df9" class="mu li in mq b gy mv mw l mx my">// Scale the range of the data in the domains<br/>  x.domain(data.map(function(d) { return d.name; }));<br/>  y.domain([0, d3.max(data, function(d) { return d.amounts; })]);</span></pre><h1 id="ab39" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">添加条形</h1><p id="4f0e" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">是时候加杠了！我们编写的代码将创建条形，并将每个条形与一个数据集相关联。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="2fa8" class="mu li in mq b gy mv mw l mx my">// Append rectangles for bar chart<br/>  svg.selectAll(".bar")<br/>      .data(data)<br/>    .enter().append("rect")<br/>      .attr("class", "bar")<br/>      .attr("x", function(d) { return x(d.name); })<br/>      .attr("width", x.bandwidth())<br/>      .attr("y", function(d) { return y(d.amounts); })<br/>      .attr("height", function(d) { return height - y(d.amounts); });</span></pre><p id="2680" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们需要做的最后一件事是添加我们的轴，然后我们可以检查完成的结果。</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="94c0" class="mu li in mq b gy mv mw l mx my">// Add x axis<br/>  svg.append("g")<br/>      .attr("transform", "translate(0," + height + ")")<br/>      .call(d3.axisBottom(x));<br/><br/>  // Add y axis<br/>  svg.append("g")<br/>      .call(d3.axisLeft(y));</span></pre><p id="3f04" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">完整的代码应该是这样的:</p><pre class="ml mm mn mo gt mp mq mr ms aw mt bi"><span id="9a80" class="mu li in mq b gy mv mw l mx my">&lt;!DOCTYPE html&gt;<br/>&lt;meta charset="utf-8"&gt;<br/>&lt;style&gt; /* set the CSS */<br/><br/>.bar { fill: steelblue; }<br/><br/>&lt;/style&gt;<br/>&lt;body&gt;<br/><br/>&lt;!-- load the d3.js library --&gt;     <br/>&lt;script src="https://d3js.org/d3.v6.min.js"&gt;&lt;/script&gt;<br/>&lt;script&gt;<br/><br/>// Set graph margins and dimensions<br/>var margin = {top: 20, right: 20, bottom: 30, left: 40},<br/>    width = 960 - margin.left - margin.right,<br/>    height = 500 - margin.top - margin.bottom;<br/><br/>// Set ranges<br/>var x = d3.scaleBand()<br/>          .range([0, width])<br/>          .padding(0.1);<br/>var y = d3.scaleLinear()<br/>          .range([height, 0]);<br/>var svg = d3.select("body").append("svg")<br/>    .attr("width", width + margin.left + margin.right)<br/>    .attr("height", height + margin.top + margin.bottom)<br/>  .append("g")<br/>    .attr("transform", <br/>          "translate(" + margin.left + "," + margin.top + ")");<br/><br/>// Get data<br/>d3.csv("amounts.csv").then(function(data) {<br/><br/>  // Format data<br/>  data.forEach(function(d) {<br/>    d.amounts = +d.amounts;<br/>  });<br/><br/>  // Scale the range of the data in the domains<br/>  x.domain(data.map(function(d) { return d.name; }));<br/>  y.domain([0, d3.max(data, function(d) { return d.amounts; })]);<br/><br/>  // Append rectangles for bar chart<br/>  svg.selectAll(".bar")<br/>      .data(data)<br/>    .enter().append("rect")<br/>      .attr("class", "bar")<br/>      .attr("x", function(d) { return x(d.name); })<br/>      .attr("width", x.bandwidth())<br/>      .attr("y", function(d) { return y(d.amounts); })<br/>      .attr("height", function(d) { return height - y(d.amounts); });<br/><br/>  // Add x axis<br/>  svg.append("g")<br/>      .attr("transform", "translate(0," + height + ")")<br/>      .call(d3.axisBottom(x));<br/><br/>  // Add y axis<br/>  svg.append("g")<br/>      .call(d3.axisLeft(y));<br/><br/>});<br/><br/>&lt;/script&gt;<br/>&lt;/body&gt;</span></pre><p id="a3e9" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我们完成的条形图:</p><figure class="ml mm mn mo gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/8911f6ac7418269e67c61b4ef80d6114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0soN5Pn934UvdvRLnaLRA.png"/></div></div></figure><h1 id="a2a7" class="lh li in bd lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me bi translated">后续步骤</h1><p id="bd0b" class="pw-post-body-paragraph jv jw in jx b jy mf ka kb kc mg ke kf kg mh ki kj kk mi km kn ko mj kq kr ks ig bi translated">祝贺您迈出D3.js数据可视化的第一步！条形图是一种很好的方式，它以一种易于理解且视觉上吸引人的方式来可视化大型数据集。关于D3.js库还有很多需要学习的地方，比如:</p><ul class=""><li id="de00" class="kt ku in jx b jy jz kc kd kg kv kk kw ko kx ks ky kz la lb bi translated">树形图</li><li id="78a0" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">桑基图</li><li id="975f" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">绘图</li><li id="77b4" class="kt ku in jx b jy lc kc ld kg le kk lf ko lg ks ky kz la lb bi translated">还有更多</li></ul><p id="2fcd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">快乐学习！</em></p><p id="91f1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nd">更多内容请看</em><a class="ae ne" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nd">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
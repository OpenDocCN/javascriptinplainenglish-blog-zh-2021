<html>
<head>
<title>Create a To-Do App in React With localStorage</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React With localStorage中创建待办事项应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/create-a-to-do-app-in-react-with-localstorage-5408d5c9d6f5?source=collection_archive---------7-----------------------#2021-08-12">https://javascript.plainenglish.io/create-a-to-do-app-in-react-with-localstorage-5408d5c9d6f5?source=collection_archive---------7-----------------------#2021-08-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8ac2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React和Tailwind CSS</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/7761f4ea1df081bdd95e5abdec1066d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I8N_Z0qLPMTW6op3"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@nublson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nubelson Fernandes</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1dbf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将创建一个web待办事项应用程序，它可以保存在浏览器的本地存储上。我们将使用React作为用户界面。</p><p id="cd77" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我一直避免学习React，直到最近。了解了一点之后，我真的很喜欢它。所以，我决定做些回应。</p><p id="bad4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将从一个<strong class="ky ir">工作原型</strong>开始，然后我们将创建一个应用程序的实体模型<strong class="ky ir">设计</strong>，最后，我们将<strong class="ky ir">添加一些功能</strong>。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="79b2" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">工作原型</h1><h2 id="8e94" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">唯一id</h2><p id="73da" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">在整个应用程序的开发过程中，我们必须为一些组件分配唯一的id。为此，我们将使用<code class="fe ni nj nk nl b">uuid</code> npm包。我们使用<code class="fe ni nj nk nl b">npm install uuid</code>安装它并导入它<code class="fe ni nj nk nl b">import {v4 as uuid} from 'uuid';</code>，然后调用<code class="fe ni nj nk nl b">uuid()</code>函数来获得一个唯一的ID/key。</p><h2 id="269a" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">列表</h2><p id="3d34" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">在我们的待办事项应用程序中，我们应该能够创建列表。我们将把列表保存在一个数组中，该数组在ReactJS应用程序中定义为一个状态。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="d86d" class="mr ma iq nl b gy nq nr l ns nt">const [lists, setLists] = React.useState([]);</span></pre><p id="0858" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了添加或删除列表，我们将在我们的<code class="fe ni nj nk nl b">App</code>中定义两个函数:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="8b85" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将把这两个函数作为属性传递给任何需要添加或删除列表的组件。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="1bae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将定义一个<code class="fe ni nj nk nl b">Lists</code>组件，它将显示一个列表列表(带有一个删除按钮)和一个“添加新列表”表单。</p><p id="f031" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><code class="fe ni nj nk nl b">Lists</code>组件获取<code class="fe ni nj nk nl b">lists</code>数组作为属性，并在呈现函数中遍历它。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="b3b9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了处理新列表的删除和添加，我们必须在组件中定义两个函数。</p><p id="3cd2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要删除列表，我们定义以下处理函数:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="ee59" class="mr ma iq nl b gy nq nr l ns nt">function removeListHandler(id) {<br/>  props.onRemoveList(id);<br/>}</span></pre><p id="521a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要添加一个列表，我们首先要获取输入表单的值。我们将使用React的<code class="fe ni nj nk nl b">useRef</code>函数。我们必须在我们的<code class="fe ni nj nk nl b">Lists</code>组件中添加以下代码行:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="6f2e" class="mr ma iq nl b gy nq nr l ns nt">const newListTitleRef = React.useRef();</span></pre><p id="5285" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并将该属性添加到输入中:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="7593" class="mr ma iq nl b gy nq nr l ns nt">&lt;input<br/>  type="text"<br/>  placeholder="New List"<br/>  <strong class="nl ir">ref={newListTitleRef}</strong><br/>/&gt;</span></pre><p id="e6f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了检索输入的值并添加新列表，我们使用:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="b3ac" class="mr ma iq nl b gy nq nr l ns nt">function addListHandler(e) {<br/>  // Prevent browser submit refresh<br/>  e.preventDefault();<br/>  // Create a new list<br/>  const list = {<br/>    id: uuid(), // with a random unique ID<br/>    title: <strong class="nl ir">newListTitleRef.current.value<br/>   </strong>};<br/>  // Add the list<br/>  props.onAddList(list);<br/>  // Empty the input<br/>  newListTitleRef.current.value = "";<br/> }</span></pre><p id="7d6a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的<code class="fe ni nj nk nl b">Lists.js</code>文件变成如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="bbf1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用我们的<code class="fe ni nj nk nl b">App.js</code>中的组件，我们只需使用:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="f5c2" class="mr ma iq nl b gy nq nr l ns nt">&lt;Lists data={lists} onAddList={addList} onRemoveList={removeList} /&gt;</span></pre><p id="8ba4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">到目前为止，我们的应用程序是这样的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nv l"/></div></figure><p id="316d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们将添加页面到我们的列表，并使它们可点击。为此，我们将使用<code class="fe ni nj nk nl b">react-router-dom</code>包(<code class="fe ni nj nk nl b">npm install react-router-dom</code>)。</p><p id="d6f7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将定义一个将<code class="fe ni nj nk nl b">list</code>作为属性并显示其标题的<code class="fe ni nj nk nl b">LisrPage</code>组件。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="e7b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的<code class="fe ni nj nk nl b">app.js</code>文件中，我们需要导入路由器模块。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="7720" class="mr ma iq nl b gy nq nr l ns nt">import {<br/>  BrowserRouter as Router,<br/>  Switch,<br/>  Route<br/>} from "react-router-dom";</span></pre><p id="39d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在render函数中，我们将所有内容包装在一个<code class="fe ni nj nk nl b">Router</code>中，并为每个列表添加一个<code class="fe ni nj nk nl b">Route</code>组件。我们将使用<code class="fe ni nj nk nl b">list.id</code>作为路径。我们还为主页添加了一个<code class="fe ni nj nk nl b">Route</code>。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="f044" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ni nj nk nl b">Lists.js</code>文件上，我们将用链接到列表页面的<code class="fe ni nj nk nl b">Link</code>来替换列表标题文本。当然我们要从<code class="fe ni nj nk nl b">react-router-dom</code>导入<code class="fe ni nj nk nl b">Link</code>。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="6944" class="mr ma iq nl b gy nq nr l ns nt">// We replace this<br/>&lt;span&gt;{list.title}&lt;/span&gt;</span><span id="7b36" class="mr ma iq nl b gy nx nr l ns nt">// With this<br/>&lt;Link key={list.id} to={"/" + list.id}&gt;{list.title}&lt;/Link&gt;</span></pre><p id="c3c9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">每当我们在React中呈现一个列表时，我们必须为每个元素使用一个惟一的ID，因此有了<code class="fe ni nj nk nl b">key={list-id}</code>部分。</p><p id="5a00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们得到了我们想要的结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nv l"/></div></figure><h2 id="49bf" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">任务</h2><p id="cbf3" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">对于任务，我们将使用链表数据结构。也就是说，我们将拥有一个列表列表和一个任务列表。每个任务都通过包含其所属列表ID的属性链接到一个列表。</p><p id="7926" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们定义了一组任务以及添加或删除任务的函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="c012" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将这些功能传递给<code class="fe ni nj nk nl b">ListPage</code>组件。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="4d04" class="mr ma iq nl b gy nq nr l ns nt">&lt;ListPage list={list} tasks={tasks} onRemoveTask={removeTask} onAddTask={addTask} /&gt;</span></pre><p id="0f0a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将定义一个<code class="fe ni nj nk nl b">Task</code>组件:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1ccc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ni nj nk nl b">ListPage.js</code>文件中，我们过滤<code class="fe ni nj nk nl b">tasks</code>数组以获得属于当前列表的任务。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="7bb6" class="mr ma iq nl b gy nq nr l ns nt">const tasks = props.tasks.filter((task) =&gt; task.list === props.list.id);</span></pre><p id="a6a9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在列表页面标题<code class="fe ni nj nk nl b">h3</code>下面，我们添加了以下几行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="2c34" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们用与<code class="fe ni nj nk nl b">addListHandler</code>相同的方式实现<code class="fe ni nj nk nl b">addTaskHandler</code>功能。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="47cc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nv l"/></div></figure><p id="34da" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将为列表和任务添加一个编辑机制。要编辑列表标题:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="ff4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并在<code class="fe ni nj nk nl b">app.js</code>中定义<code class="fe ni nj nk nl b">editList</code>:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="e87b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们对任务做同样的事情，除了我们还增加了检查/取消检查任务的可能性。我们得到以下结果:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nw nv l"/></div></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="2a4d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">视觉设计</h1><p id="d5cc" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">现在，我们的应用程序是功能性的，我们可以在视觉方面工作。最初，我想使用像<code class="fe ni nj nk nl b">bootstrap</code>或<code class="fe ni nj nk nl b">material-ui</code>这样提供React组件的框架。但是我一路上发现<code class="fe ni nj nk nl b"><strong class="ky ir">tailwind-css</strong></code>。这太神奇了！就像写CSS却没有实际写一样。</p><p id="b748" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我首先在<a class="ae kv" href="https://play.tailwindcss.com/BMG5AEO57A" rel="noopener ugc nofollow" target="_blank">顺风游戏</a>上创建了一个模型。(图标来自<a class="ae kv" href="https://heroicons.com/" rel="noopener ugc nofollow" target="_blank"> Heroicons </a>)当感觉足够好的时候，我安装了<code class="fe ni nj nk nl b">tailwin-css</code>，虽然这个过程不是那么容易，但是对于最新的方法，检查<a class="ae kv" href="https://tailwindcss.com/docs/guides/create-react-app" rel="noopener ugc nofollow" target="_blank">用Create React App安装Tailwind CSS——Tailwind CSS</a>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/e54077bedae0cddc67f412e14a2945fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lPJ10GZ3tFSbHL6qFo70pg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Design mockup</figcaption></figure><p id="615e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在<a class="ae kv" href="https://play.tailwindcss.com/i6YGy4mxaK" rel="noopener ugc nofollow" target="_blank">顺风游戏(tailwindcss.com)</a>找到原型的来源。</p><p id="571d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我在React中实现了这个设计。我为菜单切换和模态添加了组件。我们现在有了一个好看的待办事项应用程序:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/2ac3a482763f218568c81d2d63456ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HVZ_8Zi-7zl7V_gDqj6ysQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Functional to-do app</figcaption></figure><h2 id="fa51" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">局部存储器</h2><p id="9c17" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">为了保存我们的任务，我们将使用<code class="fe ni nj nk nl b">window.localStorage</code>。我们使用这些方法来设置或获取值:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="2b0d" class="mr ma iq nl b gy nq nr l ns nt">storage.setItem(key, val);<br/>const val = storage.getItem(key);</span></pre><p id="a9b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的<code class="fe ni nj nk nl b">App</code>函数之前，我们应该添加下面几行来从<code class="fe ni nj nk nl b">localStorage</code>中获取数据，如果它存在并且有效的话:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="6b26" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我们的<code class="fe ni nj nk nl b">App</code>函数开始时，我们将<code class="fe ni nj nk nl b">tasks</code>和<code class="fe ni nj nk nl b">lists</code>的值设置为来自<code class="fe ni nj nk nl b">localStorage</code>的值。并增加了保存功能。我们将<code class="fe ni nj nk nl b">setLists</code>重命名为<code class="fe ni nj nk nl b">setListState</code>，并定义<code class="fe ni nj nk nl b">setLists</code>来设置<code class="fe ni nj nk nl b">lists</code>状态并保存到<code class="fe ni nj nk nl b">localStorage</code>。通过这种方式，我们不必更改代码中的任何其他内容:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><h1 id="b77b" class="lz ma iq bd mb mc nz me mf mg oa mi mj jw ob jx ml jz oc ka mn kc od kd mp mq bi translated">丰富</h1><h2 id="6ea5" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">任务截止日期</h2><p id="20ce" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">通过向任务字典添加一个属性，我们可以很容易地为任务添加一个截止日期。目前，任务定义如下:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="2517" class="mr ma iq nl b gy nq nr l ns nt">{<br/>    id: "40929342-c52e-405c-a57e-bf08c7a517e8",<br/>    isDone: false,<br/>    text: "Buy ingredients for cake",<br/>    list: "bdc6ce25-909d-43fe-af25-68a0077325a7",<br/>}</span></pre><p id="0248" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以添加一个名为<code class="fe ni nj nk nl b">dueDate</code>的新属性，并为其分配一个<code class="fe ni nj nk nl b">new Date()</code>。如果任务有dueDate，我们将更新<code class="fe ni nj nk nl b">Task.js</code>文件来输出它。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi oe"><img src="../Images/a19e155d0fff43b50e116b39305e4146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L40fZ13z2WXwXDrViT0ktQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Added due date</figcaption></figure><p id="39b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以编写自己的函数，根据离截止日期还有多长时间来输出一个字符串，从而使日期更易于阅读。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="dfe0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者，我们可以使用像<code class="fe ni nj nk nl b">dayjs</code>这样的库来做这件事。</p><p id="f76c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们必须在添加任务时添加添加截止日期的选项。我们将编辑<code class="fe ni nj nk nl b">ListPage.js</code>文件。</p><p id="e610" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将为到期日定义一个参考和州:</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="e04f" class="mr ma iq nl b gy nq nr l ns nt">const [newTaskDate, setNewTaskDate] = React.useState(null);<br/>const newTaskDateRef = React.useRef();</span></pre><p id="d688" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">并在返回函数中添加以下行:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="2d80" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，我们需要更改addTask处理程序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="400a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我将在<code class="fe ni nj nk nl b">Task.js</code>文件夹中使用相同的代码(一种),以允许编辑现有任务的截止日期。</p><p id="c93d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/081a17e0dd0107d39ec44888b70e8f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*k7_-zhv1_XV9i-JaKVmqXg.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Added due dates for tasks</figcaption></figure><h2 id="2641" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">概览选项卡</h2><p id="0740" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我们可以添加一个新的菜单项，按截止日期显示任务。我们通过在<code class="fe ni nj nk nl b">pages</code>文件夹中创建一个新的<code class="fe ni nj nk nl b">Overview.js</code>文件来做到这一点。</p><p id="f047" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们将根据任务的截止日期对其进行筛选和排序:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="bd22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我在<code class="fe ni nj nk nl b">heplers/dueDate.js</code>中定义了检查日期的函数。</p><p id="69a0" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们为上面定义的每个数组呈现任务:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="6f40" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">结果:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/83da91cce25891e5731d4c4af93d5baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ja8mheV2eJ84G_vGXRXacw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Overview tab</figcaption></figure><h2 id="e4c2" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">搜索</h2><p id="aafa" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">我们将在顶部添加一个搜索栏，我们可以在那里搜索任务。我们将定义一个<code class="fe ni nj nk nl b">Search</code>组件如下:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="7ecf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">搜索时，我们使用<code class="fe ni nj nk nl b">useHistory()</code>和<code class="fe ni nj nk nl b">history.push()</code>将URL设置为<code class="fe ni nj nk nl b">/search/[QUERY]</code>。</p><p id="4a5a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后我们定义一个<code class="fe ni nj nk nl b">SearchPage</code>来显示结果。我们将使用来自<code class="fe ni nj nk nl b">react-router-dom</code> : <code class="fe ni nj nk nl b">const {query} = useParams()</code>的<code class="fe ni nj nk nl b">useParam() </code>来获取查询。然后，我们过滤<code class="fe ni nj nk nl b">tasks</code>以得到那些<code class="fe ni nj nk nl b">includes(query.trim())</code>(我们去除了尾随空格)。我们还将字符串转换成小写，这样搜索就不区分大小写了。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="1d17" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，在<code class="fe ni nj nk nl b">Router</code>中我们会添加一个新的<code class="fe ni nj nk nl b">Route</code>。注意<code class="fe ni nj nk nl b">:query</code>部分。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="cca8" class="mr ma iq nl b gy nq nr l ns nt">&lt;Route key="search" <strong class="nl ir">path="/search/<em class="of">:query</em>"</strong>&gt;<br/>  &lt;SearchPage<br/>    tasks={tasks}<br/>    onEditTask={editTask}<br/>    onRemoveTask={removeTask}<br/>  /&gt;<br/>&lt;/Route&gt;</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/b7daed67f33b65a149c2326c8d6a12dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*j1lVPEVbw0JUtN7w3gvE-g.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Search feature</figcaption></figure><h2 id="06ac" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">黑暗模式</h2><p id="0010" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">这大概是我等不及的部分。在<code class="fe ni nj nk nl b">tailwind-css</code>中，您可以将关键字<code class="fe ni nj nk nl b">dark:</code>添加到一个类的开头，然后添加一个黑暗模式的类。我对应用程序中的所有类名都这样做了。当添加一个<code class="fe ni nj nk nl b">.dark</code>类到根(HTML)时，我们得到:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/8c951a6035f02734054c90bb8c317b01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9XdAFMXBD7Lo0N9D5NpfLw.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Darkmode enabled</figcaption></figure><p id="e23b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">太好了！现在，让我们为我们的黑暗模式添加一个开关。为此，我们必须创建自己的钩子。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><p id="9af1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，要使用它，我们只需将它导入到<code class="fe ni nj nk nl b">App</code>中，并将其赋给一个常量。</p><pre class="kg kh ki kj gt nm nl nn no aw np bi"><span id="51d1" class="mr ma iq nl b gy nq nr l ns nt">import useDarkMode from "./helpers/useDarkMode";</span><span id="33ad" class="mr ma iq nl b gy nx nr l ns nt">...</span><span id="6f4d" class="mr ma iq nl b gy nx nr l ns nt">const [theme, setTheme] = useDarkMode(localData.theme);</span></pre><p id="84b2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要创建切换:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nu nv l"/></div></figure><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ny"><img src="../Images/abc73c8a0a5226bcc6bb1c9ce9a37b2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QVRaXSYmOUCIfBEC_DIGEQ.gif"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Darkmode toggle</figcaption></figure></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><p id="c110" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这是我的第一个ReactJs项目，我对此非常满意。ReactJs是一个如此神奇的工具。</p><p id="f0bf" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您有任何建议，请留下回复。</p><h2 id="e4b4" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">试映</h2><p id="7964" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated">【https://bilhim.github.io/react-todo-app/】</p><h2 id="a8cf" class="mr ma iq bd mb ms mt dn mf mu mv dp mj lf mw mx ml lj my mz mn ln na nb mp nc bi translated">源代码</h2><p id="d54c" class="pw-post-body-paragraph kw kx iq ky b kz nd jr lb lc ne ju le lf nf lh li lj ng ll lm ln nh lp lq lr ij bi translated"><a class="ae kv" href="https://github.com/BilHim/react-todo-app" rel="noopener ugc nofollow" target="_blank">https://github.com/BilHim/react-todo-app</a></p></div></div>    
</body>
</html>
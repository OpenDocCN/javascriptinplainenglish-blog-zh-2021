<html>
<head>
<title>Why You Should Use useSWR Instead of useState When Calling APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么在调用API时应该使用useSWR而不是useState</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-use-useswr-instead-of-usestate-when-calling-apis-8b6de5dc18fc?source=collection_archive---------1-----------------------#2021-05-02">https://javascript.plainenglish.io/why-you-should-use-useswr-instead-of-usestate-when-calling-apis-8b6de5dc18fc?source=collection_archive---------1-----------------------#2021-05-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6b2d9a2da6462b2563c31cdfc2b2045f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QcRPydizGOkSGQQjG3kzYg.png"/></div></div></figure><h1 id="6abe" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">什么是SWR？</h1><p id="7029" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">SWR(重新验证时的状态)是一个用于从服务器获取数据的反应钩子。SWR从缓存中提供数据，然后制作一个服务器进行验证，一旦验证完成，它就会组合数据以实现数据一致性。</p><p id="eaef" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">我们可以使用NPM安装命令安装SWR。</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="1d15" class="mf jw in mb b gy mg mh l mi mj">npm install swr</span></pre><h1 id="19e1" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">如何使用它？</h1><p id="50c6" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">SWR是一个简单的反作用钩子，它返回数据以及对象模型中的错误。</p><p id="360d" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">以下是取自官方网站的例子。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="39a6" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">SWR提供的特色</h1><p id="b7ff" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">SWR提供了大量的性能、正确性和稳定性方面的特性来构建用户体验更好的应用程序。</p><h2 id="029c" class="mf jw in bd jx mm mn dn kb mo mp dp kf le mq mr kj li ms mt kn lm mu mv kr mw bi translated">表演</h2><p id="3a21" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">SWR是下一个建造的。高性能的JS团队。它有构建缓存系统和<a class="ae mx" href="https://swr.vercel.app/advanced/performance#deduplication" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">重复数据删除</strong> </a> <strong class="kv io"> </strong>系统，可以跳过不必要的网络。由于它是一个反作用钩子，它可以避免由于网络调用而导致的不必要的重新渲染。</p><p id="77f5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">所以好处是:</p><ul class=""><li id="34ad" class="my mz in kv b kw lr la ls le na li nb lm nc lq nd ne nf ng bi translated"><em class="nh">无不必要的要求</em></li><li id="dcd2" class="my mz in kv b kw ni la nj le nk li nl lm nm lq nd ne nf ng bi translated"><em class="nh">无不必要的重渲染</em></li><li id="739b" class="my mz in kv b kw ni la nj le nk li nl lm nm lq nd ne nf ng bi translated"><em class="nh">无不必要的代码导入</em></li></ul><h1 id="e361" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">预取数据</h1><p id="e235" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">您可以通过添加<code class="fe nn no np mb b">&lt;link ref="preload" href="..."/&gt;</code>来预取数据。但是在某些情况下，您需要以编程方式预取数据。</p><p id="c17c" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">SWR提供了一个以编程方式预取数据的选项。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="1c32" class="jv jw in bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">错误处理</h1><p id="9d31" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">错误处理对于任何提供更好用户体验的应用程序来说都是至关重要的。<code class="fe nn no np mb b">SWR</code>提供了一个全局处理错误的选项，这减少了最终构建中的大量代码。</p><figure class="lw lx ly lz gt jo"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="417f" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">请尝试使用<code class="fe nn no np mb b">SWR</code>，它会在很多方面提高你的应用性能。</p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><h1 id="e25f" class="jv jw in bd jx jy nx ka kb kc ny ke kf kg nz ki kj kk oa km kn ko ob kq kr ks bi translated">TL；速度三角形定位法(dead reckoning)</h1><p id="9c54" class="pw-post-body-paragraph kt ku in kv b kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq ig bi translated">在React应用程序中，我们通常使用<code class="fe nn no np mb b">useState</code>和<code class="fe nn no np mb b">fetch</code>来获取数据和呈现内容。如果我们使用<code class="fe nn no np mb b"><a class="ae mx" href="https://swr.vercel.app/" rel="noopener ugc nofollow" target="_blank">useSWR</a></code>，它通过从缓存中提供数据来提供更好的性能，然后发送一个调用来验证，最后结合两个数据源来实现数据一致性。</p><p id="3c58" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated">办公地点:<a class="ae mx" href="https://swr.vercel.app/" rel="noopener ugc nofollow" target="_blank">https://swr.vercel.app/</a></p></div><div class="ab cl nq nr hr ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ig ih ii ij ik"><p id="3676" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><strong class="kv io">感谢您的阅读！</strong>如果你喜欢这个，考虑一下在推特上关注我，并和你的开发者朋友分享这篇文章。</p><p id="9eb5" class="pw-post-body-paragraph kt ku in kv b kw lr ky kz la ls lc ld le lt lg lh li lu lk ll lm lv lo lp lq ig bi translated"><em class="nh">多内容见于</em> <a class="ae mx" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="nh">中</em></strong></a></p></div></div>    
</body>
</html>
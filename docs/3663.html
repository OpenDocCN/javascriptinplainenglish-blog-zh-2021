<html>
<head>
<title>16 JavaScript Anomalies</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">16个JavaScript异常</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/13-javascript-anomalies-331833001bd2?source=collection_archive---------5-----------------------#2021-07-23">https://javascript.plainenglish.io/13-javascript-anomalies-331833001bd2?source=collection_archive---------5-----------------------#2021-07-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="348f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">值得了解的有趣的JavaScript事实</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/983776455ec1e4665ee1efe7e8b18498.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AypFXuKgkwCMP2MQ"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@benwhitephotography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ben White</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="d805" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">1.类型为空的对象是JavaScript中的一个bug</h1><p id="27c7" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">null</code>是一个物体。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="4ddc" class="ms kx iq mn b gy mt mu l mv mw">&gt; typeof(null)<br/>"object"</span></pre><p id="b20a" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">但是既然<code class="fe mk ml mm mn b">null</code>没有值。所以，<code class="fe mk ml mm mn b">null</code>应该不是<code class="fe mk ml mm mn b">Object</code>的实例。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="44b7" class="ms kx iq mn b gy mt mu l mv mw">&gt; null instanceof Object<br/>false</span></pre><h1 id="4d9d" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">2.<strong class="ak"> NaN </strong>的类型(不是数字)实际上是<strong class="ak">‘数字’</strong></h1><p id="ca03" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">NaN</code>(不是一个数字)正在成为一个数字。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="84e4" class="ms kx iq mn b gy mt mu l mv mw">&gt; typeof(NaN)<br/>"number"</span></pre><h1 id="4ab0" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">3.(NaN === NaN) -&gt;假</h1><p id="b450" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">NaN</code>不等于本身。其实<code class="fe mk ml mm mn b">NaN</code>不等于什么。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="74d5" class="ms kx iq mn b gy mt mu l mv mw">&gt; NaN === NaN<br/>false</span></pre><p id="b37f" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">验证任何事情的唯一方法是<code class="fe mk ml mm mn b">NaN</code>或不通过<code class="fe mk ml mm mn b">isNaN()</code>。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="6dd9" class="ms kx iq mn b gy mt mu l mv mw">if (isNaN(x)) {<br/>   return ‘Not a Number!’<br/>}</span></pre><p id="9885" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">一个副作用是，如果你想找出一个数组中<code class="fe mk ml mm mn b">NaN</code>值的索引，你将永远不会使用<code class="fe mk ml mm mn b">indexOf()</code>。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="9b1e" class="ms kx iq mn b gy mt mu l mv mw">let<!-- --> <!-- -->values = [1, NaN, 3]</span></pre><ul class=""><li id="16ac" class="nc nd iq lq b lr mx lu my lx ne mb nf mf ng mj nh ni nj nk bi translated">求1和错的指数:求南的指数。</li></ul><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="7faf" class="ms kx iq mn b gy mt mu l mv mw">&gt; values.indexOf(1)<br/>0</span><span id="3e00" class="ms kx iq mn b gy nl mu l mv mw">&gt; values.indexOf(NaN)<br/>-1</span></pre><h1 id="668a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">4.有两个零</h1><p id="066f" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">通常，我们使用正值零。但是也有一个-0。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="a51d" class="ms kx iq mn b gy mt mu l mv mw">&gt; console.log(-0)<br/>-0</span><span id="62f7" class="ms kx iq mn b gy nl mu l mv mw">console.log(+0)<br/>0</span></pre><p id="06b6" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">但是<code class="fe mk ml mm mn b">(-0).toString()</code>和<code class="fe mk ml mm mn b">(+0).toString()</code>都返回<code class="fe mk ml mm mn b">0</code>。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="2043" class="ms kx iq mn b gy mt mu l mv mw">&gt; (-0).toString()<br/>0</span><span id="25c6" class="ms kx iq mn b gy nl mu l mv mw">&gt; (+0).toString()<br/>0</span></pre><p id="809b" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">再深入一点，我发现它们实际上是相等的。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="24a8" class="ms kx iq mn b gy mt mu l mv mw">&gt; +0 === -0<br/>true</span></pre><h1 id="caa1" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">5.1 + 2 == 3但是1.0 + 2.0！== 3.0</h1><p id="c77d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">在JavaScript中，<code class="fe mk ml mm mn b">0.1 + 0.2 == 0.3</code>返回false。事实是，javascript如何将浮点数存储为二进制。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="778d" class="ms kx iq mn b gy mt mu l mv mw">&gt; 0.1 + 0.2<br/>0.30000000000000004</span><span id="9cc5" class="ms kx iq mn b gy nl mu l mv mw">&gt; 0.1 + 0.2 == 0.3<br/>false</span></pre><h1 id="b0e4" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">6。10/0  - &gt;无穷大<strong class="ak">但10/-0</strong>-&gt;-无穷大</h1><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="7a7d" class="ms kx iq mn b gy mt mu l mv mw">&gt; console.log(10/0)<br/>Infinity</span><span id="dd77" class="ms kx iq mn b gy nl mu l mv mw">&gt; console.log(10/-0)<br/>-Infinity</span></pre><h1 id="3d68" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">7.Math.max()小于Math.min()</h1><p id="e45d" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">Math.max() &gt; Math.min()</code>返回<code class="fe mk ml mm mn b">false</code>这个事实听起来不对，但实际上很有道理。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="d281" class="ms kx iq mn b gy mt mu l mv mw">&gt; Math.max() &gt; Math.min()<br/>false</span></pre><h1 id="c57c" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><code class="fe mk ml mm mn b">8. []</code>等于<code class="fe mk ml mm mn b">![]</code></h1><p id="f2d5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">！[]的计算结果为false，因为引用是真实的。[]可以转换为一个数值(本例中为0 ),该数值为falsy。因此:条件作为相等通过。如果你做了===那就是假的。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="cac4" class="ms kx iq mn b gy mt mu l mv mw">&gt; [] == ![]<br/>true</span></pre><h1 id="cf15" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">9.三个数的比较</h1><p id="25f9" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">问题出在表达式的第一部分。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="5aec" class="ms kx iq mn b gy mt mu l mv mw">1 &lt; 2 &lt; 3; // -&gt; true<br/>3 &gt; 2 &gt; 1; // -&gt; false</span></pre><h1 id="c076" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">10.字符串不是<code class="fe mk ml mm mn b">String</code>的实例</h1><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="f285" class="ms kx iq mn b gy mt mu l mv mw">"str"; // -&gt; 'str'<br/>typeof "str"; // -&gt; 'string'<br/>"str" instanceof String; // -&gt; false</span></pre><h1 id="3199" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated"><strong class="ak"> 11。设new Fn =新函数(' num '，' return num*num') </strong></h1><p id="12bf" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">它动态地创建函数。很少使用，但有时别无选择。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="9531" class="ms kx iq mn b gy mt mu l mv mw">let new Fn = new Function(‘num’, ‘return num*num’)</span></pre><h1 id="99d1" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">12.JavaScript是一种编译语言</h1><p id="e41e" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">该语言提前解析、优化和编译代码，并且只在运行时解释代码。</p><h1 id="fa5a" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">13.在<strong class="ak">‘a’</strong>数组下面有一个元素init，但是这个长度仍然显示为<strong class="ak"> 0 </strong></h1><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="992d" class="ms kx iq mn b gy mt mu l mv mw">&gt; Array.prototype.push(1)<br/>1</span><span id="2ee4" class="ms kx iq mn b gy nl mu l mv mw">&gt; let a = []<br/>undefined</span><span id="1809" class="ms kx iq mn b gy nl mu l mv mw">&gt; a.length<br/>0</span><span id="f451" class="ms kx iq mn b gy nl mu l mv mw">&gt; a[0]<br/>1</span></pre><h1 id="0959" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi translated">14.真+假= 1</h1><p id="aad0" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated"><code class="fe mk ml mm mn b">Number(true)</code>等于1，<code class="fe mk ml mm mn b">Number(false)</code>等于0，所以真+假= 1</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="6aea" class="ms kx iq mn b gy mt mu l mv mw">&gt; true + false<br/>1</span></pre><h1 id="0903" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi">15. [1, 2, 3] + [4, 5, 6] == 1,2,34,5,6</h1><p id="680c" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">没有为数组定义+运算符。发生的事情是Javascript将数组转换成字符串，并将它们连接起来。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="8ac4" class="ms kx iq mn b gy mt mu l mv mw">&gt; [1, 2, 3] + [4, 5, 6]<br/>1,2,34,5,6</span></pre><p id="b9f8" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">如果你真的想组合两个数组，这是一个更好的方法:</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="e6ab" class="ms kx iq mn b gy mt mu l mv mw">&gt; [...[1, 2, 3], ...[4, 5, 6]]</span></pre><h1 id="32d8" class="kw kx iq bd ky kz la lb lc ld le lf lg jw lh jx li jz lj ka lk kc ll kd lm ln bi">16. !!””</h1><p id="f70b" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">您可以在任何值前添加两个感叹号来获得它的布尔表示。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="ca21" class="ms kx iq mn b gy mt mu l mv mw">&gt; !!""<br/>false</span></pre><p id="c5db" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated">注意，任何有值的都是真的，任何有“空”值的都是假的。但是空数组是个例外。它由true表示。</p><pre class="kg kh ki kj gt mo mn mp mq aw mr bi"><span id="cb62" class="ms kx iq mn b gy mt mu l mv mw">&gt; !![]</span><span id="d15d" class="ms kx iq mn b gy nl mu l mv mw">true</span></pre><h2 id="ed78" class="ms kx iq bd ky nm nn dn lc no np dp lg lx nq nr li mb ns nt lk mf nu nv lm nw bi translated">结论</h2><p id="68d5" class="pw-post-body-paragraph lo lp iq lq b lr ls jr lt lu lv ju lw lx ly lz ma mb mc md me mf mg mh mi mj ij bi translated">我希望你对这些小信息感兴趣。你知道我们忽略了哪些奇怪的JavaScript怪癖吗？如果有，请在评论中告诉我们。</p><p id="e523" class="pw-post-body-paragraph lo lp iq lq b lr mx jr lt lu my ju lw lx mz lz ma mb na md me mf nb mh mi mj ij bi translated"><em class="nx">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="lq ir"><em class="nx">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Let’s Build a YouTube Clone with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React构建一个YouTube克隆</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-build-a-youtube-clone-with-react-part-4-48dd9e9d8cef?source=collection_archive---------8-----------------------#2021-02-17">https://javascript.plainenglish.io/lets-build-a-youtube-clone-with-react-part-4-48dd9e9d8cef?source=collection_archive---------8-----------------------#2021-02-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="ef82" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第4部分:在本教程中，我们将通过构建我们的视频播放器来播放YouTube上的任何视频，从而完成我们的YouTube克隆。</h2></div><p id="fc45" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在第<a class="ae lb" href="https://medium.com/swlh/building-a-youtube-clone-using-react-part-1-40fb09ae2837" rel="noopener">部分1 </a>、<a class="ae lb" href="https://medium.com/swlh/building-a-youtube-clone-using-react-part-2-a23a9dded270" rel="noopener"> 2 </a>和<a class="ae lb" href="https://medium.com/javascript-in-plain-english/building-a-youtube-clone-using-react-part-3-d86db83d3b33" rel="noopener"> 3 </a>中，我们从从Youtube数据API v3获取API密钥开始，构建了推荐视频页面，该页面根据您的国家代码显示最受欢迎的视频，以及允许通过关键字搜索视频的搜索页面。在这一部分中，我们将构建包含播放视频功能的YouTube克隆的视频播放器页面。</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lc"><img src="../Images/d82487c38627c14c91beb69dfbc346c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JIRxFqX_ctYhlF1VbZgxfQ.png"/></div></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">Video Player for our YouTube Clone</figcaption></figure><p id="7c54" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下面是构建这个YouTube克隆的部分列表:</p><ul class=""><li id="4821" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated">第1部分—获取API密钥并构建侧栏和标题(<a class="ae lb" href="https://medium.com/@nouman10/building-a-youtube-clone-using-react-part-1-40fb09ae2837" rel="noopener">此处为</a>)</li><li id="9db0" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">第2部分—建立推荐视频页面(<a class="ae lb" href="https://medium.com/swlh/building-a-youtube-clone-using-react-part-2-a23a9dded270" rel="noopener">此处</a>)</li><li id="6027" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">第3部分—构建搜索页面(<a class="ae lb" href="https://medium.com/javascript-in-plain-english/building-a-youtube-clone-using-react-part-3-d86db83d3b33" rel="noopener">此处为</a>)</li><li id="9261" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la lx ly lz ma bi translated">第4部分—构建视频播放器页面(这一部分)</li></ul><p id="ce09" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你不喜欢阅读，对源代码感兴趣，可以滚动到故事的结尾。</p><blockquote class="mg mh mi"><p id="f660" class="kf kg mj kh b ki kj jr kk kl km ju kn mk kp kq kr ml kt ku kv mm kx ky kz la ij bi translated">注意:本教程假设你对JavaScript和React有基本的了解。</p><p id="e193" class="kf kg mj kh b ki kj jr kk kl km ju kn mk kp kq kr ml kt ku kv mm kx ky kz la ij bi translated">注意:本教程不包含所有的代码，尤其是样式，而是解释了项目的主要部分</p></blockquote></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="65fd" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">配置路线</h1><p id="8a1a" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">正如我们在上一部分所做的，我们将从在<code class="fe nr ns nt nu b">App.js</code>中添加视频播放器路径开始。这将是文件的最终状态</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="bb96" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这里，我们添加了路径<code class="fe nr ns nt nu b">/video/:videoId</code>,它将显示我们将要构建的<code class="fe nr ns nt nu b">VideoPlayer</code>组件</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="8d83" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">将视频重定向到视频播放器页面</h1><p id="34b3" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">首先，我们必须修改<code class="fe nr ns nt nu b">SearchPage</code>和<code class="fe nr ns nt nu b">RecommendedVideos</code>中的代码，将视频重定向到视频播放器页面。我们将通过用一个<code class="fe nr ns nt nu b">Link</code>组件包装我们的<code class="fe nr ns nt nu b">VideoRow</code>和<code class="fe nr ns nt nu b">VideoCard</code>组件来做到这一点</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="8c8b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">组件现在重定向到具有相应视频ID的视频页面</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="8669" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">构建我们的视频组件</h1><p id="e722" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">视频播放器页面由两个主要组件组成。<code class="fe nr ns nt nu b">Video</code>和<code class="fe nr ns nt nu b">VideoInfo</code>组件。让我们从构建<code class="fe nr ns nt nu b">Video</code>组件开始</p><p id="7090" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是一个非常简单的组件，它利用了<code class="fe nr ns nt nu b">react-youtube</code>库，并简单地将视频ID传递给它。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="a259" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">构建VideoInfo组件</h1><p id="55cd" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated"><code class="fe nr ns nt nu b">VideoInfo</code>组件显示了关于视频的附加信息，比如它的描述、它的频道的订阅者数量、喜欢、不喜欢、观点、日期等等</p><p id="c125" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们利用<code class="fe nr ns nt nu b">@material-ui/icons</code>使页面看起来与实际的youtube页面相似。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="9b4d" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">访问API</h1><p id="eaf5" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">为了获得视频的统计数据，我们需要访问Youtube API并存储信息，以便稍后将其传递给<code class="fe nr ns nt nu b">VideoInfo</code>组件。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="5dd7" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">API的输出如下所示:</p><figure class="ld le lf lg gt lh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi nx"><img src="../Images/2821100d627fa41ff45190dcbc6417fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zMDR4NseFIaRakVpFVxeHw.png"/></div></div></figure><p id="ad8a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">函数<code class="fe nr ns nt nu b">createVideoInfo</code>从这个响应中提取信息，并将其存储到组件的状态中。它还再次调用API来获取频道的订阅者数量和频道图像。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="d90b" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">将一切结合在一起</h1><p id="e439" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">让我们将所有东西组合成最终的<code class="fe nr ns nt nu b">VideoPlayer</code>组件。</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure><p id="073a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">该组件执行如下:</p><ol class=""><li id="0173" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la ny ly lz ma bi translated">首先，我们从查询参数中获取视频ID</li><li id="fe3b" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">然后，我们调用API来获取关于videoID的统计数据</li><li id="82ad" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">我们编写了一个从API响应中提取视频信息的函数</li><li id="90e4" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">我们检查错误。如果有，我们会显示一条警告消息，指出视频ID无效</li><li id="08b1" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">最后，我们展示视频和视频信息。在这种情况下，API调用需要一些时间，我们也显示一个加载图标。另外，我们还展示了<code class="fe nr ns nt nu b">RecommendedVideos</code>组件，让它看起来像真正的Youtube。</li></ol><p id="a68f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后，让我们给组件添加一些样式</p><figure class="ld le lf lg gt lh"><div class="bz fp l di"><div class="nv nw l"/></div></figure></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><h1 id="caba" class="mu mv iq bd mw mx my mz na nb nc nd ne jw nf jx ng jz nh ka ni kc nj kd nk nl bi translated">结论</h1><p id="7120" class="pw-post-body-paragraph kf kg iq kh b ki nm jr kk kl nn ju kn ko no kq kr ks np ku kv kw nq ky kz la ij bi translated">这部分和教程到此为止。让我们总结一下我们在本教程中所做的工作:</p><ol class=""><li id="2943" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la ny ly lz ma bi translated">使用<code class="fe nr ns nt nu b">react-router-dom</code>为视频播放器设置路线</li><li id="6714" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">创建了<code class="fe nr ns nt nu b">Video</code>和<code class="fe nr ns nt nu b">VideoInfo</code>组件来分别渲染实际的视频及其统计数据</li><li id="004f" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">使用<code class="fe nr ns nt nu b">axios</code>通过视频ID访问Youtube API获取数据</li><li id="1af7" class="ls lt iq kh b ki mb kl mc ko md ks me kw mf la ny ly lz ma bi translated">将所有内容组合到<code class="fe nr ns nt nu b">VideoPlayer</code>组件中以呈现所有内容。</li></ol><p id="114a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kh ir">恭喜你！</strong>你从零开始创建了一个YouTube克隆。</p><p id="0b5d" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">你可以在我的GitHub上查看完整的源代码</p></div><div class="ab cl mn mo hu mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ij ik il im in"><p id="4b9c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您觉得以上内容对您有用，请分享并随时支持我--&gt;</p><ul class=""><li id="86c7" class="ls lt iq kh b ki kj kl km ko lu ks lv kw lw la lx ly lz ma bi translated"><a class="ae lb" href="https://www.buymeacoffee.com/nouman10" rel="noopener ugc nofollow" target="_blank">https://www.buymeacoffee.com/nouman10</a></li></ul></div></div>    
</body>
</html>
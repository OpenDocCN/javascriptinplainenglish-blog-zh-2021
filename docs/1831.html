<html>
<head>
<title>Composition: An Alternative to Props Drilling in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">合成:React中道具演练的替代方案</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/composition-in-react-f02afe24bc46?source=collection_archive---------4-----------------------#2021-04-18">https://javascript.plainenglish.io/composition-in-react-f02afe24bc46?source=collection_archive---------4-----------------------#2021-04-18</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="b742" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">在接触上下文或库之前，考虑一下组成。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/df2247a7bbf83a5ecbf8d459fda50273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h8NCiK0yuRJSsmH68GWQQg.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@kellysikkema?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Kelly Sikkema</a> on <a class="ae ks" href="https://unsplash.com/s/photos/blocks?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c575" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React为构建组件的数据流实现了单向模式。模式本身并不是唯一的反应，而是被严格遵循的。</p><blockquote class="lp lq lr"><p id="160c" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated">单向数据流简单地说就是数据只能单向流动<strong class="kv io">。</strong></p></blockquote><p id="9816" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">根据定义——如果有React的经验——您会注意到子组件不能将数据传递给父组件；因此，数据只能单向流动，“从父节点<strong class="kv io">到</strong>子节点<strong class="kv io"/></p><p id="e3cc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果我们需要修改影响父组件或在两个子组件之间共享状态的子组件，我们使用props。</p><p id="0e97" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们来看一个小例子。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="091b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在上面的例子中，我们做了一些假设，比如App函数负责处理登录，它将"<em class="ls"> loggedIn </em>"状态和"<em class="ls"> handleSetLoggedIn </em>"函数传递给Header。</p><p id="5cd7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们研究一下Header组件，看看它是如何利用这些属性的。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="2515" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面，我们可以看到Header组件没有使用props，而是将它们传递给使用它们的Profile组件。这种情况被称为道具演练。</p><h2 id="84da" class="ly lz in bd ma mb mc dn md me mf dp mg lc mh mi mj lg mk ml mm lk mn mo mp mq bi translated">道具钻探</h2><p id="fb6e" class="pw-post-body-paragraph kt ku in kv b kw mr jo ky kz ms jr lb lc mt le lf lg mu li lj lk mv lm ln lo ig bi translated">Props drilling是将道具传递给一个不需要这些道具的子组件，但帮助将其传递给自己的子组件，子组件可能会将其传递给自己的子组件，因为在到达真正需要这些道具的子组件之前，它也不需要这些道具。</p><p id="5105" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">道具训练的问题是事情变得混乱，调试可能很快变得困难。</p><p id="de3f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">一个好的解决方案可能是使用上下文API或Redux，但这并不是解决这个问题所必需的。</p><p id="bf17" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以利用组合(组件组合)来为自己谋利。事实上，React团队说:</p><blockquote class="lp lq lr"><p id="30fb" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated"><a class="ae ks" href="https://reactjs.org/docs/context.html#before-you-use-context" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io">如果只是想避免一些道具经过很多关卡，组件组合往往是比上下文更简单的解决方案。</strong>T13】</a></p><p id="2e24" class="kt ku ls kv b kw kx jo ky kz la jr lb lt ld le lf lu lh li lj lv ll lm ln lo ig bi translated"><strong class="kv io"> —反应小组</strong></p></blockquote><h2 id="5ad1" class="ly lz in bd ma mb mc dn md me mf dp mg lc mh mi mj lg mk ml mm lk mn mo mp mq bi translated">什么是作文？</h2><p id="eb16" class="pw-post-body-paragraph kt ku in kv b kw mr jo ky kz ms jr lb lc mt le lf lg mu li lj lk mv lm ln lo ig bi translated">组合是将组件或元素组装成一个整体的行为。</p><p id="d2cc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">React提供了一个帮助构图的强大工具，这就是儿童道具。</p><p id="8419" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们可以像这样轻松地重构我们的Header组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c05a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">孩子的道具在每个部件上都有。它包含组件的开始和结束标记之间的内容。</p><p id="490e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，我们的Header组件是我们选择在其中呈现的子组件的包装器。</p><p id="7d05" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这使我们能够在"<em class="ls"> App.js </em>"中重构我们的应用组件render</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lw lx l"/></div></figure><p id="c8fc" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们利用构图解决了道具演练的问题。</p><p id="9808" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这种模式也给了我们构建更具可伸缩性的可重用组件的能力，尤其是当构建一个工具、一个库或由大量不同需求的人使用的组件时。</p><p id="3818" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">下一篇文章将构建一个卡片组件，并看看构图是如何成为一个令人兴奋的模式来思考和经常使用。</p><p id="81bd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">谢谢你的阅读。</p></div><div class="ab cl mw mx hr my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="ig ih ii ij ik"><h2 id="168d" class="ly lz in bd ma mb mc dn md me mf dp mg lc mh mi mj lg mk ml mm lk mn mo mp mq bi translated">进一步阅读</h2><div class="nd ne gp gr nf ng"><a href="https://bit.cloud/blog/design-tokens-in-components-with-react-and-bit-l28qlxq6" rel="noopener  ugc nofollow" target="_blank"><div class="nh ab fo"><div class="ni ab nj cl cj nk"><h2 class="bd io gy z fp nl fr fs nm fu fw im bi translated">具有反应和比特的组件中的设计令牌</h2><div class="nn l"><h3 class="bd b gy z fp nl fr fs nm fu fw dk translated">现场演示更好。在深入讨论细节之前，让我们看看使用Bit的设计令牌如何帮助我们构建……</h3></div><div class="no l"><p class="bd b dl z fp nl fr fs nm fu fw dk translated">bit.cloud</p></div></div><div class="np l"><div class="nq l nr ns nt np nu km ng"/></div></div></a></div><p id="a4fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ls">更内容于</em> <a class="ae ks" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">普通英语</em> </strong> </a> <em class="ls">。报名参加我们的</em> <a class="ae ks" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">免费周报</em> </strong> </a> <em class="ls">。在</em> <a class="ae ks" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">推特</em></strong></a><a class="ae ks" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ls">领英</em></strong></a><strong class="kv io"><em class="ls"/></strong><a class="ae ks" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ls">YouTube</em></strong></a><strong class="kv io"><em class="ls">和</em></strong><em class="ls"/><strong class="kv io">T48不和</strong>T52  <em class="ls">对成长黑客感兴趣？查看</em> <a class="ae ks" href="https://circuit.ooo/" rel="noopener ugc nofollow" target="_blank"> <strong class="kv io"> <em class="ls">电路</em> </strong> </a> <strong class="kv io"> <em class="ls">。</em> </strong></p></div></div>    
</body>
</html>
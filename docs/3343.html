<html>
<head>
<title>Triggering file uploads/downloads without a back end in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨Reactä¸­è§¦å‘æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½è€Œæ— éœ€åç«¯</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/july-7-triggering-file-uploads-downloads-without-a-back-end-in-react-6438cb77859?source=collection_archive---------10-----------------------#2021-07-07">https://javascript.plainenglish.io/july-7-triggering-file-uploads-downloads-without-a-back-end-in-react-6438cb77859?source=collection_archive---------10-----------------------#2021-07-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/873c4eb49c183d5286ce34d52197c324.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/1*-MzRiX--ym8ueJBrXwPmWQ.gif"/></div><figcaption class="jr js gj gh gi jt ju bd b be z dk">Photo credit: NBC Universal</figcaption></figure><p id="946a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â€œå®½æ•æˆ‘å§ï¼Œç¥çˆ¶ï¼Œå› ä¸ºæˆ‘çŠ¯äº†ç½ªâ€¦â€</p><p id="1666" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä»Šå¤©æˆ‘ä»¬å°†å°è¯•ä¸€äº›æœ‰ç‚¹æ·˜æ°”çš„äº‹æƒ…:<strong class="jx io">å®Œå…¨ä»å‰ç«¯è§¦å‘æµè§ˆå™¨ä¸‹è½½ã€‚åœ¨React(æˆ‘ç»å¸¸åœ¨åšå®¢ä¸Šè°ˆè®ºçš„ä¸€ä¸ªä¸»é¢˜)ä¸­ï¼Œæœ‰å‡ ä¸ªæµè¡Œçš„åŒ…å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æ˜¯ä»Šå¤©ï¼Œæˆ‘å°†åˆ†äº«ä¸€ç§ç®€å•ã€å®ç”¨çš„å‰ç«¯ä¸‹è½½æ–¹æ³•ï¼Œå®ƒä¸éœ€è¦ä»»ä½•åŒ…ã€‚è¿™ä¸ªæ¦‚å¿µè¶³å¤Ÿé€šç”¨ï¼Œå¯ä»¥é€‚åº”ä»»ä½•æ¡†æ¶ï¼Œä½†æ˜¯åœ¨React-landä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦<code class="fe ku kv kw kx b">FileReader()</code>ï¼ŒReactçš„<code class="fe ku kv kw kx b">useRef()</code>é’©å­å’Œä¸€ç‚¹é»‘é­”æ³•...</strong></p><h1 id="943e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">èƒŒæ™¯</strong></h1><p id="4015" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">ä»¥å‰ä»å‰ç«¯è§¦å‘ä¸‹è½½æ˜¯ä¸è¢«å…è®¸çš„ï¼ŒåŸå› æœ‰å‡ ä¸ª:</p><ul class=""><li id="a85c" class="mb mc in jx b jy jz kc kd kg md kk me ko mf ks mg mh mi mj bi translated"><strong class="jx io">ä¸å¯é :</strong>åœ¨æŸäº›æµè§ˆå™¨ä¸­ï¼Œæ–‡ä»¶å¯èƒ½ä¼šåœ¨æ–°çš„æ ‡ç­¾é¡µ/çª—å£ä¸­æ‰“å¼€ï¼Œæˆ–è€…æ ¹æœ¬æ— æ³•æ‰“å¼€</li><li id="4da6" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><strong class="jx io">å­˜åœ¨å®‰å…¨é£é™©:</strong>å¼ºåˆ¶ä¸‹è½½å¯èƒ½ä¼šå¯¼è‡´æ¶æ„è½¯ä»¶çš„å…¥ä¾µ</li><li id="d774" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated"><strong class="jx io">æœ‰å‘³é“:</strong>ä¸¥æ ¼æ¥è¯´ï¼Œè¿™æ˜¯åº”è¯¥ç”±åç«¯å¤„ç†çš„äº‹æƒ…</li></ul><p id="2091" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½†æ˜¯ï¼Œå¦‚ä»Šå•é¡µåº”ç”¨ç¨‹åºæ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´åŠ æ™®éå’Œä¸°å¯Œï¼Œæµè§ˆå™¨ä¹Ÿèµ¶ä¸Šæ¥äº†ï¼Œæ‰€ä»¥å®‰å…¨é£é™©ä¸é‚£ä¹ˆä¸¥é‡ã€‚åœ¨ä¸€äº›æœ‰é™çš„æƒ…å†µä¸‹ï¼Œå½“åç«¯ä»åœ¨æ„å»ºä¸­æ—¶ï¼Œå®ƒå¯èƒ½æœ‰åŠ©äºå¯åŠ¨å¹¶è¿è¡Œæ¦‚å¿µéªŒè¯ã€‚</p><h1 id="0423" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ç”¨<code class="fe ku kv kw kx b">useRef()</code>å’Œ<code class="fe ku kv kw kx b">hidden</code>åœ¨DOMä¸Šå®ç°</h1><p id="e8bf" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">æˆ‘å·²ç»åšäº†ä¸€æ®µæ—¶é—´çš„çŸ¢é‡å›¾å½¢åº”ç”¨ã€‚æˆ‘æœ€ç»ˆå¸Œæœ›å°†å®ƒä¸è¿æ¥åˆ°å¤„ç†ä¿å­˜å’Œä¸‹è½½æ–‡ä»¶çš„SQLæ•°æ®åº“çš„åç«¯é›†æˆåœ¨ä¸€èµ·ï¼Œä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘å¸Œæœ›æµ‹è¯•æˆ‘æ­£åœ¨ç”Ÿæˆçš„SVGæ–‡ä»¶ï¼Œä»¥ç¡®ä¿å®ƒä»¬ç¡®å®å¯ä»¥å·¥ä½œã€‚æ‰€ä»¥æˆ‘è®¾ç½®äº†ä¸€ä¸ªç»„ä»¶ï¼Œçœ‹èµ·æ¥åƒè¿™æ ·:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/055fbe94a53f99be52159aaca5c1fe39.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*hHwJOcu0lQsoAR4jRWphXA.png"/></div></figure><p id="b7bb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä½ å¯ä»¥äº²çœ¼çœ‹åˆ°ç‚¹å‡»â€œåŠ è½½â€æŒ‰é’®ä¼šå‡ºç°ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ çª—å£ï¼Œæ¯ç‚¹å‡»ä¸€æ¬¡â€œä¿å­˜â€æŒ‰é’®ï¼Œå°±ä¼šå‡ºç°ä¸€æ¬¡ç–¯ç‹‚ä¸‹è½½ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä»<a class="ae mp" href="https://github.com/josh-frank/gieves-edit/blob/master/src/components/menus/FilePanel.js" rel="noopener ugc nofollow" target="_blank">ä¸­å¾—åˆ°çš„<code class="fe ku kv kw kx b">return</code>æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒçš„æºä»£ç </a>ä¸­çš„ç›¸å…³ç»„ä»¶ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®Œæˆçš„:</p><pre class="mr ms mt mu gt mv kx mw mx aw my bi"><span id="9215" class="mz kz in kx b gy na nb l nc nd">export default function FilePanel() {</span><span id="80d0" class="mz kz in kx b gy ne nb l nc nd">...</span><span id="f27b" class="mz kz in kx b gy ne nb l nc nd">  return &lt;div className="menu-panel"&gt;<br/>  &lt;div className="menu-header"&gt;File&lt;/div&gt;<br/><strong class="kx io">    &lt;input<br/>      type="file"<br/>      hidden<br/>    /&gt;</strong><br/>    &lt;button onClick={ () =&gt; {<br/>      alert( "This will erase your artboard!" );<br/>    } }&gt;<br/>      ğŸ—‚ &lt;b&gt;Load from SVG&lt;/b&gt;<br/>    &lt;/button&gt;<br/>    &lt;button&gt;<br/>      ã€ˆï¼ã€‰ &lt;b&gt;Download as SVG&lt;/b&gt;<br/>    &lt;/button&gt;<br/>&lt;/div&gt;;</span><span id="0067" class="mz kz in kx b gy ne nb l nc nd">}</span></pre><p id="d853" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">æˆ‘ä»¬è¿™ä¸¤ä¸ªæŒ‰é’®çš„ç›®çš„å¾ˆæ˜æ˜¾â€”â€”ä½†æ˜¯<code class="fe ku kv kw kx b">&lt;input type="file"&gt;</code>æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªéå¸¸ç†Ÿæ‚‰çš„æ™®é€šæ ‡ç­¾ï¼Œé€šå¸¸æ˜¾ç¤ºå¦‚ä¸‹ï¼Œè¿™å¹¶ä¸ç†æƒ³â€¦</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/eef7c5b869277088f6cdc2f7d9ee7c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:914/format:webp/1*CBvW40Oz0Nu0Sic4qSzvLw.png"/></div></figure><p id="246f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">â€¦æ‰€ä»¥æˆ‘æ·»åŠ äº†<code class="fe ku kv kw kx b">hidden</code>å±æ€§ï¼Œè¿™å½“ç„¶éšè—äº†å®ƒï¼Œä½†æ˜¯è¿™æ ·åšä½¿å¾—<code class="fe ku kv kw kx b">input</code>åœ¨æ²¡æœ‰è¿›ä¸€æ­¥é­”æ³•çš„æƒ…å†µä¸‹ä¸å¯ç”¨ã€‚<strong class="jx io">è¿›å…¥</strong> <code class="fe ku kv kw kx b"><strong class="jx io">useRef</strong></code> <strong class="jx io">é˜¶æ®µå·¦:</strong></p><pre class="mr ms mt mu gt mv kx mw mx aw my bi"><span id="b5d3" class="mz kz in kx b gy na nb l nc nd"><strong class="kx io">import { useRef } from "react";</strong></span><span id="fb17" class="mz kz in kx b gy ne nb l nc nd">export default function FilePanel() {</span><span id="3a7c" class="mz kz in kx b gy ne nb l nc nd"><strong class="kx io">   const uploadRef = useRef( null );</strong></span><span id="43c9" class="mz kz in kx b gy ne nb l nc nd">   return &lt;div className="menu-panel"&gt;<br/>     &lt;div className="menu-header"&gt;File&lt;/div&gt;<br/>       &lt;input<br/>         type="file"<br/><strong class="kx io">         ref={ uploadRef }<br/></strong>         hidden<br/>       /&gt;<br/>       &lt;button onClick={ () =&gt; {<br/>         alert( "This will erase your artboard!" );<br/><strong class="kx io">         uploadRef.current.click();</strong><br/>       } }&gt;<br/>         ğŸ—‚ &lt;b&gt;Load from SVG&lt;/b&gt;<br/>       &lt;/button&gt;<br/>       &lt;button&gt;<br/>         ã€ˆï¼ã€‰ &lt;b&gt;Download as SVG&lt;/b&gt;<br/>       &lt;/button&gt;<br/>   &lt;/div&gt;;</span><span id="d14c" class="mz kz in kx b gy ne nb l nc nd">}</span></pre><p id="390e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ku kv kw kx b"><strong class="jx io">useRef()</strong></code> <strong class="jx io">æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å°æŠ€å·§ï¼Œæ¯ä¸ªReactå¼€å‘äººå‘˜éƒ½åº”è¯¥ä¿æŒè­¦æƒ•ã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªæ•´æ´çš„å°å­˜å‚¨ç›’ï¼Œä¿å­˜ä¸€ä¸ªDOMå…ƒç´ ä½œä¸ºå®ƒçš„å¼•ç”¨ï¼›å·¥ç¨‹å¸ˆ(ä½ )å¯ä»¥ä½¿ç”¨å®ƒçš„å±æ€§<code class="fe ku kv kw kx b">.current</code>è°ƒç”¨å¼•ç”¨<code class="fe ku kv kw kx b">current</code> lyæŒ‡å‘çš„ä»»ä½•ä¸œè¥¿ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥æ¨¡æ‹Ÿè¢«å¼•ç”¨å…ƒç´ ä¸Šçš„ä¸€ä¸ª<code class="fe ku kv kw kx b">click()</code>ï¼Œå³ä½¿å®ƒæ˜¯<code class="fe ku kv kw kx b">hidden</code>ã€‚å¼•ç”¨ä»¥<code class="fe ku kv kw kx b">null</code>å¼€å§‹ï¼Œä½†æ˜¯ç”±äºReactçš„<code class="fe ku kv kw kx b">ref={}</code>å±æ€§ï¼Œä¸€æ—¦DOMè¢«æ¸²æŸ“ï¼Œå¼•ç”¨å°±è¢«è®¾ç½®ä¸ºæˆ‘ä»¬çš„æ–‡ä»¶è¾“å…¥ã€‚</strong></p><h1 id="adee" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ç”¨<code class="fe ku kv kw kx b">FileReader()</code>å“åº”ä¸Šä¼ </h1><p id="4b1d" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">ç°åœ¨æˆ‘ä»¬çš„æ–‡ä»¶è¾“å…¥å¦‚é¢„æœŸçš„é‚£æ ·å·¥ä½œäº†ï¼Œç”±ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»è§¦å‘ï¼Œè€Œä¸æ˜¯ç”±é‚£ä¸ªä¸‘é™‹çš„â€œé€‰æ‹©æ–‡ä»¶â€æŒ‰é’®è§¦å‘ã€‚ä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬çš„ç”¨æˆ·ä¸Šä¼ äº†æœ¬åœ°æ–‡ä»¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¦‚ä½•ä½¿ç”¨æœ¬åœ°æ–‡ä»¶å‘¢ï¼Ÿè®©æˆ‘ä»¬å†™ä¸€ä¸ªæ–¹æ³•ç»™<code class="fe ku kv kw kx b">handleUpload()</code>:</p><pre class="mr ms mt mu gt mv kx mw mx aw my bi"><span id="2637" class="mz kz in kx b gy na nb l nc nd">import { useRef } from "react";</span><span id="4972" class="mz kz in kx b gy ne nb l nc nd">export default function FilePanel() {</span><span id="3707" class="mz kz in kx b gy ne nb l nc nd"><strong class="kx io">   const handleUpload = uploadEvent =&gt; {<br/>      const uploadedFile = uploadEvent.target.files[ 0 ];<br/>      if ( uploadedFile &amp;&amp; uploadedFile.type === "image/svg+xml" ) {<br/>         const fileReader = new FileReader();<br/>         fileReader.onload = async loadEvent =&gt; {<br/>            &lt;do stuff with loadEvent here&gt;;<br/>         }<br/>         fileReader.readAsText( uploadedFile );<br/>      }<br/>   };</strong></span><span id="fe07" class="mz kz in kx b gy ne nb l nc nd">   const uploadRef = useRef( null );</span><span id="8145" class="mz kz in kx b gy ne nb l nc nd">return &lt;div className="menu-panel"&gt;<br/>     &lt;div className="menu-header"&gt;File&lt;/div&gt;<br/>        &lt;input<br/>          type="file"<br/>          ref={ uploadRef }<br/><strong class="kx io">          onChange={ handleUpload }<br/></strong>          hidden<br/>        /&gt;<br/>        &lt;button onClick={ () =&gt; {<br/>          alert( "This will erase your artboard!" );<br/>          uploadRef.current.click();<br/>        } }&gt;<br/>          ğŸ—‚ &lt;b&gt;Load from SVG&lt;/b&gt;<br/>        &lt;/button&gt;<br/>        &lt;button&gt;<br/>          ã€ˆï¼ã€‰ &lt;b&gt;Download as SVG&lt;/b&gt;<br/>        &lt;/button&gt;<br/>   &lt;/div&gt;;</span><span id="4a8f" class="mz kz in kx b gy ne nb l nc nd">}</span></pre><p id="4339" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">å¯¹äºä¸€ä¸ª<code class="fe ku kv kw kx b">&lt;input type="file"&gt;</code>æ ‡ç­¾ï¼Œä¸€ä¸ª<code class="fe ku kv kw kx b">onChange</code>äº‹ä»¶å°†åŒ…æ‹¬ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§<code class="fe ku kv kw kx b">files</code>ï¼Œä¸€ä¸ªJavaScript <code class="fe ku kv kw kx b">File</code>å¯¹è±¡æ•°ç»„ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªåä¸º<code class="fe ku kv kw kx b">FileReader()</code>çš„åº•å±‚åº“è¯»å–ã€‚<code class="fe ku kv kw kx b">File</code>å’Œ<code class="fe ku kv kw kx b">FileReader()</code>ç°åœ¨åŸºæœ¬ä¸Šæ˜¯æ¯ä¸ªå¹¿æ³›ä½¿ç”¨çš„æµè§ˆå™¨APIçš„ä¸€éƒ¨åˆ†ã€‚</p><p id="065e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">åœ¨æ£€æŸ¥äº†ä¸Šä¼ çš„<code class="fe ku kv kw kx b">file</code>çš„<code class="fe ku kv kw kx b">type</code>æ˜¯æ­£ç¡®çš„ä¹‹å(æˆ‘ä»¬åœ¨è¿™é‡Œç¼–è¾‘SVG)ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª<code class="fe ku kv kw kx b">FileReader()</code>çš„æ–°å®ä¾‹ï¼Œå¹¶ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„å›è°ƒå‡½æ•°<code class="fe ku kv kw kx b">onload</code>ï¼Œæ¥å®šä¹‰ä¸€æ—¦æˆ‘ä»¬è¯»å–äº†æ•°æ®ï¼Œæˆ‘ä»¬å°†å¯¹å®ƒåšä»€ä¹ˆ:è®¾ç½®çŠ¶æ€ã€æ›´æ–°DOMã€æ›´æ–°Reduxå­˜å‚¨â€¦ä»»ä½•äº‹æƒ…ï¼<strong class="jx io">æ³¨æ„</strong> <code class="fe ku kv kw kx b"><strong class="jx io">onload</strong></code> <strong class="jx io">æ˜¯ä¸€ä¸ª</strong> <code class="fe ku kv kw kx b"><strong class="jx io">async</strong></code> <strong class="jx io">å‡½æ•°ï¼Œå› ä¸ºå®ƒå¿…é¡»ç­‰å¾…ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶â€”â€”</strong>è¿™å¯èƒ½å¾ˆæ£˜æ‰‹ï¼Œæ‰€ä»¥è¦å°å¿ƒï¼</p><h1 id="de8d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ä½¿ç”¨<code class="fe ku kv kw kx b">href</code>å’Œ<code class="fe ku kv kw kx b">document.createElement</code>å¼ºåˆ¶ä¸‹è½½</h1><p id="d5ec" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">æˆ‘å°†åœ¨è¿™é‡Œå¼ºè°ƒæœ€åä¸€ä¸ªå°æŠ€å·§ï¼Œç”¨äºä¸‹è½½åœ¨ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸­åˆ›å»º/ç”Ÿæˆçš„æ•°æ®ï¼Œæˆ‘å°†å®ƒæ”¾åœ¨ä¸€ä¸ªä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œæˆ‘ç§°ä¹‹ä¸º<code class="fe ku kv kw kx b">fileUtilities.js</code>:</p><pre class="mr ms mt mu gt mv kx mw mx aw my bi"><span id="8fd8" class="mz kz in kx b gy na nb l nc nd">export const downloadArtboardAsSvg = ( paths, dimensions ) =&gt; {<br/>  const element = document.createElement( "a" );<br/>  element.setAttribute( "href", "data:image/svg+xml;utf8," + encodeURIComponent( [<br/>    `&lt;?xml version="1.0" encoding="utf-8"?&gt;`,<br/>    `&lt;!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"&gt;`,<br/>    `&lt;svg version="1.1" id="Layer_1"  xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="${ dimensions[ 0 ] }px" height="${ dimensions[ 1 ] }px" viewBox="0 0 ${ dimensions[ 0 ] } ${ dimensions[ 1 ] }" enable-background="new 0 0 ${ dimensions[ 0 ] } ${ dimensions[ 1 ] }" xml:space="preserve"&gt;`,<br/>    ...paths.map( path =&gt; `&lt;path d="${ path }" stroke="black" stroke-width="1" fill="white" /&gt;` ),<br/>    `&lt;/svg&gt;`<br/>  ].join( "" ) ) );<br/>  element.setAttribute( "download", `GievesEdit-${ Date.now() }` );<br/>  element.style.display = "none";<br/>  document.body.appendChild( element );<br/>  element.click();<br/>  document.body.removeChild( element );<br/>}</span></pre><p id="950c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿä¸ºäº†åœ¨ç‚¹å‡»ä¸‹è½½æŒ‰é’®æ—¶è§¦å‘æµè§ˆå™¨ä¸‹è½½ä¸€ä¸ªSVGæ–‡ä»¶ï¼Œæˆ‘å®é™…ä¸Šæ˜¯<strong class="jx io">è¿›å…¥æµè§ˆå™¨å¹¶åˆ›å»ºä¸€ä¸ªå¸¦æœ‰<code class="fe ku kv kw kx b">document.createElement</code>çš„</strong> <code class="fe ku kv kw kx b"><strong class="jx io">&lt;a&gt;</strong></code> <strong class="jx io">æ ‡ç­¾</strong>ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç»†ç›®åˆ†ç±»:</p><ul class=""><li id="21fb" class="mb mc in jx b jy jz kc kd kg md kk me ko mf ks mg mh mi mj bi translated">é¦–å…ˆï¼Œæˆ‘ç”¨ä¸€ä¸ªåä¸º<code class="fe ku kv kw kx b">encodeURIComponent()</code>çš„æ–¹æ³•è®¾ç½®é”šçš„<code class="fe ku kv kw kx b">href</code>å±æ€§ï¼Œè¯¥æ–¹æ³•å°†æ‚¨å¸Œæœ›ä¸‹è½½çš„æ–‡ä»¶ä¸»ä½“åŒ…å«çš„ä»»ä½•å†…å®¹(åœ¨æœ¬ä¾‹ä¸­ï¼Œæ˜¯ä¸€ä¸ªè¡¨ç¤ºSVGæ–‡æ¡£çš„å­—ç¬¦ä¸²)ä½œä¸ºå‚æ•°ã€‚</li><li id="51d3" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">ç„¶åæˆ‘è®¾ç½®äº†ä¸»æ’­çš„<code class="fe ku kv kw kx b">download</code>å±æ€§ã€‚è¿™åšäº†ä¸¤ä»¶äº‹:å®ƒå‘Šè¯‰æˆ‘ä»¬çš„DOMè¿™æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¸‹è½½çš„é“¾æ¥(ä¸æ˜¯URL)ï¼Œå®ƒè¿˜è®¾ç½®ä¸‹è½½æ–‡ä»¶çš„æ–‡ä»¶åã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä½¿ç”¨å¸¦æœ‰<code class="fe ku kv kw kx b">Date.now()</code>æ—¶é—´æˆ³çš„åº”ç”¨ç¨‹åºåç§°ã€‚</li><li id="52ac" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">æˆ‘é€šè¿‡ç”¨<code class="fe ku kv kw kx b">display = "none"</code>éšè—å®ƒæ¥ç¡®ä¿é”šä¸ä¼šåœ¨æˆ‘ä»¬çš„DOMä¸Šé€ æˆæ··ä¹±ã€‚</li><li id="37a2" class="mb mc in jx b jy mk kc ml kg mm kk mn ko mo ks mg mh mi mj bi translated">æœ€åï¼Œæˆ‘ç”¨<code class="fe ku kv kw kx b">appendChild()</code>å°†æˆ‘ä»¬çš„ä¸´æ—¶æ–‡ä»¶é”šé™„åŠ åˆ°DOMï¼Œæ¨¡æ‹Ÿä¸€ä¸ª<code class="fe ku kv kw kx b">click()</code>æ¥è§¦å‘ä¸‹è½½ï¼Œå¹¶é€šè¿‡å°†å…¶ä»DOMä¸­ç§»é™¤æ¥è¿›è¡Œæ¸…ç†ã€‚</li></ul><p id="99ec" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ç°åœ¨ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯å°†<code class="fe ku kv kw kx b">onClick</code>æ·»åŠ åˆ°æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„Reactç»„ä»¶ä¸­çš„ä¸‹è½½æŒ‰é’®:</p><pre class="mr ms mt mu gt mv kx mw mx aw my bi"><span id="ecac" class="mz kz in kx b gy na nb l nc nd">export default function FilePanel() {</span><span id="b0a4" class="mz kz in kx b gy ne nb l nc nd"><strong class="kx io">const handleDownload = () =&gt; {<br/>   downloadArtboardAsSvg( &lt;...an array of SVG paths held in state&gt; );<br/>};</strong></span><span id="e404" class="mz kz in kx b gy ne nb l nc nd">return &lt;div className="menu-panel"&gt;<br/>     &lt;div className="menu-header"&gt;File&lt;/div&gt;<br/>        &lt;input<br/>          type="file"<br/>          ref={ uploadRef }<br/>          onChange={ handleUpload }<strong class="kx io"><br/></strong>          hidden<br/>        /&gt;<br/>        &lt;button onClick={ () =&gt; {<br/>          alert( "This will erase your artboard!" );<br/>          uploadRef.current.click();<br/>        } }&gt;<br/>          ğŸ—‚ &lt;b&gt;Load from SVG&lt;/b&gt;<br/>        &lt;/button&gt;<br/>        &lt;button <strong class="kx io">onClick={ handleDownload }</strong>&gt;<br/>          ã€ˆï¼ã€‰ &lt;b&gt;Download as SVG&lt;/b&gt;<br/>        &lt;/button&gt;<br/>   &lt;/div&gt;;</span><span id="8e3c" class="mz kz in kx b gy ne nb l nc nd">}</span></pre><h1 id="0d44" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated"><strong class="ak">ç»“è®º</strong></h1><p id="2837" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">æ­£å¦‚æˆ‘ä¸Šé¢æåˆ°çš„ï¼Œä»¥åŠä¹‹å‰åœ¨è¿™ä¸ªåšå®¢ä¸Šæåˆ°çš„ï¼Œ<strong class="jx io">åƒè¿™æ ·æ·±å…¥</strong> <code class="fe ku kv kw kx b"><strong class="jx io">document</strong></code> <strong class="jx io">å¹¶ä¸æ˜¯ä»€ä¹ˆäº†ä¸èµ·çš„ååº”ï¼Œä½†å®ƒå®Œæˆäº†ä»»åŠ¡ã€‚ä¸€åœºå…³äºä»¥è¿™ç§æ–¹å¼è§¦å‘ä¸‹è½½æ˜¯å¦å¯æ¥å—çš„æ¿€çƒˆè¾©è®ºä»åœ¨ç»§ç»­ã€‚è®¸å¤šäººåšæŒè®¤ä¸ºåˆ›å»ºä¸€ä¸ªç«¯ç‚¹æ€»æ˜¯æ›´å¥½ï¼›æ ‡ç­¾ä¸åº”è¯¥ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨ï¼Œå³ä½¿å®ƒä¸ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼›è¿™ç§æ–¹æ³•æ—¢ä¸å¯é åˆç¬¨é‡ã€‚æ‚¨çš„é‡Œç¨‹å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚</strong></p><p id="56c2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">ä¸ç®¡æ€æ ·ï¼Œæˆ‘æƒ³æˆ‘ä»¬éƒ½åŒæ„<code class="fe ku kv kw kx b">useRef()</code>è¢«çŠ¯ç½ªæ€§åœ°åˆ©ç”¨å’Œé‚ªæ¶çš„å¼ºå¤§ã€‚å¯¹äºReactåº”ç”¨ç¨‹åºæ¥è¯´ï¼Œè¿™æ˜¯åˆ©ç”¨ç†Ÿæ‚‰ã€å¯é çš„æ™®é€šHTMLæ ‡ç­¾çš„æœ€ä½³æ–¹å¼â€”â€”åŒæ—¶å¯¹ç”¨æˆ·éšè—å®ƒä»¬ï¼Œä»¥æ”¯æŒæ›´çµæ´»ã€æ›´ç°ä»£çš„æ–¹å¼ã€‚</p><p id="0e00" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="kt">æ›´å¤šå†…å®¹çœ‹</em><a class="ae mp" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="kt">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
# èŠ‚çœæ—¶é—´çš„æ¼‚äº®çš„ npm æŠ€å·§å’Œèµ„æº

> åŸæ–‡ï¼š<https://javascript.plainenglish.io/nifty-npm-tips-and-resources-to-save-time-9ed8dc94f7a4?source=collection_archive---------18----------------------->

## *èŠ‚çœæ›´å¤šæ—¶é—´çš„ NPM å°è´´å£«â±ï¸*

![](img/148b629c383d10f4abb4aabc46652d26.png)

**å…ˆå†³æ¡ä»¶** â€”æ‚¨éœ€è¦åœ¨æ‚¨çš„æœºå™¨ä¸Šå®‰è£… Node æ¥è¿è¡Œè¿™äº›å‘½ä»¤ã€‚

å½“æåˆ°ä¸‹é¢ä½¿ç”¨çš„å‘½ä»¤æ—¶ï¼Œæˆ‘å°†å¼•ç”¨è¿™ä¸ªæ ·ä¾‹ package.jsonğŸ‘‡

# npm åˆå§‹åŒ–-y

è¿™ä¸ªå‘½ä»¤å°†åœ¨ä»»ä½•ç›®å½•ä¸­åˆå§‹åŒ–æ‚¨çš„åŒ…ã€‚è¯¥å‘½ä»¤ä½¿ç”¨é»˜è®¤å€¼ï¼Œå¹¶ä¸”ä¸ä¼šæç¤ºä»»ä½•é€‰é¡¹ã€‚è¿™æ˜¯ä¸€ä¸ªæ•‘ç”Ÿå‘½ä»¤å¼€å§‹ä¸€ä¸ªé¡¹ç›®çš„é»˜è®¤é€‰é¡¹ï¼Œä»¥åä½ å¯ä»¥æ·»åŠ ï¼Œç¼–è¾‘æˆ–æ›´æ–°ä»»ä½•é€‰é¡¹ã€‚

å‘½ä»¤â€” `npm init -y`

**è¾“å‡º**

![](img/98a97e6c3304782df7550b7b16bb5dd9.png)

# npm è¿è¡Œ

è¯¥å‘½ä»¤å°†ç»™å‡º package.json ä¸­åˆ—å‡ºçš„å¯ç”¨è„šæœ¬åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨ package.json æ‰€åœ¨çš„ç»ˆç«¯ä¸Šè¿è¡Œ`npm run`å‘½ä»¤ã€‚

å‘½ä»¤â€” `npm run`

**è¾“å‡º**

![](img/6e2fe92cc54ddae7c067ac17d24af09e.png)

# å‰/åè„šæœ¬

`pre*` & `post*`è„šæœ¬åœ¨`package.json`çš„`scripts`éƒ¨åˆ†å®šä¹‰ã€‚æ‚¨å¯ä»¥å°†å®ƒç”¨äºä»»ä½•è„šæœ¬ã€‚å¯¹äºä»»ä½•è„šæœ¬ï¼Œä»¥æ­¤ä¸ºå‰ç¼€ã€‚ä¸ºäº†å‰ä»»ã€‚`build`è„šæœ¬æœ‰`prebuild` & `postbuild`ã€‚

```
"scripts": {
  "prebuild": "do before build..",
  "build": "react-scripts build",
  "postbuild": "do after build.."
}
```

# npm ç”Ÿå‘½å‘¨æœŸè„šæœ¬

npm æœ‰å†…ç½®çš„ç”Ÿå‘½å‘¨æœŸè„šæœ¬ï¼Œè¿™äº›æ˜¯ä»…åœ¨ç‰¹å®šæƒ…å†µä¸‹å‘ç”Ÿçš„ä¸€äº›ç‰¹æ®Šçš„ç”Ÿå‘½å‘¨æœŸè„šæœ¬ã€‚è¿™äº›è„šæœ¬æ˜¯å¯¹å‰<event>ã€å<event>å’Œ<event>è„šæœ¬çš„è¡¥å……ã€‚ä¾‹å¦‚â€” `preinstall` `postinstall` `prepublish` `prepublishOnly` `prepack` `postpack`</event></event></event>

# npm ç¼“å­˜æ¸…ç†

npm å°†ç¼“å­˜æ•°æ®å­˜å‚¨åœ¨åä¸º`_cacache`çš„å·²é…ç½®ç¼“å­˜å†…çš„ä¸é€æ˜ç›®å½•ä¸­ã€‚è¯¥å‘½ä»¤å°†åˆ é™¤ç¼“å­˜æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚npmï¼Œä½¿ç”¨ç¼“å­˜è®¿é—®åŒ…ï¼Œæ— éœ€å†æ¬¡ä¸‹è½½ã€‚åªæœ‰åœ¨ç£ç›˜ç©ºé—´ä¸è¶³æ—¶æ‰è¿™æ ·åš

# npm å®‰è£…â€”ç”Ÿäº§

å½“æ‚¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è®¾ç½®é¡¹ç›®æ—¶ï¼Œä½¿ç”¨`--production`æ ‡å¿—ã€‚å½“æ‚¨ä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼Œ`devDependencies`å°†ä¸ä¼šå®‰è£…åœ¨è¯¥æœåŠ¡å™¨ä¸Šã€‚

# npm å®¡è®¡

`npm audit`æ˜¯ä¸€ä¸ªå†…ç½®çš„å®‰å…¨åŠŸèƒ½ï¼Œè¿™ä¸ªå‘½ä»¤æ‰«æä½ çš„åº”ç”¨ç¨‹åºçš„ä»»ä½•æ¼æ´ã€‚å®ƒæ£€æŸ¥è½¯ä»¶åŒ…åœ¨å…¬å…± npm æ³¨å†Œè¡¨ä¸­æ˜¯å¦æœ‰ä»»ä½•å·²çŸ¥çš„æ¼æ´æˆ–å®‰å…¨é—®é¢˜ã€‚è¿™ä¸ªå‘½ä»¤ç”Ÿæˆä¸€ä¸ªè¡¨æ ¼æ ¼å¼çš„è¾“å‡ºï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”Ÿæˆä¸€ä¸ª JSON æ ¼å¼çš„è¾“å‡º`npm audit â€“json`

å‘½ä»¤â€” `npm audit`

**ç¤ºä¾‹è¾“å‡º**

![](img/de8af5fd65ab774e7d161ca8a5e5930a.png)

è¦ä¿®å¤å®¡è®¡æŠ¥å‘Šä¸­çš„æ¼æ´ï¼Œè¯·è¿è¡Œ`npm audit fix â€“f`å‘½ä»¤æ¥ä¿®å¤æ‰€æœ‰æ¼æ´&å®‰å…¨é—®é¢˜ã€‚å¦‚æœæœ‰ä¸€ä¸ªä¸»è¦çš„ç‰ˆæœ¬æ›´æ–°ï¼Œ`-f`æ ‡å¿—æ˜¯å¿…è¦çš„ã€‚å¦åˆ™ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨ä¿®å¤é—®é¢˜ï¼Œå³æ›´æ–°æ¯ä¸ªè½¯ä»¶åŒ…ã€‚

> *æˆ‘åœ¨æ¯ä¸ªäº¤æ›¿çš„ sprint ä¸­æˆ–è€…ä¸€ä¸ªæœˆä¸€æ¬¡ï¼Œè™”è¯šåœ°éµå¾ªè¿™ä¸ªè¿è¡Œ* `*npm audit*` *çš„è¿‡ç¨‹ï¼Œæˆ‘æ£€æŸ¥æ˜¯å¦éœ€è¦ä»»ä½•æ›´æ–°ï¼Œå¹¶åšå¿…è¦çš„ä»£ç ä¿®å¤ã€‚*

# npm å·²è¿‡æ—¶

*   è¯¥å‘½ä»¤å°†é’ˆå¯¹æ‚¨çš„`package.json`è¿è¡Œã€‚å®ƒå°†æ£€æŸ¥ npm æ³¨å†Œè¡¨ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰ä»»ä½•æ‚¨å·²å®‰è£…çš„è½¯ä»¶åŒ…æ˜¯è¿‡æ—¶çš„ã€‚
*   è¿™ä¸ªå‘½ä»¤å°†æ‰“å°å‡ºä¸€ä¸ªåŒ…çš„åˆ—è¡¨ï¼Œä»¥åŠå½“å‰çš„ã€è¿‡æœŸçš„å’Œæƒ³è¦çš„ç‰ˆæœ¬

å‘½ä»¤â€” `npm outdated`

**è¾“å‡º**

```
Package              Current   Wanted  Latest  Location  
react                16.13.1  16.14.0  17.0.2  nifty-npm-tips 
react-dom            16.13.1  16.14.0  17.0.2  nifty-npm-tips
```

# npm ç¼–è¾‘

å¦‚æœæ‚¨æƒ³è°ƒè¯•æˆ–æµè§ˆé¡¹ç›®ä¸­ä»»ä½•å·²å®‰è£…çš„åŒ…çš„ä»£ç ã€‚æ­¤å‘½ä»¤å°†åœ¨ cli ä¸­æ‰“å¼€åŒ…å«æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„åŒ…çš„ç›®å½•ã€‚å¯é€‰åœ°ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨ä»»ä½•ç¼–è¾‘å™¨ä¸­æ‰“å¼€åŒ…å†…å®¹ï¼Œç¡®ä¿æ‚¨çš„ç¯å¢ƒä¸­è®¾ç½®äº†`$EDITOR`ã€‚

# npm ls

è¯¥å‘½ä»¤å°†åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„è½¯ä»¶åŒ…ï¼Œè¯¥å‘½ä»¤å°†è¾“å‡ºå·²å®‰è£…è½¯ä»¶åŒ…åŠå…¶ä¾èµ–é¡¹çš„æ ‘å½¢ç»“æ„ã€‚

# äººæ‰‹çŸ­ç¼ºå’Œæ——å¸œ

```
npm i   for install 
npm t   for test 
npm it  for install & run tests 
npm ci  for clean-install 
npm cit for clean-install and run tests
```

# æœ‰ç”¨çš„ npm åº“

# [ntl](https://www.npmjs.com/package/ntl)

è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„äº¤äº’å¼ CLI å·¥å…·ã€‚

**å¦‚ä½•å®‰è£…**

`npm install -g ntl`

**è¿è¡Œè¯¥å‘½ä»¤**

`ntl`

**è¾“å‡º**

```
$ ntl 
â¬¢ Node Task List 
? Select a task to run: (Use arrow keys) 
â¯ start   
  build   
  test   
  eject
```

# [npkill](https://www.npmjs.com/package/npkill)

è¯¥å·¥å…·å…è®¸æ‚¨åˆ—å‡ºç³»ç»Ÿä¸­çš„ä»»ä½•`node_modules`ç›®å½•ã€‚æ‚¨å¯ä»¥é€‰æ‹©è¦åˆ é™¤çš„`node_modules`ä»¥é‡Šæ”¾ç³»ç»Ÿç©ºé—´ã€‚è¿™æ˜¯åˆ é™¤`node_modules`æœ€ç®€å•çš„æ–¹æ³•

**å¦‚ä½•å®‰è£…**

ä½ ä¸éœ€è¦å®‰è£…å®ƒæ¥ä½¿ç”¨å®ƒï¼Œåªéœ€è¿è¡Œ`npx npkill`

# [å†è§](https://www.npmjs.com/package/adio)

adio (all-dependencies-in-order)è¿™æ˜¯ä¸€ä¸ªå°çš„åº“ï¼Œå¯ä»¥æ£€æŸ¥æºä»£ç ä¸­æ²¡æœ‰åˆ—å‡ºçš„ä¾èµ–é¡¹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ¸…ç† package.json ä¾èµ–é¡¹ã€‚

*æ›´å¤šå†…å®¹å°½åœ¨*[***plain English . io***](http://plainenglish.io/)
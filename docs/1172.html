<html>
<head>
<title>Using Firestore with more TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Firestoreå’Œæ›´å¤šç±»å‹è„šæœ¬</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/using-firestore-with-more-typescript-8058b6a88674?source=collection_archive---------1-----------------------#2021-03-12">https://javascript.plainenglish.io/using-firestore-with-more-typescript-8058b6a88674?source=collection_archive---------1-----------------------#2021-03-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="10bb" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">ç”¨è¿™ä¸ªéªŒè¯ç‚¹ç¬¦å·å¯¹è±¡é”®çš„TS 4é­”æœ¯æ¥å‡çº§ä½ çš„Firestore/TypeScriptæ¸¸æˆã€‚</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/c6a5510a8978557384ebf8c04948f87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*N8vHZsgk-scumy7u"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@peterconlan?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Peter Conlan</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7e6d" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">å¦‚æœæ‚¨æƒ³ç†è§£ä»£ç ï¼Œè¯·æ³¨æ„:</h1><p id="3c18" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">è¿™ç¯‡æ–‡ç« æ˜¯æˆ‘ä¸Šä¸€ç¯‡å…³äºFirestoreå’ŒTSçš„æ–‡ç« çš„å»¶ç»­</p><div class="mh mi gp gr mj mk"><a href="https://medium.com/swlh/using-firestore-with-typescript-65bd2a602945" rel="noopener follow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd io gy z fp mp fr fs mq fu fw im bi translated">å°†Firestoreä¸Typescriptä¸€èµ·ä½¿ç”¨</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">ç”¨å‡ è¡Œå¹²å‡€çš„ä»£ç æå‡ä½ çš„Firestoreå’ŒTSæŠ€èƒ½ã€‚</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">medium.com</p></div></div><div class="mt l"><div class="mu l mv mw mx mt my km mk"/></div></div></a></div><p id="86ef" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">æˆ‘å†™<code class="fe ne nf ng nh b">db</code>çš„æ—¶å€™ï¼Œå‡è®¾ä½ çŸ¥é“æˆ‘åœ¨è¯´ä»€ä¹ˆã€‚ä»¥ä¸‹æ˜¯æé†’ä»£ç :</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="a53b" class="nm ku in nh b gy nn no l np nq">// import firstore (obviously)<br/>import { firestore } from "firebase-admin"</span><span id="b8aa" class="nm ku in nh b gy nr no l np nq">// Import or define your types<br/>// import { User } from '~/@types'</span><span id="7aca" class="nm ku in nh b gy nr no l np nq">const converter = &lt;T&gt;() =&gt; ({<br/>  toFirestore: (data: Partial&lt;T&gt;) =&gt; data,<br/>  fromFirestore: (snap: FirebaseFirestore.QueryDocumentSnapshot) =&gt; snap.data() as T<br/>})</span><span id="0d43" class="nm ku in nh b gy nr no l np nq">const dataPoint = &lt;T&gt;(collectionPath: string) =&gt; firestore().collection(collectionPath).withConverter(converter&lt;T&gt;())</span><span id="eff2" class="nm ku in nh b gy nr no l np nq">const db = {<br/>  // list your collections here<br/>  // users: dataPoint&lt;User&gt;('users')<br/>}</span><span id="af9f" class="nm ku in nh b gy nr no l np nq">export { db }</span></pre><p id="7ba8" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated"><strong class="ln io">TLDR</strong>ï¼›<br/>TSæ¸¸ä¹åœºçš„ç±»å‹å®‰å…¨Firestoreæ›´æ–°:<br/><a class="ae ks" href="https://bit.ly/2OhV1y4" rel="noopener ugc nofollow" target="_blank">https://bit.ly/2OhV1y4</a><br/>ä»£ç å®Œæ•´è¦æ—¨:<br/><a class="ae ks" href="https://gist.github.com/JamieCurnow/650ea759c277757ae5665ea52400713b" rel="noopener ugc nofollow" target="_blank">https://GIST . github . com/Jamie curnow/650 ea 759 c 277757 AE 5665 ea 52400713 b</a></p><h1 id="7bbc" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">é—®é¢˜æ˜¯:</h1><p id="b114" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">å‡ ä¸ªæœˆæ¥ï¼Œæˆ‘ä¸€ç›´åœ¨ä½¿ç”¨æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ä¸­çš„ä»£ç (ä¸Šé¢æœ‰é“¾æ¥),å®ƒåœ¨æˆ‘è¯»å†™Firestoreæ—¶ä¸ºæˆ‘æä¾›äº†å¯çˆ±çš„ç±»å‹å®‰å…¨å’Œå»ºè®®ã€‚ç„¶è€Œï¼Œå®ƒæœ‰ä¸€ä¸ªç¼ºç‚¹:T1æ–¹æ³•ã€‚</p><p id="6ff3" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">Firestoreçš„<code class="fe ne nf ng nh b">documentRef.update()</code>æ–¹æ³•åœ¨ä¸è¦†ç›–æ•´ä¸ªæ–‡æ¡£çš„æƒ…å†µä¸‹æ›´æ–°æ–‡æ¡£çš„ä¸€äº›å­—æ®µï¼Œç±»ä¼¼äºåš<code class="fe ne nf ng nh b">set({}, { merge: true })</code>ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå·§å¦™çš„æŠ€å·§â€”â€”ä½¿ç”¨ç‚¹ç¬¦å·æ¥æ›´æ–°åµŒå¥—å±æ€§ã€‚</p><p id="da2f" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">ä»¥è¿™ä¸ªæ•°æ®ç»“æ„ä¸ºä¾‹:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="db18" class="nm ku in nh b gy nn no l np nq">interface User {<br/>  name: string<br/>  email: string<br/>  address: {<br/>    line1: string<br/>    line2: string<br/>    postcode: string<br/>    verified: false<br/>    timeAtAddress: {<br/>      days: string<br/>      months: string<br/>      hours: string<br/>    }<br/>  }<br/>}</span></pre><p id="8945" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">å¦‚æœæˆ‘ä»¬åªæƒ³æ›´æ–°<code class="fe ne nf ng nh b">user.adress.verified</code>ï¼Œä½†ä¿æŒåœ°å€å¯¹è±¡çš„æ‰€æœ‰å…¶ä»–å€¼ä¸å˜ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p id="4f74" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated"><strong class="ln io">è¿™å°†åˆ é™¤åœ°å€ä¸­çš„æ‰€æœ‰å…¶ä»–å…³é”®å­—:</strong></p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="a85e" class="nm ku in nh b gy nn no l np nq">db.users.doc('1234').set({<br/>  address: {<br/>    verified: true<br/>  }<br/>})<br/>// it would also throw a TS error because it's not a complete User</span></pre><p id="c12a" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">å³ä½¿ä½¿ç”¨<strong class="ln io"> </strong> <code class="fe ne nf ng nh b">merge: true</code>ï¼Œåœ°å€ä¸­çš„æ‰€æœ‰<strong class="ln io">å…¶ä»–é”®ä¹Ÿä¼šè¢«åˆ é™¤</strong>:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="7f42" class="nm ku in nh b gy nn no l np nq">db.users.doc('1234').set({<br/>  address: {<br/>    verified: true<br/>  }<br/>}, { merge: true })</span></pre><p id="76ed" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">è¿™æ˜¯å› ä¸º<code class="fe ne nf ng nh b">merge</code>é€‰é¡¹æ²¡æœ‰æ·±å…¥æ‰§è¡Œåˆå¹¶ã€‚</p><p id="dec4" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">è¿™å°±æ˜¯æ–¹ä¾¿çš„<code class="fe ne nf ng nh b">update</code>å‡½æ•°çš„ç”¨æ­¦ä¹‹åœ°ã€‚å½“æ‚¨è°ƒç”¨<code class="fe ne nf ng nh b">update()</code>æ—¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨â€œç‚¹ç¬¦å·â€æ¥å¼•ç”¨æ–‡æ¡£ä¸­çš„åµŒå¥—å­—æ®µ:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="6dd4" class="nm ku in nh b gy nn no l np nq">db.users.doc('1234').update({<br/>  ['address.verified']: true<br/>})</span></pre><p id="0f64" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">ä½¿ç”¨TypeScriptæ—¶åªæœ‰ä¸€ä¸ªé—®é¢˜â€¦ä¼ é€’ç»™<code class="fe ne nf ng nh b">@google-cloud/firestore</code>ä¸­çš„updateå‡½æ•°çš„å•ä¸ªå‚æ•°çš„ç­¾åæ˜¯è¿™æ ·çš„:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="b2a3" class="nm ku in nh b gy nn no l np nq">export type UpdateData = {[fieldPath: string]: any};</span></pre><p id="8ded" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">æ‰€ä»¥åœ¨å®è·µä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•å¯¹è±¡ä¼ é€’ç»™<code class="fe ne nf ng nh b">update()</code>å‡½æ•°ï¼ŒTypeScriptä¼šå¾ˆé«˜å…´ã€‚ç„¶åï¼Œæˆ‘ä»¬æœ‰åçš„æ•°æ®æŒ‚åœ¨å‘¨å›´ï¼Œæ²¡æœ‰ç±»å‹å®‰å…¨æ—¶ï¼Œæˆ‘ä»¬å†™çš„å¯¹è±¡ï¼æ£€æŸ¥ä¸€ä¸‹:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="4bc1" class="nm ku in nh b gy nn no l np nq">db.users.doc('1234').update({<br/>  ['address.unkownKey']: true<br/>  notName: 'Jamie'<br/>})<br/>// No Type errors at all!</span></pre><p id="881f" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">æ‰€ä»¥æˆ‘é¦–å…ˆåˆ›å»ºäº†ä¸€ä¸ª<code class="fe ne nf ng nh b">updates</code>å¯¹è±¡ï¼Œå®ƒè¢«ç±»å‹åŒ–ä»¥å­˜å‚¨æˆ‘çš„æ›´æ–°ï¼Œä½†æ˜¯è¿™ä¸é€‚ç”¨äºç‚¹ç¬¦å·é”®:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="627f" class="nm ku in nh b gy nn no l np nq">const updates: Partial&lt;User&gt; = {<br/>  name: 'Jamie',<br/>  notName: 'Jamie' // Type Error - Great!<br/>  ['address.verified']: true // Type Error - Oh no!<br/>}<br/>db.users.doc('1234').update(updates)</span></pre><h1 id="59a7" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">è§£å†³æ–¹æ¡ˆæ˜¯:</h1><p id="4950" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">æˆ‘è€ƒè™‘è¿™ä¸ªé—®é¢˜å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œå¹¶å°è¯•è¿‡å‡ æ¬¡ç¼–å†™ä¸€äº›ç¥å¥‡çš„ç±»å‹è„šæœ¬ï¼Œè¿™äº›è„šæœ¬å°†åªå¼ºåˆ¶å·²çŸ¥çš„é”®ï¼Œå¹¶ä¸ºç‚¹ç¬¦å·é”®æ›´æ­£å€¼ã€‚ç„¶åæˆ‘åœ¨æ¨ç‰¹ä¸Šæ‰¾åˆ°äº†@diegohazçš„è¿™ä¸ªå°ç‰‡æ®µ:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="2dcc" class="nm ku in nh b gy nn no l np nq">type PathImpl&lt;T, Key extends keyof T&gt; =<br/>  Key extends string<br/>  ? T[Key] extends Record&lt;string, any&gt;<br/>    ? | `${Key}.${PathImpl&lt;T[Key], Exclude&lt;keyof T[Key], keyof any[]&gt;&gt; &amp; string}`<br/>      | `${Key}.${Exclude&lt;keyof T[Key], keyof any[]&gt; &amp; string}`<br/>    : never<br/>  : never;</span><span id="855f" class="nm ku in nh b gy nr no l np nq">type PathImpl2&lt;T&gt; = PathImpl&lt;T, keyof T&gt; | keyof T;</span><span id="6830" class="nm ku in nh b gy nr no l np nq">type Path&lt;T&gt; = PathImpl2&lt;T&gt; extends string | keyof T ? PathImpl2&lt;T&gt; : keyof T;</span><span id="8045" class="nm ku in nh b gy nr no l np nq">type PathValue&lt;T, P extends Path&lt;T&gt;&gt; =<br/>  P extends `${infer Key}.${infer Rest}`<br/>  ? Key extends keyof T<br/>    ? Rest extends Path&lt;T[Key]&gt;<br/>      ? PathValue&lt;T[Key], Rest&gt;<br/>      : never<br/>    : never<br/>  : P extends keyof T<br/>    ? T[P]<br/>    : never;</span></pre><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ns nt l"/></div></figure><h1 id="8800" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">å¤šä¼ å¥‡å•Šï¼</h1><p id="0b09" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">æˆ‘å¾ˆå¿«å°†å®ƒæ‰©å±•åˆ°firebaseæ›´æ–°ä¸­ï¼Œæ•ˆæœéå¸¸å¥½:</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="67e8" class="nm ku in nh b gy nn no l np nq">type PathImpl&lt;T, K extends keyof T&gt; =<br/>  K extends string<br/>  ? T[K] extends Record&lt;string, any&gt;<br/>  ? T[K] extends ArrayLike&lt;any&gt;<br/>  ? K | `${K}.${PathImpl&lt;T[K], Exclude&lt;keyof T[K], keyof any[]&gt;&gt;}`<br/>  : K | `${K}.${PathImpl&lt;T[K], keyof T[K]&gt;}`<br/>  : K<br/>  : never</span><span id="5bd4" class="nm ku in nh b gy nr no l np nq">type Path&lt;T&gt; = PathImpl&lt;T, keyof T&gt; | keyof T</span><span id="a223" class="nm ku in nh b gy nr no l np nq">type PathValue&lt;T, P extends Path&lt;T&gt;&gt; =<br/>  P extends `${infer K}.${infer Rest}`<br/>  ? K extends keyof T<br/>  ? Rest extends Path&lt;T[K]&gt;<br/>  ? PathValue&lt;T[K], Rest&gt;<br/>  : never<br/>  : never<br/>  : P extends keyof T<br/>  ? T[P]<br/>  : never</span><span id="3492" class="nm ku in nh b gy nr no l np nq">type UpdateData&lt;T extends object&gt; = Partial&lt;{<br/>  [TKey in Path&lt;T&gt;]: PathValue&lt;T, TKey&gt;<br/>}&gt;</span><span id="aefc" class="nm ku in nh b gy nr no l np nq">const updates: UpdateData&lt;User&gt; = {<br/>  name: 'Jamie',<br/>  'address.verified': true,<br/>  notName: 'Jamie' // TS Error. Great!<br/>  'address.unkownKey': false // TS Error. Fantastic :)<br/>}</span><span id="3edc" class="nm ku in nh b gy nr no l np nq">db.users.doc('1234').update(updates)</span></pre><p id="e8d7" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">æˆ‘æŠŠè¿™äº›ç±»å‹ä¿å­˜åœ¨æˆ‘çš„åŠ©æ‰‹ä¸­ï¼Œè¿™æ ·å½“æˆ‘åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬çš„æ—¶å€™ï¼Œå®ƒä¼šå˜å¾—å¾ˆå¥½å¾ˆå¹²å‡€ã€‚ä¸‹é¢æ˜¯ä¸€äº›å®Œæ•´çš„ä»£ç :</p><pre class="kd ke kf kg gt ni nh nj nk aw nl bi"><span id="62f8" class="nm ku in nh b gy nn no l np nq">// utils/firestore-helpers.ts</span><span id="fc05" class="nm ku in nh b gy nr no l np nq">// import firstore (obviously)<br/>import { firestore } from "firebase-admin"</span><span id="7829" class="nm ku in nh b gy nr no l np nq">// Make the helper types for updates:<br/>type PathImpl&lt;T, K extends keyof T&gt; =<br/>  K extends string<br/>  ? T[K] extends Record&lt;string, any&gt;<br/>  ? T[K] extends ArrayLike&lt;any&gt;<br/>  ? K | `${K}.${PathImpl&lt;T[K], Exclude&lt;keyof T[K], keyof any[]&gt;&gt;}`<br/>  : K | `${K}.${PathImpl&lt;T[K], keyof T[K]&gt;}`<br/>  : K<br/>  : never</span><span id="ca80" class="nm ku in nh b gy nr no l np nq">type Path&lt;T&gt; = PathImpl&lt;T, keyof T&gt; | keyof T</span><span id="4d78" class="nm ku in nh b gy nr no l np nq">type PathValue&lt;T, P extends Path&lt;T&gt;&gt; =<br/>  P extends `${infer K}.${infer Rest}`<br/>  ? K extends keyof T<br/>  ? Rest extends Path&lt;T[K]&gt;<br/>  ? PathValue&lt;T[K], Rest&gt;<br/>  : never<br/>  : never<br/>  : P extends keyof T<br/>  ? T[P]<br/>  : never</span><span id="cdc3" class="nm ku in nh b gy nr no l np nq">export type UpdateData&lt;T extends object&gt; = Partial&lt;{<br/>  [TKey in Path&lt;T&gt;]: PathValue&lt;T, TKey&gt;<br/>}&gt;</span><span id="0ecf" class="nm ku in nh b gy nr no l np nq">// Import or define your types<br/>import { User } from '~/@types'</span><span id="aafe" class="nm ku in nh b gy nr no l np nq">const converter = &lt;T&gt;() =&gt; ({<br/>  toFirestore: (data: Partial&lt;T&gt;) =&gt; data,<br/>  fromFirestore: (snap: FirebaseFirestore.QueryDocumentSnapshot) =&gt; snap.data() as T<br/>})</span><span id="2766" class="nm ku in nh b gy nr no l np nq">const dataPoint = &lt;T&gt;(collectionPath: string) =&gt; firestore().collection(collectionPath).withConverter(converter&lt;T&gt;())</span><span id="3215" class="nm ku in nh b gy nr no l np nq">const db = {<br/>  // list your collections here<br/>  // users: dataPoint&lt;YourType&gt;('users')<br/>}</span><span id="8311" class="nm ku in nh b gy nr no l np nq">export { db }</span><span id="474c" class="nm ku in nh b gy nr no l np nq">// some-other-file.ts<br/>import { db, UpdateData } from '~/utils/firestore-helpers.ts'<br/>import { User } from '~/@types'</span><span id="9fd8" class="nm ku in nh b gy nr no l np nq">export const verifyUserAddress = async (userId: string) =&gt; {<br/>  // Make the updates object<br/>  const updates: UpdateData&lt;User&gt; = {<br/>    'address.verified': true<br/>  }<br/>  <br/>  // do the update!<br/>  await db.users.doc(userId).update(updates)<br/>}</span></pre><p id="c08c" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">å¦‚æœFirestoreå›¢é˜Ÿèƒ½å¤Ÿå°†è¿™ç§æ–°ç±»å‹é›†æˆåˆ°SDKä¸­ï¼Œä»¥ä¾¿åœ¨ä½¿ç”¨<code class="fe ne nf ng nh b">withConverter</code>æŠ€å·§æ—¶è‡ªåŠ¨è¿›è¡Œæ›´æ–°ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚æˆ‘å·²ç»æŸ¥çœ‹äº†æºä»£ç ï¼Œè¿™å¾ˆå®¹æ˜“å®ç°ï¼Œä½†æ˜¯éœ€è¦ä»–ä»¬ä»3.8.3æ›´æ–°åˆ°TS â‰¥4.1ï¼Œè¿™å¯èƒ½ä¼šéå¸¸éº»çƒ¦ï¼Œéœ€è¦å¤§é‡çš„å·¥ä½œâ€¦æˆ‘å·²ç»å‘ä»–ä»¬æå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œè¯·å…³æ³¨è¿™ä¸ªç©ºé—´ï¼https://github.com/googleapis/nodejs-firestore/issues/1448<br/>T3</p><p id="e8b3" class="pw-post-body-paragraph ll lm in ln b lo mz jo lq lr na jr lt lu nb lw lx ly nc ma mb mc nd me mf mg ig bi translated">æ„Ÿè°¢é˜…è¯»ï¼</p><h1 id="a12d" class="kt ku in bd kv kw kx ky kz la lb lc ld jt le ju lf jw lg jx lh jz li ka lj lk bi translated">æ”¯æŒä½ çš„åˆ›ä½œè€…ï¼</h1><p id="3086" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt lu lv lw lx ly lz ma mb mc md me mf mg ig bi translated">å¦‚æœä½ è§‰å¾—è¿™ä¸ªæ•…äº‹æœ‰ç”¨ï¼Œå¹¶å¸Œæœ›æˆ‘ç»§ç»­å†™æœ‰ç”¨çš„å†…å®¹ï¼Œè¯·è€ƒè™‘åœ¨<a class="ae ks" href="https://www.patreon.com/jamiecurnow" rel="noopener ugc nofollow" target="_blank"> Patreon </a>ä¸Šæ”¯æŒæˆ‘ğŸ¤—</p><div class="mh mi gp gr mj mk"><a href="https://www.patreon.com/jamiecurnow" rel="noopener  ugc nofollow" target="_blank"><div class="ml ab fo"><div class="mm ab mn cl cj mo"><h2 class="bd io gy z fp mp fr fs mq fu fw im bi translated">Jamie Curnowæ­£åœ¨å¼€å‘è½¯ä»¶| Patreon</h2><div class="mr l"><h3 class="bd b gy z fp mp fr fs mq fu fw dk translated">ä»Šå¤©å°±æˆä¸ºJamie Curnowçš„èµåŠ©äºº:åœ¨ä¸–ç•Œä¸Šæœ€å¤§çš„â€¦</h3></div><div class="ms l"><p class="bd b dl z fp mp fr fs mq fu fw dk translated">www.patreon.com</p></div></div><div class="mt l"><div class="nu l mv mw mx mt my km mk"/></div></div></a></div></div></div>    
</body>
</html>
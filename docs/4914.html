<html>
<head>
<title>The Complete Guide To Prop-Types In React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中道具类型的完整指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/the-complete-guide-to-prop-types-in-react-9baa22e80ce4?source=collection_archive---------3-----------------------#2021-10-04">https://javascript.plainenglish.io/the-complete-guide-to-prop-types-in-react-9baa22e80ce4?source=collection_archive---------3-----------------------#2021-10-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="64ee" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">剧透:不适合打字稿的人</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1342ed6a87aa820c165f934f32531667.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4xBdg3b7AY-dxd--6fhttg.png"/></div></div></figure><p id="74f6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果您使用的是React with JavaScript，并且没有进行任何类型检查，那么问自己一个问题。你写的是干净且可维护的代码吗？随着应用程序规模的增长，出现bug的可能性也会增加。类型检查可以为您捕捉许多错误。</p><p id="f127" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">React提供了一种内置的类型检查功能。为了对组件的属性进行类型检查，我们可以给它分配一个特殊的属性<code class="fe ln lo lp lq b">propTypes</code></p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="0adb" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>   // type defs<br/>};</span></pre><p id="147a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">为此，我们需要安装一个包<code class="fe ln lo lp lq b">prop-types</code>。它过去包含在React本身中，但现在是一个单独的库。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="a3b0" class="lv lw iq lq b gy lx ly l lz ma">npm i prop-types</span></pre><p id="f3d3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">PropTypes公开了一组验证器，您可以用它们来验证作为组件props接收的数据。这是一个需要雇员姓名和薪水的组件。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="0d9d" class="lv lw iq lq b gy lx ly l lz ma">function Employee({ name, salary }) {<br/>  return (<br/>    &lt;h1&gt;{name}'s salary is {salary + 0}&lt;/h1&gt;<br/>  );<br/>}</span></pre><p id="22c9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们以字符串的形式给出薪水，看看会发生什么</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="58f1" class="lv lw iq lq b gy lx ly l lz ma">function App() {<br/>  return &lt;MyComponent name="John" salary="150" /&gt;<br/>}</span></pre><p id="7b4f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你希望在屏幕上看到什么？薪水应该是一个数字，但是我们传递了一个字符串，所以它变成了</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="13cc" class="lv lw iq lq b gy lx ly l lz ma">John's salary is 1500</span></pre><p id="e47c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果并不是我们想要的，React没有向我们显示任何警告或错误。这正是PropTypes的用途。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="7f6f" class="lv lw iq lq b gy lx ly l lz ma"><strong class="lq ir">import PropTypes from 'prop-types';</strong></span><span id="d32e" class="lv lw iq lq b gy mb ly l lz ma">function Employee({ name, salary }) {<br/>  return (<br/>    &lt;h1&gt;{name}'s salary is {salary + 0}&lt;/h1&gt;<br/>  );<br/>}</span><span id="b49b" class="lv lw iq lq b gy mb ly l lz ma"><strong class="lq ir">Employee.propTypes = {<br/>  name: PropTypes.string,<br/>  salary: PropTypes.number<br/>};</strong></span></pre><p id="55b6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，当我们试图将salary作为一个字符串给出时，我们会在JavaScript控制台中看到一个警告。</p><h1 id="4b3f" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">基本道具类型</h1><p id="22dc" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">PropTypes为基本类型检查提供了各种验证器。以下是一些基本的道具类型</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="aa27" class="lv lw iq lq b gy lx ly l lz ma">import PropTypes from 'prop-types';</span><span id="a248" class="lv lw iq lq b gy mb ly l lz ma">MyComponent.propTypes = {<br/>  optionalArray: PropTypes.array,<br/>  optionalBool: PropTypes.bool,<br/>  optionalFunc: PropTypes.func,<br/>  optionalNumber: PropTypes.number,<br/>  optionalObject: PropTypes.object,<br/>  optionalString: PropTypes.string,<br/>  optionalSymbol: PropTypes.symbol,<br/>};</span></pre><p id="6bea" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们可以通过在道具上设置<code class="fe ln lo lp lq b">isRequired</code>属性来标记道具。below prop类型将接受任何类型的值，如果没有传递值，将抛出警告</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="b0ee" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  anyRequired: PropTypes.any.isRequired<br/>};</span></pre><p id="2e3f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果一个道具的值可以是多种类型中的一种，我们可以使用<code class="fe ln lo lp lq b">oneOfType</code>属性。这里，属性的值可以是一个数字或字符串，这也是必需的。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="6d4f" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  <!-- -->value: PropTypes.oneOfType([<br/>    PropTypes.string,<br/>    PropTypes.number<br/>  ]).isRequired<br/>};</span></pre><h1 id="89f0" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">枚举</h1><p id="4506" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">通过使用<code class="fe ln lo lp lq b">oneOf</code>属性确保道具的值被限制在特定的值</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="2c95" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  <!-- -->role: PropTypes.oneOf(['ADMIN', 'USER'])<br/>};</span></pre><h1 id="0b4d" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">作为道具的节点和反应元素</h1><p id="1cda" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">在React中，数字、字符串、元素或数组是可呈现的。为了定义这种类型的道具，我们可以使用一个叫做<code class="fe ln lo lp lq b">node</code>的特殊属性</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="057f" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  renderable: PropTypes.node<br/>};</span></pre><p id="59f9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者您需要一个React元素</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="ab47" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  shouldBeAComponent: PropTypes.<!-- -->element<br/>};</span></pre><h1 id="d7dc" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">数组</h1><p id="becc" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">如果你期望一个属性是一个具有特定类型元素的数组，使用<code class="fe ln lo lp lq b">arrayOf</code>属性</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="2f99" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  a<!-- -->rrayOfNumbers: PropTypes.arrayOf(PropTypes.number),<br/>  a<!-- -->rrayOfStrings: PropTypes.arrayOf(PropTypes.string),<br/>  arrayOfObjects: PropTypes.arrayOf(PropTypes.object)<br/>};</span></pre><p id="5ea3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们还可以定义一个可以接受一个数字数组或一个字符串数组作为值的属性。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="d4d0" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  numbersOrStrings<!-- -->: PropTypes.arrayOf(PropTypes.oneOfType([<br/>    PropTypes.number,<br/>    PropTypes.string<br/>  ])),<br/>};</span></pre><h1 id="0769" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">目标</h1><p id="b1c5" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">我们可以使用<code class="fe ln lo lp lq b">shape</code>属性定义一个对象的形状</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="cf87" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  person<!-- -->: PropTypes.shape({<br/>    id: PropTypes.number.isRequired,<br/>    name: PropTypes.string.isRequired,<br/>    address: PropTypes.shape({<br/>      city: PropTypes.string,<br/>      country: PropTypes.string.isRequired<br/>    })<br/>  })<br/>};</span></pre><p id="a993" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在我们可以给我们的组件一个<code class="fe ln lo lp lq b">person</code>道具</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="a79c" class="lv lw iq lq b gy lx ly l lz ma">&lt;MyComponent<br/>  person={{<br/>    id: 1,<br/>    name: 'John Doe',<br/>    address: {<br/>      city: 'Karachi',<br/>      country: 'Pakistan'<br/>    }<br/>  }}<br/>/&gt;</span></pre><p id="079a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者如果你期待一群人</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="1c5a" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  <strong class="lq ir">persons</strong><strong class="lq ir">: PropTypes.arrayOf(</strong><br/>    PropTypes.shape({<br/>      id: PropTypes.number.isRequired,<br/>      name: PropTypes.string.isRequired,<br/>      address: PropTypes.shape({<br/>        city: PropTypes.string,<br/>        country: PropTypes.string.isRequired<br/>      })<br/>    })<br/>  <strong class="lq ir">)</strong><br/>};</span></pre><p id="f798" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你想要一个对象的值匹配一个精确的形状，你可以使用属性类型的<code class="fe ln lo lp lq b">exact</code>验证器</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="dcc4" class="lv lw iq lq b gy lx ly l lz ma">MyComponent.propTypes = {<br/>  objectWithStrictShape: PropTypes.exact({<br/>    name: PropTypes.string,<br/>    quantity: PropTypes.number<br/>  })<br/>};</span></pre><p id="3a4a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">传递给<code class="fe ln lo lp lq b">objectWithStrictShape</code>的带有任何额外或缺失属性的对象将在控制台中抛出警告。</p><h1 id="d469" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">默认道具</h1><p id="ee7b" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">可以分配给组件的另一个特殊属性是<code class="fe ln lo lp lq b">defaultProps</code>。它允许你为你的道具定义默认值</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="6062" class="lv lw iq lq b gy lx ly l lz ma">function MyComponent ({ name }) {<br/>  return &lt;h1&gt;Name is {name}&lt;/h1&gt;;<br/>}</span><span id="4298" class="lv lw iq lq b gy mb ly l lz ma"><strong class="lq ir">MyComponent.defaultProps = {<br/>  name: 'John Doe'<br/>};</strong></span><span id="8da6" class="lv lw iq lq b gy mb ly l lz ma">function App () {<br/>  // renders<br/>  // Name is John Doe<br/>  return &lt;MyComponent /&gt;<br/>}</span></pre><p id="ad1d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果没有为父组件中的属性定义值，React将检查是否为该属性定义了默认值。由于<code class="fe ln lo lp lq b">defaultProps</code>是在<code class="fe ln lo lp lq b">propTypes</code>型式检查之前解决的，所以型式检查也将适用于<code class="fe ln lo lp lq b">defaultProps</code>。</p><p id="31c8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">你也可以使用析构赋值来定义属性的默认值。</p><pre class="kg kh ki kj gt lr lq ls lt aw lu bi"><span id="052e" class="lv lw iq lq b gy lx ly l lz ma">// use 'John Doe' as value if name is undefined<br/>function MyComponent ({ <strong class="lq ir">name = 'John Doe'</strong> }) {<br/>  return &lt;h1&gt;Name is {name}&lt;/h1&gt;;<br/>}</span></pre><h1 id="0a24" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">自动完成</h1><p id="0e28" class="pw-post-body-paragraph kr ks iq kt b ku mt jr kw kx mu ju kz la mv lc ld le mw lg lh li mx lk ll lm ij bi translated">如果您正确定义了属性类型，您的编辑器将帮助您定义属性的值。例如，在VSCode中，同时按下<code class="fe ln lo lp lq b">ctrl+space</code>会给你一个建议列表，包括你定义的属性类型。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi my"><img src="../Images/9ddaa8342afa65d8e86254c42c6e23c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eEJ4IM53CG6mvogI9fhsxg.gif"/></div></div></figure><p id="20d6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如你所见，编辑器在自动完成建议列表中也显示了嵌套的道具。</p></div><div class="ab cl mz na hu nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ij ik il im in"><p id="9de3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果不使用TypeScript或任何其他JavaScript扩展进行类型检查，我强烈建议使用prop类型。它帮助您编写更少的错误，并使自动完成变得容易。</p><h1 id="5c8a" class="mc lw iq bd md me mf mg mh mi mj mk ml jw mm jx mn jz mo ka mp kc mq kd mr ms bi translated">有关系的</h1><div class="ng nh gp gr ni nj"><a href="https://betterprogramming.pub/7-custom-react-hooks-you-probably-need-in-your-project-12f86216df94" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">你的项目中可能需要的7个自定义React挂钩</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">提取和重用react代码和JS逻辑的有用钩子</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">better编程. pub</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx kp nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://betterprogramming.pub/architecting-a-graphql-api-codebase-in-node-js-3a951cd7f0f4" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd ir gy z fp no fr fs np fu fw ip bi translated">在Node.js中构建GraphQL API代码库</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">建立一个具有模块化和认证的GraphQL服务器</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">better编程. pub</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx kp nj"/></div></div></a></div><p id="09df" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><em class="nz">更多内容请看</em><a class="ae oa" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="nz">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
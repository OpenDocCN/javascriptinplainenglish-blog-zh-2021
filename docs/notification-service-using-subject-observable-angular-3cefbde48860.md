# 具有主题和可观察对象的角度通知服务

> 原文：<https://javascript.plainenglish.io/notification-service-using-subject-observable-angular-3cefbde48860?source=collection_archive---------9----------------------->

![](img/9dab6ec2b9058414d67cd75bcdeebace.png)

Photo by [Clark Tibbs](https://unsplash.com/@clarktibbs?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

通知服务是每个应用程序中最常见的服务之一。它允许用户接收与他们相关的实时信息。

> 我将演示一个使用 RXJS 主题和可观察对象的通知服务的实现。

但是首先，**我们为什么需要主语？为什么是可观察的？我们应该如何得到通知？**

先举个简单的例子。

假设你已经注册了某个杂志。所以，你希望得到所有出版的杂志，但是这个机制是如何运作的呢？

首先，当我们刚刚注册那本杂志时，我们订阅或提供了详细信息，如我们获取杂志的地址或我们的电子邮件地址，以防它是杂志办公室或网站的数字地址。

现在，该杂志的公司有一份阅读该杂志并希望得到每一份新杂志的人的名单。

当一本新杂志出版时，公司会通知每一个注册用户，并发送一本刚出版的新杂志。

那么，**我在这个例子中试图说明什么呢？**

杂志公司是**科目。**它控制杂志的内容，就像示例中一样，它保存出版的杂志。

公司还允许我们观察新的变化，它允许我们注册变化，得到通知——这是可观察的**。**

**现在，每个注册获得一份拷贝的人，实际上是——**订阅**。**

**现在，让我们看一些代码并检查一下:**

**哦，这是怎么回事？**

**我们已经创建了一个服务，其中包含一个主题。
主题就像公司的杂志，它为新的东西获取价值并持有它。
我们不想在外面暴露这个主题，除了这个服务，其他任何服务或者系统的任何部分都不应该接触这个主题。
我们通过获取返回可观察字符串的方法‘notification $’来公开监视或注册变更的能力。**

**好的，我明白了，但是我如何使用它呢？**

**对于每个需要更新通知的服务、组件或系统的任何部分，只需注入服务并调用“setNewNotification”方法。
这个方法负责更新我们的 Subject，然后通知任何观察者某些东西被改变了，以及改变本身。**

**在上面的代码中，我们订阅了通知，在插图中，它是为杂志公司注册的人。**

# **总之:**

**我们已经创建了一个简单的通知服务，服务于或者可以服务于系统中的许多地方，我们所要做的就是订阅更改(不要忘记取消订阅😜).**

**我们使用以下内容构建了通知服务:**

****Subject** - >持有值，流本身。保持它的私有性非常重要，因为我们不希望任何人处理流本身。**

****可观察** - >允许注册获取一些更新。订阅者从服务外部获得通知的入口点。**

**我希望你喜欢读这篇文章！可以随意留下一些评论。**

***更多内容尽在*[***plain English . io***](http://plainenglish.io/)**
<html>
<head>
<title>How to Show Loader on Page Changes in Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Next.js中显示页面变化的加载器</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-show-loader-on-page-changes-in-next-js-102edd0ec98d?source=collection_archive---------4-----------------------#2021-10-21">https://javascript.plainenglish.io/how-to-show-loader-on-page-changes-in-next-js-102edd0ec98d?source=collection_archive---------4-----------------------#2021-10-21</a></blockquote><div><div class="fc if ig ih ii ij"/><div class="ik il im in io"><div class=""/><div class=""><h2 id="9342" class="pw-subtitle-paragraph jo iq ir bd b jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf dk translated">通过出色的视觉效果让您的用户参与进来！</h2></div><figure class="kh ki kj kk gu kl gi gj paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="gi gj kg"><img src="../Images/145fe490bc34d248faeb5ca3899a42ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOLFirS0yJ2s28QpIQu6cA.jpeg"/></div></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk">Photo by <a class="ae kw" href="https://www.pexels.com/@thisisengineering?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">ThisIsEngineering</a> from <a class="ae kw" href="https://www.pexels.com/photo/female-software-engineer-coding-on-computer-3861972/?utm_content=attributionCopyText&amp;utm_medium=referral&amp;utm_source=pexels" rel="noopener ugc nofollow" target="_blank">Pexels</a></figcaption></figure><p id="d05b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们都很喜欢Next.js，感觉像是React的增压版。Next.js的好处是它可以在客户端和服务器端进行渲染。</p><p id="634b" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">服务器端渲染的想法是，我们用适当数量的HTML和CSS预先生成所有页面，并在请求时交付整个页面。</p><p id="6a60" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">但是这是有代价的！</p><h1 id="9144" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">问题是</h1><p id="8ddf" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">问题是，当用户单击任何路径进入另一个页面时，获取请求需要首先完成，然后才能显示给用户。</p><p id="5544" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">用户通常不知道发生了什么，因为屏幕上没有视觉线索。</p><p id="f4f0" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">为了解决这个问题，我们可以引入一个很好的技巧来指示它何时加载给用户。我们有两种方法可以做到这一点。</p><h1 id="9d5a" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">第一种解决方案</h1><p id="cd77" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">有一个很好的名为<code class="fe mq mr ms mt b"><a class="ae kw" href="https://www.npmjs.com/package/nextjs-progressbar" rel="noopener ugc nofollow" target="_blank">nextjs-progressbar</a></code>的图书馆就是为此服务的。你可以在这里看到使用这个库<a class="ae kw" href="https://demo-nextjs-progressbar.vercel.app/" rel="noopener ugc nofollow" target="_blank">的结果</a></p><p id="b524" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">要使用这个库，首先要安装它</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="e4f3" class="my lu ir mt b gz mz na l nb nc">yarn add nextjs-progressbar</span></pre><p id="874d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后进入您的<code class="fe mq mr ms mt b">_app.tsx</code>文件并导入它</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="81b8" class="my lu ir mt b gz mz na l nb nc">import NextNprogress from 'nextjs-progressbar';</span></pre><p id="5272" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后在<code class="fe mq mr ms mt b">_app.tsx</code>中渲染组件和你的<code class="fe mq mr ms mt b">&lt;Component /&gt;</code>。最终的结果看起来会像下面这样。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nd ne l"/></div></figure><p id="85ac" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在，当您改变路线时，您将拥有一台漂亮的装载机。</p><h1 id="d0fb" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">第一个解决方案的问题</h1><p id="f4c0" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">这个包是用另一个非常流行的漂亮的包构建的。那叫做<code class="fe mq mr ms mt b"><a class="ae kw" href="https://www.npmjs.com/package/nprogress" rel="noopener ugc nofollow" target="_blank">nprogress</a></code>。</p><p id="7f8e" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">它只是带走了你所有的复杂性。但是有一个问题。<code class="fe mq mr ms mt b">nprogress</code>的线束尺寸比<code class="fe mq mr ms mt b">nextjs-progressbar</code>小得多。</p><div class="kh ki kj kk gu ab cb"><figure class="nf kl ng nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><img src="../Images/86bb8652b388dd86e2d9659618c23a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*syfTmOJVYESP9Y8-Yt8FgQ.png"/></div></figure><figure class="nf kl ng nh ni nj nk paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><img src="../Images/a9af84986fc2702b5dbe9f867547871d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*AAFvCA7PtMchmZwarlWlzQ.png"/></div><figcaption class="ks kt gk gi gj ku kv bd b be z dk nl di nm nn">Comparison between 2 libraries</figcaption></figure></div><p id="dd9f" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">因此，通过比较，我们可以看到，如果使用名为<code class="fe mq mr ms mt b">nprogress</code>的默认库，我们可以节省大约14kb。但要让它发挥作用还需要多一点努力。</p><h1 id="b256" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">使用Nprogress的更好解决方案</h1><p id="7ecd" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">让我们先安装依赖项</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="cc24" class="my lu ir mt b gz mz na l nb nc">yarn add nprogress</span></pre><p id="45dc" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">然后进入你的<code class="fe mq mr ms mt b">_app.tsx</code>文件并导入<code class="fe mq mr ms mt b">Nprogress</code></p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="5050" class="my lu ir mt b gz mz na l nb nc"><strong class="mt is">import</strong> NProgress <strong class="mt is">from</strong> 'nprogress';<br/><strong class="mt is">import</strong> 'nprogress/nprogress.css';</span><span id="e169" class="my lu ir mt b gz no na l nb nc"><strong class="mt is">import</strong> Router <strong class="mt is">from</strong> 'next/router';</span></pre><p id="7571" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们也正在导入CSS文件。如果你想定制CSS，你也可以这样做。只需将CSS文件包含在项目本身中。它非常小。<a class="ae kw" href="https://github.com/rstacruz/nprogress/blob/master/nprogress.css" rel="noopener ugc nofollow" target="_blank">这里的</a>是那个文件的链接</p><p id="88ff" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">我们还需要导入<code class="fe mq mr ms mt b">Router</code>，因为我们必须检测路线的变化。</p><p id="d522" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们将把<code class="fe mq mr ms mt b">Nprogress</code>和我们的<code class="fe mq mr ms mt b">Router</code>绑定在一起，如下所示。</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nd ne l"/></div></figure><p id="363a" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这些事件不言自明。当路线改变开始的时候，我们正在开始<code class="fe mq mr ms mt b">Nprogress</code>。并且当路线改变完成时关闭它。</p><p id="3650" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">现在我们的<code class="fe mq mr ms mt b">_app.tsx</code>应该看起来像下面这样</p><figure class="kh ki kj kk gu kl"><div class="bz fq l di"><div class="nd ne l"/></div></figure><p id="3735" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这将产生和以前一样的效果。但是这将导致更小的束尺寸。</p><h1 id="66b0" class="lt lu ir bd lv lw lx ly lz ma mb mc md jx me jy mf ka mg kb mh kd mi ke mj mk bi translated">最后的想法</h1><p id="ab5c" class="pw-post-body-paragraph kx ky ir kz b la ml js lc ld mm jv lf lg mn li lj lk mo lm ln lo mp lq lr ls ik bi translated">有多种方法可以让你的应用程序变得更好。您应该始终寻找提高应用程序性能和用户体验的方法。</p><p id="ff4d" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated">这只是另一个例子。</p><pre class="kh ki kj kk gu mu mt mv mw aw mx bi"><span id="011d" class="my lu ir mt b gz mz na l nb nc"><strong class="mt is">Get in touch with me via </strong><a class="ae kw" href="https://www.linkedin.com/in/56faisal/" rel="noopener ugc nofollow" target="_blank"><strong class="mt is">LinkedIn</strong></a><strong class="mt is"> or my </strong><a class="ae kw" href="https://www.mohammadfaisal.dev/" rel="noopener ugc nofollow" target="_blank"><strong class="mt is">Personal Website</strong></a><strong class="mt is">.</strong></span></pre><div class="np nq gq gs nr ns"><a rel="noopener  ugc nofollow" target="_blank" href="/should-you-use-redux-in-next-js-5e57201c34da"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd is gz z fq nx fs ft ny fv fx iq bi translated">Next.js中应该用Redux吗？</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">你真的需要吗？</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">javascript.plainenglish.io</p></div></div><div class="ob l"><div class="oc l od oe of ob og kq ns"/></div></div></a></div><div class="np nq gq gs nr ns"><a href="https://levelup.gitconnected.com/use-docker-with-nodejs-projects-like-a-pro-a9e7504e1308" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab fp"><div class="nu ab nv cl cj nw"><h2 class="bd is gz z fq nx fs ft ny fv fx iq bi translated">像专业人士一样使用Docker和NodeJS项目！</h2><div class="nz l"><h3 class="bd b gz z fq nx fs ft ny fv fx dk translated">在开发和生产中利用Docker的力量</h3></div><div class="oa l"><p class="bd b dl z fq nx fs ft ny fv fx dk translated">levelup.gitconnected.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og kq ns"/></div></div></a></div><p id="ff68" class="pw-post-body-paragraph kx ky ir kz b la lb js lc ld le jv lf lg lh li lj lk ll lm ln lo lp lq lr ls ik bi translated"><em class="oi">更多内容尽在</em><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kz is"><em class="oi">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>19 JavaScript Script Optimization Techniques You Can Use</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">您可以使用的19种JavaScript脚本优化技术</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/19-javascript-script-optimization-techniques-you-can-use-d631ffdd66e2?source=collection_archive---------8-----------------------#2021-09-14">https://javascript.plainenglish.io/19-javascript-script-optimization-techniques-you-can-use-d631ffdd66e2?source=collection_archive---------8-----------------------#2021-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="29a2" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">提高网站渲染速度。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/be596fc66b6484eef6a7a198d560e726.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1Fcv5S5tPpSEV3r5"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@purzlbaum?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Claudio Schwarz</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="20dd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">很少遇到不使用JavaScript的网站。在本文中，我将从网站渲染速度和性能本身的角度讨论优化JavaScript的技术。</p><h2 id="ba38" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 1。将JavaScript脚本提取到单独的文件中</strong></h2><p id="b709" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">将脚本分成单独的。js文件有很多优点。一个文件中的单个脚本更改会导致更改自动传递到该文件所在的所有页面。减小发送到浏览器的HTML代码的大小。</p><h2 id="11ae" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 2。异步</strong></h2><p id="c9e3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">async属性告诉浏览器，该脚本不影响DOM或CSSOM，并且只能在加载和呈现整个页面后进行处理。async属性仅适用于放置在单独文件中的脚本——这就是将脚本提取到单独文件中如此重要的原因。</p><p id="5c5c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种脚本既不影响DOM也不影响CSSOM，并且可以使用async属性轻松地分成单独的文件(或单个文件),例如分析工具的脚本。要找到的脚本，无论是在页眉还是页脚，都可以粘贴到外部文件中，链接应该放在页面上。</p><h2 id="7fac" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 3。拦截JavaScript </strong></h2><p id="34a2" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">阻塞JavaScript是在构建CSSOM树之前必须执行的脚本。JS脚本会阻止呈现，无论是作为带有src属性的标记还是作为内联脚本。</p><h2 id="fff5" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 4。HTML脚本—内联</strong></h2><p id="7da9" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">内联脚本在性能方面更好，因为它不发送额外的HTTP请求——您不必等待它。但是，该脚本也会阻止呈现，并且不能使用async属性。</p><h2 id="5531" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 5。延期</strong></h2><p id="8c04" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">defer属性的工作方式完全类似于在主体结束标记之前添加的锁定脚本。它之所以有效，是因为即使带有src属性的<script>标签被附加到页眉，它也会被添加到页脚。defer属性可能导致脚本被放置在更高的位置，例如在body标签中，这可能根据defer被添加到的脚本而停止工作。&lt;/root&gt;</script></p><h2 id="e608" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 6。异步编程</strong></h2><p id="ff21" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">记住上面的信息，将async添加到所有脚本中，然后“安排”它们的执行顺序，以便不破坏依赖性，这是一个巨大的诱惑。可能吗？是的，但是接下来我们进入了所谓的异步编程。</p><h2 id="8e3f" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 7。如何协调异步和延迟相关的脚本？</strong></h2><p id="d342" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">将依赖脚本的执行延迟到异步加载的库被加载就足够了。最简单的技术之一是使用setTimeout()方法；然而，它可能不可靠。操作的原理打破了异步编程的学术原理，它说:“你不应该对给定进程的时间做任何假设。”</p><h2 id="881d" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 8。Require.js库</strong></h2><p id="7f63" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">Require.js库将优化必要库的加载，也用于大型应用程序中。它只能加载给定时刻需要的文件，并保持依赖关系。这是一个我们加载jQuery和Bootstrap的例子。</p><h2 id="adf8" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 9。优化JavaScript文件</strong></h2><p id="1dff" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">静态文本资源通常都是这样——因为JavaScript脚本文件通常都是这样——我们也可以使用已经学过的技术来压缩和缓存它们。</p><h2 id="addc" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 10。JavaScript脚本的缩小</strong></h2><p id="7c76" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">任何文本资源都可以通过删除多余的字符来最小化，比如空格、制表符、换行符，甚至是整个注释块。JavaScript代码甚至比HTML或CSS代码更容易被最小化。由于许多语法缩短技术，我们在这方面有更多的可能性。函数和变量的名称可以转换成单字母的等价物，这不会改变编程功能的含义。阅读更多关于最小化文本资源和自动化这一过程的技术。</p><h2 id="e5ce" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">11。浏览器缓存(缓存控制、过期、电子标签)</h2><p id="626c" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">下载后。包含JavaScript代码的js文件可以保存在浏览器的缓存中——通常在本地磁盘上。下一次子页面访问该文件时，它将不必再次下载该文件并执行代价高昂的HTTP和下载请求。</p><p id="336b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">服务器可能会发送一个Cache-Control或Expires头，告诉浏览器复制文件并在指定的时间段内使用未更改的版本。</p><h2 id="054a" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 12。快速服务器和CDN </strong></h2><p id="c2ee" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">最好将静态文件放在单独的子域中，并与CDN网络集成。这是因为不同的服务器在提供静态文件(即TTFB)时具有不同的“响应时间”,以及不同的带宽和互联网连接质量。尽管这些都是几十或几百千字节的小文件，但是当从一个快速且正确优化的服务器加载脚本时，您可以感觉到不同。</p><h2 id="b498" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 13。压缩</strong></h2><p id="4509" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">JavaScript文件是文本，正如我们所知，文本可以使用标准的数据压缩算法进行压缩。使用Brotli、GZP或deflate等模块在服务器端执行的压缩对用户来说是不可见的，可让您节省高达80%的传输量。Google开发的Brotli模块或传统的deflate或GZIP模块应该在任何提供JavaScript文件和其他文本资源(CSS、XML)的服务器上默认安装和启用。</p><h2 id="aee3" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 14。移除未使用的JavaScript代码</strong></h2><p id="5aa8" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">有时候页面上附加的JavaScript脚本没有任何功能。这些可能是在另一个子页面上使用过的库，或者是在后续更新中撤销的功能。</p><h2 id="4db2" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 15。优化JavaScript代码性能</strong></h2><p id="f9e3" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">程序的源代码可以在性能方面进行优化，即处理器必须执行的计算次数。这些操作不仅可以加快页面加载速度，还可以节省客户端设备的能源。</p><h2 id="2602" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">16。记忆化</h2><p id="098e" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">记忆化是一种通用的代码优化技术，它记录了一个昂贵的函数或对给定参数的响应。</p><h2 id="1170" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 17。对外部服务请求的缓存</strong></h2><p id="9ceb" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我们可以将JSON或XML文件的内容存储在一个临时变量中，如果我们重复地引用它，并且我们知道它不会被频繁地改变。</p><h2 id="d870" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated"><strong class="ak"> 18。节流</strong></h2><p id="964a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">我在编写惰性加载机制时介绍了节流技术。它在于降低触发触发器的强度。通过带有条件语句和setTimeout的简单构造，您可以让事件监听器忽略一些事件，并且功能仍然有效。</p><h2 id="62de" class="ls lt iq bd lu lv lw dn lx ly lz dp ma lf mb mc md lj me mf mg ln mh mi mj mk bi translated">19。使用局部变量而非全局变量</h2><p id="8b5a" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">使用局部变量更有效，因为我们缩小了命名空间。所有的全局变量都是window对象的一部分，在window对象中搜索变量可能需要相对较长的时间。</p></div><div class="ab cl mq mr hu ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ij ik il im in"><h1 id="2162" class="mx lt iq bd lu my mz na lx nb nc nd ma jw ne jx md jz nf ka mg kc ng kd mj nh bi translated"><strong class="ak">总结</strong></h1><p id="25cc" class="pw-post-body-paragraph kw kx iq ky b kz ml jr lb lc mm ju le lf mn lh li lj mo ll lm ln mp lp lq lr ij bi translated">利用JavaScript优化页面是值得的，因为以不同方式实现的相同功能可能会显著降低页面速度，或者对其加载时间没有影响。此外，我们有各种各样的可能性，因为JavaScript优化可以在编写脚本时完成，当将它们附加到页面和部署本身时。</p><p id="357b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ni">更多内容请看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ni">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
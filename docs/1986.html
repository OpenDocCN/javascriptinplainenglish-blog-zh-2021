<html>
<head>
<title>How to Build a Simple JavaScript Compiler to Generate SVGs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建一个简单的JavaScript编译器来生成SVG</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/building-a-simple-javascript-compiler-to-generate-svgs-7236006649b7?source=collection_archive---------14-----------------------#2021-04-25">https://javascript.plainenglish.io/building-a-simple-javascript-compiler-to-generate-svgs-7236006649b7?source=collection_archive---------14-----------------------#2021-04-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2a2c65dab67ca746cfff202e1a1a4189.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fd6mHz00EsOWEOU7BcQXhQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: SVG Compiler Web App</figcaption></figure><blockquote class="jz ka kb"><p id="a442" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated">可缩放矢量图形(SVGs)是一种基于XML的语言，用于描述二维矢量和混合矢量/光栅图形。</p></blockquote><p id="2f5c" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">该编译器旨在使用户更容易生成SVG代码，使用非编码人员也容易理解的指令。这些说明的格式深受DBN(数字设计)语言的启发。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="1e03" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">介绍</h1><p id="c055" class="pw-post-body-paragraph kc kd in kf b kg mj ki kj kk mk km kn lb ml kq kr lc mm ku kv ld mn ky kz la ig bi translated">我们使用一种受DBN(数字设计)启发的语言来描述简单的形状，以便生成相应的SVG图像。</p><p id="0083" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">每个语句都由一个调用表达式和一个数字文字组成。</p><p id="e546" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">示例—第0 0 100 100行</p><p id="d6c8" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">目前支持的调用表达式有:<br/> <strong class="kf io"> 1。纸张</strong> —创建基础框架。<br/>颜色:指定RGB填充颜色(0-白色，100-黑色)</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/b3ded9da9aacbffcdc6d1dd6c97f14f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*24QX2lYJN-dKE0q8aUUrBw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Paper</figcaption></figure><p id="a6bf" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> 2。笔</strong> —用于设置下一个形状的笔画颜色。<br/>颜色:指定RGB填充颜色(0 —白色，100 —黑色)</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mo"><img src="../Images/78b9fa719caed5148578df003293c854.png" data-original-src="https://miro.medium.com/v2/resize:fit:294/format:webp/1*l3YsSpNApRasP-Dfr3gCOA.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Pen</figcaption></figure><p id="fba2" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> 3。矩形</strong> —绘制一个矩形。<br/> x:左上角x坐标<br/> y:左上角y坐标<br/>宽度:矩形宽度<br/>高度:矩形高度<br/>填充:指定RGB填充颜色(0 —白色，100 —黑色)</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/0e5424558e88867e53f4d060955cfb35.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*1uANVVsyc2zXY-zibhGFgQ.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Rect</figcaption></figure><p id="8fe7" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> 4。线</strong> —画一条线。<br/> x1:起点的x坐标<br/> y1:起点的y坐标<br/> x2:终点的x坐标<br/> y2:终点的y坐标</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/ab1be525660d4c8a1ff739e71d0d3c2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*HN0Q63GrDY0SeP_hbeaE4Q.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Line</figcaption></figure><p id="5303" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> 5。圆</strong> —画一个圆。<br/> cx:中心的x坐标<br/> cy:中心的y坐标<br/>半径:圆的半径<br/>填充:指定RGB填充颜色(0 —白色，100 —黑色)</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/db1a85c8d80ea594a48a86eb0a611dfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*P-ofTAaAesQvit3TnNSObw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Circle</figcaption></figure><p id="4006" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">6。椭圆-绘制一个椭圆。<br/> cx:中心的x坐标<br/> cy:中心的y坐标<br/> rx:椭圆的水平半径<br/> ry:椭圆的垂直半径<br/> fill:指定RGB填充颜色(0 —白色，100 —黑色)</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/ce5066441fca3c91440de4cb92155fd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:504/format:webp/1*zzYad062azJUIFAnADhITg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Syntax for Ellipse</figcaption></figure></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="8b11" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">编译程序设计</h1><p id="56bb" class="pw-post-body-paragraph kc kd in kf b kg mj ki kj kk mk km kn lb ml kq kr lc mm ku kv ld mn ky kz la ig bi translated">编译器由四个阶段组成</p><p id="a045" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">1.<strong class="kf io"> <em class="ke">词法分析</em></strong><br/>lexer函数一次接受一条指令，并将其分解成一系列的记号。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/89266e235e12d1f52aae684535b877e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:902/format:webp/1*m6h5-RG_sPOz69EZPQOsIg.png"/></div></figure><p id="b50b" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">正如我们所看到的，令牌有两种类型——单词/数字。</p><p id="e698" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">词法分析的下一步是映射生成的标记，并为每个标记分配其类型。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/d65cb0910556f7c78ab7b8a686ff058e.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/format:webp/1*1Lbd2KzIdTa_legV1M7ZAw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Assigning types to the Tokens Generated</figcaption></figure><p id="cf01" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">2.<strong class="kf io"> <em class="ke">解析</em> </strong> <br/>解析器函数循环遍历词法分析器生成的所有标记，构建抽象语法树(AST)。</p><p id="ccec" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">生成的令牌由两种表达式组成— <br/> 1。调用表达式<br/> 2。数字文字</p><p id="3743" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">当解析器遇到CallExpression (Paper、Line、Rect、Circle、Ellipse、Pen)时，它会给它分配一个名称和一个参数数组。通过循环tokens数组中接下来的几个条目可以找到参数。</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/fd3e8bc1445005f5f1a2480f316b88c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*GXfOYteg83GWDSd1Fwpd7A.png"/></div></figure><p id="fbf0" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">3.<strong class="kf io"> <em class="ke">转换<br/> </em> </strong>在上一步中，一旦我们通过解析分析了语法，我们就将结构转换成适合最终结果的东西。</p><p id="e91a" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">我们在上一步中创建的AST不足以构建一个SVG。<br/>比如。“纸”是一个只存在于DBN范式中的概念。在SVG中，我们可能使用&lt; rect &gt;元素来表示一篇论文。transformer函数将AST转换成另一个SVG友好的AST。</p><p id="1bbc" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">结果将会是这样的:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/924b463000edfedbc96e1b3644977809.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*dSjBYHShKQpFwJO5CP4cYw.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Transformed AST structure</figcaption></figure><p id="3bf1" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">4.<strong class="kf io"> <em class="ke">代码生成<br/> </em> </strong>在最后一步中，我们使用字符串连接来获取转换后的AST并生成SVG代码。以下DBN语言的SVG代码如下所示:</p><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div class="gh gi my"><img src="../Images/5211d9ccb5111274a5db51484eab1501.png" data-original-src="https://miro.medium.com/v2/resize:fit:494/format:webp/1*tkcS1oU258b_YbJyjcSo4w.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: DBN like language</figcaption></figure><figure class="mp mq mr ms gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/027af4e40b3d306449ddc842869a84d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOZmbemuziG6wPrOfTSegA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig: Generated SVG Code</figcaption></figure><p id="eb03" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">使用<img/>标签显示最终结果。</p><h1 id="f2f7" class="ll lm in bd ln lo na lq lr ls nb lu lv lw nc ly lz ma nd mc md me ne mg mh mi bi translated"><em class="nf">开发和托管</em></h1><p id="282d" class="pw-post-body-paragraph kc kd in kf b kg mj ki kj kk mk km kn lb ml kq kr lc mm ku kv ld mn ky kz la ig bi translated">这个web应用程序是使用<strong class="kf io"> React </strong>创建的，托管在<strong class="kf io"> AWS Amplify </strong>上。<br/> AWS Amplify提供了一个免费层，允许我们在线托管我们的应用程序，并使用AWS云控制台监控它们。</p><p id="53b3" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io">AWS上主机程序放大</strong> <br/> 1。在AWS上创建一个免费帐户(需要提供账单详情，但除非超出免费等级，否则不会向您收费)。</p><p id="8246" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">2.搜索AWS Amplify。</p><p id="4b2d" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">3.授权您的GitHub帐户进行持续集成。</p><p id="99d1" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">4.选择要托管的代码所在的存储库和分支。</p><p id="7192" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">5.配置构建设置(可以保留默认值)。</p><p id="333b" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">6.查看配置。</p><p id="a8d0" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated">7.构建和部署应用程序。</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><h1 id="0799" class="ll lm in bd ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi bi translated">首字母缩略词</h1><p id="d57c" class="pw-post-body-paragraph kc kd in kf b kg mj ki kj kk mk km kn lb ml kq kr lc mm ku kv ld mn ky kz la ig bi translated">DBN——数字设计<br/>SVG——可缩放矢量图形<br/>AWS——亚马逊网络服务</p></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><blockquote class="jz ka kb"><p id="6ff1" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><strong class="kf io"><em class="in">Web应用托管在</em> </strong>下面的链接上</p></blockquote><div class="ng nh gp gr ni nj"><a href="https://master.ddyzdttmkunq0.amplifyapp.com/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">SVG编译器</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">编译器使用类似DBN的代码生成SVG</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">master.ddyzdttmkunq0.amplifyapp.com</p></div></div></div></a></div><blockquote class="jz ka kb"><p id="8081" class="kc kd ke kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ig bi translated"><strong class="kf io"> <em class="in">代码托管在GitHub <br/> </em> </strong>上，如果您有更好的想法/方法，请随意创建问题和pr。</p></blockquote><div class="ng nh gp gr ni nj"><a href="https://github.com/RRS-Project/svg" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">RRS-项目/svg</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">编译器接受描述不同形状的简单代码，并生成相应的SVG代码和图像。SVG…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div></div></a></div></div><div class="ab cl le lf hr lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="ig ih ii ij ik"><p id="b8c6" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> <em class="ke">在GitHub上找我</em> </strong></p><div class="ng nh gp gr ni nj"><a href="https://github.com/riyasavant/" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">riyasavant -概述</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">从日落到繁星点点的夜晚。从日落到繁星点点的夜晚。GSSoC'21 |全栈发烧友Block或Report我是全栈…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx jt nj"/></div></div></a></div><p id="f533" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><strong class="kf io"> <em class="ke">队友</em> </strong></p><div class="ng nh gp gr ni nj"><a href="https://github.com/rahulnoronha" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">rahulnoronha -概述</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">B.达雅纳达萨加尔大学Tech计算机科学与工程本科学生(2018-2022)。阻止或报告…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx jt nj"/></div></div></a></div><div class="ng nh gp gr ni nj"><a href="https://github.com/San411" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab fo"><div class="nl ab nm cl cj nn"><h2 class="bd io gy z fp no fr fs np fu fw im bi translated">San411 -概述</h2><div class="nq l"><h3 class="bd b gy z fp no fr fs np fu fw dk translated">屏蔽或举报所有与机器学习相关的项目，深度学习Jupyter笔记本预测贫困使用…</h3></div><div class="nr l"><p class="bd b dl z fp no fr fs np fu fw dk translated">github.com</p></div></div><div class="ns l"><div class="nz l nu nv nw ns nx jt nj"/></div></div></a></div><p id="f353" class="pw-post-body-paragraph kc kd in kf b kg kh ki kj kk kl km kn lb kp kq kr lc kt ku kv ld kx ky kz la ig bi translated"><a class="ae oa" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ke">更多内容看plainenglish.io </em> </a></p></div></div>    
</body>
</html>
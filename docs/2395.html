<html>
<head>
<title>How to do Object Comparison in JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中如何做对象比较？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-do-object-comparison-in-javascript-8e4ca97f2acb?source=collection_archive---------32-----------------------#2021-05-17">https://javascript.plainenglish.io/how-to-do-object-comparison-in-javascript-8e4ca97f2acb?source=collection_archive---------32-----------------------#2021-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/b9f1fd49dc865ad129c392bf0b6b3a6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_P87k99_cSkugS9I"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@coffeegeek?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Coffee Geek</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f0d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">比较对象属性和值是我们在JavaScript代码中有时需要做的事情。</p><p id="e058" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何在JavaScript中比较对象。</p><h1 id="90f8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">JSON.stringify</h1><p id="8d89" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><code class="fe me mf mg mh b">JSON.stringify</code>方法让我们将JavaScript对象转换成JSON字符串。</p><p id="bb3d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦我们将对象转换成字符串，我们就可以将字符串化的值与另一个字符串化的对象进行比较。</p><p id="3711" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="0d9b" class="mq lc iq mh b gy mr ms l mt mu">const obj1 = {<br/>  a: 1<br/>}<br/>const obj2 = {<br/>  a: 1<br/>}<br/>console.log(JSON.stringify(obj1) === JSON.stringify(obj2))</span></pre><p id="20d9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有两个对象，<code class="fe me mf mg mh b">obj1</code>和<code class="fe me mf mg mh b">obj2</code>。</p><p id="4c24" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们在两个对象上调用<code class="fe me mf mg mh b">JSON.stringify</code>，并用<code class="fe me mf mg mh b">===</code>操作符检查是否相等。</p><p id="ddd0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">属性的顺序很重要，因为它们将按照在对象中的顺序进行字符串化。</p><p id="b1a5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">由于<code class="fe me mf mg mh b">obj1</code>和<code class="fe me mf mg mh b">obj2</code>是同一个字符串，那么最后一行的布尔表达式应该是<code class="fe me mf mg mh b">true</code>。</p><h1 id="6d9c" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">比较对象的每个属性</h1><p id="bbe6" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以比较我们想要比较的对象的每个属性。</p><p id="558f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="bf92" class="mq lc iq mh b gy mr ms l mt mu">const obj1 = {<br/>  a: 1<br/>}<br/>const obj2 = {<br/>  a: 1<br/>}</span><span id="6cf8" class="mq lc iq mh b gy mv ms l mt mu">function objectEquals(x, y) {<br/>  if (x === y) {<br/>    return true;<br/>  }</span><span id="c32b" class="mq lc iq mh b gy mv ms l mt mu">  if (!(x instanceof Object) || !(y instanceof Object)) {<br/>    return false;<br/>  }</span><span id="ad7c" class="mq lc iq mh b gy mv ms l mt mu">  if (x.constructor !== y.constructor) {<br/>    return false;<br/>  }</span><span id="4aac" class="mq lc iq mh b gy mv ms l mt mu">  for (const p in x) {<br/>    if (!x.hasOwnProperty(p)) {<br/>      continue;<br/>    }</span><span id="6614" class="mq lc iq mh b gy mv ms l mt mu">    if (!y.hasOwnProperty(p)) {<br/>      return false;<br/>    }</span><span id="fede" class="mq lc iq mh b gy mv ms l mt mu">    if (x[p] === y[p]) {<br/>      continue;<br/>    }</span><span id="2cae" class="mq lc iq mh b gy mv ms l mt mu">    if (typeof(x[p]) !== "object") {<br/>      return false;<br/>    }</span><span id="7663" class="mq lc iq mh b gy mv ms l mt mu">    if (!objectEquals(x[p], y[p])) {<br/>      return false;<br/>    }<br/>  }</span><span id="75e9" class="mq lc iq mh b gy mv ms l mt mu">  for (const p in y) {<br/>    if (y.hasOwnProperty(p) &amp;&amp; !x.hasOwnProperty(p)) {<br/>      return false;<br/>    }<br/>  }<br/>  return true;<br/>}</span><span id="55dd" class="mq lc iq mh b gy mv ms l mt mu">console.log(objectEquals(obj1, obj2))</span></pre><p id="1332" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">objectEquals</code>函数中，我们检查<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>是否与<code class="fe me mf mg mh b">===</code>运算符相等。</p><p id="c765" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们相等，那么我们返回<code class="fe me mf mg mh b">true</code>。</p><p id="48cd" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">下一个<code class="fe me mf mg mh b">if</code>块用<code class="fe me mf mg mh b">instanceof</code>操作符检查它们是否不是一个对象文字。</p><p id="5148" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们中的任何一个都不是，那么我们返回<code class="fe me mf mg mh b">false</code>,因为如果它们中的任何一个都不是对象，它们就不可能是相同的。</p><p id="a43d" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们遍历<code class="fe me mf mg mh b">x</code>的属性。</p><p id="3887" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果属性<code class="fe me mf mg mh b">p</code>不是<code class="fe me mf mg mh b">x</code>的自有属性，那么我们用<code class="fe me mf mg mh b">continue</code>忽略它。</p><p id="e907" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">y</code>在<code class="fe me mf mg mh b">x</code>中没有继承的属性，那么它们就不一样，所以我们返回<code class="fe me mf mg mh b">false</code>。</p><p id="e17c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">x[p]</code>和<code class="fe me mf mg mh b">y[p]</code>相同，则使用<code class="fe me mf mg mh b">continue</code>检查新属性。</p><p id="af51" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果<code class="fe me mf mg mh b">x[p]</code>不是一个对象，我们返回<code class="fe me mf mg mh b">false</code>，因为如果一个原始值不相等，那么<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>不可能相等。</p><p id="bf9b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们还必须记得检查剩余的<code class="fe me mf mg mh b">x</code>和<code class="fe me mf mg mh b">y</code>的电平是否与<code class="fe me mf mg mh b">objectEquals(x[p], y[p])</code>相等。</p><p id="8683" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果它们中的任何一个不相等，那么我们返回<code class="fe me mf mg mh b">false</code>。</p><p id="d21f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">接下来，我们遍历<code class="fe me mf mg mh b">y</code>，检查<code class="fe me mf mg mh b">y</code>中是否有<code class="fe me mf mg mh b">x</code>中没有的非继承属性。</p><p id="336e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果有，那么我们知道它们不相等，我们返回<code class="fe me mf mg mh b">false</code>。</p><p id="5f02" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果所有检查都通过了，那么我们返回<code class="fe me mf mg mh b">true</code>，因为我们知道在这种情况下它们肯定是相等的。</p><h1 id="efb8" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="24ca" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以编写自己的代码来比较复杂的对象，或者我们可以使用<code class="fe me mf mg mh b">JSON.stringify</code>来比较JSON字符串形式的2个对象。</p><p id="f3e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容请看</em><a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
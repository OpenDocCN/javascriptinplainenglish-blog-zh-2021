<html>
<head>
<title>JavaScript — Errors and Exception Handling</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript —错误和异常处理</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-errors-exceptions-handling-43ae983cbbb3?source=collection_archive---------2-----------------------#2021-02-06">https://javascript.plainenglish.io/javascript-errors-exceptions-handling-43ae983cbbb3?source=collection_archive---------2-----------------------#2021-02-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/209336a1e9f23eafec83e1fba962fc93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3q5POdAbkJLqk19SoGCF1Q.png"/></div></div></figure><div class=""/><div class=""><h2 id="66e1" class="pw-subtitle-paragraph jv ix iy bd b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km dk translated">嘿先生/小姐，我的剧本有个错误！</h2></div><p id="c44b" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">错误是可能发生的，在JavaScript中，大多数时候都会发生错误！出现这条恼人的红色信息有多种原因:</p><ul class=""><li id="f977" class="lj lk iy kp b kq kr kt ku kw ll la lm le ln li lo lp lq lr bi translated">语法错误:我们可以花时间审查我们的代码，我们从来没有意识到有一个丢失的分号或括号。</li><li id="511f" class="lj lk iy kp b kq ls kt lt kw lu la lv le lw li lo lp lq lr bi translated">范围错误:该错误超出范围或未定义。它可以是无效的日期或无效的数组长度。</li><li id="8cb6" class="lj lk iy kp b kq ls kt lt kw lu la lv le lw li lo lp lq lr bi translated">引用错误:当我们给一个不存在的变量赋值时，就会出现这个错误。它可能是一个未定义的x或者一个未声明的变量x的赋值。</li><li id="dfb2" class="lj lk iy kp b kq ls kt lt kw lu la lv le lw li lo lp lq lr bi translated">类型错误:当值为意外类型时会出现错误。</li></ul><p id="f6ea" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated"><em class="lx">注意:如果我们愿意，也可以使用一些</em> <a class="ae ly" href="https://fixjserror.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lx"> JavaScript异常解决器</em> </a> <em class="lx">。</em></p><p id="1a6c" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">诸如此类。我们稍后会看到这一点。</p><p id="dee6" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">因此，当这种情况发生时，代码不会运行，并且会被卡住。我们如何修复这些错误？用这个！</p><h2 id="25ee" class="lz ma iy bd mb mc md dn me mf mg dp mh kw mi mj mk la ml mm mn le mo mp mq mr bi translated"><strong class="ak">试试……接住可以保存的代码</strong></h2><p id="603b" class="pw-post-body-paragraph kn ko iy kp b kq ms jz ks kt mt kc kv kw mu ky kz la mv lc ld le mw lg lh li ig bi translated">当错误发生时，JavaScript代码停止运行并显示一条错误消息。<em class="lx"> Try… catch </em>是一段代码，它将是解决方案。</p><p id="2a42" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">当测试一段代码时，我们使用<em class="lx"> try </em>来查看它的执行过程中是否有错误。然后，如果出现错误，将执行<em class="lx"> catch </em>语句。<em class="lx"> catch(err) </em>中的<em class="lx">err</em>——您可以随意命名——定义了一个错误对象，并提供了如何处理该错误的详细信息。当catch记录一个错误时，我们将使用console.error()而不是console.log()。这是报告错误并将其添加到页面上出现的错误列表中的正确方法。</p><p id="9a68" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">当出现错误时，JavaScript停止运行并抛出异常或错误。错误对象可以有两个属性:</p><ul class=""><li id="6872" class="lj lk iy kp b kq kr kt ku kw ll la lm le ln li lo lp lq lr bi translated">错误名称可以返回不同的值:</li></ul><p id="67c6" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">Eval()函数中出现eval错误。然而，新的Javascript版本不使用这个错误。相反，我们可以使用SyntaxError。</p><p id="f9fe" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">范围误差:当一个数字超出范围时。</p><p id="26ad" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">引用错误:变量未声明时。</p><p id="7348" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">语法错误:当出现语法错误时。例如，错过分号是很典型的。</p><p id="071b" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">类型错误:当值由于变量的类型而超出范围时。比如一个数字不能大写。</p><p id="5c86" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">URI错误:当统一资源标识符encodeURI()出错时。URI是识别aweb技术使用的资源的字符序列。</p><ul class=""><li id="e9b7" class="lj lk iy kp b kq kr kt ku kw ll la lm le ln li lo lp lq lr bi translated">错误消息提供了有关错误的信息。</li></ul><p id="63a3" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如果不需要error对象，我们可以用<em class="lx"> catch{} </em>代替<em class="lx"> catch(err){}。</em></p><p id="a06a" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如果我们想让try… catch工作，您必须确保代码是有效的和可运行的——没有语法错误，比如不匹配的花括号。一旦可读，引擎读取并运行代码。然后，它会在看不懂这段代码的时候执行<em class="lx"> try… catch </em>。</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/5c1939c41c571a0acaa4fd1800ece6dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eQ5IVghpbhV5aaTjzNURgA.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Try… Catch structure</figcaption></figure><p id="6b4c" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">这是一个我们如何使用try…catch的例子。此示例调用一个函数，该函数根据函数的上一个值返回月份数组。如果该值不是1到12之间的月份数，它将引发一个名为“InvalidMonthNo”的异常，catch块会将变量monthName转换为“unkown”。</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ng"><img src="../Images/b2179f75bfde619fab053184e42c2bbe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*af2cyezE-U9tE9B53cpDfA.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Example from developer.mozilla.org</figcaption></figure><h2 id="c272" class="lz ma iy bd mb mc md dn me mf mg dp mh kw mi mj mk la ml mm mn le mo mp mq mr bi translated">哦，等等！<em class="nh">抛出—新错误— </em>是什么意思？</h2><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/67a537d29d432f6f88bd5ab12fed653f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xkbs5TAYtDygZ-40S1INxQ.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Try… Catch with throw an error structure</figcaption></figure><p id="51fe" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">正如我们之前看到的，当代码中出现错误时，代码就会停止运行。当使用throw语句时，我们可以通过抛出一个错误或异常来控制流并定制我们自己的错误和错误消息。您可以将其自定义为字符串、对象、布尔值或数字。</p><h2 id="a031" class="lz ma iy bd mb mc md dn me mf mg dp mh kw mi mj mk la ml mm mn le mo mp mq mr bi translated"><strong class="ak">最后，最后声明</strong></h2><p id="f289" class="pw-post-body-paragraph kn ko iy kp b kq ms jz ks kt mt kc kv kw mu ky kz la mv lc ld le mw lg lh li ig bi translated">尽管进行了<em class="lx">尝试…捕捉</em>，我们最终还是执行了<em class="lx">。这个块总是在try… catch之后执行。这个块将以两种方式执行:是否有异常。最后总是确保代码将被执行，即使有一个错误。</em></p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mx"><img src="../Images/1dc95ce07e8a443206d5cbe3d2e6efce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JUsQrReWBQYzpGaXzEvbfw.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Try… Catch… Finally structure</figcaption></figure><p id="d382" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如果finally返回值，这个值将是整个T <em class="lx"> ry… Catch… Finally </em>块中的返回值，而<em class="lx"> Try… Catch </em>块中的返回值是什么并不重要。</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ng"><img src="../Images/f37015bc832dafe792203bd62f39f44b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a5UPpMWGGqWB06BoAaichg.png"/></div></div><figcaption class="nc nd gj gh gi ne nf bd b be z dk">Example for Try… Catch… Finally</figcaption></figure><h2 id="e438" class="lz ma iy bd mb mc md dn me mf mg dp mh kw mi mj mk la ml mm mn le mo mp mq mr bi translated">嵌套的Try… Catch块</h2><p id="c646" class="pw-post-body-paragraph kn ko iy kp b kq ms jz ks kt mt kc kv kw mu ky kz la mv lc ld le mw lg lh li ig bi translated">嵌套Try… Catch是可能的。如果<em class="lx"> try </em>没有自己的<em class="lx"> catch </em>，它必须有一个finally程序块和catch程序块连接到try… catch进行测试，以确保一致性。这里有一个结构和工作原理的例子。</p><figure class="my mz na nb gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi ng"><img src="../Images/63af250e42842d5fa44a5690d0432db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ijNatgH2i9ni5hv18j_RKw.png"/></div></div></figure><p id="15aa" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">该异常将被最近的catch捕获。内部块中的任何新异常都将被外部块捕获。</p><h2 id="781c" class="lz ma iy bd mb mc md dn me mf mg dp mh kw mi mj mk la ml mm mn le mo mp mq mr bi translated">结论</h2><p id="135e" class="pw-post-body-paragraph kn ko iy kp b kq ms jz ks kt mt kc kv kw mu ky kz la mv lc ld le mw lg lh li ig bi translated">Try… Catch 模块处理运行时错误。这意味着，如果您尝试运行第一个代码块，第二个代码块会捕获其中发生的错误。</p><p id="1083" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">错误对象有这两个属性:</p><ul class=""><li id="ee74" class="lj lk iy kp b kq kr kt ku kw ll la lm le ln li lo lp lq lr bi translated">名字</li><li id="3ca1" class="lj lk iy kp b kq ls kt lt kw lu la lv le lw li lo lp lq lr bi translated">消息</li></ul><p id="4bbf" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如果不需要错误对象，我们可以使用catch{}。</p><p id="27b9" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">使用throw——一个错误对象，我们可以生成自己的异常。</p><p id="3011" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated">如果使用finally，这个块的返回值才有效。</p><p id="98d6" class="pw-post-body-paragraph kn ko iy kp b kq kr jz ks kt ku kc kv kw kx ky kz la lb lc ld le lf lg lh li ig bi translated"><em class="lx">更多内容请看</em><a class="ae ly" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lx">plain English . io</em></a></p></div></div>    
</body>
</html>
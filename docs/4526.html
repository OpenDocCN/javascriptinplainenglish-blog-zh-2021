<html>
<head>
<title>Data Visualization and Analysis with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JavaScript实现数据可视化和分析</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/off-line-data-visualizations-and-analysis-with-javascript-8e0a891493b1?source=collection_archive---------8-----------------------#2021-09-09">https://javascript.plainenglish.io/off-line-data-visualizations-and-analysis-with-javascript-8e0a891493b1?source=collection_archive---------8-----------------------#2021-09-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/400bf6882d5a6146059be8375a05d185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mpyrgqwMjfclV2oN1U2VIA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@lukechesser?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Luke Chesser</a> on <a class="ae jz" href="https://unsplash.com/s/photos/data?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5238" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在过去的几个月里，我一直致力于开发一个离线数据分析和可视化项目。场景是这样的:</p><ul class=""><li id="a30a" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">ERP系统查询产生的一组csv文件；</li><li id="86c3" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">最终用户自己制作的一组图表。</li></ul><h2 id="1713" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated"><a class="ae jz" href="https://danfo.jsdata.org/" rel="noopener ugc nofollow" target="_blank">T3】danfo . jsT5】</a></h2><p id="419b" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">Danfo.js是一个开源的JavaScript库，提供了高性能、直观且易于使用的数据结构来操作和处理结构化数据。Danfo.js深受Pandas库的启发，并提供了类似的接口和API。</p><blockquote class="ml mm mn"><p id="8439" class="ka kb mk kc b kd ke kf kg kh ki kj kk mo km kn ko mp kq kr ks mq ku kv kw kx ig bi translated">基本上，danfo.js允许您创建客户端数据框架。数据帧是表格形式的结构化数据对象(矩阵或二维数组)。</p></blockquote><h1 id="a991" class="mr ln in bd lo ms mt mu lr mv mw mx lu my mz na lx nb nc nd ma ne nf ng md nh bi translated">将本地CSV文件转换为数据帧</h1><h2 id="fc6d" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated"><strong class="ak">第一步。读取本地CSV文件</strong></h2><p id="3ad0" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">第一步是从查询导出结果的本地共享磁盘读取最终用户选择的csv文件。例如，我想将下面的csv文件转换成数据帧。导出的csv文件表示具有指定年份、客户、产品类别(特性)的销售数据集。</p><figure class="nj nk nl nm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/0ab29f5a45b41c936fd9d613a678e2ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t6LASpmJdGVlDQ01d1CRlQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">annual_sales.csv</figcaption></figure><h2 id="4152" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated"><strong class="ak">文件Web API </strong></h2><p id="c04b" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">文件浏览器API允许读取终端用户选择的文件。</p><p id="d13e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mk">我们需要什么？</em></p><ul class=""><li id="2f6d" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">一个按钮和单击事件，用于加载文件类型的输入标记，允许最终用户选择文件</li><li id="0330" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">加载所选文件，并将其作为文本阅读</li></ul><h2 id="90ce" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated"><strong class="ak"> HTML按钮</strong></h2><figure class="nj nk nl nm gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nn"><img src="../Images/28aca1aaca9ce596285dcceff102a1ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y7b5egjkslkdGzzA5e_KDw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The HTML button and the readFile onclick event</figcaption></figure><h2 id="bacf" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">readFile函数</h2><p id="7a67" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">这个函数的结果是CSV文本字符串。</p><figure class="nj nk nl nm gt jo gh gi paragraph-image"><div class="gh gi no"><img src="../Images/8c0c6947f00b2e2eeee271161f4fdb39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*X2WrIymR-kppvthYEuJeJg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Local csv file reader</figcaption></figure><h2 id="1b03" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第二步。将CSV文本字符串转换为数据帧</h2><p id="f0b4" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">DataFrame可以由一组JavaScript文字对象构成。所以下一步是将CSV文本字符串转换成对象数组。下一个函数<code class="fe np nq nr ns b">csv_to_dataframe(strCSV)</code>将会这样做。</p><figure class="nj nk nl nm gt jo gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/36e38ad4a8c4bde49ba9ea59a893abda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*Q6TygrXb_Fx53DVpwy0qog.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Convert csv string into array of literal objects</figcaption></figure><h2 id="f342" class="lm ln in bd lo lp lq dn lr ls lt dp lu kl lv lw lx kp ly lz ma kt mb mc md me bi translated">第三步。构建danfo数据框架</h2><p id="e690" class="pw-post-body-paragraph ka kb in kc b kd mf kf kg kh mg kj kk kl mh kn ko kp mi kr ks kt mj kv kw kx ig bi translated">这是最简单的一步。只需根据前面函数的结果构造一个DataFrame对象:<code class="fe np nq nr ns b">df=new <strong class="kc io">dfd</strong>.DataFrame(format_csv(strCSV))</code></p><p id="423a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">其中dfd是对全局danfo.js库的引用</strong>你可以作为cdn导入，本地下载，或者作为NPM包安装(关于如何将Dando.js集成到你的客户端应用的详细信息，请参见<a class="ae jz" href="https://danfo.jsdata.org/getting-started" rel="noopener ugc nofollow" target="_blank">https://danfo.jsdata.org/getting-started</a>，如果你使用React、Angular o Vue等框架，请参见<a class="ae jz" href="https://danfo.jsdata.org/examples/using-danfojs-in-react" rel="noopener ugc nofollow" target="_blank">https://danfo.jsdata.org/examples/using-danfojs-in-react</a>)。</p><p id="8260" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一如既往地在评论中让我知道你的想法。如果你感兴趣，我将发表这篇文章的第二部分来讨论:</p><ul class=""><li id="0bad" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">使用DataFrame进行强大的数据转换和分析</li><li id="4acb" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">使用3个免费的令人惊叹的JavaScript库来可视化不同类型的交互和响应图形读取数据帧:<a class="ae jz" href="https://plotly.com/javascript/" rel="noopener ugc nofollow" target="_blank"> pyplot </a>、<a class="ae jz" href="https://apexcharts.com/" rel="noopener ugc nofollow" target="_blank"> Apexchart </a>、<a class="ae jz" href="https://developers.google.com/chart/interactive/docs/reference" rel="noopener ugc nofollow" target="_blank"> Google visualization API </a></li></ul></div></div>    
</body>
</html>
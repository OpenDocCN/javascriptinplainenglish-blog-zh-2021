<html>
<head>
<title>How to Create Forms in React from Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在“从头开始”中创建表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-create-forms-in-react-from-scratch-ae140b67baa6?source=collection_archive---------9-----------------------#2021-04-20">https://javascript.plainenglish.io/how-to-create-forms-in-react-from-scratch-ae140b67baa6?source=collection_archive---------9-----------------------#2021-04-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8d27" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">在“反应”中创建交互式表单的完整指南。</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/74ec37fe22995495666e568d52bee8fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ayd-npFAxZKWT38I"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae ky" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6a57" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将利用React提供的useState钩子来管理React表单中的状态。</p><blockquote class="kz la lb"><p id="8025" class="jk jl lc jm b jn jo jp jq jr js jt ju ld jw jx jy le ka kb kc lf ke kf kg kh ig bi translated"><strong class="jm io">注意— </strong>要完全理解本课程，需要一些基本的反应知识。</p></blockquote><p id="9a0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们将使用HTML标记来创建输入并标记字段。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lg"><img src="../Images/ebd1dd8a58d2be5d631d0634301c68d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qSEfXDoKCo_2SGbi5KaMFQ.png"/></div></div></figure><p id="c063" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基本的表单结构是这样设置的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lh"><img src="../Images/a84eb81ef5023dc809fbd1127288a50b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8X0KRgjfX-vx9liHZmOTRw.png"/></div></div></figure><p id="098a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，在表单建立之后，我们将使它们发挥作用，并添加验证等功能。</p><p id="8e38" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将使用两个useState钩子来存储在表单字段中输入的数据，并使用空默认值启动输入名称和输入邮件。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi gj"><img src="../Images/03bbd8991478e63c7496e74d70c8fbe2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jIcVYQrVRNS9JMQmY4ROlw.png"/></div></div></figure><p id="db1b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要更新输入的名称和输入的邮件值，我们将在输入中使用onChange(这样，状态会随着输入字段中每一次击键的改变而改变)，并相应地更新状态，如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi li"><img src="../Images/c77669f3b1fba82f59f577fa82358769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sPQT0g8v81L5Gwvu6WdHIg.png"/></div></div></figure><p id="437a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了添加双向绑定，以便我们可以在状态改变时显式地改变输入字段，我们将使用输入HTML标记的value属性来调整输入中的值。这是为了确保当我们提交表单时，表单值恢复为空白。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lj"><img src="../Images/2016882a7630686a1a77dfdb6fbfecb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sava15Ni2DlsnMoiyTQXDg.png"/></div></div></figure><p id="c55e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">emailChangeHandler和nameChangeHandler函数将隐式(自行)接收事件(表示为“e”，您可以使用任何变量名作为参数，但“e”通常是约定)对象作为参数，其值将输入到输入字段中。每当输入数据改变时，这个函数将自动启动。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi lk"><img src="../Images/61f739f47cbd3f7d52c476edb4d3d7a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1110/format:webp/1*GrwCOp9N692_ZM9zgDN5Cw.png"/></div></figure><p id="6dcf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在我们有了状态，即输入的名称和输入的邮件随着表单中输入数据的变化而变化。</p><p id="010d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">一半的工作在这一点上完成了。现在，我们将处理表单的验证部分。通过验证，我的意思是验证数据，并向用户显示正在输入有效信息。例如，电子邮件应该包含“@”和”。com”以使表单中的电子邮件字段有效。</p><p id="de91" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">验证是更高级的代码，所以要仔细理解它。</p><p id="0948" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，onBlur事件可以与输入的HTML标记一起使用，只要我们单击表单，然后单击其他地方，就会触发该事件。</p><p id="2a00" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用onBlur事件，如果用户输入了无效的内容，我们可以向用户显示错误消息。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ll"><img src="../Images/dab7175015cee012efe5678142e0c0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bMHbq6zsm3SGdWvYfqbfEg.png"/></div></div></figure><p id="9e54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，由于onBlur事件已经设置好了，我们将了解当这个事件发生时将被激发的函数。</p><p id="7a03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们必须存储用户是否在表单中触摸或输入了什么。第一次，我们不能显示或验证，因为用户没有输入任何内容。但是从那时起，每当用户试图键入什么，我们就需要验证。</p><p id="eec1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，默认情况下，对于表单的初始加载，我们将输入的名称和输入的邮件触摸设置为false。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lm"><img src="../Images/f855db8a0d1b572f09fef7aaf0f069fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XJW4XpBcHE2gKoLgNAgTTg.png"/></div></div></figure><p id="02d2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">每当我们写了一些东西，然后在输入字段外单击时，onBlur事件将触发nameTouchHandler和emailTouchHandler，并将它们的值设置为true，这样我们就知道用户输入了一些东西，我们应该验证输入。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ln"><img src="../Images/dc308a36b92e2dc8f798f8c9c31c5fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:780/format:webp/1*7Va9xwA3DSe0HfJt1iSGSw.png"/></div></figure><p id="e606" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，我们知道用户已经在输入字段中输入了一些内容，是时候验证数据了。</p><p id="b9ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为此，我们将为初始页面加载设置formValid = "false"。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi lo"><img src="../Images/5c8da0a2a35c9e25462d6a4a3711757e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WbiHceeOBwPG3Xk3csRe9A.png"/></div></div></figure><p id="6db3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，为了验证输入，我们将检查在表单的输入字段中输入的数据。但是要向用户显示错误消息，我们应该记住，不应该在表单第一次加载时显示错误消息。因此，为此，我们必须检查两个条件—</p><ol class=""><li id="ef4f" class="lp lq in jm b jn jo jr js jv lr jz ls kd lt kh lu lv lw lx bi translated">必须触摸表单(formTouched设置为“true”)。</li><li id="2432" class="lp lq in jm b jn ly jr lz jv ma jz mb kd mc kh lu lv lw lx bi translated">表单中输入的数据必须无效。</li></ol><p id="d95e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了检查这两个，我们将使用-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi md"><img src="../Images/458da90add22a49fb579555b66af1fdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MVASx2Rls-sZWAMV2vOhkQ.png"/></div></div></figure><p id="c431" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，当我们想要动态显示输入到输入字段中的用户数据是否有效时，我们将使用enteredNameTouchedInvalid和enteredEmailTouchedInvalid，这将确保在显示错误消息之前检查上述两种情况。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi me"><img src="../Images/bd9a111a6cbe45d9f6bd5185c3589303.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XwzKenwlSS0WSbcDNP_qQQ.png"/></div></div></figure><p id="b066" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，由于显示了输入字段消息，我们还希望当数据无效时，表单颜色变为红色。因此，当数据无效时，我们将动态地改变应用于表单的类。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mf"><img src="../Images/d11aef14caa2edec723ad0a5c3450917.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qHme24kBzg0VuVQn0xInww.png"/></div></div></figure><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mg"><img src="../Images/4430b947ff5adbf9599747b311d968ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yXw65gpewye5ZIL3qBCDsQ.png"/></div></div></figure><p id="a7fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因此，当输入的数据无效时，表单将如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mh"><img src="../Images/6fa1931b75a33dd0bf69368b80f84c00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SUtJO4bYjoYncN1cPibnA.png"/></div></div></figure><p id="ff48" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，表单已经被动态验证。此外，当输入的数据不正确时，它会显示一条错误消息(您可以自己检查数据的有效性；我使用了长度检查来检查名字，还有“@”和“”。com”检查电子邮件；您还可以使用正则表达式来实现更繁琐的检查)。</p><p id="2960" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">最后，当我们提交表单时，我们必须确保表单输入数据被重置为空白。为此，我们必须将enteredName和enteredEmail的值重置为空。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mi"><img src="../Images/8a1245361e02696198bdada31f46b6de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5AIKAMMr5zE9_Y-dUIzjKg.png"/></div></div></figure><p id="dd5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当单击提交按钮时，onSubmitHandler函数将被触发。</p><p id="ed0e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如前所述，我们将通过该事件隐式接收一个事件对象，该函数如下所示。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/840ada1addac7fa3eb1a3ffdfcf26b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1328/format:webp/1*Wn5WY4Pjtsejsa3axCmLKQ.png"/></div></figure><p id="0af5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将检查表单是否有效，为了检查表单是否有效，我们将使用这个。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mk"><img src="../Images/0c93da0abbfb2fab7d742a51765e418a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*9jwqx_xPCZ3I91NEEfgx6Q.png"/></div></figure><p id="d2ba" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">现在，如果表单数据无效，我们将简单地返回，从而终止函数的进一步执行。</p><p id="f125" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果数据有效，那么我们必须将输入数据字段重置为空白，并将emailTouched和nameTouched重置为false。因此表单在提交后会返回到初始状态。</p><p id="6ae0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是表单的工作方式-</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ml"><img src="../Images/ede5d8ada57b1a19322202d78782ef56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*xpYOszCOtVB1dZBXerTOkQ.gif"/></div></div></figure><p id="9d9f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">仅此而已。希望这篇文章对您有所帮助，现在可以开始创建和验证您自己的React表单了。谢谢你。</p><h2 id="2149" class="mm mn in bd mo mp mq dn mr ms mt dp mu jv mv mw mx jz my mz na kd nb nc nd ne bi translated">进一步阅读</h2><div class="nf ng gp gr nh ni"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-build-your-own-surveys-extend-them-with-custom-javascript-b4c7eb5648c4"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd io gy z fp nn fr fs no fu fw im bi translated">如何构建自己的调查并使用定制的JavaScript扩展它们</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">这是一本关于如何使用自己的JS函数来扩充SurveyJS附带的条件逻辑和验证器的入门书。</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ks ni"/></div></div></a></div><p id="4b81" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="lc">更多内容请看</em><a class="ae ky" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lc">plain English . io</em></strong></a><em class="lc">。报名参加我们的</em> <a class="ae ky" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> <em class="lc">免费周报</em> </strong> </a> <em class="lc">。关注我们关于</em><a class="ae ky" href="https://twitter.com/inPlainEngHQ" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lc">Twitter</em></strong></a><a class="ae ky" href="https://www.linkedin.com/company/inplainenglish/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lc">LinkedIn</em></strong></a><em class="lc"/><a class="ae ky" href="https://www.youtube.com/channel/UCtipWUghju290NWcn8jhyAw" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lc">YouTube</em></strong></a><em class="lc"/><a class="ae ky" href="https://discord.gg/GtDtUAvyhW" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lc">不和</em> </strong> </a> <em class="lc">。</em></p></div></div>    
</body>
</html>
<html>
<head>
<title>Using environment variables in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JavaScript中使用环境变量</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/introduction-to-dotenv-f2bdf93e4a1?source=collection_archive---------11-----------------------#2021-02-17">https://javascript.plainenglish.io/introduction-to-dotenv-f2bdf93e4a1?source=collection_archive---------11-----------------------#2021-02-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="6f5f" class="pw-subtitle-paragraph jl im in bd b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc dk translated">Dotenv简介</h2></div><figure class="ke kf kg kh gt ki gh gi paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="gh gi kd"><img src="../Images/9c738dd407587b4f68daa068f80dbf6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SCykpRR6RHkeibRTkslWGA.jpeg"/></div></div><figcaption class="kp kq gj gh gi kr ks bd b be z dk">Photo by <a class="ae kt" href="https://unsplash.com/@markusspiske?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae kt" href="https://unsplash.com/s/photos/locked-files?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="7045" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">介绍</h1><p id="4d5c" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">如果您以前使用过任何API，如Google Firebase、Twitter API、脸书API或任何其他需要某种身份验证的API，您就会知道保证密钥安全是非常重要的。因为有了这些密钥，有人可能会删除你的数据库或发送你不想发送的推文。</p><p id="92e5" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这就是为什么要开发<code class="fe mn mo mp mq b"><a class="ae kt" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank">dotenv</a></code>文件的原因。至少，这是其中的一个用例。它们本质上是一个文件，你可以在开发者之间共享，但不会推送到包含这些重要私钥的GitHub repo。</p><h1 id="889e" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">注意</h1><p id="7824" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">此时，也就是2021年，你可能正在使用NextJS、GatsbyJS、Create-React-App等框架。这些有时有他们自己的使用环境变量的方法，不需要dotenv。所以一定要检查你选择的框架的文档，看看使用dotenv是否是最好的选择。</p><p id="58e0" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">大多数框架的环境变量的工作方式与dotenv非常相似，所以这篇文章对那些开发人员仍然有用。</p><h1 id="c24b" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">安装DotEnv</h1><p id="8f6f" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">安装DotEnv就像1，2，3一样简单。有了NPM或纱，你可以像你期望的那样简单地安装它。</p><pre class="ke kf kg kh gt ms mq mt mu aw mv bi"><span id="1ec1" class="mw kv in mq b gy mx my l mz na">npm install dotenv</span></pre><p id="ea0d" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这比建立一个完整的框架要容易得多。让我们看看Dotenv文件在我们的应用程序中是如何工作的！</p><h1 id="25be" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">使用DotEnv</h1><p id="ef3c" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">我将不会使用任何API键来展示Dotenv文件的功能，而是在控制台中记录来自<code class="fe mn mo mp mq b">.env</code>的值。</p><p id="2805" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><code class="fe mn mo mp mq b">.env</code>文件的一个原则是它们只应该是本地的。生产服务器应该需要与本地机器不同的密钥，除非绝对必要，否则<strong class="lo io">永远不要</strong>将自己的<code class="fe mn mo mp mq b">.env</code>文件提交给版本控制。</p><p id="7839" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">一个<code class="fe mn mo mp mq b">.env</code>文件应该包含用于任何类型开发的本地键。从API键到简单的<code class="fe mn mo mp mq b">debug</code>标志。</p><p id="db30" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">要使用DotEnv文件，我们需要在项目的根目录下创建一个文件，文件扩展名为<code class="fe mn mo mp mq b">.env</code>。为此，我将创建<code class="fe mn mo mp mq b">process.env</code>。</p><pre class="ke kf kg kh gt ms mq mt mu aw mv bi"><span id="2f4c" class="mw kv in mq b gy mx my l mz na">PRIVATE_KEY=abc<br/>PUBLIC_KEY=xyz</span></pre><p id="959d" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是你将如何使用这个文件呢？或者至少是文件中的键。为此，我们需要导入并配置dotenv包。</p><pre class="ke kf kg kh gt ms mq mt mu aw mv bi"><span id="229c" class="mw kv in mq b gy mx my l mz na">require('dotenv').config()</span></pre><p id="28e9" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您应该在应用程序中尽早这样做。越早越好。如果您选择预加载密钥，则不必导入包。但稍后会详细介绍。</p><figure class="ke kf kg kh gt ki"><div class="bz fp l di"><div class="nb nc l"/></div></figure><p id="f744" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在你应该可以在任何需要的地方使用这些钥匙了。</p><p id="0e80" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">另外请注意，环境变量不应该被推送到GitHub或其他版本控制。它们应该包含您个人开发应用程序所需的密钥。</p><h1 id="142f" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">预加载</h1><p id="8309" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><a class="ae kt" href="http://$ node -r dotenv/config your_script.js" rel="noopener ugc nofollow" target="_blank">当使用<code class="fe mn mo mp mq b">import</code>代替<code class="fe mn mo mp mq b">require</code>时，预加载</a>是导入变量的首选方式。您可以使用节点的<code class="fe mn mo mp mq b">require</code>命令行选项来预载dotenv。</p><pre class="ke kf kg kh gt ms mq mt mu aw mv bi"><span id="098f" class="mw kv in mq b gy mx my l mz na">$ node -r dotenv/config your_script.js</span></pre><p id="d833" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您可以在<a class="ae kt" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank">dot NV</a>的NPM页面上了解更多信息。</p><h1 id="69bb" class="ku kv in bd kw kx ky kz la lb lc ld le ju lf jv lg jx lh jy li ka lj kb lk ll bi translated">结论</h1><p id="e7a3" class="pw-post-body-paragraph lm ln in lo b lp lq jp lr ls lt js lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">对任何开发人员来说，使用环境变量都是一件重要的事情。保持私钥的私密性对于保持安全性和将密钥远离那些可能不需要它们的人很有用。</p><p id="f104" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你不会把开发数据库API的钥匙给现在在前端工作的实习生吧？</p><p id="5b06" class="pw-post-body-paragraph lm ln in lo b lp mi jp lr ls mj js lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">无论如何，非常感谢你的阅读，祝你有一个美好的一天。</p></div></div>    
</body>
</html>
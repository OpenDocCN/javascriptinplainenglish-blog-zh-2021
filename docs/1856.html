<html>
<head>
<title>Build a News App with Next.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Next.js构建新闻应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-a-news-app-with-next-js-182e6287aee5?source=collection_archive---------5-----------------------#2021-04-19">https://javascript.plainenglish.io/build-a-news-app-with-next-js-182e6287aee5?source=collection_archive---------5-----------------------#2021-04-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/3761bdc7bcb0fc0c7adcb72267be54a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ybu9fEJ8EG4SY9JGpycwmA.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@thisisengineering?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">ThisisEngineering RAEng</a> on <a class="ae jz" href="https://unsplash.com/s/photos/coding-quotes?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b39d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在完成前一篇博客中的速成课程后，是时候用Next.js创建一个应用程序了。因此，我们将使用Next.js创建一个新闻应用程序，它将从新闻API中获取数据。</p><p id="c740" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，要创建一个Next.js应用程序，我们需要在任何文件夹中使用下面的命令。唯一的要求是，Node.js和npm应该安装在机器上。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="898b" class="lh li in ld b gy lj lk l ll lm">npx create-next-app next-news</span></pre><p id="b18d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，按照说明切换到新创建的文件夹。我也在VSCode中打开了这个项目。之后运行<code class="fe ln lo lp ld b">npm run dev</code>来启动项目。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lq"><img src="../Images/0038e5784893ac8207adaf98ae3243c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pEsUaqMZ-G8Ctb3J8DDAHg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">next app</figcaption></figure><p id="1ca8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，下一个应用程序将在<a class="ae jz" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>上启动，我们将使用这个默认页面。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/84253407898a52b977cd5dc2b11fbd87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jtHJQDjyFnkuVe7MlW-TIg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">localhost</figcaption></figure><p id="50c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该页面来自pages文件夹中的<strong class="kc io"> index.js </strong>文件。删除那里的所有内容，把下面的内容放进去。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f3a3" class="lh li in ld b gy lj lk l ll lm">import Head from 'next/head'<br/>import styles from '../styles/Home.module.css'</span><span id="0621" class="lh li in ld b gy ls lk l ll lm">export default function Home() {<br/>  return (<br/>    &lt;&gt;<br/>      &lt;h1&gt;Hello World&lt;/h1&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span></pre><p id="29ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在localhost中只显示了我们的标题和h1。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/1be80cb46072a53e931d3202ccca3329.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*coDPUTxUXOElixQTNz-OKg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Hello World</figcaption></figure><p id="e282" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将开始新的一页。因此，在<strong class="kc io"> pages </strong>文件夹中创建一个文件<strong class="kc io"> dom.js </strong>。这里，我们有一个简单的组件，显示了本月最佳开发人员的h1标记。</p><p id="05fd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，我们使用<strong class="kc io"> getServerSideProps </strong>来访问一个API端点，这是我使用JSON服务器创建的，用来获取数据。正如在早期的速成课程中一样，从NextJS应用程序获得道具并在同一个组件中获得访问权限是非常容易的。这里，我们从API中获取开发者，并在我们的组件中使用它。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="dfce" class="lh li in ld b gy lj lk l ll lm">const DOM = ({ developer }) =&gt; {<br/>    console.log(developer)</span><span id="3b6f" class="lh li in ld b gy ls lk l ll lm">return (<br/>        &lt;div className='page-container'&gt;<br/>            &lt;div&gt;<br/>                &lt;h1&gt;Developer of the month&lt;/h1&gt;<br/>            &lt;/div&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="8c7a" class="lh li in ld b gy ls lk l ll lm">export const getServerSideProps = async () =&gt; {<br/>    const apiResponse = await fetch(<br/>        'https://my-json-server.typicode.com/nabendu82/news-next/devOfMonth',<br/>    );<br/>    const developer = await apiResponse.json();</span><span id="6d63" class="lh li in ld b gy ls lk l ll lm">return {<br/>        props: {<br/>            developer,<br/>        },<br/>    };<br/>};</span><span id="33e3" class="lh li in ld b gy ls lk l ll lm">export default DOM</span></pre><p id="c0ff" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，使用<strong class="kc io"> My JSON server </strong>创建API端点非常简单。我们需要创建一个<strong class="kc io"> db.json </strong>并放入我们的任何GitHub repo。我已经把它放在新闻-下一个回购和下面是结构。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/48fc5e757b5652071aa621a74b7575ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*doe51bnoVXvCQja1Dsmo4w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">news-next</figcaption></figure><p id="e575" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，转到<a class="ae jz" href="http://localhost:3000/dom" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/DOM</a>并打开控制台，您将看到来自API端点的数据。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/c91bceb4efd9310a7bea084382cd8581.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C3Ix3CrajjzcOhOTMqSmdQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Developer</figcaption></figure><p id="9658" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将显示从api收到的信息。所以，在<strong class="kc io"> dom.js </strong>文件中，我们首先添加样式文件。在返回内容中，我们显示了名称、位置、图像和各种类的描述。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lu"><img src="../Images/c4b1d731d976a2a6a80d3e2631b3ab40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7t_taYnnaayIMH_bOvYXOw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">dom.js</figcaption></figure><p id="b2e9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在styles文件夹中添加<strong class="kc io"> Dom.module.css </strong>并在其中添加以下内容。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="9eef" class="lh li in ld b gy lj lk l ll lm">.main {<br/>    flex: 1;<br/>    display: flex;<br/>    align-items: center;<br/>    flex-direction: column;<br/>    margin-top: 50px;<br/>}</span><span id="fd5b" class="lh li in ld b gy ls lk l ll lm">.developerOfTheMonth {<br/>    text-align: center;<br/>}</span><span id="cf2a" class="lh li in ld b gy ls lk l ll lm">.developerOfTheMonth img {<br/>    width: 250px;<br/>    border-radius: 100%;<br/>}</span></pre><p id="d911" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另外，在<strong class="kc io">的底部添加下面的css。</strong></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="09b2" class="lh li in ld b gy lj lk l ll lm">.page-container {<br/>  display: flex;<br/>  height: 100vh;<br/>  flex-direction: column;<br/>}</span></pre><p id="1be8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们的DOM页面在localhost中如下所示。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/b2b3bc8b6f3daf874d90b5ab449cf1a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_lJir5o9b9F-1oJ2SdK9A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">localhost</figcaption></figure><p id="ca7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将为我们的应用程序创建一个导航栏。因此，在根目录下创建一个<strong class="kc io">组件</strong>文件夹，并在其中创建一个<strong class="kc io"> Navbar.js </strong>文件。把下面的内容放进去。</p><p id="a346" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里，我们从下一个路由器使用useRouter，然后使用它创建各种路由。点击不同的链接会进入不同的路径。最后一个onw是直接开我的twitter账号。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c8f8" class="lh li in ld b gy lj lk l ll lm">import { useRouter } from 'next/router';<br/>import styles from '../styles/Navbar.module.css';</span><span id="187f" class="lh li in ld b gy ls lk l ll lm">const Navbar = () =&gt; {<br/>    const router = useRouter();</span><span id="1508" class="lh li in ld b gy ls lk l ll lm">return (<br/>        &lt;div className={styles.main}&gt;<br/>            &lt;div onClick={() =&gt; router.push('/')}&gt;Home&lt;/div&gt;<br/>            &lt;div onClick={() =&gt; router.push('/feed/1')}&gt;Feed&lt;/div&gt;<br/>            &lt;div onClick={() =&gt; router.push('/dom')}&gt;DOM&lt;/div&gt;<br/>            &lt;div onClick={() =&gt; (window.location.href = 'https://twitter.com/nabendu82')}&gt;Twitter&lt;/div&gt;<br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="2089" class="lh li in ld b gy ls lk l ll lm">export default Navbar</span></pre><p id="df65" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在<strong class="kc io">样式</strong>文件夹的<strong class="kc io"> Navbar.module.css </strong>中为它创建样式。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f4d0" class="lh li in ld b gy lj lk l ll lm">.main {<br/>    width: 100%;<br/>    height: 50px;<br/>    display: flex;<br/>    justify-content: center;<br/>}</span><span id="16fe" class="lh li in ld b gy ls lk l ll lm">.main div {<br/>    margin: 25px;<br/>    cursor: pointer;<br/>}</span><span id="87f3" class="lh li in ld b gy ls lk l ll lm">.main div:hover {<br/>    color: rgb(168, 168, 168);<br/>}</span></pre><p id="dfb1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们需要在所有页面中使用这个导航条组件。所以，最好创建一个布局组件。因此，在<strong class="kc io">组件</strong>文件夹中创建一个文件<strong class="kc io"> Layout.js </strong>，并在其中添加以下内容。我们还采用了page-container的公共div，它封装了我们所有的页面。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="70f3" class="lh li in ld b gy lj lk l ll lm">import Navbar from "./Navbar"</span><span id="3e12" class="lh li in ld b gy ls lk l ll lm">const Layout = ({ children }) =&gt; {<br/>    return (<br/>        &lt;div className='page-container'&gt;<br/>            &lt;Navbar /&gt;<br/>            {children}   <br/>        &lt;/div&gt;<br/>    )<br/>}</span><span id="19bf" class="lh li in ld b gy ls lk l ll lm">export default Layout</span></pre><p id="e2c6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，有一个文件<strong class="kc io"> _app.js </strong>包装了我们所有的页面。因此，如果我们想在所有页面中实现一个通用布局，我们将使用它。我们已经用布局组件包装了组件。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="48fd" class="lh li in ld b gy lj lk l ll lm"><strong class="ld io">import Layout from '../components/Layout'</strong><br/>import '../styles/globals.css'</span><span id="45ba" class="lh li in ld b gy ls lk l ll lm">function MyApp({ Component, pageProps }) {<br/>  return (<br/>    <strong class="ld io">&lt;Layout&gt;</strong><br/>      &lt;Component {...pageProps} /&gt;<br/>    <strong class="ld io">&lt;/Layout&gt;</strong><br/>  )<br/>}</span><span id="e8a8" class="lh li in ld b gy ls lk l ll lm">export default MyApp</span></pre><p id="7e66" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将设置我们的主页。所以，转到<strong class="kc io"> index.js </strong>文件，用下面的内容修改它。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="e104" class="lh li in ld b gy lj lk l ll lm">import styles from '../styles/Home.module.css'</span><span id="b755" class="lh li in ld b gy ls lk l ll lm">export default function Home() {<br/>  return (<br/>      &lt;div className={styles.main}&gt;<br/>        &lt;h1 className={styles.title}&gt;&lt;span&gt;News&lt;/span&gt; App&lt;/h1&gt;<br/>        &lt;p className={styles.description}&gt;Your one stop shop for the latest news articles&lt;/p&gt;<br/>      &lt;/div&gt;<br/>  )<br/>}</span></pre><p id="58ce" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，用下面的内容替换<strong class="kc io"> Home.module.css </strong>的内容。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="7521" class="lh li in ld b gy lj lk l ll lm">.main {<br/>  flex: 1;<br/>  display: flex;<br/>  align-items: center;<br/>  flex-direction: column;<br/>  justify-content: center;<br/>}</span><span id="9039" class="lh li in ld b gy ls lk l ll lm">.title a,<br/>.title span {<br/>  color: #0070f3;<br/>  text-decoration: none;<br/>}</span><span id="5dc6" class="lh li in ld b gy ls lk l ll lm">.title {<br/>  margin: 0;<br/>  line-height: 1.15;<br/>  font-size: 4rem;<br/>}</span><span id="ab83" class="lh li in ld b gy ls lk l ll lm">.title,<br/>.description {<br/>  text-align: center;<br/>}</span><span id="4f3f" class="lh li in ld b gy ls lk l ll lm">.description {<br/>  line-height: 1.5;<br/>  font-size: 1.5rem;<br/>}</span></pre><p id="a69d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们的主页也完成了，如下图所示，带有可工作的导航栏。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/0b9390ffe5efeff7303b18f735c61937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6aVPgETNyg5690XIUUTPg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Home Page</figcaption></figure><p id="15f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">另外，从<strong class="kc io"> dom.js </strong>文件中删除带有<strong class="kc io">页面容器</strong>的div，因为我们已经将逻辑移到了<strong class="kc io"> Layout.js </strong>文件中。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lw"><img src="../Images/a12414fa2d530378b428667a10010b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjPRzVqYR-X7dT62Jweq9g.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">dom.js</figcaption></figure><p id="4e88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将在feed页面上工作，这是最重要的页面，因为它是一个新闻应用程序。</p><p id="4887" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，这个页面不同于其他页面，因为它根据一个参数而改变。因此，我们将在<strong class="kc io">页面</strong>文件夹中创建一个名为<strong class="kc io">提要</strong>的文件夹，而不是创建一个文件。我们将在其中创建一个新文件<strong class="kc io"> [id]。因为这些方括号，这是一条动态路线。</strong></p><p id="b10d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在把下面的内容放进去。在这里，在我们的提要中，我们将从api调用中获得<strong class="kc io">文章</strong>、<strong class="kc io">页码</strong>。现在，在<strong class="kc io"> getServerSideProps </strong>中，我们可以通过<strong class="kc io"> pageContext.query.id </strong>获得<strong class="kc io"> pageNumber </strong>，它只不过是url末尾的数字，就像<a class="ae jz" href="http://localhost:3000/feed/1" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/feed/1</a></p><p id="9972" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">首先我们检查<strong class="kc io">页码</strong>是否有效，将道具设为页码为1的空文章。</p><p id="db13" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，我们用我们的<strong class="kc io">页码</strong>对newsapi进行API调用。在新闻api中，我们还需要给出我们的私有API键，所以我们将通过一个环境变量来传递它。</p><p id="51bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与fetch一样，我们需要执行第二个await来获取数据，我们这样做，然后将数据赋给articles变量。之后我们归还道具。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="26d2" class="lh li in ld b gy lj lk l ll lm">export const Feed = ({ articles, pageNumber }) =&gt; {<br/>  console.log({ articles, pageNumber })<br/>  return (&lt;&gt;Hello World&lt;/&gt;)<br/>}</span><span id="018e" class="lh li in ld b gy ls lk l ll lm">export const getServerSideProps = async pageContext =&gt; {<br/>    const pageNumber = pageContext.query.id;</span><span id="30bc" class="lh li in ld b gy ls lk l ll lm">if (!pageNumber || pageNumber &lt; 1 || pageNumber &gt; 5) {<br/>        return {<br/>            props: {<br/>                articles: [],<br/>                pageNumber: 1,<br/>            },<br/>        };<br/>    }</span><span id="a1f5" class="lh li in ld b gy ls lk l ll lm">const apiResponse = await fetch(<br/>        `https://newsapi.org/v2/top-headlines?country=us&amp;pageSize=5&amp;page=${pageNumber}`,<br/>        {<br/>            headers: {<br/>                Authorization: `Bearer ${process.env.NEXT_PUBLIC_NEWS_KEY}`,<br/>            },<br/>        },<br/>    );<br/>    <br/>    const json = await apiResponse.json();<br/>    const { articles } = json;</span><span id="9215" class="lh li in ld b gy ls lk l ll lm">return {<br/>        props: {<br/>            articles,<br/>            pageNumber: Number.parseInt(pageNumber),<br/>        },<br/>    };<br/>};</span><span id="5242" class="lh li in ld b gy ls lk l ll lm">export default Feed;</span></pre><p id="6d71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，首先去newsapi.org注册。之后你可以通过点击<strong class="kc io">获取api密匙</strong>按钮来获取API密匙。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/4a6fa956c95274b406b4c2476d8fdec2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uMeJOg3TrPkz2oc7dp_kyg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Api keys</figcaption></figure><p id="b2f1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，转到<strong class="kc io">。gitignore </strong>文件并添加<strong class="kc io">。env </strong>文件，这样它就不会被添加到我们的github中。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lx"><img src="../Images/9348c9290977f9062769ff1ddee6a3b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlBpCOwmJet4h7z3V3RD1A.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">.gitignore</figcaption></figure><p id="a474" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，在根目录内创建<strong class="kc io">。env </strong>文件，并将您的api密钥放入其中。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ly"><img src="../Images/3f9000f5bdf793ca082875a0cb71d944.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lc-MOFvimfTqY3nZlTGOPQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">.env</figcaption></figure><p id="c0a2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，重新启动您的服务器并刷新本地主机，我们将看到来自newsapi的数据。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/c95a4cf5f8601c6e7fc4ba7c627b5ccd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFjMTt8C9xVEEDWU4b5SYA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">feed</figcaption></figure><p id="0eb1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将添加我们的html来显示文章。但在此之前，在<strong class="kc io">样式</strong>文件夹中的<strong class="kc io"> Feed.module.css </strong>中添加相同的样式。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="cc60" class="lh li in ld b gy lj lk l ll lm">.main {<br/>    display: flex;<br/>    margin-top: 50px;<br/>    align-items: center;<br/>    flex-direction: column;<br/>  }<br/>  .post {<br/>    width: 500px;<br/>    margin-bottom: 25px;<br/>    padding-bottom: 25px;<br/>    border-bottom: 1px solid black;<br/>  }<br/>  .post img {<br/>    width: 100%;<br/>  }<br/>  .post h1 {<br/>    font-size: 16px;<br/>    cursor: pointer;<br/>    text-align: center;<br/>  }<br/>  .paginator {<br/>    width: 100%;<br/>    display: flex;<br/>    justify-content: center;<br/>  }<br/>  .paginator div {<br/>    margin: 25px;<br/>  }<br/>  .paginator .active {<br/>    cursor: pointer;<br/>  }<br/>  .paginator .disabled {<br/>    cursor: not-allowed;<br/>    color: rgb(179, 179, 179);<br/>  }</span></pre><p id="8f69" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">回到<strong class="kc io">【id】。js </strong>文件，我们导入样式，然后在返回语句中。这里，我们在一个div中显示了文章标题、描述和图片。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lz"><img src="../Images/ac81f30831535c5f1882aecc6536e909.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gd9hoTZGrGzwl_aEzEb1qA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">[id].js</figcaption></figure><p id="9515" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，如果我们转到localhost中的feed页面，我们将会看到样式精美的新闻。点击健康热线，我们也将被带到原来网站上的新闻文章。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/90dff2e837ab0d86b6ca7b693f45bb96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lx56K0weX_xI25EDGn6iqw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">localhost</figcaption></figure><p id="e241" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们还想显示一个分页器，这样我们就可以转到我们的api正在获取的五个页面。因此，我们将在文章下面添加一个带有<strong class="kc io">分页器</strong>类的div。</p><p id="7516" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们也使用路由器在点击相应的div时推进到下一页或上一页。我们还禁用了第5页的<strong class="kc io">下一页</strong>和第1页的<strong class="kc io">上一页</strong>。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ma"><img src="../Images/0231578fe3c8176e4050813ddefdbf76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ub6CjOJmwieJDS57gyY_Ww.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">[id].js</figcaption></figure><p id="8f8c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们的分页器也工作正常，这就完成了我们的应用程序。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/c2755e1867a3911a94e8537e929e4fc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7YdJKquwnLLPHtd2rvcpXg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">App complete</figcaption></figure><p id="573b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，我们将通过vercel部署我们的应用程序，他们也是NextJS的创造者。但为此，我们需要将我们的项目推向github。</p><p id="7784" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在推送之前，我还在根目录下创建了一个<strong class="kc io"> db.json </strong>，并在其中添加了以下内容。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="074a" class="lh li in ld b gy lj lk l ll lm">{<br/>    "devOfMonth": {<br/>        "name": "TheWebDev",<br/>        "position": "Associate Architect",<br/>        "image": "https://pbs.twimg.com/profile_images/1020939891457241088/fcbu814K_400x400.jpg",<br/>        "description": "Front-end developer, Youtuber, Author, Tech Blogger"<br/>    }<br/>}</span></pre><p id="96cc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所以，推送到github后，我们还需要更新<strong class="kc io"> dom.js </strong>中的路径。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mb"><img src="../Images/5a4a64ee6e7df7eae132f09ea2d0c084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yUN-YVpEqcHGenvrez3TpA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">dom.js</figcaption></figure><p id="13b4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，去<a class="ae jz" href="https://vercel.com" rel="noopener ugc nofollow" target="_blank">https://vercel.com</a>注册你的github。在仪表板中，点击<strong class="kc io">新建项目</strong>按钮。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/f2d7639dca662f55b2f7b9bbc50f267e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_s45oRMpUGo0YTyjT81FpA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">vercel</figcaption></figure><p id="2fb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一页中，点击下拉菜单，然后<strong class="kc io">添加Github Org或Account </strong>链接。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/c7652347442b9c0c81b563dde52e770f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3wDewCDlTxyop97HG5vnlQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Add Github</figcaption></figure><p id="22e4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后会出现一个弹出窗口，在这里选择您的个人github帐户。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/5d0c263d69c4a64ffeaa0b78bb02b952.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sYKLJ6UzUZpfiG3md8Burw.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Personal account</figcaption></figure><p id="deb1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一个弹出窗口中，单击“Only select repositories”单选按钮，然后在“select repositories”中选择您放置该项目的存储库。</p><p id="e52f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">向下滚动并点击<strong class="kc io">安装</strong>按钮。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mc"><img src="../Images/0e4415b98e6bd6b1d284113aa7bafd3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DgWSaMt9VnsKVASmZttsA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Select repository</figcaption></figure><p id="88c2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，您将被带回到原始页面。在这里，您将看到存储库并点击<strong class="kc io">导入</strong>按钮。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/c00500e0f65c2ab5e993771b8106dc84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1CtAlB5YiVc7gKFTKz2hIg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Import</figcaption></figure><p id="94ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一页，选择个人帐户，因为它是免费的。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/b41db74234b918c8713a3db9a869912e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QDw6d8T59ocDA-ujiqKbWA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Personal account</figcaption></figure><p id="eb35" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在下一页中，单击环境变量并放置您的API键。之后点击<strong class="kc io">添加</strong>按钮，然后点击<strong class="kc io">展开</strong>按钮。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/7aa01edafe20e5f650abe9c482d7b49d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eUNm9inrxqISvjUm9kSN0Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">API keys</figcaption></figure><p id="3f93" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">之后，如果部署成功，您将进入此页面。点击<strong class="kc io">访问</strong>按钮。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi md"><img src="../Images/a37e27ba3d2153ed2f2e8cd45c10a0ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tqCjdJjogw4axh9b5uHOGA.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Visit</figcaption></figure><p id="b451" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们的应用程序已成功部署，运行良好。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/4fd4c531ad3450136f12da2248acaac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*tFDXDAEtGzMseNVdXe5AXg.gif"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Working fine</figcaption></figure><p id="ab05" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在这里找到这个项目的github。</p><p id="d105" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你也可以在我的YouTube频道上找到这个视频格式的帖子。相同的链接在下面。</p><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="me mf l"/></div></figure><p id="a40f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mg">更多内容尽在</em><a class="ae jz" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mg">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>The Path Module in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js中的路径模块</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/path-module-in-node-js-46a244a9e47b?source=collection_archive---------3-----------------------#2021-09-01">https://javascript.plainenglish.io/path-module-in-node-js-46a244a9e47b?source=collection_archive---------3-----------------------#2021-09-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/847ebfc278b890e11c8550c4379123f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X8CngwlbcPdcAGo8"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@heylagostechie?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Lagos Techie</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c5f1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Node.js中，path模块是一个处理路径和目录的内置模块。每个操作系统都有自己管理路径和相关操作的方式。例如，在Windows中，文件路径在目录之间用“\”表示，但在Linux中，文件路径在目录之间用“/”表示。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f2cd" class="lh li in ld b gy lj lk l ll lm">WINDOWS:<br/>C:\\user\sankalp\projects\file.txt</span><span id="e176" class="lh li in ld b gy ln lk l ll lm">LINUX:<br/>home/sankalp/projects/file.txt</span></pre><p id="b054" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了使路径平台独立，Node.js有一个模块叫做<em class="lo"> path。使用这个路径模块，我们可以避免任何不一致。我们可能需要使用内置的路径模块:</em></p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="8a16" class="lh li in ld b gy lj lk l ll lm">const path = require('path')</span></pre><p id="383d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">path模块中有许多函数，在处理项目时，这些函数对处理文件或目录的路径非常有帮助。那么让我们来理解一下path模块中一些最重要的函数。</p><p id="89bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.normalize() </strong>:当我们使用任何文件、目录甚至URL路由的路径时，我们希望路径具有任何操作系统都能理解的正确结构。这就是path.normalize()方法的作用。它接受一个字符串作为参数，并通过修正斜杠('/')来修正路径结构，解析".", ".."并且还可以删除作为字符串传递的路径中的重复斜杠</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="561d" class="lh li in ld b gy lj lk l ll lm">const filePath = ".//src//server"<br/>const fixedFilePath  = path.normalize(filePath)<br/>console.log(fixedFilePath);</span><span id="5ce3" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">src/server</strong></span><span id="44e4" class="lh li in ld b gy ln lk l ll lm">const filePath = "src/server/.."; <em class="lo">// .. means one directory up</em><br/>const resolvedPath = path.normalize(filePath);<br/>console.log(resolvedPath);</span><span id="4997" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">src</strong></span><span id="cb98" class="lh li in ld b gy ln lk l ll lm">const myUrl = "www.google.com//images";<br/>const fixedUrl = path.normalize(myUrl);<br/>console.log(fixedUrl);</span><span id="2e91" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">www.google.com/images</strong></span></pre><p id="b6cd" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.basename(): </strong></p><p id="1c19" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">顾名思义，basename方法返回路径的最后一个名称。它既可以返回文件名(如果它存在)，也可以返回目录名。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="aee3" class="lh li in ld b gy lj lk l ll lm">const filePath = path.basename("./src/server/index.js");</span><span id="d05f" class="lh li in ld b gy ln lk l ll lm">console.log(filePath);</span><span id="46f4" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">index.js</strong></span></pre><p id="eec0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果我们将文件扩展名作为另一个参数传递给basename()，它将从文件名中排除它</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="78a6" class="lh li in ld b gy lj lk l ll lm">const filePath = path.basename("./src/server/index.js", ".js");</span><span id="1d05" class="lh li in ld b gy ln lk l ll lm">console.log(filePath);</span><span id="d783" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">index</strong></span></pre><p id="7b77" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.dirname(): </strong></p><p id="5b9b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个方法返回一个路径的目录名。如果路径末尾有一个目录，那么它将返回路径的最后一个目录所在的名称目录。对于文件，同样的条件也适用。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3cc1" class="lh li in ld b gy lj lk l ll lm">const filePath = path.dirname("./src/server/index.js");<br/>console.log(filePath);</span><span id="15b6" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">./src/server</strong></span><span id="b31a" class="lh li in ld b gy ln lk l ll lm">const dirPath = path.dirname("./src/server");<br/>console.log(dirPath);</span><span id="b9b1" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/src</strong></span></pre><p id="e9b3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.extname(): </strong></p><p id="2f6c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此方法返回文件的扩展名。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="f4ce" class="lh li in ld b gy lj lk l ll lm">const filePath = path.extname("./src/server/index.js");<br/>console.log(filePath);</span><span id="d8b6" class="lh li in ld b gy ln lk l ll lm">//OUTPUT:<br/><strong class="ld io">.js</strong></span></pre><p id="2df6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.resolve() </strong></p><p id="0ecf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个方法用于获取任何文件的绝对路径。这是最有用的方法之一，可以帮助你获得一个文件的绝对路径。假设您正在一个项目中工作，并且有一个绝对文件路径。如果另一个人在他的系统中克隆了你的项目，那么这个路径就不是他系统中的绝对路径。此问题通过path.resolve方法解决。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="085e" class="lh li in ld b gy lj lk l ll lm">const absPath = path.resolve("./src/server/index.js");<br/>console.log(absPath);</span><span id="85fe" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/home/sankalp/pathLearn/src/server/index.js</strong></span></pre><p id="1d34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们向它传递两个参数时，它将通过追加返回完整的绝对路径。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b127" class="lh li in ld b gy lj lk l ll lm">const absPath = path.resolve("./src/server", "app.js");<br/>console.log(absPath);</span><span id="4970" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/home/sankalp/pathLearn/src/server/app.js</strong></span></pre><p id="8d37" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您在path.resolve()的参数中传递多个路径，它将解析最后一个路径，如果您传递除path之外的任何内容，它将只追加它。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="c63a" class="lh li in ld b gy lj lk l ll lm">console.log(path.resolve("/one", "two", "three"));</span><span id="a9ee" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/one/two/three</strong></span><span id="ee92" class="lh li in ld b gy ln lk l ll lm">console.log(path.resolve("/one", "/two", "/three"));</span><span id="1b89" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/three</strong></span></pre><p id="7c34" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> path.join() </strong></p><p id="9015" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">该方法执行两项任务。一个是它连接了所有的参数，另一个是它也规范了路径。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3cce" class="lh li in ld b gy lj lk l ll lm">const filePath = path.join("src", "server", "//index.js");<br/>console.log(filePath);</span><span id="2bf9" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">src/server/index.js</strong></span></pre><p id="8ff3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="lo"> __dirname </em> : </strong>这不是path模块的一部分，但是告诉你在其中执行这个的文件的绝对路径。它是一个模块化的<a class="ae jz" href="https://www.section.io/engineering-education/nodejs-environment-variables/" rel="noopener ugc nofollow" target="_blank">环境变量</a>。当你在项目中处理路径名时，这是非常有用的。</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b4e2" class="lh li in ld b gy lj lk l ll lm">console.log(__dirname);</span><span id="21d0" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/home/sankalp/pathLearn/src/server</strong></span></pre><p id="e6ae" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我的<em class="lo"> index.js </em>文件在服务器内部，所以当我执行<em class="lo"> index.js </em>时，输出是<em class="lo"> index.js </em>的绝对路径</p><p id="fd3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">注:</strong></p><p id="f040" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">__dirname可用于获取项目中任何文件的绝对路径，方法是使用path.join()将其组合起来</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/31914fc79efd1717bb326daefa6212a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*gJqY_oxSVrh4eqyb2JRmkg.png"/></div></figure><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="59c7" class="lh li in ld b gy lj lk l ll lm">console.log(path.join(__dirname, "../public/inside.txt"));</span><span id="3b05" class="lh li in ld b gy ln lk l ll lm">//OUTPUT<br/><strong class="ld io">/home/sankalp/pathLearn/src/public/inside.txt</strong></span></pre><p id="f4f1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lo">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="lo">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
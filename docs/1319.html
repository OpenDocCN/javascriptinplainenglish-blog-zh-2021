<html>
<head>
<title>Build fast and production ready apps with React and AWS Amplify</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React和AWS Amplify构建快速的生产就绪型应用</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/build-fast-and-production-ready-apps-with-react-and-aws-amplify-48a97b5e3bed?source=collection_archive---------0-----------------------#2021-03-20">https://javascript.plainenglish.io/build-fast-and-production-ready-apps-with-react-and-aws-amplify-48a97b5e3bed?source=collection_archive---------0-----------------------#2021-03-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/eb3039e6d994256a2bcde0489f631bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uq_VDTsSINuOaAXGB8b09Q.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">AWS Amplify</figcaption></figure><p id="1b76" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">不久前，我为我在大学的朋友为学生开发者俱乐部做了一个<a class="ae kx" href="https://www.linkedin.com/posts/yashgarudkar_developerstudentclubs-reactjs-activity-6764391339435077632-CU3i" rel="noopener ugc nofollow" target="_blank">会议</a>(你可以在这里观看会议<a class="ae kx" href="https://www.youtube.com/watch?v=17RqzuFhogg" rel="noopener ugc nofollow" target="_blank">)。我们陷入其中的话题是针对初学者的反应。在会议快结束时，我用React构建了一个Todo应用程序，并使用React的状态来管理Todo。</a></p><p id="3ad4" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我想如果我的an Amplify应用程序可以使用相同的前端代码会怎么样！？所以我开始阅读Amplify的文档，并请一位经验丰富的朋友分享一些关于这个主题的信息。</p><p id="3c67" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">所以…让我们开始，并建立应用程序。我建议你们在阅读这篇文章时进行编码。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="9fce" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">什么是放大？</h1><p id="ecc1" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">Amplify是一个开源框架，它放大了CLI、库和UI组件，以构建fullstackk iOS、Android、Flutter、Web和React应用程序。它提供api、auth、函数等。满足任何应用的需求。</p><p id="8bd8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">Amplify Console是一个AWS服务，它提供了一个基于git的工作流，用于全栈web应用的持续部署和托管。</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="e785" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">我们将建造什么</h2><p id="14d1" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">我们将建立一个完整的堆栈应用程序，您可以在其中添加和删除任务。我们将使用GraphQL来构建我们的应用程序。最后，我们将使用来自AWS Amplify的Auth，仅用两行代码为我们的应用程序提供登录功能。</p><h2 id="d2ad" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">先决条件</h2><p id="2746" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">确保在您的机器、git和您最喜欢的IDE上安装了node和npm来编写代码。我将使用Visual Studio代码。你还可以在这里创建或登录<a class="ae kx" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank">一个AWS账户。</a></p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/23c7775d6bdf2746508c54c344cbf81c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*uTEuOX9DkyvFCy7FhNTqQg.gif"/></div></figure><h1 id="da8d" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated"><strong class="ak">第一步。安装和配置Amplify CLI </strong></h1><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="8529" class="mi lg in nf b gy nj nk l nl nm">npm install -g @aws-amplify/cli</span></pre><p id="e96e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这将全局安装Amplify CLI。</p><p id="2d8c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在使用以下方式登录:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="51f4" class="mi lg in nf b gy nj nk l nl nm">amplify configure</span></pre><p id="ff21" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">它会要求您登录AWS控制台。登录后，Amplify会要求您创建一个IAM用户。IAM使您能够创建可以在AWS中管理用户和用户权限的配置文件。</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="4297" class="mi lg in nf b gy nj nk l nl nm">Specify the AWS Region <br/>? region:  # Your preferred region<br/>Specify the username of the new IAM user: <br/>? user name:  # User name for Amplify IAM user <br/>Complete the user creation using the AWS console</span></pre><p id="08ef" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用<strong class="kb io"><em class="nn">administrator access</em></strong>创建一个新用户，它将允许您使用AWS资源。这将添加到用户创建的设置用户权限阶段。</p><p id="400a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">创建用户后，amplify CLI将要求您提供accessKeyId和secretAccessKey，以将Amplify CLI与您的新IAM用户连接起来，如下所示:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="e00d" class="mi lg in nf b gy nj nk l nl nm">Enter the access key of the newly created user:<br/>? accessKeyId:  # YOUR_ACCESS_KEY<br/>? secretAccessKey:  # YOUR_SECRET_ACCESS_KEY<br/>This would update/create the AWS Profile in your local machine<br/>? Profile Name:  # [default]</span><span id="a0a1" class="mi lg in nf b gy no nk l nl nm">Successfully set up the new user.</span></pre><h1 id="0cc3" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">第二步。创建我们的React应用</h1><p id="8c47" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">在这一步中，我们将创建React应用程序。请记住，我们还没有添加任何放大配置到我们的应用程序。在最后一步中，我们在本地机器上配置了用户。</p><p id="cb43" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们使用create-react-app创建一个React应用程序</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="92e3" class="mi lg in nf b gy nj nk l nl nm">npx create-react-app amplify-todo-app<br/>cd amplify-todo-app</span></pre><p id="3153" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们有了一个React前端应用程序，我们可以开始用Amplify构建我们的后端。确保使用上面的命令“cd”进入React应用程序根目录。</p><p id="50d5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">让我们在项目根目录中初始化放大器</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="b73a" class="mi lg in nf b gy nj nk l nl nm">amplify init</span></pre><p id="0708" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，让我们告诉amplify我们将要开发的应用程序！</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="0123" class="mi lg in nf b gy nj nk l nl nm">Enter a name for the project (react-amplified)  <br/>Choose your default editor  (vs code)<br/>Choose the type of app that you're building (javascript)  <br/>What JavaScript framework are you using (react) <br/>Source directory path (src)  <br/>Distribution directory path (build)  <br/>Build command (npm run build) <br/>Start command (npm start)  <br/>Do you want to use an AWS profile</span></pre><p id="5ac8" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在最后一步中，选择您之前创建的IAM用户。</p><p id="2106" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在，我们已经为使用AWS Amplify的应用程序添加了配置。新的Amplify项目初始化后，会发生以下情况:</p><ol class=""><li id="8478" class="np nq in kb b kc kd kg kh kk nr ko ns ks nt kw nu nv nw nx bi translated">一个名为<strong class="kb io"> amplify </strong>的目录包含了我们应用程序的后端定义。这是我们将添加GraphQL API和认证的地方。随着我们添加功能，amplify文件夹将会更新代码模板，这将有助于我们集成前端和后端API。</li><li id="dd34" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated">在<strong class="kb io"> src </strong>目录下创建了一个名为<strong class="kb io"> aws-exports.js </strong>的文件，这个文件保存了我们用Amplify创建的服务的所有配置。这就是我们的客户端React应用程序将如何在AWS Amplify上获取有关后端的必要信息。</li><li id="9a9b" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated">的。gitignore也将随着新特性的增加而更新，这些新特性不需要在库中。</li><li id="a7ba" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated">在AWS Amplify控制台中为这个项目创建了一个云项目。</li></ol><h1 id="8a69" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">第三步。向我们的React应用程序添加代码</h1><p id="f4f3" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">在React应用程序中安装放大器库:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="92ba" class="mi lg in nf b gy nj nk l nl nm">npm install aws-amplify @aws-amplify/ui-react</span></pre><p id="c045" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">aws-amplify是用于与后端交互的主要库。@aws-amplify/ui-react是一个为react提供预建ui组件的库。</p><h2 id="1082" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">打开src/index.js，并将以下导入添加到文件的顶部。</h2><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="bf36" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">瞧啊。这就是现在构建前端所需的所有配置。<strong class="kb io"> aws-exports.js </strong>会自动更新。</p><p id="6747" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">既然配置部分已经完成。让我们添加一个后端GraphQL和数据库。最好的部分是，我们需要做的就是从CLI添加api，amplify会自动将DynamoDB数据库添加到后端。</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="2c43" class="mi lg in nf b gy nj nk l nl nm">amplify add api</span></pre><p id="c1d7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">按照命令行中的提示接受默认值—</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="1143" class="mi lg in nf b gy nj nk l nl nm">? Please select from one of the below mentioned services: # GraphQL </span><span id="1206" class="mi lg in nf b gy no nk l nl nm">? Provide API name: # todo-api</span><span id="2f3d" class="mi lg in nf b gy no nk l nl nm">? Choose the default authorization type for the API: # API Key</span><span id="0364" class="mi lg in nf b gy no nk l nl nm">? Enter a description for the API key: # lorem</span><span id="db73" class="mi lg in nf b gy no nk l nl nm">? After how many days from now the API key should expire: # 365(or any number of days you want)</span><span id="235e" class="mi lg in nf b gy no nk l nl nm">? Do you want to configure advanced settings for the GraphQL API:<br/># No </span><span id="8d44" class="mi lg in nf b gy no nk l nl nm">? Do you have an annotated GraphQL schema? # No </span><span id="674c" class="mi lg in nf b gy no nk l nl nm">? Choose a schema template: # Single object with fields (e.g., “Todo” with ID, name, description) </span><span id="738b" class="mi lg in nf b gy no nk l nl nm">? Do you want to edit the schema now? # Yes</span></pre><p id="8413" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在最后一个提示中选择yes之后—<strong class="kb io">amplify/back end/API/myapi/schema . graph QL</strong>应该会在VS代码或者之前选择的IDE中打开。</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="7a03" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在让我们看看上面的GraphQL模式。</p><p id="cfad" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有一个指令<strong class="kb io"> Todo </strong>(类型)，它是GraphQL的一部分。用<strong class="kb io"> @model </strong>指令修饰的类型将为该类型搭建数据库表。CRUD和操作列表的模式以及GraphQL解析器需要使一切工作。</p><p id="6e1c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">有三个字段id、名称和描述。所有这些都是模型中必需的，name将用作todo的名称——任务名称和描述是我们将添加与任务相关的数据的地方。</p><p id="6df3" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">目前给出的模式非常好，因为我们正在构建Todo应用程序。因此，让我们继续部署API。</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="a685" class="mi lg in nf b gy nj nk l nl nm">amplify push</span><span id="bda9" class="mi lg in nf b gy no nk l nl nm">? Are you sure you want to continue? Y  <br/>? Do you want to generate code for your newly created GraphQL API? Y ? Choose the code generation language target: javascript <br/>? Enter the file name pattern of graphql queries, mutations and subscriptions: src/graphql/**/*.js<br/>? Do you want to generate/update all possible GraphQL operations - queries, mutations and subscriptions? Y <br/>? Enter maximum statement depth [increase from default if your schema is deeply nested]: 2</span></pre><p id="6e6a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">API现在应该是活动的，我们可以与之交互。</p><p id="13b5" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在打开我们的根React文件夹<strong class="kb io"> src/App.js — </strong>中的文件</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="od oe l"/></div></figure><h2 id="74fe" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">代码演练—</h2><ol class=""><li id="ff8b" class="np nq in kb b kc md kg me kk of ko og ks oh kw nu nv nw nx bi translated"><strong class="kb io"> fetchTodos </strong>:这是一个异步函数，将为数据库中的Todos调用api和setState。</li><li id="1aa7" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io"> useEffect(): </strong>一个React钩子，我们已经在componentMount上使用了它，并调用了<strong class="kb io"> fetchTodos() </strong>，所以组件一挂载，列表就保存在状态中。</li><li id="2a23" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io"> handleChange: </strong>这是一个用于设置当前表单状态的更改函数，每次用户在应用中做任何更改时都会更新。</li><li id="614d" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io"> handleSubmit: </strong>它将在提交表单时被调用，try块将被执行，以使用GraphQL将任务添加到数据库中。如果<strong class="kb io"> try </strong>模块失败<strong class="kb io"> catch </strong>模块将控制错误。添加任务后，调用<strong class="kb io"> fetchTodos </strong>函数，并在Todos状态下更新列表数组。</li><li id="fd10" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io"> handleDelete: </strong>为了从后端数据库中删除某个待办事项，该函数将获取该待办事项的id并将其删除。</li><li id="481b" class="np nq in kb b kc ny kg nz kk oa ko ob ks oc kw nu nv nw nx bi translated"><strong class="kb io">返回(在app函数中):</strong>会返回在浏览器中查看我们的App所需的jsx。</li></ol><h2 id="41c9" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">应用程序现在已经准备好了！让我们使用CSS在。/App.css</h2><p id="502e" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">确保删除App.css文件中的所有样板css，然后将以下代码添加到该文件中:</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="od oe l"/></div></figure><h1 id="28c6" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">第四步。运行和测试我们的应用</h1><p id="bd5f" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">表演时间到了！现在，在root React app目录中运行以下命令，在浏览器中运行app:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="7da5" class="mi lg in nf b gy nj nk l nl nm">npm start</span></pre><p id="99ba" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这将启动本地服务器，应用程序将在默认浏览器上启动。</p><p id="ba38" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是你应该能在浏览器中看到的—</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oi"><img src="../Images/dc27956bfec1cefada3b980c038a9f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*osTFBFLDXMHzhwBv0DPUrQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Todo app initial state</figcaption></figure><p id="9b76" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在添加一个带有一些描述的任务，看看它是否被添加到表单下面。</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi oj"><img src="../Images/0da0278207e083d5f78c4d435e905c3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eX1_s9zCRH1Pld89GDVR9w.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Added task!</figcaption></figure><p id="bd6c" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">最后，通过单击delete按钮尝试删除该任务。应该没问题。</p><h1 id="86d9" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">第五步。向应用程序添加身份验证</h1><p id="5d36" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">在根文件夹中，我们将使用CLI运行以下命令，将auth添加到后端服务:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="087a" class="mi lg in nf b gy nj nk l nl nm">amplify add auth</span><span id="0217" class="mi lg in nf b gy no nk l nl nm">? Do you want to use the default authentication and security configuration? Default configuration<br/>? How do you want users to be able to sign in? Username<br/>? Do you want to configure advanced settings?  No, I am done.</span><span id="10f0" class="mi lg in nf b gy no nk l nl nm">## now deploy the service run the push command<br/>amplify push</span></pre><p id="a832" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">使用登录UI组件更新React应用程序:</p><p id="1300" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是向应用程序添加auth的最好和最快的方法之一。</p><p id="e5fc" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">向我们的应用程序添加auth只需要2行代码。只需用Authenticator从<a class="ae kx" href="https://gist.github.com/yashgkar/29392c3c606a42f732eac5d447c253ad" rel="noopener ugc nofollow" target="_blank"><strong class="kb io">' @ AWS-amplify/ui-react '</strong></a>导入，用它包裹主组件即可。</p><figure class="mv mw mx my gt jo"><div class="bz fp l di"><div class="od oe l"/></div></figure><p id="75cb" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">运行应用程序以查看保护应用程序的新授权流:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="60d3" class="mi lg in nf b gy nj nk l nl nm">npm start</span></pre><p id="3c28" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在我们应该看到登录表单并创建一个新帐户。Auth有30多种方法来控制用户授权流的各个方面。</p><p id="4d62" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这是我们现在将在本地React服务器上的浏览器中看到的内容:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ok"><img src="../Images/82e8646c4c4748706b745c7834885aa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ukw07hcBzcSU-VuWPAb5vg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Auth component</figcaption></figure><p id="2d74" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">现在创建一个帐户并输入OTP。这将使您登录应用程序:</p><figure class="mv mw mx my gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ol"><img src="../Images/96501363a498aba5044ca09d6df9b88c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EW_XR_xzSBQIw26Zm975AQ.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">UI after login</figcaption></figure><h1 id="44d7" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">第六步。托管<strong class="ak">应用</strong></h1><p id="cef6" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">本节将帮助您将应用程序部署到服务器并与其他人共享！</p><p id="dbd7" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">从root运行以下命令，并选择下面给出的选项:</p><pre class="mv mw mx my gt ne nf ng nh aw ni bi"><span id="3888" class="mi lg in nf b gy nj nk l nl nm">amplify add hosting</span><span id="a929" class="mi lg in nf b gy no nk l nl nm">? Select the plugin module to execute: # Hosting with Amplify Console<br/>? Choose a type: # Manual Deployment</span><span id="4fd7" class="mi lg in nf b gy no nk l nl nm">amplify publish</span></pre><figure class="mv mw mx my gt jo gh gi paragraph-image"><div class="gh gi om"><img src="../Images/ac9f04063b33b55ac37644c14796aec0.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/1*avlxzlEFPYduP6OC1i-2ow.gif"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Thats it!</figcaption></figure><h1 id="fee5" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">就是这样！</h1><p id="b04c" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">点击发布后，React的构建将被推送到amplify cloud，应用程序的链接将在命令行中记录。</p><h1 id="e6e9" class="lf lg in bd lh li mz lk ll lm na lo lp lq nb ls lt lu nc lw lx ly nd ma mb mc bi translated">结论</h1><p id="7716" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">Amplify是一个很棒的库，与AWS一起工作，它成为一个强大的工具，可以用各种框架构建全栈应用程序，就像我们在React中所做的那样。授权、功能、托管等特性。让我们专注于我们想要构建的产品，而不是从头开始写。通过编写最少的代码，我们可以构建更快更高效的应用程序。</p><p id="375e" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">我希望这篇文章有助于你决定在下一个项目中采用哪种技术。</p><p id="8103" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">如果你有建议，请在评论区告诉我🙋‍♂️</p><p id="585b" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">谢谢大家！🖤</p><p id="878a" class="pw-post-body-paragraph jz ka in kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated"><strong class="kb io">GitHub</strong>T3】本文回购:【https://github.com/yashgkar/amplify-react-todo】T5</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h2 id="e2c1" class="mi lg in bd lh mj mk dn ll ml mm dp lp kk mn mo lt ko mp mq lx ks mr ms mb mt bi translated">喜欢我的作品吗？给我买杯咖啡怎么样？😉</h2></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="b901" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">与我联系</h1><p id="87b1" class="pw-post-body-paragraph jz ka in kb b kc md ke kf kg me ki kj kk mf km kn ko mg kq kr ks mh ku kv kw ig bi translated">GitHub:<a class="ae kx" href="https://github.com/yashgkar" rel="noopener ugc nofollow" target="_blank">https://github.com/yashgkar</a><br/>领英:<a class="ae kx" href="https://www.linkedin.com/in/yashgarudkar/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/yashgarudkar/</a><br/>推特:<a class="ae kx" href="https://twitter.com/codeitachi" rel="noopener ugc nofollow" target="_blank">https://twitter.com/codeitachi</a></p></div></div>    
</body>
</html>
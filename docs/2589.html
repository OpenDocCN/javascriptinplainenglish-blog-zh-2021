<html>
<head>
<title>How to Set Up React-Table Using Dynamic Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用动态数据建立反应表</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-react-table-using-dynamic-data-1d2b6f555a9a?source=collection_archive---------4-----------------------#2021-05-28">https://javascript.plainenglish.io/how-to-set-up-react-table-using-dynamic-data-1d2b6f555a9a?source=collection_archive---------4-----------------------#2021-05-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8d99" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">欢迎来到灵活、可组合和轻量级表格的无头世界——介绍TanStack的React Table。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/3c3e490bf08d4e5d9dead9912ba0ee74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zBxQ5nXjWhkHK4lN"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@abelycosta?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Abel Y Costa</a> on <a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="dc8a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl"> ( </em> <strong class="jp ir"> <em class="kl">披露:</em> </strong> <em class="kl">本文底部包含一个代销商链接，我可能会通过BlueHost获得一小笔佣金，如果您选择通过我的链接购买，则无需额外费用)。</em></p><h1 id="b315" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">我们开始吧</h1><p id="d6c6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">假设您正在构建一个React应用程序，使用美国地质调查局(USGS)API实时跟踪全球地震。</p><p id="ed7e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个API返回给我们过去一个小时的地震列表——所有地震的震级从0到7不等。</p><p id="fe2c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们的目标是将这些地震整齐地呈现在一个表格中，按照<strong class="jp ir">震级</strong>、<strong class="jp ir">地点</strong>、<strong class="jp ir">时间</strong>和<strong class="jp ir">海啸预警</strong>、<em class="kl">(耶)</em>进行分类。</p><p id="8da6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我不会在这里深入讨论架构细节，但让我们假设我们有一个<code class="fe mg mh mi mj b">server.js</code>文件，它每小时进行一次节点获取，并使用<strong class="jp ir"> Socket.io </strong> <em class="kl">(只是为了让您知道我们如何传递数据)</em> <strong class="jp ir"> <em class="kl"> : </em> </strong>将数据发送到前端</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="8246" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然我们正在与React一起工作，React自然地加强了模块化——这也是一种良好的可伸缩性实践，我们可能会有一个看起来像这样的<code class="fe mg mh mi mj b">feed.js</code>组件:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="e260" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第20行，我们返回了代表我们将使用的实际表格的<code class="fe mg mh mi mj b">&lt;Table /&gt;</code>组件——我们向其传递了两个属性:实际的<strong class="jp ir">地震数据</strong>和表格列的<strong class="jp ir">标签</strong>,作为数组传递。</p><p id="7776" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">因为我们希望保持组件的可重用性，所以我们尽可能保持它们的通用性——这样，我们就可以一次又一次地使用它们，而不必重新发明轮子。 我们可以将这个表格组件归类为可重用的，因为我们已经标记了我们的两个道具<code class="fe mg mh mi mj b">data</code>和<code class="fe mg mh mi mj b">col_labels</code>，因此<em class="kl">减少了</em>进入组件的<strong class="jp ir">类型数据</strong>的特异性。</p><p id="ae93" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，在我们的<code class="fe mg mh mi mj b">table.js</code>中，我们使用箭头函数语法创建一个组件，并将组件命名为<code class="fe mg mh mi mj b">Table</code>，如下所示:</p><p id="270b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mg mh mi mj b">const Table = (props) =&gt; {...}</code></p><p id="9914" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个组件现在将接收我们从<code class="fe mg mh mi mj b">feed.js</code>传入的2个道具(<strong class="jp ir">数据</strong> &amp; <strong class="jp ir">标签</strong>)。在我们的<strong class="jp ir">表</strong>组件中，我们循环传入的数据，并准备我们的列来填充它们相应的数据:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="ee91" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">到目前为止很简单！</strong> <em class="kl">(在第1行，我们将我们的表数据设置为</em> <code class="fe mg mh mi mj b"><em class="kl">null</em></code> <em class="kl">以便为我们从套接字事件接收的每一个新的数据批清除我们的表数据，但是我们也可以将initialState选项传递给我们的表钩子)。</em></p><p id="bd2e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">然后，我们进入下一步——设置我们的<strong class="jp ir">列标题</strong>:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="de30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第2行，我们使用<code class="fe mg mh mi mj b">useMemo</code>钩子来包装我们的函数，因为我们只希望我们的列被设置一次——只要<code class="fe mg mh mi mj b">col_labels</code>道具不变。这个钩子可以让我们指令反应——“嘿，如果新的道具是一样的，跳过下一个重新渲染”。</p><p id="46db" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我不会详细讲解钩子，但是对于那些刚接触过React Hooks的人来说，这可能会派上用场。<strong class="jp ir">反应神可以跳过这一段。</strong>当DOM被更新时，React会首先渲染组件。之后，它会将渲染结果与之前的渲染结果进行比较，如果结果不同，则React会更新DOM并重新渲染组件。<code class="fe mg mh mi mj b">useMemo</code>使用一种叫做<strong class="jp ir">记忆化的</strong>结果的东西——简单来说，这意味着只有当函数的一个依赖关系改变时，我们才重新计算包装在函数中的值。<strong class="jp ir">这就是为什么我们在第9行看到一个空数组——因为我们本质上是在告诉反应，因为我没有在这个数组中传递任何依赖关系，所以不要重新计算这些值……因此给我们的应用程序带来了一点性能提升。</strong></p><p id="b509" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在第5行和第6行</strong>中，我们基本上是应用道具中的列标签，并为我们的<strong class="jp ir">访问器</strong>在单词<code class="fe mg mh mi mj b">col</code>后面添加一个索引号，这样它就可以访问我们的列数据，比如:<code class="fe mg mh mi mj b">col0</code>、<code class="fe mg mh mi mj b">col1</code>、<code class="fe mg mh mi mj b">col2</code> …等等。</p><p id="f9f0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> <em class="kl">现在，既然我们已经排除了这个可能性，让我们来看看下一步:</em> </strong></p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="0dae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我们利用了由团队在React Table提供给我们的定制<code class="fe mg mh mi mj b">useTable</code>钩子，并传递了两个选项<code class="fe mg mh mi mj b">columns</code>和<code class="fe mg mh mi mj b">table</code>，这将让我们开始。</p><p id="8247" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在做了一些去结构化之后，我们像这样返回我们的表:</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><h1 id="619c" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">就是这样！</h1><h1 id="67a6" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak"> <em class="mm">完整代码如下:</em> </strong></h1><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="mk ml l"/></div></figure><p id="b7f9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">我们漂亮但没有风格的桌子可能看起来像这样:</strong></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div class="gh gi mn"><img src="../Images/58b6a08a04a504609f1762fa981a6147.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*drePLAeXvAcsesqIZ5s_BQ.png"/></div></figure><p id="16cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然这是一个web应用程序，我们可能会使用传统的部署平台之一来交付这个产品，但如果我们正在构建一个网站，并且需要一个可靠且可扩展的托管解决方案，我会考虑使用<a class="ae lc" href="https://www.anrdoezrs.net/click-100417643-11768802" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> BlueHost </strong> </a>。他们提供各种托管计划，以满足您的特定需求。</p><h1 id="32c4" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated">总之:</h1><p id="e44d" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated">我们仍然需要使用像<strong class="jp ir"> Moment.js </strong>这样的库来格式化我们的时间，为这个表添加一些基本样式&amp;悬停动画来看起来功能就绪。</p><p id="b19b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们还需要一个工具栏来排序，过滤和搜索栏，把它带到下一个层次。总而言之，React Table让我们可以灵活地使用他们的定制挂钩，并根据我们的需要定制这个表。</p><p id="7a90" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望这对你有所帮助——感谢阅读！</p><h1 id="2058" class="ld le iq bd lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma bi translated"><strong class="ak">资源:</strong></h1><p id="30d6" class="pw-post-body-paragraph jn jo iq jp b jq mb js jt ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk ij bi translated"><strong class="jp ir">反应表转移:</strong>T16】https://react-table.tanstack.com/</p><p id="96e7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">更多内容请看</em><a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="kl">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Closures in JavaScript: A Beginner-Friendly Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的闭包:初学者友好指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/closure-in-javascript-3f291eeb8dff?source=collection_archive---------11-----------------------#2021-07-20">https://javascript.plainenglish.io/closure-in-javascript-3f291eeb8dff?source=collection_archive---------11-----------------------#2021-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="4280" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您参加过技术访谈，您可能知道与JavaScript闭包相关的问题是如何反复出现的。对于那些正在为此做准备的人来说，你们已经到达了正确的地点。</p><p id="b14d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为了理解闭包，重要的是首先研究一下<strong class="jm io">局部</strong>和<strong class="jm io">全局</strong>变量:</p><h2 id="da72" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">局部变量</h2><p id="05ec" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">局部变量的作用域在函数内部，不能在函数外部访问:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/248bb1f757d8a55486ce8f40c8f85e9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*WUKBDIqfXafAk7tmntP-rw.png"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">locally defined ‘name’ can’t be accessed outside</figcaption></figure><p id="a5ea" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这有助于在不冲突的情况下重用变量名。一些常见的变量可以是<em class="ls">结果</em>、<em class="ls">计数</em>、<em class="ls">指数、</em>等。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/d7c99bf1005ba04b6da53b68809e007e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*2iIPVn7BN4ItnTjJkicfWQ.png"/></div><figcaption class="lo lp gj gh gi lq lr bd b be z dk">‘num’ is locally scoped and has different values accordingly</figcaption></figure><h2 id="2654" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">全局变量</h2><p id="71bd" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">函数也可以访问函数外部定义的所有变量。函数外部定义的变量属于JavaScript窗口对象:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div class="gh gi lg"><img src="../Images/6a40f38015681a71cbc9089f64bf4875.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*0Mjpfg4ms2FAtwBOK0-vPA.png"/></div></figure><p id="913a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这里，函数<code class="fe lt lu lv lw b">foo()</code> <em class="ls"> </em>可以访问<em class="ls">全局作用域变量</em> <code class="fe lt lu lv lw b"><em class="ls">num</em></code> <em class="ls">。</em></p><h2 id="f780" class="ki kj in bd kk kl km dn kn ko kp dp kq jv kr ks kt jz ku kv kw kd kx ky kz la bi translated">范围嵌套:</h2><p id="e96a" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">如果我们嵌套两个函数呢？换句话说，我们将嵌套两个<strong class="jm io"> <em class="ls">作用域</em> </strong>。例如，<code class="fe lt lu lv lw b">innerFunc()</code>嵌套在<code class="fe lt lu lv lw b">outerFunc(<em class="ls">)</em></code>中，如下所示:</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/cdec07433d5c707874377e14d36bea0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*weYXbpsJi4beRrZSKxvxJw.png"/></div></div></figure><p id="a966" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">查看上面的代码，我们看到，变量<code class="fe lt lu lv lw b">outerVar</code>在函数<code class="fe lt lu lv lw b">outerFunc()</code>中声明，并在内部函数<code class="fe lt lu lv lw b">innerFunc()</code>中访问。这意味着我们能够在内部函数中访问外部作用域的变量。</p><p id="d486" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">确切地知道javaScript如何理解记录在<code class="fe lt lu lv lw b"><em class="ls">innerFunc()</em></code>中的变量<code class="fe lt lu lv lw b">outerVar</code><strong class="jm io"/>来自<code class="fe lt lu lv lw b"><em class="ls">outerFunc()</em></code>是很有趣的。它通过<strong class="jm io"> <em class="ls">词法作用域来实现。</em> </strong>词法范围仅仅意味着变量的可访问性是由嵌套范围内变量的位置决定的。简单地说，这意味着在外部作用域中声明的变量可以在内部作用域中访问。</p><p id="5a89" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">更简单地说，通过词法范围，JavaScript如下进行:</p><ol class=""><li id="2f79" class="mc md in jm b jn jo jr js jv me jz mf kd mg kh mh mi mj mk bi translated">我看到一个函数<code class="fe lt lu lv lw b">outerFunc()</code>声明了一个变量<code class="fe lt lu lv lw b">OuterVar</code>。</li><li id="d962" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">接下来，我看到一个<code class="fe lt lu lv lw b">innerFunc()</code>嵌套在<code class="fe lt lu lv lw b">outerFunc()</code>中。</li><li id="fcc9" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated"><code class="fe lt lu lv lw b"><em class="ls">innerFunc()</em></code>试图访问一个内部没有任何声明的变量<code class="fe lt lu lv lw b">outerVar</code>。</li><li id="c57b" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated">由于我使用了词法范围，我认为<code class="fe lt lu lv lw b">innerFunc()</code>中的变量<code class="fe lt lu lv lw b">outerVar</code>与<code class="fe lt lu lv lw b">outerFunc()</code>中的变量<code class="fe lt lu lv lw b">outerVar</code>是同一个变量。</li></ol><p id="8979" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我们在全局和T5声明了同一个变量<code class="fe lt lu lv lw b">outerVar</code>，会发生什么？<code class="fe lt lu lv lw b">innerFunc()</code>会访问哪一个？</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/776f6e3017f09d17f2232a2e1468ae4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KMkjCE97eBcTKc53KaK-nw.png"/></div></div></figure><p id="e5b1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如前所述，通过词法范围，JavaScript将记住<code class="fe lt lu lv lw b">outerFunc()</code>中的变量声明。因此，输出将是<em class="ls">“外部”。</em></p><h1 id="669c" class="mq kj in bd kk mr ms mt kn mu mv mw kq mx my mz kt na nb nc kw nd ne nf kz ng bi translated">最后，闭包…</h1><p id="44a9" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">现在我们知道了基本知识，我们可以开始谈论结束并结束了！</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/a572522a1c4be33dc2bb3be20dc94850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*77-EeFqIQh73pQlq0NK5tw.png"/></div></div></figure><p id="c32e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们可以看到，函数<code class="fe lt lu lv lw b">innerFunc()</code>现在在其词法范围之外被访问。它还能访问变量<code class="fe lt lu lv lw b">outerVar</code>吗？是的，可以。<code class="fe lt lu lv lw b">innerFunc()</code> <strong class="jm io"> <em class="ls">关闭</em> </strong>或从其词法范围捕获变量<code class="fe lt lu lv lw b">outerVar</code>。下面给出了直观的解释。</p><figure class="lh li lj lk gt ll gh gi paragraph-image"><div role="button" tabindex="0" class="ly lz di ma bf mb"><div class="gh gi lx"><img src="../Images/9062706ea68843d04e0e2b31806c2072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d2yOidJOyO1ZKwiV9SXyvg.png"/></div></div></figure><p id="2d5a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您会看到<code class="fe lt lu lv lw b">innerFunc()</code>通过从其外部作用域记住变量<code class="fe lt lu lv lw b">outerVar</code> <strong class="jm io"> </strong>创建了一个闭包。无论你现在在哪里试图访问你的<code class="fe lt lu lv lw b">innerFunc()</code> <em class="ls"> </em>，它都会记住它所捕获的东西。</p><h1 id="f531" class="mq kj in bd kk mr ms mt kn mu mv mw kq mx my mz kt na nb nc kw nd ne nf kz ng bi translated">结论</h1><p id="77f1" class="pw-post-body-paragraph jk jl in jm b jn lb jp jq jr lc jt ju jv ld jx jy jz le kb kc kd lf kf kg kh ig bi translated">关于闭包的实际例子，我推荐阅读这里的答案。</p><div class="nh ni gp gr nj nk"><a href="https://stackoverflow.com/questions/2728278/what-is-a-practical-use-for-a-closure-in-javascript" rel="noopener  ugc nofollow" target="_blank"><div class="nl ab fo"><div class="nm ab nn cl cj no"><h2 class="bd io gy z fp np fr fs nq fu fw im bi translated">JavaScript中闭包的实际用途是什么？</h2><div class="nr l"><h3 class="bd b gy z fp np fr fs nq fu fw dk translated">在实践中，闭包可以创造优雅的设计，允许定制…</h3></div><div class="ns l"><p class="bd b dl z fp np fr fs nq fu fw dk translated">stackoverflow.com</p></div></div><div class="nt l"><div class="nu l nv nw nx nt ny lm nk"/></div></div></a></div><p id="c252" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">总而言之，闭包是一个从其外部范围捕获变量的函数。不管你在哪里执行变量，它都会记住在它的外部作用域中定义的变量！希望这篇文章对你有帮助。</p><p id="192f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ls">更多内容请看</em><a class="ae nz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="ls">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
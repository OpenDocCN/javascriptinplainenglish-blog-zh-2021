<html>
<head>
<title>Screen Capture a Page Using Angular Ngx Capture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用角度Ngx捕捉对页面进行屏幕捕捉</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/screen-capture-a-page-using-angular-ngx-capture-2eda79c93bf?source=collection_archive---------2-----------------------#2021-01-20">https://javascript.plainenglish.io/screen-capture-a-page-using-angular-ngx-capture-2eda79c93bf?source=collection_archive---------2-----------------------#2021-01-20</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="5683" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">Angular的屏幕截图库。定义一个区域，它将捕获并返回一个包含base64 PNG的字符串。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/9ef677916d5edbb0c718a2aa7eb8001f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JrWBlmeOgkSLBjgHksG6vg.png"/></div></div></figure><p id="0447" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">在本教程中，我们将学习如何使用<strong class="kt ir">角</strong>拍摄网页的<strong class="kt ir">截图</strong>。我们可以编写自己的JavaScript代码来捕捉屏幕。然而，这是一个耗时的过程。我们有一个预定义的库来完成这个任务。那是<strong class="kt ir"> ngx俘获</strong>库。我的一个客户需要将一个web应用程序页面作为一个图像(截图)发送给多人。我尝试使用普通的JavaScript。它没有成功。我在做这项工作时遇到了许多错误。我找到了ngx的捕获物。这节省了我的时间。我想和你们分享这个。对需要帮助的人来说，这可能很有帮助。</p><p id="9baf" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">所以这个过程非常简单明了。</p><ol class=""><li id="26b7" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated">将HTML标记定义为根元素。</li><li id="394e" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">使用ngx捕获库将所有元素捕获为根元素中的图像。</li></ol><p id="2287" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就这样。没有其他额外的工作。它输出base64 png图像。如果需要，您可以将它保存在服务器上。</p><p id="d96d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">让我们通过一个逐步的例子来看看如何做到这一点。</p><h2 id="f611" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">创建角度投影</strong></h2><p id="f402" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">使用终端上的以下命令创建一个角度项目。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="8db4" class="mb mc iq na b gy ne nf l ng nh">ng new demo-project</span></pre><h2 id="bcfd" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">安装NGX-CAPTURE库</strong></h2><p id="ac74" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">现在使用下面的命令在项目中安装NGX-CAPTURE库。</p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="a7cd" class="mb mc iq na b gy ne nf l ng nh">npm i ngx-capture</span></pre><h2 id="b088" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">导入应用模块</strong></h2><p id="f01d" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">无论何时安装库，都必须将其导入app.module.ts文件。因此首先将<strong class="kt ir"> NgxCaptureModule </strong>导入到<strong class="kt ir"> app.module.ts </strong>文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="8240" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后将NgxCaptureModule包含到app.module.ts文件的导入部分。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="e6e4" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">抓图</strong></h2><p id="0340" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">现在创建一个div标签，并将id添加到<strong class="kt ir">home.component.html</strong>文件中的标签中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><ol class=""><li id="628f" class="ln lo iq kt b ku kv kx ky la lp le lq li lr lm ls lt lu lv bi translated"><strong class="kt ir">画面</strong>是上面代码中的id。</li><li id="8e1e" class="ln lo iq kt b ku lw kx lx la ly le lz li ma lm ls lt lu lv bi translated">用于将页面捕获为图像的单击事件。</li></ol><p id="f6a8" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，我们可以使用NgxCaptureService将页面捕获为图像。因此将<strong class="kt ir"> NgxCaptureService </strong>导入到<strong class="kt ir"> home.component.ts </strong>文件中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="ac86" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">使用构造函数创建NgxCaptureService的引用变量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="87d9" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建根元素的视图子引用变量。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="3946" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">然后调用<strong class="kt ir"> getImage() </strong>函数，将元素捕获为图像。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="002a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">就这样。它输出base64 png图像。现在我的目标是将图像保存在服务器上。</p><h2 id="9885" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">将Base64转换为图像</strong></h2><p id="76e7" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">使用下面的代码将base64输出转换为图像。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="459c" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">通过HTTP上传到服务器</strong></h2><p id="3dcb" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">这里，我将base64字符串转换为图像，并使用HTTP将图像传递给服务器。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><h2 id="24bc" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated">捕获图像的PHP代码</h2><p id="d123" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">这段代码捕获图像并保存在服务器上。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="6a01" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">完整的home.component.ts文件编码</strong></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="ni nj l"/></div></figure><p id="137f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">那都是男生。希望你喜欢这个教程。敬请关注更多文章。</p><p id="ccd6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">如果你有任何疑问，请评论它。</p><p id="989d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您阅读这篇文章。</p><h2 id="a57f" class="mb mc iq bd md me mf dn mg mh mi dp mj la mk ml mm le mn mo mp li mq mr ms mt bi translated"><strong class="ak">结论</strong></h2><p id="7c80" class="pw-post-body-paragraph kr ks iq kt b ku mu jr kw kx mv ju kz la mw lc ld le mx lg lh li my lk ll lm ij bi translated">在本教程中，您学习了如何使用Angular捕捉屏幕。许多浏览器都提供了屏幕捕捉功能。然而，在应用程序内部进行集成是一项单调乏味的任务。在这里，我给出了如何将base64字符串转换为图像以及如何使用PHP上传图像的代码。这是从拍摄图像到上传到服务器的完整实现。</p><p id="5c00" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">图书馆链接:</strong></p><pre class="kg kh ki kj gt mz na nb nc aw nd bi"><span id="1d93" class="mb mc iq na b gy ne nf l ng nh"><a class="ae nk" href="https://www.npmjs.com/package/ngx-capture" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/ngx-capture</a></span></pre></div></div>    
</body>
</html>
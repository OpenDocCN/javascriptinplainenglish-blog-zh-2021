<html>
<head>
<title>JavaScript: Special Numbers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript:特殊数字</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-special-numbers-404dd5bf5f20?source=collection_archive---------15-----------------------#2021-03-07">https://javascript.plainenglish.io/javascript-special-numbers-404dd5bf5f20?source=collection_archive---------15-----------------------#2021-03-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="013f" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">JavaScript中特殊数字的简短意识流</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7f568650d890b3fc583896d6a9ac7555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kVA6TwaalRQ7-aKf"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@swimstaralex?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexander Sinn</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d1ac" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我第一个承认数学和我合不来。这并不是说我不擅长，也不是说我不喜欢，更多的是，有时，当编码时，它的行为与我预期的不同，因为我把我的期望强加于它，所以我是失望的一方(<em class="lp">我感觉治疗会议即将到来#toxicrelationship </em>)。嗯，你可以想象当我被介绍给JavaScript中的<code class="fe lq lr ls lt b"><a class="ae ks" href="https://en.wikipedia.org/wiki/NaN" rel="noopener ugc nofollow" target="_blank">NaN</a></code>时我的懊恼。您也可以想象当我运行这段代码时，我的困惑/烦恼是如何增长的…</p><pre class="kd ke kf kg gt lu lt lv lw aw lx bi"><span id="4b0d" class="ly lz in lt b gy ma mb l mc md">console.log(typeof(NaN));<br/>// number</span></pre><p id="bf31" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果NaN代表“不是数字”，那么为什么JavaScript告诉我它是“数字”类型的？</p><h2 id="3b37" class="ly lz in bd me mf mg dn mh mi mj dp mk lc ml mm mn lg mo mp mq lk mr ms mt mu bi translated">圆盘烤饼</h2><p id="880c" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">这是因为从JavaScript的角度来看，它是数字类型的。它代表一个无效的响应，但它不是<code class="fe lq lr ls lt b">null</code>、<code class="fe lq lr ls lt b">undefined</code>或不同的类型；因此，上面的代码是这样运行的。JavaScript需要一种方式来告诉程序员正在运行的方程返回一个无法表示的值，例如:</p><pre class="kd ke kf kg gt lu lt lv lw aw lx bi"><span id="d0ae" class="ly lz in lt b gy ma mb l mc md">0 / 0;<br/>// NaN</span><span id="2591" class="ly lz in lt b gy na mb l mc md">Math.sqrt(-4);<br/>// NaN</span></pre><p id="830d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这让我不禁要问，JavaScript还包含哪些特殊数字？</p><p id="1ccb" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">谢天谢地，没有那么多。</p><p id="7263" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以下是使用JS产生特殊数字的几个问题:</p><pre class="kd ke kf kg gt lu lt lv lw aw lx bi"><span id="4029" class="ly lz in lt b gy ma mb l mc md">let zero = 0;</span><span id="d4eb" class="ly lz in lt b gy na mb l mc md">let i = 1 / zero; <br/>// Infinity</span><span id="5785" class="ly lz in lt b gy na mb l mc md">let negI = -i; <br/>// -Infinity</span><span id="3cf4" class="ly lz in lt b gy na mb l mc md">let negZero = 1 / negI; <br/>// -0</span></pre><h2 id="eaea" class="ly lz in bd me mf mg dn mh mi mj dp mk lc ml mm mn lg mo mp mq lk mr ms mt mu bi translated">无穷大&amp;-无穷大</h2><p id="3d64" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated"><code class="fe lq lr ls lt b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity" rel="noopener ugc nofollow" target="_blank">Infinity</a></code> <a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity" rel="noopener ugc nofollow" target="_blank"> &amp; </a> <code class="fe lq lr ls lt b"><a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity" rel="noopener ugc nofollow" target="_blank">-Infinity</a></code>是JS中全局对象的属性，代表无穷大的数值。</p><blockquote class="nb nc nd"><p id="051a" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated"><code class="fe lq lr ls lt b">Infinity</code>是一个错误值，表示两个问题之一:一个数因为量值太大而无法表示，或者发生了被零除的情况。</p><p id="d8fe" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated"><code class="fe lq lr ls lt b">Infinity</code>大于任何其他数字(除了<code class="fe lq lr ls lt b">NaN</code>)。同样，<code class="fe lq lr ls lt b">-Infinity</code>比其他任何数都小(除了<code class="fe lq lr ls lt b">NaN</code>)。</p><p id="b874" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">——<a class="ae ks" href="http://speakingjs.com/es5/ch11.html" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">speakingjs.com</strong></a></p></blockquote><h2 id="c980" class="ly lz in bd me mf mg dn mh mi mj dp mk lc ml mm mn lg mo mp mq lk mr ms mt mu bi">+0 &amp; -0</h2><p id="c8ef" class="pw-post-body-paragraph kt ku in kv b kw mv jo ky kz mw jr lb lc mx le lf lg my li lj lk mz lm ln lo ig bi translated">现在，这个让我有点困惑。在JS中并不真正需要正负零，但是它们确实存在。发生这种情况是因为使用IEEE-754 格式的数字是如何分配比特的(单独的主题是另一篇文章), 1比特被分配给数字的符号。</p><blockquote class="nb nc nd"><p id="0667" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">因为JavaScript的数字保持大小和符号分开，所以每个非负数都有一个负数，包括<code class="fe lq lr ls lt b">0</code>。</p><p id="e1fa" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">这样做的基本原理是，无论何时用数字表示一个数字，它都可能变得很小，以至于与0无法区分，因为编码不够精确，无法表示差异。然后一个有符号的零允许你记录“从哪个方向”你接近零；也就是说，这个数在被认为是零之前有什么符号。维基百科很好地总结了<a class="ae ks" href="http://en.wikipedia.org/wiki/Signed_zero" rel="noopener ugc nofollow" target="_blank">带符号零</a>的利弊:</p><p id="76ed" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated"><em class="in">据称，在IEEE 754中包含带符号零使得在一些关键问题中更容易实现数值精度，特别是在使用复杂初等函数进行计算时。另一方面，有符号零的概念与大多数数学领域(以及大多数数学课程)中的一般假设相反，即负零与零是一回事。允许负零的表示可能是程序中错误的来源，因为软件开发人员没有意识到(或者可能忘记)虽然两个零表示在数字比较下表现为相等，但是它们是不同的位模式，并且在某些操作中产生不同的结果。</em></p><p id="9117" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">——<strong class="kv io"/><a class="ae ks" href="http://speakingjs.com/es5/ch11.html" rel="noopener ugc nofollow" target="_blank"><strong class="kv io">speakingjs.com</strong></a></p></blockquote><p id="a66c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我也喜欢德里克·奥斯汀博士在这个问题上的发现:</p><blockquote class="nb nc nd"><p id="0c11" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">自然，存在一个不完全为零的单独的零值有点令人费解。为什么IEEE标准会包含两个零？</p><p id="9174" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">用户<a class="ae ks" href="https://stackoverflow.com/users/493759/agoston-horvath" rel="noopener ugc nofollow" target="_blank">阿戈斯顿·霍瓦特</a>解释了<a class="ae ks" href="https://stackoverflow.com/questions/7223359/are-0-and-0-the-same" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a>的原因:</p><p id="b08a" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated"><em class="in">“其实这个行为模型在数学上限制了计算。例如，函数1/x在0中有一个无穷大的值，然而，如果我们从正的一面或负的一面接近0，它就分离了；前者，结果是+inf，后者，-inf。”</em></p><p id="8f08" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">但是应该是那样吗？Chris Hemedinger在2ality博客上的评论<a class="ae ks" href="https://2ality.com/2012/03/signedzero.html" rel="noopener ugc nofollow" target="_blank">中认为这种行为令人困惑:</a></p><p id="08d6" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated"><em class="in">“零[0]有两种或两种以上的表示，这是IEEE-754、符号和幅度表示以及补码表示的公认缺陷。”</em></p><p id="674a" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">其他一些编程语言使用一种叫做<a class="ae ks" href="https://en.wikipedia.org/wiki/Signed_number_representations#Two.27s_complement" rel="noopener ugc nofollow" target="_blank">二进制补码</a>的东西来避免对两个零的需求。</p><p id="1bb9" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">然而，JavaScript有两个不同的零，<code class="fe lq lr ls lt b">+0</code>和<code class="fe lq lr ls lt b">-0</code>。</p><p id="4bd3" class="kt ku lp kv b kw kx jo ky kz la jr lb ne ld le lf nf lh li lj ng ll lm ln lo ig bi translated">— <strong class="kv io"> </strong> <a class="ae ks" href="https://medium.com/coding-at-dawn/is-negative-zero-0-a-number-in-javascript-c62739f80114" rel="noopener"> <strong class="kv io">德里克·奥斯汀博士</strong> </a></p></blockquote></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="86d7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在JS中运行不同的方程时，你可能会发现许多意想不到的行为，比如<code class="fe lq lr ls lt b">0.1 + 0.2 === 0.3</code>返回<code class="fe lq lr ls lt b">false</code>，这是因为我们在日常生活中通常使用<a class="ae ks" href="https://en.wikipedia.org/wiki/Decimal" rel="noopener ugc nofollow" target="_blank">基数为10的数制</a>，而计算机使用<a class="ae ks" href="https://en.wikipedia.org/wiki/Binary_number" rel="noopener ugc nofollow" target="_blank">基数为2的数制或二进制数制</a>。然后，当你加上JavaScript遵循<a class="ae ks" href="https://en.wikipedia.org/wiki/IEEE_754" rel="noopener ugc nofollow" target="_blank"> IEEE-754 </a>格式进行<a class="ae ks" href="https://en.wikipedia.org/wiki/Floating-point_arithmetic" rel="noopener ugc nofollow" target="_blank">浮点运算</a>的事实时，你就有了一个比我在副标题为“Brief”的博客中所能概括的更复杂的答案。然而，下面有一些我觉得有趣的进一步阅读，围绕着数学和JS的细节。</p><p id="164d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">要点提示</strong> : <em class="lp">由于JavaScript查看数字的精度有限，所有这些特殊数字有时是JavaScript表示操作结果的唯一方式。</em> <em class="lp">你偶尔会碰到</em> <code class="fe lq lr ls lt b"><em class="lp">NaN</em></code> <em class="lp">，很少会碰到这里列出的其他特殊号码。这可能会在面试中出现，但也可能不会。但是，如果是的话，你现在有一些JS琐事技能可以炫耀了。</em>💡</p><p id="ef4e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">快乐编码🤓</p></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><h1 id="a753" class="no lz in bd me np nq nr mh ns nt nu mk jt nv ju mn jw nw jx mq jz nx ka mt ny bi translated">进一步阅读</h1><ul class=""><li id="a06a" class="nz oa in kv b kw mv kz mw lc ob lg oc lk od lo oe of og oh bi translated"><a class="ae ks" href="https://indepth.dev/posts/1139/here-is-what-you-need-to-know-about-javascripts-number-type" rel="noopener ugc nofollow" target="_blank">‘这里是你需要知道的关于JavaScript的数字类型</a>’<br/>——<a class="ae ks" href="https://twitter.com/@maxkoretskyi" rel="noopener ugc nofollow" target="_blank">马克斯·科瑞茨基</a></li><li id="b9c6" class="nz oa in kv b kw oi kz oj lc ok lg ol lk om lo oe of og oh bi translated"><a class="ae ks" href="https://0.30000000000000004.com/" rel="noopener ugc nofollow" target="_blank">'浮点数学</a> ' <br/> — <a class="ae ks" href="http://erik.wiffin.com/" rel="noopener ugc nofollow" target="_blank">埃里克·威芬</a></li><li id="ce77" class="nz oa in kv b kw oi kz oj lc ok lg ol lk om lo oe of og oh bi translated"><a class="ae ks" href="https://modernweb.com/what-every-javascript-developer-should-know-about-floating-points/" rel="noopener ugc nofollow" target="_blank">“每个JavaScript开发人员应该知道的关于浮点的知识</a>”<br/>—<a class="ae ks" href="https://twitter.com/remotesynth" rel="noopener ugc nofollow" target="_blank">Brian rina ldi</a></li><li id="531d" class="nz oa in kv b kw oi kz oj lc ok lg ol lk om lo oe of og oh bi translated">什么是二进制，为什么计算机要使用它？’<br/>——<a class="ae ks" href="https://twitter.com/anthonyheddings" rel="noopener ugc nofollow" target="_blank">安东尼·赫丁斯</a></li></ul></div></div>    
</body>
</html>
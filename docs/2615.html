<html>
<head>
<title>How to Set Up React with a Ruby on Rails Project Part 1 — Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何设置对Ruby on Rails项目的反应第1部分-设置</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-set-up-react-js-with-a-ruby-on-rails-project-dd8558fea7e?source=collection_archive---------9-----------------------#2021-05-29">https://javascript.plainenglish.io/how-to-set-up-react-js-with-a-ruby-on-rails-project-dd8558fea7e?source=collection_archive---------9-----------------------#2021-05-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/cca83361a40223242ca54ebdf8ece9fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mBPmfEHEMGT0grsboZ1JWQ.jpeg"/></div></div></figure><p id="693c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Ruby on Rails是一个非常好的工作框架。但是，使用嵌入式Ruby()。erb)和ajax来构建具有动态前端的应用程序可能很痛苦。</p><p id="4f02" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是像reactor、Angular和Ember这样的前端框架的发挥作用的地方。由于反应是现在最热门的话题，我们将使用它。</p><p id="c6fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是，您如何在Ruby on Rails应用程序中设置反应呢？这就是我在本文中要讨论的内容</p><p id="31cc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您需要做的第一件事是创建您的Ruby on Rails应用程序，并告诉它您将使用reactor。为此，请键入以下代码:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="8f14" class="lc ld in ky b gy le lf l lg lh">rails new react-rails --database=postgresql --webpack=react</span></pre><p id="970c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个应用程序中，我还使用Postgres作为数据库。</p><p id="644e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们已经建立了这个项目，我们需要添加一些代码，这样我们的应用程序就知道如何使用React作为前端。</p><p id="4447" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们转到config/routes.rb的路由文件。</p><p id="9622" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你要在这里做一些和你的路线有点不同的事情。您将把对后端的所有调用包装在一个API名称空间中。</p><p id="cc5c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这个项目中，我们将有一个帖子模型。所以你应该这样写你的路线:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="ce1e" class="lc ld in ky b gy le lf l lg lh">Rails.application.routes.draw do<br/>  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html<br/> <br/>  root 'pages#index'<br/> <br/>  namespace :api do<br/>    namespace :v1 do<br/>      resources :posts<br/>    end<br/>  end</span></pre><p id="2f8a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还添加了一个到我们的页面控制器的根路由。当你进行后端调用来访问你的控制器时，你会有像“/API/v1/post”这样的路径来获取你的帖子。</p><p id="7a50" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们需要告诉我们的应用程序将其他路线发送到我们的主反应应用程序。我们将把它添加到我们的路由文件的底部:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="39dd" class="lc ld in ky b gy le lf l lg lh">get '*path', to: 'pages#index', via: :all</span></pre><p id="ec8e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您的文件路由文件应该如下所示:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="081e" class="lc ld in ky b gy le lf l lg lh">Rails.application.routes.draw do<br/>  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html<br/> <br/>  root 'pages#index'<br/> <br/>  namespace :api do<br/>    namespace :v1 do<br/>      resources :posts<br/>    end<br/>  end<br/> <br/>  get '*path', to: 'pages#index', via: :all</span></pre><p id="ec5a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们设置我们的index.jsx文件。</p><p id="7058" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">转到app/JavaScript/packs/hello _ reactor . jsx，并将该文件的名称重命名为index.jsx。删除那里的大部分内容，并使该文件看起来像这样。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="2113" class="lc ld in ky b gy le lf l lg lh">import React from 'react'<br/>import ReactDOM from 'react-dom'<br/>import { BrowserRouter as Router, Route } from 'react-router-dom'<br/>import App from '../src/components/App'<br/> <br/>document.addEventListener('DOMContentLoaded', () =&gt; {<br/>  ReactDOM.render(<br/>    &lt;Router&gt;<br/>      &lt;Route path="/" component={App}/&gt;<br/>    &lt;/Router&gt;,<br/>    document.body.appendChild(document.createElement('div')),<br/>  )</span><span id="2e53" class="lc ld in ky b gy li lf l lg lh">})</span></pre><p id="deb5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果您以前使用过“反应”，这应该很熟悉。我们正在导入React、ReactDom和React rowitdom。然后，我们导入我们的主应用程序。然后，我们在DOM中创建一个节点，并插入我们的应用程序。</p><p id="6771" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我们遗忘之前，让我们用纱线添加反应路由器。转到您的终端并键入:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="10ea" class="lc ld in ky b gy le lf l lg lh">yarn add react-router-dom</span></pre><p id="95d6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们几乎可以在前端看到我们的应用程序。让我们去设置我们的App.js文件。</p><p id="4e31" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建文件“app/JavaScript/src/components/app . js”。我们将得到根路径来显示我们的帖子。在“常规的rails应用程序”中，这将是我们帖子视图文件夹中的索引页面。</p><p id="a00b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">无论如何，App.js文件应该是这样的:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="c9a4" class="lc ld in ky b gy le lf l lg lh">import React from 'react'<br/>import { Route, Switch } from 'react-router-dom'<br/>import Posts from '../components/Posts/Posts'<br/> <br/>const App = () =&gt; {<br/>  return (<br/>    &lt;Switch&gt;<br/>      &lt;Route exact path="/" component={Posts} /&gt;<br/>    &lt;/Switch&gt;&gt;<br/>  )<br/>}</span><span id="c163" class="lc ld in ky b gy li lf l lg lh">export default App</span></pre><p id="aa02" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">让我们在“app/JavaScript/src/componeets/Posts/Posts . js”中创建这个帖子页面。这是我的样子。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="a7f0" class="lc ld in ky b gy le lf l lg lh">import React from 'react'<br/> <br/>const Posts = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      &lt;h1&gt;Posts&lt;/h1&gt;<br/>      &lt;p&gt;This is our posts page.&lt;/p&gt;<br/>    &lt;/div&gt;<br/>  )<br/>}</span><span id="0151" class="lc ld in ky b gy li lf l lg lh">export default Posts</span></pre><p id="7fad" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我们需要告诉我们的视图渲染我们的反应应用程序。转到“app/view/layout/application . html . erb”并添加以下标签:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="f311" class="lc ld in ky b gy le lf l lg lh">&lt;%= javascript_pack_tag 'index' %&gt;</span></pre><p id="7b53" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">布局文件应如下所示:</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="35e0" class="lc ld in ky b gy le lf l lg lh">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;ReactRails&lt;/title&gt;<br/>    &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;<br/>    &lt;%= csrf_meta_tags %&gt;<br/>    &lt;%= csp_meta_tag %&gt;<br/> <br/>    &lt;%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;<br/>    &lt;%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %&gt;<br/>    &lt;%= javascript_pack_tag 'index' %&gt;<br/>  &lt;/head&gt;<br/> <br/>  &lt;body&gt;<br/>    &lt;%= yield %&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="5cd5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，我正要启动我的服务器，但是我遇到了一个“active record::connection setsed”没有提供密码的错误，因为我没有在“config.database.yml”中设置数据库密码，所以请确保设置了您的数据库设置。</p><p id="d2eb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我还必须运行rails db:create来创建我的数据库</p><p id="2536" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">用Rails设置Postgresql不在本教程的范围内，抱歉！</p><p id="3d62" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">再走一步！我们必须设置我们的页面控制器及其视图。</p><p id="4b34" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">去“app/controllers/pages _ controller”里创建一个PagesController。我们只需要一个指数行动。</p><pre class="kt ku kv kw gt kx ky kz la aw lb bi"><span id="9659" class="lc ld in ky b gy le lf l lg lh">class PagesController &lt; ApplicationController<br/>  def index<br/> <br/>  end</span><span id="09de" class="lc ld in ky b gy li lf l lg lh">end</span></pre><p id="a2ef" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以及你在“app/views/pages/index.html.erb”中的视图文件。我的文件是一个空白文件，因为我们只是加载布局。</p><p id="e2a6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在运行“rails s ”,您应该会看到以下内容:</p><figure class="kt ku kv kw gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lj"><img src="../Images/7c7d920207cc66dbd148e13901810341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*KNWDGhhHJczuScVV3rt4ag.png"/></div></div></figure><p id="ce94" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在我们已经在Rails应用程序上设置了React。恭喜你，这是一大步！</p><p id="8055" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">继续关注连接前端和后端以及添加Redux。</p><p id="ae68" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="lk">更多内容尽在</em><a class="ae ll" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lk">plain English . io</em></a></p></div></div>    
</body>
</html>
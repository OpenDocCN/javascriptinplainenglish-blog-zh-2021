<html>
<head>
<title>Routing in Vue with Vue Router</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue路由器在Vue中路由</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/routing-in-vue-with-vue-router-1a0be4fbe40a?source=collection_archive---------2-----------------------#2021-01-01">https://javascript.plainenglish.io/routing-in-vue-with-vue-router-1a0be4fbe40a?source=collection_archive---------2-----------------------#2021-01-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/d1f2ac6be47249b660856ff2b8f4e84a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8Wm3v_P8fJHDILQa"/></div></div></figure><p id="a4a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如我在上一篇关于React中路由的文章中提到的，许多前端框架都是单页面应用程序。这意味着，由于每次用户在“页面”之间移动时，您不会向服务器发出GET请求，因此站点的URL不会自动更改。<a class="ae kt" href="https://router.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue Router </a>可以让你为Vue应用程序做客户端路由，根据用户在页面上看到的内容改变URL。</p><p id="bb70" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有几种方法可以将Vue路由器添加到Vue应用程序中。如果您正在下载HTML中带有<code class="fe ku kv kw kx b">script</code>标签的vue，您也可以为Vue路由器添加<code class="fe ku kv kw kx b">script</code>:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="ab2b" class="lg lh in kx b gy li lj l lk ll">&lt;script src="/path/to/vue.js"&gt;&lt;/script&gt;        // <em class="lm">for vue in general</em><br/>&lt;script src="/path/to/vue-router.js"&gt;&lt;/script&gt;   // <em class="lm">for vue-router</em></span></pre><p id="de79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">您也可以使用npm将其安装到项目中，如下所示:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="5b6c" class="lg lh in kx b gy li lj l lk ll">// ♥ &gt; <!-- -->npm install vue-router</span></pre><p id="4499" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是在这篇文章中，我将讨论如何在一个以vue-cli开始的项目中使用vue-router。您可以使用以下命令安装或添加它:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="f1b5" class="lg lh in kx b gy li lj l lk ll">// ♥ &gt; <!-- -->vue add router</span></pre><p id="81a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是在运行这个命令时要小心，因为它将覆盖您的<em class="lm"> App.vue </em>文件，所以要么在您开始工作之前计划添加vue-router，要么在添加之前备份您的<em class="lm"> App.vue </em>文件。这个命令是将vue-router添加到项目中的最简单的方法，但是它并没有真正解释当您运行这个命令时会发生什么，所以我将向您简要介绍添加的每一项内容，以及它所做的更改。</p><p id="311f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，它更改了几个文件，显然是<em class="lm"> App.vue </em>，还有<em class="lm"> main.js </em>。在<em class="lm"> main.js </em>中，它从react-router导入<code class="fe ku kv kw kx b">router</code>，并将其添加到应用程序的主Vue实例中，因此您可以在应用程序的顶层使用它。差异以粗体显示如下:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="c791" class="lg lh in kx b gy li lj l lk ll">import Vue from 'vue'<br/>import App from './App.vue'<br/><strong class="kx io">import router from './router'</strong><br/> <br/>Vue.config.productionTip = false<br/> <br/>new Vue({<br/>  <strong class="kx io">router,</strong><br/>  render: h =&gt; h(App),<br/> }).$mount('#app')</span></pre><p id="ced0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在<em class="lm"> App.vue </em>中，它在<code class="fe ku kv kw kx b">App</code>的模板中添加了一个名为<code class="fe ku kv kw kx b">router-view</code>的东西，因此应用程序将在<code class="fe ku kv kw kx b">App</code>组件中显示与URL中的路线相匹配的组件:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="ae18" class="lg lh in kx b gy li lj l lk ll">&lt;template&gt;<br/>  &lt;div id="app"&gt;<strong class="kx io"><br/>    &lt;router-view/&gt;</strong><br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span></pre><p id="0c8f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，它添加了名为<em class="lm">路由器</em>和<em class="lm">视图</em>的文件夹。在<em class="lm">视图的</em>文件夹中，它生成了一些基本的例子。vue文件，<em class="lm"> About.vue </em>和<em class="lm"> Home.vue </em>，因此您可以通过在不同页面之间导航来查看vue路由器的运行情况。<em class="lm"> router </em>文件夹只有一个文件，<em class="lm"> index.js </em>，这里存放了你使用vue-router需要的大部分东西。该文件负责创建一个新的<code class="fe ku kv kw kx b">VueRouter</code>,并将其导出用于应用程序的其余部分。您唯一需要注意的是路线列表，因为这是您将在应用程序中定义所有您想要的路线的地方。<em class="lm"> index.js </em>文件如下所示:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="e130" class="lg lh in kx b gy li lj l lk ll">import Vue from 'vue'<br/>import VueRouter from 'vue-router'</span><span id="431c" class="lg lh in kx b gy ln lj l lk ll">Vue.use(VueRouter)</span><span id="463b" class="lg lh in kx b gy ln lj l lk ll">const routes = [<br/>  // <em class="lm">this is where you put all your routes</em><br/>]</span><span id="b09b" class="lg lh in kx b gy ln lj l lk ll">const router = new VueRouter({<br/>  mode: 'history',<br/>  base: process.env.BASE_URL,<br/>  routes<br/>})</span><span id="56a2" class="lg lh in kx b gy ln lj l lk ll">export default router</span></pre><p id="b188" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">定义路由有几种方法，但主要的方法是在文件顶部导入要使用的组件，并创建一个对象添加到路由列表中，如下所示:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="9266" class="lg lh in kx b gy li lj l lk ll">const routes = [<br/>  {<br/>    path: '/',<br/>    name: 'Home',<br/>    component: Home<br/>  },<br/>  {<br/>    path: '/about',<br/>    name: 'About',<br/>    component: About<br/>  }<br/>]</span></pre><p id="b4bc" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在页面上的这些路线之间导航的方式是使用<code class="fe ku kv kw kx b">router-link</code> s。在<code class="fe ku kv kw kx b">vue add router</code>对<em class="lm"> App.vue </em>文件所做的更改中，他们在<code class="fe ku kv kw kx b">router-view</code>上方添加了一个基本的导航栏，但我更喜欢让<code class="fe ku kv kw kx b">NavBar</code>成为它自己的组件。要使用<code class="fe ku kv kw kx b">router-link</code>，你只需要给每一个人传递一条路径就可以了:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="f2b6" class="lg lh in kx b gy li lj l lk ll">&lt;div id="nav"&gt;<br/>  &lt;router-link to="/"&gt;Home&lt;/router-link&gt;<br/>  &lt;router-link to="/about"&gt;About&lt;/router-link&gt;<br/>&lt;/div&gt;</span></pre><p id="16d1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但有时，您希望根据登录的用户或您正在查看的单个项目的id来选择不同的路径。这就是动态路由的用武之地。当定义路线路径时，动态部分由<code class="fe ku kv kw kx b">:</code>表示。对于这个例子，假设我们有一个应用程序，可以让你看到书籍列表，当你点击一本书时，你可以转到单本书的页面。这条路线大概是这样的:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="4558" class="lg lh in kx b gy li lj l lk ll">{<br/>  path: '/books/:book_id',<br/>  name: 'Book',<br/>  component: Book<br/>}</span></pre><p id="d8d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">要在<code class="fe ku kv kw kx b">router-link</code>中使用这个路径，您只需要向它传递一个动态路径。例如:</p><pre class="ky kz la lb gt lc kx ld le aw lf bi"><span id="213b" class="lg lh in kx b gy li lj l lk ll">computed: {<br/>  path: function () {<br/>    return `/books/${this.book.id}`<br/>  }<br/>}</span></pre><p id="5ee7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦进入Book组件，就可以通过使用<code class="fe ku kv kw kx b">$route.params.id</code>来访问route中定义的id。</p><p id="113f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">使用vue-router时要考虑的一件事是，因为你不再引用你在<code class="fe ku kv kw kx b">App</code>组件中使用的组件，你必须以不同的方式传递道具。如果您想让vue-router树中的某个组件访问<code class="fe ku kv kw kx b">App</code>中的一些数据，那么您必须将它传递给<code class="fe ku kv kw kx b">router-view</code>。这样，路由器中使用的任何组件都可以访问您从<code class="fe ku kv kw kx b">App</code>传递的内容，只要您在需要使用它的组件中将它定义为一个prop。</p><p id="7098" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我要讲的最后一件事是以编程方式改变页面的路径。例如，一旦用户提交了表单，比如当他们登录时，您可能希望将他们重定向到不同的页面。方法是在表单提交时触发的事件中使用<code class="fe ku kv kw kx b">$router.push()</code>。您应该将您希望用户重定向到的任何路径传递给<code class="fe ku kv kw kx b">push</code>函数。</p><p id="44ce" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">至此，我已经介绍了在Vue应用程序中使用Vue路由器的基础知识。确保在任何应用中都有良好的路由无疑是最佳实践。没有路线，用户就无法保存喜爱的页面，或者即使刷新应用程序也无法从同一个页面开始。如今，一个好的应用程序几乎需要一个导航栏来浏览应用程序。所以，每当你用Vue做项目的时候，添加Vue路由器让你的应用更容易访问是个好主意。</p></div></div>    
</body>
</html>
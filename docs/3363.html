<html>
<head>
<title>How to Run a JavaScript Callback When CSS3 Transition Finishes?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CSS3过渡完成后如何运行JavaScript回调？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-run-a-javascript-callback-when-css3-transition-finishes-6f69e1b5a7aa?source=collection_archive---------13-----------------------#2021-07-08">https://javascript.plainenglish.io/how-to-run-a-javascript-callback-when-css3-transition-finishes-6f69e1b5a7aa?source=collection_archive---------13-----------------------#2021-07-08</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/05809190802eba627e2a9a73b55fa77a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ffznkct2pJV81II0"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@chelseanscott?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chelsea Scott</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4c7e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们可能希望在CSS转换完成时运行JavaScript代码。</p><p id="ee6b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将研究如何在CSS3转换完成时运行JavaScript回调。</p><h1 id="a3c7" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">听transitionend事件</h1><p id="1bcd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">为了在CSS3转换完成时运行JavaScript代码，我们可以监听<code class="fe me mf mg mh b">transitionend</code>事件。</p><p id="ea6c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们有下面的HTML:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="4613" class="mq lc iq mh b gy mr ms l mt mu">&lt;div id="my-div"&gt;Click me to start animation.&lt;/div&gt;</span></pre><p id="4c27" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">和下面的CSS:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="6efa" class="mq lc iq mh b gy mr ms l mt mu">#my-div {<br/>  transition: top 2s;<br/>  position: relative;<br/>  top: 0;<br/>}</span><span id="5759" class="mq lc iq mh b gy mv ms l mt mu">div {<br/>  background: #ede;<br/>  cursor: pointer;<br/>  padding: 20px;<br/>}</span></pre><p id="c042" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们可以添加一个click事件侦听器来应用转换，并在转换完成时通过编写以下代码来更新div的内容:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="07d1" class="mq lc iq mh b gy mr ms l mt mu">const myDiv = document<br/>  .getElementById("my-div")</span><span id="1fa9" class="mq lc iq mh b gy mv ms l mt mu">myDiv<br/>  .addEventListener("transitionend",<br/>    () =&gt; {<br/>      myDiv.innerHTML = "transition event ended";<br/>    })</span><span id="8f2e" class="mq lc iq mh b gy mv ms l mt mu">myDiv<br/>  .addEventListener('click', () =&gt; {<br/>    myDiv.style.top = '55px'<br/>  })</span></pre><p id="1de7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">首先，我们有ID为<code class="fe me mf mg mh b">my-div</code>的div和<code class="fe me mf mg mh b">document.getElementById</code>。</p><p id="4115" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们用<code class="fe me mf mg mh b">'transitionend'</code>字符串调用返回的div上的<code class="fe me mf mg mh b">addEventListener</code>来添加一个<code class="fe me mf mg mh b">transitionend</code>事件监听器。</p><p id="27ca" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在事件处理函数中，我们将其<code class="fe me mf mg mh b">innerHTML</code>更新为<code class="fe me mf mg mh b">'transition event ended'</code>。</p><p id="6a61" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们向同一个div添加一个<code class="fe me mf mg mh b">click</code>事件监听器，将<code class="fe me mf mg mh b">top</code> CSS属性设置为<code class="fe me mf mg mh b">'55px'</code>。</p><p id="7aa4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在CSS中，我们添加了一个<code class="fe me mf mg mh b">transition</code>属性，以便在更改<code class="fe me mf mg mh b">top</code>属性时添加一些过渡效果。</p><p id="2833" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">并且效果会持续2秒。</p><p id="8094" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">现在，当我们单击div时，它会侧朝下。文本内容将变为“转换事件结束”，因为<code class="fe me mf mg mh b">transitionend</code>事件监听器已运行。</p><h1 id="a469" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="1480" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">当CSS3转换结束时，我们可以监听<code class="fe me mf mg mh b">transitonend</code>事件来运行JavaScript代码。</p><p id="5ddf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em> <a class="ae kc" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"> <strong class="kf ir"> <em class="mw">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Clean APIs in React with TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨ç±»å‹è„šæœ¬æ¸…é™¤Reactä¸­çš„API</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/a-cleaner-api-for-react-ts-components-47d0704a508c?source=collection_archive---------1-----------------------#2021-03-02">https://javascript.plainenglish.io/a-cleaner-api-for-react-ts-components-47d0704a508c?source=collection_archive---------1-----------------------#2021-03-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/35981b38f715829892e54b3f6eba66c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tSW6AxNWNhUJcULK"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@dannyhowe?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Danny Howe</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e970" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹å¦‚ä½•åˆ©ç”¨TypeScriptæ„å»ºæ›´å¥½çš„Reactç»„ä»¶æœ‰æ‰€å¯å‘ã€‚è¿™ç¯‡æ–‡ç« æ˜¯è‡´åŠ›äºå»ºç«‹å…³æ³¨éšç§çš„äººå·¥æ™ºèƒ½ç”»å»Š<a class="ae jz" href="https://taggr.ai/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"/></a>çš„æˆæœã€‚</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="45a6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨æ„å»º<a class="ae jz" href="https://taggr.ai/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> taggr </strong> </a> <strong class="kc io">ï¼Œ</strong>çš„æ—¶å€™ï¼Œæˆ‘æ›´æ·±å…¥åœ°ç ”ç©¶äº†TypeScriptï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘å¾ˆå–œæ¬¢åœ¨ç¼–è¯‘æ—¶æ³¨é‡Šç±»å‹å’Œæ•æ‰é”™è¯¯çš„æ–°å¢åŠŸèƒ½ï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶å…³é—­ã€‚</p><p id="7351" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">èµ·åˆï¼Œæ³¨é‡Šæ¯ä¸ªç»„ä»¶å’ŒåŠŸèƒ½å¯èƒ½ä¼šè®©äººæ„Ÿåˆ°ç•æƒ§å’Œé¢å¤–çš„å·¥ä½œï¼Œä½†æ˜¯éšç€ä»£ç åº“çš„è§„æ¨¡å’Œå¤æ‚æ€§çš„å¢é•¿ï¼Œå¥½å¤„å¼€å§‹æ˜¾ç°ã€‚</p><p id="b776" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ­£ç¡®åœ°è¾“å…¥ç»„ä»¶å’Œä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå¯ä»¥ä¸ºé¢†åŸŸçš„å®ä½“ä¿ç•™å”¯ä¸€çš„çœŸå®æ¥æºï¼Œä»è€Œæœ€å¤§é™åº¦åœ°å‡å°‘è·¨åº”ç”¨ç¨‹åºå±‚çš„äººä¸ºé”™è¯¯ã€‚</p><p id="8dad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦å¤–ï¼Œå¯ä»¥ä»<a class="ae jz" href="https://github.com/drwpow/openapi-typescript" rel="noopener ugc nofollow" target="_blank"> OpenAPI </a>ã€<a class="ae jz" href="https://graphql-code-generator.com/docs/plugins/typescript" rel="noopener ugc nofollow" target="_blank"> GraphQLæ¨¡å¼</a> â€¦ä¸­è‡ªåŠ¨ç”Ÿæˆç±»å‹è„šæœ¬å®šä¹‰ï¼Œè¿™æ˜¯ä¸€ä¸ªåŒèµ¢çš„å±€é¢ğŸ‰</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><p id="07c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨æ„å»ºReactç»„ä»¶æ—¶ï¼Œæˆ‘å°½é‡ä¿æŒå®ƒä»¬çš„APIå°½å¯èƒ½ç´§å¯†å’Œå¹²å‡€ã€‚ğŸ§¹ğŸ’¨</p><p id="bee9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¾¹ç•Œæ¸…æ™°çš„ç»„ä»¶æ˜“äºé‡ç”¨ã€æ‰©å±•ï¼Œè€Œä¸”æ€»ä½“æ¥è¯´å¾ˆå¥½ä½¿ç”¨ã€‚</p><p id="d805" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è®©æˆ‘ä»¬åˆ†æä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼Œè¯´æ˜å¦‚ä½•ä½¿ç”¨TypeScriptæ¥å®ç°æ›´ç®€æ´çš„ç»„ä»¶APIï¼Œå¥½å—ï¼Ÿ</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="8ce6" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated"><strong class="ak">ä¸è¦ä»ç»„ä»¶ä¸­</strong> <em class="md">æš´éœ²</em> <code class="fe me mf mg mh b"><em class="md">Prop</em></code> <em class="md">ç±»å‹ğŸ˜§</em></h1><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b13b" class="mq lg in mh b gy mr ms l mt mu">// paragraph.tsx<br/>export type Props = {<br/>  text: string; <br/>}</span><span id="86cf" class="mq lg in mh b gy mv ms l mt mu">const Paragraph = ({text}: Props) =&gt; &lt;p&gt;{text}&lt;/p&gt;</span><span id="d9b4" class="mq lg in mh b gy mv ms l mt mu">// title.tsx<br/>// Title is now tightly coupled to paragraph.txs &gt; Props<br/>import {Props} from './paragraph' </span><span id="df3c" class="mq lg in mh b gy mv ms l mt mu">const Title = ({text}: Props) =&gt; &lt;h1&gt;{text}&lt;/h1&gt;</span></pre><h2 id="08ef" class="mq lg in bd lh mw mx dn ll my mz dp lp kl na nb lt kp nc nd lx kt ne nf mb ng bi translated">ä¸ºä»€ä¹ˆè¿™æ ·ä¸å¥½ï¼Ÿ</h2><ul class=""><li id="5c47" class="nh ni in kc b kd nj kh nk kl nl kp nm kt nn kx no np nq nr bi translated">å½“ç›´æ¥å…¬å¼€<strong class="kc io">é“å…·</strong>ç±»å‹æ—¶ï¼Œæ²¡æœ‰ä»€ä¹ˆèƒ½é˜»æ­¢å…¶ä»–å¼€å‘è€…(ç”šè‡³æ˜¯ä½ æœªæ¥çš„è‡ªå·±ğŸ˜‚)åœ¨åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å¯¼å…¥å’Œæ‰©å±•è¿™äº›ç±»å‹ã€‚è¿™ä¼šç ´åç»„ä»¶çš„å°è£…ï¼Œå¹¶åœ¨ç»„ä»¶ä¹‹é—´åˆ›å»ºä¸å¿…è¦çš„ä¾èµ–å…³ç³»ã€‚</li><li id="a09a" class="nh ni in kc b kd ns kh nt kl nu kp nv kt nw kx no np nq nr bi translated">å¯¹åŸå§‹ç»„ä»¶çš„å±æ€§ç±»å‹çš„æ›´æ”¹å¯èƒ½ä¼šç ´ååº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ğŸ’¥</li><li id="919f" class="nh ni in kc b kd ns kh nt kl nu kp nv kt nw kx no np nq nr bi translated">ä¸€ä¸ªæ··ä¹±çš„APIï¼Œæ¨¡å—å¯¼å‡ºç»„ä»¶å’Œç±»å‹ã€‚è¿™å¯ä»¥å¾ˆå¿«å˜æˆç»„ä»¶æ–‡ä»¶å¯¼å‡ºå¤šç§ç±»å‹ï¼Œæ‰€ä»¥è¦å°å¿ƒğŸ§</li></ul></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="df80" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">æ›´å¥½çš„æ–¹æ³•âœ…</h1><p id="98ca" class="pw-post-body-paragraph ka kb in kc b kd nj kf kg kh nk kj kk kl nx kn ko kp ny kr ks kt nz kv kw kx ig bi translated">ä¸è¦ç›´æ¥å…¬å¼€ç»„ä»¶å±æ€§ç±»å‹ã€‚<strong class="kc io">ä¸è¦</strong>ã€‚</p><p id="eaf0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚æœæƒ³è¦è®¿é—®å¦ä¸€ä¸ªç»„ä»¶çš„å±æ€§ï¼Œè¿™æ ·æˆ‘å°±ä¸ç”¨é‡æ–°å£°æ˜ç‰¹å®šäºåŸŸçš„ç±»å‹äº†ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</p><p id="a077" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç»„ä»¶çš„<strong class="kc io">å±æ€§</strong>å®šä¹‰äº†ç»„ä»¶ä¸åº”ç”¨ç¨‹åºå…¶ä½™éƒ¨åˆ†(æˆ–ä¸–ç•Œ)çš„æ¥å£ğŸŒ).</p><p id="be59" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚æœä½ æœ‰ä¸€ä¸ª<code class="fe me mf mg mh b">UserProfile</code>ç»„ä»¶å¹¶ä¸”<strong class="kc io">é“å…·</strong>å£°æ˜äº†ä¸€ä¸ª<code class="fe me mf mg mh b">User</code>ç±»å‹ï¼Œä½ æƒ³åœ¨ä½ çš„åº”ç”¨ç¨‹åºçš„å…¶ä»–åœ°æ–¹ä½¿ç”¨å®ƒï¼Œå®ƒåº”è¯¥ä»<code class="fe me mf mg mh b">UserProfile</code>T10ä¸­æå–å‡ºæ¥ã€‚</p><p id="44a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å°†ç‰¹å®šé¢†åŸŸçš„ç±»å‹æå–åˆ°<code class="fe me mf mg mh b">./types</code>ä¸­ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­é‡ç”¨ã€‚</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="729a" class="mq lg in mh b gy mr ms l mt mu">// user-types.ts<br/>export interface User {<br/> name: string,<br/> age: number;<br/>};</span><span id="593f" class="mq lg in mh b gy mv ms l mt mu">// user-profile.tsx<br/>import {User} from './user-types';</span><span id="7f21" class="mq lg in mh b gy mv ms l mt mu">type Props = {<br/> user: User,<br/> date: string, // other props<br/>};</span><span id="3aa7" class="mq lg in mh b gy mv ms l mt mu">const UserProfile = ({user, date}: Props) =&gt; ...<br/>export default UserProfile;</span><span id="4712" class="mq lg in mh b gy mv ms l mt mu">// user-list.tsx<br/>import {User} from './user-types';</span><span id="d3bc" class="mq lg in mh b gy mv ms l mt mu">type Props = {<br/> users: User[],<br/>};</span><span id="4243" class="mq lg in mh b gy mv ms l mt mu">const UserList = ({users}: Props) =&gt; ...<br/>export default UserList;</span></pre><h2 id="f1c4" class="mq lg in bd lh mw mx dn ll my mz dp lp kl na nb lt kp nc nd lx kt ne nf mb ng bi translated">å¦‚æœæˆ‘éœ€è¦ä»å…¶ä»–åœ°æ–¹è®¿é—®ç»„ä»¶çš„å±æ€§ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</h2><p id="ec3a" class="pw-post-body-paragraph ka kb in kc b kd nj kf kg kh nk kj kk kl nx kn ko kp ny kr ks kt nz kv kw kx ig bi translated">å®ƒä»¬æ˜¯æƒ³è¦è®¿é—®ç»„ä»¶ç±»å‹çš„æœ‰æ•ˆç†ç”±ï¼Œæ¯”å¦‚ç”¨<a class="ae jz" href="https://medium.com/javascript-scene/do-react-hooks-replace-higher-order-components-hocs-7ae4a08b7b58" rel="noopener"> HOC </a> så¢å¼ºç»„ä»¶ã€‚</p><p id="e8b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è®©æˆ‘ä»¬æ£€æŸ¥ä¸‹ä¸€éƒ¨åˆ†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼</p></div><div class="ab cl ky kz hr la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ig ih ii ij ik"><h1 id="9c59" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">å±æ€§ç±»å‹æŸ¥æ‰¾âœ¨</h1><p id="55f3" class="pw-post-body-paragraph ka kb in kc b kd nj kf kg kh nk kj kk kl nx kn ko kp ny kr ks kt nz kv kw kx ig bi translated">æˆ‘ä»¬å¯ä»¥åˆ©ç”¨TypeScriptç±»å‹è§£ææ¥å®ç°æ­£ç¡®çš„ç±»å‹æŸ¥æ‰¾ã€‚</p><ol class=""><li id="3747" class="nh ni in kc b kd ke kh ki kl ob kp oc kt od kx oe np nq nr bi translated">è®¾ç½®å±æ€§ç±»å‹æŸ¥æ‰¾å¸®åŠ©ç¨‹åºï¼Œâ€œGetComponentProps â€:</li></ol><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="9c43" class="mq lg in mh b gy mr ms l mt mu">// utils.ts<br/>export type GetComponentProps&lt;T&gt; = T extends<br/>| React.ComponentType&lt;infer P&gt;<br/>| React.Component&lt;infer P&gt;<br/>? P<br/>: never;</span></pre><p id="2e63" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.å®šä¹‰æˆ‘ä»¬æƒ³è¦æ‰©å±•çš„ç»„ä»¶ï¼Œ<code class="fe me mf mg mh b">Title</code>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="f8f0" class="mq lg in mh b gy mr ms l mt mu">// title.tsx<br/>type Color = "RED" | "BLUE" | "GREEN";</span><span id="0318" class="mq lg in mh b gy mv ms l mt mu">type Props = {<br/> title: string;<br/> color: Color;<br/>};</span><span id="8993" class="mq lg in mh b gy mv ms l mt mu">const Title = ({ title, color }: Props) =&gt; (<br/>  &lt;h1 style={{ color }}&gt;{title}&lt;/h1&gt;<br/>);<br/>export default Title;</span></pre><p id="5b66" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">3.ä¼¸å‡º<code class="fe me mf mg mh b">Title</code>ç»„ä»¶ï¼ŒåŒæ—¶ä¿æŒ<strong class="kc io">å…¨ç±»å‹å®‰å…¨</strong>:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="99fd" class="mq lg in mh b gy mr ms l mt mu">// title-wrapper.tsx<br/>import Title from './title';<br/>import {GetComponentProps} from './utils';</span><span id="a25f" class="mq lg in mh b gy mv ms l mt mu">type Props = GetComponentProps&lt;typeof Title&gt; &amp; {<br/> onClick: () =&gt; void;<br/>};</span><span id="b025" class="mq lg in mh b gy mv ms l mt mu">const TitleWrapper = ({onClick, ...rest}: Props) =&gt; (<br/>  &lt;button onClick={onClick}&gt;<br/>    &lt;Title {...rest} /&gt; <br/>  &lt;/button&gt;<br/>);<br/>export default TitleWrapper;</span><span id="bd93" class="mq lg in mh b gy mv ms l mt mu">// index.ts<br/>import TitleWrapper from 'title-wrapper';</span><span id="60d5" class="mq lg in mh b gy mv ms l mt mu">// Full type safety and autocompletion! ğŸ‰<br/>const App = () =&gt;  (<br/> &lt;TitleWrapper<br/>  title="Hello there"<br/>  color="GREEN"<br/>  onClick={() =&gt; window.alert("title pressed")} <br/> /&gt;<br/>);</span></pre><p id="a95b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬è®¾æ³•ä»<code class="fe me mf mg mh b">TitleWrapper</code>è®¿é—®äº†<code class="fe me mf mg mh b">Title</code>çš„å±æ€§ï¼Œæ²¡æœ‰æ‰‹åŠ¨æš´éœ²å®ƒä»¬ï¼Œä¹Ÿæ²¡æœ‰ç ´åå°è£…ï¼Œå¤ªæ£’äº†ï¼ğŸ‰</p></div></div>    
</body>
</html>
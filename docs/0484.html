<html>
<head>
<title>How to automate Firebase app deployment with GitHub Actions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用GitHub动作自动部署Firebase应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-automate-firebase-app-deployment-with-github-actions-beb26e458e17?source=collection_archive---------4-----------------------#2021-01-29">https://javascript.plainenglish.io/how-to-automate-firebase-app-deployment-with-github-actions-beb26e458e17?source=collection_archive---------4-----------------------#2021-01-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="8446" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">开发人员应接不暇，要做的事情太多了:讨论解决方案、编写代码、获得评审、一次又一次地重写简单的功能。任何额外的手动步骤都会导致问题。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/b4f75fa2598d2b71018b43c262d6681e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GZO1oEtSkFY405QQK02VA.jpeg"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@marvelous?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Marvin Meyer</a> on <a class="ae lb" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="lc ld le"><p id="252f" class="jn jo lf jp b jq jr js jt ju jv jw jx lg jz ka kb lh kd ke kf li kh ki kj kk ij bi translated">一切可以自动化的东西，都必须自动化。</p></blockquote><p id="3a5f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">本教程帮助您自动化Firebase应用程序的部署过程。这个简短的例子为下面探索GitHub动作的强大功能提供了基础。</p><h1 id="0c8d" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">这个计划</h1><ol class=""><li id="5312" class="mh mi iq jp b jq mj ju mk jy ml kc mm kg mn kk mo mp mq mr bi translated">创建一个空的Firebase项目。</li><li id="a76b" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">手动将Firebase项目部署到Google云平台。</li><li id="123f" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">生成部署机密令牌。</li><li id="8e74" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">创建GitHub存储库。</li><li id="3f07" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">在GitHub操作上创建部署工作流。</li><li id="7620" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">将代码推送到Github并测试解决方案。</li></ol><h1 id="5bbc" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">开始之前</h1><p id="ed2e" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">有一个清单来确保您已经在本地机器上安装了所有的东西。</p><ol class=""><li id="1d36" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk mo mp mq mr bi translated">终端中的节点| try <code class="fe nd ne nf ng b">node -v</code>。</li><li id="4f09" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">Firebase账户(<a class="ae lb" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.firebase.google.com/</a>)和谷歌云计费账户(<a class="ae lb" href="https://console.cloud.google.com/billing" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/billing</a>)。</li><li id="c4e0" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">尝试终端中的<code class="fe nd ne nf ng b">firebase -V</code>和<code class="fe nd ne nf ng b">firebase login</code>。</li><li id="72a6" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk mo mp mq mr bi translated">您在GitHub上有一个帐户，帐户上有相关的SSH密钥。我的YouTube 频道上有一个<a class="ae lb" href="https://youtu.be/yjupZm_ysY0" rel="noopener ugc nofollow" target="_blank">视频可以帮你。</a></li></ol><h1 id="f413" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">1.创建一个空的Firebase项目</h1><ul class=""><li id="9773" class="mh mi iq jp b jq mj ju mk jy ml kc mm kg mn kk nh mp mq mr bi translated">运行终端应用程序</li><li id="eacb" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">执行命令:<code class="fe nd ne nf ng b">firebase project:create</code></li><li id="cc8d" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">选择唯一的项目id</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ni"><img src="../Images/30cfbb55058e2f4deac20c86a016beae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ITSJLnYqox0uWzFl2gDuoA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe nd ne nf ng b">firebase project:create</code></figcaption></figure><ul class=""><li id="6567" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">用<code class="fe nd ne nf ng b">mkdir unique-project</code>命令创建一个新目录(<em class="lf">唯一-项目</em>是一个目录名)</li><li id="244d" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">导航到目录<code class="fe nd ne nf ng b">cd unique-project</code></li><li id="5e26" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">用<code class="fe nd ne nf ng b">firebase init</code>命令初始化一个空的Firebase项目</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/9c293c26a694a6ef8351e37075ce37ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LxYlDsta-gYRM9daZUwNGw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe nd ne nf ng b">firebase init</code></figcaption></figure><ul class=""><li id="48b3" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">打开<code class="fe nd ne nf ng b">functions/index.js</code>文件，取消后面<code class="fe nd ne nf ng b">helloWorld</code>函数的注释，保存文件</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nk"><img src="../Images/33ca44bd1e0669d79f0ccddc1339be90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nfMnxFdVifNv7T5jTXH_uQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe nd ne nf ng b">functions/index.js</code></figcaption></figure><p id="cec8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">空项目已准备好发布。</p><h1 id="8cf8" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">2.手动将项目部署到GCloud平台</h1><p id="8a20" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">在同一终端窗口运行命令<code class="fe nd ne nf ng b">firebase deploy</code></p><p id="896f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">哎呀…</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nj"><img src="../Images/608aea98cdc74aecebb00dedb31b0ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sRGKwnDZSVrrQnNEZydWoQ.png"/></div></div></figure><p id="de75" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们需要升级该项目的计划，按照命令输出的链接，并选择“现收现付”。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nl"><img src="../Images/641e52945e01888eda6bee7239a43c6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ObrmeXVoQmlQjDTKLZt_Fw.png"/></div></div></figure><p id="aca5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请尝试再次部署该项目。运行<code class="fe nd ne nf ng b">firebase deploy</code>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nm"><img src="../Images/284d10330ec30988807794b4f65c4305.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kwb6Wmlu3mPdxq68DCzxlQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe nd ne nf ng b">firebase deploy</code></figcaption></figure><h1 id="3e6a" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">3.生成部署机密令牌</h1><p id="c49b" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">在同一终端窗口中运行命令<code class="fe nd ne nf ng b">firebase login:ci</code>。它生成部署令牌。令牌允许你从任何地方部署代码，而无需登录到你的谷歌账户。对我们来说非常有用。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nn"><img src="../Images/980b7b4b4e7013f913471acf0eb24b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UcmeZ0w1DHICbbKUO_SmJw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk"><code class="fe nd ne nf ng b">firebase login:ci</code></figcaption></figure><p id="570f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">将令牌保存在文本文件中，我们稍后会用到它。</p><h1 id="a999" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">4.创建GitHub存储库</h1><p id="a644" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">如果你不熟悉GitHub，我会帮你建立一个新的资源库。</p><ul class=""><li id="0268" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">打开Github.com的<a class="ae lb" href="http://github.com/" rel="noopener ugc nofollow" target="_blank">并登录</a></li><li id="8d23" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">点击右上角的“+”并选择“新建存储库”</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi no"><img src="../Images/1c745b323cc459b5740268f55df0b624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*vOvKLB6bpQQZLkVM0nBs0A.png"/></div></figure><ul class=""><li id="f09b" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">设置存储库名称，然后单击“创建存储库”</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi np"><img src="../Images/3078e61f79160682246a6a7d94b193d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4dODyEizF-dMSKxeqQ_Bog.png"/></div></div></figure><h1 id="a3b5" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">5.在GitHub操作上创建部署工作流</h1><p id="e07d" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">我们仍然在同一个终端窗口。让我们创建文件来设置工作流。</p><ul class=""><li id="c8ca" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">运行命令<code class="fe nd ne nf ng b">mkdir .github/workflows/ &amp;&amp; touch ./github/workflows/deploy.yml</code></li><li id="af7c" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">打开<code class="fe nd ne nf ng b">deploy.yml</code>文件并粘贴以下代码</li></ul><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="df18" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">保存文件。</p><p id="3680" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们需要将秘密令牌添加到存储库中:</p><ul class=""><li id="ca1b" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">转到存储库“设置”</li><li id="3186" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">点击“秘密”</li><li id="41f6" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">点击“新建存储库密码”</li><li id="1fdd" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">使用“GCLOUD_TOKEN”作为“名称”</li><li id="c6b0" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">将令牌粘贴为您之前生成的“值”</li><li id="e23b" class="mh mi iq jp b jq ms ju mt jy mu kc mv kg mw kk nh mp mq mr bi translated">点击“添加密码”按钮</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ns"><img src="../Images/01283bbdb5ede3473b406a4b1b4b6603.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G34ilBgWz_bLKzexdtVolw.png"/></div></div></figure><h1 id="ba73" class="lj lk iq bd ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg bi translated">6.将代码推送到Github并测试解决方案。</h1><p id="ccec" class="pw-post-body-paragraph jn jo iq jp b jq mj js jt ju mk jw jx jy mx ka kb kc my ke kf kg mz ki kj kk ij bi translated">运行命令序列，不要忘记替换我的用户名和库名。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nq nr l"/></div></figure><p id="d8b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">结果:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nt"><img src="../Images/a4d4b2bb0c957479d08ac6799f8d648f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7di10wNRiuIqZxYEfxwVAQ.png"/></div></div></figure><p id="7e5a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在您的GitHub存储库中检查结果。代码已上传:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nu"><img src="../Images/68f87c9575b6f70c126d976f42c768de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mrUaRLyxZvDOn3B8M6jEKw.png"/></div></div></figure><p id="1c50" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">动作被触发:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nv"><img src="../Images/8dcf82fbe4ef7986ef12088e226f359f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKjMYi97PBdlfC4M7hlsBQ.png"/></div></div></figure><p id="9c74" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">并且执行时没有任何错误:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nw"><img src="../Images/d9c7f45733cf3a86df83095f17ab18ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FR5TPzAMyKmXv_W1NYBKgw.png"/></div></div></figure><p id="514b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">让我们测试我们的Firebase应用程序。</p><ul class=""><li id="ceec" class="mh mi iq jp b jq jr ju jv jy na kc nb kg nc kk nh mp mq mr bi translated">遵循第二步中的“项目URL ”,或者打开Firebase控制台</li></ul><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi nx"><img src="../Images/2ef475e3e0ddb2c80bd9fb55c1e58198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V0MoJjP7CSXNmNuDrS1AHw.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Firebase console</figcaption></figure><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi ny"><img src="../Images/5f29d1af37a92bac51a8a817339e914d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JPbbr-wzuStngiNWCciHWA.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Call the URL</figcaption></figure><p id="c0bd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您得到相同的结果，那么恭喜您，您已经自动部署了代码！从现在开始，主分支机构中的任何更新都将触发部署流程。</p><p id="48c2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我希望本教程能够帮助您运行您的第一个工作流，并激发您对自动化的兴趣。</p><p id="c7fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">如果你面临问题，请不要犹豫在评论中提问，并订阅我的</strong> <a class="ae lb" href="https://www.youtube.com/channel/UCbTe2uHWiMWIN2eW9_ViqPQ" rel="noopener ugc nofollow" target="_blank"> <strong class="jp ir"> YouTube频道</strong> </a> <strong class="jp ir">了解更多与技术发展相关的视频。</strong></p></div></div>    
</body>
</html>
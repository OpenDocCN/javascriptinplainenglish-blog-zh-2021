<html>
<head>
<title>How to Build a Custom Date Component using Vanilla JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用普通JavaScript构建自定义日期组件</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/bulding-a-custom-date-component-using-vanilla-javascript-4cb6e8f547a?source=collection_archive---------8-----------------------#2021-12-03">https://javascript.plainenglish.io/bulding-a-custom-date-component-using-vanilla-javascript-4cb6e8f547a?source=collection_archive---------8-----------------------#2021-12-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/372d82d016d386de4ce14c4e8f815694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FbRPqtuhJKmQr9Wb"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@waldemarbrandt67w?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Waldemar Brandt</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6942" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最近，我们有理由重新设计我们收集生日的方式(以及其他日期在<a class="ae jz" href="https://seraphin.be" rel="noopener ugc nofollow" target="_blank"> Seraphin </a>)。虽然默认的浏览器实现在开始时可以做到这一点，但我们面临着几个问题:</p><ol class=""><li id="3077" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx ld le lf lg bi translated">并非所有浏览器的实现都是一致的。</li><li id="833d" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx ld le lf lg bi translated">大多数浏览器打开的日历输入都聚焦于今天的日期，这让我们的用户很难输入他们的生日。</li></ol><p id="d2c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们决定创建日期输入组件来解决这个问题(使用Vue.js)。</p><p id="ff32" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然结果非常好，但它确实让我问自己，如果我们用普通的JavaScript编写相同的行为，会有什么不同。</p><p id="8902" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">因此，这是本系列的第二篇文章，展示了我用普通JavaScript编写的自定义日期组件。在<a class="ae jz" href="https://pablo-curell-mompo.medium.com/building-a-custom-date-input-component-in-vue-js-b5641b7b7c2b" rel="noopener">第一部分</a>中，我们探索了如何在Vue.js中构建相同的元素，我们将通过比较两者来结束这个系列。</p><h1 id="d7bd" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">规格</h1><p id="d03b" class="pw-post-body-paragraph ka kb in kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">我们的DateInput组件的规范表现为浏览器上的本地日期输入减去日历选择，即:</p><ul class=""><li id="9166" class="ky kz in kc b kd ke kh ki kl la kp lb kt lc kx mp le lf lg bi translated">我们只能输入两位数来表示日和月。</li><li id="acff" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">我们只能输入四位数的年份。</li><li id="e2f7" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">这一天应该在1到31之间</li><li id="721c" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">月份应该在1到12之间</li><li id="24fc" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">年份应该在1900年到2100年之间(这个是我们的，不是浏览器的)</li><li id="18a2" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">我们需要通过直接输入数字或用箭头键上下移动来输入日期。</li><li id="4d8f" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">如果我们用箭头键输入日期，并达到上限或下限，显示的数字应该循环。</li><li id="64c0" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">如果我们通过输入数字来输入日期，输入应该是有边界的(max(输入，高边界)或min(输入，低边界)</li><li id="54fa" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">我们应该以直观的方式让用户进入下一个领域。</li><li id="1371" class="ky kz in kc b kd lh kh li kl lj kp lk kt ll kx mp le lf lg bi translated">我们应该证实日期是正确的。</li></ul><h1 id="850c" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">date-input.html</h1><p id="3f75" class="pw-post-body-paragraph ka kb in kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">下面是日期输入的代码(你也可以在这里找到<a class="ae jz" href="https://github.com/pablocm90/learning/blob/main/dateinput/vanillajs-example/date-input.html" rel="noopener ugc nofollow" target="_blank"/>)。你应该能够复制粘贴它，并使用它:)</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/4c09d9048093b41b7f888ea881d7c05d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KkZPNf3gMneupu_-PAwC9w.png"/></div></div></figure><h1 id="160b" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">关注关键要素:</h1><p id="7eea" class="pw-post-body-paragraph ka kb in kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">每一天、年和月都有一个专用对象:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mv"><img src="../Images/deededeafc9483ac701f64aa1c70b4db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cu-X7y1Q8LnNQmFk_TyEjA.png"/></div></div></figure><p id="50a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这些对象将允许我们在一个循环中处理它们(尽管我们必须考虑年份输入)。在这个循环中，我们有一个案例，它将检查被按下的输入键，并做出相应的反应。</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mw"><img src="../Images/6ef20dc129aa37027dc4b40169c9e66f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ITArJATusGn_2PQKXTZ1A.png"/></div></div></figure><p id="4b97" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们有四种方法来处理不同的输出:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/70dc6124804ab8adcad930fc6532da70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V1rxdXpftlLeZBsnSKDubQ.png"/></div></div></figure><p id="45c0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们按下向上箭头时，将增加值</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/f9fd9741428c0c764c8db40845a1a7c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FnTqgWiLFdV5dI8qmYuuhA.png"/></div></div></figure><p id="be28" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们按下向下箭头时会减少数值</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/bdbebd5ed6e19c961a6c36ad142ce0b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oCh7bZsEP-zUI1hiKHY-YQ.png"/></div></div></figure><p id="5883" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">会根据我们通过键盘输入的数字做出反应</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/2524df791293f80a65946352e42d72c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cOAKeZ_NG3j159q9UKIU9g.png"/></div></div></figure><p id="9442" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">当我们按退格键时，将清除输入字段</p><p id="4805" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们总是格式化该值，并检查它是否落在页边距内:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/a45d701ba1210002776fcf56c7ec6fdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1V97oRSItty5u0Fv4gTmw.png"/></div></div></figure><p id="6078" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">和</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nb"><img src="../Images/0f8b8e7acd0c87378217302f728c0e25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mZ8ROtk2QtG566DBeZfbzA.png"/></div></div></figure><p id="0b29" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">最后，我们检查在输入数字的情况下是否应该将用户发送到下一个元素。</p><p id="a044" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">与我们的Vue日期输入组件一样，我们需要检查错误，当我们模糊年份输入时，我们使用相同的技巧:</p><figure class="mr ms mt mu gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/495fd559b41050a0fa9eeaaeadded6bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XfoWFgn74FcuctGZdIWWdg.png"/></div></div></figure><h1 id="f2fb" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">我应该用这个吗？</h1><p id="2931" class="pw-post-body-paragraph ka kb in kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">如果您不想导入一个漂亮的日期选择器库，或者想要一个没有让用户使用日期选择器的选项的输入，这是一个相当容易实现且使用直观的方法。</p><p id="65db" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果可能的年份范围相对较大，那么与日期选择器相比，这种日期输入甚至更有帮助(因为在日期选择器中更改年份通常很麻烦)。</p><h1 id="298a" class="lm ln in bd lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj bi translated">结论</h1><p id="f67f" class="pw-post-body-paragraph ka kb in kc b kd mk kf kg kh ml kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">用vanilla语言制作一个定制的日期组件是很复杂的。尽管如此，它背后的逻辑非常简单(我花了几个小时从我的Vue.js自定义日期输入中翻译出来，我花了大部分时间试图对它进行一点重构。</p><p id="ac92" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果使用日期选择器对用户来说有问题，您也许可以使用这样的组件。</p><p id="9326" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">请继续关注第3部分，并在Twitter上关注<a class="ae jz" href="https://twitter.com/PCurell" rel="noopener ugc nofollow" target="_blank"> @pcurell </a>以了解我何时发布它:)</p><p id="523b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="nc">更多内容看</em> <a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc io"> <em class="nc">说白了. io </em> </strong> </a> <strong class="kc io"> <em class="nc">。</em> </strong> <em class="nc">报名参加我们的</em><strong class="kc io"><em class="nc"/></strong><a class="ae jz" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="nc">免费每周简讯点击这里</em> </strong> </a> <strong class="kc io"> <em class="nc">。</em>T29】</strong></p></div></div>    
</body>
</html>
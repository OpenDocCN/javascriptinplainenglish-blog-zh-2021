<html>
<head>
<title>How to Search in a Nested JSON Object with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript在嵌套的JSON对象中搜索</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-search-in-nested-json-object-with-javascript-8ccfc957e95e?source=collection_archive---------7-----------------------#2021-11-02">https://javascript.plainenglish.io/how-to-search-in-nested-json-object-with-javascript-8ccfc957e95e?source=collection_archive---------7-----------------------#2021-11-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8b2f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">用JavaScript在嵌套的JSON对象中按键查找。</h2></div><p id="f40f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这是我在嵌套JSON中搜索的方法，欢迎你回复这篇文章分享你的方法。我将在这里分享流程和编程部分。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="gh gi lb"><img src="../Images/7a4402568c7b9d676376f6b72c06d077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n0Vmb0D0ewUERChJ"/></div></div><figcaption class="ln lo gj gh gi lp lq bd b be z dk">Photo by <a class="ae lr" href="https://unsplash.com/@mullyadii?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Mulyadi</a> on <a class="ae lr" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="lc ld le lf gt lg"><div class="bz fp l di"><div class="ls lt l"/></div></figure><p id="a09f" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae lr" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww/join" rel="noopener ugc nofollow" target="_blank">源代码</a></p><p id="9eef" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时候，我需要在JSON对象上处理一些稍微复杂的操作。</p><p id="a1a9" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们有一个名为employees的JSON对象。我想知道玛丽的部门是什么，也就是说我想拿到关键的“会计”。</p><pre class="lc ld le lf gt lu lv lw lx aw ly bi"><span id="26d7" class="lz ma iq lv b gy mb mc l md me">{</span><span id="4bcd" class="lz ma iq lv b gy mf mc l md me">"accounting" : [</span><span id="5098" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "John",</span><span id="2404" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Doe",</span><span id="2cfc" class="lz ma iq lv b gy mf mc l md me">"age"       : 23 },</span><span id="9190" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Mary",</span><span id="0615" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Smith",</span><span id="6531" class="lz ma iq lv b gy mf mc l md me">"age"      : 32 }</span><span id="2bc0" class="lz ma iq lv b gy mf mc l md me">],</span><span id="915a" class="lz ma iq lv b gy mf mc l md me">"sales"      : [</span><span id="f324" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Sally",</span><span id="5ab7" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Green",</span><span id="8f83" class="lz ma iq lv b gy mf mc l md me">"age"      : 27 },</span><span id="713c" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Jim",</span><span id="644b" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Galley",</span><span id="b4f1" class="lz ma iq lv b gy mf mc l md me">"age"       : 41 }</span><span id="6c7d" class="lz ma iq lv b gy mf mc l md me">]</span><span id="b023" class="lz ma iq lv b gy mf mc l md me">}</span></pre><p id="4658" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在这篇文章中，我不会做很多检查，只想分享流量。</p><p id="f94a" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我做的第一步是展平这个JSON对象，然后我想得到“Mary”的键。这次的关键是“accounting.1.firstName”。然后我会用“.”来分割这个字符串，那么得到第一个词，就是“会计”。</p><pre class="lc ld le lf gt lu lv lw lx aw ly bi"><span id="6989" class="lz ma iq lv b gy mb mc l md me">{<br/>  'accounting.0.firstName': 'John',<br/>  'accounting.0.lastName': 'Doe',<br/>  'accounting.0.age': 23,<br/>  'accounting.1.firstName': 'Mary',<br/>  'accounting.1.lastName': 'Smith',<br/>  'accounting.1.age': 32,<br/>  'sales.0.firstName': 'Sally',<br/>  'sales.0.lastName': 'Green',<br/>  'sales.0.age': 27,<br/>  'sales.1.firstName': 'Jim',<br/>  'sales.1.lastName': 'Galley',<br/>  'sales.1.age': 41<br/>}</span></pre><h2 id="8b28" class="lz ma iq bd mg mh mi dn mj mk ml dp mm ko mn mo mp ks mq mr ms kw mt mu mv mw bi translated">编程部分</h2><p id="840b" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated">创建一个随意命名的文件夹，比如“flatten_employees”。在根文件夹中创建一个index.js。</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/be5206bb5ee64356c2cae7562321d2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:514/format:webp/1*DzzCCL2xhEG-H-ePhA3KHw.png"/></div></figure><p id="3674" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到终端并键入</p><pre class="lc ld le lf gt lu lv lw lx aw ly bi"><span id="31b7" class="lz ma iq lv b gy mb mc l md me">npm init --y</span></pre><p id="ed52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">稍后安装扁平包来扁平JSON</p><pre class="lc ld le lf gt lu lv lw lx aw ly bi"><span id="6776" class="lz ma iq lv b gy mb mc l md me">npm i flat</span></pre><p id="74c0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">转到index.js</p><pre class="lc ld le lf gt lu lv lw lx aw ly bi"><span id="6045" class="lz ma iq lv b gy mb mc l md me">import flatten from "flat"</span><span id="d6bc" class="lz ma iq lv b gy mf mc l md me">const employees = {</span><span id="3444" class="lz ma iq lv b gy mf mc l md me">"accounting" : [</span><span id="90b3" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "John",</span><span id="a04c" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Doe",</span><span id="8eef" class="lz ma iq lv b gy mf mc l md me">"age"       : 23 },</span><span id="d9ba" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Mary",</span><span id="daf2" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Smith",</span><span id="9fda" class="lz ma iq lv b gy mf mc l md me">"age"      : 32 }</span><span id="6ad0" class="lz ma iq lv b gy mf mc l md me">],</span><span id="7af0" class="lz ma iq lv b gy mf mc l md me">"sales"      : [</span><span id="1ebd" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Sally",</span><span id="9973" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Green",</span><span id="4407" class="lz ma iq lv b gy mf mc l md me">"age"      : 27 },</span><span id="c627" class="lz ma iq lv b gy mf mc l md me">{ "firstName" : "Jim",</span><span id="f646" class="lz ma iq lv b gy mf mc l md me">"lastName"  : "Galley",</span><span id="edd2" class="lz ma iq lv b gy mf mc l md me">"age"       : 41 }</span><span id="b9a3" class="lz ma iq lv b gy mf mc l md me">]</span><span id="d145" class="lz ma iq lv b gy mf mc l md me">}</span><span id="32c3" class="lz ma iq lv b gy mf mc l md me">const flatten_employees = flatten(employees);</span><span id="f4e7" class="lz ma iq lv b gy mf mc l md me">const name = "Mary"</span><span id="41bf" class="lz ma iq lv b gy mf mc l md me">const found = Object.keys(flatten_employees).find(key=&gt;flatten_employees[key]===name);</span><span id="70e8" class="lz ma iq lv b gy mf mc l md me">const team = found.split(".",1);</span><span id="5911" class="lz ma iq lv b gy mf mc l md me">console.log(`${name} is from ${team} team` )</span></pre><p id="e2e0" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本例中，我们使用flatten_employees来存储扁平化的JSON。</p><p id="e89c" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，如果我们想知道玛丽在哪个部门，我们将名称设置为“玛丽”。</p><p id="1ba5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们使用Object.keys来查找哪个键的值等于Mary。</p><p id="fbc5" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们得到密钥<code class="fe nd ne nf lv b">accounting.1.firstName</code>并将其存储在常量“found”中。</p><p id="1b43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后，我们通过将<code class="fe nd ne nf lv b">.</code>作为分隔符来分割它。并且只取第一个字，存储为常量“team”。</p><p id="5d02" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">通过在终端内部运行<code class="fe nd ne nf lv b">nodemon index</code>，句子的输出是</p><figure class="lc ld le lf gt lg gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/0b45f8a8b6c1583a171be11e63e1c543.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*LqBAsw8NWLUKcJrUUZV16A.png"/></div></figure><h1 id="4d3c" class="nh ma iq bd mg ni nj nk mj nl nm nn mm jw no jx mp jz np ka ms kc nq kd mv nr bi translated">关注我们:<a class="ae lr" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae lr" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae lr" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae lr" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae lr" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae lr" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae lr" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad </a></h1><p id="41fe" class="pw-post-body-paragraph kf kg iq kh b ki mx jr kk kl my ju kn ko mz kq kr ks na ku kv kw nb ky kz la ij bi translated"><em class="ns">更多内容看</em> <a class="ae lr" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kh ir"> <em class="ns">说白了</em></strong></a></p></div></div>    
</body>
</html>
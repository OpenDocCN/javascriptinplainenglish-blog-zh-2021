<html>
<head>
<title>Debugging Server-Side TypeScript With WebStorm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用WebStorm调试服务器端类型脚本</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/debugging-server-side-typescript-with-webstorm-b9d661f64d5?source=collection_archive---------10-----------------------#2021-01-14">https://javascript.plainenglish.io/debugging-server-side-typescript-with-webstorm-b9d661f64d5?source=collection_archive---------10-----------------------#2021-01-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/8039ee112d57a357a8658cf48fac1953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E7Lobc1_GDsnon8DnT_tJw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk"><a class="ae kc" href="https://flic.kr/p/fBpBZY" rel="noopener ugc nofollow" target="_blank">https://flic.kr/p/fBpBZY</a></figcaption></figure><p id="9fa8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">世界似乎正朝着结合Node.js使用TypeScript的方向发展。从另一个角度来看，如果您可以假装<a class="ae kc" href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md#3.1" rel="noopener ugc nofollow" target="_blank">【任何】</a>类型不存在，那么TypeScript几乎就像是一种强类型语言。</p><p id="707e" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这篇博文向您展示了如何在WebStorm中为服务器端TypeScript项目设置调试器。如果您希望调试TypeScript编译器本身或使用TypeScript的node js项目，这篇文章中的说明应该有用。这两者并不完全相同，但出于某种原因，我很想花时间来检查TypeScript项目的内部结构。我将在以后的博客中详细介绍标准TypeScript node js项目的问题解决和调试。</p><p id="0514" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">从https://github.com/Microsoft/TypeScript<a class="ae kc" href="https://github.com/Microsoft/TypeScript" rel="noopener ugc nofollow" target="_blank"/>获取打字稿源<strong class="kf ir"/></p><p id="baaf" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">如果您想调试使用TypeScript编写的客户端应用程序，请查看:</strong></p><p id="0784" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://www.jetbrains.com/help/idea/running-and-debugging-TypeScript.html" rel="noopener ugc nofollow" target="_blank">https://www . jetbrains . com/help/idea/running-and-debugging-typescript . html</a></p><p id="8cd7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">使用Visual Studio代码调试TypeScript:</strong></p><p id="4a4f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="https://code.visualstudio.com/docs/TypeScript/TypeScript-debugging" rel="noopener ugc nofollow" target="_blank">https://code . visual studio . com/docs/TypeScript/TypeScript-调试</a></p><h1 id="7be0" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">为服务器端TypeScript应用程序设置调试的一般步骤</h1><p id="23f2" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">—在tsconfig.json文件的compilerOptions部分添加<code class="fe me mf mg mh b">"sourceMap":true</code>。<br/>—ts config . JSON文件应提及输出文件或输出文件夹。如果未指定，则假设其为<code class="fe me mf mg mh b">&lt;base directory&gt;/build</code>。输出目录是生成的js文件所在的位置。<br/> —在运行&gt;编辑配置窗口中，点击+号并选择节点。Js选项。<br/> —在弹出的模态中添加输出目录作为工作目录。<br/> —将生成的index.js或main.js文件添加到javascript文件字段的输出文件夹中。如果一切都做得正确，你现在应该能够在你的类型脚本代码中设置断点，并通过调试器命中它们。</p><h1 id="98db" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">让断点在TypeScript编译器源代码中工作</h1><p id="9e1a" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated"><strong class="kf ir">可选:设置HelloWorld类型脚本项目。</strong></p><p id="350a" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果您已经有了想要使用的typescript代码，就没有必要设置hello world项目。typescript编译器需要传递一些东西来命中断点并完成它的工作。</p><p id="f96b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个文件夹，并在其中进行更改。这个文件夹叫什么并不重要，所以你可以随意把“例子”改成最适合你的。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a778" class="mq lc iq mh b gy mr ms l mt mu">mkdir examples &amp;&amp; cd examples</span></pre><p id="cb20" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">创建一个名为“hello.ts”的新文件，并粘贴以下代码。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8add" class="mq lc iq mh b gy mr ms l mt mu">interface Person {<br/>  firstName: string;<br/>  lastName: string;<br/>}<br/><br/>function greeter(person: Person) {<br/>  return "Hello, " + person.firstName + " " + person.lastName;<br/>}<br/><br/>let user = { firstName: "Jane", lastName: "User" };<br/><br/>console.log(user);</span></pre><p id="ef08" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在同一个文件夹中创建另一个名为“tsconfig.json”的文件。将下面的内容复制粘贴到其中。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8f5b" class="mq lc iq mh b gy mr ms l mt mu">{<br/>  "compilerOptions": {<br/>    "removeComments": false,<br/>    "target": "es6",<br/>    "module": "commonjs",<br/>    "declaration": false,<br/>    "sourceMap": true,<br/>    "lib": ["es6", "scripthost"],<br/>    "strictNullChecks": true,<br/>    "newLine": "lf",<br/>    "types": ["node"]<br/>  },<br/>  "files": [<br/>    "produceLKG.ts",<br/>    "buildProtocol.ts",<br/>    "processDiagnosticMessages.ts",<br/>    "generateLocalizedDiagnosticMessages.ts",<br/>    "configurePrerelease.ts",<br/>    "word2md.ts"<br/>  ]<br/>}</span></pre><h1 id="2219" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">克隆并设置类型脚本报告</h1><p id="1648" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">从<a class="ae kc" href="https://github.com/Microsoft/TypeScript" rel="noopener ugc nofollow" target="_blank">https://github.com/Microsoft/TypeScript</a>克隆TypeScript repo，并按照说明进行设置。您最好将它放在另一个目录中，而不是放在您在上一步中创建的目录中。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="8c9f" class="mq lc iq mh b gy mr ms l mt mu">git clone https://github.com/Microsoft/TypeScript &amp;&amp; cd TypeScript</span></pre><p id="7714" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">README.md中包含了构建TypeScript编译器的说明，但这里是您主要需要做的事情。一旦切换到TypeScript目录，如果还没有Gulp.js，就安装它。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="ed87" class="mq lc iq mh b gy mr ms l mt mu">npm install -g gulp<br/>npm install</span></pre><p id="48f9" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">最后构建编译器——运行</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="938d" class="mq lc iq mh b gy mr ms l mt mu">gulp local</span></pre><p id="b7e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦这一步完成，我们就可以通过运行下面的代码来测试编译器了。我假设您的hello.ts文件在examples目录中，并且只是上一级。</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="1a0f" class="mq lc iq mh b gy mr ms l mt mu">node built/local/tsc.js ../examples/hello.ts</span></pre><p id="7222" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">上述命令的输出应该是一个hello.js文件。不要期望看到代码的输出。记住这是编译器，所以如果hello.js文件成功生成，那么一切都很好，一切都正常工作。</p><h1 id="4d64" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">在WebStorm中打开TypeScript源</h1><p id="7db3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">在WebStorm中打开您的本地TypeScript repo。这应该相当简单。使用欢迎屏幕上的打开按钮，或者从文件菜单中选择打开。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/f083b98e260ba7b8c260e08214955ff9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1022/format:webp/0*rPtx2zfXR6FE3qgs.png"/></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Open TypeScript source in Webstorm</figcaption></figure><p id="df1b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">请参考<a class="ae kc" href="https://www.jetbrains.com/help/webstorm/opening-reopening-and-closing-projects.html" rel="noopener ugc nofollow" target="_blank">此链接</a>了解WebStorm中打开项目的更多详细信息。</p><h1 id="1fe1" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">设置运行&gt;编辑配置</h1><p id="def0" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">是时候设置运行/调试配置了。</p><p id="432b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">节点解释器</strong></p><p id="7214" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应该指向您选择的节点解释器。我用的是版本<code class="fe me mf mg mh b">10.15.0</code>。任何10或以上的都可以。</p><p id="10cc" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">工作目录</strong></p><p id="9417" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应该指向你的输出文件夹。除非你改变了什么，否则这个应该是<code class="fe me mf mg mh b">built/local</code>。</p><p id="dbc1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir"> Javascript文件</strong></p><p id="9e07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应该指向输出目录中生成的tsc.js文件。这个文件应该是在本地运行gulp时生成的。</p><p id="30e3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><strong class="kf ir">应用参数</strong></p><p id="f567" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">应该指向您开始时生成的hello.ts文件。完成后，单击确定。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mw"><img src="../Images/6507a0bd1d0920f8ba9c6f85929b15ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rY-yxmAV62_oBZiG.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Run/Debug Configuration</figcaption></figure><h1 id="a595" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">试运行</h1><p id="2dfd" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">你已经准备好做测试了。在parser.ts中设置一个应该在<code class="fe me mf mg mh b">TypeScript &gt; src &gt; compiler &gt; parser.ts</code>的断点，然后点击debugger按钮。调试器窗口应该会打开，并向您显示类似下面的内容。</p><figure class="mi mj mk ml gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mx"><img src="../Images/d3d197a4fff9970dee8c6961a8884f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*2frdpkdSKb06bBZ2.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Debugging in action.</figcaption></figure><p id="ab68" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果你已经走到这一步，恭喜你！感谢您的阅读。希望这篇文章让您对新的调试能力感到兴奋。</p><h1 id="223d" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">有用的链接</h1><ul class=""><li id="089c" class="my mz iq kf b kg lz kk ma ko na ks nb kw nc la nd ne nf ng bi translated"><a class="ae kc" href="https://github.com/Microsoft/TypeScript" rel="noopener ugc nofollow" target="_blank"> TypeScript官方Github回购</a></li><li id="8695" class="my mz iq kf b kg nh kk ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae kc" href="https://www.jetbrains.com/help/webstorm/creating-projects-in-product.html" rel="noopener ugc nofollow" target="_blank">Jetbrains——在WebStorm中创建定制项目</a></li><li id="78ba" class="my mz iq kf b kg nh kk ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae kc" href="https://www.jetbrains.com/help/webstorm/running-and-debugging-typescript.html#ws_ts_run" rel="noopener ugc nofollow" target="_blank">调试客户端打字稿应用</a></li><li id="ffb9" class="my mz iq kf b kg nh kk ni ko nj ks nk kw nl la nd ne nf ng bi translated"><a class="ae kc" href="https://yeoman.io/learning/resources.html" rel="noopener ugc nofollow" target="_blank">用于打字应用的约曼生成器</a></li></ul><h1 id="ea5b" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">封面图像源</h1><p id="d311" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">预览图片来源:<a class="ae kc" href="https://flic.kr/p/fBpBZY" rel="noopener ugc nofollow" target="_blank">https://flic.kr/p/fBpBZY</a></p></div><div class="ab cl nm nn hu no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="ij ik il im in"><p id="622f" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="nt">原载于</em><a class="ae kc" href="https://servingniches.org/posts/2019-05-28___debugging_serverside_typescript_with_webstorm/" rel="noopener ugc nofollow" target="_blank"><em class="nt">https://servingniches.org</em></a><em class="nt">。</em></p></div></div>    
</body>
</html>
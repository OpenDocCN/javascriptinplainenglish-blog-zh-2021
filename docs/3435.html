<html>
<head>
<title>Let’s Build a CRUD Website with React and an External API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让我们用React和外部API构建一个CRUD网站</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-build-a-crud-website-with-react-and-an-external-api-157d126f3cf2?source=collection_archive---------0-----------------------#2021-07-12">https://javascript.plainenglish.io/lets-build-a-crud-website-with-react-and-an-external-api-157d126f3cf2?source=collection_archive---------0-----------------------#2021-07-12</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="fd17" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何用<strong class="ak"> React </strong>和一个外部<strong class="ak"> API </strong>创建web应用程序来执行<strong class="ak"> CRUD </strong>操作</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi kc"><img src="../Images/0e452b17c8bf4683d2760ba7eae0c9df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*bGxcDx-4Kzy_x75e-hXXpQ.jpeg"/></div></figure><p id="b6b8" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><strong class="km io"> CRUD </strong>操作是操纵数据的四种基本操作，包括<strong class="km io">C</strong>reate/<strong class="km io">C</strong>onstruct、<strong class="km io"> R </strong> ead、<strong class="km io"> U </strong> pdate和<strong class="km io"> D </strong> elete。我们将通过使用来自MeCallAPI.com<a class="ae lg" href="https://www.mecallapi.com/" rel="noopener ugc nofollow" target="_blank">的外部<strong class="km io"> API </strong>来执行<strong class="km io"> CRUD </strong>操作。</a></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lh"><img src="../Images/08fce2d9b0a8acd40f2a9f28342d7cf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MnCBqr3HGVgBGXzDbK_KYw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk"><a class="ae lg" href="https://www.mecallapi.com/" rel="noopener ugc nofollow" target="_blank">MeCallAPI.com</a></figcaption></figure><p id="d076" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">这是一个例子，我们想从这篇文章的教程:<a class="ae lg" href="https://www.mecallapi.com/crud/" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/crud/</a>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi lq"><img src="../Images/f8f36700dddd3a244f8c3207ffab07cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ogCwwRk_unRU6vPVYMdTYA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk"><a class="ae lg" href="https://www.mecallapi.com/crud/" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/crud/</a></figcaption></figure><h2 id="4ca7" class="lr ls in bd lt lu lv dn lw lx ly dp lz kt ma mb mc kx md me mf lb mg mh mi mj bi translated">软件安装</h2><ul class=""><li id="f86e" class="mk ml in km b kn mm kq mn kt mo kx mp lb mq lf mr ms mt mu bi translated"><strong class="km io">node . js</strong>T28】https://nodejs.org</li></ul><h1 id="85ed" class="mv ls in bd lt mw mx my lw mz na nb lz jt nc ju mc jw nd jx mf jz ne ka mi nf bi translated">我们开始吧！</h1><p id="cd0f" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt ng kv kw kx nh kz la lb ni ld le lf ig bi translated">创建一个初始的<strong class="km io">反应</strong>项目:</p><pre class="kd ke kf kg gt nj nk nl nm aw nn bi"><span id="5ea6" class="lr ls in nk b gy no np l nq nr">npx create-react-app react-crud<br/>cd react-crud</span></pre><p id="a801" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">安装附加软件包:</p><ul class=""><li id="5104" class="mk ml in km b kn ko kq kr kt ns kx nt lb nu lf mr ms mt mu bi translated"><strong class="km io">材质UI </strong>:我们将使用材质UI中的UI组件。</li><li id="330d" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated"><strong class="km io"> react-router-dom </strong>在我们的应用程序中管理路由和路径。</li></ul><pre class="kd ke kf kg gt nj nk nl nm aw nn bi"><span id="6f90" class="lr ls in nk b gy no np l nq nr">npm install @material-ui/core @material-ui/icons react-router-dom</span></pre><p id="25df" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">启动<strong class="km io">反应</strong> app:</p><pre class="kd ke kf kg gt nj nk nl nm aw nn bi"><span id="afaf" class="lr ls in nk b gy no np l nq nr">npm start</span></pre><p id="4fd0" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在网络浏览器上访问http://localhost:3000 以查看结果:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi oa"><img src="../Images/6fab19c5b077d2ac989f1aaf52b9d9cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ad3-mndlotyk4R-2xgieKw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk"><a class="ae lg" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></figcaption></figure><h1 id="1bec" class="mv ls in bd lt mw mx my lw mz na nb lz jt nc ju mc jw nd jx mf jz ne ka mi nf bi translated">用户阅读和删除页面</h1><p id="4619" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt ng kv kw kx nh kz la lb ni ld le lf ig bi translated">编辑<strong class="km io"> App.js </strong>以将<strong class="km io"> react-router-dom </strong>中的<strong class="km io"> Router </strong>包含在只有<strong class="km io"> Navbar </strong>和<strong class="km io">用户</strong>组件的应用程序中。(我们将创建这两个组件)。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="97c5" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">创建<strong class="km io"> Navbar.js </strong>作为我们页面<a class="ae lg" href="https://material-ui.com/components/app-bar/#app-bar" rel="noopener ugc nofollow" target="_blank">素材UI App bar </a>顶部的导航栏组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="cb1a" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">将<strong class="km io"> Users.js </strong>创建为一个组件，作为显示用户列表的页面。</p><p id="dfcc" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在这个页面中，我们将调用API来获取用户数据列表(<strong class="km io"> R </strong> ead)。<br/>API URL:<a class="ae lg" href="https://www.mecallapi.com/api/users" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/api/users</a><br/>方法:获取</p><p id="ce57" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">以及用于删除用户的API(<strong class="km io">D</strong>elete)。这个API只删除新添加的用户。<br/>API URL:<a class="ae lg" href="https://www.mecallapi.com/api/users/delete" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/api/users/delete</a><br/>方法:删除<br/>样本体(JSON):</p><pre class="kd ke kf kg gt nj nk nl nm aw nn bi"><span id="0fb4" class="lr ls in nk b gy no np l nq nr">{<br/>    "id": 11<br/>}</span></pre><p id="33ce" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">让我解释一下代码:</p><ul class=""><li id="b8aa" class="mk ml in km b kn ko kq kr kt ns kx nt lb nu lf mr ms mt mu bi translated"><strong class="km io"> useStyles </strong>(第18–35行和第38行)定义了与材质UI一起使用的CSS。</li><li id="e7aa" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated">定义<strong class="km io">状态</strong>(第40行)<strong class="km io">用户</strong>和一个用于给<strong class="km io">用户</strong>设置值的函数<strong class="km io"> setUsers </strong>。</li><li id="cc40" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated">将函数<strong class="km io"> useEffect </strong>(第41–43行)定义为<a class="ae lg" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"> <strong class="km io">效果钩子</strong> </a>在组件加载或组件中的任何状态/道具更新时调用。这将有助于基于状态/属性的改变来更新网页中的数据呈现，而无需刷新页面。</li><li id="ea7c" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated">定义函数<strong class="km io"> UsersGet </strong>(第45–53行)<strong class="km io"> </strong>来调用API<a class="ae lg" href="https://www.mecallapi.com/api/users" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/api/users</a>来检索存储在React中的用户<strong class="km io">状态</strong>中的用户列表。</li><li id="6f57" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated">第55–80行包含用户删除API的使用。</li><li id="26e9" class="mk ml in km b kn nv kq nw kt nx kx ny lb nz lf mr ms mt mu bi translated">第113–131行包含使用循环(map)将<strong class="km io">用户</strong>状态显示为表格。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="627f" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">结果是:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/4fbee3d7c3af472302ec2542d7db7ae4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WVc4cYbMtflHUt1Xyks1pg.png"/></div></div></figure><h1 id="0cfa" class="mv ls in bd lt mw mx my lw mz na nb lz jt nc ju mc jw nd jx mf jz ne ka mi nf bi translated">用户创建页面</h1><p id="d64b" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt ng kv kw kx nh kz la lb ni ld le lf ig bi translated">创建<strong class="km io"> UserCreate.js </strong>作为创建新用户的页面。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="a7f7" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">编辑<strong class="km io"> App.js </strong>在<strong class="km io">路由器</strong>中添加<strong class="km io"> UserCreate </strong>组件。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="21a4" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">尝试使用<strong class="km io">用户创建</strong>页面添加新用户:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/cdbc26a68945a3e15245e02e205b754a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25_uwm0IOYNQA-o37vubyg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">At the first page, click <strong class="bd oe">CREATE</strong>.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/76ab35fab95c3d857c515ce27a7417b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JpWqZhB8Za1jMppZfGhbFQ.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Input a user data, then click <strong class="bd oe">CREATE</strong>.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/c7f5f4c76084a749d6fcea9c26969c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oSnhDz8KDNxR3KN75hdF7g.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">New user is added.</figcaption></figure><h1 id="ddc3" class="mv ls in bd lt mw mx my lw mz na nb lz jt nc ju mc jw nd jx mf jz ne ka mi nf bi translated">用户更新页面</h1><p id="cb32" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt ng kv kw kx nh kz la lb ni ld le lf ig bi translated">创建<strong class="km io"> UserUpdate.js </strong>作为编辑现有用户数据的页面。代码将类似于使用用户更新API的用户创建页面。</p><p id="e6db" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">用于编辑用户的API(<strong class="km io">U</strong>pdate)<br/>API URL:<a class="ae lg" href="https://www.mecallapi.com/api/users/update" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/api/users/update</a><br/>方法:放<br/>样本体(JSON):</p><pre class="kd ke kf kg gt nj nk nl nm aw nn bi"><span id="0e6f" class="lr ls in nk b gy no np l nq nr">{<br/>    "id": 11,<br/>    "fname": "Cat",<br/>    "lname": "Gato",<br/>    "username": "cat.gato@mecallapi.com",<br/>    "email": "cat.gato@mecallapi.com",<br/>    "avatar": "https://www.mecallapi.com/users/cat.png"<br/>}</span></pre><p id="1182" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">以及通过id读取一个用户数据的API(<strong class="km io">R</strong>EAD)<br/>API URL:<a class="ae lg" href="https://www.mecallapi.com/api/users/1" rel="noopener ugc nofollow" target="_blank">https://www.mecallapi.com/api/users/1</a><br/>方法:GET<br/>URL末尾的数字代表用户的id。</p><ul class=""><li id="2b36" class="mk ml in km b kn ko kq kr kt ns kx nt lb nu lf mr ms mt mu bi translated">将函数<strong class="km io"> useEffect </strong>(第34–46行)定义为<a class="ae lg" href="https://reactjs.org/docs/hooks-effect.html" rel="noopener ugc nofollow" target="_blank"> <strong class="km io">效果挂钩</strong> </a>，当组件被加载时以及当除了<strong class="km io"> id </strong>之外的任何状态/道具发生变化时调用，因为我们将<strong class="km io"> id </strong>放在函数末尾的[ ]中。</li></ul><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="183c" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">在<strong class="km io">路由器</strong>中添加<strong class="km io">用户更新</strong>组件，编辑<strong class="km io"> App.js </strong>。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ob oc l"/></div></figure><p id="39da" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">尝试更新用户数据:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/5f7de7280e1ec0d75e810a0036494f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KRwPxp0Huqu8-lu3urU3Uw.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Click <strong class="bd oe">EDIT </strong>at the end of the row.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/a0419fd64fbc6279cdcbc5755f33c11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ctQCfVRuVa0tVEX3q2ubkg.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Edit the user data and click <strong class="bd oe">UPDATE</strong>.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/9fe20ecfa18b56bb7096f9cf1dd50fae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mqzyAa2Tq4cHKpNPpldOrA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">The data is updated.</figcaption></figure><p id="429b" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated">此外，尝试删除数据。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/9cfbaf059a9b619dfedde01970240203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FSKIR2HslqbAtN9YKOdvA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">Click <strong class="bd oe">DEL </strong>at the end of the row.</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="gh gi od"><img src="../Images/fc60752354741bc05d67fcd95cfbcc9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xLl_B0G3HCu47s8MlorArA.png"/></div></div><figcaption class="lm ln gj gh gi lo lp bd b be z dk">The user data is deleted.</figcaption></figure><h1 id="3a15" class="mv ls in bd lt mw mx my lw mz na nb lz jt nc ju mc jw nd jx mf jz ne ka mi nf bi translated">结论</h1><p id="7b83" class="pw-post-body-paragraph kk kl in km b kn mm jo kp kq mn jr ks kt ng kv kw kx nh kz la lb ni ld le lf ig bi translated">就是这样。希望它能帮助你理解<strong class="km io"> React </strong>的基础以及如何使用API。下篇见！</p><p id="e467" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="of">朗西特大学数字创新技术学院博士Karn Yongsiriwit的文章</em></p><p id="219c" class="pw-post-body-paragraph kk kl in km b kn ko jo kp kq kr jr ks kt ku kv kw kx ky kz la lb lc ld le lf ig bi translated"><em class="of">更多内容请看</em><a class="ae lg" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="km io"><em class="of">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
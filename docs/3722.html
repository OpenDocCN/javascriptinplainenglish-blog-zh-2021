<html>
<head>
<title>Dependency Hell: The Worst Possible Scenario While Developing Web Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">依赖地狱:开发Web应用时最糟糕的场景</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/dependency-hell-the-worst-possible-scenario-while-developing-apps-750b37405d20?source=collection_archive---------9-----------------------#2021-07-26">https://javascript.plainenglish.io/dependency-hell-the-worst-possible-scenario-while-developing-apps-750b37405d20?source=collection_archive---------9-----------------------#2021-07-26</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="c03e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">利用社区创建的包可能非常有用并且节省时间，但是有一些问题你应该知道。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2cc3adf2f68863bfa04df24f307e350a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X5r1Y6BTxPJgqO9eXUSKmA.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@ralphkayden?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ralph (Ravi) Kayden</a> on <a class="ae kv" href="https://unsplash.com/s/photos/connection?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a778" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">从一开始到现在，我作为一名web开发人员经历了几个阶段。积累了7年的经验，我认为这些阶段对于每个新的web开发人员来说都是非常相似的。</p><p id="d227" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第一阶段，我刚刚开始学习JavaScript，还有很多东西需要学习。我用一个普通的<code class="fe ls lt lu lv b">index.html</code>开始了一个计算器项目，并通过添加一个<code class="fe ls lt lu lv b">main.css</code>增加了一些趣味。为了做一些基本的计算，我使用了JavaScript和一些DOM方法。除了我之外，没有任何人写过代码。一切都很难理解，但同时又很简单。</p><p id="f186" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在第二阶段，我遇到了库:一些慈善人士编写的代码，帮助我们简化开发过程。例如，最终没有必要编写一个函数来将两个数字相加。多方便啊！我只是添加了一个<code class="fe ls lt lu lv b">script</code>标签，一堆功能就可以使用了。另外，在这个阶段，我遇到了<code class="fe ls lt lu lv b">npm</code>之类的CLI工具，我尽量避开了。因为它们令人困惑，我认为没有必要。我可以手动做任何事情。我可以创建文件，我可以找到CDN链接并将它们添加到我的HTML中。</p><p id="863f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">第三阶段是我决定给CLI工具一个机会并爱上它们的阶段。因为他们为我做了一切。我可以用Vite或CRA为React应用程序创建一个普通的JS项目。我不必手动做所有的事情。此外，我和图书馆的关系越来越好。我需要什么吗？我去了NPM网站，找到了一个适合我的。其余部分是通过npm CLI完成的。我可以添加任意多的库。</p><p id="fed9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">依赖关系的问题就从这里开始了。外包是现代发展不可或缺的一部分。因为我们必须消除棘手的部分，专注于开发应用程序。然而，有一些合理的观点可以避免给你的应用程序增加一个依赖项。</p><h1 id="1324" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">有时候，使用包可能有些过头了</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mo"><img src="../Images/35cf26a8d01288be27060d27e6b5f69b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kGMZmrvgHMzOoWqM"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2d58" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">JavaScript社区是巨大的！我可以保证你可以只用NPM上的包来构建一个应用程序，而不用写一行逻辑代码。因为每天都有成千上万新的有用的库被开发者发布和使用。甚至有一个库来检查一个数字是否与超过20万周下载量持平。</p><p id="07a3" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了看看一个简单的包是否可以有很多下载，我创建了一个包，它将里面的内容固定在一定数量的行上。我所做的只是写了3行CSS并用JavaScript应用了一个类。就是这样！任何人都可以在2分钟内完成这项工作，但该软件包在第一天就被安装了200多次。这是非常可悲的，因为开发人员开始变得懒惰，并开始为所有东西搜索一个库。然而，JavaScript是一种强大的语言，在90%的情况下，经过大量的思考，我相信你可以找到一种方法来处理这个问题，而不会给应用程序增加更多的依赖。</p><p id="00fb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">让我们假设我想在我的网站上有一个很酷的翻转动画。有两条路可走。第一个是下载一个翻转动画库并立即解决问题，或者我可以阅读<a class="ae kv" href="https://css-tricks.com/animating-layouts-with-the-flip-technique/" rel="noopener ugc nofollow" target="_blank">这篇</a> CSS技巧文章并实现我自己的逻辑来实现这一点。第一个很简单，但是虽然你可以自己做，并且最终感觉很成功，为什么你要增加一个依赖项，走容易的路呢？</p><h1 id="a84b" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">JavaScript越少，Web应用越快</h1><p id="8926" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">这有点讽刺，但作为一名JavaScript开发人员，我的目的是尽可能少地为客户端提供JavaScript，因为JavaScript的数量越多，加载和执行时间就越长，从而导致糟糕的用户体验和落后的网站。但是这些依赖是如何对我的应用程序产生负面影响的呢？它们都有用途，没有一个是闲置的。这个论点的要点是:依赖关系中有未使用的部分。</p><p id="1c9a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当一个依赖项被添加到一个应用程序中时，实际上所有的依赖项都被下载到客户端，即使有一些部分你不使用。通常，一个库有许多方法来处理所有的极端情况。例如，让我们看看<em class="mu">验证器</em>库。这是一个处理从手机号码到电子邮件的各种验证的库。它非常有用，每周都有数百万开发者使用。使用这个库，我们可以验证输入并检查其值是否是电子邮件，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mv"><img src="../Images/ff2d2162dcd8ec20f83f5bf79e457d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Iu0K1_PWQM-X5DOJ-uTVCQ.png"/></div></div></figure><p id="56a8" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一切都很简单。我导入了这个库，并使用它附带的<code class="fe ls lt lu lv b">isEmail</code>方法来验证输入。但是这里有一个有趣的事实:有91种方法来自于<em class="mu"> Validator </em>库，而我只用了一种。如果我没有专门配置的构建工具，这些未使用的代码块将被发送到客户端并增加加载时间。但是如果我使用纯JavaScript并借助Stack Overflow，我可以使用RegExp创建我的自定义函数来验证输入。这样做，我只得到我用的那部分，对应用的性能有贡献。</p><h1 id="7e6f" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">一些软件包可能未经优化，并且包含漏洞</h1><p id="8b38" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">另一个阻止我在应用程序上添加另一个依赖的问题是，并不是每个库都是由经验丰富的专业程序员编写的，他们会检查代码的漏洞和优化。NPM是一个开放的平台，任何人都可以创建一个社区使用的图书馆。因此，有许多库使我的应用程序不那么优化，更容易被利用。此外，如果不安装和测试一个包，就无法检查它的漏洞。所以，如果没有必要的话，添加另一个库是一种赌博，要么有不好的结果，要么有好的结果。我认为在你可以创建没有漏洞的相同功能时冒这个风险是愚蠢的举动，应该避免。</p><h1 id="4d9a" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">结论</h1><p id="e207" class="pw-post-body-paragraph kw kx iq ky b kz mp jr lb lc mq ju le lf mr lh li lj ms ll lm ln mt lp lq lr ij bi translated">这些是在给你的应用程序增加一个依赖时要三思的主要原因。当我开发应用程序时，我尽可能减少依赖，因为我知道如果我写代码而不是安装一个库，我只是根据我的需要来定制它，仅此而已。因此，编写的代码最适合应用程序的上下文，不会产生任何进一步的问题。</p><p id="f30e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">所以，要意识到手中JavaScript的强大，不要害怕使用它。</p><p id="9554" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">伙计们，这个故事到此为止。希望你觉得有用。喜欢的话，一定要鼓掌。敬请期待下一个故事！</p><p id="2a79" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mu">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mu">plain English . io</em></a></p></div></div>    
</body>
</html>
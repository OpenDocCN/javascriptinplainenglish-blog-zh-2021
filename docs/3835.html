<html>
<head>
<title>How To Build A Weather Web App Using Vanilla Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用普通Javascript构建天气Web应用程序</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-build-a-weather-web-app-using-vanilla-javascript-5518dbb92c52?source=collection_archive---------5-----------------------#2021-08-02">https://javascript.plainenglish.io/how-to-build-a-weather-web-app-using-vanilla-javascript-5518dbb92c52?source=collection_archive---------5-----------------------#2021-08-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="d483" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">构建天气应用程序的分步指南，从规划到执行。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/9ccf4b74e7940ed0aed6e9889457fd0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JjN5osU855v_zfOeCM9JDQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image By <a class="ae ks" href="https://unsplash.com/photos/HOtPD7Z_74s?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditShareLink" rel="noopener ugc nofollow" target="_blank">Osman Rana</a> on <a class="ae ks" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7830" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">天气预报应用程序是可以提高编程技能的众多项目之一。试想一下，如果你能制作一个通知和预测天气的应用程序，岂不是很酷？因此，我将指导您创建自己的天气web应用程序。</p><h1 id="24b0" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">1.OpenWeatherMap API</h1><p id="9012" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">为了制作这个应用程序，我们需要一个API ( <em class="mm">应用程序编程接口</em>)，它将提供创建天气web应用程序所需的数据。对于当前的项目，我们将使用一个API来检索世界上的天气数据。有些API可以免费使用，而有些API则需要支付一定的价格。</p><p id="ed01" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">为了创建一个天气网络应用程序，我们将使用来自OpenWeatherMap.org的API，你可以免费或付费使用。要使用这个API，您需要一个API密钥。要获得API密钥，您必须首先注册OpenWeatherMap网站。所以请登录/注册<a class="ae ks" href="https://home.openweathermap.org/users/sign_in" rel="noopener ugc nofollow" target="_blank">https://home.openweathermap.org/users/sign_in</a>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/b9a2c58386e18d03b7d8b4fe136d1aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7siJe2cTgetkUDK_LEAxg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image from Author's Screenshot</figcaption></figure><p id="1a72" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">登录后，您将获得您的API密钥。<strong class="kv io">切记不要与任何人共享您的API密钥。</strong></p><h1 id="8bb2" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">HTML代码</h1><p id="1c5e" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">当然，要创建网页，你需要HTML代码。请创建一个基本的HTML模板，如下所示:</p><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="f719" class="mt lq in mp b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Web App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;input class="input" type="text" placeholder="type a city"&gt;<br/>  &lt;button class="submit"&gt;search&lt;/button&gt;<br/>  &lt;div clas="city_name"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="temperature"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="humidity"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="weather"&gt;unknown&lt;/div&gt;<br/>  &lt;script type="text/javascript" charset="UTF-8" src="Weather_app.js&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="4165" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上面的代码用于稍后显示输入字段和天气数据。在上面的例子中，我将只显示4个相关数据，即城市名称、天气、温度和湿度。此外，在上面的代码中，我们还创建了一个带有<code class="fe my mz na mp b">class = "submit"</code>属性的按钮。</p><h1 id="07e5" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">Javascript代码</h1><p id="4e63" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">编写Javascript代码是制作这个web应用程序最重要的部分。我们要做的第一件事是将HTML标签加载到一个变量中。例如，属性为<code class="fe my mz na mp b">class = “humidity”</code>的<code class="fe my mz na mp b">div</code>标签被加载到名为<code class="fe my mz na mp b">humidity</code>的变量中。此外，我们还将按钮标签加载到一个名为<code class="fe my mz na mp b">button</code>的变量中。</p><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="b0c8" class="mt lq in mp b gy mu mv l mw mx">var input = document.querySelector(.input);<br/>var city  = document.querySelector(.city_name);<br/>var temperature = document.querySelector(.temperature);<br/>var humidity = document.querySelector(.humidity);<br/>var weather = document.querySelector(.weather); <br/>var button = document.querySelector(.submit);</span><span id="6263" class="mt lq in mp b gy nb mv l mw mx">button.addEventListener('click', function(name){<br/>fecth('api.openweathermap.org/data/2.5/weather?q='+input.value+'&amp;appid={API key}&amp;units=metric')<br/>.then(response =&gt; response.json())<br/>.then(data =&gt; {<br/>  var tempValue = data['main']['temp'];<br/>  var cityValue = data['name'];<br/>  var weatherValue = data['weather'][0]['description'];<br/>  var humidityValue = data['main']['humidity'];<br/>  <br/>  city.innerHTML = "weather at "+ cityValue;<br/>  weather.innerHTML = "weather: "+ weatherValue;<br/>  temperature.innerHTML = "temperature: "+ tempValue + " celcius";<br/>  humidity.innerHTML = "humidity: "+ humidityValue;<br/>})<br/>.catch(err =&gt; alert("wrong city name!"));</span></pre><p id="fe83" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们的web应用程序就完成了！</p><h1 id="173e" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">代码解释——到目前为止我所做的</h1><p id="f377" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">所以，在上面的JavaScript代码中，我声明了一个我想要显示其数据的变量。这些变量包括湿度、温度和输入。需要输入变量来检索用户输入的数据。在这种情况下，用户输入的数据是城市的名称。因此，输入变量稍后将包含一个城市名称字符串。</p><p id="24a3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">接下来，我使用<code class="fe my mz na mp b">fetch(’https://api.openweathermap.org/data/2.5/weather?q=’+input.value+’&amp;appid={API_KEY}&amp;units=metric’</code>获取API。这段代码将根据<code class="fe my mz na mp b">input.value</code>中的城市名称从API URL获取数据。请将{API_KEY}替换为您在登录/登入OpenWeatherMap网站后获得的API密钥。</p><p id="2489" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在获取过程之后，您将获得您想要的城市的天气数据。这些数据将以JSON格式显示。以下是您将获得的数据示例:</p><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="8fb8" class="mt lq in mp b gy mu mv l mw mx">{<br/>  "coord": {<br/>    "lon": -122.08,<br/>    "lat": 37.39<br/>  },<br/>  "weather": [<br/>    {<br/>      "id": 800,<br/>      "main": "Clear",<br/>      "description": "clear sky",<br/>      "icon": "01d"<br/>    }<br/>  ],<br/>  "base": "stations",<br/>  "main": {<br/>    "temp": 282.55,<br/>    "feels_like": 281.86,<br/>    "temp_min": 280.37,<br/>    "temp_max": 284.26,<br/>    "pressure": 1023,<br/>    "humidity": 100<br/>  },<br/>  "visibility": 16093,<br/>  "wind": {<br/>    "speed": 1.5,<br/>    "deg": 350<br/>  },<br/>  "clouds": {<br/>    "all": 1<br/>  },<br/>  "dt": 1560350645,<br/>  "sys": {<br/>    "type": 1,<br/>    "id": 5122,<br/>    "message": 0.0139,<br/>    "country": "US",<br/>    "sunrise": 1560343627,<br/>    "sunset": 1560396563<br/>  },<br/>  "timezone": -25200,<br/>  "id": 420006353,<br/>  "name": "Mountain View",<br/>  "cod": 200<br/>  }</span></pre><p id="1135" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在，<code class="fe my mz na mp b">.then</code>行代码旨在将数据赋给相关变量。例如，关于湿度的数据被分配给<code class="fe my mz na mp b">humidityValue</code>变量。然后，通过<code class="fe my mz na mp b">humidity.innerHTML</code>代码打印出<code class="fe my mz na mp b">humidityValue</code>变量的值。这里需要你对阅读JSON文件的理解。但是，如果你对JSON一无所知，没问题。只需复制我上面写的javascript代码。</p><p id="64a7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果用户输入的城市名称不在OpenWeatherMap提供的数据中，代码的<code class="fe my mz na mp b">.catch</code>行将显示一个<code class="fe my mz na mp b">alert</code>。例如，当用户键入城市名称“abcd”时。由于名为“abcd”的城市在世界上任何地方都不存在，我们的网站将显示一个警告<code class="fe my mz na mp b">alert("wrong city name!")</code>。</p><h1 id="cd9d" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">结论</h1><p id="d9d0" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">简而言之，以下是你应该采取的步骤:</p><ol class=""><li id="6c2e" class="nc nd in kv b kw kx kz la lc ne lg nf lk ng lo nh ni nj nk bi translated">登录/登录<a class="ae ks" href="https://openweathermap.org/api" rel="noopener ugc nofollow" target="_blank">OpenWeatherMap.org</a>网站</li><li id="7cac" class="nc nd in kv b kw nl kz nm lc nn lg no lk np lo nh ni nj nk bi translated">获取您的API密钥</li><li id="f183" class="nc nd in kv b kw nl kz nm lc nn lg no lk np lo nh ni nj nk bi translated">编写HTML和JavaScript代码</li><li id="e765" class="nc nd in kv b kw nl kz nm lc nn lg no lk np lo nh ni nj nk bi translated">如果你想要更好的风格，就写CSS代码</li><li id="8252" class="nc nd in kv b kw nl kz nm lc nn lg no lk np lo nh ni nj nk bi translated">结束</li></ol><p id="638d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">以下是创建天气web应用程序时必须编写的重要文件:</p><h2 id="7fbd" class="mt lq in bd lr nq nr dn lv ns nt dp lz lc nu nv mb lg nw nx md lk ny nz mf oa bi translated">超文本标记语言</h2><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="4ee4" class="mt lq in mp b gy mu mv l mw mx">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;title&gt;My Web App&lt;/title&gt;<br/>  &lt;/head&gt;<br/>&lt;body&gt;<br/>  &lt;input class="input" type="text" placeholder="type a city"&gt;<br/>  &lt;button class="submit"&gt;search&lt;/button&gt;<br/>  &lt;div clas="city_name"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="temperature"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="humidity"&gt;unknown&lt;/div&gt;<br/>  &lt;div clas="weather"&gt;unknown&lt;/div&gt;<br/>  &lt;script type="text/javascript" charset="UTF-8" src="Weather_app.js&gt;&lt;/script&gt;<br/>&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><h2 id="5c85" class="mt lq in bd lr nq nr dn lv ns nt dp lz lc nu nv mb lg nw nx md lk ny nz mf oa bi translated">Java Script语言</h2><pre class="kd ke kf kg gt mo mp mq mr aw ms bi"><span id="0d57" class="mt lq in mp b gy mu mv l mw mx">var input = document.querySelector(.input);<br/>var city  = document.querySelector(.city_name);<br/>var temperature = document.querySelector(.temperature);<br/>var humidity = document.querySelector(.humidity);<br/>var weather = document.querySelector(.weather); <br/>var button = document.querySelector(.submit);</span><span id="7ba3" class="mt lq in mp b gy nb mv l mw mx">button.addEventListener('click', function(name){<br/>fecth('api.openweathermap.org/data/2.5/weather?q='+input.value+'&amp;appid={API key}&amp;units=metric')<br/>.then(response =&gt; response.json())<br/>.then(data =&gt; {<br/>  var tempValue = data['main']['temp'];<br/>  var cityValue = data['name'];<br/>  var weatherValue = data['weather'][0]['description'];<br/>  var humidityValue = data['main']['humidity'];<br/>  <br/>  city.innerHTML = "weather at "+ cityValue;<br/>  weather.innerHTML = "weather: "+ weatherValue;<br/>  temperature.innerHTML = "temperature: "+ tempValue + " celcius";<br/>  humidity.innerHTML = "humidity: "+ humidityValue;<br/>})<br/>.catch(err =&gt; alert("wrong city name!"));</span></pre><h2 id="2a5a" class="mt lq in bd lr nq nr dn lv ns nt dp lz lc nu nv mb lg nw nx md lk ny nz mf oa bi translated">半铸钢ˌ钢性铸铁(Cast Semi-Steel)</h2><blockquote class="ob oc od"><p id="c3fb" class="kt ku mm kv b kw kx jo ky kz la jr lb oe ld le lf of lh li lj og ll lm ln lo ig bi translated">对于CSS，您可以将其定制为您喜欢的样式</p></blockquote><p id="5d8b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">CSS文件基本上只是设置你的网页风格，所以你可以自己设置。我想我不需要在这里添加任何CSS代码。</p><h1 id="ce6c" class="lp lq in bd lr ls lt lu lv lw lx ly lz jt ma ju mb jw mc jx md jz me ka mf mg bi translated">添加</h1><p id="bf96" class="pw-post-body-paragraph kt ku in kv b kw mh jo ky kz mi jr lb lc mj le lf lg mk li lj lk ml lm ln lo ig bi translated">你可能会问，<em class="mm">“你不是说我们也要做一个天气预报的web app吗？”实际上，如果你理解了我上面写的每一行代码，那么你应该能够用同样的方法构建一个天气预报应用程序。你所要做的就是访问OpenWeatherMap.org网站，查看API文档。在那里，你会看到有很多你可以得到的数据，从当前的天气到天气预报。</em></p><div class="oh oi gp gr oj ok"><a href="https://openweathermap.org" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd io gy z fp op fr fs oq fu fw im bi translated">с当前天气和预报- OpenWeatherMap</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">获取您所在城市的当前天气、每小时天气预报、16天的每日天气预报和5天的3小时天气预报…</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">openweathermap.org</p></div></div><div class="ot l"><div class="ou l ov ow ox ot oy km ok"/></div></div></a></div><p id="bdf6" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果您想直接观看该应用程序的现场演示，可以访问我的网站:</p><div class="oh oi gp gr oj ok"><a href="https://fikrinotes.netlify.app/weather_app" rel="noopener  ugc nofollow" target="_blank"><div class="ol ab fo"><div class="om ab on cl cj oo"><h2 class="bd io gy z fp op fr fs oq fu fw im bi translated">天气应用程序- Fikri注释</h2><div class="or l"><h3 class="bd b gy z fp op fr fs oq fu fw dk translated">一个强大的网络应用程序，可以获取世界各地的天气数据</h3></div><div class="os l"><p class="bd b dl z fp op fr fs oq fu fw dk translated">fikrinotes.netlify.app</p></div></div><div class="ot l"><div class="oz l ov ow ox ot oy km ok"/></div></div></a></div></div><div class="ab cl pa pb hr pc" role="separator"><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf pg"/><span class="pd bw bk pe pf"/></div><div class="ig ih ii ij ik"><p id="8893" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">所以，谢谢你看我的文章。如果觉得这篇文章有用，可以给这篇文章加个拍手。谢谢大家！</p><p id="3c5d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mm">更多内容看</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="mm">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
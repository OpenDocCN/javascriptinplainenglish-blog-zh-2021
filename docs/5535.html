<html>
<head>
<title>A Complete Guide for Reading Files in Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Node.js中读取文件的完整指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/complete-guide-for-reading-file-in-nodejs-3cf6b3d0b2f4?source=collection_archive---------3-----------------------#2021-11-17">https://javascript.plainenglish.io/complete-guide-for-reading-file-in-nodejs-3cf6b3d0b2f4?source=collection_archive---------3-----------------------#2021-11-17</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="aa33" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">探索在Node.js中读取文件的方法。</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/1af70e9d9047bd4d75cedd8571fc4cb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t_pHgFh1ye2ePj9J"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@drewcoffman?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Drew Coffman</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="b444" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在本帖中，我们将了解</p><ul class=""><li id="07b4" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">在Node.js中读取文件的三种方法</li><li id="74c6" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">哪一个是我最喜欢的方法？</li><li id="14cc" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">为什么我会选择它作为我最喜欢的方式？</li></ul><p id="70fd" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">事不宜迟，我们开始吧。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="fc8d" class="mk ml in bd mm mn mo mp mq mr ms mt mu jt mv ju mw jw mx jx my jz mz ka na nb bi translated">Node.js中读取文件的三种方法</h1><p id="53f9" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated">从标题中，我们清楚地知道在Node中有3种读取文件的方法。它们被称为<strong class="kv io">承诺</strong>方式、<strong class="kv io">回调</strong>方式和<strong class="kv io">同步</strong>方式。</p><p id="da9d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们来看看承诺的方式。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h2 id="3f24" class="nh ml in bd mm ni nj dn mq nk nl dp mu lc nm nn mw lg no np my lk nq nr na ns bi translated">用答应的方式读文件</h2><p id="e761" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated"><strong class="kv io"> Promise </strong>方式使我们能够使用现代的异步Javascript特性——<strong class="kv io">async</strong>和<strong class="kv io">wait</strong>。请参考下面的示例代码。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="5479" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行上面的代码会得到这样的输出。</p><pre class="kd ke kf kg gt nv nw nx ny aw nz bi"><span id="0606" class="nh ml in nw b gy oa ob l oc od">Start reading file<br/>Running other operation<br/>content &lt;Buffer ef bb bf 22 6c 6f 73 74 22 2c 22 6b 6e 69 66 65 22 2c 22 70 61 63 6b 22 2c 22 63 61 6c 6c 22 2c 22 74 61 6c 65 73 22 2c 22 70 72 6f 64 75 63 74 69 6f ... 1721522 more bytes&gt;<br/>Finished reading file</span></pre></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h2 id="b232" class="nh ml in bd mm ni nj dn mq nk nl dp mu lc nm nn mw lg no np my lk nq nr na ns bi translated">用回调方式读取文件</h2><p id="3227" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated">回调方式的方法是使用<code class="fe oe of og nw b">fs.readFile</code>节点API。当文件被完全读入内存时，这个方法给了我们回调。让我们看看下面的代码示例。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="882a" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行上面的代码也会得到类似的输出。</p><pre class="kd ke kf kg gt nv nw nx ny aw nz bi"><span id="9a6f" class="nh ml in nw b gy oa ob l oc od">Start reading file<br/>Running other operation<br/>content &lt;Buffer ef bb bf 22 6c 6f 73 74 22 2c 22 6b 6e 69 66 65 22 2c 22 70 61 63 6b 22 2c 22 63 61 6c 6c 22 2c 22 74 61 6c 65 73 22 2c 22 70 72 6f 64 75 63 74 69 6f ... 1721522 more bytes&gt;<br/>Finished reading file</span></pre></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h2 id="d263" class="nh ml in bd mm ni nj dn mq nk nl dp mu lc nm nn mw lg no np my lk nq nr na ns bi translated">用同步方式读取文件</h2><p id="c6be" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated">同步方式是使用<code class="fe oe of og nw b">fs.readFileSync</code>节点API实现的。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nt nu l"/></div></figure><p id="6585" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">运行上面的代码会得到下面的输出。</p><pre class="kd ke kf kg gt nv nw nx ny aw nz bi"><span id="a019" class="nh ml in nw b gy oa ob l oc od">Start reading file<br/>content &lt;Buffer ef bb bf 22 6c 6f 73 74 22 2c 22 6b 6e 69 66 65 22 2c 22 70 61 63 6b 22 2c 22 63 61 6c 6c 22 2c 22 74 61 6c 65 73 22 2c 22 70 72 6f 64 75 63 74 69 6f ... 1721522 more bytes&gt;<br/>Finished reading file<br/>Running other operation</span></pre><p id="e1fa" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这里值得一提的是<strong class="kv io">同步方式会阻塞下一行执行，直到文件被成功读取</strong>。正如你在上面看到的，<code class="fe oe of og nw b">Runnint other operation</code>日志只在<code class="fe oe of og nw b">Finished reading file</code>之后显示。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="d731" class="mk ml in bd mm mn mo mp mq mr ms mt mu jt mv ju mw jw mx jx my jz mz ka na nb bi translated">哪种方式是我最喜欢的，为什么？</h1><blockquote class="oh"><p id="1e42" class="oi oj in bd ok ol om on oo op oq lo dk translated">无极道</p></blockquote><p id="bb65" class="pw-post-body-paragraph kt ku in kv b kw or jo ky kz os jr lb lc ot le lf lg ou li lj lk ov lm ln lo ig bi translated">我最喜欢的方式是<strong class="kv io">承诺方式</strong>。在我最喜欢的选择过程中，有两个因素是我要考虑的:</p><ul class=""><li id="e1a2" class="lp lq in kv b kw kx kz la lc lr lg ls lk lt lo lu lv lw lx bi translated">代码可读性和流行度</li><li id="631f" class="lp lq in kv b kw ly kz lz lc ma lg mb lk mc lo lu lv lw lx bi translated">阻塞与非阻塞</li></ul></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h2 id="9567" class="nh ml in bd mm ni nj dn mq nk nl dp mu lc nm nn mw lg no np my lk nq nr na ns bi translated">代码可读性和流行度</h2><p id="5fb3" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated">从流行的角度来看，<code class="fe oe of og nw b">async</code>和<code class="fe oe of og nw b">await</code>是JavaScript世界中现代流行的异步代码编写方式。随着代码库的增长，我相信我们会看到更多使用<code class="fe oe of og nw b">async</code>和<code class="fe oe of og nw b">await </code>而不是回调方式。</p><p id="ec15" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">从代码可读性的角度来看，与回调方法相比，promise方法看起来更干净，可读性也更好。通过使用<code class="fe oe of og nw b">async</code>和<code class="fe oe of og nw b">await</code>，从上到下读取代码的流程非常流畅。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h2 id="00fe" class="nh ml in bd mm ni nj dn mq nk nl dp mu lc nm nn mw lg no np my lk nq nr na ns bi translated">阻塞与非阻塞</h2><p id="73de" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated"><strong class="kv io">承诺方式</strong>和<strong class="kv io">回调方式</strong>都为整个系统提供了更好的效率，因为它在读取文件时不会阻塞代码。</p><p id="a762" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">而同步方式将阻止代码执行，直到文件被读入内存。</p></div><div class="ab cl md me hr mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ig ih ii ij ik"><h1 id="848f" class="mk ml in bd mm mn mo mp mq mr ms mt mu jt mv ju mw jw mx jx my jz mz ka na nb bi translated">结论</h1><p id="9b55" class="pw-post-body-paragraph kt ku in kv b kw nc jo ky kz nd jr lb lc ne le lf lg nf li lj lk ng lm ln lo ig bi translated">在本指南中，我们探讨了在Node.js中读取文件的不同方法。此外，我还根据代码可读性和受欢迎程度以及阻塞与非阻塞代码选择了自己喜欢的方法。</p><p id="21c1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">但是，请记住，我们并没有在本指南中考虑每种不同方法的性能。我可能会在下一篇文章中这样做。如果性能是主要关注点，请查看我即将发布的帖子。</p><p id="f830" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">感谢阅读，我希望你发现这是有帮助的。</p><p id="4dba" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="ow">更多内容尽在</em><a class="ae ks" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kv io"><em class="ow">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
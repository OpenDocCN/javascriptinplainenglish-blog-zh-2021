<html>
<head>
<title>How to Check the Size of a Selected File with JavaScript?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用JavaScript检查选中文件的大小？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-check-the-size-of-a-selected-file-with-javascript-43f48c5a218b?source=collection_archive---------7-----------------------#2021-07-16">https://javascript.plainenglish.io/how-to-check-the-size-of-a-selected-file-with-javascript-43f48c5a218b?source=collection_archive---------7-----------------------#2021-07-16</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/009005b89736cac57e94780732ea8ad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mXz1fzeLvGWFXfAa"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@jemsahagun?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jem Sahagun</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="029b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">有时，我们可能想用JavaScript检查所选文件的大小。</p><p id="a7e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将看看如何用JavaScript检查选定文件的大小。</p><h1 id="d9a9" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">使用FileReader API</h1><p id="3ed7" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">几乎所有现代浏览器都应该支持FileReader API。</p><p id="8056" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以通过编写以下HTML来使用它:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="45b4" class="mn lc iq mj b gy mo mp l mq mr">&lt;form action='#'&gt;<br/>  &lt;input type='file' id='fileinput'&gt;<br/>  &lt;input type='button' id='btnLoad' value='Load'&gt;<br/>&lt;/form&gt;</span></pre><p id="f3aa" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以编写下面的JavaScript代码:</p><pre class="me mf mg mh gt mi mj mk ml aw mm bi"><span id="bb4b" class="mn lc iq mj b gy mo mp l mq mr">const addPara = (text) =&gt; {<br/>  const p = document.createElement("p");<br/>  p.textContent = text;<br/>  document.body.appendChild(p);<br/>}</span><span id="276e" class="mn lc iq mj b gy ms mp l mq mr">document<br/>  .getElementById("btnLoad")<br/>  .addEventListener("click", () =&gt; {<br/>    const input = document.getElementById('fileinput');<br/>    if (!input.files[0]) {<br/>      addPara("Please select a file before clicking 'Load'");<br/>    } else {<br/>      const file = input.files[0];<br/>      addPara(`File ${file.name} is ${file.size} bytes in size`);<br/>    }<br/>  });</span></pre><p id="5187" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在HTML代码中，我们有一个输入类型为<code class="fe mt mu mv mj b">file</code>的表单。</p><p id="14ab" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有一个按钮，让我们点击它时显示文件信息。</p><p id="9e07" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在JavaScript代码中，我们使用了<code class="fe mt mu mv mj b">addPara</code>函数来创建一个p元素，并将<code class="fe mt mu mv mj b">text</code>设置为其内容。</p><p id="31a1" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">getElementById</code>来获取按钮输入元素。</p><p id="9033" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们调用<code class="fe mt mu mv mj b">addEventListener</code>来添加一个点击监听器。</p><p id="73b7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在点击监听器中，我们用<code class="fe mt mu mv mj b">getElementById</code>得到文件输入。</p><p id="5cc8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们检查<code class="fe mt mu mv mj b">input.files[0]</code>是否存在。</p><p id="d42c" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">input.files[0]</code>选择第一个文件。</p><p id="3af5" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">如果没有文件，我们调用<code class="fe mt mu mv mj b">addPara</code>来显示一条消息。</p><p id="3112" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">否则，我们调用<code class="fe mt mu mv mj b">addPara</code>来显示文件信息。</p><p id="339b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">file.name</code>有所选文件的文件名。</p><p id="3ab4" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe mt mu mv mj b">file.size</code>以字节表示所选文件的大小。</p><p id="b00b" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">当我们选择一个文件并点击Load，我们应该会看到所选文件的文件信息。</p><h1 id="c4a6" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="27ef" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以使用FileReader API轻松检查所选文件的信息。</p><p id="f5df" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><em class="mw">更多内容看</em><strong class="kf ir"><em class="mw"/></strong><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kf ir"><em class="mw">说白了. io </em> </strong> </a></p></div></div>    
</body>
</html>
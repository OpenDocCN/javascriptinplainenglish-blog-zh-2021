<html>
<head>
<title>Getting Started with Jest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jest入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-jest-40d18796b8c7?source=collection_archive---------23-----------------------#2021-08-09">https://javascript.plainenglish.io/getting-started-with-jest-40d18796b8c7?source=collection_archive---------23-----------------------#2021-08-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/abb82335d5e747aa6f1f2b414fea9743.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vK3PHmkxImZ0dnuzJU0SdQ.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">photo by <a class="ae jz" href="https://unsplash.com/@itfeelslikefilm" rel="noopener ugc nofollow" target="_blank">Janko Ferlič</a> via <a class="ae jz" href="https://unsplash.com/photos/sfL_QOnmy00" rel="noopener ugc nofollow" target="_blank">unsplash.com</a></figcaption></figure><p id="674a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我最近写了一篇关于我如何学习用RSpec测试我的后端的博文。我想继续学习，并把我新发现的测试技能转移到前端。</p><p id="5cb0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">有很多前端测试者，但最让我印象深刻的是Jest。我选择开始学习Jest，因为它是由脸书开发的，开箱即用。此外，据我所知，它是最容易配置和快速运行的测试程序之一。</p><p id="d8e5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们深入研究一下，看看如何快速启动Jest并运行它，让它发挥一些很酷的功能。首先，在命令行上创建一个新文件，并将其放入cd中。运行:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="85d5" class="lh li in ld b gy lj lk l ll lm">npm install jest --save-dev</span></pre><p id="cf6b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">或者</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="8967" class="lh li in ld b gy lj lk l ll lm">yarn add --dev jest</span></pre><p id="774d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后在package.json文件中添加以下脚本:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3248" class="lh li in ld b gy lj lk l ll lm">// package.json</span><span id="6dd4" class="lh li in ld b gy ln lk l ll lm">"scripts": {</span><span id="d0c4" class="lh li in ld b gy ln lk l ll lm">"test": "jest"</span><span id="930f" class="lh li in ld b gy ln lk l ll lm">}</span></pre><p id="52a9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">此时，您应该能够在CLI中运行<code class="fe lo lp lq ld b">npm test</code>并看到jest正在工作，但是没有找到测试。让我们通过创建一个名为<code class="fe lo lp lq ld b">checkout.js</code>的文件并添加以下代码来解决这个问题。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lr"><img src="../Images/4d3a04b8dbc46885184aebcb129e7bd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8uLRXhGudwbU1N6Kc3_kUg.png"/></div></div></figure><p id="7916" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这很简单。我们用三种方法创建一个对象，<code class="fe lo lp lq ld b">subTotal</code>、<code class="fe lo lp lq ld b">tax</code>和<code class="fe lo lp lq ld b">total</code>，其中<code class="fe lo lp lq ld b">total</code>依赖于前两种方法。现在创建一个名为<code class="fe lo lp lq ld b">checkout.test.js</code>的新文件，我们将在这里编写测试。这里的命名约定必须以<code class="fe lo lp lq ld b">.test.js</code>结尾，这样Jest就知道在测试期间要运行哪些文件。</p><p id="94c4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在我们的新测试文件的顶部，需要我们的检验文件，如下所示:</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3182" class="lh li in ld b gy lj lk l ll lm">const checkout = require('./checkout')</span></pre><p id="3f01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这使我们能够访问我们的<code class="fe lo lp lq ld b">checkout</code>对象和其中的方法。现在让我们编写我们的第一个测试或断言。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ls"><img src="../Images/64a12525abd2ec8ac82d02a65016b521.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Wias5H1dbmDIjgLiRzJWA.png"/></div></div></figure><p id="2562" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Jest使用<code class="fe lo lp lq ld b">test</code>关键字来定义一个测试。第一个参数是描述测试内容的字符串，第二个参数是运行测试的回调函数。</p><p id="2853" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们使用<code class="fe lo lp lq ld b">expect</code>关键字创建一个断言，使用<code class="fe lo lp lq ld b">.toBe()</code>匹配器告诉Jest我们期望这个断言等于什么。所以在第四行，我们断言在<code class="fe lo lp lq ld b">checkout</code>对象中的<code class="fe lo lp lq ld b">subTotal</code>方法，当传递一个两个值都等于5的数组时，将返回或等于10。</p><p id="31a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在您的CLI中运行<code class="fe lo lp lq ld b">npm test</code>，看看会发生什么。您应该会看到类似下面的屏幕截图。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lt"><img src="../Images/259fb646b2110ed5418889e08a9f3253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SK8dMAZhFTWo6NhEAnL5cg.png"/></div></div></figure><p id="b090" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在进一步阅读之前，你为什么不练习写一个税和总函数的测试。你想到了什么？</p><p id="7f3d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是我想到的。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lu"><img src="../Images/348083a0fe9a016952a05dccd7740bda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oMfL1hFVCutij_mjShKKvQ.png"/></div></div></figure><p id="3c2f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在我可以说我已经为我的项目获得了100%的覆盖率，但是如果我们想要改进这些测试并使它们更加简单呢？幸运的是Jest有一堆<a class="ae jz" href="https://jestjs.io/docs/expect" rel="noopener ugc nofollow" target="_blank">匹配器</a>可供选择，我们可以在每次测试中编写多个断言。</p><p id="0157" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我发现一个有用的方法是<code class="fe lo lp lq ld b">.not</code>方法，它可以与任何匹配器结合使用来测试相反的情况，就像这样。</p><figure class="ky kz la lb gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lv"><img src="../Images/3a307105e366879697b2d90debfdc178.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TPvyO1QovvFVAzJ1z-cRw.png"/></div></div></figure><p id="7272" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我发现的另一件事是拥有一个以上的测试场景会很有帮助。例如，在使用<code class="fe lo lp lq ld b">.toEqual()</code>匹配器时，我决定为我的<code class="fe lo lp lq ld b">tax</code>方法使用不同的值。由于舍入错误，测试失败。多亏了扩展测试，我能够改进我的方法，使它更有弹性。</p><p id="a851" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这就是Jest入门的全部内容，但是过几个星期再来看我的下一篇文章，在那里我将介绍Jest中的模拟函数。同时，请在下面留下评论，让我知道你找到的最喜欢的匹配器是什么，以及你打算如何使用它！</p><p id="491b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="lw">更多内容请看</em><a class="ae jz" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="lw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Use JavaScript Libraries in Angular Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Angular项目中使用JavaScript库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-use-javascript-libraries-in-angular-project-c6d58a9aa9ca?source=collection_archive---------6-----------------------#2021-06-03">https://javascript.plainenglish.io/how-to-use-javascript-libraries-in-angular-project-c6d58a9aa9ca?source=collection_archive---------6-----------------------#2021-06-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/8efdeaffc1242f65b7767af18ef57863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xJRHySYUFAhVpOn4"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@wocintechchat?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Christina @ wocintechchat.com</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f91c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在Angular项目中使用JavaScript库不像在Angular JS或普通JavaScript项目中那样简单。在一个普通的JavaScript项目中，您可以将这个库包含在您的<code class="fe ky kz la lb b">index.html</code>的<code class="fe ky kz la lb b">script</code>标签中，然后这个库就可以使用了。</p><p id="5092" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是在Angular项目中，遵循相同的步骤可能实际上不起作用。事实上，编译器可能会在库的使用上抛出一个错误。为了包含和使用这个库，标准的方法是使用npm安装这个库，然后寻找它的类型声明文件<code class="fe ky kz la lb b">(*.d.ts)</code>。该库的类型声明文件可能是也可能不是其源代码的一部分。如果不存在，则需要单独安装。</p><h1 id="45c8" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">什么是类型声明文件？</h1><p id="1e5a" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">TypeScript是一种类型化语言，声明文件向非类型化的JavaScript代码添加必要的类型。简而言之，类型声明文件为编译器提供了关于导入成员的信息，以及它所期望的参数、数据类型、返回值等等。,</p><p id="8ea6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为了进一步理解，请看下面的例子:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="b076" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这里有一个名为<code class="fe ky kz la lb b">person</code>的函数，它接受一个<code class="fe ky kz la lb b">Array </code>并返回一个<code class="fe ky kz la lb b">Object</code>。</p><p id="c496" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这个函数的声明文件是:</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="cbee" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">声明文件只包含类型信息，不包含函数实现。这些被称为<strong class="kc io">环境声明。</strong></p><p id="ca0d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">关于类型脚本声明需要注意的几点:</p><ul class=""><li id="df78" class="ml mm in kc b kd ke kh ki kl mn kp mo kt mp kx mq mr ms mt bi translated">声明文件中没有函数/类/变量实现。</li><li id="06fc" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">函数没有默认参数。</li><li id="2a48" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated"><em class="mz"> declare </em>关键字用来告诉这个函数/类/变量的实际实现存在于别处。</li><li id="2306" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">仅对导出的成员或打算从此文件中使用的函数/类/变量使用<em class="mz"> declare </em>关键字。不要在函数内部的局部变量上使用它。</li><li id="18b8" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">VS代码添加了必要的智能感知，并在包含了<code class="fe ky kz la lb b">.d.ts</code>文件后显示正确的自动完成建议。从而使开发变得容易并提前识别错误。</li></ul><p id="d3b9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要为JavaScript文件创建声明文件，请使用以下命令:</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="9aa3" class="ne ld in lb b gy nf ng l nh ni">npx typescript script.js --declaration --allowJs --emitDeclarationOnly --outDir types</span></pre><p id="e655" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">上面的命令创建了一个<code class="fe ky kz la lb b">types/script.d.ts</code>文件。</p><p id="3836" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要为类型脚本文件创建声明文件，请使用命令:</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="331c" class="ne ld in lb b gy nf ng l nh ni">tsc script.ts -d</span></pre><p id="ad88" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦创建了声明文件，您就可以将它们包含在Angular项目中并开始使用它们。您必须包括源代码及其声明文件。</p><h1 id="b3a8" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">如何在Angular Project中使用库？</h1><p id="5459" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated">如果您在Angular项目中安装了一个JavaScript库，您一定注意到了源文件夹包含一个扩展名为<code class="fe ky kz la lb b">.d.ts</code>的文件。有些库没有内置的typings文件夹，相反，你必须通过npm使用<code class="fe ky kz la lb b">@typings</code>手动安装它们。</p><p id="62c2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们以一个流行的JS库为例:<a class="ae jz" href="https://momentjs.com/" rel="noopener ugc nofollow" target="_blank"> Moment.js </a></p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="f78f" class="ne ld in lb b gy nf ng l nh ni">npm install moment --save</span></pre><p id="21ed" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在，检查<code class="fe ky kz la lb b">node_modules</code>文件夹中的<code class="fe ky kz la lb b">moment</code>库。</p><figure class="mf mg mh mi gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/5d25cfb99da9502b3dedef14ea0cc4b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*lj6pZdj3drymnj3iTRREqg.png"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Moment.js library</figcaption></figure><p id="5e60" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Moment.js附带了一个名为<code class="fe ky kz la lb b">moment.d.ts</code>的打字文件。现在我们可以通过使用<code class="fe ky kz la lb b">ts</code>文件中的<code class="fe ky kz la lb b">import</code>语句直接使用该库。</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="36d3" class="ne ld in lb b gy nf ng l nh ni">import moment from ‘moment’;</span><span id="5a9e" class="ne ld in lb b gy nk ng l nh ni">date = moment().format('MMM Do YY');</span></pre><p id="bf3a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这将显示当前日期。</p><p id="a8f0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们将尝试添加另一个库，<a class="ae jz" href="https://www.npmjs.com/package/crypto-js" rel="noopener ugc nofollow" target="_blank"> CryptoJS </a>。</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="8c69" class="ne ld in lb b gy nf ng l nh ni">npm install crypto-js --save</span></pre><p id="7a71" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">安装后，如果您试图使用<code class="fe ky kz la lb b">CryptoJS </code>方法，编译器将抛出一个错误，要求安装<code class="fe ky kz la lb b">CryptoJS</code>的类型声明文件。这个库没有它的类型声明文件。我们需要单独安装它。</p><p id="b603" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">感谢<a class="ae jz" href="https://github.com/DefinitelyTyped/DefinitelyTyped" rel="noopener ugc nofollow" target="_blank">明确类型化的</a>社区为库发布类型。</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="f639" class="ne ld in lb b gy nf ng l nh ni">npm i @types/crypto-js --save-dev</span></pre><p id="8c96" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一旦安装了类型声明文件，编译器就会识别它，您就可以开始使用这些方法了。</p><pre class="mf mg mh mi gt na lb nb nc aw nd bi"><span id="2b7a" class="ne ld in lb b gy nf ng l nh ni">import * as CryptoJS from 'crypto-js'</span></pre><p id="500e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">现在您可以开始使用库方法了。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">app.component.ts with Moment.js and CryptoJS libraries.</figcaption></figure><p id="8a49" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">绑定HTML页面中的变量以查看它们。</p><figure class="mf mg mh mi gt jo"><div class="bz fp l di"><div class="mj mk l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Binding the component value to HTML</figcaption></figure><h1 id="49f5" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">结论</h1><ul class=""><li id="cd01" class="ml mm in kc b kd ma kh mb kl nl kp nm kt nn kx mq mr ms mt bi translated">要在Angular项目中使用JavaScript库，请通过npm安装该库并检查其类型声明文件。</li><li id="774f" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">从@types/ <library-name>安装类型声明文件，如果它不是源代码的一部分。</library-name></li><li id="ed91" class="ml mm in kc b kd mu kh mv kl mw kp mx kt my kx mq mr ms mt bi translated">将库导入到组件中，并开始使用它。</li></ul><p id="0045" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">这是一个可行的StackBlitz示例:</p><div class="no np gp gr nq nr"><a href="https://stackblitz.com/edit/js-lib-angular?embed=1&amp;file=library-example/src/app/app.component.ts" rel="noopener  ugc nofollow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd io gy z fp nw fr fs nx fu fw im bi translated">角度堆栈</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">编辑描述</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">stackblitz.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of jt nr"/></div></div></a></div><h2 id="dad2" class="ne ld in bd le og oh dn li oi oj dp lm kl ok ol lq kp om on lu kt oo op ly oq bi translated">参考</h2><p id="ab68" class="pw-post-body-paragraph ka kb in kc b kd ma kf kg kh mb kj kk kl mc kn ko kp md kr ks kt me kv kw kx ig bi translated"><a class="ae jz" href="https://www.typescriptlang.org/docs/handbook/2/type-declarations.html" rel="noopener ugc nofollow" target="_blank">https://www . typescriptlang . org/docs/handbook/2/type-declarations . html</a></p><p id="93b2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">仅此而已！</p><p id="3b17" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">希望这篇文章有用！</p><p id="bb63" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mz">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mz">plain English . io</em></a></p></div></div>    
</body>
</html>
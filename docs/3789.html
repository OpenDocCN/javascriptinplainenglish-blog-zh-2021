<html>
<head>
<title>JavaScript Tip: Conditionally Add an Item to an Array</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript提示:有条件地向数组中添加一个项目</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/javascript-tip-conditionally-add-an-item-to-an-array-5877a9d7c88b?source=collection_archive---------0-----------------------#2021-07-30">https://javascript.plainenglish.io/javascript-tip-conditionally-add-an-item-to-an-array-5877a9d7c88b?source=collection_archive---------0-----------------------#2021-07-30</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="df69" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用扩展语法和条件三元运算符</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/2b5de57dc09a789111ed4557bce3146f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bgmw-de-DqxIo1ur"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@neetuladdha83?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Neetu Laddha</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4ed1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在我的编程生涯中，我学到了一件事，那就是凡事都有解决方案。</p><p id="b4aa" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在编码的时候，我经常遇到新的问题，我需要多动动脑筋，使用谷歌搜索的力量。</p><p id="1d2e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这一系列文章中，我将介绍用JavaScript编码时遇到的一些问题的解决方案。</p><p id="8238" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们要研究的第一个问题是如何有条件地向数组中添加一个元素。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="b434" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">问题</h1><p id="bdf8" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">在下面的例子中，我有一系列的运动。有一个条件是truthy，意思是我要把“<em class="mw">足球”</em>加入数组；还有一个条件是falsy，这意味着我不想将<em class="mw">【棒球】</em>添加到数组中。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="5793" class="nc ma iq my b gy nd ne l nf ng">const sports = [<br/>  "basketball", <br/>  trueCondition &amp;&amp; "football", <br/>  falseCondition &amp;&amp; "baseball"<br/>];</span></pre><p id="a20f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最初的想法是像上面一样使用逻辑AND (&amp;&amp;)操作符。这是可行的，但问题是<em class="mw">“baseball”</em>项会变成false，而不是被删除。这将产生下面的数组。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="419c" class="nc ma iq my b gy nd ne l nf ng"><em class="mw">["basketball", "football", false]</em></span></pre><h1 id="ecea" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">解决办法</h1><p id="9f35" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">有几种方法可以解决这个问题，但我找到的最好的方法是下面的解决方案。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nm"><img src="../Images/0c52c12d4fa5265bfbe66a3862a5abdb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZSEez9jkNcoWgHjalrytlQ.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/chadmuro/16409d7b556013f974aae2f463307902" rel="noopener ugc nofollow" target="_blank">Link to GitHub Gist</a></figcaption></figure><p id="06fc" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">该解决方案将产生以下数组。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="b5c0" class="nc ma iq my b gy nd ne l nf ng"><em class="mw">["basketball", "football"]</em></span></pre><h2 id="5abc" class="nc ma iq bd mb nn no dn mf np nq dp mj lf nr ns ml lj nt nu mn ln nv nw mp nx bi translated">为什么会这样</h2><p id="2cc0" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">为了理解为什么这样做，我们需要首先理解JavaScript中的两个概念:条件三元运算符和spread语法。</p><p id="071e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">条件(三元)运算符</strong></p><p id="ef1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">条件三元运算符的用法类似于if-else语句。它需要三个操作数:</p><p id="7017" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">后跟<code class="fe ny nz oa my b">?</code>的条件。如果条件为the，后跟一个<code class="fe ny nz oa my b">:</code>时要执行的表达式。以及条件为falsy时要执行的表达式。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="ba49" class="nc ma iq my b gy nd ne l nf ng">condition ? expressionIfTrue : expressionIfFalse</span></pre><p id="42db" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到我们的例子，我们可以看到三元操作符的作用。因为第一个条件是truthy，所以这个项会执行第一个表达式，<em class="mw"> ["football"] </em>。因为第二个条件是falsy，所以这个条目会执行第二个表达式，<em class="mw"> [] </em>，一个空数组。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="7926" class="nc ma iq my b gy nd ne l nf ng">trueCondition ? ["football"] : [] <em class="mw">// will become ["football"]</em></span><span id="8b50" class="nc ma iq my b gy ob ne l nf ng">falseCondition ? ["baseball"] : [] <em class="mw">// will become []</em></span></pre><p id="58a6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">展开语法(…) </strong></p><p id="8a2a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">spread语法允许扩展可迭代表达式。如果我们在一个数组上使用spread语法，数组中的项将被展开。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="f145" class="nc ma iq my b gy nd ne l nf ng">...[1, 2, 3] <em class="mw">// will become 1, 2, 3</em></span></pre><p id="a758" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到我们的例子，我们可以看到spread语法在起作用。第一项被展开，所以它不是一个包含字符串的数组，而只是一个字符串。在第二个项目中，我们扩展了一个空数组，结果什么也没有。</p><pre class="kg kh ki kj gt mx my mz na aw nb bi"><span id="b755" class="nc ma iq my b gy nd ne l nf ng">...["football"] // will become <em class="mw">"football"</em></span><span id="3991" class="nc ma iq my b gy ob ne l nf ng">...[] // <em class="mw">will become nothing</em></span></pre><p id="ae05" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以看到这个解决方案是如何工作的，以及为什么将<em class="mw">【football】</em>添加到数组中，而不添加<em class="mw">【baseball】</em>。</p><h1 id="cf6b" class="lz ma iq bd mb mc nh me mf mg ni mi mj jw nj jx ml jz nk ka mn kc nl kd mp mq bi translated">可选择的解决方案</h1><p id="7270" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">这个问题还有另外一个解决方法。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c62b766731f9f9a4c93b7794abf7c658.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*8J-j77YOCtgkufXFUtp_Ew.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://gist.github.com/chadmuro/6b5416d3557429837677df648616d155" rel="noopener ugc nofollow" target="_blank">Link to GitHub Gist</a></figcaption></figure><p id="d746" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们可以使用我们第一次尝试的逻辑AND (&amp;&amp;)操作符，并在数组末尾调用filter方法传入<em class="mw">布尔值</em>。</p><p id="898e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这种解决方案的一个缺点是，如果要添加到数组中的项是虚假项，即使条件为真，它也将从数组中删除。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="5ae9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">结论</h1><p id="a96a" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">感谢阅读！当我遇到其他问题时，我计划写更多像这样的JavaScript快速技巧。敬请关注更多即将到来的！</p><p id="d24f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><strong class="ky ir">更多阅读</strong></p><div class="od oe gp gr of og"><a rel="noopener  ugc nofollow" target="_blank" href="/doubly-linked-lists-with-javascript-9c20a9dc4fb3"><div class="oh ab fo"><div class="oi ab oj cl cj ok"><h2 class="bd ir gy z fp ol fr fs om fu fw ip bi translated">使用JavaScript的双向链表</h2><div class="on l"><h3 class="bd b gy z fp ol fr fs om fu fw dk translated">JavaScript数据结构系列的第4部分</h3></div><div class="oo l"><p class="bd b dl z fp ol fr fs om fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="op l"><div class="oq l or os ot op ou kp og"/></div></div></a></div><p id="7ac1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mw">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="mw">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
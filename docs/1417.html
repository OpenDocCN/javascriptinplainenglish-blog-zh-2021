<html>
<head>
<title>Getting Started With TypeScript and React Function Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript和React函数组件入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-typescript-and-react-function-components-558a6f11dc6d?source=collection_archive---------9-----------------------#2021-03-25">https://javascript.plainenglish.io/getting-started-with-typescript-and-react-function-components-558a6f11dc6d?source=collection_archive---------9-----------------------#2021-03-25</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="f3f0" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">何时应该使用React。定义一个函数组件？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/e65c5ecc4526e17b66ac9f68c85d0cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YCEMbyI5EPgm2KtS"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@flowclark?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Flow Clark</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0b46" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">TypeScript和React是当今最流行的两种技术。你可以将它们结合起来，利用两者的优势来构建令人惊叹的项目。React使构建用户界面变得容易，并且TypeScript类型检查所有JavaScript以帮助防止错误。</p><p id="2356" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">React的一个关键特性是使用函数组件并在它们之间传递属性。在使用带有React的TypeScript时，我们需要在传递道具时采取额外的步骤。这一步将检查属性的类型并使TypeScript满意。</p><p id="23cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解在处理功能组件和道具时如何使用类型。</p><p id="8e83" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我假设您熟悉React和TypeScript的基础知识。如果您不熟悉TypeScript，请阅读下面的文章开始学习。</p><div class="ls lt gp gr lu lv"><a href="https://levelup.gitconnected.com/type-annotation-vs-type-inference-in-typescript-85ba2194ebe1" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">TypeScript中的类型注释与类型推理</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如何在TypeScript中向变量添加类型</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">levelup.gitconnected.com</p></div></div><div class="me l"><div class="mf l mg mh mi me mj kp lv"/></div></div></a></div></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><h1 id="59d5" class="mr ms iq bd mt mu mv mw mx my mz na nb jw nc jx nd jz ne ka nf kc ng kd nh ni bi translated">正常功能组件</h1><p id="f82c" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">当将道具从一个组件传递到另一个组件时，您将需要创建一个接口来定义道具类型。这个接口将为我们做两项检查。它将检查我们是否从父组件中提供了正确的道具。它还将检查我们是否在子组件中正确地使用了道具。</p><p id="b081" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">例如，假设我们有一个父组件，我们想将一个消息属性传递给一个子组件。该消息将是一个字符串。</p><p id="8168" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在子组件中，我们将创建一个接口<code class="fe no np nq nr b">ChildProps</code>。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="b864" class="nw ms iq nr b gy nx ny l nz oa">interface ChildProps {<br/>  message: string;<br/>}</span></pre><p id="2288" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，当我们将道具传递给子组件时，我们会像这样给道具一个类型<code class="fe no np nq nr b">ChildProps</code>。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="b589" class="nw ms iq nr b gy nx ny l nz oa">const Child = (<em class="ob">props</em>: ChildProps) =&gt; {<br/>  return &lt;div&gt;{props.message}&lt;/div&gt;;<br/>};</span></pre><p id="9cca" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">当我们收到孩子的道具时，我们有时并不想收到所有的道具。相反，我们可以破坏我们想要的。</p><p id="d813" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为此，在子组件中，我们将析构道具。然后像以前一样添加一个<code class="fe no np nq nr b">ChildProps</code>类型。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="fff1" class="nw ms iq nr b gy nx ny l nz oa">const Child = ({ <em class="ob">message</em> }: ChildProps) =&gt; {<br/>  return &lt;div&gt;{message}&lt;/div&gt;;<br/>};</span></pre><p id="e841" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">由于我们创建的接口，TypeScript知道消息现在将是一个字符串。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oc"><img src="../Images/c3eb74136c549822238502fead50066b.png" data-original-src="https://miro.medium.com/v2/resize:fit:972/format:webp/1*Ri-d4xZiG8MLceWl_THcjw.png"/></div></figure><p id="21ef" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">回到父组件，当我们呈现子组件时，我们必须传递一个字符串形式的消息属性。如果我们忘记了消息属性或者试图传递除了字符串以外的任何东西，我们将会得到一个错误。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="7293" class="nw ms iq nr b gy nx ny l nz oa">const Parent = () =&gt; {<br/>  return (<br/>    &lt;div&gt;<br/>      <em class="ob">// message prop must be a string</em><br/>      &lt;Child message="Hello world" /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>};</span></pre><h1 id="4d98" class="mr ms iq bd mt mu od mw mx my oe na nb jw of jx nd jz og ka nf kc oh kd nh ni bi translated">使用React。足球俱乐部</h1><p id="3675" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">我们上面写的函数组件是完全有效的。一个缺点是TypeScript不知道我们正在使用React组件。相反，它说我们只是返回一个JSX元素。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/a65a03081f07f29478cd096da316c4e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*GDHXOGHm5cKELUmqIICMUQ.png"/></div></figure><p id="9a62" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这不是什么大问题。但是正因为如此，子组件将不能访问基本React组件的属性，比如<code class="fe no np nq nr b">defaultProps</code>、<code class="fe no np nq nr b">propTypes</code>、<code class="fe no np nq nr b">displayName</code>和<code class="fe no np nq nr b">contextTypes</code>。</p><p id="47bd" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们确实需要显式返回一个React函数组件，您可以注释该类型。为此，您将把组件的类型注释到<code class="fe no np nq nr b">React.FC</code>。然后说你会收到道具，里面加一套<code class="fe no np nq nr b">&lt;&gt;</code>里面加<code class="fe no np nq nr b">ChildProps</code>界面。</p><p id="f905" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在我们可以使用道具，或者破坏我们想要的道具。</p><pre class="kg kh ki kj gt ns nr nt nu aw nv bi"><span id="b86c" class="nw ms iq nr b gy nx ny l nz oa">const Child: React.FC&lt;ChildProps&gt; = ({ <em class="ob">message</em> }) =&gt; {<br/>  return &lt;div&gt;{message}&lt;/div&gt;;<br/>};</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oj"><img src="../Images/e569950cb0e8df9f76de111ca9de4f43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*yXa_hXKBPJSJO2m9deTCgw.png"/></div></figure><p id="c156" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个区别是如果你使用React。FC类型注释，您将可以访问子属性。当我们为一个组件使用开始和结束标签时，这将非常有用。介于两者之间的任何东西都将是孩子财产的一部分。</p><h1 id="18fe" class="mr ms iq bd mt mu od mw mx my oe na nb jw of jx nd jz og ka nf kc oh kd nh ni bi translated">你应该使用哪一个？</h1><p id="9ad2" class="pw-post-body-paragraph kw kx iq ky b kz nj jr lb lc nk ju le lf nl lh li lj nm ll lm ln nn lp lq lr ij bi translated">注意反应。FC最近已从create-react-app TypeScript模板中删除。看看下面的PR。有很多信息为什么反应。不需要FC。</p><div class="ls lt gp gr lu lv"><a href="https://github.com/facebook/create-react-app/pull/8177" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">移除React。Retsam Pull Request # 8177 Facebook/create-react-app从Typescript模板生成的FC</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">这移除了React。来自Typescript项目的基模板的FC。一个小变化的长解释:反应。FC是…</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">github.com</p></div></div><div class="me l"><div class="ok l mg mh mi me mj kp lv"/></div></div></a></div><p id="da00" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">似乎普遍的共识是鼓励使用普通函数而不是React.FC。在我目前的工作中，我们实际上正在使用React.FC。在一天结束时，您可以自由使用您喜欢的任何函数。</p></div><div class="ab cl mk ml hu mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ij ik il im in"><p id="813b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">感谢阅读！如果您准备开始构建TypeScript和React应用程序，请查看下面的文章。</p><div class="ls lt gp gr lu lv"><a href="https://medium.com/code-and-chill/curated-list-of-resources-to-learn-typescript-with-react-f7d40421bc7a" rel="noopener follow" target="_blank"><div class="lw ab fo"><div class="lx ab ly cl cj lz"><h2 class="bd ir gy z fp ma fr fs mb fu fw ip bi translated">使用React学习TypeScript的精选资源列表</h2><div class="mc l"><h3 class="bd b gy z fp ma fr fs mb fu fw dk translated">如果您想学习使用React的TypeScript并开始构建应用程序，请遵循以下路径</h3></div><div class="md l"><p class="bd b dl z fp ma fr fs mb fu fw dk translated">medium.com</p></div></div><div class="me l"><div class="ol l mg mh mi me mj kp lv"/></div></div></a></div><p id="9a0b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ob">更多内容尽在</em><a class="ae kv" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ob">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
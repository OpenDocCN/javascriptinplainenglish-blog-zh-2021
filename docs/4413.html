<html>
<head>
<title>Why You Should Not Use MongoDB For Your Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不应该在您的项目中使用MongoDB</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-not-use-mongodb-for-your-project-bf0f1caa6672?source=collection_archive---------1-----------------------#2021-09-03">https://javascript.plainenglish.io/why-you-should-not-use-mongodb-for-your-project-bf0f1caa6672?source=collection_archive---------1-----------------------#2021-09-03</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="8f2f" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">大多数情况下，使用关系数据库会更好。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/d35cbbcab5e2abcea3281941a528d7e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*c_XZi6iFrS1CFVYe"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@kwangjavier?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kwang Javier</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1a88" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">MongoDB似乎是JavaScript web应用程序最受欢迎的数据库，但是我真的不明白为什么。我用MongoDB继承了一个项目，每个人都希望它是用关系数据库开发的。我坚信大多数时候你不需要MongoDB，使用PostgreSQL这样的关系数据库会更好。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="0e7c" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">为什么MongoDB这么受欢迎？</h1><p id="64bc" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">MongoDB是用JavaScript开发web应用程序的流行工具栈的一部分。MEAN代表MongoDB，Express.js，Angular，Node.js<a class="ae kv" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank">MongoDB</a>作为数据存储，node . js和<a class="ae kv" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express.js </a>提供web服务器和框架，前端用<a class="ae kv" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>编写。MERN和MEVN是类似的堆栈，分别用R <a class="ae kv" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> eact </a>和<a class="ae kv" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue.js </a>替换Angular。</p><h1 id="849f" class="lz ma iq bd mb mc mw me mf mg mx mi mj jw my jx ml jz mz ka mn kc na kd mp mq bi translated">实际上，它有多受欢迎？</h1><p id="56d3" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我主要感兴趣的是它与Postgres相比如何。不幸的是，没有一个栈有一个吸引人的名字，我可以很容易地搜索到。因此，让我们来分别看看MongoDB和PostgreSQL最流行的模块:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nb"><img src="../Images/9b4181c6c4ac649dd9c6cb215cc49567.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WyY51PnsruBICGIKzSKvCA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">number of weekly downloads for the most popular MongoDB and PostgreSQL packages on npm, via <a class="ae kv" href="https://www.npmtrends.com/mongodb-vs-mongoose-vs-pg-vs-sequelize" rel="noopener ugc nofollow" target="_blank">npmtrends</a></figcaption></figure><p id="65ee" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如你所见，最受欢迎的mongo包<code class="fe nc nd ne nf b">mongodb</code>比最受欢迎的PostgreSQL包<code class="fe nc nd ne nf b">pg</code>每周的下载量多50万次。其次，<code class="fe nc nd ne nf b">mongoose</code>和<code class="fe nc nd ne nf b">sequelize</code>的距离相近。再看Github的明星数量，对于<code class="fe nc nd ne nf b">mongodb</code>和<code class="fe nc nd ne nf b">pg</code>来说都是一个级别的。同样，<code class="fe nc nd ne nf b">mongoose</code>和<code class="fe nc nd ne nf b">sequelize</code>也是如此。因此，可以公平地说，MongoDB和PostgreSQL在JavaScript开发人员中受到同样的重视，但是MongoDB使用得更广泛。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="f5b4" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">MongoDB和PostgreSQL有什么不同？</h1><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ng"><img src="../Images/37ae6e6d6a7dc35716baf07169e58aa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B-eChwrYUetf825xfe3e0w.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">PostgreSQL logo from Daniel Lundin, <a class="ae kv" href="https://www.postgresql.org/about/licence/" rel="noopener ugc nofollow" target="_blank">PostgreSQL License</a>, MongoDB logo from MongoDB, Inc., Attribution, via Wikimedia Commons</figcaption></figure><p id="d0c7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">好了，我们已经谈了很多关于MongoDB和PostgreSQL的流行程度，<br/>那么MongoDB和PostgreSQL有什么区别呢？</p><p id="7c39" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">两者都是流行的开源数据库，像AWS这样的云提供商为两者提供托管解决方案，但除此之外，它们是非常不同的。</p><h2 id="258e" class="nh ma iq bd mb ni nj dn mf nk nl dp mj lf nm nn ml lj no np mn ln nq nr mp ns bi translated">MongoDB</h2><p id="b1fc" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">MongoDB是一个NoSQL文档存储。每个文档或数据都以JSON格式存储。NoSQL意味着它不能用SQL查询，也不能表达不同文档之间的关系。例如，在订单跟踪系统中，您有一个用户集合和一个单独的集合来存储订单。现在，您希望强制每个订单都连接到一个现有用户。使用MongoDB不容易做到这一点，必须在应用程序代码中完成。</p><p id="4286" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">它还是一个“无模式”的数据库，这意味着对存储什么类型的数据的约束是可选的。在前面的例子中，这可能意味着对于一些订单，您将价格存储为数字，对于一些订单，您将价格存储为字符串，对于一些订单，价格可能会丢失。</p><p id="2dae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后但同样重要的是，MongoDB支持分片和复制，这使得您可以轻松地扩展数据库，以支持更高的数据量和每秒更多的查询。</p><h1 id="4e0e" class="lz ma iq bd mb mc mw me mf mg mx mi mj jw my jx ml jz mz ka mn kc na kd mp mq bi translated">一种数据库系统</h1><p id="634b" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">另一方面，PostgreSQL是一个SQL数据库。它在行和表中存储数据，并允许对表之间的关系进行约束。对于订购系统，您可以为用户和订单实现单独的表，并使用f <a class="ae kv" href="https://www.w3schools.com/sql/sql_foreignkey.asp" rel="noopener ugc nofollow" target="_blank">外键</a>来确保您永远不会有与用户无关的订单。</p><p id="1a74" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我们的PostgreSQL数据库的SQL模式也可以确保一行中的字段存在并符合某种类型。订单的价格列不可为空，类型为float。试图存储任何其他内容都会导致异常。</p><p id="04eb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，还有一些对分片和复制的支持，但我经常在简单的主从设置中看到。从根本上说，扩展关系数据库有其固有的局限性，因为一旦必须将数据分布到多个实例中，就很难实施关系约束。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="30b9" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">为什么我不应该使用MongoDB？</h1><h2 id="cec2" class="nh ma iq bd mb ni nj dn mf nk nl dp mj lf nm nn ml lj no np mn ln nq nr mp ns bi translated">它会减慢你的发展速度</h2><p id="6310" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">乍一看，MongoDB似乎是一个不错的选择。将数据存储在JSON中使得与javascript代码交互变得容易，您不会受到模式的约束，也不会有学习SQL的开销。</p><p id="6265" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是大多数时候，拥有关系模式是一件好事。数据中有关系，用SQL强制它们很容易。它减少了应用程序代码中边缘情况的数量。例如，您不必处理订单与现有用户无关的情况，数据库不允许这种情况。</p><p id="13af" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">对于使用模式强制类型也是如此。知道一个字段总是某种类型会大大减少应用程序需要支持的不同状态的数量。反过来，这也使得测试更加容易。</p><p id="b3d7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以把每个应用程序想象成一个状态机，更少的状态意味着你的应用程序更容易理解、维护和扩展。相反，随着项目的发展，越来越多的状态和边缘案例会导致您添加的每个新特性产生更多的状态。进而减缓新功能的开发。让事情尽可能的小和约束是值得的。</p><p id="cb59" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些人可能会争辩说，一个约束模式还会限制你如何用新的、尚未发现的特性来扩展你的软件。相反，我发现它是一个很好的文档来源，可以简化开发。还是那句话，软件越容易理解，就越容易扩展。随着用例的变化，有一些工具和实践可以帮助您<a class="ae kv" href="https://martinfowler.com/articles/evodb.html" rel="noopener ugc nofollow" target="_blank">随着时间的推移发展您的模式</a>。</p><h2 id="c55c" class="nh ma iq bd mb ni nj dn mf nk nl dp mj lf nm nn ml lj no np mn ln nq nr mp ns bi translated">您不需要可伸缩性</h2><p id="f890" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">MongoDB的一个重要论点是可伸缩性，但是可伸缩性意味着什么呢？对于一个项目，您预计会有多少数据和多少查询？在我参与的最后两个专业项目中，我们做了包络计算，发现我们很可能永远不会超过PostgreSQL提供的容量。</p><p id="cc99" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">举几个例子:AWS RDS的数据限制是几十TB，也就是10个左右。Airbnb的平台上大约有10⁷的房产，medium的活跃作家应该比10⁶少。因此，对于许多用例来说，存储是足够的。对每秒请求数的粗略计算更加困难，但是我再次发现，在许多用例中，实际数字通常低得惊人。</p><p id="8d4a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仍然有许多用例超出了单个关系数据库的能力，但是我猜想当它足够时会有更多的用例。如果这还不够(因为你正在开发下一个你知道会腾飞的社交网络),那么你的架构需要仔细的系统设计。追随最流行的JavaScript技术栈是不够的。</p></div><div class="ab cl ls lt hu lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="ij ik il im in"><h1 id="de4d" class="lz ma iq bd mb mc md me mf mg mh mi mj jw mk jx ml jz mm ka mn kc mo kd mp mq bi translated">最后的想法</h1><p id="2e08" class="pw-post-body-paragraph kw kx iq ky b kz mr jr lb lc ms ju le lf mt lh li lj mu ll lm ln mv lp lq lr ij bi translated">我们编写软件来为企业解决问题。问题和我们对这些问题的理解都会随着时间而改变，所以你的软件也会随着时间而改变。</p><p id="a01a" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">有些违背直觉，限制软件中选项和状态的数量将会比许可结构更好地支持这种变化。</p><p id="2117" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是为什么我认为作为默认选项，您应该总是更喜欢像PostgreSQL这样的关系数据库而不是MongoDB。除非你能提出一个令人信服的理由来解释为什么它行不通。但是一个好的论点需要一些数字。如果您没有这些，请返回默认设置。</p><h1 id="7d2e" class="lz ma iq bd mb mc mw me mf mg mx mi mj jw my jx ml jz mz ka mn kc na kd mp mq bi translated">资源</h1><div class="nt nu gp gr nv nw"><a href="https://www.mongodb.com/mean-stack" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">什么是均值叠加？简介和示例</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">MEAN架构旨在使用JavaScript构建web应用程序和处理JSON变得非常简单…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.mongodb.com</p></div></div><div class="of l"><div class="og l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://www.xplenty.com/blog/mongodb-vs-postgresql/" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">Mongodb与PostgresSQL:比较数据库结构</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">任何公司最重要的功能之一是一个安全的数据库。网络钓鱼攻击、恶意软件…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">www.xplenty.com</p></div></div><div class="of l"><div class="ol l oh oi oj of ok kp nw"/></div></div></a></div><div class="nt nu gp gr nv nw"><a href="https://martinfowler.com/articles/evodb.html" rel="noopener  ugc nofollow" target="_blank"><div class="nx ab fo"><div class="ny ab nz cl cj oa"><h2 class="bd ir gy z fp ob fr fs oc fu fw ip bi translated">进化数据库设计</h2><div class="od l"><h3 class="bd b gy z fp ob fr fs oc fu fw dk translated">Pramod Sadalage Pramod开发了进化数据库设计和数据库重构的原始技术…</h3></div><div class="oe l"><p class="bd b dl z fp ob fr fs oc fu fw dk translated">martinfowler.com</p></div></div><div class="of l"><div class="om l oh oi oj of ok kp nw"/></div></div></a></div><p id="a4e6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="on">更多内容看</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="on">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
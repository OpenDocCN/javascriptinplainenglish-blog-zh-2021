<html>
<head>
<title>Everything New in React 18</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React 18中的新功能</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/everything-new-in-react-18-db459c2608de?source=collection_archive---------0-----------------------#2021-06-15">https://javascript.plainenglish.io/everything-new-in-react-18-db459c2608de?source=collection_archive---------0-----------------------#2021-06-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/6083b1111b09c3ee4bace83feac79bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RMJSWGJpHhDyr0r0QgXsVg.png"/></div></div></figure><blockquote class="jv jw jx"><p id="7eda" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">React 18 Alpha在这里，React 18增加了很多东西。React 17没有看到太多新的加入。但React 18肯定不是这样。在本文中，我们将了解一些主要的更新。</p></blockquote><h2 id="1611" class="kx ky in bd kz la lb dn lc ld le dp lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">有什么新鲜事？</h2><h1 id="3f34" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">1.新的根API</h1><p id="26d7" class="pw-post-body-paragraph jy jz in kb b kc mk ke kf kg ml ki kj lg mm km kn lk mn kq kr lo mo ku kv kw ig bi translated">这是我们习惯看到的</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/f80295f1af018d9d720150652df65ca1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mePWMLT4WGZJuvsJYmyt8A.png"/></div></div></figure><p id="7a16" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">我们传递reactDOM.render我们的App组件，然后传递<code class="fe mu mv mw mx b">document.getElementById</code>和我们的根元素。因此，我们非常简单地将应用程序组件呈现到页面上的根元素中。</p><p id="8e92" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">这是新的方法</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/12c79582489aa7841de171ad161acbe5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f5WoNYiLMZMj1aE_Rb9iBA.png"/></div></div></figure><p id="ed79" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">我们有一个根变量，它等于新方法create root。这是传递给我们的根元素，然后我们调用root.render并传递我们的应用程序组件。</p><p id="a5a2" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">我们的应用程序组件正在以不同的方式完成同样的事情。旧的方法称为传统的根API，它在react 18中仍然有效，但在某些时候会被弃用。通过使用新的根API，您将可以访问react 18的所有改进，包括我们将在本文中讨论的并发功能。</p><h1 id="aa58" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">2.焦虑</h1><p id="7819" class="pw-post-body-paragraph jy jz in kb b kc mk ke kf kg ml ki kj lg mm km kn lk mn kq kr lo mo ku kv kw ig bi translated">在这次更新中，我们将获得对悬念的全面支持。现在，什么是悬念，顾名思义，它暂停一些东西，直到它准备好被呈现。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mz"><img src="../Images/4aeeb62aef8d7147c30a008b834f9738.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7Y4C0hHe1wJ_DZj3xLZfNw.png"/></div></div></figure><p id="ecc9" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">在这个例子中，我们有一个组件，在它准备好被呈现之前需要时间来获取数据。悬念将使用回退，直到数据被返回并且组件被呈现。</p><p id="ff4b" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">这里需要注意的是，这里的随机组件并不等待数据，但它仍然会被挂起，直到悬念中的所有内容都准备好被渲染。</p><p id="ae5e" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">现在，悬念对于服务器端渲染非常有用。目前，通过ssr，您将获得完全渲染的HTML，但您的浏览器仍然需要加载javascript并在整个页面变成交互式页面之前对其进行水合处理。悬念可以使用react 18中的示例显著加快加载时间。</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/4720391529577663375d84c78f4e1ee2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tabck1h3KIOw91M44k0T-Q.png"/></div></div></figure><p id="2d66" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">上面我们有一个加载了导航栏、侧边栏、文章和评论的页面。现在，我们真的不需要在网站变得互动之前加载评论，所以我们将暂停评论，以便查看者可以开始阅读文章，然后我们将在后台加载评论。</p><h1 id="2132" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">3.自动配料</h1><p id="dac6" class="pw-post-body-paragraph jy jz in kb b kc mk ke kf kg ml ki kj lg mm km kn lk mn kq kr lo mo ku kv kw ig bi translated">在React 17和更早版本中，React在浏览器事件(如单击)期间批量重新渲染更新。</p><p id="d726" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">React 17不会批处理重新渲染，如果你需要获取数据，然后更新状态。在react 18中，如果你使用新的create root API，所有的状态更新都将被自动批处理，无论它们何时发生。</p><p id="7875" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">如果有一些关键组件您不想批处理。您可以使用<code class="fe mu mv mw mx b">ReactDOM.flushSync()</code>选择退出。</p><h1 id="5552" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">4.startTransition API</h1><p id="124e" class="pw-post-body-paragraph jy jz in kb b kc mk ke kf kg ml ki kj lg mm km kn lk mn kq kr lo mo ku kv kw ig bi translated">这是这个版本中引入的一个新API，它有助于保持当前网页的响应性，同时能够进行大量的非阻塞UI更新。</p><p id="cad3" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">这将告诉react哪些更新是紧急的，哪些可以等待，这将有助于UI保持响应。</p><p id="f5d4" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">对于像打字、悬停、点击这样的紧急更新，我们通常这样调用道具/功能:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div class="gh gi nb"><img src="../Images/f4982fa15ed89228fd02d968dc05145d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*0BVHBgPCBwDNM1PpJOjxWA.png"/></div></figure><p id="88ca" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">对于非紧急或繁重的UI更新，我们可以将其包装在startTransition API中，如下所示:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi gj"><img src="../Images/5ad1ed51acafd6c848194177df5b1b76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*guygyb67PQdi0acRD1hiLQ.png"/></div></div></figure><h1 id="e241" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">5.悬念列表</h1><p id="8b8c" class="pw-post-body-paragraph jy jz in kb b kc mk ke kf kg ml ki kj lg mm km kn lk mn kq kr lo mo ku kv kw ig bi translated">一个<code class="fe mu mv mw mx b">&lt;SuspenseList /&gt;</code>用值向前、向后或一起接受<code class="fe mu mv mw mx b">revealOrder</code>属性</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nc"><img src="../Images/7aefa408bdce15ed1a6077ae62440536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IVzSSAjtk0eDIQ3KfErrJg.png"/></div></div></figure><p id="8969" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">这里，卡组件将向前显示(直到数据被提取，将回落到LoadingSpinner组件)。同样，<code class="fe mu mv mw mx b">backwards</code>会以逆序揭示卡牌，together prop会把所有东西都“一起”渲染。</p><h1 id="a0b4" class="lt ky in bd kz lu lv lw lc lx ly lz lf ma mb mc lj md me mf ln mg mh mi lr mj bi translated">6.useDeferredValue</h1><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nd"><img src="../Images/5b35e3f6a904d2be47c05fd5ceee7c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xm4A6qfBqlwXYM9pcGAt1w.png"/></div></div></figure><p id="b9e5" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated"><code class="fe mu mv mw mx b">useDeferredValue</code>接收状态值和以毫秒为单位的超时值，并返回该值的延迟版本，该值可能“落后”它最多timeoutMs。</p><p id="ffea" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">当您有一些基于用户输入立即呈现的内容和一些需要等待数据获取的内容时，这通常用于保持界面的响应性。</p><p id="0733" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">我们可以使用以下工具立即安装React 18和reactDOM:</p><figure class="mq mr ms mt gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ne"><img src="../Images/e7d490528298271e105d934e275dbac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2sLJPUiHLDdkkyNVYBirQ.png"/></div></div></figure><p id="fb8d" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated"><strong class="kb io">向上缠绕</strong> <strong class="kb io">向上缠绕</strong></p><p id="5f86" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">React 18现在是alpha版本，不适合生产，但现在开始了解这些功能总是更好。</p><p id="d197" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">React 18将在几个月后进入公测。</p><p id="45f7" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">感谢您的阅读。结束。🙌</p><p id="2ea1" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated">请随意联系。👇</p><blockquote class="jv jw jx"><p id="1623" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">GitHub:<a class="ae nf" href="https://github.com/Push9828" rel="noopener ugc nofollow" target="_blank">https://github.com/Push9828</a><br/>推特:<a class="ae nf" href="https://twitter.com/PushkarThakur28" rel="noopener ugc nofollow" target="_blank">https://twitter.com/PushkarThakur28</a><br/>领英:<a class="ae nf" href="http://www.linkedin.com/in/pushkarthakur28" rel="noopener ugc nofollow" target="_blank">www.linkedin.com/in/pushkarthakur28</a></p></blockquote><p id="a09b" class="pw-post-body-paragraph jy jz in kb b kc kd ke kf kg kh ki kj lg kl km kn lk kp kq kr lo kt ku kv kw ig bi translated"><em class="ka">更多内容请看</em><a class="ae nf" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ka">plain English . io</em></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Write Neater Code by Utilizing the React Context API — An Introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用React上下文API编写更整洁的代码——简介</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/write-neater-code-by-utilizing-the-react-context-api-an-introduc-ti-a6a450b54e11?source=collection_archive---------14-----------------------#2021-05-26">https://javascript.plainenglish.io/write-neater-code-by-utilizing-the-react-context-api-an-introduc-ti-a6a450b54e11?source=collection_archive---------14-----------------------#2021-05-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/efa0e2eb7ea7ee9b5de89443f9b3a188.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VzKXjmARSsqVXwO6"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="ad31" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们如何处理数据是至关重要的，React开发团队想到了一些处理数据的方法。从更新组件的状态，到给组件分配道具，我们有两种可靠的方法来处理这个问题。</p><p id="83bf" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">但是，如果我们不想对数据进行过于复杂的管理，只想将值传递到需要的地方，而不是进行适当的处理，该怎么办呢？进入上下文API！</p><blockquote class="ky"><p id="f02c" class="kz la in bd lb lc ld le lf lg lh kx dk translated">上下文提供了一种通过组件树传递数据的方式，而不必在每一层手动向下传递属性。—反应堆文件</p></blockquote><p id="f027" class="pw-post-body-paragraph ka kb in kc b kd li kf kg kh lj kj kk kl lk kn ko kp ll kr ks kt lm kv kw kx ig bi translated">context旨在防止的主要事情是正确的钻探。Prop drilling是通过将数据值传递到各个层，从组件A到组件Z获取数据值的过程。因此，如果组件D需要一个<code class="fe ln lo lp lq b">value</code>属性，你必须从组件A向下钻至组件B，然后从组件B钻至组件C，最后从组件C钻至组件D。</p><p id="3834" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果您使用过React，您可能对这个概念很熟悉。这可能会变得过于复杂，如果我们不小心的话，就会变成杂乱的代码，React开发团队通过引入上下文API使我们的生活变得简单。</p></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="f451" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">如何使用上下文API </strong></p><p id="6ece" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要设置上下文，就像使用<code class="fe ln lo lp lq b">React.createContext()</code>一样简单。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Creation of context is easy</figcaption></figure><p id="ef8b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">让我们假设您需要创建各种主题。虽然有十几种方法可以做到这一点，但我们将使用上下文来处理这一点。为此，我们将设置背景颜色和字体颜色。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Our context file for themes</figcaption></figure><p id="44c9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">接下来，我们想要实际使用我们新创建的上下文。为此，我们将使用基于类的组件。在我们的渲染方法中，我们将把<code class="fe ln lo lp lq b">this.props</code>和<code class="fe ln lo lp lq b">this.context</code>分配给它们各自的变量。然后，我们将返回基于<code class="fe ln lo lp lq b">ourThemes</code>的样式的<code class="fe ln lo lp lq b">&lt;button /&gt;</code>，这是我们在外部创建并导入的。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">The usage of our context file</figcaption></figure></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="3662" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io">提供要消费的值</strong></p><p id="95f4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个更实用的方法如下。我们设置我们的功能，并将逻辑限制在它需要做的事情上。在提供者中，我们提供的是消费者将消费的价值。简而言之，我们“提供”了“点击我”的价值，然后我们“消费”了按钮中的价值。</p><figure class="ly lz ma mb gt jo"><div class="bz fp l di"><div class="mc md l"/></div></figure></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="f77f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然这是两个可能的用例，但是<a class="ae jz" href="https://reactjs.org/docs/context.html#contextprovider" rel="noopener ugc nofollow" target="_blank"> React文档</a>给出了大量我们可以使用的其他例子。至于何时使用上下文API，react文档说</p><blockquote class="me mf mg"><p id="293e" class="ka kb mh kc b kd ke kf kg kh ki kj kk mi km kn ko mj kq kr ks mk ku kv kw kx ig bi translated"><strong class="kc io"> Context </strong>主要用于不同嵌套层次的许多组件需要访问某些数据的时候。请谨慎使用它，因为它使组件重用更加困难。如果你只想避免通过许多关卡传递一些道具，组件组合通常是比<strong class="kc io">上下文</strong>更简单的解决方案。—反应堆文件</p></blockquote></div><div class="ab cl lr ls hr lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ig ih ii ij ik"><p id="a1bc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我希望这篇文章是令人愉快的。如果你有任何反馈，发表评论，让我知道我可以改进的地方。</p><p id="9741" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你想看看我的其他帖子，可以在这里找到<a class="ae jz" href="https://jgrice01.medium.com/" rel="noopener"/>。我写的都是前端特有的东西，所以我有关于<a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/want-to-write-better-javascript-a-few-cool-features-to-help-out-54b80eddf85d"> JavaScript </a>，<a class="ae jz" href="https://avetwhocodes.com/fetching-data-from-an-api-with-the-fetch-api-in-react-5dbe0abcfb41" rel="noopener ugc nofollow" target="_blank"> Fetch API </a>，<a class="ae jz" rel="noopener ugc nofollow" target="_blank" href="/level-up-your-react-skills-with-the-use-of-composition-766a41f544c9"> React </a>，<a class="ae jz" href="https://jgrice01.medium.com/typescript-understanding-the-basics-a2264759cd2d" rel="noopener"> TypeScript </a>，<a class="ae jz" href="https://medium.com/codex/writing-better-sass-with-dynamic-class-generators-e486a0413d0d" rel="noopener">SASS</a>&amp;<a class="ae jz" href="https://jgrice01.medium.com/want-to-build-desktop-apps-using-js-say-hello-to-electron-4f862c3b4e38" rel="noopener">electronic</a>的文章。</p><p id="e0a5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mh">感谢您的阅读，祝您愉快！</em></p><p id="4267" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mh">更多内容请看</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kc io"><em class="mh">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>How to Implement Email.js API to Create a Subscription Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何实现Email.js API来创建订阅表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-implement-email-js-api-to-create-a-subscription-form-325c51fbe827?source=collection_archive---------6-----------------------#2021-01-21">https://javascript.plainenglish.io/how-to-implement-email-js-api-to-create-a-subscription-form-325c51fbe827?source=collection_archive---------6-----------------------#2021-01-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="04bb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Email.js是一个JavaScript库，允许用户发送和/或检索电子邮件来建立客户群。您可以使用它来创建一个登录页面，增加订阅或时事通讯，并发送自动电子邮件。它只使用客户端技术，所以不需要服务器。在这篇博客中，我展示了如何通过React.js使用email.js API生成订阅者。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/5b930b7fd65f2fb53823f33186fd03d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6CsI9TkMLiA43iBRmrBSRA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Image from Netflix.</figcaption></figure><h2 id="c611" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated">设置帐户</h2><p id="e071" class="pw-post-body-paragraph jk jl in jm b jn lr jp jq jr ls jt ju jv lt jx jy jz lu kb kc kd lv kf kg kh ig bi translated">首先，在<a class="ae lw" href="https://dashboard.emailjs.com/sign-in" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> email.js </strong> </a>创建一个账户，将你的EmailJS连接到你支持的电子邮件服务，在这种情况下，我使用的是Gmail。接下来，找到“电子邮件模板”选项&amp;，点击“创建新模板”按钮。它将打开电子邮件内容。该模板包含多个针对不同字段的动态变量，如<em class="lx">主题</em>、<em class="lx">内容</em>、<em class="lx">到地址</em>、<em class="lx">从名称</em>等。比方说，你正试图通过收集潜在客户的电子邮件来创造商机；我需要在内容中添加的是<em class="lx">电子邮件</em>，因为这是我们试图收集的内容。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ly"><img src="../Images/f549f401ac2380b4ea1cb0e99a7104bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nxETPlildyqd6E2nzEkapw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">by Tanuka Das</figcaption></figure><p id="3b37" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">注意大括号的使用，使用两个左右大括号非常重要。在右边的“收件人”中，添加您希望接收邮件的电子邮件地址。</p><h2 id="c73f" class="ky kz in bd la lb lc dn ld le lf dp lg jv lh li lj jz lk ll lm kd ln lo lp lq bi translated">设置代码</h2><p id="f773" class="pw-post-body-paragraph jk jl in jm b jn lr jp jq jr ls jt ju jv lt jx jy jz lu kb kc kd lv kf kg kh ig bi translated">假设您有一个react项目准备在其上实现API，安装EmailJS。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="7af1" class="ky kz in ma b gy me mf l mg mh">npm install emailjs-com --save</span></pre><p id="cc6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，在react组件上导入EmailJS。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="e570" class="ky kz in ma b gy me mf l mg mh">import emailjs from 'emailjs-com'</span></pre><p id="cbb9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">下面是我正在使用的表单的结构:</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="b4ea" class="ky kz in ma b gy me mf l mg mh">&lt;form className="contact-form" onSubmit={sendEmail}&gt;<br/>  &lt;label&gt;Email&lt;/label&gt;<br/>  &lt;input type="email" name="user_email" /&gt;<br/>  &lt;input type="submit" value="Send" /&gt;<br/>&lt;/form&gt;</span></pre><p id="f532" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">接下来，创建将API连接到应用程序的函数。在这种情况下，它被称为<code class="fe mi mj mk ma b">emailSubscriptions()</code>，带有一个<code class="fe mi mj mk ma b">event</code>参数。以下函数结构可在<a class="ae lw" href="https://www.emailjs.com/docs/examples/reactjs/" rel="noopener ugc nofollow" target="_blank"> React EmailJS文档</a>中找到。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="672e" class="ky kz in ma b gy me mf l mg mh">emailSubscriptions(e) {<br/>    e.preventDefault();<br/><br/>    emailjs.sendForm('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID',     e.target, 'YOUR_USER_ID')</span><span id="9f0d" class="ky kz in ma b gy ml mf l mg mh">      .then((result) =&gt; {<br/>          console.log(result.text);<br/>      }, (error) =&gt; {<br/>          console.log(error.text);<br/>      });<br/>  }</span></pre><p id="4e70" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><code class="fe mi mj mk ma b">sendForm</code>中有四个不同的参数需要处理。要在“电子邮件服务”部分找到<code class="fe mi mj mk ma b">'YOUR_SERVICE_ID'</code>返回您的电子邮箱账号，服务id代表您连接电子邮箱的gmail。然后，导航至模板标题下方的“电子邮件模板”<code class="fe mi mj mk ma b">'YOUR_TEMPLATE_ID'</code>。<code class="fe mi mj mk ma b">e.target</code>参数是用户将通过表单提交的内容，所以保持不变。接下来，要找到您的用户id<code class="fe mi mj mk ma b">'YOUR_USER_ID'</code>，单击左侧栏上的“集成”选项，找到“API keys”部分，其中包括<em class="lx">用户id</em>；<em class="lx"> </em>复制粘贴在<em class="lx"> </em> <code class="fe mi mj mk ma b">'YOUR_USER_ID'</code>处。最后，调用表单中的函数。</p><pre class="kj kk kl km gt lz ma mb mc aw md bi"><span id="59a6" class="ky kz in ma b gy me mf l mg mh">import React, {Component} from 'react';<br/>import emailjs from 'emailjs-com';</span><span id="e5be" class="ky kz in ma b gy ml mf l mg mh">class EmailPage extends Component{</span><span id="45df" class="ky kz in ma b gy ml mf l mg mh">   emailSubscriptions(e) {<br/>      e.preventDefault();</span><span id="9deb" class="ky kz in ma b gy ml mf l mg mh">      emailjs.sendForm('service_e655ueI', 'template_sdfn2342g',   e.target, 'user_FS76384TH89394B254B24CB')<br/>        .then((result) =&gt; {<br/>            console.log(result.text);<br/>        }, (error) =&gt; {<br/>            console.log(error.text);<br/>        });<br/>        e.target.reset();<br/>    }<br/>  <br/>render() {<br/>  return (</span><span id="2d75" class="ky kz in ma b gy ml mf l mg mh">   &lt;form className="contact-form" <br/>         onSubmit={this.emailSubscriptions}&gt;<br/>      &lt;label&gt; Email &lt;/label&gt;<br/>      &lt;input type="email" name="email" placeholder="Enter your email here..." /&gt;<br/>      &lt;input type="submit" value="Send" /&gt;<br/>    &lt;/form&gt;</span><span id="602d" class="ky kz in ma b gy ml mf l mg mh">   )<br/> }<br/>}<br/>export default EmailPage</span></pre><p id="80b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我还添加了<code class="fe mi mj mk ma b">e.target.reset</code>，这将在表单提交后重置表单的字段。确保<em class="lx">输入的</em> <strong class="jm io">名称</strong>与您账户模板中的动态变量相同。这里，我输入的名字是<code class="fe mi mj mk ma b">name="email"</code>，EmailJS模板中的内容是<code class="fe mi mj mk ma b">{{email}}</code>。</p><p id="d0f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">测试您的表单，如果您正确遵循了所有步骤，您应该会在您用来收集用户电子邮件的帐户中收到一封电子邮件。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><p id="3689" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">既往职务:</strong></p><p id="c409" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lw" href="https://medium.com/javascript-in-plain-english/hash-tables-explained-and-implemented-in-javascript-9f173a0cd76b?source=your_stories_page-------------------------------------" rel="noopener">用JavaScript解释并实现的哈希表</a></p><p id="b27e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lw" href="https://medium.com/javascript-in-plain-english/type-checking-using-proptypes-in-react-be8c46e7e704?source=your_stories_page-------------------------------------" rel="noopener">在反应中使用PropTypes进行型式检查</a></p><p id="74d8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lw" href="https://medium.com/swlh/12-most-common-javascript-number-methods-4dfeedb7f2af?source=your_stories_page-------------------------------------" rel="noopener"> 12种最常见的JavaScript数字方法</a></p><p id="f026" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lw" href="https://medium.com/@tanuka.das12/12-must-knowarray-methods-for-the-next-interview-javascript-c0221075fce3?source=your_stories_page-------------------------------------" rel="noopener"> 12必须知道下次面试的一系列方法——JavaScript</a></p><p id="64d7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae lw" href="https://medium.com/@tanuka.das12/arrays-left-rotation-javascript-2befa87c4c87?source=your_stories_page-------------------------------------" rel="noopener">数组:左旋转(JavaScript) </a></p></div></div>    
</body>
</html>
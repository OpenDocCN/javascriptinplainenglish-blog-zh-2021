<html>
<head>
<title>Next.js Firebase v9: Add an Alert Message</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Next.js Firebase v9:添加警告消息</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/nextjs-firebase-v9-part-6-add-an-alert-message-21a87471c6e2?source=collection_archive---------9-----------------------#2021-10-21">https://javascript.plainenglish.io/nextjs-firebase-v9-part-6-add-an-alert-message-21a87471c6e2?source=collection_archive---------9-----------------------#2021-10-21</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="305e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">第6部分:使用材质UI Snackbar和Alert创建警告消息。</h2></div><p id="dd52" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将创建<code class="fe lb lc ld le b">&lt;Snackbar&gt;</code>，用于显示消息。当用户创建、上传或删除时，它会显示消息并告诉用户哪个文档正在被修改。每次操作都会显示不同的颜色。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div class="gh gi lf"><img src="../Images/dcf733e1a04ade75041483c57dcf6c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rluBU06R5AEo8Dst.png"/></div></figure><p id="5e3b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae ln" href="https://youtu.be/A-Ce4YyHMGk" rel="noopener ugc nofollow" target="_blank">视频教程</a>和<a class="ae ln" href="https://www.udemy.com/course/complete-nextjs-firebase-firestore-course/?couponCode=FREESOURCE" rel="noopener ugc nofollow" target="_blank">源代码</a></p><p id="7b95" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">&lt;Snackbar&gt;</code>就像安卓里的吐司一样，会弹出几秒然后隐藏。</p><figure class="lg lh li lj gt lk gh gi paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="gh gi lo"><img src="../Images/fb97a06c362c82a6bd5ba9dbd8fb68d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yQYSJHy9OGn4pUKlkB8opg.png"/></div></div></figure><p id="b1da" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为了让它被<code class="fe lb lc ld le b">&lt;TodoList&gt;</code>和<code class="fe lb lc ld le b">&lt;TodoForm&gt;</code>或其他组件触发，我们将使用React上下文。</p><h2 id="38ef" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">创建TodoContext</h2><p id="a0e3" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">在根文件夹中创建TodoContext.js。</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="ad64" class="lt lu iq le b gy mv mw l mx my">import { createContext } from 'react';</span><span id="17fa" class="lt lu iq le b gy mz mw l mx my">export const TodoContext = createContext(null);</span></pre><h2 id="a37c" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">创建带警报的Snackbar</h2><p id="5d2c" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">我们可以<a class="ae ln" href="https://mui.com/components/snackbars/" rel="noopener ugc nofollow" target="_blank">用alert创建</a> Snackbar。在添加组件之前，我们需要添加三种状态</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="e853" class="lt lu iq le b gy mv mw l mx my">const [open, setOpen] = useState(false)</span><span id="46d2" class="lt lu iq le b gy mz mw l mx my">const [alertType, setAlertType] = useState("success")</span><span id="9e4d" class="lt lu iq le b gy mz mw l mx my">const [alertMessage, setAlertMessage] = useState("")</span></pre><p id="3ed8" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe lb lc ld le b">alertType</code>用于设置颜色，<code class="fe lb lc ld le b">alertMessage</code>用于决定在警告框中显示什么信息。</p><p id="dd1b" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们可以创建<code class="fe lb lc ld le b">showAlert</code>函数:</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="4352" class="lt lu iq le b gy mv mw l mx my">const showAlert = (type, msg) =&gt; {</span><span id="3ac6" class="lt lu iq le b gy mz mw l mx my">setAlertType(type)</span><span id="cffa" class="lt lu iq le b gy mz mw l mx my">setOpen(true)</span><span id="303c" class="lt lu iq le b gy mz mw l mx my">setAlertMessage(msg)</span><span id="f6ef" class="lt lu iq le b gy mz mw l mx my">}</span></pre><p id="cb43" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">然后我们将<code class="fe lb lc ld le b">showAlert</code>传递给<code class="fe lb lc ld le b">TodoContext.Provider</code>:</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="38ba" class="lt lu iq le b gy mv mw l mx my">return (</span><span id="3dd9" class="lt lu iq le b gy mz mw l mx my"><strong class="le ir">&lt;TodoContext.Provider value={{ showAlert}}&gt;</strong></span><span id="1fc8" class="lt lu iq le b gy mz mw l mx my">&lt;Container maxWidth="sm"&gt;</span><span id="b7a8" class="lt lu iq le b gy mz mw l mx my">&lt;Box style={{ backgroundColor: 'white' }}</span><span id="a96f" class="lt lu iq le b gy mz mw l mx my">p={3}</span><span id="8580" class="lt lu iq le b gy mz mw l mx my">mt={3}</span><span id="055a" class="lt lu iq le b gy mz mw l mx my">&gt;</span><span id="2ce1" class="lt lu iq le b gy mz mw l mx my">&lt;TodoForm /&gt;</span><span id="3ea1" class="lt lu iq le b gy mz mw l mx my">&lt;Snackbar </span><span id="8968" class="lt lu iq le b gy mz mw l mx my">anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}</span><span id="81b8" class="lt lu iq le b gy mz mw l mx my">open={open} autoHideDuration={3000} onClose={handleClose} &gt;</span><span id="0376" class="lt lu iq le b gy mz mw l mx my">&lt;Alert onClose={handleClose} severity={alertType}&gt;{alertMessage}&lt;/Alert&gt;</span><span id="24ac" class="lt lu iq le b gy mz mw l mx my">&lt;/Snackbar&gt;</span><span id="e1aa" class="lt lu iq le b gy mz mw l mx my">&lt;TodoList /&gt;</span><span id="3eeb" class="lt lu iq le b gy mz mw l mx my">&lt;/Box&gt;</span><span id="a364" class="lt lu iq le b gy mz mw l mx my">&lt;/ Container&gt;</span><span id="9937" class="lt lu iq le b gy mz mw l mx my">&lt;/TodoContext.Provider &gt;</span><span id="6834" class="lt lu iq le b gy mz mw l mx my">)</span><span id="8ab8" class="lt lu iq le b gy mz mw l mx my">}</span></pre><h2 id="8a67" class="lt lu iq bd lv lw lx dn ly lz ma dp mb ko mc md me ks mf mg mh kw mi mj mk ml bi translated">在TodoForm触发</h2><p id="cf98" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated">使用<code class="fe lb lc ld le b">useContext</code>导入<code class="fe lb lc ld le b">showAlert</code>功能:</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="43f9" class="lt lu iq le b gy mv mw l mx my">const { showAlert } = useContext(TodoContext);</span></pre><p id="f396" class="pw-post-body-paragraph kf kg iq kh b ki kj jr kk kl km ju kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">将报警功能替换为<code class="fe lb lc ld le b">showAlert</code>:</p><pre class="lg lh li lj gt mr le ms mt aw mu bi"><span id="ff6b" class="lt lu iq le b gy mv mw l mx my">showAlert('success', `Todo with id ${docRef.id} is added successfully`);</span></pre><h1 id="2943" class="na lu iq bd lv nb nc nd ly ne nf ng mb jw nh jx me jz ni ka mh kc nj kd mk nk bi translated">关注我们:<a class="ae ln" href="https://www.youtube.com/channel/UCu4-4FnutvSHVo9WHvq80Ww?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank"> YouTube </a>，<a class="ae ln" href="https://ckmobile.medium.com/" rel="noopener"> Medium </a>，<a class="ae ln" href="https://www.udemy.com/user/cyruschan2/" rel="noopener ugc nofollow" target="_blank"> Udemy </a>，<a class="ae ln" href="https://www.linkedin.com/company/ckmobi/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>，<a class="ae ln" href="https://twitter.com/ckmobilejavasc1" rel="noopener ugc nofollow" target="_blank"> Twitter </a>，<a class="ae ln" href="https://www.instagram.com/ckmobile8050" rel="noopener ugc nofollow" target="_blank"> Instagram </a>，<a class="ae ln" href="https://app.gumroad.com/ckmobile" rel="noopener ugc nofollow" target="_blank"> Gumroad </a></h1><p id="33f3" class="pw-post-body-paragraph kf kg iq kh b ki mm jr kk kl mn ju kn ko mo kq kr ks mp ku kv kw mq ky kz la ij bi translated"><em class="nl">更多内容请看</em><a class="ae ln" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kh ir"><em class="nl">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
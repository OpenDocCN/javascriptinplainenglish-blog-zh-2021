<html>
<head>
<title>Getting Started with Web Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Web组件入门</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/getting-started-with-web-components-2815fd16684b?source=collection_archive---------11-----------------------#2021-05-06">https://javascript.plainenglish.io/getting-started-with-web-components-2815fd16684b?source=collection_archive---------11-----------------------#2021-05-06</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fbeb9591fc1529967786ca4d96c9fea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZjIuNsORTzqoh03S"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@flowforfrank?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ferenc Almasi</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a920" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">如果你曾经使用过<strong class="kc io"> <em class="ky"> React </em> </strong>的话，你会对Web组件很熟悉。它们是定制的、可复制的HTML片段，可以在代码的其他地方引用。</p><p id="4658" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Web组件是它们自己的HTML规范，所以你可能会惊讶于它们可以以独立的方式与纯JavaScript和HTML一起使用。让我们来看看如何做到这一点。</p><p id="9c56" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">假设我们有一个在多个地方重复使用的状态栏项目。它的结构可能是这样的:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="8210" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">想象一下，必须将它粘贴到<strong class="kc io">多个位置</strong>并保持它看起来总是一样的——如果我们某天改变了状态栏会怎么样？我们需要回到状态栏出现的所有地方，并更新它们！<strong class="kc io"> Web组件</strong>允许你在多个地方引用这段HTML，并给它一个唯一的标签，即:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="c1ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="ky">我们怎么做呢？</em> </strong>让我们来看看如何制作自己的web组件，有多简单。</p><h1 id="e3cd" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤1 — JavaScript</h1><p id="f5b0" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">是的，你猜对了。如果你想做web组件，你需要使用JavaScript。让我们快速看一下如何创建一个非常简单的DOM元素，我们称之为“段落”。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="a431" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">它的输出将是一个包含单词“Hello”的段落。Web组件依赖于类结构。我们在这里使用<code class="fe mi mj mk ml b">constructor()</code>来表示标签加载时会发生什么。</p><h1 id="5de3" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">其他功能</h1><p id="af7c" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">除了构造函数，我们还可以向类中添加其他函数，比如当DOM元素被追加到页面时触发的<code class="fe mi mj mk ml b">connectedCallback()</code>，以及当元素的属性改变时触发的<code class="fe mi mj mk ml b">attributeChangedCallback()</code>，这给了我们一些灵活性:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><h1 id="bf05" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤2 —扩展功能</h1><p id="f302" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">现在我们有办法创建一个简单的元素，给它附加回调事件，给属性变化附加事件，让我们考虑CSS。当制作一个独立的、可克隆的web组件时，我们希望它在多个地方看起来物理上是相同的。为此，它需要自己的自定义CSS。我们如何将CSS添加到web组件中？</p><p id="db6c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">为此，我们需要使用一种叫做影子DOM的东西。这些基本上是仅附加到一个特定项目上的项目。我们可以通过启用shadow DOM将它用于web组件，并将CSS附加到它上面。</p><h2 id="a9bf" class="mm lg in bd lh mn mo dn ll mp mq dp lp kl mr ms lt kp mt mu lx kt mv mw mb mx bi translated">添加CSS</h2><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="d354" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的例子中，任何一个<code class="fe mi mj mk ml b">alpha-paragraph</code>元素都有一个段落是<code class="fe mi mj mk ml b">red</code>，字体大小是<code class="fe mi mj mk ml b">1.25rem</code>。</p><p id="f7c5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">所有在<code class="fe mi mj mk ml b">alpha-paragraph</code>之外的段落都不会是红色的，所以你可以独立地设计你的其他CSS样式。</p><h1 id="c7a2" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">步骤3 —与模板标签结合</h1><p id="e2d9" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">我们可以使用HTML标签，而不是将web组件硬编码成Javascript。HTML有两个标签我们可以在这里使用，<code class="fe mi mj mk ml b">template</code>和<code class="fe mi mj mk ml b">slot</code>。</p><p id="d5a0" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">模板标签指的是整个web组件，而槽是模板的一小部分，可以修改。模板标记的示例如下所示:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="5b3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">第二行的槽指的是我们可以改变的东西。在我看来，我们并不真的需要使用模板标签，但是槽是有用的。我们可以通过改变innerHTML来更新我们的<code class="fe mi mj mk ml b">alpha-paragraph</code>,让它有一个slot:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="cac3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">然后，我们可以使用HTML中的“slot”属性，用我们自己的自定义元素来替换该slot。在下面的示例中，整个槽被替换为包含文本“自定义文本”的段落元素。</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><h1 id="be38" class="lf lg in bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第4步—属性</h1><p id="010a" class="pw-post-body-paragraph ka kb in kc b kd md kf kg kh me kj kk kl mf kn ko kp mg kr ks kt mh kv kw kx ig bi translated">因为所有的HTML元素都可以有属性，所以我们可以使用<code class="fe mi mj mk ml b">getAttribute</code>函数来访问它们。因此，我们可以轻松地重新编写代码来定制颜色:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="ld le l"/></div></figure><p id="87b4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">通过将其全部放入我们的Javascript中，我们确保可以轻松地将这个web组件导入到其他地方。我们最终的web组件的演示如下所示:</p><figure class="kz la lb lc gt jo"><div class="bz fp l di"><div class="my le l"/></div></figure><p id="6526" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就是这样。希望这篇文章对你有用，感谢你的阅读。</p><p id="d1df" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky">更多内容尽在</em><a class="ae jz" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="ky">plain English . io</em></a></p></div></div>    
</body>
</html>
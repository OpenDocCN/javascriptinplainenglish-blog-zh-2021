<html>
<head>
<title>Add Form Validation to a Vue 3 App with Vuelidate 2 — Models and Dirty</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将表单验证添加到Vue 3应用程序中，该应用程序带有Vue lidate 2-型号和脏污</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-form-validation-to-a-vue-3-app-with-vuelidate-2-models-f0733dd721fb?source=collection_archive---------9-----------------------#2021-04-29">https://javascript.plainenglish.io/add-form-validation-to-a-vue-3-app-with-vuelidate-2-models-f0733dd721fb?source=collection_archive---------9-----------------------#2021-04-29</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/13b339d8e81622263b8bafa92311b1ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WkULDzEr-Vcx5kWZ"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo by <a class="ae kc" href="https://unsplash.com/@oskaryil?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Oskar Yildiz</a> on <a class="ae kc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d034" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">Vuelidate 2是一个流行的为Vue 3应用程序制作的表单验证库。</p><p id="baf0" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在本文中，我们将了解如何将表单验证添加到带有Vuelidate 2的Vue 3应用程序中。</p><h1 id="63f4" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">$模型</h1><p id="ff47" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以将表单域绑定到<code class="fe me mf mg mh b">$model</code>属性。</p><p id="a9c3" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">这样，只有当字段变脏时，我们才能显示错误。</p><p id="7208" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b3dd" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="v$.name.$model" /&gt;<br/>    &lt;template v-if="v$.name.$dirty"&gt;<br/>      &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>        &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="9bc1" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required } from "@vuelidate/validators";</span><span id="c496" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="fa45" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们有<code class="fe me mf mg mh b">v$</code>反应属性，用于进行所有的表单验证检查。</p><p id="1fb8" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">一旦<code class="fe me mf mg mh b">v$.name.$model</code>被操纵，<code class="fe me mf mg mh b">$dirty</code>就会变成<code class="fe me mf mg mh b">true</code>。</p><p id="2d48" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">我们通过渲染<code class="fe me mf mg mh b">v$.name.$silentErrors</code>中的条目来显示错误信息。</p><p id="1122" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以将<code class="fe me mf mg mh b">$autoDirty</code>属性设置为<code class="fe me mf mg mh b">true</code>以使被操作的字段的<code class="fe me mf mg mh b">$dirty</code>属性自动设置为<code class="fe me mf mg mh b">true</code>。</p><p id="68de" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">为此，我们写道:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="a84e" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="v$.name.$model" /&gt;<br/>    &lt;template v-if="v$.name.$dirty"&gt;<br/>      &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>        &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="6058" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required } from "@vuelidate/validators";</span><span id="e265" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required, $autoDirty: true },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><h1 id="3f96" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">惰性验证</h1><p id="385d" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们也可以将<code class="fe me mf mg mh b">$lazy</code>属性设置为<code class="fe me mf mg mh b">true</code>以使Vuelidate仅在字段被操作时验证字段。</p><p id="ba74" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">例如，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="040a" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="v$.name.$model" /&gt;<br/>    &lt;template v-if="v$.name.$dirty"&gt;<br/>      &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>        &lt;div&gt;{{ error.$message }}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="cb14" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required } from "@vuelidate/validators";</span><span id="72e7" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required, $lazy: true },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="5b15" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">在<code class="fe me mf mg mh b">validations</code>方法中设置属性。</p><h1 id="f866" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">显示更多错误信息</h1><p id="6a96" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">要显示更多错误信息，我们可以写:</p><pre class="mi mj mk ml gt mm mh mn mo aw mp bi"><span id="b703" class="mq lc iq mh b gy mr ms l mt mu">&lt;template&gt;<br/>  &lt;div&gt;<br/>    &lt;input v-model="v$.name.$model" /&gt;<br/>    &lt;template v-if="v$.name.$dirty"&gt;<br/>      &lt;div v-for="error of v$.name.$silentErrors" :key="error.$message"&gt;<br/>        &lt;strong&gt;{{ error.$validator }}&lt;/strong&gt;<br/>        &lt;span&gt; on property&lt;/span&gt;<br/>        &lt;strong&gt;{{ error.$property }}&lt;/strong&gt;<br/>        &lt;span&gt; says:&lt;/span&gt;<br/>        &lt;strong&gt;{{ error.$message }}&lt;/strong&gt;<br/>      &lt;/div&gt;<br/>    &lt;/template&gt;<br/>  &lt;/div&gt;<br/>&lt;/template&gt;</span><span id="d8d7" class="mq lc iq mh b gy mv ms l mt mu">&lt;script&gt;<br/>import useVuelidate from "@vuelidate/core";<br/>import { required } from "@vuelidate/validators";</span><span id="0190" class="mq lc iq mh b gy mv ms l mt mu">export default {<br/>  name: "App",<br/>  setup() {<br/>    return { v$: useVuelidate() };<br/>  },<br/>  data() {<br/>    return {<br/>      name: "",<br/>    };<br/>  },<br/>  validations() {<br/>    return {<br/>      name: { required, $lazy: true },<br/>    };<br/>  },<br/>};<br/>&lt;/script&gt;</span></pre><p id="5c36" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error.$validation</code>以字符串形式表示验证规则的名称。</p><p id="76e6" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error.$property</code>将字段名称作为字符串。</p><p id="6608" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><code class="fe me mf mg mh b">error.$message</code>有表单验证错误信息。</p><h1 id="be79" class="lb lc iq bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly bi translated">结论</h1><p id="0aa3" class="pw-post-body-paragraph kd ke iq kf b kg lz ki kj kk ma km kn ko mb kq kr ks mc ku kv kw md ky kz la ij bi translated">我们可以在Vue 3应用程序中设置如何使用Vuelidate 2触发表单验证。</p><p id="20c7" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated">此外，我们可以显示比消息更多的错误信息。</p><p id="e284" class="pw-post-body-paragraph kd ke iq kf b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la ij bi translated"><a class="ae kc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="mw">更多内容参见</em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Testing Material UI Forms with React-Testing-Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React-Testing-Library测试材料UI表单</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/testing-material-ui-forms-with-react-testing-library-50a9d4d300f2?source=collection_archive---------2-----------------------#2021-05-04">https://javascript.plainenglish.io/testing-material-ui-forms-with-react-testing-library-50a9d4d300f2?source=collection_archive---------2-----------------------#2021-05-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/22cad5dd8f6402fb02a57986cedf0f5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vBk8B3ifip2L2cRKEauzNw.png"/></div></div></figure><p id="a1ce" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">在处理表单时，测试用例可能很难编写。我发现这对于我喜欢的UI库:Material UI来说尤其困难。我喜欢它的组件、设计，以及它与React的无缝结合，但在测试时会很困难。</p><p id="88fa" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面我将展示一个我最近创建的账户删除请求表单的例子，以及我是如何编写测试用例的。</p><p id="6945" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我在测试堆栈中使用了<a class="ae kw" href="https://jestjs.io/" rel="noopener ugc nofollow" target="_blank">jest</a>+<a class="ae kw" href="https://testing-library.com/docs/react-testing-library/intro/" rel="noopener ugc nofollow" target="_blank">react-testing-library</a>。</p><h2 id="1248" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">第一，形式</h2><p id="f9a9" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">表格本身很简单。文本栏、复选框和提交按钮。</p><p id="b200" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当表单加载时，文本字段为空，复选框未选中。</p><p id="cc3e" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">当文本字段为空或复选框未选中时，提交按钮被禁用。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/94acdbb5791eac8c9dc6b71ecc720b0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzqB36N2faTP_iv874flXA.png"/></div></div></figure><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lv"><img src="../Images/8f1c579179c05e7a051ca8b8074d27b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKtKsiSMN8tO6T15nT-smA.png"/></div></div></figure><p id="0954" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我的目标是为UI可能处于的不同状态编写测试</p><ol class=""><li id="4d06" class="ma mb iq ka b kb kc kf kg kj mc kn md kr me kv mf mg mh mi bi translated">密码为空，复选框未选中，按钮禁用</li><li id="ba66" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">密码已填写，复选框未选中，按钮已禁用</li><li id="0236" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">密码为空，复选框被选中，按钮被禁用</li><li id="bb03" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mf mg mh mi bi translated">密码已填写，复选框已选中，按钮已启用</li></ol><p id="bd44" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">表单的代码版本:</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="565e" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">需要指出几件事</h2><ul class=""><li id="13d7" class="ma mb iq ka b kb lq kf lr kj mq kn mr kr ms kv mt mg mh mi bi translated">我的文本字段在inputProps对象上设置了data-testid，而不是外部的文本字段。这将允许我更容易地操纵文本字段的值。</li><li id="d0ce" class="ma mb iq ka b kb mj kf mk kj ml kn mm kr mn kv mt mg mh mi bi translated">我正在导入extended-expect依赖项，这样我就可以使用<code class="fe mu mv mw mx b">toHaveClass</code>检查。</li></ul><pre class="lw lx ly lz gt my mx mz na aw nb bi"><span id="e2dd" class="kx ky iq mx b gy nc nd l ne nf"><strong class="mx ir">import</strong> "@testing-library/jest-dom/extend-expect"</span><span id="b6c6" class="kx ky iq mx b gy ng nd l ne nf">expect(submit).toHaveClass("Mui-disabled");</span></pre><p id="b116" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">我发现类检查是测试一些UI元素状态的最简单的方法。</p><p id="7438" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">下面是表单的完整测试套件。我将在本文的剩余部分讨论每个it模块。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="93a1" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">默认视图</h2><p id="b39c" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">我喜欢包含测试，以确保组件第一次呈现时一切都如我所愿。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="a4a7" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">仅密码</h2><p id="7336" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">接下来，当只有密码字段有值时，我确保按钮被禁用。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="2351" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">仅确认</h2><p id="de5c" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">现在，我对空密码和选中的复选框做同样的操作。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><h2 id="fb5b" class="kx ky iq bd kz la lb dn lc ld le dp lf kj lg lh li kn lj lk ll kr lm ln lo lp bi translated">启用提交</h2><p id="b785" class="pw-post-body-paragraph jy jz iq ka b kb lq kd ke kf lr kh ki kj ls kl km kn lt kp kq kr lu kt ku kv ij bi translated">最后，当密码和复选框都被填写时，我检查按钮是否被启用。</p><figure class="lw lx ly lz gt jr"><div class="bz fp l di"><div class="mo mp l"/></div></figure><p id="4de1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated">一旦我所有的测试都通过了，我就可以进入下一个特性了。</p><figure class="lw lx ly lz gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi nh"><img src="../Images/a903e2add9478c020b52b43315d3cae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*21HOGZndvLPlnpo4azC2Dg.png"/></div></div></figure><p id="35e1" class="pw-post-body-paragraph jy jz iq ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv ij bi translated"><a class="ae kw" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <em class="ni">更多内容看plainenglish.io </em> </a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Seven Lessons From a Year of Expo Development (2021)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">世博会发展一年的七个教训(2021)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/six-lessons-from-a-year-of-expo-development-2021-88b4c29437d4?source=collection_archive---------11-----------------------#2021-04-07">https://javascript.plainenglish.io/six-lessons-from-a-year-of-expo-development-2021-88b4c29437d4?source=collection_archive---------11-----------------------#2021-04-07</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/9994a494a700ebec37f9edc6a51ec488.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sSxTTLMRuw8-4pUWI0sxGQ.png"/></div></div></figure><p id="868a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在Expo开发一年后，我可以自信地说，该平台已经实现了它的承诺，即在iOS、Android和web上构建和部署应用程序的通用框架。</p><p id="25fd" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是对于所有闪亮的新工具，它有一个轻微的学习曲线，伴随着一些成长的烦恼。当来自React生态系统中的纯web开发时尤其如此。这是我希望在我第一次踏上世博和React-Native之旅时就能看到的文章。</p><p id="bb37" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了帮助你避免调试和建筑遗憾的不眠之夜，我想与你分享我的团队和我自己从一年的世博会发展中学到的七个关键教训。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="712a" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak"> 1。每季度更新你的应用程序的依赖关系</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ly"><img src="../Images/ec1a9c88c5f2a0d18b3b627723f6b4c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E8jglbpt6CpI1jv1pG6eCA.png"/></div></div></figure><p id="49a5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">世博会发展迅速。拥有“三个平台一个代码库”的代价是必须通过频繁的Expo SDK更新来满足所有这些平台的需求。Expo承诺保持约6个月的向后兼容性，因此一旦SDK版本被否决，您将无法再使用Expo Go应用程序进行开发或构建新的二进制文件。</p><p id="e1d1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">但是，好消息是Expo用他们的<code class="fe md me mf mg b">expo upgrade</code> CLI命令和详细的changelog <a class="ae mh" href="https://docs.expo.io/workflow/upgrading-expo-sdk-walkthrough/" rel="noopener ugc nofollow" target="_blank">博客帖子</a>让这个过程尽可能顺利。对于世博会的人们来说，谢谢你们。让他们继续！</p><h1 id="f09b" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated"><strong class="ak"> 2。尽量限制第三方库的使用</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/3c07b055a72d8d31e7d4cce9dde6e7dc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cp0XM0IJF0qg3LFEDdvFNA.jpeg"/></div></div></figure><p id="f9d4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如上所述，您将需要能够忍受对您的整个应用程序执行相当定期的依赖性更新的行为。将会有突破性的变化。会有眼泪。但是，至少你会跟上时代。</p><p id="065b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了避免未来不可预见的挫折，真的问问你自己是否需要第三方库来实现你的目标。你知道我在说的那个——它是某种AirBnB日期选择器的克隆，它的维护者神秘失踪了，它在你受雇于该公司之前就被引入了你心爱的项目。在这样一个<strong class="jx io">快速发展的生态系统</strong>中，运用良好的判断力来判断你可以相信什么。</p><p id="2297" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果可能的话，我建议您自己编写这些组件。使用React Native，您会惊讶于开箱即用的效果。例如，我们最近编写了自己的card carousel组件来帮助简化面向未来的开发。更多信息请见我的文章<a class="ae mh" href="https://chanonroy.medium.com/building-a-netflix-style-card-carousel-in-react-native-649afcd8d78e" rel="noopener">这里</a>。</p><h1 id="6a09" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated"><strong class="ak"> 3。拥抱通用测试和反应测试呈现器</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mp"><img src="../Images/933149d179968bda568a429214aa2968.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QYlK-WQWjApDa-GnzaREUg.png"/></div></div></figure><p id="b48e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">和<strong class="jx io"> Jest </strong>一起去当试车员。它得到了脸书生态系统的大力支持，您还可以利用T2世博会的优势。有了这个插件，你可以在jest中运行iOS、Android和web测试。埃文·培根有一篇关于它的很棒的文章<a class="ae mh" href="https://blog.expo.io/testing-universal-react-native-apps-with-jest-and-expo-113b4bf9cc44" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="0cf0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就测试呈现器而言，与在web开发社区广受欢迎的<strong class="jx io">react-test-library</strong>相比，我们更喜欢<strong class="jx io"> react-test-renderer </strong>带来的简单性。React-test-renderer因其与expo universal testing的兼容性以及在组件测试中处理异步操作的清晰性而脱颖而出。</p><p id="4024" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<strong class="jx io"> e2e测试</strong>解决方案，不幸的是还没有一个健壮的解决方案。我们研究了排毒，甚至在AWS中建立了我们自己的设备农场，但成效有限。Cypress也是e2e测试的一个选项，但不幸的是它只在web上有价值。看看Expo团队围绕这一工具需求做了什么将会很有趣。目前，重点最好放在用Jest和react-test-renderer编写健壮的集成和单元测试上。</p><h1 id="5075" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated"><strong class="ak"> 4。给自己喘息的空间来调整自己的反应——天生的细微差别</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mq"><img src="../Images/ec265c0759856ea9274ec472a0f08698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4gxh_XsdUBbYmbT9s7Ukw.png"/></div></div></figure><p id="4394" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">来自网络世界，我对自己准确估计简单特性的时间的能力充满信心。然后我开始React原生开发。起初，事情进展缓慢。有时，当网络世界的基本概念被颠倒过来时，情况会变得非常戏剧性。当开始使用React Native时，<strong class="jx io">将您的初始估计值增加一倍</strong>,给自己留有调整细微差别的余地，例如:</p><ul class=""><li id="d027" class="mr ms in jx b jy jz kc kd kg mt kk mu ko mv ks mw mx my mz bi translated">默认情况下，React Native中的所有内容都是flex组件。此外，默认的伸缩方向是“列”,而不是web上常见的“行”。</li><li id="7c34" class="mr ms in jx b jy na kc nb kg nc kk nd ko ne ks mw mx my mz bi translated">在iOS和Android中，使用z-index进行排序的行为与您预期的不同。相反，应该关注组件呈现顺序，以此来加强z索引位置。</li><li id="1f19" class="mr ms in jx b jy na kc nb kg nc kk nd ko ne ks mw mx my mz bi translated">忘掉<div>和<p>，在<view>和<text>中思考。除非你喜欢看到红色的错误消息，否则不要尝试在<text>之外渲染文本。</text></text></view></p></div></li><li id="1e1a" class="mr ms in jx b jy na kc nb kg nc kk nd ko ne ks mw mx my mz bi translated">习惯将内容包装在ScrollView中，用SafeAreaView处理讨厌的手机插件。</li></ul><h1 id="5642" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated">5.尽早使用TypeScript并打开严格模式</h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nf"><img src="../Images/9cf25ddc54a81946e2b063547dcc3694.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xG-XB5Z3bPZsOgdlllCCtg.png"/></div></div></figure><p id="6cc6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">考虑到平台之间的细微差别，尽可能多地提供类型支持至关重要。尽早使用TypeScript，并确保在严格模式下运行它。你会惊讶于哪些常见的网络相关技术会导致本地生态系统中的<strong class="jx io">应用崩溃</strong>。拥有expo模块类型声明文件的安全机制意味着更少的应用崩溃，这意味着更快乐的用户。</p><h1 id="7ce2" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated"><strong class="ak"> 6。React Native的内联样式非常好用，不需要样式组件</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ng"><img src="../Images/6928d8617c6439fe108bff6baee13159.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cAC7XR6yaN8Vhq8iWsmo2w.png"/></div></div></figure><p id="93a7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不要急于用第三方<strong class="jx io"> CSS-in-JS </strong>解决方案来抽象React Native的默认内联风格系统。我们最初将样式化组件作为一个选项，但很快发现增加的抽象层是不必要的，而且有些分散注意力。还有性能上的权衡，比如放弃react-native-web的树摇动，如这里的<a class="ae mh" href="https://docs.expo.io/guides/using-styled-components/#tree-shaking" rel="noopener ugc nofollow" target="_blank">所解释的</a>。</p><p id="c498" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了React Native的内联风格道具，你仍然可以使用高级css特性，比如伪选择器来操纵网页上的悬停和活动状态。Evan Bacon在这里有另一篇关于使用钩子实现这一点的文章。</p><p id="b77f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于动画，React Native公开了一个很棒的动画API，我们发现它性能很好，使用起来也很简单。你可以用动画插值的力量创造出一些真正美丽的东西。</p><h1 id="22dc" class="la lb in bd lc ld mi lf lg lh mj lj lk ll mk ln lo lp ml lr ls lt mm lv lw lx bi translated"><strong class="ak"> 7。分析解决方案可用，但还不成熟</strong></h1><figure class="lz ma mb mc gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nh"><img src="../Images/73f17d11742094017a289110094b6dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zO6NNUKrptMEO_HE2gjuow.png"/></div></div></figure><p id="4f77" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在野外使用Expo制作应用程序，您很快就会发现自己会问以下问题:</p><ul class=""><li id="371f" class="mr ms in jx b jy jz kc kd kg mt kk mu ko mv ks mw mx my mz bi translated">我的用户在做什么？(<em class="mo">用户跟踪</em>)</li><li id="1bcf" class="mr ms in jx b jy na kc nb kg nc kk nd ko ne ks mw mx my mz bi translated">我的用户在哪里被卡住了？(<em class="mo">崩溃日志</em>)</li></ul><p id="9b5a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<strong class="jx io">用户跟踪</strong>，我们发现Expo的官方振幅和细分市场整合取得了一定的成功。就开发人员设置和功能丰富性而言，这两个工具都很棒。Firebase Analytics也是一个选择，但是我们发现这个平台本身非常有限。感觉这个平台不能理解你可以是除了电子商务网站或联盟营销博客之外的任何东西，它会自动为你的活动分配标签。</p><p id="7e13" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于<strong class="jx io">错误日志</strong>，Sentry是生态系统中最成熟的选择。话虽如此，我最期待的还是Datadog的真实用户监控(RUM)解决方案的发布，其React Native SDK目前处于封闭测试阶段。这里的真正价值是能够在一个平台中将客户端崩溃报告与后端APM日志联系起来。</p></div><div class="ab cl kt ku hr kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ig ih ii ij ik"><h1 id="5f04" class="la lb in bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx bi translated"><strong class="ak">结论</strong></h1><p id="6e92" class="pw-post-body-paragraph jv jw in jx b jy ni ka kb kc nj ke kf kg nk ki kj kk nl km kn ko nm kq kr ks ig bi translated">随着一年的Expo和React-Native开发的完成，看到这些平台带给您的开箱即用是一个令人愉快的惊喜。来自纯web开发，您很快开始克服每个平台的微小语法差异，并感受到开发人员速度的提高。独立的web和移动团队之间不再有官僚主义——所有这些都在一个代码库中。</p><p id="1f79" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个快速变化的环境，需要频繁维护才能跟上。鉴于此，尽可能保持应用程序的轻量级非常重要。了解React Native给你的东西，让事情变得简单。</p><p id="5392" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mo">更多内容看</em><a class="ae mh" href="https://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mo">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
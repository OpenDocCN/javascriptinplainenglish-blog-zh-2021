<html>
<head>
<title>Angular: Watch Build for Changes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度:观察造型变化</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-watch-build-for-changes-4e4f5a140eb3?source=collection_archive---------2-----------------------#2021-12-05">https://javascript.plainenglish.io/angular-watch-build-for-changes-4e4f5a140eb3?source=collection_archive---------2-----------------------#2021-12-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><h2 id="ad0c" class="il im in bd b dl io ip iq ir is it dk iu translated" aria-label="kicker paragraph"><strong class="ak"><em class="iv">Angular CLI提供的脚本中，</em>serve<em class="iv">脚本用于在开发环境中运行和测试应用。以及用于打包和部署的“构建”脚本。然而，也有在开发人员的机器上使用构建输出并观察变更的用例。探索场景！</em> </strong></h2><div class=""/><div class=""><h2 id="bac1" class="pw-subtitle-paragraph ju ix in bd b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dk translated"><strong class="ak">使用<em class="iv">构建-观察</em>脚本</strong></h2></div><p id="e257" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">当开发人员对代码进行修改时，您可以使用Angular build上的watch选项来更新输出。它与serve非常相似，只是应用程序运行的web服务器不同于默认的dev服务器。</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div class="gh gi li"><img src="../Images/d813f3db43fefcdaf972d65f66a63f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*40SZRB6opOM6un3NKLg6bA.png"/></div></figure><h1 id="1517" class="lq lr in bd ls lt lu lv lw lx ly lz ma kd mb ke mc kg md kh me kj mf kk mg mh bi translated">背景</h1><p id="b171" class="pw-post-body-paragraph km kn in ko b kp mi jy kr ks mj kb ku kv mk kx ky kz ml lb lc ld mm lf lg lh ig bi translated">我们大多数人都会使用Angular CLI提供的<em class="mn"> ng serve </em>命令。默认情况下，它在<em class="mn"> npm启动</em>时运行。该命令构建并运行代码。注意angular.json文件中的以下配置，它使用@angular-devkit的build-angular包并部署在一个开发服务器上。它在内部使用Webpack。该设置用于在开发人员的机器上进行开发。</p><pre class="lj lk ll lm gt mo mp mq mr aw ms bi"><span id="c800" class="mt lr in mp b gy mu mv l mw mx">"serve": {<br/><strong class="mp iy">  "builder": "</strong><a class="ae my" href="http://twitter.com/angular" rel="noopener ugc nofollow" target="_blank"><strong class="mp iy">@angular</strong></a><strong class="mp iy">-devkit/build-angular:dev-server",</strong></span><span id="eab2" class="mt lr in mp b gy mz mv l mw mx">  "configurations": {<br/>        "production": {<br/>        "browserTarget": "memy:build:production"<br/>    },</span><span id="9ded" class="mt lr in mp b gy mz mv l mw mx">        "development": {<br/>        "browserTarget": "memy:build:development"<br/>    }<br/>  },<br/>"defaultConfiguration": "development"<br/>}</span></pre><p id="21e5" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">然而，当您构建和部署代码时，您使用<em class="mn"> ng build </em>命令，该命令将应用程序打包到<em class="mn"> /dist/application-name </em>目录中的几个文件中。这适用于运输到诸如暂存或生产环境中。</p><h1 id="2f27" class="lq lr in bd ls lt lu lv lw lx ly lz ma kd mb ke mc kg md kh me kj mf kk mg mh bi translated">在开发设置中使用生成输出</h1><p id="d01b" class="pw-post-body-paragraph km kn in ko b kp mi jy kr ks mj kb ku kv mk kx ky kz ml lb lc ld mm lf lg lh ig bi translated">如前所述，默认选项在Webpack上部署代码。当您对代码进行修改时，它会被动态编译。您可以立即看到变化，验证和测试它们。如果您需要将代码部署在另一个web服务器上，该怎么办？比如安装在开发人员机器上的Http-Server或Nginx。</p><p id="f7ad" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">考虑以下解决方案。使用构建命令上的<em class="mn"> - watch </em>选项。请参见下面的片段。</p><pre class="lj lk ll lm gt mo mp mq mr aw ms bi"><span id="d713" class="mt lr in mp b gy mu mv l mw mx">"watch": "ng build <strong class="mp iy">--watch </strong>--configuration development",</span></pre><p id="68ee" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">当您对文件进行更改时，手表会重新编译并重新生成代码。使用最新代码更新<em class="mn"> dist/application-name </em>目录。</p><blockquote class="na nb nc"><p id="2bab" class="km kn mn ko b kp kq jy kr ks kt kb ku nd kw kx ky ne la lb lc nf le lf lg lh ig bi translated"><strong class="ko iy">注</strong> : <em class="in">使用</em> -配置<em class="in">选项执行开发或生产构建。它们有什么不同？在一个示例中，开发配置使用与生产</em>不同的环境配置文件(environment.ts或environment.prod.ts)</p></blockquote><h1 id="3bbe" class="lq lr in bd ls lt lu lv lw lx ly lz ma kd mb ke mc kg md kh me kj mf kk mg mh bi translated">为什么要在单独的web服务器上构建和部署</h1><p id="77b8" class="pw-post-body-paragraph km kn in ko b kp mi jy kr ks mj kb ku kv mk kx ky kz ml lb lc ld mm lf lg lh ig bi translated">在一个示例用例中，想象创建一个可安装的渐进式web应用程序(PWA)。服务人员(在撰写本文时)不使用Angular CLI的serve命令。详见GitHub <a class="ae my" href="https://github.com/angular/angular-cli/issues/9869" rel="noopener ugc nofollow" target="_blank">第9869期</a>。因此，要验证和测试progressive web应用程序，需要使用watch脚本构建代码。</p><pre class="lj lk ll lm gt mo mp mq mr aw ms bi"><span id="0b9b" class="mt lr in mp b gy mu mv l mw mx">npm run watch<br/># (or)<br/># yarn watch</span></pre><p id="7e5c" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">它在<em class="mn"> dist/application-name </em>目录中创建构建输出(默认情况下，除非您在Angular.json中编辑)。</p><p id="0db8" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">接下来，在<em class="mn"> dist </em>目录下运行Http-Server</p><pre class="lj lk ll lm gt mo mp mq mr aw ms bi"><span id="1453" class="mt lr in mp b gy mu mv l mw mx">http-server dist/application-name<br/># use npx if http-server is installed globally, at the machine level<br/># npx http-server dist/application-name</span></pre><p id="4e6c" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">当您对应用程序进行更改时，监视脚本会重新构建应用程序。输出将被替换到<em class="mn">区</em>目录中。重新加载浏览器以查看更改。</p><p id="a865" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated">渐进式web应用程序可以为运行在Http-Server上的应用程序注册服务工作者。它还显示桌面或移动设备上的安装按钮。使用<em class="mn"> - watch </em>选项，您可以在每次对代码库进行更改时省去手动重建的步骤。</p><h1 id="2eb0" class="lq lr in bd ls lt lu lv lw lx ly lz ma kd mb ke mc kg md kh me kj mf kk mg mh bi translated">参考</h1><ul class=""><li id="06b9" class="ng nh in ko b kp mi ks mj kv ni kz nj ld nk lh nl nm nn no bi translated">服务人员入门的角度文档— <a class="ae my" href="https://angular.io/guide/service-worker-getting-started" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="2e2a" class="ng nh in ko b kp np ks nq kv nr kz ns ld nt lh nl nm nn no bi translated">关于<em class="mn"> ng构建的角度文档— </em> <a class="ae my" href="https://angular.io/cli/build" rel="noopener ugc nofollow" target="_blank">链接</a></li><li id="5a0f" class="ng nh in ko b kp np ks nq kv nr kz ns ld nt lh nl nm nn no bi translated">Angular Github问题—功能请求:ng与服务人员一起服务— <a class="ae my" href="https://github.com/angular/angular-cli/issues/9869" rel="noopener ugc nofollow" target="_blank">链接</a></li></ul><p id="0111" class="pw-post-body-paragraph km kn in ko b kp kq jy kr ks kt kb ku kv kw kx ky kz la lb lc ld le lf lg lh ig bi translated"><em class="mn">更多内容看</em> <a class="ae my" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ko iy"> <em class="mn">说白了就是</em> </strong> </a> <strong class="ko iy"> <em class="mn">。</em> </strong> <em class="mn">报名参加我们的</em><strong class="ko iy"><em class="mn"/></strong><a class="ae my" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="ko iy"><em class="mn">免费每周简讯在这里</em> </strong> </a> <strong class="ko iy"> <em class="mn">。</em>T41】</strong></p></div></div>    
</body>
</html>
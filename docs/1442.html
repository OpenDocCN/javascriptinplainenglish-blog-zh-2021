<html>
<head>
<title>How to Calculate CSS Selector Specificity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何计算CSS选择器特异性</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-calculate-css-selector-specificity-72aa076c6a18?source=collection_archive---------8-----------------------#2021-03-27">https://javascript.plainenglish.io/how-to-calculate-css-selector-specificity-72aa076c6a18?source=collection_archive---------8-----------------------#2021-03-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="5c79" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">第1部分:关于CSS选择器你不知道的事情</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/6cff56b82a885c1962514a680092f87d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3yERMhGi61EGXzmLs9bdw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image by <a class="ae ks" href="https://unsplash.com/@heylagostechie" rel="noopener ugc nofollow" target="_blank">@heylagostechie</a> on Unsplash.</figcaption></figure><p id="bec3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">很多时候，当我与初级前端开发人员或那些出于好奇才学习HTML和CSS的人交谈时，他们说CSS是一种简单的语言，是的，CSS的语法乍一看或在学习web开发的最初几个月似乎很简单，这让我感到震惊。</p><p id="e439" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">CSS中的简单语法可能是你在语言本身中遇到的最具欺骗性的东西，因为它包含了在许多CSS声明中进行选择以确定给定CSS属性的确切值的算法的复杂性，我们在这里谈论的是级联算法。</p><p id="44f9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">此外，我们还有令人头痛的<em class="lp">框对齐模块、特异性、</em>我可以说，掌握这些概念只是初级CSS开发人员与高级CSS开发人员的区别之一，或者为什么不是CSS大师呢？嗨！！我说过:这只是其中之一。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi lq"><img src="../Images/764948f292e1d9648a4c9b52187cf527.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*mW5XXHYxob2u9pjl6dPmQA.png"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">A Photo from <a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Flexible_Box_Layout/Aligning_Items_in_a_Flex_Container" rel="noopener ugc nofollow" target="_blank">developer.mozilla.org</a> (Aligning Items with flexbox).</figcaption></figure><p id="d82f" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因为掌握CSS涉及到其他事情，如文件组织、命名系统、调试和优化，所以还有更多要说的，但今天让我们把重点放在特殊性上，这是CSS开发中的一个重要概念，这就是为什么你应该给它一些时间。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi lr"><img src="../Images/804f7ac4d98683056bc58603cf341856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y22Eil-6rWNA951q2JrB2A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">A Photo from<a class="ae ks" href="https://www.toptal.com/css/smacss-scalable-modular-architecture-css" rel="noopener ugc nofollow" target="_blank"> toptal.com (</a>f<em class="ls">ile organization in CSS)</em></figcaption></figure><h1 id="fe8c" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">特异性介绍</h1><p id="9248" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">第一，特异性是什么？好吧，你可以把它想象成一个因素，这个因素将指定哪个样式声明应该应用于一个元素，这个因素作为一个与你的CSS选择器相关的分数，它有一些简单明了的目标，比如解决与CSS的全局性质相关的问题。</p><p id="1041" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在事情越来越难看，“CSS的全球性”，“特异性”。这些东西到底代表什么？好吧，让我们澄清全球性质背后的含义，然后我们将集中于特殊性。</p><p id="f4e5" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你还记得你第一次尝试学习CSS的时候，我猜你已经使用<code class="fe mq mr ms mt b">&lt;p&gt;</code>标签创建了几个段落，然后你使用带有<code class="fe mq mr ms mt b">p</code>选择器的样式声明对它们的文本和背景应用了特定的颜色。</p><p id="df57" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你最终会对每一段都有那种风格感到震惊，你的意图或你设定的期望只是在第一段增加一些风格。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/799e7df139bb21ed3cba5ff30166f01a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y904nb1hTdQakdS52BSH4g.png"/></div></div></figure><p id="cc86" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当“全局性质”出现时，CSS有一个全局范围，所以当你使用<code class="fe mq mr ms mt b">p</code>元素选择器应用一个样式声明时，这个样式将被应用到你的HTML文档中的每个<code class="fe mq mr ms mt b">&lt;p&gt;</code>元素，即使这不是你想要的。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/b4b67dbf3c24040447afa777e2526533.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bdQyhhOB3DEwula6xhPouw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by the Author.</figcaption></figure><p id="5eea" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">当你试图使用组合或单个选择器来解决这些全球自然问题时，事情会变得混乱，例如<code class="fe mq mr ms mt b"><strong class="kv io">div#para p</strong></code>和<code class="fe mq mr ms mt b"><strong class="kv io">div.para p</strong></code>，假设你用这两个选择器写了两个不同风格的声明。</p><p id="8eda" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mq mr ms mt b"><strong class="kv io">Div#para p</strong></code>将对段落应用红色背景，<code class="fe mq mr ms mt b"><strong class="kv io">div.para p</strong></code>将应用黑色背景，<code class="fe mq mr ms mt b">&lt;div&gt;</code>元素下的<code class="fe mq mr ms mt b">&lt;p&gt;</code>元素的背景将应用哪种颜色？</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/a97091356501a499ee85034adee48815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*npr4RwIwqsztyylREjyW7g.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by the Author.</figcaption></figure><p id="8fff" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你以为第四段会有黑色背景？不是红色的。为什么会这样？你可能会认为这与它所声明的最后一种风格有关。不，最后一个样式声明已经使用了<code class="fe mq mr ms mt b"><strong class="kv io">div.para p</strong></code> <strong class="kv io"> </strong>选择器，但这并没有影响第四段。</p><p id="9ae9" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这是一个特殊性的问题，正如我前面提到的，它作为一个分数，CSS中的每个选择器都有一个特殊性分数，基于这个分数，一个样式声明将被应用到所需的元素，在最后一个例子中，我们有一个红色的背景，因为ID选择器在其特殊性中有一个高分数。</p><h1 id="3bf9" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">计算特异性</h1><p id="7030" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">浏览器根据选择器的特异性附加声明的样式，但是我们如何判断哪个选择器的特异性得分高或低呢？我们有一些规则，可以帮助我们计算每个选择器的特异性分数(值)。</p><p id="da40" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">计算选择器特异性在<em class="lp"> </em> <a class="ae ks" href="https://drafts.csswg.org/selectors-3/#specificity" rel="noopener ugc nofollow" target="_blank"> <em class="lp">万维网联盟(W3C) </em> </a> <em class="lp"> : </em>中解释如下</p><ul class=""><li id="4857" class="mv mw in kv b kw kx kz la lc mx lg my lk mz lo na nb nc nd bi translated">计算选择器中ID选择器的数量(= a)</li><li id="7de1" class="mv mw in kv b kw ne kz nf lc ng lg nh lk ni lo na nb nc nd bi translated">计算选择器(= b)中的类选择器、属性选择器和伪类的数量</li><li id="3776" class="mv mw in kv b kw ne kz nf lc ng lg nh lk ni lo na nb nc nd bi translated">计算类型选择器和选择器中伪元素的数量(= c)</li><li id="7d66" class="mv mw in kv b kw ne kz nf lc ng lg nh lk ni lo na nb nc nd bi translated">忽略通用选择器(*)</li></ul><p id="d0ab" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这似乎有点令人困惑，但请仔细看一下，在一个选择器中，值(a，b，c)组合在一起产生一个值，让我们遵循这些规则来确定我们前面使用的选择器的特异性。</p><p id="8d61" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><code class="fe mq mr ms mt b"><strong class="kv io">Div.para p</strong></code>包含两个类型选择器div和p，用一个单一的类选择器来确定(a，b，c)的值。</p><p id="6838" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">我们在这个组合选择器中没有任何ID选择器，这意味着<strong class="kv io"> a=0，</strong>一个类选择器，所以<strong class="kv io"> b=1 </strong>，加上两个类型选择器，因此，<strong class="kv io"> c=2，组合</strong> (a=0，b=1，c=2)，这等于(0，1，2)的特异性。</p><p id="f473" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">对于<code class="fe mq mr ms mt b"><strong class="kv io">div#para p</strong></code>选择器，我们有一个ID选择器(a=1)，两个类型选择器(c=2)，因此特异性值等于(1，0，2)，在这种情况下，我们的值为0，因为我们有零个属于b类型的选择器。</p><p id="d452" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">现在让我们比较一下这些特异性值，对于这两个选择器<code class="fe mq mr ms mt b"><strong class="kv io">div#para p</strong></code> (1，0，2)大于对于<code class="fe mq mr ms mt b"><strong class="kv io">div.para p</strong></code>选择器的(0，1，2)，回到前面的例子，红色背景已经被应用，因为<code class="fe mq mr ms mt b"><strong class="kv io">div#para p</strong></code> <strong class="kv io"> </strong>选择器具有高特异性值。</p><h1 id="2d6f" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">同等特异性</h1><p id="328c" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">如果我们有一些具有相同特异性值的组合选择器会怎么样？例如:<code class="fe mq mr ms mt b">input[type=text]</code>和<code class="fe mq mr ms mt b">input.text.</code></p><p id="964d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在这种情况下，我们有一个带有属性选择器或类选择器的类型选择器，<code class="fe mq mr ms mt b">input[type=text]</code> = (0，1，1)，<code class="fe mq mr ms mt b">input.text</code> = (0，1，1)，在这种情况下，将应用您在CSS文件中使用的最后一个选择器，或HTML文档中的样式标签。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/075eefb9a8f0660154fb933eda6618ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qyhsFRUMDG7DSpc58PiGYA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by the Author.</figcaption></figure><p id="e95d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">正如您所看到的，输入元素的最后一个样式声明已经被应用，我想这种情况似乎微不足道，因为这是我们过去所做的，最后一个样式声明总是覆盖前一个。</p><p id="fc44" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">如果你想试试上面的例子，你可以添加一个伪类，比如:hover to the <code class="fe mq mr ms mt b">input[type=text]</code> selector，在重新加载你的文档后，每次你将鼠标悬停在输入的背景色上，它就会变成蓝绿色，一种介于绿色和蓝色之间的颜色。<code class="fe mq mr ms mt b">input[type=text]:hover</code></p><p id="5e7e" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">将悬停伪类添加到<code class="fe mq mr ms mt b">input[type=text]</code>选择器中，会将其特异性从(0，1，1)更改为(0，2，1 ),这是因为伪类属于类型b的选择器，然而，在将鼠标悬停在输入元素上之前，<code class="fe mq mr ms mt b">input[type=text]:hover</code>特异性不会改变。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/a9c42da12cc2af9760fb1349dd2bb505.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVcu3rYOhtRGURTb7bYPIA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by the Author.</figcaption></figure><h1 id="f3ae" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">注意:</h1><p id="d9ba" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated"><em class="lp">Visual studio代码的最后一次更新将帮助您计算特异性，选择CSS中的任意选择器，编辑器将弹出一个包含特异性值的小窗口，如下所示。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mu"><img src="../Images/88908b780ce5c699e233dd6bab3551ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNdozlnJ4mR72Ifw7SZVsQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by the Author.</figcaption></figure><h1 id="0537" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">结论</h1><p id="40a8" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">乍一看，计算特异性值似乎很复杂。你需要一段时间来理解它，只要坚持这个过程。</p><p id="5328" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">构造太多组合选择器并计算它们的特异性值，再加上检查附加在特异性值最高的选择器上的样式声明是否已经被应用，这对我帮助很大，何乐而不为呢？试试看。</p><h1 id="3827" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">下一步是什么？</h1><p id="97c6" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated">在下一篇关于CSS特异性的文章中，我们将深入到更有趣的带有复杂选择器的情况，何时选择高特异性选择器而不是低特异性选择器，以及如何处理链式类选择器。</p><h1 id="bfde" class="lt lu in bd lv lw lx ly lz ma mb mc md jt me ju mf jw mg jx mh jz mi ka mj mk bi translated">资源:</h1><p id="8b94" class="pw-post-body-paragraph kt ku in kv b kw ml jo ky kz mm jr lb lc mn le lf lg mo li lj lk mp lm ln lo ig bi translated"><strong class="kv io">特异性计算器</strong>:specification . keegan . ST</p><p id="327d" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><strong class="kv io">选择者姓名举例</strong>:【developer.mozilla.org T2】</p></div></div>    
</body>
</html>
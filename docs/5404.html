<html>
<head>
<title>How to Send your Events and Logs to Discord via Python or JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何通过Python或JavaScript将您的事件和日志发送到Discord</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-send-your-events-and-logs-to-discord-via-python-or-javascript-6be2859234c2?source=collection_archive---------14-----------------------#2021-11-08">https://javascript.plainenglish.io/how-to-send-your-events-and-logs-to-discord-via-python-or-javascript-6be2859234c2?source=collection_archive---------14-----------------------#2021-11-08</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/fcd34bbbda01c175f07ee3c98abb716f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AJabWJzlNE8kxhPVeciAgQ.png"/></div></div></figure><p id="a1d2" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在我的软件开发生涯中，有很多次当我的项目中发生一些事情时，我想得到即时的更新和提醒。</p><p id="1bc0" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">以此为例；您正在开发一个SaaS，并且有多个有价值的事件，您希望在它们发生时立即知道。例如，用户加入你的等待名单或简讯，用户注册，产品销售和用户转换。不得不在远程机器上运行长时间的训练或爬行任务是另一种情况，我需要即时更新进度，以及是否有什么地方出错了。我的意思是，你可以定期检查机器，看看事情进展如何，但我宁愿完全忘记它，让它给我发送更新。最后一个例子是当我想通过raspberry pi自动化我的车库门时，我想知道车库门什么时候打开、关闭，或者开了太久。</p><p id="3015" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">那么我为什么要给你们讲这些例子呢？我希望你开始思考类似的情况，你可能也需要一种方法来给自己发送即时更新，并在一个地方拥有所有这些事件的历史记录。</p><p id="9980" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">不和谐让这个问题相对容易解决！我们可以专门创建一个Discord服务器，为我们的项目创建单独的频道，并使用webhook URL来推送我们的活动！</p><p id="5bff" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">首先，我们需要那个不和谐服务器。登录Discord，点击<strong class="jx io">添加服务器</strong>按钮，开始创建您自己的服务器。一旦完成，您应该能够看到并打开您的Discord服务器</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/ad95ebe53aa02cb37f9879481cd9d27b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*52Vk44NECITo7iJOTeIkmA.png"/></div></div></figure><p id="bc06" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">为了更容易组织我的项目和事件，我通常为每个项目创建一个新的文本通道，或者在某些情况下，为每种类型的事件创建一个文本通道。为此，点击文本频道旁边的<strong class="jx io"> + </strong>按钮并创建一个。我打算把我的叫做<strong class="jx io">车库门</strong>，让它成为一个私人频道。</p><p id="f1c1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，点击该频道的设置图标，打开<strong class="jx io">集成</strong>选项卡并创建一个新的Webhook。添加后，您可以看到<strong class="jx io">复制Webhook URL </strong>，这正是我们推送事件所需要的！所以把它复制并粘贴到你机器上的某个安全的地方。现在，我们基本上解决了不和谐的问题，我们可以开始写代码了！我已经提供了Python和JavaScript的例子；请随意跳到您认为更相关的内容。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi kt"><img src="../Images/377df5a0e85856045aeed8c9246eff5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BJAIH9AQba1iVJE3kmjfA.png"/></div></div></figure><h1 id="6319" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">通过Python发送事件</h1><p id="d08b" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">首先，我想将我的webhook URL作为环境变量传入，所以我将它设置为<strong class="jx io"> WEBHOOK_URL </strong>，并使用python中的标准库来访问该值。当然，您可以跳过整个过程，直接将您的URL添加到代码中。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="7f14" class="mg kz in mc b gy mh mi l mj mk">export WEBHOOK_URL=https://discord.com/api/...</span></pre><p id="783c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦我们设置了环境变量，我们就可以通过导入<strong class="jx io"> os </strong>并使用<strong class="jx io"> os.environ.get </strong>方法来访问它。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="bffc" class="mg kz in mc b gy mh mi l mj mk">import os</span><span id="7d1a" class="mg kz in mc b gy ml mi l mj mk">WEBHOOK_URL = os.environ.get('WEBHOOK_URL')<br/>print(WEBHOOK_URL)</span></pre><p id="f1df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将使用<a class="ae mm" href="https://pypi.org/project/requests/" rel="noopener ugc nofollow" target="_blank">请求</a>包来处理我的HTTP请求。您可以运行以下命令通过PyPi安装。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="56ae" class="mg kz in mc b gy mh mi l mj mk">pip install requests</span></pre><p id="9b33" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们需要做的就是导入<strong class="jx io">请求</strong>并向webhook url发出<strong class="jx io"> POST </strong>请求，然后用<strong class="jx io">内容</strong>键在JSON主体中传递我们的事件。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="e6fa" class="mg kz in mc b gy mh mi l mj mk">import requests</span><span id="0c12" class="mg kz in mc b gy ml mi l mj mk">requests.post(WEBHOOK_URL, { "content": "🦄 garage door is open" })</span></pre><p id="f59d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦我们运行这个代码，我们应该在<strong class="jx io">车库门</strong>通道中得到一个新消息，告诉我们我们的车库门已经被打开了。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mn"><img src="../Images/32e1308dcb4ea263e824486f7b95a66b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fdmNPQ_7LazQX7mFB9iF0A.png"/></div></div></figure><h1 id="8d0c" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">通过JavaScript发送事件</h1><p id="913c" class="pw-post-body-paragraph jv jw in jx b jy lw ka kb kc lx ke kf kg ly ki kj kk lz km kn ko ma kq kr ks ig bi translated">这里的过程与我们在Python中所做的非常相似。首先，为我们从discord复制的webhook URL定义一个名为<strong class="jx io"> WEBHOOK_URL </strong>的新环境变量。同样，您可以跳过这一步，直接将URL设置为一个变量。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="1bd4" class="mg kz in mc b gy mh mi l mj mk">export WEBHOOK_URL=https://discord.com/api/...</span></pre><p id="52b5" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，读取这个值<strong class="jx io">process . env . web hook _ URL</strong>并将其设置为一个变量。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="fd17" class="mg kz in mc b gy mh mi l mj mk">const WEBHOOK_URL = process.env.WEBHOOK_URL<br/>console.log(WEBHOOK_URL)</span></pre><p id="dad1" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我将使用Axios包来处理我的HTTP请求。您可以通过运行以下命令，通过NPM安装。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="2e46" class="mg kz in mc b gy mh mi l mj mk">npm i axios</span></pre><p id="f63c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，我们可以导入<strong class="jx io"> Axios </strong>并向webhook url发出<strong class="jx io"> POST </strong>请求，并在JSON主体中传递我们的事件。</p><pre class="ku kv kw kx gt mb mc md me aw mf bi"><span id="9d76" class="mg kz in mc b gy mh mi l mj mk">import axios from 'axios';</span><span id="76c9" class="mg kz in mc b gy ml mi l mj mk">await axios.post(WEBHOOK_URL, { content: "💰 User sign up" })</span></pre><p id="882c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一旦我们运行了这段代码，我们应该会在我们的Discord通道中看到另一条消息。</p><figure class="ku kv kw kx gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mo"><img src="../Images/46e52c73b0838c981d344ffc1842bb56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E6xbFC565HPeiJhWcK0LcA.png"/></div></div></figure><p id="5d5b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">正如你所看到的，这个设置非常简单，而且非常强大！我在几乎所有的项目中使用这种设置来了解他们是如何做的！</p><p id="ed74" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我写过一篇类似的文章，用电报代替不和谐。如果你感兴趣，可以通过下面的链接查看:)</p><div class="mp mq gp gr mr ms"><a href="https://sh4yan.medium.com/use-python-or-javascript-to-send-your-events-and-logs-to-telegram-via-their-chatbot-api-57f407f2c7e3" rel="noopener follow" target="_blank"><div class="mt ab fo"><div class="mu ab mv cl cj mw"><h2 class="bd io gy z fp mx fr fs my fu fw im bi translated">使用Python或Javascript通过其Chatbot API将您的事件和日志发送到Telegram。</h2><div class="mz l"><h3 class="bd b gy z fp mx fr fs my fu fw dk translated">使用Python或Javascript来通知自己来自应用程序或脚本的日志和事件，只需几分钟…</h3></div><div class="na l"><p class="bd b dl z fp mx fr fs my fu fw dk translated">sh4yan.medium.com</p></div></div><div class="nb l"><div class="nc l nd ne nf nb ng jt ms"/></div></div></a></div><p id="c3a4" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="nh">更多内容请看</em><a class="ae mm" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="nh">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
<html>
<head>
<title>Vanilla Hooks (outside React)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é¦™è‰æŒ‚é’©(å¤–éƒ¨ååº”)</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/vanilla-hooks-outside-react-860471e5f95c?source=collection_archive---------9-----------------------#2021-01-04">https://javascript.plainenglish.io/vanilla-hooks-outside-react-860471e5f95c?source=collection_archive---------9-----------------------#2021-01-04</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/feb13b2f804d5814a9f8f6f4d84c993b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9aLpt7mLTUnnwHQ1saISw.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@vishu_2star?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Vishal Jadhav</a> on <a class="ae jz" href="https://unsplash.com/s/photos/hook?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0f0e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é’©å­æ˜¯ä¸€ç§æ¨¡å¼ï¼Œè€Œä¸æ˜¯åªèƒ½åœ¨Reactåº“ä¸­ä½¿ç”¨çš„ä¸œè¥¿ï¼Œè¿™ç¯‡æ–‡ç« å°†è§£é‡Šå¹¶ä»‹ç»ä¸€äº›æœ‰è¶£çš„å¯èƒ½æ€§ã€‚</p><h1 id="0f1f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ä»€ä¹ˆæ˜¯é’©å­ï¼Ÿ</h1><p id="7373" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">é’©å­ä¸å¤šä¹Ÿä¸å°‘ï¼Œå°±æ˜¯ä¸€ä¸ªé€šç”¨å›è°ƒçš„åŒ…è£…ã€‚å›è°ƒæœ¬èº«ä¸æ˜¯ä¸€ä¸ªé’©å­ï¼Œé™¤éå®ƒè¢«ä¸€ä¸ªé’©å­åŠ©æ‰‹å¤„ç†ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯ç”±<a class="ae jz" href="https://github.com/WebReflection/uhooks#readme" rel="noopener ugc nofollow" target="_blank">é’©å­</a>åº“æä¾›çš„ï¼Œè¿™æ˜¯æˆ‘æ‰€çŸ¥é“çš„æœ€å°ã€æœ€å¿«çš„åº“ï¼Œå¹¶ä¸”â€œ<em class="mb">å®ƒåªæ˜¯å·¥ä½œ</em>â€ã€‚</p><p id="2533" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸¾ä¾‹æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå†…éƒ¨ä½¿ç”¨ä¸€äº›é’©å­è¾…åŠ©ç¨‹åºçš„é€šç”¨å›è°ƒï¼Œä½†æ˜¯å®ƒä¸ä¼šåƒé¢„æœŸçš„é‚£æ ·å·¥ä½œï¼Œé™¤éå®ƒè¢«é’©å­åº“è¾…åŠ©ç¨‹åºæ‰€åŒ…è£…ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6222" class="ml kz in mh b gy mm mn l mo mp">// not a hook until wrapped<br/>const callback = (initial) =&gt; {<br/>  const [value, update] = useState(initial);<br/>  console.log(value);<br/>  setTimeout(update, 1000, value + 1);<br/>};</span></pre><p id="1c11" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œé™¤éä½œä¸ºåŠ©æ‰‹æœ¬èº«ä½¿ç”¨ï¼Œå›è°ƒä¸èƒ½å—ç›Šäºé’©å­åŠ©æ‰‹ï¼Œå› ä¸ºè¿™äº›å›è°ƒéœ€è¦è¢«ç¼–æ’ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3fa0" class="ml kz in mh b gy mm mn l mo mp">import {hooked, useState} from '//unpkg.com/uhooks?module';</span><span id="649c" class="ml kz in mh b gy mq mn l mo mp">// this is now a hook<br/>const incrementalState = hooked(callback);</span><span id="5a7d" class="ml kz in mh b gy mq mn l mo mp">// and it can be initialized as such<br/>incrementalState(0);</span></pre><p id="0394" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨è¿™ä¸ª<a class="ae jz" href="https://codepen.io/WebReflection/pen/rNMdJom?editors=0011" rel="noopener ugc nofollow" target="_blank"> CodePenç¤ºä¾‹</a>ä¸­è¯»å–æ§åˆ¶å°æ—¥å¿—ï¼Œä¼šæ˜¾ç¤ºä¸€ä¸ªä»<em class="mb"> 0 </em>åˆ°<em class="mb"> N </em>çš„é€’å¢è®¡æ•°å™¨ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ã€‚</p><h2 id="2cdb" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p id="821c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">è¿™ä¸ªæ•…äº‹çš„ç®€çŸ­ç‰ˆæœ¬æ˜¯ï¼Œæ¯æ¬¡ç”±<code class="fe nc nd ne mh b">useState</code>åŠ©æ‰‹æä¾›çš„<code class="fe nc nd ne mh b">update</code>å‡½æ•°æ‰§è¡Œæ—¶ï¼Œè¢«æŒ‚é’©çš„å›è°ƒè¢«å†æ¬¡è°ƒç”¨ï¼Œå¹¶ä¸”<code class="fe nc nd ne mh b">useState</code>åŠ©æ‰‹å°†çŸ¥é“ï¼Œåœ¨è¿è¡Œæ—¶ï¼Œè¿”å›çš„æœ€åæ›´æ–°çš„å€¼æ˜¯ä»€ä¹ˆï¼Œå¿½ç•¥ç¬¬ä¸€æ¬¡è¿™æ ·çš„æŒ‚é’©è¢«æ‰§è¡Œæ—¶æä¾›çš„<code class="fe nc nd ne mh b">initial</code>å€¼ã€‚</p><p id="c379" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸€ä¸ªæç®€çš„é’©å­å®ç°å’Œè§£é‡Šä¹Ÿå¯ä»¥åœ¨è¿™ä¸ªè¦ç‚¹ä¸­æ‰¾åˆ°ã€‚</p><p id="2936" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ•…äº‹çš„é•¿ç‰ˆæœ¬æ˜¯åœ¨æˆ‘çš„æ—§å¸–å­ä¸­æè¿°çš„<a class="ae jz" href="https://webreflection.medium.com/demystifying-hooks-f55ad885609f" rel="noopener">ï¼Œä½†æ˜¯æ²¡æœ‰å¿…è¦ç†è§£æ‰€æœ‰çš„å†…éƒ¨æœºåˆ¶ï¼Œä½†æ˜¯æœ‰å¿…è¦è®°ä½æ¯ä¸ªé’©å­éƒ½éœ€è¦è¢«å¤„ç†ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·ä»é›¶å¼€å§‹å¹¶è¡Œè®°å½•ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¸èƒ½å†æ¬¡è°ƒç”¨<code class="fe nc nd ne mh b">incrementalState(0)</code>ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦é€šè¿‡åŒä¸€ä¸ªåŠ©æ‰‹åˆ›å»ºä¸€ä¸ªæ–°çš„é’©å­ã€‚</a></p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="11a1" class="ml kz in mh b gy mm mn l mo mp">const parallelState = hooked(callback);</span></pre><p id="4d2b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ•°å­¦å¾ˆç®€å•:ä¸€ä¸ªé’©å­ç­‰äºä¸€ä¸ªå›è°ƒåŒ…è£…ï¼Œè€Œä¸”åªæœ‰ä¸€ä¸ªã€‚</p><p id="fef8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨è°ƒç”¨é’©å­ä»»æ„å¤šæ¬¡ï¼Œä½†æ˜¯åˆå§‹åŒ–çš„çŠ¶æ€å°†æ€»æ˜¯åæ˜ å®ƒä»¬çš„å½“å‰å€¼ï¼Œå› æ­¤è°ƒç”¨<code class="fe nc nd ne mh b">incrementalState(123)</code>å°†ä¸ä¼šè®°å½•ã€é‡ç½®æˆ–å¯åŠ¨å½“å‰è®¡æ•°æˆ–å®ƒçš„å€¼ï¼Œå®ƒåªä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„<code class="fe nc nd ne mh b">setTimeout</code>ï¼Œå› æ­¤ç°åœ¨æ¯ä»¶äº‹æ¯ç§’è®°å½•ä¸¤æ¬¡ã€‚</p><p id="94fc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¯ä»¥éšä¾¿ç©ä¹‹å‰çš„CodePenè‡ªå·±æµ‹è¯•ä¸€ä¸‹ã€‚</p><h1 id="bd5f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">é’©å­å’ŒDOMå…ƒç´ </h1><p id="3ee9" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘å¾ˆç¡®å®šç”¨ä¸€ä¸ªæ„šè ¢çš„è®¡æ•°å™¨æ¥å±•ç¤ºé’©å­å¾ˆå®¹æ˜“è®©äººåŒçƒ¦ï¼Œä½†æ˜¯è¿™å·²ç»æ˜¯é’©å­å·¥ä½œæ–¹å¼çš„"<em class="mb"> ABC </em>"äº†ï¼Œæˆ‘ä»¬å¯ä»¥æ¢ç´¢ä¸€äº›å…¶ä»–çš„åŠ©æ‰‹æ¥åˆ›å»ºç‹¬ç«‹çš„DOMå…ƒç´ ï¼Œåœ¨æœ¬ä¾‹ä¸­ï¼Œ<code class="fe nc nd ne mh b">useRef</code>:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="fe22" class="ml kz in mh b gy mm mn l mo mp">const useElement = (name, attributes = {}) =&gt; {<br/>  const ref = useRef(null);<br/>  return ref.current || (ref.current = Object.assign(<br/>    document.createElement(name),<br/>    attributes<br/>  ));<br/>};</span></pre><p id="0f2a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nc nd ne mh b">useRef</code>æ˜¯æˆ‘ä»¬ä¸€æ¬¡åˆ›é€ ä»»ä½•éœ€è¦çš„å¥½å¸®æ‰‹ã€‚å®ƒçš„åˆå§‹å€¼å°†è¢«å­˜å‚¨åˆ°ä¸€ä¸ªæ€»æ˜¯ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ä¸­ï¼Œå¹¶ä½œä¸º<code class="fe nc nd ne mh b">current</code>å±æ€§ã€‚</p><p id="7081" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç”±äºè¿™æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª<em class="mb">é’©å­</em>æœ¬èº«ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å°†å…¶åŒ…è£…ä¸º<em class="mb">é’©å­</em>å‡½æ•°ï¼Œå› ä¸ºå®ƒå°†åœ¨é’©å­å‡½æ•°ä¸­ä½¿ç”¨:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="da03" class="ml kz in mh b gy mm mn l mo mp">const Button = attributes =&gt; hooked(text =&gt; {<br/>  const element = useElement('button', attributes);<br/>  const [count, update] = useState(0);<br/>  element.textContent = `${text} clicked ${count}`;<br/>  element.onclick = () =&gt; update(count + 1);<br/>  return element;<br/>});</span><span id="651c" class="ml kz in mh b gy mq mn l mo mp">const simple = Button({className: 'simple'});<br/>const complex = Button({className: 'complex'});</span><span id="198e" class="ml kz in mh b gy mq mn l mo mp">document.body.append(<br/>  simple('simple button'),<br/>  complex('complex button')<br/>);</span></pre><p id="3fa9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™æ¬¡çš„<a class="ae jz" href="https://codepen.io/WebReflection/pen/MWjVVeo?editors=0010" rel="noopener ugc nofollow" target="_blank">ç°åœºæ¼”ç¤º</a>å±•ç¤ºäº†ä¸¤ä¸ªè®¡æ•°å™¨(<em class="mb">æˆ‘çŸ¥é“ï¼Œè¿˜æ˜¯å¾ˆæ— èŠâ€¦è¯·åŸè°…æˆ‘</em>)ï¼Œéœ€è¦ç†è§£çš„é‡è¦ä¸€ç‚¹æ˜¯ï¼Œä¸€æ—¦åˆ›å»ºäº†ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå°†å§‹ç»ˆæ˜¯å®Œå…¨ç›¸åŒçš„å…ƒç´ :</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="fdc9" class="ml kz in mh b gy mm mn l mo mp">console.log(<br/>  simple('simple button') ===<br/>  simple('simple button')<br/>); // true</span></pre><p id="b049" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬å¯ä»¥é€šè¿‡<code class="fe nc nd ne mh b">simple('just simple')</code>æ›´æ–°å®ƒçš„å‰ç¼€å†…å®¹ï¼Œå®ƒä»ç„¶æ˜¯å®Œå…¨ç›¸åŒçš„å…ƒç´ ã€‚</p><h1 id="61de" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ååº”çŠ¶æ€</h1><p id="7e11" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">ç”±äºæˆ‘ä»¬å·²ç»é€šè¿‡é’©å­å¼•å…¥äº†ç»„ä»¶å®šä¹‰ï¼Œå¹¶ä¸”ç”±äºè®¡æ•°ç”šè‡³è¿˜ä¸æ˜¯çœŸå®ä¸–ç•Œçš„ç”¨ä¾‹ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥é¿å…ä¸ºæ¯ä¸ªå•ç‹¬çš„çŠ¶æ€å†™æ»¡<code class="fe nc nd ne mh b">useState</code>,è€Œæ˜¯å¤„ç†ä¸€ä¸ªæä¾›çŠ¶æ€ç»†èŠ‚çš„å¯¹è±¡ï¼Œå®ƒèƒ½å¤Ÿè½»æ¾åœ°æ›´æ–°å½“å‰çŠ¶æ€:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="3962" class="ml kz in mh b gy mm mn l mo mp">const {defineProperties} = Object;<br/>const useReactive = object =&gt; {<br/>  const properties = {};<br/>  for (const key in object) {<br/>    const [value, set] = useState(object[key]);<br/>    properties[key] = {get: () =&gt; value, set};<br/>  }<br/>  return defineProperties({}, properties);<br/>};</span></pre><p id="ff19" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æœ‰äº†ä¸Šé¢çš„åŠ©æ‰‹ï¼Œ<code class="fe nc nd ne mh b">Button</code>ç»„ä»¶å·¥å‚å¯ä»¥ä»¥æ›´æ˜“è¯»çš„æ–¹å¼è¿›è¡Œç®€åŒ–ï¼Œè¿™ä¹Ÿå¯ä»¥æ‰©å±•åˆ°å…¶ä»–å±æ€§:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6025" class="ml kz in mh b gy mm mn l mo mp">const Button = attributes =&gt; hooked(text =&gt; {<br/>  const element = useElement('button', attributes);<br/>  const state = useReactive({count: 0});<br/>  element.textContent = `${text} clicked ${state.count}`;<br/>  element.onclick = () =&gt; state.count++;<br/>  return element;<br/>});</span></pre><p id="5db2" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><a class="ae jz" href="https://codepen.io/WebReflection/pen/abmYYQX?editors=0010" rel="noopener ugc nofollow" target="_blank">æŸ¥çœ‹è¿™ä¸ªç°åœºæ¼”ç¤º</a>æ¥ç©è¿™ä¸ªæ¨¡å¼ã€‚</p><h1 id="1e5f" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å¤„ç†äº‹ä»¶</h1><p id="94db" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">ç±»ä¼¼åœ°ï¼Œç”±äºæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°å¤„ç†æ›´å¤šçš„çŠ¶æ€ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¤„ç†æ›´å¤šçš„äº‹ä»¶ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå°é—®é¢˜:</p><ul class=""><li id="89aa" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated">DOMçº§äº‹ä»¶æ—¢å®¹æ˜“è®¾ç½®ï¼Œå¦‚<code class="fe nc nd ne mh b">element.onclick = thingy</code>ï¼Œä¹Ÿå®¹æ˜“å¤„ç†ï¼Œå› ä¸ºæ¯ä¸ªå…ƒç´ åªèƒ½è®¾ç½®ä¸€ä¸ª0çº§äº‹ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ç»„ä»¶å¾ˆå®¹æ˜“æ³„æ¼å®ƒçš„ä¾¦å¬å™¨ï¼Œæˆ–è€…ç”±äºä¸€äº›å…¶ä»–è„šæœ¬äº‹ä»¶è¦†ç›–è€Œä»ä¸ååº”</li><li id="9f61" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">è·Ÿè¸ªä»¥å‰çš„ä¾¦å¬å™¨ï¼Œä»¥ä¾¿åœ¨æ¯æ¬¡çŠ¶æ€æ›´æ–°æ—¶åˆ é™¤å’Œæ›¿æ¢è¿™äº›ä¾¦å¬å™¨ï¼Œè¿™æ˜¯ä¸€é¡¹ç¹çä¸”å®¹æ˜“å‡ºé”™çš„å·¥ä½œ</li></ul><p id="0e33" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸ºäº†å¸®åŠ©è§£å†³è¿™äº›ç—›ç‚¹ï¼Œæœ‰ä¸€ä¸ªä¼Ÿå¤§çš„<a class="ae jz" href="https://webreflection.medium.com/dom-handleevent-a-cross-platform-standard-since-year-2000-5bf17287fd38" rel="noopener"> <em class="mb"> handleEvent </em> </a>æ ‡å‡†ï¼Œå®ƒå°†å…è®¸æˆ‘ä»¬æ°¸è¿œä¸ç”¨å…³å¿ƒè·Ÿè¸ªä»¥å‰çš„ä¾¦å¬å™¨ï¼Œå› ä¸ºå¦‚æœå¤„ç†ç¨‹åºæ€»æ˜¯ç›¸åŒçš„ï¼Œä¸ä¼šå‘ç”Ÿä¸¤æ¬¡æˆ–æ›´å¤šæ¬¡:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6aba" class="ml kz in mh b gy mm mn l mo mp">const {defineProperties} = Object;<br/>const useHandler = (element, handler) =&gt; {<br/>  const ref = useRef(null);<br/>  // update the user handler each time<br/>  if (ref.current)<br/>    ref.current._ = handler;<br/>  // but create the real handler once<br/>  else<br/>    ref.current = {<br/>      _: handler,<br/>      handleEvent(e) {<br/>        this._[e.type](e);<br/>      }<br/>    };<br/>  // so that adding it N times won't result in N events<br/>  for (const key in handler)<br/>    element.addEventListener(key, ref.current);<br/>};</span></pre><p id="172e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æœ‰äº†ä¸Šé¢çš„åŠ©æ‰‹ï¼Œ<code class="fe nc nd ne mh b">Button</code>å·¥å‚ç°åœ¨çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="e1ca" class="ml kz in mh b gy mm mn l mo mp">const Button = attributes =&gt; hooked(text =&gt; {<br/>  const state = useReactive({count: 0});<br/>  const element = useElement('button', attributes);<br/>  useHandler(element, {<br/>    click() {<br/>      state.count++;<br/>    }<br/>  });<br/>  element.textContent = `${text} clicked ${state.count}`;<br/>  return element;<br/>});</span></pre><p id="ed0b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¯·éšæ„<a class="ae jz" href="https://codepen.io/WebReflection/pen/abmYYrM?editors=0010" rel="noopener ugc nofollow" target="_blank">æ’­æ”¾ç›¸å…³çš„ç°åœºæ¼”ç¤º</a>ã€‚</p><h1 id="2bad" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ç»„åˆåŠ©æ‰‹</h1><p id="c92f" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">å¦‚æœç»å¸¸ä½¿ç”¨ä¸¤ä¸ªåŠ©æ‰‹ï¼Œå¹¶ä¸”æœ‰åŠæ³•æ¶ˆé™¤å®ƒä»¬çš„æ„å›¾çš„æ­§ä¹‰ï¼Œé‚£ä¹ˆå°†è¿™äº›åŠ©æ‰‹æ”¾åœ¨ä¸€èµ·å¯èƒ½æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·å¯ä»¥é¿å…æ¯æ¬¡éƒ½é‡å¤ç›¸åŒçš„ä»£ç ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="04dc" class="ml kz in mh b gy mm mn l mo mp">const {defineProperties} = Object;<br/>const useReactiveHandler = (element, object) =&gt; {<br/>  const ref = useRef(null);<br/>  // create the real handler once<br/>  if (!ref.current)<br/>    ref.current = {<br/>      _: {},<br/>      handleEvent(e) {<br/>        _[`on${e.type}`](e);<br/>      }<br/>    };<br/>  const {_} = ref.current;<br/>  const properties = {};<br/>  for (const key in object) {<br/>    // listeners prefixed via on<br/>    if (/^on/.test(key)) {<br/>      element.addEventListener(key.slice(2), ref.current);<br/>      _[key] = object[key];<br/>    }<br/>    // methods simply copied over<br/>    else if (typeof object[key] === 'function')<br/>      _[key] = object[key];<br/>    // properties made reactive<br/>    else {<br/>      const [value, set] = useState(object[key]);<br/>      properties[key] = {<br/>        configurable: true,<br/>        get: () =&gt; value,<br/>        set<br/>      };<br/>    }<br/>  }<br/>  return defineProperties(_, properties);<br/>};</span></pre><p id="4e2a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æœ‰äº†ä¸Šé¢çš„åŠ©æ‰‹ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åŒæ—¶å®šä¹‰å¤„ç†ç¨‹åºå’Œååº”å±æ€§ï¼Œä½¿æˆ‘ä»¬çš„<code class="fe nc nd ne mh b">Button</code>å·¥å‚çœ‹èµ·æ¥åƒ:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="9e13" class="ml kz in mh b gy mm mn l mo mp">const Button = attributes =&gt; hooked(text =&gt; {<br/>  const element = useElement('button', attributes);<br/>  const {count} = useReactiveHandler(element, {<br/>    count: 0,<br/>    onclick(event) {<br/>      this.count++;<br/>    }<br/>  });<br/>  element.textContent = `${text} clicked ${count}`;<br/>  return element;<br/>});</span></pre><p id="4c32" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å†æ¬¡ï¼Œ<a class="ae jz" href="https://codepen.io/WebReflection/pen/gOwezOL?editors=0010" rel="noopener ugc nofollow" target="_blank">æŸ¥çœ‹ç°åœºæ¼”ç¤º</a>æ¥çœ‹çœ‹è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p><h2 id="0a53" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å­¦åˆ°äº†ä»€ä¹ˆ</h2><p id="705b" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸»è¦çš„æ”¶è·æ˜¯ï¼Œé’©å­åªæ˜¯èƒ½å¤Ÿå¾ˆå¥½åœ°ç»„åˆåœ¨ä¸€èµ·çš„åŸè¯­ï¼Œå› æ­¤ä¸ºæˆ‘ä»¬çš„æ¡ˆä¾‹åˆ›å»ºç‰¹åˆ«çš„åŠ©æ‰‹åº”è¯¥æ˜¯ç›´æ¥çš„ï¼Œåªè¦æˆ‘ä»¬ä¸ºä»»åŠ¡é€‰æ‹©æ­£ç¡®çš„é’©å­ã€‚</p><p id="e222" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªæ¢ç´¢äº†<code class="fe nc nd ne mh b">useState</code>å’Œ<code class="fe nc nd ne mh b">useRef</code>ï¼Œè¿™åªæ˜¯å¯¹é’©å­å¯èƒ½åšçš„äº‹æƒ…çš„çš®æ¯›ï¼Œä½†æ˜¯æˆ‘å¸Œæœ›å¾ˆæ¸…æ¥šï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ç”¨è¿™ä¸¤ä¸ªåŸè¯­åšå¾ˆå¤šäº‹æƒ…äº†ã€‚</p><p id="1b44" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨ä¼‘æ¯ä¸€ä¸‹ï¼Œæ•£æ•£æ­¥ï¼Œæˆ–è€…å†ç©ä¸€æ¬¡æˆ‘ä»¬å·²ç»åšè¿‡çš„ï¼Œè¿™æ ·ä¸€æ—¦ä½ å›æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¨è®ºæ›´å¤æ‚çš„ä¾‹å­ğŸ˜‰</p><h1 id="2097" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">â€œå¾…åŠäº‹é¡¹â€åº”ç”¨ç¨‹åº</h1><p id="a1b8" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘çŸ¥é“è¿™å¯¹è®¸å¤šäººæ¥è¯´ä¸ä¼šå¤ªæ¿€åŠ¨ï¼Œä½†æ˜¯<em class="mb"> X-App </em>çš„è¦ç‚¹æ˜¯å°†å†…éƒ¨ç»„ä»¶ä¸æ•´ä¸ª<em class="mb"> App </em>æœ¬èº«è”ç³»èµ·æ¥ï¼Œå› ä¸ºæ¯ä¸ªç»„ä»¶æ›´æ–°ä¹Ÿå¯èƒ½éœ€è¦ä¸€ä¸ª<em class="mb"> App </em>æ›´æ–°ï¼Œå¹¶ä¸”æ‹¥æœ‰åµŒå¥—é’©å­ä¹Ÿæ˜¯å€¼å¾—è®¨è®ºçš„äº‹æƒ…ï¼Œå› ä¸ºæœ‰å„ç§è§£å†³æ–¹æ¡ˆå¯ä»¥è€ƒè™‘æ¥ç»„æˆè¿™ä¸ªæ¨¡å¼ã€‚</p><p id="1976" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¾‹å¦‚ï¼Œåˆ°ç›®å‰ä¸ºæ­¢æè¿°çš„æ¯ä¸ªæŒ‰é’®éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ï¼Œä¹Ÿèƒ½å¤Ÿéšå¼åœ°å°†ä¸€ä¸ª<code class="fe nc nd ne mh b">click</code>äº‹ä»¶åˆ†æ´¾ç»™ä»»ä½•å¤–éƒ¨ç»„ä»¶ï¼Œä½†æ˜¯çŸ¥é“å¦‚ä½•åœ¨é’©å­å†…å¤„ç†å§”æ‰˜äº‹ä»¶ï¼Œä»¥åŠå¦‚ä½•å…±äº«æ•°æ®ï¼Œå¯èƒ½å€¼å¾—è¿™ä¸ªé¢å¤–çš„ä¾‹å­ã€‚</p><h2 id="dc4a" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">ç®€è€Œè¨€ä¹‹â€¦</h2><p id="f29c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘ä»¬è¦åˆ›å»ºçš„æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ç»“æ„ï¼Œå…è®¸ç”¨æˆ·é”®å…¥ä¸€äº›é¡¹ç›®ï¼Œé€šè¿‡è¾“å…¥æ·»åŠ å®ƒï¼Œèƒ½å¤Ÿæ ‡è®°æ¯ä¸ªé¡¹ç›®å®Œæˆï¼Œæˆ–æ²¡æœ‰ã€‚</p><p id="4bd9" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™ä¸ªåº”ç”¨çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬æ˜¯CodePen ä¸­çš„<a class="ae jz" href="https://codepen.io/WebReflection/pen/qBaogzY?editors=0010" rel="noopener ugc nofollow" target="_blank"> liveï¼Œæ‰€ä»¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒåšäº†ä»€ä¹ˆã€‚</a></p><figure class="mc md me mf gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nt"><img src="../Images/3d2624c081811c6249f1d9e2734057ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRw3OuGptCi0wLeOSei1Yw.png"/></div></div></figure><h1 id="59d7" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">è¯¥ç»“æ„</h1><p id="7845" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘ä»¬ä¸ä¼šè¿‡å¤šå…³æ³¨è¿™ç§ç»“æ„çš„æ­£ç¡®æ€§(äº‹å®å¹¶éå¦‚æ­¤)ï¼Œè€Œæ˜¯å…³æ³¨å®ƒçš„åŠŸèƒ½æ€§ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="ae31" class="ml kz in mh b gy mm mn l mo mp">&lt;div&gt;<br/>  &lt;input&gt;<br/>  &lt;ul&gt;<br/>    &lt;li&gt;<br/>      &lt;label&gt;<br/>        {{value}}<br/>        &lt;input type=checkbox&gt;<br/>      &lt;/label&gt;<br/>    &lt;/li&gt;<br/>  &lt;/ul&gt;<br/>&lt;/div&gt;</span></pre><p id="0a36" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åƒä»»ä½•å…¶ä»–åŠ¨æ€åº”ç”¨ç¨‹åºä¸€æ ·ï¼Œæˆ‘ä»¬å°†å¤„ç†ä¸€äº›æ•°æ®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹è¡¨ç¤ºä¸€ä¸ªä»»åŠ¡æˆ–é¡¹ç›®çš„åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸ªä»»åŠ¡æºå¸¦æœ€ç›¸å…³çš„ä¿¡æ¯:<code class="fe nc nd ne mh b">value</code>å’Œ<code class="fe nc nd ne mh b">done</code>ã€‚</p><h1 id="a911" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ä»»åŠ¡/é¡¹ç›®æŒ‚é’©</h1><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="b684" class="ml kz in mh b gy mm mn l mo mp">const Item = () =&gt; hooked(item =&gt; {<br/>  const {value, done} = item;<br/>  const li = useElement('li', {<br/>    // class name based on the item state<br/>    className: done ? 'done' : ''<br/>  });<br/>  const label = useElement('label');<br/>  const span = useElement('span', {<br/>    // item value can be edited/updated<br/>    textContent: value + ' '<br/>  });<br/>  const checkbox = useElement('input', {<br/>    // the checked state is handled reactively<br/>    type: 'checkbox'<br/>  });<br/>  useReactiveHandler(checkbox, {<br/>    checked: done,<br/>    onclick() {<br/>      // update the current task/item state<br/>      item.done = !done;<br/>      this.checked = !done;<br/>    }<br/>  });<br/>  // initialize this component once<br/>  if (!li.hasChildNodes()) {<br/>    label.append(span, checkbox);<br/>    li.append(label);<br/>  }<br/>  return li;<br/>});</span></pre><p id="d5a4" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¦‚æœæˆ‘ä»¬ç†è§£äº†æœ¬æ–‡çš„å‰ä¸€éƒ¨åˆ†ï¼Œå¸Œæœ›è¿™æ˜¯ä¸è¨€è‡ªæ˜çš„,<em class="mb"> Item </em>ç»„ä»¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„<code class="fe nc nd ne mh b">&lt;li&gt;</code>å…ƒç´ ï¼Œæ¯å½“å®ƒçš„çŠ¶æ€æ”¹å˜æ—¶ï¼Œå®ƒå°±ä¼šæ”¹å˜å®ƒçš„<code class="fe nc nd ne mh b">className</code>,åœ¨æ›´æ–°å®ƒçš„å¼•ç”¨å€¼ä¹‹åï¼Œç®€å•åœ°æ›´æ–°å®ƒçš„ååº”<code class="fe nc nd ne mh b">checked</code>å±æ€§ã€‚</p><h2 id="8fa0" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">ä¸å‰é¢çš„ä¾‹å­ä¸åŒ</h2><p id="4269" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">ä¹‹å‰ç»™å‡ºçš„<code class="fe nc nd ne mh b">useElement</code>åªè®¾ç½®äº†ä¸€æ¬¡å…ƒç´ å±æ€§ï¼Œä½†æ˜¯è¿™é‡Œçš„å¸®åŠ©å™¨åº”è¯¥èƒ½å¤Ÿåœ¨æ¯æ¬¡å‘ç”Ÿå˜åŒ–æ—¶æ›´æ–°è¿™äº›å±æ€§ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="12d0" class="ml kz in mh b gy mm mn l mo mp">const useElement = (name, attributes = {}) =&gt; {<br/>  const ref = useRef(null);<br/>  if (!ref.current)<br/>    ref.current = document.createElement(name);<br/>  // update properties each time<br/>  return Object.assign(ref.current, attributes);<br/>};</span></pre><h1 id="ce1e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å¾…åŠäº‹é¡¹åº”ç”¨ç¨‹åº</h1><p id="23ea" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯ä¸€ä¸ªèƒ½å¤Ÿå‘ˆç°è¿™äº›é¡¹ç›®å¹¶åˆ›å»ºæ–°é¡¹ç›®çš„å®¹å™¨ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="2dee" class="ml kz in mh b gy mm mn l mo mp">const Todo = () =&gt; hooked(items =&gt; {<br/>  // lazy way to have always same WeakMap ... not ideal<br/>  const {current: references} = useRef(new WeakMap);<br/>  // basic structure<br/>  const app = useElement('div');<br/>  const input = useElement('input');<br/>  const list = useElement('ul');<br/>  // update the list whenever a new task/item is added<br/>  useReactiveHandler(input, {<br/>    count: items.length,<br/>    onkeypress({key}) {<br/>      if (key === 'Enter') {<br/>        const value = input.value.trim();<br/>        if (value &amp;&amp; !items.find(({value: v}) =&gt; v === value)) {<br/>          // place new tasks on top<br/>          items.unshift({value, done: false});<br/>          input.value = '';<br/>          this.count++;<br/>        }<br/>      }<br/>    }<br/>  });<br/>  // lazy way to update this view ...<br/>  // just re-append everything<br/>  app.append(input, list);<br/>  items.forEach(item =&gt; {<br/>    // create new tasks/items once via reference<br/>    if (!references.has(item)) {<br/>      const hook = Item();<br/>      references.set(item, hook(item));<br/>    }<br/>    list.append(references.get(item));<br/>  });<br/>  return app;<br/>});</span><span id="b6a0" class="ml kz in mh b gy mq mn l mo mp">const App = Todo();</span></pre><p id="d289" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ¦‚æ‹¬ä¸€ä¸‹:</p><ul class=""><li id="a39a" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated"><code class="fe nc nd ne mh b">App</code>æ˜¯ä¸€ä¸ªé’©å­ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªè¾“å…¥å­—æ®µå¤„ç†ä¸€ç³»åˆ—ä»»åŠ¡/é¡¹ç›®ï¼Œå½“<em class="mb"> Enter </em>é”®å‘ç”Ÿæ—¶ï¼Œå®ƒèƒ½å¤Ÿæ·»åŠ æ–°çš„ä»»åŠ¡/é¡¹ç›®</li><li id="d1e6" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">æ¯æ¬¡åˆ›å»ºæ–°ä»»åŠ¡æ—¶ï¼Œ<code class="fe nc nd ne mh b">App</code>éƒ½ä¼šæ›´æ–°å…¶å†…å®¹ï¼Œå¹¶ä¸”å®ƒä¼šå°†æ¯ä¸ªé¡¹ç›®ä¸ç”¨ä½œ<em class="mb">å¼±</em>é”®çš„å”¯ä¸€æ•°æ®ç‚¹ç›¸å…³è”ã€‚</li></ul><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="aff1" class="ml kz in mh b gy mm mn l mo mp">// create a new App with an empty list<br/>document.body.append(App([]));</span></pre><h2 id="6da7" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">ä¸‘é™‹çš„éƒ¨åˆ†â€¦</h2><ul class=""><li id="67b9" class="nf ng in kc b kd lw kh lx kl nu kp nv kt nw kx nk nl nm nn bi translated">é¡¹ç›®é€šè¿‡æ•°æ®çªå˜æ³„æ¼å…¶çŠ¶æ€ï¼Œå¹¶ä¸”è¿™ç§å˜åŒ–åœ¨å…¶é—­åŒ…ä¹‹å¤–æ— æ³•è¢«æ£€æµ‹åˆ°ï¼Œé™¤éæ¯ä¸ªé¡¹ç›®ä¹Ÿæ˜¯ååº”æ€§çš„ï¼Œä½†è¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿ(æƒ³æƒ³<em class="mb"> JSON </em>è¯·æ±‚ï¼Œç­‰ç­‰)ã€‚å¦‚æœæˆ‘ä»¬æƒ³æ˜¾ç¤ºä»»åŠ¡çš„æ€»é‡ï¼Œä»¥åŠå·²å®Œæˆä»»åŠ¡çš„æ•°é‡ï¼Œæ”¹å˜é¡¹ç›®çŠ¶æ€è€Œä¸æ›´æ–°æ•´ä¸ªè§†å›¾æ˜¯ä¸å®¹æ˜“ç¼©æ”¾çš„ã€‚</li><li id="c54f" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">ä¸Reactå’Œå®ƒçš„<em class="mb"> JSX </em>ç‰¹æ®Šè¯­æ³•ç›¸æ¯”ï¼Œå¾ˆå®¹æ˜“è®©äººè§‰å¾—ç»„ä»¶çš„åˆ›å»ºå’Œåˆå§‹åŒ–ç›¸å½“å†—é•¿ä¸”å®¹æ˜“å‡ºé”™</li><li id="33f9" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">æ¯æ¬¡éƒ½æ— ç¼˜æ— æ•…åœ°åˆ›å»º<code class="fe nc nd ne mh b">WeakMap</code>ï¼Œè¿™å¾ˆå®¹æ˜“ä¿®å¤ï¼Œé€šè¿‡<code class="fe nc nd ne mh b">useRef</code>ä½¿ç”¨<code class="fe nc nd ne mh b">.current</code>æŠ€å·§ï¼Œä½†ä¹Ÿæ›´å†—é•¿ï¼Œæ”¶ç›Šå¾ˆå°‘</li></ul><p id="7325" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å¯èƒ½è¿˜æœ‰å…¶ä»–ä¸‘é™‹çš„éƒ¨åˆ†ï¼Œä½†æ˜¯è¿™ä¸‰ä¸ªè®©æˆ‘å·²ç»æƒ³è¦é‡å†™ï¼Œæˆ–è€…é‡æ„è¿™ä¸ª<em class="mb"> Todo </em>é¡¹ç›®â€¦ä½†æ˜¯æ€ä¹ˆåšå‘¢ï¼Ÿ</p><h1 id="abc7" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">å¼•å…¥åœŸåœ°</h1><p id="7b10" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated"><a class="ae jz" href="https://github.com/WebReflection/uland#readme" rel="noopener ugc nofollow" target="_blank"> land </a>æ¨¡å—æ˜¯ä¸€ä¸ªåŸºäº<em class="mb"> hooks </em>çš„åº“ï¼Œå®ƒè¯•å›¾é€šè¿‡ä»¥ä¸‹æ–¹å¼æ”¹è¿›æ™®é€šhooksçŠ¶æ€:</p><ul class=""><li id="83d9" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated">å®ƒæ˜¯å£°æ˜æ€§çš„ï¼Œè¿™è¦æ„Ÿè°¢é€šè¿‡å…¶æ ¸å¿ƒæš´éœ²çš„html</li><li id="3cac" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">å®ƒæä¾›äº†å¸®åŠ©è€…æ¥åè°ƒå¼€ç®±å³ç”¨çš„å®¹å™¨/ç»„ä»¶</li><li id="68cf" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">å®ƒéœ€è¦æ›´å°‘çš„æ ·æ¿æ–‡ä»¶ã€åŠ©æ‰‹</li></ul><p id="8182" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä»¬çš„<a class="ae jz" href="https://codepen.io/WebReflection/pen/vYXRMXK?editors=0010" rel="noopener ugc nofollow" target="_blank">æ–°ç‰ˆæœ¬çš„App </a>ç¡®å®ä¼šå‡å°‘åˆ°45 <em class="mb"> LOC </em>ï¼Œå…¶ä¸­çš„<em class="mb"> Item </em>ç»„ä»¶ç°åœ¨çœ‹èµ·æ¥ä¼šæ˜¯è¿™æ ·:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="2755" class="ml kz in mh b gy mm mn l mo mp">const Item = Component(item =&gt; {<br/>  const {value, done} = item;<br/>  // used to notify updates, no value needed<br/>  const [_, update] = useState();<br/>  return html`<br/>    &lt;li class=${done ? 'done' : ''}&gt;<br/>      &lt;label&gt;<br/>        ${value}<br/>        &lt;input<br/>          type=checkbox<br/>          .checked=${done}<br/>          onclick=${() =&gt; {<br/>            item.done = !done;<br/>            update();<br/>          }}<br/>        &gt;<br/>      &lt;/label&gt;<br/>    &lt;/li&gt;<br/>  `;<br/>});</span></pre><p id="c53e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å› æ­¤ä¸å†éœ€è¦ä»¥å‰çš„åŠ©æ‰‹ï¼Œå› ä¸ºå®šä¹‰å…ƒç´ ã€å®ƒä»¬çš„å±æ€§ã€äº‹ä»¶æˆ–ç‰¹æ€§ï¼Œä½¿ç”¨<code class="fe nc nd ne mh b">.propName</code>çº¦å®šï¼Œè¢«é›†æˆåˆ°åŸºäºæ¨¡æ¿æ–‡å­—çš„å¼•æ“ä¸­ã€‚</p><p id="a82e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸ä»…<em class="mb">é¡¹ç›®</em>ç»„ä»¶æ›´ç®€å•ï¼Œè€Œä¸”<em class="mb">å¾…åŠäº‹é¡¹</em>ç»„ä»¶ç°åœ¨ä¹Ÿæ›´çŸ­ï¼Œæ›´æ˜“äºé˜…è¯»:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="e918" class="ml kz in mh b gy mm mn l mo mp">const Todo = Component(items =&gt; {<br/>  const [count, update] = useState(items.length);<br/>  const done = items.filter(({done}) =&gt; done).length;<br/>  return html`<br/>    &lt;div data-info=${`Total: ${count} - Done: ${done}`}&gt;<br/>      &lt;input onkeypress=${({currentTarget: input, key}) =&gt; {<br/>        if (key === 'Enter') {<br/>          const value = input.value.trim();<br/>          if (value &amp;&amp; !items.find(({value: v}) =&gt; v === value)) {<br/>            items.unshift({value, done: false});<br/>            input.value = '';<br/>            update(count + 1);<br/>          }<br/>        }<br/>      }}&gt;<br/>      &lt;ul&gt;<br/>        ${items.map(Item)}<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  `;<br/>});</span></pre><p id="3afc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="mb"> Todo </em>çš„<code class="fe nc nd ne mh b">update(count + 1)</code>å°†åœ¨æ·»åŠ æœ€åä¸€ä¸ªæ¡ç›®åé‡æ–°å‘ˆç°é¡¹ç›®åˆ—è¡¨ï¼Œè€Œ<em class="mb"> Item </em>çš„<code class="fe nc nd ne mh b">update()</code>å°†é€šè¿‡æœ€ä¸Šé¢çš„å‘ˆç°å…ƒç´ ä¼ æ’­ï¼Œå› æ­¤ç°åœ¨å®Œæˆçš„ä»»åŠ¡ä¹Ÿå°†ä½œä¸º<code class="fe nc nd ne mh b">data-info</code>åæ˜ åœ¨ä¸»å®¹å™¨ä¸­ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="fc23" class="ml kz in mh b gy mm mn l mo mp">// bootstrap the Todo App<br/>render(document.body, Todo([]));</span></pre><p id="a69e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å®šä¹‰åœ¨å“ªé‡Œå‘ˆç°æˆ‘ä»¬çš„æ–°åº”ç”¨ç¨‹åºçš„å…ƒç´ ï¼Œç„¶å<a class="ae jz" href="https://codepen.io/WebReflection/pen/vYXRMXK?editors=0010" rel="noopener ugc nofollow" target="_blank">æŸ¥çœ‹å®ƒçš„å®å†µ</a>ã€‚</p><h2 id="8fef" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">é”®æ§ä¸éé”®æ§</h2><p id="3c1f" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">å¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿå½“å‰çš„æ¼”ç¤ºï¼Œä¼šå‘ç°æœ‰ä¸€äº›é—®é¢˜éœ€è¦è€ƒè™‘:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="6406" class="ml kz in mh b gy mm mn l mo mp">${items.map(Item)}</span></pre><p id="af21" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ¨¡æ¿æ–‡å­—å¼•æ“è¶³å¤Ÿæ™ºèƒ½ï¼Œæ¯æ¬¡æ›´æ–°æ‰€æœ‰å±æ€§ï¼Œä½†æ˜¯æ²¡æœ‰å¼•ç”¨ï¼Œæˆ‘ä»¬å·¥ä½œåœ¨<em class="mb">æ— é”®</em>æ¨¡å¼ã€‚</p><p id="4807" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ£€æŸ¥å½“å‰çš„DOMï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ›´æ”¹å¯èƒ½ä¼šåº”ç”¨åˆ°å¤šä¸ªé¡¹ç›®ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³ç¡®ä¿å•ä¸ªé¡¹ç›®ä»£è¡¨ä¸€ä¸ªç‰¹å®šçš„ç»„ä»¶ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦åœ¨<em class="mb"> Todo </em>åº”ç”¨ç¨‹åºå’Œæ¯ä¸ª<em class="mb">é¡¹ç›®</em>ä¸­ä½¿ç”¨ä¸€ä¸ªå¼•ç”¨ã€‚</p><p id="14c3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªé’©å­åŠ©æ‰‹:<code class="fe nc nd ne mh b">useMemo</code></p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="54fe" class="ml kz in mh b gy mm mn l mo mp">const Todo = Component(items =&gt; {<br/>  const tasks = useMemo(() =&gt; new WeakMap, items);<br/>  // ...<br/>  return html`<br/>    &lt;div data-info=${`Total: ${count} - Done: ${done}`}&gt;<br/>      ...<br/>      &lt;ul&gt;<br/>        ${items.map(item =&gt; {<br/>          if (!tasks.has(item))<br/>            tasks.set(item, Item(item));<br/>          return tasks.get(item);<br/>        })}<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  `;<br/>});</span></pre><p id="01f1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™ç§åŠ©æ‰‹ä»…åœ¨å…¶ä¿æŠ¤æ”¹å˜æ—¶æ‰§è¡Œå›è°ƒï¼Œåœ¨è¿™ç§ç‰¹å®šæƒ…å†µä¸‹ä»…åˆ›å»ºä¸€ä¸ª<code class="fe nc nd ne mh b">WeakReference</code>ï¼Œä¸ä»¥å‰æ¯æ¬¡æ›´æ–°éƒ½åˆ›å»ºå®ƒç›¸åã€‚</p><p id="12d8" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç°åœ¨ï¼Œdanceå¯ä»¥ä½¿ç”¨è¿™æ ·çš„å¼•ç”¨ï¼Œåªåœ¨éœ€è¦çš„æ—¶å€™åˆ›å»ºæ–°çš„ç»„ä»¶ï¼Œå¹¶é‡æ–°æ’åºå…¶ä»–ç»„ä»¶ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ›´æ–°æ•´ä¸ªåˆ—è¡¨ã€‚</p><p id="bfda" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œå¦ä¸€ä¸ªå˜åŒ–æ˜¯ä»¥ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼å°†è¿™æ ·çš„æ¡ç›®ä¸å®ƒæ‰€ä»£è¡¨çš„DOMç‰‡æ®µç›¸å…³è”:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="035b" class="ml kz in mh b gy mm mn l mo mp">const Item = Component(item =&gt; {<br/>  const {value, done} = item;<br/>  const [_, update] = useState();<br/>  return html.for(item, 'todo-item')`<br/>    ...<br/>  `;<br/>});</span></pre><p id="37b1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nc nd ne mh b">html.for(ref[, id])</code>å°±æ˜¯è¦èµ°çš„è·¯ï¼Œæœ¬ä¾‹ä¸­çš„<code class="fe nc nd ne mh b">id</code>å¸®åŠ©æˆ‘ä»¬åœ¨é¡µé¢ä¸­é‡ç”¨åŒä¸€ä¸ª<code class="fe nc nd ne mh b">item</code>ï¼Œè€Œä¸éœ€è¦ç§»åŠ¨åŒä¸€ä¸ªèŠ‚ç‚¹ã€‚</p><p id="8e61" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¯·éšæ„ä½¿ç”¨è¿™ä¸ªåº”ç”¨ç¨‹åºçš„æœ€æ–°ç‰ˆæœ¬ã€‚</p><h2 id="624e" class="ml kz in bd la mr ms dn le mt mu dp li kl mv mw lm kp mx my lq kt mz na lu nb bi translated">ä»ç„¶å¤±è¸ªâ€¦</h2><p id="219c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘ä»¬ç›®å‰çš„åº”ç”¨ç¨‹åºä»ç„¶åœ¨ä»å†…éƒ¨å˜å¼‚ç‰©å“ï¼Œæˆ‘å·²ç»å¯ä»¥æƒ³è±¡æ‰€æœ‰çš„â€œ<em class="mb">ä¸å¯å˜-æ•°æ®</em>â€ç²‰ä¸å‘èª“â€¦</p><p id="1718" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åŒæ ·å€¼å¾—è€ƒè™‘çš„æ˜¯ï¼Œç©ºçš„<code class="fe nc nd ne mh b">useState</code>ï¼Œä»…ä»…ä¸ºäº†ä¼ æ’­çŠ¶æ€å˜åŒ–è€Œè¢«è°ƒç”¨ï¼Œä¸å…¶è¯´æ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œä¸å¦‚è¯´æ˜¯ä¸€ä¸ªé»‘å®¢ã€‚</p><p id="2f3b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç›¸åï¼Œæˆ‘ä»¬å¯ä»¥åšçš„æ˜¯ä¼ é€’åº”ç”¨ç¨‹åº<em class="mb">ä¸Šä¸‹æ–‡</em>ï¼Œè¿™ä½¿å¾—ä»»ä½•ç»„ä»¶éƒ½èƒ½å¤Ÿè§¦å‘æ›´æ–°ï¼Œä½¿ç”¨ç›¸åŒä¸Šä¸‹æ–‡çš„å…¶ä»–ç»„ä»¶éƒ½ä¼šæ”¶åˆ°é€šçŸ¥ã€‚</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="74ce" class="ml kz in mh b gy mm mn l mo mp">const Todo = Component(context =&gt; {<br/>  const items = useContext(context);<br/>  // no need to useMemo, as items are always new anyway<br/>  // ...<br/>  return html`<br/>    &lt;div data-info=${`Total: ${count} - Done: ${done}`}&gt;<br/>      ...<br/>      &lt;ul&gt;<br/>        ${items.map(item =&gt; Item({context, item}))}<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  `;<br/>});</span></pre><p id="c011" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è€Œåœ¨<em class="mb"> React </em>ä¸­ï¼Œä¸Šä¸‹æ–‡é€šå¸¸è¢«è¡¨ç¤ºä¸ºå¦ä¸€ä¸ª<em class="mb"> JSX </em>èŠ‚ç‚¹ï¼Œåœ¨<em class="mb"> uhooks </em>ä¸­ï¼Œå› æ­¤åœ¨<em class="mb"> uland </em>ä¸­ï¼Œä¹Ÿæœ‰ä¸€ä¸ªå·¥å…·æ¥åˆ›å»ºä¸€ä¸ª:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="0b1e" class="ml kz in mh b gy mm mn l mo mp">render(document.body, Todo(createContext([])));</span></pre><p id="82dc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe nc nd ne mh b">useContext(context)</code>å°†è¿”å›ä¸Šä¸‹æ–‡æºå¸¦çš„ä»»ä½•<em class="mb">å€¼</em>ï¼Œä½†æ˜¯ä¸Šä¸‹æ–‡æœ¬èº«ä¹Ÿæä¾›äº†ä¸€ç§æ›´æ–°å…¶å€¼çš„æ–¹å¼ï¼Œè‡ªåŠ¨åœ¨åº”ç”¨ç¨‹åºä¸­ä¼ æ’­ï¼Œå¯¼è‡´å…¨å±€æ›´æ–°:</p><pre class="mc md me mf gt mg mh mi mj aw mk bi"><span id="8e14" class="ml kz in mh b gy mm mn l mo mp">const Item = Component(({context, item}) =&gt; {<br/>  const items = useContext(context);<br/>  const {value, done} = item;<br/>  return html`<br/>    &lt;li class=${done ? 'done' : ''}&gt;<br/>      &lt;label&gt;<br/>        ${value}<br/>        &lt;input<br/>          type=checkbox<br/>          .checked=${done}<br/>          onclick=${() =&gt; {<br/>            const i = items.indexOf(item);<br/>            // provide a new list of items<br/>            // with a new item instead of mutating<br/>            context.provide([<br/>              ...items.slice(0, i),<br/>              {value, done: !done},<br/>              ...items.slice(i + 1);<br/>            ]);<br/>          }}<br/>        &gt;<br/>      &lt;/label&gt;<br/>    &lt;/li&gt;<br/>  `;<br/>});</span></pre><p id="0b8e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™ä¸ª<a class="ae jz" href="https://codepen.io/WebReflection/pen/bGwvydQ?editors=0010" rel="noopener ugc nofollow" target="_blank">æœ€åä¸€ä¸ªä¾‹å­ä¹Ÿæ˜¯æ´»çš„</a>ï¼Œè¿™é‡Œæœ€é‡è¦çš„è¦æ³¨æ„çš„æ˜¯:</p><ul class=""><li id="f59e" class="nf ng in kc b kd ke kh ki kl nh kp ni kt nj kx nk nl nm nn bi translated">æ²¡æœ‰å¿…è¦ä½¿ç”¨<code class="fe nc nd ne mh b">html.for(...)</code>å› ä¸ºæ¯ä¸€é¡¹æ”¹å˜éƒ½ä¼šå˜æˆä¸€ä¸ªæ–°çš„å‚è€ƒï¼Œæ‰€ä»¥æˆ‘ä»¬åªä¼šéº»çƒ¦ä¸€ä¸ª<code class="fe nc nd ne mh b">WeakMap</code>æ¥è·å¾—ä¸å¤šçš„æ”¶ç›Š</li><li id="1630" class="nf ng in kc b kd no kh np kl nq kp nr kt ns kx nk nl nm nn bi translated">æ„å›¾æ¯”ä»¥å‰æ›´æ¸…æ™°äº†ï¼Œä½†æ˜¯èŠ‚ç‚¹ç°åœ¨åˆå˜å¾—æ— å¯†é’¥äº†</li></ul><p id="97d3" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å…³äºæœ€åä¸€ç‚¹ï¼Œä¸ä»…å®ƒä¸åº”è¯¥çœŸæ­£é‡è¦ï¼Œé™¤éé”®æ§ç»“æœæ˜¯ç»å¯¹å¼ºåˆ¶æ€§çš„ï¼Œä½†å¦‚æœæˆ‘ä»¬ä»”ç»†è§‚å¯Ÿï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥å°†æ¯ä¸ªç»„ä»¶å…³è”åˆ°å®ƒè‡ªå·±çš„å€¼ï¼Œå¹¶ä½¿ç”¨è¿™æ ·çš„å€¼ä½œä¸ºå”¯ä¸€çš„é”®ï¼Œå› ä¸ºé€»è¾‘ä¸å…è®¸æˆ‘ä»¬æ·»åŠ ä¸¤æ¬¡ç›¸åŒçš„ä»»åŠ¡ã€‚</p><p id="60ef" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªç®€å•çš„<code class="fe nc nd ne mh b">Map</code>ä¼šæ›´å¥½ï¼Œå¦‚æœåº”ç”¨ç¨‹åºè¢«æ‰©å±•åˆ°ç§»é™¤å·²ç»å®Œæˆçš„é¡¹ç›®ï¼Œå”¯ä¸€éœ€è¦è®°ä½çš„æ˜¯ï¼Œé”®ä¹Ÿåº”è¯¥ä»è¿™ä¸ª<code class="fe nc nd ne mh b">Map</code>ä¸­ç§»é™¤ï¼Œä½†æ˜¯æˆ‘å°†æŠŠè¿™éƒ¨åˆ†ç•™ç»™è¯»è€…ä½œä¸ºç»ƒä¹ ã€‚</p><h1 id="adde" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ç»“è®º</h1><p id="736c" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">æˆ‘å¸Œæœ›ä½ å–œæ¬¢è¿™ä¸ªä¸€æ­¥ä¸€æ­¥çš„Todoåº”ç”¨ç¨‹åºåˆ›å»ºè¿‡ç¨‹ï¼Œä½¿ç”¨æ™®é€šçš„DOMå’Œå¤©ç”Ÿçš„å°åŠ©æ‰‹æ¥è½»æ¾è§£å†³è¿™äº›ä»»åŠ¡ï¼Œæ‰€ä»¥ç°åœ¨åº”è¯¥å¾ˆæ¸…æ¥šï¼Œä½¿ç”¨é’©å­ä¸ä¸€å®šå±€é™åœ¨Reactç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œä½†æ˜¯é€šè¿‡ä»»ä½•å…¶ä»–æ ‡å‡†æ¥è¯´ä¹Ÿæ˜¯ä¸€ä»¶ä»¤äººæ„‰å¿«çš„äº‹æƒ…ã€‚</p></div></div>    
</body>
</html>
<html>
<head>
<title>Advanced TypeScript: A Generic Function to Update and Manipulate Object Arrays</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">é«˜çº§ç±»å‹è„šæœ¬:æ›´æ–°å’Œæ“ä½œå¯¹è±¡æ•°ç»„çš„é€šç”¨å‡½æ•°</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://javascript.plainenglish.io/advanced-typescript-a-generic-function-to-update-and-manipulate-object-arrays-caacd601cedf?source=collection_archive---------2-----------------------#2021-06-09">https://javascript.plainenglish.io/advanced-typescript-a-generic-function-to-update-and-manipulate-object-arrays-caacd601cedf?source=collection_archive---------2-----------------------#2021-06-09</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c315" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated"><strong class="ak">ç»ˆæåŠ›é‡çš„å¦ä¸€ä¸ªå¥‡ç‰¹çš„é€šç”¨åŠŸèƒ½ï¼</strong></h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/7dde3bbb12a3c19b901986c0493bbdf4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-OZKQ8ktWrcemb3gNUorA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">updateArray.ts in all its glory.</figcaption></figure><p id="8d09" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo">è¿™ç¯‡æ–‡ç« æ˜¯</em> <a class="ae lp" href="https://chrisfrew.in/blog/advanced-typescript-a-generic-function-to-update-and-manipulate-object-arrays/" rel="noopener ugc nofollow" target="_blank"> <em class="lo">é•œåƒåœ¨æˆ‘çš„åšå®¢</em> </a> <em class="lo">ä¸Šï¼Œåœ¨é‚£é‡Œä½ å¯ä»¥æ‰¾åˆ°</em> <strong class="ku io"> <em class="lo">æ–¹å¼</em> </strong> <em class="lo">æ›´å¥½çš„ä»£ç ç‰‡æ®µâ€”â€”å®ƒä»¬ä¹Ÿæ˜¯å¯ä»¥å¤åˆ¶å’Œç²˜è´´çš„ï¼</em></p><h1 id="ab3a" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">æ€»æ˜¯æ¨åŠ¨æ›´å¹²å‡€çš„ä»£ç </h1><p id="2915" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">åœ¨æ„å»ºæˆ‘æœ€æ–°çš„SaaSäº§å“<a class="ae lp" href="https://reduxplate.com/" rel="noopener ugc nofollow" target="_blank">redexplate</a>æ—¶ï¼Œæˆ‘æ„è¯†åˆ°ä¸€ä¸ªå¸¸è§çš„æ¨¡å¼ä¸æ–­å‡ºç°åœ¨æˆ‘çš„æ•°ç»„æ“ä½œå‡½æ•°ä¸­ã€‚æˆ‘æ€»æ˜¯åœ¨ç‰¹å®šçš„é”®ä¸Šæ›´æ–°ç‰¹å®šçš„å€¼ï¼ŒåŸºäºå¯¹æŸä¸ª<em class="lo">å…¶ä»–</em>é”®çš„ç‰¹å®šæµ‹è¯•ã€‚</p><p id="2e25" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> *Plug:è¯´åˆ°</em><a class="ae lp" href="https://reduxplate.com/" rel="noopener ugc nofollow" target="_blank"><em class="lo">Redux plate</em></a><em class="lo">ï¼Œå®ƒä¼šè‡ªåŠ¨ä¸ºæ‚¨ç”ŸæˆReduxä»£ç ï¼Œ</em> <a class="ae lp" href="https://chrisfrew.in/book" rel="noopener ugc nofollow" target="_blank"> <em class="lo">æˆ‘æ­£åœ¨å†™ä¸€æœ¬ä¹¦ï¼Œè®°å½•æˆ‘åœ¨æ„å»ºReduxPlate </em> </a>ã€<em class="lo">çš„è¿‡ç¨‹ä¸­æ‰€èµ°çš„æ¯ä¸€æ­¥ï¼Œä»æ ·æ¿å¯åŠ¨ç¨‹åºåˆ°æœ€ç»ˆçš„æˆå“ã€‚å¦‚æœä½ èƒ½æ¥çœ‹çœ‹ï¼Œæˆ‘ä¼šå¾ˆé«˜å…´çš„ï¼æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼æˆ‘çœŸçš„ä»å¤´åˆ°å°¾æ„å»ºäº†ReduxPlateï¼Œå°±åœ¨ä½ çš„çœ¼å‰â€”â€”è€Œä¸”ä»£ç éƒ½æ˜¯å…¬å¼€çš„ï¼</em></p><p id="7c7d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä¾‹å¦‚ï¼Œå¯¹äº<a class="ae lp" href="https://reduxplate.com/" rel="noopener ugc nofollow" target="_blank"> ReduxPlateä¸»é¡µ</a>ä¸Šçš„ç¼–è¾‘å™¨å°éƒ¨ä»¶ï¼Œæˆ‘ä½¿ç”¨IEditorSettingsç±»å‹çš„æœ‰çŠ¶æ€æ•°ç»„æ¥ç¡®å®šå“ªä¸ªç¼–è¾‘å™¨å½“å‰æ˜¯æ´»åŠ¨çš„ï¼Œä»¥åŠç¼–è¾‘å™¨ä¸­çš„å®é™…ä»£ç å€¼æ˜¯ä»€ä¹ˆ:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="2676" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">export</em> <em class="lo">default</em> <em class="lo">interface</em> IEditorSetting {</strong></span><span id="4fee" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    fileLabel: string</strong></span><span id="2965" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    code: string</strong></span><span id="2b7c" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    isActive: boolean</strong></span><span id="50e2" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="ac93" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">è¿™ç§è¡Œä¸ºè¦æ±‚æˆ‘ç¼–å†™ä¸¤ä¸ªäº‹ä»¶å¤„ç†ç¨‹åº:</p><p id="bcbf" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><code class="fe my mz na mo b"><strong class="ku io">onChangeCode</strong></code>å½“ä»£ç æ”¹å˜æ—¶:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="d052" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeCode = (code: string) =&gt; {</strong></span><span id="450b" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    setEditorSettingsState(editorSettingsState.map(editorSetting =&gt; {</strong></span><span id="5565" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    if</em> (editorSetting.isActive) {</strong></span><span id="9f14" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">         editorSetting.code = code</strong></span><span id="9d62" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }</strong></span><span id="00c9" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> editorSetting</strong></span><span id="2456" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="6d59" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="c969" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å’Œ<code class="fe my mz na mo b"><strong class="ku io">onChangeTab</strong></code>ç”¨äºå½“ç¼–è¾‘å™¨æ ‡ç­¾æ”¹å˜æ—¶:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="519d" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeTab = (fileLabel: string) =&gt; {</strong></span><span id="1f4a" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">setEditorSettingsState(editorSettingsState.map(editorSetting =&gt; {</strong></span><span id="773f" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    editorSetting.isActive = editorSetting.fileLabel === fileLabel</strong></span><span id="ded2" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> editorSetting</strong></span><span id="0b25" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="6f77" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="2a0e" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">ä»”ç»†ç ”ç©¶è¿™ä¸¤ä¸ªå‡½æ•°ã€‚å¯¹äºè¿™ä¸¤è€…ï¼Œæˆ‘æ˜ å°„äº†ä¸€ä¸ªçŠ¶æ€å˜é‡<code class="fe my mz na mo b"><strong class="ku io">editorSettingsState</strong></code>ï¼Œå¹¶æ ¹æ®ä¸€äº›æµ‹è¯•æ¡ä»¶åœ¨æ•°ç»„ä¸­è®¾ç½®äº†ä¸€ä¸ªå±æ€§ã€‚åœ¨<code class="fe my mz na mo b"><strong class="ku io">onChangeCode</strong></code>ä¸­ï¼Œæµ‹è¯•æ¡ä»¶æ˜¯<code class="fe my mz na mo b"><strong class="ku io">isActive</strong></code>å±æ€§å€¼æ˜¯å¦ä¸ºçœŸã€‚åœ¨<code class="fe my mz na mo b"><strong class="ku io">onChangeTab</strong></code>ä¸­ï¼Œæµ‹è¯•æ¡ä»¶æ˜¯<code class="fe my mz na mo b"><strong class="ku io">fileLabel</strong></code>å±æ€§å€¼æ˜¯å¦ä¸ä¼ å…¥çš„<code class="fe my mz na mo b"><strong class="ku io">fileLabel</strong></code>ç›¸åŒ¹é…ã€‚ä¸<code class="fe my mz na mo b"><strong class="ku io">onChangeCode</strong></code>ç›¸åï¼Œ<code class="fe my mz na mo b"><strong class="ku io">onChangeTab</strong></code>å°†ä¸ºæ•°ç»„ä¸­çš„<em class="lo">æ‰€æœ‰</em>é¡¹è®¾ç½®<code class="fe my mz na mo b"><strong class="ku io">isActive</strong></code>å€¼ã€‚</p><p id="ffeb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">é€šè¿‡ä¸€ç‚¹åŠªåŠ›ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿå®ç°ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥æ›¿æ¢è¿™äº›å‡½æ•°ï¼Œæ›´é‡è¦çš„æ˜¯:åœ¨æˆ‘ä»¬éœ€è¦ç›¸åŒç±»å‹åŠŸèƒ½çš„åº”ç”¨ç¨‹åºä¸­é‡ç”¨ã€‚</p><h1 id="f970" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">é‡å†™è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œä»¥ä¾¿æ›´å¥½åœ°äº†è§£å®ƒä»¬çš„ç»“æ„</h1><p id="65f1" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ä¸ºäº†æ›´å¥½åœ°ç†è§£æˆ‘ä»¬å°†è¦ç¼–å†™çš„å‡½æ•°ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ª<code class="fe my mz na mo b"><strong class="ku io">else</strong></code>è¯­å¥æ‰©å±•è¿™ä¸¤ä¸ªå‡½æ•°ï¼ŒåŒæ—¶ä¿æŒå®ƒä»¬çš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚</p><p id="6a9c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¯¹äº<code class="fe my mz na mo b"><strong class="ku io">onChangeCode</strong></code>:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="d890" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeCode = (code: string) =&gt; {</strong></span><span id="1d80" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    setEditorSettingsState(editorSettingsState.map(editorSetting =&gt; {</strong></span><span id="a566" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    if</em> (editorSetting.isActive) {</strong></span><span id="6a74" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        editorSetting.code = code</strong></span><span id="7ba5" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    } <em class="lo">else</em> {</strong></span><span id="ee02" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        // do nothing :)</strong></span><span id="ab87" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }</strong></span><span id="0748" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> editorSetting</strong></span><span id="dfb4" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="35d1" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="4181" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¯¹äº<code class="fe my mz na mo b"><strong class="ku io">onChangeTab</strong></code>:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="3d1a" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeTab = (fileLabel: string) =&gt; {</strong></span><span id="35e3" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">setEditorSettingsState(editorSettingsState.map(editorSetting =&gt; {</strong></span><span id="566d" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    if</em> (editorSetting.fileLabel === fileLabel) {</strong></span><span id="d0a3" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        editorSetting.isActive = true</strong></span><span id="dcba" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    } <em class="lo">else</em> {</strong></span><span id="f9a0" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        editorSetting.isActive = false</strong></span><span id="562c" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }</strong></span><span id="4ac1" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> editorSetting</strong></span><span id="7454" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="dfe5" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="a1cd" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">åœ¨è¿™ç§å½¢å¼ä¸­ï¼Œå¾ˆæ˜æ˜¾æˆ‘ä»¬çš„æ³›å‹å‡½æ•°åº”è¯¥æœ‰æŸç§æµ‹è¯•æ ‡å‡†ï¼Œè¿™å°†å­˜åœ¨äº<code class="fe my mz na mo b"><strong class="ku io">if</strong></code>è¯­å¥ä¸­ã€‚ç„¶åï¼Œå¦‚æœæµ‹è¯•æ ‡å‡†é€šè¿‡ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ•°ç»„ä¸­æ›´æ–°å±æ€§çš„é”®å’Œå€¼ã€‚æ­¤å¤–ï¼Œ<code class="fe my mz na mo b"><strong class="ku io">else</strong></code>å—ä¸­å‘ç”Ÿçš„äº‹æƒ…åº”è¯¥æ˜¯å¯é€‰çš„â€”â€”ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåº”è¯¥æœ‰ä¸€ä¸ªå¯é€‰çš„æ–¹æ³•æ¥è®¾ç½®é»˜è®¤å€¼ã€‚è¿™å®é™…ä¸Šæ„å‘³ç€è¿™å°†æˆä¸ºä¸€ä¸ª<code class="fe my mz na mo b"><strong class="ku io">else if</strong></code>å—ã€‚</p><p id="2325" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘ä»¬æ–°çš„æ³›å‹å‡½æ•°çš„ä¸»ä½“å°†é‡‡ç”¨ä¸è¿™ä¸¤ä¸ªæ‰©å±•å‡½æ•°ç›¸åŒçš„å½¢å¼:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="f8dc" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">return</em> array.map(item =&gt; {</strong></span><span id="5129" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    if</em> (item[testKey] === testValue) {</strong></span><span id="b0a4" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        item[updateKey] = updateValue</strong></span><span id="3644" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    } <em class="lo">else</em> <em class="lo">if</em> (testFailValue !== <em class="lo">undefined</em>) {</strong></span><span id="8082" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        item[updateKey] = testFailValue</strong></span><span id="adec" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }</strong></span><span id="cd0a" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> item</strong></span><span id="3f49" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">})</strong></span></pre><p id="e252" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æˆ‘ä»¬éœ€è¦æä¾›ä¸€ä¸ª<code class="fe my mz na mo b"><strong class="ku io">testKey</strong></code>å’Œå€¼ä½œä¸ºæµ‹è¯•æ ‡å‡†ï¼Œå¦‚æœæµ‹è¯•é€šè¿‡ï¼Œè¿˜éœ€è¦æä¾›ä¸€ä¸ª<code class="fe my mz na mo b"><strong class="ku io">updateKey</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code>ã€‚æœ€åï¼Œä¸€ä¸ªå¯é€‰å‚æ•°å°†æ˜¯<code class="fe my mz na mo b"><strong class="ku io">testFailValue</strong></code>ã€‚å¦‚æœ<code class="fe my mz na mo b"><strong class="ku io">testFailValue</strong></code>ä¸æ˜¯<code class="fe my mz na mo b"><strong class="ku io">undefined</strong></code>ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†æ‰§è¡Œ<code class="fe my mz na mo b"><strong class="ku io">else if</strong></code>å—ã€‚</p><h1 id="b765" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">é”®å…¥å‡½æ•°</h1><p id="5ea1" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ç¼–å†™è¿™ä¸ªå‡½æ•°æœ€å…·æŒ‘æˆ˜æ€§çš„éƒ¨åˆ†æ˜¯ç¡®ä¿ä¸º<code class="fe my mz na mo b"><strong class="ku io">testValue</strong></code>ä¼ é€’çš„å€¼ä¸é¢„æœŸçš„<code class="fe my mz na mo b"><strong class="ku io">T[testKey]</strong></code>ç±»å‹ç›¸åŒ¹é…ã€‚å¯¹äº<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code> / <code class="fe my mz na mo b"><strong class="ku io">testFailValue</strong></code>å¸¦<code class="fe my mz na mo b"><strong class="ku io">T[updateKey]</strong></code>åº”è¯¥ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½¿ç”¨TypeScriptï¼Œ<em class="lo">æœ‰å¯èƒ½åšåˆ°è¿™ä¸€ç‚¹ï¼Œå°½ç®¡æˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨ç­¾åä¸­æ˜¾å¼åœ°æä¾›ä¸€ç‚¹ä¿¡æ¯æ¥æ‰§è¡Œå®ƒã€‚æˆ‘ä»¬è®¨è®ºçš„<code class="fe my mz na mo b"><strong class="ku io">array</strong></code>æ˜¯<code class="fe my mz na mo b"><strong class="ku io">Array&lt;T&gt;</strong></code>ç±»å‹ï¼Œè¿™ä¸€ç‚¹å¾ˆæ¸…æ¥šã€‚ä½†æ˜¯<code class="fe my mz na mo b"><strong class="ku io">testKey</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">updateKey</strong></code>çš„ç±»å‹å‘¢ï¼Ÿæˆ‘ä»¬éœ€è¦å¼•å…¥ä¸¤ä¸ªæ›´é€šç”¨çš„ç±»å‹æ¥è®©å®ƒä»¬å·¥ä½œï¼Œ<code class="fe my mz na mo b"><strong class="ku io">U</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">V</strong></code>ã€‚ä¸ºäº†ç¡®ä¿<code class="fe my mz na mo b"><strong class="ku io">testKey</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">updateKey</strong></code>éƒ½æ˜¯å¯¹è±¡<code class="fe my mz na mo b"><strong class="ku io">T</strong></code>çš„å®é™…é”®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨TypeScriptsçš„<code class="fe my mz na mo b"><strong class="ku io">extends</strong></code>å…³é”®å­—ï¼Œå³å°†<code class="fe my mz na mo b"><strong class="ku io">U</strong></code>å®šä¹‰ä¸º<code class="fe my mz na mo b"><strong class="ku io">U extends keyof T</strong></code>ï¼Œå°†<code class="fe my mz na mo b"><strong class="ku io">V</strong></code>å®šä¹‰ä¸º<code class="fe my mz na mo b"><strong class="ku io">V extends keyof T</strong></code>ã€‚</em></p><p id="5c07" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å®šä¹‰äº†ç±»å‹<code class="fe my mz na mo b"><strong class="ku io">U</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">V</strong></code>åï¼Œ<code class="fe my mz na mo b"><strong class="ku io">testKey</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">updateKey</strong></code>å¯ä»¥ç”¨<code class="fe my mz na mo b"><strong class="ku io">keyof T</strong></code>æ¥å®šä¹‰ï¼Œä»¥åŠå®ƒä»¬å¯¹åº”çš„å€¼:<code class="fe my mz na mo b"><strong class="ku io">testValue</strong></code>ä¸º<code class="fe my mz na mo b"><strong class="ku io">T[U]</strong></code>,<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code>ä¸º<code class="fe my mz na mo b"><strong class="ku io">T[V]</strong></code>ã€‚<code class="fe my mz na mo b"><strong class="ku io">testFailValue</strong></code>è·Ÿ<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code>åŒç±»å‹<code class="fe my mz na mo b"><strong class="ku io">T[V]</strong></code>ã€‚æœ€åï¼Œç”±äºè¿™æ˜¯ä¸€ä¸ªæ•°ç»„å‡½æ•°<code class="fe my mz na mo b"><strong class="ku io">map</strong></code>ï¼Œæˆ‘ä»¬å°†è¿”å›ä¸€ä¸ªç±»å‹ä¸º<code class="fe my mz na mo b"><strong class="ku io">T</strong></code>çš„æ–°æ•°ç»„ã€‚å› ä¸ºè¿™ä¸ªç­¾åç›¸å½“å¤æ‚ï¼Œæ‰€ä»¥æˆ‘å°†å®ƒä»¬éƒ½æ·»åŠ åˆ°ä¸€ä¸ª<code class="fe my mz na mo b"><strong class="ku io">param</strong></code>å¯¹è±¡ä¸­ï¼Œè¿™æ ·å½“æˆ‘ä»¬è°ƒç”¨è¿™ä¸ª<code class="fe my mz na mo b"><strong class="ku io">updateArray</strong></code>å‡½æ•°æ—¶ï¼Œå®ƒå°†æ˜“äºé˜…è¯»å’Œç†è§£ã€‚è¿™æ ·çš„ç»“æ„ä¹Ÿä½¿å¾—ä»¥åæ‰©å±•å’Œæ·»åŠ é¢å¤–çš„å‚æ•°æ›´åŠ å®¹æ˜“ã€‚</p><p id="b982" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ‰€ä»¥ï¼Œæˆ‘ä»¬æœ‰æˆ‘ä»¬çš„å‡½æ•°ç­¾å:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="eac0" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">export</em> <em class="lo">const</em> updateArray = &lt;T, U <em class="lo">extends</em> <em class="lo">keyof</em> T, V <em class="lo">extends</em> <em class="lo">keyof</em> T&gt;(params: {</strong></span><span id="3037" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    array: Array&lt;T&gt;</strong></span><span id="bda8" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testKey: <em class="lo">keyof</em> T</strong></span><span id="e61d" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testValue: T[U]</strong></span><span id="7d8c" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateKey: <em class="lo">keyof</em> T</strong></span><span id="ebdc" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateValue: T[V]</strong></span><span id="3a16" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testFailValue?: T[V]</strong></span><span id="6f5b" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}): Array&lt;T&gt;</strong></span></pre><h1 id="79a5" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">å†³èµ›æˆç»©</h1><p id="99e4" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">ä»ä¸Šé¢é’©ä½<code class="fe my mz na mo b"><strong class="ku io">map</strong></code>é€»è¾‘ï¼Œå®Œæ•´çš„<code class="fe my mz na mo b"><strong class="ku io">updateArray</strong></code>åŠŸèƒ½ä¸º:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="a8dc" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io">// Updates an object array at the specified update key with the update value,</strong></span><span id="b86f" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">// if the specified test key matches the test value.</strong></span><span id="efe5" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">// Optionally pass 'testFailValue' to set a default value if the test fails.</strong></span><span id="000a" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">export</em> <em class="lo">const</em> updateArray = &lt;T, U <em class="lo">extends</em> <em class="lo">keyof</em> T, V <em class="lo">extends</em> <em class="lo">keyof</em> T&gt;(params: {</strong></span><span id="4ed9" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    array: Array&lt;T&gt;</strong></span><span id="bbe6" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testKey: <em class="lo">keyof</em> T</strong></span><span id="fb30" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testValue: T[U]</strong></span><span id="b275" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateKey: <em class="lo">keyof</em> T</strong></span><span id="440d" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateValue: T[V]</strong></span><span id="f3f2" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testFailValue?: T[V]</strong></span><span id="3fc8" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}): Array&lt;T&gt; =&gt; {</strong></span><span id="b48b" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">const</em> {</strong></span><span id="2956" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    array,</strong></span><span id="b23c" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testKey,</strong></span><span id="4c74" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testValue,</strong></span><span id="2ae0" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateKey,</strong></span><span id="4a8b" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    updateValue,</strong></span><span id="6726" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    testFailValue,</strong></span><span id="df2c" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">} = params</strong></span><span id="a221" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">return</em> array.map(item =&gt; {</strong></span><span id="64c7" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    if</em> (item[testKey] === testValue) {</strong></span><span id="7577" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        item[updateKey] = updateValue</strong></span><span id="1f7e" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    } <em class="lo">else</em> <em class="lo">if</em> (testFailValue !== <em class="lo">undefined</em>) {</strong></span><span id="3ff5" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        item[updateKey] = testFailValue</strong></span><span id="7da2" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }</strong></span><span id="a692" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io"><em class="lo">    return</em> item</strong></span><span id="5cf3" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    })</strong></span><span id="dc83" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="e9b2" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¯¹è¯¥åŠŸèƒ½çš„ä¸€ä¸ªå¯èƒ½çš„æ”¹è¿›æ˜¯åŒºåˆ†æˆåŠŸå’Œå¤±è´¥æ—¶çš„<code class="fe my mz na mo b"><strong class="ku io">updateKey</strong></code>ã€‚å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œä¹Ÿè®¸åœ¨æŸäº›ç½•è§çš„æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šæƒ³è¦è®¾ç½®å…¶ä»–é”®çš„å€¼ã€‚</p><h1 id="0fbe" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">ç”¨å®ƒï¼</h1><p id="8682" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">è®©æˆ‘ä»¬å›åˆ°æœ€åˆçš„å‡½æ•°ï¼Œé‡æ„å®ƒä»¬ä»¥ä½¿ç”¨æˆ‘ä»¬å–œæ¬¢çš„é€šç”¨å‡½æ•°<code class="fe my mz na mo b"><strong class="ku io">updateArray</strong></code>ã€‚</p><p id="e4e4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å‚è€ƒä¸Šé¢çš„<code class="fe my mz na mo b"><strong class="ku io">IEditorSetting</strong></code>å¯èƒ½ä¼šæœ‰å¸®åŠ©(å›æƒ³ä¸€ä¸‹<code class="fe my mz na mo b"><strong class="ku io">editorSettingsState</strong></code>æ˜¯<code class="fe my mz na mo b"><strong class="ku io">IEditorSetting</strong></code>çš„æ•°ç»„)ã€‚è¿™æ˜¯é‡æ„åçš„<code class="fe my mz na mo b"><strong class="ku io">onChangeCode</strong></code>:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="c070" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeCode = (code: string) =&gt; {</strong></span><span id="e463" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    setEditorSettingsState(updateArray({</strong></span><span id="c155" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        array: editorSettingsState,</strong></span><span id="3298" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        testKey: "isActive",</strong></span><span id="82db" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        testValue: true,</strong></span><span id="3629" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        updateKey: "code",</strong></span><span id="e975" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        updateValue: code,</strong></span><span id="39ad" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="e9f5" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="e951" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å’Œ<code class="fe my mz na mo b"><strong class="ku io">onChangeTab</strong></code>:</p><pre class="kd ke kf kg gt mn mo mp mq aw mr bi"><span id="4ac8" class="ms lr in mo b gy mt mu l mv mw"><strong class="mo io"><em class="lo">const</em> onChangeTab = (fileLabel: string) =&gt; {</strong></span><span id="cea9" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    setEditorSettingsState(updateArray({</strong></span><span id="5a0e" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        array: editorSettingsState,</strong></span><span id="c27d" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        testKey: "fileLabel",</strong></span><span id="57ec" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        testValue: fileLabel,</strong></span><span id="0560" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        updateKey: "isActive",</strong></span><span id="f128" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        updateValue: true,</strong></span><span id="4ebd" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">        testFailValue: false,</strong></span><span id="f90f" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">    }))</strong></span><span id="c1dd" class="ms lr in mo b gy mx mu l mv mw"><strong class="mo io">}</strong></span></pre><p id="04d1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ„Ÿè°¢æˆ‘ä»¬çš„<code class="fe my mz na mo b"><strong class="ku io">U extends keyof T</strong></code>å’Œ<code class="fe my mz na mo b"><strong class="ku io">U extends keyof T</strong></code>ï¼Œæˆ‘ä»¬çš„å‡½æ•°æ˜¯ç±»å‹å®‰å…¨çš„:ä¾‹å¦‚ï¼ŒTypeScriptä¸å…è®¸å°†ç±»ä¼¼<code class="fe my mz na mo b"><strong class="ku io">"hello world"</strong></code>çš„å­—ç¬¦ä¸²ä¼ é€’ç»™<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code>ï¼Œå› ä¸º<code class="fe my mz na mo b"><strong class="ku io">isActive</strong></code>é”®ä¸Šçš„<code class="fe my mz na mo b"><strong class="ku io">IEditorSetting</strong></code>çš„é¢„æœŸç±»å‹æ˜¯<code class="fe my mz na mo b"><strong class="ku io">boolean</strong></code>ã€‚</p><p id="16c7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">æ­å–œï¼Œæˆ‘ä»¬å®Œæˆäº†ï¼</p><h1 id="2919" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">å†—é•¿ä¸å¯é‡ç”¨æ€§å’Œå¯è¯»æ€§</h1><p id="a80a" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">çš„ç¡®ï¼Œè°ƒç”¨<code class="fe my mz na mo b"><strong class="ku io">updateArray</strong></code>ç›¸å½“å†—é•¿ã€‚ç„¶è€Œï¼Œå½“ä½ è€ƒè™‘åˆ°æˆ‘ä»¬ä¸å†éœ€è¦è€ƒè™‘åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­è®¾è®¡æ‰€æœ‰é‚£äº›è®¨åŒçš„<code class="fe my mz na mo b"><strong class="ku io">map</strong></code>æ“ä½œæ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„ä»£ä»·ï¼</p><p id="cf47" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">è¿™æ˜¯ä¸æ˜¯ä¸€ç§è¿‡åº¦ä¼˜åŒ–ï¼Ÿæˆ‘ä¸è¿™ä¹ˆè®¤ä¸ºâ€”â€”ç”¨Reactæˆ–Reduxï¼Œæˆ–è€…ä¸¤è€…éƒ½ç”¨ï¼Œçœ‹çœ‹ä½ è‡ªå·±çš„é¡¹ç›®ã€‚æˆ‘ä¿è¯ä½ æœ‰ç›¸åŒçš„æ•°ç»„æ˜ å°„å’Œæ“ä½œæ—¶é—´ï¼Œæ— è®ºæ˜¯åœ¨ä½ çš„çŠ¶æ€å˜åŒ–è¿˜æ˜¯æ¸²æŸ“å‡½æ•°ï¼</p><h1 id="4562" class="lq lr in bd ls lt lu lv lw lx ly lz ma jt mb ju mc jw md jx me jz mf ka mg mh bi translated">è°¢è°¢ï¼</h1><p id="fc07" class="pw-post-body-paragraph ks kt in ku b kv mi jo kx ky mj jr la lb mk ld le lf ml lh li lj mm ll lm ln ig bi translated">æœ‰äº†è¿™ä¸ªå¼ºå¤§çš„é€šç”¨å‡½æ•°ï¼Œæ‚¨å†ä¹Ÿä¸éœ€è¦è€ƒè™‘å±æ€§çº§åˆ«çš„<code class="fe my mz na mo b"><strong class="ku io">map</strong></code>æ•°ç»„æ“ä½œäº†ï¼æ­¤å¤–ï¼Œå¼ºç±»å‹ç­¾åè¿˜å¯ä»¥é˜²æ­¢æ‚¨ä¼ é€’ä¸ç›¸åº”é”®çš„é¢„æœŸç±»å‹ä¸ä¸€è‡´çš„<code class="fe my mz na mo b"><strong class="ku io">testValue</strong></code>æˆ–<code class="fe my mz na mo b"><strong class="ku io">updateValue</strong></code>ï¼</p><p id="13d7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">å¹²æ¯ï¼ğŸº</p><ul class=""><li id="5382" class="nb nc in ku b kv kw ky kz lb nd lf ne lj nf ln ng nh ni nj bi translated">å…‹è‰ä¸</li></ul><p id="eb53" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo">æ›´å¤šå†…å®¹è¯·çœ‹</em><a class="ae lp" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lo">plain English . io</em></a></p></div></div>    
</body>
</html>
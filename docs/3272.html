<html>
<head>
<title>How to Quickly Create a React Table — WITHOUT a Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何快速创建React表格—无需库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-quickly-create-a-react-table-without-a-library-5deb80180788?source=collection_archive---------5-----------------------#2021-07-04">https://javascript.plainenglish.io/how-to-quickly-create-a-react-table-without-a-library-5deb80180788?source=collection_archive---------5-----------------------#2021-07-04</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d7c9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">设置一个React表，不用花时间阅读复杂的文档和哭泣。</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi km"><img src="../Images/905144d321a4356cbb6922929a27b66b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7kFfmev-NCwVOlZq"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Photo by <a class="ae lc" href="https://unsplash.com/@vargasuillian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Uillian Vargas</a> on <a class="ae lc" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e034" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">没有绒毛。不要哭。三、二、一——我们走吧！</em></p><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi ld"><img src="../Images/742988a3a85f87de75aa1af384b32811.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84BJzW_Vkiex-Gvz5bRxhA.jpeg"/></div></div><figcaption class="ky kz gj gh gi la lb bd b be z dk">Meme belongs to PJ Codes</figcaption></figure><p id="0027" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，假设您有一个使用<code class="fe le lf lg lh b">create-react-app</code>的react项目设置，让我们直接进入<code class="fe le lf lg lh b">app.js</code>文件。</p><p id="a227" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们将使用JSON占位符API，特别是端点:<code class="fe le lf lg lh b">https://jsonplaceholder.typicode.com/todos</code>(非常简单)。</p><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="3f87" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第1行导入我们的table组件(我们将在下面进一步查看)后，我们使用一个名为<code class="fe le lf lg lh b">data</code>的状态变量及其设置方法<code class="fe le lf lg lh b">setData</code>来设置我们的初始状态——我们将初始状态设置为<code class="fe le lf lg lh b">null</code>,因为它是一个<em class="kl"> falsy </em>值，我们将进一步了解<em class="kl">为什么</em>我们将它设置为<code class="fe le lf lg lh b">null</code>。</p><p id="5136" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从第8–12行，我们设置了一个对我们的<strong class="jp ir"> todos </strong>端点的fetch调用，我们将从其中检索一个列表—更具体地说是一个对象数组，每个对象的格式如下:</p><pre class="kn ko kp kq gt lk lh ll lm aw ln bi"><span id="6893" class="lo lp iq lh b gy lq lr l ls lt">[<br/>   {<br/>      completed: false,<br/>      id: 1,<br/>      title: 'lorem ipsum',<br/>      userId: 1<br/>   },<br/>   {<br/>      ...<br/>   },<br/>]</span></pre><p id="74e3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">特别是在第12行，我们用react钩子建立了一个空数组。这个空数组表示一个叫做<strong class="jp ir">的依赖数组</strong>。这意味着只有在依赖数组中存在元素(1个或更多)时，才会重新计算<strong class="jp ir"> useEffect </strong>方法中的逻辑。这将触发组件重新渲染。然而，如果我们的依赖数组是空的，我们告诉react " <em class="kl">嘿react，不要触发重新渲染，因为我已经让这个数组为空了…只在组件最初挂载时计算我的use-effect中的逻辑。</em>"这类似于一个类组件的<code class="fe le lf lg lh b">componentDidMount</code>。</p><p id="882f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第11行，我们使用<code class="fe le lf lg lh b">setData</code> setter方法将状态变量<code class="fe le lf lg lh b">data</code>的状态设置为从fetch请求中获取的JSON。这个set-state方法将触发一次重新渲染。</p><p id="1ad5" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好了，既然我们已经弄清楚了这一部分，让我们跳到第14–16行，这里我只是在每次数据值改变时记录状态变量。如果<code class="fe le lf lg lh b">data</code>的值发生变化，我们会在这里看到变化。</p><p id="c45a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">好的——现在让我们关注第21-24行。注意简写:</p><pre class="kn ko kp kq gt lk lh ll lm aw ln bi"><span id="0774" class="lo lp iq lh b gy lq lr l ls lt">data &amp;&amp;</span><span id="abf5" class="lo lp iq lh b gy lu lr l ls lt">   &lt;Table<br/>      tableData = {data}<br/>      headerData = {['ID', 'Title', 'Completed']}<br/>   /&gt;</span></pre><p id="7b68" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这意味着我们检查数据的<em class="kl">真值</em>(记得我们最初将状态变量<code class="fe le lf lg lh b">data</code>设置为<code class="fe le lf lg lh b">null</code>)。一旦<code class="fe le lf lg lh b">data</code>和我们的<code class="fe le lf lg lh b">&lt;Table /&gt;</code>组件都被评估为<code class="fe le lf lg lh b">true</code>，我们就传入我们想要的道具，然后<em class="kl">瞧！我们正在向孩子传递数据。</em></p><p id="7339" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，在我们继续之前——花一分钟来研究一下传入的道具。我们希望我们的表对传入的道具完全不可知。我的意思是，我们希望保持我们的<strong class="jp ir">表</strong>组件的全局和可重用性，不仅仅是对于todos，而是对于传入的任何类型的数据。我们应该能够传入一个包含用户数据或除todos之外的其他内容的对象数组，这样我们就不会将我们的表限制为只显示todos，这就是为什么我们传入一个名为<code class="fe le lf lg lh b">headerData</code>的属性，包含要在我们的表头中显示的动态数据。</p><h1 id="ca3d" class="lv lp iq bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">最后，让我们看看我们的表组件:</h1><figure class="kn ko kp kq gt kr"><div class="bz fp l di"><div class="li lj l"/></div></figure><p id="1124" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在我们的table组件的第5行，我们分解了我们的2个props — <code class="fe le lf lg lh b">tableData</code>和<code class="fe le lf lg lh b">headerData</code>，这样我们就不必将它们称为<code class="fe le lf lg lh b">props.tableData</code>等等。这纯粹是速记，不符合逻辑，但是这是很好的实践。</p><p id="57c8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想学习一些非常棒的JavaScript速记，看看这篇文章:</p><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/20-javascript-short-hands-you-need-to-know-in-2021-c0ed25a40837"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">2021年你需要知道的20个JavaScript小技巧</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">一个成功项目的一个重要因素是生产力——这正是这些JavaScript缩写…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj kw mv"/></div></div></a></div><p id="6b7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在第7行，我们编写了一个名为<code class="fe le lf lg lh b">tableHeader</code>的函数，在这个函数中，我们映射了从app组件传入的头数组:</p><pre class="kn ko kp kq gt lk lh ll lm aw ln bi"><span id="c25e" class="lo lp iq lh b gy lq lr l ls lt">headerData = {['ID', 'Title', 'Completed']}</span></pre><p id="8f16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">映射之后，我们为数组中的每个元素生成一个表数据元素，我们可以在第33行方便地调用它。够简单吧？</p><p id="e36d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">向下移动到第15行，我们声明一个名为<code class="fe le lf lg lh b">returnTableData</code>的函数，它接收我们从app组件传入的表数据(来自我们的fetch请求的数据):</p><pre class="kn ko kp kq gt lk lh ll lm aw ln bi"><span id="0cda" class="lo lp iq lh b gy lq lr l ls lt">tableData = {data}</span></pre><p id="d666" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我们映射这些数据，分解其参数，因为每个todo都是一个对象。这样，我们可以将每个嵌套键称为<code class="fe le lf lg lh b">{id}</code>而不是<code class="fe le lf lg lh b">todos.id</code>。</p><p id="a7ab" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从第18–23行，我们简单地为每个todo返回一行，包含每个值的表数据元素。</p><h1 id="f7e0" class="lv lp iq bd lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr bi translated">我们的表将如下所示:</h1><figure class="kn ko kp kq gt kr gh gi paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="gh gi nk"><img src="../Images/1aec2e882c9d4a2010358a42799939fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTDsZUIIXAVkrVO8ZcOTtw.png"/></div></div></figure><p id="be2d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在造型方面还有很多路要走，但我们有一个基本的表格。</p><p id="d518" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你想更进一步，我推荐你使用像TanStack的React-Table这样的库。你可以在这里了解更多信息:</p><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-set-up-react-table-using-dynamic-data-1d2b6f555a9a"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">如何使用动态数据建立反应表</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">欢迎来到灵活、可组合和轻量级表格的无头世界——介绍React Table，作者是…</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ne l"><div class="nl l ng nh ni ne nj kw mv"/></div></div></a></div><p id="761a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你正在为网络开发面试做准备，也一定要看看这篇有用的文章:</p><div class="ms mt gp gr mu mv"><a rel="noopener  ugc nofollow" target="_blank" href="/web-development-interview-questions-cheatsheet-2021-65eed8bbc1b2"><div class="mw ab fo"><div class="mx ab my cl cj mz"><h2 class="bd ir gy z fp na fr fs nb fu fw ip bi translated">网络开发面试问题备忘单，2021</h2><div class="nc l"><h3 class="bd b gy z fp na fr fs nb fu fw dk translated">133个你肯定会被问到的网络开发面试问题。</h3></div><div class="nd l"><p class="bd b dl z fp na fr fs nb fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="ne l"><div class="nm l ng nh ni ne nj kw mv"/></div></div></a></div><p id="4096" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望这有所帮助！:)</p><p id="842e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">到Pjcodes.com的<a class="ae lc" href="http://www.pjcodes.com/" rel="noopener ugc nofollow" target="_blank">来找我</a></p><p id="6bb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">感谢阅读。</p><p id="11ae" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="kl">更多内容尽在</em><a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="kl">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
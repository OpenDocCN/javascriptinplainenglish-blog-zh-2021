<html>
<head>
<title>Migrate an Existing Angular Application from CSS to SCSS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将现有的角度应用程序从CSS迁移到SCSS</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/migrate-an-angular-app-from-css-to-scss-71200d615c95?source=collection_archive---------2-----------------------#2021-03-17">https://javascript.plainenglish.io/migrate-an-angular-app-from-css-to-scss-71200d615c95?source=collection_archive---------2-----------------------#2021-03-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="4573" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">在使用默认样式表格式的Angular应用程序中使用SCSS的快速指南</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/63a8e011ce0a8ae17c892d897d4b550c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pRj95hfmkIDo0AtgHtWIFg.jpeg"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@der_maik_" rel="noopener ugc nofollow" target="_blank">Maik Jonietz</a> on <a class="ae kv" href="https://unsplash.com/" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="777b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在使用Angular CLI创建新的Angular应用程序时，您可能忘记了使用<strong class="ky ir"> style=scss </strong>标志，或者在CLI提示时，您只是选择了<strong class="ky ir"> CSS </strong>作为样式表。当你开始使用一个新的应用程序时，也许你不熟悉CSS预处理程序，比如<strong class="ky ir"> SCSS </strong>。</p><p id="b7ae" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">原因可能是使用<strong class="ky ir"> CSS </strong>而不是<strong class="ky ir"> SCSS </strong>，但是现在您想在应用程序中切换到使用SCSS样式表格式。再一想，您知道这种转变可能会令人生畏，因为您的应用程序已经变得又大又复杂。</p><p id="f8cb" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">但是，正如Thabo Ambrose在他的文章中所解释的，有很多方法可以顺利完成迁移。在本文中，我们将涵盖:</p><ul class=""><li id="55a9" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">我们如何使用Angular schematics NPM软件包，只需一个命令即可执行迁移</li><li id="e66f" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">我们如何手动执行迁移，即使用ng CLI命令</li><li id="29c8" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">我们如何使用NPM包<em class="mg">重命名器</em>来执行迁移</li></ul><p id="fb3e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注:在本文中，我们将不涉及什么是<a class="ae kv" href="https://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> SCSS </a>和<a class="ae kv" href="https://angular.io/guide/schematics" rel="noopener ugc nofollow" target="_blank">角度示意图</a>。我认为你对这些话题有所了解。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="5e1c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">通常，要使用SCSS样式表生成新的Angular应用程序，我们可以使用以下Angular CLI命令:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="3bb8" class="mt mu iq mp b gy mv mw l mx my">ng new dummy-migration-app --style=scss</span></pre><p id="358f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者您只需点击<strong class="ky ir"><em class="mg">ng new dummy-migration-app</em></strong><em class="mg"/>命令，等待CLI提示样式表选项，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mz"><img src="../Images/0e18c3750cf4f64dcf9f66972e3094d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7fQr4GOjvUrS22DYrK6AYg.png"/></div></div></figure></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="7258" class="mt mu iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">使用NPM程序包示意图-scss-迁移</h2><p id="cb17" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">一种快速简单的迁移方法是使用示意图NPM包<a class="ae kv" href="https://www.npmjs.com/package/schematics-scss-migrate" rel="noopener ugc nofollow" target="_blank"><em class="mg">schematics-scss-migrate</em></a><em class="mg">。</em>在<em class="mg"/><a class="ae kv" href="https://www.npmjs.com/package/schematics-scss-migrate" rel="noopener ugc nofollow" target="_blank"><em class="mg">NPM</em></a><em class="mg">上阅读更多关于这个原理图封装的内容。</em></p><p id="2972" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用这个包从CSS迁移到SCSS，你所要做的就是安装这个包，最好是作为一个<a class="ae kv" href="https://docs.npmjs.com/specifying-dependencies-and-devdependencies-in-a-package-json-file" rel="noopener ugc nofollow" target="_blank">开发依赖</a>并运行下面的代码:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="236d" class="mt mu iq mp b gy mv mw l mx my">ng g schematics-scss-migrate:scss-migrate</span></pre><p id="a9ce" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">仅此而已，上面的命令执行了以下操作:</p><ul class=""><li id="9ef5" class="ls lt iq ky b kz la lc ld lf lu lj lv ln lw lr lx ly lz ma bi translated">已将所有样式表从。css到。递归存储在<code class="fe nw nx ny mp b">src</code>文件夹中的scss</li><li id="133b" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更新了<code class="fe nw nx ny mp b">styleUrls</code>值，以指向与组件样式文件相关的组件类中样式表的新文件名。</li><li id="daf0" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">更新了<code class="fe nw nx ny mp b">angular.json</code>文件中的组件样式原理图值，如果原理图不存在，则创建一个。</li><li id="af3c" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated">并将<code class="fe nw nx ny mp b">angular.json</code>文件中的<code class="fe nw nx ny mp b">.scss</code>引用重命名为<code class="fe nw nx ny mp b">styles.css</code></li></ul><p id="4b22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mg">注意:在进行实际迁移之前，可以使用</em> <strong class="ky ir"> <em class="mg">进行测试，比如:</em></strong></p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="fb2d" class="mt mu iq mp b gy mv mw l mx my">ng g schematics-scss-migrate:scss-migrate --dry-run=true</span></pre></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="e1c2" class="mt mu iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">使用Angular CLI手动迁移</h2><p id="bbec" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">随着Angular 9的出现，<strong class="ky ir"> styleext </strong>被重命名为<strong class="ky ir"> style，</strong>如果您使用的是版本9或更高版本，那么您的命令应该是</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="4516" class="mt mu iq mp b gy mv mw l mx my">ng config schematics.@schematics/angular:component.style scss</span></pre><p id="d05b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mg">注意:对于早于v6 beta的Angular CLI版本，使用ng set代替ng config。</em></p><p id="a9ea" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">或者可以直接在<strong class="ky ir"><em class="mg">angular . JSON</em></strong><em class="mg"/>config文件中设置原理图，如下图:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="dc76" class="mt mu iq mp b gy mv mw l mx my">"schematics": {     <br/>    "@schematics/angular:component": {       <br/>        "style": "scss"     <br/>    }<br/>    ...   <br/>}</span></pre><p id="c830" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，您必须将项目构建和测试选项的<strong class="ky ir"> style.css </strong>的扩展更新为<strong class="ky ir"> style.scss </strong>，就像这样:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="ec64" class="mt mu iq mp b gy mv mw l mx my">{  <br/>    "projects": {      <br/>        "your-project-name": {      <br/>            ...             <br/>            "architect": {<br/>                "build": {<br/>                    "options": {<br/>                        "styles": [  <br/>                            "src/styles.css" <strong class="mp ir">// update</strong>   <br/>                            ...<br/>                         ] <br/>                         ...<br/>                     }<br/>                     ...<br/>                 },<br/>                 "test": {<br/>                     ...<br/>                         "options": {<br/>                         ...<br/>                         "styles": [<br/>                             "src/styles.css" <strong class="mp ir">// update</strong><br/>                         ],<br/>                 }      <br/>             },<br/>         }<br/>     }<br/> } <br/>}</span></pre><p id="cbe6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，要将样式表文件扩展名从。css到。scss，请遵循以下说明。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="54df" class="mt mu iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">将项目的样式表文件从。css到。使用NPM软件包的scss。</h2><p id="c762" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">自己一个一个地重命名文件绝对不是一个好主意。为此，我们可以使用一个名为<a class="ae kv" href="https://www.npmjs.com/package/renamer" rel="noopener ugc nofollow" target="_blank"> <strong class="ky ir"> <em class="mg">重命名器</em> </strong> </a>的NPM包。值得注意的是，这个包不仅仅是为了重命名。css到。scss，但也适用于所有其他文件。</p><p id="3e63" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">要使用这个包，只需简单地安装它，可能是全局安装，如下所示:</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="b988" class="mt mu iq mp b gy mv mw l mx my">npm i -g renamer</span></pre><p id="130c" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，在终端中，导航到项目目录中的<strong class="ky ir"> <em class="mg"> src </em> </strong>文件夹。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi nz"><img src="../Images/1bd5de8381c3109bb22689de993e0dda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzZpXl8Zvg3d--85skCEiQ.png"/></div></div></figure><blockquote class="oa ob oc"><p id="3473" class="kw kx mg ky b kz la jr lb lc ld ju le od lg lh li oe lk ll lm of lo lp lq lr ij bi translated">作为一个建议，在你的项目上运行命令之前，暂存/提交你的工作，或者切换到一个新的分支，用<strong class="ky ir">重命名</strong>工具玩一玩。关于<strong class="ky ir"> <em class="iq">重命名器</em> </strong>的更多细节，点击<a class="ae kv" href="https://www.npmjs.com/package/renamer" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></blockquote><p id="ff67" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，运行以下命令重命名all。带有。scss</p><pre class="kg kh ki kj gt mo mp mq mr aw ms bi"><span id="29d9" class="mt mu iq mp b gy mv mw l mx my">renamer --find css --replace scss *</span></pre><p id="ce98" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的命令用。<strong class="ky ir"> CSS </strong> to。<strong class="ky ir"> SCSS </strong>在当前的工作目录中，也就是<strong class="ky ir"> src，</strong>因为我们已经导航到它，这是因为在命令的远端有通配符/glob，也就是<strong class="ky ir"> "* "。</strong></p><p id="325e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，让我们验证预期的工作是否完成。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi og"><img src="../Images/a5e1000395c9791cc697c6aca04965cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*e4MN3F-iYJitDFB2S5-SAA.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Before Command</figcaption></figure><p id="bb51" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">的确如此。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oh"><img src="../Images/e6aec634f1aec4d8865243730aeaf869.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*-WbQj7punMXsiRi39hrJpQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">After Command</figcaption></figure><p id="99b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，由于我们已经将所有样式文件的扩展名从。css到。在整个应用程序中，我们必须改变所有组件中的样式URL。</p><p id="df5f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一个接一个地做这件事可能会令人沮丧，因为你的应用程序必须有太多的组件。这里，Angular的默认约定和类似VS代码的IDE可以拯救我们。我们知道每个特定于组件的样式文件名都以. component.css结尾(在我们的例子中是component.scss，因为我们更新了扩展名)，例如app <strong class="ky ir"> .component.css </strong>。现在，使用IDE全局搜索所有. component.css条目(在我的例子中是VS代码)。在VS代码中，您可以简单地使用快捷键<strong class="ky ir"> Ctrl + Shift + f </strong>进行全局搜索，并使用<strong class="ky ir"> Ctrl + Shift + h，</strong>用新值替换所有搜索到的条目，如下所示:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oi"><img src="../Images/06078b70e76fb3f04a1013478f5e5ecf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*xPLMQG89Hgyk_HBN_fnFwQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Replace .css <strong class="bd oj">styleUrls </strong>with .scss, globally</figcaption></figure><p id="b7a2" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这些快捷方式可以节省大量的时间和工作。</p><p id="9237" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">现在，只要编译你的应用程序，看看是否有错误。如果没有，那么我们都设置好了从<strong class="ky ir">迁移。css到。scss </strong>。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h2 id="c0c7" class="mt mu iq bd na nb nc dn nd ne nf dp ng lf nh ni nj lj nk nl nm ln nn no np nq bi translated">结论</h2><p id="82ac" class="pw-post-body-paragraph kw kx iq ky b kz nr jr lb lc ns ju le lf nt lh li lj nu ll lm ln nv lp lq lr ij bi translated">有多种方法可以从迁移您的angular应用程序/项目。我最喜欢的是使用<strong class="ky ir"><em class="mg">schematic-scss-migrate</em></strong>包，因为它不需要任何手工操作，可以节省很多时间。您甚至可以在迁移之前使用<strong class="ky ir">模拟运行</strong>选项来验证迁移。</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><p id="4804" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">这就是这篇文章的内容。我希望这有所帮助。感谢阅读！</p></div><div class="ab cl mh mi hu mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ij ik il im in"><h1 id="db44" class="ok mu iq bd na ol om on nd oo op oq ng jw or jx nj jz os ka nm kc ot kd np ou bi translated">资源</h1><ul class=""><li id="54f5" class="ls lt iq ky b kz nr lc ns lf ov lj ow ln ox lr lx ly lz ma bi translated">从…迁移。CSS到。现有角度项目的SCSS样式表</li><li id="0595" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://www.npmjs.com/package/schematics-scss-migrate" rel="noopener ugc nofollow" target="_blank">SCSS迁移入门</a></li><li id="c846" class="ls lt iq ky b kz mb lc mc lf md lj me ln mf lr lx ly lz ma bi translated"><a class="ae kv" href="https://www.npmjs.com/package/renamer" rel="noopener ugc nofollow" target="_blank">重命名器</a></li></ul></div></div>    
</body>
</html>
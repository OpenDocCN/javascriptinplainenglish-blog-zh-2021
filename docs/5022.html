<html>
<head>
<title>CORS: A Short and Sweet Explanation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">CORS:简短而甜蜜的解释</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/cors-a-short-and-sweet-explanation-517443c367a6?source=collection_archive---------10-----------------------#2021-10-11">https://javascript.plainenglish.io/cors-a-short-and-sweet-explanation-517443c367a6?source=collection_archive---------10-----------------------#2021-10-11</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="13fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你是一名网络开发人员，你可能遇到过CORS，如果你遇到过CORS，那很可能不是一次愉快的经历。<br/>在本文中，您可以找到关于什么是CORS及其使用案例的简短解释。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/a99f33dd5b077062c9b2d1c9cea95348.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CIf85hW56lRJhyNh"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo by <a class="ae lb" href="https://unsplash.com/@usmanyousaf?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Usman Yousaf</a> on <a class="ae lb" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5833" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">CORS？那是什么？</h1><p id="d6cc" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">跨源资源共享或CORS是HTTP的一项功能，它使得限制允许哪些源向web服务器发出请求变得容易。</p><p id="ac0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">假设我们有一个托管在<code class="fe mf mg mh mi b">api.example.com</code>的API。我们希望保护我们的API，并确保没有其他应用程序可以访问我们的敏感API并执行可能的恶意(自动)请求。<br/>我们需要指定只有<code class="fe mf mg mh mi b">*.example.com</code>域被允许发出请求。这就是CORS的救星，具体的设置方式取决于你使用的语言和库，但是由于CORS是一种随处使用的技术，你可以在网上的某个地方找到一个详细记录的页面！</p><p id="b620" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦你建立了它，它将是成功或失败的。相信我，你很快就会知道是哪一个。如果你把事情搞砸了，你可以在这篇文章的底部找到一个小建议来帮助你解决问题。</p><h1 id="01c4" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">CORS飞行前</h1><p id="ccb5" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">幕后还有一件很酷的事情，叫做CORS预检，它本质上是检查什么是允许的。想要发出请求的应用程序首先会调用服务器并询问“我可以做什么？”。</p><p id="df67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">您的服务器将返回指定URL允许的每个方法以及可能给出的头。如果这些与需要发生的请求相匹配，我们就可以安全地发送实际的请求。</p><p id="0fc0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"><em class="mj">side note</em></strong><em class="mj">:CORS错误，本质上是服务器在让你的应用知道它不被允许执行任何动作！</em></p><p id="eadc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种预检是一种非常酷的技术，因为它可以让一切都变得更快。它遵循fail-fast原则，如果我们已经知道这个请求会失败，例如，因为HTTP POST是不允许的，那么我们为什么还要费心发送整个主体呢？</p><p id="0d17" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您正在查看服务器的日志，这些预检请求将作为HTTP选项请求弹出！</p><h1 id="f510" class="lc ld iq bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">我怎么搞砸了？</h1><p id="c112" class="pw-post-body-paragraph jn jo iq jp b jq ma js jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk ij bi translated">不要误会我的意思，CORS是一种神奇的技术，一旦你让它工作，它可以帮你省去很多麻烦。不过，把它弄得恰到好处真的很难。CORS错误总是需要在服务器端修复！同样，这取决于你选择的语言，但是在Node.js中，我们要做的是安装和<code class="fe mf mg mh mi b">app.use</code> cors。</p><pre class="km kn ko kp gt mk mi ml mm aw mn bi"><span id="5c8e" class="mo ld iq mi b gy mp mq l mr ms">import cors from "cors";</span><span id="2baa" class="mo ld iq mi b gy mt mq l mr ms">app.use(cors({<br/>  origin: ['http://localhost:8080'],<br/>}));</span></pre><p id="357e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这是你能做的最基本的设置之一。不要担心99%的时间，这是所有你需要的设置。您需要知道的是，在那个名为<code class="fe mf mg mh mi b">origin</code>的数组中指定的所有URL都将被允许发出请求。<br/>如果你得到一个CORS错误，你可能正试图从一个不在这个数组中的URL请求！所有你需要做的就是指定正确和完整的域名，你就可以开始了！:D</p></div><div class="ab cl mu mv hu mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ij ik il im in"><p id="661d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">祝你有创意的一天！💜</p><p id="d92b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mj">更多内容尽在</em><a class="ae lb" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="jp ir"><em class="mj">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
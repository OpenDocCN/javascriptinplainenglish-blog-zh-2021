<html>
<head>
<title>Why You Should Use Storybook for Your Next Project</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么你应该在你的下一个项目中使用故事书</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-use-storybook-for-your-next-project-1a991e6a8e65?source=collection_archive---------7-----------------------#2021-06-02">https://javascript.plainenglish.io/why-you-should-use-storybook-for-your-next-project-1a991e6a8e65?source=collection_archive---------7-----------------------#2021-06-02</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="0e0c" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">孤立地构建UI组件，并用Storybook跟踪它们。</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1cede43e4e6e52646ca86e7fd8810899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nqGZT0SzhCKyMyoR"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Photo by <a class="ae kv" href="https://unsplash.com/@31gatanes?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Gui Avelar</a> on <a class="ae kv" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="5338" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果有一种方法可以在一个地方看到所有的UI组件，那不是很好吗？想象一下能够孤立地构建每个组件，然后针对难以达到的情况测试它们。这正是故事书的用途。</p><h1 id="7b45" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">什么是故事书？</h1><blockquote class="mk ml mm"><p id="9a42" class="kw kx mn ky b kz la jr lb lc ld ju le mo lg lh li mp lk ll lm mq lo lp lq lr ij bi translated">Storybook是一个开源工具，用于构建独立的UI组件和页面。它简化了UI开发、测试和文档。</p></blockquote><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mr ms l"/></div></figure><p id="d06d" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">故事书允许你为你的项目创建UI系统。您可以使用任何您喜欢的JavaScript框架，比如React、Vue、Angular等等。</p><p id="a0b6" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在本文中，我们将了解以下内容:</p><ul class=""><li id="96d1" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">了解为什么我们应该使用故事书</li><li id="5390" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">在React应用程序中设置故事书</li><li id="bd0e" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">创作你的第一个故事</li></ul></div><div class="ab cl nh ni hu nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ij ik il im in"><h1 id="4496" class="ls lt iq bd lu lv no lx ly lz np mb mc jw nq jx me jz nr ka mg kc ns kd mi mj bi translated">我们为什么要用故事书？</h1><h2 id="ae05" class="nt lt iq bd lu nu nv dn ly nw nx dp mc lf ny nz me lj oa ob mg ln oc od mi oe bi translated">孤立地构建组件</h2><p id="9757" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">您可以独立构建UI组件，而无需设置任何开发堆栈。您不需要任何数据或API。这允许您专注于构建原子组件，而没有任何多余的噪音。然后，您可以将这些组件放在您的应用程序中。</p><h2 id="1c86" class="nt lt iq bd lu nu nv dn ly nw nx dp mc lf ny nz me lj oa ob mg ln oc od mi oe bi translated">测试难以达到的用例</h2><p id="2382" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">您可以通过创建故事来轻松模拟难以触及的用例。故事捕获UI组件的呈现状态。您可以直观地测试您的组件以防止错误。</p><p id="da71" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">还有一个庞大的附加组件生态系统来帮助你。目前有8个预装附件，包括以下我认为最有用的:</p><ul class=""><li id="6f6e" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated"><a class="ae kv" href="https://storybook.js.org/addons/@storybook/addon-actions/" rel="noopener ugc nofollow" target="_blank">动作</a> —显示事件处理程序参数收到的数据</li><li id="690e" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><a class="ae kv" href="https://storybook.js.org/addons/@storybook/addon-viewport/" rel="noopener ugc nofollow" target="_blank">视口</a>——调整呈现组件的iframe的尺寸</li><li id="2b79" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated"><a class="ae kv" href="https://storybook.js.org/addons/@storybook/addon-controls/" rel="noopener ugc nofollow" target="_blank">控制</a> —与组件参数交互的GUI</li></ul><p id="ef70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">另一个非预装的有用附加组件是<a class="ae kv" href="https://storybook.js.org/addons/@storybook/addon-a11y/" rel="noopener ugc nofollow" target="_blank">可访问性</a>。可访问性允许您测试组件是否符合web可访问性标准。</p><h2 id="149e" class="nt lt iq bd lu nu nv dn ly nw nx dp mc lf ny nz me lj oa ob mg ln oc od mi oe bi translated">文档用户界面组件</h2><p id="baf4" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">Storybook可以作为所有UI组件的文档来源。</p><p id="9f70" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您正在处理一个大型项目或在一个团队中工作，这尤其有用。一旦一个项目变得太大，记住你构建的所有组件是不可能的。如果您在团队中工作，所有开发人员都可以找到您的应用程序中使用的组件，以防止重复代码。</p><h1 id="58a4" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">在React应用程序中设置故事书</h1><p id="645e" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">接下来，让我们看看如何在一个新的React和TypeScript项目中设置Storybook。最简单的开始方式是使用<code class="fe ok ol om on b">create-react-app</code>。运行以下命令，生成一个支持TypeScript的新React项目。</p><pre class="kg kh ki kj gt oo on op oq aw or bi"><span id="f9ca" class="nt lt iq on b gy os ot l ou ov">npx create-react-app YOUR-APP-NAME --template typescript</span></pre><p id="17e9" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">一旦创建了新的应用程序，在项目的根目录下运行<code class="fe ok ol om on b">npx sb init</code>来添加Storybook。</p><p id="2a22" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">此命令将对您的项目进行以下更改:</p><ul class=""><li id="d7cb" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">安装所需的依赖项。</li><li id="09a5" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">设置必要的脚本来运行和构建故事书。</li><li id="c701" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">添加默认故事书配置。</li><li id="926b" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">添加一些样板故事让你开始。</li></ul><p id="7340" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您检查您的<code class="fe ok ol om on b">package.json</code>文件，您应该看到添加了以下附加脚本。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ow"><img src="../Images/3c123f5e25ebc97aea946367ad370f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmC6lk8dIpltoi5Aceh76g.png"/></div></div></figure><p id="e324" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">接下来，运行<code class="fe ok ol om on b">npm run storybook</code>以开发模式启动Storybook。这将在<a class="ae kv" href="http://localhost:6006" rel="noopener ugc nofollow" target="_blank"> http://localhost:6006 </a>打开一个新的浏览器选项卡。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/92521b31b010d05770f08f42d90db259.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KaHgLoAhIw0ET0xj1V7rcA.png"/></div></div></figure><p id="6d42" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们查看一下我们的<code class="fe ok ol om on b">src</code>文件夹，我们还会看到一个名为<code class="fe ok ol om on b">stories</code>的新文件夹。任何具有<code class="fe ok ol om on b">stories.tsx</code>名称的文件都在Storybook中表示，如上所示。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/57421edb2e70658524cec9e9012659a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*4wXmUVzZ93lXLm7ldlK5bg.png"/></div></figure><h1 id="138a" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">创作你的第一个故事</h1><p id="762f" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">最后，让我们开始使用故事书。</p><p id="117f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ok ol om on b">Button.tsx</code>文件中，我们将看到已经为我们创建了一个基本的按钮组件。它需要以下道具:</p><ul class=""><li id="4887" class="mt mu iq ky b kz la lc ld lf mv lj mw ln mx lr my mz na nb bi translated">主要的</li><li id="f36e" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">背景颜色</li><li id="a45c" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">大小</li><li id="5070" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">标签</li><li id="a604" class="mt mu iq ky b kz nc lc nd lf ne lj nf ln ng lr my mz na nb bi translated">onClick</li></ul><p id="2284" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在<code class="fe ok ol om on b">button.css</code>文件中，我们可以看到这些道具将如何相应地设计我们的按钮。例如，如果我们有一个带有<code class="fe ok ol om on b">primary</code>道具的按钮，那么它的颜色为<code class="fe ok ol om on b">white</code>，背景色为<code class="fe ok ol om on b">#1ea7fd</code>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/68d6c4522df641e93e1d4aef70679c7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*KA-YssbqN9jsnGogwajSwA.png"/></div></figure><p id="be1e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，在<code class="fe ok ol om on b">Button.stories.tsx</code>文件中，我们将看到将按钮组件导出到Storybook并添加故事的代码。下面的代码配置按钮组件的故事。</p><pre class="kg kh ki kj gt oo on op oq aw or bi"><span id="7e79" class="nt lt iq on b gy os ot l ou ov">export default {<br/>  title: "Example/Button",<br/>  component: Button,<br/>  argTypes: {<br/>    backgroundColor: { control: "color" },<br/>  },<br/>} as Meta;</span></pre><p id="bf5e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">然后，我们为要传递给按钮组件的参数创建一个模板。</p><pre class="kg kh ki kj gt oo on op oq aw or bi"><span id="5f16" class="nt lt iq on b gy os ot l ou ov">const Template: Story&lt;ButtonProps&gt; = (args) =&gt; &lt;Button {...args} /&gt;;</span></pre><p id="3007" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最后，我们可以创造故事。故事捕获UI组件的呈现状态。例如，下面的代码创建了一个名为Primary的按钮组件的故事。我们可以看到带有属性<code class="fe ok ol om on b">primary: true</code>和<code class="fe ok ol om on b">label: “Button”</code>的按钮组件的外观。</p><pre class="kg kh ki kj gt oo on op oq aw or bi"><span id="f6fa" class="nt lt iq on b gy os ot l ou ov">export const Primary = Template.bind({});<br/>Primary.args = {<br/>  primary: true,<br/>  label: "Button",<br/>};</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/b3578d0fe9dfab0f8b153f62d6ebb4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/format:webp/1*05JnqCj37ee6WPe_qeZgpg.png"/></div></figure><p id="e181" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果我们将标签文本更改为其他内容，我们可以看到Storybook中反映的更改。</p><pre class="kg kh ki kj gt oo on op oq aw or bi"><span id="4576" class="nt lt iq on b gy os ot l ou ov">export const Primary = Template.bind({});<br/>Primary.args = {<br/>  primary: true,<br/>  label: "Click me!",<br/>};</span></pre><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/56cb9175d4b68f73cdbb6157cb07fd67.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*1U6jyQGlNTerKKP5ciQQQQ.png"/></div></figure><h1 id="5478" class="ls lt iq bd lu lv lw lx ly lz ma mb mc jw md jx me jz mf ka mg kc mh kd mi mj bi translated">结论</h1><p id="feb5" class="pw-post-body-paragraph kw kx iq ky b kz of jr lb lc og ju le lf oh lh li lj oi ll lm ln oj lp lq lr ij bi translated">感谢阅读！我希望这篇文章有助于您理解Storybook是什么以及如何在React应用程序中使用它。如果你想看看故事书的例子，可以点击这里查看官方的故事书图书馆。</p><p id="dc3b" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我最近一直在钻研故事书，所以请继续关注即将到来的更多文章！</p><p id="6df7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">如果您对了解测试感兴趣，请查看下面的文章，开始使用Jest和React测试库。</p><div class="pc pd gp gr pe pf"><a rel="noopener  ugc nofollow" target="_blank" href="/introduction-to-testing-in-react-with-jest-and-react-testing-library-c1c32bb11739"><div class="pg ab fo"><div class="ph ab pi cl cj pj"><h2 class="bd ir gy z fp pk fr fs pl fu fw ip bi translated">React with Jest和React测试库中的测试介绍</h2><div class="pm l"><h3 class="bd b gy z fp pk fr fs pl fu fw dk translated">create-react-app中的App.test.js和setupTests.js文件是用来做什么的？</h3></div><div class="pn l"><p class="bd b dl z fp pk fr fs pl fu fw dk translated">javascript.plainenglish.io</p></div></div><div class="po l"><div class="pp l pq pr ps po pt kp pf"/></div></div></a></div><p id="f017" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="mn">更多内容尽在</em><a class="ae kv" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank">T5】plain English . ioT7】</a></p></div></div>    
</body>
</html>
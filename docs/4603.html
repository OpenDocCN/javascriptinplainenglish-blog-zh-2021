<html>
<head>
<title>Building a Todo List Database With Supabase, the Easy Firebase Alternative</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用简单的Firebase替代品Supabase构建待办事项数据库</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/supabase-database-96e047b13bd1?source=collection_archive---------3-----------------------#2021-09-14">https://javascript.plainenglish.io/supabase-database-96e047b13bd1?source=collection_archive---------3-----------------------#2021-09-14</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="027e" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">对于浏览器或Node.js</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/8b6674925a5b02046fd00d0006f0c14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xOqCfciF90c8nH0HhMpapQ.png"/></div></div></figure><p id="e457" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">像Firebase这样的开发平台越来越受欢迎。通过提供无服务器托管、可扩展的数据库和其他功能(如身份验证),开发应用程序变得更加容易。虽然Firebase在市场上占有很大的份额，但替代产品也在不断增加。其中一个:Supabase(不，我没打错)。</p><p id="db0f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">该平台声称是Firebase的替代品。实际上，到目前为止我很喜欢。虽然它提供的功能不如Firebase多，但它已经提供了一些重要的功能:存储、认证和数据库(这是我最喜欢的)。</p><p id="0c82" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将使用Node.js构建一个小型待办事项列表数据库示例。重点不是创建一个完整的应用程序，而是构建基本的功能—获取数据、添加数据和更新数据。因为老实说，这就是你在这里的原因。</p><p id="92ae" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当然，这个数据库是由Supabase托管的，并且在幕后使用Postgres。您也可以为浏览器构建此示例；Supabase支持这两种选项。此外，你不需要创建一个付费账户。让我们看看Supabase能做什么。</p><h2 id="fe1a" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">Supabase入门</h2><p id="f89d" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">第一步是创建一个账户——我在<a class="ae ml" href="https://supabase.io/" rel="noopener ugc nofollow" target="_blank"> supabase.io </a>上连接了我的GitHub账户。然后，您可以创建一个新项目。应该要求您输入名称、数据库密码和要选择的地区。一旦您选择了这些数据，您将被带到包含您的API密钥和项目URL的页面。</p><p id="bb9e" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">对于我们的项目，我们只需要公共API键(向您显示的第一个可见键)和页面末尾“Config”部分中的URL。URL应该类似于<code class="fe mm mn mo mp b">xyz.supabase.co</code>。</p><p id="41ac" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">当你把两个值都保存在某个地方，我们就可以进入下一个点。初始化完成后，您可以选择页面上可见的“表格编辑器”。</p><p id="fb38" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">或者，您可以通过左侧的图标导航到该位置，下图中突出显示了该图标。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mq"><img src="../Images/cb100d647ec036323242fe7a44d51ce4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FpwlmHOM-yu2K4WUIjdEGw.png"/></div></div></figure><p id="3c2c" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">我们将在那里摆桌子。</p><p id="a516" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">创建表格非常简单。如果您想知道默认字段在哪里，我已经删除了它们。我添加了两列，“done”，这是一个布尔值，和“task_name”，这是一个数据类型“text”。此外,“done”列包含一个默认值。就像这样复制设置你的表:</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi mr"><img src="../Images/735cbe552d59ac8c817ffdd25c2d6429.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISS34tp40L13WVqZcddDgA.png"/></div></div></figure><p id="6ed1" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">一旦表被初始化，我们可以手动添加条目。默认情况下，在创建表之后，您应该被发送到表编辑器。现在，我插入了一些行(通过点击“插入行”):</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ms"><img src="../Images/6275a2e10246f17f0d00d4e609bb3f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzGDVQV7KbocpPVwQtW1yQ.png"/></div></div></figure><p id="938f" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">现在，让我们开始用代码接触这个数据库。首先，确保在Node.js或浏览器中安装必要的包:</p><pre class="kg kh ki kj gt mt mp mu mv aw mw bi"><span id="8c5b" class="ln lo iq mp b gy mx my l mz na">npm install @supabase/supabase-js</span></pre><p id="e41a" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">正如我在开始时告诉你的，你需要你的API密匙和你的项目URL。</p><pre class="kg kh ki kj gt mt mp mu mv aw mw bi"><span id="0ceb" class="ln lo iq mp b gy mx my l mz na">const { createClient } = require('@supabase/supabase-js')</span><span id="96a2" class="ln lo iq mp b gy nb my l mz na">const supabase = createClient(<br/>  '&lt;Your-Project-URL&gt;',<br/>  '&lt;Your-API-Key&gt;'<br/>)</span></pre><p id="835d" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为我在Node.js中，所以我使用require-语法来导入包。该包还支持在浏览器中使用——当使用bundler时，将require-语法转换为import-语法。</p><h2 id="e7eb" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">从数据库获取数据</h2><p id="23f4" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">一旦Supabase客户端运行并且实例保存在<code class="fe mm mn mo mp b">supabase</code>变量中，我们就可以开始了。因为我们的表被命名为“todos ”,所以让我们从获取它的所有条目开始:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="d758" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">结果，我们在控制台中得到一个对象数组。这个数组包含了我们所有的待办事项，这在处理待办事项列表时是不必要的。实际上，我们只对todos感兴趣，这些还没有完成。因为默认情况下，我们所有的todo都没有完成(在DB中“done”是假的)，所以让我们将一个todo设置为done。这就要求我们，更新一个字段。</p><h2 id="882d" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">更新数据库中的字段</h2><p id="5d5f" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">我再次为此创建了一个函数。它返回一个承诺，允许我们访问包含更新值的字段。如你所见，Supabase允许我们将SQL代码组织成函数调用。选择表后，我们运行UPDATE语句，默认情况下，该语句针对所有表行。然后，我们运行MATCH语句，将task_name为“Create bugs”的条目作为目标。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="77c6" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated"><strong class="kt ir">重要提示:</strong>如果您的数据库中没有任何匹配项，即使您提供了实际的task_name，也可能是因为空格。不知何故，当在Supabase编辑器中将数据填充到行中时，一些字符串在末尾插入了空格。这可能就是问题所在。</p><h2 id="d3be" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">基于标准选择数据</h2><p id="d109" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">现在，我们更新了一个待办事项。因为我们只关心那些还没有完成的任务，所以我们来过滤一下。通过SELECT，我们指定我们想要的列——我们只关心任务的名称。然后，我们用EQUALS语句将所有带有“done”的条目设为“false”。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><h2 id="d553" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated">插入新的待办事项</h2><p id="fbfb" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated">同样，异步函数——控制台日志为我们提供了控制台中插入的字段。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="nc nd l"/></div></figure><p id="bc03" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">因为表中唯一的非默认列是“done ”,但是有一个默认值，所以我们只定义任务名称的值。</p><p id="7cd3" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">这就是与Supabase合作有多容易。</p><p id="26d5" class="pw-post-body-paragraph kr ks iq kt b ku kv jr kw kx ky ju kz la lb lc ld le lf lg lh li lj lk ll lm ij bi translated">感谢您的阅读！<br/>您是否喜欢我只展示重要功能而不是构建一个完整的应用程序的选择？我希望听到您的反馈！</p><h2 id="1fae" class="ln lo iq bd lp lq lr dn ls lt lu dp lv la lw lx ly le lz ma mb li mc md me mf bi translated"><a class="ae ml" href="https://twitter.com/louispetrik" rel="noopener ugc nofollow" target="_blank">在Twitter上与我联系，了解最新消息</a></h2><p id="0e96" class="pw-post-body-paragraph kr ks iq kt b ku mg jr kw kx mh ju kz la mi lc ld le mj lg lh li mk lk ll lm ij bi translated"><em class="ne">更多内容请看</em><a class="ae ml" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="kt ir"><em class="ne">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
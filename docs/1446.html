<html>
<head>
<title>How to Avoid Object Mutation in JavaScript (Removing Properties)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何避免JavaScript中的对象突变(移除属性)</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/how-to-avoid-object-mutation-in-javascript-removing-properties-df32a2debd3d?source=collection_archive---------12-----------------------#2021-03-27">https://javascript.plainenglish.io/how-to-avoid-object-mutation-in-javascript-removing-properties-df32a2debd3d?source=collection_archive---------12-----------------------#2021-03-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="4f84" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">展示如何在删除属性时避免JavaScript中对象变异的快速指南&amp;免费的乔恩·斯图尔特Gifs再一次…</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/bf839fb74720f34fafc7b42b37e7bd5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LlRHIYKft1YjN-Wr"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@gary_at_unsplash?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Gary Chan</a> on <a class="ae ks" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="826c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">上周，我深入探讨了<a class="ae ks" rel="noopener ugc nofollow" target="_blank" href="/javascript-how-to-avoid-object-mutation-7cd733913a9f"> JavaScript对象以及如何避免对它们进行变异</a>的话题。实际上，我从社区中得到了一些很好的回应，所以我想跟进其中的一些回应。首先，谢谢大家！我真的很感激你们这么多人愿意回应和分享你们的想法。第二，上周我只涉及了这个主题的一部分，因为我忽略了关于对象变异的某个方面…</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><h2 id="0568" class="lr ls in bd lt lu lv dn lw lx ly dp lz lc ma mb mc lg md me mf lk mg mh mi mj bi translated">移除属性时如何避免对象突变</h2><p id="dbc8" class="pw-post-body-paragraph kt ku in kv b kw mk jo ky kz ml jr lb lc mm le lf lg mn li lj lk mo lm ln lo ig bi translated">我让你失望了。我很抱歉。我只向您展示了如何在添加属性时避免对象突变。但是如果我们想删除属性呢？这实际上比你想象的要容易，而且你已经在不知不觉中学会了如何去做！</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="mp lq l"/></div></figure><p id="e81b" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">好吧。让我们从上周的相同设置开始。</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="1abd" class="lr ls in mr b gy mv mw l mx my">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>}</span><span id="43d0" class="lr ls in mr b gy mz mw l mx my">let avenger = character;</span><span id="4586" class="lr ls in mr b gy mz mw l mx my">character.lastName = 'Marvel';</span></pre><p id="33de" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">使用上面的代码，我们改变了我们的原始对象字符，因为两个变量，<code class="fe na nb nc mr b">character</code>和<code class="fe na nb nc mr b">avenger,</code>引用了同一个对象。那么，我们如何创建一个由avenger变量引用的新对象，而不是删除属性呢？</p><h2 id="0199" class="lr ls in bd lt lu lv dn lw lx ly dp lz lc ma mb mc lg md me mf lk mg mh mi mj bi translated">1.<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax#spread_in_object_literals" rel="noopener ugc nofollow" target="_blank">展开语法</a>与<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment#object_destructuring" rel="noopener ugc nofollow" target="_blank">对象析构</a></h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nd lq l"/></div></figure><p id="faf3" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">没错，朋友们！我们拿出我们那碗语法上含糖的好东西，开始把这些东西展开，但是多加了一点糖。这与我们之前所做的并没有太大的不同，只是现在我们将通过结合spread操作符和object destructuring来删除我们不想包含在新对象中的属性。</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="5c31" class="lr ls in mr b gy mv mw l mx my">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="f603" class="lr ls in mr b gy mz mw l mx my">let { lastName, ...avenger } = character;</span><span id="41b8" class="lr ls in mr b gy mz mw l mx my">avenger.lastName = 'Marvel';</span></pre><p id="13d1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">就是这样。我们储存在角色中的物品完好无损，我们继续愉快地完成储存在复仇者中的物品。</p><p id="1fd0" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这种使用spread语法的方式与我们在上一篇博客中使用的方式之间的主要区别是，在我们设置<code class="fe na nb nc mr b">avenger.lastName = ‘Marvel’;</code>的属性之前，我们的新对象是什么样子的。请参见下面的差异:</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="1e0d" class="lr ls in mr b gy mv mw l mx my">let character = {<br/>    firstName: 'Captain',<br/>    lastName: 'America'<br/>};</span><span id="91d0" class="lr ls in mr b gy mz mw l mx my">let avenger = { ...character };<br/>let { lastName, ...avenger2 } = character;</span><span id="3b6c" class="lr ls in mr b gy mz mw l mx my">console.log(avenger);<br/>console.log(avenger2);</span><span id="9ece" class="lr ls in mr b gy mz mw l mx my">// { firstName: 'Captain', lastName: 'America' }</span><span id="c71c" class="lr ls in mr b gy mz mw l mx my">// { firstName: 'Captain' }</span></pre><p id="cb69" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">在我之前的博客中，我们使用spread语法<code class="fe na nb nc mr b">let avenger = { …character };</code>直接复制了整个对象。通过对象析构，我们移除了<code class="fe na nb nc mr b">lastName</code>属性，并复制了在变量<code class="fe na nb nc mr b">character</code>中引用的对象的剩余部分，将其存储在变量<code class="fe na nb nc mr b">avenger2</code>中。我不确定其中一种一定比另一种更好，但是两种方式都完成了我们想要做的事情。</p><h2 id="14a3" class="lr ls in bd lt lu lv dn lw lx ly dp lz lc ma mb mc lg md me mf lk mg mh mi mj bi translated">2.没有2！</h2><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="ne lq l"/></div></figure><p id="d6c4" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">技术上来说，没有2有点误导。在这个博客系列中，我希望在没有库帮助的情况下，严格使用普通的JavaScript。然而，当我研究是否有其他我不知道的方法时，我偶然发现了几个 <a class="ae ks" href="https://stackoverflow.com/questions/33053310/remove-value-from-object-without-mutation" rel="noopener ugc nofollow" target="_blank">引用</a>到<a class="ae ks" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> Lodash的库</a>。您可以同时使用<code class="fe na nb nc mr b"><a class="ae ks" href="https://lodash.com/docs/4.17.15#omit" rel="noopener ugc nofollow" target="_blank">_.omit</a></code> &amp; <code class="fe na nb nc mr b"><a class="ae ks" href="https://lodash.com/docs/4.17.15#pick" rel="noopener ugc nofollow" target="_blank">_.pick</a></code>两种方法来达到想要的效果。我不会在这个博客中涉及Lodash，但我想给你一个参考。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nf lq l"/></div></figure></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><h2 id="6b3f" class="lr ls in bd lt lu lv dn lw lx ly dp lz lc ma mb mc lg md me mf lk mg mh mi mj bi translated">结论</h2><p id="2724" class="pw-post-body-paragraph kt ku in kv b kw mk jo ky kz ml jr lb lc mm le lf lg mn li lj lk mo lm ln lo ig bi translated">就是这样，朋友们！再次抱歉，我没有在上一篇博客中提到这个。我希望这对你有所帮助，我鼓励你练习所有这些不同的方法来巩固这些JS技能。下次见！</p><p id="ad71" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">快乐编码🤓</p></div></div>    
</body>
</html>
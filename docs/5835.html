<html>
<head>
<title>Add an In-Browser Code Preview to Your React Application with Sandpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Sandpack为React应用程序添加浏览器内代码预览</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/add-an-in-browser-code-preview-to-your-react-application-with-sandpack-c4e3205b4581?source=collection_archive---------12-----------------------#2021-12-13">https://javascript.plainenglish.io/add-an-in-browser-code-preview-to-your-react-application-with-sandpack-c4e3205b4581?source=collection_archive---------12-----------------------#2021-12-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/68861c6963839f6c48d2e0328c8ce8ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ledsjNFa0zEwQDNj9Cldxw.png"/></div></div></figure><p id="94df" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Sandpack是一个运行在浏览器上的实时编码环境。它是由<a class="ae kt" href="https://codesandbox.io/" rel="noopener ugc nofollow" target="_blank"> CodeSandbox </a>背后的团队制作的。这里的主要目的是为用户提供交互的例子。我看到它在博客文章和文档中被广泛使用(事实上，正在进行的工作，<a class="ae kt" href="https://beta.reactjs.org/learn" rel="noopener ugc nofollow" target="_blank"> new React Docs </a>正在使用Sandpack)。在本文中，我们将了解如何将Sandpack添加到React应用程序中，然后在Next.js应用程序中将其与<a class="ae kt" href="https://github.com/hashicorp/next-mdx-remote" rel="noopener ugc nofollow" target="_blank"> Next MDX Remote </a>集成。</p><h1 id="4649" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">向我们的项目添加沙包</h1><p id="5034" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我们将把沙包添加到react应用程序(用<a class="ae kt" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank"> create react app </a>制作)中，尽管这个过程对于Next.js或Gatsby应该是完全相同的。</p><p id="436f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">创建一个starter react项目并导航到其中</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="4f71" class="mg kv in mc b gy mh mi l mj mk">npx create-react-app sandpack-demo<br/>cd sandpack-demo</span></pre><blockquote class="ml mm mn"><p id="483d" class="jv jw mo jx b jy jz ka kb kc kd ke kf mp kh ki kj mq kl km kn mr kp kq kr ks ig bi translated"><em class="in">注意:如果您喜欢，请随意使用纱线卷装管理器。</em></p></blockquote><p id="119f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们安装沙包</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="a122" class="mg kv in mc b gy mh mi l mj mk">npm install @codesandbox/sandpack-react</span></pre><p id="1232" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是依赖关系，现在让我们继续向应用程序添加Sandpack。</p><p id="5727" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">继续删除<code class="fe ms mt mu mc b">App.css</code>、<code class="fe ms mt mu mc b">App.test.js</code>、<code class="fe ms mt mu mc b">setupTests.js</code>和<code class="fe ms mt mu mc b">logo.svg</code>。同时删除<code class="fe ms mt mu mc b">App.js</code>中的所有样板代码。应该是这样的-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="7262" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们在<code class="fe ms mt mu mc b">App.js</code>导入填砂</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="bb7e" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们还导入了一个包含编辑器和预览样式的CSS文件。</p><p id="1a9b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们还应该加入沙袋的成分-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="f731" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">就是这样！！！现在让我们通过运行<code class="fe ms mt mu mc b">npm start</code>来启动开发服务器。导航到<a class="ae kt" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>，这就是你应该看到的</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi mx"><img src="../Images/d6f126274dcdec061e028d906f4bc422.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_RvHFoDiyoX5SKw-"/></div></div></figure><h1 id="7df4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">自定义模板</h1><p id="9964" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">Sandpack使用的默认模板是vanilla js，但我们也可以使用其他模板，如react、vue、angular等。让我们看看react模板的运行情况。只需添加<code class="fe ms mt mu mc b">template</code>属性并将值指定为<code class="fe ms mt mu mc b">react</code> -</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="8c78" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请随意浏览<a class="ae kt" href="https://sandpack.codesandbox.io/docs/getting-started/custom-content" rel="noopener ugc nofollow" target="_blank"> Sandpack自定义内容文档</a>，获取更多模板和如何添加自定义代码的信息。</p><h1 id="d256" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">自定义主题</h1><p id="a87b" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我们也可以自定义主题。让我们看看添加一个预先构建的主题-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="9316" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是编辑器应该有的样子-</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/02cff6068e217345a499edc6fac4514c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qU0m_rQHrpErBRzX"/></div></div></figure><p id="bce7" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请随意浏览<a class="ae kt" href="https://sandpack.codesandbox.io/docs/getting-started/custom-ui" rel="noopener ugc nofollow" target="_blank"> Sandpack自定义UI文档</a>以获得更多主题和关于构建主题的信息。</p><p id="e899" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后，这就是我们的<code class="fe ms mt mu mc b">App.js</code>的样子-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="3005" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，这只是沙包的开始，但现在让我们看看它在一个更真实的世界中的应用。请随意浏览<a class="ae kt" href="https://sandpack.codesandbox.io/docs/" rel="noopener ugc nofollow" target="_blank">填砂文档</a>以获得更详细的指南和API参考。</p><h1 id="4213" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">对下一个MDX遥控器使用沙包</h1><p id="55df" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated"><a class="ae kt" href="https://github.com/hashicorp/next-mdx-remote" rel="noopener ugc nofollow" target="_blank"> Next MDX Remote </a>是一个解析MDX内容(markdown但也支持JSX)的库，并通过Next.js中的<code class="fe ms mt mu mc b">getStaticProps</code>或<code class="fe ms mt mu mc b">getServersideProps</code>帮助加载它们。它主要用于文档和博客文章。今天，我们将把Next MDX Remote添加到Next.js应用程序中，并通过用Sandpack替换它来自定义代码组件。首先，让我们创建一个新的Next.js应用程序并导航到其中</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="56fa" class="mg kv in mc b gy mh mi l mj mk">npx create-next-app sandpack-next-mdx-remote<br/>cd sandpack-next-mdx-remote</span></pre><p id="8f09" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们删除<code class="fe ms mt mu mc b">styles</code>目录下的<code class="fe ms mt mu mc b">Home.module.css</code>，并删除<code class="fe ms mt mu mc b">pages</code>目录下<code class="fe ms mt mu mc b">index.js</code>中的样板代码。它应该是这样的-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><h1 id="80b6" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">添加下一个MDX遥控器</h1><p id="8a89" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">下一步是添加和设置下一个MDX Remote，让我们开始吧</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="8b93" class="mg kv in mc b gy mh mi l mj mk">npm install next-mdx-remote</span></pre><p id="d752" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们转到<code class="fe ms mt mu mc b">index.js</code>并添加以下代码-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="750a" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请注意，我只是用代码块写下一些基本的降价。通常，这种降价来自外部文件，并与frontmatter配对，但这不是我在本文中要讨论的内容。</p><p id="df54" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们通过运行<code class="fe ms mt mu mc b">npm run dev</code>来启动开发服务器。导航到<a class="ae kt" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>后，我们的页面应该是这样的</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi my"><img src="../Images/3654de3a46dfabf8ad77269a2eaced32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZSCY2WwpC1l2pKik"/></div></div></figure><p id="0c28" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">注意，现在正在呈现一个简单的HTML <code class="fe ms mt mu mc b">code</code>元素</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/96f56bf071442d1a049ce3b7378ba9a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/0*IaVZQovoMbHjf8SZ"/></div></figure><p id="e9fa" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，我可以使用<a class="ae kt" href="https://www.npmjs.com/package/remark-prism" rel="noopener ugc nofollow" target="_blank"> remark prism </a>来添加语法高亮显示，但是因为我们无论如何都要使用Sandpack，所以让我们转而使用它。</p><h1 id="7815" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">将沙包添加到下一个MDX遥控器</h1><p id="0814" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">首先，让我们安装沙包包-</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="78e2" class="mg kv in mc b gy mh mi l mj mk">npm install @codesandbox/sandpack-react</span></pre><p id="b85f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在让我们创建一个名为<code class="fe ms mt mu mc b">components</code>的目录，并在其中添加一个名为<code class="fe ms mt mu mc b">CustomMDXCode.js</code>的文件。将以下代码添加到该文件中-</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="613c" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">在这里，我们正在导入沙包，制作一个自定义组件，在一些道具中传递。这些属性将包含文件的文件名、要使用的模板，当然还有代码。请注意，我们通过字符串插值在文件名的开头添加了一个<code class="fe ms mt mu mc b">/</code>，这是Sandpack所要求的。</p><p id="822f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，让我们回到我们的<code class="fe ms mt mu mc b">index.js</code>文件，做一些修改来利用新组件的使用</p><figure class="lx ly lz ma gt jo"><div class="bz fp l di"><div class="mv mw l"/></div></figure><p id="274d" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这里，我们将为code属性添加一个定制组件(所有mdx组件的引用—<a class="ae kt" href="https://mdxjs.com/table-of-components/" rel="noopener ugc nofollow" target="_blank">https://mdxjs.com/table-of-components/</a>)，它就是我们之前创建的Sandpack组件。我们还将markdown源更改为<code class="fe ms mt mu mc b">javascript</code>，添加了一个<code class="fe ms mt mu mc b">template</code>属性并将其指向<code class="fe ms mt mu mc b">react</code>，添加了一个<code class="fe ms mt mu mc b">filename</code>属性并将文件命名为<code class="fe ms mt mu mc b">App.js</code>，并编写了一个简单的函数来显示代码部分的一些文本。</p><p id="9944" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这就是我们的页面现在的样子-</p><figure class="lx ly lz ma gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi na"><img src="../Images/616233b34142feb6677555e5989b3907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NPgkt83jjpia1aLN"/></div></div></figure><h1 id="3dfc" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">结论</h1><p id="2d4e" class="pw-post-body-paragraph jv jw in jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">这就是本文的全部内容。我希望你喜欢它，并学会了如何添加沙包到你的反应应用程序。如果你有任何问题，请随意评论这篇文章或通过<a class="ae kt" href="https://twitter.com/AnishDe12020" rel="noopener ugc nofollow" target="_blank"> Twitter </a>联系我。</p><p id="e0f6" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">沙包—<a class="ae kt" href="https://sandpack.codesandbox.io/" rel="noopener ugc nofollow" target="_blank">https://sandpack.codesandbox.io/</a></p><p id="0716" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Sanpack文档—<a class="ae kt" href="https://sandpack.codesandbox.io/docs/" rel="noopener ugc nofollow" target="_blank">https://sandpack.codesandbox.io/docs/</a></p><p id="c23f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">沙包GitHub—<a class="ae kt" href="https://github.com/codesandbox/sandpack" rel="noopener ugc nofollow" target="_blank">https://github.com/codesandbox/sandpack</a></p><p id="3aeb" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">下一个MDX遥控器—<a class="ae kt" href="https://github.com/hashicorp/next-mdx-remote" rel="noopener ugc nofollow" target="_blank">https://github.com/hashicorp/next-mdx-remote</a></p><p id="8026" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">所有MDX组件—【https://mdxjs.com/table-of-components/ T21】</p></div><div class="ab cl nb nc hr nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ig ih ii ij ik"><p id="f77b" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mo">原载于</em><a class="ae kt" href="https://blog.anishde.dev/adding-an-in-browser-code-preview-to-your-react-application-with-sandpack" rel="noopener ugc nofollow" target="_blank"><em class="mo">https://blog . anishde . dev</em></a><em class="mo">。</em></p><p id="c28f" class="pw-post-body-paragraph jv jw in jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><em class="mo">更多内容看</em> <a class="ae kt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx io"> <em class="mo">说白了. io </em> </strong> </a> <strong class="jx io"> <em class="mo">。</em> </strong> <em class="mo">报名参加我们的</em><strong class="jx io"><em class="mo"/></strong><a class="ae kt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jx io"><em class="mo">免费每周简讯这里</em> </strong> </a> <strong class="jx io"> <em class="mo">。</em> </strong></p></div></div>    
</body>
</html>
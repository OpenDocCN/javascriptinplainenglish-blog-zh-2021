<html>
<head>
<title>A Gamified Approach to Learn Functional Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">学习函数式编程的游戏化方法</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/lets-play-functional-programming-7da92d6f97d9?source=collection_archive---------2-----------------------#2021-12-20">https://javascript.plainenglish.io/lets-play-functional-programming-7da92d6f97d9?source=collection_archive---------2-----------------------#2021-12-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="51d9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">阅读时不睡着的JavaScript</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/ee6d82ffb01deb48da68a3e94b75b24b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-0hJ8MV0PLYCtly_RiACug.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure><h1 id="4874" class="ku kv in bd kw kx ky kz la lb lc ld le jt lf ju lg jw lh jx li jz lj ka lk ll bi translated"><strong class="ak">简介</strong></h1><p id="2cdc" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">你的JavaScript世界正处于魔法战争中。还有，你的代码库已经被邪恶力量占有了。你可能是一个疯狂的编码术士，但无论如何，你开始失去对代码越来越多的控制。情况似乎没有希望了。</p><p id="e0b0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但还是有希望的。书呆子数学家处女们发现了一个古代法宝的建造计划。一件有能力扭转局势的武器。这个计划只有一行字，还附有一个简短的注释。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/00590763467ccffc22ebb1c733804e5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eKZoH3VL_LEa227UPrFb5w.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a></figcaption></figure><p id="4e43" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">建立小宝宝功能。他们每个人都有一个单一的责任。它们每个都需要接收一个输入并返回一个输出。像乐高积木一样把它们放在一起，这样一个函数的输出就变成了下一个函数的输入。这会拯救你。这才是你需要全力以赴的。这是函数式编程的精髓。这叫作文。</em></p><p id="bd6f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">但是要注意:如果你的婴儿功能产生了副作用，例如，通过突变状态。你的武器将会爆炸，你的应用程序将会陷入永久的毁灭。</em></p><p id="68ba" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你通读了几遍笔记和施工计划，然后问自己:<em class="mo">哈哈……这应该一点都不难</em>。你拿起你的魔杖…嗯…我是说你的机械LED键盘，启动你的IDE，你的旅程开始了… <strong class="lo io">祝你好运，勇敢的巫师。</strong></p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="f12b" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">关于这个游戏</strong></h1><p id="5d70" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><strong class="lo io">我是谁？克里斯托夫，地狱不:我绝不是一个9000级超级赛亚金专业水平的程序员。我只是一个随机的网络开发人员，扩展他的技能和知识，有一天成为一名真正的软件工程师。所以请对我温柔点。</strong></p><p id="df7c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">为什么写这篇文章？在过去的几周里，我尽可能多地学习了JavaScript中的函数式编程。总结我所学的函数式编程将有助于巩固我对这个主题的理解。另外，我很确定初级到普通开发人员会从不太专业的角度受益。函数式编程领域的专家倾向于用数学和书呆子气来解释。我会在这个故事里反其道而行之，不让你我的脑子爆炸。哦，还有…我已经和老板说好了，每月发表一篇中型文章。所以，嘿老板:在这里。</strong></p><p id="aed2" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">这个故事是给谁看的？你可能会对这个故事感兴趣</strong></p><ul class=""><li id="c558" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">如果你对函数式编程或编程完全陌生，需要一个心智模型或；</li><li id="860c" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">如果你想从不同的角度来看它的一些原则或；</li><li id="ced6" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">如果你有一个初级开发人员，你想向他转发一个关于该主题的心智模型；</li><li id="f53e" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">如果你喜欢怪异的幻想。</li></ul></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="bb97" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">第一阶段:婴儿功能废土</strong></h1><p id="c2c2" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">在您的IDE打开后，您立即受到这个意大利面条恶魔函数的攻击:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/c09040c75c33240c8d5dcbdaf539e855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pjdjpRWj6JzQ6C4pXc_s_w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">a demon function</figcaption></figure><p id="21d0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你试着闭上眼睛继续滚动，但是已经太晚了。没有任何警告，它开始在其怪异的数据流中吸你。您已经看到了<code class="fe nq nr ns nt b">demonAttacks()</code>，并且立即可以感觉到它是如何将您拖入嵌套函数调用的兔子洞的。你检查一下<code class="fe nq nr ns nt b">checkInventory</code>里面发生了什么。然后你跟随<code class="fe nq nr ns nt b">playerEatsBananas()</code>，在你意识到之前，你已经失去了你的第一次生命。你一边挨饿，一边随着数据流越走越深。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/4f35e093fb9269ddf82323b92a7c86e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6Py9cdlJN2d1y5z9HHSFZg.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure><p id="02af" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">不，不，不…</em>好的保持冷静，回到上一个保存点。现在，专心完成你的任务。为了建造你的超级武器，你首先需要构建小的婴儿功能，这些功能只为一个超级简单的任务而设计。越简单越好。</p><p id="18e9" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">因此，您只需浏览一下我们的兔子洞代码的前几行，然后将这些内容重写为具有单一职责的新的小函数。你也根据他们的所作所为给他们取一个名字。现在先忘记函数调用。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/36d7873061ef51820e669b3e7fd6b699.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dAxa9YJljta0I7kGOii_Ig.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">little functions with single responsiblies</figcaption></figure><p id="de56" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是这里还是有问题。你可以从乳头感觉到。啊…<strong class="lo io">退货报表！哦，不，他们都不见了。此外，这仍然是一个奇怪的数据流。好，好，好..你做得很及时，在它再次变得危险之前。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/1b31d47f23186aa87e36d9213765d5f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H8EVipLRaQhcfADcCGbjTg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">added return keyword</figcaption></figure><p id="fe43" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">Boooom！！！你的第二人生已经没了。不好意思老弟，你还在通过变异全局状态<code class="fe nq nr ns nt b">playerHealth</code>产生副作用，必然导致最后的湮灭。<em class="mo">该死的你，来自地狱的愚蠢状态突变。哦，顺便说一句。您还缺少每个函数的输入参数。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/4f35e093fb9269ddf82323b92a7c86e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6Py9cdlJN2d1y5z9HHSFZg.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure><p id="d762" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好的，如果你现在深呼吸，那是最好的；只剩一条命了。回到保存点并重新开始。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/d796833b37f3cc4190701bd1c3767c70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hY5o4WaALrKY7CrLJvdOqg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">added parameter to each function</figcaption></figure><p id="48d5" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好了，让我们看看你现在是否安全:</p><p id="3652" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">单一职责的小功能=检查</p><p id="f3e4" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">正确命名=检查</p><p id="8ca7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">接收输入并返回输出=检查</p><p id="1422" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">无副作用，即无状态突变=检查</p><p id="bfe0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">让我们在这里添加一个额外的要点:<br/>“参照透明”。</p><p id="7aaf" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这意味着对于相同的输入，函数总是给出相同的输出。现在你的重构代码也是如此。</p><p id="16dd" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在你已经创建了一个叫做<strong class="lo io">纯函数</strong>的东西。你收到了你武器的第一个组件:一个纯粹的功能。你现在可能会抱怨代码不会像我们重构的那样工作，因为独立的函数永远不会被调用。我们将在下一个级别处理此事。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/102abf8225e305eddbee9066ff931821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aqgc8c0v-EhiOm8452oZAg.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="2d62" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">第二阶段:作文的幽灵</strong></h1><p id="e8f2" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">您已经将代码的第一部分重构为一些友好的纯函数。让我们重新看看你到目前为止已经得到了什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/ef6db372c32edef2163e536303b23aba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZlrwS4KVqi3SX4XbOwSWw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">functions that we have so far</figcaption></figure><p id="9a89" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你要记住，这是所有关于把这些婴儿功能放在一起。Alias将一个函数的输出放到下一个函数的输入中。别名组成它们。你想一想，如何利用库存中的功能做到这一点。你想出了这个:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/4d396fd5502944737098a8cb374633d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b5Ot7_7LM7uY8EHJP80CCQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">putting the functions together</figcaption></figure><p id="29a6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是，等一下，你很快就会发现这些常量赋值和你的魔法帽子一样没用，你可以用一行代码重写它:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/876353e1aef328d1283ff2d69e6f617f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SZ2_GavJJbaqKS2ek3apOQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">putting functions together refactored</figcaption></figure><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/bc105b03ce327626f1072af9af82916e.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*oYWwhC4NAk4N3YLF6ER7ug.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver and craftpix Lizense</figcaption></figure><p id="4ad7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">哦，天啊…你认为那还是很丑。当你盯着你的乱七八糟的东西时，你被强光弄瞎了。一个黏糊糊的鬼不知从哪里冒出来，他开始用青蛙克米特的声音和你说话。</p><p id="7468" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">他说我的朋友:我是。的。幽灵。的。 <strong class="lo io"> <em class="mo">作文！</em> </strong> <em class="mo">我会给你你所见过的最强大的法术——终极法术</em> <strong class="lo io"> <em class="mo">减少。</em> </strong> <em class="mo">我的朋友:永远记住，它会把两个价值减为一个。但是朋友，不要勉强使用这个咒语；他说，不要尽可能地用它来发垃圾邮件。</em></p><p id="cb04" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你说:<em class="mo">好吧，黏糊糊的鬼，但是你能不能不要用这种烦人的神秘方式跟我说话，也不要对着我的屏幕流口水？告诉我我能用它做什么！</em></p><p id="aab7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是鬼魂没有任何回答就消失了。</p><p id="0dfe" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好吧，我恨你，笨鬼，但是我会自己找出来的，你想。你施法，一些奇怪的例子Reduce函数出现在你的代码中。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/a6b187bb28e9f8fb78febef9666966c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WRLhmJm_I08GlTcwHZdUbg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">example reduce function</figcaption></figure><p id="acff" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">什么鬼东西！我们给这个Reduce方法两个参数。<strong class="lo io">首先是一个怪异的回调函数。第二个很简单。只是一个初值。在这种情况下，它是10的整数。</strong></p><p id="5234" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好了，让我们一步一步来看更复杂的回调。</p><ul class=""><li id="b144" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">Reduce首先查看初始值是什么。在这种情况下是10。</li><li id="dd55" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在它将累加器设置为初始值。所以累加器现在是10。</li><li id="d77b" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在我们来看看<code class="fe nq nr ns nt b">sweetArray</code>的第一个值。在这种情况下是1。</li><li id="73b6" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在它将别名<code class="fe nq nr ns nt b">accumulator</code> (10)的值和当前数组值(1)合并为一个值。为了进行这种合并，它使用您在回调函数体中确定的规则。</li><li id="9c15" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">在这个例子中，它使用简单的加法来减少<code class="fe nq nr ns nt b">accumulator</code> (10)和<code class="fe nq nr ns nt b">currentValue</code> (1)</li><li id="d1fd" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在你有11个。这将成为新的累加器值。</li><li id="af10" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">Reduce将跳转到下一个数组值。本例中为2。</li><li id="d26c" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">它将继续减少/合并<code class="fe nq nr ns nt b">accumulator</code> (11)和<code class="fe nq nr ns nt b">currentValue</code> (2)</li><li id="abd9" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">新的<code class="fe nq nr ns nt b">accumulator</code>将变为13，Reduce将跳到下一个当前值。</li><li id="44b6" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">…这种情况一直持续到我们到达数组的末尾。</li></ul><p id="de9a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">所以就像讨厌的鬼说的，最需要记住的是:<strong class="lo io"> Reduce用你定义的规则把两个值合并成一个。</strong></p><p id="90fa" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">哦，那挺好的，</em>你想着，又挥了挥你的机械键盘。出现了Reduce函数的另一个例子。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/261332b8f0fbdaede11c4c4b1e5d7d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1fJPUpTg-RQUZsnoZqayA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">second example for reduce</figcaption></figure><p id="15da" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在这里，你做完全相同的事情，但目的完全不同。</p><ul class=""><li id="d31b" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">您将初始值设置为空数组[]</li><li id="c241" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">acc变成这个空数组[]</li><li id="4faa" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">然后我们将<code class="fe nq nr ns nt b">acc</code> ([])与数组的第一个值合并。哪个是第一个嵌套数组[3，2，2，4]</li><li id="01bf" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">对于合并，缩减器使用我们定义的规则。在这种情况下，我们做一个concat。</li><li id="6725" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">我们将空数组[]与[3，2，2，4]连接起来，所以<code class="fe nq nr ns nt b">acc</code>现在是[3，2，2，4]</li><li id="074a" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">Reduce查找下面的值([4，5，])并再次用<code class="fe nq nr ns nt b">acc</code> = [3，2，2，4，4，5，]连接它</li><li id="733c" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">最后，我们已经在Reduce的帮助下展平了<code class="fe nq nr ns nt b">nestedArray</code></li></ul><p id="aad7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">嗯，好吧，你认为这很酷，很强大。事实上，它是如此强大，以至于你可以用这个方法实现大量不同的功能。<strong class="lo io">您甚至可以用“Reduce”</strong>替换其他重要的函数式编程功能，如“Map”和“Filter”。</p><p id="695f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在你想:我应该试试如果我在我丑陋的作文上使用还原魔法会发生什么。天哪，你的作文立刻变成了一个美丽的，可读性很强的结构。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/ea2ef09681c3e79d86bd7c6cc3377546.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JUClf0Tm2NDTZi4SZ93vig.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">final composition with pipe</figcaption></figure><p id="3e7c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在你的代码中还出现了一个额外的Reduce函数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/cbd09ddcb04e3b3f0134c4d6df64fabd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihIC-kl77PJSaOQbHxLnEw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the pipe function itself</figcaption></figure><p id="13ce" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">让我们再检查一下这是怎么回事。</p><ul class=""><li id="63b9" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">管道的第一个参数将接收所有的功能(<code class="fe nq nr ns nt b">reduceHealth..., checkFor..., reduceHealth...</code>)</li><li id="bf66" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">管道返回的不是一个值，而是一个新函数</li><li id="4556" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">管道末端的第二个括号也会立即调用这个嵌套函数:<code class="fe nq nr ns nt b">pipe(...)(100)</code></li><li id="e5a5" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">嵌套函数也需要一个参数<code class="fe nq nr ns nt b">initial</code>。我们给它赋值100。</li><li id="c284" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">因此，Reduce的初始值也将获得值100</li></ul><p id="d4b0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在还原魔法又开始了:</p><ul class=""><li id="ae6c" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">Reduce将为我们提供的每个函数运行(就像前面例子中的数组值)</li><li id="c62d" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">初始值为100，因此<code class="fe nq nr ns nt b">acc</code>立即设置为100</li><li id="2831" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在Reduce查找第一个提供的值<code class="fe nq nr ns nt b">reduceHealthByTwenty</code>。这就是现在的<code class="fe nq nr ns nt b">curr</code>。</li><li id="1d28" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">现在它按照给定的规则将curr与acc合并。在这种情况下，它做<code class="fe nq nr ns nt b">curr(acc)</code>。或者更明确地说，它调用:<code class="fe nq nr ns nt b">reduceHealthByTwenty(100)</code></li><li id="8b92" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">这个函数调用将返回一个新值(80)</li><li id="aacb" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">这个新值将成为新的acc，Reduce将继续执行我们提供的下一个功能(<code class="fe nq nr ns nt b">checkForDoubleUp</code>)</li></ul><p id="1dad" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这不是很棒吗？现在，将一个函数的返回值放入下一个函数的输入中。你看，你现在的最终作文是如此的不言自明。您不需要检查任何函数就可以知道这里发生了什么。快速浏览一下管道调用就足以理解代码到底做了什么。它的初始值为100，然后减20，然后检查是否会有双倍增长，最后将结果减半。这是你的结果，你不需要向上滚动。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/cbd09ddcb04e3b3f0134c4d6df64fabd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ihIC-kl77PJSaOQbHxLnEw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the complete pipe again</figcaption></figure><p id="d3be" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">哇，你以为。太酷了。多么幸运，我现在配备了这个强大的减少方法和这个甜蜜的管道功能。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/e38a29d92c248d36b621992975b45b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*2V1BoSeQ-6IJEO7VAqfXIA.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="2baa" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">第三阶段:不可逾越的障碍</strong></h1><p id="ce4d" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">好吧，好吧，好吧，让我们做一个回顾:你有你的小纯函数，你也知道如何在一个Reduce函数的帮助下将它们组合在一起，你用来构建管道。<em class="mo">哈哈，函数式编程就是eaaaasyyy。</em></p><p id="21ff" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你开始重构你的代码，同时面带微笑写下一个又一个管道。哥们，杀妖功能好满足啊。但是你会被这个函数绊倒:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/7ce35d2dd063bb28383290ae6a4c7680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P-glSPOlxhCPqCo3wbt5OQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">function with two parameters</figcaption></figure><p id="c80b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这是什么？？每当你解释你的工作时，你的面部表情和你销售部的同事一样。这个诡异的<code class="fe nq nr ns nt b">demonStealsPlayerFruits</code> <strong class="lo io">函数</strong> <strong class="lo io">需要两个参数</strong>。<strong class="lo io">但是我们管道中的前一个函数只给出了一个返回值。</strong>提供的输出与要求的输入不匹配。函数形状不适合。你管不了他们。你会在某些情况下产生‘未定义’。你的上辈子已经过去了。游戏结束。抱歉伙计。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nu"><img src="../Images/13d6a06a08d3d792875917b7a645568b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*nQ7dJdkP9dgIA0Qeyna5dw.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure><p id="4272" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你开始意识到函数可以有不同的形状。形状被定义为它期望的输入和它提供的输出。有些函数需要两个输入。有些函数返回函数而不是值；有些期望数组或其他数据类型，等等… <em class="mo">该死的funczy！#nal progrzmm！ng游戏。好吧，不管怎样，让我们谷歌一些作弊和演练，使这个游戏可解。</em></p><h2 id="890b" class="nw kv in bd kw nx ny dn la nz oa dp le lv ob oc lg lz od oe li md of og lk oh bi translated"><strong class="ak">演练</strong></h2><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/9ebb1aaa5569394adabd4682aeca900b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*wtVPn6U3tHxfJq8qW02_wA.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver &amp; craftpix Lizense</figcaption></figure><p id="df87" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">演练秘诀1: </strong>存在很多不同的函数形状。主要有以下几种:</p><ul class=""><li id="8432" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">一元函数。它接受一个输入并返回一个输出。</li><li id="1313" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">无函数。它接受多个输入并返回一个输出。</li><li id="5bc3" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">供应商。它不接受输入，但返回一个输出。</li><li id="bf2a" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">消费者。它接受输入，但不返回输出。</li><li id="d5fe" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">谓词。它接受输入并返回一个布尔值。</li></ul><p id="9edf" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">演练秘密提示2: </strong>尽量只构建一元函数。</p><p id="3ea6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">穿越秘笈三:</strong>不惜一切代价避开消费者。</p><p id="839f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">演练秘密提示4: </strong>如果您的函数形状不匹配，您可以使用两种策略:</p><ol class=""><li id="dd40" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated">编辑函数使其匹配。</li><li id="7780" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">构建一个适配器函数，您可以用它来连接两个不匹配的函数。</li></ol><h2 id="8a17" class="nw kv in bd kw nx ny dn la nz oa dp le lv ob oc lg lz od oe li md of og lk oh bi translated"><strong class="ak">小抄</strong></h2><ol class=""><li id="3708" class="nb nc in lo b lp lq ls lt lv oj lz ok md ol mh oi nh ni nj bi translated"><strong class="lo io">闭包</strong> —如果你真的需要一个安全的状态，就给你一个可变的状态。</li><li id="8d43" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated"><strong class="lo io"> Curry </strong> —将N元函数转换成一元函数。</li></ol></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="9f68" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">第三阶段:简单障碍</strong></h1><p id="cb1e" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">在演练和作弊的帮助下，你现在可以粉碎这个阶段。</p><h2 id="65c4" class="nw kv in bd kw nx ny dn la nz oa dp le lv ob oc lg lz od oe li md of og lk oh bi translated">演练第1部分:函数编辑</h2><p id="3bc3" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">这又是函数:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/db59a1359422b137d5030d0230af8454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R71OcVZh2CfS1eeD2fdrUQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the function that we will curry</figcaption></figure><p id="c92a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您有一个需要两个输入的函数。你总是喜欢一元函数。所以咖喱秘方在这里会很管用。</p><p id="ff32" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">当您使用作弊时，函数参数会发生以下情况:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/d7138f8784129fea1ed7530da1203a64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5R_R-6-cx-4X6YhUPtGKXg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">the curried function</figcaption></figure><p id="12ae" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这些参数被拆分到它们自己的独立嵌套函数中。<br/> <code class="fe nq nr ns nt b">demonStealsPlayerFruits</code>现在返回一个新的函数而不是一个值。这个新函数需要第二个参数(<strong class="lo io">库存</strong>)。<code class="fe nq nr ns nt b">demonStealsPlayerFruits</code>本身期望现在只有<code class="fe nq nr ns nt b">demonIsHungry</code>的论证。这意味着你现在只需要一个参数就可以调用<code class="fe nq nr ns nt b">demonStealsPlayerFruits</code>。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/dec5d0c0a6366060b9c5605a414a9565.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*om6TCJGVKki8kVnU5RPcmQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">calling first part of curry</figcaption></figure><p id="548c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">并且不会发生错误。如果这样做，您将返回另一个包含剩余参数的函数。</p><p id="e367" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在您可以通过调用<code class="fe nq nr ns nt b">hungryDemon(['sword',...])</code>来为第二个参数提供参数</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/9d4ea31f0ee95711e21ba6f5fcfdd3d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CD9bfINhc-Asb9oF1ankfg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">calling second part of curry</figcaption></figure><p id="d7ea" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">您也可以正常使用<code class="fe nq nr ns nt b">demonStealPlayerFruits</code>,用双括号语法一次性提供所有参数:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/2d0f8a9fcbe6b884137bf108f5982821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A_ej5GJpUPmT4CcHa0Jcdg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">calling all at once with double brackets</figcaption></figure><p id="ebb9" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你现在很可能会想:好吧，兄弟，blablabla..但是，我如何使用这个工具来解决我的作文/管道问题呢？</p><p id="65b4" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">简单:通过调用curried函数的第一部分来修改其中一个值。现在，您可以在管道中使用返回的函数，而不是原来的函数。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/f7049748bb344292b2c17bad6339ea08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JVhBavZE2tZ2CSwcc5sfqg.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">finally, pipe again with new function</figcaption></figure><p id="f165" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">很好，您刚刚使用了演练秘密提示4和咖喱秘籍，并且编辑了该函数，使其适合您的管道。</p><h2 id="a52f" class="nw kv in bd kw nx ny dn la nz oa dp le lv ob oc lg lz od oe li md of og lk oh bi translated"><strong class="ak">演练第2部分:函数适配器</strong></h2><p id="df13" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">稍后在你的代码中，你会看到这个函数。它已经被咖喱化了，所以它已经可以用在烟斗里了。但是，如果参数的顺序是错误的，该怎么办呢？</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/48857a18e6b2f089a4e0d749621154ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WQnKPD1Whp9lzJG0e21cZA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">wrong parameter order</figcaption></figure><p id="30ae" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">让我们假设您需要<strong class="lo io">库存</strong>作为这里的第二个约束参数，您可以在您的管道中使用它。第二，你不能重写这个函数，因为你代码的其他部分已经使用了相同的函数。你血压升高，对着屏幕大喊:我讨厌你的函数式编程——你为什么要这样对我。但请记住，你有一个演练表。所以快速回顾一下，看看你能做些什么。</p><p id="a2f4" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">秘密提示4:如果你的函数形状不匹配，你可以使用两种策略。</strong></p><ol class=""><li id="21cf" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated"><strong class="lo io">编辑功能，使其与</strong>匹配。</li><li id="7d13" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated"><strong class="lo io">构建一个适配器函数，您可以使用它来连接两个不匹配的函数。</strong></li></ol><p id="c3b5" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">快速回顾:当你用curry cheat分解函数参数时，你使用了策略A。现在策略“B ”,适配器功能将提供帮助。所以继续构建一个适配器函数。在这种情况下，您需要一个flip函数将curried参数按正确的顺序排列。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/5725b54fa648da0cc5407c24d92fe118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwafe2BGsRtjqlXnFV1yPA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">added flip as adapter function to turn around orders</figcaption></figure><p id="6dc8" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在您只需在管道中使用<code class="fe nq nr ns nt b">playerAttacksDemonFlipped</code>,而不是原来的playerAttacksDemon函数</p></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="ea2d" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">最后阶段:突变区</strong></h1><p id="f93b" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated"><em class="mo">问候，</em>一个<em class="mo"> </em>怪异<em class="mo"> </em>喝醉了脾气暴躁的纨绔子弟对你说。<em class="mo">你怎么会在这里？他停留在你的代码突变区的入口前——过去你已经在那里做了许多丑陋的全局突变。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/e86647e1688dc219dbe09056ca27c46d.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*2clwmdBExdDHmiIDfcnaLA.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver &amp; craftpix Lizense</figcaption></figure><p id="3d01" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你说:我需要杀死我的功能操纵或与外部世界交流的所有部分。不然我的功能编程<em class="mo">武器会爆炸。所以请让开，让我进去。</em></p><p id="070c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">哈哈哈，哎呀！这是一个危险的地区。在你被允许进入之前，他说，我会给你一些建议。如果你不听，我会把你的灵魂卖给市场部。</p><p id="d537" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">他从你有史以来最重要的JavaScript课程开始。你需要明白一件事。你需要知道JavaScript在内存层面是如何工作的。 <strong class="lo io"> <em class="mo">你需要知道如何混合执行上下文和调用栈的魔药。</em> </strong></p><p id="e0f0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">假设你有这样一个函数:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/f160a41fb2f43cd32d4154fac4e8a328.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vgC6EQW50SD4HGzdpkf79A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">example for execution context</figcaption></figure><p id="93c5" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">当JavaScript看到这个函数时，它做的第一件事就是将所有的全局值保存到<strong class="lo io">全局内存中，这是全局执行上下文</strong>的一部分。对于上一个示例，它看起来像这样:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/97e337d648202747b275d5072665d2f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6MPNz3d4KbPunsZXD_EUQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context first part</figcaption></figure><p id="d4f0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">所以让我们一步一步地检查这里发生了什么:</p><ol class=""><li id="fa10" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated">JavaScript将函数<code class="fe nq nr ns nt b">demonWatchesNetflix</code>保存到全局内存中。还没有执行任何东西。</li><li id="41f4" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">现在，它将标签<code class="fe nq nr ns nt b">demonInitialLaziness</code>的值10保存到全局内存中。</li><li id="d731" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">在最后一步，它<strong class="lo io">声明</strong>一个名为<code class="fe nq nr ns nt b">newLaziness</code>的标签。<code class="fe nq nr ns nt b">newLaziness</code>还没有价值。(也不是未定义…这是因为我们不能用const关键字重新赋值。这就是为什么它只是<strong class="lo io">声明)</strong>的原因</li><li id="df2e" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">为了解析<code class="fe nq nr ns nt b">newLaziness</code>的值，JavaScript需要执行<code class="fe nq nr ns nt b">demonWatchesNetflix</code>。</li><li id="e1dc" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">一旦新的执行发生，新的执行上下文将被建立</li><li id="1aed" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">这个新的执行上下文有自己的本地内存</li><li id="3631" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">这个新的执行上下文将被放在调用堆栈的顶部</li></ol><p id="0c74" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好了，现在让我们看看接下来会发生什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/93e6b9929bb54b0a9085ac514cb8d856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dF6sHjdVFNmJgwe0GGnxKw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context second part</figcaption></figure><ol class=""><li id="4bf7" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated">在新的执行上下文中，我们将:</li><li id="e91b" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">首先将<strong class="lo io">标签</strong> <code class="fe nq nr ns nt b">laziness</code> <strong class="lo io">保存到本地内存</strong>。在这种情况下，它被赋值为10。</li><li id="f906" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">接下来，我们将把值为5的标签<strong class="lo io">保存到本地存储器。</strong></li><li id="c3aa" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">接下来，JS将运行一个条件检查</li><li id="2ead" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">该条件为真，并且 <code class="fe nq nr ns nt b">demonWatchesNetflix</code> <strong class="lo io">的<strong class="lo io">返回值将被分配给标签新值</strong></strong></li><li id="e9ae" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">执行上下文完成<strong class="lo io">并从调用堆栈中弹出</strong></li></ol><p id="3d1e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">现在，孩子，你知道如何酿造行刑魔药了。现在你可以通过大门进入黑暗变异区了。但是相信我，亲爱的，第一次你真的不应该一个人去。我会护送你。反正突变地带有最好的酒和烟。</p><p id="b444" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在这个区域只呆了一分钟，这个变异函数就穿过了你的路径。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/dd728ff1aa51aed3a92cb75ec5902aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o5VrMY7suBzieP0n9At04A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">forEach method example</figcaption></figure><p id="177c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">醉汉解释道<em class="mo">每一个改变你原始数据结构的数组方法都可能杀死你的整个代码。避免使用它们，最好使用创建新数组的数组方法，而不是改变原始数组。</em> <strong class="lo io"> <em class="mo">贴图、过滤、缩小</em> </strong> <em class="mo">是你将需要的</em>必备魔法方法。他踢他的变种人的屁股，直到它切换到地图。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/f54d3fb63c039b5f16c891d0bc06efaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oATqtFO4RmpaircV5Wm3zQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">map method example</figcaption></figure><p id="7296" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">过了一会儿，你们俩都达到了这个功能:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/5edbb51316ac63651cc6591addeff6bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MMjxhMv2_Ja5Jkbwa6s8qA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">global state example</figcaption></figure><p id="ff9c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你的坏脾气同志说:<em class="mo">它正在访问全局内存。我们需要在全球变异扩散前杀死它。他用力踢它，它就切换到这个功能。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/b7c36f108f893bbd0a00cf91064459d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YOgMGT28PFOOrcWn0Ipu9A.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">closure example</figcaption></figure><p id="5435" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">你知道现在已经没有全局变量了。但是你完全不理解这种变化。然后他说:<em class="mo">小子，我们好好喝一口</em> <strong class="lo io"> <em class="mo">执行上下文的魔药，调用栈</em> </strong>。这将极大地帮助你了解新功能中发生了什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e7a4c659a8c68c34fca3f21d34c132a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HJgNni1kYzhxeTMn6dc89Q.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context for closure part 1</figcaption></figure><ol class=""><li id="9c45" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated"><code class="fe nq nr ns nt b">attack</code>函数被保存到全局存储器中</li><li id="f854" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated"><code class="fe nq nr ns nt b">causeDamage</code>获得声明但尚未分配。</li><li id="7526" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">为了解析<code class="fe nq nr ns nt b">causeDamage</code>的值，我们需要执行<code class="fe nq nr ns nt b">attack</code>。构建新的执行上下文</li><li id="db7f" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated"><code class="fe nq nr ns nt b">attack</code>被添加到调用堆栈中</li><li id="c19b" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">在<code class="fe nq nr ns nt b">attack</code>的本地存储器中，保存了一个值为0的<strong class="lo io"> </strong> <code class="fe nq nr ns nt b">hitCounter</code>变量</li><li id="c925" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">此外，一个名为<code class="fe nq nr ns nt b">addOneHitpoint</code>的函数被保存到本地内存中</li></ol><p id="3a29" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">好了，我们来看看接下来会发生什么。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/dbc7cff02a175d4dc917275edceb9a7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lgURevWu3EmFLWtCAIS5cA.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context for closure part 2</figcaption></figure><ol class=""><li id="eb70" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated"><code class="fe nq nr ns nt b">attack</code>返回其名为<code class="fe nq nr ns nt b">addOneHitpoint</code>的嵌套函数</li><li id="92ae" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">所以<code class="fe nq nr ns nt b">causeDamage</code>的解析值就是这个<code class="fe nq nr ns nt b">addOneHitpoint</code>函数。或者换句话说:<strong class="lo io"> </strong>现在和<code class="fe nq nr ns nt b">addOneHitpoint</code>一样</li><li id="9aa1" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated"><code class="fe nq nr ns nt b">attack</code>执行完成，函数从调用栈中弹出，执行上下文被删除</li></ol><p id="1837" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是我们还没有准备好。还剩下对<code class="fe nq nr ns nt b">causeDamage</code>的调用。正如我们之前学过的四句台词。<strong class="lo io"> </strong> <code class="fe nq nr ns nt b">causeDamage</code>的调用与<code class="fe nq nr ns nt b">addOneHitpoint</code>的调用相同。因此，如果我们看一下JavaScript的执行情况，它会是这样的:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/55c6c8b7672603ce7f49450bb131aea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bFB1iG_pT3cpTilvxWglzQ.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context for closure part 3</figcaption></figure><ol class=""><li id="48fb" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh oi nh ni nj bi translated">为<strong class="lo io"> </strong> <code class="fe nq nr ns nt b">causeDamage</code>建立新的执行上下文</li><li id="7e2d" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh oi nh ni nj bi translated">我们什么也不返回，但是我们将变量<code class="fe nq nr ns nt b">hitCounter</code>加1</li></ol><p id="c2a6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">但是什么……？<strong class="lo io">这里没有可以增加的名为</strong> <code class="fe nq nr ns nt b">hitCounter</code> <strong class="lo io">的局部和全局标签</strong>。Javascript已经删除了旧的执行上下文。这到底是怎么回事？请帮帮我，暴躁的朋友。</p><p id="ab4a" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">哈哈哈，他说。现在，孩子，你将学习如何使用JavaScript中的一个基本的欺骗。<strong class="lo io">关闭。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/670f81148728b37a9b7f6f883a272e50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QcIVQ1RLadYPegogLclrNw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context for closure part 4</figcaption></figure><p id="00b9" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">每当你将一个内部函数从本地执行上下文保存到全局上下文时，这个函数将会查看同一个本地内存中的内容。然后它会把所有这些东西装进背包，带到全球范围。所以在这个例子中，我们将<code class="fe nq nr ns nt b">addOneHitpoint</code>保存到全局内存中。当这种情况发生时，<code class="fe nq nr ns nt b">addOneHitpoint</code>会查看本地内存中还有什么。它会把所有的东西都放进背包，带到全球存储器。</p><p id="332e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">所以回到你关于不存在标签的问题。如果JavaScript在本地内存中找不到它，它会查找全局内存中的一些函数是否在它们的背包中有标签。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/a5d339102ba4cc59365c52e74e7e69c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dJz1dWMrLD7Ssm394NPFzw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">execution context for closure part 5</figcaption></figure><p id="0592" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">如何直接访问</em> <code class="fe nq nr ns nt b"><em class="mo">hitCounter</em></code> <em class="mo">的值？</em>你问脾气暴躁的人。但是他笑着说:<em class="mo">你不能，笨孩子！</em> <em class="mo">你只能使用背包的功能。这就是JavaScript如此强大的原因。该值受其功能保护。你不能从外部改变它。该值为</em> <strong class="lo io"> <em class="mo">由函数</em> </strong> <em class="mo">封闭。</em> <strong class="lo io"> <em class="mo">这就是背包被称为【封】</em> </strong> <em class="mo">的原因。如果您真的需要函数式编程中的可变状态，这就是您要使用的概念。</em></p><p id="d5ed" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">但是要注意:即使状态被保存为受保护的闭包，你也会违反核心的函数式编程范式。也就是说，在实际的JavaScript编码中使用这种封闭状态是有益且安全的。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/4519df65283b721af33e79e1efbf488a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*HPpzTJRKxBxyqcig-EBRng.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure></div><div class="ab cl mp mq hr mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ig ih ii ij ik"><h1 id="774d" class="ku kv in bd kw kx mw kz la lb mx ld le jt my ju lg jw mz jx li jz na ka lk ll bi translated"><strong class="ak">奖励阶段:调用堆栈开始</strong></h1><p id="31b0" class="pw-post-body-paragraph lm ln in lo b lp lq jo lr ls lt jr lu lv lw lx ly lz ma mb mc md me mf mg mh ig bi translated">现在，您已经具备了构建函数式编程终极武器所需的所有要素。醉汉说:</p><ul class=""><li id="98bd" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">你知道你需要建立一些小的婴儿功能:</li></ul><p id="d50b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">★责任单一；</p><p id="bdd6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">★理想情况下，接收一个输入，返回一个输出；</p><p id="116b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">★不与外界交流；</p><p id="9cce" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">★都是参照透明的。</p><ul class=""><li id="e4dd" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">你知道<strong class="lo io">如何构建这些宝贝功能的组合</strong>，无非就是减少它们。</li><li id="71a4" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">你知道当他们期望不止一个输入参数时，你可以用curry 编辑婴儿函数<strong class="lo io">的函数形状</strong>。</li><li id="59ac" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">您知道，如果输出和输入不匹配，您总是可以<strong class="lo io">构建位于两个函数之间的适配器函数。例如，如果函数1具有不同的输出数据结构，那么函数2期望它作为输入。</strong></li><li id="2316" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">你知道如果你真的需要一个状态，你应该<strong class="lo io">把状态保存为闭包</strong>。</li></ul><p id="d139" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">如果您想在实际的JavaScript编程中开始使用函数原则，就没有什么需要了解的了。脾气暴躁的人会踢掉你的一些其他功能，同时慢慢走回变异区去拿他的烟和酒。但是突然，他转过身来问你:<em class="mo">你想马上升级你的新武器让它更强大吗？是啊！你说。肯定的事。我该怎么做呢？</em></p><p id="0e7f" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io"> <em class="mo">干掉你的迭代！他说。</em></strong></p><p id="a3a0" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">为什么会这样？？你可能会问。原因很简单:请看下面的循环:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/8986bdf86cd90148120b46d7b34b649a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p8iG0QA9fnvRXut1v6mpKQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">iteration example</figcaption></figure><p id="16e7" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在这样的循环中，您仍然在对计数器变量进行状态突变。一般来说，在函数式编程中应该不惜一切代价防止状态突变，因为它会导致奇怪的副作用。</p><p id="f241" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这并不太引人注目，因为状态在函数的作用域内，并不是全局可用的。但是无论如何，<strong class="lo io">如果你去除了这样的突变</strong>，那么迭代本身就会更有功能。你可以用递归来实现。这意味着在一个函数内部，你调用同一个函数本身。所以你递归地调用这个函数。哦，顺便说一下，一旦你习惯了递归，你就会爱上它。刚开始用起来会觉得有点怪怪的，笨重。但我保证，只要你用几次，它就会完全改变。</p><p id="adc5" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">让我向您展示一下上一个迭代示例的情况:</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/41549da7ac2455ae43263fdf42d605f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lo2rGZ_LrgSET1wY5c0LnA.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">recursive refactoring</figcaption></figure><p id="4a29" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">Whuuuut？？？为了更好地理解代码，请记住执行上下文和调用堆栈是如何工作的。如果您跟踪执行，那么将会发生以下情况:</p><ul class=""><li id="af74" class="nb nc in lo b lp mi ls mj lv nd lz ne md nf mh ng nh ni nj bi translated">我们称之为函数。</li><li id="4e41" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">我们检查退出声明。你会在每个递归函数调用中发现这样的if语句。它必须存在。否则，您将在函数调用的无限循环中结束。<strong class="lo io">这个if语句也被称为“基本条件”。</strong></li><li id="dd83" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">如果退出条件为假，我们再次调用函数本身。</li><li id="42ef" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">这将生成一个新的执行上下文，它将被放置在调用堆栈的顶部。</li><li id="7ff9" class="nb nc in lo b lp nk ls nl lv nm lz nn md no mh ng nh ni nj bi translated">你从第一步开始。</li></ul><p id="9fbe" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">这意味着:只要退出条件不为真，您就会生成新的执行上下文，而不会删除旧的上下文，并且您的调用堆栈会越积越多。</p><p id="bc04" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">最后，退出条件为真，不再有新的函数调用添加到调用堆栈中。现在JavaScript将开始执行调用堆栈上的所有内容，并从上到下弹出。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/0b49bdafc4d7f6e2d1fdb05db9b81ac5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*H3QPYfAoK21UMR4M2FtJfQ.gif"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver &amp; craftpix Lizense</figcaption></figure><p id="707e" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">是的，<strong class="lo io">如果你玩这个游戏玩得太重，你会得到一个堆栈溢出错误</strong>，这无非是浏览器阻止你向调用堆栈添加越来越多的调用。这样做是为了防止你的程序耗尽所有的空闲内存。</p><p id="dac5" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo"> Mmmkay..但是想想就觉得很奇怪，那么我自己怎么能想到这样一个递归的选择呢？你一边擦着眼睛里的泪水一边说。</em></p><p id="b0b3" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">脾气暴躁的人说:咪咪，别哭了，你这个软骨头。<em class="mo">这样想:</em></p><p id="010c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io"> <em class="mo">首先，定义要停止递归的基条件。</em> </strong></p><p id="d5dd" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">在这个例子中，你要查看你的库存中有多少魔药。基本条件是:如果你的库存里什么都没有，你的魔药数量将为零。</em></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/349f136f78b6baf9c88a9e28b032221f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tRgRismotst1Dm7HXG_G5w.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">base condition for recursion</figcaption></figure><p id="f94b" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">之后，考虑在构建下一个执行上下文时，需要放入什么作为参数。这个参数需要你在下一个递归调用中更接近基本条件。</p><p id="b673" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">在本例中，您希望越来越接近一个空的库存数组。要做到这一点，您需要在每次递归调用时删除数组中的一项。</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/b7d449a35548c74ce85bc458e57884b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oex_nxnMMmAwGH3e6yLcRQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">recursive call of the function itself</figcaption></figure><p id="00c6" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">最后一步，你需要定义每次通话你想做什么。在这种情况下，您需要检查字符串是否以短语'<strong class="lo io">magic _【T1]'开头。如果是这样，您希望每次递归调用都返回+1。它看起来像一个减速器，我们可以为每一轮做类似acc + 1的事情。事实上，这个例子可以通过强大的Reduce或Filter函数更容易地解决。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi np"><img src="../Images/d275fdc4f6d738778c788f5b8fc964e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dIk77w0FYIXADf-0Z1jVwQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">defined what should happen between the recursion and the base condition</figcaption></figure><p id="865d" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">不，如果你构建这样一个递归函数，你不需要每次都考虑执行上下文和调用栈。<strong class="lo io">只要设定好你的基本条件，然后想想如何达到它。</strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mn"><img src="../Images/25c07dd45e59063c4c6d10bf0f5fae8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*cq_jhJzHdZzBq7i593hChQ.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Image <a class="ks kt ep" href="https://medium.com/u/d113de1e073e?source=post_page-----7da92d6f97d9--------------------------------" rel="noopener" target="_blank">Christoph Schober</a> | graphicriver.net Lizense</figcaption></figure><p id="e06c" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><strong class="lo io">哇哇哇！恭喜你。你成功了！你真棒！</strong></p><p id="cf13" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">当然，我给你看的东西只是冰山一角。有更多的函数式编程原则，甚至还有更花哨的技术术语(比如单子、函子、无指针风格等等。).有些代表非常酷的附加概念；其他的只是简单的东西听起来复杂的术语。不幸的是，这个话题太大了，我无法把它合并成一个中等的故事。但无论如何:我向你展示了最重要的原则，更重要的是，我试图给你一个所有这些东西的心理模型，所以函数式编程方法的实际应用现在对你来说应该更容易理解。</p><p id="9fce" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">结束了。</p><p id="b086" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">希望你在阅读的时候和我写这个故事的时候一样开心。😄但更重要的是:我现在要和我的坏脾气的醉鬼同志喝几杯，然后随时加入我们踢变种人的屁股。⚔️</p><p id="49a1" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated">克里斯托弗</p><p id="f7dd" class="pw-post-body-paragraph lm ln in lo b lp mi jo lr ls mj jr lu lv mk lx ly lz ml mb mc md mm mf mg mh ig bi translated"><em class="mo">更多内容看</em> <a class="ae om" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lo io"> <em class="mo">说白了. io </em> </strong> </a> <strong class="lo io"> <em class="mo">。</em> </strong> <em class="mo">报名参加我们的</em> <a class="ae om" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="lo io"> <em class="mo">免费每周简讯这里</em> </strong> </a> <strong class="lo io"> <em class="mo">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>An In-Depth Look at Angular 12</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">深入了解Angular 12</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/angular-12-in-depth-7741e759c72?source=collection_archive---------0-----------------------#2021-05-13">https://javascript.plainenglish.io/angular-12-in-depth-7741e759c72?source=collection_archive---------0-----------------------#2021-05-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="d101" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular 12刚刚发布。是时候发现新的东西了！</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/37f9e3f8b944d331fb0f7bcf7ed15af6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HcLA_zHT9B0-IQa8kTJIIQ.png"/></div></div></figure><p id="e78b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在本文中，我将回顾这个全新版本中(几乎)所有值得注意的地方。我还将强调Angular的变化，就像我以前关于<a class="ae kx" href="https://medium.com/swlh/angular-11-in-depth-9a7372b4a600" rel="noopener"> Angular 11 </a>和<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/angular-10-in-depth-a48a3a7dd1a7"> Angular 10 </a>的文章一样。</p><p id="81ff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你只是在寻找鸟瞰图，那么看看<a class="ae kx" href="https://blog.angular.io/angular-v12-is-now-available-32ed51fbfd49" rel="noopener ugc nofollow" target="_blank">官方发布的公告</a>。在这里，我将更深入地研究发行说明。</p><h1 id="bcf7" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">加入常春藤联盟…</h1><p id="5ad7" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular团队从2018年开始致力于<a class="ae kx" href="https://angular.io/guide/ivy" rel="noopener ugc nofollow" target="_blank"> Ivy </a>(新编译&amp;渲染流水线)。终于用Angular 8发布了。自Angular 9以来，Ivy一直是新项目的默认设置，生态系统正在慢慢向它迁移。在Angular 12中，<em class="mb">旧的视图引擎现已正式废弃</em>。它将在未来的主要版本中被删除。此外，使用视图引擎创建新的应用程序也是不可能的。最后，Ivy现在是新库项目的默认选项。</p><p id="1eeb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这一点上，由于<code class="fe mc md me mf b">ngcc</code>(Angular的兼容性编译器)，库作者仍然可以依赖View Engine，但现在真的是他们评估是否可以将库迁移到Ivy的时候了。几周前，Minko Gechev发表了一篇文章来详细解释这一点。另外，检查相关的<a class="ae kx" href="https://github.com/angular/angular/issues/38366" rel="noopener ugc nofollow" target="_blank"> RFC </a>。</p><p id="28cf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您不知道，<code class="fe mc md me mf b">ngcc</code>是在您创建一个Angular项目或安装依赖项之后运行的小进程。当你看到像<code class="fe mc md me mf b">Compiling ... : es2015 as esm2015</code>这样的消息时，是<code class="fe mc md me mf b">ngcc</code>在做它的工作。<code class="fe mc md me mf b">ngcc</code>所做的是编译依赖视图引擎的库，这样常春藤就可以使用它们。</p><p id="f7a7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像我一样，你可能已经注意到<code class="fe mc md me mf b">ngcc</code>需要很多时间来执行，并且对开发者体验有非常负面的影响。这就是为什么有角生态系统尽快迁移到常春藤是至关重要的。第二，直到生态系统的大部分已经转移，Angular团队将不得不保留视图引擎，这是有问题的，原因有很多。最后，依赖视图引擎的库不能依赖常春藤。</p><p id="bb61" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">库作者大概不能太快迁移到Ivy，但是他们应该明确地推动不情愿的用户升级。无论如何，前进的道路是尽快将所有的东西迁移到Ivy-)</p><p id="af9c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">顺便说一下，如果你不熟悉Angular的内部结构，那么可以看看下面的视频。</p><p id="9b53" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">卡拉·埃里克森的《角度是如何工作的》:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="7a41" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">深入了解Alex Rickabaugh的Angular编译器:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="9795" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">那边还有一篇关于常春藤<a class="ae kx" href="https://medium.com/angular-in-depth/all-you-need-to-know-about-ivy-the-new-angular-engine-9cde471f42cf" rel="noopener">的优秀文章</a>。</p><h1 id="f9f9" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">再见量角器</h1><p id="c058" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">4月，Angular团队已经宣布计划在2022年底结束对<a class="ae kx" href="https://www.protractortest.org/" rel="noopener ugc nofollow" target="_blank">量角器</a>的支持。</p><p id="1012" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从Angular 12开始，量角器将不会默认包含在新项目中。相反，Angular CLI将提供使用其他解决方案的选项，如<a class="ae kx" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank"> Cypress </a>、<a class="ae kx" href="https://webdriver.io/" rel="noopener ugc nofollow" target="_blank"> WebdriverIO </a>或<a class="ae kx" href="https://testcafe.io/" rel="noopener ugc nofollow" target="_blank"> TestCafe </a>。这意味着将来应该继续支持<code class="fe mc md me mf b">ng e2e</code>命令。</p><p id="3f16" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如<a class="ae kx" href="https://github.com/angular/protractor/issues/5502" rel="noopener ugc nofollow" target="_blank">公告</a>中所解释的，早在2013年创建量角器的时候，<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/WebDriver" rel="noopener ugc nofollow" target="_blank"> WebDriver </a>就不是<a class="ae kx" href="https://www.w3.org/TR/webdriver/" rel="noopener ugc nofollow" target="_blank">标准</a>，端到端(e2e)测试很难编写，维护起来也是一场噩梦。量角器通过包装<a class="ae kx" href="https://www.npmjs.com/package/selenium-webdriver" rel="noopener ugc nofollow" target="_blank"> selenium-webdriver </a>带来了创新的解决方案，并提供了控制执行流程的方法。</p><p id="f60b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当然，从那以后，很多事情都发生了变化。我们现在有了<code class="fe mc md me mf b">WebDriver</code> API、<code class="fe mc md me mf b">async</code>和<code class="fe mc md me mf b">await</code>(甚至顶级<code class="fe mc md me mf b">await</code>，woah)。还有，生态系统也进化了。像<a class="ae kx" href="https://www.cypress.io/" rel="noopener ugc nofollow" target="_blank">赛普拉斯</a>、<a class="ae kx" href="https://playwright.dev/" rel="noopener ugc nofollow" target="_blank">剧作家</a>、<a class="ae kx" href="https://pptr.dev/" rel="noopener ugc nofollow" target="_blank">木偶师</a>这样的解决方案获得了很多(当之无愧的)人气。例如，像Cypress这样的工具提供了比量角器更好的开发体验，利用了现代标准，甚至支持跨浏览器测试(以及其他强大的功能)。当前事实上的e2e测试工具的另一个好处是它们是框架不可知的，这是非常有价值的。</p><p id="0d4c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">长话短说，维护量角器对于棱角分明的团队来说意义不大。进化量角器现在将需要太多的努力，并导致大量的突破性变化。你可以在RFC中找到更多的细节，这是一篇有趣的文章。</p><p id="6382" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于已经投入大量时间和精力用量角器编写e2e测试的团队/项目来说，时间表很重要。Angular团队仍在忙于评估通过RFC收集的反馈，所以今年晚些时候我们可能会知道更多。</p><p id="5526" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不管怎样？如果你还没有尝试过Cypress，你不会失望的！对了，我一直推荐大家开始使用<a class="ae kx" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank"> Nrwl NX </a>，一个很棒的解决方案，包括对Angular、React、Next.js、Cypress等等的支持；-)</p><h1 id="d65a" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">无效合并</h1><p id="364e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 12支持在角度模板中使用<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">无效合并运算符</a>。这太棒了。从版本3.7 开始，TypeScript <a class="ae kx" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing" rel="noopener ugc nofollow" target="_blank">就支持该操作符。</a></p><p id="8633" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你没有听说过这个操作符，那么让我给你简单解释一下。这个想法是为了能够定义一个回退值，以防出现<code class="fe mc md me mf b">null</code>或<code class="fe mc md me mf b">undefined</code>。这里有一个例子:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="5247" class="mm kz iq mf b gy mn mo l mp mq">let x = foo ?? true;</span></pre><p id="6e7d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果<code class="fe mc md me mf b">foo</code>是<code class="fe mc md me mf b">null</code>或<code class="fe mc md me mf b">undefined</code>，那么<code class="fe mc md me mf b">x</code>将被设置为<code class="fe mc md me mf b">true</code>(即回退值)，我们可以将其设置为任何我们喜欢的值。</p><p id="65b9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果没有这个令人敬畏的<code class="fe mc md me mf b">??</code>操作符，我们将不得不这样写:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="380e" class="mm kz iq mf b gy mn mo l mp mq">let x = foo !== null &amp;&amp; foo !== undefined ? foo : true;</span></pre><p id="2644" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">既然Angular也支持它，我们最终可以编写这样的表达式:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="af19" class="mm kz iq mf b gy mn mo l mp mq">{{ age ?? calculateAge() }}</span></pre><p id="d13d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">而不是旧的和更冗长的替代方案。整洁！</p><p id="afdc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里了解更多关于这个变化<a class="ae kx" href="https://github.com/angular/angular/issues/36528" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="a26f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在<a class="ae kx" href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#nullish-coalescing" rel="noopener ugc nofollow" target="_blank"> TypeScript手册</a>和<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank"> MDN </a>中找到更多关于nullish合并的信息。</p><h1 id="f140" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">TypeScript 4.2支持</h1><p id="a839" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 12引入了对<a class="ae kx" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-2/" rel="noopener ugc nofollow" target="_blank"> TypeScript 4.2 </a>的支持，这意味着我们现在可以使用大量<em class="mb">新的精彩语言特性。此外，对TypeScript 4.0和4.1的支持也已取消。</em></p><p id="94d8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">下面是TS 4.2包括的内容的简要概述:</p><p id="1d02" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">智能类型别名保留</em>:代码编辑器显示预期类型，而不是之前出现的原始类型。你可以在这里了解更多。</p><p id="cbcf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">Tuple类型中的前导/中间rest元素</em>:我们现在可以在Tuple中的任何地方包含Rest元素(有一些注意事项)。对于我们这些经常依赖元组的人来说，这很酷。点击了解更多信息。</p><p id="e3f2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">理解你的项目结构</em> : TS 4.2包括<a class="ae kx" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-2/#explain-files" rel="noopener ugc nofollow" target="_blank">一个名为<code class="fe mc md me mf b">--explainFiles</code>的新标志</a>，它指示打字稿输出关于为什么一个文件被包含在你的程序中的信息。这对于故障排除非常有用。</p><p id="db25" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">未调用函数检查的改进:TypeScript现在可以检测更多函数未被调用的情况。例如当写<code class="fe mc md me mf b">foo</code>而不是<code class="fe mc md me mf b">foo()</code>时。更多细节和例子可以在这里找到<a class="ae kx" href="https://github.com/microsoft/TypeScript/issues/40197" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="0f67" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">析构变量现在可以显式标记为未使用的</em> : <code class="fe mc md me mf b">let [_first, second] = getValues(); </code>，太牛逼了；<code class="fe mc md me mf b">noUnusedLocals</code>启用时不再出错！</p><p id="5c38" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实际上还有很多，比如对<code class="fe mc md me mf b">in</code>操作符更严格的检查，以及一些可能会影响你的突破性变化。因此，请务必查看<a class="ae kx" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-2" rel="noopener ugc nofollow" target="_blank">发行说明</a>。</p><h1 id="93d5" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Webpack 5支持</h1><p id="c8da" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 11为我们带来了对Webpack 5 的<a class="ae kx" href="https://medium.com/swlh/angular-11-in-depth-9a7372b4a600" rel="noopener">实验支持。在Angular 12中，Webpack 5支持现已投入生产。w00t！</a></p><p id="2f78" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你没有看过Webpack 5，你会感到惊讶。Webpack 5早在2020年10月就发布了，所以到目前为止还是相当稳定的。Webpack目前是<a class="ae kx" href="https://github.com/webpack/webpack/releases/tag/v5.37.0" rel="noopener ugc nofollow" target="_blank">版本5.37 </a>(前几天发布)。</p><p id="4faf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这里有一个简短的解释，关于Webpack 5的变化，以及为什么我对此如此高兴！</p><p id="3ae1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，如您所知，Webpack是Angular CLI难题的关键部分，它在包大小、构建性能等方面起着重要作用。</p><p id="07fb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">第二，Webpack 5是一个重要的版本，这是有原因的。它包含了许多突破性的变化，这解释了为什么Angular和生态系统中的大量实用程序/库需要一段时间才能升级。</p><p id="88b3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在发行说明中，Webpack团队指出Webpack 5侧重于:</p><ul class=""><li id="d3d3" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">使用<em class="mb">持久</em>缓存提高构建性能</li><li id="fe77" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">用更好的算法和默认值改进长期缓存</li><li id="b110" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">通过更好的树抖动和代码生成来提高包的大小</li><li id="b04a" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">提高与网络平台的兼容性</li><li id="89a8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">清理内部结构</li><li id="c9fd" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">现在引入突破性的改变(哈哈),允许他们尽可能长时间地留在v5上</li></ul><p id="92ce" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack 5最酷的特性是其对模块联盟的<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#module-federation" rel="noopener ugc nofollow" target="_blank">支持，这为</a><a class="ae kx" href="https://levelup.gitconnected.com/micro-frontends-step-by-step-using-react-webpack-5-and-module-federation-e4b9d840ec71" rel="noopener ugc nofollow" target="_blank">创建微型前端</a>提供了必要的基础。这有点超出了本文的范围，但是很快，模块联盟使得不同的构建可以表现得像一个巨大的连接的模块图，并且允许我们从远程构建导入和使用模块。查看<a class="ae kx" href="https://webpack.js.org/concepts/module-federation/" rel="noopener ugc nofollow" target="_blank">官方文件</a>了解更多。</p><p id="a92e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你好奇的话，那你应该看看<a class="ae kx" href="https://twitter.com/ManfredSteyer" rel="noopener ugc nofollow" target="_blank">曼弗雷德·施泰尔</a>关于这个主题的演讲:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mg mh l"/></div></figure><p id="4b21" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在主要的变化中，Webpack 5删除了所有之前被否决的东西(例如<code class="fe mc md me mf b">NoEmitOnErrorsPlugin</code>、<code class="fe mc md me mf b">ModuleConcatenationPlugin</code>、<code class="fe mc md me mf b">NamedModulesPlugin</code>)，以及<code class="fe mc md me mf b">IgnorePlugin</code>和<code class="fe mc md me mf b">BannerPlugin</code>。</p><p id="c8fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，先前自动注射的Node.js聚合填料已被移除；这是该版本中最大的变化之一。这些聚合文件最初允许Webpack允许我们在浏览器中使用为Node.js制作的模块。这很酷，但也有一个主要的缺点:捆绑包更大。此外，这些聚合文件越来越没用了，因为有浏览器兼容的替代库或支持浏览器的特定发行版。从Webpack 5开始，由于这些聚合填料将不再自动添加，我们可能会偶然发现一些惊喜。例如，如果我们在浏览器中使用为Node.js制作的模块，却没有意识到它以前的工作得益于Webpack。您可以在这里了解更多关于<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#automatic-nodejs-polyfills-removed" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="dab2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack 5引入了对长期缓存的更好支持。在生产模式下，它现在默认包含新算法:</p><ul class=""><li id="82ef" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><code class="fe mc md me mf b">chunkIds: "deterministic"</code></li><li id="9573" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">moduleIds: "deterministic"</code></li><li id="6e5f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">mangleExports: "deterministic"</code></li></ul><p id="d4e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如该值所示，这些算法为块和模块分配确定性标识，为导出分配确定性名称。</p><p id="b85e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack 5能够通过跟踪对导出的嵌套属性的访问来执行嵌套的树抖动(欢迎使用Matrix)，这将进一步改进树抖动。此外，它现在可以<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#inner-module-tree-shaking" rel="noopener ugc nofollow" target="_blank">分析模块</a>的导出和导入之间的依赖关系。还有对<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#commonjs-tree-shaking" rel="noopener ugc nofollow" target="_blank">普通树摇动</a>的改进。此外还有大量的优化。</p><p id="27fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Webpack 5还包括许多改进开发者体验的变化。例如，有一个新的命名为块id算法<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#named-chunk-ids" rel="noopener ugc nofollow" target="_blank">在开发模式下默认启用。这种新算法给组块起了人类可读的名字。<code class="fe mc md me mf b">target</code>属性也得到了极大的</a><a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#improved-target-option" rel="noopener ugc nofollow" target="_blank">提升</a>。</p><p id="72ed" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">老实说，我在这里没有足够的空间来涵盖Webpack 5的所有新内容，<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#json-modules" rel="noopener ugc nofollow" target="_blank">那里</a>的<a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#asset-modules" rel="noopener ugc nofollow" target="_blank">只是</a> <a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#uris" rel="noopener ugc nofollow" target="_blank">方式</a> <a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#async-modules" rel="noopener ugc nofollow" target="_blank">太</a> <a class="ae kx" href="https://webpack.js.org/blog/2020-10-10-webpack-5-release/#resolving" rel="noopener ugc nofollow" target="_blank">太多</a>。所以我就讲到这里。-)</p><p id="1d65" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您只是通过Angular CLI间接使用Webpack，那么大部分对您来说应该是“透明”的。但是如果你在你的项目中使用了一个<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/customizing-your-angular-apps-webpack-configuration-4099144949fc">定制的Webpack版本</a>，那么你可能应该看一下<a class="ae kx" href="https://webpack.js.org/migrate/5" rel="noopener ugc nofollow" target="_blank">迁移指南</a>。</p><p id="b60c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，如果你对Webpack的下一步很好奇，那么看看2021年的<a class="ae kx" href="https://webpack.js.org/blog/2020-12-08-roadmap-2021/" rel="noopener ugc nofollow" target="_blank">路线图，当然还有</a><a class="ae kx" href="https://github.com/webpack/webpack/releases/" rel="noopener ugc nofollow" target="_blank">的最新发布说明</a>。</p><h1 id="abaa" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">IE11支持已被否决</h1><p id="dc13" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">听起来很悲伤(我在骗谁呢？)，Angular 12是在贬低对IE11的支持。对于我们大多数人来说，Internet Explorer已经死了，但不幸的是，许多组织仍然在生产中使用它。IE 11的支持将因此被Angular 13移除，这意味着那些组织确实需要开始远离IE(无论如何这是一件好事)。别再找借口了！；-)</p><p id="3742" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦IE支持消失，Angular将变得更小、更快，从而对我们所有人都更好。此外，一旦保持向后兼容传统浏览器的负担消失(IE11是最后一个！)，那么Angular将能够利用现代API(例如，<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties" rel="noopener ugc nofollow" target="_blank"> CSS变量</a>、<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API" rel="noopener ugc nofollow" target="_blank">交集观察者</a>、<a class="ae kx" href="https://css-tricks.com/snippets/css/complete-guide-grid/" rel="noopener ugc nofollow" target="_blank"> CSS网格</a>、<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" rel="noopener ugc nofollow" target="_blank">代理</a>、<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API" rel="noopener ugc nofollow" target="_blank">网页动画</a>，以及<a class="ae kx" href="https://github.com/angular/angular/issues/41840" rel="noopener ugc nofollow" target="_blank">更多</a>)。</p><p id="206d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">真恨不得IE支持都没了！</p><h1 id="b5ec" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">默认情况下严格</h1><p id="2454" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">是的——是的——是的！从Angular 12开始，CLI中默认启用Angular 的<a class="ae kx" href="https://angular.io/guide/strict-mode" rel="noopener ugc nofollow" target="_blank">严格模式。这太棒了。</a></p><p id="6839" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如你所知，我是TypeScript的严格模式的忠实粉丝，但也是Angular的严格模式的忠实粉丝。如果你想知道更多，那么看看我去年写的文章和Minko Gechev的文章<a class="ae kx" href="https://blog.angular.io/with-best-practices-from-the-start-d64881a16de8" rel="noopener ugc nofollow" target="_blank">解释这个变化</a>。</p><h1 id="0f3c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">默认生产版本</h1><p id="f069" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">到目前为止，运行<code class="fe mc md me mf b">ng build</code>命令创建了一个开发版本。从12年开始，<code class="fe mc md me mf b">ng build</code>将默认为生产版本。</p><p id="e621" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">希望它能帮助一些团队避免犯在生产环境中构建和部署开发构建的错误。虽然，我担心犯那个错误的团队仍然会有其他的问题要处理；-)</p><h1 id="34d8" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">内联样式的Sass支持</h1><p id="885c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular很久以前就支持Sass，但是到目前为止，我们只能在外部样式表中使用Sass。有了Angular 12，现在可以将Sass与内联组件样式一起使用(即在<code class="fe mc md me mf b">styles</code>属性中)。</p><p id="db5c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这需要通过将新的<code class="fe mc md me mf b">inlineStyleLanguage</code>属性设置为<code class="fe mc md me mf b">angular.json</code>中的<code class="fe mc md me mf b">true</code>来启用。</p><h1 id="2e7d" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">顺风支架</h1><p id="16cc" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><a class="ae kx" href="https://tailwindcss.com/" rel="noopener ugc nofollow" target="_blank">顺风</a>现已获得Angular官方支持。实际上，支持是在11.2版的Angular CLI中引入的。</p><p id="a07b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">tailwind<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/why-tailwind-just-in-time-mode-is-a-game-changer-and-how-to-use-it-right-now-dubois-sébastien-182db2e64e26">正忙着接管世界</a>，尤其是现在它有了一个<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/why-tailwind-just-in-time-mode-is-a-game-changer-and-how-to-use-it-right-now-dubois-sébastien-182db2e64e26"> rad JIT编译器</a>，Angular中有对它的内置支持真是太棒了。</p><p id="1121" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，向Angular项目添加Tailwind需要<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/adding-tailwind-support-to-a-nrwl-nx-workspace-with-angular-and-storybook-bf890ea882e">定制Webpack构建</a>。不再是了！现在，添加Tailwind就像安装软件包一样简单，使用<code class="fe mc md me mf b">npx tailwindcss init</code>创建<code class="fe mc md me mf b">tailwind.config.js</code>文件，并确保启用<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/why-tailwind-just-in-time-mode-is-a-game-changer-and-how-to-use-it-right-now-dubois-sébastien-182db2e64e26"> Tailwind的JIT模式</a>。</p><h1 id="e49d" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Http改进</h1><p id="cff9" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 12围绕其HTTP支持引入了许多改进。</p><h2 id="e300" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">请求和拦截器的元数据</h2><p id="78ce" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">首先，<code class="fe mc md me mf b">HttpClient</code>现在可以用于存储和检索请求的定制元数据。这对HTTP拦截器特别有用。这个功能可以通过新的<code class="fe mc md me mf b">HttpContext</code>使用。</p><p id="3bc7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，为拦截器提供上下文很复杂，但现在简单多了。现在，<code class="fe mc md me mf b">HttpClient</code>提供的不同HTTP方法包括一个新的<code class="fe mc md me mf b">context: HttpContext</code>选项，我们可以用它来传入一个map。</p><p id="2d1c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><a class="ae kx" href="https://twitter.com/NetanelBasal" rel="noopener ugc nofollow" target="_blank"> Netanel Basal </a>写了一篇关于这个的文章，<a class="ae kx" href="https://netbasal.com/new-in-angular-v12-passing-context-to-http-interceptors-308a1ca2f3dd" rel="noopener ugc nofollow" target="_blank">想了解更多的话可以去看看</a>。</p><h2 id="e4fd" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">HttpParams上的appendAll</h2><p id="75f5" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><code class="fe mc md me mf b">HttpParams</code>类现在有了一个新的<code class="fe mc md me mf b">appendAll</code>方法，可以很容易地一次添加一组参数:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="7f16" class="mm kz iq mf b gy mn mo l mp mq">appendAll(params: {[param: string]: string|string[]}): HttpParams</span></pre><h2 id="28ef" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">参数现在可以作为数字和布尔值传递</h2><p id="cca0" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">以前，数字和布尔值不能直接用作HTTP参数。我们必须把它们转换成字符串。不再是了！</p><h2 id="5b9d" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">HttpStatusCode</h2><p id="6b59" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular以const enum的形式为HTTP状态代码引入了自己的可读名称列表。</p><p id="fcb7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，如果我们想拥有人类可读的名称，我们必须引入自己的解决方案。多亏了这个新功能，我们现在可以使用<code class="fe mc md me mf b">HttpStatusCode</code>。</p><p id="7e4d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="4d16" class="mm kz iq mf b gy mn mo l mp mq">if (response.status === HttpStatusCode.Ok) { <br/>  ... <br/>}</span></pre><p id="bc07" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对于那些在后端和前端都使用TypeScript的人来说，这不是非常有用(因为我们可能都已经有了自己的抽象)，但是如果您的项目只在前端使用TypeScript/Angular，那么这是一个很好的改进。</p><h2 id="7eba" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">xhr工厂</h2><p id="d311" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><code class="fe mc md me mf b">XhrFactory</code>类已经被移动到一个不同的包中。现在由<code class="fe mc md me mf b">angular/common</code>曝光，而不是<code class="fe mc md me mf b">angular/common/http</code>。</p><p id="e95b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，升级中已经包含了一个迁移，所以即使运行<code class="fe mc md me mf b">ng update</code>您也不会注意到；-)</p><h1 id="3da4" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">路由器变更</h1><p id="be9b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">角度路由器在角度12中有一点改变。</p><p id="fa7a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">首先，增强了<code class="fe mc md me mf b">routerLinkActiveOptions</code>指令。现在，可以指定我们是否需要URL的不同部分精确匹配，以便向链接添加CSS类。</p><p id="5cc3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，我们只需要完全匹配(或不匹配)整个URL:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="6cad" class="mm kz iq mf b gy mn mo l mp mq">&lt;a<br/>  routerLink="/products/foo"<br/>  routerLinkActive="highlight-product"<br/>  [routerLinkActiveOptions]="{ exact: true }"<br/>&gt;<br/>  foo<br/>&lt;/a&gt;</span></pre><p id="25a8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在，我们可以为路径、查询参数、矩阵参数和片段提供细粒度的匹配规则:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="0d26" class="mm kz iq mf b gy mn mo l mp mq">&lt;a<br/>  routerLink="/products/foo"<br/>  routerLinkActive="highlight-product"<br/>  [routerLinkActiveOptions]="{ paths: 'exact', queryParams: 'subset', matrixParams: 'ignored', fragment: 'ignored' }"<br/>&gt;<br/>  foo<br/>&lt;/a&gt;</span></pre><p id="f441" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">支持的值有<code class="fe mc md me mf b">exact</code>、<code class="fe mc md me mf b">ignored</code>和<code class="fe mc md me mf b">subset</code>，可用于<code class="fe mc md me mf b">queryParams</code>和<code class="fe mc md me mf b">matrixParams</code>。对于路径，可以传入<code class="fe mc md me mf b">exact</code>或<code class="fe mc md me mf b">subset</code>，传入<code class="fe mc md me mf b">fragment</code>的<code class="fe mc md me mf b">exact</code>或<code class="fe mc md me mf b">ignored</code>。</p><p id="d05c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">注意，路由器的<code class="fe mc md me mf b">isActive</code>方法也接受这些新选项。</p><h2 id="b9a7" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">片段可为空</h2><p id="78e9" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">到目前为止，<code class="fe mc md me mf b">ActivatedRouteSnapshot.fragment</code>不可为空。这已经随着Angular 12而改变了。不过不要太担心；<code class="fe mc md me mf b">ng update</code>为您提供保障。</p><h1 id="ca2c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">形式</h1><h2 id="e18d" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">对发射事件的更多控制</h2><p id="9d1a" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated"><code class="fe mc md me mf b">emitEvent</code>选项被添加到<code class="fe mc md me mf b">FormGroup</code>和<code class="fe mc md me mf b">FormArray</code>的各种方法中。由于这一改变，现在在更多的情况下可以控制是否需要发出事件。</p><p id="8016" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">例如，以前当使用<code class="fe mc md me mf b">FormGroup</code>的<code class="fe mc md me mf b">removeControl</code>方法移除控件时，总是会发出一个事件。有了这个改变，我们现在将能够避免这样的问题。</p><p id="dc36" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mc md me mf b">emitEvent</code>选项被添加到<code class="fe mc md me mf b">FormGroup</code>的以下方法中:</p><ul class=""><li id="3a0f" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><code class="fe mc md me mf b">addControl</code></li><li id="309e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">removeControl</code></li><li id="6a43" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">setControl</code></li></ul><p id="b260" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以及以下<code class="fe mc md me mf b">FormArray</code>的方法:</p><ul class=""><li id="50e5" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><code class="fe mc md me mf b">push</code></li><li id="9970" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">insert</code></li><li id="89aa" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">removeAt</code></li><li id="e9d7" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">setControl</code></li><li id="a263" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">clear</code></li></ul><h2 id="e1ef" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">最小和最大验证器支持模板驱动的表单</h2><p id="76f8" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular的<code class="fe mc md me mf b">min</code>和<code class="fe mc md me mf b">max</code>验证器现在可以用于模板驱动的表单:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="3a53" class="mm kz iq mf b gy mn mo l mp mq">&lt;input [(ngModel)]="foo.bar" [min]="min" [max]="42" /&gt;</span></pre><p id="3e19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">请注意，这是一个突破性的变化，因为这些在以前会被忽略。</p><h1 id="e168" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">i18n</h1><p id="9217" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular的i18n系统在此版本中发生了变化。</p><p id="6110" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">正如公告博客中指出的，目前有许多遗留消息id格式正在使用。这些都很脆弱，可能会因为空白、格式化模板和ICU表达式而出现问题。</p><p id="2bff" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular 12引入了一种新的规范消息id格式(即一种格式来管理它们)。这种格式更有弹性，也更直观。</p><p id="676a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这种格式将减少应用程序中不必要的翻译无效和相关的重新翻译成本，例如，在应用程序中，由于空白改变，翻译不匹配。</p><p id="5aac" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从v11开始，新的项目被自动配置为使用新的消息id，现在已经有工具可以用现有的翻译迁移现有的项目。如果您担心，那么您可以使用<code class="fe mc md me mf b">localize-migrate</code>工具来迁移您的消息id:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="edd3" class="mm kz iq mf b gy mn mo l mp mq">ng extract-i18n --format=legacy-migrate npx localize-migrate --files=*.xlf --map-file=messages.json</span></pre><p id="2eaf" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里找到更多关于<a class="ae kx" href="https://angular.io/guide/migration-legacy-message-id" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><h1 id="123c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">性能改进</h1><p id="9022" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在此版本中，有许多性能改进。最明显的一个是Webpack 5的升级，但还有更多:</p><p id="0338" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">许多未使用的方法已从<code class="fe mc md me mf b">DomAdapter</code>中删除。它很酷，因为它的方法不是树摇动的，并且被包含在所有的角度应用中，正如在<a class="ae kx" href="https://github.com/angular/angular/pull/41102" rel="noopener ugc nofollow" target="_blank">相应的PR </a>中解释的。</p><p id="d00a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular现在为安全的属性访问生成更少的代码；例如像<code class="fe mc md me mf b">a?.b</code>这样的模板表达式和新支持的空合并:<code class="fe mc md me mf b">a ?? b</code>。</p><p id="0812" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular编译器现在支持增量编译，即使存在重定向的源文件。以前，在对经过重复数据消除的源文件进行类型脚本编写时，先前编译的工作无法重用。你可以在这里阅读更多关于那个<a class="ae kx" href="https://github.com/angular/angular/issues/41475" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><p id="4091" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular编译器现在缓存源文件的文件系统路径。之前反复调用<code class="fe mc md me mf b">fs.resolve()</code>，耗时。</p><p id="de2a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mc md me mf b">getDirectives</code>功能得到了改进。随着这一变化，<code class="fe mc md me mf b">ng</code>名称空间也进行了扩展，包括了一个新的<code class="fe mc md me mf b">getDirectiveMetadata</code>实用程序。</p><p id="a425" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还有更多。</p><h1 id="5199" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">ng API改进</h1><p id="88b6" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 12改进了我们可以从浏览器开发工具中使用的<code class="fe mc md me mf b">ng</code> <a class="ae kx" href="https://juristr.com/blog/2019/09/debugging-angular-ivy-console/" rel="noopener ugc nofollow" target="_blank">调试API </a>。</p><p id="06fa" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有一个叫做<code class="fe mc md me mf b">getDirectiveMetadata</code>的新函数，可以用来检索关于组件和指令的信息。我不认为我们会经常需要它，但是未来的开发工具改进很可能会依赖于它。你可以在这里找到更多的<a class="ae kx" href="https://github.com/angular/angular/pull/41525" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="9d73" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">还实现了一个名为<code class="fe mc md me mf b">esetProfiler</code>的新分析器功能，它在生产模式下也是可用的。这个新函数可以在许多场景中调用。例如，它可以用来跟踪模板创建持续时间、模板更新、生命周期挂钩处理等。同样，这个API将被即将到来的开发工具所利用，为我们提供更多关于我们的应用程序在运行时如何执行的信息。</p><p id="fbb2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这一点上，这仍然是实验性的，但是我想我们以后会听到更多关于它的内容。我很好奇是否/何时像Sentry这样的工具会集成对收集这种信息的支持，以便为我们提供有用的性能仪表板。</p><h1 id="b67a" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">新的开发工具</h1><p id="6754" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular 12发布几天后，Angular团队<a class="ae kx" href="https://blog.angular.io/introducing-angular-devtools-2d59ff4cf62f" rel="noopener ugc nofollow" target="_blank">宣布</a>为谷歌Chrome提供全新的Angular开发工具。你可以在这里下载那些<a class="ae kx" href="https://chrome.google.com/webstore/detail/angular-devtools/ienfalfjdbdpebioblfackkekamfmbnh/related?hl=en" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="8da3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用这个全新的浏览器扩展，您可以在开发过程中轻松检查您的Angular应用程序。它支持:</p><ul class=""><li id="707e" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">可视化应用程序的结构(例如，检查组件树)</li><li id="a60d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">浏览和编辑组件</li><li id="76b9" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">剖析性能</li></ul><p id="3bf4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">使用嵌入式概要分析器，我们可以记录变更检测事件，并在事件发生时进行预览。对于每个变化检测周期，我们可以查看花费了多长时间，哪些组件花费了最长时间，该周期是否导致了帧丢失。</p><p id="a5c4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Angular以前通过<a class="ae kx" href="https://augury.rangle.io" rel="noopener ugc nofollow" target="_blank">占卜</a>项目拥有半官方开发工具(这是新工具的基础！)，但这些与常春藤不兼容。所以这对Angular社区来说是个好消息！</p><h1 id="4cf6" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">还有更多…</h1><p id="9c8c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在这个版本中还有很多小的变化。这里有一个快速概述。</p><h2 id="3a90" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">APP_INITIALIZER现在支持可观测量</h2><p id="58a4" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">到目前为止，还不能通过<code class="fe mc md me mf b">APP_INITIALIZER</code>使用Observables。从Angular 12开始，我们现在可以这样做了，这将允许更干净的代码！</p><p id="b65e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您还不知道Angular的这个特性，<code class="fe mc md me mf b">APP_INITIALIZER</code>是<a class="ae kx" href="https://angular.io/api/core/APP_INITIALIZER" rel="noopener ugc nofollow" target="_blank">的一个标记</a>，我们可以用它来定义在应用程序初始化期间需要执行的函数。如果这个函数是异步的，返回一个<code class="fe mc md me mf b">Promise</code>或者一个<code class="fe mc md me mf b">Observable</code> (new :p)，那么Angular在启动应用程序之前等待它完成。</p><p id="7627" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这一变化非常受欢迎，因为这意味着我们可以使用RxJS编写更多的代码，而不是“退回到”T4 API。</p><p id="9f85" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里阅读更多关于那个<a class="ae kx" href="https://github.com/angular/angular/issues/15088" rel="noopener ugc nofollow" target="_blank">的内容。</a></p><h2 id="bde8" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">动画的运行时控制</h2><p id="1d8d" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">以前，禁用动画的唯一方法是提供<code class="fe mc md me mf b">NoopAnimationsModule</code>。从Angular 12开始，现在可以基于运行时信息禁用动画，使用<code class="fe mc md me mf b">BrowserAnimationModule.withConfig</code>方法，并向其传递<code class="fe mc md me mf b">disableAnimations</code>布尔属性。</p><h2 id="1d94" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">一种新的位置服务历史查询方法</h2><p id="d9d2" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular的<code class="fe mc md me mf b">LocationService</code>现在包含了一个<code class="fe mc md me mf b">historyGo</code>方法，可以用来导航到会话历史中的特定页面，通过它与当前页面的相对位置来识别。该方法对应于原生的<code class="fe mc md me mf b">window.history.go</code>方法。<a class="ae kx" href="https://developer.mozilla.org/en-US/docs/Web/API/History_API#moving_to_a_specific_point_in_history" rel="noopener ugc nofollow" target="_blank">查看MDN </a>中的一些例子。</p><h2 id="59b3" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">语言服务改进</h2><p id="5293" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">语言服务为ide提供了所有关于角度代码的有用见解，在这个版本中也得到了改进。</p><p id="cb30" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在Angular 12中，语言服务是默认启用的(以前需要我们选择加入)。</p><p id="3782" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">从Angular 12开始，它还会检测<a class="ae kx" rel="noopener ugc nofollow" target="_blank" href="/angular-template-type-checking-e2c99c50f999">严格模板类型检查</a>是否未启用，并且<a class="ae kx" href="https://github.com/angular/angular/pull/40423" rel="noopener ugc nofollow" target="_blank">会建议您启用那些</a>。</p><p id="9170" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">语言服务现在还包括性能跟踪功能，可以用来跟踪性能。这可以在VSCode，<a class="ae kx" href="https://github.com/angular/angular/pull/41319" rel="noopener ugc nofollow" target="_blank">中启用，如这里所解释的</a>(尽管这是相当低的级别)。</p><p id="2126" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你还不知道语言服务，看看官方文件，或者忍者小队写的博客，或者视频介绍。</p><h2 id="cfa5" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">直接从HTML模板禁用lint规则</h2><p id="798c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular模板编译器现在跟踪HTML注释。</p><p id="5354" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以前，不可能从HTML模板中禁用linter规则，因为Angular模板编译器会忽略注释。解决方法是从组件的控制器中禁用整个模板的那些规则。由于这一改变，现在可以从模板中更精确地完成这项工作:</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="cebd" class="mm kz iq mf b gy mn mo l mp mq">&lt;!-- eslint-disable-next-line @angular-eslint/template/no-any --&gt;<br/>&lt;span&gt;{{ $any(foo).bar }}&lt;/span&gt;</span></pre><p id="ba0d" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">干净代码万岁！</p><h2 id="771c" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">数据管道现在支持ICU标准的独立一周</h2><p id="069e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">以前，<a class="ae kx" href="https://github.com/angular/angular/issues/26922" rel="noopener ugc nofollow" target="_blank">不可能使用DatePipe将日期格式化为独立的一周中的某一天。</a></p><p id="d54e" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于这一改变，现在支持芬兰语的日期格式，我确信这对于Angular社区的一小部分人来说是个好消息。</p><h2 id="6c2d" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">在可注入的装饰器的字段中提供对forwardRef的支持</h2><p id="c83f" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">现在可以在<code class="fe mc md me mf b">@Injectable</code>装饰器的<code class="fe mc md me mf b">providedIn</code>字段中使用<code class="fe mc md me mf b">forwardRef</code>。</p><h2 id="d2e6" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">ResourceHost接口上的新transformResource挂钩</h2><p id="cf69" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">一个<code class="fe mc md me mf b">transformResource</code>方法被添加到了<code class="fe mc md me mf b">ResourceHost</code>接口中。得益于此，工具现在可以做一些事情，比如为内联样式引入预处理支持。这就是为什么能够用内联样式支持SASS的原因。</p><p id="2043" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在这里和<a class="ae kx" href="https://github.com/angular/angular/commit/1de04b124e1e92ea21a070c9d928664f193d220c" rel="noopener ugc nofollow" target="_blank">这里</a>了解更多。</p><h2 id="ae4e" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">可以创建自定义路由器插座实现</h2><p id="b91c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">到目前为止，创建自定义路由器插座是可能的，但是需要通过一些关卡(例如，用<code class="fe mc md me mf b">ChildrenOutletContexts</code>注册自定义插座)。</p><p id="290b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">角度12为定制的刳刨机出口提供了<a class="ae kx" href="https://github.com/angular/angular/commit/a82fddf1ce6166e0f697e429370eade114094670" rel="noopener ugc nofollow" target="_blank">清洁器支撑。</a></p><h1 id="ba0c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">错误修复</h1><p id="876b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">像往常一样，这个版本中包含了大量的错误修复。</p><p id="5ff7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">以下是发行说明的副本:</p><ul class=""><li id="14d2" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">动画:确保一致的过渡名称空间顺序(<a class="ae kx" href="https://github.com/angular/angular/issues/19854" rel="noopener ugc nofollow" target="_blank"># 19854</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/01cc99589bc449eaf3b1de2c94636de878843fba" rel="noopener ugc nofollow" target="_blank">01cc 995</a>)</li><li id="1a6b" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">动画:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e918250a0624cff9bbbbdb016a069303a99fb8cc" rel="noopener ugc nofollow" target="_blank">e 918250</a>)</li><li id="5c56" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">动画:移除根视图时清理DOM元素(<a class="ae kx" href="https://github.com/angular/angular/issues/41059" rel="noopener ugc nofollow" target="_blank"># 41059</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/c49b28013a6c017c9afc73bbc00bb4fdcf15c70e" rel="noopener ugc nofollow" target="_blank">c49b 280</a>)</li><li id="0629" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">动画:允许阴影DOM(<a class="ae kx" href="https://github.com/angular/angular/issues/40134" rel="noopener ugc nofollow" target="_blank"># 40134</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/dad42c8cd669357f9c862023abc5f4695863040d" rel="noopener ugc nofollow" target="_blank">dad 42 c 8</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/25672" rel="noopener ugc nofollow" target="_blank"> #25672 </a>中元素的动画</li><li id="fb45" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">动画:移除根视图时清理DOM元素(<a class="ae kx" href="https://github.com/angular/angular/issues/41001" rel="noopener ugc nofollow" target="_blank"> #41001 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/a31da4850788800ba9735d617e7e3bb621a79c93" rel="noopener ugc nofollow" target="_blank"> a31da48 </a>)</li><li id="f60f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">bazel:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/85032460f133162cc712ab3b9f04d42ff3b6d6d9" rel="noopener ugc nofollow" target="_blank">8503246</a>)</li><li id="0fdf" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">bazel:为rules _ nodejs(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/696f7bc" rel="noopener ugc nofollow" target="_blank">696 F7 BC</a>)中的最新变更更新构建工具</li><li id="b028" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">bazel:更新集成测试以使用<a class="ae kx" href="mailto:rules_nodejs@3.1.0" rel="noopener ugc nofollow" target="_blank">rules _ nodejs @ 3 . 1 . 0</a>(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/34de89a" rel="noopener ugc nofollow" target="_blank">34de 89 a</a>)</li><li id="e767" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">bazel:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/2c90391" rel="noopener ugc nofollow" target="_blank">2c 90391</a>)</li><li id="6cec" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">benchpress:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e721a5d" rel="noopener ugc nofollow" target="_blank">e 721 a5d</a>)</li><li id="6c92" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">常用:为带有HttpClient请求体的布尔值添加右content type(<a class="ae kx" href="https://github.com/angular/angular/issues/38924" rel="noopener ugc nofollow" target="_blank"># 38924</a>)(<a class="ae kx" href="https://github.com/angular/angular/issues/41885" rel="noopener ugc nofollow" target="_blank"># 41885</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/922a60283183c47a268fd084302b2bc87267a73e" rel="noopener ugc nofollow" target="_blank">922a 602</a>)</li><li id="fcc1" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">通用:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"> #41822 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/f2b6fd87056cf3159e8ecc275ce654e47fdfa6f0" rel="noopener ugc nofollow" target="_blank"> f2b6fd8 </a>)</li><li id="ce33" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">常见:视口滚动条在阴影DOM(<a class="ae kx" href="https://github.com/angular/angular/issues/41644" rel="noopener ugc nofollow" target="_blank"># 41644</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/c0f5ba3d36b2509a71d09c436d247211a58ee80d" rel="noopener ugc nofollow" target="_blank">c 0 F5 ba 3</a>)中找不到元素，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41470" rel="noopener ugc nofollow" target="_blank"> #41470 </a></li><li id="4637" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">普通:临时再出口折旧<code class="fe mc md me mf b">XhrFactory</code>(<a class="ae kx" href="https://github.com/angular/angular/issues/41393" rel="noopener ugc nofollow" target="_blank"># 41393</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/7dfa446c4ace99f4b64069cf672dcaa3665a1f5b" rel="noopener ugc nofollow" target="_blank">7 DFA 446</a>)</li><li id="96a3" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">常见:清除位置变化监听器当根视图被移除(<a class="ae kx" href="https://github.com/angular/angular/issues/40867" rel="noopener ugc nofollow" target="_blank"># 40867</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/38524c4d29290d3339ad2d7335a0ea84f5701d26" rel="noopener ugc nofollow" target="_blank">38524 C4</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/31546" rel="noopener ugc nofollow" target="_blank"> #31546 </a></li><li id="004d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">common:允许数字或布尔值作为http参数(<a class="ae kx" href="https://github.com/angular/angular/issues/40663" rel="noopener ugc nofollow" target="_blank"># 40663</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/91cdc11aa0347d1b71f2f732e00af9c3ff8078fc" rel="noopener ugc nofollow" target="_blank">91 CDC 11</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/23856" rel="noopener ugc nofollow" target="_blank"> #23856 </a></li><li id="1a71" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">常用:避免ngtemplate outlet(<a class="ae kx" href="https://github.com/angular/angular/issues/40360" rel="noopener ugc nofollow" target="_blank"># 40360</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/d3705b3284113f752ee05e9f0d2f6e75c723ea5b" rel="noopener ugc nofollow" target="_blank">d 3705 B3</a>)中上下文对象的变异，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/24515" rel="noopener ugc nofollow" target="_blank"> #24515 </a></li><li id="1697" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:在封装样式中保留@page规则(<a class="ae kx" href="https://github.com/angular/angular/issues/41915" rel="noopener ugc nofollow" target="_blank"> #41915 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/3e365ba81e313ee31af7a8e9042e33fc046067e0" rel="noopener ugc nofollow" target="_blank"> 3e365ba </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/26269" rel="noopener ugc nofollow" target="_blank"> #26269 </a></li><li id="967e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:从<code class="fe mc md me mf b">@font-face</code>规则中剥离作用域选择器(<a class="ae kx" href="https://github.com/angular/angular/issues/41815" rel="noopener ugc nofollow" target="_blank"># 41815</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/2a11cdab51a2d8d7f644ceca744568a1617f5242" rel="noopener ugc nofollow" target="_blank">2a 11 CDA</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41751" rel="noopener ugc nofollow" target="_blank"> #41751 </a></li><li id="6bad" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/bae81269c7461063821be7beb66b516e5a8995ce" rel="noopener ugc nofollow" target="_blank">BAE 8126</a>)</li><li id="e720" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:非文字内联模板在部分编译中被错误处理(<a class="ae kx" href="https://github.com/angular/angular/issues/41583" rel="noopener ugc nofollow" target="_blank"># 41583</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/ab257b370127dce70bd3ee7ad6d64d3a9ad5ae95" rel="noopener ugc nofollow" target="_blank">ab 257 B3</a>)</li><li id="816d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:没有为替代名称空间内的ng-template生成更新指令(<a class="ae kx" href="https://github.com/angular/angular/issues/41669" rel="noopener ugc nofollow" target="_blank"># 41669</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/2bcbbda78913be014534fde72318ab09795350f9" rel="noopener ugc nofollow" target="_blank">2 bcbbda</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41308" rel="noopener ugc nofollow" target="_blank"> #41308 </a></li><li id="fcb6" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:避免用向后的跨度(<a class="ae kx" href="https://github.com/angular/angular/issues/41581" rel="noopener ugc nofollow" target="_blank"> #41581 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/e1a29308933e99ee3e0d92aae42b33834f20f50a" rel="noopener ugc nofollow" target="_blank"> e1a2930 </a>)解析EmptyExpr</li><li id="0d39" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:处理区分大小写的CSS自定义属性(<a class="ae kx" href="https://github.com/angular/angular/issues/41380" rel="noopener ugc nofollow" target="_blank"> #41380 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/e112e320bf6c2b60e8ecea46f80bcaec593c65b7" rel="noopener ugc nofollow" target="_blank"> e112e32 </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41364" rel="noopener ugc nofollow" target="_blank"> #41364 </a></li><li id="c220" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:在部分组件声明(<a class="ae kx" href="https://github.com/angular/angular/issues/41353" rel="noopener ugc nofollow" target="_blank"># 41353</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/ff9470b0a0196a3638f19028bba15e002cb0ff27" rel="noopener ugc nofollow" target="_blank">ff 9470 b</a>)的JIT编译中包含使用的组件，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41104" rel="noopener ugc nofollow" target="_blank"> #41104 </a> <a class="ae kx" href="https://github.com/angular/angular/issues/41318" rel="noopener ugc nofollow" target="_blank"> #41318 </a></li><li id="85f9" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:支持多个<code class="fe mc md me mf b">:host-context()</code>选择器(<a class="ae kx" href="https://github.com/angular/angular/issues/40494" rel="noopener ugc nofollow" target="_blank"># 40494</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/07b7af3" rel="noopener ugc nofollow" target="_blank">07 B7 af 3</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/19199" rel="noopener ugc nofollow" target="_blank"> #19199 </a></li><li id="21bf" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/f728490" rel="noopener ugc nofollow" target="_blank">f 728490</a>)</li><li id="8b81" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:对间接模板(<a class="ae kx" href="https://github.com/angular/angular/issues/41973" rel="noopener ugc nofollow" target="_blank"># 41973</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/7a4d9805ea73d1b6a7659987da77d266d5e01b88" rel="noopener ugc nofollow" target="_blank">7a4d 980</a>)的源映射URL使用“”，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/40854" rel="noopener ugc nofollow" target="_blank"> #40854 </a></li><li id="3db3" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:将链接器公开为一个Babel插件(<a class="ae kx" href="https://github.com/angular/angular/issues/41918" rel="noopener ugc nofollow" target="_blank"> #41918 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/8fdac8f4361fd4ac0f20c21c98289c19e8864347" rel="noopener ugc nofollow" target="_blank"> 8fdac8f </a>)</li><li id="d599" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:在引用发射器(<a class="ae kx" href="https://github.com/angular/angular/issues/41866" rel="noopener ugc nofollow" target="_blank"> #41866 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/75bb931889b946c243161a6ce0503bc7d08a6565" rel="noopener ugc nofollow" target="_blank"> 75bb931 </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41443" rel="noopener ugc nofollow" target="_blank"> #41443 </a> <a class="ae kx" href="https://github.com/angular/angular/issues/41277" rel="noopener ugc nofollow" target="_blank"> #41277 </a>中优先使用无别名导出</li><li id="7eeb" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:允许链接器处理缩小的布尔值(<a class="ae kx" href="https://github.com/angular/angular/issues/41747" rel="noopener ugc nofollow" target="_blank"># 41747</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/1fb6724b1f66c4681ddb201bc9b5441d20f5b920" rel="noopener ugc nofollow" target="_blank">1fb 6724</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41655" rel="noopener ugc nofollow" target="_blank"> #41655 </a></li><li id="b3f7" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:匹配字符串索引的部分声明(<a class="ae kx" href="https://github.com/angular/angular/issues/41747" rel="noopener ugc nofollow" target="_blank"># 41747</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/f8857507642f5d12eebf4ef1ca68b63cc51f4f81" rel="noopener ugc nofollow" target="_blank">f 885750</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41655" rel="noopener ugc nofollow" target="_blank"> #41655 </a></li><li id="70e8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/5b463f4541946c795835c9d9cfd7a21e7b0caffc" rel="noopener ugc nofollow" target="_blank">5b 463 F4</a>)</li><li id="c183" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:自动完成模板中的文字类型。(<a class="ae kx" href="https://github.com/angular/angular/issues/41456" rel="noopener ugc nofollow" target="_blank"># 41456</a>)(<a class="ae kx" href="https://github.com/angular/angular/issues/41645" rel="noopener ugc nofollow" target="_blank"># 41645</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/8b2b5ef903a21b599dfc4bfe8b0c64f7c136c3a9" rel="noopener ugc nofollow" target="_blank">8 B2 b5 ef</a>)</li><li id="25cc" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:如果组件没有内联样式，请不要出错(<a class="ae kx" href="https://github.com/angular/angular/issues/41602" rel="noopener ugc nofollow" target="_blank"> #41602 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/a5fe8b95893798467c4eea2b3d38d49f6d0ce1b3" rel="noopener ugc nofollow" target="_blank"> a5fe8b9 </a>)</li><li id="d3a3" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:确保编译器正确跟踪<code class="fe mc md me mf b">ts.Program</code>(<a class="ae kx" href="https://github.com/angular/angular/issues/41291" rel="noopener ugc nofollow" target="_blank"># 41291</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/deacc741e0ee41666292d2e2c07812a78daf5d6f" rel="noopener ugc nofollow" target="_blank">deac 74</a>)</li><li id="04d8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:防止在增量重新编译中省略默认导入(<a class="ae kx" href="https://github.com/angular/angular/issues/41557" rel="noopener ugc nofollow" target="_blank"># 41557</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/7f1651574ee95eaaa5f636fc37be7b07d1a808e5" rel="noopener ugc nofollow" target="_blank">7f 16515</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41377" rel="noopener ugc nofollow" target="_blank"> #41377 </a></li><li id="5e95" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:将<code class="fe mc md me mf b">rootDirs</code>解析为绝对(<a class="ae kx" href="https://github.com/angular/angular/issues/41359" rel="noopener ugc nofollow" target="_blank"># 41359</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/3e0fda96b827e577cc300f46e8497cb6c810ad61" rel="noopener ugc nofollow" target="_blank">3 E0 FDA 9</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/36290" rel="noopener ugc nofollow" target="_blank"> #36290 </a></li><li id="1803" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:在类型检查配置(<a class="ae kx" href="https://github.com/angular/angular/issues/41043" rel="noopener ugc nofollow" target="_blank"># 41043</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/09aefd29045db77689f4dc16a6abae09a79cfb81" rel="noopener ugc nofollow" target="_blank">09 aefd 2</a>)中添加<code class="fe mc md me mf b">useInlining</code>选项，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/40963" rel="noopener ugc nofollow" target="_blank"> #40963 </a></li><li id="5aaf" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli: <code class="fe mc md me mf b">readConfiguration</code>现有选项应覆盖tsconfig中的选项(<a class="ae kx" href="https://github.com/angular/angular/issues/40694" rel="noopener ugc nofollow" target="_blank"># 40694</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/b7c4d07e81277f7aed566e443d1d4e1395c5a2f4" rel="noopener ugc nofollow" target="_blank">b7c4 d 07</a>)</li><li id="6fb9" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:从节点(<a class="ae kx" href="https://github.com/angular/angular/issues/40694" rel="noopener ugc nofollow" target="_blank"> #40694 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/5eb195416bf73f2fa59de52531724d8d19392975" rel="noopener ugc nofollow" target="_blank"> 5eb1954 </a>)扩展tsconfig中的<code class="fe mc md me mf b">angularCompilerOptions</code>，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/36715" rel="noopener ugc nofollow" target="_blank"> #36715 </a></li><li id="bd24" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:针对rules _ nodejs(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/d7f5755" rel="noopener ugc nofollow" target="_blank">d7f 5755</a>)中的最新更改更新ngcc集成测试</li><li id="41bb" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">编译器-cli:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/b75d7cb" rel="noopener ugc nofollow" target="_blank">b 75d 7 CB</a>)</li><li id="7e96" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:不保留动态编译的组件和模块(<a class="ae kx" href="https://github.com/angular/angular/issues/42003" rel="noopener ugc nofollow" target="_blank"># 42003</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/1449c5c8ff3bf706c501130fe261627effe5d212" rel="noopener ugc nofollow" target="_blank">1449 c5c</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/19997" rel="noopener ugc nofollow" target="_blank"> #19997 </a></li><li id="6671" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:围绕ngOnDestroy生命周期挂钩调用分析器(<a class="ae kx" href="https://github.com/angular/angular/issues/41969" rel="noopener ugc nofollow" target="_blank"># 41969</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e9ddc57f948f0cb18e3e334aeb3084d1b49689b1" rel="noopener ugc nofollow" target="_blank">e9ddc 57</a>)</li><li id="3d2f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:异步管道现在与RxJS 7(<a class="ae kx" href="https://github.com/angular/angular/issues/41590" rel="noopener ugc nofollow" target="_blank"># 41590</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/9759bca339b44ed78ec6aafab0336d531d285f90" rel="noopener ugc nofollow" target="_blank">9759 BCA</a>)兼容</li><li id="0f6d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:用表达式绑定(<a class="ae kx" href="https://github.com/angular/angular/issues/41882" rel="noopener ugc nofollow" target="_blank"># 41882</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/73c6c64f82d45c34203d4d18d759ad0c33a6b221" rel="noopener ugc nofollow" target="_blank">73c 6 c 64</a>)处理多个i18n属性，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41869" rel="noopener ugc nofollow" target="_blank"> #41869 </a></li><li id="5674" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"> #41822 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/f9c1f089573e0158eb5e4443658cfd25aeeeb091" rel="noopener ugc nofollow" target="_blank"> f9c1f08 </a>)</li><li id="6fcb" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:检测已经使用TS 4.2(<a class="ae kx" href="https://github.com/angular/angular/issues/41305" rel="noopener ugc nofollow" target="_blank"># 41305</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/274dc15452739e4fab2f647804a64d5b797cfed5" rel="noopener ugc nofollow" target="_blank">274 dc15</a>)降级的合成构造函数，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41298" rel="noopener ugc nofollow" target="_blank"> #41298 </a></li><li id="4350" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:将<code class="fe mc md me mf b">emitDistinctChangesOnlyDefaultValue</code>切换到true(<a class="ae kx" href="https://github.com/angular/angular/issues/41121" rel="noopener ugc nofollow" target="_blank"># 41121</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/70962465b5795f0a192f745016b1c461e7c8790b" rel="noopener ugc nofollow" target="_blank">7096246</a>)</li><li id="1508" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:删除重复的空_OBJ常量(<a class="ae kx" href="https://github.com/angular/angular/issues/41066" rel="noopener ugc nofollow" target="_blank"># 41066</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/bf158e7ff0715aabeae3c2c1ac923bf8cc7e4cfd" rel="noopener ugc nofollow" target="_blank">BF 158 e 7</a>)</li><li id="f919" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">core:删除重复的EMPTY_ARRAY常量(<a class="ae kx" href="https://github.com/angular/angular/issues/40991" rel="noopener ugc nofollow" target="_blank"># 40991</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e12d9dec64bc3d02e58f8f85a65a939394fb9531" rel="noopener ugc nofollow" target="_blank">e12d 9 de</a>)</li><li id="1a01" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:允许更新EmbeddedViewRef上下文(<a class="ae kx" href="https://github.com/angular/angular/issues/40360" rel="noopener ugc nofollow" target="_blank"># 40360</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/a3e17190e7e7e0329ed3643299c24d5fd510b7d6" rel="noopener ugc nofollow" target="_blank">a3e 1719</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/24515" rel="noopener ugc nofollow" target="_blank"> #24515 </a></li><li id="b8e1" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:使DefaultIterableDiffer保持副本的顺序(<a class="ae kx" href="https://github.com/angular/angular/issues/23941" rel="noopener ugc nofollow" target="_blank"># 23941</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/a826926" rel="noopener ugc nofollow" target="_blank">a 826926</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/23815" rel="noopener ugc nofollow" target="_blank"> #23815 </a></li><li id="9e9d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">核心:NgZone加煤选项应正确触发on stable(<a class="ae kx" href="https://github.com/angular/angular/issues/40540" rel="noopener ugc nofollow" target="_blank"># 40540</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/22f9e45" rel="noopener ugc nofollow" target="_blank">22f9e 45</a>)</li><li id="cd75" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">元素:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"> #41822 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/4f5d094f3a385cdc6d93c7676457484e3d8b6b09" rel="noopener ugc nofollow" target="_blank"> 4f5d094 </a>)</li><li id="d422" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">元素:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/efd4149" rel="noopener ugc nofollow" target="_blank">EFD 4149</a>)</li><li id="10b7" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">表单:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/dc975bac93a8087d1f31a31db60ef313147e589f" rel="noopener ugc nofollow" target="_blank">DC 975 ba</a>)</li><li id="ff99" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">http:完成超时请求(<a class="ae kx" href="https://github.com/angular/angular/issues/39807" rel="noopener ugc nofollow" target="_blank"># 39807</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/61a0b6d" rel="noopener ugc nofollow" target="_blank">61a 0b 6d</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/26453" rel="noopener ugc nofollow" target="_blank"> #26453 </a></li><li id="c7e8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">http:XMLHttpRequest中止事件发出错误(<a class="ae kx" href="https://github.com/angular/angular/issues/40767" rel="noopener ugc nofollow" target="_blank"># 40767</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/3897265" rel="noopener ugc nofollow" target="_blank">3897265</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/22324" rel="noopener ugc nofollow" target="_blank"> #22324 </a></li><li id="6c37" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">语言-服务:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/9b6198c16f122dd934ac6a66d2ada21df26839b5" rel="noopener ugc nofollow" target="_blank">9b 6198 c</a>)</li><li id="cb0a" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">语言服务:使用脚本版本进行增量编译(<a class="ae kx" href="https://github.com/angular/angular/issues/41475" rel="noopener ugc nofollow" target="_blank"># 41475</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/78236bfdcaeb66c5846eb0435d727942bb88f7c5" rel="noopener ugc nofollow" target="_blank">78236 BF</a>)</li><li id="f767" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">语言-服务:仅在模板中提供角度属性完成(<a class="ae kx" href="https://github.com/angular/angular/issues/41278" rel="noopener ugc nofollow" target="_blank"> #41278 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/0226a11c185da2d1e6f7833972d3f12205a6ae59" rel="noopener ugc nofollow" target="_blank"> 0226a11 </a>)</li><li id="e370" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">语言-服务:添加插件选项强制strict templates(<a class="ae kx" href="https://github.com/angular/angular/issues/41062" rel="noopener ugc nofollow" target="_blank"># 41062</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e9e7c33f3c170648ec8c86d859980c7fe78fba39" rel="noopener ugc nofollow" target="_blank">e9e7c 33</a>)</li><li id="c07e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">语言-服务:使用Ivy和视图引擎的单一入口点(<a class="ae kx" href="https://github.com/angular/angular/issues/40967" rel="noopener ugc nofollow" target="_blank"># 40967</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e986a9787b7787c3cffef69d06a2e7e1228e3f40" rel="noopener ugc nofollow" target="_blank">e986a 97</a>)</li><li id="1b02" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">localize:将错误放松为目标丢失警告(<a class="ae kx" href="https://github.com/angular/angular/issues/41944" rel="noopener ugc nofollow" target="_blank"># 41944</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/35ceed2061a890a70576dc7afa0b779f3779ae7b" rel="noopener ugc nofollow" target="_blank">35 ceed 2</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/21690" rel="noopener ugc nofollow" target="_blank"> #21690 </a></li><li id="961c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">本地化:更新支持的节点版本范围，只包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/658ed1f904ef0013c3b08e2b2182cf246ef55b2b" rel="noopener ugc nofollow" target="_blank">658 ed1f</a>)</li><li id="acd0" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">localize:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/4b469c9" rel="noopener ugc nofollow" target="_blank">4b 469 c 9</a>)</li><li id="6653" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">ngcc:检测已经使用TS 4.2(<a class="ae kx" href="https://github.com/angular/angular/issues/41305" rel="noopener ugc nofollow" target="_blank"># 41305</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/8d3da56eda12070df1fb473c8609f3a94d77bfd6" rel="noopener ugc nofollow" target="_blank">8d 3d a56</a>)降级的合成构造函数，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41298" rel="noopener ugc nofollow" target="_blank"> #41298 </a></li><li id="1b38" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台浏览器:如果使用影子DOM封装(<a class="ae kx" href="https://github.com/angular/angular/issues/42005" rel="noopener ugc nofollow" target="_blank"> #42005 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/d5555558d00774520dbda40d48721bda2cb9dd1a" rel="noopener ugc nofollow" target="_blank"> d555555 </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/36655" rel="noopener ugc nofollow" target="_blank"> #36655 </a>，防止样式节点内存泄漏</li><li id="4023" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台浏览器:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/ea05cfd0c5a99840f4522b604c33a5b2f7f25f7d" rel="noopener ugc nofollow" target="_blank">ea 05 CFD</a>)</li><li id="db39" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台浏览器:配置<code class="fe mc md me mf b">XhrFactory</code>使用<code class="fe mc md me mf b">BrowserXhr</code>(<a class="ae kx" href="https://github.com/angular/angular/issues/41313" rel="noopener ugc nofollow" target="_blank"># 41313</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/e0028e57410281e190caa74e0986320f6591d27b" rel="noopener ugc nofollow" target="_blank">e 0028 e 5</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41311" rel="noopener ugc nofollow" target="_blank"> #41311 </a></li><li id="f53f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台浏览器:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/7ecfd2d" rel="noopener ugc nofollow" target="_blank">7 ecfd 2d</a>)</li><li id="d569" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台-浏览器-动态:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/bc45029a5437bcea45fa00549241685a1a3f32d0" rel="noopener ugc nofollow" target="_blank">BC 45029</a>)</li><li id="2fa6" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">平台-服务器:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/4b9d4fa3e729a3af13fb5b50de3e5c73c1d6923f" rel="noopener ugc nofollow" target="_blank">4b 9 D4 fa</a>)</li><li id="4b38" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">路由器:更新支持的节点版本范围以仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/0067edd1469a428c11bbe6358fd5650e79abf774" rel="noopener ugc nofollow" target="_blank">0067 edd</a>)</li><li id="90d3" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">路由器:仅当重用策略指示它应该重新连接(<a class="ae kx" href="https://github.com/angular/angular/issues/30263" rel="noopener ugc nofollow" target="_blank"> #30263 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/a4ff071e3f08e3de6d4d3f97c747c2f42b827c49" rel="noopener ugc nofollow" target="_blank"> a4ff071 </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/23162" rel="noopener ugc nofollow" target="_blank"> #23162 </a>时，才检索存储的路由</li><li id="69b8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">路由器:递归合并空路径匹配(<a class="ae kx" href="https://github.com/angular/angular/issues/41584" rel="noopener ugc nofollow" target="_blank"> #41584 </a> ) ( <a class="ae kx" href="https://github.com/angular/angular/commit/1179dc8cb32c9fc451d2af9215c4740af9d2e291" rel="noopener ugc nofollow" target="_blank"> 1179dc8 </a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/41481" rel="noopener ugc nofollow" target="_blank"> #41481 </a></li><li id="b433" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">路由器:片段可以为空(<a class="ae kx" href="https://github.com/angular/angular/issues/37336" rel="noopener ugc nofollow" target="_blank"># 37336</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/b5551609fe02787641bdfdb0a6edfded413a3b52" rel="noopener ugc nofollow" target="_blank">b 555160</a>)，关闭<a class="ae kx" href="https://github.com/angular/angular/issues/23894" rel="noopener ugc nofollow" target="_blank"> #23894 </a> <a class="ae kx" href="https://github.com/angular/angular/issues/34197" rel="noopener ugc nofollow" target="_blank"> #34197 </a></li><li id="23ff" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">路由器:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/350dada" rel="noopener ugc nofollow" target="_blank">350 dada</a>)</li><li id="b83f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">服务人员:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/6b823d7071d59234ab52bdf7eaa248df6b7d9faa" rel="noopener ugc nofollow" target="_blank">6b 823d 7</a>)</li><li id="bd28" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">service-worker:更新JSON.parse用法的类型转换(<a class="ae kx" href="https://github.com/angular/angular/issues/40710" rel="noopener ugc nofollow" target="_blank"># 40710</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/4f7ff96" rel="noopener ugc nofollow" target="_blank">4 F7 ff 96</a>)</li><li id="0aa0" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">升级:在使用ngMocks时保留$ interval . flush(<a class="ae kx" href="https://github.com/angular/angular/issues/30229" rel="noopener ugc nofollow" target="_blank"># 30229</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/87dc8511ccb9c75d78866ebd2c250ea96fc91bd0" rel="noopener ugc nofollow" target="_blank">87dc 851</a>)</li><li id="d21a" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">升级:更新支持的节点版本范围，仅包括LTS版本(<a class="ae kx" href="https://github.com/angular/angular/issues/41822" rel="noopener ugc nofollow" target="_blank"># 41822</a>)(<a class="ae kx" href="https://github.com/angular/angular/commit/10c45239a68e82ea52c1601fae09953aa7843351" rel="noopener ugc nofollow" target="_blank">10c 4523</a>)</li></ul><p id="9f97" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">对了，你有没有注意到<code class="fe mc md me mf b">AsyncPipe</code>已经被本·莱什<a class="ae kx" href="https://github.com/angular/angular/commit/9759bca339b44ed78ec6aafab0336d531d285f90" rel="noopener ugc nofollow" target="_blank">打了</a>的补丁，可以同时兼容RxJS 6和7？多酷啊。；-)</p><h1 id="366c" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">重大变化</h1><p id="034b" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">和往常一样，这个版本有许多突破性的变化。</p><p id="f816" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">由于<a class="ae kx" href="https://github.com/angular/angular/blob/master/CHANGELOG.md#breaking-changes" rel="noopener ugc nofollow" target="_blank">官方发布说明</a>非常清楚，我只是将它们复制/粘贴到这里:</p><ul class=""><li id="402c" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">小型UMD软件包不再包含在分布式NPM软件包中。</li><li id="0390" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">动画</em>:移除根视图时，DOM元素现在被正确移除。如果您使用SSR并使用应用程序的HTML进行渲染，您需要确保在销毁应用程序之前将HTML保存到变量中。还有一种可能是，测试可能会意外地依赖旧的行为，试图找到一个在之前的测试中没有被删除的元素。如果是这种情况，应该更新失败的测试，以确保它们有正确的设置代码来初始化它们所依赖的元素</li><li id="8c6f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">公共</em>:用于返回<code class="fe mc md me mf b">void</code>的<code class="fe mc md me mf b">PlatformLocation</code>类的方法，即<code class="fe mc md me mf b">onPopState</code>和<code class="fe mc md me mf b">onHashChange</code>。现在，这些方法返回可以被调用来移除事件处理程序的函数</li><li id="e163" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">common:<code class="fe mc md me mf b">HttpParams</code>类的方法现在接受<code class="fe mc md me mf b">string | number | boolean</code>而不是<code class="fe mc md me mf b">string</code>作为参数值。如果您在应用程序中扩展了这个类，您必须更新方法的签名来反映这些变化</li><li id="ffbf" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">编译器-cli </em>:链接库不再生成传统的i18n消息id。任何为这些消息提供翻译的下游应用程序都需要使用<code class="fe mc md me mf b">localize-migrate</code>命令行工具来迁移它们的消息id</li><li id="edbe" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">核心</em> : Angular不再保持对node v10的支持，所以如果你还在为你的开发环境使用它，那真的是时候升级了！</li><li id="2f08" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">核心</em>:以前，如果给定的DOM节点没有关联的角度上下文(例如，如果在角度应用程序之外为DOM元素调用函数)，那么<code class="fe mc md me mf b">ng.getDirectives</code>函数会抛出错误。这种行为与<code class="fe mc md me mf b">ng</code>名称空间下的其他调试实用程序不一致，后者处理这种情况时没有引发异常。现在，为这样的DOM节点调用<code class="fe mc md me mf b">ng.getDirectives</code>函数将导致从该函数核心返回一个空数组:切换默认的<code class="fe mc md me mf b">emitDistinctChangesOnlyDefaultValue</code>，这将改变默认行为，并可能导致一些依赖不正确行为的应用程序失败</li></ul><p id="4880" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><code class="fe mc md me mf b">emitDistinctChangesOnly</code>标志也已被弃用，并将在未来的主要版本中删除</p><p id="6c77" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">之前的实现会在重新计算<code class="fe mc md me mf b">QueryList</code>时触发变更<code class="fe mc md me mf b">QueryList.changes.subscribe</code>。这导致了人为的大量变更通知，因为重新计算<code class="fe mc md me mf b">QueryList</code>可能会导致相同的列表。<code class="fe mc md me mf b">QueryList</code>何时被重新计算是一个实现细节，它不应该决定change事件触发的频率。</p><p id="6817" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">不幸的是，彻底修复这种行为会导致太多现有的应用程序失败。出于这个原因，Angular认为这个修复是一个破坏性的修复，并在<code class="fe mc md me mf b">@ContentChildren</code>和<code class="fe mc md me mf b">@ViewChildren</code>中引入了一个控制行为的标志。</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="fce7" class="mm kz iq mf b gy mn mo l mp mq">export class QueryCompWithStrictChangeEmitParent {<br/>  @ContentChildren('foo', {<br/>    // This option is the new default with this change.<br/>    emitDistinctChangesOnly: true,<br/>  })<br/>  foos!: QueryList&lt;any&gt;;<br/>}<!-- --> </span></pre><p id="01d6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">为了在v12 <code class="fe mc md me mf b">emitDistinctChangesOnlyDefaultValue</code>设置为<code class="fe mc md me mf b">false</code>之前向后兼容。这一更改将默认值更改为<code class="fe mc md me mf b">true</code>。</p><ul class=""><li id="d764" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><strong class="jp ir">核心</strong>:改变了<code class="fe mc md me mf b">APP_INITIALIZER</code>令牌的类型，以更准确地反映Angular处理的返回值的类型。以前，每个初始化器回调都被类型化为返回<code class="fe mc md me mf b">any</code>，现在是<code class="fe mc md me mf b">Promise&lt;unknown&gt; | Observable&lt;unknown&gt; | void</code>。万一您的应用程序使用<code class="fe mc md me mf b">Injector.get</code>或<code class="fe mc md me mf b">TestBed.inject</code> API来注入<code class="fe mc md me mf b">APP_INITIALIZER</code>令牌，您可能需要更新代码来考虑更严格的类型。</li></ul><p id="a4b0" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">此外，如果在表达式中使用了<code class="fe mc md me mf b">APP_INITIALIZER</code>标记，而该表达式的推断类型必须发送到. d.ts文件中，则TypeScript可能会报告TS2742错误。为了解决这个问题，需要一个显式的类型注释，通常是<code class="fe mc md me mf b">Provider</code>或<code class="fe mc md me mf b">Provider[]</code>。</p><ul class=""><li id="5a40" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><strong class="jp ir">核心:</strong>最低支持的<code class="fe mc md me mf b">zone.js</code>版本是<code class="fe mc md me mf b">0.11.4</code>。因此，这意味着如果您使用的是旧版本，也是时候升级项目中的zone.js了！</li><li id="e9eb" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><strong class="jp ir">表单:</strong><code class="fe mc md me mf b">emitEvent</code>选项被添加到以下<code class="fe mc md me mf b">FormArray</code>和<code class="fe mc md me mf b">FormGroup</code>方法中:</li><li id="026e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormGroup.addControl</code></li><li id="154f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormGroup.removeControl</code></li><li id="2dab" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormGroup.setControl</code></li><li id="20fa" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormArray.push</code></li><li id="0ed4" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormArray.insert</code></li><li id="8fb7" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormArray.removeAt</code></li><li id="17ff" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormArray.setControl</code></li><li id="8b3b" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><code class="fe mc md me mf b">FormArray.clear</code></li></ul><p id="5aa6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果您的应用程序有扩展<code class="fe mc md me mf b">FormArray</code>或<code class="fe mc md me mf b">FormGroup</code>类的自定义类，并覆盖上述方法，您可能需要更新您的实现以考虑新选项，并确保覆盖从类型角度来看是兼容的。</p><ul class=""><li id="8257" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><strong class="jp ir">表单:</strong>先前在<code class="fe mc md me mf b">&lt;input type="number"&gt;</code>上定义的<code class="fe mc md me mf b">min</code>和<code class="fe mc md me mf b">max</code>属性被表单模块忽略。现在，这些属性的存在将触发最小/最大验证逻辑(在给定输入上还存在<code class="fe mc md me mf b">formControl</code>、<code class="fe mc md me mf b">formControlName</code>或<code class="fe mc md me mf b">ngModel</code>指令的情况下)，相应的表单控制状态将反映这一点。</li><li id="6998" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><strong class="jp ir">平台浏览器:</strong> <code class="fe mc md me mf b">XhrFactory</code>从<code class="fe mc md me mf b">@angular/common/http</code>移动到<code class="fe mc md me mf b">@angular/common</code>。</li></ul><p id="b3a2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在</strong>之前</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="5a0a" class="mm kz iq mf b gy mn mo l mp mq">import { XhrFactory } from '@angular/common/http';</span></pre><p id="8aa3" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir">在</strong>之后</p><pre class="km kn ko kp gt mi mf mj mk aw ml bi"><span id="9ed4" class="mm kz iq mf b gy mn mo l mp mq">import { XhrFactory } from '@angular/common';</span></pre><ul class=""><li id="40b3" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><strong class="jp ir">路由器:</strong>严格的空检查将报告可能为空的片段。迁移路径:添加空检查。</li><li id="ab08" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><strong class="jp ir">路由器:</strong><code class="fe mc md me mf b">RouterLinkActive.routerLinkActiveOptions</code>输入的类型被扩展以允许更多的微调控制。以前读取此属性的代码可能需要更新，以考虑新的类型。</li></ul><h1 id="c51b" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">更新的路线图</h1><p id="e86e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">根据目前棱角分明的<a class="ae kx" href="https://angular.io/guide/roadmap" rel="noopener ugc nofollow" target="_blank">路线图</a>，团队目前正忙于以下改进:</p><ul class=""><li id="9c6c" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">在调试和分析时改善开发人员的体验。这应该有助于我们理解组件结构(我想象React Dev工具允许React)，以及变更检测</li><li id="d6a1" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">改进测试时间和自动拆卸调试:这应该改进测试和测试时间之间的隔离。<a class="ae kx" href="https://angular.io/api/core/testing/TestBed" rel="noopener ugc nofollow" target="_blank">测试床</a>也将被改变，以便在每次测试执行后自动清理和拆除测试环境</li><li id="03d5" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">使用ES2017+作为默认输出:他们将识别障碍并移除它们，以便默认输出语言可以升级</li><li id="9d2e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">将MDC网整合到角形材料中</li><li id="c80e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">提高角形材料部件的可接近性</li><li id="9c9c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">发布关于高级概念的指南，如变更检测、性能分析、与Zone.js的交互等</li><li id="8767" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">更新e2e测试策略(参见上文)</li><li id="ba5b" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">正在准备升级到RxJS v7+。你可能知道，RxJS 7最近已经<a class="ae kx" href="https://medium.com/volosoft/whats-new-in-rxjs-7-a11cc564c6c0" rel="noopener">发布</a>。希望我们很快就能升级</li></ul><p id="e0df" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在未来，Angular团队计划:</p><ul class=""><li id="48f5" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">研究一下微前端架构:他们可能会介绍一些方法，让我们使用Angular</li><li id="71db" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">通过对有角度的表单进行严格的输入来改善开发人员的体验(我们非常需要这一点)</li><li id="4eaa" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">使Zone.js成为可选的，这将简化框架，改进调试，减少包的大小，甚至允许利用原生的async/await语法</li><li id="0e07" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">通过将Angular编译器(<code class="fe mc md me mf b">ngc</code>)集成为TypeScript编译器插件来提高构建性能</li><li id="9f19" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">允许向宿主元素添加指令。这也是社区长期以来的要求！</li><li id="67ca" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">使NgModules成为可选的，以缓解学习曲线</li><li id="ddee" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">为我们提供了在组件级实现代码拆分的更简单的方法</li></ul><h1 id="462f" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">角形材料和角形CDK</h1><h2 id="f67f" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">Sass迁移</h2><p id="4305" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在内部，角状材料和CDK都已经移植到<a class="ae kx" href="https://sass-lang.com/blog/the-module-system-is-launched" rel="noopener ugc nofollow" target="_blank">新的Sass模块系统</a>。</p><p id="c5b1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你的应用程序使用其中的任何一个，那么你需要确保你已经用https://www.npmjs.com/package/sass的<code class="fe mc md me mf b">sass</code>:<a class="ae kx" href="https://www.npmjs.com/package/sass" rel="noopener ugc nofollow" target="_blank"/>替换了<code class="fe mc md me mf b">node-sass</code>。<code class="fe mc md me mf b">node-sass</code>包不再维护！</p><p id="5460" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">通过这次迁移，Sass主题化API得到了增强，现在它允许我们利用Sass的<code class="fe mc md me mf b">@use</code>实用程序。</p><p id="326a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在<code class="fe mc md me mf b">@angular/material</code>和<code class="fe mc md me mf b">@angular/cdk</code>只有一个入口。</p><p id="7625" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，为了清晰起见，API也进行了更改。许多函数、混合和变量都被重新命名。</p><p id="1b76" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">你可以在新的主题指南中找到更多关于这些变化的信息:<a class="ae kx" href="https://github.com/angular/components/blob/master/guides/theming.md" rel="noopener ugc nofollow" target="_blank">https://github . com/angular/components/blob/master/guides/theming . MD</a>。此外，请注意<a class="ae kx" href="https://material.angular.io" rel="noopener ugc nofollow" target="_blank">https://material . angular . io</a>上的指南已经重写，以展示新的API，并包括解释。</p><p id="0218" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">升级过程会自动将代码迁移到新的Sass API。您可以在此处找到前/后示例<a class="ae kx" href="https://gist.github.com/MarkTechson/6283b6a3b353f9e38964af0740e29280" rel="noopener ugc nofollow" target="_blank"/>。</p><h2 id="ecee" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">角度CDK变化</h2><p id="e5a8" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">版本12包括对角度CDK的许多<a class="ae kx" href="https://github.com/angular/components/blob/master/CHANGELOG.md#cdk" rel="noopener ugc nofollow" target="_blank">变化</a>。</p><p id="a66f" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这里，我将只列出新特性，但是如果您想了解关于错误修复和性能改进的详细信息，可以查看发行说明:</p><ul class=""><li id="1729" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><em class="mb">拖放</em>:dropped事件现在包含了一个<code class="fe mc md me mf b">dropPoint</code>属性，它决定了项目被放下时鼠标指向的确切位置。更多信息<a class="ae kx" href="https://github.com/angular/components/pull/22410" rel="noopener ugc nofollow" target="_blank">点击此处</a></li><li id="52b6" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">下拉</em>:预览容器<a class="ae kx" href="https://github.com/angular/components/issues/13288" rel="noopener ugc nofollow" target="_blank">现在可以定制</a></li><li id="f9be" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">表</em>:一个新的指令允许<a class="ae kx" href="https://github.com/angular/components/pull/21508" rel="noopener ugc nofollow" target="_blank">启用循环视图中继器</a>，它缓存被处理的行，并在数据集改变时重用它们。这有助于提高性能(减少延迟)</li><li id="c64c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">表</em> : <a class="ae kx" href="https://github.com/angular/components/pull/21886" rel="noopener ugc nofollow" target="_blank">在<code class="fe mc md me mf b">StickyUpdate</code>界面增加了</a>粘性元素的偏移量</li><li id="959d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">步进器</em>:当用户试图离开一个步进时，现在会发出<a class="ae kx" href="https://github.com/angular/components/issues/19918" rel="noopener ugc nofollow" target="_blank">事件</a></li><li id="b584" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">步进器</em>:现在可以<a class="ae kx" href="https://github.com/angular/components/issues/21874" rel="noopener ugc nofollow" target="_blank">改变方向</a></li><li id="f745" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">可访问性</em>:一个<code class="fe mc md me mf b">FocusOptions</code>对象<a class="ae kx" href="https://github.com/angular/components/issues/21767" rel="noopener ugc nofollow" target="_blank">现在可以被传递</a>到各种焦点陷阱方法中</li><li id="049b" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">测试</em>:新的WebDriver线束环境。我还没有深入研究过这个，所以我不能告诉你更多。检查<a class="ae kx" href="https://github.com/angular/components/pull/22410" rel="noopener ugc nofollow" target="_blank">PR</a></li></ul><h2 id="2f6d" class="mm kz iq bd la nf ng dn le nh ni dp li jy nj nk lm kc nl nm lq kg nn no lu np bi translated">角度材料变化</h2><p id="625c" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">角形材料也有许多<a class="ae kx" href="https://github.com/angular/components/blob/master/CHANGELOG.md#material" rel="noopener ugc nofollow" target="_blank">变化。同样，请查看发行说明，获取错误修复的完整列表。</a></p><p id="9cb6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">新功能:</p><ul class=""><li id="c620" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated"><em class="mb">日期选择器</em>:不再依赖<a class="ae kx" href="https://github.com/angular/components/pull/22383" rel="noopener ugc nofollow" target="_blank">对话框</a></li><li id="a34e" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">步进器</em>:方向现在可以动态改变(类似CDK的变化)</li><li id="1296" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">步进器</em>:允许内容<a class="ae kx" href="https://github.com/angular/components/issues/12339" rel="noopener ugc nofollow" target="_blank">延迟呈现</a></li><li id="a1bc" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">菜单</em>:允许编程更新菜单位置<a class="ae kx" href="https://github.com/angular/components/pull/22046" rel="noopener ugc nofollow" target="_blank"/></li><li id="0e6f" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb"> Mat错误</em>:现在使用<code class="fe mc md me mf b">aria-live="polite"</code>代替<code class="fe mc md me mf b">role="alert"</code>。更多详情<a class="ae kx" href="https://github.com/angular/components/issues/21781" rel="noopener ugc nofollow" target="_blank">此处</a></li><li id="6b4b" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">选项卡</em>:向<a class="ae kx" href="https://github.com/angular/components/pull/15228" rel="noopener ugc nofollow" target="_blank">添加方法，以编程方式将焦点设置在特定选项卡</a>上</li><li id="37e5" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">列表</em>:现在从<code class="fe mc md me mf b">selectAll</code>和<code class="fe mc md me mf b">deselectAll</code>方法返回一个改变了选项的数组。查看<a class="ae kx" href="https://github.com/angular/components/pull/21358/files" rel="noopener ugc nofollow" target="_blank">公关</a>了解详情</li><li id="5688" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">滑动切换</em>:允许<a class="ae kx" href="https://github.com/angular/components/pull/22047" rel="noopener ugc nofollow" target="_blank">通过提供者全局配置默认颜色</a></li><li id="dd01" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">工具提示</em>:现在通过组件上的一个类显示工具提示的有效位置</li><li id="bcc0" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated"><em class="mb">单选</em>、<em class="mb">复选框</em>和<em class="mb">滑块</em>:在<a class="ae kx" href="https://github.com/angular/components/issues/22298" rel="noopener ugc nofollow" target="_blank">打印样式表</a>中包含这些组件的背景颜色</li></ul><p id="a435" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">实验版上也有多处改动:<a class="ae kx" href="https://github.com/angular/components/blob/master/CHANGELOG.md#material-experimental" rel="noopener ugc nofollow" target="_blank">https://github . com/angular/components/blob/master/changelog . MD # material-experimental</a>。</p><h1 id="35b4" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">角度通用</h1><p id="e127" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">Angular Universal 12也是刚出炉的<a class="ae kx" href="https://github.com/angular/universal/releases/tag/v12.0.0" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="a5fe" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个版本中，默认情况下，Universal now <a class="ae kx" href="https://github.com/angular/universal/commit/3dddb758fa6e89ca1b857b7a7a17a21bc474618c" rel="noopener ugc nofollow" target="_blank">内嵌关键CSS</a>，这非常酷。</p><p id="efc2" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Universal现在包括一个新的<code class="fe mc md me mf b">proxyConfig</code>选项，为<code class="fe mc md me mf b">ssr-dev-server</code>构建器提供定制的代理配置。</p><p id="1ecd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">在这个版本中，有一个新的(实验性的)SSR引擎叫做<em class="mb"> Clover </em>(让我想起了Java生态系统中的一个质量工具)。这台新引擎似乎很有前途。它旨在简化事情，让我们摆脱<code class="fe mc md me mf b">Window is undefined</code>错误，消除对SSR/prerender的多次构建的需要，无需额外构建即可生成应用程序外壳，等等。稍后我们可能会听到更多关于它的消息。如果你好奇，那就去看看<a class="ae kx" href="https://github.com/angular/universal/commit/c4b7be3bbdbc7334f5cf7049c644e185cf15d0bb" rel="noopener ugc nofollow" target="_blank">的公关</a>。</p><p id="f4c1" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这个版本包括一个<a class="ae kx" href="https://github.com/angular/universal/commit/2066f18a23eecce6dd485c19bc1ed10a4c3be497" rel="noopener ugc nofollow" target="_blank">构建器</a>，可以使用新的通用Clover方法生成静态页面(即预渲染)。</p><p id="9826" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">最后，这个版本还包括对开发服务器的TLS支持。</p><h1 id="93e0" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">谷歌地图</h1><p id="2d09" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">如你所知，Angular包括谷歌地图和Youtube的组件。版本12对谷歌地图组件进行了一些改进:</p><ul class=""><li id="bc7f" class="mr ms iq jp b jq jr ju jv jy mt kc mu kg mv kk mw mx my mz bi translated">现在包括一个<code class="fe mc md me mf b">icon</code>输入，可轻松定制标记</li><li id="c50d" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">现在当点击一个集群<a class="ae kx" href="https://github.com/angular/components/issues/22020" rel="noopener ugc nofollow" target="_blank">时会发出一个<code class="fe mc md me mf b">clusterClick</code>事件</a></li><li id="f657" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">包括围绕Google Maps Geocoder API的包装器，并导出以前没有公开的<code class="fe mc md me mf b">MapDirectionsResponse</code></li><li id="9e8c" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">介绍对<a class="ae kx" href="https://github.com/angular/components/pull/21489" rel="noopener ugc nofollow" target="_blank">渲染热图</a>的支持</li><li id="5654" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">增加了<code class="fe mc md me mf b">MapDirectionsRenderer</code>，允许在地图上绘制方向；增加了<code class="fe mc md me mf b">MapDirectionsService</code>，包裹<code class="fe mc md me mf b">google.maps.DirectionsService</code>计算两点之间的<a class="ae kx" href="https://github.com/angular/components/pull/21736" rel="noopener ugc nofollow" target="_blank">路线。</a></li><li id="fdf8" class="mr ms iq jp b jq na ju nb jy nc kc nd kg ne kk mw mx my mz bi translated">新的<code class="fe mc md me mf b">options</code>输入在<a class="ae kx" href="https://github.com/angular/components/pull/21861" rel="noopener ugc nofollow" target="_blank">标记集群器</a>上，类似于其他指令</li></ul><h1 id="6639" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">升级</h1><p id="c205" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">和往常一样，我们提供了完整的升级指南，<code class="fe mc md me mf b">ng update</code>将为您提供帮助:<a class="ae kx" href="https://update.angular.io/?l=3&amp;v=11.0-12.0" rel="noopener ugc nofollow" target="_blank">https://update.angular.io/?l=3&amp;v = 11.0-12.0</a></p><p id="fc46" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你正在使用<a class="ae kx" href="https://nx.dev/" rel="noopener ugc nofollow" target="_blank"> Nrwl NX </a>(你真的应该这么做)，请注意Nx 12.3已经支持Angular 12了！在此进一步了解<a class="ae kx" href="https://blog.nrwl.io/incremental-build-improvements-angular-12-distributed-task-execution-and-more-in-nx-12-3-48b5e4722056" rel="noopener ugc nofollow" target="_blank">。作为一项额外的好处，Nx还将帮助您从TSLint迁移到ESLint(它的时间！)</a></p><h1 id="2fa5" class="ky kz iq bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">结论</h1><p id="1a9e" class="pw-post-body-paragraph jn jo iq jp b jq lw js jt ju lx jw jx jy ly ka kb kc lz ke kf kg ma ki kj kk ij bi translated">在本文中，我探讨了Angular 12的新特性。</p><p id="cbde" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">像往常一样，这是<strong class="jp ir">放出的<em class="mb">英雄气概——</em></strong>还能是什么？</p><p id="63cc" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">常春藤正在茁壮成长，随着生态系统的迁移，我们“很快”就不会那么担心了。这个版本有很多很棒的变化，所以现在就来看看并升级吧！</p><p id="ed10" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">今天到此为止！</p><p id="3987" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><strong class="jp ir"> PS: </strong>如果你想了解大量关于产品/软件/Web开发的其他很酷的东西，那么<a class="ae kx" href="https://dev-concepts.dev" rel="noopener ugc nofollow" target="_blank">去看看Dev Concepts系列</a>、<a class="ae kx" href="https://mailchi.mp/fb661753d54a/developassion-newsletter" rel="noopener ugc nofollow" target="_blank">订阅我的通讯</a>，以及<a class="ae kx" href="https://twitter.com/dSebastien" rel="noopener ugc nofollow" target="_blank">来Twitter上打个招呼吧！</a></p></div><div class="ab cl nq nr hu ns" role="separator"><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv nw"/><span class="nt bw bk nu nv"/></div><div class="ij ik il im in"><p id="b8d7" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">原载于2021年5月13日https://dsebastien.net</em><a class="ae kx" href="https://dsebastien.net/blog/2021-05-13-angular-12-in-depth" rel="noopener ugc nofollow" target="_blank"><em class="mb"/></a><em class="mb">。</em></p><p id="ba6b" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="mb">更多内容请看</em><a class="ae kx" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="mb">plain English . io</em></a></p></div></div>    
</body>
</html>
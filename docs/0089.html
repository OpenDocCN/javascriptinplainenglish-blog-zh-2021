<html>
<head>
<title>A Quick Guide To The React Context API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React上下文API快速指南</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/react-context-api-a-quick-guide-2065c040ae3d?source=collection_archive---------15-----------------------#2021-01-05">https://javascript.plainenglish.io/react-context-api-a-quick-guide-2065c040ae3d?source=collection_archive---------15-----------------------#2021-01-05</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="2866" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如何实现React应用程序的状态管理</h2></div><p id="fefb" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">关于这个话题，我就不多介绍了。我相信您已经阅读了许多关于如何为React应用程序实现状态管理的详细博客，并且您只是想要一个快速切题的解决方案。</p><p id="9a8b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我将使用React自己的上下文API向您展示这一点。</p><p id="6180" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">虽然这不是唯一的实现方式，但这正是我的实现方式，它帮助我高效地扩展我的应用程序。</p><p id="8043" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">基本上，这是一个3步流程:</p><ol class=""><li id="8f96" class="ky kz in ke b kf kg ki kj kl la kp lb kt lc kx ld le lf lg bi translated"><strong class="ke io">创建</strong>一个上下文文件。</li><li id="7235" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated"><strong class="ke io">提供</strong>这个上下文给一个组件，根或者其他(基于你的用例)。</li><li id="3640" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated"><strong class="ke io">消费</strong>这个语境的内容</li></ol><h1 id="67ef" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">1.创建上下文文件</h1><p id="ebf5" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">您的上下文文件将有3个关键元素。</p><ol class=""><li id="2025" class="ky kz in ke b kf kg ki kj kl la kp lb kt lc kx ld le lf lg bi translated"><strong class="ke io">上下文</strong>本身。</li><li id="7150" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">一个<strong class="ke io">包装器</strong>，它将包含<strong class="ke io">上下文提供者</strong>。</li><li id="5e6e" class="ky kz in ke b kf lh ki li kl lj kp lk kt ll kx ld le lf lg bi translated">上下文提供者的<strong class="ke io">值</strong>。</li></ol><p id="9921" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我在下面附上了一个非常基本的上下文实现。</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div class="gh gi mj"><img src="../Images/944ceef5f2130db834b9830ffed141b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/format:webp/1*XuBAMGHaijCTGqqjq1-W8A.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">myContext.js</figcaption></figure><p id="ff7c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在上面的截图中，我们首先使用React提供的方法创建一个上下文，名为<strong class="ke io"> React.createContext()。</strong>然后我们创建一个组件，<strong class="ke io"> MyContextProvider </strong>，它将作为一个包装器组件。<strong class="ke io"> </strong>这个包装器组件简单地返回上下文提供者，在这个例子中是<strong class="ke io"> MyContext.Provider. </strong>这个提供者保存将被这个包装器组件内的所有组件共享的值。这听起来可能有点复杂，但在下一步之后，它将开始变得有意义。</p><h1 id="a4dd" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">2.提供背景</h1><p id="561d" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">一旦创建了上下文文件，就差不多完成了。通常情况下，您将上下文暴露给将使用其内容的组件。如果上下文中的内容将被整个应用程序使用，那么您可以用提供者包装您的应用程序组件。如果只有一组特定的组件可以访问它，那么对它进行全局公开是没有意义的。在我们的例子中，我们将全局公开它。</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/5a1330e236d8e66f15cb105a181491f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*E69cgvrBgbbxmRj_IQhfkA.png"/></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">index.js</figcaption></figure><p id="fbf5" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">MyContextProvider包装了根应用程序，就像这样，我们的整个应用程序现在可以访问上下文提供的数据。</p><h1 id="48e4" class="lm ln in bd lo lp lq lr ls lt lu lv lw jt lx ju ly jw lz jx ma jz mb ka mc md bi translated">3.消费上下文内容</h1><p id="2593" class="pw-post-body-paragraph kc kd in ke b kf me jo kh ki mf jr kk kl mg kn ko kp mh kr ks kt mi kv kw kx ig bi translated">最后一步是消费上下文内容。我将分享在Child One上使用上下文内容的实现。子2和子3将有类似的实现。</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi mw"><img src="../Images/12fa258c8f73d42de14a7bd4c7883816.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*etYA-SS0_VDiBlPyCE6Mtg.png"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">childOne.js</figcaption></figure><p id="78ce" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们简单地使用react提供的<strong class="ke io"> useContext </strong> hook，并在导出的上下文中传递(<strong class="ke io"> MyContext </strong>)。这将为我们提供我们在第一步中从上下文文件中公开的值对象。然后，我们可以简单地使用对象析构，将内容存储在单独的变量中，然后在需要时使用它们。由上下文公开的setter，setCommonData也在上面的例子中使用。</p><p id="055f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">就是这样！在我们的应用程序中，我们已经公开了状态和设置器{ <strong class="ke io"> commonData，setCommonData}。</strong>所以所有的子组件都可以改变这个由上下文提供的全局可访问的<strong class="ke io">公共数据</strong>。如果沿着树向下添加了额外的子组件，并且您公开了内容，就像我们在childOne、childTwo和childThree的情况下所做的那样，我们将能够类似地访问它们，而不会出现任何问题。整洁！</p><figure class="mk ml mm mn gt mo gh gi paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="gh gi nb"><img src="../Images/e59a71a78fd234e8b9d225404337ffbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qzsEznFULc58av8MgnV0KA.gif"/></div></div><figcaption class="mr ms gj gh gi mt mu bd b be z dk">Application demo</figcaption></figure><p id="9507" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">你可以在这里找到这个例子<a class="ae nc" href="https://github.com/AkileshAro/context-demo" rel="noopener ugc nofollow" target="_blank">的GitHub repo。同样也可以查看React的官方文档，</a><a class="ae nc" href="https://reactjs.org/docs/context.html" rel="noopener ugc nofollow" target="_blank">这里</a>。我也经常在youtube上发布编程内容，所以一定要去看看，<a class="ae nc" href="https://t.co/IO2spWubW9?amp=1" rel="noopener ugc nofollow" target="_blank">这里</a>。干杯！</p></div></div>    
</body>
</html>
<html>
<head>
<title>Switch Navigation in React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React Native中切换导航</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/switch-navigation-in-react-native-2b17b5167857?source=collection_archive---------19-----------------------#2021-08-13">https://javascript.plainenglish.io/switch-navigation-in-react-native-2b17b5167857?source=collection_archive---------19-----------------------#2021-08-13</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="7304" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">使用React Navigation的切换导航机制将登录用户直接重定向到主页</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/1f96bfe5b440499885ffab8ef1538146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YZF10X5ApWurrQFdsMdUeg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Source (<a class="ae kv" href="https://www.progress.com/blogs/the-react-native-sdk-for-kinvey-is-now-available" rel="noopener ugc nofollow" target="_blank">link</a>)</figcaption></figure><p id="0f4e" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">最近，我开发了一个React本地应用程序，如果用户已经登录，我需要将用户直接重定向到主页。一种方法是在登录页面的<code class="fe ls lt lu lv b">componentDidMount</code>生命周期事件中检查登录的用户，但是它没有提供良好的用户体验。用户每次打开应用程序时，都会看到从登录到主页的转变。此外，如果您的登录流程中有多个页面，就会变得更加混乱。</p><p id="85b1" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">在这篇短文中，我将展示使用React Navigation的授权流在React本机应用程序中管理授权流的最佳方式。</p><p id="78e7" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><a class="ae kv" href="https://reactnavigation.org/docs/auth-flow" rel="noopener ugc nofollow" target="_blank">https://reactnavigation.org/docs/auth-flow</a></p><h1 id="9de5" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">先决条件</h1><p id="13ba" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">让我们假设您已经有了一个包含多个页面的React本地应用程序设置。您的<code class="fe ls lt lu lv b">App.js</code>可能看起来像这样:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="168f" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">上面的代码片段显示了登录流程ie有3个不同的屏幕。【T2&gt;<code class="fe ls lt lu lv b">ConfigureCalendar</code>&gt;<code class="fe ls lt lu lv b">Calendars</code></p><p id="fc29" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">为了使切换导航工作，其中一组页面显示用于登录流，另一组页面在用户登录后显示，我们需要有一个标志来告诉我们用户是否登录。这可以通过使用Redux和Redux persist轻松实现。如果您还没有安装Redux persist，您可以参考这篇文章来了解如何安装。</p><div class="mv mw gp gr mx my"><a href="https://blog.jscrambler.com/how-to-use-redux-persist-in-react-native-with-asyncstorage" rel="noopener  ugc nofollow" target="_blank"><div class="mz ab fo"><div class="na ab nb cl cj nc"><h2 class="bd ir gy z fp nd fr fs ne fu fw ip bi translated">如何在React Native中使用Redux Persist with async storage | Jscrambler博客</h2><div class="nf l"><h3 class="bd b gy z fp nd fr fs ne fu fw dk translated">Redux Persist是一个允许在应用程序的本地存储中保存Redux存储的库。在反应原生…</h3></div><div class="ng l"><p class="bd b dl z fp nd fr fs ne fu fw dk translated">blog.jscrambler.com</p></div></div><div class="nh l"><div class="ni l nj nk nl nh nm kp my"/></div></div></a></div><h1 id="ac30" class="lw lx iq bd ly lz ma mb mc md me mf mg jw mh jx mi jz mj ka mk kc ml kd mm mn bi translated">履行</h1><h2 id="13c7" class="nn lx iq bd ly no np dn mc nq nr dp mg lf ns nt mi lj nu nv mk ln nw nx mm ny bi translated">步骤1:在App.js中使用Redux状态</h2><p id="4166" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">有了上面的设置，我们只需要使用<code class="fe ls lt lu lv b">App.js</code>文件中的Redux状态。注意，我们使用<code class="fe ls lt lu lv b">useSelector</code>来访问Redux状态，然后使用<code class="fe ls lt lu lv b">user.isLoggedIn</code>标志来为登录前后的流提供不同的堆栈。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><h2 id="9ba5" class="nn lx iq bd ly no np dn mc nq nr dp mg lf ns nt mi lj nu nv mk ln nw nx mm ny bi translated">步骤2:在登录的最后一步设置登录标志</h2><p id="9234" class="pw-post-body-paragraph kw kx iq ky b kz mo jr lb lc mp ju le lf mq lh li lj mr ll lm ln ms lp lq lr ij bi translated">接下来，我们只需要在登录的最后一步设置<code class="fe ls lt lu lv b">user.isLoggedIn</code>标志。我们在登录流程的最后一步使用了<code class="fe ls lt lu lv b">useDispatch</code>，并使用<code class="fe ls lt lu lv b">setLoggedIn</code> Redux动作设置了<code class="fe ls lt lu lv b">isLoggedIn</code>标志。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="mt mu l"/></div></figure><p id="4e02" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">注意:</p><ul class=""><li id="0a3b" class="nz oa iq ky b kz la lc ld lf ob lj oc ln od lr oe of og oh bi translated">在其他登录页面，您可以使用<code class="fe ls lt lu lv b">navigation.navigate('Page')</code>导航到下一个登录页面</li><li id="9ec0" class="nz oa iq ky b kz oi lc oj lf ok lj ol ln om lr oe of og oh bi translated"><strong class="ky ir">重要提示:</strong>在登录的最后一步，您无需手动导航至主页。我们的switch navigator将把用户重定向到主页。</li></ul><p id="c495" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">就是这样。切换导航现在应该可以在您的应用程序中流畅地工作了。下次当用户打开应用程序时，主页将直接为他们打开。</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="7299" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">我希望这篇文章对你有所帮助。请务必在评论中让我知道你的想法。考虑成为中级<a class="ae kv" href="https://utkarshabakshi.medium.com/membership" rel="noopener">会员</a>，继续阅读我所有的优质文章以及数以千计的其他故事。</p></div><div class="ab cl on oo hu op" role="separator"><span class="oq bw bk or os ot"/><span class="oq bw bk or os ot"/><span class="oq bw bk or os"/></div><div class="ij ik il im in"><p id="9391" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated">你可以在这个<a class="ae kv" href="https://utkarshabakshi.medium.com/list/react-native-development-0d5f690f6585" rel="noopener">列表</a>中找到我关于React原生开发的其他文章。</p><p id="9ee4" class="pw-post-body-paragraph kw kx iq ky b kz la jr lb lc ld ju le lf lg lh li lj lk ll lm ln lo lp lq lr ij bi translated"><em class="ou">更多内容请看</em><a class="ae kv" href="http://plainenglish.io" rel="noopener ugc nofollow" target="_blank"><strong class="ky ir"><em class="ou">plain English . io</em></strong></a></p></div></div>    
</body>
</html>
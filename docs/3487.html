<html>
<head>
<title>Post to Dev, Hashnode, and Medium using their APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用它们的API发布到Dev、Hashnode和Medium</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/post-to-dev-hashnode-and-medium-using-their-apis-61b6df99bd07?source=collection_archive---------27-----------------------#2021-07-13">https://javascript.plainenglish.io/post-to-dev-hashnode-and-medium-using-their-apis-61b6df99bd07?source=collection_archive---------27-----------------------#2021-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/98a90a842004fba6a4dc164f7b08535a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nB0IeV_mKunlT5bF.png"/></div></div></figure><div class=""/><blockquote class="jv jw jx"><p id="9ed4" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">本文的目标是帮助您连接到这些站点的每个API，以便以编程方式发布、更新和享受这些服务。</p></blockquote><p id="a655" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">为我的个人博客写一个markdown文件，然后复制粘贴到其他博客平台上并不太难…除非我需要编辑一些东西。一个简单的类型更改需要我加载四个不同的站点，在它们大不相同的UI中导航，以便进行简单的更改。</p><blockquote class="jv jw jx"><p id="c0df" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">这很快就过时了。</p></blockquote><p id="1efd" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">我们是开发者。将这些重复性的任务自动化会更有趣，也更有益。</p><h2 id="f52e" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">中等API</h2><blockquote class="jv jw jx"><p id="6807" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">文档—<a class="ae lt" href="https://github.com/Medium/medium-api-docs" rel="noopener ugc nofollow" target="_blank">https://github.com/Medium/medium-api-docs</a></p></blockquote><h2 id="200a" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">获取身份验证令牌</h2><ol class=""><li id="a6d2" class="lu lv iy kb b kc lw kg lx kx ly ky lz kz ma kw mb mc md me bi translated">登录到媒体</li><li id="a217" class="lu lv iy kb b kc mf kg mg kx mh ky mi kz mj kw mb mc md me bi translated">导航到集成令牌</li><li id="b8a8" class="lu lv iy kb b kc mf kg mg kx mh ky mi kz mj kw mb mc md me bi translated">输入令牌的描述，然后单击“获取集成令牌”按钮</li></ol><figure class="ml mm mn mo gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mk"><img src="../Images/56b5ad5bdd41e06c3a6b780efadea7b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UISN7UIfOdsfINiG.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><em class="mt">Medium’s integration token panel</em></figcaption></figure><p id="aa79" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">这将生成一个令牌，该令牌将包含在对介质的API的请求中。</p><h2 id="afd4" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">获取已验证用户的详细信息</h2><p id="98d3" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">Medium提供端点<code class="fe mx my mz na b">GET https://api.medium.com/v1/me</code>来获取经过身份验证的用户数据。</p><p id="48f5" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">下面是一个使用NodeJS的请求示例:</p><pre class="ml mm mn mo gt nb na nc nd aw ne bi"><span id="1229" class="la lb iy na b gy nf ng l nh ni">fetch('https://api.medium.com/v1/me', {<br/>  method: 'GET',<br/>  headers: {<br/>    'Content-Type': 'application/json',<br/>    Authorization: 'Bearer &lt;AUTHENTICATION TOKEN HERE&gt;',<br/>  },<br/>})<br/>  .then(res =&gt; res.json())<br/>  .then(res =&gt; console.log(JSON.stringify(res)))</span></pre><p id="5ef4" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">从这个端点返回的数据中有一个<code class="fe mx my mz na b">id</code>。您将希望保存这个ID值，因为使用NodeJS创建一个中型文章将需要它。</p><h2 id="60c6" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">以编程方式创建中等文章</h2><p id="9e4d" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">现在我们有了认证令牌和ID，我们可以使用端点<code class="fe mx my mz na b">POST https://api.medium.com/v1/users/{{authorId}}/posts</code>。上面发布的文档详细介绍了需要和/或可用的参数。</p><p id="667a" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">此端点接受markdown或HTML。您需要明确地将<code class="fe mx my mz na b">contentFormat</code>字段设置为<code class="fe mx my mz na b">markdown</code>或<code class="fe mx my mz na b">html</code>。</p><p id="0041" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">下面是一个使用NodeJS的请求示例:</p><pre class="ml mm mn mo gt nb na nc nd aw ne bi"><span id="492c" class="la lb iy na b gy nf ng l nh ni">fetch('https://api.medium.com/v1/users/&lt;USER-ID&gt;/posts', {<br/>  method: 'POST',<br/>  headers: {<br/>    'Content-Type': 'application/json',<br/>    Authorization: 'Bearer &lt;REPLACE WITH TOKEN GENERATED ABOVE&gt;',<br/>  },<br/>  body: JSON.stringify({<br/>    title: 'Liverpool FC',<br/>    contentFormat: 'markdown',<br/>    content: '# You can put Markdown here.\n***\nSee what it looks like?',<br/>    canonicalUrl: 'http://jamietalbot.com/posts/liverpool-fc',<br/>    tags: ['football', 'sport', 'Liverpool'],<br/>    publishStatus: 'public',<br/>  }),<br/>})<br/>  .then(res =&gt; res.json())<br/>  .then(res =&gt; console.log(JSON.stringify(res)))</span></pre><p id="37ca" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">如果这返回了201状态码，你现在应该可以在<a class="ae lt" href="https://medium.com" rel="noopener">Medium.com</a>上看到你的帖子了</p><h2 id="decb" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">可用端点:</h2><p id="7a79" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">以下是可用端点的列表:</p><p id="a01f" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">获取认证用户的详细信息:</strong></p><p id="3c61" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">GET <a class="ae lt" href="https://api.medium.com/v1/me" rel="noopener">https://api.medium.com/v1/me</a></code></p><p id="fd4f" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">列出用户的出版物:</strong></p><p id="7870" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">GET <a class="ae lt" href="https://api.medium.com/v1/users/{{userId}}/publications" rel="noopener">https://api.medium.com/v1/users/{{userId}}/publications</a></code></p><p id="4c03" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">获取出版物的投稿人:</strong></p><p id="cc3e" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">GET <a class="ae lt" href="https://api.medium.com/v1/publications/{{publicationId}}/contributors" rel="noopener">https://api.medium.com/v1/publications/{{publicationId}}/contributors</a></code></p><p id="9001" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">创建帖子:</strong></p><p id="f490" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">POST <a class="ae lt" href="https://api.medium.com/v1/users/{{authorId}}/posts" rel="noopener">https://api.medium.com/v1/users/{{authorId}}/posts</a></code></p><p id="5602" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">在出版物下创建文章:</strong></p><p id="7233" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">POST <a class="ae lt" href="https://api.medium.com/v1/publications/{{publicationId}}/posts" rel="noopener">https://api.medium.com/v1/publications/{{publicationId}}/posts</a></code></p><p id="41b1" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><strong class="kb iz">上传图像:</strong></p><p id="51a7" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><code class="fe mx my mz na b">POST <a class="ae lt" href="https://api.medium.com/v1/images" rel="noopener">https://api.medium.com/v1/images</a></code></p><p id="189c" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">不幸的是，Medium的公共API相当有限。我们可以创建和获取帖子，但是还没有以编程方式编辑它们的能力。我希望这最终会改变，给程序员更好的工具来使用它们，</p><h2 id="d5a6" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">API开发</h2><blockquote class="jv jw jx"><p id="25b5" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">文档—<a class="ae lt" href="https://docs.forem.com/api/" rel="noopener ugc nofollow" target="_blank">https://docs.forem.com/api/</a></p></blockquote><h2 id="733c" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">获取身份验证令牌</h2><p id="dbb0" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">这将需要一个开发人员帐户。导航到他们的<a class="ae lt" href="https://docs.forem.com/api/#section/Authentication" rel="noopener ugc nofollow" target="_blank">文档</a>并按照说明获取认证令牌。</p><h2 id="85a0" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">使用他们的API创建dev.to文章</h2><p id="f88d" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">他们的文档远比Medium的公共API广泛。他们关于这个端点的文档在这里是<a class="ae lt" href="https://docs.forem.com/api/#operation/createArticle" rel="noopener ugc nofollow" target="_blank"/>。如果您单击文章下拉箭头，您可以看到他们接受的所有参数。你可以</p><h2 id="151b" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">使用Node.js的请求示例:</h2><pre class="ml mm mn mo gt nb na nc nd aw ne bi"><span id="ab1e" class="la lb iy na b gy nf ng l nh ni">fetch('https://dev.to/api/articles', {<br/>  method: 'POST',<br/>  headers: {<br/>    'Content-Type': 'application/json',<br/>    'api-key': '&lt;AUTHENTICATION TOKEN HERE&gt;',<br/>  },<br/>  body: JSON.stringify({<br/>    article: {<br/>      title: 'Hello, World!',<br/>      published: true,<br/>      content: '# You can put Markdown here.\n***\n',<br/>      tags: ['discuss', 'help'],<br/>      series: 'Hello series',<br/>    },<br/>  }),<br/>})<br/>  .then(res =&gt; res.json())<br/>  .then(res =&gt; console.log(JSON.stringify(res)))</span></pre><h2 id="4b14" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">哈希节点API</h2><blockquote class="jv jw jx"><p id="0488" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">文档—<a class="ae lt" href="https://api.hashnode.com/" rel="noopener ugc nofollow" target="_blank">https://api.hashnode.com/</a></p></blockquote><p id="5532" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">Hashnode的API是一个GraphQL API，不同于我们为Medium和dev.to使用的REST APIs。</p><p id="0d71" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">他们在他们的<a class="ae lt" href="https://engineering.hashnode.com/" rel="noopener ugc nofollow" target="_blank">博客</a>中有一些讨论他们公共API的博客帖子，但它们是在2019年发布的，所以文章中讨论的一些东西已经被否决，如<code class="fe mx my mz na b">GLOBAL</code>和<code class="fe mx my mz na b">FOR_ME</code> FeedType。如果您想更好地理解这些内容，请阅读它们，但是请记住，许多参数已经被否决了。</p><h2 id="3ed4" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">获取身份验证令牌</h2><p id="6026" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">您可以从Hashnode设置中创建/撤销它们。登录您的帐户，转到开发者设置并生成一个新的令牌。</p><figure class="ml mm mn mo gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mk"><img src="../Images/9800f20b2d67802a3340e03551d4bb07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*69Gf2GAKf_mlSxmw.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><em class="mt">Generate Hashnode Auth Token</em></figcaption></figure><h2 id="c048" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">证明文件</h2><p id="46ec" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">我发现真相的来源就在他们的<a class="ae lt" href="https://api.hashnode.com/" rel="noopener ugc nofollow" target="_blank"> GraphQL操场</a>里。您需要在他们的操场周围单击，以查看哪些端点可用以及预期的输入。</p><figure class="ml mm mn mo gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mk"><img src="../Images/5dd8a279599c572f7d23b8e427b7b9ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZjJ66URKWhsVDU-R.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><em class="mt">Hashnode’s GraphQL Api Playground</em></figcaption></figure><figure class="ml mm mn mo gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mk"><img src="../Images/70fe78a0a21ec4bd75337012e9dec467.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yqg7wDjaFTIixOZ9.png"/></div></div><figcaption class="mp mq gj gh gi mr ms bd b be z dk"><em class="mt">Hashnode Documentation Navigation</em></figcaption></figure><h2 id="2f22" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">使用Node.js的请求示例:</h2><pre class="ml mm mn mo gt nb na nc nd aw ne bi"><span id="ef46" class="la lb iy na b gy nf ng l nh ni">fetch('https://api.hashnode.com', {<br/>  method: 'POST',<br/>  headers: {<br/>    'Content-Type': 'application/json',<br/>    Authorization: '&lt;AUTHENTICATION TOKEN HERE&gt;',<br/>  },<br/>  body: JSON.stringify({<br/>    query:<br/>      'mutation createStory($input: CreateStoryInput!){ createStory(input: $input){ code success message } }',<br/>    variables: {<br/>      input: {<br/>        title: 'What are the e2e testing libraries you use ?',<br/>        contentMarkdown: '# You can put Markdown here.\n***\n',<br/>        tags: [<br/>          {<br/>            _id: '56744723958ef13879b9549b',<br/>            slug: 'testing',<br/>            name: 'Testing',<br/>          },<br/>        ],<br/>        coverImageURL:<br/>          'https://codybontecou.com/images/header-meta-component.png',<br/>      },<br/>    },<br/>  }),<br/>})<br/>  .then(res =&gt; res.json())<br/>  .then(res =&gt; console.log(JSON.stringify(res)))</span></pre><h2 id="5db5" class="la lb iy bd lc ld le dn lf lg lh dp li kx lj lk ll ky lm ln lo kz lp lq lr ls bi translated">结论</h2><p id="aec8" class="pw-post-body-paragraph jy jz iy kb b kc lw ke kf kg lx ki kj kx mu km kn ky mv kq kr kz mw ku kv kw ig bi translated">既然我们可以通过编程向这三个站点发布内容，我们就可以构建一个允许动态输入的应用程序，比如一个文件阅读器将一个<code class="fe mx my mz na b">.md</code>文件传递给请求<code class="fe mx my mz na b">content</code>和<code class="fe mx my mz na b">contentMarkdown</code>参数，编辑帖子，以及其他许多事情。我们</p><p id="aab0" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">保持警惕。我计划花些时间为开发博客们建立一个界面，这样就能做到这一点。在四个不同的网站上手动编辑每个帖子中的相同文本并不有趣。我希望解决那个问题。</p><p id="50c7" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">祝你好运！</p><p id="eb0e" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated">通过Twitter <a class="ae lt" href="https://twitter.com/CodyBontecou" rel="noopener ugc nofollow" target="_blank"> @codybontecou </a>让我知道你对这篇文章的看法</p><p id="6df3" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj kx kl km kn ky kp kq kr kz kt ku kv kw ig bi translated"><em class="ka">更多内容看</em> <a class="ae lt" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb iz"> <em class="ka">说白了就是io </em> </strong> </a> <strong class="kb iz"> <em class="ka">。</em> </strong> <em class="ka">报名参加我们的</em> <a class="ae lt" href="http://newsletter.plainenglish.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="kb iz"> <em class="ka">免费每周简讯点击这里</em> </strong> </a> <strong class="kb iz"> <em class="ka">。</em> </strong></p></div></div>    
</body>
</html>
<html>
<head>
<title>Should I use Node.js to Process My Images?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我应该使用Node.js来处理我的图像吗？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/should-i-use-node-js-to-process-my-images-3f5c5f208ad5?source=collection_archive---------16-----------------------#2021-05-17">https://javascript.plainenglish.io/should-i-use-node-js-to-process-my-images-3f5c5f208ad5?source=collection_archive---------16-----------------------#2021-05-17</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><p id="13e6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Node.js中处理图像的选项数量惊人。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="gh gi kl"><img src="../Images/bec699285373d1e4d537df829157cc15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*euQVtNiapNszHsZ5aVTmxQ.png"/></div></div><figcaption class="kx ky gj gh gi kz la bd b be z dk">Photo Illustration by David Fekke using Adobe PhotoShop</figcaption></figure><p id="1d22" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">最初发布于</em><a class="ae lc" href="https://fek.io/blog/should-i-use-node-js-to-process-my-images/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://fek . io</em></a><em class="lb">。</em></p><p id="1dd6" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">我最喜欢的定律之一是阿特伍德定律。<strong class="jp ir">阿特伍德定律</strong>陈述:任何<em class="lb">可以</em>用JavaScript编写的应用，<em class="lb">最终会</em>用JavaScript编写。我对可以用JavaScript编写的应用程序感到震惊。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi ld"><img src="../Images/8888ac4f1087283608c60b257252a303.png" data-original-src="https://miro.medium.com/v2/resize:fit:316/format:webp/0*zwbt_aXlRCziDjIT.png"/></div></figure><p id="6ad8" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">如果你不熟悉杰夫·阿特伍德，他写了一个很受欢迎的博客<a class="ae lc" href="https://codinghorror.com" rel="noopener ugc nofollow" target="_blank">编码恐怖</a>。</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi le"><img src="../Images/45f5f30c342e3b22a3d975ba10e65dd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/0*7wDxwF1Usa_JzX9Q.jpg"/></div></figure><p id="307c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">当你问自己是否应该使用Node.js来处理图像时，这个问题绝对符合阿特伍德定律。</p><h1 id="ca0c" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">图像处理</h1><p id="c138" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">我在90年代的第一份编程工作是编写一个AppleScript，它可以利用Adobe PhotoShop为我当时工作的公司试图建立的高分辨率图书馆创建图像。众所周知，当时Adobe没有Photoshop内置的脚本功能。我找到了一个Photoshop插件，它可以让我编写代码，命令Photoshop自动处理我们的图像需求。</p><p id="ce51" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在有各种各样的工具供我们处理图像，这些工具都可以编写脚本。但是Node.js呢？原来Node.js中有很多图像处理工具，可以通过<a class="ae lc" href="https://npmjs.com" rel="noopener ugc nofollow" target="_blank"> NPM </a>获得。</p><p id="09bb" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">有许多可能需要图像处理的用例。这里有几个这样的用例；</p><ul class=""><li id="5713" class="mi mj iq jp b jq jr ju jv jy mk kc ml kg mm kk mn mo mp mq bi translated">转换成不同的文件格式</li><li id="7ef4" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">调整图像大小</li><li id="25f6" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">裁剪图像</li><li id="49d5" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">制作合成图像</li><li id="ce61" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">进行颜色校正</li><li id="54a9" class="mi mj iq jp b jq mr ju ms jy mt kc mu kg mv kk mn mo mp mq bi translated">创建模糊和效果</li></ul><p id="de19" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">几年前，我开发了一个名为jimp-appicon的工具，用于为iOS/iPadOS和Android应用程序创建图标。苹果和谷歌都需要这些正方形图像的许多不同尺寸，以便为不同屏幕尺寸的所有不同设备创建图标。</p><h1 id="4cf4" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">吉姆普</h1><p id="f363" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated"><a class="ae lc" href="https://github.com/oliver-moran/jimp" rel="noopener ugc nofollow" target="_blank"> Jimp </a>，一款以流行的GIMP图像处理应用命名的工具，是一款完全用JavaScript编写的图像处理工具。它没有任何外部依赖性，可以在任何处理器架构上运行。</p><p id="341c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">Jimp还有一个易于理解的API，它带有一个promise库，允许Node.js开发人员在一个图像上运行多个操作。在下面的例子中，我们将采用Lenna图像，并将其调整为256像素见方，使其灰度化，并将我们的结果保存为JPEG。下面是原图:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/642bb68f9c1a928337bc3e5a46a2ddc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/0*k9X1dasNmsyu095P.png"/></div></figure><p id="8b4a" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">现在我们将运行下面的脚本来创建新的灰度JPEG图像。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="22fd" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">生成的图像将类似于下图:</p><figure class="km kn ko kp gt kq gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/49c679648015e6f2a8e8dd826f566ae1.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/0*jEZAcNTbg0Ckn5a9.jpg"/></div></figure><h1 id="bdde" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">锋利的</h1><p id="9072" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">几年前，当我第一次使用《盖茨比》时，我偶然发现了这个清晰的T2图像模块。盖茨比在他们的图像插件中使用了夏普图像模块。这非常快，因为它主要是作为Node.js的本机模块用C++代码编写的，并且与Node.js的其他本机图像模块不同，它可以在大多数处理器架构上编译和运行。所以如果你运行在大型x86_64服务器上，或者运行在ARM处理器上的Raspberry Pi上。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><h1 id="1a9f" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">PhotoShop和Adobe Generator核心</h1><p id="ea82" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">PhotoShop可能是我一直以来最喜欢的应用程序。我用PhotoShop已经30年了。Adobe在2013年创造了一种使用Node.js向PhotoShop添加插件的方法，它被称为<a class="ae lc" href="https://github.com/adobe-photoshop/generator-core" rel="noopener ugc nofollow" target="_blank"> Adobe Generator-core </a>。如果您想在PhotoShop中使用特定的功能，现在可以编写Node.js代码，将插件选项添加到PhotoShop中并执行该脚本。下面是一个生成器插件的示例，它可以使用名为“路径1”的路径，在PhotoShop中创建一个新图层，只包含该路径中选定的内容:</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="mx my l"/></div></figure><p id="6245" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">虽然可以同时使用PhotoShop和Node.js非常好，但将Node.js和PhotoShop放在同一台服务器上是不现实的。加上PhotoShop只在Windows和MacOS上运行。</p><h1 id="b4ba" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">用Sharp-AppIcon制作AppIcon</h1><p id="c144" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">我决定用Sharp写一个新的AppIcon maker，因为它性能很好。它可以在大约一秒钟内为你的iOS/iPadOS和Android应用程序创建所有你需要的图标。以下是如何安装和使用<a class="ae lc" href="https://www.npmjs.com/package/sharp-appicon" rel="noopener ugc nofollow" target="_blank"> Sharp-AppIcon </a>的方法。确保您的计算机上安装了Node.js。然后，您可以使用以下命令全局NPM安装<a class="ae lc" href="https://www.npmjs.com/package/sharp-appicon" rel="noopener ugc nofollow" target="_blank"> sharp-appicon </a>:</p><pre class="km kn ko kp gt na nb nc nd aw ne bi"><span id="9b78" class="nf lg iq nb b gy ng nh l ni nj">$ sudo npm install sharp-appicon -g</span></pre><p id="1ba4" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">一旦它完成了这个模块的安装，您就可以在命令行中使用<code class="fe nk nl nm nb b">appicon</code>命令来执行它。你只需要导航到你的源图标的位置。它应该是一个尺寸为1536像素乘1536像素的图像。假设你的图标叫做‘myapp icon . png’。您可以通过运行以下命令来创建appicons:</p><pre class="km kn ko kp gt na nb nc nd aw ne bi"><span id="6117" class="nf lg iq nb b gy ng nh l ni nj">$ appicon MyAppIcon.png</span></pre><p id="f53c" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated">这将创建一个名为“icons”的目录，其中包含iOS/iPadOS和Android应用程序所需的所有图标。观看下面的视频，了解如何使用该工具。</p><figure class="km kn ko kp gt kq"><div class="bz fp l di"><div class="nn my l"/></div></figure><h1 id="8684" class="lf lg iq bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结论</h1><p id="e49a" class="pw-post-body-paragraph jn jo iq jp b jq md js jt ju me jw jx jy mf ka kb kc mg ke kf kg mh ki kj kk ij bi translated">使用Node.js创建缩略图、创建简单操作以及将图像裁剪和保存为不同格式是非常实用的。您不必使用这些模块，您也可以选择使用与<a class="ae lc" href="http://www.graphicsmagick.org/index.html" rel="noopener ugc nofollow" target="_blank"> GraphicsMagic </a>和<a class="ae lc" href="https://imagemagick.org/script/index.php" rel="noopener ugc nofollow" target="_blank"> ImageMagic </a>一起工作的模块。</p><p id="12e9" class="pw-post-body-paragraph jn jo iq jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ij bi translated"><em class="lb">更多内容尽在</em><a class="ae lc" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="lb">plain English . io</em></a></p></div></div>    
</body>
</html>
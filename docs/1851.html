<html>
<head>
<title>Why You Should Not Use Classes in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么不应该在JavaScript中使用类</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/why-you-should-not-use-classes-in-javascript-ca960d13c625?source=collection_archive---------0-----------------------#2021-04-19">https://javascript.plainenglish.io/why-you-should-not-use-classes-in-javascript-ca960d13c625?source=collection_archive---------0-----------------------#2021-04-19</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/261fe70e0e31128fa4320380a3d22643.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*opMIsXdvtWxNycppDjY8Zw.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Photo Illustration by David Fekke</figcaption></figure><figure class="kc kd ke kf gt jr"><div class="bz fp l di"><div class="kg kh l"/></div></figure><p id="94ae" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">我最近写了一篇关于我喜欢用JavaScript创建对象的方式的<a class="ae lg" href="https://fek.io/blog/crockford-objects-in-java-script" rel="noopener ugc nofollow" target="_blank">帖子</a>。我把这种类型的对象创建称为“Crockford Objects”，以“<a class="ae lg" href="https://www.amazon.com/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742" rel="noopener ugc nofollow" target="_blank"> JavaScript: The Good Parts </a>”的作者道格拉斯·克洛克福特的名字命名。</p><figure class="kc kd ke kf gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi lh"><img src="../Images/88781cf3d222b1f5157eaecbed48d8ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OrRhQX-kH-A4Fq9ufN-EJQ.jpeg"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Douglas Crockford</figcaption></figure><p id="180c" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">我收到了很多人的反馈，他们告诉我我没有解释为什么他们不应该在JavaScript中使用<strong class="kk ir">类</strong>关键字。我没有解释为什么，因为我不是说你不能使用它，我只是不喜欢使用<strong class="kk ir"> class </strong>关键字来定义一个对象。</p><h1 id="4811" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak"> JavaScript不是面向对象的语言</strong></h1><p id="dd70" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">如果你熟悉JavaScript的历史，Brendan Eich被告知他将能够为基于Scheme的Netscape Navigator编写脚本语言。<a class="ae lg" href="https://www.scheme.com/tspl4/" rel="noopener ugc nofollow" target="_blank"> Scheme </a>是一种函数式编程语言。然后艾希被告知，它必须看起来类似于Java，因此得名‘JavaScript’。哦，顺便说一下，他只有两周时间来完成。</p><p id="1d7a" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">所以JavaScript从来就不是面向对象的语言。它实际上是一种面向原型的语言。</p><p id="d1ff" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">道格拉斯·克洛克福特喜欢开玩笑说，大多数开始使用JavaScript的开发人员都懒得先学习这门语言。如果你开始研究这种语言，你会发现它与Java和C#有很多相似之处。在Java和C#中，你将类定义为新对象的模板。在JavaScript中，一切都是对象。</p><p id="3a46" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">作为对C#和Java开发人员的让步，类被添加到JavaScript中。在幕后，JavaScript引擎仍然以同样的方式创建对象。</p><h1 id="fbfe" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">装订</strong></h1><p id="c1a0" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">绑定是长期React开发人员在其应用程序中熟悉的一个问题。用类定义的对象必须显式使用“this”关键字。如果将类方法传递给回调，可能会遇到绑定问题。这就是为什么你会看到很多代码中的方法必须绑定到正确的上下文。我们来看一个例子；</p><figure class="kc kd ke kf gt jr"><div class="bz fp l di"><div class="ml kh l"/></div></figure><p id="57fb" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">从上面的例子可以看出,“myMethod”函数被绑定回了自身。为了在构造函数中执行这个函数，我们不得不使用' this '关键字三次。</p><h1 id="4030" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">继承<strong class="ak">不好</strong></h1><p id="3637" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">当我第一次学习面向对象编程时，我学到的三个主要特性之一是继承。你可以用<strong class="kk ir"> extends </strong>关键字从一个基类扩展来实现。</p><pre class="kc kd ke kf gt mm mn mo mp aw mq bi"><span id="e96d" class="mr lj iq mn b gy ms mt l mu mv">class Cat extends Animal {</span><span id="4fec" class="mr lj iq mn b gy mw mt l mu mv">// Body here</span><span id="9ed8" class="mr lj iq mn b gy mw mt l mu mv">}</span></pre><p id="7837" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">在JavaScript中，这是由父类的prototype属性的委托来完成的。这种类型的操作有性能方面的考虑，但这不是避免继承的主要原因。</p><p id="9962" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">即使在真正的面向对象语言中，也应该避免继承。开发人员在继承链中遇到的一个常见问题是脆弱的基类问题。这有时被称为大猩猩/香蕉问题。主要问题与父对象的紧密耦合有关。如果您需要对父对象进行更改，它会反映到整个对象树中。我目前正在开发一个Java API，这是一个大问题。</p><p id="f84a" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">在大多数情况下，即使在面向对象的语言中，组合对象也是比从父对象继承更好的方法。在像Java或Swift这样的严格类型语言中，从接口或协议继承比从类继承更好。同样在Java和C#中，你可以从一个抽象类继承。</p><h1 id="c8c2" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">封装</strong></h1><p id="15c1" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">封装是面向对象编程的另一个特性，它实际上是一个很好的特性。封装背后的思想是，我们能够通过使用只能从类体内部访问的数据和方法来隐藏对象的实现细节。虽然可以通过使用' # '字符在类内部创建私有函数，但是我们不能在JavaScript中将变量设为私有。</p><figure class="kc kd ke kf gt jr"><div class="bz fp l di"><div class="ml kh l"/></div></figure><p id="4c44" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">从上面的例子可以看出，我们在类的外部设置了类中的所有属性。这违反了面向对象编程的关键原则之一。</p><h1 id="ae68" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">反应过来</strong></h1><p id="e285" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">React是我使用过的前端框架之一，他们最近改变了创建组件的默认方式。以前在React中，你会创建一个扩展React的类。组件'。当React 16.8发布时，他们增加了一个名为“钩子”的新功能。如果你需要在你的组件中管理状态，你可以在你的函数中使用“useState”钩子。这允许我们编写和返回导出函数而不是类的组件。</p><p id="992b" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">使用以前的类，我们将创建如下所示的组件:</p><figure class="kc kd ke kf gt jr"><div class="bz fp l di"><div class="ml kh l"/></div></figure><p id="674c" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">现在，我们可以只使用一个<strong class="kk ir">函数</strong>和<strong class="kk ir">使用状态</strong>钩子来组装同一个组件。</p><figure class="kc kd ke kf gt jr"><div class="bz fp l di"><div class="ml kh l"/></div></figure><p id="1069" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">正如我们从上一个例子中看到的，为一个组件创建一个函数要比我们在前一个例子中使用类容易得多。</p><h1 id="178c" class="li lj iq bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">摘要</h1><p id="207b" class="pw-post-body-paragraph ki kj iq kk b kl mg kn ko kp mh kr ks kt mi kv kw kx mj kz la lb mk ld le lf ij bi translated">当我编写JavaScript对象时，我更喜欢使用工厂函数而不是类。通过使用工厂函数，我们不再需要使用“this”关键字或“new”关键字来创建新对象。仍然有一些原因让你想继续使用JavaScript中的类。在技术上，使用“new”关键字比使用“Object.create”或“Object.freeze”更快，但我们谈论的是几毫秒。</p><p id="8792" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated">Eric Elliot在<a class="ae lg" href="https://medium.com/javascript-scene" rel="noopener"> JavaScript场景</a>中写了许多关于“class”关键字的好文章。我推荐阅读他关于<a class="ae lg" href="https://medium.com/javascript-scene/why-composition-is-harder-with-classes-c3e627dcd0aa" rel="noopener">类</a>关键词的帖子。</p><div class="mx my gp gr mz na"><a href="https://medium.com/javascript-scene" rel="noopener follow" target="_blank"><div class="nb ab fo"><div class="nc ab nd cl cj ne"><h2 class="bd ir gy z fp nf fr fs ng fu fw ip bi translated">JavaScript场景</h2><div class="nh l"><h3 class="bd b gy z fp nf fr fs ng fu fw dk translated">JavaScript、软件领导、软件开发和相关技术。</h3></div><div class="ni l"><p class="bd b dl z fp nf fr fs ng fu fw dk translated">medium.com</p></div></div><div class="nj l"><div class="nk l nl nm nn nj no jw na"/></div></div></a></div><p id="8bd3" class="pw-post-body-paragraph ki kj iq kk b kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf ij bi translated"><em class="np">更多内容尽在</em><a class="ae lg" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><em class="np">plain English . io</em></a></p></div></div>    
</body>
</html>
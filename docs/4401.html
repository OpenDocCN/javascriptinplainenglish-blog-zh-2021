<html>
<head>
<title>TypeScript 4.4 — What’s New?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">TypeScript 4.4 —新增功能？</h1>
<blockquote>原文：<a href="https://javascript.plainenglish.io/typescript-4-4-whats-new-e8274e8d911d?source=collection_archive---------11-----------------------#2021-09-02">https://javascript.plainenglish.io/typescript-4-4-whats-new-e8274e8d911d?source=collection_archive---------11-----------------------#2021-09-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="087f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">JavaScript和TypeScript的粉丝们，让我们一起来吧，因为TypeScript的新版本来了！和往常一样，TypeScript 4.4提供了一些令人惊叹的新特性。让我们一起来发现它们吧！😆</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/a0a262264cb6baba3bd113085246fa51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8TAMNiU_mR27AVlB.png"/></div></div></figure><h1 id="d5b4" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">别名条件和判别式(类型保护变量)的控制流分析</h1><p id="6786" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">这个听起来很奇特也很复杂，但是让我用尽可能简单的方式解释给你听！</p><p id="be96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在TypeScript中，我们通常希望根据变量的类型有不同的行为。假设我们想写一个函数，或者打印一个字符串两次，平方数字，或者如果它是另一种类型就返回参数。</p><p id="ace4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在当前版本的TypeScript中，您需要使用如下的if语句编写一个类型保护。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div></figure><p id="02c8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在每个if语句内部，TypeScript知道arg的类型是string或number。这样做很好，但我们的问题来了，如果要提取类型保护到一个额外的变量，像这样呢？</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Valid way of working in TS 4.4</figcaption></figure><p id="c47e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在TS的早期版本中，这段代码不起作用，但在TypeScript 4.4中它是一种有效的工作方式！🥳</p><h1 id="13e9" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">在Catch变量中默认为<code class="fe md me mf mg b">unknown</code>类型</h1><p id="a0da" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">好的，对于那些喜欢使用试抓块的人来说，这是个好消息！在TypeScript 4.4之前，catch块中的错误将自动属于类型<code class="fe md me mf mg b">any</code>。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Example from the official blogpost</figcaption></figure><p id="d587" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TypeScript 4.4引入了新的<code class="fe md me mf mg b">--useUnknownInCatchVariables</code>标志，它的功能与您想象的完全一样。启用此标志时，catch块中的默认错误类型将是未知的。虽然这听起来没什么大不了的，但它提供了很多可能性。</p><p id="74fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于未知类型，我们能够缩小传递的错误类型。看看这个来自官方博客的例子。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Example from the official blogpost</figcaption></figure><h1 id="b206" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">精确的可选属性类型</h1><p id="1992" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">我将使用官方博客文章中的例子来解释这一点，因为这是一个非常清晰的例子！</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Example from the official blogpost</figcaption></figure><p id="f2c7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这意味着在以前的TypeScript版本中，您可以显式地创建一个年龄为<code class="fe md me mf mg b">undefined</code>的对象。<br/>这当然不是我们对可选属性的期望。我们希望可选属性要么是一个数字，要么不存在于对象中</p><p id="760d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">TypeScript 4.4用<code class="fe md me mf mg b">--exactOptionalPropertyTypes</code>标志解决了这个问题。如果指定此标志，将会发生以下情况。</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="lx ly l"/></div><figcaption class="lz ma gj gh gi mb mc bd b be z dk">Example from the official blogpost</figcaption></figure><h1 id="c2e3" class="ku kv in bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">更多细节，请！</h1><p id="5f74" class="pw-post-body-paragraph jk jl in jm b jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd lw kf kg kh ig bi translated">正在寻找这些特性的更详细的解释或其他新内容吗？查看<a class="ae mh" href="https://devblogs.microsoft.com/typescript/announcing-typescript-4-4/" rel="noopener ugc nofollow" target="_blank">官方博客</a>！</p></div><div class="ab cl mi mj hr mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ig ih ii ij ik"><p id="4ad4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">度过严格意义上的一天！😉</p><p id="510c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="mp">更多内容请看</em><a class="ae mh" href="http://plainenglish.io/" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="mp">plain English . io</em></strong></a></p></div></div>    
</body>
</html>